#game "serpentisle"
#strictbraces "true"

// Global flags
enum Globals {
	SHAMINOS_KEEP_BARRIERS_GONE = 0x0,
	SATIN_GOOD = 0x1,
	STARTING_SPEECH = 0x3,
	BANES_RELEASED = 0x4,
	CAN_SAIL_SHIPS = 0x5,
	EQUIPMENT_EXCHANGED = 0x6,
	TEMP_FLAG_1 = 0x7,
	TEMP_FLAG_2 = 0x8,
	TEMP_FLAG_3 = 0x9,
	TEMP_FLAG_4 = 0xA,
	ASKED_ANDRAL_ABOUT_FAWN = 0xB,
	ASKED_ANDRAL_ABOUT_INN = 0xC,
	FAR_SIGHT_CAMERA_RESET = 0xD,
	CALL_GUARDS_THIEVING = 0xE,
	STEFANO_HAS_BELONGINGS = 0xF,
	GWENNO_HAS_BELONGINGS = 0x10,
	SELINA_HAS_BELONGINGS = 0x11,
	BOYDON_HAS_BELONGINGS = 0x13,
	PETRA_HAS_BELONGINGS = 0x15,
	WILFRED_HAS_BELONGINGS = 0x16,
	DUPRE_HAS_BELONGINGS = 0x17,
	SHAMINO_HAS_BELONGINGS = 0x18,
	IOLO_HAS_BELONGINGS = 0x19,
	ASKED_9TH_CIRCLE = 0x1A,
	ASKED_ARMOR_MATERIALS = 0x1B,
	ASKED_BEASTS = 0x1C,
	ASKED_REAGENTS = 0x1D,
	ASKED_MASS_DEATH = 0x1E,
	ASKED_GINSENG = 0x1F,
	ASKED_CREATE_AUTOMATA = 0x20,
	ASKED_REASONS_FOR_WRITING = 0x21,
	ASKED_OPHIDIAN_WRITING = 0x22,
	ASKED_OTHER_LANDMARKS = 0x23,
	ASKED_CITIES_ESTABLISHED = 0x24,
	ASKED_PRINCIPLES_OF_BALANCE = 0x25,
	ASKED_CLANS_OF_MONITOR = 0x26,
	ASKED_WEAPON_TYPES = 0x27,
	ASKED_WORDS_OF_POWER = 0x28,
	USING_FAR_SIGHT_MAGIC = 0x2A,
	HAVE_HELM_OF_MONITOR = 0x2C,
	TOLD_MARSTEN_SERVES_LORD_BRITISH = 0x2D,
	LORD_MARSTEN_GAVE_PERMISSION = 0x2F,
	FIRST_TALK_WITH_MARSTEN = 0x32,
	CAN_ASK_ABOUT_TEST = 0x33,
	CAN_ASK_LYDIA_ABOUT_POISON = 0x35,
	CAN_ACCUSE_MARSTEN = 0x36,
	PROVED_MARSTEN_IS_TRAITOR = 0x38,
	KNOW_TEST_SECRETS = 0x3B,
	KNOWS_MARSTEN_GIVES_PERMISSION = 0x3C,
	BRENDANN_PROPOSAL = 0x3D,
	HAVE_WOLF_TATTOO = 0x3E,
	BRENDANN_TATTOO_COMPLIMENT = 0x3F,
	DEFEATED_LUTHER = 0x41,
	ASKED_LUTHER_ABOUT_BULLY = 0x42,
	LUTHER_CHALLENGED = 0x43,
	GOBLIN_SIMON_DEAD = 0x44,
	FOUND_BROWN_BOTTLE = 0x45,
	KNOWS_ABOUT_GOBLIN_RAID = 0x46,
	CURED_CANTRA = 0x47,
	AVATAR_IS_KNIGHT = 0x48,
	SLAIN_WOLF = 0x4A,
	RETURNED_URN_TO_CALADIN = 0x4C,
	KNOWS_KRAYG_WALKS_ON_WOODS = 0x4E,
	COURTED_LUCILLA = 0x53,
	ACCEPTED_LUCILLA_PROPOSAL = 0x54,
	KNOWS_OF_LUCILLA_AND_SPEKTOR = 0x55,
	HEARD_BATLIN_IS_THIEF = 0x56,
	HEARD_ABOUT_CREMATION = 0x57,
	ASKED_ANDRAL_ABOUT_ROBBERY = 0x58,
	HEARD_ABOUT_WILFRED = 0x59,
	CURED_LYDIA_POISON = 0x5A,
	WILL_FIND_CANTRA = 0x5B,
	KNOW_BROWN_BOTTLE_IS_FAWNISH_ALE = 0x5F,
	AVATAR_GOT_SHORT_STICK = 0x60,
	DUPRE_IS_TOAST = 0x61,
	TALKED_KRAYG_ABOUT_TRAITOR_MARSTEN = 0x69,
	CALADIN_IS_DEAD = 0x72,
	KNOWS_ABOUT_VARO_LEAVES = 0x76,
	IOLO_MADE_EQUIPMENT_LIST = 0x78,
	KNOWS_CANTRA_IS_MISSING = 0x79,
	STORM_FISHNET_STOCKINGS_SELINA = 0x7A,
	STORM_FISHNET_STOCKINGS = 0x7B,
	KNOWS_FISHNET_STOCKINGS_ORIGIN = 0x7C,
	GAVE_WOLF_TO_CELIA = 0x7D,
	HAVE_WOLF_CLOAK = 0x7E,
	KNOWS_ABOUT_MONITOR_CLANS = 0x7F,
	ASKED_SHMED_ABOUT_TEST = 0x80,
	BEGAN_KNIGHTS_TEST = 0x82,
	MONITOR_TRAINING = 0x83,
	TRAINING_FLAG_SET = 0x84,
	LEAVING_LIST_FIELD = 0x85,
	GAINED_GWANI_CLOAK = 0x8A,
	VIEWING_CANTRA_ABDUCTION = 0x8B,
	KNOW_BATLIN_HAS_CANTRA = 0x8C,
	ASKED_STANDARR_ABOUT_BRUNT = 0x8D,
	KNOWS_BATLIN_WAS_IN_MONITOR = 0x8E,
	ASK_LUCILLA_ABOUT_ANDRAL = 0x8F,
	REFUSED_TO_RETURN_URN = 0x90,
	GAVE_WOLF_TO_LUCILLA = 0x91,
	PROVED_SPEKTOR_IS_TRAITOR = 0x92,
	KNOW_MARSTEN_IS_TRAITOR = 0x93,
	KNOW_SPEKTOR_IS_TRAITOR = 0x94,
	HARNNA_TALKED_CRYSTAL_BALL = 0x95,
	TOLD_CANTRA_IS_ALIVE = 0x96,
	ASKED_HARNNA_TOO_MUCH = 0x97,
	POISONED_BY_LYDIA = 0x98,
	ASK_BRENDANN_ABOUT_STOCKINGS = 0x99,
	ASK_CALADIN_ABOUT_URN = 0x9A,
	ASK_KRAYG_ABOUT_PUMICE = 0x9B,
	ASK_LUCILLA_ABOUT_LOST_RING = 0x9C,
	ASK_CELLIA_ABOUT_FUR_CAP = 0x9D,
	ASK_KRAYG_ABOUT_SLIPPERS = 0x9E,
	ASK_STANDARR_ABOUT_BREASTPLATE = 0x9F,
	ASK_TEMPLAR_ABOUT_HAIRBRUSH = 0xA0,
	ASK_SIMON_ABOUT_STRANGE_WINE = 0xA1,
	ASK_SPEKTOR_ABOUT_STRANGE_COINS = 0xA2,
	ASK_RENFRY_ABOUT_HAND = 0xA3,
	ASKED_TEMPLAR_ABOUT_GOBLINS = 0xA4,
	RENOUNCED_BRITISH = 0xA5,
	ASKED_KRAYG_ABOUT_RUINS = 0xA6,
	ASKED_SPEKTOR_ABOUT_GWENNO = 0xA7,
	ASKED_SHAZZANA_ABOUT_SAILOR = 0xA8,
	KNOWS_IOLO_IMPRISONED = 0xA9,
	TALKED_TO_IMPRISONED_IOLO = 0xAA,
	HAS_CLUE_MONITOR_SHIELD = 0xAC,
	BRENDANN_CALLED_LUTHER_BRAGGART = 0xAD,
	LUCILLA_SAYS_LUTHER_REPULSIVE = 0xAE,
	CALLED_LUTHER_BRAGGART = 0xAF,
	CALLED_LUTHER_REPULSIVE = 0xB0,
	CALLED_LUTHER_BULLY = 0xB1,
	HAS_DUPRE_SHIELD = 0xB2,
	TELL_SPEKTOR_ABOUT_TRAITOR = 0xB3,
	SPEKTOR_ADMITS_HIS_CRIMES = 0xB4,
	MARSTEN_WONT_RELEASE_IOLO = 0xB5,
	KNOW_OF_MONITOR_THIEF = 0xB6,
	DUPRE_MADE_EQUIPMENT_LIST = 0xB7,
	TRIED_SIMONS_ALE = 0xB8,
	PAID_IOLO_FINE = 0xB9,
	ASKED_STANDARR_ABOUT_QUESTS = 0xBA,
	KNOWS_CALADIN_IS_TRAINER = 0xBB,
	ASKED_CANTRA_ABOUT_TEST = 0xBC,
	TOLD_MARSTEN_ABOUT_IOLO = 0xBD,
	CREMATED_PIKEMAN = 0xBE,
	MONITOR_BANQUET_STARTED = 0xBF,
	KNOWS_GOBLINS_HIDEOUT = 0xC0,
	HAVE_SPEKTOR_KEY = 0xC1,
	AVATAR_IS_POISONED = 0xC2,
	BRENDANN_GAVE_JAIL_KEY = 0xC4,
	KNOWS_SHMED_IS_TRAITOR = 0xC5,
	FOUND_CANTRAS_FATHER = 0xC6,
	TOLD_HARNNA_FOUND_SCROLL = 0xC7,
	CREATED_BROWN_BOTTLE = 0xC8,
	PIBB_IS_DEAD = 0xC9,
	LYDIA_CONFESSES = 0xCA,
	HARNNA_SPOKE_ABOUT_POX = 0xCB,
	POMDIRGUN_IS_DEAD = 0xCC,
	MARSTEN_GAVE_JAIL_KEY = 0xCD,
	FIXED_BLACK_SWORD = 0xCE,
	ARCADION_IN_SWORD = 0xCF,
	ANARCHY_BANE_IN_SWORD = 0xD0,
	WANTONNESS_BANE_IN_SWORD = 0xD1,
	INSANITY_BANE_IN_SWORD = 0xD2,
	WANTONNESS_BANE_DEAD = 0xD3,
	ANARCHY_BANE_DEAD = 0xD4,
	INSANITY_BANE_DEAD = 0xD5,
	MET_ERNESTO = 0xD6,	// Guessing from Beta flag names
	HAVE_TALKING_SCROLL = 0xD7,
	ASKED_ROCCO_ABOUT_ROOM = 0xD8,
	POTHOS_RETURNED = 0xD9,
	FILBERCIO_BANQUET_WILL_HAPPEN = 0xDA,
	HAVE_NEW_SPELLBOOK = 0xDB,
	KNOWS_POTHOS_SECRET = 0xDC,
	HELPED_POTHOS = 0xDD,
	NEED_FRESH_MANDRAKE = 0xDE,
	KNOW_ABOUT_MOSH = 0xDF,
	HAVE_CATACOMBS_KEY = 0xE0,
	GAVE_MOSH_FISH = 0xE1,
	CAUGHT_WITH_FRIGIDAZZI = 0xE2,
	FINISHED_LIGHTNING_EXPERIMENT = 0xE3,
	FEDABIBLIO_ANALYSES_RESULTS = 0xE4,
	HAVE_MIRROR_OF_TRUTH = 0xE5,
	RESTORED_EDRIN = 0xE6,
	ANDRIO_SPOKE_ABOUT_DELIN = 0xE7,
	WILL_HELP_POTHOS = 0xE8,
	SCROLL_SPEAKS = 0xE9,
	KNOWS_ROTOLUNCIA_IS_KIDNAPPER = 0xEA,
	AUTOMATON_SPOKE_ABOUT_KIDNAP = 0xEB,
	CAN_USE_FILBERCIOS_BARGE = 0xEC,
	KNOWS_ABOUT_TUNNELS = 0xED,
	COLUMNA_SPOKE_ABOUT_MOSH = 0xEE,
	AVATAR_BELIEVES_MOSH = 0xEF,
	CRYSTAL_BALL_WILL_SHOW_EDRIN = 0xF0,
	FEBABIBLIO_SAVED = 0xF1,
	KNOW_ALE_IS_EDRIN = 0xF2,
	EDRIN_DREAMS_OF_SIRANUSH = 0xF3,
	KNOWS_ANDRIO_SCARED = 0xF4,
	KNOWS_FEDABIBLIO_IS_STATUE = 0xF5,
	OBTAINED_SCROLL_OF_SERPENT = 0xF6,
	STEFANO_GAVE_TEETH = 0xFA,
	STEFANO_SPOKE_ROCK_SERPENT = 0xFB,
	GOT_CRIME_CERTIFICATE = 0xFC,
	GOT_COMB_OF_BEAUTY = 0xFD,
	DUCIO_SPOKE_ABOUT_GUSTACIO = 0xFE,
	KNOWS_OF_SOUL_GEMS = 0xFF,
	HAVE_HAWKS_KEY = 0x100,
	ASKED_BUCIA_TOO_MUCH = 0x103,
	BLUE_EGG_IS_ROTTEN = 0x104,
	HAS_CLUE_FISHNET_STOCKINGS = 0x106,
	ASKED_BUCIA_ABOUT_PINECONE = 0x108,
	ASKED_FEDABIBLIO_ABOUT_BLUE_EGG = 0x10A,
	HAS_CLUE_PINECONE = 0x10B,
	HAS_CLUE_BLUE_EGG = 0x10C,
	HAS_CLUE_BEAR_SKULL = 0x10E,
	HAS_CLUE_URN = 0x10F,
	HAS_CLUE_LAB_APPARATUS = 0x110,
	KNOWS_DUCIO_IS_ARTISAN = 0x111,
	HAS_CLUE_PUMICE = 0x112,
	HAS_CLUE_LOST_RING = 0x113,
	HAS_BAD_CLUE_SLIPPERS = 0x114,
	HAS_CLUE_SLIPPERS = 0x115,
	HAS_CLUE_STRANGE_BRUSH = 0x116,
	HAS_CLUE_BLOODY_HAND = 0x117,
	HAS_CLUE_SHIELD = 0x118,
	BUCIA_SPOKE_STONEHEART = 0x119,
	HAS_CLUE_RUDDY_ROCK = 0x11A,
	KNOWS_CELENNIA_DISAPPEARED = 0x11B,	// Guessing based on context
	HAVE_1ST_ENERGY_GLOBE = 0x11C,
	HAVE_2ND_ENERGY_GLOBE = 0x11D,
	MELINO_HATES_AVATAR = 0x11E,
	WONT_HELP_POTHOS = 0x11F,
	ERNESTO_IS_DEAD = 0x120,
	SEEN_RED_LIGHTNING = 0x121,
	SEEN_YELLOW_LIGHTNING = 0x122,
	SEEN_GREEN_LIGHTNING = 0x123,
	GOT_FRIGIDAZZI_DATE = 0x125,
	TORRISSIO_HATES_AVATAR = 0x127,
	SAW_EDRIN_TRANSFORM = 0x128,
	SEANCE_CHRISTOPHER = 0x129,
	KNOWS_MAGIC_COMPASS = 0x12A,
	SHAMINO_RESURRECTED_BY_MONKS = 0x12B,
	SEEKING_SOUL_TRAP_SECRET = 0x12D,
	POTHOS_SPOKE_ABOUT_FREEDOM = 0x12E,
	FLINDO_PROMISED_MAGELORD_AUDIENCE = 0x12F,
	FLINDO_SECURED_MAGELORD_AUDIENCE = 0x130,
	SEANCE_GWENNO = 0x131,
	KNOWS_ABOUT_SEANCE = 0x132,
	ROTOLUNCIA_KIDNAPPED_AVATAR = 0x133,
	ROTOLUNCIA_KIDNAP_REVEAL = 0x134,
	AFTER_FREEDOM_NEWS = 0x135,
	TORRISSIO_HAS_MAGIC_WAND = 0x136,
	HAVE_STEFANOS_KEY = 0x137,
	KNOWS_PETRA_DESPAIRS = 0x139,
	SHAMINO_TELEPORTED_BY_MONKS = 0x13A,
	TORRISSIO_HAS_MOONSILK_STOCKINGS = 0x13B,
	REFUSED_TO_GIVE_MOONSILK_STOCKINGS = 0x13C,
	KNOWS_TURTLE_MANTRA = 0x13D,
	GOT_DATE_WITH_BUCIA = 0x13E,
	MORTEGRO_KIDNAP_SUSPECT = 0x13F,
	SHOULD_TELL_JULIA_OF_KIDNAP = 0x140,
	SHOULD_TELL_FILBERCIO_OF_KIDNAP = 0x141,
	TORRISSIO_KIDNAP_SUSPECT = 0x142,
	PAID_JULIA_FOR_INVESTIGATION = 0x143,
	JULIA_ISNT_INVESTIGATING_KIDNAP = 0x144,
	KNOWS_ERSTAM_PASSWORD = 0x145,
	GOT_MAGELORD_SUMMONS = 0x146,
	KNOWS_ABOUT_PHILANDERERS_FRIEND = 0x147,
	FIGHT_ROTOLUNCIA = 0x148,
	THOXA_REVIVED_STEFANO = 0x149,
	HAVE_BIRD_CAGE = 0x14A,
	HAVE_CHILL_SPELL = 0x14B,
	HAS_CLUE_RING = 0x14C,
	DELIN_MAD_AT_AVATAR = 0x14D,
	CLEARED_FAWN_TOWER = 0x14E,
	FIRST_FAWN_GUARD_ENCOUNTER = 0x14F,
	CARRY_DELPHYNIAS_LETTER = 0x150,
	OBTAINED_SCOTS_MAP = 0x151,
	ACCEPTED_RUGGS_LETTER = 0x152,
	KNOWS_JENDON_MET_GWENNO = 0x155,
	ASKED_JENDON_DAEMON_ARTIFACTS = 0x156,
	DELIN_SAID_MOONSHADE = 0x157,
	ASK_DELIN_ABOUT_BATLIN = 0x158,
	JORVIN_KNOWS_AVATAR_NOT_MONITORIAN = 0x15B,
	HAVE_YELINDA_AUDIENCE = 0x15C,
	KALEN_IS_DEAD = 0x15D,
	KYLISTA_CAUGHT = 0x15E,
	LEON_SPOKE_FELLOWSHIP = 0x15F,
	LEON_SPOKE_INNER_VOICE = 0x160,
	LEON_SPOKE_TRUST = 0x161,
	LEON_SPOKE_UNITY = 0x162,
	LEON_SPOKE_WORTHINESS = 0x163,
	OLON_SPOKE_STORMS = 0x164,
	OLON_NEEDS_DRINK = 0x165,
	PRESSED_EARTHQUAKE_SWITCH = 0x166,
	REFUSED_RUGGS_LETTER = 0x167,
	FIRST_RUGGS_ENCOUNTER = 0x168,
	SCOTS_SAID_FELLOWSHIP = 0x169,
	SCOTS_SAID_LEON = 0x16A,
	PRESSED_ORACLE_SPEAK_SWITCH = 0x16B,
	PRESSED_ORACLE_SWITCH1 = 0x16C,
	PRESSED_ORACLE_SWITCH2 = 0x16D,
	ORACLE_SET_TO_INNOCENT = 0x16E,
	ORACLE_SET_TO_CORRUPT = 0x16F,
	IOLO_HAS_DIAMOND_NECKLACE = 0x170,
	FAWN_TRIAL_DONE_FIRST_DAY = 0x170,
	FAWN_TRIAL_RECESS = 0x171,
	FAWN_TRIAL_DONE = 0x172,
	DUPRE_ACCUSED = 0x173,
	IOLO_ACCUSED = 0x174,
	SHAMINO_ACCUSED = 0x175,
	FAWN_TRIAL_ALYSSAND_SPOKE = 0x176,
	FAWN_TRIAL_DELIN_SPOKE = 0x177,
	FAWN_TRIAL_DELPHYNIA_SPOKE = 0x178,
	FAWN_TRIAL_JENDON_SPOKE = 0x179,
	FAWN_TRIAL_JORVIN_SPOKE = 0x17A,
	FAWN_TRIAL_VOLDIN_SPOKE = 0x17B,
	FAWN_TRIAL_KYLISTA_SPOKE = 0x17C,
	FAWN_TRIAL_LEON_JOTH_SPOKE = 0x17D,
	FAWN_TRIAL_OLON_SPOKE = 0x17E,
	FAWN_TRIAL_RUGGS_GARTH_SPOKE = 0x17F,
	FAWN_TRIAL_SCOTS_SPOKE = 0x180,
	FAWN_TRIAL_YELINDA_SPOKE = 0x181,
	FAWN_TRIAL_ZULITH_SPOKE = 0x182,
	GOT_FAWN_TRIAL_SUMMONS = 0x187,
	KNOW_FAWN_MEANING = 0x189,
	YELINDA_SPOKE_ORACLE = 0x18A,
	IOLO_SINGS_FAWN = 0x18B,
	FAWN_INITIAL_STORM = 0x18C,
	DELIN_SPOKE_FRELI = 0x18D,
	ZULITH_TAILING_PARTY = 0x18E,
	ZULITH_CAUGHT_TAILING = 0x18F,
	IOLO_HAS_SUNG_FAWN = 0x190,
	HAS_CLUE_PINECONE_OLON = 0x191,
	HAS_CLUE_MOONSILK_STOCKINGS = 0x192,
	ASK_DELPHYNIA_APPARATUS = 0x193,
	ASK_DELPHYNIA_PUMICE = 0x194,
	ASK_DELIN_FUR_CAP = 0x195,
	ASK_DELIN_SLIPPERS = 0x196,
	ASK_DELPHYNIA_BLUE_EGG = 0x197,
	ASK_JORVIN_STRANGE_HAIRBRUSH = 0x198,
	HAS_CLUE_DEAD_CAT = 0x199,
	JENDON_SPOKE_STRANGE_COINS = 0x19A,
	ASK_JORVIN_SKULL = 0x19B,
	ASK_JORVIN_SHIELD = 0x19C,
	ASK_DELPHYNIA_GLOWING_ROCK = 0x19D,
	ASK_ALYSSAND_FISHNET_STOCKINGS = 0x19E,
	JENDON_SPOKE_MONITOR = 0x19F,
	ASKED_JENDON_TOO_MUCH = 0x1A0,
	DELIN_WILL_GIVE_DISCOUNT = 0x1A1,
	DELIN_GAVE_DISCOUNT = 0x1A2,
	DELIVERED_RUGGS_LETTER = 0x1A3,
	GOT_GAUNTLETS_BACK = 0x1A4,
	DELPHYNIA_SPOKE_VARO_LEAVES = 0x1A5,
	CAUGHT_VOLDIN = 0x1A6,
	HAS_DELPHYNIA_LETTER = 0x1A7,	// Based on beta flag names
	ALYSSAND_GAVE_KEY = 0x1A8,
	ASK_ONLON_GWANI = 0x1A9,
	JENDON_SPOKE_STRANGE_OBJECTS = 0x1AA,
	TRIAL_ASK_JENDON_SAVAGES = 0x1AB,
	TRIAL_ASK_DELIN_FUR_CAP = 0x1AC,
	TRIAL_ASK_JENDON_STRANGE_OBJECTS = 0x1AD,
	TRIAL_ASK_DELPHYNIA_VARO_LEAVES = 0x1AE,
	TRIAL_ASK_ALYSSAND_RING = 0x1AF,
	TRIAL_ZULITH_SPOKE_BEFORE = 0x1B0,
	KNOW_YELINDAS_DIAMOND_NECKLACE = 0x1B1,
	ZULITH_SPOKE_RING = 0x1B2,
	AVATAR_JOINED_REBELS = 0x1B3,
	ALYSSAND_LIKES_AVATAR = 0x1B4,
	AUDIENCE_WITH_YELINDA = 0x1B5,
	JORVIN_SUMMONS_AVATAR = 0x1B6,
	WILL_GET_PHOENIX_EGG = 0x1B7,
	DOING_ERSTAM_EXPERIMENT = 0x1B8,
	ASK_ERSTAM_IF_BOYDON_CAN_JOIN = 0x1B9,
	ERSTAM_LETS_BOYDON_JOIN = 0x1BA,
	BOYDON_LIVES = 0x1BB,
	HAVE_PHOENIX_EGG = 0x1BC,
	AVATAR_HAS_JAWBONE = 0x1BD,
	ERSTAM_SPOKE_TELEPORTATION = 0x1BE,
	TOLD_ERSTAM_PASSWORD = 0x1BF,
	MET_BOYDON_AS_HEAD = 0x1C0,
	VASEL_SPOKE_JAWBONE = 0x1C1,
	GOT_MOONSHADE_TOOTH = 0x1C2,
	GOT_MAD_MAGE_TOOTH = 0x1C3,
	GOT_MONK_ISLE_TOOTH = 0x1C4,
	ERSTAM_EXPERIMENT_FINISHED = 0x1C5,
	ERSTAM_DONE_IMMORTALITY = 0x1C6,
	ERSTAM_DONE_RIDDLE = 0x1C7,
	ERSTAM_SPOKE_DISTURB = 0x1C8,
	ERSTAM_GAVE_KEY = 0x1C9,
	ASK_TEMPLAR_ARGUS = 0x1CA,
	BOATING_TO_MOONSHADE = 0x1CB,
	HAWK_IN_MOONSHADE = 0x1CC,
	KNOW_PIKEMEN_HAVE_HAWK = 0x1CD,
	PIKEMEN_SPOKE_HAWK = 0x1CE,
	ASK_SELINA_KEY = 0x1CF,
	PAID_HAWK_RANSOM = 0x1D1,
	HEARD_BEATRIX_SONG = 0x1D3,
	HEARD_MOUNTAIN_SONG = 0x1D4,
	HEARD_GWANI_SONG = 0x1D5,
	HEARD_FOREST_MASTER_SONG = 0x1D6,
	HEARD_DREAM_SONG = 0x1D7,
	HEARD_WHITE_DRAGON_SONG = 0x1D8,
	HEARD_ARGUS_ACCUSATIONS = 0x1D9,
	MASTER_SWITCH_IS_ACTIVE = 0x1E0,
	WILFRED_HAS_JOINED = 0x1E1,
	BRAVE_SIR_WILFRED_RAN_AWAY = 0x1E2,
	WILFRED_KICKED_OUT = 0x1E3,
	DEVRA_SPOKE_OF_ANGUS_DISAPPEARANCE = 0x1E4,
	SELINA_GAVE_KEY = 0x1E5,
	GOT_GOLD_BARS = 0x1E6,
	SELINA_WARNED_WRONG_WAY = 0x1E7,
	UNLOCKED_MINT = 0x1E8,
	RETURNED_SLIPPERS = 0x1E9,
	POST_MINT_AMBUSH = 0x1EA,
	PASSED_CLONE_IOLO_TEST = 0x1EB,
	PASSED_CLONE_SHAMINO_TEST = 0x1EC,
	PASSED_CLONE_DUPRE_TEST = 0x1ED,
	CLONE_SHAMINO_PRESSED_SEX_BUTTON = 0x1EE,
	TURNED_DOWN_TEST_OF_PURITY = 0x1EF,	// Based on beta flag names
	AVATAR_DENIED_LIFE = 0x1F0,
	AVATAR_DENIED_FAMILY = 0x1F1,
	AVATAR_DENIED_HOME = 0x1F2,
	BEGUN_WORM_TEST = 0x1F3,
	KILLED_FIRST_WORM = 0x1F4,
	KILLED_FOUR_WORMS = 0x1F5,
	KILLED_SEVEN_WORMS = 0x1F6,
	KILLED_NINE_WORMS = 0x1F7,
	PASSED_WORM_TEST = 0x1F8,
	GOT_SERPENT_STAFF = 0x1F9,
	ZHELKAS_EXPLAINED_TEST = 0x1FA,
	STARTED_TEST_OF_PURITY = 0x1FB,
	CAST_CHILL_SPELL = 0x1FC,
	SAID_AVATAR_TO_ZHELKAS = 0x1FD,
	ZHELKAS_OPENED_ENTRANCE = 0x1FE,
	ZHELKAS_OPENED_EXIT = 0x1FF,
	ZHELKAS_SPOKE_GOBLET = 0x200,
	BROUGHT_GOBLET_TO_ZHELKAS = 0x201,
	REACHED_CLONE_SHAMINO_TEST = 0x202,
	TRIED_CLONE_IOLO_TEST = 0x203,
	TRIED_CLONE_SHAMINO_TEST = 0x204,
	TRIED_CLONE_DUPRE_TEST = 0x205,
	SPOKE_EMPS = 0x206,
	GOT_SERPENT_RING = 0x207,
	ARENA_BATTLE_STARTED = 0x208,
	AUTO1_IS_DEAD = 0x209,
	AUTO2_IS_DEAD = 0x20A,
	AUTO3_IS_DEAD = 0x20B,
	AUTO4_IS_DEAD = 0x20C,
	TURNED_SIRANUSH_DOWN = 0x20D,
	SIRANUSH_SPOKE_ARTIFACT_OF_COURAGE = 0x20E,	// Based on beta flag names
	SIRANUSH_SPOKE_ARTIFACT_OF_LOVE = 0x20F,	// Based on beta flag names
	SIRANUSH_SPOKE_ARTIFACT_OF_TRUTH = 0x210,	// Based on beta flag names
	FINISHED_DREAM_QUEST = 0x211,
	RETURNED_COMB_OF_BEAUTY = 0x212,
	EDRIN_KNOWS_SIRANUSH_IS_REAL = 0x213,
	AVATAR_REFUSED_MORTEGRO = 0x214,
	AVATAR_FREED_MORTEGRO = 0x215,
	MORTEGRO_THANKED_AVATAR = 0x216,
	ETHICALITY_PASSED_FIRST_TEST = 0x217,
	ETHICALITY_PASSED_SECOND_TEST = 0x218,
	ETHICALITY_PASSED_THIRD_TEST = 0x219,
	TEST_NEVER_YIELDED = 0x21A,
	PASSED_TEST_OF_ETHICALITY = 0x21B,
	TEST_SAVED_MAN_ON_FIRE = 0x21C,
	TEST_LEFT_MONEY = 0x21D,
	BATLIN_IN_TEST_OF_ETHICALITY = 0x21E,
	TEST_REFUSED_TO_YIELD = 0x21F,
	GOT_WATER_OF_DISCIPLINE = 0x220,
	GOT_WATER_OF_ETHICALITY = 0x221,
	GOT_WATER_OF_LOGIC = 0x222,
	GOT_WATER_OF_EMOTION = 0x223,
	GOT_WATER_OF_ENTHUSIASM = 0x224,
	GOT_WATER_OF_TOLERANCE = 0x225,
	KNOWS_ABOUT_ACID = 0x226,
	READ_BODY_TRANSFERENCE_BOOK = 0x227,
	AVATAR_WAS_MALE = 0x228,
	TRIED_TO_ENTER_ONCE = 0x229,
	TRIED_TO_ENTER_TWICE = 0x22A,
	TALKED_TO_CHAOS_HIEROPHANT = 0x22B,
	DOING_ANTI_SHAMINO_VISION = 0x22C,
	DID_ANTI_SHAMINO_VISION = 0x22D,
	PUZZLE_PICKED_RED_FIRST = 0x22E,
	PUZZLE_PICKED_RED_FOURTH = 0x22F,
	PUZZLE_PICKED_YELLOW_SECOND = 0x230,
	PUZZLE_PICKED_BLUE_THIRD = 0x231,
	PUZZLE_PICKED_WHITE_LAST = 0x232,
	SOLVED_MURDER_PUZZLE = 0x233,
	GOT_BLACK_SWORD = 0x234,
	TELDRONO_IS_CHICKEN = 0x236,
	TELDRONO_IS_BEAR = 0x237,
	PRESSED_BOTH_SWITCHES = 0x238,
	AVATAR_ESCAPED_FREEDOM = 0x239,
	ARCADION_IS_FREE = 0x23A,
	MET_FREEDOM_CARETAKER = 0x23B,
	FOUND_FLUX_ANALYZER = 0x23C,
	FOUND_PHILANDERERS_FRIEND = 0x23D,
	CHAOS_PLACED_BLACKROCK_SERPENT_CHAOS = 0x23E,
	PLACED_SOUL_PRISM_ANARCHY = 0x23F,
	PLACED_SOUL_PRISM_WANTONNESS = 0x240,
	PLACED_SOUL_PRISM_MADNESS = 0x241,
	PLACED_DUPRES_ASHES = 0x242,
	PLACED_RUNE_FIRST_I = 0x243,
	PLACED_RUNE_SECOND_S = 0x244,
	PLACED_RUNE_THIRD_C = 0x245,
	PLACED_RUNE_FOURTH_G = 0x246,
	PLACED_RUNE_FIFTH_I = 0x247,
	VASCULIO_AWAKENS = 0x248,
	XENKA_WILL_COME = 0x24A,
	BLASTED_DOORS_TO_CHAOS_SHRINE = 0x24B,
	GOT_ISLE_OF_CRYPTS_TOOTH = 0x24C,
	GOT_SERPENT_SCEPTRE = 0x24D,
	SELINA_FINAL_BATTLE = 0x24E,
	DOING_SPINEBREAKER_VISION = 0x24F,
	DID_SPINEBREAKER_VISION = 0x250,
	OPENED_SPINEBREAKER_DOOR = 0x251,
	READ_STRUCTURE_OF_ORDER = 0x252,
	BRUNT_TALKS_TO_AVATAR = 0x253,
	PALOS_TALKS_TO_AVATAR = 0x254,
	DEADEYE_TALKS_TO_AVATAR = 0x255,
	OPENED_DOOR_TO_BRUNT = 0x256,
	OPENED_DOOR_TO_PALOS = 0x257,
	OPENED_DOOR_TO_DEADEYE = 0x258,
	AVATAR_IN_BEDROOM = 0x259,
	BEATRIX_PROTECTION = 0x25B,
	BEATRIX_FORGAVE_SHAMINO = 0x25C,
	HOUND_TRACKED_BATLIN = 0x25D,
	RETURNED_GWANI_AMULET = 0x25E,
	FREED_GWENNOS_BODY = 0x25F,
	AVATAR_SAVED_NEYOBI = 0x260,
	KNOWS_HAZARD_KILLED_GWANI = 0x261,
	TALKED_TO_GWANI_ABOUT_GWENNO = 0x262,
	HAZARD_IS_DEAD = 0x263,
	BAIYANDA_GAVE_BUCKET = 0x264,
	KNOW_SKULLCRUSHER_PASSWORD = 0x265,
	SEEKING_SCROLL_OF_SERPENT = 0x267,
	KNOWS_OF_WORM_GEMS = 0x268,
	KNOWS_IMBALANCE_CURE = 0x269,
	GWENNO_IS_DEAD = 0x26A,
	KNOWS_ABOUT_XENKA = 0x26B,
	CORRECT_SALT_TIDES = 0x26C,
	HAVE_FRESH_MANDRAKE = 0x26D,
	KNOWS_ABOUT_SALT_TIDES = 0x26E,
	AVATAR_IS_DEAD = 0x26F,
	XENKA_HAS_RETURNED = 0x270,
	XENKA_RETURN_TRIGGER = 0x271,
	DOING_XENKA_RETURN = 0x272,
	SHOW_PETRA_VISION = 0x273,
	KARNAX_HAS_SCROLL_OF_SERPENT = 0x274,
	IOLO_GWENNO_REUNITED = 0x275,
	XENKA_GAVE_FINAL_QUEST = 0x276,
	CLUE_SERPENT_STAFF_FURNACE = 0x278,
	TALKED_TO_GREAT_HIEROPHANT = 0x279,
	STORM_PINECONE = 0x27A,
	STORM_STOCKINGS = 0x27B,
	STORM_URN = 0x27C,
	STORM_LAB_APPARATUS = 0x27D,
	STORM_PUMICE = 0x27E,
	STORM_WEDDING_RING = 0x27F,
	STORM_FUR_CAP = 0x280,
	STORM_SLIPPERS = 0x281,
	STORM_BREAST_PLATE = 0x282,
	STORM_BLUE_EGG = 0x283,
	STORM_GOBLIN_BRUSH = 0x284,
	STORM_ICEWINE = 0x285,
	STORM_FILARI = 0x287,
	STORM_BEAR_SKULL = 0x288,
	STORM_SEVERED_HAND = 0x289,
	STORM_MONITOR_SHIELD = 0x28A,
	STORM_RUDDY_ROCK = 0x28B,
	KNOWS_PINECONE_OWNER = 0x28C,
	KNOWS_MOONSILK_OWNER = 0x28D,
	KNOWS_URN_ORIGIN = 0x28E,
	KNOWS_LAB_APPARATUS_OWNER = 0x28F,
	KNOWS_PUMICE_ORIGIN = 0x290,
	KNOWS_RING_OWNER = 0x291,
	KNOWS_FUR_CAP_OWNER = 0x292,
	KNOWS_SLIPPERS_OWNER = 0x293,
	KNOWS_BREAST_PLATE_OWNER = 0x294,
	KNOWS_BLUE_EGG_OWNER = 0x295,
	KNOWS_GOBLIN_BRUSH_ORIGIN = 0x296,
	KNOWS_ICEWINE_ORIGIN = 0x297,
	KNOWS_DEAD_CAT_ORIGIN = 0x298,
	KNOWS_FILARI_OWNER = 0x299,
	KNOWS_BEAR_SKULL_ORIGIN = 0x29A,
	KNOWS_SEVERED_HAND_OWNER = 0x29B,
	KNOWS_MONITOR_SHIELD_ORIGIN = 0x29C,
	KNOWS_STONEHEART_ORIGIN = 0x29D,
	KNOWS_PUMICE_LAVA = 0x29E,
	HEARD_ABOUT_FURNACE = 0x29F,	// Based on beta flag names
	HAS_CLUE_FUR_CAP = 0x2A0,
	KNOWS_FRIGIDAZZI_IS_FAVORITE = 0x2A1,	// Based on beta flag names
	SHAMINO_MADE_EQUIPMENT_LIST = 0x2A2,
	SHAMINO_GAVE_HINTS = 0x2A3,
	TOP_SCALES_BALANCED = 0x2A4,
	BOTTOM_SCALES_BALANCED = 0x2A5,
	BALANCE_BLACKROCK_SERPENT_ORDER = 0x2A6,
	BALANCE_BLACKROCK_SERPENT_BALANCE = 0x2A7,
	BALANCE_BLACKROCK_SERPENT_CHAOS = 0x2A8,
	PLACED_FIRE_GEM = 0x2A9,
	PLACED_ICE_DIAMOND = 0x2AA,
	PLACED_ARTIFACT_FLOWER = 0x2AB,
	PLACED_ARTIFACT_TORCH = 0x2AC,
	PLACED_ARTIFACT_GOLDEN_CHAIN = 0x2AD,
	PLACED_ARTIFACT_DAGGER = 0x2AE,
	PLACED_ARTIFACT_ABACUS = 0x2AF,
	PLACED_ARTIFACT_HEART = 0x2B0,
	GOT_ORDER_SERPENT_EYE = 0x2B1,
	MELT_ICE_WALLS = 0x2B2,
	BUILT_LAVA_BRIDGE = 0x2B3,
	PLACED_FIRST_ICE_CUBE = 0x2B4,
	PLACED_SECOND_ICE_CUBE = 0x2B5,
	PLACED_FIRST_FIRE_CUBE = 0x2B6,
	PLACED_SECOND_FIRE_CUBE = 0x2B7,
	PLACED_ALL_SERPENTS = 0x2B8,
	KNOWS_KINGS_SAVIOR = 0x2B9,
	WILL_HELP_MORGHRIM = 0x2BA,
	RETURNED_HEART_OF_ELERION = 0x2BB,
	DRAYGAN_IS_IMMORTAL = 0x2BC,
	BERYL_MET_AVATAR = 0x2BD,
	BERYL_WILL_MEET_AVATAR = 0x2BE,
	GOT_SLEEP_ARROWS = 0x2BF,
	KNOWS_HOW_TO_PREPARE_ARROWS = 0x2C0,
	THOXA_SPOKE_POWER = 0x2C2,
	THOXA_SPOKE_COMPANIONS = 0x2C3,
	INN_FLIPPED_FIRST_SWITCH = 0x2C4,
	INN_FLIPPED_SECOND_SWITCH = 0x2C5,
	INN_FLIPPED_THIRD_SWITCH = 0x2C6,
	INN_FLIPPED_FOURTH_SWITCH = 0x2C7,
	INN_HEALED_PARTY = 0x2C8,
	DONE_INN_SWITCHES = 0x2C9,
	INN_PARTY_FEELS_GREAT = 0x2CA,
	INN_PARTY_FEELS_JOY = 0x2CB,
	CREATED_LODESTONE_OF_HAPPINESS = 0x2CC,
	PLACED_LODESTONE_OF_HATE = 0x2CD,
	PLACED_LODESTONE_OF_HAPPINESS = 0x2CE,
	PLACED_LODESTONE_OF_DESPAIR = 0x2CF,
	PLACED_LODESTONE_OF_LOVE = 0x2D0,
	INSIDE_PUT_THE_AVATAR_TO_BED = 0x2D1,
	IOLO_LEAVES_THIEF_AVATAR = 0x2D3,
	DUPRE_LEAVES_THIEF_AVATAR = 0x2D4,
	SHAMINO_LEAVES_THIEF_AVATAR = 0x2D5,
	BALANCE_ASKS_WHO_AVATAR_IS = 0x2D9,
	BALANCE_SAY_MET_BEFORE = 0x2DA,
	DREAM_REALM_COMPLETE = 0x2DB,
	SERPENT_GWANI_HORN_SPEECH = 0x2DC,
	SERPENT_GWENNO_BANE_SPEECH = 0x2DD,
	TOLD_TO_PLACE_ASHES = 0x2DE,
	TOLD_TO_KILL_VASCULIO = 0x2DF,
	TOLD_TO_FREE_GWENNO = 0x2E1,
	BATLIN_FLED_SHAMINOS_KEEP = 0x2E2,
	TOLD_TO_SLAY_STATUE = 0x2E3,
	TOLD_PLACE_EYES = 0x2E4,
	AVATAR_IS_WORTHY = 0x2E5,
	MISSING_BLACKROCK_SERPENTS = 0x2E6,
	MISSING_HIEROPHANT_ARTIFACTS = 0x2E7,
	WEARING_BELT_OF_STRENGTH = 0x2E8,
	EXPERIENCE_FROM_BELT_OF_STRENGTH = 0x2E9,
	TRAP_SWITCH_1_DONE = 0x2EA,
	TRAP_SWITCH_2_DONE = 0x2EB,
	TRAP_SWITCH_3_DONE = 0x2EC,
	TRAP_MAGIC_LOCK_DOOR_1 = 0x2ED,
	USED_AMULET_OF_BALANCE = 0x2EE,
	TRAP_MAGIC_LOCK_DOOR_2 = 0x2EF,
	TRAP_MAGIC_LOCK_DOOR_3 = 0x2F0,
	PRESSURE_PLATE_1_DONE = 0x2F1,
	PRESSURE_PLATE_2_DONE = 0x2F2,
	PRESSURE_PLATE_3_DONE = 0x2F3,
	ASKED_SUROK_TOO_MUCH = 0x2F4,
	RED_ORB_PLACED = 0x2F5,
	PURPLE_ORB_PLACED = 0x2F6,
	BLUE_ORB_PLACED = 0x2F7,
	YELLOW_ORB_PLACED = 0x2F8,
	GOT_GAUNTLETS_OF_QUICKNESS = 0x2F9,
	KNOW_YUREL_LOVES_CHEESE = 0x2FA,
	HAVE_AMULET_OF_BALANCE = 0x2FB,
	HAVE_SILVER_SEED = 0x2FC,
	KARNAX_WITNESSED_SEED_PLANTING = 0x2FD,
	CASK_WAS_MOVED = 0x2FE,
	ROPE_ON_WELL = 0x2FF,
	HAVE_KEYRING = 0x300,
	WEARING_GAUNTLETS_OF_QUICKNESS = 0x302,
	HOLDING_ERINONS_AXE = 0x303,
	EXPERIENCE_FROM_ERINONS_AXE = 0x304,
	WAS_ASKED_LIARS_RIDDLE = 0x305,
	WAS_ASKED_EARRINGS_RIDDLE = 0x306,
	WAS_ASKED_LONGTOOTH_RIDDLE = 0x307,
	WAS_ASKED_CLOTH_RIDDLE = 0x308,
	SOLVED_LIARS_RIDDLE = 0x309,
	SOLVED_EARRINGS_RIDDLE = 0x30A,
	SOLVED_LONGTOOTH_RIDDLE = 0x30B,
	SOLVED_CLOTH_RIDDLE = 0x30C,
	MET_ISSTANAR = 0x30D,
	HAVE_PURPLE_ORB = 0x30E,
	MET_RIEYA = 0x30F,
	MET_DRUSILLA = 0x310,
	MET_SOLARIA = 0x311,
	PLANTED_SILVER_SEED = 0x313,
	USED_IRON_MAIDEN = 0x314,
	EXPERIENCE_FROM_RING_OF_REAGENTS = 0x315,
	BANE_MOONSHADE_DECORATION_CLEANUP = 0x318,
};

// Party members (you know 'em, you love 'em)
enum party_members {
	// Used by several intrinsics (e.g. UI_count_objects) that would otherwise
	// take a single NPC
	// Not supported by several other intrinsics that you'd really like it to
	// (e.g. UI_get_cont_items)
	PARTY = -357,
	// Permanent NPCs:
	// Britannians:
	AVATAR = -356,
	DUPRE = -1,
	SHAMINO = -2,
	IOLO = -3,
	GWENNO = -149, // Joins after Dupre becomes a pile of ashes

	// Serpent Isle:
	BOYDON = -34, // Created at Mad Mage Isle, remains until he dies
	BOYDON_HEAD = -301, // Boydon's talking head

	// Temporary NPCs:
	// Both join in Temple of Tolerance, both die soon after:
	MORTEGRO = -26,
	SETHYS = -152,

	PETRA = -28, // Joins for Temple of Discipline, remains until kicked out

	SELINA = -44, // Joins for the Mint subquest, leaves after

	WILFRED = -45, // Joins after banes, bolts if hurt too badly

	// Joins in freedom (leaves after) and again after banes until you kill
	// the Death Knight
	STEFANO = -168

};

// Moonshade residents
enum moonshade_npcs {
	ANDRIO = -4, // Mageling
	SERV_01 = -5, // Melino and Columna's automaton
	SERV_02 = -6, // Gustacio's
	SERV_03 = -7, // Torrissio's
	SERV_04 = -8, // Ducio's baker
	SERV_05 = -9, // Ducio's blacksmith
	SERV_06 = -10, // MageLord's
	SERV_07 = -11, // Rotoluncia's
	SERV_08 = -12, // Flindo's
	BUCIA = -13, // Shopkeeper
	COLUMNA = -14,
	DUCIO = -15,
	EDRIN = -16,
	FEDABIBLIO = -17,
	FILBERCIO = -18,
	FRELI = -19, // Child
	FRIGIDAZZI = -20,
	GOBLIN_MESSENGER = -21, // Frigidazzi's servant
	GUSTACIO = -22,
	JULIA = -23, // Commanders of the Rangers
	MELINO = -24,
	AUTO_MESSENGER = -25,
	// MORTEGRO = -26, // Defined above
	MOSH = -27, // Rat woman
	// PETRA = -28, // Defined above
	POTHOS = -29,
	ROCCO = -30, // Innkeeper
	ROTOLUNCIA = -31,
	ROTOLUNCIA_SCROLL = -302,
	TOPO = -32,
	TORRISSIO = -33,
	SERV09 = -191, // Stefano's
	SERV10 = -192, // Mortegro's
	SERV11 = -193, // Seminarium's
	SERV12 = -194,  // Pothos' downstairs automaton
	MUSIC01 = -198, // Blue Boar musician
	MUSIC02 = -199, // Blue Boar musician
	MUSIC03 = -200, // Blue Boar musician
	SERV_SEW = -206, // Ducio's seamster
	AUTOGUARD = -216 // Pothos' patrolling automaton
};

// Mad Mage Isle residents
enum mad_mage_npcs {
	// BOYDON = -34, // Defined above
	ERSTAM = -35,
	VASEL = -36
};

// Sleeping Bull residents
enum sleeping_bull_npcs {
	ALE = -37,
	ARGUS = -38,
	BYRIN = -39,
	HAWK = -40,
	DEVRA = -41,
	FLINDO = -42, // Visiting from Moonshade
	KANE = -43,
	// SELINA = -44, // Defined as one of Batlin's goons, below
	// WILFRED = -45, // Defined above
	ENSORCIO = -81 // Exile from Moonshade
};

// Fawn residents, including the Fellowship members
enum fawn_npcs {
	ALYSSAND = -46, // Fawn shopkeeper / seamstress
	DELIN = -47, // Fawn shopkeeper
	DELPHYNIA = -48, // Fawn horticulturalist
	GARTH = -49, // Fawn great captain
	JOTH = -50, // Fawn great captain
	VOLDIN = -51, // Fawn great captain
	JENDON = -52, // Fawn innkeeper
	JORVIN = -53, // Fawn security
	KYLISTA = -54, // Fawn priestess
	YELINDA = -55, // Fawn leader
	LEON = -56, // Fellowship leader
	KALEN = -57, // Fellowship pirate
	OLON = -58, // Fawn sailor
	RUGGS = -59, // Fellowship
	SCOTS = -60, // Fellowship mapmaker
	ZULITH = -61, // Fawn chancellor
	BUSTER = -260 // Fawn dog
};

// Monitor residents
enum monitor_npcs {
	ANDRAL = -62, // Sculptor, Leopard
	CALADIN = -63, // Leader of the Bears
	CANTRA = -64, // Child, not yet a knight
	CELLIA = -65, // Furrier, Wolf
	G_SIMON = -66, // Simon the Goblin
	HARNNA = -67, // Farmer and Healer, Leopard
	KRAYG = -68, // Provisioner, Wolf
	MARSTEN = -69, // Leader of the Leopards
	LUCILLA = -70, // Waitress, Wolf
	LUTHER = -71, // Braggart, Bear
	LYDIA = -72, // Tattoos, Bear
	RENFRY = -73, // Crematorium, Wolf
	SHAZZANA = -74, // Trainer, Leopard
	SHMED = -75, // Knight's Test, Wolf
	SIMON = -76, // Simon in disguise, Bear
	SPEKTOR = -77, // Treasurer, Leopard
	STANDARR = -78, // Blacksmith, Leopard
	TEMPLAR = -79, // Goblin expert, Bear
	FLICKEN = -80, // West gate guard, Bear
	BRENDANN = -150, // Leader of the Wolves
	SMUDGE = -261 // Cat
};

// Automatons in the temple of discipline
enum temple_of_discipline {
	LORD_OF_DISCIPLINE = -82, // Failing automaton
	ACID_AUTOMATON = -83, // Another failing automaton
	GUARD1 = -84,
	GUARD3 = -86,
	GUARD5 = -88,
	GUARD6 = -89,
	GUARD7 = -90, // The dead one (can be brought back)
	GUARD8 = -91
};

// Furnace residents
enum furnace {
	AUTO1 = -85,
	AUTO2 = -87,
	AUTO3 = -92,
	AUTO4 = -93,
	ZHELKAS = -170,
	THIEF1 = -176,
	THIEF2 = -177,
	THIEF3 = -183,
	KEY_GUY = -259 // Troll, has key to Serpent Staff
};

// Automatons from temple of logic
enum temple_of_logic {
	MURDER1 = -94,
	MURDER2 = -95,
	MURDER3 = -96,
	MURDER4 = -97,
	MURDER5 = -98,
	MURDER6 = -99,
	MURDER7 = -184
};

// Residents from temple of ethicality
enum temple_of_ethicality {
	// The automaton which administers the test of ethicality
	ETH_AUTOMATON = -100,
	MAN_IN_FIRE = -151
};


// Goblin camp residents
enum goblin_camp {
	GOBLIN_01 = -101,
	GOBLIN_02 = -102,
	GOBLIN_03 = -103,
	GOBLIN_04 = -104,
	GOBLIN_05 = -105,
	GOBLIN_06 = -106,
	GOBLIN_07 = -107,
	GOBLIN_08 = -108,
	GOBLIN_09 = -109,
	GOBLIN_10 = -110,
	GOBLIN_11 = -111,
	GOBLIN_12 = -112,
	GOBLIN_13 = -113,
	GOBLIN_14 = -114,
	GOBLIN_15 = -115,
	GOBLIN_16 = -116,
	GOBLIN_17 = -117,
	GOBLIN_18 = -118,
	GOBLIN_KING = -265,
	CHUCK = -274,
	JOHNSON = -285 //Captive pikeman
};

// Fawn Tower residents, the five goblins you must kill to free the tower
enum fawn_tower {
	GOBLIN_19 = -119,
	GOBLIN_21 = -120,
	GOBLIN_22 = -121,
	GOBLIN_23 = -122,
	GOBLIN_24 = -123
};

// Dream world denizens
enum dream_world {
	D_STEFANO = -124,
	RABINDRINATH = -181,
	SIRANUSH = -182,
	D_CANTRA = -201,
	D_BYRIN = -218,
	D_ENSORCIO = -219,
	D_FILBERCIO = -220,
	SMITHZHORSE = -277,
	LORD_BRITISH = -280
};

// Spinebreaker residents
enum spinebreaker {
	BUTLER = -125, // The hierophant's butler
	GUARD_11 = -126, // Greets you with Batlin's voice
	// BRUNT = -127, // Defined below
	// DEADEYE = -128, // Defined below
	PASSWORD = -129, // Asks for the password at entrance
	METAL_MAN = -202 // Asks about The Structure of Order
};

// Skullcrusher residents
enum skullcrusher {
	GWANI_01 = -140,
	GWANI_02 = -141,
	GWANI_03 = -142,
	GUARD18 = -186,
	GUARD19 = -187,
	GUARD20 = -188,
	GUARD21 = -189,
	GUARD17 = -190, // Western gate guard
	VASCULIO = -294
};

// Gwani Village residents
enum gwani_npcs {
	BAIYANDA = -143,
	BWUNDAI = -144,
	MWAERNO = -145,
	MYAURI = -146,
	NEYOBI = -147, // Gwani child
	YENANI = -148,
	GILWOYAI = -153,
	KAPYUNDI = -154
};

// Residents from temple of tolerance
enum temple_of_tolerance {
	// SETHYS = -152, // Defined above
	YEARL = -267, // Snow leopard
	BRENDA = -268, // Naga
	MEELOSE = -273, // Wildman
	EMMIT = -279 // Ratman
};

// Great Northern Forest residents
enum northern_forest_npcs {
	BERYL = -155,
	DRAYGAN = -156,
	HURD = -157,
	IVOR = -158,
	MORGHRIM = -159,
	HOUND_OF_DOSKAR = -269,
	HAZARD = -275,
	SONAR = -276 // Timberwolf known as Windrunner
};

// Freedom residents
enum mountains_of_freedom {
	JAIL_01 = -160,
	JAIL_02 = -161,
	JAIL_03 = -162,
	LORTHONDO = -163,
	PRISON1 = -164,
	PRISON2 = -165,
	PRISON3 = -166,
	PRISON4 = -167,
	TELDRONO = -169,
	PIRATE_GUY = -196,
	SABRINA = -217,
	GARGOYLE_PRISONER = -266,
	WATSON = -282,
	DEATHMARE = -283
};

// Test of Purity residents
enum test_of_purity {
	SEX_01 = -171,
	SEX_02 = -172,
	SEX_03 = -173,
	SEX_04 = -174,
	SEX_05 = -175,
	CLONE_IOLO = -178, // Also appears in Dream World
	CLONE_SHAMINO = -179,
	CLONE_DUPRE = -180
};

// Shamino's castle
enum shamino_castle {
	HENCH1 = -205,
	HENCH2 = -203, // Starts at House of the Dead
	HENCH3 = -204, // Starts at House of the Dead
	BEATRIX	= -286,
};

// Monk Isle residents
enum monk_isle_npcs {
	KARNAX = -207,
	SILENT2 = -208,
	MIGGIM = -209,
	SILENT3 = -210,
	THOXA = -211,
	BRACCUS = -212,
	DRAXTA = -213,
	SILENT1 = -214,
	XENKA = -215
};

// Residents of Castle of the White Dragon
enum white_dragon_castle {
	// The quotes are from http://www.it-he.org
	ANTI_DUPRE = -263, // Haha! I am Dupre, bane of drunkenness!
	ANTI_IOLO = -262,  // I am Iolo! Bane of shooting-the-Avatar-through-the-
	                   // heart-with-the-triple-crossbow!
	ANTI_SHAM = -264   // Kneel before Shamino, bane of rapidly diminishing
	                   // consequence...
};

// Batlin's goons
enum batlin_goons_npcs {
	// Batlin is actually a monster in this game, not a real person... err, NPC.
	// SELINA = -44, // Defined above
	BRUNT = -127, // Fighter
	DEADEYE = -128, // Pirate
	PALOS = -272 // Gargoyle
};

// All other NPCs
enum misc_npcs {
	INVALID_NPC = 0,
	GUARD12 = -130, // Automaton, starts at House of the Dead
	GUARD13 = -131, // Automaton, starts at House of the Dead
	GUARD14 = -132, // Automaton, starts at House of the Dead
	GUARD15 = -133, // Automaton, starts at House of the Dead
	GUARD16 = -134, // Automaton, starts at House of the Dead
	ZOMBIE01 = -135, // Gwani, starts at House of the Dead
	ZOMBIE02 = -136, // Gwani, starts at House of the Dead
	ZOMBIE03 = -137, // Gwani, starts at House of the Dead
	ZOMBIE04 = -138, // Gwani, starts at House of the Dead
	ZOMBIE05 = -139, // Gwani, starts at House of the Dead
	MAN_ON_FIRE = -151,
	DED_AUTOMATON = -185, // Automaton, in the middle of ocean
	PERRY_STOKES = -195, // The software pirate
	IAUTO = -197, // Automaton, starts at House of the Dead
	DEATH_KNIGHT = -222, // Starts at the House of the Dead
	LOAF1 = -221, // Starts at the House of the Dead
	LOAF2 = -223, // Starts at the House of the Dead
	LOAF3 = -224, // Starts at the House of the Dead
	LOAF4 = -225, // Starts at the House of the Dead
	LOAF5 = -226, // Starts at the House of the Dead
	LOAF6 = -227, // Starts at the House of the Dead
	AUTO_2 = -228, // Automaton, starts at the House of the Dead
	AUTO_3 = -229, // Automaton, starts at the House of the Dead
	AUTO_4 = -230, // Automaton, starts at the House of the Dead
	LARRY = -231, // Automaton, starts at the House of the Dead
	STAN = -232, // Automaton, starts at the House of the Dead
	SUPER_GOBLIN = -256, // At the tree leading to Goblin Camp
	BILLY_CAIN = -257, // Goblin, SW of knight's test
	STEVE_POWERS = -258, // Goblin, SE of Sleeping Bull Inn, along north coast
	HENCH_MAN = -270, // Starts at the House of the Dead
	HENCHMAN = -271, // Starts at the House of the Dead
	ELSI = -278, // Cow, north of Mint
	CRUSTY = -281, // Clown, SW of Captain Stokes tower
	PIBB = -284, // Starts at the House of the Dead
	CINDY = -287, // Naked girl S of turtle-summoning bell
	BRAX = -288,	// Naked girl, starts at the House of the Dead
	FITCH_FACE = -289,	// One of Hazard's trappers
	ANARCHY = -290,		// Bane faces
	WANTONNESS = -291,	// Bane faces
	INSANITY = -292,	// Bane faces
	DBEYER = -293, // Gargoyle, starts at the House of the Dead
	FITCH = -295, // Trapper, the one dying at the edge of the Ice Plains

	SMITH_HORSE = -296,	// Smith NPC

	BALANCE_SERPENT = -295,	// Face constant
	GUARDIAN = -296,	// Face constant
	BALANCE_SERPENT2 = -300,	// Translucent face constant

	AUTOMATON_FACE = -298,

	THE_FIEND = -305,
	ISSTANAR = -306,	// Commander of Serpent's Fang
	ELISSA = -307,		// Order mage of Serpent's Fang
	SUROK = -308,		// Healer of Serpent's Fang
	TSANDAR = -309,		// Sub-commander of Serpent's Fang
	DRAXINAR = -310,	// Green dragon also known as 'Stumpy'
	YUREL = -311,		// Catman in maze
	RIEYA = -312,		// Wicked witch of the south-west
	SOLARIA = -313,		// Wicked witch of the north
	DRUSILLA = -314,	// Wicked witch of the north-west

	LAST_TRUE_NPC = -255	// ID of last NPC from NPC.DAT. All others are in MONSNPCS.DAT
};

enum sprite_repeats {
	LOOP_ONCE = -1,
	LOOP_ONCE2 = -3	// Not sure about this
};

enum spells_si {
	SPELL_NONE = 0,

	SPELL_CREATE_FOOD = 0,
	SPELL_CURE,
	SPELL_DETECT_TRAP,
	SPELL_GREAT_DOUSE,
	SPELL_GREAT_IGNITE,
	SPELL_LIGHT,
	SPELL_LOCATE,
	SPELL_TELEKINESIS,

	SPELL_AWAKEN,
	SPELL_DESTROY_TRAP,
	SPELL_FALSE_COIN,
	SPELL_COLD_BLAST,
	SPELL_GREAT_LIGHT,
	SPELL_HEAL,
	SPELL_MASS_CURE,
	SPELL_PROTECTION,

	SPELL_CHILL,
	SPELL_CURSE,
	SPELL_ENCHANT_MISSILES,
	SPELL_COLUMNAS_INTUITION,
	SPELL_PROTECT_ALL,
	SPELL_PARALYZE,
	SPELL_SLEEP,
	SPELL_TRANSLATION,

	SPELL_BLINK,
	SPELL_DETER,
	SPELL_FLASH,
	SPELL_CREATE_SOUL_PRISM,
	SPELL_MASS_CURSE,
	SPELL_REVEAL,
	SPELL_TRANSCRIBE,
	SPELL_UNLOCK_MAGIC,

	SPELL_CONJURE,
	SPELL_DISPEL_FIELD,
	SPELL_EXPLOSION,
	SPELL_GREAT_HEAL,
	SPELL_INVISIBILITY,
	SPELL_MASS_SLEEP,
	SPELL_SUMMON_SHADE,
	SPELL_ERSTAMS_SURPRISE,

	SPELL_BETRAY,
	SPELL_DISPEL_ILLUSION,
	SPELL_CAUSE_FEAR,
	SPELL_FIRE_FIELD,
	SPELL_FIRE_RING,
	SPELL_COLD_STRIKE,
	SPELL_CREATE_AMMO,
	SPELL_CREATE_AUTOMATON,

	SPELL_ENERGY_FIELD,
	SPELL_ENERGY_MIST,
	SPELL_MASS_AWAKEN,
	SPELL_MASS_MIGHT,
	SPELL_POISON_MIST,
	SPELL_RESTORATION,
	SPELL_VIBRATE,
	SPELL_LIGHTNING,

	SPELL_CREATE_ICE,
	SPELL_MIND_BLAST,
	SPELL_DELAYED_BLAST,
	SPELL_FETCH,
	SPELL_INVOKE_SNOW_SERPENT,
	SPELL_SERPENT_BOND,
	SPELL_FIRE_SNAKE,
	SPELL_SWORD_STRIKE,

	SPELL_DEATH_VORTEX,
	SPELL_MASS_DEATH,
	SPELL_INVISIBLE_ALL,
	SPELL_SPIRAL_MISSILE,
	SPELL_STOP_STORM,
	SPELL_SUMMON,
	SPELL_TIME_STOP,
	SPELL_IMBALANCE,
};

enum sprite_effects {
	ANIMATION_BIG_BLAST			= 1,
	ANIMATION_BIG_CLOUDS		= 2,
	ANIMATION_CLOUDS			= 3,
	ANIMATION_MEDIUM_BLAST		= 4,
	ANIMATION_SMALL_BLAST		= 5,
	ANIMATION_CLOUDS2			= 6,
	ANIMATION_TELEPORT			= 7,
	ANIMATION_DEATH_VORTEX		= 8,
	ANIMATION_POOF				= 9,
	ANIMATION_RED_DUST			= 11,
	ANIMATION_FIREWORKS			= 12,
	ANIMATION_GREEN_BUBBLES		= 13,
	ANIMATION_SPARKLES			= 16,
	ANIMATION_LIGHTNING			= 17,
	ANIMATION_BLUE_BEADS		= 18,
	ANIMATION_BURST_ARROW		= 19,
	ANIMATION_PURPLE_BUBBLES	= 21,
	ANIMATION_SWORD_STRIKE		= 23,
	ANIMATION_MUSIC				= 24,
	ANIMATION_BLANK_25			= 25,
	ANIMATION_TELEPORT2			= 26,
	ANIMATION_SMALL_RING_BLAST	= 27,
	ANIMATION_BLANK_28			= 28,
	ANIMATION_BIG_RING_BLAST	= 30,
	ANIMATION_MEDIUM_RING_BLAST	= 31,
	ANIMATION_RED_SWIRL			= 32,
	ANIMATION_PULSATING_DISC	= 33,
	ANIMATION_SERPENT_OVERLAY	= 39,
	ANIMATION_LIGHTNING_BLUE	= 40,
	ANIMATION_LIGHTNING_RED		= 41,
	ANIMATION_LIGHTNING_YELLOW	= 42,
	ANIMATION_LIGHTNING_GREEN	= 43,
	ANIMATION_TURTLE_RISE		= 46,
	ANIMATION_FROST_RING		= 47,
	ANIMATION_REVIVING_SNAKE	= 48,
	ANIMATION_EST_NUDI			= 50,
	ANIMATION_GOLDEN_SPARKLE	= 51,
	ANIMATION_PETRA_VISION		= 53,
	ANIMATION_ORB_BURST			= 54,
	ANIMATION_SWIRL_BARRIER		= 55,
	ANIMATION_SLASH_BURST		= 56,
	ANIMATION_VAMPIRE_RISING	= 61,
};

enum cursors {
	CURSOR_HAND			= 0,
	CURSOR_X			= 1,	//Default "no you can't do that" X cursor
	CURSOR_OUT_OF_RANGE = 2,
	CURSOR_OUT_OF_AMMO	= 3,
	CURSOR_TOO_HEAVY	= 4,
	CURSOR_WONT_FIT		= 5
};

enum weather_types {
	CLEAR_WEATHER	= 0,
	SNOWING			= 1,	//Unsure; in Exult, works the same as RAIN, below and seems identical to RAIN in the originals
	RAIN			= 2,
	SPARKLE			= 3,	//Prevents casting of spells in BG (and maybe SI too?)
	FOG				= 4,	//Seems to work like RAIN in the originals
	OVERCAST		= 5,	//Seems to clear weather in the originals
	CLOUDY			= 6
};

enum skins {
	BLACK_AVATAR = 0,
	LATINO_AVATAR = 1,
	BLONDE_AVATAR = 2
};

enum alignments {
	NEUTRAL			= 0,
	GOOD			= 1,
	EVIL			= 2,
	CHAOTIC			= 3
};

enum damage_types {
	NORMAL_DAMAGE		= 0,
	FIRE_DAMAGE			= 1,
	MAGIC_DAMAGE		= 2,
	LIGHTNING_DAMAGE	= 3,
	POISON_DAMAGE		= 3,
	STARVATION_DAMAGE	= 3,
	FREEZING_DAMAGE		= 3,
	ETHEREAL_DAMAGE		= 4,
	SONIC_DAMAGE		= 5
};

enum wildcards {
	FIND_ON_SCREEN	= -359,
	QUANTITY_ANY	= -359,
	SHAPE_ANY		= -359,
	ANY_SHAPE		= -1,	// For find_nearby
	ON_SCREEN		= -1,	// For find_nearest/find_nearby
	ZERO_DELAY		= -1,	// For run_script
	ZERO_DELAY2		= -2,	// For run_script
	QUALITY_ANY		= -359,
	FRAME_ANY		= -359,
	TEMPORARY_ANY	= -359,
	FLAG_DESTROY	= -358	// Used in UI_update_last_created to indicate it will be deleting
};

enum directions {
	NORTH		= 0,
	NORTHEAST	= 1,
	EAST		= 2,
	SOUTHEAST	= 3,
	SOUTH		= 4,
	SOUTHWEST	= 5,
	WEST		= 6,
	NORTHWEST	= 7
};

enum face_directions : byte {
	FACE_NORTH		= 0x30,
	FACE_NORTHEAST	= 0x31,
	FACE_EAST		= 0x32,
	FACE_SOUTHEAST	= 0x33,
	FACE_SOUTH		= 0x34,
	FACE_SOUTHWEST	= 0x35,
	FACE_WEST		= 0x36,
	FACE_NORTHWEST	= 0x37
};

enum npc_properties {
	STRENGTH		= 0,
	DEXTERITY		= 1,
	INTELLIGENCE	= 2,
	HEALTH			= 3,
	COMBAT			= 4,
	MANA			= 5,
	MAX_MANA		= 6,
	TRAINING		= 7,
	EXPERIENCE		= 8,
	FOODLEVEL		= 9,
	SEX_FLAG		= 10,	// 1 (nonzero) if female, 0 if male.
	MISSILE_WEAPON	= 11	// Cannot be set; returns 1 if wearing a missile
							// or (good) thrown weapon, 0 otherwise.
};

enum day_periods {
	// The period is equal to one-third of the current game hour.
	MIDNIGHT		= 0,	// 0-2
	EARLY			= 1,	// 3-5
	DAWN			= 2,	// 6-8
	MORNING			= 3,	// 9-11
	NOON			= 4,	// 12-14
	AFTERNOON		= 5,	// 15-17
	EVENING			= 6,	// 18-20
	NIGHT			= 7		// 21-23
};

enum item_flags {
	INVISIBLE			= 0,
	ASLEEP				= 1,
	CHARMED				= 2,
	CURSED				= 3,
	DEAD				= 4,
	UNKNOWN_FLAG_05		= 5,
	IN_PARTY			= 6,
	PARALYZED			= 7,
	PARALYSED			= 7,		//British spelling
	POISONED			= 8,
	PROTECTION			= 9,
	ON_MOVING_BARGE		= 10,
	OKAY_TO_TAKE		= 11,		// The item does not belong to anyone, and won't
									// trigger stealing behaviour if you take it.
	MIGHT				= 12,		// Double strength, dext, intel.
	IMMUNITIES			= 13,		// Lots of immunities; can be gotten only.
	CANT_DIE			= 14,		// Test flag in monster_info.
	IN_ACTION			= 15,		// If the NPC is doing something. Set by "Dance" spell in BG.
	DONT_MOVE			= 16,		// SI-only. NPC can't move; "cutscene" mode.
	DONT_RENDER			= 16,		// BG-only. Like DONT_MOVE, but avatar also
									// completely invisible.
	UNKNOWN_FLAG_17		= 17,
	TEMPORARY			= 18,		// Is temporary - this means that the item will
									// be deleted once the party gets beyond a certain
									// range from it (outside the superchunk?)
	ACTIVE_SAILOR		= 20,		// The barge's 'captain'. When getting the flag,
									// you will actually get the current captain.
	OKAY_TO_LAND		= 21,		// Used for flying-carpet.
	BG_DONT_MOVE		= 22,		// BG-only. NPC can't move; "cutscene" mode.
	SI_DONT_RENDER		= 22,		// SI-only. Like DONT_MOVE, but avatar also
									// completely invisible.
	IN_DUNGEON			= 23,		// If set, you won't be accused of stealing.
	IS_SOLID			= 24,		// Used by gangplank usecode to determine if an object is solid.
	CONFUSED			= 25,
	ACTIVE_BARGE		= 26,		// Object is a barge object moving, or on a barge
									// object that is moving. Set in usecode, and mostly
									// used for the SI 'NPC' ships such as the turtle.
	UNKNOWN_FLAG_27		= 27,
	MET					= 28,		// Has the npc been met before - originally this
									// was SI-only, but Exult implements it for BG
									// too. This determines conversation behaviour,
									// and whether the NPC's real name or shape name
									// is displayed when they are single-clicked on.
									// BG originally used global flags for this, which
									// amounts to an extra 250-odd flags.
	SI_TOURNAMENT		= 29,		// Call usecode (eventid = 7) on death
	SI_ZOMBIE			= 30,		// Used for sick Neyobi, Cantra, post-Bane companions.

	NO_SPELL_CASTING	= 31,
	POLYMORPH			= 32,		// Do not set this flag directly; use the
									// UI_set_polymorph intrinsic instead.
	TATTOOED			= 33,
	READ				= 34,		// Can read non-Latin alphabet scrolls, books, signs.
	ISPETRA				= 35,
	CAN_FLY				= 36,
	FREEZE				= 37,
	NAKED				= 38 		// Exult. Makes the avatar naked given its skin.
									// Other NPCs should use set_polymorph instead.
};

enum events {
	PROXIMITY		= 0,	// Object is on-screen or nearby
							// This is called repeatedly, with a random delay
							// between each call
	DOUBLECLICK		= 1,	// Object is double-clicked on
	SCRIPTED		= 2,	// Function is called from inside a script{} block
							// (very common)
	EGG				= 3,	// Object is an egg that just hatched (triggered by
							// egg activation conditions)
	WEAPON			= 4,	// Object was wielded and 'swung' in combat
							// This is mainly used with 'weapon-like' objects
							// - e.g. smokebombs and fishing rods - that have more
							// advanced 'attack' behaviour.

	READIED			= 5,	// Object was worn or readied in inventory - used by
							// items like the Ring of Invisibility
	UNREADIED		= 6,	// Object was taken off or put away in inventory

	DEATH			= 7,	// NPC has just been killed (SI-only)
	STARTED_TALKING	= 9,	// NPC starts conversation with you (has TALK
							// schedule and has reached the Avatar)
							// This is SI-only - BG uses event 1 for this,
							// both for conversations triggered by doubleclick
							// and by the TALK schedule

	//The following events are arbitrary programmer conventions:
	BG_PATH_SUCCESS	= 7,	// Set with calls to UI_path_run_usecode, to indicate
							// a successful pathfind to the target object
	BG_PATH_FAILURE	= 8,	// Set with calls to UI_set_path_failure, to indicate
							// an interrupted pathfind (e.g. when the player
							// moves the Avatar manually)
	PATH_SUCCESS_9	= 9,	// Set with calls to UI_path_run_usecode, to indicate
							// a successful pathfind to the target object
	PATH_SUCCESS	= 10,	// Set with calls to UI_path_run_usecode, to indicate
							// a successful pathfind to the target object
	PATH_FAILURE	= 11,	// Set with calls to UI_set_path_failure, to indicate
							// an interrupted pathfind (e.g. when the player
							// moves the Avatar manually)
	SI_PATH_SUCCESS	= 13,	// Set with calls to UI_path_run_usecode, to indicate
							// a successful pathfind to the target object
	SI_PATH_FAILURE	= 14	// Set with calls to UI_set_path_failure, to indicate
							// an interrupted pathfind (e.g. when the player
							// moves the Avatar manually)
};

enum schedules {
	IN_COMBAT		= 0,	// renamed to not conflict with COMBAT, the NPC
							// stat property.
	PACE_HORIZONTAL	= 1,	// Walk horizontally until you hit a wall, then
							// turn around. (Patrolling on the cheap.)
	PACE_VERTICAL	= 2,	// Same as above, but vertically.
	TALK			= 3,	// NPC runs to the Avatar to talk to them. When
							// they get within a certain distance of where the
							// Avatar was when this schedule was set, a
							// STARTED_TALKING event is triggered on the NPC.
							// At this point the schedule must be changed.
	DANCE			= 4,
	EAT				= 5,
	FARM			= 6,	// Waves farm implements around.
	TEND_SHOP		= 7,	// This is really just a more specific version of
							// LOITER, used for narrowing down schedule barks.
							// See BAKE, SEW and BLACKSMITH for more specific
							// examples of shop behaviour.
	MINE			= 8,
	MINER			= 8,
	HOUND			= 9,
	STANDTHERE		= 10,	// renamed to not conflict with STAND, the NPC
							// animation frame
	LOITER			= 11,	// Hangs around a certain point, within 10 units
							// or so
	WANDER			= 12,	// Roams nearby a certain point (as much as a
							// 320x200 screen away)
	BLACKSMITH		= 13,
	SLEEP			= 14,
	WAIT			= 15,	// Similar to STAND, except that they will never
							// leave the WAIT schedule until it is manually
							// changed: their preset schedule list is ignored.
	MAJOR_SIT		= 16,
	GRAZE			= 17,
	BAKE			= 18,
	SEW				= 19,
	SHY				= 20,	// Tries to keep out of the Avatar's way - will
							// half-heartedly flee until out of a certain range.
	LAB				= 21,
	THIEF			= 22,	// Approaches the party and will take gold from the Avatar's
							// backpack, then will bark "Greetings!" in SI.
	WAITER			= 23,
	SPECIAL			= 24,	// ??
	KID_GAMES		= 25,	// Tag! Thou art it! And so forth.
	TAG				= 25,
	EAT_AT_INN		= 26,	// same as Eat, only with different barks.
	DUEL			= 27,
	SPAR			= 27,
	PREACH			= 28,	// Broken in SI, Leon resets to Loiter after trying it.
	PATROL			= 29,	// This tells the AI to follow a particular set of
							// patrol waypoints, defined by path eggs.
	DESK_WORK		= 30,
	FOLLOW_AVATAR	= 31	// That most noble of pursuits. Like WAIT, this
							// completely overrides the NPC's schedule list.
};

enum inv_slots_bg {
	BG_BACKPACK		=  0,
	BG_WEAPON_HAND	=  1,
	BG_SHIELD_HAND	=  2,
	BG_OFF_HAND		=  2,
	BG_BELT			=  3,
	BG_TORSO		=  5,
	BG_LEFT_RING	=  6,
	BG_RIGHT_RING	=  7,
	BG_QUIVER		=  8,
	BG_HEAD			=  9,
	BG_LEGS			= 10,
	BG_FEET			= 11,
	BG_USECODE		= 12,	// Exult-only; ported from SI
	BG_CLOAK		= 13,	// Exult-only; ported from SI
	BG_GLOVES		= 14,	// Exult-only; ported from SI
	BG_TRIPLE_BOLTS	= 15,
	BG_EARS			= 16,	// Exult-only; ported from SI
	BG_BACK_SHIELD	= 17,	// Exult-only; ported from SI
	BG_BACK_2H		= 19,	// Exult-only; ported from SI
	BG_BOTH_HANDS	= 20,
	BG_LRGLOVES		= 21,	// Uses both ring slots
	BG_AMULET		= 22	// Exult-only; ported from SI
};

enum inv_slots_si {
	SI_SHIELD_HAND	=  0,
	SI_OFF_HAND		=  0,
	SI_WEAPON_HAND	=  1,
	SI_CLOAK		=  2,
	SI_AMULET		=  3,
	SI_HEAD			=  4,
	SI_GLOVES		=  5,
	SI_USECODE		=  6,
	SI_RIGHT_RING	=  7,
	SI_LEFT_RING	=  8,
	SI_EARS			=  9,
	SI_QUIVER		= 10,
	SI_BELT			= 11,
	SI_TORSO		= 12,
	SI_FEET			= 13,
	SI_LEGS			= 14,
	SI_BACKPACK		= 15,
	SI_BACK_SHIELD	= 16,
	SI_BACK_2H		= 17,
	SI_TRIPLE_BOLTS	= 18,	// Exult-only; ported from BG
	SI_BOTH_HANDS	= 20,
	SI_LRGLOVES		= 21,	// Exult-only; ported from BG ; uses both ring slots
};

enum npc_attack_modes {
	NEAREST		= 0,
	WEAKEST		= 1,
	STRONGEST	= 2,
	BERSERK		= 3,
	PROTECT		= 4,
	DEFEND		= 5,
	FLANK		= 6,
	FLEE		= 7,
	RANDOM		= 8,
	MANUAL		= 9
};

enum item_masks {
	MASK_NONE				= 0x0,
	MASK_NPC				= 0x04,		//Only find NPCs, alive or dead
	MASK_NPC2				= 0x08,		//Only find living NPCs
	MASK_EGG				= 0x10,		//Also for barges
	MASK_INVISIBLE			= 0x20,
	MASK_PARTY_INVISIBLE	= 0x40,
	MASK_TRANSLUCENT		= 0x80,
	MASK_ALL_UNSEEN			= 0xB0		//MASK_EGG+MASK_INVISIBLE+MASK_TRANSLUCENT
};

extern void Func094A 0x94A (var var0000);
extern var Func0910 0x910 (var var0000);

void Func0096 shape#(0x96) () {
	if (event == DOUBLECLICK) {
		if (gflags[BOATING_TO_MOONSHADE]) {
			abort;
		}
		if (get_item_flag(ON_MOVING_BARGE)) {
			Func094A("@The sails must be furled before the planks are raised.@");
		} else if (!Func0910(item)) {
			Func094A("@I believe the gangplank is blocked.@");
		} else if (UI_in_gump_mode()) {
			UI_close_gumps();
		}
	}
}

extern void Func090D 0x90D (var var0000, var var0001, var var0002, var var0003, var var0004, var var0005, var var0006);
extern var Func09A0 0x9A0 (var var0000, var var0001);
extern void Func07DE object#(0x7DE) ();
extern void Func07E0 object#(0x7E0) ();

void Func00A0 shape#(0xA0) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;
	var var0008;
	var var0009;

	if (event == DOUBLECLICK) {
		if (gflags[TEMP_FLAG_1]) {
			UI_error_message("WARNING: $Temp1Flag is set!!! Report at what point in the game you are in.");
			gflags[TEMP_FLAG_1] = false;
		}
		if (gflags[TEMP_FLAG_2]) {
			UI_error_message("WARNING: $Temp2Flag is set!!! Report at what point in the game you are in.");
			gflags[TEMP_FLAG_2] = false;
		}
		if (gflags[TEMP_FLAG_3]) {
			UI_error_message("WARNING: $Temp3Flag is set!!! Report at what point in the game you are in.");
			gflags[TEMP_FLAG_3] = false;
		}
		if (gflags[TEMP_FLAG_4]) {
			UI_error_message("WARNING: $Temp4Flag is set!!! Report at what point in the game you are in.");
			gflags[TEMP_FLAG_4] = false;
		}
		if (gflags[BANES_RELEASED]) {
			var0000 = [ANDRAL, BRENDANN, FLICKEN, CALADIN, CELLIA, SHAZZANA, KRAYG, LUTHER, LYDIA, SHMED, STANDARR, TEMPLAR, MARSTEN, SPEKTOR, LUCILLA, BUCIA, HAWK, GUSTACIO, MELINO, JULIA, ROCCO, TOPO, POTHOS, MOSH, FILBERCIO, FRIGIDAZZI, FLINDO, KANE, GOBLIN_MESSENGER, EDRIN, COLUMNA, ALYSSAND, DELIN, GARTH, JOTH, VOLDIN, JENDON, JORVIN, KYLISTA, DELPHYNIA, LEON, KALEN, OLON, SCOTS, ZULITH, ENSORCIO, ARGUS, BYRIN, DEVRA, BAIYANDA, BWUNDAI, MWAERNO, GILWOYAI, KAPYUNDI];
			for (var0003 in var0000 with var0001 to var0002) {
				if ((var0003->get_schedule_type() != WAIT) && (!var0003->get_item_flag(DEAD))) {
					UI_error_message(("NPC #" + var0003) + " is moving - get his schedule!");
					UI_error_message("His current activity is #" + var0003->get_schedule_type());
					UI_error_message("Save game, and report to Brendann NOW!");
				}
			}
		}
		var0000 = find_nearby(0x0113, 0x0008, MASK_EGG);
		for (var0006 in var0000 with var0004 to var0005) {
			if (var0006->get_item_quality() && (var0006->get_item_frame() == 0x0006)) {
				var0007 = AVATAR->get_cont_items(0x022B, QUALITY_ANY, FRAME_ANY);
				if (var0007) {
					if (var0007->get_cont_items(0x022F, QUALITY_ANY, FRAME_ANY)) {
						Func090D(var0006, -1, -1, -1, Func00A0, var0006, PATH_SUCCESS);
					}
				}
			}
		}
	}
	if (event == PATH_SUCCESS) {
		var0008 = script AVATAR {
			nohalt;
			wait 2;
			face south;
			wait 2;
			actor frame bowing;
			wait 2;
			actor frame kneeling;
			wait 2;
			call Func07DE;
			repeat 10 {
				actor frame kneeling;
			};
		};
		var0009 = Func09A0(0x0000, 0x0004);
		var0008 = script var0009 {
			nohalt;
			wait 18;
			call Func07E0;
		};
	}
}

void Func00B2 shape#(0xB2) () {
	var var0000;
	var var0001;

	if (event == DOUBLECLICK) {
		var0000 = get_item_frame();
		var0001 = UI_si_display_map(var0000);
	}
}

extern void Func097F 0x97F (var var0000, var var0001, var var0002);

void Func00D1 shape#(0xD1) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;
	var var0008;
	var var0009;
	var var000A;
	var var000B;

	if (event == DOUBLECLICK) {
		var0000 = get_item_frame();
		if (var0000 == 0x0016) {
			set_item_frame(0x0017);
			UI_play_sound_effect(0x0027);
			Func097F(AVATAR, "@Pretty@", 0x0004);
			obj_sprite_effect(ANIMATION_FIREWORKS, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, LOOP_ONCE);
			var0001 = script item {
				nohalt;
				wait 20;
				frame 21;
			};
			abort;
		}
	}
	if (event == READIED) {
		var0000 = get_item_frame();
		if (var0000 == 0x000A) {
			UI_close_gumps();
			var0002 = find_nearby(0x0210, 0x001E, MASK_NONE);
			var0003 = find_nearby(0x0113, 0x000F, MASK_ALL_UNSEEN);
			for (var0006 in var0003 with var0004 to var0005) {
				var0006->remove_item();
			}
			var0001 = script AVATAR {
				nohalt;
				say "@Die, you cursed fiends!@";
				actor frame cast_up;
				actor frame cast_out;
				actor frame strike_2h;
			};
			Func097F(AVATAR->get_npc_object(), "@I despise you all!@", 0x0002);
			for (var0009 in var0002 with var0007 to var0008) {
				var000A = var0009->get_object_position();
				var000A[0x0001] -= var000A[0x0003] / 0x0002;
				var000A[0x0002] -= var000A[0x0003] / 0x0002;
				UI_play_sound_effect(0x0047);
				UI_sprite_effect(ANIMATION_LIGHTNING, var000A[0x0001], var000A[0x0002], 0x0000, 0x0000, 0x0000, LOOP_ONCE);
				var000A = var0009->get_object_position();
				UI_play_sound_effect(0x0029);
				var0009->remove_item();
				var000B = UI_create_new_object(0x00E0);
				if (var000B) {
					var0001 = UI_update_last_created(var000A);
				}
			}
		}
	}
}

void Func00D2 shape#(0xD2) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;

	if (event == DOUBLECLICK) {
		var0000 = get_item_quality();
		if (var0000 == UI_part_of_day()) {
			return;
		}
		var0001 = set_item_quality(UI_part_of_day());
		if (UI_die_roll(0x0001, 0x0004) > 0x0001) {
			var0002 = UI_create_new_object(0x0179);
			if (var0002) {
				var0002->set_item_flag(TEMPORARY);
				var0002->clear_item_flag(OKAY_TO_TAKE);
				var0002->set_item_frame(0x0018);
				var0003 = get_object_position();
				var0004 = var0003[0x0001] - UI_die_roll(0x0000, 0x0001);
				var0005 = var0003[0x0002] - UI_die_roll(0x0000, 0x0001);
				var0006 = var0003[0x0003] + 0x0001;
				var0001 = UI_update_last_created([var0004, var0005, var0006]);
			}
		}
	}
}

void Func00D7 shape#(0xD7) () {
	var var0000;
	var var0001;
	var var0002;

	if ((event == SCRIPTED) || (event == DOUBLECLICK)) {
		var0000 = AVATAR->find_nearby(0x03C1, 0x0028, MASK_ALL_UNSEEN);
		if (!UI_on_barge()) {
			var0001 = script item after 2 ticks {
				call Func00D7;
			};
		} else {
			var0002 = get_object_position();
			if (var0002 > 0x082F) {
				var0001 = script var0000 after 3 ticks {
					step west;
					call Func00D7;
				};
			}
		}
	}
}

extern var Func0906 0x906 (var var0000);
extern var Func0908 0x908 (var var0000, var var0001, var var0002, var var0003, var var0004, var var0005);
extern void Func0902 0x902 (var var0000, var var0001);
extern void Func0909 0x909 (var var0000, var var0001, var var0002, var var0003, var var0004, var var0005, var var0006, var var0007, var var0008);
extern void Func0903 0x903 ();
extern void Func0904 0x904 (var var0000);
extern void Func0905 0x905 (var var0000);

void Func00E1 shape#(0xE1) () {
	var var0000;

	if ((event != DOUBLECLICK) && (event != SCRIPTED)) {
		return;
	}
	var0000 = Func0906(item);
	if (var0000 == 0x0001) {
		if (Func0908(item, 0x0204, 0x0000, 3, 0, 0x0005)) {
			Func0902(item, 0x00E1);
			Func0909(item, 0x01D7, 0x0001, 0x0001, 0x00F6, 0x0000, 0, 0, 0x0007);
			UI_play_sound_effect2(0x0069, item);
		} else {
			Func0903();
		}
	}
	if (var0000 == 0x0000) {
		if (Func0908(item, 0x0204, 0x0001, 0, -3, 0x0007)) {
			Func0902(item, 0x00E1);
			Func0909(item, 0x01D7, 0x0000, 0x0002, 0x00F6, 0x0001, 0, 0, 0x0007);
			UI_play_sound_effect2(0x006A, item);
		} else {
			Func0903();
		}
	}
	if (var0000 == 0x0002) {
		Func0904(item);
	}
	if (var0000 == 0x0003) {
		Func0905(item);
	}
}

extern var Func0954 0x954 ();
extern void Func0855 0x855 (var var0000);
extern void Func097F 0x97F (var var0000, var var0001, var var0002);
extern var Func0932 0x932 (var var0000);
extern var Func0955 0x955 ();
extern void Func0855 0x855 (var var0000);
extern void Func09AC 0x9AC (var var0000, var var0001, var var0002, var var0003);
extern var Func097D 0x97D (var var0000, var var0001, var var0002, var var0003, var var0004);
extern var Func0992 0x992 (var var0000, var var0001, var var0002, var var0003);
extern var Func099B 0x99B (var var0000, var var0001, var var0002, var var0003, var var0004, var var0005, var var0006);
extern var Func0957 0x957 (var var0000);
extern var Func098E 0x98E ();
extern void Func0933 0x933 (var var0000, var var0001);
extern void Func0934 0x934 (var var0000);

void Func00E4 shape#(0xE4) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;
	var var0008;
	var var0009;
	var var000A;
	var var000B;
	var var000C;
	var var000D;
	var var000E;
	var var000F;
	var var0010;
	var var0011;
	var var0012;
	var var0013;
	var var0014;
	var var0015;
	var var0016;
	var var0017;
	var var0018;
	var var0019;
	var var001A;
	var var001B;
	var var001C;
	var var001D;
	var var001E;
	var var001F;
	var var0020;
	var var0021;
	var var0022;
	var var0023;
	var var0024;

	var0000 = get_npc_id();
	if (var0000 == 0x0000) {
		set_npc_id(UI_die_roll(0x000A, 0x000C));
		var0000 = get_npc_id();
	}
	var0001 = Func0954();
	if (var0000 == 0x000E) {
		if ((event == DEATH) && (!gflags[PIBB_IS_DEAD])) {
			clear_item_flag(SI_TOURNAMENT);
			reduce_health(0x0032, NORMAL_DAMAGE);
			gflags[PIBB_IS_DEAD] = true;
			abort;
		}
		if (get_item_flag(INVISIBLE)) {
			UI_play_sound_effect(0x0030);
			clear_item_flag(INVISIBLE);
			var0002 = script item after UI_get_random(0x0006) ticks {
				nohalt;
				call Func00E4;
			};
		} else {
			UI_play_sound_effect(0x0039);
			var0003 = get_object_position();
			UI_sprite_effect(ANIMATION_POOF, var0003[0x0001], var0003[0x0002], 0x0000, 0x0000, 0x0000, LOOP_ONCE);
			set_item_flag(INVISIBLE);
			var0002 = script item after 2 ticks {
				nohalt;
				call Func00E4;
			};
		}
		abort;
	}
	if (var0000 == 0x001E) {
		if ((event == PATH_SUCCESS) || (event == SCRIPTED)) {
			Func0855(event);
			abort;
		}
	}
	if (event == DOUBLECLICK) {
		AVATAR->item_say("@Pikeman!@");
		Func097F(item, "@Yes?@", 0x0002);
		if (var0000 == 0x0009) {
			if (Func0932(AVATAR)) {
				clear_item_say();
				if (UI_die_roll(0x0001, 0x0002) == 0x0001) {
					Func097F(item, "@Fight!@", 0x0001);
				} else {
					Func097F(item, "@Don't be a coward!@", 0x0001);
				}
				abort;
			}
			gflags[TEMP_FLAG_1] = true;
			var0002 = script item after 6 ticks {
				nohalt;
				call Func00E4;
			};
			abort;
		}
		if (var0000 == 0x001E) {
			clear_item_say();
			ELSI->show_npc_face0(0x0000);
			say("\"I suppose thou dost wish me to operate the gate?\"");
			if (Func0955()) {
				if (!gflags[AVATAR_IS_KNIGHT]) {
					ELSI->show_npc_face0(0x0000);
					say("\"Stand back while I crank the winch. 'Tis heavy and dangerous. Thou dost never know when it might come down upon thine head.\"");
					event = STARTED_TALKING;
					Func0855(event);
					abort;
				}
				ELSI->show_npc_face0(0x0000);
				say("\"Gladly I will for a fellow Knight. Have a pleasant day and may goblin blood stain thy sword soon.\"");
				event = STARTED_TALKING;
				Func0855(event);
				abort;
			}
			ELSI->show_npc_face0(0x0000);
			say("\"Then bother me not! I must be about my duty!\"");
			Func097F(item, "@Watch out for goblins...@", 0x0002);
			abort;
		}
		set_schedule_type(TALK);
	}
	// This looks like it should have been event == SI_PATH_FAILURE instead.
	if (event == SI_PATH_SUCCESS) {
		set_schedule_type(WAIT);
		var0002 = script item after 5 ticks {
			nohalt;
			call Func00E4;
		};
		return;
	}
	if (event == SCRIPTED) {
		if (gflags[TEMP_FLAG_1]) {
			gflags[TEMP_FLAG_1] = false;
			var0004 = AVATAR->get_object_position();
			var0005 = get_object_position();
			if ((get_distance(AVATAR) < 0x0005) && (var0004[0x0003] == var0005[0x0003])) {
				// I see no way other than this
				goto labelFunc00E4_0956;
			} else {
				clear_item_say();
				item_say("@Please step forward.@");
			}
			abort;
		}
		if ((get_item_frame() != 0x000A) && (!gflags[MONITOR_TRAINING])) {
			set_schedule_type(MAJOR_SIT);
		}
		return;
	}
	if (event == PROXIMITY) {
		var0006 = UI_die_roll(0x0000, 0x0008);
		if (var0006 == 0x0001) {
			item_say("@Do not tarry here!@");
		}
		if (var0006 == 0x0002) {
			item_say("@Pay the tariff.@");
		}
		if (var0006 == 0x0003) {
			item_say("@Move along.@");
		}
		if (var0006 == 0x0004) {
			item_say("@Beware of Goblins.@");
		}
		if (var0006 == 0x0005) {
			item_say("@Is it meal time yet?@");
		}
		if (var0006 == 0x0006) {
			if (gflags[AVATAR_IS_KNIGHT]) {
				item_say("@Greetings, Knight!@");
			} else {
				item_say("@Knave!@");
			}
		}
		abort;
	}
	if ((event == STARTED_TALKING) && (var0000 == 0x000A)) {
		set_schedule_type(WANDER);
		HENCHMAN->show_npc_face0(0x0000);
		say("\"Why dost thou interrupt? I am a Pikeman of Monitor.\"");
		say("\"I must return to my duties lest the goblin horde take us.\"");
		UI_remove_npc_face0();
		Func097F(AVATAR, "@Farewell!@", 0x0000);
		Func097F(item, "@Be vigilant!@", 0x0002);
	}
	if ((event == STARTED_TALKING) && (var0000 == 0x000B)) {
		set_schedule_type(WANDER);
		HAZARD->show_npc_face0(0x0000);
		say("\"I would have words with thee but my duties call.\"");
		say("\"Please consult me when I am not on duty.\"");
		UI_remove_npc_face0();
		Func097F(AVATAR, "@Farewell!@", 0x0000);
		Func097F(item, "@Be vigilant!@", 0x0002);
	}
	if ((event == STARTED_TALKING) && (var0000 == 0x000C)) {
		set_schedule_type(WANDER);
		ELSI->show_npc_face0(0x0000);
		say("\"Greetings. I'm a Pikeman of Monitor.\"");
		say("\"The Goblins are dangerous. Watch out for them. As for me, I must return to my duties now.\"");
		UI_remove_npc_face0();
		Func097F(AVATAR, "@Farewell!@", 0x0000);
		Func097F(item, "@Be vigilant!@", 0x0002);
	}
	if ((event == STARTED_TALKING) && (var0000 == 0x0003)) {
		set_schedule_type(HOUND);
		HAZARD->show_npc_face0(0x0000);
		if (!MARSTEN->get_item_flag(MET)) {
			say("\"I will not discuss matters with a stranger to Monitor. Thou shouldst speak with Lord Marsten.\"");
		} else if (!gflags[AVATAR_IS_KNIGHT]) {
			say("\"Thou art not a Knight. Only warriors are welcome here. Move along before thou dost feel the cold steel of mine halberd.\"");
			set_schedule_type(WANDER);
		} else {
			say("\"Welcome, Knight. I must be about my duties.\"");
			set_schedule_type(WANDER);
		}
		UI_remove_npc_face0();
		Func097F(item, "@Move along!@", 0x0002);
	}
	if ((event == STARTED_TALKING) && (var0000 == 0x0005)) {
		var0007 = find_nearby(0x00E4, 0x001E, MASK_NONE);
		for (var000A in var0007 with var0008 to var0009) {
			var000A->set_schedule_type(SHY);
			Func097F(var000A, "@Find the traitor!@", UI_get_random(0x0014));
		}
		HENCHMAN->show_npc_face0(0x0000);
		if (CALADIN->npc_nearby()) {
			say("\"Thou didst call, Lord Caladin?\"");
			CALADIN->show_npc_face1(0x0000);
			say("\"Send thy men to arrest Lord Marsten! I have evidence that he is our traitor!\"");
			0x0000->set_conversation_slot();
			say("\"Arrest... Lord Marsten?\"");
			0x0001->set_conversation_slot();
			say("\"Look, man, thou art a Bear like myself! Obey me now, and all will be right.\"");
			0x0000->set_conversation_slot();
			say("\"Yes, milord.\"");
			Func097F(CALADIN, "@On thy way, then!@", 0x0000);
			Func097F(item, "@Yes, milord.@", 0x0003);
		} else {
			say("\"Avatar, I am pleased to report that my men are scouring the city for that traitor Marsten.\"");
			Func097F(item, "@Find Marsten!@", 0x0000);
		}
		abort;
	}
	if ((event == STARTED_TALKING) && (var0000 == 0x000F)) {
		set_schedule_type(HOUND);
		HAZARD->show_npc_face0(0x0000);
		say("\"Please spare me! I shall do anything! I do not want to be roasted over a goblin's fire...\"");
		say("\"Oh, er, hello there. My name is Johnson. Pardon mine outburst, but I thought thou mightest be a goblin. I was attempting to scare them, surprise them, before I rushed them.\"");
		say("\"Thou art most fortunate. I might have accidentally killed thee had I not recognized thee as being from Monitor. I was going to kill as many of those green devils as I could before making my way back.\"");
		say("\"Let us return to Monitor! We will be greeted with a hero's welcome for we will be the first to have survived, I mean, braved the goblin's lair.\"");
		UI_remove_npc_face0();
		Func097F(item, "@To Monitor!@", 0x0005);
		set_npc_id(0x0010);
	}
	if ((event == DOUBLECLICK) && (var0000 == 0x0010)) {
		set_schedule_type(HOUND);
		HAZARD->show_npc_face0(0x0000);
		say("\"There is no time for small talk! We must be on our way back to Monitor!\" *\"Thou wouldst not want us to be eaten before we have the chance to become heroes, wouldst thou?\" *\" Of course not! Let us be on our way!\"");
		UI_remove_npc_face0();
		Func097F(item, "@I shan't fear goblins...@", 0x0005);
	}
	if ((event == STARTED_TALKING) && (var0000 == 0x000D)) {
		set_npc_id(0x0003);
		set_schedule_type(WANDER);
		var000B = find_nearby(0x00E4, 0x0014, MASK_NONE);
		for (var000E in var000B with var000C to var000D) {
			var000E->set_schedule_type(WANDER);
		}
		abort;
	}
	if ((event == STARTED_TALKING) && (var0000 == 0x0001)) {
		set_schedule_type(TEND_SHOP);
		HENCHMAN->show_npc_face0(0x0000);
		say("\"This is the Bull Tower, knave. State thy business or be gone. We have no time for idle chit-chat with Goblins about.\"");
		add(["Goblins", "pikeman", "Bull Tower"]);
		if (gflags[KNOW_PIKEMEN_HAVE_HAWK] && (!gflags[PAID_HAWK_RANSOM])) {
			add("Captain Hawk");
		}
		if (gflags[KNOW_PIKEMEN_HAVE_HAWK] && (!gflags[PIKEMEN_SPOKE_HAWK])) {
			HAWK->set_npc_id(0x0001);
		}
		var000F = HAWK->get_npc_id() * 0x0064;
		if (gflags[PIKEMEN_SPOKE_HAWK] && (!gflags[PAID_HAWK_RANSOM])) {
			add("pay fine");
		}
		converse ("bye") {
			case "Goblins" (remove):
				say("\"Yes, that entire vile race is the scourge of all men of the Serpent Isle.\"");
				fallthrough;

			case "pikeman" (remove):
				say("\"I received my training on the List Fields by the finest knights and trainers in all of Monitor. Now my duty is to protect the travelling citizenry from all manner of harm. Goblins, thieves and the like.\"");
				fallthrough;

			case "Bull Tower" (remove):
				say("\"The Bull Tower was erected to protect the people of Sleeping Bull from Goblin attack. I dare say since it was built they have seldom dared to challenge it.\"");
				fallthrough;

			case "Captain Hawk" (remove):
				say("\"So, thou art a friend of that criminal? His ransom is a mere ",
					var000F,
					" Monetari.\"");
				say("\"We also accept other precious items...\"");
				if (!gflags[PIKEMEN_SPOKE_HAWK]) {
					Func09AC(SELINA, 0x0507, 0x08BF, TALK);
				}
				gflags[PIKEMEN_SPOKE_HAWK] = true;
				add("pay fine");
				fallthrough;

			case "pay fine":
				say("\"Dost thou wish to pay Captain Hawk's fine?\"");
				if (Func0955()) {
					say("\"I do not believe that a rogue like thyself hast the riches to buy Hawk's freedom! What canst thou give us?\"");
					UI_push_answers();
					if (Func097D(PARTY, 0x0001, 0x0286, QUALITY_ANY, 0x0002)) {
						add("gold bars");
					}
					add(["jewels", "Monetari", "guilders", "Fawn money", "magic items", "nothing"]);
				} else {
					Func097F(item, "@Thou dost waste my time!@", 0x0000);
					abort;
				}
				fallthrough;

			case "jewels" (remove):
				say("\"Don't take jewels. Thou mightest cheat us by telling us they was worth more than they was!\"");
				say("\"Gold or silver, yeah. Jewels, no.\"");
				fallthrough;

			case "Monetari" (remove):
				say("\"Now that's something we like! How much dost thou have?\"");
				var0010 = PARTY->count_objects(0x03B7, QUALITY_ANY, FRAME_ANY);
				var0011 = Func0992(SHAMINO, (("@We've got " + var0010) + " Monetari, sir.@"), (("@I've got " + var0010) + " Monetari.@"), false);
				0x0000->set_conversation_slot();
				if (var0010 > var000F) {
					say("\"'Tis not enough!\"");
					var0011 = Func0992(0x0001, (("@But thou didst say the ransom was " + var000F) + " Monetari!@"), (("@But thou didst say the ransom was " + var000F) + " Monetari!@"), false);
					0x0000->set_conversation_slot();
					var000F = ((var0010 / 0x0064) + UI_get_random(0x0005)) * 0x0064;
					if (var000F < 0x0BB8) {
						var0000 = var000F / 0x0064;
						HAWK->set_npc_id(var0000);
						var000F = var0000 * 0x0064;
						say("\"Well, we changed our minds. Now we want ",
							var000F,
							" Monetari!\"");
						var0011 = Func0992(0x0001, "@They are thieves!@", 0x0000, false);
						if (var0011 != AVATAR) {
							0x0000->set_conversation_slot();
							UI_remove_npc_face1();
						}
					} else {
						say("\"'Tis not enough. Bring us more!\"");
						HAWK->set_npc_id(0x001F);
					}
					UI_pop_answers();
				} else {
					say("\"Only ",
						var0010,
						"? 'Tis not enough!\"");
					Func097F(item, "@Remove thyself!@", 0x0000);
					abort;
				}
				fallthrough;

			case "guilders" (remove):
				say("\"Thou dost mean the strange glowing money that the mages use?\"");
				say("\"Bah! Take that to Bull and exchange it for true money -- like Monetari!!!\"");
				fallthrough;

			case "Fawn money" (remove):
				say("\"Ha ha ha!!! Very funny. Take those little silver coins to Bull, and exchange them for true coin!\"");
				fallthrough;

			case "magic items" (remove):
				say("\"Pwah! Monitorians do not need magic -- especially not magic weapons!\"");
				fallthrough;

			case "gold bars" (remove):
				say("\"All right, thou canst have him. Here be the key.\"");
				var0012 = true;
				while (var0012 == true) {
					var0012 = UI_remove_party_items(0x0001, 0x0286, QUALITY_ANY, FRAME_ANY, 0x0000);
				}
				gflags[PAID_HAWK_RANSOM] = true;
				var0002 = Func099B(AVATAR, 0x0001, 0x0281, 0x004F, 0x0001, 0x0000, true);
				HAWK->set_npc_id(0x0000);
				Func097F(item, "@Thanks for the gold!@", 0x0000);
				abort;

			case "nothing":
				say("\"I did not think thou didst have any money!\"");
				UI_pop_answers();
				fallthrough;

			case "bye":
				UI_remove_npc_face0();
				Func097F(AVATAR, "@Goodbye!@", 0x0000);
				Func097F(item, "@Farewell!@", 0x0002);
				abort;
		}
	}
	if ((event == STARTED_TALKING) && (var0000 == 0x0009)) {
labelFunc00E4_0956:
		clear_item_say();
		if (AVATAR->get_item_flag(INVISIBLE)) {
			item_say("@What!!?@");
			Func097F(item, "@Who said that?!@", 0x0008);
			abort;
		}
		HAZARD->show_npc_face0(0x0000);
		if (gflags[MONITOR_TRAINING]) {
			say("\"Sorry, but we have too many people in there already.\"");
			return;
		}
		var0004 = get_object_position();
		if ((get_item_frame() != 0x000A) || ((var0004[0x0001] != 0x03F8) || ((var0004[0x0002] != 0x0A77) || (var0004[0x0003] != 0x0006)))) {
			say("\"Sorry, but I cannot help thee until I return to my desk. All the paperwork that I have to fill out is there.\"");
			si_path_run_usecode([0x03FB, 0x0A77, 0x0006], SI_PATH_SUCCESS, item, Func00E4, true);
			return;
		}
		say("\"My, what a fine-looking warrior! How might I be of service to thee?\"");
		var0013 = Func0957(["nothing", "fight", "train"]);
		if (var0013 == 0x0001) {
			say("\"Maybe when thou dost feel more brave, then.\"");
			return;
		}
		if ((UI_game_hour() < 0x0009) || (UI_game_hour() > 0x0011)) {
			say("\"The business hours are from 9am to 6pm. Return then.\"");
			return;
		}
		if (var0013 == 0x0002) {
			say("\"Merely a spar then? All right, good enough....\"");
			say("\"Which of you dost wish to fight?\"");
		}
		if (var0013 == 0x0003) {
			say("\"Which of you dost wish to train?\"");
		}
		var0014 = Func098E();
		var0014 = 0x0000 & var0014;
		var0015 = ["nobody"];
		for (var000A in var0014 with var0016 to var0017) {
			if (!(var000A == 0x0000)) {
				var0015 &= var000A->get_npc_name();
			}
		}
		var0018 = Func0957(var0015);
		var0018 = var0014[var0018];
		if (var0018 == 0x0000) {
			say("\"Well, mayhap some other time, then.\"");
			return;
		}
		var0018 = var0018->get_npc_object();
		var000A = var0018->get_object_position();
		var0015 = get_object_position();
		if ((var0018->get_distance(item) > 0x0008) || ((var000A[0x0003] != var0015[0x0003]) || var0018->get_item_flag(INVISIBLE))) {
			say("\"Where is he, anyway? Tell him to step forward before bothering me again.\"");
			return;
		}
		var0014 = [CALADIN, LUTHER, TEMPLAR];
		for (var0001 in var0014 with var0019 to var001A) {
			if ((UI_game_hour() > 0x0008) && (UI_game_hour() < 0x000C)) {
				if ((!Func0932(var0001)) && (!var0001->get_item_flag(DEAD))) {
					var0001->move_object([0x03D4, 0x0A8C, 0x0000]);
				}
			}
		}
		var0014 = [SHAZZANA, TEMPLAR];
		for (var0001 in var0014 with var001B to var001C) {
			if ((UI_game_hour() > 0x000B) && (UI_game_hour() < 0x000F)) {
				if ((!Func0932(var0001)) && (!var0001->get_item_flag(DEAD))) {
					var0001->move_object([0x03D4, 0x0A8C, 0x0000]);
				}
			}
		}
		if ((UI_game_hour() > 0x000E) && (UI_game_hour() < 0x0012)) {
			if ((!Func0932(BRENDANN)) && (!var0001->get_item_flag(DEAD))) {
				BRENDANN->move_object([0x03D4, 0x0A8C, 0x0000]);
			}
		}
		if (!(Func0932(CALADIN) || (Func0932(SHAZZANA) || (Func0932(BRENDANN) || Func0932(LUTHER))))) {
			say("\"Sorry lad, but no one is around for thee to spar with. Come back some other time.\"");
			return;
		}
		if (var0013 == 0x0003) {
			do {
				say("\"With whom dost thou wish to train?\"");
				var0014 = [INVALID_NPC, CALADIN, SHAZZANA, BRENDANN, LUTHER];
				var001D = ["nobody", "Caladin", "Shazzana", "Brendann", "Luther"];
				var001E = ["invalid time", "9am and noon", "noon and 3pm", "3pm and 6pm", "9am and noon"];
				var001F = Func0957(var001D);
				if (var001F == 0x0001) {
					say("\"Then why art thou wasting my time?\"");
					return;
				}
				var0020 = var0014[var001F];
				if (var0020 == SHAZZANA) {
					var0021 = "She's";
				} else {
					var0021 = "He's";
				}
				if (Func0932(var0020)) {
					break;
				}
				var0022 = var001D[var001F];
				var0023 = var001E[var001F];
				say("\"Sorry, but ",
					var0022,
					" is not around. ",
					var0021,
					" is usually here between ",
					var0023,
					". Thou mightest return then.\"");
			} while (true);
			var0024 = var001D[var001F];
			say("\"Training costs 50 Monetari. All right?\"");
			if (Func0955()) {
				say("\"Oh, ",
					var0024,
					", this here warrior wants to train with ye!\"");
				UI_remove_npc_face0();
				BRENDANN->set_npc_id(0x0000);
				TEMPLAR->set_npc_id(0x0000);
				CALADIN->set_npc_id(0x0000);
				SHAZZANA->set_npc_id(0x0000);
				LUTHER->set_npc_id(0x0000);
				Func0933(var0020, var0018);
			} else {
				say("\"Return when thou art ready.\"");
				return;
			}
		}
		if (var0013 == 0x0002) {
			Func0934(var0018);
			abort;
		}
	}
}

extern var Func0954 0x954 ();
extern var Func0953 0x953 ();
extern var Func09A0 0x9A0 (var var0000, var var0001);
extern void Func08EC 0x8EC ();
extern void Func097F 0x97F (var var0000, var var0001, var var0002);
extern void Func09B2 0x9B2 ();
extern var Func0955 0x955 ();
extern void Func07D1 object#(0x7D1) ();
extern void Func094F 0x94F (var var0000, var var0001);
extern var Func0956 0x956 (var var0000);
extern void Func09AC 0x9AC (var var0000, var var0001, var var0002, var var0003);
extern var Func0992 0x992 (var var0000, var var0001, var var0002, var var0003);
extern var Func098D 0x98D ();
extern var Func0988 0x988 (var var0000, var var0001);
extern void Func0636 object#(0x636) ();
extern void Func07D2 object#(0x7D2) ();

void Func00E6 shape#(0xE6) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;
	var var0008;
	var var0009;
	var var000A;
	var var000B;
	var var000C;
	var var000D;
	var var000E;
	var var000F;
	var var0010;
	var var0011;
	var var0012;
	var var0013;
	var var0014;
	var var0015;
	var var0016;
	var var0017;
	var var0018;
	var var0019;
	var var001A;
	var var001B;
	var var001C;
	var var001D;
	var var001E;
	var var001F;
	var var0020;

	var0000 = FRIGIDAZZI->get_item_flag(MET);
	var0001 = Func0954();
	var0002 = UI_is_pc_female();
	var0003 = Func0953();
	var0004 = UI_part_of_day();
	if ((var0004 > EARLY) || (var0004 < EVENING)) {
		var0004 = "day";
	} else {
		var0004 = "evening";
	}
	var0005 = "his";
	if (var0002) {
		var0005 = "her";
	}
	var0006 = FRIGIDAZZI->get_distance(AVATAR);
	var0007 = [0x0975, 0x0748, 0x0000];
	var0008 = FRIGIDAZZI->get_object_position();
	var0009 = [0x0986, 0x0766];
	var000A = var0007[0x0001] - var0008[0x0001];
	if (var000A < 0x0000) {
		var000A *= -1;
	}
	var000B = var0007[0x0002] - var0008[0x0002];
	if (var000B < 0x0000) {
		var000B *= -1;
	}
	var000C = var000A + var000B;
	var000D = Func09A0(0x0005, 0x0003);
	if (event == SCRIPTED) {
		if (FRIGIDAZZI->get_npc_id() == 0x0011) {
			Func08EC();
			abort;
		}
		if (FRIGIDAZZI->get_npc_id() == 0x0010) {
			Func08EC();
			abort;
		}
		if (FRIGIDAZZI->get_npc_id() == 0x000F) {
			FRIGIDAZZI->set_npc_id(0x0010);
			UI_init_conversation();
			FRIGIDAZZI->show_npc_face0(0x0002);
			say("\"I think that I am falling in love with thee, ",
				var0003,
				"! How did I ever live without thee...\"");
			UI_end_conversation();
			Func097F(item, "@Kiss me again, love...@", 0x0000);
			Func097F(AVATAR, "@I cannot resist!@", 0x0002);
			var000E = script FRIGIDAZZI after 8 ticks {
				nohalt;
				call Func00E6;
			};
			abort;
		}
		if (FRIGIDAZZI->get_npc_id() == 0x000E) {
			FRIGIDAZZI->set_npc_id(0x000F);
			UI_fade_palette(0x000C, 0x0001, 0x0000);
			UI_play_music(0x0027, Func09A0(0x0005, 0x0001));
			AVATAR->move_object([0x0976, 0x0745, 0x0000]);
			FRIGIDAZZI->move_object([0x0974, 0x0749, 0x0002]);
			var000E = script AVATAR {
				nohalt;
				actor frame standing;
				face south;
			};
			var000E = script FRIGIDAZZI after 15 ticks {
				nohalt;
				face east;
				call Func0636;
				// Bug: the next line should probably be 'music 28', but it
				// lacks the continuous flag. Because of this, it nabs the
				// first byte of 'wait' as the continuous flag, runs the '4'
				// as an opcode (a 'nop') and resynchronizes at the 'say'.
				raw((byte)0x54); raw(0x001C);
				wait 4;
				say "@Wow...@";
				wait 6;
				call Func00E6;
			};
			abort;
		}
		if (FRIGIDAZZI->get_npc_id() == 0x000D) {
			FRIGIDAZZI->set_npc_id(0x000E);
			FRIGIDAZZI->clear_item_say();
			UI_init_conversation();
			FRIGIDAZZI->show_npc_face0(0x0002);
			say("\"We need not these blankets...\"");
			UI_end_conversation();
			var000F = find_nearby(0x02B8, 0x000A, MASK_NONE);
			for (var0012 in var000F with var0010 to var0011) {
				var0009 = var0012->get_object_position();
				if (var0009[0x0003] == 0x0001) {
					var0012->remove_item();
					UI_sprite_effect(ANIMATION_PURPLE_BUBBLES, var0009[0x0001], var0009[0x0002], 0x0000, 0x0000, 0x0000, LOOP_ONCE);
					UI_play_sound_effect(0x0014);
				}
			}
			var000E = script FRIGIDAZZI {
				nohalt;
				actor frame bowing;
				wait 2;
				actor frame sleeping;
				say "@Oh!@";
			};
			var000E = script AVATAR {
				nohalt;
				face west;
				wait 2;
				actor frame bowing;
				wait 2;
				actor frame sleeping;
				wait 2;
				say "@Ah!@";
				wait 2;
				call Func00E6;
			};
			abort;
		}
		if (FRIGIDAZZI->get_npc_id() == 0x000C) {
			FRIGIDAZZI->set_npc_id(0x000D);
			var0009 = AVATAR->get_object_position();
			UI_sprite_effect(ANIMATION_PURPLE_BUBBLES, var0009[0x0001], var0009[0x0002], 0x0000, 0x0000, 0x0000, LOOP_ONCE);
			Func09B2();
			UI_play_sound_effect(0x0039);
			var000E = script AVATAR after 2 ticks {
				nohalt;
				say "@I'm cold...@";
				face west;
			};
			// Note: the function is passed in two words, possibly as a mistake
			// caused by the need to do so in scripts.
			FRIGIDAZZI->si_path_run_usecode([0x0975, 0x0747, 0x0000], SI_PATH_SUCCESS, item, [Func00E6, 0x0000], false);
			abort;
		}
		if (FRIGIDAZZI->get_npc_id() == 0x000B) {
			FRIGIDAZZI->set_npc_id(0x000C);
			AVATAR->clear_item_say();
			FRIGIDAZZI->clear_item_say();
			UI_init_conversation();
			FRIGIDAZZI->show_npc_face0(0x0002);
			say("\"No mortal can resist the Dance of Passion! Tell me that thy blood hath been stirred to a frenzy!\"");
			if (Func0955()) {
				UI_end_conversation();
				Func097F(FRIGIDAZZI, "@Likewise...@", 0x0004);
				Func097F(AVATAR, "@I cannot wait!@", 0x0000);
				// Note: the function is passed in two words, possibly as a mistake
				// caused by the need to do so in scripts.
				AVATAR->si_path_run_usecode([0x0975, 0x0749, 0x0000], SI_PATH_SUCCESS, AVATAR->get_npc_object(), [Func00E6, 0x0000], false);
				var000E = script FRIGIDAZZI after 4 ticks {
					nohalt;
					face south;
					wait 3;
					face west;
				};
				abort;
			}
			say("\"No, thou dost not understand. As I said, no mortal can resist the Dance of Passion...\"");
			UI_end_conversation();
			var000E = script FRIGIDAZZI {
				nohalt;
				face south;
				say "@Uh-oh...@";
			};
			Func08EC();
			abort;
		}
		if (FRIGIDAZZI->get_npc_id() == 0x000A) {
			FRIGIDAZZI->Func07D1();
			var0009 = FRIGIDAZZI->get_object_position();
			UI_sprite_effect(ANIMATION_FIREWORKS, var0009[0x0001], var0009[0x0002], 0x0000, 0x0000, 0x0000, LOOP_ONCE);
			FRIGIDAZZI->set_npc_id(0x000B);
			var000E = script FRIGIDAZZI {
				nohalt;
				repeat 2 {
					actor frame reach_2h;
					actor frame reach_1h;
					actor frame strike_2h;
					actor frame reach_1h;
					actor frame reach_2h;
				};
				repeat 2 {
					actor frame cast_up;
					wait 2;
					actor frame cast_out;
					wait 2;
				};
				call Func07D2;
				wait 2;
				call Func00E6;
			};
			abort;
		}
		if (FRIGIDAZZI->get_npc_id() == 0x0009) {
			FRIGIDAZZI->set_npc_id(0x000A);
			var0009 = FRIGIDAZZI->get_object_position();
			UI_sprite_effect(ANIMATION_PURPLE_BUBBLES, var0009[0x0001], var0009[0x0002], 0x0000, 0x0000, 0x0000, LOOP_ONCE);
			FRIGIDAZZI->Func07D1();
			var000E = script FRIGIDAZZI {
				nohalt;
				actor frame bowing;
				actor frame kneeling;
				actor frame sleeping;
				wait 4;
				actor frame kneeling;
				actor frame bowing;
				actor frame standing;
				wait 2;
				call Func00E6;
			};
			abort;
		}
		if (FRIGIDAZZI->get_npc_id() == 0x0008) {
			FRIGIDAZZI->set_npc_id(0x0009);
			var0009 = FRIGIDAZZI->get_object_position();
			UI_sprite_effect(ANIMATION_GREEN_BUBBLES, var0009[0x0001], var0009[0x0002], 0x0000, 0x0000, 0x0000, LOOP_ONCE);
			FRIGIDAZZI->Func07D1();
			var000E = ["@Vox Erotis!@", "@Vex Nox Flam!@", "@Ort Vos!@", "@Ort Erotis!@"];
			Func094F(FRIGIDAZZI, var000E);
			var000E = script FRIGIDAZZI {
				nohalt;
				actor frame cast_up;
				actor frame cast_out;
				face west;
				actor frame cast_up;
				actor frame cast_out;
				wait 4;
				face north;
				actor frame step_left;
				actor frame raise_1h;
				actor frame strike_1h;
				wait 5;
				face east;
				actor frame cast_up;
				actor frame cast_out;
				wait 4;
				call Func00E6;
			};
			abort;
		}
		if (FRIGIDAZZI->get_npc_id() == 0x0007) {
			FRIGIDAZZI->set_npc_id(0x0008);
			FRIGIDAZZI->Func07D1();
			UI_init_conversation();
			FRIGIDAZZI->show_npc_face0(0x0002);
			say("\"Beware, ",
				var0003,
				"! I shall now begin the Dance of Passion, which no mortal can resist!\"");
			UI_end_conversation();
			var0013 = Func09A0(0x0000, 0x0001);
			if (var0013) {
				UI_play_music(0x0010, var0013);
			}
			var0009 = FRIGIDAZZI->get_object_position();
			UI_sprite_effect(ANIMATION_FIREWORKS, var0009[0x0001], var0009[0x0002], 0x0000, 0x0000, 0x0000, LOOP_ONCE);
			Func097F(FRIGIDAZZI, "@Vas Flam!@", 0x0008);
			var000E = script FRIGIDAZZI {
				nohalt;
				repeat 3 {
					actor frame cast_up;
					actor frame raise_1h;
					wait 1;
					actor frame strike_1h;
					wait 1;
					// Bug: the next line is interpreted as a 'step FACE_SOUTH, 0x53',
					// (step south and up by 0x53 tiles), which fails.
					// This likely should have been just 'step south'.
					raw((byte)0x53); step south; raw((byte)0x53);
					step south;
					wait 2;
				};
				call Func00E6;
			};
			var000E = ["@Gosh!@", "@Oh, my!@", "@Do not hurt thyself!@", "@Wow!@", "@Hmmm...@", "@Dost thou need help?@", "@Oh!@"];
			Func094F(AVATAR, var000E);
			abort;
		}
		if (FRIGIDAZZI->get_npc_id() == 0x0006) {
			FRIGIDAZZI->set_npc_id(0x0007);
			FRIGIDAZZI->set_polymorph(0x00E6);
			var000E = script FRIGIDAZZI {
				nohalt;
				actor frame cast_up;
				wait 2;
				call Func00E6;
			};
			abort;
		}
		if (FRIGIDAZZI->get_npc_id() == 0x0005) {
			FRIGIDAZZI->set_npc_id(0x0006);
			UI_init_conversation();
			FRIGIDAZZI->show_npc_face0(0x0000);
			say("\"Now that I have tasted thy lips, I think that mine infatuation with thee doth grow!\"");
			say("\"Strange -- 'twas so cold in here when thou didst enter, but now I feel suddenly warm...\"");
			say("\"I have not felt so alive in many months! Perhaps... I am not sure how to say this, but...\"");
			say("\"Dost thou desire my body, Avatar?\"");
			var000E = ["yes", "no", "What about Filbercio?"];
			if (UI_is_pc_female()) {
				var000E &= "I'm not that kind of girl!";
			}
			var000F = Func0956(var000E);
			if (var000F == "What about Filbercio?") {
				say("\"The MageLord? Oh, how canst thou think of him when the two of us are here together, becoming intimate...\"");
				say("\"Perhaps this shall arouse thine interest!\"");
				UI_end_conversation();
				// Note: the function is passed in two words, possibly as a mistake
				// caused by the need to do so in scripts.
				FRIGIDAZZI->si_path_run_usecode([0x097B, 0x0743, 0x0000], SI_PATH_SUCCESS, item, [Func00E6, 0x0000], false);
				var000E = script FRIGIDAZZI {
					wait 2;
					actor frame cast_up;
					say "@Est Nudi!@";
				};
				abort;
			}
			if (var000F == "yes") {
				say("\"Then watch this, my love...\"");
				UI_end_conversation();
				// Note: the function is passed in two words, possibly as a mistake
				// caused by the need to do so in scripts.
				FRIGIDAZZI->si_path_run_usecode([0x097B, 0x0743, 0x0000], SI_PATH_SUCCESS, item, [Func00E6, 0x0000], false);
				var000E = script FRIGIDAZZI {
					wait 2;
					actor frame cast_up;
					say "@Est Nudi!@";
				};
				abort;
			}
			if (var000F == "no") {
				say("\"Oh... this is so embarrassing!\"");
				UI_end_conversation();
				var000E = script FRIGIDAZZI {
					nohalt;
					actor frame raise_2h;
					wait 2;
					face north;
					say "@I could just die...@";
					wait 6;
					call Func00E6;
					wait 4;
					face east;
					face south;
				};
				FRIGIDAZZI->set_npc_id(0x0011);
				abort;
			}
			say("\"Do I detect a note of disapproval? Well, I don't have to take that from anyone!\"");
			UI_end_conversation();
			FRIGIDAZZI->Func07D1();
			Func097F(FRIGIDAZZI, "@Pig!@", 0x0002);
			Func097F(AVATAR, "@Ouch!@", 0x0008);
			var000E = script FRIGIDAZZI {
				nohalt;
				call Func07D2;
				// Bug: the next line is interpreted as a 'step FACE_SOUTH, 0x27',
				// followed by a 0x0002, which makes a step south and
				// up by 0x27 tiles (which fails), followed by a 'nop2'.
				// This likely should have been just 'step south' followed
				// by the 'wait 2'.
				raw((byte)0x53); step south; wait 2;
				actor frame reach_1h;
				wait 2;
				actor frame strike_1h;
				sfx 127;
				wait 4;
				actor frame standing;
				wait 8;
				call Func00E6;
			};
			FRIGIDAZZI->set_npc_id(0x0011);
			abort;
		}
		if (FRIGIDAZZI->get_npc_id() == 0x0004) {
			FRIGIDAZZI->set_npc_id(0x0005);
			UI_init_conversation();
			FRIGIDAZZI->show_npc_face0(0x0000);
			if (UI_is_pc_female()) {
				say("\"To be blunt, there is something uncommonly... erotic about thee. I am most attracted to thee, woman.\"");
			} else {
				say("\"To know that thou art a Mage, yet to see that thou art so manly -- this is most uncommon in Moonshade!\"");
			}
			say("\"Thou hast come to learn spells, but I can teach thee some true magic...\"");
			if (!UI_is_pc_female()) {
				say("\"I could die to be taken into thy brawny arms!\"");
			}
			say("\"Wouldst thou kiss me, ",
				var0003,
				"?\"");
			var000E = ["yes", "no"];
			if (UI_is_pc_female()) {
				var000E &= "Of course not!";
			}
			var000F = Func0956(var000E);
			if (var000F == "yes") {
				UI_end_conversation();
				FRIGIDAZZI->Func07D1();
				var000E = script FRIGIDAZZI {
					nohalt;
					call Func07D2;
					// Bug: the next line is interpreted as a 'step FACE_SOUTH, 0x53',
					// (step south and up by 0x53 tiles), which fails.
					// This likely should have been just 'step south'.
					raw((byte)0x53); step south; raw((byte)0x53);
					step south;
					wait 2;
					actor frame raise_2h;
					sfx 36;
					actor frame standing;
					wait 1;
					actor frame step_right;
					wait 4;
					call Func00E6;
				};
			} else if (var000F == "no") {
				UI_end_conversation();
				FRIGIDAZZI->Func07D1();
				Func097F(FRIGIDAZZI, "@Oh!@", 0x0002);
				Func097F(AVATAR, "@Ouch!@", 0x0008);
				var000E = script FRIGIDAZZI {
					nohalt;
					call Func07D2;
					// Bug: the next line is interpreted as a 'step FACE_SOUTH, 0x27',
					// followed by a 0x0002, which makes a step south and
					// up by 0x27 tiles (which fails), followed by a 'nop2'.
					// This likely should have been just 'step south' followed
					// by the 'wait 2'.
					raw((byte)0x53); step south; wait 2;
					actor frame reach_1h;
					wait 2;
					actor frame strike_1h;
					sfx 127;
					wait 4;
					actor frame standing;
					wait 8;
					call Func00E6;
				};
				FRIGIDAZZI->set_npc_id(0x0011);
			} else {
				say("\"Thou dost disappoint me. I had hoped that thou wouldst be more receptive...\"");
				UI_end_conversation();
				FRIGIDAZZI->set_npc_id(0x0011);
				var000E = script FRIGIDAZZI {
					nohalt;
					say "@Oh, well...@";
					face east;
					wait 8;
					call Func00E6;
				};
				Func097F(AVATAR, "@Sorry...@", 0x0005);
			}
			abort;
		}
		if (FRIGIDAZZI->get_npc_id() == 0x0003) {
			FRIGIDAZZI->set_npc_id(0x0004);
			var000E = UI_create_new_object(0x011D);
			if (var000E) {
				var000E->set_item_frame(0x0005);
				var000E->clear_item_flag(TEMPORARY);
				var000E = UI_update_last_created([0x097F, 0x0744, 0x0002]);
			}
			UI_init_conversation();
			FRIGIDAZZI->show_npc_face0(0x0000);
			say("\"I feel so comfortable around thee. It is as though we have known each other before -- perhaps in some other existence?\"");
			say("\"Do not be formal with me, ",
				var0003,
				". Please, come join me here by the pool.\"");
			var000F = Func0956(["yes", "no", "About those spells..."]);
			if (var000F == "About those spells...") {
				say("\"Why art thou in such a rush? In Moonshade, we know to mix pleasure with business.\"");
				say("\"I am sure that there is time for us to know each other better, before this matter of the spells must be conducted.\"");
				say("\"Thou shouldst learn to relax.\"");
				UI_end_conversation();
				var0009 = AVATAR->get_object_position();
				UI_sprite_effect(ANIMATION_POOF, var0009[0x0001], var0009[0x0002], 0x0000, 0x0000, 0x0000, LOOP_ONCE);
				var0009 = FRIGIDAZZI->get_object_position();
				UI_sprite_effect(ANIMATION_PURPLE_BUBBLES, (var0009[0x0001] + 0x0004), (var0009[0x0002] + 0x0004), 0x0000, 0x0000, 0x0000, LOOP_ONCE);
				Func097F(AVATAR, "@Yow!@", 0x0000);
				UI_play_sound_effect(0x0039);
				UI_play_sound_effect(0x0028);
				// Note: the function is passed in two words, possibly as a mistake
				// caused by the need to do so in scripts.
				AVATAR->si_path_run_usecode([0x0980, 0x0748, 0x0000], SI_PATH_SUCCESS, AVATAR->get_npc_object(), [Func00E6, 0x0000], false);
				var000E = script FRIGIDAZZI {
					nohalt;
					actor frame cast_up;
					say "@Vex Veni Nox!@";
					actor frame step_right;
					wait while far 2;
					wait 4;
					call Func07D2;
					wait 4;
					call Func00E6;
				};
				abort;
			}
			if (var000F == "yes") {
				UI_end_conversation();
				Func097F(FRIGIDAZZI, "@Do not be shy with me...@", 0x0000);
				// Note: the function is passed in two words, possibly as a mistake
				// caused by the need to do so in scripts.
				AVATAR->si_path_run_usecode([0x0980, 0x0748, 0x0000], SI_PATH_SUCCESS, AVATAR->get_npc_object(), [Func00E6, 0x0000], false);
				var000E = script FRIGIDAZZI {
					nohalt;
					wait while far 2;
					wait 4;
					call Func07D2;
					wait 4;
					call Func00E6;
				};
			} else {
				say("\"Ah, but thou art so shy! Perhaps I can encourage thee to join me, by use of a little spell...\"");
				UI_end_conversation();
				var0009 = AVATAR->get_object_position();
				UI_sprite_effect(ANIMATION_POOF, var0009[0x0001], var0009[0x0002], 0x0000, 0x0000, 0x0000, LOOP_ONCE);
				var0009 = FRIGIDAZZI->get_object_position();
				UI_sprite_effect(ANIMATION_PURPLE_BUBBLES, (var0009[0x0001] + 0x0004), (var0009[0x0002] + 0x0004), 0x0000, 0x0000, 0x0000, LOOP_ONCE);
				UI_play_sound_effect(0x0039);
				UI_play_sound_effect(0x0028);
				Func097F(AVATAR, "@Hey!@", 0x0000);
				// Note: the function is passed in two words, possibly as a mistake
				// caused by the need to do so in scripts.
				AVATAR->si_path_run_usecode([0x0980, 0x0748, 0x0000], SI_PATH_SUCCESS, AVATAR->get_npc_object(), [Func00E6, 0x0000], false);
				var000E = script FRIGIDAZZI {
					nohalt;
					actor frame cast_up;
					say "@Vex Veni Nox!@";
					actor frame step_right;
					wait while far 2;
					wait 4;
					call Func07D2;
					wait 4;
					call Func00E6;
				};
				abort;
			}
			abort;
		}
		if (FRIGIDAZZI->get_npc_id() == 0x0002) {
			FRIGIDAZZI->set_npc_id(0x0003);
			UI_init_conversation();
			FRIGIDAZZI->show_npc_face0(0x0000);
			say("\"I am so glad that thou hast met me here, sweet Avatar. I find strangers...\"");
			UI_end_conversation();
			var000E = find_nearby(0x011D, 0x0005, MASK_NONE);
			for (var000F in var000E with var0014 to var0015) {
				if (var000F->get_item_frame() == 0x0005) {
					var000E->remove_item();
				}
			}
			Func097F(FRIGIDAZZI, "@...appealing...@", 0x0000);
			var000E = script FRIGIDAZZI after 5 ticks {
				nohalt;
				repeat 3 {
					actor frame raise_2h;
					sfx 11;
					actor frame step_right;
					wait 2;
				};
				wait 2;
				call Func07D2;
				wait 2;
				call Func00E6;
			};
			abort;
		}
		if (FRIGIDAZZI->get_npc_id() == 0x0001) {
			var000E = ["@I love the night...@", "@so quiet...@", "@so dark...@"];
			Func094F(FRIGIDAZZI, var000E);
			// Note: the function is passed in two words, possibly as a mistake
			// caused by the need to do so in scripts.
			FRIGIDAZZI->si_path_run_usecode([0x0980, 0x0746, 0x0000], SI_PATH_SUCCESS, item, [Func00E6, 0x0000], false);
			abort;
		}
		FRIGIDAZZI->show_npc_face0(0x0000);
		Func09AC(FRIGIDAZZI, -1, 0, STANDTHERE);
		GOBLIN_MESSENGER->set_new_schedules(MIDNIGHT, STANDTHERE, [0x0986, 0x0766]);
		GOBLIN_MESSENGER->run_schedule();
		GOBLIN_MESSENGER->clear_item_flag(ASLEEP);
		Func097F(GOBLIN_MESSENGER, "@Tar gorlfog!@", 0x0003);
		if ((var000C < 0x000F) && ((!IOLO->npc_nearby()) && ((!DUPRE->npc_nearby()) && ((!SHAMINO->npc_nearby()) && (!BOYDON->npc_nearby()))))) {
			say("\"I am so glad that thou hast agreed to meet me here.\"");
			UI_play_music(0x001F, Func09A0(0x0005, 0x0001));
			FRIGIDAZZI->set_npc_id(0x0001);
			UI_end_conversation();
			AVATAR->set_item_flag(DONT_MOVE);
			var000E = script FRIGIDAZZI {
				nohalt;
				call Func00E6;
			};
			abort;
		}
		if (UI_get_array_size(UI_get_party_list()) > 0x0001) {
			say("\"Thou didst come! I cannot express how pleased I am to see thee again, ",
				var0003,
				".\"");
			say("\"But this matter of the spells, it must be discussed in private. Only Mages may hear the secrets which I am about to reveal.\"");
			say("\"Wouldst thou please ask thy minions to depart?\"");
			if (Func0955()) {
				AVATAR->set_item_flag(DONT_MOVE);
				UI_play_music(0x001F, Func09A0(0x0005, 0x0001));
				var0016 = Func0992(0x0001, "@Um, I think I will wait outside...@", 0x0000, false);
				UI_end_conversation();
				var000E = Func098D();
				var0017 = [];
				for (var000F in var000E with var0018 to var0019) {
					if (var000F->npc_nearby()) {
						var0017 &= var000F;
					}
				}
				var0017 &= UI_get_party_list2();
				var0017 = Func0988(AVATAR->get_npc_object(), var0017);
				var0017 = Func0988(PETRA, var0017);
				var0017 = Func0988(MORTEGRO, var0017);
				var0017 = Func0988(STEFANO, var0017);
				for (var000F in var0017 with var001A to var001B) {
					if (var000F->get_item_flag(IN_PARTY)) {
						var000F->remove_from_party();
					}
					var000F->set_new_schedules(MIDNIGHT, STANDTHERE, var0009);
					var000F->run_schedule();
				}
				Func097F(var000F, "@Have fun...@", 0x0000);
				var000E = script FRIGIDAZZI after 10 ticks {
					nohalt;
					call Func00E6;
				};
				var000E = Func09A0(0x0005, 0x0003)->set_item_quality(FRIGIDAZZI->get_npc_id());
				FRIGIDAZZI->set_npc_id(0x0001);
				abort;
			}
			say("\"Then I can be of no use to thee.\"");
			Func097F(FRIGIDAZZI, "@Go!@", 0x0000);
			abort;
		}
		say("\"But we must wait, darling, until we are alone...\"");
		UI_end_conversation();
		AVATAR->set_item_flag(DONT_MOVE);
		Func097F(FRIGIDAZZI, "@Wait...@", 0x0000);
		var000E = Func098D();
		var0017 = [];
		for (var000F in var000E with var001C to var001D) {
			if (var000F->npc_nearby()) {
				var0017 &= var000F;
			}
		}
		var0017 &= UI_get_party_list2();
		var0017 = Func0988(AVATAR->get_npc_object(), var0017);
		var0017 = Func0988(PETRA, var0017);
		var0017 = Func0988(MORTEGRO, var0017);
		var0017 = Func0988(STEFANO, var0017);
		for (var000F in var0017 with var001E to var001F) {
			if (var000F->get_item_flag(IN_PARTY)) {
				var000F->remove_from_party();
			}
			var000F->set_new_schedules(MIDNIGHT, STANDTHERE, var0009);
			var000F->run_schedule();
		}
		Func097F(var000F, "@Have fun...@", 0x0000);
		var000E = script FRIGIDAZZI after 10 ticks {
			nohalt;
			call Func00E6;
		};
		var000E = Func09A0(0x0005, 0x0003)->set_item_quality(FRIGIDAZZI->get_npc_id());
		FRIGIDAZZI->set_npc_id(0x0001);
		abort;
	}
	if (event == SI_PATH_FAILURE) {
		if ((FRIGIDAZZI->get_npc_id() == 0x000D) && (item == FRIGIDAZZI->get_npc_object())) {
			var0009 = FRIGIDAZZI->get_object_position();
			UI_sprite_effect(ANIMATION_TELEPORT, var0009[0x0001], var0009[0x0002], 0x0000, 0x0000, 0x0000, LOOP_ONCE);
			FRIGIDAZZI->move_object([0x0975, 0x0747, 0x0000]);
			event = SI_PATH_SUCCESS;
		}
		if ((FRIGIDAZZI->get_npc_id() == 0x000C) && (item == AVATAR->get_npc_object())) {
			var0009 = AVATAR->get_object_position();
			UI_sprite_effect(ANIMATION_TELEPORT, var0009[0x0001], var0009[0x0002], 0x0000, 0x0000, 0x0000, LOOP_ONCE);
			AVATAR->move_object([0x0975, 0x0749, 0x0000]);
			event = SI_PATH_SUCCESS;
		}
		if ((FRIGIDAZZI->get_npc_id() == 0x0006) && (item == FRIGIDAZZI->get_npc_object())) {
			var0009 = FRIGIDAZZI->get_object_position();
			UI_sprite_effect(ANIMATION_TELEPORT, var0009[0x0001], var0009[0x0002], 0x0000, 0x0000, 0x0000, LOOP_ONCE);
			FRIGIDAZZI->move_object([0x097B, 0x0743, 0x0000]);
			event = SI_PATH_SUCCESS;
		}
		if ((FRIGIDAZZI->get_npc_id() == 0x0004) && (item == AVATAR->get_npc_object())) {
			var0009 = AVATAR->get_object_position();
			UI_sprite_effect(ANIMATION_TELEPORT, var0009[0x0001], var0009[0x0002], 0x0000, 0x0000, 0x0000, LOOP_ONCE);
			AVATAR->move_object([0x0980, 0x0748, 0x0000]);
			event = SI_PATH_SUCCESS;
		}
		if ((FRIGIDAZZI->get_npc_id() == 0x0001) && (item == FRIGIDAZZI->get_npc_object())) {
			var0009 = FRIGIDAZZI->get_object_position();
			UI_sprite_effect(ANIMATION_TELEPORT, var0009[0x0001], var0009[0x0002], 0x0000, 0x0000, 0x0000, LOOP_ONCE);
			FRIGIDAZZI->move_object([0x0980, 0x0746, 0x0000]);
			event = SI_PATH_SUCCESS;
		}
	}
	if (event == SI_PATH_SUCCESS) {
		if ((FRIGIDAZZI->get_npc_id() == 0x000D) && (item == FRIGIDAZZI->get_npc_object())) {
			var000E = script FRIGIDAZZI {
				nohalt;
				wait 6;
				say "@Kiss me again!@";
				face west;
				wait 10;
				// Bug: the next line is interpreted as a 'step FACE_SOUTH, 0x53',
				// (step south and up by 0x53 tiles), which fails.
				// This likely should have been just 'step south'.
				raw((byte)0x53); step south; raw((byte)0x53);
				step south;
				wait 2;
				actor frame raise_2h;
				sfx 36;
				actor frame standing;
				wait 1;
				actor frame step_right;
				wait 4;
				face west;
				actor frame cast_up;
				wait 2;
				call Func00E6;
			};
			var000E = script AVATAR {
				nohalt;
				wait 14;
				say "@Certainly!@";
				face north;
			};
			abort;
		}
		if ((FRIGIDAZZI->get_npc_id() == 0x000C) && (item == AVATAR->get_npc_object())) {
			UI_init_conversation();
			FRIGIDAZZI->show_npc_face0(0x0002);
			FRIGIDAZZI->Func07D1();
			say("\"But wait! Thou hast forgotten this...\"");
			UI_end_conversation();
			var000E = FRIGIDAZZI->set_to_attack(AVATAR, 0x0118);
			var000E = script FRIGIDAZZI after 4 ticks {
				nohalt;
				actor frame cast_out;
				actor frame strike_2h;
				attack;
				actor frame standing;
				wait 4;
				call Func00E6;
			};
			var000E = script AVATAR {
				nohalt;
				actor frame standing;
				face east;
				say "@Huh?@";
			};
			abort;
		}
		if ((FRIGIDAZZI->get_npc_id() == 0x0006) && (item == FRIGIDAZZI->get_npc_object())) {
			FRIGIDAZZI->Func07D1();
			var0020 = FRIGIDAZZI->get_object_position();
			FRIGIDAZZI->set_polymorph(0x00EF);
			UI_sprite_effect(ANIMATION_EST_NUDI, var0020[0x0001], var0020[0x0002], 0x0000, 0x0000, 0x0000, LOOP_ONCE);
			UI_play_sound_effect(0x0053);
			var000E = script FRIGIDAZZI after 18 ticks {
				nohalt;
				call Func07D2;
				actor frame cast_up;
				wait 2;
				call Func00E6;
			};
			abort;
		}
		if ((FRIGIDAZZI->get_npc_id() == 0x0004) && (item == AVATAR->get_npc_object())) {
			FRIGIDAZZI->Func07D1();
			abort;
		}
		if ((FRIGIDAZZI->get_npc_id() == 0x0001) && (item == FRIGIDAZZI->get_npc_object())) {
			var000E = script FRIGIDAZZI {
				nohalt;
				face east;
				actor frame strike_1h;
				wait 12;
				face east;
				actor frame bowing;
				actor frame kneeling;
				wait 12;
				actor frame kneeling;
				actor frame bowing;
				actor frame standing;
				wait 8;
				face north;
				wait 4;
				actor frame ready;
				wait 2;
				call Func00E6;
			};
			FRIGIDAZZI->set_npc_id(0x0002);
			FRIGIDAZZI->Func07D1();
			var000E = UI_create_new_object2(0x01FD, [0x0982, 0x0746, 0x0000]);
			UI_sprite_effect(ANIMATION_PURPLE_BUBBLES, 0x0982, 0x0746, 0x0000, 0x0000, 0x0000, LOOP_ONCE);
			UI_play_sound_effect(0x0039);
			if (var000E) {
				var000E->set_item_frame(0x0000);
				var000E->set_schedule_type(GRAZE);
				var000E->clear_item_flag(TEMPORARY);
			}
			FRIGIDAZZI->set_schedule_type(WAIT);
			abort;
		}
	}
}

extern void Func09AD 0x9AD (var var0000);

void Func00F3 shape#(0xF3) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;

	if (event == DOUBLECLICK) {
		var0000 = get_item_quality();
		var0001 = get_item_frame();
		if (var0001 == 0x0000) {
			UI_play_sound_effect(0x006A);
			set_item_frame(0x0001);
		}
		if (var0001 == 0x0001) {
			UI_play_sound_effect(0x0069);
			set_item_frame(0x0000);
		}
		if ((var0001 == 0x0004) && (var0000 == 0x0000)) {
			UI_play_sound_effect(0x006A);
			set_item_frame(0x0005);
		}
		if (var0001 == 0x0005) {
			UI_play_sound_effect(0x0069);
			set_item_frame(0x0004);
		}
		if ((var0001 == 0x0004) && (var0000 == 0x0001)) {
			UI_play_sound_effect(0x006A);
			set_item_frame(0x0006);
		}
		if (var0001 == 0x0006) {
			UI_play_sound_effect(0x0069);
			set_item_frame(0x0004);
		}
		if ((var0001 == 0x0004) && (var0000 == 0x0002)) {
			set_item_frame(0x0005);
			UI_play_sound_effect(0x006A);
			var0002 = set_item_quality(0x0000);
			var0003 = get_object_position();
			var0003[0x0001] += 0x0002;
			var0004 = UI_create_new_object2(0x01EE, var0003);
			Func09AD(var0004);
			var0004->obj_sprite_effect(ANIMATION_FIREWORKS, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, LOOP_ONCE);
			UI_play_sound_effect(0x007B);
		}
		if ((var0001 == 0x0004) && (var0000 == 0x0003)) {
			if (gflags[BANES_RELEASED]) {
				set_item_frame(0x0005);
				UI_play_sound_effect(0x006A);
				var0002 = set_item_quality(0x0000);
				var0003 = get_object_position();
				var0003[0x0001] += 0x0002;
				var0004 = UI_create_new_object2(0x01EE, var0003);
				Func09AD(var0004);
				var0004->obj_sprite_effect(ANIMATION_FIREWORKS, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, LOOP_ONCE);
				UI_play_sound_effect(0x007B);
			} else {
				UI_play_sound_effect(0x006A);
				set_item_frame(0x0006);
			}
		}
		if ((var0001 == 0x0004) && (var0000 == 0x0005)) {
			if (gflags[BANES_RELEASED]) {
				set_item_frame(0x0005);
				UI_play_sound_effect(0x006A);
				var0002 = set_item_quality(0x0000);
				var0003 = get_object_position();
				var0003[0x0001] += 0x0002;
				var0004 = UI_create_new_object2(0x0175, var0003);
				Func09AD(var0004);
				obj_sprite_effect(ANIMATION_TELEPORT, -2, -2, 0, 0, 0, LOOP_ONCE);
				UI_play_sound_effect(0x0052);
			} else {
				UI_play_sound_effect(0x006A);
				set_item_frame(0x0006);
			}
		}
	}
}

extern var Func0906 0x906 (var var0000);
extern var Func0908 0x908 (var var0000, var var0001, var var0002, var var0003, var var0004, var var0005);
extern void Func0902 0x902 (var var0000, var var0001);
extern void Func0909 0x909 (var var0000, var var0001, var var0002, var var0003, var var0004, var var0005, var var0006, var var0007, var var0008);
extern void Func0903 0x903 ();
extern void Func0904 0x904 (var var0000);
extern void Func0905 0x905 (var var0000);

void Func00F6 shape#(0xF6) () {
	var var0000;

	if ((event != DOUBLECLICK) && (event != SCRIPTED)) {
		return;
	}
	var0000 = Func0906(item);
	if (var0000 == 0x0001) {
		if (Func0908(item, 0x01D7, 0x0000,  0,  0, 0x0007)) {
			Func0902(item, 0x00F6);
			Func0909(item, 0x0204, 0x0001, 0x0002, 0x00E1, 0x0000,  0,  3, 0x0001);
			UI_play_sound_effect2(0x0069, item);
		} else {
			Func0903();
		}
	}
	if (var0000 == 0x0000) {
		if (Func0908(item, 0x01D7, 0x0001,  0,  0, 0x0007)) {
			Func0902(item, 0x00F6);
			Func0909(item, 0x0204, 0x0000, 0x0001, 0x00E1, 0x0001, -3,  0, 0x0007);
			UI_play_sound_effect2(0x006A, item);
		} else {
			Func0903();
		}
	}
	if (var0000 == 0x0002) {
		Func0904(item);
	}
	if (var0000 == 0x0003) {
		Func0905(item);
	}
}

extern var Func0953 0x953 ();
extern var Func08AC 0x8AC (var var0000);

void Func00F9 shape#(0xF9) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;

	var0000 = Func0953();
	var0001 = Func08AC(false);
	var0002 = "his";
	if (UI_is_pc_female()) {
		var0002 = "her";
	}
	var0003 = false;
	if (event == SCRIPTED) {
		SMUDGE->show_npc_face0(0x0000);
		say("\"What dost thou wish, Master?\"");
		if (gflags[FAWN_TRIAL_RECESS]) {
			add(["revelation", "change revelation"]);
		}
		if (gflags[FAWN_TRIAL_DONE] && ((!gflags[BANES_RELEASED]) && (!gflags[FAWN_TRIAL_RECESS]))) {
			if ((!gflags[ORACLE_SET_TO_INNOCENT]) && (!gflags[ORACLE_SET_TO_CORRUPT])) {
				say("\"Forgive me for denouncing thee, stranger. I was under compulsion from the Great Captains, and had no choice.\"");
				say("\"Now that Alyssand and Jorvin have unmasked the true villains, I can once again speak the Truth. Go in peace, stranger. I wish thee well in thy quest.\"");
				abort;
			}
			if (gflags[ORACLE_SET_TO_INNOCENT]) {
				say("\"Thy friend hath been spared, stranger. Go thy way... I must attend to the wishes of my masters.\"");
				abort;
			}
			if (gflags[ORACLE_SET_TO_CORRUPT]) {
				say("\"I thank thee for freeing me from the yoke of the Great Captains, stranger. Thy friend is safe and I may once again speak the Truth.\"");
				say("\"Go in peace, stranger. I wish thee well on thy quest.\"");
				abort;
			}
		}
		if (gflags[BANES_RELEASED]) {
			say("\"It saddens me to speak the Truth to thee, stranger.\"");
			say("\"Thy former companion, Iolo, hath fallen prey to the imbalance that plagues this land. He hath ripped Beauty from the soul of Fawn and driven it into the wilds.\"");
			say("\"Seek out the one whose Beauty lies deep within. He will set thee upon the path to the lost soul of Fawn.\"");
			abort;
		}
		converse ("bye") {
			case "revelation":
				if (!var0003) {
					say("\"There will be a Grand Trial soon. At the end of the proceedings, I shall proclaim the verdict.\"");
					var0003 = true;
				}
				say("\"I have been told to say the following...\"");
				if (gflags[ORACLE_SET_TO_INNOCENT]) {
					say("\"",
						var0001,
						" is innocent! ",
						var0000,
						" and ",
						var0002,
						" companions have no wish to destroy Beauty!\"");
					say("\"Free them at once!\"");
				}
				if (gflags[ORACLE_SET_TO_CORRUPT]) {
					say("\"",
						var0001,
						" is innocent! Set him and his companions free!\"");
					say("\"The true criminals are Priestess Kylista and Great Captain Voldin, who have conspired to convict this innocent man!\"");
				}
				if (!(gflags[ORACLE_SET_TO_INNOCENT] || gflags[ORACLE_SET_TO_CORRUPT])) {
					say("\"",
						var0001,
						" is guilty of associating with Daemons to destroy our Beauty! The fiend, ",
						var0000,
						", is also guilty!\"");
					say("\"Such offense to Beauty cannot go unpunished... The stain of their presence must be washed away with their blood.\"");
				}
				fallthrough;

			case "change revelation":
				say("\"I shall proclaim whatever thou dost instruct me to proclaim. What dost thou wish me to say regarding the accused traitor, Master?\"");
				UI_push_answers();
				add(["He is innocent.", "The trial is corrupted.", "Make no change."]);
				fallthrough;

			case "Make no change.":
				say("\"I shall do as thou hast instructed.\"");
				gflags[ORACLE_SET_TO_INNOCENT] = false;
				gflags[ORACLE_SET_TO_CORRUPT] = false;
				UI_pop_answers();
				fallthrough;

			case "He is innocent.":
				say("\"I will say that ",
					var0001,
					" is innocent.\"");
				gflags[ORACLE_SET_TO_INNOCENT] = true;
				gflags[ORACLE_SET_TO_CORRUPT] = false;
				UI_pop_answers();
				fallthrough;

			case "The trial is corrupted.":
				say("\"I will say that the trial is corrupted, and I shall denounce the true traitors.\"");
				say("\"I have waited many years for this moment. I thank thee, Master!\"");
				gflags[ORACLE_SET_TO_CORRUPT] = true;
				gflags[ORACLE_SET_TO_INNOCENT] = false;
				UI_pop_answers();
				add("many years");
				fallthrough;

			case "many years" (remove):
				say("\"I have been the prisoner of the Great Captains for many generations, stranger.\"");
				say("\"I do not know who thou art, but I am glad thou hast come! At last, I can speak the Truth.\"");
				fallthrough;

			case "nothing":
				say("\"As thou wishest. I shall proclaim the verdict which I was previously instructed to give.\"");
				UI_pop_answers();
				fallthrough;

			case "bye":
				var0004 = script item {
					nohalt;
					say "@'Tis my duty.@";
				};
				abort;
		}
	}
}

extern var Func09A0 0x9A0 (var var0000, var var0001);
extern var Func0994 0x994 ();
extern void Func097F 0x97F (var var0000, var var0001, var var0002);
extern var Func084D 0x84D (var var0000, var var0001);
extern var Func084E 0x84E (var var0000, var var0001);

void Func00FA shape#(0xFA) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;
	var var0008;
	var var0009;
	var var000A;
	var var000B;
	var var000C;
	var var000D;
	var var000E;

	var0000 = Func09A0(0x0005, 0x0001);
	var0001 = Func09A0(0x0005, 0x0002);
	if ((item == var0000) || (item == var0001)) {
		var0002 = [KARNAX, THOXA, MIGGIM, BRACCUS, DRAXTA];
		if (gflags[XENKA_HAS_RETURNED]) {
			var0002 &= XENKA;
		}
		var0003 = var0002 & [SILENT1, SILENT2, SILENT3];
		var0004 = var0000->get_item_quality();
		if (item == var0000) {
			if (Func0994() != 0x0002) {
				abort;
			}
			while (var0004 == get_item_quality()) {
				var0004 = UI_get_random(0x0009);
			}
			if (gflags[ANARCHY_BANE_DEAD] && (gflags[INSANITY_BANE_DEAD] && (gflags[WANTONNESS_BANE_DEAD] && ((!SHAMINO->get_item_flag(SI_ZOMBIE)) && ((!IOLO->get_item_flag(SI_ZOMBIE)) && ((!DUPRE->get_item_flag(SI_ZOMBIE)) && (!XENKA->get_item_flag(MET)))))))) {
				var0004 = 0x000A;
			}
			var0005 = set_item_quality(var0004);
			gflags[XENKA_RETURN_TRIGGER] = false;
			var0005 = script Func09A0(0x0005, 0x0003) {
				nohalt;
				repeat var0004 {
					sfx 6;
					wait 7;
				};
			};
			if (var0004 == 0x000A) {
				var0006 = ["@The time hath come!@", "@The sacred bells!@", "@Xenka comes!@", "@What joy!@", "@To the chapel!@", "@The prophetess comes!@"];
			} else if (gflags[XENKA_HAS_RETURNED]) {
				var0006 = ["@The bells!@", "@The end is near!@", "@It is time!@", "@Hasten!@", "@Quickly!@", "@Hear the bells!@"];
			} else {
				var0006 = ["@The bells!@", "@Xenka calls!@", "@It is time!@", "@Hasten!@", "@Quickly!@", "@Hear the bells!@"];
			}
			for (var0009 in var0002 with var0007 to var0008) {
				Func097F(var0009, var0006[UI_get_random(UI_get_array_size(var0006))], UI_get_random(0x0014));
			}
			for (var0009 in var0003 with var000A to var000B) {
				var000C = var0009->get_schedule_type();
				if ((var000C != WAIT) && (var000C != TALK)) {
					var0009->set_schedule_type(WANDER);
				}
			}
			gflags[DOING_XENKA_RETURN] = false;
			var0005 = script var0001 after 20 ticks {
				nohalt;
				call Func00FA;
			};
			abort;
		}
		if (item == var0001) {
			for (var0009 in var0003 with var000D to var000E) {
				var000C = var0009->get_schedule_type();
				if (((var000C != WAIT) && ((var000C != TALK) && (var000C != Func084D(var0009, var0004)))) || (var000C == WANDER)) {
					var0009->set_new_schedules(MIDNIGHT, Func084D(var0009, var0004), Func084E(var0009, var0004));
					var0009->run_schedule();
				} else if ((var000C == TALK) || (var000C == WAIT)) {
					gflags[DOING_XENKA_RETURN] = true;
				}
			}
			if (gflags[DOING_XENKA_RETURN]) {
				var0005 = script var0001 after 20 ticks {
					nohalt;
					call Func00FA;
				};
			}
			if (!gflags[XENKA_RETURN_TRIGGER]) {
				gflags[XENKA_RETURN_TRIGGER] = true;
				if (var0004 != 0x000A) {
					var0005 = script var0000 after 1000 ticks {
						nohalt;
						call Func00FA;
					};
				}
			}
		}
	}
}

extern void Func094A 0x94A (var var0000);
extern var Func0890 0x890 ();
extern void Func0918 0x918 (var var0000);
extern var Func08E7 0x8E7 (var var0000);
extern void Func0917 0x917 (var var0000, var var0001);

void Func00FB shape#(0xFB) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;

	if (event != DOUBLECLICK) {
		return;
	}
	if (UI_in_gump_mode()) {
		UI_close_gumps();
	}
	if (get_barge()) {
		var0000 = find_nearby(0x00C7, 0x0005, MASK_NONE);
		var0001 = find_nearby(0x00FB, 0x0005, MASK_NONE);
		if (!(item in var0001)) {
			var0001 &= item;
		}
		if (!AVATAR->get_item_flag(ON_MOVING_BARGE)) {
			var0002 = get_item_quality();
			var0003 = PARTY->count_objects(0x031D, var0002, FRAME_ANY);
			if (((!var0003) && (!gflags[CAN_SAIL_SHIPS])) && (!((var0002 == 0x0001) && gflags[CAN_USE_FILBERCIOS_BARGE]))) {
				if (UI_get_array_size(UI_get_party_list()) == 0x0001) {
					Func094A("@This vessel doth have an owner.@");
				} else {
					Func094A("@We do not own this vessel.@");
				}
				return;
			}
			if (Func0890()) {
				Func0918(item);
			} else {
				var0004 = Func08E7(var0000[0x0001]);
				set_item_flag(ACTIVE_SAILOR);
			}
		} else {
			clear_item_flag(ACTIVE_SAILOR);
			Func0917(var0001, 0x0000);
			clear_item_flag(ON_MOVING_BARGE);
			clear_item_flag(ACTIVE_BARGE);
		}
	}
}

extern void Func0949 0x949 (var var0000);
extern void Func0628 object#(0x628) ();

void Func0102 shape#(0x102) () {
	var var0000;
	var var0001;
	var var0002;

	if (event == DOUBLECLICK) {
		if (in_usecode()) {
			halt_scheduled();
			Func0949("@'Tis about time!@");
		} else {
			item->Func0628();
		}
	}
	if (event == PATH_FAILURE) {
		var0000 = get_object_position();
		var0000[0x0001] -= 0x0002;
		var0000[0x0002] += 0x0001;
		var0001 = AVATAR->get_cont_items(0x032A, QUALITY_ANY, FRAME_ANY);
		if (var0001) {
			var0002 = var0001->set_last_created();
			if (var0002) {
				var0001->set_item_frame(0x0004);
				var0002 = UI_update_last_created(var0000);
			}
		}
		var0002 = script AVATAR {
			face north;
			continue;
			actor frame bowing;
		};
	}
}

extern var Func0994 0x994 ();
extern var Func0954 0x954 ();
extern var Func0953 0x953 ();
extern void Func07D1 object#(0x7D1) ();
extern void Func097F 0x97F (var var0000, var var0001, var var0002);
extern var Func097D 0x97D (var var0000, var var0001, var var0002, var var0003, var var0004);

void Func0103 shape#(0x103) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;

	var0000 = Func0994();
	var0001 = get_npc_id();
	var0002 = Func0954();
	var0003 = UI_is_pc_female();
	var0004 = Func0953();
	var0005 = false;
	if ((event == DEATH) && (var0001 == 0x0001)) {
		clear_item_flag(SI_TOURNAMENT);
		reduce_health(0x0032, NORMAL_DAMAGE);
		gflags[ERNESTO_IS_DEAD] = true;
	}
	if (event == DOUBLECLICK) {
		AVATAR->item_say("@Ranger!@");
		item->Func07D1();
		Func097F(item, "@Yes?@", 0x0002);
		set_schedule_type(TALK);
	}
	if (event == PROXIMITY) {
		if (var0001 != 0x0001) {
			var0006 = UI_get_random(0x0006);
			if (var0006 == 0x0001) {
				item_say("@Try our wine!@");
			}
			if (var0006 == 0x0002) {
				item_say("@Yes, ma'am! Back to work!@");
			}
			if (var0006 == 0x0003) {
				item_say("@Work, work, work...@");
			}
			if (var0006 == 0x0004) {
				item_say("@What art thou doing?@");
			}
			if (var0006 == 0x0005) {
				item_say("@Come and see the wine press!@");
			}
			if (var0006 == 0x0006) {
				item_say("@Magic wine!@");
			}
		}
	}
	if (event == STARTED_TALKING) {
		if (var0001 == 0x0000) {
			set_schedule_type(TEND_SHOP);
			clear_item_say();
			CHUCK->show_npc_face0(0x0000);
			say("\"How may I help thee? As a Ranger, I must help thee in any way that I can.\"");
			if (gflags[STORM_ICEWINE] && (!gflags[KNOWS_ICEWINE_ORIGIN])) {
				add("strange wine");
			}
			if (gflags[FOUND_BROWN_BOTTLE] && (SIMON->get_schedule_type() != WAIT)) {
				add("brown bottle");
			}
			if (gflags[HAS_CLUE_SHIELD] && (!gflags[KNOWS_MONITOR_SHIELD_ORIGIN])) {
				add("mystery shield");
			}
			if (gflags[KNOWS_ROTOLUNCIA_IS_KIDNAPPER] && (!ROTOLUNCIA->get_item_flag(DEAD))) {
				add("kidnap");
			}
			converse (["Ranger", "bye"]) {
				case "kidnap" (remove):
					say("\"Thou shouldst report such a crime as this to Julia. She can aid thee.\"");
					if (JULIA->npc_nearby()) {
						JULIA->set_schedule_type(TALK);
						Func097F(JULIA, "@Yes?@", 0x0000);
					}
					fallthrough;

				case "Ranger" (remove):
					say("\"A Ranger is much like any other city guard, ",
						var0002,
						". It is our job to catch thieves, and stop fights. Nothing very exciting...\"");
					say("\"...Until one of the Mages manages to destroy a section of town with his experiments. Then things become lively.\"");
					add(["Mage", "lively"]);
					fallthrough;

				case "Mage" (remove):
					say("\"Moonshade is the city of Mages, ",
						var0002,
						".\"");
					say("\"Mages are very powerful, and many of them can do things that make my skin crawl! And oftimes their experiments escape and then the Rangers must step in and take control.\"");
					say("\"But, 'tis my job... cleaning after the Mages.\"");
					add(["things", "escape"]);
					fallthrough;

				case "things" (remove):
					say("\"I pretend I do not see half of what the Mages can do, ",
						var0002,
						". I find 'tis easier to keep my sanity that way.\"");
					say("\"Some can summon fire or ice. Others can summon storms or daemons. And none of it I want to know about, to tell thee truth.\"");
					fallthrough;

				case "escape" (remove):
					say("\"Either the mage tries a spell that is too advanced for him, or he simply loses concentration. I do not know.\"");
					say("\"All I know is that suddenly we have people running through the streets trying to escape whatever the Mage was attempting to conjure...\"");
					say("\"And 'tis no mean feat for us poor Rangers to overcome something that overpowered a Mage, I can tell thee!\"");
					fallthrough;

				case "lively" (remove):
					say("\"Oh, yes! It might be as simple as putting out a fire and rebuilding a section or two of wall after.\"");
					say("\"But sometimes 'tis far more dangerous... Like a dragon, or one of Rotoluncia's daemons, or somesuch. Never know from one day to the next what thou wilt have to face.\"");
					remove(["dragon", "daemon"]);
					fallthrough;

				case "dragon" (remove):
					say("\"To be honest, I have never had to face one myself. But my commander remembers when she was a new Ranger, when the Strictures were newly in place. A Mage summoned a dragon that burned half of the city.\"");
					add("Strictures");
					fallthrough;

				case "Strictures" (remove):
					say("\"I cannot tell thee much about them... Not being a Mage and all. Perhaps thou couldst ask a Mage.\"");
					fallthrough;

				case "Rotoluncia" (remove):
					say("\"Rotoluncia's forte is fire spells. So I suppose it follows that she would seek to summon daemons to her service.\"");
					say("\"To be truthful, she hath not yet succeeded in binding a daemon. But it disturbs me to think that she might... and that I might have to face one some day.\"");
					fallthrough;

				case "daemons" (remove):
					say("\"Everyone says that daemons come from the hot depths of the world. That they are foul creatures of flame and melted flesh.\"");
					say("\"I hope never to find if it is true...\"");
					fallthrough;

				case "strange wine" (remove):
					if (Func097D(PARTY, 0x0001, 0x0268, QUALITY_ANY, 0x0010)) {
						say("\"It looks to be wine from our press, ",
							var0002,
							". But thou shouldst ask my commander, to be sure.\"");
					} else {
						say("\"'Tis true that we deal in wine, ",
							var0002,
							". But without seeing the bottle, I would not be able to help thee.\"");
					}
					add("commander");
					fallthrough;

				case "commander" (remove):
					say("\"Julia is our commander, ",
						var0002,
						". She's a stern woman, but worthy of thy respect.\"");
					say("\"There are those that consider her a handsome woman, when her mouth is closed... If thou knowest what I mean.\"");
					var0005 = true;
					fallthrough;

				case "brown bottle" (remove):
					say("\"What an odd bottle! Who would bottle their wares in such an ugly container? I hope that whatever was inside is not as coarse as the bottle suggests.\"");
					say("\"Our commander oversees the bottling of our wine, ",
						var0002,
						". Thou mightest ask if she knows who doth use such a bottle, but I would not stake much on it, if I were thee.\"");
					if (var0005 == false) {
						add("commander");
					}
					fallthrough;

				case "mystery shield" (remove):
					say("\"It certainly is a fine looking piece of equipment, ",
						var0002,
						". I wish we had arms as nice.\"");
					say("\"Thou shouldst ask Ernesto if he recognizes it. He is the arms expert among the Rangers.\"");
					say("\"On a guess, I'd say it came from Monitor. Everyone knows that they practically sleep with weapons such as this.\"");
					add(["Ernesto", "Monitor"]);
					fallthrough;

				case "Ernesto" (remove):
					say("\"Ernesto is our second in command, ",
						var0002,
						". Thou wilt find him somewhere around the wine press, I'll warrant.\"");
					add("wine press");
					fallthrough;

				case "wine press" (remove):
					say("\"One other thing that the Rangers do, ",
						var0002,
						", is produce the wine sold throughout Moonshade.\"");
					say("\"Our wine press is very special. I'm certain that either Ernesto or the commander would be happy to show it to thee. We are all very proud of it.\"");
					fallthrough;

				case "Monitor" (remove):
					say("\"Monitor is on the mainland. 'Tis the city of warriors. That is why I thought the shield might be from there.\"");
					fallthrough;

				case "bye":
					UI_remove_npc_face0();
					Func097F(AVATAR, "@So long!@", 0x0000);
					Func097F(item, "@Fare well!@", 0x0002);
					break;
			}
		}
		if (var0001 == 0x0001) {
			set_schedule_type(TEND_SHOP);
			clear_item_say();
			CRUSTY->show_npc_face0(0x0000);
			say("\"My name is Ernesto the Ranger. How may I be of service, ",
				var0002,
				"?\"");
			if (gflags[HAS_CLUE_SLIPPERS] && (!gflags[KNOWS_SLIPPERS_OWNER])) {
				add("slippers");
			}
			if (gflags[STORM_ICEWINE] && (!gflags[KNOWS_ICEWINE_ORIGIN])) {
				add("strange wine");
			}
			if (gflags[FOUND_BROWN_BOTTLE] && (SIMON->get_schedule_type() != WAIT)) {
				add("brown bottle");
			}
			if (gflags[HAS_CLUE_SHIELD] && (!gflags[KNOWS_MONITOR_SHIELD_ORIGIN])) {
				add("mystery shield");
			}
			if (gflags[KNOWS_ROTOLUNCIA_IS_KIDNAPPER] && (!ROTOLUNCIA->get_item_flag(DEAD))) {
				add("kidnap");
			}
			converse (["Ranger", "bye"]) {
				case "kidnap" (remove):
					say("\"This is such a terrible crime. And it involves magic!");
					if (JULIA->npc_nearby()) {
						say("\"Thou shouldst report such a crime as this to Julia. She can aid thee.\"");
						JULIA->set_schedule_type(TALK);
						Func097F(JULIA, "@Yes?@", 0x0000);
					} else {
						say("\"Do not tell that I told thee this, but do not take such a matter to Julia -- \"");
						say("\"She shall only extort a bribe, then send thee elsewhere.\"");
						say("\"Instead, speak to one of the Adepts. Perhaps Gustacio, if he'll give thee his ear, or Fedabiblio. They can help thee.\"");
					}
					fallthrough;

				case "Ranger" (remove):
					say("\"A Ranger is in service to the MageLord and the Council. 'Tis our duty to guard the city and keep order...\"");
					say("\"We also make fine wine that is sold throughout all of Moonshade.\"");
					add(["MageLord", "Council"]);
					fallthrough;

				case "MageLord" (remove):
					if (gflags[BANES_RELEASED] && (0x038A->get_schedule_type() != WAIT)) {
						say("\"Shamino the Anarch is the current MageLord. He hath brought great change to our city...\"");
						say("\"No longer must a Mage or Mundane be bound by petty rules. It is quite exciting!\"");
					} else {
						say("\"The current MageLord is Filbercio, ",
							var0002,
							". He is a wise ruler, who ensures the safety of the people by keeping the Mages within the confines of the Strictures.\"");
						add("Strictures");
					}
					fallthrough;

				case "Strictures" (remove):
					say("\"I can only tell thee what is common knowledge, ",
						var0002,
						". That the Strictures are meant to curtail the use of dangerous spells within the city.\"");
					say("\"That way, should anything go wrong during the casting, the Rangers do not have to worry about saving half the populace as well as containing the disaster.\"");
					fallthrough;

				case "Council" (remove):
					say("\"The Council is composed of Adepts that balance the MageLord's power. They represent the voice of the Mages within the city.\"");
					say("\"Of course, the Mundanes have little or no voice in the Council. I suppose that the Rangers are the closest thing to representatives for the Mundanes that Moonshade doth have.\"");
					add(["Mages", "Mundanes"]);
					fallthrough;

				case "Mages" (remove):
					say("\"Mages are those that make any use of magic, ",
						var0002,
						"... Adept or no. And since Moonshade is the city of Mages, it is the Mages that control the city.\"");
					fallthrough;

				case "Mundanes" (remove):
					say("\"Mundanes are those that cannot call upon magic without the use of magic items that contain a specific spell. They have no magical ability in and of themselves.\"");
					say("\"And here in Moonshade, I'm afraid, Mundanes are little better than chattel.\"");
					fallthrough;

				case "slippers" (remove):
					say("\"Too small for me, I'm afraid. I don't think that these belong to any of the Rangers. Thou couldst ask Bucia.\"");
					add("Bucia");
					fallthrough;

				case "Bucia" (remove):
					say("\"She is Moonshade's provisioner, and she would know who bought such a pair, I'm sure... Bucia loves all sorts of information, if thou takest my meaning.\"");
					say("\"Thou canst usually find her at the Capessi Canton.\"");
					add("Capessi Canton");
					fallthrough;

				case "Capessi Canton" (remove):
					say("\"The Capessi Canton is Bucia's shop. Well, at least I know that she runs it, whether or not she owns it.\"");
					say("\"Thou canst find almost anything there. But remember, Bucia loves to talk. Don't say that I didn't warn thee.\"");
					fallthrough;

				case "strange wine" (remove):
					if (Func097D(PARTY, 0x0001, 0x0268, QUALITY_ANY, 0x0010)) {
						say("\"'Tis our wine, sure enough! Can't fool my nose after all these years working with the Mad Mage's wine press!\"");
						say("\"I wonder if this was the bottle that disappeared... Thou shouldst ask my commander about the wine.\"");
						gflags[KNOWS_ICEWINE_ORIGIN] = true;
						add("Mad Mage");
					} else {
						say("\"As fond as I am of good wine, ",
							var0002,
							", I cannot help thee unless I see the bottle. No offense, but thy description could fit several wines that I know of.\"");
					}
					fallthrough;

				case "Mad Mage" (remove):
					say("\"Erstam is the Mad Mage, ",
						var0002,
						".\"");
					say("\"Long ago, he was the teacher of the Adepts here in Moonshade. But then, like any man I suppose, he became obsessed with the thought of his own mortality.\"");
					say("\"His attempts to wrest life from death have been rather pathetic. And he hath gone completely mad.\"");
					fallthrough;

				case "brown bottle" (remove):
					say("\"Hmmm. I can't recall having seen a bottle like this one. But then I don't generally try any vintages but our own.\"");
					say("\"Thou shouldst ask Julia, though. If anyone would know, it would be Julia.\"");
					add("Julia");
					fallthrough;

				case "Julia" (remove):
					say("\"Perhaps I should have referred to her as Commander, for that is what she is... Commander of the Rangers.\"");
					say("\"She's a bit sour, I'm afraid, ",
						var0002,
						". Leading the Rangers is a thankless job, and she hath become quite disillusioned over the last few years.\"");
					fallthrough;

				case "mystery shield" (remove):
					say("\"I thought that thou didst have a challenge for me! This one is easy... It is a Pikemen's shield from Monitor.\"");
					say("\"I wish that the Council would give us the funds for arms like this!\"");
					add(["Pikemen", "Monitor"]);
					fallthrough;

				case "Pikemen" (remove):
					say("\"The Pikemen are to Monitor as the Rangers are to Moonshade, ",
						var0002,
						". But more so...\"");
					say("\"For the Pikemen maintain guard towers all along the roads on the mainland. So they are much more widely respected than the Rangers.\"");
					fallthrough;

				case "Monitor" (remove):
					say("\"Monitor is on the southern edge of the mainland. Its citizens are noted for their bravery.\"");
					say("\"I went there once, as a young lad. That's what inspired me to become a Ranger.\"");
					fallthrough;

				case "bye":
					UI_remove_npc_face0();
					Func097F(AVATAR, "@Farewell!@", 0x0000);
					Func097F(item, "@Peace be with thee.@", 0x0002);
					break;
			}
		}
	}
	if (var0001 == 0x0002) {
		clear_item_say();
		CHUCK->show_npc_face0(0x0000);
		say("\"Please, I cannot speak with thee at this time. My grief doth take the words from my mouth and leave me only with tears.\" ~\"Please away, I do not wish to be seen in this state.\"");
		Func097F(item, "@If only I had flowers...@", 0x0002);
		set_schedule_type(WAIT);
		UI_remove_npc_face0();
	}
}

extern var Func090C 0x90C (var var0000, var var0001);
extern void Func094A 0x94A (var var0000);

void Func0105 shape#(0x105) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;

	if (event == PATH_SUCCESS) {
		halt_scheduled();
		var0000 = script item {
			frame 0;
			repeat 32 {
				next frame cycle;
				continue;
				sfx 92;
			};
			call Func0105;
		};
		var0001 = Func090C(AVATAR, item);
		var0000 = script AVATAR {
			face var0001;
			repeat 9 {
				continue;
				actor frame strike_1h;
				actor frame standing;
				wait 1;
			};
		};
	}
	if (event == SCRIPTED) {
		var0002 = AVATAR->get_cont_items(0x028E, QUALITY_ANY, FRAME_ANY);
		if (var0002) {
			var0002->remove_item();
		}
		var0003 = UI_create_new_object(0x0353);
		if (var0003) {
			var0003->set_item_flag(TEMPORARY);
			var0003->set_item_flag(OKAY_TO_TAKE);
			var0003->set_item_frame(UI_die_roll(0x0000, 0x0004));
			var0004 = get_object_position();
			var0004[0x0001] += 0x0001;
			var0004[0x0002] += 0x0001;
			var0000 = UI_update_last_created(var0004);
		}
	}
	if (event == DOUBLECLICK) {
		Func094A("@I believe that one threads a loom before using it.@");
	}
}

extern var Func0994 0x994 ();
extern var Func09A0 0x9A0 (var var0000, var var0001);
extern void Func07D2 object#(0x7D2) ();
extern void Func097F 0x97F (var var0000, var var0001, var var0002);
extern void Func075A object#(0x75A) ();
extern void Func07EC object#(0x7EC) ();

void Func0109 shape#(0x109) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;
	var var0008;
	var var0009;
	var var000A;
	var var000B;
	var var000C;
	var var000D;
	var var000E;
	var var000F;
	var var0010;
	var var0011;
	var var0012;

	var0000 = "his";
	if (UI_is_pc_female()) {
		var0000 = "her";
	}
	if (event == SCRIPTED) {
		if (Func0994() == 0x0002) {
			if (!KARNAX->npc_nearby()) {
				KARNAX->set_schedule_type(TEND_SHOP);
				abort;
			}
			var0001 = Func09A0(0x0002, 0x0001);
			var0002 = [0x095D, 0x0477, 0x0000];
			KARNAX->Func07D2();
			KARNAX->set_npc_id(KARNAX->get_npc_id() + 0x0001);
			KARNAX->clear_item_say();
			var0003 = KARNAX->find_nearby(ANY_SHAPE, 0x0014, MASK_NPC2);
			var0004 = [];
			for (var0007 in var0003 with var0005 to var0006) {
				if (var0007->get_schedule_type() == WAIT) {
					var0004 &= var0007;
				}
			}
			if (KARNAX->get_npc_id() == 0x0008) {
				AVATAR->clear_item_flag(DONT_MOVE);
				KARNAX->set_npc_id(0x0000);
				UI_set_weather(CLEAR_WEATHER);
				XENKA->set_schedule_type(TALK);
				var0008 = script Func09A0(0x0005, 0x0001) after 1000 ticks {
					nohalt;
					call Func00FA;
				};
				abort;
			}
			if (KARNAX->get_npc_id() == 0x0007) {
				KARNAX->show_npc_face0(0x0000);
				say("\"The energies from beyond the Void now converge upon this place and time. It is the moment when Xenka shall move across the eons and bring us the light of prophecy...\"");
				var0009 = AVATAR->find_nearby(0x02D6, 0x0014, MASK_NONE);
				var0009->remove_item();
				UI_play_music(0x003F, var0001);
				XENKA->move_object(var0002);
				UI_sprite_effect(ANIMATION_TELEPORT2, var0002[0x0001], var0002[0x0002], 0x0000, 0x0000, 0x0000, LOOP_ONCE);
				var0008 = script XENKA {
					nohalt;
					face east;
					continue;
					actor frame cast_out;
				};
				Func097F(XENKA, "@It is I...@", 0x0005);
				Func097F(KARNAX, "@Come to us, Xenka!@", 0x0000);
				var0008 = script Func09A0(0x0005, 0x0003) after 10 ticks {
					nohalt;
					call Func0109;
				};
				gflags[XENKA_HAS_RETURNED] = true;
				abort;
			}
			if (KARNAX->get_npc_id() == 0x0006) {
				KARNAX->item_say("@Xenka is near!@");
				var000A = "@Xenka!@";
				var0008 = script Func09A0(0x0005, 0x0003) after 10 ticks {
					nohalt;
					call Func0109;
				};
			}
			if (KARNAX->get_npc_id() == 0x0005) {
				UI_sprite_effect(ANIMATION_GREEN_BUBBLES, 0x0968, 0x0474, 0x0000, 0x0000, 0x0000, LOOP_ONCE);
				KARNAX->item_say("@Invoke her name!@");
				var000A = "@Xenka!@";
				var0008 = script Func09A0(0x0005, 0x0003) after 10 ticks {
					nohalt;
					call Func0109;
				};
			}
			if (KARNAX->get_npc_id() == 0x0004) {
				KARNAX->item_say("@The time is at hand!@");
				var000A = "@The time!@";
				var0008 = script Func09A0(0x0005, 0x0003) after 10 ticks {
					nohalt;
					call Func0109;
				};
			}
			if (KARNAX->get_npc_id() == 0x0003) {
				KARNAX->item_say("@Xenka returns!@");
				var000A = "@She is pure.@";
				var0008 = script Func09A0(0x0005, 0x0003) after 10 ticks {
					nohalt;
					call Func0109;
				};
			}
			if (KARNAX->get_npc_id() == 0x0002) {
				var0009 = UI_create_new_object(0x02D6);
				if (var0009) {
					var0009->set_item_frame(0x0006);
					var0008 = UI_update_last_created(var0002);
					UI_play_sound_effect(0x0046);
				}
				KARNAX->item_say("@Our vigil is over!@");
				var000A = "@Xenka comes!@";
				var0008 = script Func09A0(0x0005, 0x0003) after 10 ticks {
					nohalt;
					call Func0109;
				};
			}
			if (KARNAX->get_npc_id() == 0x0001) {
				UI_set_weather(SPARKLE);
				UI_play_music(0x0041, var0001);
				AVATAR->set_item_flag(DONT_MOVE);
				KARNAX->item_say("@Long have we waited...@");
				var000A = "@No more!@";
				var0008 = script Func09A0(0x0005, 0x0003) after 10 ticks {
					nohalt;
					call Func0109;
				};
			}
			if (var0004 != []) {
				var000B = var0004[UI_get_random(UI_get_array_size(var0004))];
				var000B->clear_item_say();
				var000C = UI_get_random(0x000A);
				var0008 = script var000B after var000C ticks {
					actor frame standing;
					wait 7;
					actor frame sitting;
				};
				var000C += 0x0001;
				Func097F(var000B, var000A, var000C);
			}
			UI_sprite_effect(ANIMATION_TELEPORT, var0002[0x0001], var0002[0x0002], 0x0000, 0x0000, 0x0000, LOOP_ONCE);
			abort;
		}
		if (Func0994() == 0x001B) {
			UI_init_conversation();
			KARNAX->show_npc_face0(0x0000);
			say("\"Thou shouldst know better than to meddle in the affairs of Fate, Thoxa. By merely talking with the Hero, thou mayest be condemning us.\"");
			THOXA->show_npc_face1(0x0000);
			say("\"We must intervene, Karnax. The very fabric that weaves the tapestry of the Cosmos may depend upon it.\"");
			UI_remove_npc_face1();
			0x0000->set_conversation_slot();
			say("\"Thou art as foolish as ever, girl...\"");
			say("\"Xenka's writings are crystal clear -- those who seek to aid the Hero, shall cause ",
				var0000,
				" greatest calamities!\"");
			say("\"I must stop thee, before thou sendest us all to our doom!\"");
			Func097F(KARNAX, "@I must stop thee...@", 0x0000);
			UI_remove_npc_face1();
			UI_remove_npc_face0();
			UI_end_conversation();
			AVATAR->set_item_flag(DONT_MOVE);
			var0008 = script THOXA {
				nohalt;
				face FACE_NORTH;
				actor frame cast_out;
				wait 2;
				actor frame cast_up;
				wait 4;
				actor frame strike_1h;
				call Func075A;
			};
			Func097F(THOXA, "@Flam Mas Flam!@", 0x0002);
			gflags[TEMP_FLAG_4] = true;
			var0008 = script KARNAX after 10 ticks {
				nohalt;
				actor frame reach_1h;
				wait 2;
				actor frame raise_2h;
				wait 2;
				say "@Thoxa...@";
				actor frame reach_2h;
				wait 2;
				actor frame strike_2h;
				actor frame standing;
				call Func07EC;
			};
			var000D = KARNAX->get_object_position();
			var000E = THOXA->get_object_position();
			UI_sprite_effect(ANIMATION_PURPLE_BUBBLES, (var000E[0x0001] - 0x0002), (var000E[0x0002] - 0x0002), 0x0000, 0x0000, 0x0000, LOOP_ONCE);
			var000F = [-2,  0,  2,  0,  1,  0,  0];
			var0010 = [-2, -3,  2,  2, -2, -3,  0];
			var0011 = 1;
			while (var0011 <= 0x0007) {
				var0012 = UI_create_new_object(0x025F);
				if (var0012) {
					var0012->clear_item_flag(TEMPORARY);
					var0008 = UI_update_last_created([(var000D[0x0001] + var000F[var0011]), (var000D[0x0002] + var0010[var0011]), 0x0000]);
				}
				var0011 += 0x0001;
			}
		}
	}
}

extern var Func0906 0x906 (var var0000);
extern var Func0908 0x908 (var var0000, var var0001, var var0002, var var0003, var var0004, var var0005);
extern void Func0909 0x909 (var var0000, var var0001, var var0002, var var0003, var var0004, var var0005, var var0006, var var0007, var var0008);
extern void Func0903 0x903 ();
extern void Func0907 0x907 (var var0000, var var0001);
extern void Func0904 0x904 (var var0000);
extern void Func0905 0x905 (var var0000);
extern void Func09A5 0x9A5 ();
extern var Func09A0 0x9A0 (var var0000, var var0001);
extern void Func097F 0x97F (var var0000, var var0001, var var0002);
extern void Func01C3 shape#(0x1C3) ();
extern void Func07F6 object#(0x7F6) ();
extern void Func07F8 object#(0x7F8) ();

void Func010E shape#(0x10E) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;

	if ((event != DOUBLECLICK) && (event != SCRIPTED)) {
		return;
	}
	var0000 = get_item_quality();
	if (var0000 == 0x0032) {
		if ((gflags[HAVE_WOLF_CLOAK] && (gflags[HAVE_WOLF_TATTOO] && gflags[GAVE_WOLF_TO_LUCILLA])) && ((!gflags[AVATAR_IS_KNIGHT]) && (gflags[RENOUNCED_BRITISH] || (!gflags[TOLD_MARSTEN_SERVES_LORD_BRITISH])))) {
			var0001 = script item {
				nohalt;
				call Func01C3;
			};
			abort;
		}
	}
	if (var0000 == 0x00B3) {
		if ((gflags[FAWN_TRIAL_DONE_FIRST_DAY] || gflags[FAWN_TRIAL_DONE]) && (!(gflags[FAWN_TRIAL_DONE_FIRST_DAY] && gflags[FAWN_TRIAL_DONE]))) {
			var0001 = script item {
				nohalt;
				call Func07F8;
			};
			abort;
		}
	}
	var0002 = Func0906(item);
	if (var0002 == 0x0001) {
		if (Func0908(item, 0x0178, 0x0000,  0,  0, 0x0007)) {
			Func0909(item, 0x01B0, 0x0001, 0x0001, 0x01B1, 0x0000,  0,  3, 0x0005);
			UI_play_sound_effect2(0x001F, item);
		} else {
			Func0903();
		}
	}
	if (var0002 == 0x0000) {
		if (Func0908(item, 0x0178, 0x0001,  0,  0, 0x0007)) {
			Func0909(item, 0x01B0, 0x0000, 0x0002, 0x01B1, 0x0001, -3,  0, 0x0007);
			UI_play_sound_effect2(0x0020, item);
		} else {
			Func0903();
		}
	}
	if (var0002 == 0x0002) {
		if (var0000 == 0x0005) {
			var0003 = get_object_position();
			UI_sprite_effect(ANIMATION_FIREWORKS, (var0003[0x0001] - 0x0002), var0003[0x0002], 0x0000, 0x0000, 0x0000, LOOP_ONCE);
			Func0907(item, 0x0000);
			var0001 = script item {
				nohalt;
				call Func010E;
			};
			abort;
		}
		Func0904(item);
	}
	if (var0002 == 0x0003) {
		Func0905(item);
	}
	if (var0000 == 0x00DC) {
		Func09A5();
		abort;
	}
	if (var0000 == 0x0005) {
		UI_play_music(0x0029, Func09A0(0x0005, 0x0001));
		var0004 = get_distance(AVATAR);
		AVATAR->set_item_flag(DONT_MOVE);
		var0005 = get_object_position();
		var0005[0x0001] -= 0x0002;
		var0005[0x0002] += 0x0003;
		AVATAR->si_path_run_usecode(var0005, PATH_SUCCESS, item, Func07F6, true);
		UI_play_sound_effect(0x0039);
		var0001 = script item after (var0004 + 0x0002) ticks {
			nohalt;
			call Func07F6;
		};
		Func097F(AVATAR, "@Can't stop myself...@", 0x0002);
	}
}

extern void Func097F 0x97F (var var0000, var var0001, var var0002);

void Func0112 shape#(0x112) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;
	var var0008;

	if (gflags[BANES_RELEASED]) {
		clear_item_flag(SI_TOURNAMENT);
		var0000 = script item {
			nohalt;
			hit 100, normal_damage;
		};
		abort;
	}
	var0001 = get_oppressor();
	if (var0001 == 0x0000) {
		var0001 = AVATAR->get_npc_object();
	} else {
		var0001 = UI_get_npc_object(0x0000 - var0001);
	}
	var0002 = UI_get_party_list();
	if (var0001 in var0002) {
		var0000 = set_npc_prop(HEALTH, 5);
		var0003 = AVATAR->find_nearby(0x017D, 0x001E, MASK_NONE);
		for (var0006 in var0003 with var0004 to var0005) {
			var0006->set_schedule_type(TALK);
			var0006->set_npc_id(0x0007);
		}
		var0007 = ["@Hold there!@", "@Cease!@", "@Murderer!@", "@Stop him!@", "@Arrest that dog!@", "@Ruffian!@"];
		if (var0003) {
			var0003->clear_item_say();
			Func097F(var0003, [var0007[UI_get_random(UI_get_array_size(var0007))]], 0x0000);
		}
		if (UI_get_array_size(var0003) < 0x0006) {
			var0008 = UI_create_new_object2(0x017D, [0x0000, 0x0000, 0x0000]);
			if (var0008) {
				var0000 = var0008->approach_avatar(0x005A, 0x0028);
				if (var0000) {
					var0008->set_npc_id(0x0007);
					var0008->set_schedule_type(TALK);
				}
			}
		}
	} else {
		var0000 = set_npc_prop(HEALTH, 20);
		clear_item_say();
		var0007 = ["@Oh, my!@", "@I am bleeding...@", "@Oh, help me!@", "@Ouch!@", "@Fiend, stop that!@", "@I die!@"];
		Func097F(item, [var0007[UI_get_random(UI_get_array_size(var0007))]], 0x0000);
		set_attack_mode(FLEE);
	}
}

extern var Func0953 0x953 ();
extern void Func094A 0x94A (var var0000);

void Func011C shape#(0x11C) () {
	var var0000;
	var var0001;

	if (event == DOUBLECLICK) {
		var0000 = UI_game_hour();
		if ((var0000 >= 0x0006) && (var0000 <= 0x000B)) {
			item_say((" " + UI_game_hour()) + " o'clock");
			return;
		}
		if (var0000 == 0x000C) {
			item_say("Noon");
			return;
		}
		if ((var0000 >= 0x000D) && (var0000 <= 0x0014)) {
			var0000 -= 0x000C;
			item_say((" " + var0000) + " o'clock");
			return;
		}
		var0001 = Func0953();
		Func094A("@^<Avatar>, I believe the important part of the word sundial is `sun'.@");
	}
}

extern void Func097F 0x97F (var var0000, var var0001, var var0002);

void Func011E shape#(0x11E) () {
	var var0000;
	var var0001;

	AVATAR->clear_item_say();
	var0000 = get_item_frame();
	if ((var0000 == 0x0001) || (var0000 == 0x0002)) {
		var0001 = UI_click_on_item();
		if (var0001->is_npc()) {
			UI_play_sound_effect(0x0038);
			AVATAR->item_say("@Take that!@");
			Func097F(var0001, "@Oooww!@", ZERO_DELAY2);
			abort;
		}
		if ((var0001->get_item_shape() == 0x011E) && (var0001->get_item_frame() == 0x0000)) {
			UI_play_sound_effect(0x003C);
			Func097F(AVATAR, "@Listen...@", 0x0001);
			abort;
		}
		if ((var0001->get_item_shape() == 0x011E) && (var0001->get_item_frame() == 0x0003)) {
			UI_play_sound_effect(0x007A);
			AVATAR->item_say("@Troll drum, nice...@");
			abort;
		}
	}
}

void Func0122 shape#(0x122) () {
	var var0000;

	if (event == DOUBLECLICK) {
		var0000 = get_item_frame();
		if (var0000 > 0x0003) {
			set_item_frame(var0000 - 0x0004);
		} else {
			set_item_frame(var0000 + 0x0004);
		}
		UI_play_sound_effect2(0x0009, item);
	}
}

void Func0123 shape#(0x123) () {
	var var0000;

	if (event == DOUBLECLICK) {
		var0000 = get_item_frame();
		if (var0000 > 0x0003) {
			set_item_frame(var0000 - 0x0004);
		} else {
			set_item_frame(var0000 + 0x0004);
		}
		UI_play_sound_effect2(0x0009, item);
	}
}

extern void Func094A 0x94A (var var0000);
extern var Func08E7 0x8E7 (var var0000);
extern void Func088D 0x88D (var var0000, var var0001);
extern var Func088E 0x88E (var var0000);

void Func0124 shape#(0x124) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;
	var var0008;
	var var0009;
	var var000A;
	var var000B;
	var var000C;
	var var000D;
	var var000E;
	var var000F;
	var var0010;
	var var0011;
	var var0012;
	var var0013;
	var var0014;

	if (event == DOUBLECLICK) {
		if (get_barge()) {
			var0000 = find_nearby(0x0316, 0x0014, MASK_NONE);
			if (var0000) {
				if ((var0000->get_item_quality() == 0x0001) && (!gflags[CAN_USE_FILBERCIOS_BARGE])) {
					Func094A("This is Filbercio's barge!");
					abort;
				}
			}
			var0001 = Func08E7(item);
		} else {
			Func088D(item, 0x0124);
			var0002 = get_distance(AVATAR) + 0x000F;
			var0001 = script item after var0002 ticks {
				nohalt;
				call Func0124;
			};
		}
	}
	if (event == SCRIPTED) {
		// This is leftover BG code.
		var0003 = AVATAR->get_object_position();
		var0004 = [0x0AE7, 0x09D5, 0x0A37, 0x09D5, 0x0AA7, 0x08E5, 0x0A37, 0x09A5];
		var0005 = [0x0AD7, 0x0885];
		var0006 = 0x0000;
		if ((var0003[0x0001] == var0005[0x0001]) && ((var0003[0x0002] == var0005[0x0002]) && (gflags[SATIN_GOOD] == false))) {
			gflags[SATIN_GOOD] = true;
			var0005[0x0002] += 0x0002;
			UI_sprite_effect(ANIMATION_LIGHTNING, var0005[0x0001], var0005[0x0002], 0x0000, 0x0000, 0x0000, 0x0001);
			UI_play_sound_effect2(0x0074, item);
			UI_lightning();
			var0007 = UI_create_new_object(0x037F);
			if (var0007) {
				var0007->set_item_flag(TEMPORARY);
				var0001 = UI_update_last_created(var0005);
			}
			abort;
		}
		var0008 = 0x0001;
		do {
			if ((var0003[0x0001] == var0004[var0008]) && (var0003[0x0002] == var0004[(var0008 + 0x0001)])) {
				var0008 = Func088E(var0008);
				var0006[0x0001] = var0004[var0008];
				var0006[0x0002] = var0004[(var0008 + 0x0001)];
				break;
			}
			var0008 = Func088E(var0008);
		}
		while (var0008 > 0x0001);
		if (var0006) {
			var0009 = UI_get_party_list();
			var000A = [];
			var000B = [];
			var000C = [];
			var000D = AVATAR->get_object_position();
			var000E = 0x0001;
			for (var0011 in var0009 with var000F to var0010) {
				var0012 = var0011->get_object_position();
				var000A[var000E] = var000D[0x0001] - var0012[0x0001];
				var000B[var000E] = var000D[0x0002] - var0012[0x0002];
				var000C[var000E] = var0011->get_item_frame_rot();
				var000E += 0x0001;
			}
			PARTY->move_object(var0006);
			var000D = AVATAR->get_object_position();
			var000E = 0x0001;
			for (var0011 in var0009 with var0013 to var0014) {
				var0011->move_object([(var000D[0x0001] - var000A[var000E]), (var000D[0x0002] - var000B[var000E]), var000D[0x0003]]);
				var0011->set_item_frame_rot(var000C[var000E]);
				var000E += 0x0001;
			}
		}
	}
}

extern var Func099E 0x99E (var var0000);
extern var Func0942 0x942 (var var0000);
extern var Func0996 0x996 (var var0000, var var0001, var var0002, var var0003, var var0004, var var0005, var var0006);
extern void Func095D 0x95D (var var0000);

void Func0128 shape#(0x128) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;

	var0000 = get_item_frame();
	if (var0000 == 0x0000) {
		if ((event == READIED) || (event == UNREADIED)) {
			var0001 = get_container();
			while ((var0001 != 0x0000) && (!var0001->is_npc())) {
				var0001 = var0001->get_container();
			}
			if (var0001 == 0x0000) {
				UI_flash_mouse(CURSOR_HAND);
				return;
			}
		}
		if (event == READIED) {
			var0001->set_item_flag(INVISIBLE);
		}
		if (event == UNREADIED) {
			var0001->clear_item_flag(INVISIBLE);
		}
	}
	if (var0000 == 0x0001) {
		if (event == READIED) {
			var0001 = get_container();
			if (var0001 && var0001->is_npc()) {
				halt_scheduled();
				var0002 = script item after 100 ticks {
					nohalt;
					call Func0128;
				};
			} else {
				UI_flash_mouse(CURSOR_HAND);
			}
		}
		if (event == UNREADIED) {
			halt_scheduled();
		}
		if (event == SCRIPTED) {
			halt_scheduled();
			var0001 = get_container();
			if (var0001 && var0001->is_npc()) {
				var0003 = var0001->get_npc_prop(STRENGTH);
				var0004 = var0001->get_npc_prop(HEALTH);
				if (var0004 < var0003) {
					var0002 = var0001->set_npc_prop(HEALTH, 1);
					if (UI_die_roll(0x0001, 0x0064) == 0x0001) {
						remove_item();
						return;
					}
				}
				var0002 = script item after 100 ticks {
					nohalt;
					call Func0128;
				};
			}
		}
	}
	if (var0000 == 0x0002) {
		if ((event == READIED) || ((event == UNREADIED) || (event == SCRIPTED))) {
			var0001 = Func099E(item);
		}
		if (event == UNREADIED) {
			var0005 = Func0942(SELINA);
			if (var0005) {
				var0002 = script item {
					nohalt;
					call Func0128;
				};
			}
		}
		if (event == SCRIPTED) {
			var0005 = Func0942(SELINA);
			if (var0005) {
				SELINA->item_say("Do not touch my ring!");
				var0006 = SELINA->get_npc_object();
				var0007 = SELINA->find_direction(item);
				var0002 = script var0006 {
					nohalt;
					face var0007;
					actor frame strike_2h;
				};
				if (var0001) {
					var0002 = Func0996(var0001, SELINA, 0x0001, 0x0128, QUALITY_ANY, 0x0002, false);
				} else {
					var0002 = set_last_created();
					var0002 = SELINA->give_last_created();
				}
			}
		}
	}
	if (var0000 == 0x0003) {
		if (event == READIED) {
			if (!gflags[EXPERIENCE_FROM_RING_OF_REAGENTS]) {
				Func095D(0x03E8);
				gflags[EXPERIENCE_FROM_RING_OF_REAGENTS] = true;
			}
		}
	}
}

void Func012E shape#(0x12E) () {
	var var0000;

	if (event == DEATH) {
		if (get_npc_id() == 0x000F) {
			clear_item_flag(SI_TOURNAMENT);
		}
		if (get_npc_id() == 0x0010) {
			clear_item_flag(SI_TOURNAMENT);
		}
		if (get_npc_id() == 0x0011) {
			clear_item_flag(SI_TOURNAMENT);
		}
		if (get_npc_id() == 0x0012) {
			clear_item_flag(SI_TOURNAMENT);
		}
	}
	if (event == DOUBLECLICK) {
		if (get_npc_id() == 0x000F) {
			var0000 = 0x0001;
		}
	}
}

void Func012F shape#(0x12F) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;

	if (event == SCRIPTED) {
		var0000 = get_object_position();
		var0001 = get_item_quality();
		var0002 = get_item_frame();
		if (var0002 == 0x0000) {
			var0002 = 0x0000;
		} else if (var0002 == 0x0002) {
			var0002 = 0x000A;
		} else {
			var0002 = 0x0005;
		}
		remove_item();
		var0003 = UI_create_new_object(0x012F);
		if (var0003) {
			var0003->set_item_frame(var0002);
			var0004 = var0003->set_item_quality(var0001);
			var0004 = UI_update_last_created(var0000);
			if (var0004) {
				var0005 = script var0003 {
					repeat 3 {
						next frame cycle;
						sfx 89;
					};
					sfx 88;
				};
			}
		}
		abort;
	}
	if (event == DOUBLECLICK) {
		UI_flash_mouse(CURSOR_HAND);
	}
}

void Func0133 shape#(0x133) () {
	var var0000;

	if (event == DOUBLECLICK) {
		UI_play_sound_effect(0x0041);
		var0000 = get_item_frame();
		if (var0000 == 0x0000) {
			set_item_frame(0x0001);
		}
		if (var0000 == 0x0001) {
			set_item_frame(0x0000);
		}
	}
}

extern void Func097F 0x97F (var var0000, var var0001, var var0002);
extern var Func09A0 0x9A0 (var var0000, var var0001);
extern void Func094F 0x94F (var var0000, var var0001);
extern void Func0636 object#(0x636) ();
extern void Func0370 shape#(0x370) ();
extern void Func038A shape#(0x38A) ();

void Func013D shape#(0x13D) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;

	var0000 = ANTI_SHAM->get_npc_id();
	if (gflags[DOING_ANTI_SHAMINO_VISION] && ((event == PROXIMITY) && (!gflags[DID_ANTI_SHAMINO_VISION]))) {
		set_npc_id(get_npc_id() + 0x0001);
		var0001 = find_nearby(0x0370, 0x0005, MASK_NONE);
		var0002 = find_nearby(0x038A, 0x0005, MASK_NONE);
		if (get_npc_id() == 0x0006) {
			Func097F(item, "@The world shall die...@", 0x0000);
			set_schedule_type(WAIT);
			var0003 = script item {
				nohalt;
				face east;
				actor frame bowing;
				actor frame sitting;
				wait 10;
				call Func013D;
			};
		}
		if (get_npc_id() == 0x0005) {
			Func097F(item, "@The Banes are united!@", 0x0000);
		}
		if (get_npc_id() == 0x0004) {
			Func097F(item, "@Chaos shall reign!@", 0x0000);
		}
		if (get_npc_id() == 0x0003) {
			Func097F(item, "@...of the White Dragon!@", 0x0000);
		}
		if (get_npc_id() == 0x0002) {
			Func097F(item, "@in the abandoned castle...@", 0x0000);
		}
		if (get_npc_id() == 0x0001) {
			UI_fade_palette(0x000C, 0x0001, 0x0001);
			Func097F(item, "@We shall never be found...@", 0x0000);
			var0003 = script ANTI_IOLO {
				nohalt;
				face east;
			};
			var0003 = script ANTI_DUPRE {
				nohalt;
				face east;
			};
			UI_play_music(0x0033, Func09A0(0x0005, 0x0001));
		}
		if ((ANTI_IOLO->get_npc_id() == 0x0000) && var0001) {
			BRENDA->show_npc_face0(0x0000);
			UI_init_conversation();
			say("\"Now that we are together, my brothers in Chaos, no one in the world may stand before us! We shall crush that insignificant Avatar... as we have killed all the others!\"");
			BRAX->show_npc_face1(0x0000);
			say("\"Together... together... until the fiery, peaceful end! Now enemies... once friends!\"");
			say("\"Twist and turn and twine about... What was wrong is right, and what was in, is out...\"");
			say("\"Hide! Hide! For the Avatar seeks!\"");
			var0003 = "@Hide!@" & ("@Then we strike!@" & "@What fun!@");
			Func094F(ANTI_IOLO, var0003);
			UI_end_conversation();
			ANTI_IOLO->set_npc_id(0x0001);
			ANTI_IOLO->si_path_run_usecode([0x0998, 0x0069, 0x0001], SI_PATH_SUCCESS, ANTI_IOLO->get_npc_object(), Func0370, true);
		}
		if ((ANTI_IOLO->get_npc_id() == 0x0001) && var0002) {
			BRENDA->show_npc_face0(0x0000);
			UI_init_conversation();
			say("\"Those who followed now lead! Those who were master are now slave! The world shall return to its natural course... once we have rid ourselves of that cursed Avatar!\"");
			WATSON->show_npc_face1(0x0000);
			say("\"Let us bring this world to its knees! Let these pitiful mortals worship us... even as they die!\"");
			say("\"And I have special plans for the Avatar...!\"");
			var0003 = "@Blood!@" & ("@More blood!@" & "@Bleed to death!@");
			Func094F(ANTI_DUPRE, var0003);
			UI_end_conversation();
			ANTI_IOLO->set_npc_id(0x0002);
			ANTI_DUPRE->si_path_run_usecode([0x0998, 0x0075, 0x0001], SI_PATH_SUCCESS, ANTI_DUPRE->get_npc_object(), Func038A, true);
		}
		abort;
	}
	if (gflags[DOING_ANTI_SHAMINO_VISION] && ((event == SCRIPTED) && (!gflags[DID_ANTI_SHAMINO_VISION]))) {
		UI_fade_palette(0x000C, 0x0001, 0x0000);
		AVATAR->set_camera();
		var0003 = script Func09A0(0x0005, 0x0001) after 10 ticks {
			nohalt;
			call Func0636;
		};
		AVATAR->clear_item_flag(DONT_MOVE);
		UI_init_conversation();
		set_npc_id(0x0000);
		ANTI_IOLO->set_npc_id(0x0000);
		ANTI_DUPRE->set_npc_id(0x0000);
		gflags[DID_ANTI_SHAMINO_VISION] = true;
		gflags[USING_FAR_SIGHT_MAGIC] = false;
		abort;
	}
	if (event == DEATH) {
		if (!gflags[FIXED_BLACK_SWORD]) {
			abort;
		}
		if (gflags[ARCADION_IN_SWORD]) {
			abort;
		}
		if (get_oppressor() == 0x0000) {
			if (AVATAR->get_weapon() == 0x0326) {
				BRENDA->show_npc_face0(0x0000);
				say("\"I shall not forget that thou hast beaten me, vile human!\"");
				UI_remove_npc_face0();
				var0004 = get_object_position();
				set_schedule_type(WAIT);
				AVATAR->set_opponent(0x0001);
				move_object([0x008E, 0x002E, 0x0000]);
				SHAMINO->clear_item_flag(DEAD);
				SHAMINO->move_object(var0004);
				SHAMINO->set_item_flag(SI_ZOMBIE);
				SHAMINO->clear_item_flag(SI_TOURNAMENT);
				SHAMINO->reduce_health(0x0037, NORMAL_DAMAGE);
				gflags[ANARCHY_BANE_IN_SWORD] = true;
				gflags[ANARCHY_BANE_DEAD] = true;
			}
		}
	}
	if (event == SCRIPTED) {
		BRENDA->show_npc_face0(0x0000);
		say("\"Stop!\"");
		UI_remove_npc_face0();
	}
}

extern var Func0994 0x994 ();
extern void Func09A3 0x9A3 (var var0000);
extern var Func09A0 0x9A0 (var var0000, var var0001);
extern void Func097F 0x97F (var var0000, var var0001, var var0002);
extern void Func07D2 object#(0x7D2) ();
extern void Func07D1 object#(0x7D1) ();
extern void Func0636 object#(0x636) ();
extern void Func06D9 object#(0x6D9) ();
extern void Func0377 shape#(0x377) ();
extern void Func0373 shape#(0x373) ();
extern void Func047F object#(0x47F) ();
extern void Func0480 object#(0x480) ();

void Func013E shape#(0x13E) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;
	var var0008;
	var var0009;
	var var000A;
	var var000B;
	var var000C;
	var var000D;
	var var000E;

	var0000 = UI_is_pc_female();
	var0001 = "him";
	if (var0000) {
		var0001 = "her";
	}
	var0002 = Func0994();
	if (gflags[BATLIN_IN_TEST_OF_ETHICALITY]) {
		var0003 = AVATAR->find_nearby(0x013E, 0x0014, MASK_NONE);
		if (event == SCRIPTED) {
			CINDY->show_npc_face0(0x0000);
			say("\"Well, well, well... If it isn't the Avatar!\" *\"Fool! Thou didst think me dead... But now it is time for thee to die!\"");
			var0004 = var0003->add_cont_items(0x0001, 0x0321, QUALITY_ANY, 0x0000, 0x0012);
			var0004 = var0003->add_cont_items(0x0001, 0x0358, 0x0003, FRAME_ANY, 0x0012);
			var0004 = var0003->add_cont_items(0x0001, 0x0327, 0x0003, FRAME_ANY, 0x0012);
			var0004 = var0003->add_cont_items(0x0001, 0x011F, 0x0001, FRAME_ANY, 0x0012);
			var0004 = var0003->add_cont_items(0x0001, 0x02DB, 0x0006, FRAME_ANY, 0x0012);
			var0003->set_alignment(EVIL);
			var0003->set_schedule_type(IN_COMBAT);
			var0004 = script var0003 after 20 ticks {
				nohalt;
				say "@Thou art no match for me!@";
			};
			UI_remove_npc_face0();
			AVATAR->set_item_flag(SI_TOURNAMENT);
			var0003->set_item_flag(SI_TOURNAMENT);
			var0004 = var0003->set_npc_prop(COMBAT, 10);
			var0004 = var0003->set_npc_prop(INTELLIGENCE, 10);
			var0004 = var0003->set_npc_prop(STRENGTH, 10);
			var0005 = AVATAR->get_npc_prop(HEALTH);
			if (var0005 > 15) {
				var0004 = AVATAR->set_npc_prop(HEALTH, 15 - var0005);
			}
		}
		if (event == DEATH) {
			CINDY->show_npc_face0(0x0000);
			var0006 = UI_die_roll(0x0001, 0x0003);
			if (var0006 == 0x0001) {
				say("\"Fool! Dost thou think thou canst actually kill me?\" *\"I am forever!\" *\"I am eternity!\"");
			}
			if (var0006 == 0x0002) {
				say("\"Puny Avatar! Thou canst not defeat what is undefeatable!\"");
			}
			if (var0006 == 0x0003) {
				say("\"No! Thou canst not escape that easily!\"");
			}
			var0004 = var0003->set_npc_prop(HEALTH, 20);
		}
	}
	var0007 = get_npc_id();
	if ((get_schedule_type() == PATROL) && (CANTRA->get_npc_id() != 0x0000)) {
		abort;
	}
	if (Func0994() == 0x0010) {
		if (event == SCRIPTED) {
			CINDY->show_npc_face0(0x0001);
			say("\"Thou art too late, Avatar! Nothing can stop me now! The girl is dead and the last Bane is mine!\"");
			say("\"Soon I shall rival the Guardian himself and crush thee like the irritating insect thou art!\"");
			say("\"I shall open the Wall of Lights and destroy the world! And thou art powerless to follow me!\"");
			var0008 = get_object_position();
			UI_sprite_effect(ANIMATION_PURPLE_BUBBLES, var0008[0x0001], var0008[0x0002], 0x0000, 0x0000, 0x0000, LOOP_ONCE);
			if (DBEYER->npc_nearby()) {
				say("\"Come, Palos! Destiny awaits beyond the frozen mountains!\"");
				var0008 = DBEYER->get_object_position();
				UI_sprite_effect(ANIMATION_PURPLE_BUBBLES, var0008[0x0001], var0008[0x0002], 0x0000, 0x0000, 0x0000, LOOP_ONCE);
			}
			DBEYER->remove_item();
			Func09A3(item);
			UI_play_sound_effect(0x0082);
			gflags[BATLIN_FLED_SHAMINOS_KEEP] = true;
			var0004 = script Func09A0(0x0005, 0x0004) after 200 ticks {
				nohalt;
				call Func0377;
			};
		}
		if ((event == DEATH) && (!get_item_flag(SI_ZOMBIE))) {
			Func097F(item, "@At last...@", 0x0000);
			item->Func07D2();
			item->Func07D1();
			set_schedule_type(WAIT);
			var0004 = script item after 10 ticks {
				nohalt;
				call Func013E;
			};
			set_item_flag(SI_ZOMBIE);
		}
		if (event == PROXIMITY) {
			if (var0007 == 0x0000) {
				CANTRA->set_item_flag(DEAD);
				var0009 = find_nearby(0x0178, 0x0005, MASK_NONE);
				if (var0009) {
					var000A = var0009->get_item_frame() - 0x0001;
					var0009->set_item_frame(var000A);
				}
				set_npc_id(0x0001);
			} else if ((AVATAR->get_distance(item) < 0x000C) && (!get_item_flag(SI_ZOMBIE))) {
				Func097F(item, "@At last...@", 0x0000);
				AVATAR->Func07D2();
				item->Func07D1();
				set_schedule_type(WAIT);
				var0004 = script item after 10 ticks {
					nohalt;
					call Func013E;
				};
				set_item_flag(SI_ZOMBIE);
			}
		}
	}
	if (gflags[DOING_SPINEBREAKER_VISION] && ((event == PROXIMITY) && (!gflags[DID_SPINEBREAKER_VISION]))) {
		set_npc_id(get_npc_id() + 0x0001);
		if (get_npc_id() == 0x000A) {
			UI_init_conversation();
			CINDY->show_npc_face0(0x0000);
			say("\"Thy fire shall warm the heart of my trap, Palos. I shall rely on thee to make sure the Avatar feels the warmth of our welcome.\"");
			MEELOSE->show_npc_face1(0x0000);
			say("\"To be my great pleasure. To look forward to the meeting...\"");
			UI_remove_npc_face1();
			0x0000->set_conversation_slot();
			var000B = find_nearby(0x0373, 0x0014, MASK_NONE);
			if (var000B) {
				var000B->set_schedule_type(LOITER);
			}
			UI_end_conversation();
		}
		if (get_npc_id() == 0x0009) {
			Func097F(item, "@Ah, Palos!@", 0x0000);
			var0004 = script item after 20 ticks {
				nohalt;
				call Func013E;
			};
		}
		if (get_npc_id() == 0x0008) {
			UI_init_conversation();
			CINDY->show_npc_face0(0x0000);
			say("\"Thou shalt be my door warden. I can count on thy strength to delay the Avatar...\"");
			BRUNT->show_npc_face1(0x0000);
			say("\"Dost thou wish ",
				var0001,
				" dead or mangled, Batlin?\"");
			UI_remove_npc_face1();
			0x0000->set_conversation_slot();
			say("\"Mangled will suffice, mighty Brunt. But do as thou wishest...\"");
			BRUNT->show_npc_face1(0x0000);
			say("\"Good... Dead it is!\"");
			UI_remove_npc_face1();
			0x0000->set_conversation_slot();
			UI_end_conversation();
			BRUNT->set_schedule_type(LOITER);
			var000C = [0x0924, 0x017E, 0x0000];
			var000B = find_nearby(0x0373, 0x0014, MASK_NONE);
			if (var000B) {
				var000B->si_path_run_usecode(var000C, SI_PATH_SUCCESS, var000B, Func0373, false);
			}
		}
		if (get_npc_id() == 0x0007) {
			Func097F(item, "@Brunt!@", 0x0000);
		}
		if (get_npc_id() == 0x0006) {
			var000D = [0x0926, 0x0187, 0x0000];
			BRUNT->si_path_run_usecode(var000D, SI_PATH_SUCCESS, BRUNT, Func047F, false);
			Func097F(item, "@I must be certain...@", 0x0000);
		}
		if (get_npc_id() == 0x0005) {
			UI_init_conversation();
			CINDY->show_npc_face0(0x0000);
			say("\"To thee I give the anchor's job... The Avatar must not enter the Shrine of Balance before the Wall of Lights is fully open. Thou must stop the Avatar, should the others fail.\"");
			DEADEYE->show_npc_face1(0x0000);
			say("\"I'll split ",
				var0001,
				" from stem ta stern afore I let ",
				var0001,
				" pass, Batlin!\"");
			say("\"An' o' course there be another yearnin' for a chance ta meet up with ",
				var0001,
				" again, too...\"");
			UI_remove_npc_face1();
			0x0000->set_conversation_slot();
			say("\"Ah, yes... I had nearly forgotten.\"");
			DEADEYE->set_schedule_type(LOITER);
			UI_end_conversation();
		}
		if (get_npc_id() == 0x0004) {
			Func097F(item, "@Deadeye! Come here!@", 0x0000);
		}
		if (get_npc_id() == 0x0003) {
			UI_init_conversation();
			CINDY->show_npc_face0(0x0000);
			say("\"I must prepare an appropriate welcome for mine old enemy!\"");
			UI_end_conversation();
			var000E = [0x092A, 0x0199, 0x0000];
			DEADEYE->si_path_run_usecode(var000E, SI_PATH_SUCCESS, DEADEYE, Func0480, false);
		}
		if (get_npc_id() == 0x0002) {
			Func097F(item, "@...before the Avatar cometh.@", 0x0000);
		}
		if (get_npc_id() == 0x0001) {
			UI_fade_palette(0x000C, 0x0001, 0x0001);
			Func097F(item, "@So little time...@", 0x0000);
			UI_play_music(0x0034, Func09A0(0x0005, 0x0001));
		}
		abort;
	}
	if (gflags[DOING_SPINEBREAKER_VISION] && ((event == SCRIPTED) && (!gflags[DID_SPINEBREAKER_VISION]))) {
		UI_ambient_light(0x0001);
		UI_set_time_palette();
		UI_fade_palette(0x000C, 0x0001, 0x0000);
		AVATAR->set_camera();
		var0004 = script Func09A0(0x0005, 0x0001) after 10 ticks {
			nohalt;
			call Func0636;
		};
		AVATAR->clear_item_flag(DONT_MOVE);
		UI_init_conversation();
		set_npc_id(0x0000);
		gflags[DID_SPINEBREAKER_VISION] = true;
		BRUNT->remove_npc();
		DEADEYE->remove_npc();
		gflags[USING_FAR_SIGHT_MAGIC] = false;
	}
	if ((event == EGG) && (var0002 == 0x001F)) {
		CINDY->show_npc_face0(0x0000);
		say("\"Ah, Avatar! Thou wert ne'er a match for me...\" *\"Soon I will have power to rival even the Guardian himself! And thou wilt be powerless, just as thou art now.\" *\"I will bury my blade deep within thine entrails, twisting it ever so slowly, enjoying each of thy pitiful screams.\" *\"Farewell, hero of Britannia. Though thou wilt beg for a quick end to thy life, I shall resist. I want to enjoy thy death...\"");
		UI_remove_npc_face0();
		Func097F(item, "@Enjoy thy death!@", 0x0002);
		var0004 = set_item_quality(0x0010);
		var0004 = script item after 35 ticks {
			nohalt;
			call Func06D9;
		};
		abort;
	}
}

extern var Func090C 0x90C (var var0000, var var0001);
extern void Func0976 0x976 (var var0000, var var0001);
extern void Func02E5 shape#(0x2E5) ();

void Func0146 shape#(0x146) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;

	if (event == PATH_SUCCESS) {
		var0000 = Func090C(AVATAR, item);
		var0001 = script AVATAR {
			face var0000;
			continue;
			actor frame bowing;
		};
		var0001 = script item after 2 ticks {
			nohalt;
			call Func02E5;
		};
	}
	if (event == SCRIPTED) {
		var0001 = AVATAR->find_nearest(0x0146, 0x000A);
		var0002 = var0001->get_object_position();
		var0002[0x0001] += 0x0001;
		var0002[0x0002] += 0x0001;
		var0001 = set_last_created();
		if (var0001) {
			if (get_item_frame() == 0x0000) {
				set_item_frame(0x0001);
			} else if (get_item_frame() < 0x0006) {
				set_item_frame(0x0000);
			}
		}
		var0001 = UI_update_last_created(var0002);
	}
	if (event == DOUBLECLICK) {
		var0003 = get_item_quality();
		var0004 = UI_click_on_item();
		if (gflags[BANES_RELEASED]) {
			if (!(var0003 == 0x0002)) {
				set_item_frame(0x000D);
				var0001 = set_item_quality(0x0004);
			}
		}
		if ((var0003 > 0x0001) && (var0003 < 0x0008)) {
			if (var0004->get_item_shape() == 0x0268) {
				var0004->set_item_shape(0x0154);
				var0004->set_item_frame(var0003 - 0x0001);
				var0001 = script var0004 after 500 ticks {
					sfx 48;
					remove;
				};
			}
		}
		UI_play_sound_effect2(0x0024, item);
		if (var0003 == 0x0001) {
			var0004->set_item_flag(ASLEEP);
		}
		if (var0003 == 0x0002) {
			var0005 = UI_die_roll(0x0001, 0x000A);
			var0006 = 0x000D - var0005;
			Func0976(var0004, var0006);
		}
		if (var0003 == 0x0003) {
			var0004->clear_item_flag(POISONED);
			var0004->clear_item_flag(PARALYZED);
			var0004->clear_item_flag(ASLEEP);
			var0004->clear_item_flag(CHARMED);
			var0004->clear_item_flag(CURSED);
		}
		if (var0003 == 0x0004) {
			var0004->set_item_flag(POISONED);
		}
		if (var0003 == 0x0005) {
			var0004->clear_item_flag(ASLEEP);
		}
		if (var0003 == 0x0006) {
			var0004->set_item_flag(PROTECTION);
		}
		if (var0003 == 0x0007) {
			UI_cause_light(0x0064);
		}
		if (var0003 == 0x0008) {
			var0004->set_item_flag(INVISIBLE);
		}
	}
}

extern var Func08BE 0x8BE (var var0000);
extern void Func08BD 0x8BD ();
extern void Func0924 0x924 (var var0000, var var0001);

void Func014A shape#(0x14A) () {
	var var0000;
	var var0001;
	var var0002;

	var0000 = get_object_position();
	var0001 = get_item_frame();
	do {
		if ((var0000[0x0001] == 0x03A7) && ((var0000[0x0002] == 0x041E) && (var0000[0x0003] == 0x0002))) {
			if ((var0001 == 0x0013) && Func08BE(0x0001)) {
				gflags[PLACED_RUNE_FIRST_I] = true;
				break;
			}
		} else if ((var0000[0x0001] == 0x03AF) && ((var0000[0x0002] == 0x041B) && (var0000[0x0003] == 0x0002))) {
			if ((var0001 == 0x0014) && Func08BE(0x0002)) {
				gflags[PLACED_RUNE_SECOND_S] = true;
				break;
			}
		} else if ((var0000[0x0001] == 0x03A9) && ((var0000[0x0002] == 0x0418) && (var0000[0x0003] == 0x0002))) {
			if ((var0001 == 0x0015) && Func08BE(0x0003)) {
				gflags[PLACED_RUNE_THIRD_C] = true;
				break;
			}
		} else if ((var0000[0x0001] == 0x03AB) && ((var0000[0x0002] == 0x0425) && (var0000[0x0003] == 0x0002))) {
			if ((var0001 == 0x0016) && Func08BE(0x0004)) {
				gflags[PLACED_RUNE_FOURTH_G] = true;
				break;
			}
		} else if ((var0000[0x0001] == 0x03B7) && ((var0000[0x0002] == 0x041F) && (var0000[0x0003] == 0x0002))) {
			if ((var0001 == 0x0013) && Func08BE(0x0005)) {
				gflags[PLACED_RUNE_FIFTH_I] = true;
				break;
			}
			gflags[PLACED_RUNE_FIFTH_I] = false;
		} else {
			abort;
		}
		Func08BD();
		UI_sprite_effect(ANIMATION_POOF, (var0000[0x0001] - 0x0002), (var0000[0x0002] - 0x0002), 0x0000, 0x0000, 0x0000, LOOP_ONCE);
		UI_play_sound_effect(0x0021);
		abort;
	} while (false);
	if (gflags[PLACED_RUNE_FIRST_I] && (gflags[PLACED_RUNE_SECOND_S] && (gflags[PLACED_RUNE_THIRD_C] && (gflags[PLACED_RUNE_FOURTH_G] && gflags[PLACED_RUNE_FIFTH_I])))) {
		var0002 = find_nearest(0x012F, 0x0014);
		if (!var0002) {
			var0002 = find_nearest(0x03A8, 0x0014);
			if (!var0002) {
				abort;
			}
		}
		UI_sprite_effect(ANIMATION_TELEPORT2, (var0000[0x0001] - 0x0002), (var0000[0x0002] - 0x0002), 0x0000, 0x0000, 0x0000, LOOP_ONCE);
		UI_play_sound_effect(0x001E);
		Func0924(var0002, SHAPE_ANY);
		Func08BD();
	} else {
		UI_sprite_effect(ANIMATION_GREEN_BUBBLES, (var0000[0x0001] - 0x0002), (var0000[0x0002] - 0x0002), 0x0000, 0x0000, 0x0000, LOOP_ONCE);
		UI_play_sound_effect(0x0046);
	}
}

void Func014E shape#(0x14E) () {
	if (event == BG_PATH_FAILURE) {
		set_polymorph(0x02D1);
	}
}

extern void Func098A 0x98A (var var0000, var var0001);

void Func0150 shape#(0x150) () {
	if ((event == DOUBLECLICK) || (event == SCRIPTED)) {
		Func098A(item, 0x0152);
	}
}

extern var Func0988 0x988 (var var0000, var var0001);
extern void Func07D1 object#(0x7D1) ();
extern var Func097D 0x97D (var var0000, var var0001, var var0002, var var0003, var var0004);
extern var Func0992 0x992 (var var0000, var var0001, var var0002, var var0003);
extern void Func097F 0x97F (var var0000, var var0001, var var0002);

void Func0151 shape#(0x151) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;
	var var0008;
	var var0009;
	var var000A;
	var var000B;
	var var000C;
	var var000D;
	var var000E;
	var var000F;
	var var0010;
	var var0011;
	var var0012;
	var var0013;
	var var0014;
	var var0015;
	var var0016;

	var0000 = get_npc_id();
	if (event == PROXIMITY) {
		if ((var0000 < 0x0001) || (var0000 > 0x0004)) {
			abort;
		}
		var0001 = find_nearby(0x0151, 0x0019, MASK_NONE);
		var0001 = Func0988(item, var0001);
		if (var0000 == 0x0001) {
			var0002 = get_temperature();
			if (var0002 < 0x001E) {
				var0002 += 0x0001;
			} else {
				var0002 = 0x0000;
				for (var0005 in var0001 with var0003 to var0004) {
					var0005->set_schedule_type(WANDER);
				}
			}
			set_temperature(var0002);
			if ((var0002 == 0x0004) || ((var0002 == 0x0008) || (var0002 == 0x000C))) {
				var0006 = false;
				for (var0005 in var0001 with var0007 to var0008) {
					if ((var0005->get_schedule_type() != PATROL) && (!var0006)) {
						var0005->set_schedule_type(PATROL);
						var0006 = true;
					}
				}
			}
			var0009 = ["@I am not sure...@", "@Death is no reward...@", "@Seek death, friends!@", "@Chaos hath no answers.@", "@Was Order wrong?@", "@I have no faith.@"];
			var000A = ["@None of us are.@", "@The Void is the reward!@", "@But we are Death.@", "@I have no questions.@", "@Imbalance was wrong.@", "@Do not despair, old friend.@"];
		}
		if (var0000 == 0x0002) {
			var0009 = ["@Chaos shall triumph!@", "@The Void is my reward.@", "@I am not a ghost.@", "@Remember the Hierophant's words.@", "@The war is never over.@", "@Still, the Great One slumbers...@"];
			var000A = ["@All is ashes.@", "@The Void is nothing.@", "@Then what are we?@", "@Empty words.@", "@Sad, but true.@", "@Hush, he listens now...@"];
		}
		if (var0000 == 0x0003) {
			var0009 = ["@A Champion shall arise...@", "@We shall be released soon.@", "@Have faith, friends.@", "@Do not doubt.@", "@Someone comes!@", "@Listen to the Void...@"];
			var000A = ["@Promises...@", "@It hath been too long!@", "@We shall try.@", "@'Tis hard to believe.@", "@I do not see...@", "@Yes, it sings to me!@"];
		}
		if (var0000 == 0x0004) {
			var0009 = ["@Kill the offenders!@", "@Chaos must triumph!@", "@There is no compromise.@", "@The battle is now!@", "@I despise Order...@", "@I am so tired!@"];
			var000A = ["@All are dead, friend.@", "@Chaos remains alone.@", "@We must agree!@", "@There are no enemies.@", "@Order is not evil, friend.@", "@We are ancient souls.@"];
		}
		var000B = UI_get_random(0x0006);
		clear_item_say();
		var000C = script item {
			nohalt;
			say var0009[var000B];
		};
		if (var0001) {
			var000D = var0001[UI_get_random(UI_get_array_size(var0001))];
			var000D->clear_item_say();
			var000C = script item after 5 ticks {
				nohalt;
				say var000A[var000B];
			};
		}
	}
	if ((event == DOUBLECLICK) && (var0000 != 0x0000)) {
		AVATAR->item_say("@Pardon me...@");
		item->Func07D1();
		if (var0000 != 0x0005) {
			var000C = script item after 0 ticks {
				nohalt;
				say "@Yesss?@";
			};
			set_schedule_type(TALK);
		} else if (!Func097D(PARTY, 0x0001, 0x02C1, 0x0000, 0x004B)) {
			var000E = find_nearby(0x02C1, 0x0019, MASK_NONE);
			var000F = false;
			for (var0012 in var000E with var0010 to var0011) {
				if (var0012->get_item_quality() == 0x004B) {
					var000F = true;
				}
			}
			if (!var000F) {
				set_schedule_type(TALK);
			} else {
				set_schedule_type(SHY);
			}
		}
	}
	if (event == STARTED_TALKING) {
		if (var0000 < 0x0005) {
			set_schedule_type(PATROL);
		} else {
			set_schedule_type(SHY);
		}
		if (var0000 == 0x0001) {
			SMITHZHORSE->show_npc_face0(0x0000);
			say("\"I can only be disturbed for a moment, as the others will miss me. We must continue our Dirge.\"");
			add(["name", "others", "Dirge"]);
		}
		if (var0000 == 0x0002) {
			SMITHZHORSE->show_npc_face0(0x0000);
			say("\"How darest thou interrupt the Ceremony! Dost thou not recognize the influence of Chaos in this place?\"");
			add(["name", "Ceremony", "Chaos"]);
		}
		if (var0000 == 0x0003) {
			SMITHZHORSE->show_npc_face0(0x0000);
			say("\"At last, a stranger! Oh, but have we met before? This existence is confusing...\"");
			add(["name", "met", "existence"]);
		}
		if (var0000 == 0x0004) {
			SMITHZHORSE->show_npc_face0(0x0000);
			say("\"Art thou a spy? Come, friends, we must kill the spy sent by the Hierophant of Order!\"");
			add(["spy", "Hierophant", "Order"]);
		}
		if (var0000 == 0x0005) {
			var0013 = get_object_position();
			var0012 = UI_create_new_object(0x02C1);
			if (var0012) {
				var0012->set_item_frame(0x0000);
				var0014 = var0012->set_item_quality(0x004B);
				var0012->clear_item_flag(TEMPORARY);
				var000C = UI_update_last_created(var0013);
			}
			var000C = script item {
				nohalt;
				say "@Oh!@";
			};
			var0015 = Func0992(0x0001, "@Look! A book...@", "@A book...@", true);
			abort;
		}
		if (var0000 == 0x0006) {
			SMITHZHORSE->show_npc_face0(0x0000);
			say("\"Canst thou not see that we are trying to help thee! Everything that we say hath meaning. Thou must vanquish the foe...\"");
			add(["help", "we?", "foe"]);
		}
		if (var0000 != 0x0000) {
			add("bye");
		}
		converse (0) {
			case "name" (remove):
				if (var0000 == 0x0001) {
					say("\"I am afraid that I have forgotten. Thou must understand, I have been dead a very long time.\"");
					say("\"Death whispers most sweetly, but my soul is not allowed to respond. I do not desire to persist in this life.\"");
					if (UI_get_random(0x0006) > 0x0003) {
labelFunc0151_0462:
						say("\"I must be going. The others are waiting...\"");
						var000C = script item after 0 ticks {
							nohalt;
							say "@Begin again!@";
						};
						abort;
					}
				}
				if (var0000 == 0x0002) {
					say("\"Quake at my words, for I am Sesyntho, Scribe to the Hierophant of Chaos! The others say that I am dead, but I am no ghost.\"");
					say("\"Canst thou not see that this is merely a time of waiting, before our ascension into the Void? So it cannot be called Death.\"");
					if (UI_get_random(0x0006) > 0x0003) {
						// I see no way other than this
						goto labelFunc0151_0462;
					}
				}
				if (var0000 == 0x0003) {
					say("\"In life, I was Sansalys, the keeper of the Library of Chaos. Alas, the books are taken, except for a few.\"");
					say("\"There is another who awaits thee there. She would aid thee, but of necessity her aid will be strange to thee.\"");
					say("\"There is a law which forbids us from directly helping thee. I know that thou art our hope, yet my tongue is ensnared! I cannot speak the truth clearly.\"");
					if (UI_get_random(0x0006) > 0x0003) {
						// I see no way other than this
						goto labelFunc0151_0462;
					}
				}
				fallthrough;

			case "others" (remove):
				say("\"There are four of us here, doomed to perform the same lines over and over 'til eternity dawns.\"");
				say("\"One was a priest, another a librarian, and the last was a soldier. I was something once, but I do not recall.\"");
				if (UI_get_random(0x0006) > 0x0003) {
					// I see no way other than this
					goto labelFunc0151_0462;
				}
				fallthrough;

			case "Dirge" (remove):
				say("\"We must mourn the fate of Chaos, for surely it hath been destroyed in this land. Order hath won.\"");
				say("\"Yet, I doubt if there can be any victory. How can Imbalance be victory? We are opposites, not enemies.\"");
				say("\"Oh, I speak blasphemy! But I cannot take back my words...\"");
				if (UI_get_random(0x0006) > 0x0003) {
					// I see no way other than this
					goto labelFunc0151_0462;
				}
				fallthrough;

			case "Ceremony" (remove):
				say("\"Stay and listen to our words, for we are performing a great Ode in honor of the Serpent of Chaos. He shall hear and reward us.\"");
				say("\"While the Great One yet slumbers, the Chaos Serpent hath the power to prevail over Order. I will have faith, unlike these others.\"");
				if (UI_get_random(0x0006) > 0x0003) {
					// I see no way other than this
					goto labelFunc0151_0462;
				}
				fallthrough;

			case "Chaos" (remove):
				say("\"Oh, the beauty of pure Chaos! 'Tis the unity of all the discordant elements of Nature, without pattern or order.\"");
				say("\"We are Chaos -- it is our belief, and we are its adherents. We are followers of the Red Serpent.\"");
				if (UI_get_random(0x0006) > 0x0003) {
					// I see no way other than this
					goto labelFunc0151_0462;
				}
				fallthrough;

			case "met" (remove):
				say("\"I am sorry, but if we have met before, I cannot recall. It seems that we live the same moments repeatedly, and the interruptions fade so quickly away.\"");
				say("\"Life as a spectral being is so tedious. Once, I was a woman in the prime of my life. Now I merely exist...\"");
				say("\"I miss the flesh! There were pains and sorrow, but it was far better than this joyless life.\"");
				if (UI_get_random(0x0006) > 0x0003) {
					// I see no way other than this
					goto labelFunc0151_0462;
				}
				fallthrough;

			case "existence" (remove):
				say("\"We are locked into this existence, ghosts endlessly reciting the same arguments, as if our doom is somehow tied to the greater cycle.\"");
				say("\"If the War of Imbalance doth finally end, if Chaos is victorious or Order doth take the win, then we shall be freed to enter the Void.\"");
				say("\"I cannot help but think that thou art connected with our fate. How, I cannot say.\"");
				if (UI_get_random(0x0006) > 0x0003) {
					// I see no way other than this
					goto labelFunc0151_0462;
				}
				fallthrough;

			case "spy" (remove):
				say("\"One sent by the Soldiers of Order, to break our wills and stop the Ode to Chaos. Why else dost thou listen so attentively?\"");
				if (!VASCULIO->get_item_flag(DEAD)) {
					say("\"I predict this: I see thee lying dead at the feet of one who prowls this labyrinth.\"");
					if (!Func097D(PARTY, 0x0001, 0x00E7, QUALITY_ANY, FRAME_ANY)) {
						say("\"Thou hast not the weapon to defeat him! His powers overwhelm thee, and thou dost die!\"");
					}
				} else {
					say("\"Thou hast slain the lurker of these depths, but others await thee! Thou shalt not prevail, stranger.\"");
				}
				if (UI_get_random(0x0006) > 0x0003) {
					// I see no way other than this
					goto labelFunc0151_0462;
				}
				fallthrough;

			case "Hierophant" (remove):
				say("\"His words were the Words of Chaos. He communed with the Serpent, and wore his armour upon his breast. He was our Serpent Father.\"");
				say("\"They have slain him, and there is none to replace him. I do not know his burial spot. I weep for him.\"");
				if (UI_get_random(0x0006) > 0x0003) {
					// I see no way other than this
					goto labelFunc0151_0462;
				}
				fallthrough;

			case "Order" (remove):
				say("\"To speak of Order is to defile my lips! They are opposite to rightfulness, they are wrongfulness, they are anathema.\"");
				say("\"I despise pattern, and disrespect all laws, and I prize mine individuality above all else!\"");
				if (UI_get_random(0x0006) > 0x0003) {
					// I see no way other than this
					goto labelFunc0151_0462;
				}
				fallthrough;

			case "help" (remove):
				say("\"I cannot... it is not permitted... words cannot be spoken...\"");
				say("\"'Tis forbidden to help thee directly, stranger. Thou must discern things for thyself.\"");
				fallthrough;

			case "we?" (remove):
				say("\"We are the Souls of Chaos, the spirits condemned to prowl these corridors until Chaos is restored.\"");
				say("\"In life, we were victims of the Soldiers of Order. I was burned alive.\"");
				fallthrough;

			case "foe" (remove):
				say("\"The intruder is thine enemy, and is not one with us. He doth not comprehend Chaos. If thou wilt listen to the others, they can aid thee.\"");
				fallthrough;

			case "bye":
				Func097F(AVATAR, "@Thanks!@", 0x0000);
				if (var0000 < 0x0005) {
					var000C = script item after 5 ticks {
						nohalt;
						say "@Begin again!@";
					};
				}
				if (var0000 == 0x0006) {
					var000C = script item after 0 ticks {
						nohalt;
						say "@Goodbye...@";
					};
					reduce_health(0x0037, NORMAL_DAMAGE);
					var0016 = get_object_position();
					var0016[0x0001] -= var0016[0x0003] / 0x0002;
					var0016[0x0002] -= var0016[0x0003] / 0x0002;
					UI_sprite_effect(ANIMATION_PURPLE_BUBBLES, var0016[0x0001], var0016[0x0002], 0x0000, 0x0000, 0x0000, LOOP_ONCE);
				}
				break;
		}
	}
}

extern var Func090C 0x90C (var var0000, var var0001);
extern void Func0950 0x950 (var var0000);

void Func0152 shape#(0x152) () {
	var var0000;
	var var0001;

	if ((event == DOUBLECLICK) || (event == SCRIPTED)) {
		set_item_shape(0x0150);
		halt_scheduled();
	}
	if (event == PATH_SUCCESS) {
		set_item_shape(0x0150);
		var0000 = Func090C(AVATAR, item);
		var0001 = script AVATAR {
			face var0000;
			continue;
			actor frame strike_2h;
			actor frame standing;
		};
	}
	if (event == READIED) {
		Func0950(item);
	}
}

extern void Func0945 0x945 (var var0000);
extern void Func0976 0x976 (var var0000, var var0001);
extern var Func0992 0x992 (var var0000, var var0001, var var0002, var var0003);
extern var Func0954 0x954 ();
extern var Func0992 0x992 (var var0000, var var0001, var var0002, var var0003);

void Func0154 shape#(0x154) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;
	var var0008;
	var var0009;
	var var000A;

	var0000 = false;
	if (event == DOUBLECLICK) {
		Func0945(item);
		var0001 = get_item_frame();
		var0002 = UI_click_on_item();
		var0003 = var0002->is_npc();
		UI_play_sound_effect2(0x0024, item);
		if (var0003) {
			UI_play_sound_effect(0x0039);
			if (var0001 == 0x0000) {
				var0002->set_item_flag(ASLEEP);
			}
			if (var0001 == 0x0001) {
				var0004 = UI_die_roll(0x0003, 0x000C);
				Func0976(var0002, var0004);
			}
			if (var0001 == 0x0002) {
				var0002->clear_item_flag(POISONED);
				var0002->clear_item_flag(PARALYZED);
				var0002->clear_item_flag(ASLEEP);
				var0002->clear_item_flag(CHARMED);
				var0002->clear_item_flag(CURSED);
			}
			if (var0001 == 0x0003) {
				var0002->set_item_flag(POISONED);
			}
			if (var0001 == 0x0004) {
				var0002->clear_item_flag(ASLEEP);
			}
			if (var0001 == 0x0005) {
				var0002->set_item_flag(PROTECTION);
			}
			if (var0001 == 0x0006) {
				UI_cause_light(0x00C8);
			}
			if (var0001 == 0x0007) {
				var0002->set_item_flag(INVISIBLE);
			}
			if (var0001 == 0x0008) {
				if (var0002 == AVATAR->get_npc_object()) {
					var0005 = AVATAR->get_npc_prop(MANA);
					var0006 = UI_get_random(0x000A);
					if ((var0005 + var0006) > 31) {
						var0006 = 31 - var0005;
					}
					var0007 = AVATAR->set_npc_prop(MANA, var0006);
				}
			}
			if (var0001 == 0x0009) {
				var0002->set_temperature(0x0000);
			}
			if (var0001 >= 0x000A) {
				var0008 = Func0992(0x0001, "@What is this!@", 0x0000, false);
				abort;
			}
			remove_item();
			abort;
		}
		var0009 = [var0002[0x0002], var0002[0x0003], var0002[0x0004]];
		var0008 = Func0992(0x0001, (("@Please, " + Func0954()) + ", waste them not!@"), 0x0000, false);
		var000A = UI_create_new_object(0x0390);
		if (var000A) {
			var000A->set_item_flag(TEMPORARY);
			var000A->set_item_frame(UI_die_roll(0x0004, 0x0017));
			var0007 = UI_update_last_created(var0009);
		}
		remove_item();
	}
}

extern void Func07D1 object#(0x7D1) ();
extern void Func097F 0x97F (var var0000, var var0001, var var0002);
extern var Func0955 0x955 ();
extern void Func0856 0x856 ();

void Func0162 shape#(0x162) () {
	var var0000;

	if (event == DOUBLECLICK) {
		AVATAR->item_say("@Ho! Goblin King!@");
		item->Func07D1();
		Func097F(item, "@What doing here?@", 0x0003);
		set_schedule_type(TALK);
	}
	if (((event == STARTED_TALKING) || (event == DEATH)) && (!get_item_flag(SI_ZOMBIE))) {
		var0000 = set_npc_prop(HEALTH, 30);
		set_item_flag(SI_ZOMBIE);
		clear_item_say();
		set_schedule_type(IN_COMBAT);
		HENCH_MAN->show_npc_face0(0x0000);
		say("\"So, brave warrior come to kill King Goblin? Ha! We speak first...\"");
		converse (["name", "goblins", "Helm of Monitor", "Simon", "bye"]) {
			case "name" (remove):
				say("\"Me Pomdirgun, Warlord and King of all Goblins. Mine shall be last name thou wilt ever hear.\"");
				fallthrough;

			case "goblins" (remove):
				say("\"Once land where Monitor built was Goblin land. Then Men come and take it. So now we kill them.\"");
				add("Men");
				fallthrough;

			case "Men" (remove):
				say("\"One day we kill all Men. Today we kill thee. Ha! Then eat thee for supper! Mmm... Tasty!\"");
				fallthrough;

			case "Helm of Monitor" (remove):
				say("\"So! Simon told thee I had it. It is mine and I will keep it!\"");
				fallthrough;

			case "Simon" (remove):
				say("\"Thou knowest Simon's secret? Doth all of Monitor know?\"");
				if (Func0955()) {
					say("\"Then Simon dead. Was good spy. Didst thou eat him?\"");
					if (Func0955()) {
						say("\"Eagh! Thou dost disgust me.\"");
						Func0856();
					} else {
						say("\"Simon would not taste very good anyway. I will kill thee now.\"");
						Func0856();
					}
				} else if (gflags[HAVE_WOLF_TATTOO]) {
					say("\"Then thou must die to keep his secret!\"");
					Func0856();
				} else {
					say("\"Why thou knowest that?\"");
					Func0856();
				}
				fallthrough;

			case "bye":
				item_say("@I will kill thee now!@");
				Func0856();
		}
	}
	if ((event == DEATH) && get_item_flag(SI_ZOMBIE)) {
		clear_item_flag(SI_TOURNAMENT);
		Func097F(item, "@Thou hast slain me...@", 0x0000);
		reduce_health(0x0037, NORMAL_DAMAGE);
	}
}

extern var Func0994 0x994 ();
extern void Func097F 0x97F (var var0000, var var0001, var var0002);
extern var Func09A0 0x9A0 (var var0000, var var0001);

void Func016B shape#(0x16B) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;

	if ((event == PROXIMITY) && (Func0994() == 0x000E)) {
		clear_item_say();
		var0000 = ["@I want an eyeball!@", "@Yes, mistress!@", "@We must hurry!@", "@Break his bones...@", "@I cannot wait!@", "@Skin him alive!@"];
		Func097F(item, var0000[UI_get_random(UI_get_array_size(var0000))], 0x0000);
		if (UI_get_random(0x000A) == 0x0001) {
			set_schedule_type(DANCE);
		}
	}
	if (event == SCRIPTED) {
		var0001 = find_nearby(0x016B, 0x001E, MASK_NONE);
		if (var0001) {
			var0002 = script Func09A0(0x0005, 0x0001) after UI_get_random(0x0014) ticks {
				nohalt;
				call Func016B;
			};
			var0003 = var0001->get_object_position();
			UI_sprite_effect(ANIMATION_SMALL_RING_BLAST, (var0003[0x0001] - 0x0001), (var0003[0x0002] - 0x0003), 0x0000, 0x0000, 0x0000, LOOP_ONCE);
			var0001->kill_npc();
		}
	}
}

extern var Func0953 0x953 ();
extern void Func0922 0x922 (var var0000);
extern var Func09A0 0x9A0 (var var0000, var var0001);
extern var Func097D 0x97D (var var0000, var var0001, var var0002, var var0003, var var0004);
extern var Func0955 0x955 ();

void Func0175 shape#(0x175) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;

	var0000 = Func0953();
	if (event == SCRIPTED) {
		var0001 = get_object_position();
		if (get_npc_id() == 0x0000) {
			Func0922(0x0001);
			set_npc_id(0x0001);
			var0002 = script item after 8 ticks {
				nohalt;
				say "@Farewell...@";
				actor frame cast_up;
				actor frame cast_out;
				wait 2;
				call Func0175;
				call Func07D2;
				actor frame bowing;
				actor frame kneeling;
				actor frame sleeping;
			};
		} else if (get_npc_id() == 0x000C) {
			var0003 = UI_create_new_object(0x037F);
			if (var0003) {
				var0002 = UI_update_last_created(var0001);
			}
			var0003 = UI_create_new_object(0x0231);
			if (var0003) {
				var0002 = UI_update_last_created(var0001);
			}
			remove_item();
			AVATAR->clear_item_flag(DONT_MOVE);
			UI_init_conversation();
			abort;
		} else {
			UI_sprite_effect(ANIMATION_FIREWORKS, (var0001[0x0001] + get_npc_id()), (var0001[0x0002] - get_npc_id()), 0x0000, 0x0000, get_npc_id(), LOOP_ONCE);
			set_npc_id(get_npc_id() + 0x0001);
			var0002 = script item {
				nohalt;
				call Func0175;
			};
			abort;
		}
	}
	if (event == STARTED_TALKING) {
		UI_play_music(0x0032, Func09A0(0x0005, 0x0001));
		YEARL->show_npc_face0(0x0000);
		gflags[TALKED_TO_GREAT_HIEROPHANT] = true;
		say("\"At last, I am awakened from the slumber of death. I know thee, for the Great Earth Serpent hath whispered to me of thee. Welcome, noble Avatar! Thou hast arrived on the very brink of disaster. It is up to thee to restore the land to its needful Balance.\"");
		if (Func097D(PARTY, 0x0001, 0x0280, QUALITY_ANY, 0x0000) && (Func097D(PARTY, 0x0001, 0x027E, QUALITY_ANY, 0x0000) && Func097D(PARTY, 0x0001, 0x03EC, QUALITY_ANY, 0x0002))) {
			say("\"I see that thou art equipped with the Serpent Staff, the Serpent Armour and the Serpent Crown.\" *\"Now I must tell thee what must be done...\"");
		} else {
			say("\"But first, thou must arm thyself with the symbols of my authority --\"");
			say("\"the Staff, Armour, and Crown of the Great Earth Serpent.\"");
			add(["Staff", "Armour", "Crown"]);
		}
		converse (["Great Earth Serpent", "quest", "bye"]) {
			case "Great Earth Serpent" (remove):
				say("\"Dost thou not recognize Him? 'Twas he whom thou didst free from the tyranny of Exodus, in thine adventurings of long, long ago. It is he who speaks to thee now, in his whisperings from the deeps.\"");
				say("\"It was the Great Serpent who maintained Balance in the land, but when Exodus stole him, the Serpents of Chaos and Order were left unto themselves.\"");
				say("\"Thus came the War of Imbalance, and when the Great Earth Serpent did return, it was too late! Order had won, and Chaos was divided into the crippled Banes!\"");
				fallthrough;

			case "Staff" (remove):
				if (Func097D(PARTY, 0x0001, 0x0280, QUALITY_ANY, 0x0000)) {
					say("\"Good. Thou hast my Serpent Staff... It was both a support and a weapon to smite those who would unseat the delicate balance.\"");
					say("\"Alas, it did me little good in the end...\"");
				} else {
					say("\"Thou dost not have my Serpent Staff... Thou must travel to the fiery depths to find where it now lies.\"");
					gflags[CLUE_SERPENT_STAFF_FURNACE] = true;
				}
				fallthrough;

			case "Armour" (remove):
				if (Func097D(PARTY, 0x0001, 0x027E, QUALITY_ANY, 0x0000)) {
					say("\"Thou dost possess the Serpent Armour... fine, fine. It is more than a symbol of the Great Earth Serpent's power.\"");
					say("\"The Serpent Armour wilt help thee to surmount the final challenges at the Grand Shrine of balance. Unfortunately, it proved to be little protection against treachery...\"");
				} else {
					say("\"Before thou canst complete thy quest, thou must have the Serpent Armour. Thou must ease the troubled heart of Love before thou canst hope to obtain it. She was once Beauty herself, but Chaos hath painted her with ugliness...\"");
				}
				fallthrough;

			case "Crown" (remove):
				if (Func097D(PARTY, 0x0001, 0x03EC, QUALITY_ANY, 0x0002)) {
					say("\"I see that thou dost possess my Serpent Crown. Well done! This is the crown my people set upon mine head, recognizing the power of the Great Earth Serpent through me.\" *\"Though I had no wish for crowns, it will aid thee in restoring the land's balance.\"");
				} else {
					say("\"Seek out the resting place of the Serpent Crown... Without the symbol of the Great Earth Serpent's power in the land, thou canst not hope to complete thy quest.\"");
					say("\"Thou didst know he who held this treasure, but he hath been killed by the Banes of Chaos. Yet he left clues which shall show thee the way...\"");
				}
				fallthrough;

			case "quest" (remove):
				say("\"Be warned, ",
					var0000,
					". None but thou can prevail against the Imbalance. And time grows short...\"");
				say("\"Alas, I must give thee bitter news! Before thou canst restore Balance, thou must reunite the Chaos Serpent.\"");
				say("\"I grieve that I cannot tell thee how this is done... Such knowledge was for the Chaos Hierophant only.\"");
				add(["Chaos Hierophant", "Chaos Serpent", "Balance"]);
				fallthrough;

			case "Chaos Hierophant" (remove):
				say("\"As with me, thou must wrest him from his last slumber to reveal his truths to thee... but alas, he was killed in the War, and I know not where his remains lie.\"");
				say("\"Yet I must hope that thou shalt find his burial site... or all is lost.\"");
				fallthrough;

			case "Chaos Serpent" (remove):
				say("\"Hear wisdom! The Banes of Chaos are not thine enemy, nor are they evil in themselves. It is their disunity which hath driven them into cruel insanity.\"");
				say("\"Before the land can again live in Balance, the Banes must once more become the Chaos Serpent, united and intelligent.\"");
				say("\"The way to do this is the secret held by the Chaos Hierophant. Now thou must seek him out!\"");
				fallthrough;

			case "Balance" (remove):
				say("\"If by some miracle thou art able to make the Chaos Serpent whole, then hasten to the Grand Shrine of Balance. Only there canst thou complete thy work, and end the plagues which afflict this land.\"");
				say("\"Remember to bear each of the symbols of power upon thy person, or thou shalt not enter the most sacred precincts therein.\"");
				fallthrough;

			case "bye":
				say("\"Do not be hasty, Avatar! I can only speak to thee this once! Art thou sure that thou dost understand all that I have said?\"");
				if (Func0955()) {
					UI_play_music(0x0032, Func09A0(0x0005, 0x0001));
					say("\"I must go now -- into the Void! My blessings are given to thee, Hero from Another World!\"");
					AVATAR->set_item_flag(DONT_MOVE);
					UI_end_conversation();
					set_schedule_type(WAIT);
					var0002 = script item after 8 ticks {
						nohalt;
						actor frame cast_up;
						actor frame cast_out;
						say "@Hail to Balance!@";
						wait 7;
						call Func0175;
					};
					abort;
				}
				say("\"Then ask of me once more.\"");
				add(["Crown", "Armour", "Staff", "quest", "Chaos Hierophant", "Chaos Serpent", "Balance", "bye"]);

		}
	}
}

extern var Func0906 0x906 (var var0000);
extern var Func0908 0x908 (var var0000, var var0001, var var0002, var var0003, var var0004, var var0005);
extern void Func0909 0x909 (var var0000, var var0001, var var0002, var var0003, var var0004, var var0005, var var0006, var var0007, var var0008);
extern void Func0903 0x903 ();
extern void Func0907 0x907 (var var0000, var var0001);
extern void Func0904 0x904 (var var0000);
extern void Func0905 0x905 (var var0000);
extern void Func09A5 0x9A5 ();
extern var Func09A0 0x9A0 (var var0000, var var0001);
extern void Func097F 0x97F (var var0000, var var0001, var var0002);
extern void Func07F6 object#(0x7F6) ();
extern void Func07DF object#(0x7DF) ();

void Func0178 shape#(0x178) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;

	if ((event != DOUBLECLICK) && (event != SCRIPTED)) {
		return;
	}
	var0000 = get_item_quality();
	var0001 = Func0906(item);
	if (var0001 == 0x0001) {
		if (Func0908(item, 0x010E, 0x0000,  0,  0, 0x0007)) {
			Func0909(item, 0x01B1, 0x0001, 0x0002, 0x01B0, 0x0000,  3,  0, 0x0001);
			UI_play_sound_effect2(0x001F, item);
		} else {
			Func0903();
		}
	}
	if (var0001 == 0x0000) {
		if (Func0908(item, 0x010E, 0x0001,  0,  0, 0x0007)) {
			Func0909(item, 0x01B1, 0x0000, 0x0001, 0x01B0, 0x0001,  0, -3, 0x0007);
			UI_play_sound_effect2(0x0020, item);
		} else {
			Func0903();
		}
	}
	if (var0001 == 0x0002) {
		if ((var0000 == 0x0006) || (var0000 == 0x0007)) {
			var0002 = get_object_position();
			UI_sprite_effect(ANIMATION_FIREWORKS, var0002[0x0001], (var0002[0x0002] - 0x0002), 0x0000, 0x0000, 0x0000, LOOP_ONCE);
			Func0907(item, 0x0000);
			var0003 = script item {
				nohalt;
				call Func0178;
			};
			abort;
		}
		Func0904(item);
	}
	if (var0001 == 0x0003) {
		Func0905(item);
	}
	var0004 = get_object_position();
	if ((var0004[0x0001] == 0x091F) && ((var0004[0x0002] == 0x0559) && (var0004[0x0003] == 0x0000))) {
		if (get_item_frame() == 0x000D) {
			UI_close_gumps();
			var0005 = script AVATAR {
				wait 1;
				call Func07DF;
			};
		}
	}
	if (var0000 == 0x00DC) {
		Func09A5();
		abort;
	}
	if ((var0000 == 0x0006) || (var0000 == 0x0007)) {
		if (var0000 == 0x0006) {
			var0006 =  3;
		} else {
			var0006 = -3;
			UI_play_music(0x0018, Func09A0(0x0005, 0x0001));
		}
		var0007 = get_distance(AVATAR);
		AVATAR->set_item_flag(DONT_MOVE);
		var0004[0x0001] += var0006;
		var0004[0x0002] -= 3;
		AVATAR->si_path_run_usecode(var0004, PATH_SUCCESS, item, Func07F6, true);
		UI_play_sound_effect(0x0039);
		var0003 = script item after (var0007 + 0x0002) ticks {
			nohalt;
			call Func07F6;
		};
		Func097F(AVATAR, "@Can't stop myself...@", 0x0002);
	}
}

extern void Func08AD 0x8AD (var var0000, var var0001, var var0002, var var0003);

void Func0179 shape#(0x179) () {
	var var0000;
	var var0001;
	var var0002;

	var0000 = [0x0004, 0x0006, 0x0002, 0x0005, 0x0006, 0x0006, 0x0001, 0x000C, 0x0018, 0x0010, 0x0018, 0x0018, 0x0004, 0x0008, 0x0010, 0x000A, 0x0002, 0x0003, 0x0002, 0x0001, 0x0004, 0x0003, 0x0001, 0x0018, 0x0003, 0x0001, 0x0009, 0x0002, 0x0014, 0x0008, 0x0006, 0x001F];
	var0001 = var0000[(get_item_frame() + 0x0001)];
	var0002 = UI_click_on_item();
	Func08AD(item, var0001, 0x0026, var0002);
}

extern var Func0953 0x953 ();

void Func017B shape#(0x17B) () {
	var var0000;
	var var0001;

	if (event != DOUBLECLICK) {
		return;
	}
	var0000 = Func0953();
	var0001 = get_item_quality();
	if (var0001 > 0x0096) {
		UI_display_runes(0x002C, ["REPORT", "THIS", "SIGN"]);
	} else if (var0001 == 0x000C) {
		UI_display_runes(0x002C, ["house", "of", "wares"]);
	} else if (var0001 == 0x0011) {
		UI_display_runes(0x002C, ["bakery"]);
	} else if (var0001 == 0x0012) {
		UI_display_runes(0x002C, ["jeweler"]);
	} else if (var0001 == 0x0013) {
		UI_display_runes(0x002C, ["farmers'", "market"]);
	} else if (var0001 == 0x0014) {
		UI_display_runes(0x002C, ["apo\{th}ecary"]);
	} else if (var0001 == 0x0015) {
		UI_display_runes(0x002C, ["royal", "mint"]);
	} else if (var0001 == 0x0016) {
		UI_display_runes(0x002C, ["csil", "\{th}e", "h\{ea}ler"]);
	} else if (var0001 == 0x0017) {
		UI_display_runes(0x002C, ["provisions"]);
	} else if (var0001 == 0x0018) {
		UI_display_runes(0x002C, ["to", "sl\{ee}pi\{ng}", "bull"]);
	} else if (var0001 == 0x002C) {
		UI_display_runes(0x002C, ["go\{dot}\{th}is\{dot}way"]);
	} else if (var0001 == 0x002D) {
		UI_display_runes(0x002C, "DO NOT GO THIS WAY");
	} else if (var0001 == 0x002E) {
		UI_display_runes(0x002C, "DO NOT GO IN THE WOODEN DOOR");
	} else if (var0001 == 0x002F) {
		UI_display_runes(0x002C, "DO NOT GO IN THE WINDOWED DOOR");
	} else if (var0001 == 0x0030) {
		UI_display_runes(0x002C, "GO IN THE STEEL DOOR");
	} else if (var0001 == 0x0031) {
		UI_display_runes(0x002C, "DO NOT GO IN THE GREEN DOOR");
	} else if (var0001 == 0x0032) {
		UI_display_runes(0x002C, "ONLY ONE OF THESE SIGNS IS TRUE");
	} else if (var0001 == 0x0033) {
		UI_display_runes(0x002C, "AT LEAST TWO SIGNS ARE FALSE");
	} else if (var0001 == 0x003D) {
		UI_display_runes(0x002C, ["we\{st}\{dot}gate", "\{st}r\{ee}t"]);
	} else if (var0001 == 0x003E) {
		UI_display_runes(0x002C, ["nor\{th}\{dot}gate", "\{st}r\{ee}t"]);
	} else if (var0001 == 0x003F) {
		UI_display_runes(0x002C, ["pikeman's", "road"]);
	} else if (var0001 == 0x0040) {
		UI_display_runes(0x002C, ["kosric", "road"]);
	} else if (var0001 == 0x0041) {
		UI_display_runes(0x002C, ["pedigar", "\{st}r\{ee}t"]);
	} else if (var0001 == 0x0042) {
		UI_display_runes(0x002C, ["roland", "\{st}r\{ee}t"]);
	} else if (var0001 == 0x0043) {
		UI_display_runes(0x002C, ["town\{dot}hall", "road"]);
	} else if (var0001 == 0x0044) {
		UI_display_runes(0x002C, ["melina", "\{st}r\{ee}t"]);
	} else if (var0001 == 0x0045) {
		UI_display_runes(0x002C, ["wolf", "\{st}r\{ee}t"]);
	} else if (var0001 == 0x0046) {
		UI_display_runes(0x002C, ["leopard", "\{st}r\{ee}t"]);
	} else if (var0001 == 0x0047) {
		UI_display_runes(0x002C, ["b\{ea}r", "\{st}r\{ee}t"]);
	} else if (var0001 == 0x0048) {
		UI_display_runes(0x002C, ["dock", "\{st}r\{ee}t"]);
	} else if (var0001 == 0x0071) {
		UI_display_runes(0x002C, ["banquet", "\{st}r\{ee}t"]);
	} else if (var0001 == 0x0072) {
		UI_display_runes(0x002C, ["warriors'", "road"]);
	} else if (var0001 == 0x0049) {
		UI_display_runes(0x002C, ["undertaker"]);
	} else if (var0001 == 0x004B) {
		UI_display_runes(0x002C, ["prison"]);
	} else if (var0001 == 0x004D) {
		UI_display_runes(0x002C, ["armoury"]);
	} else if (var0001 == 0x004E) {
		UI_display_runes(0x002C, ["blacksmi\{th}"]);
	} else if (var0001 == 0x004F) {
		UI_display_runes(0x002C, ["recr\{ea}tion", "center"]);
	} else if (var0001 == 0x0050) {
		UI_display_runes(0x002C, ["hall", "of", "knowledge"]);
	} else if (var0001 == 0x0051) {
		UI_display_runes(0x002C, ["hello", "\{th}ere", "avatar"]);
	} else if (var0001 == 0x0052) {
		UI_display_runes(0x002C, ["to fawn"]);
	} else if (var0001 == 0x0055) {
		UI_display_runes(0x002C, ["paladin's", "pa\{th}"]);
	} else if (var0001 == 0x0057) {
		UI_display_runes(0x002C, ["widow's", "walk"]);
	} else if (var0001 == 0x0058) {
		UI_display_runes(0x002C, ["harold's", "hallway"]);
	} else if (var0001 == 0x0059) {
		UI_display_runes(0x002C, ["fool's\{dot}way"]);
	} else if (var0001 == 0x005A) {
		UI_display_runes(0x002C, ["whitsaber", "road"]);
	} else if (var0001 == 0x005B) {
		UI_display_runes(0x002C, ["\{st}rand"]);
	} else if (var0001 == 0x005C) {
		UI_display_runes(0x002C, ["chalice", "avenue"]);
	} else if (var0001 == 0x005D) {
		UI_display_runes(0x002C, ["two", "coves"]);
	} else if (var0001 == 0x005E) {
		UI_display_runes(0x002C, ["we\{st}", "wall", "road"]);
	} else if (var0001 == 0x005F) {
		UI_display_runes(0x002C, ["\{ea}\{st}", "wall", "road"]);
	} else if (var0001 == 0x0060) {
		UI_display_runes(0x002C, ["nor\{th}", "wall", "road"]);
	} else if (var0001 == 0x0061) {
		UI_display_runes(0x002C, ["sou\{th}", "wall", "road"]);
	} else if (var0001 == 0x0062) {
		UI_display_runes(0x002C, ["heroes'", "way"]);
	} else if (var0001 == 0x0069) {
		UI_display_runes(0x002C, ["arti\{st}s'", "guild"]);
	} else if (var0001 == 0x006A) {
		UI_display_runes(0x002C, ["\{th}e\{dot}bunk", "and", "\{st}ool"]);
	} else if (var0001 == 0x006B) {
		UI_display_runes(0x002C, ["\{th}e", "library", "of", "scars"]);
	} else if (var0001 == 0x006C) {
		UI_display_runes(0x002C, ["carlyn's", "clo\{th}es"]);
	} else if (var0001 == 0x006D) {
		UI_display_runes(0x002C, ["wi\{th}in\{dot}\{th}ese", "walls", "lies\{dot}ma\{st}er", "richard"]);
	} else if (var0001 == 0x006E) {
		UI_display_runes(0x002C, ["ca\{st}le\{dot}way"]);
	} else if (var0001 == 0x006F) {
		UI_display_runes(0x002C, ["lord", "british", "lane"]);
	} else if (var0001 == 0x0070) {
		UI_display_runes(0x002C, ["noble\{dot}road"]);
	} else if (var0001 == 0x0073) {
		UI_display_runes(0x002C, ["knight's", "te\{st}"]);
	} else if (var0001 == 0x007A) {
		UI_display_runes(0x002C, ["swamp", "ca\{th}edral"]);
	} else if (var0001 == 0x007B) {
		UI_display_runes(0x002C, ["k\{ee}p", "out"]);
	} else if (var0001 == 0x007C) {
		UI_display_runes(0x002C, ["explodi\{ng}", "powder", "maker"]);
	} else if (var0001 == 0x007D) {
		UI_display_runes(0x002C, ["form", "one", "line"]);
	} else if (var0001 == 0x007E) {
		UI_display_runes(0x002C, ["present", "gold", "for", "food"]);
	} else if (var0001 == 0x007F) {
		UI_display_runes(0x002C, ["excha\{ng}e", "gold", "for", "potions"]);
	} else if (var0001 == 0x0080) {
		UI_display_runes(0x002C, ["trade", "gold", "for", "necessities"]);
	} else if (var0001 == 0x0081) {
		UI_display_runes(0x002C, ["watch", "\{th}y", "h\{ea}d"]);
	} else if (var0001 == 0x0082) {
		UI_display_runes(0x002C, ["escape", "is", "impossible"]);
	} else if (var0001 == 0x0083) {
		UI_display_runes(0x002C, ["turn", "back\{dot}now"]);
	} else if (var0001 == 0x0084) {
		UI_display_runes(0x002C, ["wro\{ng}", "way"]);
	} else if (var0001 == 0x0085) {
		UI_display_runes(0x002C, ["sure", "d\{ea}\{th}"]);
	} else if (var0001 == 0x0086) {
		UI_display_runes(0x002C, ["welcome", "to", "hamlinberg"]);
	} else if (var0001 == 0x0087) {
		UI_display_runes(0x002C, ["hazard's", "lodge"]);
	} else if (var0001 == 0x0088) {
		UI_display_runes(0x002C, ["l\{ea}ve", "animals", "down\{st}airs"]);
	} else if (var0001 == 0x0089) {
		UI_display_runes(0x002C, ["dispose", "of\{dot}blood", "and\{dot}parts", "outside"]);
	} else if (var0001 == 0x008A) {
		UI_display_runes(0x002C, ["beware", "of", "water", "cr\{ea}tures"]);
	} else if (var0001 == 0x008B) {
		UI_display_runes(0x002C, ["\{th}ou", "art", "lo\{st}"]);
	} else if (var0001 == 0x008C) {
		UI_display_runes(0x002C, ["\{dot}wadley\{dot}", "his\{dot}soul", "d\{ee}per\{dot}\{th}an", "his\{dot}body"]);
	} else if (var0001 == 0x008D) {
		UI_display_runes(0x002C, ["here\{dot}lies", "jenna", "kindred", "spirit"]);
	} else if (var0001 == 0x008E) {
		UI_display_runes(0x002C, ["d\{ea}d", "end"]);
	} else if (var0001 == 0x008F) {
		UI_display_runes(0x002C, ["to", "skara", "brae"]);
	} else if (var0001 == 0x0090) {
		UI_display_runes(0x002C, ["THE", "THRONE", "OF THE", "GUARDIAN"]);
	} else if (var0001 == 0x0091) {
		UI_display_runes(0x002C, ["nor\{th}", "to", "britain"]);
	} else if (var0001 == 0x0092) {
		UI_display_runes(0x002C, ["pull", "lever"]);
	} else if (var0001 == 0x0093) {
		UI_display_runes(0x002C, ["round", "and", "round"]);
	} else if (var0001 == 0x0094) {
		UI_display_runes(0x002C, ["way", "out"]);
	} else if (var0001 == 0x0095) {
		UI_display_runes(0x002C, ["k\{ee}p", "doors", "open"]);
	} else if (var0001 == 0x0096) {
		UI_display_runes(0x002C, ["selwyn's", "tower"]);
	}
}

extern var Func0953 0x953 ();
extern var Func09A0 0x9A0 (var var0000, var var0001);
extern var Func0954 0x954 ();
extern void Func097F 0x97F (var var0000, var var0001, var var0002);
extern var Func0956 0x956 (var var0000);
extern var Func089D 0x89D (var var0000);
extern void Func0636 object#(0x636) ();

void Func017D shape#(0x17D) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;
	var var0008;
	var var0009;
	var var000A;
	var var000B;
	var var000C;
	var var000D;
	var var000E;
	var var000F;
	var var0010;

	var0000 = Func0953();
	if ((event == SI_PATH_SUCCESS) || (event == SI_PATH_FAILURE)) {
		set_schedule_type(IN_COMBAT);
	}
	if (event == DEATH) {
		var0001 = get_object_position();
		if (var0001[0x0003] > 0x0000) {
			var0001[0x0001] -= 0x0001;
			var0001[0x0002] -= 0x0001;
			var0001[0x0003] -= 0x0002;
		}
		UI_sprite_effect(ANIMATION_TELEPORT, (var0001[0x0001] - 0x0001), (var0001[0x0002] - 0x0001), 0x0000, 0x0000, 0x0000, LOOP_ONCE);
		set_polymorph(0x017D);
		clear_item_flag(SI_TOURNAMENT);
		kill_npc();
	}
	if (event == BG_PATH_FAILURE) {
		var0002 = AVATAR->find_nearby(0x017D, 0x001E, MASK_NPC2);
		if (var0002) {
			var0002->set_polymorph(0x01CC);
		}
	}
	var0003 = get_npc_id();
	if (var0003 == 0x0000) {
		set_npc_id(UI_get_random(0x0004) + 0x0002);
		var0003 = get_npc_id();
	}
	if (var0003 == 0x0007) {
		HOUND_OF_DOSKAR->show_npc_face0(0x0000);
		say("\"Thou art a dog, to have brutalized an innocent townsperson. Thy place is behind stout iron bars!!!\"");
		UI_fade_palette(0x000C, 0x0001, 0x0000);
		AVATAR->move_object([0x03DC, 0x0625, 0x0000]);
		var0004 = script Func09A0(0x0005, 0x0001) after 30 ticks {
			nohalt;
			call Func0636;
		};
	}
	if (var0003 == 0x0001) {
		var0005 = Func0954();
		var0006 = UI_is_pc_female();
		var0007 = Func0953();
		if (event == SCRIPTED) {
			Func097F(item, "@Stand and be recognized, stranger!@", 0x0005);
			set_schedule_type(TALK);
		}
		if (event == DOUBLECLICK) {
			Func097F(item, "@Stand and be recognized, stranger!@", 0x0005);
			set_schedule_type(TALK);
		}
		if (event == STARTED_TALKING) {
			set_schedule_type(STANDTHERE);
			clear_item_say();
			HOUND_OF_DOSKAR->show_npc_face0(0x0000);
			if (gflags[FIRST_FAWN_GUARD_ENCOUNTER] == true) {
				if (gflags[FIRST_RUGGS_ENCOUNTER] == false) {
					var0008 = RUGGS->get_schedule_type();
					if (var0008 != TALK) {
						say("\"There hath been trouble of late here in Fawn...\"");
						say("\"...And here comes part of it now.\"");
						var0009 = get_object_position();
						var0009[0x0002] += 0x0014;
						RUGGS->move_object([var0009[0x0001], var0009[0x0002], 0x0000]);
						AVATAR->set_item_flag(DONT_MOVE);
						RUGGS->set_schedule_type(TALK);
						RUGGS->set_new_schedules([MIDNIGHT], [TALK], [var0009[0x0001], var0009[0x0002]]);
						abort;
					}
				} else {
					say("\"Be careful of that one. He is nothing but trouble.\"");
					say("\"Thou must state thy name and business, before thou canst pass, ",
						var0005,
						".\"");
					var000A = Func0956([("I am " + var0000), "I am the Avatar.", "It is not thy business."]);
					if (var000A == ("I am " + var0000)) {
						say("\"Pleased to meet thee, ",
							var0007,
							". What is thy business here in Fawn?\"");
						add(["I am merely visiting.", "I am missing a companion.", "It is not thy business."]);
					}
					if (var000A == "I am the Avatar.") {
						say("\"And I am the Lady of Fawn! Thou wilt not go far with such here, stranger.\" *\"What is thy business here in Fawn?\"");
						add(["I am merely visiting.", "I am missing a companion.", "It is not thy business."]);
					}
					if (var000A == "It is not thy business.") {
						say("\"If thou wilt not tell me thy name and business, thou canst not enter the city. Come back when thou art feeling more talkative.\"");
						abort;
					}
				}
			} else {
				say("\"Thou shouldst avoid trouble whilst thou art here.\"");
				if (UI_find_nearby_avatar(0x0203)) {
					add(["duty", "pass"]);
				} else {
					add(["duty", "bye"]);
				}
			}
			converse (0) {
				case "I am merely visiting.":
					say("\"Welcome to Fawn, then! Keep away from trouble whilst thou art here.\" *\"We have enough to worry about, what with storms, goblins, and Fellowship troublemakers.\"");
					gflags[FIRST_FAWN_GUARD_ENCOUNTER] = false;
					remove(["I am merely visiting.", "I am missing a companion.", "It is not thy business."]);
					add(["storms", "goblins", "Fellowship troublemakers", "pass"]);
					fallthrough;

				case "storms":
					say("\"They start without warning, ",
						var0005,
						". So do not stray too far from shelter.\" *\"Be warned, we have orders to close the gate during a storm. So if thou art caught outside of the gate, thine only choice is the traveller's shelter.\"");
					remove("storms");
					fallthrough;

				case "goblins":
					if (gflags[CLEARED_FAWN_TOWER] == false) {
						say("\"Now that those savages have overtaken the Pikeman tower, the gates must be closed at night. We cannot open them for anyone until morning. So have a care if thou dost venture outside near dark.\"");
					} else {
						say("\"If those foul savages would dare attack the Pikemen, we cannot leave the gates open at night. Fawn's gates are now closed at night. They cannot be opened for anyone until morning.\" *\"So have a care if thou dost venture outside near dark.\"");
					}
					remove("goblins");
					fallthrough;

				case "Fellowship troublemakers":
					say("\"I should not have said that, ",
						var0005,
						".\" ~\"Be assured that the Captain is quick with the Wand of Detainment.\"");
					remove("Fellowship troublemakers");
					add("Wand of Detainment");
					fallthrough;

				case "duty":
					say("\"I am a Fawn Guardsman! Thou wouldst do well to stay out of mischief while visiting our city!\"");
					remove("duty");
					fallthrough;

				case "Wand of Detainment":
					say("\"The Wand of Detainment is a fine gift from the people of Moonshade. With the Wand, the Captain can capture any criminal.\" *\"Keep that in mind if thou shouldst feel mischievous...\"");
					remove("Wand of Detainment");
					fallthrough;

				case "I am missing a companion.":
					say("\"Thou shouldst try inquiring at The Broken Oar. Keep away from trouble whilst thou art here.\" *\"We have enough to worry about, what with storms, goblins, and Fellowship troublemakers.\"");
					gflags[FIRST_FAWN_GUARD_ENCOUNTER] = false;
					remove(["I am merely visiting.", "I am missing a companion.", "It is not thy business."]);
					add(["The Broken Oar", "storms", "goblins", "Fellowship troublemakers", "pass"]);
					fallthrough;

				case "The Broken Oar":
					say("\"The Broken Oar is a tavern. It is the only establishment in Fawn that offers rooms to rent.\" *\"Most strangers stay there.\"");
					remove("The Broken Oar");
					fallthrough;

				case "It is not thy business.":
					say("\"If thou wilt not tell me thy name and business, thou canst not enter the city. Come back when thou art feeling more talkative.\"");
					abort;

				case "pass":
					UI_remove_npc_face0();
					Func097F(item, (("@Pass through, " + var0005) + ".@"), 0x0000);
					gflags[FIRST_FAWN_GUARD_ENCOUNTER] = false;
					var000B = UI_find_nearby_avatar(0x0203);
					var0004 = Func089D(var000B);
					// I see no way other than this
					goto labelFunc017D_095E;

				case "bye":
					UI_remove_npc_face0();
					Func097F(item, (("@Pass through, " + var0005) + ".@"), 0x0005);
					gflags[FIRST_FAWN_GUARD_ENCOUNTER] = false;
					var000B = UI_find_nearby_avatar(0x0203);
					var0004 = Func089D(var000B);
					// I see no way other than this
					goto labelFunc017D_095E;
			}
		}
	}
	if (var0003 == 0x0002) {
		var0005 = Func0954();
		var0006 = UI_is_pc_female();
		var0007 = Func0953();
		if ((event == PROXIMITY) && (get_schedule_type() == HOUND)) {
			if (UI_get_random(0x000A) < 0x0006) {
				abort;
			}
			var000C = ["@A tattooed woman!@", "@I'll show thee mine...@", "@A painted lady!@", "@Want a good time?@", "@I'll protect thee.@", "@Buy thee a drink?@"];
			Func097F(item, var000C[UI_get_random(0x0006)], 0x0000);
		}
		if (event == DOUBLECLICK) {
			AVATAR->item_say("@Thou... guard!@");
			Func097F(item, (("@Yes, " + var0005) + "?@"), 0x0005);
			set_schedule_type(TALK);
		}
		if (event == STARTED_TALKING) {
			set_schedule_type(STANDTHERE);
			clear_item_say();
			HOUND_OF_DOSKAR->show_npc_face0(0x0000);
			var000D = UI_die_roll(0x0001, 0x0004);
			if (var000D == 0x0001) {
				say("\"Thou shouldst address me by rank while I am on duty, ",
					var0005,
					". I am a Private in Fawn's Guard.\" *\"Dost thou require some assistance?\"");
				var000E = "Private";
				add(["Why art thou following me?", "Stop following me!", "Never mind."]);
			}
			if (var000D == 0x0002) {
				say("\"I am on duty now, ",
					var0005,
					". Thou mayest address me as Corporal.\" *\"Dost thou require some assistance?\"");
				var000E = "Corporal";
				add(["Why art thou following me?", "Stop following me!", "Never mind."]);
			}
			if (var000D == 0x0003) {
				say("\"While I am on duty, ",
					var0005,
					", thou must address me as Sergeant.\" *\"Dost thou require some assistance?\"");
				var000E = "Sergeant";
				add(["Why art thou following me?", "Stop following me!", "Never mind."]);
			}
			if (var000D == 0x0004) {
				say("\"I am a Lieutenant in Fawn's Guard. Thou must address me as such, ",
					var0005,
					".\" *\"Dost thou require some assistance?\"");
				var000E = "Lieutenant";
				add(["Why art thou following me?", "Stop following me!", "Never mind."]);
			}
			converse (0) {
				case "Why art thou following me?":
					say("\"Forgive me, ",
						var0005,
						". But, by Law, I must follow thee.\"");
					remove(["Why art thou following me?", "Stop following me!", "Never mind."]);
					add("Law");
					fallthrough;

				case "Law":
					say("\"By Law, all Beauty must be protected, ",
						var0005,
						". Therefore, I am to ensure that thou dost not endanger thyself.\"");
					remove("Law");
					add("endanger");
					fallthrough;

				case "endanger":
					say("\"Thou shouldst not provoke arguments, or stray too close to the docks where thou couldst be injured. I must intervene in any situation in which thy Beauty might be marred. That is my duty.\"");
					abort;

				case "Stop following me!":
					say("\"I am sorry, ",
						var0005,
						", thou art not my Captain. I may only take orders from the Captain of the Guard.\"");
					remove(["Why art thou following me?", "Stop following me!", "Never mind."]);
					add("Captain of the Guard");
					fallthrough;

				case "Captain of the Guard":
					say("\"His name is Jorvin. Thou canst ask him to reassign me, if thou wishest. But by Law he must assign another guard to the job.\"");
					remove("Captain of the Guard");
					add("Law");
					fallthrough;

				case "Never mind.":
					say("\"I am ever at thy service, ",
						var0005,
						". Call on me any time.\"");
					remove(["Why art thou following me?", "Stop following me!", "Never mind."]);
					abort;
			}
		}
	}
	if ((var0003 > 0x0002) && (var0003 < 0x0007)) {
		var0005 = Func0954();
		var0006 = UI_is_pc_female();
		var0007 = Func0953();
		if (event == DOUBLECLICK) {
			AVATAR->item_say("@Might I speak with thee, guard?@");
			Func097F(item, (("@What dost thou need, " + var0005) + "?@"), 0x0005);
			set_schedule_type(TALK);
		}
		if (event == STARTED_TALKING) {
			set_schedule_type(STANDTHERE);
			clear_item_say();
			HOUND_OF_DOSKAR->show_npc_face0(0x0000);
			var000D = UI_die_roll(0x0001, 0x0004);
			if (var0003 == 0x0003) {
				say("\"Thou shouldst address me by rank while I am on duty, ",
					var0005,
					". I am a Private in Fawn's Guard.\"");
				var000E = "Private";
				add(["storms", "goblins", "bye"]);
			}
			if (var0003 == 0x0004) {
				say("\"I am on duty now, ",
					var0005,
					". Thou mayest address me as Corporal.\"");
				var000E = "Corporal";
				add(["storms", "goblins", "bye"]);
			}
			if (var0003 == 0x0005) {
				say("\"While I am on duty, ",
					var0005,
					", thou must address me as Sergeant.\"");
				var000E = "Sergeant";
				add(["storms", "goblins", "bye"]);
			}
			if (var0003 == 0x0006) {
				say("\"I am a Lieutenant in Fawn's Guard. Thou must address me as such, ",
					var0005,
					".\"");
				var000E = "Lieutenant";
				add(["storms", "goblins", "bye"]);
			}
			converse (0) {
				case "storms":
					var000F = UI_die_roll(0x0001, 0x0006);
					if (var000F == 0x0001) {
						say("\"Be thou careful to stay close to shelter, ",
							var0005,
							". Thou dost never know when one of these freak storms will appear.\"");
						remove("storms");
					}
					if (var000F == 0x0002) {
						say("\"'Tis unnatural, for sure. I wouldn't wander too far from safety, if I were thee, ",
							var0005,
							".\"");
						remove("storms");
					}
					if (var000F == 0x0003) {
						say("\"The storms are no great cause for alarm. Remain in sight of shelter and thou shouldst be fine, ",
							var0005,
							".\"");
						remove("storms");
					}
					if (var000F == 0x0004) {
						say("\"Between thee and me, ",
							var0005,
							", I would not be out here if I weren't on duty. These storms are not natural.\"");
						remove("storms");
					}
					if (var000F == 0x0005) {
						say("\"I tell thee, we are all cursed! These storms are a punishment for our transgressions against the heavens!\" *\"Thou canst run to shelter all thou wishest, but if thou hast transgressed, it will avail thee not!\"");
						remove("storms");
					}
					if (var000F == 0x0006) {
						say("\"Use the sense that the heavens gave thee... If a storm starts, seek shelter. 'Tis simple enough.\"");
						remove("storms");
					}
					fallthrough;

				case "goblins":
					var0010 = UI_die_roll(0x0001, 0x0006);
					if (var0010 == 0x0001) {
						say("\"The goblins have been nothing but trouble of late. Thou shouldst remain within the city gates.\"");
						remove("goblins");
					}
					if (var0010 == 0x0002) {
						say("\"Goblins are filthy savages, ",
							var0005,
							". I yearn for the day when we are allowed to kill them all!\" *\"'Tis unsafe to venture outside the city with them out there.\"");
						remove("goblins");
					}
					if (var0010 == 0x0003) {
						say("\"Make no mistake, ",
							var0005,
							". Those goblins would sooner make a meal out of us as look at us. No one is safe as long as one goblin is left alive!\"");
						remove("goblins");
					}
					if (var0010 == 0x0004) {
						say("\"Don't go out of the city gates, ",
							var0005,
							"! 'Tis not safe even in broad daylight!\"");
						remove("goblins");
					}
					if (var0010 == 0x0005) {
						say("\"Thou hast nothing to fear from the goblins, ",
							var0005,
							", as long as thou stayest within the confines of the city.\"");
						remove("goblins");
					}
					if (var0010 == 0x0006) {
						say("\"Fawn is caught between the storms and the goblins, ",
							var0005,
							". 'Tis not a safe place to be!\"");
						remove("goblins");
					}
					fallthrough;

				case "bye":
					UI_remove_npc_face0();
					Func097F(AVATAR, (("@Goodbye, " + var000E) + ".@"), 0x0000);
					Func097F(item, (("@Walk in Beauty, " + var0005) + ".@"), 0x0005);
labelFunc017D_095E:
					break;
			}
		}
	}
}

extern void Func08AD 0x8AD (var var0000, var var0001, var var0002, var var0003);

void Func0194 shape#(0x194) () {
	var var0000;
	var var0001;
	var var0002;

	var0000 = [0x000F, 0x000C, 0x0008, 0x000E, 0x0014, 0x0004, 0x0004, 0x0004, 0x0004];
	var0001 = var0000[(get_item_frame() + 0x0001)];
	var0002 = UI_click_on_item();
	Func08AD(item, var0001, 0x0026, var0002);
}

extern var Func090C 0x90C (var var0000, var var0001);
extern var Func0994 0x994 ();

void Func019C shape#(0x19C) () {
	var var0000;
	var var0001;
	var var0002;

	if (event == PATH_FAILURE) {
		var0000 = Func090C(AVATAR, item);
		var0001 = script AVATAR {
			face var0000;
			continue;
			actor frame bowing;
		};
		var0001 = script item after 2 ticks {
			nohalt;
			call Func019C;
		};
	}
	if (event == SCRIPTED) {
		var0001 = AVATAR->find_nearest(0x019C, 0x000F);
		var0002 = var0001->get_object_position();
		var0002[0x0001] += 0x0001;
		var0002[0x0002] -= 0x0003;
		var0001 = set_last_created();
		if (var0001) {
			if (get_item_frame() == 0x0000) {
				set_item_frame(0x0001);
				if (Func0994() == 0x0015) {
					var0001 = set_item_quality(0x000D);
					clear_item_flag(TEMPORARY);
					gflags[GOT_WATER_OF_LOGIC] = true;
				}
				if ((Func0994() == 0x0014) && gflags[PASSED_TEST_OF_ETHICALITY]) {
					var0001 = set_item_quality(0x000E);
					clear_item_flag(TEMPORARY);
					gflags[GOT_WATER_OF_ETHICALITY] = true;
				}
				if (Func0994() == 0x0011) {
					var0001 = set_item_quality(0x000F);
					clear_item_flag(TEMPORARY);
					gflags[GOT_WATER_OF_DISCIPLINE] = true;
				}
			} else if (get_item_frame() < 0x0006) {
				set_item_frame(0x0000);
			}
		}
		var0001 = UI_update_last_created(var0002);
	}
}

extern void Func090D 0x90D (var var0000, var var0001, var var0002, var var0003, var var0004, var var0005, var var0006);
extern var Func090C 0x90C (var var0000, var var0001);

void Func01AF shape#(0x1AF) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;
	var var0008;

	if (event == DOUBLECLICK) {
		halt_scheduled();
		var0000 = [1, 1];
		var0001 = [0, 0];
		var0002 = -1;
		Func090D(item, var0000, var0001, var0002, Func01AF, item, PATH_SUCCESS);
	}
	if (event == PATH_SUCCESS) {
		halt_scheduled();
		var0003 = script item {
			sfx 7;
			continue;
			frame 0;
			next frame;
			wait 1;
			next frame;
			wait 1;
			previous frame;
			wait 1;
			previous frame;
			wait 1;
			next frame;
			wait 1;
			next frame;
			wait 1;
			previous frame;
			wait 1;
			previous frame;
		};
		var0004 = Func090C(AVATAR, item);
		AVATAR->halt_scheduled();
		var0003 = script AVATAR {
			face var0004;
			actor frame standing;
			actor frame bowing;
			wait 3;
			actor frame standing;
			actor frame standing;
			actor frame bowing;
			wait 3;
			actor frame standing;
		};
		var0005 = find_nearby(0x02E3, 0x0004, MASK_ALL_UNSEEN);
		for (var0008 in var0005 with var0006 to var0007) {
			var0003 = script var0008 {
				nohalt;
				sfx 7;
				next frame;
				next frame;
				next frame;
				wait 14;
				previous frame;
				wait 3;
				previous frame;
				wait 3;
				previous frame;
			};
		}
	}
}

extern var Func0906 0x906 (var var0000);
extern var Func0908 0x908 (var var0000, var var0001, var var0002, var var0003, var var0004, var var0005);
extern void Func0909 0x909 (var var0000, var var0001, var var0002, var var0003, var var0004, var var0005, var var0006, var var0007, var var0008);
extern void Func0903 0x903 ();
extern void Func0904 0x904 (var var0000);
extern void Func0905 0x905 (var var0000);
extern void Func07F8 object#(0x7F8) ();
extern void Func01C3 shape#(0x1C3) ();

void Func01B0 shape#(0x1B0) () {
	var var0000;
	var var0001;
	var var0002;

	if ((event != DOUBLECLICK) && (event != SCRIPTED)) {
		return;
	}
	var0000 = get_item_quality();
	if (var0000 == 0x0032) {
		if ((gflags[HAVE_WOLF_CLOAK] && (gflags[HAVE_WOLF_TATTOO] && gflags[GAVE_WOLF_TO_LUCILLA])) && ((!gflags[AVATAR_IS_KNIGHT]) && (gflags[RENOUNCED_BRITISH] || (!gflags[TOLD_MARSTEN_SERVES_LORD_BRITISH])))) {
			var0001 = script item {
				nohalt;
				call Func01C3;
			};
			abort;
		}
	}
	if (var0000 == 0x00B3) {
		if ((gflags[FAWN_TRIAL_DONE_FIRST_DAY] || gflags[FAWN_TRIAL_DONE]) && (!(gflags[FAWN_TRIAL_DONE_FIRST_DAY] && gflags[FAWN_TRIAL_DONE]))) {
			var0001 = script item {
				nohalt;
				call Func07F8;
			};
			abort;
		}
	}
	var0002 = Func0906(item);
	if (var0002 == 0x0001) {
		if (Func0908(item, 0x01B1, 0x0000,  0,  3, 0x0005)) {
			Func0909(item, 0x010E, 0x0001, 0x0001, 0x0178, 0x0000,  0,  0, 0x0007);
			UI_play_sound_effect2(0x001F, item);
		} else {
			Func0903();
		}
	}
	if (var0002 == 0x0000) {
		if (Func0908(item, 0x01B1, 0x0001, -3,  0, 0x0007)) {
			Func0909(item, 0x010E, 0x0000, 0x0002, 0x0178, 0x0001,  0,  0, 0x0007);
			UI_play_sound_effect2(0x0020, item);
		} else {
			Func0903();
		}
	}
	if (var0002 == 0x0002) {
		Func0904(item);
	}
	if (var0002 == 0x0003) {
		Func0905(item);
	}
}

extern var Func0906 0x906 (var var0000);
extern var Func0908 0x908 (var var0000, var var0001, var var0002, var var0003, var var0004, var var0005);
extern void Func0909 0x909 (var var0000, var var0001, var var0002, var var0003, var var0004, var var0005, var var0006, var var0007, var var0008);
extern void Func0903 0x903 ();
extern void Func0904 0x904 (var var0000);
extern void Func0905 0x905 (var var0000);

void Func01B1 shape#(0x1B1) () {
	var var0000;

	if ((event != DOUBLECLICK) && (event != SCRIPTED)) {
		return;
	}
	var0000 = Func0906(item);
	if (var0000 == 0x0001) {
		if (Func0908(item, 0x01B0, 0x0000,  3,  0, 0x0001)) {
			Func0909(item, 0x0178, 0x0001, 0x0002, 0x010E, 0x0000,  0,  0, 0x0007);
			UI_play_sound_effect2(0x001F, item);
		} else {
			Func0903();
		}
	}
	if (var0000 == 0x0000) {
		if (Func0908(item, 0x01B0, 0x0001,  0, -3, 0x0007)) {
			Func0909(item, 0x0178, 0x0000, 0x0001, 0x010E, 0x0001,  0,  0, 0x0007);
			UI_play_sound_effect2(0x0020, item);
		} else {
			Func0903();
		}
	}
	if (var0000 == 0x0002) {
		Func0904(item);
	}
	if (var0000 == 0x0003) {
		Func0905(item);
	}
}

extern void Func0949 0x949 (var var0000);
extern void Func0629 object#(0x629) ();

void Func01B2 shape#(0x1B2) () {
	var var0000;
	var var0001;
	var var0002;

	if (event == DOUBLECLICK) {
		if (in_usecode()) {
			halt_scheduled();
			Func0949("@'Tis about time!@");
		} else {
			item->Func0629();
		}
	}
	if (event == PATH_FAILURE) {
		var0000 = get_object_position();
		var0000[0x0001] += 0x0001;
		var0000[0x0002] -= 0x0001;
		var0001 = AVATAR->get_cont_items(0x032A, QUALITY_ANY, FRAME_ANY);
		if (var0001) {
			var0002 = var0001->set_last_created();
			if (var0002) {
				var0001->set_item_frame(0x0003);
				var0002 = UI_update_last_created(var0000);
			}
		}
		var0002 = script AVATAR {
			face north;
			continue;
			actor frame bowing;
		};
	}
}

extern var Func090C 0x90C (var var0000, var var0001);

void Func01B3 shape#(0x1B3) () {
	var var0000;
	var var0001;

	if ((event == DOUBLECLICK) || (event == SCRIPTED)) {
		set_item_shape(0x01E1);
		halt_scheduled();
	}
	if (event == PATH_SUCCESS) {
		set_item_shape(0x01E1);
		var0000 = Func090C(AVATAR, item);
		var0001 = script AVATAR {
			face var0000;
			continue;
			actor frame strike_2h;
			actor frame standing;
		};
	}
}

void Func01BD shape#(0x1BD) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;

	var0000 = get_item_frame();
	var0001 = UI_click_on_item();
	if (!var0001) {
		return;
	}
	var0002 = var0001->get_item_shape();
	if (var0002 == 0x032A) {
		if (!(var0000 == 0x0001)) {
			return;
		}
		var0003 = var0001->get_item_quality();
		var0004 = false;
		if (var0003 == 0x0000) {
			return;
		}
		if (var0003 == 0x000A) {
			set_item_frame(0x0002);
		}
		if (var0003 == 0x000B) {
			set_item_frame(0x0003);
		}
		if (var0003 == 0x000C) {
			set_item_frame(0x0004);
		}
		var0001->set_item_frame(0x0000);
		var0005 = var0001->set_item_quality(0x0000);
		return;
	}
	if (var0002 == 0x0326) {
		if (gflags[ANARCHY_BANE_IN_SWORD] && (var0000 == 0x0004)) {
			gflags[ANARCHY_BANE_IN_SWORD] = false;
			set_item_frame(0x0007);
		}
		if (gflags[INSANITY_BANE_IN_SWORD] && (var0000 == 0x0002)) {
			gflags[INSANITY_BANE_IN_SWORD] = false;
			set_item_frame(0x0005);
		}
		if (gflags[WANTONNESS_BANE_IN_SWORD] && (var0000 == 0x0003)) {
			gflags[WANTONNESS_BANE_IN_SWORD] = false;
			set_item_frame(0x0006);
		}
	}
}

extern var Func0954 0x954 ();
extern var Func0953 0x953 ();
extern void Func097F 0x97F (var var0000, var var0001, var var0002);
extern var Func09A0 0x9A0 (var var0000, var var0001);
extern var Func08ED 0x8ED (var var0000);
extern void Func07D2 object#(0x7D2) ();
extern var Func0992 0x992 (var var0000, var var0001, var var0002, var var0003);
extern var Func0988 0x988 (var var0000, var var0001);
extern void Func0907 0x907 (var var0000, var var0001);
extern void Func09AC 0x9AC (var var0000, var var0001, var var0002, var var0003);

void Func01C3 shape#(0x1C3) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;
	var var0008;
	var var0009;
	var var000A;
	var var000B;
	var var000C;
	var var000D;
	var var000E;
	var var000F;
	var var0010;
	var var0011;
	var var0012;
	var var0013;
	var var0014;
	var var0015;
	var var0016;
	var var0017;
	var var0018;
	var var0019;
	var var001A;
	var var001B;
	var var001C;
	var var001D;
	var var001E;
	var var001F;
	var var0020;
	var var0021;

	var0000 = Func0954();
	var0001 = Func0953();
	var0002 = "he";
	if (UI_is_pc_female()) {
		var0002 = "she";
	}
	if (event == SCRIPTED) {
		if ((MARSTEN->get_npc_id() == 0x000C) && (item == KRAYG->get_npc_object())) {
			Func097F(KRAYG, "@Keep him away from me!@", 0x0000);
			KRAYG->set_item_flag(MET);
			KRAYG->si_path_run_usecode([0x0413, 0x0A8B, 0x0000], SI_PATH_SUCCESS, item, Func01C3, false);
			UI_set_path_failure(Func01C3, item, SI_PATH_FAILURE);
			abort;
		}
		if ((MARSTEN->get_npc_id() == 0x0001) && (item == KRAYG->get_npc_object())) {
			KRAYG->si_path_run_usecode([0x0415, 0x0A7D, 0x0000], SI_PATH_SUCCESS, item, Func01C3, false);
			UI_set_path_failure(Func01C3, item, SI_PATH_FAILURE);
			abort;
		}
		if (MARSTEN->get_npc_id() == 0x000E) {
			MARSTEN->set_npc_id(0x000F);
			AVATAR->set_alignment(GOOD);
			Func097F(MARSTEN, "@Stop this!@", 0x0000);
			MARSTEN->set_item_flag(MET);
			SHAZZANA->set_item_flag(DEAD);
			SHAZZANA->set_schedule_type(WAIT);
			SHAZZANA->set_alignment(NEUTRAL);
			LUTHER->set_item_flag(DEAD);
			LUTHER->set_schedule_type(WAIT);
			LUTHER->set_alignment(NEUTRAL);
			var0003 = script MARSTEN after 10 ticks {
				nohalt;
				call Func01C3;
			};
			UI_play_music(0x001D, Func09A0(0x0005, 0x0001));
			var0004 = SHAZZANA->get_npc_prop(HEALTH);
			var0003 = SHAZZANA->set_npc_prop(HEALTH, SHAZZANA->get_npc_prop(STRENGTH) - var0004);
			var0004 = LUTHER->get_npc_prop(HEALTH);
			var0003 = LUTHER->set_npc_prop(HEALTH, SHAZZANA->get_npc_prop(STRENGTH) - var0004);
			abort;
		}
		if (MARSTEN->get_npc_id() == 0x000D) {
			MARSTEN->set_npc_id(0x000E);
			AVATAR->set_alignment(NEUTRAL);
			LUTHER->set_attack_mode(NEAREST);
			SHAZZANA->set_attack_mode(NEAREST);
			LUTHER->set_alignment(EVIL);
			LUTHER->set_schedule_type(IN_COMBAT);
			LUTHER->set_opponent(SHAZZANA);
			LUTHER->set_oppressor(SHAZZANA);
			SHAZZANA->set_alignment(GOOD);
			SHAZZANA->set_schedule_type(IN_COMBAT);
			SHAZZANA->set_opponent(LUTHER);
			SHAZZANA->set_oppressor(LUTHER);
			Func097F(BRENDANN, "@Strike for his eyes!@", 0x000F);
			BRENDANN->set_item_flag(MET);
			Func097F(SPEKTOR, "@Tell them to stop.@", 0x0019);
			SPEKTOR->set_item_flag(MET);
			Func097F(CALADIN, "@Strike, Luther!@", 0x000A);
			CALADIN->set_item_flag(MET);
			Func097F(AVATAR, "@Hey, careful!@", 0x0005);
			var0003 = script MARSTEN after 35 ticks {
				nohalt;
				actor frame bowing;
				actor frame standing;
				actor frame cast_up;
				call Func01C3;
			};
			abort;
		}
		if (MARSTEN->get_npc_id() == 0x000C) {
			MARSTEN->set_npc_id(0x000D);
			SHAZZANA->si_path_run_usecode([0x041B, 0x0A84, 0x0000], SI_PATH_SUCCESS, SHAZZANA->get_npc_object(), Func01C3, false);
			UI_set_path_failure(Func01C3, SHAZZANA->get_npc_object(), SI_PATH_FAILURE);
			abort;
		}
		if (MARSTEN->get_npc_id() == 0x000B) {
			MARSTEN->set_npc_id(0x000C);
			UI_init_conversation();
			KRAYG->show_npc_face0(0x0000);
			say("\"I am weary of thine insults, Luther! I am no more of a traitor than thou art!\"");
			UI_end_conversation();
			SHAZZANA->set_schedule_type(IN_COMBAT);
			LUTHER->si_path_run_usecode([0x0425, 0x0A82, 0x0000], SI_PATH_SUCCESS, LUTHER->get_npc_object(), Func01C3, false);
			UI_set_path_failure(Func01C3, LUTHER->get_npc_object(), SI_PATH_FAILURE);
			var0003 = script KRAYG after 10 ticks {
				nohalt;
				call Func01C3;
			};
			Func097F(LUTHER, "@I shall make him talk!@", 0x0002);
			gflags[KNOWS_KRAYG_WALKS_ON_WOODS] = true;
			Func097F(SPEKTOR, "@This is unseemly...@", 0x0000);
			Func097F(SHAZZANA, "@Cease!@", 0x0002);
			Func097F(KRAYG, "@Leave me alone!@", 0x0000);
			abort;
		}
		if (MARSTEN->get_npc_id() == 0x000A) {
			MARSTEN->set_npc_id(0x000B);
			UI_init_conversation();
			LUTHER->show_npc_face0(0x0000);
			say("\"Listen, Knights -- it doth not take a wizard to untangle this skein. Who among us acts strangely, doth do things in secret, and avoids his knightly duties?\"");
			LUTHER->set_item_flag(MET);
			UI_end_conversation();
			UI_play_music(0x0010, Func09A0(0x0005, 0x0001));
			var0003 = script LUTHER {
				nohalt;
				wait 3;
				actor frame reach_1h;
				actor frame strike_1h;
				say "@'Tis him!@";
				wait 7;
				say "@Krayg!@";
			};
			var0003 = script SPEKTOR after 5 ticks {
				nohalt;
				actor frame bowing;
				actor frame sitting;
			};
			var0003 = script KRAYG {
				nohalt;
				wait 7;
				say "@Curse thee, Luther!@";
				actor frame bowing;
				actor frame standing;
				wait 4;
				call Func01C3;
			};
			LUCILLA->si_path_run_usecode([0x0439, 0x0A77, 0x0000], SI_PATH_SUCCESS, LUCILLA->get_npc_object(), Func01C3, false);
			UI_set_path_failure(Func01C3, LUCILLA->get_npc_object(), SI_PATH_FAILURE);
			abort;
		}
		if (MARSTEN->get_npc_id() == 0x0009) {
			MARSTEN->set_npc_id(0x000A);
			UI_init_conversation();
			SPEKTOR->show_npc_face0(0x0000);
			say("\"I think this talk of a traitor in Monitor is all rather speculative. Surely, no one suspects anyone at this table of being a Goblin spy.\"");
			UI_end_conversation();
			Func097F(SHAZZANA, "@Sit down, Luther!@", 0x0006);
			var0003 = script LUTHER {
				nohalt;
				say "@I do!@";
				wait 4;
				actor frame bowing;
				actor frame standing;
				wait 5;
				call Func01C3;
			};
			abort;
		}
		if (MARSTEN->get_npc_id() == 0x0008) {
			MARSTEN->set_npc_id(0x0009);
			UI_init_conversation();
			TEMPLAR->show_npc_face0(0x0000);
			say("\"Forgive me, lord, but I, too, have a serious matter to put before the leaders of Monitor.\"");
			TEMPLAR->set_item_flag(MET);
			SHAZZANA->show_npc_face1(0x0000);
			say("\"Dost thou not need to rest thyself, Templar? Thou hast had no time to heal from thy wounds.\"");
			UI_remove_npc_face1();
			SHAZZANA->set_item_flag(MET);
			0x0000->set_conversation_slot();
			say("\"I am right enough, Shazzana. And I cannot rest until I have aired my concerns.\"");
			MARSTEN->show_npc_face1(0x0000);
			say("\"Speak thy mind, then, warrior.\"");
			UI_remove_npc_face1();
			0x0000->set_conversation_slot();
			say("\"As thou knowest, I am the sole survivor of the patrol which the Goblins ambushed -- when Astrid was taken.\"");
			say("\"The Goblins were ready for us, milord! It could not have been by accident.\"");
			say("\"Lord Marsten, there is a traitor in our midst.\"");
			UI_end_conversation();
			Func097F(BRENDANN, "@Templar is right!@", 0x0008);
			Func097F(LUTHER, "@Damn spy!@", 0x0000);
			Func097F(LUCILLA, "@What shall we do?@", 0x0005);
			var0003 = script TEMPLAR {
				nohalt;
				actor frame bowing;
				actor frame sitting;
			};
			var0003 = script SPEKTOR {
				nohalt;
				wait 15;
				actor frame bowing;
				actor frame standing;
				say "@Now, now...@";
				wait 6;
				call Func01C3;
			};
			abort;
		}
		if (MARSTEN->get_npc_id() == 0x0007) {
			MARSTEN->set_npc_id(0x0008);
			UI_init_conversation();
			FLICKEN->show_npc_face0(0x0000);
			say("\"What didst thou think of the Knight's Test? Didst thou have any harrowing experiences?\"");
			LUTHER->show_npc_face1(0x0000);
			say("\"Oh, it isn't that much of a challenge. After all, thou didst survive it, Flicken!\"");
			UI_remove_npc_face1();
			0x0000->set_conversation_slot();
			say("\"Never mind that lout. What part of the dungeon was the most difficult, ",
				var0001,
				"?\"");
			var0005 = 0x0000;
			converse (["the gremlins", "the explosions", "the Cyclops", "the invisible man", "change subject"]) {
				case "the gremlins" (remove):
					say("\"Gremlins? Thou art merely trying to impress us, ",
						var0001,
						". There aren't any gremlins in the Knight's Test!\"");
					var0005 = Func08ED(var0005);
					if (var0005 == 0x0004) {
						// This could be a break instead; the original
						// skips the endconv from a break, which is why
						// I did it this way
						goto labelFunc01C3_073B;
					}
					fallthrough;

				case "the explosions" (remove):
					say("\"But those are so easy to avoid...\"");
					CALADIN->show_npc_face1(0x0000);
					say("\"Perhaps thou didst not walk fast enough. If thou dost lag, the explosions will catch thee.\"");
					UI_remove_npc_face1();
					0x0000->set_conversation_slot();
					var0005 = Func08ED(var0005);
					if (var0005 == 0x0004) {
						// This could be a break instead; the original
						// skips the endconv from a break, which is why
						// I did it this way
						goto labelFunc01C3_073B;
					}
					fallthrough;

				case "the Cyclops" (remove):
					say("\"Didst thou hear what ",
						var0002,
						" didst say? There are magical beasts in the Knight's Test!\"");
					BRENDANN->show_npc_face1(0x0000);
					say("\"We must speak with Shmed about this. Our dungeon is strictly a test of fighting ability -- no magic allowed!\"");
					UI_remove_npc_face1();
					0x0000->set_conversation_slot();
					var0005 = Func08ED(var0005);
					if (var0005 == 0x0004) {
						// This could be a break instead; the original
						// skips the endconv from a break, which is why
						// I did it this way
						goto labelFunc01C3_073B;
					}
					fallthrough;

				case "the invisible man" (remove):
					say("\"Oh, surely thou art mistaken!\"");
					TEMPLAR->show_npc_face1(0x0000);
					say("\"Perhaps in the darkness, thou didst become disoriented and imagine such an enemy.\"");
					UI_remove_npc_face1();
					0x0000->set_conversation_slot();
					var0005 = Func08ED(var0005);
					if (var0005 == 0x0004) {
						// This could be a break instead; the original
						// skips the endconv from a break, which is why
						// I did it this way
						goto labelFunc01C3_073B;
					}
					fallthrough;

				case "change subject" (remove):
					// This could be a break instead; the original
					// skips the endconv from a break, which is why
					// I did it this way
					goto labelFunc01C3_073B;
			}
labelFunc01C3_073B:
			MARSTEN->show_npc_face1(0x0000);
			if (var0005 == 0x0000) {
				say("\"It is good to see a Knight who is not boastful. Luther, thou couldst learn from this one.\"");
				Func097F(LUTHER, "@I doubt it...@", 0x0000);
			} else if (var0005 < 0x0003) {
				say("\"Shmed is the Master of Knight's Test. If I were thee, I would speak to him about thy strange experiences.\"");
				Func097F(FLICKEN, "@Such a story!@", 0x0000);
			} else {
				say("\"My friend, I am convinced thou hast been the victim of an evil scheme! Tomorrow, I shall speak with Shmed personally.\"");
				Func097F(FLICKEN, "@An outrage!@", 0x0000);
			}
			UI_end_conversation();
			HARNNA->move_object([0x0437, 0x0A7C, 0x0000]);
			HARNNA->si_path_run_usecode([0x0421, 0x0A74, 0x0000], SI_PATH_SUCCESS, HARNNA->get_npc_object(), Func01C3, false);
			UI_set_path_failure(Func01C3, HARNNA->get_npc_object(), SI_PATH_FAILURE);
			Func097F(HARNNA, "@Terrible news!@", 0x000A);
			HARNNA->set_item_flag(MET);
			UI_play_music(0x001E, Func09A0(0x0005, 0x0001));
			abort;
		}
		if (MARSTEN->get_npc_id() == 0x0006) {
			MARSTEN->set_npc_id(0x0007);
			UI_init_conversation();
			MARSTEN->show_npc_face0(0x0000);
			say("\"Lucilla hath prepared this feast, the main dish of which includes meat from the wolf which thou didst slay in the Knight's Test.\"");
			say("\"Now let us eat, and as we do so, let us extend our fellowship to this new Knight.\"");
			UI_end_conversation();
			var0003 = script MARSTEN {
				nohalt;
				say "@Let us eat...@";
				wait 2;
				actor frame bowing;
				actor frame sitting;
				wait 16;
				call Func01C3;
			};
			Func097F(LUTHER, "@Hurry, Lucilla!@", 0x0004);
			Func097F(CELLIA, "@This knife is dull...@", 0x0008);
			CELLIA->set_item_flag(MET);
			Func097F(FLICKEN, (("@" + var0001) + "...@"), 0x0010);
			UI_play_music(0x0022, Func09A0(0x0005, 0x0001));
			abort;
		}
		if (MARSTEN->get_npc_id() == 0x0005) {
			MARSTEN->set_npc_id(0x0006);
			UI_init_conversation();
			MARSTEN->show_npc_face0(0x0000);
			say("\"And I am here, both as the Lord of Monitor, and as the leader of the Leopards.\"");
			if (LUCILLA->get_schedule_type() == WAIT) {
				LUCILLA->set_schedule_type(WAITER);
			}
			UI_end_conversation();
			Func097F(SPEKTOR, "@Hurrah!@", 0x0000);
			Func097F(SHAZZANA, "@Leopards!@", 0x0002);
			var0003 = script MARSTEN {
				nohalt;
				actor frame reach_1h;
				wait 6;
				actor frame standing;
				wait 2;
				call Func01C3;
			};
			abort;
		}
		if (MARSTEN->get_npc_id() == 0x0004) {
			MARSTEN->set_npc_id(0x0005);
			UI_init_conversation();
			BRENDANN->show_npc_face0(0x0000);
			say("\"As the leader of the Wolves -- \"");
			say("\"which, unlike the Bears, prefer to rely on our wits rather than brute strength -- \"");
			say("\"I, too, welcome thee to the ranks of the Knights.\"");
			if (UI_is_pc_female()) {
				say("\"And, if I might say so, thou art no doubt the most beautiful Knight in the city!\"");
			}
			say("\"Since thou art under my Command, I expect to know thee much better in the days to come.\"");
			UI_end_conversation();
			var0003 = script BRENDANN {
				nohalt;
				wait 4;
				actor frame bowing;
				actor frame sitting;
				wait 6;
				call Func01C3;
			};
			var0003 = script MARSTEN after 3 ticks {
				nohalt;
				face south;
			};
			Func097F(CELLIA, "@Welcome, warrior.@", 0x0000);
			Func097F(KRAYG, "@Wolves!@", 0x0001);
			if (!UI_is_pc_female()) {
				LUCILLA->set_schedule_type(WAIT);
				LUCILLA->Func07D2();
				Func097F(LUCILLA, "@I like his looks.@", 0x0003);
			} else {
				Func097F(LUCILLA, "@Glad to meet thee.@", 0x0003);
			}
			LUCILLA->set_item_flag(MET);
			abort;
		}
		if (MARSTEN->get_npc_id() == 0x0003) {
			MARSTEN->set_npc_id(0x0004);
			UI_init_conversation();
			CALADIN->show_npc_face0(0x0000);
			say("\"On behalf of the Bears -- which, by the way, are the mightiest warriors in the land -- I welcome thee to thy Knighthood Banquet.\"");
			UI_end_conversation();
			Func097F(FLICKEN, "@Welcome!@", 0x0002);
			Func097F(TEMPLAR, "@Aye! Bears!@", 0x0001);
			Func097F(LUTHER, "@Hear! Hear!@", 0x0000);
			var0003 = script CALADIN {
				nohalt;
				actor frame bowing;
				actor frame sitting;
			};
			var0003 = script BRENDANN after 10 ticks {
				nohalt;
				actor frame bowing;
				actor frame standing;
			};
			var0003 = script MARSTEN {
				nohalt;
				face south;
				wait 6;
				face west;
				say "@The Wolves...@";
				wait 10;
				call Func01C3;
			};
			abort;
		}
		if (MARSTEN->get_npc_id() == 0x0002) {
			MARSTEN->set_npc_id(0x0003);
			UI_init_conversation();
			MARSTEN->show_npc_face0(0x0000);
			say("\"Congratulations on successfully completing the Knight's Test.\"");
			say("\"Thus thou hast proven thyself worthy of joining an elite band of warriors.\"");
			say("\"In thine honor, all of the Commands of Monitor have sent their representatives to thy Knighthood Banquet.\"");
			UI_end_conversation();
			var0003 = script MARSTEN {
				nohalt;
				face east;
				say "@The Bears...@";
			};
			var0003 = script CALADIN after 4 ticks {
				nohalt;
				actor frame bowing;
				actor frame standing;
				wait 4;
				call Func01C3;
			};
			abort;
		}
		if (MARSTEN->get_npc_id() == 0x0001) {
			AVATAR->si_path_run_usecode([0x041F, 0x0A7B, 0x0000], SI_PATH_SUCCESS, item, Func01C3, false);
			UI_set_path_failure(Func01C3, item, SI_PATH_FAILURE);
			var0003 = script KRAYG after 15 ticks {
				nohalt;
				call Func01C3;
			};
			abort;
		}
		if (MARSTEN->get_npc_id() == 0x0000) {
			UI_play_music(0x000F, Func09A0(0x0005, 0x0001));
			AVATAR->set_item_flag(DONT_MOVE);
			var0004 = SHAZZANA->get_npc_prop(HEALTH);
			var0003 = SHAZZANA->set_npc_prop(HEALTH, SHAZZANA->get_npc_prop(STRENGTH) - var0004);
			var0004 = LUTHER->get_npc_prop(HEALTH);
			var0003 = LUTHER->set_npc_prop(HEALTH, SHAZZANA->get_npc_prop(STRENGTH) - var0004);
			UI_end_conversation();
			var0006 = Func0992(0x0001, 0x0000, 0x0000, true);
			var0003 = "We";
			if (UI_get_array_size(UI_get_party_list()) < 0x0003) {
				var0003 = "I";
			}
			Func097F(var0006, (("@" + var0003) + " shall wait for thee here!@"), 0x0005);
			var0003 = Func0988(AVATAR->get_npc_object(), UI_get_party_list2());
			for (var0009 in var0003 with var0007 to var0008) {
				var0009->remove_from_party();
				var0005 = var0009->get_object_position();
				var0009->set_new_schedules(MIDNIGHT, STANDTHERE, [var0005[0x0001], var0005[0x0002]]);
				var0009->run_schedule();
			}
			AVATAR->item_say("@This must be the place!@");
			AVATAR->si_path_run_usecode([0x041F, 0x0A90, 0x0000], SI_PATH_SUCCESS, item, Func01C3, true);
			UI_set_path_failure(Func01C3, item, SI_PATH_FAILURE);
			gflags[MONITOR_BANQUET_STARTED] = true;
			var000A = AVATAR->get_object_position() & (QUALITY_ANY & 0x0006);
			var000B = var000A->find_nearby(0x0113, 0x0028, MASK_EGG);
			for (var000E in var000B with var000C to var000D) {
				var000F = var000E->get_object_position();
				var0010 = var000E->get_item_quality();
				var0011 = false;
				if (var0010 == 0x0001) {
					var0012 = 0x0004;
					var0011 = MARSTEN;
				}
				if (var0010 == 0x0002) {
					var0012 = 0x0004;
					var0011 = SPEKTOR;
				}
				if (var0010 == 0x0004) {
					var0012 = 0x0004;
					var0011 = SHAZZANA;
				}
				if (var0010 == 0x0006) {
					var0012 = 0x0002;
					var0011 = BRENDANN;
				}
				if (var0010 == 0x0008) {
					var0012 = 0x0002;
					var0011 = CELLIA;
				}
				if (var0010 == 0x000A) {
					var0012 = 0x0002;
					var0011 = KRAYG;
				}
				if (var0010 == 0x000C) {
					LUCILLA->move_object(var000F);
					LUCILLA->set_schedule_type(WAIT);
					var0013 = script LUCILLA {
						face west;
						actor frame standing;
					};
				}
				if (var0010 == 0x0005) {
					var0012 = 0x0004;
					var0011 = FLICKEN;
				}
				if (var0010 == 0x0007) {
					var0012 = 0x0006;
					var0011 = CALADIN;
				}
				if (var0010 == 0x0009) {
					var0012 = 0x0006;
					var0011 = TEMPLAR;
				}
				if (var0010 == 0x000B) {
					var0012 = 0x0006;
					var0011 = LUTHER;
				}
				if (var0011 && (!var0011->get_item_flag(DEAD))) {
					var0011->move_object(var000F);
					var0011->set_schedule_type(WAIT);
					var0013 = script var0011 {
						face var0012;
						continue;
						actor frame sitting;
					};
				}
			}
			var000A = AVATAR->get_object_position() & (0x0000 & 0x0007);
			var000B = var000A->find_nearby(0x0113, 0x001E, MASK_EGG);
			for (var000E in var000B with var0014 to var0015) {
				var000E->remove_item();
			}
			abort;
		}
		AVATAR->clear_item_flag(DONT_MOVE);
		LUTHER->clear_item_flag(DEAD);
		SHAZZANA->clear_item_flag(DEAD);
		UI_init_conversation();
		MARSTEN->show_npc_face0(0x0000);
		say("\"Lay down thine arms, Knights! Such fighting belongs on the List Field, not in the banquet hall.\"");
		say("\"Thy behavior hath disrupted this celebration. In the interest of calming all of our tempers, I declare this banquet to be over.\"");
		say("\"",
			var0001,
			", couldst thou please speak to Harnna about her daughter? Perhaps thou mightest have some new insights.\"");
		var0003 = AVATAR->find_nearby(0x01B0, 0x0028, MASK_NONE);
		for (var0009 in var0003 with var0016 to var0017) {
			if (var0009->get_item_quality() == 0x0033) {
				Func0907(var0009, 0x0001);
			}
		}
		Func097F(MARSTEN, "@Go home!@", 0x0000);
		Func097F(SHAZZANA, "@Until next time...@", 0x0004);
		Func097F(LUTHER, "@Coward!@", 0x0008);
		Func097F(CALADIN, "@I'm hungry!@", 0x000A);
		gflags[AVATAR_IS_KNIGHT] = true;
		var0018 = [KRAYG, CELLIA, BRENDANN, SPEKTOR, SHAZZANA, MARSTEN, HARNNA, FLICKEN, CALADIN, LUCILLA, TEMPLAR, LUTHER];
		for (var0005 in var0018 with var0019 to var001A) {
			var0005->revert_schedule();
			var0005->run_schedule();
		}
		var0018 = [FLICKEN, CALADIN, TEMPLAR, LUTHER];
		for (var0005 in var0018 with var001B to var001C) {
			var0005->set_schedule_type(EAT_AT_INN);
		}
		LUCILLA->set_schedule_type(WAITER);
		var0003 = script CELLIA {
			nohalt;
			actor frame bowing;
			actor frame standing;
		};
		var0003 = script HARNNA {
			nohalt;
			actor frame kneeling;
			actor frame bowing;
			actor frame standing;
		};
		var001D = [CELLIA, FLICKEN, HARNNA, KRAYG, LUCILLA, MARSTEN, SPEKTOR];
		for (var0005 in var001D with var001E to var001F) {
			var0005->clear_item_flag(SI_TOURNAMENT);
		}
	}
	if (event == SI_PATH_FAILURE) {
		if ((item == CELLIA->get_npc_object()) && (MARSTEN->get_npc_id() == 0x0008)) {
			CELLIA->set_schedule_type(WAIT);
			CELLIA->item_say("@Poor Cantra...@");
			abort;
		}
		if ((item == SHAZZANA->get_npc_object()) && (MARSTEN->get_npc_id() == 0x000C)) {
			MARSTEN->set_npc_id(0x000D);
			SHAZZANA->set_schedule_type(WAIT);
			var0003 = script SHAZZANA {
				nohalt;
				actor frame ready;
				say "@Restrain thyself, Luther!@";
				wait 11;
				call Func01C3;
			};
			var0003 = script LUTHER {
				nohalt;
				wait 8;
				actor frame ready;
				say "@Thou must make me!@";
			};
			abort;
		}
		if ((item == LUTHER->get_npc_object()) && (MARSTEN->get_npc_id() == 0x000C)) {
			LUTHER->set_schedule_type(WAIT);
			UI_init_conversation();
			SHAZZANA->show_npc_face0(0x0000);
			say("\"Leave him alone, Luther.\"");
			LUTHER->show_npc_face1(0x0000);
			say("\"Thou shouldst stay out of this, woman...\"");
			UI_end_conversation();
			Func097F(BRENDANN, "@No, Shazzana...@", 0x0004);
			Func097F(SHAZZANA, "@Thou shalt not tell me what to do!@", 0x0002);
			SHAZZANA->si_path_run_usecode([0x041C, 0x0A81, 0x0000], SI_PATH_SUCCESS, SHAZZANA->get_npc_object(), Func01C3, false);
			UI_set_path_failure(Func01C3, SHAZZANA->get_npc_object(), SI_PATH_FAILURE);
			abort;
		}
		if (item == HARNNA->get_npc_object()) {
			HARNNA->move_object([0x0421, 0x0A74, 0x0000]);
			event = SI_PATH_SUCCESS;
		}
		if ((item == KRAYG->get_npc_object()) && (MARSTEN->get_npc_id() == 0x000C)) {
			KRAYG->set_schedule_type(WAIT);
			abort;
		}
		if ((item == KRAYG->get_npc_object()) && (MARSTEN->get_npc_id() == 0x0002)) {
			KRAYG->move_object([0x0415, 0x0A7D, 0x0000]);
			event = SI_PATH_SUCCESS;
		}
		if ((MARSTEN->get_npc_id() == 0x0001) && (item == AVATAR->get_npc_object())) {
			AVATAR->move_object([0x041F, 0x0A7B, 0x0000]);
			event = SI_PATH_SUCCESS;
		}
		if ((MARSTEN->get_npc_id() == 0x0000) && ((get_item_shape() == 0x01B0) || (get_item_shape() == 0x010E))) {
			AVATAR->move_object([0x041F, 0x0A90, 0x0000]);
			event = SI_PATH_SUCCESS;
		}
	}
	if (event == SI_PATH_SUCCESS) {
		if ((item == CELLIA->get_npc_object()) && (MARSTEN->get_npc_id() == 0x0008)) {
			CELLIA->set_schedule_type(WAIT);
			var0003 = script CELLIA {
				nohalt;
				face south;
				wait 2;
				face west;
				wait 2;
				actor frame bowing;
				actor frame kneeling;
				say "@Do not cry...@";
			};
			abort;
		}
		if ((item == SHAZZANA->get_npc_object()) && (MARSTEN->get_npc_id() == 0x000C)) {
			MARSTEN->set_npc_id(0x000D);
			SHAZZANA->set_schedule_type(WAIT);
			var0003 = script SHAZZANA {
				nohalt;
				actor frame ready;
				say "@Leave him alone, Luther!@";
				wait 11;
				call Func01C3;
			};
			var0003 = script LUTHER {
				nohalt;
				wait 8;
				actor frame ready;
				say "@Thou must make me!@";
			};
			abort;
		}
		if ((item == LUTHER->get_npc_object()) && (MARSTEN->get_npc_id() == 0x000C)) {
			LUTHER->set_schedule_type(WAIT);
			UI_init_conversation();
			SHAZZANA->show_npc_face0(0x0000);
			say("\"Leave him alone, Luther.\"");
			LUTHER->show_npc_face1(0x0000);
			say("\"Thou shouldst stay out of this, woman...\"");
			UI_end_conversation();
			Func097F(BRENDANN, "@No, Shazzana...@", 0x0004);
			Func097F(SHAZZANA, "@Thou shalt not tell me what to do!@", 0x0002);
			SHAZZANA->si_path_run_usecode([0x041C, 0x0A81, 0x0000], SI_PATH_SUCCESS, SHAZZANA->get_npc_object(), Func01C3, false);
			UI_set_path_failure(Func01C3, SHAZZANA->get_npc_object(), SI_PATH_FAILURE);
			abort;
		}
		if (item == HARNNA->get_npc_object()) {
			gflags[KNOWS_CANTRA_IS_MISSING] = true;
			HARNNA->set_schedule_type(WAIT);
			UI_init_conversation();
			HARNNA->show_npc_face0(0x0000);
			say("\"My daughter Cantra is gone! I have looked everywhere for her. We need to send out a patrol!\"");
			TEMPLAR->show_npc_face1(0x0000);
			say("\"The Goblins have struck again!\"");
			say("\"I am sorry, Harnna, but if the Goblins have her, she is lost. There is not an ounce of mercy or remorse within them.\"");
			UI_remove_npc_face1();
			0x0000->set_conversation_slot();
			say("\"But the Goblins did not take her!\"");
			BRENDANN->show_npc_face1(0x0000);
			say("\"Thou canst not know any such thing. It must have been the Goblins. Remember, they killed thine husband right outside this city, not even leaving a body!\"");
			UI_end_conversation();
			var0003 = script HARNNA {
				nohalt;
				say "@My daughter!@";
				actor frame bowing;
				actor frame kneeling;
				wait 7;
				say "@Oh!@";
				wait 7;
				face north;
				actor frame bowing;
				say "@We must find her!@";
				actor frame bowing;
				actor frame kneeling;
				actor frame sleeping;
			};
			var0003 = script TEMPLAR after 20 ticks {
				nohalt;
				say "@Lord Marsten...@";
				wait 2;
				actor frame bowing;
				actor frame standing;
				wait 4;
				call Func01C3;
			};
			Func097F(CALADIN, "@Kill the Goblins!@", 0x0005);
			Func097F(CELLIA, "@Poor dear!@", 0x0002);
			CELLIA->si_path_run_usecode([0x0422, 0x0A73, 0x0000], SI_PATH_SUCCESS, CELLIA->get_npc_object(), Func01C3, false);
			UI_set_path_failure(Func01C3, CELLIA->get_npc_object(), SI_PATH_FAILURE);
			UI_remove_npc_face1();
			abort;
		}
		if ((item == KRAYG->get_npc_object()) && (MARSTEN->get_npc_id() == 0x000C)) {
			KRAYG->set_schedule_type(WAIT);
			abort;
		}
		if ((item == KRAYG->get_npc_object()) && (MARSTEN->get_npc_id() == 0x0002)) {
			var0003 = script KRAYG {
				nohalt;
				say "@I am sorry that I am late...@";
				face east;
				actor frame bowing;
				actor frame sitting;
			};
			KRAYG->set_schedule_type(WAIT);
			abort;
		}
		if ((MARSTEN->get_npc_id() == 0x0001) && (item == AVATAR->get_npc_object())) {
			MARSTEN->set_npc_id(0x0002);
			Func097F(MARSTEN, (("@Please be seated, " + var0001) + ".@"), 0x0003);
			var0003 = script MARSTEN after 2 ticks {
				nohalt;
				actor frame bowing;
				actor frame standing;
			};
			var0003 = script AVATAR after 5 ticks {
				nohalt;
				say "@Yes, milord.@";
				face north;
				actor frame bowing;
				actor frame sitting;
				wait 8;
				call Func01C3;
			};
			Func09AC(LUCILLA, -1, 0, WAITER);
			abort;
		}
		if ((MARSTEN->get_npc_id() == 0x0000) && ((get_item_shape() == 0x01B0) || (get_item_shape() == 0x010E))) {
			MARSTEN->set_npc_id(0x0001);
			Func097F(AVATAR, "@Look! Everyone is here...@", 0x0003);
			Func097F(FLICKEN, "@Where is Harnna?@", 0x0017);
			Func097F(SPEKTOR, "@Our guest is here...@", 0x0016);
			var0003 = AVATAR->find_nearby(0x010E, 0x000A, MASK_NONE) & AVATAR->find_nearby(0x01B0, 0x000A, MASK_NONE);
			for (var0009 in var0003 with var0020 to var0021) {
				var0009->remove_item();
			}
			var0009 = UI_create_new_object(0x01B1);
			if (var0009) {
				var0003 = var0009->set_item_quality(0x0000);
				var0009->set_item_frame(0x0009);
				var0009->clear_item_flag(TEMPORARY);
				var0003 = UI_update_last_created([0x041C, 0x0A8F, 0x0000]);
			}
			var0009 = UI_create_new_object(0x0178);
			if (var0009) {
				var0003 = var0009->set_item_quality(0x0000);
				var0009->set_item_frame(0x000D);
				var0009->clear_item_flag(TEMPORARY);
				var0003 = UI_update_last_created([0x0423, 0x0A8F, 0x0000]);
			}
			UI_play_sound_effect2(0x0020, item);
			var0003 = script AVATAR {
				nohalt;
				call Func01C3;
			};
			abort;
		}
	}
}

extern var Func0954 0x954 ();
extern var Func0953 0x953 ();
extern void Func07D2 object#(0x7D2) ();
extern void Func0901 0x901 ();
extern void Func094F 0x94F (var var0000, var var0001);
extern void Func097F 0x97F (var var0000, var var0001, var var0002);
extern var Func09A0 0x9A0 (var var0000, var var0001);
extern void Func09AF 0x9AF (var var0000, var var0001, var var0002, var var0003);
extern var Func0956 0x956 (var var0000);
extern var Func098D 0x98D ();
extern var Func0988 0x988 (var var0000, var var0001);
extern void Func07D1 object#(0x7D1) ();
extern void Func0636 object#(0x636) ();
extern void Func01C7 shape#(0x1C7) ();

void Func01C7 shape#(0x1C7) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;
	var var0008;
	var var0009;
	var var000A;
	var var000B;
	var var000C;
	var var000D;
	var var000E;
	var var000F;
	var var0010;
	var var0011;
	var var0012;
	var var0013;
	var var0014;
	var var0015;
	var var0016;
	var var0017;
	var var0018;
	var var0019;
	var var001A;
	var var001B;
	var var001C;

	var0000 = Func0954();
	var0001 = UI_is_pc_female();
	var0002 = "his";
	var0003 = "him";
	var0004 = "he";
	var0005 = "man";
	if (UI_is_pc_female()) {
		var0002 = "her";
		var0004 = "she";
		var0003 = "her";
		var0005 = "woman";
	}
	var0006 = Func0953();
	var0007 = UI_part_of_day();
	var0008 = 0x0000;
	if ((FRIGIDAZZI->get_npc_id() > 0x0006) && (FRIGIDAZZI->get_npc_id() != 0x0011)) {
		var0008 = 0x0002;
	}
	if ((var0007 > EARLY) || (var0007 < EVENING)) {
		var0007 = "day";
	} else {
		var0007 = "evening";
	}
	if (event == SI_PATH_FAILURE) {
		if ((FILBERCIO->get_npc_id() == 0x000D) && (item == AVATAR->get_npc_object())) {
			var0009 = AVATAR->get_object_position();
			var0009[0x0001] -= var0009[0x0003] / 0x0002;
			var0009[0x0002] -= var0009[0x0003] / 0x0002;
			UI_sprite_effect(ANIMATION_TELEPORT, var0009[0x0001], var0009[0x0002], 0x0000, 0x0000, 0x0000, LOOP_ONCE);
			var0009 = AVATAR->get_object_position();
			AVATAR->move_object([0x0937, 0x0733, 0x0001]);
			UI_play_sound_effect(0x0082);
			event = SI_PATH_SUCCESS;
		}
		if ((FILBERCIO->get_npc_id() == 0x000C) && (item == AVATAR->get_npc_object())) {
			var0009 = AVATAR->get_object_position();
			var0009[0x0001] -= var0009[0x0003] / 0x0002;
			var0009[0x0002] -= var0009[0x0003] / 0x0002;
			UI_sprite_effect(ANIMATION_TELEPORT, var0009[0x0001], var0009[0x0002], 0x0000, 0x0000, 0x0000, LOOP_ONCE);
			var0009 = AVATAR->get_object_position();
			AVATAR->move_object([0x093C, 0x0740, 0x0000]);
			UI_play_sound_effect(0x0082);
			event = SI_PATH_SUCCESS;
		}
		if ((FILBERCIO->get_npc_id() == 0x0001) && (item == FILBERCIO->get_npc_object())) {
			if (FILBERCIO->get_distance(AVATAR) > 0x0002) {
				FILBERCIO->Func07D2();
				var000A = script FILBERCIO after 8 ticks {
					nohalt;
					call Func01C7;
				};
				abort;
			}
		}
	}
	if ((event == SI_PATH_SUCCESS) && gflags[CAUGHT_WITH_FRIGIDAZZI]) {
		if ((FILBERCIO->get_npc_id() == 0x000D) && (item == AVATAR->get_npc_object())) {
			Func0901();
			abort;
		}
		if ((FILBERCIO->get_npc_id() == 0x000C) && (get_npc_number() == AVATAR)) {
			var000B = [0x0178, 0x010E, 0x01B0, 0x01B1];
			var000C = [];
			for (var000F in var000B with var000D to var000E) {
				var000C &= AVATAR->find_nearby(var000F, 0x000A, MASK_NONE);
			}
			var0010 = false;
			for (var000F in var000C with var0011 to var0012) {
				if (var000F->get_item_quality() == 0x00D4) {
					var0010 = var000F;
					var0009 = var000F->get_object_position();
					UI_sprite_effect(ANIMATION_PURPLE_BUBBLES, var0009[0x0001], var0009[0x0002], 0x0000, 0x0000, 0x0000, LOOP_ONCE);
					UI_play_sound_effect(0x0040);
				}
			}
			if (var0010) {
				var0013 = var0010->get_item_frame() - 0x0001;
				var0010->set_item_frame(var0013);
			}
			var000A = AVATAR->find_nearby(0x010E, 0x0028, MASK_NONE) & AVATAR->find_nearby(0x01B0, 0x0028, MASK_NONE);
			for (var000F in var000A with var0014 to var0015) {
				if (var000F->get_item_quality() == 0x00D3) {
					var000F->set_item_frame(var000F->get_item_frame() - 0x0002);
				}
			}
			var000A = script FILBERCIO after 1 ticks {
				nohalt;
				call Func01C7;
			};
		}
	}
	if ((event == SCRIPTED) && gflags[CAUGHT_WITH_FRIGIDAZZI]) {
		if (FILBERCIO->get_npc_id() == 0x000C) {
			FILBERCIO->set_npc_id(0x000D);
			AVATAR->si_path_run_usecode([0x0937, 0x0733, 0x0001], SI_PATH_SUCCESS, AVATAR->get_npc_object(), Func01C7, false);
			abort;
		}
		if (FILBERCIO->get_npc_id() == 0x000B) {
			FILBERCIO->set_npc_id(0x000C);
			UI_play_sound_effect(0x0040);
			var0009 = AVATAR->get_object_position();
			UI_sprite_effect(ANIMATION_GREEN_BUBBLES, var0009[0x0001], var0009[0x0002], 0x0000, 0x0000, 0x0000, LOOP_ONCE);
			var000A = ["@What's going on?@", "@Cannot stop...@", "@Where am I going?@"];
			Func094F(AVATAR, var000A);
			AVATAR->si_path_run_usecode([0x093C, 0x0740, 0x0000], SI_PATH_SUCCESS, AVATAR->get_npc_object(), Func01C7, false);
			FRIGIDAZZI->set_npc_id(0x0000);
			abort;
		}
		if (FILBERCIO->get_npc_id() == 0x000A) {
			FILBERCIO->set_npc_id(0x000B);
			UI_init_conversation();
			BUCIA->show_npc_face0(0x0000);
			say("\"Not that place! ",
				var0004,
				" shall never be seen alive again!\"");
			GUSTACIO->show_npc_face1(0x0000);
			say("\"It shall be with this criminal as with all others -- if ",
				var0004,
				" can find ",
				var0002,
				" way back to the surface world, then ",
				var0004,
				" shall be a free ",
				var0005,
				".\"");
			UI_remove_npc_face1();
			UI_remove_npc_face0();
			FILBERCIO->show_npc_face0(0x0000);
			say("\"Enough of this jabbering. Let justice be done!\"");
			UI_end_conversation();
			var000A = script FRIGIDAZZI {
				nohalt;
				wait 5;
				actor frame bowing;
				actor frame standing;
				face south;
				say "@Oh, cease thy prattle!@";
			};
			Func097F(GUSTACIO, "@Poor fool...@", 0x0014);
			Func097F(DUPRE, "@Keep thy wits, Avatar!@", 0x0019);
			Func097F(IOLO, "@Do not despair!@", 0x0014);
			Func097F(SHAMINO, "@We shall wait for thee!@", 0x000C);
			Func097F(BOYDON, (((("@" + var0004) + " is a dead ") + var0005) + "!@"), 0x0000);
			Func097F(FLINDO, "@He made me do it...@", 0x000C);
			var000A = script AVATAR {
				nohalt;
				wait 2;
				face south;
				wait 2;
				face west;
			};
			var000A = script BUCIA {
				nohalt;
				face west;
				actor frame bowing;
				actor frame sitting;
				say (("@" + var0004) + " is doomed...@");
			};
			var000A = script MORTEGRO {
				nohalt;
				face north;
				actor frame bowing;
				actor frame sitting;
			};
			var000A = FILBERCIO->set_to_attack(AVATAR, 0x0118);
			var000A = script FILBERCIO {
				nohalt;
				actor frame reach_2h;
				actor frame strike_2h;
				attack;
				sfx 57;
				actor frame standing;
				wait 4;
				call Func01C7;
			};
			abort;
		}
		if (FILBERCIO->get_npc_id() == 0x0009) {
			FILBERCIO->set_npc_id(0x000A);
			UI_init_conversation();
			MORTEGRO->show_npc_face0(0x0000);
			say("\"As with all who offend the MageLord, this criminal must be sent to the hellhole known as Dungeon Freedom.\"");
			UI_play_music(0x0017, Func09A0(0x0005, 0x0001));
			UI_end_conversation();
			var000A = script BUCIA {
				nohalt;
				say "@Oh, no!@";
				wait 2;
				actor frame bowing;
				actor frame standing;
				face north;
				actor frame ready;
				wait 4;
				call Func01C7;
			};
			var000A = script MORTEGRO {
				nohalt;
				wait 2;
				face east;
			};
			var000A = script AVATAR {
				nohalt;
				wait 4;
				face east;
			};
			var000A = script FILBERCIO {
				nohalt;
				wait 2;
				face east;
			};
			abort;
		}
		if (FILBERCIO->get_npc_id() == 0x0008) {
			FILBERCIO->set_npc_id(0x0009);
			UI_init_conversation();
			GUSTACIO->show_npc_face0(0x0000);
			say("\"For the crime of entering the bedchamber of the MageLord's mistress, we must find ",
				var0003,
				" guilty, MageLord.\"");
			FILBERCIO->show_npc_face1(0x0000);
			say("\"Guilty!\"");
			UI_end_conversation();
			Func097F(FILBERCIO, "@And the sentence?@", 0x0000);
			Func09AF(GUSTACIO, MORTEGRO, 0x0004, Func01C7);
			var000A = script AVATAR {
				nohalt;
				wait 2;
				face south;
			};
			var000A = script FILBERCIO {
				nohalt;
				face east;
				wait 1;
				face south;
			};
			abort;
		}
		if (FILBERCIO->get_npc_id() == 0x0007) {
			FILBERCIO->set_npc_id(0x0008);
			UI_init_conversation();
			FILBERCIO->show_npc_face0(0x0000);
			say("\"Lords and Adepts, you have heard the evidence! ",
				var0006,
				" did come amongst us like a disease, to bring destruction upon us all.\"");
			say("\"Worst of all, ",
				var0004,
				" hath dared to tamper with the affections of she whom I hold most dear, the good sorceress Frigidazzi.\"");
			say("\"How do you judge ",
				var0003,
				"?\"");
			UI_end_conversation();
			var000A = script AVATAR {
				nohalt;
				wait 2;
				face north;
			};
			var000A = script GUSTACIO {
				nohalt;
				wait 2;
				actor frame bowing;
				actor frame standing;
				wait 4;
				call Func01C7;
			};
			var000A = script FILBERCIO {
				nohalt;
				face north;
			};
			abort;
		}
		if (FILBERCIO->get_npc_id() == 0x0006) {
			FILBERCIO->set_npc_id(0x0007);
			UI_init_conversation();
			FLINDO->show_npc_face0(0x0000);
			say("\"I did travel with this person upon my recent voyage from the Inn of the Sleeping Bull, and I had many long talks with ",
				var0003,
				".\"");
			say("\"I must report that ",
				var0002,
				" character is not to be trusted. ",
				var0004,
				" is a liar, a fraud, and is known to consort with people of the lowest type.\"");
			var0016 = Func0956(["Oh, like thyself?", "I deny this charge", "say nothing"]);
			if (var0016 == "Oh, like thyself?") {
				say("\"See, lords? ",
					var0004,
					" doth have a wicked tongue, which is why ",
					var0006,
					" is so often in great trouble...\"");
				say("\"The only reason ",
					var0004,
					" came to Moonshade was to flee justice at the hands of the Knights of Monitor!\"");
				say("\"They accuse ",
					var0003,
					" of bribing the Tower guards in order to release one of their prisoners...\"");
			} else if (var0016 == "I deny this charge") {
				say("\"Denial will do thee no good, ",
					var0006,
					". Dost thou not understand that the MageLord will have his way?\"");
			} else {
				say("\"Yet ",
					var0004,
					" was a good travelling companion, able with sword and bow -- so I ask for thy leniency, MageLord.\"");
			}
			FILBERCIO->show_npc_face1(0x0000);
			say("\"Thanks for thy witness, good merchant.\"");
			UI_end_conversation();
			Func097F(FILBERCIO, "@Thou mayest be seated.@", 0x0000);
			var000A = script FLINDO {
				nohalt;
				actor frame bowing;
				actor frame sitting;
				wait 12;
				call Func01C7;
			};
			var000A = script AVATAR {
				nohalt;
				wait 2;
				face west;
			};
			abort;
		}
		if (FILBERCIO->get_npc_id() == 0x0005) {
			FILBERCIO->set_npc_id(0x0006);
			UI_init_conversation();
			BUCIA->show_npc_face0(0x0000);
			say("\"This stranger came into my shop and asked many strange and personal questions concerning the Sorceress Frigidazzi.\"");
			var0016 = Func0956(["That's a lie", "I was only curious", "say nothing"]);
			if (var0016 == "That's a lie") {
				FILBERCIO->show_npc_face1(0x0000);
				say("\"How darest thou defame the good lady Bucia, my good and dear friend!\"");
				say("\"Adepts, be sure to remember this offensive behavior when it comes time to render your verdict.\"");
			} else if (var0016 == "I was only curious") {
				GUSTACIO->show_npc_face1(0x0000);
				say("\"Such curiosity seems most impudent, considering that thou art a stranger in this land...\"");
				UI_remove_npc_face1();
				0x0000->set_conversation_slot();
				say("\"And ",
					var0004,
					" did ask many questions about many other people, and about strange objects which I was not familiar with...\"");
				FILBERCIO->show_npc_face1(0x0000);
				say("\"Hardly the act of the casual adventurer ",
					var0004,
					" pretends to be...\"");
			} else {
				FILBERCIO->show_npc_face1(0x0000);
				say("\"Aha! The cad doth not even rise in ",
					var0002,
					" own defense -- ",
					var0004,
					" must be guilty!\"");
			}
			say("\"Let us hear from the next witness.\"");
			UI_end_conversation();
			Func097F(FILBERCIO, "@Merchant Flindo!@", 0x0000);
			var000A = script BUCIA {
				nohalt;
				actor frame bowing;
				actor frame sitting;
			};
			var000A = script FLINDO after 5 ticks {
				nohalt;
				actor frame bowing;
				actor frame standing;
				wait 2;
				actor frame bowing;
				actor frame kneeling;
				actor frame bowing;
				say "@Lord Filbercio...@";
				wait 2;
				actor frame bowing;
				actor frame standing;
				wait 2;
				call Func01C7;
			};
			abort;
		}
		if (FILBERCIO->get_npc_id() == 0x0004) {
			FILBERCIO->set_npc_id(0x0005);
			UI_init_conversation();
			FRIGIDAZZI->show_npc_face0(0x0000);
			say("\"I beg of thee, MageLord Filbercio, to spare this person's life. It was all my fault.\"");
			if ((FRIGIDAZZI->get_npc_id() > 0x000B) && (FRIGIDAZZI->get_npc_id() != 0x0011)) {
				say("\"After all, no mortal can resist the Dance of Passion.\"");
			}
			var0016 = Func0956(["It's her fault", "It's my fault", "Nothing happened", "say nothing"]);
			FILBERCIO->show_npc_face1(0x0000);
			if (var0016 == "It's her fault") {
				say("\"What a cad! This whoreson thinks to escape punishment for the crime by blaming it all on dear Frigidazzi.\"");
			} else if (var0016 == "It's my fault") {
				say("\"See -- you have heard it from ",
					var0002,
					" own mouth!\"");
			} else if (var0016 == "Nothing happened") {
				say("\"My fellow wizards, I am sure that you are able to see beyond this criminal's denials!\"");
				say("\"After all, I caught ",
					var0003,
					" in the bedchamber of dear Frigidazzi...\"");
			}
			say("\"Please be seated, Frigidazzi. We shall now hear from the character witnesses.\"");
			UI_end_conversation();
			var000A = script FRIGIDAZZI {
				nohalt;
				actor frame bowing;
				actor frame sitting;
			};
			var000A = script BUCIA after 5 ticks {
				nohalt;
				actor frame bowing;
				actor frame standing;
				wait 2;
				actor frame bowing;
				actor frame kneeling;
				actor frame bowing;
				say "@MageLord...@";
				wait 2;
				actor frame bowing;
				actor frame standing;
				wait 2;
				call Func01C7;
			};
			Func097F(FILBERCIO, "@The good lady Bucia...@", 0x0000);
			abort;
		}
		if (FILBERCIO->get_npc_id() == 0x0003) {
			FILBERCIO->set_npc_id(0x0004);
			UI_init_conversation();
			FILBERCIO->show_npc_face0(0x0000);
			say("\"Order in the court!\"");
			say("\"We have convened this day to hear the case of ",
				var0006,
				", who hath committed treason. This criminal is charged with lusting after the mistress of the MageLord.\"");
			if (IOLO->npc_nearby()) {
				IOLO->show_npc_face1(0x0000);
				say("\"Since when is this a crime? What doth the lady say?\"");
				UI_remove_npc_face1();
				0x0000->set_conversation_slot();
				say("\"Be silent, or thou too wilt be sentenced to the Pit -- for thine insolence!\"");
			}
			UI_end_conversation();
			var000A = script AVATAR {
				wait 4;
				face east;
			};
			var000A = script FRIGIDAZZI {
				wait 2;
				actor frame bowing;
				actor frame standing;
				say "@Let me speak...@";
				wait 7;
				call Func01C7;
			};
			abort;
		}
		if (FILBERCIO->get_npc_id() == 0x0002) {
			FILBERCIO->set_npc_id(0x0003);
			UI_fade_palette(0x000C, 0x0001, 0x0000);
			UI_play_music(0x0027, Func09A0(0x0005, 0x0001));
			var0017 = Func098D();
			var0017 = Func0988(PETRA, var0017);
			var0017 = Func0988(MORTEGRO, var0017);
			var0017 = Func0988(STEFANO, var0017);
			var0018 = 0x0000;
			for (var0016 in var0017 with var0019 to var001A) {
				if (var0016->npc_nearby2()) {
					var0016->set_schedule_type(WAIT);
					var0016->move_object([0x0938, (0x074A + var0018), 0x0000]);
					var000A = script var0016 {
						nohalt;
						face west;
						actor frame sitting;
					};
					var0016->set_npc_id(0x001E);
					var0018 += 0x0002;
				}
			}
			var000A = BOYDON->get_object_position();
			if (((var000A[0x0001] > 0x0859) && ((var000A[0x0001] < 0x0AB4) && ((var000A[0x0002] > 0x0500) && (var000A[0x0002] < 0x0994)))) || (((var000A[0x0001] > 0x0762) && ((var000A[0x0001] < 0x085B) && ((var000A[0x0002] > 0x0585) && (var000A[0x0002] < 0x0957)))) || (((var000A[0x0001] > 0x0744) && ((var000A[0x0001] < 0x0764) && ((var000A[0x0002] > 0x06F9) && (var000A[0x0002] < 0x073D)))) || (((var000A[0x0001] > 0x071E) && ((var000A[0x0001] < 0x0764) && ((var000A[0x0002] > 0x0828) && (var000A[0x0002] < 0x088D)))) || (((var000A[0x0001] > 0x06FC) && ((var000A[0x0001] < 0x0764) && ((var000A[0x0002] > 0x07A6) && (var000A[0x0002] < 0x082A)))) || ((var000A[0x0001] > 0x074C) && ((var000A[0x0001] < 0x0764) && ((var000A[0x0002] > 0x0719) && (var000A[0x0002] < 0x07A8))))))))) {
				BOYDON->set_npc_id(0x001E);
			}
			var000A = IOLO->get_object_position();
			if (((var000A[0x0001] > 0x0859) && ((var000A[0x0001] < 0x0AB4) && ((var000A[0x0002] > 0x0500) && (var000A[0x0002] < 0x0994)))) || (((var000A[0x0001] > 0x0762) && ((var000A[0x0001] < 0x085B) && ((var000A[0x0002] > 0x0585) && (var000A[0x0002] < 0x0957)))) || (((var000A[0x0001] > 0x0744) && ((var000A[0x0001] < 0x0764) && ((var000A[0x0002] > 0x06F9) && (var000A[0x0002] < 0x073D)))) || (((var000A[0x0001] > 0x071E) && ((var000A[0x0001] < 0x0764) && ((var000A[0x0002] > 0x0828) && (var000A[0x0002] < 0x088D)))) || (((var000A[0x0001] > 0x06FC) && ((var000A[0x0001] < 0x0764) && ((var000A[0x0002] > 0x07A6) && (var000A[0x0002] < 0x082A)))) || ((var000A[0x0001] > 0x074C) && ((var000A[0x0001] < 0x0764) && ((var000A[0x0002] > 0x0719) && (var000A[0x0002] < 0x07A8))))))))) {
				IOLO->set_npc_id(0x001E);
			}
			var000A = DUPRE->get_object_position();
			if (((var000A[0x0001] > 0x0859) && ((var000A[0x0001] < 0x0AB4) && ((var000A[0x0002] > 0x0500) && (var000A[0x0002] < 0x0994)))) || (((var000A[0x0001] > 0x0762) && ((var000A[0x0001] < 0x085B) && ((var000A[0x0002] > 0x0585) && (var000A[0x0002] < 0x0957)))) || (((var000A[0x0001] > 0x0744) && ((var000A[0x0001] < 0x0764) && ((var000A[0x0002] > 0x06F9) && (var000A[0x0002] < 0x073D)))) || (((var000A[0x0001] > 0x071E) && ((var000A[0x0001] < 0x0764) && ((var000A[0x0002] > 0x0828) && (var000A[0x0002] < 0x088D)))) || (((var000A[0x0001] > 0x06FC) && ((var000A[0x0001] < 0x0764) && ((var000A[0x0002] > 0x07A6) && (var000A[0x0002] < 0x082A)))) || ((var000A[0x0001] > 0x074C) && ((var000A[0x0001] < 0x0764) && ((var000A[0x0002] > 0x0719) && (var000A[0x0002] < 0x07A8))))))))) {
				DUPRE->set_npc_id(0x001E);
			}
			SHAMINO->set_npc_id(0x001E);
			var000A = SHAMINO->get_object_position();
			if (!(((var000A[0x0001] > 0x0859) && ((var000A[0x0001] < 0x0AB4) && ((var000A[0x0002] > 0x0500) && (var000A[0x0002] < 0x0994)))) || (((var000A[0x0001] > 0x0762) && ((var000A[0x0001] < 0x085B) && ((var000A[0x0002] > 0x0585) && (var000A[0x0002] < 0x0957)))) || (((var000A[0x0001] > 0x0744) && ((var000A[0x0001] < 0x0764) && ((var000A[0x0002] > 0x06F9) && (var000A[0x0002] < 0x073D)))) || (((var000A[0x0001] > 0x071E) && ((var000A[0x0001] < 0x0764) && ((var000A[0x0002] > 0x0828) && (var000A[0x0002] < 0x088D)))) || (((var000A[0x0001] > 0x06FC) && ((var000A[0x0001] < 0x0764) && ((var000A[0x0002] > 0x07A6) && (var000A[0x0002] < 0x082A)))) || ((var000A[0x0001] > 0x074C) && ((var000A[0x0001] < 0x0764) && ((var000A[0x0002] > 0x0719) && (var000A[0x0002] < 0x07A8)))))))))) {
				if (!SHAMINO->get_item_flag(DEAD)) {
					gflags[SHAMINO_TELEPORTED_BY_MONKS] = true;
				}
			}
			Func097F(var0016, "@Hush...@", 0x0007);
			AVATAR->move_object([0x0930, 0x074E, 0x0000]);
			var000A = script AVATAR after 10 ticks {
				nohalt;
				face west;
				call Func0636;
				// Bug: the next line should probably be 'music 32'
				// It works because it seems that original pulls zeroes from
				// after the end of the script.
				raw((byte)0x54); raw(0x0020);
			};
			FILBERCIO->move_object([0x0925, 0x074F, 0x0001]);
			var000A = script FILBERCIO after 12 ticks {
				nohalt;
				face east;
				actor frame bowing;
				actor frame sitting;
				repeat 3 {
					sfx 56;
					wait 8;
				};
				actor frame bowing;
				actor frame standing;
				say "@Order!@";
				wait 8;
				call Func01C7;
			};
			GUSTACIO->set_schedule_type(WAIT);
			GUSTACIO->move_object([0x092F, 0x0746, 0x0001]);
			var000A = script GUSTACIO after 12 ticks {
				nohalt;
				face south;
				actor frame bowing;
				actor frame sitting;
			};
			MORTEGRO->set_schedule_type(WAIT);
			MORTEGRO->move_object([0x092F, 0x0758, 0x0001]);
			var000A = script MORTEGRO after 12 ticks {
				nohalt;
				face north;
				actor frame bowing;
				actor frame sitting;
				wait 10;
				say "@Let us finish this matter...@";
			};
			FRIGIDAZZI->move_object([0x0938, 0x0751, 0x0000]);
			var000A = script FRIGIDAZZI after 12 ticks {
				nohalt;
				face west;
				actor frame bowing;
				actor frame sitting;
			};
			BUCIA->set_schedule_type(WAIT);
			BUCIA->move_object([0x0938, 0x0756, 0x0000]);
			var000A = script BUCIA after 12 ticks {
				nohalt;
				wait 4;
				say "@This should be interesting...@";
				face west;
				actor frame bowing;
				actor frame sitting;
			};
			FLINDO->set_schedule_type(WAIT);
			FLINDO->move_object([0x0938, 0x0754, 0x0000]);
			var000A = script FLINDO after 12 ticks {
				nohalt;
				face west;
				actor frame bowing;
				actor frame sitting;
				wait 8;
				say (("@" + var0004) + "'s guilty!@");
			};
			FRIGIDAZZI->set_polymorph(0x028C);
			AVATAR->set_polymorph(0x02D1);
			abort;
		}
		if (FILBERCIO->get_npc_id() == 0x0001) {
			FILBERCIO->set_npc_id(0x0002);
			var000A = find_nearby(0x01FD, 0x0014, MASK_NONE);
			if (var000A) {
				var000A->set_schedule_type(SHY);
			}
			UI_init_conversation();
			FILBERCIO->show_npc_face0(0x0000);
			say("\"What!? Frigidazzi, why is this stranger in thy chambers?!\"");
			if ((FRIGIDAZZI->get_npc_id() > 0x0006) && (FRIGIDAZZI->get_npc_id() != 0x0011)) {
				say("\"And where are thy clothes?\"");
			}
			FRIGIDAZZI->show_npc_face1(var0008);
			say("\"Darling! This is such a surprise... I have an explanation for everything...\"");
			UI_remove_npc_face1();
			0x0000->set_conversation_slot();
			say("\"I am not daft, sorceress. I can see very well what hath been happening here.\"");
			say("\"What dost thou have to say in thy defense, ",
				var0006,
				"?\"");
			var0016 = Func0956(["I'm guilty", "I'm innocent", "I'm leaving"]);
			if (var0016 == "I'm guilty") {
				say("\"I knew it!\"");
				FRIGIDAZZI->show_npc_face1(var0008);
				say("\"Oh, ",
					var0006,
					"! Thou shouldst not have said such a thing -- the wrath of the MageLord is legendary!\"");
				UI_remove_npc_face1();
				0x0000->set_conversation_slot();
			} else if (var0016 == "I'm innocent") {
				if (FRIGIDAZZI->get_npc_id() == 0x000C) {
					say("\"Idiot! Dost thou not think that I recognize the after-effects of the Dance of Passion?!\"");
					FRIGIDAZZI->show_npc_face1(var0008);
					say("\"Oh, no...\"");
					UI_remove_npc_face1();
					0x0000->set_conversation_slot();
				} else if ((FRIGIDAZZI->get_npc_id() > 0x000C) && (FRIGIDAZZI->get_npc_id() != 0x0011)) {
					say("\"Thou dost stand there without clothes, and claim to be innocent? Ha!\"");
				} else {
					say("\"A likely story! Listen here, swine -- thou art not the first to try to steal my favorite mistress...\"");
					FRIGIDAZZI->show_npc_face1(var0008);
					say("\"No! Do not do to ",
						var0003,
						" what thou didst to the others...\"");
					UI_remove_npc_face1();
					0x0000->set_conversation_slot();
				}
			} else {
				say("\"Not so fast, peasant! I have a special punishment reserved for those who dare to play games with my mistresses...\"");
				FRIGIDAZZI->show_npc_face1(var0008);
				say("\"No! Do not, Filbercio! Spare this one from thy wrath! Do not send ",
					var0003,
					" into the Pit...\"");
				UI_remove_npc_face1();
				0x0000->set_conversation_slot();
			}
			say("\"I demand that this criminal be punished by the Council of Mages. Let the quorum of Mages be convened instantly!\"");
			UI_play_sound_effect(0x0082);
			UI_end_conversation();
			var0017 = [AVATAR, FRIGIDAZZI, FILBERCIO] & Func098D();
			var0017 = Func0988(PETRA, var0017);
			var0017 = Func0988(MORTEGRO, var0017);
			var0017 = Func0988(STEFANO, var0017);
			for (var0016 in var0017 with var001B to var001C) {
				var000A = var0016->get_npc_name();
				if (var0016->npc_nearby()) {
					var0009 = var0016->get_object_position();
					UI_sprite_effect(ANIMATION_TELEPORT, var0009[0x0001], var0009[0x0002], 0x0000, 0x0000, 0x0000, LOOP_ONCE);
				}
			}
			Func097F(FILBERCIO, "@Vas Ibex Ort!@", 0x0000);
			FILBERCIO->set_schedule_type(WAIT);
			Func097F(AVATAR, "@Hey!@", 0x0009);
			Func097F(FRIGIDAZZI, (("@Do not hurt " + var0003) + "!@"), 0x000B);
			if (FRIGIDAZZI->get_npc_id() == 0x0010) {
				var000A = script FRIGIDAZZI {
					nohalt;
					actor frame bowing;
					actor frame standing;
				};
			}
			var000A = script FILBERCIO after 15 ticks {
				nohalt;
				call Func01C7;
			};
			abort;
		}
		FILBERCIO->set_npc_id(0x0001);
		Func097F(FILBERCIO, "@What is happening?!@", 0x0000);
		var0009 = AVATAR->get_object_position();
		FILBERCIO->si_path_run_usecode(var0009, EGG, FILBERCIO->get_npc_object(), Func01C7, true);
		FILBERCIO->Func07D1();
		var000A = script AVATAR {
			nohalt;
			wait while far 2;
			wait 2;
			call Func01C7;
		};
		abort;
	}
}

extern var Func09A0 0x9A0 (var var0000, var var0001);

void Func01C8 shape#(0x1C8) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;

	var0000 = Func09A0(0x0005, 0x0003);
	if (event == DOUBLECLICK) {
		var0001 = get_item_frame();
		if (var0001 < 0x0006) {
			var0002 = script item after 20 ticks {
				finish;
				nohalt;
				frame 0;
			};
			set_item_frame(0x0006);
			var0002 = script var0000 after 2 ticks {
				nohalt;
				call Func01C8;
			};
			UI_play_sound_effect(0x004A);
		}
	}
	if (event == SCRIPTED) {
		var0003 = UI_click_on_item();
		var0004 = var0003->get_item_shape();
		if (var0004 == 0x0326) {
			gflags[FIXED_BLACK_SWORD] = true;
			var0005 = var0003->get_object_position();
			UI_sprite_effect(ANIMATION_PURPLE_BUBBLES, var0005[0x0001], var0005[0x0002], 0x0000, 0x0000, 0x0000, LOOP_ONCE);
			UI_play_sound_effect(0x0043);
		} else {
			UI_play_sound_effect(0x0030);
		}
	}
}

extern void Func09AD 0x9AD (var var0000);

void Func01D0 shape#(0x1D0) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;

	if (gflags[MONITOR_BANQUET_STARTED]) {
		abort;
	}
	var0000 = set_npc_prop(HEALTH, 5);
	if (UI_get_array_size(AVATAR->find_nearby(0x00E4, 0x001E, MASK_NONE)) > 0x0006) {
		abort;
	}
	var0001 = UI_create_new_object2(0x00E4, [0x0000, 0x0000, 0x0000]);
	if (var0001) {
		var0000 = var0001->approach_avatar(0x005A, 0x0028);
		if (var0000) {
			Func09AD(var0001);
			var0002 = UI_get_party_list();
			for (var0005 in var0002 with var0003 to var0004) {
				set_opponent(var0001);
				set_oppressor(var0001);
			}
		}
	}
	set_item_flag(ASLEEP);
}

extern var Func0954 0x954 ();
extern void Func097F 0x97F (var var0000, var var0001, var var0002);
extern void Func07D2 object#(0x7D2) ();

void Func01D1 shape#(0x1D1) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;

	var0000 = Func0954();
	if (event == SCRIPTED) {
		if (gflags[EQUIPMENT_EXCHANGED]) {
			if (gflags[IOLO_MADE_EQUIPMENT_LIST]) {
				if (gflags[IOLO_SINGS_FAWN] && (!gflags[IOLO_HAS_SUNG_FAWN])) {
					IOLO->show_npc_face0(0x0000);
					var0001 = UI_get_music_track();
					gflags[IOLO_HAS_SUNG_FAWN] = true;
					say("\"Wait, sailor! I shall sing thee mine heart's one song... I fear that it is a sad one --\"");
					UI_play_music(0x003D, var0001);
					say("\"It is a shame, a heartsore shame,\"");
					UI_play_music(0x003E, var0001);
					say("\"That I am singing of my love in vain.\"");
					UI_play_music(0x003B, var0001);
					say("\"For I have lost my lady, my love,\"");
					UI_play_music(0x003C, var0001);
					say("\"And I will search for her, yes, search for her,\"");
					UI_play_music(0x003D, var0001);
					say("\"Even through all the stars above.\"");
					UI_play_music(0x003E, var0001);
					say("\"Gwenno, canst thou hear me? Gwenno, my dear,\"");
					UI_play_music(0x003B, var0001);
					say("\"Take heart for thy beloved Iolo is here!\"");
					UI_play_music(0x003C, var0001);
					UI_remove_npc_face0();
					OLON->revert_schedule();
					OLON->run_schedule();
					OLON->set_schedule_type(WANDER);
					Func097F(DELPHYNIA, "@How sad...@", 0x0000);
					Func097F(JORVIN, "@Catchy tune...@", 0x000A);
					abort;
				}
			} else {
				IOLO->show_npc_face0(0x0000);
				if (!gflags[PROVED_MARSTEN_IS_TRAITOR]) {
					say("\"Please free thine old friend! There hath been a terrible mistake, ",
						var0000,
						"!\"");
					say("\"That storm transported me to this odd city. Because I am a stranger, they arrested me. They say that I am an enchanter!\"");
					say("\"Speak to Lord Marsten, and win my freedom! I know thou shalt not leave me...\"");
				} else {
					say("\"Avatar! Please free thine old friend! Now that Marsten is jailed, please speak to Brendann and win my freedom!\"");
				}
				Func097F(IOLO, "@Return soon...@", 0x0000);
				IOLO->run_schedule();
				gflags[TALKED_TO_IMPRISONED_IOLO] = true;
				abort;
			}
		} else {
			var0002 = IOLO->get_npc_id();
			if (var0002 < 0x000A) {
				UI_lightning();
				if (var0002 == 0x0000) {
					var0003 = AVATAR->get_object_position();
					var0004 = 0x0007;
					UI_sprite_effect(var0004, (var0003[0x0001] - 2), (var0003[0x0002] - 2),  8,  8, 0, LOOP_ONCE);
					UI_sprite_effect(var0004, (var0003[0x0001] - 2), (var0003[0x0002] - 2), -8, -8, 0, LOOP_ONCE);
					UI_sprite_effect(var0004, (var0003[0x0001] - 2), (var0003[0x0002] - 2),  8, -8, 0, LOOP_ONCE);
					UI_sprite_effect(var0004, (var0003[0x0001] - 2), (var0003[0x0002] - 2), -8,  8, 0, LOOP_ONCE);
					UI_sprite_effect(var0004, (var0003[0x0001] - 2), (var0003[0x0002] - 2),  0, -5, 0, LOOP_ONCE);
					UI_sprite_effect(var0004, (var0003[0x0001] - 2), (var0003[0x0002] - 2), -5,  0, 0, LOOP_ONCE);
					UI_sprite_effect(var0004, (var0003[0x0001] - 2), (var0003[0x0002] - 2),  0,  5, 0, LOOP_ONCE);
					UI_sprite_effect(var0004, (var0003[0x0001] - 2), (var0003[0x0002] - 2),  5,  0, 0, LOOP_ONCE);
					UI_sprite_effect(var0004, (var0003[0x0001] - 2), (var0003[0x0002] - 2),  0,  0, 0, LOOP_ONCE);
				}
				if (var0002 == 0x0007) {
					Func097F(DUPRE, "@Is everyone all right?@", 0x0005);
					Func097F(SHAMINO, "@What happened?@", 0x0000);
				}
				if (var0002 == 0x0009) {
					DUPRE->set_schedule_type(WAIT);
					SHAMINO->set_schedule_type(WAIT);
					DUPRE->Func07D2();
					SHAMINO->Func07D2();
					var0005 = script IOLO after 15 ticks {
						nohalt;
						call Func01D1;
					};
				} else {
					var0005 = script IOLO after 0 ticks {
						nohalt;
						call Func01D1;
					};
				}
				IOLO->set_npc_id(var0002 + 0x0001);
				abort;
			}
			IOLO->set_schedule_type(TALK);
			Func097F(IOLO, "@Avatar!@", 0x0000);
		}
	}
}

void Func01D3 shape#(0x1D3) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;

	if (event == DOUBLECLICK) {
		var0000 = get_item_frame();
		if (var0000 < 0x0002) {
			var0001 = UI_click_on_item();
			if (!var0001) {
				return;
			}
			var0002 = var0001->get_item_shape();
			if (var0002 == 0x02D2) {
				var0003 = var0001->get_item_quantity(var0002);
				if (var0003 > 0x0001) {
					var0004 = var0001->set_item_quantity(var0003 - 0x0001);
				} else {
					var0001->remove_item();
				}
				var0005 = UI_create_new_object(0x0238);
				if (var0005) {
					var0004 = var0005->set_item_quantity(0x0001);
					var0006 = AVATAR->get_object_position();
					var0004 = UI_update_last_created([(var0006[0x0001] + 0x0001), var0006[0x0002], var0006[0x0003]]);
					remove_item();
				}
			}
		}
	}
}

extern var Func0994 0x994 ();
extern void Func094A 0x94A (var var0000);

void Func01D6 shape#(0x1D6) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;

	if (event == PATH_FAILURE) {
		if (get_item_frame() == 0x0000) {
			var0000 = find_nearby(0x01D6, 0x0005, MASK_NONE);
		} else {
			var0000 = item;
		}
		if (var0000) {
			halt_scheduled();
			var0000->halt_scheduled();
			var0001 = script var0000 {
				frame 1;
				repeat 6 {
					next frame;
				};
				frame 1;
			};
			var0001 = script item after 11 ticks {
				nohalt;
				call Func01D6;
			};
			var0001 = script AVATAR {
				face south;
				continue;
				repeat 2 {
					actor frame raise_1h;
					actor frame strike_1h;
				};
			};
			var0001 = set_last_created();
			return;
		}
	}
	if (event == SCRIPTED) {
		var0002 = AVATAR->get_object_position();
		var0002[0x0001] += 0x0001;
		var0002[0x0002] += 0x0001;
		set_item_frame(0x0001);
		if (Func0994() == 0x0012) {
			var0001 = set_item_quality(0x000A);
			clear_item_flag(TEMPORARY);
			gflags[GOT_WATER_OF_EMOTION] = true;
		}
		if (Func0994() == 0x0013) {
			var0001 = set_item_quality(0x000B);
			clear_item_flag(TEMPORARY);
			gflags[GOT_WATER_OF_ENTHUSIASM] = true;
		}
		var0001 = UI_update_last_created(var0002);
		return;
	}
	var0003 = "@I believe that using a bucket in a well " + "is often more effective than simply spinning the crank.@";
	Func094A(var0003);
}

extern var Func0906 0x906 (var var0000);
extern var Func0908 0x908 (var var0000, var var0001, var var0002, var var0003, var var0004, var var0005);
extern void Func0902 0x902 (var var0000, var var0001);
extern void Func0909 0x909 (var var0000, var var0001, var var0002, var var0003, var var0004, var var0005, var var0006, var var0007, var var0008);
extern void Func0903 0x903 ();
extern void Func0904 0x904 (var var0000);
extern void Func0905 0x905 (var var0000);

void Func01D7 shape#(0x1D7) () {
	var var0000;

	if ((event != DOUBLECLICK) && (event != SCRIPTED)) {
		return;
	}
	var0000 = Func0906(item);
	if (var0000 == 0x0001) {
		if (Func0908(item, 0x00F6, 0x0000,  0,  0, 0x0007)) {
			Func0902(item, 0x01D7);
			Func0909(item, 0x00E1, 0x0001, 0x0001, 0x0204, 0x0000,  3,  0, 0x0005);
			UI_play_sound_effect2(0x0069, item);
		} else {
			Func0903();
		}
	}
	if (var0000 == 0x0000) {
		if (Func0908(item, 0x00F6, 0x0001,  0,  0, 0x0007)) {
			Func0902(item, 0x01D7);
			Func0909(item, 0x00E1, 0x0000, 0x0002, 0x0204, 0x0001,  0, -3, 0x0007);
			UI_play_sound_effect2(0x006A, item);
		} else {
			Func0903();
		}
	}
	if (var0000 == 0x0002) {
		Func0904(item);
	}
	if (var0000 == 0x0003) {
		Func0905(item);
	}
}

extern var Func0906 0x906 (var var0000);
extern void Func0907 0x907 (var var0000, var var0001);
extern void Func0178 shape#(0x178) ();
extern void Func010E shape#(0x10E) ();
extern void Func01B1 shape#(0x1B1) ();
extern void Func01B0 shape#(0x1B0) ();
extern void Func0607 object#(0x607) ();

void Func01DC shape#(0x1DC) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;
	var var0008;
	var var0009;

	var0000 = UI_click_on_item();
	if (var0000->get_item_shape() == 0x0280) {
		var0001 = AVATAR->find_nearby(0x010E, 0x000A, MASK_ALL_UNSEEN);
		var0001 &= AVATAR->find_nearby(0x0178, 0x000A, MASK_ALL_UNSEEN);
		for (var0004 in var0001 with var0002 to var0003) {
			if (var0004->get_item_quality() == 0x00DB) {
				if (Func0906(var0004) == 0x0002) {
					Func0907(var0004, 0x0000);
					if (var0004->get_item_shape() == 0x0178) {
						var0004->Func0178();
					}
					if (var0004->get_item_shape() == 0x010E) {
						var0004->Func010E();
					}
					if (var0004->get_item_shape() == 0x01B1) {
						var0004->Func01B1();
					}
					if (var0004->get_item_shape() == 0x01B0) {
						var0004->Func01B0();
					}
				}
			}
		}
	} else {
		var0005 = var0000->get_item_weight();
		if ((var0005 < 0x0002) && (var0005 > 0x0000)) {
			UI_close_gumps();
			UI_play_sound_effect(0x0043);
			var0006 = var0000->get_object_position();
			var0007 = var0006[0x0003];
			var0008 = UI_input_numeric_value(0x0000, 0x000E, 0x0001, 0x0000);
			var0009 = script var0000 {
				repeat var0008 - var0007 {
					call Func0607;
				};
			};
		} else {
			UI_play_sound_effect(0x0030);
		}
	}
}

void Func01DE shape#(0x1DE) () {
	var var0000;

	if (event == DEATH) {
		var0000 = get_object_position();
		var0000[0x0001] -= var0000[0x0003] / 0x0002;
		var0000[0x0002] -= var0000[0x0003] / 0x0002;
		UI_sprite_effect(ANIMATION_FIREWORKS, var0000[0x0001], var0000[0x0002], 0x0000, 0x0000, 0x0000, LOOP_ONCE);
		remove_item();
	} else {
		item_say("Kill the Avatar!");
	}
}

extern void Func0948 0x948 (var var0000);
extern void Func09AC 0x9AC (var var0000, var var0001, var var0002, var var0003);

void Func01DF shape#(0x1DF) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;

	var0000 = get_item_frame();
	if (var0000 == 0x0000) {
		var0001 = UI_click_on_item();
		if (var0001 == AVATAR->get_npc_object()) {
			set_item_frame(0x0001);
		} else {
			Func0948(0x003C);
		}
	}
	if (var0000 == 0x0001) {
		var0001 = UI_click_on_item();
		if (var0001->get_item_shape() == 0x0392) {
			if (var0001->get_item_frame() == 0x0001) {
				set_item_frame(0x0000);
				UI_play_sound_effect(0x0039);
				var0002 = var0001->get_object_position();
				UI_sprite_effect(ANIMATION_POOF, var0002[0x0001], var0002[0x0002], 0x0000, 0x0000, 0x0000, LOOP_ONCE);
				UI_play_sound_effect(0x0082);
				var0003 = UI_create_new_object2(0x0219, [var0002[0x0001], (var0002[0x0002] + 0x0002), 0x0000]);
				if (!var0003) {
					UI_error_message("Wolf Creation Failed!");
				}
				var0003->set_item_flag(SI_TOURNAMENT);
				var0003->clear_item_flag(TEMPORARY);
				var0003->set_schedule_type(IN_COMBAT);
				AVATAR->set_oppressor(var0003);
				var0003->set_alignment(EVIL);
				var0004 = var0003->add_cont_items(0x0001, 0x0281, 0x003D, 0x0004, false);
				var0004 = var0003->add_cont_items(0x0003, 0x0194, QUALITY_ANY, 0x0003, false);
				Func09AC(CANTRA, 0x00A0, 0x002E, WAIT);
				CANTRA->remove_npc();
				gflags[SLAIN_WOLF] = true;
				SHMED->set_alignment(CHAOTIC);
				SHMED->set_item_flag(SI_TOURNAMENT);
			} else {
				Func0948(0x003C);
			}
		} else {
			Func0948(0x003C);
		}
	}
}

extern void Func098A 0x98A (var var0000, var var0001);

void Func01E1 shape#(0x1E1) () {
	var var0000;

	if ((event == DOUBLECLICK) || (event == SCRIPTED)) {
		var0000 = get_item_frame();
		if (var0000 > 0x0001) {
			item_say("Burnt out");
		} else {
			Func098A(item, 0x01B3);
		}
	}
}

void Func01E2 shape#(0x1E2) () {
	var var0000;
	var var0001;

	if (event == SCRIPTED) {
		var0000 = AVATAR->find_nearby(0x01E2, 0x0064, MASK_NONE);
		if (var0000) {
			var0001 = var0000->get_object_position();
			UI_sprite_effect(ANIMATION_TELEPORT2, var0001[0x0001], var0001[0x0002], 0x0000, 0x0000, 0x0000, LOOP_ONCE);
			var0000->kill_npc();
		}
	}
}

extern var Func09A0 0x9A0 (var var0000, var var0001);
extern void Func07D7 object#(0x7D7) ();
extern var Func09A6 0x9A6 (var var0000);
extern void Func092F 0x92F (var var0000, var var0001);
extern void Func07D6 object#(0x7D6) ();

void Func01E3 shape#(0x1E3) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;
	var var0008;
	var var0009;
	var var000A;
	var var000B;
	var var000C;
	var var000D;
	var var000E;
	var var000F;
	var var0010;
	var var0011;
	var var0012;

	if ((item == Func09A0(0x0005, 0x0001)) && (event == SCRIPTED)) {
		UI_play_music(0x0027, Func09A0(0x0005, 0x0001));
		item->Func07D7();
		if (!gflags[TEST_LEFT_MONEY]) {
			var0000 = AVATAR->get_cont_items(SHAPE_ANY, QUALITY_ANY, FRAME_ANY);
			for (var0003 in var0000 with var0001 to var0002) {
				var0004 = var0003->get_item_shape();
				if (!((var0004 == 0x01E6) || (var0004 == 0x025F))) {
					var0003->remove_item();
				}
			}
		}
		var0000 = find_nearby(0x0320, 0x002D, MASK_NONE);
		var0005 = false;
		for (var0003 in var0000 with var0006 to var0007) {
			if (var0003->get_object_position() == [0x0AAB, 0x03C1, 0x0000]) {
				var0005 = var0003;
			}
		}
		if (var0005) {
			var0008 = 0x0000;
			var0000 = var0005->get_cont_items(SHAPE_ANY, QUALITY_ANY, FRAME_ANY);
			while (var0008 < 0x0002) {
				for (var0003 in var0000 with var0009 to var000A) {
					if (Func09A6(var0003) || (var0008 == 0x0001)) {
						if (!var0003->set_last_created()) {
							Func092F(AVATAR, 0x000D);
						}
						if (!AVATAR->give_last_created()) {
							Func092F(AVATAR, 0x000E);
						}
					}
				}
				var0008 += 0x0001;
				var0000 = var0005->get_cont_items(SHAPE_ANY, QUALITY_ANY, FRAME_ANY);
			}
		}
		abort;
	}
	var000B = get_item_frame();
	if (var000B != 0x0002) {
		abort;
	}
	if (event == DOUBLECLICK) {
		AVATAR->set_item_flag(DONT_MOVE);
		if (UI_in_gump_mode()) {
			UI_close_gumps();
		}
		AVATAR->halt_scheduled();
		var000C = get_object_position();
		AVATAR->si_path_run_usecode([(var000C[0x0001] - 0x0003), (var000C[0x0002] - 0x0003), 0x0000], PATH_SUCCESS, item, Func01E3, true);
		AVATAR->clear_item_flag(INVISIBLE);
		var000D = find_nearby(0x0320, 0x001E, MASK_NONE);
		var0005 = false;
		for (var0003 in var000D with var000E to var000F) {
			if (var0003->get_object_position() == [0x0AAB, 0x03C1, 0x0000]) {
				var0005 = var0003;
			}
		}
		if (var0005) {
			var0008 = 0x0000;
			var0010 = AVATAR->get_cont_items(SHAPE_ANY, QUALITY_ANY, FRAME_ANY);
			while (var0008 < 0x0002) {
				for (var0003 in var0010 with var0011 to var0012) {
					if (Func09A6(var0003) || (var0008 == 0x0001)) {
						var000D = var0003->get_item_shape();
						if (!((var000D == 0x01E6) || (var000D == 0x025F))) {
							if (!var0003->set_last_created()) {
								Func092F(AVATAR, 0x0011);
							}
							if (!var0005->give_last_created()) {
								Func092F(AVATAR, 0x0012);
							}
						}
					}
				}
				var0008 += 0x0001;
				var0010 = AVATAR->get_cont_items(SHAPE_ANY, QUALITY_ANY, FRAME_ANY);
			}
		}
		if (!gflags[TEST_LEFT_MONEY]) {
			var000D = AVATAR->add_cont_items(0x0001, 0x0321, QUALITY_ANY, 0x0000, 0x0012);
			var0003 = UI_create_new_object(0x0284);
			if (var0003) {
				var0003->clear_item_flag(TEMPORARY);
				var0003->set_item_frame(0x0007);
				var000D = var0003->set_item_quantity(0x0046);
				var000D = AVATAR->give_last_created();
			}
			var000D = AVATAR->add_cont_items(0x0001, 0x02F8, QUALITY_ANY, 0x0000, 0x0012);
			var000D = AVATAR->add_cont_items(0x0001, 0x0286, QUALITY_ANY, 0x0000, 0x0012);
		}
	}
	if (event == SI_PATH_FAILURE) {
		var000C = get_object_position();
		AVATAR->move_object([(var000C[0x0001] - 0x0003), (var000C[0x0002] - 0x0003), 0x0000]);
	}
	if ((event == PATH_SUCCESS) || (event == SI_PATH_FAILURE)) {
		AVATAR->set_item_flag(DONT_MOVE);
		AVATAR->set_schedule_type(WAIT);
		UI_end_conversation();
		var000D = script AVATAR {
			nohalt;
			face FACE_NORTH;
			actor frame bowing;
			actor frame kneeling;
		};
		item->Func07D6();
		var000D = script item after 8 ticks {
			nohalt;
			call Func01E3;
		};
	}
	if (event == SCRIPTED) {
		UI_fade_palette(0x000C, 0x0001, 0x0000);
		var000D = script AVATAR after 4 ticks {
			nohalt;
			face FACE_NORTH;
		};
		AVATAR->move_object([0x0A25, 0x0379, 0x0000]);
		UI_play_sound_effect(0x0066);
		UI_init_conversation();
	}
}

extern var Func0992 0x992 (var var0000, var var0001, var var0002, var var0003);
extern void Func0281 shape#(0x281) ();

void Func01E5 shape#(0x1E5) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;

	if (event == DOUBLECLICK) {
		var0000 = [0x020A, 0x0320, 0x010E, 0x01B0, 0x0178, 0x01B1, 0x0204, 0x00F6, 0x00E1, 0x01D7];
		var0001 = UI_click_on_item();
		var0002 = var0001->get_item_shape();
		if (var0002 in var0000) {
			var0003 = var0001->get_item_quality();
			if (UI_is_on_keyring(var0003)) {
				var0004 = set_item_quality(var0003);
				var0004 = script var0001 {
					nohalt;
					call Func0281;
				};
			} else {
				UI_flash_mouse(CURSOR_HAND);
				var0005 = ["@We don't have that key.@", "@It's not on the keyring.@"];
				var0006 = UI_die_roll(0x0001, 0x0002);
				var0007 = Func0992(0x0001, var0005[var0006], var0005[var0006], true);
			}
		}
	}
}

extern void Func097F 0x97F (var var0000, var var0001, var var0002);
extern var Func0992 0x992 (var var0000, var var0001, var var0002, var var0003);
extern var Func09A0 0x9A0 (var var0000, var var0001);
extern void Func0636 object#(0x636) ();

void Func01EF shape#(0x1EF) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;

	var0000 = get_npc_id();
	if (event == DOUBLECLICK) {
		if (var0000 > 0x0002) {
			if (UI_die_roll(0x0001, 0x0014) == 0x000D) {
				clear_item_say();
				var0001 = script item {
					nohalt;
					say "@Meow@";
					wait 8;
					say "@Meow!@";
					wait 8;
					say "@Meow!@";
					wait 8;
					say "@Meow!@";
					wait 8;
					say "@Meow!@";
					wait 8;
					call Func01EF;
				};
			}
		} else {
			AVATAR->item_say("@Here, kitty, kitty!@");
			set_schedule_type(SHY);
			set_npc_id(var0000 + 0x0001);
			if (SHAMINO->npc_nearby()) {
				Func097F(SHAMINO, "@I hate cats.@", 0x0008);
			}
		}
	}
	if (event == SCRIPTED) {
		var0002 = get_object_position();
		var0002[0x0001] -= var0002[0x0003] / 0x0002;
		var0002[0x0002] -= var0002[0x0003] / 0x0002;
		remove_item();
		UI_sprite_effect(ANIMATION_SMALL_RING_BLAST, var0002[0x0001], var0002[0x0002], 0x0000, 0x0000, 0x0000, LOOP_ONCE);
		UI_play_sound_effect(0x002A);
		var0003 = Func0992(SHAMINO, 0x0000, 0x0000, false);
		Func097F(var0003, "@Bloody cats!@", 0x0008);
	}
	if (event == PROXIMITY) {
		if (gflags[FAR_SIGHT_CAMERA_RESET]) {
			set_npc_id(var0000 + 0x0001);
			if (get_npc_id() == 0x0002) {
				UI_fade_palette(0x000C, 0x0001, 0x0000);
				set_polymorph(0x01EF);
				AVATAR->set_camera();
				AVATAR->clear_item_flag(DONT_MOVE);
				UI_init_conversation();
				var0001 = script Func09A0(0x0005, 0x0001) after 10 ticks {
					nohalt;
					call Func0636;
				};
				set_npc_id(0x0000);
				gflags[FAR_SIGHT_CAMERA_RESET] = false;
				gflags[USING_FAR_SIGHT_MAGIC] = false;
			}
			if (get_npc_id() == 0x0001) {
				UI_fade_palette(0x000C, 0x0001, 0x0001);
				UI_play_music(0x0018, Func09A0(0x0005, 0x0001));
			}
			abort;
		}
		var0001 = script item {
			nohalt;
			say "@Meow!@";
		};
	}
}

void Func01F0 shape#(0x1F0) () {
	var var0000;

	if (event == DOUBLECLICK) {
		AVATAR->item_say("@Good pup.@");
		set_schedule_type(HOUND);
	}
	if (event == PROXIMITY) {
		var0000 = ["@Arf!@", "@Woof!@", "@Bark!@"];
		item_say(var0000[UI_get_random(UI_get_array_size(var0000))]);
	}
}

extern var Func098E 0x98E ();

void Func01F4 shape#(0x1F4) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;

	if (event == DOUBLECLICK) {
		var0000 = Func098E();
		for (var0003 in var0000 with var0001 to var0002) {
			var0004 = script var0003 after UI_die_roll(0x0001, 0x000A) ticks {
				nohalt;
				say "@Moo!@";
			};
			var0004 = script var0003 after UI_die_roll(0x0015, 0x001E) ticks {
				nohalt;
				say "@Moo!@";
			};
		}
	}
	if (event == PROXIMITY) {
		var0004 = script item {
			nohalt;
			say "@Moo!@";
		};
	}
}

extern void Func090D 0x90D (var var0000, var var0001, var var0002, var var0003, var var0004, var var0005, var var0006);

void Func01F8 shape#(0x1F8) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;

	if (event != DOUBLECLICK) {
		return;
	}
	if (UI_in_gump_mode()) {
		UI_close_gumps();
	}
	var0000 = get_barge();
	if (var0000) {
		if (!AVATAR->get_item_flag(ON_MOVING_BARGE)) {
			var0001 = find_nearby(0x01F8, 0x0019, MASK_NONE);
			var0002 = var0001[0x0001];
			for (var0005 in var0001 with var0003 to var0004) {
				var0006 = var0005->get_object_position();
				var0007 = var0002->get_object_position();
				if ((var0006[0x0001] < var0007[0x0001]) && (var0006[0x0002] < var0007[0x0002])) {
					var0002 = var0005;
				}
			}
			Func090D(var0002, 0x0000, 0x0000, 0x0001, Func01F8, var0002, PATH_SUCCESS);
			set_item_flag(ACTIVE_SAILOR);
			AVATAR->clear_item_flag(ACTIVE_SAILOR);
			set_item_flag(ON_MOVING_BARGE);
			var0000->set_item_flag(ACTIVE_BARGE);
		} else {
			clear_item_flag(ACTIVE_SAILOR);
			clear_item_flag(ON_MOVING_BARGE);
			clear_item_flag(ACTIVE_BARGE);
		}
	}
}

extern var Func09A0 0x9A0 (var var0000, var var0001);
extern void Func09B5 0x9B5 ();

void Func01F9 shape#(0x1F9) () {
	var var0000;
	var var0001;

	if (event == DOUBLECLICK) {
		var0000 = get_item_frame();
		if (var0000 == 0x0000) {
			AVATAR->si_path_run_usecode(get_object_position(), SI_PATH_SUCCESS, item, Func01F9, true);
		}
		if (var0000 == 0x0002) {
			obj_sprite_effect(ANIMATION_PURPLE_BUBBLES, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, LOOP_ONCE);
			AVATAR->set_item_flag(READ);
			var0001 = script Func09A0(0x0005, 0x0001) after 100 ticks {
				nohalt;
				call Func01F9;
			};
			UI_play_sound_effect(0x0039);
		}
	}
	if (event == SCRIPTED) {
		AVATAR->clear_item_flag(READ);
		UI_play_sound_effect(0x0030);
	}
	if ((event == SI_PATH_SUCCESS) || (event == SI_PATH_FAILURE)) {
		Func09B5();
	}
}

extern var Func099E 0x99E (var var0000);

void Func01FA shape#(0x1FA) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;

	UI_close_gumps();
	var0000 = Func099E(item);
	if (var0000) {
		UI_play_music(0x002F, var0000);
	} else {
		UI_play_music(0x002F, item);
	}
	var0001 = find_nearby(0x017E, 0x0014, MASK_NONE);
	for (var0004 in var0001 with var0002 to var0003) {
		var0004->set_alignment(NEUTRAL);
		var0004->set_item_flag(ASLEEP);
	}
}

extern var Func0977 0x977 (var var0000);
extern void Func0971 0x971 (var var0000);

void Func0202 shape#(0x202) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;
	var var0008;
	var var0009;

	if (event == BG_PATH_FAILURE) {
		var0000 = [0x0210, 0x0151, 0x0215, 0x01F5, 0x0373, 0x0202, 0x0295, 0x02C2];
		var0001 = Func0977(var0000);
		var0002 = get_npc_id();
		set_polymorph(var0000[var0002]);
	}
	if (event == DEATH) {
		var0003 = get_object_position();
		if (get_npc_id() > 0x0000) {
			var0004 = set_npc_prop(HEALTH, 1);
			var0005 = UI_die_roll(0x0001, 0x000A);
			if (var0005 <= 0x0005) {
				var0003[0x0001] = 0x06B1 + UI_die_roll(0x0000, 0x002D);
				var0003[0x0002] = 0x0751 + UI_die_roll(0x0000, 0x001D);
				move_object(var0003);
			}
			if ((var0005 > 0x0005) && (var0005 <= 0x0009)) {
				var0000 = [0x0210, 0x0151, 0x0215, 0x01F5, 0x0373, 0x0202, 0x0295, 0x02C2];
				var0001 = Func0977(var0000);
				var0002 = UI_die_roll(0x0001, var0001);
				var0006 = AVATAR->find_nearby(0x0202, 0x003C, MASK_NONE);
				for (var0009 in var0006 with var0007 to var0008) {
					if (var0009->get_npc_id()) {
						var0009->clear_item_flag(POLYMORPH);
						var0009->set_npc_id(var0002);
					}
				}
				set_polymorph(var0000[var0002]);
				set_npc_id(var0002);
			}
			if (var0005 == 0x000A) {
				clear_item_flag(SI_TOURNAMENT);
				Func0971(item);
			}
		}
	}
}

extern var Func0906 0x906 (var var0000);
extern var Func0908 0x908 (var var0000, var var0001, var var0002, var var0003, var var0004, var var0005);
extern void Func0902 0x902 (var var0000, var var0001);
extern void Func0909 0x909 (var var0000, var var0001, var var0002, var var0003, var var0004, var var0005, var var0006, var var0007, var var0008);
extern void Func0903 0x903 ();
extern void Func0904 0x904 (var var0000);
extern void Func0905 0x905 (var var0000);

void Func0204 shape#(0x204) () {
	var var0000;

	if ((event != DOUBLECLICK) && (event != SCRIPTED)) {
		return;
	}
	var0000 = Func0906(item);
	if (var0000 == 0x0001) {
		if (Func0908(item, 0x00E1, 0x0000,  0,  3, 0x0001)) {
			Func0902(item, 0x0204);
			Func0909(item, 0x00F6, 0x0001, 0x0002, 0x01D7, 0x0000,  0,  0, 0x0007);
			UI_play_sound_effect2(0x0069, item);
		} else {
			Func0903();
		}
	}
	if (var0000 == 0x0000) {
		if (Func0908(item, 0x00E1, 0x0001, -3,  0, 0x0007)) {
			Func0902(item, 0x0204);
			Func0909(item, 0x00F6, 0x0000, 0x0001, 0x01D7, 0x0001,  0,  0, 0x0007);
			UI_play_sound_effect2(0x006A, item);
		} else {
			Func0903();
		}
	}
	if (var0000 == 0x0002) {
		Func0904(item);
	}
	if (var0000 == 0x0003) {
		Func0905(item);
	}
}

extern var Func0994 0x994 ();
extern void Func09B5 0x9B5 ();
extern void Func09B6 0x9B6 (var var0000, var var0001);

void Func0207 shape#(0x207) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;

	if (event == DOUBLECLICK) {
		if (Func0994() == 0x001F) {
			abort;
		}
		AVATAR->si_path_run_usecode(get_object_position(), SI_PATH_SUCCESS, item, Func0207, true);
	}
	if ((event == SI_PATH_SUCCESS) || ((event == SI_PATH_FAILURE) || (event == SCRIPTED))) {
		var0000 = get_item_frame();
		if ((var0000 == 0x0000) || (get_item_shape() == 0x0310)) {
			Func09B5();
		} else {
			var0001 = 0x01EF;
			var0002 = [0x0B97, 0x0020, 0x0000];
			if ((Func0994() == 0x000D) && (gflags[HARNNA_TALKED_CRYSTAL_BALL] && (!gflags[BATLIN_FLED_SHAMINOS_KEEP]))) {
				gflags[VIEWING_CANTRA_ABDUCTION] = true;
				gflags[KNOW_BATLIN_HAS_CANTRA] = true;
				var0001 = CANTRA;
				var0002 = [0x00CB, 0x0097, 0x0006];
				if (!gflags[USING_FAR_SIGHT_MAGIC]) {
					var0003 = [0x00C8, 0x0097, 0x0006];
					var0004 = UI_create_new_object2(0x013E, var0003);
					if (var0004) {
						var0005 = script var0004 {
							nohalt;
							face south;
							actor frame cast_up;
						};
						var0004->set_item_flag(TEMPORARY);
						var0004->set_schedule_type(WAIT);
						var0005 = var0004->add_cont_items(0x0001, 0x0321, QUALITY_ANY, 0x0000, 0x0012);
					}
				}
			}
			if ((Func0994() == 0x000E) && (gflags[CRYSTAL_BALL_WILL_SHOW_EDRIN] && (!gflags[RESTORED_EDRIN]))) {
				gflags[SAW_EDRIN_TRANSFORM] = true;
				var0001 = EDRIN;
				var0002 = [0x036C, 0x094B, 0x0000];
				ALE->set_polymorph(0x00EF);
				var0006 = [0x037D, 0x095A, 0x0000];
				ALE->move_object(var0006);
				ALE->set_new_schedules(MIDNIGHT, WAIT, [var0006[0x0001], var0006[0x0002]]);
				ALE->run_schedule();
			}
			Func09B6(var0001, var0002);
		}
	}
}

extern void Func02C0 shape#(0x2C0) ();

void Func020A shape#(0x20A) () {
	if (event == DOUBLECLICK) {
		item_say("Locked");
	}
	if (get_item_quality() == 0x00FF) {
		item->Func02C0();
	}
}

void Func020E shape#(0x20E) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;

	if ((event == DOUBLECLICK) || (event == SCRIPTED)) {
		var0000 = get_item_frame();
		if ((var0000 == 0x0000) || ((var0000 == 0x0001) || ((var0000 == 0x0004) || (var0000 == 0x0005)))) {
			return;
		}
		var0001 = find_nearby(0x01B8, 0x000A, MASK_TRANSLUCENT);
		var0002 = get_object_position();
		var0002[0x0001] += 0x0003;
		var0002[0x0002] += 0x0003;
		for (var0005 in var0001 with var0003 to var0004) {
			var0006 = var0005->get_object_position();
			if ((var0002[0x0001] == var0006[0x0001]) && ((var0002[0x0002] == var0006[0x0002]) && (var0002[0x0003] == var0006[0x0003]))) {
				var0005->remove_item();
				set_item_shape(0x0379);
				UI_play_sound_effect2(0x0021, item);
			}
		}
	}
}

void Func0215 shape#(0x215) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;

	if (event == DEATH) {
		var0000 = get_npc_id();
		if (var0000 == 0x0001) {
			clear_item_flag(SI_TOURNAMENT);
			var0001 = UI_create_new_object(0x0281);
			if (var0001) {
				var0001->set_item_frame(0x0013);
				var0002 = var0001->set_item_quality(0x0015);
				var0002 = give_last_created();
				kill_npc();
			}
		}
		if (var0000 == 0x0002) {
			clear_item_flag(SI_TOURNAMENT);
			var0003 = UI_create_new_object(0x0289);
			if (var0003) {
				var0003->set_item_frame(0x0008);
				var0002 = give_last_created();
				kill_npc();
			}
		}
	}
}

void Func0219 shape#(0x219) () {
	if (event == DEATH) {
		clear_item_flag(SI_TOURNAMENT);
		reduce_health(0x0037, NORMAL_DAMAGE);
	}
}

extern void Func094F 0x94F (var var0000, var var0001);
extern void Func097F 0x97F (var var0000, var var0001, var var0002);
extern var Func09A0 0x9A0 (var var0000, var var0001);
extern void Func09B2 0x9B2 ();
extern var Func099B 0x99B (var var0000, var var0001, var var0002, var var0003, var var0004, var var0005, var var0006);
extern var Func098D 0x98D ();
extern void Func09AC 0x9AC (var var0000, var var0001, var var0002, var var0003);
extern var Func08F1 0x8F1 ();
extern var Func0992 0x992 (var var0000, var var0001, var var0002, var var0003);
extern var Func0988 0x988 (var var0000, var var0001);
extern void Func0636 object#(0x636) ();

void Func0235 shape#(0x235) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;
	var var0008;
	var var0009;
	var var000A;
	var var000B;

	if (event == SI_PATH_FAILURE) {
		if ((BRENDANN->get_npc_id() == 0x0008) && (item == AVATAR->get_npc_object())) {
			event = SI_PATH_SUCCESS;
		}
		if ((BRENDANN->get_npc_id() == 0x0006) && (item == BRENDANN->get_npc_object())) {
			BRENDANN->set_schedule_type(WAIT);
			BRENDANN->set_npc_id(0x0007);
			var0000 = script BRENDANN {
				nohalt;
				call Func0235;
			};
			var0000 = "@Thank thee...@" & "@Goodbye!@";
			Func094F(BRENDANN, var0000);
			abort;
		}
		if ((BRENDANN->get_npc_id() == 0x0002) && (item == AVATAR->get_npc_object())) {
			AVATAR->clear_item_say();
			Func097F(AVATAR, "@Yes!@", 0x0004);
			BRENDANN->clear_item_say();
			Func097F(BRENDANN, "@Oh, my!@", 0x0007);
			AVATAR->set_schedule_type(WAIT);
			gflags[TEMP_FLAG_2] = true;
			if (gflags[TEMP_FLAG_3]) {
				BRENDANN->set_npc_id(0x0003);
				var0000 = script AVATAR {
					nohalt;
					face north;
					call Func0235;
					actor frame sleeping;
				};
			} else {
				var0000 = script AVATAR {
					nohalt;
					face north;
					actor frame sleeping;
				};
			}
			abort;
		}
		if ((BRENDANN->get_npc_id() > 0x0000) && (item == AVATAR->get_npc_object())) {
			event = SI_PATH_SUCCESS;
		}
		if ((BRENDANN->get_npc_id() > 0x0000) && (item == BRENDANN->get_npc_object())) {
			BRENDANN->set_schedule_type(WAIT);
			gflags[TEMP_FLAG_1] = true;
			var0000 = find_nearby(0x03F3, 0x000A, MASK_NONE);
			for (var0003 in var0000 with var0001 to var0002) {
				if (var0003->get_item_frame() == 0x000D) {
					var0003->set_item_frame(0x000E);
				}
			}
			var0000 = script BRENDANN {
				nohalt;
				face north;
				call Func0235;
				actor frame sleeping;
			};
			abort;
		}
		if ((BRENDANN->get_npc_id() == 0x0000) && (item == BRENDANN->get_npc_object())) {
			event = SI_PATH_SUCCESS;
		}
	}
	if (event == SI_PATH_SUCCESS) {
		set_schedule_type(WAIT);
		if ((BRENDANN->get_npc_id() == 0x0008) && (item == AVATAR->get_npc_object())) {
			AVATAR->set_polymorph(0x02D1);
			UI_play_sound_effect(0x0001);
			AVATAR->clear_item_flag(DONT_MOVE);
			UI_init_conversation();
			Func097F(AVATAR, "@What a beautiful morning!@", 0x0000);
			UI_play_music(0x0016, Func09A0(0x0005, 0x0001));
			abort;
		}
		if ((BRENDANN->get_npc_id() == 0x0006) && (item == BRENDANN->get_npc_object())) {
			BRENDANN->set_npc_id(0x0007);
			var0000 = script BRENDANN {
				nohalt;
				face west;
				wait 2;
				actor frame bowing;
				sfx 36;
				wait 2;
				actor frame standing;
				call Func0235;
			};
			var0000 = "@Thank thee...@" & "@Goodbye!@";
			Func094F(BRENDANN, var0000);
			abort;
		}
		if ((BRENDANN->get_npc_id() == 0x0002) && (item == AVATAR->get_npc_object())) {
			AVATAR->clear_item_say();
			Func097F(AVATAR, "@Yes!@", 0x0004);
			BRENDANN->clear_item_say();
			Func097F(BRENDANN, "@Oh, my!@", 0x0007);
			AVATAR->set_schedule_type(WAIT);
			gflags[TEMP_FLAG_2] = true;
			if (gflags[TEMP_FLAG_3]) {
				BRENDANN->set_npc_id(0x0003);
				var0000 = script AVATAR {
					nohalt;
					face north;
					wait 2;
					actor frame bowing;
					sfx 134;
					wait 2;
					actor frame sleeping;
					wait 2;
					call Func0235;
				};
			} else {
				var0000 = script AVATAR {
					nohalt;
					face north;
					wait 2;
					actor frame bowing;
					sfx 134;
					wait 2;
					actor frame sleeping;
				};
			}
			abort;
		}
		if ((BRENDANN->get_npc_id() > 0x0000) && (item == AVATAR->get_npc_object())) {
			AVATAR->set_schedule_type(WAIT);
			BRENDANN->set_npc_id(0x0002);
			Func09B2();
			UI_play_sound_effect(0x0001);
			var0000 = script AVATAR {
				nohalt;
				call Func0235;
			};
			abort;
		}
		if ((BRENDANN->get_npc_id() > 0x0000) && (item == BRENDANN->get_npc_object())) {
			gflags[TEMP_FLAG_1] = true;
			var0000 = find_nearby(0x03F3, 0x000A, MASK_NONE);
			for (var0003 in var0000 with var0004 to var0005) {
				if (var0003->get_item_frame() == 0x000D) {
					var0003->set_item_frame(0x000E);
				}
			}
			var0000 = script BRENDANN {
				nohalt;
				face north;
				wait 2;
				actor frame bowing;
				sfx 134;
				wait 2;
				call Func0235;
				actor frame sleeping;
			};
			abort;
		}
		if ((BRENDANN->get_npc_id() == 0x0000) && (item == BRENDANN->get_npc_object())) {
			BRENDANN->clear_item_say();
			Func097F(BRENDANN, "@I am so ready...@", 0x0003);
			BRENDANN->set_polymorph(0x00E5);
			UI_play_sound_effect(0x0001);
			BRENDANN->set_npc_id(0x0001);
			BRENDANN->set_schedule_type(WAIT);
			AVATAR->si_path_run_usecode([0x03A7, 0x0A43, 0x0000], SI_PATH_SUCCESS, AVATAR->get_npc_object(), Func0235, false);
			UI_set_path_failure(Func0235, AVATAR->get_npc_object(), SI_PATH_FAILURE);
			AVATAR->clear_item_say();
			Func097F(AVATAR, "@I should change...@", 0x0000);
			var0000 = script BRENDANN {
				nohalt;
				actor frame cast_up;
				wait 2;
				call Func0235;
			};
			abort;
		}
	}
	if (event == SCRIPTED) {
		if (gflags[TEMP_FLAG_1] && (item == BRENDANN->get_npc_object())) {
			gflags[TEMP_FLAG_1] = false;
			BRENDANN->set_npc_id(0x0003);
			BRENDANN->move_object([0x03A3, 0x0A4A, 0x0001]);
			gflags[TEMP_FLAG_3] = true;
			if (gflags[TEMP_FLAG_2]) {
				BRENDANN->set_npc_id(0x0003);
				var0000 = script BRENDANN {
					nohalt;
					call Func0235;
				};
			}
			abort;
		}
		if (BRENDANN->get_npc_id() == 0x0008) {
			AVATAR->clear_item_say();
			Func097F(AVATAR, "@I should dress myself...@", 0x0003);
			AVATAR->si_path_run_usecode([0x03A7, 0x0A43, 0x0000], SI_PATH_SUCCESS, AVATAR->get_npc_object(), Func0235, false);
			UI_set_path_failure(Func0235, AVATAR->get_npc_object(), SI_PATH_FAILURE);
			abort;
		}
		if (BRENDANN->get_npc_id() == 0x0007) {
			BRENDANN->set_npc_id(0x0008);
			BRENDANN->run_schedule();
			var0000 = script AVATAR after 5 ticks {
				nohalt;
				call Func0235;
			};
			abort;
		}
		if (BRENDANN->get_npc_id() == 0x0006) {
			BRENDANN->si_path_run_usecode([0x03A4, 0x0A47, 0x0000], SI_PATH_SUCCESS, BRENDANN->get_npc_object(), Func0235, false);
			UI_set_path_failure(Func0235, BRENDANN->get_npc_object(), SI_PATH_FAILURE);
			abort;
		}
		if (BRENDANN->get_npc_id() == 0x0005) {
			BRENDANN->set_npc_id(0x0006);
			UI_init_conversation();
			BRENDANN->show_npc_face0(0x0000);
			say("\"Once again, thou hast proved thyself to be the love of my life. When I write my book, I shall dedicate it to thee, my love.\"");
			UI_end_conversation();
			var0000 = script BRENDANN {
				nohalt;
				call Func0235;
			};
			abort;
		}
		if (BRENDANN->get_npc_id() == 0x0004) {
			BRENDANN->set_npc_id(0x0006);
			UI_init_conversation();
			BRENDANN->show_npc_face0(0x0000);
			say("\"Thou art the woman of my dreams! I have never felt so refreshed. What an experience...\"");
			say("\"As a sign of mine appreciation and great affection for thee, please accept this gift. It is my greatest possession.\"");
			say("\"Gwani cloaks are most rare, and are worn by the Goblins as a token of great bravery. I slew the chieftain who once wore this cloak!\"");
			say("\"Please wear it, and remember me always.\"");
			BRENDANN->clear_item_say();
			Func097F(BRENDANN, "@Always...@", 0x0000);
			var0000 = Func099B(AVATAR, 0x0001, 0x00E3, QUALITY_ANY, 0x0004, 0x0000, true);
			UI_end_conversation();
			gflags[GAINED_GWANI_CLOAK] = true;
			var0000 = script BRENDANN {
				nohalt;
				call Func0235;
			};
			abort;
		}
		if (BRENDANN->get_npc_id() == 0x0003) {
			gflags[TEMP_FLAG_2] = false;
			gflags[TEMP_FLAG_3] = false;
			if (gflags[GAINED_GWANI_CLOAK]) {
				BRENDANN->set_npc_id(0x0005);
			} else {
				BRENDANN->set_npc_id(0x0004);
			}
			UI_fade_palette(0x000C, 0x0001, 0x0000);
			UI_advance_time(0x05DC * 0x000C);
			var0000 = Func098D();
			for (var0003 in var0000 with var0006 to var0007) {
				if (var0003->npc_nearby2()) {
					Func09AC(var0003, 0x0409, 0x0A4F, EAT_AT_INN);
				}
			}
			BRENDANN->move_object([0x03A4, 0x0A52, 0x0000]);
			BRENDANN->set_schedule_type(WAIT);
			AVATAR->move_object([0x03A3, 0x0A4A, 0x0001]);
			BRENDANN->set_polymorph(0x0235);
			var0000 = script BRENDANN after 30 ticks {
				nohalt;
				face west;
				actor frame sitting;
				wait 2;
				call Func0636;
				wait 2;
				actor frame bowing;
				actor frame standing;
				face north;
				wait 2;
				call Func0235;
			};
			AVATAR->clear_item_say();
			Func097F(AVATAR, "@Where am I?@", 0x0023);
			BRENDANN->clear_item_say();
			Func097F(BRENDANN, "@Darling...@", 0x001F);
			abort;
		}
		if (BRENDANN->get_npc_id() == 0x0002) {
			AVATAR->clear_item_say();
			Func097F(AVATAR, "@I am ready...@", 0x0000);
			BRENDANN->clear_item_say();
			Func097F(BRENDANN, "@As am I!@", 0x0003);
			AVATAR->si_path_run_usecode([0x03A4, 0x0A4B, 0x0000], SI_PATH_SUCCESS, AVATAR->get_npc_object(), Func0235, false);
			UI_set_path_failure(Func0235, AVATAR->get_npc_object(), SI_PATH_FAILURE);
			abort;
		}
		if (BRENDANN->get_npc_id() == 0x0001) {
			BRENDANN->si_path_run_usecode([0x03A3, 0x0A4B, 0x0000], SI_PATH_SUCCESS, BRENDANN->get_npc_object(), Func0235, false);
			UI_set_path_failure(Func0235, BRENDANN->get_npc_object(), SI_PATH_FAILURE);
			abort;
		}
		if (BRENDANN->get_npc_id() == 0x0000) {
			BRENDANN->show_npc_face0(0x0000);
			if (Func08F1() < 0x000F) {
				say("\"I have been ready since the moment I first saw thee!\"");
				if (UI_get_array_size(UI_get_party_list()) > 0x0001) {
					var0008 = Func0992(0x0001, "@Er, um, I believe I need some fresh air... I'll wait at the pub.@", 0x0000, false);
					var0000 = Func0988(AVATAR->get_npc_object(), UI_get_party_list2());
					for (var000B in var0000 with var0009 to var000A) {
						var000B->remove_from_party();
						var000B->set_new_schedules(MIDNIGHT, WANDER, [0x03B4, 0x0A6F]);
						var000B->run_schedule();
					}
					Func097F(var000B, "@Farewell...@", 0x0000);
				}
				UI_end_conversation();
				AVATAR->set_item_flag(DONT_MOVE);
				BRENDANN->si_path_run_usecode([0x03A5, 0x0A43, 0x0000], SI_PATH_SUCCESS, BRENDANN->get_npc_object(), Func0235, false);
				UI_set_path_failure(Func0235, BRENDANN->get_npc_object(), SI_PATH_FAILURE);
				BRENDANN->clear_item_say();
				Func097F(BRENDANN, "@Come, my love!@", 0x0000);
				abort;
			}
			say("\"This is not a good time, my love. Perhaps thou couldst come some other morning.\"");
			Func097F(BRENDANN, "@Adieu...@", 0x0000);
			BRENDANN->set_schedule_type(SHY);
			abort;
		}
	}
}

extern void Func090D 0x90D (var var0000, var var0001, var var0002, var var0003, var var0004, var var0005, var var0006);
extern void Func094A 0x94A (var var0000);

void Func0247 shape#(0x247) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;

	if ((event == DOUBLECLICK) && (!get_container())) {
		var0000 = get_object_position();
		if (get_item_frame() == 0x0000) {
			var0001 = set_last_created();
			if (var0001) {
				var0002 = UI_is_not_blocked(var0000, 0x03F3, 0x0015);
				var0001 = UI_update_last_created(var0000);
				if (var0002 && var0001) {
					UI_close_gumps();
					var0003 = [-1, -1, -1,  0,  0,  0,  1,  1,  1];
					var0004 = [ 1,  0, -1,  1,  0, -1,  1,  0, -1];
					AVATAR->halt_scheduled();
					Func090D(item, var0003, var0004, -1, Func0247, item, PATH_SUCCESS);
				} else {
					var0000[0x0002] -= 0x0005;
					Func094A("@There is no room for thy bedroll there.@");
				}
			}
		}
	}
	if (event == PATH_SUCCESS) {
		var0001 = script AVATAR {
			face FACE_NORTH;
			actor frame bowing;
			actor frame standing;
		};
		var0001 = script item {
			wait 2;
			call Func0247;
		};
	}
	if (event == SCRIPTED) {
		set_item_shape(0x03F3);
		set_item_frame(0x0015);
	}
}

extern void Func097F 0x97F (var var0000, var var0001, var var0002);
extern void Func0526 object#(0x526) ();

void Func024C shape#(0x24C) () {
	var var0000;

	if (get_npc_number() == VASCULIO) {
		AVATAR->set_item_flag(DONT_MOVE);
		Func097F(VASCULIO, "@Ahhh, a victim...@", 0x0000);
		var0000 = script item {
			nohalt;
			wait 10;
			call Func0526;
		};
		abort;
	}
}

extern void Func098A 0x98A (var var0000, var var0001);

void Func0253 shape#(0x253) () {
	if ((event == DOUBLECLICK) || (event == SCRIPTED)) {
		Func098A(item, 0x02BD);
	}
}

void Func025F shape#(0x25F) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;

	if (event == PATH_FAILURE) {
		var0000 = AVATAR->find_nearest(0x025F, 0x0003);
		var0001 = var0000->get_item_frame();
		var0002 = 0x0000;
		if (var0001 == 0x0000) {
			var0002 = 0x0003;
		}
		if (var0001 == 0x0001) {
			var0002 = 0x0005;
		}
		if (var0001 == 0x0002) {
			var0002 = 0x0007;
		}
		if (var0001 == 0x0003) {
			var0002 = 0x0001;
		}
		var0003 = script AVATAR {
			face var0002;
			continue;
			actor frame bowing;
		};
		var0003 = script item after 2 ticks {
			nohalt;
			call Func025F;
		};
	}
	if (event == SCRIPTED) {
		var0004 = AVATAR->get_object_position();
		var0000 = AVATAR->find_nearest(0x025F, 0x0003);
		var0001 = var0000->get_item_frame();
		if (var0001 == 0x0000) {
			var0004[0x0001] -= 0x0001;
			var0004[0x0002] += 0x0001;
		}
		if (var0001 == 0x0001) {
			var0004[0x0001] -= 0x0001;
			var0004[0x0002] -= 0x0001;
		}
		if (var0001 == 0x0002) {
			var0004[0x0001] -= 0x0000;
			var0004[0x0002] -= 0x0001;
		}
		if (var0001 == 0x0003) {
			var0004[0x0001] -= 0x0002;
			var0004[0x0002] -= 0x0000;
		}
		var0003 = set_last_created();
		if (var0003) {
			if (get_item_frame() == 0x0000) {
				set_item_frame(0x0001);
				if (gflags[PLACED_LODESTONE_OF_HATE] && (gflags[PLACED_LODESTONE_OF_HAPPINESS] && (gflags[PLACED_LODESTONE_OF_DESPAIR] && gflags[PLACED_LODESTONE_OF_LOVE]))) {
					var0003 = set_item_quality(0x000A);
					gflags[GOT_WATER_OF_EMOTION] = true;
					clear_item_flag(TEMPORARY);
				}
			} else if (get_item_frame() < 0x0006) {
				set_item_frame(0x0000);
			}
			var0003 = UI_update_last_created(var0004);
		}
	}
}

extern void Func097F 0x97F (var var0000, var var0001, var var0002);

void Func0266 shape#(0x266) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;
	var var0008;
	var var0009;
	var var000A;
	var var000B;
	var var000C;
	var var000D;
	var var000E;
	var var000F;
	var var0010;
	var var0011;

	if (event == SCRIPTED) {
		var0000 = find_nearby(SHAPE_ANY, 0x003C, MASK_NPC2);
		for (var0003 in var0000 with var0001 to var0002) {
			if (!var0003->get_item_flag(IN_PARTY)) {
				var0003->run_schedule();
				var0003->clear_item_say();
			}
		}
		abort;
	}
	var0004 = UI_input_numeric_value(0x0000, 0x0008, 0x0001, 0x0000);
	PARTY->clear_item_say();
	if (var0004 == 0x0000) {
		UI_play_music(0x00FF, item);
		var0000 = find_nearby(SHAPE_ANY, 0x0028, MASK_NPC2);
		for (var0003 in var0000 with var0005 to var0006) {
			if (!var0003->get_item_flag(IN_PARTY)) {
				var0003->run_schedule();
			}
		}
	}
	if (var0004 == 0x0001) {
		Func097F(IOLO, "@Ahhh, Stones!@", 0x0002);
		Func097F(SHAMINO, "@Not Stones again...@", 0x000A);
		UI_play_music(0x000D, item);
		var0000 = find_nearby(SHAPE_ANY, 0x0028, MASK_NPC2);
		for (var0003 in var0000 with var0007 to var0008) {
			if (!var0003->get_item_flag(IN_PARTY)) {
				var0003->set_schedule_type(EAT_AT_INN);
				var0003->clear_item_flag(ASLEEP);
			}
		}
	}
	if (var0004 == 0x0002) {
		Func097F(DUPRE, "@This is familiar...@", 0x0003);
		Func097F(SHAMINO, "@Let us hear a real tune...@", 0x0014);
		UI_play_music(0x0011, item);
	}
	if (var0004 == 0x0003) {
		Func097F(SHAMINO, "@Ahh, my favorite tune...@", 0x0005);
		UI_play_music(0x0013, item);
	}
	if (var0004 == 0x0004) {
		Func097F(AVATAR, "@Ahhh, pretty.@", 0x0002);
		Func097F(IOLO, "@I do think I am sleepy...@", 0x0011);
		UI_play_music(0x001F, item);
		var0000 = find_nearby(SHAPE_ANY, 0x0028, MASK_NPC2);
		for (var0003 in var0000 with var0009 to var000A) {
			if (!var0003->get_item_flag(IN_PARTY)) {
				var0003->set_schedule_type(MAJOR_SIT);
				var0003->clear_item_flag(ASLEEP);
			}
		}
	}
	if (var0004 == 0x0005) {
		UI_play_music(0x0017, item);
		Func097F(MIGGIM, "@Another tune!@", 0x0002);
		Func097F(IOLO, "@This tune is most dark...@", 0x000A);
	}
	if (var0004 == 0x0006) {
		Func097F(SHAMINO, "@Perchance a game of darts?@", 0x0003);
		Func097F(AVATAR, "@Too slow...@", 0x000A);
		Func097F(DUPRE, "@Another song perhaps...@", 0x000F);
		UI_play_music(0x0015, item);
		var0000 = find_nearby(SHAPE_ANY, 0x0028, MASK_NPC2);
		for (var0003 in var0000 with var000B to var000C) {
			if (!var0003->get_item_flag(IN_PARTY)) {
				var0003->set_schedule_type(WANDER);
				var0003->clear_item_flag(ASLEEP);
			}
		}
	}
	if (var0004 == 0x0007) {
		UI_play_music(0x000C, item);
		Func097F(AVATAR, "@Not 'Sea Shanty!'@", 0x0003);
		Func097F(IOLO, "@Cease!@", 0x000A);
		var0000 = find_nearby(SHAPE_ANY, 0x0028, MASK_NPC2);
		for (var0003 in var0000 with var000D to var000E) {
			if (!var0003->get_item_flag(IN_PARTY)) {
				var0003->set_schedule_type(IN_COMBAT);
				var0003->clear_item_flag(ASLEEP);
			}
		}
	}
	if (var0004 == 0x0008) {
		Func097F(AVATAR, "@Everyone dance!@", 0x0000);
		UI_play_music(0x0010, item);
		var0000 = find_nearby(SHAPE_ANY, 0x0028, MASK_NPC2);
		for (var0003 in var0000 with var000F to var0010) {
			if (!var0003->get_item_flag(IN_PARTY)) {
				var0003->set_schedule_type(DANCE);
				var0003->clear_item_flag(ASLEEP);
			}
		}
	}
	ALE->run_schedule();
	var0011 = script item after 32 ticks {
		nohalt;
		call Func0266;
	};
	abort;
}

extern void Func08AD 0x8AD (var var0000, var var0001, var var0002, var var0003);

void Func0268 shape#(0x268) () {
	var var0000;

	var0000 = UI_click_on_item();
	Func08AD(item, 0x0001, 0x0024, var0000);
}

extern var Func090C 0x90C (var var0000, var var0001);

void Func0269 shape#(0x269) () {
	var var0000;
	var var0001;
	var var0002;

	if (event == PATH_FAILURE) {
		var0000 = Func090C(AVATAR, item);
		var0001 = script AVATAR {
			face var0000;
			continue;
			actor frame bowing;
		};
		var0001 = script item after 2 ticks {
			nohalt;
			call Func0269;
		};
	}
	if (event == SCRIPTED) {
		var0002 = AVATAR->get_object_position();
		var0002[0x0001] -= 0x0004;
		var0002[0x0002] -= 0x0000;
		var0001 = set_last_created();
		if (var0001) {
			if (get_item_frame() == 0x0000) {
				set_item_frame(0x0001);
				clear_item_flag(TEMPORARY);
				var0001 = set_item_quality(0x000B);
				gflags[GOT_WATER_OF_ENTHUSIASM] = true;
			} else if (get_item_frame() < 0x0006) {
				set_item_frame(0x0000);
			}
		}
		var0001 = UI_update_last_created(var0002);
	}
}

extern void Func0971 0x971 (var var0000);
extern var Func0906 0x906 (var var0000);
extern void Func0907 0x907 (var var0000, var var0001);
extern void Func0949 0x949 (var var0000);
extern void Func094A 0x94A (var var0000);

void Func0273 shape#(0x273) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;
	var var0008;
	var var0009;

	if (event == DOUBLECLICK) {
		var0000 = UI_click_on_item();
		UI_play_sound_effect2(0x0044, item);
		var0001 = var0000->get_item_shape();
		var0002 = var0000->get_item_quality();
		if (UI_die_roll(0x0001, 0x001E) < AVATAR->get_npc_prop(DEXTERITY)) {
			var0003 = true;
		} else {
			var0003 = false;
		}
		if (var0001 == 0x020A) {
			if ((var0002 == 0x0000) && var0003) {
				var0000->set_item_shape(0x0320);
				var0000->item_say("Unlocked");
				return;
			}
			if ((var0002 == 0x00FF) && var0003) {
				var0004 = UI_create_new_object(0x02C0);
				if (var0004) {
					UI_close_gumps();
					var0005 = UI_update_last_created(var0000->get_object_position());
					var0005 = var0004->attack_object(var0004, 0x02C0);
					if (var0003) {
						var0000->item_say("Unlocked");
						var0000->set_item_shape(0x0320);
					}
				}
				return;
			}
			var0000->item_say("Pick broke");
			Func0971(item);
			return;
		}
		var0006 = [0x0178, 0x010E, 0x01B0, 0x01B1];
		for (var0009 in var0006 with var0007 to var0008) {
			if (var0001 == var0009) {
				if (var0002 == 0x0000) {
					if (Func0906(var0000) == 0x0002) {
						if (var0003) {
							Func0907(var0000, 0x0000);
							var0000->item_say("Unlocked");
						} else {
							var0000->item_say("Pick broke");
							Func0971(item);
						}
						return;
					}
				} else {
					Func0949("@'Tis strange that did not work.@");
					return;
				}
			}
		}
		Func094A("@Mayhaps thou shouldst try those on a locked chest or door.@");
	}
}

void Func0275 shape#(0x275) () {
	var var0000;
	var var0001;

	if (event == DOUBLECLICK) {
		var0000 = UI_click_on_item();
	} else {
		var0000 = item;
	}
	var0001 = script AVATAR {
		nohalt;
		actor frame ready;
		actor frame raise_2h;
		actor frame strike_2h;
		attack;
		actor frame ready;
	};
	var0001 = AVATAR->set_to_attack(var0000, 0x0275);
}

void Func0276 shape#(0x276) () {
	var var0000;
	var var0001;

	if (event == DOUBLECLICK) {
		var0000 = UI_click_on_item();
	} else {
		var0000 = item;
	}
	AVATAR->halt_scheduled();
	var0001 = script AVATAR {
		nohalt;
		actor frame ready;
		actor frame raise_2h;
		actor frame strike_2h;
		attack;
		actor frame ready;
	};
	var0001 = AVATAR->set_to_attack(var0000, 0x0276);
}

extern var Func099D 0x99D (var var0000);
extern var Func09A0 0x9A0 (var var0000, var var0001);

void Func0280 shape#(0x280) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;
	var var0008;
	var var0009;
	var var000A;

	if (event == DOUBLECLICK) {
		UI_close_gumps();
		var0000 = UI_get_party_list();
		var0001 = 0x0001;
		var0002 = find_nearby(SHAPE_ANY, ON_SCREEN, MASK_NPC2);
		for (var0005 in var0002 with var0003 to var0004) {
			if (var0005->get_npc_number() in var0000) {
				var0006 = UI_die_roll(0x0001, 0x000F);
			} else {
				var0006 = UI_die_roll(0x0001, 0x0006);
			}
			var0007 = var0005->get_alignment();
			if ((var0007 == EVIL) || (var0007 == CHAOTIC)) {
				var0006 -= 0x0001;
			}
			var0008 = UI_game_hour();
			if (((var0008 > -1) && (var0008 < 0x0006)) || (var0008 > 0x0015)) {
				var0006 -= 0x0001;
			}
			if (var0006 < 0x0002) {
				UI_play_sound_effect(0x0008);
				var0005->set_item_flag(POISONED);
				if (Func099D(item) && (var0001 != 0x0000)) {
					if (var0001 < 0x0005) {
						var0009 = Func09A0(0x0004, var0001);
					}
					if (var0001 < 0x0009) {
						var0009 = Func09A0(0x0000, var0001);
					}
					if (var0001 == 0x0009) {
						abort;
					}
				} else {
					var0009 = item;
				}
				var000A = var0009->set_to_attack(var0005, 0x01A8);
				var000A = script var0009 {
					attack;
				};
				var0001 += 0x0001;
			}
		}
	}
}

extern void Func0971 0x971 (var var0000);
extern void Func097F 0x97F (var var0000, var var0001, var var0002);
extern void Func08D9 0x8D9 (var var0000);
extern void Func020A shape#(0x20A) ();
extern void Func068B object#(0x68B) ();

void Func0281 shape#(0x281) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;
	var var0008;
	var var0009;
	var var000A;

	do {
		if (event == SCRIPTED) {
			var0000 = item;
		} else {
			if (!(event == DOUBLECLICK)) {
				break;
			}
			var0000 = UI_click_on_item();
		}
		UI_play_sound_effect2(0x0044, item);
		var0001 = var0000->get_item_shape();
		var0002 = get_item_quality();
		var0003 = var0000->get_item_quality();
		if ((var0001 == 0x01E5) && (get_item_shape() == 0x0281)) {
			if (((get_item_frame() == 0x0015) || (get_item_frame() == 0x0016)) && (get_item_quality() == 0x0000)) {
				var0004 = script item {
					nohalt;
					call Func068B;
				};
				abort;
			}
			UI_add_to_keyring(var0002);
			Func0971(item);
			abort;
		}
		if (get_item_quality() == 0x00BA) {
			if ((!ROTOLUNCIA->get_item_flag(DEAD)) && ((var0000->get_item_quality() == 0x00BA) && ((var0001 == 0x0178) && (!gflags[FIGHT_ROTOLUNCIA])))) {
				ROTOLUNCIA->set_schedule_type(TALK);
				ROTOLUNCIA->set_item_flag(SI_TOURNAMENT);
				Func097F(ROTOLUNCIA, "@Aha!@", 0x0000);
				var0005 = find_nearby(0x016B, 0x001E, MASK_NONE);
				for (var0008 in var0005 with var0006 to var0007) {
					var0008->set_schedule_type(HOUND);
				}
			}
		}
		if (get_item_quality() == 0x0075) {
			if (var0000->get_item_quality() == 0x0075) {
				gflags[UNLOCKED_MINT] = true;
			}
			if ((!gflags[GOT_GOLD_BARS]) && ((var0000->get_item_quality() == 0x0075) && (!SELINA->get_item_flag(IN_PARTY)))) {
				SELINA->add_to_party();
				Func097F(SELINA, "@Wait for me!@", 0x0002);
			}
		}
		if (var0000[0x0001]->get_item_shape() in [0x0178, 0x010E, 0x01B0, 0x01B1]) {
			if (var0002 == var0003) {
				Func08D9(var0000);
			}
		}
		if (var0001 == 0x020A) {
			if (var0002 == var0003) {
				var0000->item_say("Unlocked");
				var0000->set_item_shape(0x0320);
				if (var0003 == 0x00FF) {
					var0000->Func020A();
				}
			}
		}
		if (var0001 == 0x0320) {
			if (var0002 == var0003) {
				var0009 = var0000->get_cont_items(0x0281, var0002, FRAME_ANY);
				var000A = false;
				while (var0009) {
					if (var0009 == var0000) {
						var000A = true;
						break;
					}
					var0009 = var0009->get_container();
				}
				if (var000A) {
					AVATAR->item_say("Key inside");
				} else {
					var0000->close_gump();
					var0000->set_item_shape(0x020A);
					var0000->item_say("Locked");
				}
			}
		}
	} while (false);
}

void Func0282 shape#(0x282) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;

	if (event == DOUBLECLICK) {
		UI_play_sound_effect2(0x005E, item);
		book_mode();
		var0000 = get_item_quality();
		if (var0000 == 0x0000) {
			say("~~ ~~PHIL'S GUIDE TO UNFINISHED USECODE~~  ~~by Phil*");
			say("~~     An enlightening discourse on the enigma of usecode.");
			say("~Beginning with the heretofore unresolved mysteries of global variables...*Page 2*Page 3*Page 4*Page 5*Page 6*Page 7");
		}
		if (var0000 == 0x0018) {
			say("~~ ~~THE BOOK OF THE FELLOWSHIP~~ ~~by Batlin of Britain.*");
			say("     Good morning to thee, gentle friend and traveller! No matter what time of day it might be when thou art reading this -- no matter what the hour of the clock -- I say good morning to thee because this very moment brings to thee the coming of the dawn. The dawn, as everyone knows, is the moment when illumination comes. The dawn marks the end of the long dark night. It is the moment that marks a new beginning. It is mine humble hope that these words may be for thee a dawning, or at least, a sort of awakening...");
		}
		if (var0000 == 0x0019) {
			say("~~ ~~LORD BRITISH~~The biography of Britannia's longtime ruler~~ ~~ by K.Bennos*");
			say("     ...While many may remember that Lord British was once but one of eight monarchs (when the lands were known as Sosaria), few are aware that he is not even a native of our own lovely Britannia. His origin is from another world, one from which he entered ours by way of a red moongate. (In fact, it is through this same type of gate that the Avatar of legend purportedly enters Britannia.) As ruler of one of the eight kingdoms, he was instrumental in selecting a champion to face Mondain, Minax, and Exodus.~");
			say("     When the terrible machine, Exodus, was defeated, 'twas Lord British behind whom all the people of Sosaria rallied. The unified land become known as Britannia, with Lord British as the sole monarch. Never let it be said, though, that he rules with a tyrannical hand. His reign hath always been one of Truth, Love, and Courage, supported by his utmost belief in the eight virtues.~");
			say("     It was Lord British who had the insight to call forth a quest for the Avatar (who also happened to be the champion from the days of Sosaria), and who gave prosperity and happiness unto the people.~");
			say("     Then came his mysterious disappearance, when the Stranger who became the Avatar was called by his companions to aid in the search for the lost monarch. Note how Lord Blackthorn, affected by the Shadowlords, quickly turned Britannia's fair lands into a place of terror. But find our noble Lord the Avatar did, and Britannia was restored to its former, peaceful state.~");
			say("     Then came the gargoyles, and our honorable sovereign thoughtfully requested the return of the Avatar...");
		}
		if (var0000 == 0x0027) {
			say("~~ ~~THE APOTHECARY'S DESK REFERENCE~~ ~~by Fetoau*");
			say("     It is the author's expectation that thou art reading this to familiarize thyself with the effects of various potions based on their color. The first part of this work will discuss such aspects, with the remaining pages covering the materials and steps required to make such alchemical creations.*");
			say("     Definitions:~~Black potion: Drinking this will render the individual invisible for several minutes.~Blue potion: This mixture will put the imbiber into a deep sleep.~Orange potion: This potion will awaken an individual who was magically put to sleep.~Purple potion: This concoction will provide magical protection for several minutes of hard fighting.~White potion: This potion will provide a small bit of illumination, much like a candle, for a few minutes.~ Yellow potion: This powerful mixture will give healing aid to the imbiber's wounds.~~WARNING: Green potion: This potion is a dangerous toxin, and will poison the imbiber, possibly killing the individual.~ Red potion: This fabulous drink will cure most poisons, including those acquired from the slugs in the swamps and that gained from drinking a GREEN potion.");
			say("~Bluish Black potion: For thine adventures in the Icy Lands, that renowned concoction is critical in such climate. It is for thee to use in plenty for it will prevent thee from freezing to death.~Orange Shimmering potion: Specifically designed for the busy wizard whose lifestyle requires him or her to cast many a spell. Once this delectable potion is absorbed it will enable thee to cast many more spells.*");
			say("     This next section details how one can best recreate these uncanny concoctions...");
		}
		if (var0000 == 0x002C) {
			say("~~ ~~THE PROVISIONER'S GUIDE TO USEFUL EQUIPMENT~~ ~~by Dell*");
			say("     While most suppliers will rave about the effectiveness of a good sword or specially fitted armour, I personally feel that proper exploring gear is much more necessary.~");
			say("     Consider this, dear reader. While thou mightest happen to encounter a wild bear in thy travels, or, even less likely, a troll, thou art doubtless going to be in need of much more mundane equipment.~");
			say("     Wilt thou possibly be outside city walls when darkness comes? Then buy a torch. And how wilt thou carry thy provisions? A backpack will prove necessary. And what about a container for thy refreshment? Purchase a jug or bucket. As for...");
		}
		if (var0000 == 0x002F) {
			say("~~ ~~WHAT COLOR IS THY BLADE? ~~ ~~by Menion*");
			say("The first step in effective sword-forging is to fill a crucible with metal. Then, with the bellows, the fire should be made extremely hot. When the flame no longer continues to grow in its glow, set the crucible on the fire to melt the metal.~");
			say("     Afterwards, pour the molten metal\tinto the blade mold and let it cool. Be warned! The crucible is at an extremely high temperature. Lift the cooled blade from the mold. Again heat up the fire and set the blade within. Be careful not to let it lose its shape. Set it in there only long enough for the blade to become malleable.~");
			say("     When it is ready, finish shaping it on the anvil with the hammer. When thou hast formed a blade of the desired shape, use the quenching barrel to cool the metal. It will harden quickly, so be sure the blade is as sharp as thou dost want it to be.~");
			say("     All that thou hast left to do now is to put the pommel over the tang. It will require hard work to make a fine, sturdy sword, but the finished weapon is well worth it!");
		}
		if (var0000 == 0x003D) {
			say("~~ ~~JOURNAL OF THE KING~~ ~~OF THE WHITE DRAGON*");
			say("\t\tOn the Twelfth Day before the Solstice Festival:");
			say("~\t\tShamino, traitor, I will destroy thee as thou didst destroy my beloved daughter, Beatrix. Shamino, cursed be thy name, I befriended thee and thou didst betray me. I asked my people to help thee erect\tthy castle and betrayal is thine only response to them. Traitor!*");
			say("\t\tOn the Eleventh Day before the Solstice Festival:");
			say("~ \tDespair hath been the daily lot of my poor Beatrix. Now, I myself have my share of worries. I am surrounded by traitors and goblins are closing in on the castle. Shamino, doomed be thy name, I, King of the White Dragon, want to hang, draw and quarter thee.");
			say("My poor Beatrix was so joyful when thou didst request her hand from me. I agreed happily to such a union. My beloved daughter left me in order to live in thy new castle. By that time thou hadst already been touched by the obsession to foil Mondain from his conquest of the world. Thou didst leave on thy journey to seek the advice of Lord British, from hence never to return. The long-awaited wedding was never to be. My lovely child, my Beatrix, remained unwed waiting for her love to return. She loved thee and had faith in thee, Shamino, cursed be thine offspring.*");
			say("\t\tOn the Tenth Day before the Solstice Festival:");
			say("~\t\tThose goblins, I see those malformed goblins coming for us. They are destroying our wealth and our lives as Shamino, cursed be his name and his lineage, destroyed my Beatrix's health and life.");
			say("She died forlorn.");
			say("Thy treacherous heart led Beatrix to a lonely grave.*");
			say("On the Ninth Day before the Solstice Festival:");
			say("~\t\tThe Kingdom is plagued by hordes of goblins that grow more fierce and daring with each passing season. I am surrounded by traitors and should not trust anyone. What to do? Beatrix, thine adorable light no longer shines upon me. How solitary thou must be in thy cold bed. This year I will hold the grandest Solstice Festival ever. Thou wilt love it. 'Tis especially dedicated to thee, my right well beloved.*");
			say("\t\tOn the Eighth Day before the Solstice Festival:");
			say("~\tThose magic-warped goblins are everywhere and they are persistent.");
			say("They must be led by that villainous Shamino.");
			say("A man who doth not keep his word is less than a man. How couldst thou trust him, Beatrix.*");
			say("\t\tOn the Seventh Day before the Solstice Festival:");
			say("~\tShamino the deceitful and his allies are waiting in the dark passages of this castle to ambush me. I know it. I saw them in my dream last night.");
			say("They will not succeed. They cannot succeed for I have a plan to save my people from traitors and ravaging goblins. Beatrix, I will let thee know about this idea of mine, thou wilt be delighted...*");
			say("\t\tOn the Sixth Day before the Solstice Festival:");
			say("~\tMy dearest beloved one, how thou must long for company in thy misery.");
			say("This bacchanal will bring thee all of thy friends and our people. That villainous Shamino will have the fate he doth deserve.*");
			say("\t\tOn the Third Day before the Solstice Festival:");
			say("~\tI am looking forward to seeing thy Solstice Festival, yes, this season is thy Festival. I planned it for thee. And, indeed, for all of us.");
			say("\t\tTraitors and deceivers alike are in for a surprise. All of my subjects and myself -- we will not leave anything for the goblins to take.");
			say("\t\tTwo days hence....*");
			say("\t\tOn the Eve of the Solstice Festival:");
			say("All is prepared for my greatest bacchanal ever.");
			say("\t\tOn the morning of the Solstice Festival:");
			say("~\tBeatrix, soon we will be reunited and part never again.");
			say("This Solstice Festival will be recorded in the annals of the Kingdom of The White Dragon. It is to be the greatest feast ever!");
			say("Let us all rejoice in one night of revelry! After the midnight revels and before the end of the night, a new dawn will rise...");
		}
		if (var0000 == 0x003E) {
			say("~~ ~~ DIARY~~ ~~Anonymous*");
			say("\t\tI was hired by Batlin the first time we met, in Fawn. A recently shipwrecked pirate, I had escaped from the Storms as well as jail. Since then I have been in his service with no interruption nor reason to complain.");
			say("~Week 1:");
			say("Our first meeting was a strange one. I remember gazing around from the shores of the bay, climbing on top of a hill and seeing no signs of life. No signs of life for miles and miles around except in a spot in the middle of the bay where I perceived a shimmering city: Fawn. On my way downhill I ran into a group of men in which I recognized an old pirate friend of mine, Pilot. They were looking for manpower and I was available. Pilot introduced me to Batlin and I was in. We marched into Fawn where Batlin had some business to conduct.*");
			say("~Weeks later:");
			say("\t\tHow we got to this place, I am not certain, for I was blindfolded while we were in the doing of it. All I can say is that my master knows powerful magics, which allow us to step aside from the barriers of this physical world. Thus, I find myself in the frozen north, in the abandoned sanctuary of a long dead people. Here, we have slain a Beast of Ice, and captured a Daemon's Soul.");
			say("Soon after the Daemon was imprisoned, I beheld with anxious eyes a dreadful vortex. Believe me, I have seen many a storm on various seas and continents, but never ever such a fury. It is as if Nature herself is in contortion.");
			say("~~On the third day of the following week:");
			say("At the first streak of dawn, we travelled overland across the snowy wastes to the great mountains which my master calls the Peaks of Skullcrusher.");
			say("In the depths beneath the mountains, we sought another of these Daemons. This proved to be a difficult task. We had to keep a strict watch to discover him in his hiding place. Finally, we trapped the second prisoner, whose name is Anarchy.");
			say("We searched all over the Skullcrusher mountains for this bane.");
			say("~On the last day of the week:");
			say("Then, we travelled by magical means until we found ourselves in the tangled forest of the northlands. The last Daemon had eluded us in the Plains of Ice, but in his new form he was not so swift. Now his trail hath led us to this ruined castle.");
			say("I will finish this entry later tonight.");
		}
		if (var0000 == 0x003F) {
			say("LOVE SONNETS~~ by Beatrix~~");
			say("To the only begetter of these");
			say("\t\t\t\tsonnets");
			say("To the well-wishing adventurer");
			say("\t\t\tin setting forth...*");
			say("\t\t\t\tI~");
			say("Shamino, valiant adventurer,");
			say("Homo malicious");
			say("Adored from mine earliest hour,");
			say("Magnanimously, thy presence");
			say("     on all dost shower");
			say("Infinite love! By life thou dost");
			say("     devour,");
			say("Non-fading and delicious,");
			say("Our charming love, sweetest");
			say("     power.*");
			say("\t\t\t\tII~");
			say("My heart is a chest");
			say("Of bitterness");
			say("Since we are apart");
			say("A harness of teardrops");
			say("I fear lest");
			say("I should fall from some height");
			say("On my shoulder");
			say("The weight");
			say("In mine heart");
			say("The pain");
			say("Why wait?");
			say("Why explain?");
			say("Shamino");
			say("Dost thou not");
			say("Know");
			say("How to care?*");
			say("\t\t\t\tIII~");
			say("Since the War of Mondain");
			say("One memory I keep");
			say("When beyond these Realms");
			say("Thinking of us I weep");
			say("Is there one more");
			say("Chance to meet under");
			say("              the elms?*");
			say("\t\t\t\t IV~");
			say("Never this warrior's destiny");
			say("     allowed");
			say("His love to gain");
			say("Though restless, roving on");
			say("     adventure proud");
			say("He traversed oft the land");
			say("And oft the main");
			say("But love is like grain");
			say("It needs a tender hand");
			say("To grow, flourish and mature");
			say("The Wrath of Mondain");
			say("Destroyed our bond");
			say("Thy past thou shalt nurture");
			say("For greater future");
			say("In the worlds beyond*");
			say("\t\t\t\t V~");
			say("Sunset");
			say("Over the Main Gate");
			say("Going thy way");
			say("I stare at thee");
			say("Breathing in thy scent");
			say("I start the ascend");
			say("Hastily");
			say("Blasting thee with a spectral");
			say("     spell");
			say("I shimmer");
			say("Away.*");
			say("\t\t\t\t VI~");
			say("Beneath the yew");
			say("Thoughts of thee");
			say("Keep me warm and jolly");
			say("Raindrops like dew");
			say("On a lily's petal");
			say("Gently brushing my skin");
			say("Cleansing for the soul");
			say("What a delight");
			say("Never too soon");
			say("Watching my reflection");
			say("     in the river");
			say("As doth the Harvest Moon");
			say("Night after night");
			say("In this season.*");
			say("\t\t\t\t VII~");
			say("Shamino, shadows of thee");
			say("     appear");
			say("Before mine eyes all the year");
			say("I see the main road clear");
			say("Winding down to thy Castle");
			say("Where the winds whistle");
			say("There, at night I delight");
			say("At the magic sight");
			say("Of spectral spells like thunder");
			say("On thy neck, warrior");
			say("Thou shalt not");
			say("Abandon me.");
		}
		if (var0000 == 0x0040) {
			say("~~ ~~ My life~~ ~~by Yakka*");
			say("I grew up in a tiny village on the southern coast. Life hath been good so far and I know it will be longer than this book.");
		}
		if (var0000 == 0x0043) {
			say("MY RECORDS~~ by Vasculio~~");
			say("- One locket stolen from Frigidazzi, who refused to accept the passion I would have spent on her.");
			say("- The Living Scalp stolen from Filbercio, who sentenced me to die.");
			say("- The Spectral Orb stolen from Mortegro. I hate him, for he uncovered my dangerous research and betrayed me to the Council of Mages.*");
			say("- The Flux Analyzer stolen from Gustacio. Gustacio the influential, Gustacio the dignified, Gustacio the magisterial, I despise thee! I despise thee for thou representest everything I could never be.");
			say("- The Wand of Stone, taken from Torrissio. I blast mine hatred of Torrissio to the seven winds, for he was my partner in twisting the rules of the Mages, yet he abandoned me to their justice.");
		}
		if (var0000 == 0x0044) {
			say("MY JOURNAL by ~~Maleccio");
			say("\t\tI was born and raised in the city of Moonshade, a foe of Vasculio. Then I was taken to this place, where I am a prisoner of He Who Was Dead -- Vasculio.");
			say("Vasculio survives beyond death! He doth drink blood out of the living to keep himself alive. Hence his great thirst for fresh blood. His corpse is animated by means of spells and the Forbidden Reagent. I am his prisoner, fettered worse than a wild beast; manacled by mine hands and feet by day and by night. My blood is so vital to him that he is afraid I could break away. How could I in this cage. At times, I feel like survival is a meaningless word. I am exhausted. He hath been awakening me at all hours of the already too short night, thereby robbing me of mine all too brief night's slumber.*");
			say("\t\tThis week I managed to write more. I feel better than last month but still weak.");
			say("All through these interminable weeks in this cage, I have suffered from chronic weariness.");
			say("I do not believe escape is possible. I have seen Death face to face and she hath seen me. I am more than ever determined to continue to struggle for survival, for this is the primary instinct of the animal.*");
			say("The following week: I am losing track of time. I can track seven day periods but do not seem to recall any other relevant information; seasons and days are not part of my realm. Like life, they escape me. Am I less than an animal? This deranged mage, frantically seeking the lost secrets of Ophidian magic, certainly treats me as such. Actually, I do not feel anything anymore. I may live like an animal, but in my mind I am a man. I still think and write, therefore I exist. If this journal survives me and thou art reading it, regardless of the time elapsed, then I am alive. I am alive because my thoughts are alive.*");
			say("Today, fifth day of this present week, I am going to tell thee more about the twisted Vasculio.  He boasts that his magical powers are too great to be defeated by mere mortals. I have to tell thee that he was executed in Moonshade for practicing spells too diabolical for Man. His powerful magic allowed him to continue living as a liche.*");
			say("Also, I shall share this with thee, so that thou mayest make good use of it: Remember that no information hath value until thou dost test it.*");
			say("My words, hereunder, will guide thine understanding. Vasculio hath been experimenting with eternal life theories. Once, he stumbled upon a magic formula which, when used with the blood of an innocent, allowed a dead body to live longer. Moments before his execution he intoned the spell to keep his body living. Later he escaped from his coffin and travelled to Skullcrusher.*");
			say("Why Skullcrusher, thou askest? The answer is simply because he knew there was a second source for Stoneheart. Stoneheart is the prime ingredient of Bloodspawn, here in these caverns.");
			say("There is also another important reason. Vasculio knew that his enemies, the Mages of Moonshade, would never follow him here.*");
			say("Seventh day of the present week:");
			say("This undying sorcerer doth spend his time researching new spells. He is convinced that great magical secrets lie beyond the sealed entrances. He detects great power and magic in these areas. Vasculio hath not been able to locate the Grand Shrine within the great labyrinth beneath the Skullcrusher Peaks. I could tell thee that he stores provisions to support his allies, the man-eating Gwani. But this is not out of charity for them, for he also lives on with their blood. At this point I must stop writing for I can hear Vasculio howling in the tunnels. This is a sign that he is coming for me once more...");
		}
		if (var0000 == 0x0045) {
			say("~~ ~~CURRICULUM~~ ~~by Vasculio*");
			say("As they lower me down to this");
			say("     hole in the ground");
			say("I scream for help, but they");
			say("     cannot hear a sound.");
			say("I scratch on this lid.");
			say("My fingers they bleed.");
			say("They plant me deep like");
			say("     an evil seed.");
			say("Now my bones decompose.");
			say("My flesh doth rot.");
			say("But soon I will rise and");
			say("     torture the lot");
		}
		if (var0000 == 0x0046) {
			say("~~MINE EXPERIMENTS~~ ~~by Vasculio*");
			say("Day 1: \tThis is the dawn of a new era for me. I have been experimenting with eternal life for so long now. At last, I am seeing some results.~");
			say("Day 2: \tEntranced more Gwani in order to increase the number of my servants");
			say("Day 3: \tForced the Gwani to give to me the secret of entering certain passages. Experiments still in progress. A pint or two should keep me alive, depending on the frequency of transfusion.*");
			say("Day 8:\t        The lost secret of the Ophidians is within my reach, I can feel it. Ophidian magic will give to me absolute power.~");
			say("Day 12:        Last week I stumbled upon this magic formula which further lengthens the life span of a dead body. What a discovery! I need to use the mixture in an adequate proportion with the blood of an innocent.*");
			say("Day 17:        The caverns around Skullcrusher are filled with Stoneheart. More than I ever knew! I need as much Stoneheart as I may find since this is the prime ingredient of Bloodspawn. Stoneheart doth possess the red-orange glow of stalagmites. Once pulverized and mixed with fresh human blood it turns into a powerful magical reagent. Even though I have tried extremely powerful spells, Bloodspawn is easy and safe to transport. The mages who say otherwise are fools.*");
			say("Day 21:        This day I have spent researching many new spells. Exhausting. The prisoners in the cage may not live long enough to fulfill my plans. They seem to be weak.~");
			say("Day 28:        I am convinced that great magical secrets lie beyond the sealed entrances, for I sense great power and magic in the vicinity.*");
			say("Day 34:        Today is a sad day. My servants have failed me! While transporting Bloodspawn, they suffered simultaneous seizures and toppled into a chasm -- the Bloodspawn was lost!*");
			say("This is endangering my schedule. I need more workers. They must work longer hours. Toil is a necessity; sleep, an addiction from which they must be weaned.");
		}
		if (var0000 == 0x0047) {
			say("~~ ~~ Beyond The Sealed Entrances~~ ~~by Vasculio*");
			say("After all these years, I found two sealed entrances in the depths. I believe there is much to be discovered beyond these entrances, for they must have been sealed for a reason which doth go beyond mine understanding at this point in time. I have detected great power and magic in those areas. I presume that superior magical secrets lie beyond the sealed entrances.");
		}
		if (var0000 == 0x0049) {
			say("MY JOURNAL by Dolfo~~");
			say("\tThe Magic Gate hath not been easy to use. We had to search for the answer and it was only after much trial and error that we were able to determine that the key is a sequence of five colors.~");
			say("Red directly precedes White: Blue follows Yellow: Yellow directly follows Red: Yellow and White do not immediately follow one another.*");
			say("\tAs heretofore, the access to the doors of the Temple is blocked by a lock. The combination to this lock caused much commotion.");
			say("\tHerein is mine experience revealed to thee as it unfolded. Mark my words, for they will save thee much time.");
			say("I write the letters in our alphabet, but substitute the Serpent Runic letters to make thine understanding plain. I cannot write those cursed snake shapes.*");
			say("The runes must be placed left to right on the floor before the brass doors; any other placement will result in endless frustration.");
			say("I tried W.O.B. and C., none of the runes were in the right position.");
			say("I then tried C.B.W. and O.-- again, none of the runes were in the correct position.");
			say("I then tried the O rune in the first position, which was not where it belonged, and knew I could discern the puzzle...");
		}
		if (var0000 == 0x004A) {
			say("Memoirs~~ by Brother Markus*");
			say("\t\tIn the middle of a stormy night, a deafening roar of thunder tore apart the heavens and woke us. It was to be followed by five rapid and resounding knocks on the main door. I rose out of bed, donned my sandals and walked to the double doors. A desperate hand was pounding on the wooden frame. Most likely some belated traveller had been caught in the storm, I thought. As I half-opened the door, a swift streak of lightning pierced dramatically across the clouds, illuminating the darkness. Through the slashing rain appeared the figure of a bedraggled man, bedraggled yet with the certain stamp of nobility in his brow. Yet I did not recognize him.");
			say("He rushed in, looking for the hearth. Several of my brethren helped him with dry clothes and a hot beverage. He said his name was Blackthorn, and that he had come a long way to seek refuge in our monastery. He thanked us sincerely and then asked for hospitality, which we granted him.");
			say("He said that he was an exile from a land called Britannia, and that since his departure he had been roaming the seas in search of a haven. He stayed with us, at the Monastery, for some time. We taught him from the writings of Xenka, whence he learned that birth, ranks, titles, power and gold are meaningless, for this world is but a thoroughfare. We are all brought into this world equal in rights and we depart from it carrying nothing with us but our deeds, good and ill.");
		}
		if (var0000 == 0x004B) {
			say("MY DIARY~~ by Pendar*");
			say("Day 1:\tAlea jacta est! Departure for the daemons' stronghold, with all our worthy company. Finally, we are ready to pursue this campaign. We are going to erase these daemons from the face of the earth. Dungeon Furnace, thy time hath come, thou wilt burn! Our troops are marching into the caves. I am more relaxed after all those days of recruiting men.*");
			say("This is a strong army, as large as daybreak, whereby thou wilt observe the valor concealed in our noble hearts. Monitorian knights have never feared anything or anyone, certainly not daemons! I am confident in a swift victory for our side.*");
			say("Day 4:\t'Tis hot, with a stench like brimstone in the air. The mist doth have an unhealthy odor, and our limited supply of foods hath made us cautious. Wrapped in my bedroll by the fire, I slept soundly. So did most of our men. The battle hath been taking its toll on us all. In the morning, I rose at the sound of the war drums echoing in the distance. They kept coming. In brief, by one means or the other, our company was diminished.*");
			say("Day 7:  \tThe next move was to attack before daemons could form into a solid defense again. Lost two of my right best old stalwarts in a horrible manner. They walked too close to the pool and were taken by that horror in the pool. Knight, pity thy companions for they left for the abysmal depths of the unknown.*");
			say("Day 11:  \tTense and anxious times have fallen upon thee, Pendar. Burning as was the day, I broke out in a chill as I witnessed the company being decimated. What a slaughter! Darkness closed in upon us. For the last couple of days, I have not slept, though I am weary and tormented. I confess having scarcely closed mine eyes on any night this past week. The nights are sleepless and the days seem to be endless nights.*");
			say("Week 5:\tI saw a star in the caverns, large and bright. It was surely an omen. I rose and walked aimlessly; soon a peaceful feeling was to overcome me. At that moment, my self-confidence was higher than the sun in the sky. The lure of combat swept again through my veins, mine heart was pounding, I was ready to go into a decisive battle.");
		}
		if (var0000 == 0x004C) {
			say("~~ ~~THE SLEEPING BULL");
			say("~~ ~~Register*");
			say("~ ~Rodolfo of Moonshade~~Nakholy of Fawn~~Ensorcio of Moonshade~~Rishar of Monitor~~Batlin of Fawn~~Palos, manservant of Batlin*");
			say("~ ~Rodolfo of Moonshade~~Rishar of Monitor~~");
		}
		if (var0000 == 0x004E) {
			var0001 = "him";
			var0002 = "his";
			var0003 = "he";
			var0004 = "He";
			var0005 = "His";
			if (UI_is_pc_female()) {
				var0001 = "her";
				var0002 = "her";
				var0003 = "she";
				var0004 = "She";
				var0005 = "Her";
			}
			say("THE BOOK OF PROPHECIES~~ by Xenka*");
			say("\t\tWhen a stranger sojourns with thee in thy land, thou shalt not do him or her wrong. The stranger who sojourns with thee shall be to thee as the native among ye. And thou shalt love him or her as thyself; for I see the advent of a Hero From Another World who would unite the Serpents and save the world.*");
			say("I see the rocks in motion, and trees bursting open -- I see treasures which have lain hidden for centuries coming forth. There I see one which is of three. It is black. It is magic.");
			say("\t\tClearly do I see a Hero From Another World, but let it be said that ",
				var0003,
				" is not alone. ",
				var0004,
				" must not advance as one alone! I pray thee above all things to have this in remembrance. ",
				var0004,
				" must be accompanied by The Three.*");
			say("\t\tThe Hero From Another World will succeed through the use of powerful magic, the aid of specters, and the implements three of the Hierophant.*");
			say("\t\tMy words shed light upon darkness. Follow the unfolding of my words and thou wilt see that the friends of the Hero shall be ",
				var0002,
				" enemies. Visions shall make ",
				var0001,
				" wiser than ",
				var0002,
				" enemies, for thus is it always with ",
				var0001,
				".");
			say("The Hero From Another World must triumph even in ",
				var0002,
				" Dreams.*");
			say("The dead shall aid ",
				var0001,
				", but enemies among the living shall abound.");
			say("A careful choice of ally is necessary to ensure success. The Hero From Another World will even need a thief and a braggart as ",
				var0002,
				" ally.");
			say("I see the future as through a veil -- ",
				var0003,
				" shall be allied with those once ",
				var0002,
				" enemies, and shall find good men in bad company. I see the color red, and a woman is involved.");
		}
		if (var0000 == 0x004F) {
			say("Day 8 -- This rotten place ain't for me. It don't seem possible to revel around here.");
			say("Day 9 -- Did some work for Batlin. He thinks too much of hisself. I wish he'd fall off a cliff.");
			say("Day 12 -- Why did I ever leave Britannia?");
			say("Day 20 -- Batlin better pay me in gold or I'll be teachin' him");
			say("a lesson.");
			say("Gold is the only way for me to leave this bilgehole and have some fun in Britannia. Already know what I'll be buyin'! Buccaneer's Den is my idea of a good place to be!");
		}
		if (var0000 == 0x0050) {
			say("~~ ~~ MY JOURNAL ~~ ~~by Silverpate*");
			say("Day 3 of Week 9:~~Today, I had another argument with Erstam, that old crazy mage with a foul temper! I could never stand him, I never will. Who doth he think he is? Erstam and I are so different that we simply cannot work together.*");
			say("Day 4 of Week 9:~~My precious Jawbone, I am so glad thou art mine, I use thee often and often again and still have no grounds to complain. What would I do without thee, tell me? Erstam, thou art not the only one who can travel through the Void!*");
			say("Day 7 of Week 9:~~Thy magic telescope is merely another trick thou hadst divined when thou didst fear my powers. Useless piece of equipment for a crazy old mage. I am tired of thee. I understand why Drogeni never came back...~");
			say("Thou art looking for immortality and will end alone, Erstam!~");
			say("I, Silverpate, will prove thee wrong. I will discover the solution relevant to our matters.");
		}
		if (var0000 == 0x0053) {
			say("~~ ~WEAVING~~ ~~by Carlyn*");
			say("     This is a complete sourcebook for a variety of patterns. Included are patterns for clothing, blankets, quilts, and sheets. The introduction even includes a section on weaving one's own cloth.~");
			say("     ...take the bale of wool and spin it on the wheel to make the thread. Once that is done, warp the thread across the loom and begin weaving. Shortly thou wilt have a nice length of cloth from which canst make a variety of useful things. For variation, use different colored threads on the loom to create exciting patterns.");
		}
		if (var0000 == 0x005A) {
			say("~~ ~~THE BLACK COMPENDIUM ~~ ~~Written by Mondain, with annotations by the enchantress Minax and magical formulae by the hellspawn Exodus.*");
			say("     To extend one's life is a complicated procedure, taking years to complete. However, there is an additional side effect: invulnerability. I have broken this work down into chapters based on each individual ritual. It is very important that these steps be performed in the order presented.*");
			say("     First, thou must procure five stones of the dust of crushed rubies. This must be mixed thoroughly with the ooze of a slime, enough to make the rubies into a thick paste. After thou hast created the paste, set it in an ivory jar and place the entire container in a bucket of olive oil for three years.*");
			say("     The next step is to procure 10 newborn babes, none more than six days old. With a knife cut from the bone of a harpy, thou must remove the blood from each newborn. To be kept fresh, the blood must be stored in an onyx flask, though mixing of each baby's blood is quite permissible.*");
			say("     Now thou shalt seek out...");
		}
		if (var0000 == 0x005B) {
			say("~~ ~~BROMMER'S FLORA~~ ~~by Brommer*");
			say("     This large tome describes most of the common plants indigenous to Britannia.~~");
			say("  ...The Greer plant is especially fascinating, for it spends most of its life huddled with its leaves wrapped in a tight ball. However, every so often, the leaves will unfurl, radiating out from the stem...*");
			say("  ...The Reaper is unique in that it is both plant and animal. Resembling a large tree, the Reaper is capable of self-animation as well as self-locomotion. Reapers have been known to attack those who cause harm to their home (i.e., the forests), but seldom reveal themselves otherwise...");
		}
		if (var0000 == 0x005C) {
			say("~~ ~~BROMMER'S FAUNA~~ ~~by Brommer*");
			say("     Betwixt the covers of this book can be found details on the most prevalent animals that inhabit the lands of Britannia.~~");
			say("  ...Deer are quite prevalent in the forested areas of Britannia. They are shy creatures, generally shunning the presence of man, whom they know hunt them. Atop their head sits a pair of antlers...*");
			say("  ...The fox is a small animal, akin to a dog or a wolf. It is an omnivore, and more than willing to make do with a farmer's chicken when it tires of other foods...");
		}
		if (var0000 == 0x0062) {
			say("~~ ~~BIRDS OF BRITANNIA~~ ~~by Brother Wayne*");
			say("     Bound here is the comprehensive guide to the avian species, beautifully and colorfully illustrated by many different artists.");
			say("     ...Surprising to many is that the Silver-Winged Pharcelot is not the most prevalent bird in Britannia, though it is arguably the most visible. Far more popular is the Black-Tipped Grackle, but its predilection for dark, cool areas makes it considerably less visible.");
		}
	}
}

extern var Func0983 0x983 (var var0000);
extern var Func0942 0x942 (var var0000);
extern void Func097F 0x97F (var var0000, var var0001, var var0002);

void Func0284 shape#(0x284) () {
	var var0000;

	if (event == DOUBLECLICK) {
		UI_close_gumps();
		UI_play_sound_effect2(0x001C, item);
		if (!(Func0983(AVATAR) || (!Func0983(IOLO)))) {
			return;
		}
		if (Func0942(IOLO)) {
			Func097F(AVATAR, "@Call it.@", 0x0000);
			var0000 = UI_die_roll(0x0001, 0x0002);
			if (var0000 == 0x0001) {
				Func097F(IOLO, "@Tails.@", 0x0010);
				Func097F(AVATAR, "@'Tis heads.@", 0x0020);
			} else {
				Func097F(IOLO, "@Heads.@", 0x0010);
				Func097F(AVATAR, "@'Tis tails.@", 0x0020);
			}
			if (UI_die_roll(0x0001, 0x0003) == 0x0001) {
				Func097F(IOLO, "@Again!@", 0x0030);
			}
		}
	}
}

extern void Func094A 0x94A (var var0000);

void Func0285 shape#(0x285) () {
	var var0000;

	if (event == DOUBLECLICK) {
		var0000 = "@I believe I heard somewhere that the innkeeper at " + "Sleeping Bull will exchange those.@";
		Func094A(var0000);
	}
}

extern void Func094A 0x94A (var var0000);

void Func0286 shape#(0x286) () {
	var var0000;

	if (event == DOUBLECLICK) {
		var0000 = "@I do not know where those may be exchanged on the " + "Serpent Isle.@";
		Func094A(var0000);
	}
}

extern void Func0949 0x949 (var var0000);
extern void Func0971 0x971 (var var0000);

void Func0288 shape#(0x288) () {
	var var0000;
	var var0001;

	if (event == DOUBLECLICK) {
		var0000 = get_item_frame();
		if ((var0000 == 0x0000) || (var0000 == 0x0001)) {
			var0001 = UI_click_on_item();
			if (var0001->is_npc()) {
				var0001->set_item_flag(ASLEEP);
			} else {
				Func0949("@Do not waste that!@");
			}
			Func0971(item);
		}
		if (var0000 == 0x0002) {
			var0001 = UI_click_on_item();
			if (var0001->is_npc()) {
				var0001->set_item_flag(INVISIBLE);
			} else {
				if (var0001->get_item_flag(TEMPORARY)) {
					var0001->set_item_flag(INVISIBLE);
				}
				Func0949("@Waste that not!@");
			}
			UI_play_sound_effect2(0x0082, item);
			Func0971(item);
		}
		if (var0000 == 0x0003) {
			var0001 = UI_click_on_item();
			if (var0001->is_npc()) {
				var0001->set_item_flag(CURSED);
			} else {
				if (var0001->get_item_flag(TEMPORARY)) {
					var0001->set_item_flag(CURSED);
				}
				Func0949("@Is that a good idea!@");
			}
			UI_play_sound_effect2(0x0082, item);
			Func0971(item);
		}
	}
}

extern void Func097F 0x97F (var var0000, var var0001, var var0002);
extern var Func099E 0x99E (var var0000);
extern var Func09A0 0x9A0 (var var0000, var var0001);
extern void Func02C0 shape#(0x2C0) ();
extern var Func097D 0x97D (var var0000, var var0001, var var0002, var var0003, var var0004);
extern void Func0887 0x887 (var var0000);
extern var Func0992 0x992 (var var0000, var var0001, var var0002, var var0003);
extern void Func060F object#(0x60F) ();
extern void Func0618 object#(0x618) ();
extern void Func036A shape#(0x36A) ();

void Func0289 shape#(0x289) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;
	var var0008;
	var var0009;
	var var000A;
	var var000B;
	var var000C;
	var var000D;
	var var000E;
	var var000F;
	var var0010;
	var var0011;
	var var0012;
	var var0013;
	var var0014;
	var var0015;
	var var0016;
	var var0017;
	var var0018;
	var var0019;
	var var001A;
	var var001B;
	var var001C;

	var0000 = get_item_frame();
	if (event == DOUBLECLICK) {
		if (var0000 == 0x0006) {
			var0001 = UI_click_on_item();
			if (var0001->is_npc()) {
				Func097F(var0001, "@Ow!@", 0x0000);
				var0002 = script var0001 {
					nohalt;
					hit 1, normal_damage;
				};
				var0003 = AVATAR->find_nearby(0x032A, 0x000A, MASK_NONE);
				var0004 = 0x0000;
				if (var0003) {
					for (var0007 in var0003 with var0005 to var0006) {
						if (var0007->get_item_frame() == 0x0000) {
							var0004 = var0007;
						}
					}
					if (var0004 != 0x0000) {
						var0004->set_item_frame(0x0002);
					}
				}
			}
		}
		if (var0000 == 0x0004) {
			UI_close_gumps();
			if (Func099E(item)) {
				var0008 = Func099E(item);
			} else {
				var0008 = item;
			}
			var0008->obj_sprite_effect(ANIMATION_MUSIC, -2, -2, 0, 0, 0, LOOP_ONCE);
			UI_play_sound_effect(0x001D);
			var0009 = AVATAR->find_nearby(0x036A, 0x001E, MASK_NONE);
			if (var0009 == []) {
				HOUND_OF_DOSKAR->set_item_flag(SI_TOURNAMENT);
				HOUND_OF_DOSKAR->set_alignment(GOOD);
				var000A = HOUND_OF_DOSKAR->approach_avatar(0x0078, 0x0028);
				if (var000A) {
					HOUND_OF_DOSKAR->si_path_run_usecode([0x0000, 0x0000, 0x0000], STARTED_TALKING, HOUND_OF_DOSKAR->get_npc_object(), Func036A, true);
				} else {
					gflags[TEMP_FLAG_1] = true;
					var0002 = script Func09A0(0x0005, 0x0001) after 15 ticks {
						nohalt;
						call Func0289;
					};
				}
			} else {
				var0009[0x0001]->set_schedule_type(TALK);
			}
		}
		if (var0000 == 0x0008) {
			UI_close_gumps();
			var000B = AVATAR->get_object_position();
			AVATAR->obj_sprite_effect(ANIMATION_POOF, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, LOOP_ONCE);
			var000B = get_object_position();
			obj_sprite_effect(ANIMATION_POOF, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, LOOP_ONCE);
			var0002 = script AVATAR {
				nohalt;
				call Func060F;
			};
			var0002 = script AVATAR after 2 ticks {
				nohalt;
				call Func060F;
			};
			var0002 = script AVATAR after 4 ticks {
				nohalt;
				call Func060F;
			};
			Func097F(AVATAR, "Yeeooww!", 0x0003);
			clear_item_flag(TEMPORARY);
			remove_item();
			var0002 = script AVATAR after 10 ticks {
				nohalt;
				call Func0289;
			};
		}
		if (var0000 == 0x0009) {
			var000C = get_object_position();
			if (!(((var000C[0x0001] > 0x0610) && (var000C[0x0001] < 0x066F)) && ((var000C[0x0002] > 0x0070) && (var000C[0x0002] < 0x00BF)))) {
				UI_play_sound_effect(0x003F);
				var000D = find_nearby(0x02F3, 0x000A, MASK_NONE);
				if (var000D) {
					for (var0007 in var000D with var000E to var000F) {
						var000B = var0007->get_object_position();
						var0010 = var0007->get_cont_items(SHAPE_ANY, QUALITY_ANY, FRAME_ANY);
						UI_sprite_effect(ANIMATION_GREEN_BUBBLES, var000B[0x0001], var000B[0x0002], 0x0000, 0x0000, 0x0000, LOOP_ONCE);
						var0007->Func02C0();
						for (var0013 in var0010 with var0011 to var0012) {
							if ((var0013->get_item_shape() == 0x0190) && (var0013->get_item_frame() == 0x0008)) {
								var0014 = GWENNO->set_npc_prop(HEALTH, 1);
								gflags[FREED_GWENNOS_BODY] = true;
								gflags[TALKED_TO_GWANI_ABOUT_GWENNO] = true;
							}
							var0002 = var0013->set_last_created();
							var0002 = UI_update_last_created(var000B);
						}
					}
				}
				var0015 = find_nearby(0x00E8, 0x000A, MASK_NONE);
				if (var0015) {
					for (var0007 in var0015 with var0016 to var0017) {
						var000B = var0007->get_object_position();
						var0007->Func02C0();
						UI_sprite_effect(ANIMATION_GREEN_BUBBLES, var000B[0x0001], var000B[0x0002], 0x0000, 0x0000, 0x0000, LOOP_ONCE);
					}
				}
			}
		}
		if (var0000 == 0x000C) {
			var000C = get_object_position();
			if ((var000C[0x0001] > 0x0234) && ((var000C[0x0001] < 0x023D) && ((var000C[0x0002] > 0x0BC7) && (var000C[0x0002] < 0x0BCD)))) {
				gflags[KARNAX_WITNESSED_SEED_PLANTING] = true;
				gflags[TEMP_FLAG_1] = false;
				gflags[TEMP_FLAG_2] = false;
				gflags[TEMP_FLAG_3] = false;
				gflags[TEMP_FLAG_4] = false;
				UI_set_weather(RAIN);
				var000B = get_object_position();
				remove_item();
				UI_sprite_effect(ANIMATION_TELEPORT2, var000B[0x0001], var000B[0x0002], 0x0000, 0x0000, 0x0000, LOOP_ONCE);
				UI_sprite_effect(ANIMATION_TELEPORT, var000B[0x0001], var000B[0x0002], 0x0000, 0x0000, 0x0000, LOOP_ONCE);
				UI_sprite_effect(ANIMATION_TELEPORT, var000B[0x0001], var000B[0x0002], 0x0000, 0x0000, 0x0000, LOOP_ONCE);
				var0018 = Func09A0(0x0000, 0x0001);
				UI_play_music(0x0041, var0018);
				var0002 = script var0018 after 30 ticks {
					nohalt;
					call Func0618;
				};
				gflags[PLANTED_SILVER_SEED] = true;
			}
		}
	}
	if (var0000 == 0x000D) {
		UI_close_gumps();
		var0019 = UI_click_on_item();
		var001A = var0019->get_item_shape();
		if (var0019 == AVATAR->get_npc_object()) {
			return;
		}
		if (var0019[0x0001] != 0x0000) {
			if (var0019[0x0001]->is_npc() && (var0019[0x0001]->get_npc_number() != AVATAR)) {
				var001B = var0019->get_npc_number();
				Func097F(var001B, "@Don't tie me up!@", 0x0000);
			} else if (var001A == 0x03BE) {
				if (Func097D(PARTY, 0x0001, 0x0289, QUALITY_ANY, 0x000D)) {
					Func0887(var0019);
				} else {
					var001C = Func0992(0x0001, "@Don't leave the rope!@", "@I shouldn't leave the rope!@", false);
					return;
				}
			} else {
				var001C = Func0992(0x0001, "@Try it on something else!@", "@Perhaps something else...@", false);
			}
		} else {
			var001C = Func0992(0x0001, "@That won't work!@", "@That won't work!@", false);
		}
	}
	if (event == SCRIPTED) {
		if (gflags[TEMP_FLAG_1] == true) {
			gflags[TEMP_FLAG_1] = false;
			var001C = Func0992(0x0001, 0x0000, 0x0000, false);
			if (var001C != AVATAR) {
				var001C->show_npc_face0(0x0000);
				say("\"The dog doth not come! Perhaps thou shouldst try the whistle in a more open place, where the sound will travel.\"");
			} else {
				var001C = Func0992(AVATAR, 0x0000, "@I should try this elsewhere...@", true);
			}
			abort;
		}
		var001C = Func0992(IOLO, "@The spellbook! It disintegrated!@", 0x0000, false);
	}
}

extern var Func097E 0x97E (var var0000);
extern var Func0983 0x983 (var var0000);

void Func028A shape#(0x28A) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;

	if (event == DOUBLECLICK) {
		var0000 = AVATAR->get_object_position();
		var0001 = (var0000[0x0001] - 0x03A5) / 0x000A;
		var0002 = (var0000[0x0002] - 0x046E) / 0x000A;
		if (var0001 < 0x0000) {
			var0003 = (" " + Func097E(var0001)) + " West";
		} else {
			var0003 = (" " + Func097E(var0001)) + " East";
		}
		if (var0002 < 0x0000) {
			var0004 = (" " + Func097E(var0002)) + " North";
		} else {
			var0004 = (" " + Func097E(var0002)) + " South";
		}
		if (!UI_is_pc_inside()) {
			item_say(var0004 + var0003);
		} else if (Func0983(IOLO)) {
			IOLO->item_say("@'Twill not function under a roof!@");
		}
	}
}

extern void Func094A 0x94A (var var0000);

void Func028B shape#(0x28B) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;

	if (event == PATH_SUCCESS) {
		var0000 = AVATAR->find_nearby(0x0369, 0x0001, MASK_NONE);
		var0001 = 0x0000;
		if (UI_get_array_size(var0000) > 0x0000) {
			var0002 = script AVATAR {
				face west;
				actor frame bowing;
				repeat 12 {
					actor frame sitting;
				};
			};
			var0001 = 0x0003;
		}
		halt_scheduled();
		var0002 = script item after var0001 ticks {
			frame 0;
			repeat 12 {
				next frame cycle;
				continue;
				sfx 92;
			};
			call Func028B;
		};
		return;
	}
	if (event == SCRIPTED) {
		var0003 = AVATAR->get_cont_items(0x028D, QUALITY_ANY, FRAME_ANY);
		if (var0003) {
			var0003->remove_item();
		}
		var0004 = UI_create_new_object(0x028E);
		if (var0004) {
			var0004->set_item_flag(TEMPORARY);
			var0004->set_item_flag(OKAY_TO_TAKE);
			var0004->set_item_frame(UI_die_roll(0x0000, 0x0009));
			var0005 = get_object_position();
			var0005[0x0001] += 0x0001;
			var0005[0x0002] += 0x0001;
			var0002 = UI_update_last_created(var0005);
		}
		return;
	}
	if (event == DOUBLECLICK) {
		var0006 = "@I suspect spinning the wool will be more fruitful " + "than spinning an empty wheel.@";
		Func094A(var0006);
	}
}

extern var Func0953 0x953 ();
extern void Func097F 0x97F (var var0000, var var0001, var var0002);
extern var Func09A0 0x9A0 (var var0000, var var0001);
extern var Func0992 0x992 (var var0000, var var0001, var var0002, var var0003);
extern void Func0448 object#(0x448) ();

void Func028C shape#(0x28C) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;
	var var0008;
	var var0009;
	var var000A;
	var var000B;

	var0000 = UI_is_pc_female();
	var0001 = Func0953();
	var0002 = UI_get_party_list();
	var0003 = LYDIA->find_nearby(0x0381, 0x0014, MASK_NONE);
	if (event == SI_PATH_FAILURE) {
		var0004 = var0003->get_object_position();
		if (item == LYDIA->get_npc_object()) {
			var0004[0x0002] += 0x0001;
		} else {
			var0004[0x0001] += 0x0001;
		}
		move_object(var0004);
		var0005 = script LYDIA {
			nohalt;
			call Func028C;
		};
	}
	if (event == SCRIPTED) {
		if (LYDIA->get_npc_id() == 0x0003) {
			LYDIA->set_npc_id(0x0004);
			var0005 = UI_create_new_object(0x0390);
			if (var0005) {
				var0005->set_item_flag(TEMPORARY);
				var0005 = UI_update_last_created(AVATAR->get_object_position());
			}
			var0005 = script LYDIA {
				nohalt;
				wait 4;
				actor frame step_left;
				continue;
				sfx 10;
				actor frame strike_2h;
				actor frame strike_1h;
				actor frame strike_2h;
				continue;
				sfx 12;
				say "@'Tis done!@";
				actor frame strike_1h;
				actor frame step_right;
				actor frame step_left;
				actor frame standing;
				call Func028C;
			};
			abort;
		}
		if (LYDIA->get_npc_id() == 0x0002) {
			LYDIA->set_npc_id(0x0003);
			var0005 = script LYDIA {
				nohalt;
				say "@Thou art doing well...@";
				actor frame reach_1h;
				actor frame raise_1h;
				actor frame strike_1h;
				continue;
				sfx 62;
				actor frame strike_2h;
				wait 12;
				actor frame cast_up;
				say "@Whoops!@";
				actor frame reach_1h;
				actor frame strike_1h;
				actor frame strike_2h;
				continue;
				sfx 27;
				actor frame cast_up;
				call Func028C;
			};
			abort;
		}
		if (LYDIA->get_npc_id() == 0x0001) {
			LYDIA->set_schedule_type(WAIT);
			LYDIA->set_npc_id(0x0002);
			var0005 = script LYDIA {
				nohalt;
				call Func07D2;
				say "@Hold thy breath.@";
				actor frame strike_2h;
				continue;
				sfx 10;
				wait 4;
				actor frame strike_1h;
				continue;
				sfx 12;
				wait 6;
				call Func028C;
			};
			abort;
		}
		if (LYDIA->get_npc_id() == 0x0000) {
			AVATAR->set_schedule_type(WAIT);
			LYDIA->set_npc_id(0x0001);
			Func097F(LYDIA, "@Now we begin...@", 0x0000);
			var0004 = var0003->get_object_position();
			var0004[0x0002] += 0x0001;
			LYDIA->si_path_run_usecode(var0004, SCRIPTED, item, Func028C, false);
			UI_set_path_failure(Func028C, item, SI_PATH_FAILURE);
			var0005 = script AVATAR {
				nohalt;
				face east;
				actor frame bowing;
				actor frame sitting;
			};
			abort;
		}
		UI_init_conversation();
		LYDIA->show_npc_face0(0x0000);
		say("\"Use a cloth to soak up the blood...\"");
		for (var0008 in var0002 with var0006 to var0007) {
			var0008->set_schedule_type(FOLLOW_AVATAR);
		}
		LYDIA->run_schedule();
		AVATAR->set_item_flag(TATTOOED);
		AVATAR->clear_item_flag(DONT_MOVE);
		gflags[POISONED_BY_LYDIA] = true;
		gflags[HAVE_WOLF_TATTOO] = true;
		var0005 = script Func09A0(0x0005, 0x0001) after 1000 ticks {
			nohalt;
			call Func0448;
		};
		var0009 = Func0992(IOLO, "@Thou dost look magnificent, Avatar!@", 0x0000, false);
		if (var0009 != AVATAR) {
			if (UI_get_array_size(var0002) > 0x0002) {
				var000A = var0009;
				while (var000A == var0009) {
					var000A = Func0992(0x0001, 0x0000, 0x0000, false);
				}
				var000A = Func0992(var000A, (("@Quite becoming, " + var0001) + ".@"), 0x0000, false);
				if (UI_get_array_size(var0002) > 0x0003) {
					var000B = var000A;
					while ((var000B == var000A) || (var000B == var0009)) {
						var000B = Func0992(0x0001, 0x0000, 0x0000, false);
					}
					if (!var0000) {
						var000B = Func0992(var000B, "@Thou dost look quite the fop, milord!@", 0x0000, false);
					} else {
						var000B = Func0992(var000B, "That is quite a beauty mark, milady. Hmpf!", 0x0000, false);
					}
				}
			}
		}
	}
}

extern void Func062D object#(0x62D) ();
extern void Func090D 0x90D (var var0000, var var0001, var var0002, var var0003, var var0004, var var0005, var var0006);

void Func028D shape#(0x28D) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;

	if (event == DOUBLECLICK) {
		var0000 = get_container();
		if (var0000 == AVATAR->get_npc_object()) {
			event = PATH_SUCCESS;
			item->Func062D();
			return;
		}
		if (var0000) {
			var0001 = set_last_created();
			if (var0001) {
				var0001 = AVATAR->give_last_created();
				if (!var0001) {
					var0001 = var0000->give_last_created();
					UI_flash_mouse(CURSOR_TOO_HEAVY);
					abort;
				}
			} else {
				return;
			}
			event = PATH_SUCCESS;
			item->Func062D();
			return;
		}
		var0002 = -1;
		var0003 = -1;
		var0004 = -1;
		Func090D(item, var0002, var0003, var0004, Func062D, item, PATH_SUCCESS);
	}
}

extern void Func062E object#(0x62E) ();
extern void Func090D 0x90D (var var0000, var var0001, var var0002, var var0003, var var0004, var var0005, var var0006);

void Func028E shape#(0x28E) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;

	if (event == DOUBLECLICK) {
		var0000 = get_container();
		if (var0000 == AVATAR->get_npc_object()) {
			event = PATH_SUCCESS;
			item->Func062E();
			return;
		}
		if (var0000) {
			var0001 = set_last_created();
			if (var0001) {
				var0001 = AVATAR->give_last_created();
				if (!var0001) {
					var0001 = var0000->give_last_created();
					UI_flash_mouse(CURSOR_TOO_HEAVY);
					abort;
				}
				event = PATH_SUCCESS;
				item->Func062E();
			}
			return;
		}
		var0002 = -1;
		var0003 = -1;
		var0004 = -1;
		Func090D(item, var0002, var0003, var0004, Func062E, item, PATH_SUCCESS);
	}
}

void Func0291 shape#(0x291) () {
	var var0000;
	var var0001;

	if (event == DOUBLECLICK) {
		var0000 = get_item_frame();
		if ((var0000 % 0x0002) == 0x0000) {
			var0001 =  1;
		} else {
			var0001 = -1;
		}
		var0000 += var0001;
		set_item_frame(var0000);
	}
}

extern var Func0954 0x954 ();
extern var Func0953 0x953 ();
extern var Func0994 0x994 ();
extern var Func097D 0x97D (var var0000, var var0001, var var0002, var var0003, var var0004);
extern var Func0955 0x955 ();
extern void Func0864 0x864 ();
extern void Func097F 0x97F (var var0000, var var0001, var var0002);
extern var Func0992 0x992 (var var0000, var var0001, var var0002, var var0003);

void Func0294 shape#(0x294) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;

	var0000 = Func0954();
	var0001 = UI_is_pc_female();
	var0002 = Func0953();
	var0003 = Func0994();
	var0004 = false;
	var0005 = false;
	if (event == SCRIPTED) {
		run_schedule();
		clear_item_say();
		GARGOYLE_PRISONER->show_npc_face0(0x0000);
		if (gflags[BANES_RELEASED] == false) {
			abort;
		}
		if (get_item_flag(SI_ZOMBIE)) {
			say("\"I told thee, ",
				var0002,
				", there is nothing left for me... Without the Comb of Beauty there is no hope in the world!\"");
			if (Func097D(PARTY, 0x0001, 0x0289, QUALITY_ANY, 0x0000)) {
				say("\"Thou hast the Comb of Beauty! Wilt thou give me the Comb? I will grant thee Fawn's greatest treasure, as I promised the heavens.\"");
				if (Func0955()) {
					say("\"In this one thing, at least, I can fulfill mine obligation.\"");
					Func0864();
				} else {
					say("\"Such is the story of my life... Then I shall remain here, within this fetid swamp -- where I belong!\"");
					UI_remove_npc_face0();
					Func097F(item, "@Leave me!@", 0x0000);
					abort;
				}
			} else {
				say("\"Leave me to die in peace! I have nothing left... nothing...\"");
				UI_remove_npc_face0();
				Func097F(item, "@Go away!@", 0x0000);
				abort;
			}
		} else {
			say("\"Look what thy mad companion, Iolo, hath done to me! He told me to tell thee that only thou couldst prove whether Beauty was skin deep.\"");
			say("\"Thou must have some way to remove this foul enchantment! But... What have I to live for? My very heart hath been torn asunder! My people are dead! There is nothing left for me!\"");
			add(["prove", "heart", "people"]);
		}
		converse ("bye") {
			case "bye":
				Func097F(AVATAR, "@Keep faith!@", 0x0000);
				Func097F(item, "@I am cursed!@", 0x0002);
				break;

			case "prove" (remove):
				say("\"How would I know the mind of a madman?!\"");
				say("\"Perhaps he thought that thou didst have some magic with which to counter his cruelty.\"");
				add("magic");
				fallthrough;

			case "magic" (remove):
				say("\"I am no mage, to tell thee such things!\"");
				say("\"No one can restore the life to my people...\"");
				say("\"Should I selfishly ask that mine own Beauty be restored when the life's blood of Fawn -- the city of Beauty -- lies dead in the streets?!\"");
				say("\"If only the Comb of Beauty had not been stolen! Everything changed in Fawn after it was taken... Perhaps it was some token of the heavens. And this is my punishment for losing it!\"");
				if (!var0004) {
					add("Comb of Beauty");
				}
				fallthrough;

			case "Comb of Beauty" (remove):
				say("\"I thought it nothing more than a trinket... Passed down from the Lady Fawn herself, granted, but a bauble nonetheless.\"");
				say("\"Only now do I see that it was the tradition, the duty, that I tossed aside as worthless. And now it is lost forever!\"");
				say("\"I would give Fawn's greatest treasure if only I could find the Comb of Beauty!\"");
				if (Func097D(PARTY, 0x0001, 0x0289, QUALITY_ANY, 0x0000)) {
					var0006 = Func0992(0x0001, "@Avatar, what about the comb thou didst take from Columna?@", "@I wonder... What about Columna's comb?!@", false);
					0x0000->set_conversation_slot();
					add("Columna");
				}
				var0004 = true;
				add("treasure");
				fallthrough;

			case "Columna" (remove):
				say("\"I recall a Lady Columna visiting Fawn a number of years ago! Now that I think of it... It wasn't long after that that I discovered the Comb missing!\"");
				say("\"Yes, yes! It all fits now! She admired it greatly, and seemed a bit offended when I did not offer it to her...\"");
				say("\"Of course she took it! Wilt thou give me the Comb? I will grant thee Fawn's greatest treasure, as I promised the heavens.\"");
				var0005 = true;
				if (Func0955()) {
					Func0864();
				} else {
					say("\"Such is the story of my life... Then I shall remain here, within this fetid swamp -- where I belong!\"");
					UI_remove_npc_face0();
					Func097F(item, "@Leave me!@", 0x0000);
					abort;
				}
				fallthrough;

			case "treasure" (remove):
				say("\"It is an ancient piece of armour that was found near the Serpent ruin around which the palace is built.\"");
				say("\"I do not know its significance, but we have treasured it ever since... as a sign of Fawn's strength.\"");
				if (!var0005) {
					say("\"What a farce! Leave me, ",
						var0002,
						"! Without the Comb of Beauty I will remain here, within this fetid swamp -- where I belong!\"");
					UI_remove_npc_face0();
					Func097F(item, "@Leave me!@", 0x0000);
					set_item_flag(SI_ZOMBIE);
					abort;
				}
				fallthrough;

			case "heart" (remove):
				say("\"Jorvin is dead! My love, mine heart's true desire!\"");
				say("\"But... Perhaps it is for the best -- That he never see the depths to which mine ignorance hath plunged our city, or the mark of the guilt that weighs upon my features...\"");
				add("ignorance");
				fallthrough;

			case "ignorance" (remove):
				say("\"Criminal ignorance! I listened to those who would mislead me! I let their compliments turn mine head... And never felt Love for the city that was in my charge!\"");
				say("\"Even as I let the Comb of Beauty slip from the city, I have let all of Fawn slip into lifeless darkness!\"");
				if (!var0004) {
					add("Comb of Beauty");
				}
				fallthrough;

			case "people" (remove):
				say("\"The storms grew worse and worse! Food was scarce... And a strange sickness crept through the city like some silent predator.\"");
				say("\"One by one they fell... And there was nothing I could do! My pleas to the heavens were in vain!\"");
				say("\"The only other living soul is one I turned away -- One I deemed unworthy of Fawn's Beauty!\"");
				add(["sickness", "living soul"]);
				fallthrough;

			case "sickness" (remove):
				say("\"There was no fever. It seemed as if they were sleeping...\"");
				say("\"It came without warning... Until, at last, no one was left to care for them. Many never woke from where they fell. And I was powerless! Powerless!\"");
				fallthrough;

			case "living soul" (remove):
				say("\"Hahaha! What cruel joke the heavens have had at mine expense!\"");
				say("\"I listened to the words of traitors and turned out good men, barring them from my protection!\"");
				say("\"And now only the one called Ruggs lives... To taunt me with an empty city and my ruined Beauty!\"");
		}
	}
}

extern void Func0949 0x949 (var var0000);
extern void Func097F 0x97F (var var0000, var var0001, var var0002);

void Func0296 shape#(0x296) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;

	if ((event == DOUBLECLICK) || (event == WEAPON)) {
		UI_close_gumps();
		var0000 = UI_click_on_item();
		var0001 = script AVATAR {
			actor frame strike_1h;
			actor frame standing;
		};
		if (!UI_is_water([var0000[0x0002], var0000[0x0003], var0000[0x0004]])) {
			UI_flash_mouse(CURSOR_HAND);
			return;
		}
		var0002 = AVATAR->get_object_position();
		var0002[0x0001] += 0x0001;
		if (UI_die_roll(0x0001, 0x0014) > 0x0011) {
			var0003 = UI_create_new_object(0x0179);
			if (var0003) {
				var0003->set_item_frame(0x000C);
				var0003->set_item_flag(OKAY_TO_TAKE);
				var0001 = UI_update_last_created(var0002);
				var0004 = UI_die_roll(0x0001, 0x0003);
				if (var0004 == 0x0001) {
					Func0949("@Indeed, a whopper!@");
					if (SHAMINO->npc_nearby()) {
						Func097F(SHAMINO, "@I have seen bigger.@", 0x0010);
					}
				}
				if (var0004 == 0x0002) {
					Func0949("@What a meal!@");
				}
				if (var0004 == 0x0003) {
					Func0949(["@That doth not look right.@"]);
				}
			}
		} else {
			var0004 = UI_die_roll(0x0001, 0x0004);
			if (var0004 == 0x0001) {
				Func097F(AVATAR, "@Not even a bite!@", 0x0000);
			}
			if (var0004 == 0x0002) {
				Func097F(AVATAR, "@It did escape!@", 0x0000);
				if (IOLO->npc_nearby()) {
					Func097F(IOLO, "@I'm certain thou hadst one!@", 0x0010);
				}
			}
			if (var0004 == 0x0003) {
				Func097F(AVATAR, "@I've lost my bait!@", 0x0000);
			}
			if (var0004 == 0x0004) {
				Func097F(AVATAR, "@I felt a nibble...@", 0x0000);
				if (DUPRE->npc_nearby()) {
					Func097F(DUPRE, "@We should hunt instead, Avatar!@", 0x0010);
				}
			}
		}
	}
}

void Func0298 shape#(0x298) () {
	var var0000;
	var var0001;

	if (event == DOUBLECLICK) {
		var0000 = get_item_frame();
		if (var0000 == 0x0000) {
			UI_play_sound_effect(0x0019);
			set_item_frame(0x0001);
			var0001 = script item {
				nohalt;
				wait 20;
				call Func0298;
			};
			abort;
		}
	}
	if (event == SCRIPTED) {
		set_item_frame(0x0000);
		UI_play_sound_effect(0x00FF);
	}
}

extern void Func07D1 object#(0x7D1) ();
extern void Func097F 0x97F (var var0000, var var0001, var var0002);
extern void Func0619 object#(0x619) ();
extern void Func061A object#(0x61A) ();
extern void Func061B object#(0x61B) ();

void Func0299 shape#(0x299) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;

	if (event == DOUBLECLICK) {
		var0000 = 0x0000;
		var0001 = get_npc_id();
		if ((var0001 == 0x0001) || (var0001 == 0x000B)) {
			var0000 = Func0619;
			if (var0001 == 0x000B) {
				var0002 = true;
			}
			if (!var0002) {
				AVATAR->item_say("@Hail, old woman!@");
			} else {
				AVATAR->item_say("@Hail, Drusilla!@");
			}
			item->Func07D1();
			if (!var0002) {
				Func097F(item, "@Old, is it?!@", 0x0002);
			} else {
				Func097F(item, "@Hail yerself!@", 0x0002);
			}
		}
		if ((var0001 == 0x0002) || (var0001 == 0x000C)) {
			var0000 = Func061A;
			if (var0001 == 0x000C) {
				var0002 = true;
			}
			if (!var0002) {
				AVATAR->item_say("@Greetings, strange one.@");
			} else {
				AVATAR->item_say("@Greetings, Rieya.@");
			}
			item->Func07D1();
			if (!var0002) {
				Func097F(item, "@Me, strange?!@", 0x0002);
			} else {
				Func097F(item, "@Back again?@", 0x0002);
			}
		}
		if ((var0001 == 0x0003) || (var0001 == 0x000D)) {
			var0000 = Func061B;
			if (var0001 == 0x000D) {
				var0002 = true;
			}
			if (!var0002) {
				AVATAR->item_say("@Hail, lady!@");
			} else {
				AVATAR->item_say("@Hail, Solaria!@");
			}
			item->Func07D1();
			if (!var0002) {
				Func097F(item, "@Me, a lady?!@", 0x0002);
			} else {
				Func097F(item, "@Hail to thee!@", 0x0002);
			}
		}
		if (var0000) {
			var0003 = script item after 10 ticks {
				nohalt;
				call var0000;
			};
		}
		abort;
	}
	// No idea what this is supposed to be.
	if (event == 0x001D) {
		var0004 = get_object_position();
		remove_item();
		UI_play_sound_effect(0x0060);
		UI_sprite_effect(ANIMATION_TELEPORT2, var0004[0x0001], var0004[0x0002], 0x0000, 0x0000, 0x0000, LOOP_ONCE);
	}
}

extern void Func097F 0x97F (var var0000, var var0001, var var0002);
extern var Func090F 0x90F (var var0000, var var0001, var var0002, var var0003);
extern void Func090D 0x90D (var var0000, var var0001, var var0002, var var0003, var var0004, var var0005, var var0006);

void Func02A3 shape#(0x2A3) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;
	var var0008;
	var var0009;
	var var000A;
	var var000B;
	var var000C;
	var var000D;
	var var000E;
	var var000F;
	var var0010;
	var var0011;
	var var0012;
	var var0013;
	var var0014;
	var var0015;
	var var0016;
	var var0017;
	var var0018;
	var var0019;
	var var001A;
	var var001B;
	var var001C;
	var var001D;
	var var001E;
	var var001F;
	var var0020;
	var var0021;
	var var0022;
	var var0023;
	var var0024;
	var var0025;
	var var0026;
	var var0027;
	var var0028;
	var var0029;
	var var002A;
	var var002B;

	if (event == DOUBLECLICK) {
		AVATAR->clear_item_say();
		var0000 = get_item_frame();
		if (var0000 == 0x0000) {
			var0001 = UI_click_on_item();
			UI_play_sound_effect2(0x0038, item);
			if (var0001->is_npc()) {
				var0001->item_say("@Yipe! Thou didst strike me!@");
				return;
			}
			if (var0001->get_item_shape() == 0x02A3) {
				if (var0001->get_item_frame() == 0x000A) {
					var0002 = script var0001 {
						nohalt;
						say "@Dost thou truly think@";
					};
					var0002 = script var0001 after 16 ticks {
						nohalt;
						say "@that would work@";
					};
					var0002 = script var0001 after 32 ticks {
						nohalt;
						say "@this time, Avatar?@";
					};
					var0002 = script var0001 after 48 ticks {
						nohalt;
						say "@Think again!@";
					};
				}
			}
		}
		if (var0000 == 0x000A) {
			var0003 = UI_die_roll(0x0001, 0x0007);
			if (var0003 == 0x0001) {
				var0002 = script item {
					nohalt;
					say "@Squawk!@";
				};
			}
			if (var0003 == 0x0002) {
				var0002 = script item {
					nohalt;
					say "@Polly want a cracker?@";
				};
			}
			if ((var0003 == 0x0003) || (var0003 == 0x0004)) {
				var0002 = script item {
					nohalt;
					say "@I know where@";
				};
				var0002 = script item after 16 ticks {
					nohalt;
					say "@the treasure is!@";
				};
			}
			if (var0003 == 0x0005) {
				var0002 = script item {
					nohalt;
					say "@Gimmee a cracker!@";
				};
			}
			if ((var0003 == 0x0006) || (var0003 == 0x0007)) {
				var0002 = script item {
					nohalt;
					say "@Pretty bird!@";
				};
				if (SHAMINO->npc_nearby()) {
					var0002 = script SHAMINO->get_npc_object() after 16 ticks {
						nohalt;
						say "@Ugly Bird!@";
					};
					var0002 = script item after 32 ticks {
						nohalt;
						say "@Speak for thyself!@";
					};
					var0002 = script SHAMINO->get_npc_object() after 48 ticks {
						nohalt;
						say "@Hey!!@";
					};
				}
			}
		}
		if ((var0000 == 0x0011) || ((var0000 == 0x0012) || (var0000 == 0x0013))) {
			if (!in_usecode()) {
				var0002 = script item {
					repeat 12 {
						sfx 117;
						frame 17;
						sfx 118;
						frame 19;
					};
					frame 18;
				};
				if (SPEKTOR->npc_nearby()) {
					Func097F(SPEKTOR, "@That is truly strange!@", 0x0005);
				}
			}
		}
		if (var0000 == 0x000B) {
			var0004 = UI_get_array_size(UI_get_party_list());
			if (var0004 > 0x0001) {
				var0005 = "we";
			} else {
				var0005 = "I";
			}
			var0006 = PARTY->count_objects(0x0284, QUALITY_ANY, FRAME_ANY);
			var0007 = PARTY->count_objects(0x03B7, QUALITY_ANY, FRAME_ANY);
			var0008 = PARTY->count_objects(0x03B4, QUALITY_ANY, FRAME_ANY);
			var0009 = PARTY->count_objects(0x03B8, QUALITY_ANY, FRAME_ANY);
			var000A = PARTY->count_objects(0x02F8, QUALITY_ANY, FRAME_ANY);
			var000B = PARTY->count_objects(0x0285, QUALITY_ANY, FRAME_ANY);
			var000C = PARTY->count_objects(0x03A9, QUALITY_ANY, FRAME_ANY);
			var000D = PARTY->count_objects(0x0286, QUALITY_ANY, FRAME_ANY);
			var000E = "gold coins";
			if (var0006 == 0x0001) {
				var000E = "gold coin";
			}
			var000F = "gems";
			if (var000A == 0x0001) {
				var000F = "gem";
			}
			var0010 = "pieces of jewelry";
			if (var000C == 0x0001) {
				var0010 = "piece of jewelry";
			}
			var0011 = "guilders";
			if (var0009 == 0x0001) {
				var0011 = "guilder";
			}
			var0012 = "bars of gold";
			if (var000D == 0x0001) {
				var0012 = "bar of gold";
			}
			var0013 = "gold nuggets";
			if (var000B == 0x0001) {
				var0013 = "gold nugget";
			}
			if (var0006 || (var0007 || (var0008 || (var0009 || (var000A || (var000B || (var000C || var000D))))))) {
				AVATAR->show_npc_face0(0x0000);
				say("\"Let's see... ",
					var0005,
					" have -- ",
					var0007,
					" monetari, ",
					var0006,
					" ",
					var000E,
					", ",
					var0009,
					" ",
					var0011,
					", ",
					var0008,
					" filari, ",
					var000B,
					" ",
					var0013,
					", ",
					var000A,
					" ",
					var000F,
					", ",
					var000C,
					" ",
					var0010,
					", and ",
					var000D,
					" ",
					var0012,
					"!\"");
				UI_remove_npc_face0();
			} else {
				item_say("No money in party!");
			}
		}
		if (var0000 == 0x0010) {
			var0014 = SHAMINO->get_item_flag(IN_PARTY);
			var0015 = IOLO->get_item_flag(IN_PARTY);
			var0016 = DUPRE->get_item_flag(IN_PARTY);
			var0017 = "him";
			var0018 = "he";
			var0019 = "himself";
			var001A = "handsome";
			if (UI_is_pc_female()) {
				var0017 = "her";
				var0018 = "she";
				var0019 = "herself";
				var001A = "beautiful";
			}
			AVATAR->show_npc_face0(0x0000);
			say("\"Hmm... not bad looking!\"");
			UI_remove_npc_face0();
			if (var0014) {
				SHAMINO->show_npc_face0(0x0000);
				say("\"Thou art truly ",
					var001A,
					", Avatar!\"");
				if (var0016) {
					DUPRE->show_npc_face1(0x0000);
					say("\"As thou art not!\"");
					SHAMINO->show_npc_face0(0x0000);
					say("\"Thou art dung, Dupre!\"");
					UI_remove_npc_face1();
				}
				UI_remove_npc_face0();
			}
			if (var0015) {
				IOLO->show_npc_face0(0x0000);
				say("\"Avatar, let us proceed. Cease this dallying!\"");
				if (var0014) {
					SHAMINO->show_npc_face1(0x0000);
					say("\"Oh, let ",
						var0017,
						" be, old man -- ",
						var0018,
						" is only admiring ",
						var0019,
						"!\"");
					UI_remove_npc_face1();
				}
				UI_remove_npc_face0();
			}
			if (var0016) {
				DUPRE->show_npc_face0(0x0000);
				say("\"Let us press on, Avatar!\"");
				if (var0014) {
					SHAMINO->show_npc_face1(0x0000);
					say("\"Thou dost not want ",
						var0017,
						" to show precisely how ugly thou art!\"");
					UI_remove_npc_face1();
					DUPRE->show_npc_face0(0x0000);
					say("\"Thou impudent snot!\"");
				}
				UI_remove_npc_face0();
			}
		}
		if (var0000 == 0x0014) {
			var001B = [ 1,  1,  1,  0,  0, -1, -1, -1];
			var001C = [ 1,  0, -1,  1, -1,  1,  9, -1];
			var001D = -6;
			if (!Func090F(item, var001B, var001C, var001D)) {
				UI_flash_mouse(CURSOR_HAND);
			} else {
				Func090D(item, var001B, var001C, var001D, Func02A3, item, PATH_SUCCESS);
			}
		}
		if (var0000 == 0x0015) {
			var001E = UI_game_hour();
			var001F = "am";
			if (var001E > 0x000C) {
				var001E -= 0x000C;
				var001F = "pm";
			}
			if (var001E == 0x000C) {
				var001F = "pm";
			}
			if (var001E == 0x0000) {
				var001E = 0x000C;
				var001F = "am";
			}
			var0020 = UI_game_minute();
			if (var0020 <= 0x0009) {
				var0020 = "0" + var0020;
			}
			var0021 = (((" " + var001E) + ":") + var0020) + var001F;
			if (UI_in_gump_mode()) {
				var0021 = (((" " + var001E) + ":") + var0020) + var001F;
				item_say(var0021);
			} else {
				var0021 = (((("@" + var001E) + ":") + var0020) + var001F) + "@";
				AVATAR->item_say(var0021);
			}
		}
		if (var0000 == 0x0016) {
			UI_close_gumps();
			var0003 = UI_die_roll(0x0001, 0x000C);
			Func097F(AVATAR, "The magic orb reads:", 0x0001);
			if ((var0003 == 0x0001) || (var0003 == 0x0002)) {
				Func097F(AVATAR, "@My sources say yes.@", 0x0010);
			}
			if ((var0003 == 0x0003) || (var0003 == 0x0004)) {
				Func097F(AVATAR, "@I must reply no.@", 0x0010);
			}
			if ((var0003 == 0x0005) || (var0003 == 0x0006)) {
				Func097F(AVATAR, "@Answer hazy. Thou shouldst try again later.@", 0x0010);
			}
			if ((var0003 == 0x0007) || (var0003 == 0x0008)) {
				Func097F(AVATAR, "@I would not count on it.@", 0x0010);
			}
			if ((var0003 == 0x0009) || (var0003 == 0x000A)) {
				Func097F(AVATAR, "@Ask at another time.@", 0x0010);
			}
			if (var0003 == 0x000B) {
				Func097F(AVATAR, "@Trust thy friends not.@", 0x0010);
				Func097F(AVATAR, "@Slay them instead, Avatar.@", 0x0020);
			}
			if (var0003 == 0x000C) {
				Func097F(AVATAR, "@Batlin is thy friend.@", 0x0010);
				Func097F(AVATAR, "@Do his bidding, Avatar.@", 0x0020);
			}
		}
		if ((var0000 == 0x0017) || ((var0000 == 0x0018) || (var0000 == 0x0019))) {
			AVATAR->clear_item_say();
			var0022 = get_item_quality();
			var0023 = var0022 + 0x0001;
			var0024 = find_nearby(0x02A3, 0x0014, MASK_NONE);
			for (var0027 in var0024 with var0025 to var0026) {
				if ((var0027->get_item_frame() > 0x0016) && (var0027->get_item_frame() < 0x001A)) {
					var0002 = var0027->set_item_quality(var0023);
				}
			}
			if (var0023 == 0x0001) {
				Func097F(AVATAR, "Origin presents...", 0x0001);
				Func097F(AVATAR, "The few...", 0x0010);
				Func097F(AVATAR, "The proud...", 0x0020);
				Func097F(AVATAR, "The well-armed...", 0x0030);
				Func097F(AVATAR, "Strike Commander!", 0x0040);
			}
			if (var0023 == 0x0002) {
				Func097F(AVATAR, "Even during war,", 0x0001);
				Func097F(AVATAR, "some people still", 0x0010);
				Func097F(AVATAR, "make a profit...", 0x0020);
				Func097F(AVATAR, "Privateer", 0x0030);
			}
			if (var0023 == 0x0003) {
				Func097F(AVATAR, "Ultima 8?", 0x0001);
				Func097F(AVATAR, "Pagan?", 0x0010);
				Func097F(AVATAR, "This omen doth not", 0x0020);
				Func097F(AVATAR, "bode well...", 0x0030);
			}
			if (var0023 == 0x0004) {
				var0002 = script AVATAR after 1 ticks {
					nohalt;
					say "Curse that Stokes!";
				};
				var0024 = AVATAR->find_nearby(0x02A3, 0x001E, MASK_NONE);
				for (var0027 in var0024 with var0028 to var0029) {
					if ((var0027->get_item_frame() > 0x0016) && (var0027->get_item_frame() < 0x001A)) {
						var002A = var0027->get_object_position();
						var0027->remove_item();
						UI_sprite_effect(ANIMATION_MEDIUM_BLAST, var002A[0x0001], var002A[0x0002], 0x0000, 0x0000, 0x0000, LOOP_ONCE);
						UI_play_sound_effect(0x002A);
					}
				}
			}
		}
	}
	if ((var0000 == 0x001A) || (var0000 == 0x001B)) {
		Func097F(AVATAR, "I cannot read this.", 0x0001);
		Func097F(AVATAR, "This book is ruined.", 0x0012);
	}
	if (event == PATH_SUCCESS) {
		if (get_item_frame() == 0x0014) {
			var002B = script item {
				repeat 4 {
					sfx 28;
					wait 5;
				};
			};
		}
	}
}

void Func02A6 shape#(0x2A6) () {
	var var0000;
	var var0001;

	if (event == DOUBLECLICK) {
		var0000 = get_item_frame();
		if ((var0000 % 0x0002) == 0x0000) {
			var0001 =  1;
		} else {
			var0001 = -1;
		}
		var0000 += var0001;
		set_item_frame(var0000);
	}
}

extern void Func090D 0x90D (var var0000, var var0001, var var0002, var var0003, var var0004, var var0005, var var0006);
extern void Func094F 0x94F (var var0000, var var0001);
extern var Func09A6 0x9A6 (var var0000);
extern void Func092F 0x92F (var var0000, var var0001);
extern void Func097F 0x97F (var var0000, var var0001, var var0002);
extern var Func09A0 0x9A0 (var var0000, var var0001);
extern void Func0636 object#(0x636) ();

void Func02AF shape#(0x2AF) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;
	var var0008;
	var var0009;
	var var000A;

	if (event == DOUBLECLICK) {
		var0000 = get_item_frame();
		if (var0000 == 0x000A) {
			if (gflags[TRIED_CLONE_DUPRE_TEST] && (gflags[TRIED_CLONE_IOLO_TEST] && gflags[TRIED_CLONE_SHAMINO_TEST])) {
				abort;
			}
			var0001 = script AVATAR {
				nohalt;
				call Func07D6;
			};
			Func090D(item, [1, 2], [1, 2], -1, Func02AF, item, PATH_SUCCESS);
			var0002 = AVATAR->get_distance(item);
			var0001 = script AVATAR after (var0002 + 0x0002) ticks {
				nohalt;
				call Func02AF;
			};
		}
	}
	if (event == SCRIPTED) {
		AVATAR->clear_item_flag(INVISIBLE);
		UI_play_sound_effect(0x0082);
		UI_lightning();
		AVATAR->set_camera();
		AVATAR->halt_scheduled();
		UI_fade_palette(0x000C, 0x0001, 0x0000);
		if (!gflags[STARTED_TEST_OF_PURITY]) {
			var0001 = find_nearby(0x0320, 0x001E, MASK_NONE);
			var0003 = false;
			for (var0006 in var0001 with var0004 to var0005) {
				if (var0006->get_item_quality() == 0x003D) {
					var0003 = var0006;
				}
			}
		}
		if (var0003 && (!gflags[STARTED_TEST_OF_PURITY])) {
			var0001 = "" & ("@Where am I?@" & "@Where are my belongings?@");
			Func094F(AVATAR, var0001);
			var0007 = 0x0000;
			var0008 = AVATAR->get_cont_items(SHAPE_ANY, QUALITY_ANY, FRAME_ANY);
			while (var0007 < 0x0002) {
				for (var0006 in var0008 with var0009 to var000A) {
					if (Func09A6(var0006) || (var0007 == 0x0001)) {
						var0001 = var0006->get_item_shape();
						if (!((var0001 == 0x01E6) || (var0001 == 0x025F))) {
							if (!var0006->set_last_created()) {
								Func092F(AVATAR, 0x0011);
							}
							if (!var0003->give_last_created()) {
								Func092F(AVATAR, 0x0012);
							}
						}
					}
				}
				var0007 += 0x0001;
				var0008 = AVATAR->get_cont_items(SHAPE_ANY, QUALITY_ANY, FRAME_ANY);
			}
		}
		if (gflags[STARTED_TEST_OF_PURITY]) {
			Func097F(AVATAR, "@Back here again?@", 0x0005);
		}
		gflags[STARTED_TEST_OF_PURITY] = true;
		AVATAR->move_object([0x0066, 0x066F, 0x0000]);
		UI_play_music(0x0035, Func09A0(0x0005, 0x0001));
		var0001 = script AVATAR after 4 ticks {
			nohalt;
			face FACE_NORTH;
			call Func0636;
		};
	}
}

void Func02B1 shape#(0x2B1) () {
	if ((event == DOUBLECLICK) || (event == SCRIPTED)) {
		UI_play_music(0x002E, item);
	}
}

void Func02B2 shape#(0x2B2) () {
	if ((event == DOUBLECLICK) || (event == SCRIPTED)) {
		UI_play_music(0x002D, item);
	}
}

void Func02B4 shape#(0x2B4) () {
	if ((event == DOUBLECLICK) || (event == SCRIPTED)) {
		UI_play_music(0x0030, item);
	}
}

void Func02B5 shape#(0x2B5) () {
	if ((event == DOUBLECLICK) || (event == SCRIPTED)) {
		UI_play_sound_effect(0x0055);
	}
}

void Func02B7 shape#(0x2B7) () {
	var var0000;
	var var0001;
	var var0002;

	if (event == DOUBLECLICK) {
		var0000 = UI_game_hour();
		if (var0000 > 0x000C) {
			var0000 -= 0x000C;
		}
		if (var0000 == 0x0000) {
			var0000 = 0x000C;
		}
		var0001 = UI_game_minute();
		if (var0001 < 0x000A) {
			var0001 = "0" + var0001;
		}
		var0002 = ((" " + var0000) + ":") + var0001;
		item_say(var0002);
	}
}

extern void Func087F 0x87F (var var0000);

void Func02B8 shape#(0x2B8) () {
	if (event == DOUBLECLICK) {
		Func087F(item);
	}
}

extern void Func094A 0x94A (var var0000);

void Func02BA shape#(0x2BA) () {
	var var0000;
	var var0001;

	if (event == DOUBLECLICK) {
		var0000 = UI_click_on_item();
		var0001 = var0000[0x0001]->get_item_shape();
		if (var0001 == 0x0353) {
			var0000->set_item_shape(0x033B);
			var0000->set_item_frame(UI_die_roll(0x0000, 0x0002));
		} else {
			Func094A("@Might not those come in handy for cutting cloth into bandages?@");
		}
	}
}

extern void Func092D 0x92D (var var0000, var var0001, var var0002);
extern var Func090C 0x90C (var var0000, var var0001);
extern void Func0950 0x950 (var var0000);

void Func02BD shape#(0x2BD) () {
	var var0000;
	var var0001;

	if ((event == DOUBLECLICK) || (event == SCRIPTED)) {
		Func092D(item, 0x0253, event);
	}
	if (event == PATH_SUCCESS) {
		var0000 = Func090C(AVATAR, item);
		var0001 = script AVATAR {
			face var0000;
			continue;
			actor frame strike_2h;
			actor frame standing;
		};
		Func092D(item, 0x0253, event);
	}
	if (event == READIED) {
		Func0950(item);
	}
}

extern var Func0954 0x954 ();
extern var Func0953 0x953 ();
extern var Func099B 0x99B (var var0000, var var0001, var var0002, var var0003, var var0004, var var0005, var var0006);
extern var Func0955 0x955 ();
extern void Func097F 0x97F (var var0000, var var0001, var var0002);

void Func02BE shape#(0x2BE) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;

	var0000 = Func0954();
	var0001 = Func0953();
	if (event == SI_PATH_FAILURE) {
		AVATAR->clear_item_flag(DONT_MOVE);
		UI_init_conversation();
		if (gflags[HAVE_PHOENIX_EGG]) {
			event = PATH_SUCCESS;
		} else {
			event = PATH_FAILURE;
		}
	}
	if (event == PATH_SUCCESS) {
		PALOS->show_npc_face0(0x0000);
		say("\"It is a phoenix egg. It is obviously quite rare, and it possesses magical qualities that go beyond explanation.\"");
		var0002 = Func099B(AVATAR, 0x0001, 0x0289, 0x0000, 0x0001, 0x0000, true);
		gflags[HAVE_PHOENIX_EGG] = true;
		gflags[TEMP_FLAG_1] = true;
		var0003 = script item after 2 ticks {
			nohalt;
			call Func02BE;
		};
	}
	if ((event == PATH_FAILURE) || ((event == DOUBLECLICK) || (event == SCRIPTED))) {
		AVATAR->clear_item_flag(DONT_MOVE);
		if ((event == DOUBLECLICK) || (event == SCRIPTED)) {
			if ((event == SCRIPTED) && gflags[TEMP_FLAG_1]) {
				UI_play_sound_effect(0x000F);
				si_path_run_usecode([0x0862, 0x04AE, 0x0000], PATH_FAILURE, item, Func02BE, true);
				gflags[TEMP_FLAG_1] = false;
				abort;
			}
			PALOS->show_npc_face0(0x0000);
			say("\"Greetings to thee!\"");
			add(["name", "bye"]);
		}
		if (event == PATH_FAILURE) {
			PALOS->show_npc_face0(0x0000);
			say("\"That is the greatest gift that I can give to thee. Use it wisely.\"");
			UI_play_sound_effect(0x000F);
			add(["bye"]);
		}
		gflags[TEMP_FLAG_1] = false;
		if (gflags[HAVE_PHOENIX_EGG]) {
			add("domain");
		}
		converse (0) {
			case "name" (remove):
				say("\"Name? Oh, my, what a formality! First thou hast saved my life and then thou dost ask my name! Thou art a curiosity!\"");
				say("\"No one hath asked me my real name in several hundred years! I have always been called simply Phoenix.\"");
				add(["real name", "phoenix"]);
				fallthrough;

			case "real name" (remove):
				say("\"It is a sound thou wouldst find most unpronounceable. My name is a word in the language of my kind that roughly translates as 'Skyrise'.\"");
				say("\"It is a popular name among my kind. But enough of that! I wish to thank thee for thy deed...\"");
				add(["Skyrise", "thou art welcome"]);
				fallthrough;

			case "Skyrise" (remove):
				say("\"I was named after a famous Phoenix queen. She was so beautiful that a dragon came to court her!\"");
				say("\"Canst thou imagine? After many rejections, she at last agreed to go away with him. And then she flew away with the dragon, into the sky!\"");
				fallthrough;

			case "thou art welcome" (remove):
				if (gflags[HAVE_PHOENIX_EGG]) {
					say("\"It is rare to find a stranger who is so well-mannered! I do hope that thou didst enjoy the egg I gave to thee!\"");
				} else {
					say("\"As a token of mine appreciation, I shall give thee the most valuable possession I could bestow upon thee.\"");
					var0004 = AVATAR->get_object_position();
					si_path_run_usecode([(var0004[0x0001] + 0x0001), (var0004[0x0002] + 0x0001), 0x0000], PATH_SUCCESS, item, Func02BE, true);
					UI_play_sound_effect(0x000F);
					abort;
				}
				fallthrough;

			case "phoenix" (remove):
				say("\"Thou hast never met such a creature before...? If thou dost wish it I shall tell thee my tale.\"");
				add(["tale"]);
				fallthrough;

			case "tale" (remove):
				say("\"The phoenix are creatures of fate. We are naturally drawn to places where the balance between Order and Chaos hath been upset.\"");
				add(["fate", "balance"]);
				fallthrough;

			case "fate" (remove):
				say("\"Fate is a force that is eternal. This is why those of my kind can never truly die.\"");
				say("\"Although we may lose our lives, we are reborn from the ashes of our own funeral pyres.\"");
				add(["eternal", "pyres"]);
				fallthrough;

			case "balance" (remove):
				say("\"As the course of destiny calls us to many places and many worlds throughout the universe, mine ancestors grew wings to travel far.\"");
				say("\"I flew between the Serpent Pillars to reach this place. I suspect that is how thou didst come here thyself.\"");
				fallthrough;

			case "eternal" (remove):
				say("\"Now that there is a living phoenix in this world, the balance between Order and Chaos can be restored.\"");
				say("\"A happy thought, no?\"");
				fallthrough;

			case "pyres" (remove):
				say("\"The flames of the pyres are a rebirth. They represent change. If the balance between Order and Chaos is misaligned, 'tis thee who must change it.\"");
				say("\"I wish thee luck in all thine endeavors!\"");
				fallthrough;

			case "domain" (remove):
				say("\"Dost thou wish to spend more time in my domain?\"");
				var0005 = Func0955();
				if (var0005) {
					say("\"Wonderful! Feel free to stay as long as thou wouldst like, though thou mightest find it to be on the warm side.\"");
				} else {
					say("\"If thou dost wish to leave, thou canst return to the place from whence thou camest through a mystical means of unknown origin. The means lies beyond my lair.\"");
				}
				fallthrough;

			case "bye":
				say("\"I wish thee good fortune, and once again I thank thee for restoring me.\"");
				UI_remove_npc_face0();
				Func097F(AVATAR, "@Goodbye!@", 0x0000);
				Func097F(item, "@Balance to thee.@", 0x0005);
				break;
		}
	}
}

extern var Func09AB 0x9AB (var var0000, var var0001, var var0002, var var0003, var var0004);

void Func02C0 shape#(0x2C0) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;
	var var0008;
	var var0009;
	var var000A;
	var var000B;
	var var000C;
	var var000D;
	var var000E;
	var var000F;
	var var0010;

	var0000 = get_object_position();
	if ((event == DOUBLECLICK) || ((event == SCRIPTED) || (event == EGG))) {
		var0001 = get_container();
		if (!var0001->is_npc()) {
			UI_close_gumps();
			var0002 = UI_get_avatar_ref()->attack_object(item, 0x02C0);
			var0003 = var0000[0x0001];
			var0004 = var0000[0x0002];
			if (((var0003 > 0x04C2) && ((var0003 < 0x04CE) && ((var0004 > 0x036B) && (var0004 < 0x0375)))) && (gflags[BLASTED_DOORS_TO_CHAOS_SHRINE] == false)) {
				var0005 = AVATAR->find_nearby(0x00F6, 0x003C, MASK_NONE);
				for (var0008 in var0005 with var0006 to var0007) {
					var0009 = var0008->get_object_position();
					if (var0008->get_item_frame() == 0x0002) {
						var0008->remove_item();
						var0002 = Func09AB(0x0374, 0x0001, 0x0000, 0x0000, var0009);
					}
					if (var0008->get_item_frame() == 0x0012) {
						var0008->remove_item();
						var0002 = Func09AB(0x0374, 0x0003, 0x0000, 0x0000, var0009);
					}
				}
				var0005 = AVATAR->find_nearby(0x0204, 0x003C, MASK_NONE);
				for (var0008 in var0005 with var000A to var000B) {
					var0009 = var0008->get_object_position();
					if (var0008->get_item_frame() == 0x0002) {
						var0008->remove_item();
						var0002 = Func09AB(0x0374, 0x0000, 0x0000, 0x0000, [(var0009[0x0001] - 0x0002), var0009[0x0002], 0x0000]);
					}
					if (var0008->get_item_frame() == 0x0012) {
						var0008->remove_item();
						var0002 = Func09AB(0x0374, 0x0002, 0x0000, 0x0000, [(var0009[0x0001] - 0x0002), var0009[0x0002], 0x0004]);
					}
				}
				var000C = 0x0001;
				var000D = [0x04C5, 0x04C7, 0x04C9, 0x04CB, 0x04C5, 0x04C7, 0x04C9, 0x04CB, 0x04C5, 0x04C7, 0x04C9, 0x04CB, 0x04C5, 0x04C7, 0x04C9, 0x04CB, 0x04C3, 0x04C3];
				var000E = [0x036D, 0x036D, 0x036D, 0x036D, 0x036F, 0x036F, 0x036F, 0x036F, 0x0371, 0x0371, 0x0371, 0x0371, 0x0373, 0x0373, 0x0373, 0x0373, 0x0372, 0x0372];
				var000F = [0x0005, 0x0005, 0x0005, 0x0005, 0x0005, 0x0005, 0x0005, 0x0005, 0x0005, 0x0005, 0x0005, 0x0005, 0x0001, 0x0001, 0x0001, 0x0001, 0x0003, 0x0003];
				while (var000C < 0x0012) {
					var0002 = UI_create_new_object(0x00E0);
					if (var0002) {
						var0002->set_item_frame(var000F[var000C]);
						var0009 = [var000D[var000C], var000E[var000C], 0x0000];
						var0002 = UI_update_last_created(var0009);
					}
					var000C += 0x0001;
				}
				var0002 = UI_create_new_object(0x00CF);
				if (var0002) {
					var0002->set_item_frame(0x0000);
					var0002 = UI_update_last_created([0x04C3, 0x0370, 0x0000]);
				}
				var0002 = UI_create_new_object(0x037F);
				if (var0002) {
					var0002->set_item_frame(0x0001);
					var0002 = UI_update_last_created([0x04CA, 0x0373, 0x0000]);
				}
				var0002 = UI_create_new_object(0x037F);
				if (var0002) {
					var0002->set_item_frame(0x0000);
					var0002 = UI_update_last_created([0x04C5, 0x0372, 0x0000]);
				}
				gflags[BLASTED_DOORS_TO_CHAOS_SHRINE] = true;
			}
			if ((var0003 > 0x0586) && ((var0003 < 0x0593) && ((var0004 > 0x03D5) && (var0004 < 0x03DE)))) {
				var0010 = AVATAR->find_nearest(0x00CA, 0x0041);
				if (var0010) {
					var0010->remove_item();
				}
			}
		}
	}
}

void Func02C1 shape#(0x2C1) () {
	var var0000;
	var var0001;

	if (event == DOUBLECLICK) {
		UI_play_sound_effect2(0x005E, item);
		book_mode();
		var0000 = get_item_quality();
		if (var0000 == 0x0000) {
			say("~~PHILIPHUS'S WISDOM ~~  ~~by Philiphus*");
			say("~~An enlightening discourse on the enigma of programming.");
			say("~Beginning with the heretofore unresolved mysteries of global variables...");
		} else if (var0000 == 0x0001) {
			say("The path to wisdom lies before thee. If thy deeds are as virtuous as thy words, thou shalt not fail.");
		} else if (var0000 == 0x0002) {
			say("~~TEMPLE OF BALANCE*");
			say("\t Only he who hath achieved balance within this temple may be free to find greater balance on the path to the Grand Shrine.~ He who wishes to find fulfillment must use the fire of chaos and the ice of order to restore balance. ~   Only a true serpent of fire and serpent of ice will bring thee to balance.");
		} else if (var0000 == 0x0003) {
			say("~~IMPLEMENTS OF BALANCE*");
			say("  A devout follower will know the true path towards Balance. Thou shouldst know the arts necessary to achieve Balance. To those of you who have forgotten your lessons -- take heed:~~   Fire is the embodiment of the force of Chaos, ~   Ice is the embodiment of the force of Order.~ ~   The Ice Diamond and the Fire Ruby are necessary to achieve balance within the shrine.*");
			say("~   Disciple of Balance, know the true way to balance fire is with ice, and the one way to balance ice is with fire. Using thy tools of the candles of fire and the solids of ice thou mayest achieve the way to Balance and to the Shrine.");
		} else if (var0000 == 0x0004) {
			say("~~ISKERISS'S JOURNAL*");
			say("  The Great Hierophant, who feared that the followers of Chaos would attempt to gain access to the Sacred Library, ordered the Adepts of the Conjury to construct a secure means of entering the Library. The Adepts spent many long nights in contemplation, rejecting one idea after another as being too impractical. It was the suggestion of a mere apprentice, Kethiss, that was finally accepted by all of the Adepts. Our Beloved Leader, the Great Hierophant, was soon informed that there could be only one way to gain ingress into the Sacred Library. The Adepts, acting in concert, placed a charm of teleportation upon our Gate. The Great Hierophant was adamant, however, that he alone could have access to the Sacred Library. Thus, the Adepts wove the charm of teleportation so that it would only trigger when the Wand of the Serpent was used on the Gate. *  The Great Hierophant, may he live a thousand years, hath successfully entered the Sacred Library by using the Wand of the Serpent and stepping upon the Serpent Gate...");
		} else {
			if (var0000 == 0x0005) {
				say("~  Before proceeding to the main shrine, the devout follower must reacquaint himself or herself with the six shrines of the Temple. These shrines are dedicated to the forces of: ~Discipline, Tolerance, Ethicality, Enthusiasm, Emotion, and Logic.*  One achieves enlightenment through Balance.~ ~Tolerance becomes the chain that unites the whole. ~Ethicality is a beacon to guide our actions. ~Enthusiasm is a rose that brings beauty to our rising. ~Discipline is our weapon against faltering. ~Emotion is a heart that is a reservoir of our feelings. ~Logic is calculated truths leading us from ignorance. ~Tolerance balanced with Ethicality brings us Harmony.~ ~Enthusiasm balanced with Discipline bestows Dedication upon us.~ ~Emotion blended with Logic and Logic balanced with Emotion achieve Rationality.~~ ~Only by achieving Harmony, Dedication, and Rationality can one find the path to the Grand Shrine of Balance. Balance is the key to the Shrine.");
			}
			if (var0000 == 0x0006) {
				say("~~ARTIFACTS OF COMMUNION*");
				say("Before the War of Imbalance our priests did fashion three artifacts: the Web of Fate, the Moon's Eye, and a Magic Lens. Each artifact was made for a particular temple.");
				say("The Web of Fate was placed within the Temple of Tolerance. The Moon's Eye was placed within the Temple of Emotion, and the Magic Lens was placed within the Temple of Enthusiasm.");
				say("Our holy fathers used the power of these artifacts to commune with the Power of the Void -- to answer questions that the mind of mortals could never fathom.");
				say("The War of Imbalance changed everything! The artifacts no longer worked properly; the holy father's questions were left unanswered -- their hoarse voices echoed within the deserted temples.");
				say("The only power left within the holy artifacts was the ability to divine the location of the Banes of Chaos. Each artifact could spy upon a different Bane.");
			}
			if (var0000 == 0x0059) {
				say("~~ ~~ GUIDELINES OF LIFE by Shaushauna~~");
				say("1: Tolerance becomes the chain that unites the solidarity into the whole.~");
				say("2: Ethicality is a beacon to guide our actions.~");
				say("3: Enthusiasm brings beauty to our rising.~");
				say("4: Discipline is a weapon against faltering.~");
				say("5: Emotion is a heart beating strong and proud.~");
				say("6: Logic is a straight guide upon which we can rely...");
			}
			if (var0000 == 0x004B) {
				say("PENGUINS OF THE NORTH ~~Observations by Ssashartha~~");
				say("     Talking about all living creatures on our beloved Serpent Isle, we cannot forget to mention the family of the penguins. Those clumsy-looking beings are called birds even though they cannot fly. They live in the northern part of this island. Penguins are very good divers. The short wings of their strong bodies are used as a rudder. Out of the water they walk upright just as Men and the tail is an important tool to keep balance. Depending on the species, they can grow taller than 3 feet. No matter what the species, all penguins live in a sociable manner and breed in seemingly peaceful colonies. The female penguins take much pride in building the nests. Because of their size, penguin nests can easily contain more than mere eggs...");
			}
			if (var0000 == 0x003E) {
				say("TENETS OF DISCIPLINE ~~Precepts by Shushuro~~");
				say("1: \"One cannot master the world around him without first mastering oneself.\"~");
				say("2: \"A task left unfinished is a task failed.\"~");
				say("3. \"The means to succeed is brought about by discipline.\"~");
				say("4. \"Discipline brings about obedience. Obedience brings about order.\"~");
				say("5. \"The mind disciplines the body.\"");
			}
			if (var0000 == 0x0058) {
				say("~~ ~~ TEMPLES OF ORDER~~ ~~by Shrithos*");
				say("Pilgrims, it is a great journey to visit the three Temples of Order. Do not let the obstacles sway thee from thy destination, for though the path is difficult, the rewards are many.");
				say("Seek the Fountains, for their Water is the essence of the Force which resides at that sanctuary. Imbibe the Waters, and drink of the fruit of thy quest.");
				say("The Temple of Ethicality is found near the coast, south of the Spinebreaker Mountains. It was built in such a way that those who come here may gain inspiration from the view. This is the first Temple on the Pilgrimage of Order.");
				say("Continue next to the Temple of Discipline. The western branch of the Spinebreaker Mountains is where the Temple of Discipline was carved out. Seek the great bay, then follow the eastern coast until thou dost reach the mountains. Continue east, and thou shalt be sure to find the entrance.");
				say("Lastly, the Temple of Logic lies within the Glacier Mountains, with the entrance being in the southern tip of the mountain chain. There are many passageways until one finds the Tests of Logic which lead to the sanctum.");
				say("Above all, do not mistake any Temple of Chaos for one of the sanctuaries of Order, for in this path lies Madness. Only Order is fit for study; chaos defiles all it touches.");
			}
			if (var0000 == 0x0043) {
				say("~~ ~~THE IMPORTANCE OF MEDITATION~~ ~~Manual by Zazanush*");
				say("    The importance of meditation becomes noticeable when people of all ages admit that they are living a better, more peaceful life since they started to seek communion with the Serpent of Order. To apply the power of meditation to one's life, young student, obey the rules and follow them as they are written in this manual. I have gathered some guidelines that are easy to understand, so that thou mayest begin with these relaxing exercises without having to investigate any further.");
				say("1: Find thyself a place where thou wilt not be disturbed by anyone or anything.~");
				say("2: Carefully spread the Mat of Meditation on the floor. Use only the prepared mats, for they are imbued with special powers to aid meditation.~");
				say("3: Kneel and close thine eyes.~");
				say("4: Concentrate on breathing very slowly and deeply.~");
				say("5: Begin repeating the mantra \"Issit.\"~");
				say("6: Do not speak.~");
				say("7: Do not let anything interrupt thee.~");
				say("8: Continue with the mantras until thou dost feel total peace of mind.~");
				say("These lessons will lead thee to a much higher level of meditation. They will prepare thee for the climax of the Test of Discipline.");
			}
			if (var0000 == 0x0052) {
				say("~~ ~~HISTORY OF SERPENT ISLE ~~ ~~by Harashash*");
				say("   During the First Age, the world was divided into four continents -- the LANDS OF LORD BRITISH, the LANDS OF THE FEUDAL LORDS, the LANDS OF DARK UNKNOWN, and the LANDS OF DANGER AND DESPAIR. After the evil wizard Mondain was defeated, only the Lands of Danger and Despair remained -- all other continents were destroyed.");
				say("The Lands of Danger and Despair became what we now call Serpent Isle, in honor of the Great Earth Serpent who is our guide. It was he who called to us from the Void, and in answer to our pleas, he taught us the ways of the Serpent -- the Way of Balance.");
				say("The population on Serpent Isle grew. The citizens helped each other and relied on each other. There was no crime and people were holding to their traditions. Parents taught their children about the Virtues of Order and Chaos. These traditions were passed on from generation to generation. Their devotions were presided over by the Great Hierophant. He was the only one allowed to open the Wall of Lights and enter the Void -- a magical place that connects dimensions in space and mayhap even time! Because great danger is involved in entering the Void, only the Great Hierophant is entitled to operate the Wall of Lights. Much knowledge is required for this procedure and the Great Hierophant must be in possession of the Artifacts of the Serpent.");
			}
			if (var0000 == 0x0057) {
				say("~~ ~~THE TEST OF PURITY~~ ~~by Larushash*");
				say("Throughout our lives we must measure ourselves in tests of one form or another. This treatise is meant to be read by those who will be given the test of purity. Purity is important for a free soul and demands discipline, logic and ethicality from the obedient human being. Obedience demands a person who is capable of putting others first and himself last.~");
				say("Putting others first demands discipline; the ability to finish a task without being distracted.~");
				say("Putting others first demands logic that will block the emotion that may ask thee to do otherwise.~");
				say("Putting others first demands ethicality that makes one believe in abiding the rules of conduct.~");
				say("Discipline, Logic and Ethicality in their purest form and always obeyed will give one a free soul. A soul that is not enslaved by materialism, egoism and other evil characteristics. They will serve thee to the purpose of a dedicated life, a life in harmony with the ability to understand the meaning of life and the world around thee. The person that truly lives his life by these rules will be rewarded....");
			}
			if (var0000 == 0x005B) {
				say("~~THE POWER OF MAGIC~~ ~~ by Rossinoss~~");
				say("Many of us have learned with difficulty what it means when an item important to us disappears. In most cases those things disappeared forcibly -- they disappeared by theft! It became necessary to protect brave citizens and their property. People invented their own types of 'protection-devices'! Some of those were unfortunately dangerous and harmed the person they were supposed to protect. Some of them were useful and very effective. Here are some advanced techniques to protect thyself and thy property.");
				say("     To create a device that will protect thine home against fire, certain items are required. The owner will need 1 keg of moondust and 1 keg of roasted ice ants. The mixture of both must be spread around the house in a circle. Unfortunately this procedure hath not been proven to be absolutely effective yet.~");
				say("    To protect thy farm animals and pets against gruesome predators, a feed mixture out of the following ingredients is very helpful: 1 bucket of red corn, 1 bucket of fish spawn, 1 bucket of ground gargoyle horn and 1 bucket of water from the silver fountain. Feed this to the animals about once a week before sunrise.~");
				say("    The most effective way to protect doors against intruders hath been proven to be a combination puzzle for the lock.");
			}
			if (var0000 == 0x0051) {
				say("~~FUNERAL CEREMONIES~~by Javallaja~~");
				say("The darkest day of all arrives when one of our Great Hierophants lies down to close his eyes forever. The country's grief is so apparent that it seems that it may be touched. Every follower, down to the littlest child, can feel the void that unfolds with the loss of the Great Hierophant. The only way acceptable to pay our last respects is a ceremony that indicates without any doubt how important this being was to our society and how much they are missed by us.~");
				say("The body must be laid in state for three full days. After the blessings, the body will be dressed in holy clothes and decorated with holy flowers, so that the ordinary folks may greet the Great Hierophant for the last time, in a quiet manner. Loud wailing and gnashing is not tolerated. The pain must be held back until the outside of the shrine is reached. People may bring small tokens and leave them with the Hierophant to show their gratitude. A state of mourning for the period of seven days is ordered for the whole country. Every temple and every shrine will be open day and night, so people may gather at all times and share their grief.~");
				say("One last word to those people who never followed the Great Hierophant with all their heart: Rebellion, interruptions of the ceremony and all other possible disturbances will be prosecuted and punished. No crime will go unseen. Keep in mind: 'The Serpent Watches Over All!'");
			}
			if (var0000 == 0x005D) {
				say("~~ ~~ CIVIL WAR OR THE EVIL FORCES OF CHAOS ~~ by Lorick~~");
				say(" Every morning when I rise it becomes clearer and clearer to me and to many other people. The Forces of Chaos cannot be the right way of belief. What they are doing is wrong and evil. It will bring our country to a downfall. Their actions are destroying the faith of the citizens in leaders and leadership. Something must be done. There must be a way to end this Civil War. Thousands and thousands of brave followers have been victimized and sacrificed by the powers of Chaos. And thousands more are to follow if this war doth not come to an end soon. Someone must be there to help our people and protect them from the unbridled Tolerance and Anarchy of THOSE people, that were the root cause of this war. There must be a way, there must be....");
			}
			if (var0000 == 0x0062) {
				say("~~ ~~Diary of Diabolical Traps~~");
				say("\tI, Seliashor, am accompanying a score of soldiers and scholars ordered to retrieve the Golden Orb.  I was chosen for my knowledge of traps; a specialty particularly suited for a journey into unknown lands controlled by a mind such as the Fiend's.~");
				say("First Level--The first trap!  A soldier, wandering into an alcove, found himself separated from his command by poison fields!  I had the good fortune to be looking his way when he triggered the trap; it is obviously of magical nature.  If this is all we will face, the ring will surely be ours.~");
				say("Second Level--The Fiend has raised the stakes! We discovered a large cavern, in which were numerous statues of harpies and decorative suits of armor.  We had immediately deduced that these were traps and would smite us if we stepped to near, but the real trap was more cleverly hidden!  Caltrops, painted to match the color of the floor, drew a great deal of blood from the soldiers as they gingerly avoided the obvious statue traps.  Clever.*");
				say("Second Level--We have discovered the next trap.  A small number of chests, clustered together, proved to be explosive if tampered with.  Amateurish--I spotted the trap before any of the foolish soldiers could tamper with it.~");
				say("Third Level--Three soldiers entered a completely barren cavern and triggered a truly fiendish trap.  When they reached the center of the room, we heard the sound of a bell.  Nervous seconds passed.  Just when we relaxed, a spell of terrifyingly destructive nature went off.  The soldiers were consumed in flames which appeared from empty air, disappeared, and reappeared in other locations.  Had they fled from the room, they would have lived.  There was a body in there, and my mind's eye can still see the light cast from our torches glinting of a golden object in its hands.  If it was the orb, it is lost, for not one of our number dares to face the flames.  I think it was naught but a gold statue or somesuch; more accurately, I hope it was.*");
				say("Third Level--we sent another soldier to his death.  He was sent into the narrow mouth of a cavern.  I knew he would not return.  When he entered the cavern, an energy field appeared in the narrow opening!  Neither I nor our wizard had Dispel Field in our spellbooks; he was left to die.  He was one of the last soldiers alive; our prospects for survival are grim.*");
			}
			if (var0000 == 0x0060) {
				say("~~ ~~Denizens of the Caves~~ ~~by Isstherios~~");
				say("\tDuring our inhabitance of this remote outpost we have been assaulted by creatures of such uniqueness and variety that I have taken it upon myself to create a bestiary.~");
				say("\tArachnian:  This terrifying creature has the full body, head and legs of the giant spider common to our island, with the torso, head and arms of a man growing from just behind its spider-head.  Speculation abounds as to the origin of these horrible hybrids; some claim the mad servants of Chaos created it in one of their endless foolish experiments, others say it was the work of a long-dead lunatic mage.  Regardless of how they came to be, the Arachnian is perhaps the deadliest of all foes we face here at Serpent's Fang.*");
				say("\tLiche:  This is not so much a creature as it is a being, but I consider it worthy of note here.  All of the folk I have spoken to in the keep are rather retiscent about the liche, but I have compiled the following information:  The liche was here before the keep was established.  It is undead; once alive, it entered a state of \"unliving\" which heightened its power but nullified what humanity it may have had when it was alive.  It can command undead and hurl the most devastating of spells.~");
				say("\tNaga:  A fearsome creature whose lower half is that of a giant snake and upper half is that of a human woman, the Naga is capable of delivering devastating vollies of arrows at those who dare intrude upon its lair.  The Naga's origin, like that of the Arachnian (see above) is questionable.  It is best, when a Naga is spotted, to close for battle immediately, lest their arrows bring thee down before thou hast a chance to flee.  Additionally, they have been known to use snakes as a front line while the Naga pick intruders off with arrows.*");
				say("\tShasrajah:  These menacing, scaled freaks have intimidating forms of attack; with their long, snake-like necks they thrust their heads toward their enemy, latching on with their rending teeth, then with their strong neck muscles ripping flesh off.  Though they seldom land hits, they are deceptively quick and resilient to blows.  However, they are enormously stupid, unable to even open doors.  They often attack in groups, making them more dangerous, but they are easily led into traps.  Thus have we been able to repel their regular attacks.~");
				say("\tI have considerable information on the origin of these beasts; basically, they were an attempt by the forces of Chaos to fuse viper and man.  The Lords of Discipline (those fortunate soldiers whose minds were transferred into the bodies of automatons) had brought the advantage to Order in the war, and these Shasrajah were their attempt to tip the scales in their favor.  Fortunately, the soldiers sacrificed to this wasteful end went insane in their new bodies. They escaped from the lab and began spreading their foul race all over the subterranean realms of our isle...");
			}
			if (var0000 == 0x0061) {
				say("~~ ~~The Lost Orbs~~ ~~Compiled by Isstherios~~");
				say("\tI have compiled this work so that, when we have the manpower to seek out the four lost orbs, all of the information we have will be available to the seeker.~");
				say("  \tThe first orb, golden in hue, was stored within the keep in a secret location until stolen by a soldier of Chaos.  He imbibed a potion of invisibility and followed behind the commander, who had gone to retrieve the orb.  When he found the room, he attacked the unwary commander and stole the orb.  However, his invisibility wore off as he was making good his escape and he was seen by a troop of guards.  The guards chased the thief until he was cornered southeast of the keep; his only escape from the guards would have been to plunge into the Fiend's Domain.  This he did, and was never seen again.  We presume it has come into the Fiend's possession and expect he will try to use it to his advantage.~");
				say("  The purple orb, reputedly housed in the Commander's bedchambers, was also purloined by a Chaosite, though this one was no soldier.  Those few who saw it will never forget it; they know not whether the thing was man, beast, or both.  The thing was bipedal and vaguely humanoid, but it had the fur, large ears, feline face, and claws of a cat.  It was being held prisoner in the keep, but an undisciplined soldier on duty relaxed on his watch and the cat-man escaped.  I know not how it found its way into the Commander's bedchambers; I assume that its escape was not well-planned and he happened upon it by chance.  However it did find the orb, the cat-man stole it and ran into the Maze.  No one has seen the creature or the orb since.*");
				say("  The red orb was not stolen, but is out of our hands all the same.  Prior to the closure of the addition to the outpost, to the southwest of the keep, SubCommander Gareth was charged with the task of transporting the orb to this area; we can assume he accomplished his mission, but Gareth never did return.  Shortly thereafter the area was surrendered to the creatures that currently reign there.  It is my presumption that the orb still rests within this catacomb.");
				say("  The blue orb is certainly the strangest tale, but its possessor is a known entity; it rests in the decayed hands of the lich Aram-Dol.  How that malevolent entity came to possess the blue orb is where the strange tale doth lie. Approximately the same time the red orb was carried to presumed safety, the blue orb was to be carried to a location only SubCommander Gareth knew.  The six automatons sent on this mission were ambushed not far from the outpost; lookouts witnessed the battle but could not send aid in time.  The attackers were assumed to be spies of Chaos, but their identities will forever be unknown. They outnumbered the automatons by fully a score; the battle was quick.  They fled away with great haste.  Later a merchant traveling to the keep from Shasavrah reported that he had seen the thieves in a small town west of the keep, but the orb was stolen from them, along with much of their supplies, in the night. The orb appeared again in the hands of authorities in Thiriastith, who siezed it from a suspected stolen goods fence.  Not knowing its import, the authorities auctioned it as a bauble to a wizard who knew what the orb was.  This wizard, who was known only as the Asp, aspired to steal the silver seed.  He came to Serpent's Fang as an adventure seeker and was told that the other orbs were stolen or lost.  He discerned their whereabouts from this information, but that which he was told was apparently not true, for he set out immediately for Aram-Dol's lair.  Foolishly, he brought the one orb he possessed with him into those foul tunnels of Aram-Dol's lair.  The dead that walk those caverns and tunnels soon forced the Asp to join them in their ever-living death.  This new soldier of Aram-Dol brought the orb to the lich, thus bringing a momentary end to its lengthy sojourn.*");
			}
			if (var0000 == 0x0063) {
				say("~~ ~~On Accessing the Serpent Gate~~ ~~by Shalsaraiah~~");
				say("  Though it be true that most of the Serpent Gates are centerpieces of the destinations they serve, in our fair city this is not so. To provide a measure of security, we have made our Gate inaccessible to all those who are not given permission by the Hierophant himself, for it is he who holds the keys. He doth keep on his person the Key of Fire and entrusts to an advisor (whose identity is kept secret to those outside the clergy) the Key of Ice.*");
				say("When these two keys are placed on the altar in the Great Temple, these two keys merge to form the blackrock key. It is with this key that the Hierophant opens the door to the Serpent Gate: a simple brass door on the temple's balcony. From here the traveller is teleported to a grand room, wherein he walks on graceful bridges to the Serpent Gate. I myself was once chosen to carry the Key of Ice, and I did keep it on my person even when bathing in the bath house. I can assure thee that the Hierophant kept it close to his breast, even during his leisurely strolls through the park...");
			}
			if (var0000 == 0x0064) {
				say("~~ ~~REPORT ON THE SHASRAJAH~~ ~~by Jaljashram~~");
				say("  O Great Hierophant, sorrow fills mine heart to tell thee the regretful news that our great hope, the Shasrajah, cannot be counted on to attach the venomous fangs of victory about the necks of our enemies. Our great experiment hath failed.~");
				say("  As thou hast already been told, we had found a means by which the minds of our finest warriors and the bodies of snakes could be fused with one another. The resulting warrior would wreak terrible havoc on the forces of Order, bringing them their well-deserved destruction. In the earliest stages of the experiment all was well; we succeeded in joining Adder with Man in five of seven volunteers. The resulting form was vaguely humanoid, with resilient green skin, tough as the scales of a serpent.*");
				say("  We found that the soldiers' minds were very much unchanged, and coupled with the quickness and sensitivity to smell of the adder, the Shasrajah were formidable in battle. Their long necks had tremendous reach, and they preferred to attack solely with their strong jaws. We were encouraged by this success, and accepted eighty-three more warriors to undergo the metamorphosis. All was well, as seventy-one survived. We believed we had found a counter to the automaton warriors the forces of Order had reputedly developed.~");
				say("  Much to our chagrin, however, our experiment went awry shortly thereafter. As we had them do battle to assess their powers, we noticed a disturbing trait -- the warrior would become more bloodthirsty and uncontrollable with each triumph! Soon they began to rebel against our commands. We had no choice but to exterminate them and begin anew, but the five hundred soldiers we sent against our own creations -- our monsters -- were unable to best them. We surrendered the area to them, enclosing them with stout doors in the corridors leading out.*");
				say("  I can only assume that they have died. O Great Hierophant, I would recommend never performing these experiments again; they are more potentially dangerous than they are potentially helpful...");
			}
			if (var0000 == 0x0065) {
				say("  In memory of the countless soldiers who sacrificed their lives in the War of Imbalance");
			}
			if (var0000 == 0x006F) {
				say("~~Servants of Order~~ by Isstherios~~");
				say("\tOver the years, we who follow Order have devised a number of ingenious servants to simplify our lives.  The earliest attempt is known as the \"Animated Suit of Armor\".  Though automatons have made these nothing more than curiosities, some functional units are still in use today (e.g. the Fiend's Domain, but I implore you not to go exploring just to see one) The animated suits of armor have picked up many knicknames, such as \"Suits,\" \"Brass-brains,\" \"Dummies,\" etc.  They are severely limited in capability, able to understand but a few words, and even then are more than likely to forget orders more than three words in length.  They were used primarily as guards, for they could take more damage than a human guard and were replaced easier if slain than a man would be.*");
				say("\tThe next achievement, representing a significant leap in servant design, was the \"Brass Automaton.\"  These are still used (particularly by frontier outposts such as Serpent's Fang) because they are far more intelligent than animated suits of armor and less costly to create than iron automatons (see next page).  Their main drawback is that, like the animated suits of armor, they cannot be re-used once they are slain.*");
				say("\tMost commonly used are the \"Iron Automatons.\"  Since they are considered the standard servant in our time, they are referred to simply as automatons. Iron automatons are slightly stronger, quicker, and more resilient than brass automatons as well as slightly more intelligent.  The greatest advantage, however, is that if an iron automaton is slain, it can be reactivated. The spell used, Create Automaton, is found in nearly every wizard's spellbook. These advantages do not come free, however; they are more costly to initially create and drain more mana and reagents than the lesser servants.*");
				say("\tThe greatest of all the automatons are not servants at all.  The Lords of Discipline are automatons with the minds of the greatest warriors transferred into their bodies.  They are unsurpassed in strength, speed, intellect, and resilience, and have thus far proven to be the determining factor in the war. It is to this culmination of our knowledge that we, the followers of the Serpent of Order, shall emerge triumphant in our struggle with the misled followers of Chaos.");
			}
			if (var0000 == 0x0078) {
				say("STRENGTH THROUGH ETHICS~~ by Sheshemenien~~");
				say("\t\t\tDear reader, I intend this essay to be a guide for thee. For thou art what thou dost do. Thou dost do what thou dost judge best for thyself. But, in this matter, is thy judgement as clear as the sky on a summer day? That is the question. If thou canst not answer without a reasonable doubt, thou needest to be enlightened. The purpose of this essay is to increase thy strength through enlightenment. Ethics will enlighten thee.*");
				say("\t\t\tStrength is to the adventurer what milk is to the newborn.");
				say("Without it there is no growth, only dwindling and loss of Life.");
				say("The path to fulfillment is a long climb towards the heights of the highest and greatest mountain of all.");
				say("Herein, I will show thee that there are no shortcuts, and the rewards awaiting thee are abundant.");
				say("Be frugal and be prodigal.");
				say("In order to receive, thou hast need to give, give, and give again. Allow me to clarify this. Do not misunderstand my words. Do not expect to receive something in exchange for thy gift. Thy gift must come from thine heart. If thou dost expect the recipient to thank thee, thou art on the wrong path. Thou shalt thank the recipient.");
				say("Meditate upon those words of wisdom and thy strength will grow with thee.*");
				say("Show respect for all life forms. Unless they do attack thee, spare them.");
				say("Be blameless and upright. Being sincere and fair in all of thy transactions will provide thee with more power than thou ever hadst. Thou wert strong, thou wilt be stronger. Thy strength will be exalted in truth.");
				say("Be great amongst the multitude of thy brethren. Relieve commoners and seek their welfare.");
				say("Be humble. Talk no more so very proudly, let not arrogance flow from thy mouth like wisdom from the fountains of Spinebreaker.");
				say("Thou shalt not use thy tongue to deceive. Remember to practice whatever thou dost advocate.");
				say("Quality should be thy rule. Quality of craftsmanship if thou art a craftsman, quality of the time spent with thy brethren, quality of the words thou speakest, quality in thine actions. Quality secures thine ascent above the multitude.");
				say("Be patient in all circumstances. That will make thee wealthy, for each minute is a priceless gem.");
				say("Remember that water and ice are two facets of the same element. Be that element. Like water avoid obstacles as large as mountains. Like ice provide a solid path between two banks. Rush like water to extinguish a fire. Avoid fire as unto ice.");
				say("Strength feeds on Ethics and Ethics on strength.");
				say("When trouble and anguish come upon thee, Ethics will give thee the strength to overcome.");
				say("By this thou shalt overcome.");
			}
			if (var0000 == 0x007D) {
				say("~~ ~~ THE STRUCTURE OF ORDER");
				say("~A collection of the Principles of Order~");
				say("~~compiled by Shaashaanna*");
				say("\tThe Philosophy of Order is based upon the Three Forces of Order.");
				say("The Philosophy of Order is a set of principles meant to lead thee");
				say("on the path toward strength through enlightenment.");
				say("The Three Forces are as follows:~");
				say("- Ethicality~");
				say("- Discipline~");
				say("- Logic~*");
				say("\t\t  ~Most righteous reader, let us examine the structure of Order as it appears through the Forces of Order and the underlying principles of the philosophy of Order.~");
				say("\t\t\t\tETHICALITY");
				say("\t\t\t\t~What is Ethicality?");
				say("Ethicality is the belief in abiding by rules of conduct.");
				say("Those rules must be in thy mouth, in thy mind and in thine heart at all times. Doing so thou wilt understand thou art those rules. ");
				say("The rules are the Forces. The rules are not a part of thee, they are thee and thou art the rules.*");
				say("Once those rules, or Forces, are one with thee, then, and only then, canst thou abide regardless of the circumstances.");
				say("Those rules of conduct are not too difficult for thee; neither are they distant so that thou art not able to achieve them. Those rules of conduct are within thy reach. Moreover, they are necessary if thou dost not wish to be torn and slain by beasts.");
				say("Beware, dear reader, for the beasts of Chaos are watching each of thy steps.");
				say("Thou shalt perform the words of the Philosophy of Order that are written herein if thou art to live as a man.*");
				say("\t\t\t   DISCIPLINE");
				say("\t\t\t\t~What is Discipline?");
				say("Discipline is the ability to finish what one hath begun, and to");
				say(" not be distracted.");
				say("Persevere, dearest reader, persevere!");
				say("Listen carefully to these words and let those principles be with thee.");
				say("Listen to silence and it will speak to thee.");
				say("Discipline is patiently rebuilding thine house washed away by a solstice flood. In other words, Discipline is not surrendering thy quest even though some of thy precious belongings have been eroded or destroyed.*");
				say("\t\t\t\tLOGIC");
				say("\t\t\t\t~What is Logic?");
				say("Some will tell thee that Logic is 'a little bird chirping in a meadow' or that it is 'a wreath of flowers which smell bad'. Do not lend thine ears to their confusing messages.");
				say("We say, dearest reader, that Logic deals with two states in the Land of Thought: true and false.");
				say("Thou shalt realize that:");
				say("Logic is mightier than magic.");
				say("Logic turns darkness into bright daylight.");
				say("Logic will illuminate the tunnel of ignorance for thee. It will bring thee confidence and knowledge.");
				say("Logic is the ability to think clearly and to reason to a conclusion, without emotional bias.");
				say("Logic is the power from within which will infallibly guide thee");
				say("throughout various realms across time and waters.*");
				say("With the Three forces of Order, wisdom and might are on thy side, dear reader.");
				say("Once thou dost have the Forces of Order in thy life thou shouldst have no fear.");
				say("Once thou dost have the Forces of Order in thy life thou shouldst have no doubt.");
				say("Once thou dost have the Forces of Order in thy life thou shouldst have no emotion.");
				say("Moreover, neither bias nor conceit affect thee.~");
				say("\t\tWill it be well with thee when thou wilt be put to trial or");
				say("wilt thou let Chaos overcome thee?");
				say("Chaos is wrong and hath no place within our philosophy.");
				say("Do not attempt any sort of combination for thou shalt count");
				say("Balance as thine enemy.");
				say("\t\tRespect those words for they are words of wisdom.");
				say("\t\tHonor the Great Serpent, for he taught us this system for the benefit of all.");
				gflags[READ_STRUCTURE_OF_ORDER] = true;
			}
			if (var0000 == 0x0082) {
				say("~~ ~~HOLY BOOKS OF THE OPHIDIANS ~~*");
				say("Our Sacred Books will reveal to thee what thou must know to live");
				say("the life of a true Ophidian.");
				say("Respect The Books for They were written with the pain, the blood and");
				say("the hopes of thine ancestors.");
				say("Read our Books to know thyself.");
				say("Thou shalt be clean when touching The Books.");
				say("Thou shalt be pure when reading The Books.");
				say("Thou shalt read The Books aloud.");
				say("Thou shalt not say with thy tongue that which thou wouldst not make good with thine actions.");
				say("Now, thou mayest proceed.*");
				say("~Herein lies the tale of the Ophidians.");
				say("The Ophidians are the inhabitants of this continent.");
				say("In the First Age, the world was divided into four continents. There was no magic in the land, and two Kings ruled in peace. This was before the Enlightenment came to us.");
				say("Then came a great war, and the Four Lands were sundered from one another. Then, we were alone.");
				say("The Destruction was great. One Kingdom fell when its liege died while abroad. Madness took the King of the White Dragon.*");
				say("Then the Great Earth Serpent spoke to us! Our people built beautiful cities in safe places under the ground. Six temples were built, and three special Shrines. The Serpents lived among us.");
				say("This was our world.*");
				say("\tThis was the time after the defeat of Mondain, when our spiritual leader The Great Hierophant of The Ophidians explained the changes in the Universe through our ethical philosophy of Balance, and its twin properties of Order and Chaos. The Serpent spoke to us through him. The Great Hierophant was the only one who could open the Wall of Lights. The Wall of Lights is the entrance into the Void. He entered the Void to speak with the Serpents.");
				say("Our temples and shrines were organized in the following manner:");
				say("~The Three Grand Shrines");
				say("~The Chaos Temples");
				say("~The Order Temples");
				say("The total number being nine.*");
				say("The Three Grand Shrines were divided into Balance, Chaos and Order.");
				say("\t\tThe Chaos Temples were divided into the Temple of Emotion, the Temple of Enthusiasm, the Temple of Tolerance.");
				say("\t\tThe Order Temples were divided into the Temple of Ethicality, the Temple of Discipline, the Temple of Logic.");
				say("\t\tThe six temples had sub-leaders:~the Master of Ethicality, ~the Master of Discipline, ~the Master of Logic, ~the Master of Emotion, ~the Master of Enthusiasm, and ~the Master of Tolerance.");
				say("\tDuring ceremonies, the Great Hierophant was assisted by the Order Hierophant and the Chaos Hierophant. Rich jewelry and shining armour were worn at that time. Throughout the years we had different successors in charge of those functions. The deceased Great Hierophants were buried on the Isle of the Crypts.*");
				say("Then came the Disaster. The Great Earth Serpent was taken from the Void, no longer to communicate with us! We became obsessed with the struggle between Order and Chaos. No more Balance!");
				say("\tThe Great Hierophant was murdered and his sacred artifacts were plundered by zealots of Chaos.");
				say("Rivalry corrupted the hearts and minds of our people. The reigns of belligerent factions began. War broke out. Armies marched, cities were laid waste, and lava flowed from the deep. The Chaos people were defeated. This is when the Chaos Serpent was brought from the Void and split into three Forces. Lest they should wander the world, they were imprisoned at the three Temples of Order.*");
				say("\tThe scourges of war, earthquakes, and volcanic eruptions with their lava flows and destruction reduced the isle to a desolate land.");
				say("\t\tThereupon, the Order people left the land of their Ancestors known as Serpent Isle in search of a better place. This is a foolish quest.");
				say("I alone, a servant of Balance, am left. I soon will die. All is Death, and the land forsaken.");
			}
			if (var0000 == 0x00D5) {
				say("~~ ~~MY LIFE AND MY BELIEFS~~ ~~by Svenjaja~~");
				say("I do not have much time left. I hope it will be enough time to write everything down, before THEY come for me. And THEY will come...~");
				say("I came here to this Temple full of love and inspiration. All I wanted was to read the writings of artistic truth. The wise men would talk to me and I wanted to listen to them. But then it happened...~");
				say("I did everything right, I followed the rules, but I still got confused. After fasting for two days in the meditation room and staring at the red and black floor, I was still waiting for a sign. A sign which would show me the right path to follow.~");
				say("And finally, I could rejoice. I found my calling and I was taken to the Pool of Dedication. But then the soldiers came and destroyed everything. They killed the Great Hierophant of Chaos in the garden. Somehow the people saved the Sceptre of Enlightenment. They were able to hide it beneath the lectern...~");
				say("I hope for the safety of my brother Sethys, for he doth have the key to the Altar of Tolerance. The Great Hierophant had entrusted him with the key, before the soldiers arrived...");
				say("I cannot hope for mine own safety, for I am sitting here now, awaiting my death. The Order fanatics will come soon and with them my death is arriving...");
			}
			if (var0000 == 0x005C) {
				say("~~ ~~AND LIGHT THERE WILL BE~~by Sasoshi, the Mage~");
				say("The Ophidians have been living too long in the darkness. I have been experimenting with different compounds and different ingredients to find a way to create light, light that lasts much longer than the artificial light that we have. It hath taken me years and years of my life. There have been many accidents with all the devices and the lighting of the Magic Candles. The candles will announce this celebration throughout the sky.~");
				say("He who follows the Ways of Balance will shine.~");
				say("He who shines will pass the Trials of Fire and Ice.~");
				say("He who passes the Trials will enter the Antechamber of the Grand Shrine.");
			}
			if (var0000 == 0x0049) {
				say("~~ ~~THE DOCTRINE OF CHAOS~~by Vessuvius~");
				say("I believe in the Forces and Powers of Chaos.");
				say("I believe in the ways of Tolerance, Enthusiasm and Emotion.");
				say("I believe that those ways will show me how to better myself and therefore how to better my life.");
				say("I believe that believing in Tolerance will teach me the acceptance of all things.");
				say("I believe that believing in Enthusiasm will teach me the source of the energy which will allow me to accomplish great tasks.");
				say("I believe that believing in Emotion will give me the ability to perceive feelings which come from the heart and not the mind.");
			}
			if (var0000 == 0x004F) {
				say("~~ ~~DEVOTION~~by Eshrashardt~~");
				say("The Forces of Order must be stopped. We cannot go on like this much longer. We hope that our beliefs in the Forces of Chaos will help us to survive. If we are able to survive, then our devotion to Enthusiasm will be rewarded in the world beyond our lives. We can hear the Void calling our names. We know we need to follow, but we are not ready yet. We must stop Order first. That must be the purpose of our being here. If we are successful then we can leave this world without feeling guilty. If we stop Order then our lives have not been wasted here. We need to accomplish our task to be able to prove our worthiness. Only in that do we see a way to truly show our gratitude.");
				say("SIGNED: Iljosha");
				say("SIGNED: Shamshellar");
				say("SIGNED: Eshrashardt");
			}
			if (var0000 == 0x0050) {
				say("~~ ~~THE SERPENT LAMP POSTS~~by Sivashvos~~");
				say("These majestic sculptures, each a great snake poised triumphantly with its mock prey, a shining magical globe, in its mouth, are signatures of our cities.  We owe these magnificent light-bearing monuments to a spellcaster who went by the name Eshalveras. It was he who first poised a light globe on a statue of a serpent, making these statues holy reminders of those we owe our being to, but also functional parts of our cities. I was granted, for purposes of recording for posterity the events of our times, the opportunity to converse with this brilliant mage so as to provide insights into his remarkable creation.");
				say("Eshalveras revealed to me that it was naught but three reagents combined to form the luminous mineral which acts as long-lasting fuel for the lamps. All of these, Agnium, Serpentinium, and Zerine, can be found in many wizards' labs, and certainly in Eshalveras' lab within the Conjury. The true magic lies in the pedestal, nondescript in appearance but powerful in magic. The reagents, when placed on the pedestal, fuse to form the light mineral, which can then be used in the lamp posts. Eshalveras is truly a remarkable man; he was able to relate to me many exciting tales of dweomercraft in our day...");
			}
			if (var0000 == 0x0053) {
				say("~~THE GREAT HIEROPHANTS~~by Zavajorish~");
				say("The first Hierophant ever to commission a pair of our Temples was Sheshevra. He was selected because of his outstanding qualities of leadership and his overwhelming sense of Harmony. He commissioned the Temples of Tolerance and Ethicality. The Ophidians needed a spiritual leader like him to teach them the doctrines of Balance. He was responsible for the Temples and their ways of belief. He was given the authority to perform all important ceremonies of the Serpent People, known as the Ophidians.");
			}
			if (var0000 == 0x0054) {
				say("~~THE GREAT HIEROPHANTS~~by Zavajorish~");
				say("The last Hierophant to commission a pair of our Temples was Sessessej. He was selected because of his outstanding qualities of leadership and his overwhelming sense of Rationality. He commissioned the Temples of Emotion and Logic. The Ophidians needed a spiritual leader like him to teach them the doctrines of Balance. He was responsible for the Temples and their ways of belief. He was given the authority to perform all important ceremonies of the Serpent People, known as the Ophidians.");
			}
			if (var0000 == 0x0055) {
				say("~~THE VOICE~~by Shavazoss~~");
				say("With this book I want to express my pride. I am one of the few that are allowed to serve our Great Hierophant and I am proud to serve him. He is one of the few people left in these days who know what life is about. His wisdom and his leadership have shown me the purpose of life. To serve him is quite an experience and I am very thankful to be the one who is blessed with the duty. He hath told me about many events in his life and I want to share these with thee. At one point in his life he visited the Isle of Balance, which is also known as Sunrise Isle. He hath climbed the mountain there to the top. And that is where the most amazing of his stories took place. On top of that mountain he heard the voice of the Great Earth Serpent. The Great Earth Serpent told him to commission the building of the Serpent Gates and the three Grand Shrines...");
				say("Believe me reader, when I listened to this, I shuddered with awe...");
				say("I still cannot believe that I am the one chosen to be his servant. What a blessing it is...");
			}
			if (var0000 == 0x003D) {
				say("~~AT EASE~~Handbook for the Commissioned Soldier~~by Sharzshov~");
				say("This handbook will help the Commissioned Soldier to realize how important it is to know how to handle the masses of lower rank soldiers. Only a well trained army is capable of winning a war. The only way to have a well trained army is through the Commissioned Soldier. He is responsible for the training, dedication and devotion of his troops. This is not a training manual. This handbook merely emphasizes the importance of authority. Only the strong and strict leader will receive the respect from his troops that a good leader deserves. Only troops which are willing to take orders are good troops. Therefore troops will follow only orders that are given by a strong leader whom they respect. Conclusion: there is only one rule on how to train masses of soldiers: Showing strength and authority to the lower rank soldiers, the noncommissioned troops. Only the Commissioned Soldier that interacts on a strong and strict basis with his troops will lead them to victory in combat...");
			}
			if (var0000 == 0x003F) {
				say("~~DISCIPLINING SOLDIERS~~by Sethmantih~");
				say("~\tIt hath become necessary to create a means of disciplining our soldiery. Though the soldiers we are given to work with are generally obedient and disciplined, on occasion an unruly soldier will appear in the ranks. It would be foolish to merely dismiss this able-bodied man, for in these times of war every hand capable of holding a sword must do so. Nay, dismissal is not the answer.");
				say("~\tWhat, then, are we to do with those who resist the teachings of discipline? By what means may we save this soldier from the lure of Chaos and place him firmly back on the path toward being a useful implement with which to smite the Chaotic forces?");
				say("~\tWith these questions our Master did challenge the wisest men in the Temple. I, Sethmantih, did solve these challenges...");
			}
			if (var0000 == 0x0040) {
				say("~~MY JOURNEY~~by Shartmannah~");
				say("On my journey to find the Serpent Fountain I was troubled many times with doubt about my quest. Was I doing the right thing? Was I taking the correct path? How much longer could I resist the urge to accept failure?");
				say("I hunted through the master's chambers, stared into the coffins of those who once cared for the temple, and searched the library for the keys and implements necessary to complete the quest. The Master would only tell me two things; that I would have no reason to leave the temple, and that somewhere on the path my discipline would be tested.");
				say("I speak only in generalities, lest my words be seen by the wild eyes of one undisciplined. I doubt not that such a person would die on the way to the water, but there are wards against death in all its incarnations.");
				say("My discipline was indeed tested, and tested harshly. The key to completing my quest was perseverance. I had to search the same place many times and not admit defeat; I had to discipline my mind to keep it from wandering. The hardest part of the path to the fountain lay just before it, and I bear the scars on my feet, but, as is taught here, if one can only discipline the mind, the body can then be trained. I pushed the pain from my mind, so that I did not feel the acid searing my flesh, eating away at my skin. When finally I did reach the fountain, the test was not over -- to return to the temple proper, I had to brave the acid again.");
				say("The test made me strong, obedient, disciplined. Had I failed, I would be as one of those whose hearts I seek to skewer; chaotic and undisciplined. Due to the lessons of discipline I had learned, I was able to not only force the pain from my mind as the acid tried to eat my legs away, but steel my flesh against it so that now only the soles of my feet bear mild scars...");
			}
			if (var0000 == 0x005E) {
				say("~~ ~~THE BOOK OF THE FELLOWSHIP~~ ~~by Batlin of Britain.*");
				say("     Good morning to thee, gentle friend and traveller! No matter what time of day it might be when thou art reading this -- no matter what the hour of the clock -- I say good morning to thee because this very moment brings to thee the coming of the dawn. The dawn, as everyone knows, is the moment when illumination comes. The dawn marks the end of the long dark night. It is the moment that marks a new beginning. It is mine humble hope that these words may be for thee a dawning, or at least, a sort of awakening...");
			}
			if (var0000 == 0x005F) {
				say("~~ ~~LORD BRITISH~~The biography of Britannia's longtime ruler~~ ~~ by K.Bennos*");
				say("     ...While many may remember that Lord British was once but one of eight monarchs (back when the lands were known as Sosaria), few are aware that he is not even a native of our own lovely Britannia. His origin is from another world, one from which he entered ours by way of a red moongate. (In fact, it is through this same type of gate that the Avatar of legend purportedly enters Britannia.) As ruler of one of the eight kingdoms, he was instrumental in selecting a champion to face Mondain, Minax, and Exodus.~");
				say("     When the terrible machine, Exodus, was defeated, 'twas Lord British behind whom all the people of Sosaria rallied. The unified land become known as Britannia, with Lord British as the sole monarch. Though never let it be said he rules with a tyrannical hand. His reign hath always been one of Truth, Love, and Courage, supported by his utmost belief in the eight virtues.~");
				say("     It was Lord British who had the insight to call forth a quest for the Avatar (who also happened to be the champion from the days of Sosaria), and who gave prosperity and happiness unto the people.~");
				say("     Then came his mysterious disappearance, when the Stranger who became the Avatar was called by his companions to aid in the search for the lost monarch. Note how Lord Blackthorn, affected by the Shadowlords, quickly turned Britannia's fair lands into a place of terror. But find our noble Lord the Avatar did, and Britannia was restored to its former, peaceful state.~");
				say("     Then came the Gargoyles, and our honorable sovereign thoughtfully requested the return of the Avatar...");
			}
			if (var0000 == 0x0041) {
				say("~~THE WAR OF ORDER AND CHAOS~~by Ssanettess~~");
				say("No one truly knows what happened to cause the war between the Forces of Chaos and Order about 300 years ago. No one can say for sure that he knows which devilish thoughts possessed people to fight each other when they were supposed to love each other and treat each other with respect. But everyone hath been paying for it since the war ended. The Order Forces won the war, and imprisoned the Chaos Forces. But what exactly did they win? It seems that they miss their brothers and sisters now. And who is to say that the Order Forces enjoyed throwing the Chaos Forces into confinement. Going back to the days before the war, living in peace with the Chaos Forces would be a dream come true for me...");
			}
			if (var0000 == 0x0042) {
				say("~~THE SYMBOL OF DISCIPLINE~by Sharless~~");
				say("The Symbol of Discipline is a reminder of what we, the Initiates of Discipline, must strive for. Consisting of three prongs, they symbolize the following: Mind, Body, and Environment. The mind is the first level of discipline; without Discipline of the Mind, one cannot master the other levels of discipline. Discipline of the Body is the second level of discipline, for one cannot master one's surroundings without first mastering one's self. The third branch of the symbol represents Discipline of Environment. This branch, added to represent the superiority of Order, justifies the military's presence here; if one can master one's self, one can then master the world around him, and drive Chaos out from his environment.");
				say("The symbols here in our temple are not mere inspiration, however. The Altar before the serpent statue doth have upon it two slots. In order to insure the security of our temple, the automatons are aided by a safeguard against defilers -- bolts of lightning fire from the altar unless the quartz symbol is placed in the slot on the left side. A bridge spanning the water around the statue is called into being if the obsidian symbol is placed in the right slot; if it is not there, none can gain access to the Water of Discipline.");
			}
			if (var0000 == 0x0044) {
				say("~~THE BOOK OF DISCIPLINE~by Shrosvitash~");
				say("The ultimate wisdom of life may only be reached through discipline. It takes strength and concentration to follow the guidelines of discipline. Therefore the weak and distracted mind will fail. The weak and distracted mind will not have the power to succeed. And only that power will take thee to the top. But there is no\troom for the weak at the top. Only the strong mind will find a place there.");
			}
			if (var0000 == 0x0045) {
				say("~OUR GREAT LEADERS~by Shilonar~~");
				say("The religion of our great nation must have leaders, worthy leaders. There are things, events and ceremonies, that require a person of great trust. The nation hath decided to choose trustworthy people for those positions and give them certain ranks. Full of respect do we call the leader of the Shrine of Balance our Great Hierophant. Only the Great Hierophant can perform the important ceremonies at the Grand Shrine of Balance. During those ceremonies, however, he receives help from the leaders of the Shrine of Order and Chaos. They have the rank of Order Hierophant and Chaos Hierophant. All three have assistants to help them with their duties; these are the sub-leaders. These assistants are of high rank also and we give them the title of Master. These Masters are the leaders of our Temples. Each one of them is authorized to perform ceremonies in their own Temple.");
			}
			if (var0000 == 0x0046) {
				say("OUR BLESSED SERPENT ISLE~by Shovaresh~");
				say("Our beloved Serpent Isle is the prettiest country there is. No place can be more enjoyable for mankind. It is so peaceful. There is no anger or distrust in the population. Everything is balanced, people live together well. There cannot be any other place in any other dimension that could possibly be more peaceful or more blessed with beauty. Only balance is responsible for the well-being of this country. Only balance makes it possible for people to live together in peace. Only balance will provide good harvests, which provide enough food. People that have enough to eat are happy and do not have to worry whether they are going to live to the next day. Balance is the ultimate way to freedom and peace. The beauty of our country cannot be put into words. One must go and discover it for himself.");
			}
			if (var0000 == 0x0047) {
				say("IS THERE HOPE?~by Shovaughana~");
				say("I do not know what to do anymore. I am desperate. We are all going to die, I know it. I and my children are going to die and there is no way for me to protect mine own flesh and blood...~");
				say("It all began with the soldiers entering the city. Without any warning they attacked us. They began to kill people immediately, the elderly, the children and us women. Those heartless and cold-blooded bastards do not care...");
				say("Mine only hope is that our men will return in time to defend and protect us. Our food supplies are frighteningly low. Soon we all will be starving. I am already eating only the bare minimum. All my rations I give to my children, hoping that they will survive until our rescuers arrive. I need to support them in every way I possibly can, they are our future -- they are my life. I could not forgive myself if anything happened to them...");
				say("I do not know if I have the strength to wait for the rescue. If there is no chance for us to survive and wait for them, I will have to choose. The choice is between letting those murderers enjoy us -- or else...");
			}
			if (var0000 == 0x0048) {
				say("WAR OF IMBALANCE~by Suranniss~~");
				say("This shall be the last entry I make before following my kinsmen to a better life. 'Tis appropriate, I think, that I use a newly bound book with the finest vellum; after all, it may be an Age or more before 'tis found -- if ever.~ Before I continue, I should write a few words about mine homeland -- Serpent Isle.~");
				say("Before the War of Imbalance, the dreadful war that did tear asunder our beloved homeland, Serpent Isle was a fair land indeed.~ The land was in Harmony: our people were at peace -- secure within our glorious subterranean cities. The arts prospered under the generous patronage of our most beloved Hierophant, blessed be his name, and no citizen went hungry or was bereft of a home. We were content and happy; we had no reason to suspect that our happiness would not continue indefinitely. We were so naive.~ The War of Imbalance started simply enough, but by the time 'twas over most of our people were slaughtered, our cities devastated, and the land laid waste.~");
				say("I have been lucky, for I have survived to write about the tragedy. I cannot say the same thing about many of my friends -- they are all dead.~ Even as I write, the Adepts are scurrying about, preparing for the great ceremony that shall energize the Wall of Lights. Soon, I and my surviving comrades shall leave our shattered land, never to return. I am afraid of the future, but I know I cannot live in the past. I can only remember the past. I shall strive to remember the times of joy and try to forget the ashen, bitter memories of the war.~ The Adepts are ready, they have begun the ceremony. I feel a great surge of power! The light! 'Tis blinding! The Adepts have succeeded. The Wall of Lights is so beautiful...");
				var0001 = true;
			}
			if (var0000 == 0x004C) {
				say("A TREATISE ON THE CONSTRUCTION OF LIVING GEMS~~ by Ssyorsik~~");
				say("\tThe construction of living gems requires many a component as well as Pure Discipline.");
				say("This Treatise contains the exact formulae and incantations which thou dost perform in order to succeed in the construction of living gems.");
				say("The magical fabrication of gems is one thou shouldst be warned about. For thee and thy kindred, make no attempt if thou dost doubt thy magical powers.");
				say("Ice Worms are to be found. The Ice Worm doth have to be destroyed. Then wrest its heart from the body. The Worm Heart is cold and hard.");
				say("The soul of brave warriors who fight magnificently in combat within the Harvest Moon period, or any equinox, escape the battlefield and may be contained within such a gem. Hence the name 'living gem'.");
				say("Once infused with the soul of a glorious warrior, such gems are placed inside the automatons. This is what gives them true life.");
			}
			if (var0000 == 0x004D) {
				say("~~THE TRUE BELIEVERS~ by Sschadams*");
				say("The true believers are not only to be found at the rituals and ceremonies. There are many poor souls out there who are pretending they do not believe in religious gatherings and activities. They want to make us believe that they do not need anyone for the sake of their souls. They are wrong, and deep down in their hearts, they know it, too. Sooner or later they will attend ceremonies. Most of them do not come back for a while, but that one appearance rouses their curiosity enough to attend again. It takes courage to admit that everyone needs some kind of belief. I understand that and I do not push for their trust. I know that deep down, underneath all that ruin, is a soul that wants to be rescued. It takes time, but I have all the time I ever need. I can wait and I will. I know that my day will come. And then I will open mine arms and welcome them into our religious community. There is room for everyone, no one will be turned away. And no one will be pressured to join us.");
			}
		}
	}
	if (var0001) {
		PARTY->move_object([0x0121, 0x03B7, 0x0000]);
		UI_play_sound_effect(0x0082);
		AVATAR->obj_sprite_effect(ANIMATION_RED_SWIRL, 0x0000, 0x0000, 0x0000, 0x0000, 0x0001, LOOP_ONCE);
	}
	if (var0000 == 0x0097) {
		gflags[READ_BODY_TRANSFERENCE_BOOK] = true;
		say("~~ ~~Body Transference~~  ~~The Ultimate Warrior~~");
		say("~    When a warrior hath demonstrated unswerving Discipline, the Order Hierophant may approve the creation of the Ultimate Warrior.");
		say("~    The candidate must be willing to cast aside his or her own body in favor of that of an undying automaton. This is the highest honor of Order... to serve as Order's warrior through all time.");
		say("~    The candidate shall be conducted to the chamber with all pomp and pageantry. Upon the left dais shall stand the inanimate automaton husk. The candidate shall ascend to the right dais after the transference button hath been pressed.");
		say("~    Once the bodies have been transferred, the Final Test of Discipline must be completed. In this, the candidate must strike down the now-empty husk that he or she formerly knew as his or her body. Until this is done, the body transfer is not complete and the process will reverse unless the organic husk is destroyed.");
		say("~    Some few candidates may find themselves unable to withstand the transference, and as such would normally be considered failures. But it is the Order Hierophant's wishes that no stigma be attached to this weakness. The candidate shall be allowed to live the remainder of his or her life in service to Order, being an exemplar in all but the Final Test of Discipline.");
	}
}

extern var Func0992 0x992 (var var0000, var var0001, var var0002, var var0003);
extern var Func09A0 0x9A0 (var var0000, var var0001);
extern void Func041F object#(0x41F) ();
extern void Func0603 object#(0x603) ();

void Func02C3 shape#(0x2C3) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;

	if (event != DOUBLECLICK) {
		return;
	}
	var0000 = get_item_quality();
	if (var0000 == 0x001F) {
		UI_close_gumps();
		var0001 = get_object_position();
		var0001[0x0001] -= var0001[0x0003] / 0x0002;
		var0001[0x0002] -= var0001[0x0003] / 0x0002;
		remove_item();
		var0002 = Func0992(0x0001, "@The scroll talks!@", "@The scroll talks...@", true);
		UI_sprite_effect(ANIMATION_PURPLE_BUBBLES, var0001[0x0001], var0001[0x0002], 0x0000, 0x0000, 0x0000, LOOP_ONCE);
		var0003 = script Func09A0(0x0005, 0x0001) {
			nohalt;
			wait 13;
			call Func041F;
		};
		abort;
	}
	UI_play_sound_effect2(0x005E, item);
	book_mode();
	if (var0000 == 0x0000) {
		say("From the desk of the Great Hierophant.");
	} else if (var0000 == 0x0001) {
		say("A SOLDIER'S NOTES~~");
		say("These sheep all went to their deaths with smiles on their accursed faces!~");
		say("We pulled out their fingernails, seared their flesh with burning coals, peeled their skin back with rusty knives, gouged out their eyes with sharp sticks, and still they said nothing!~");
		say("We must have the answer. But I cannot obtain the answer to my question now that they all lie dead. Could there be any truth to the old one's claim that \"meditation leads to enlightenment?\"");
		say("~Whatever the answer may be, there is no time left. We must go. I have ordered the destruction of the temple -- there\tmust be no trace of this structure left...");
	} else if (var0000 == 0x0002) {
		say("MUSINGS, by Issik the Architect~~");
		say("  The snowswept surface of Sunrise Isle is totally barren. No life can live long upon the surface. It is a good thing, indeed, that the Great Hierophant decreed that it was too dangerous to allow access to the surface.");
	} else if (var0000 == 0x0003) {
		say("MAGIC CANDLES~~");
		say("  The devout follower of Balance will know how to form the blocks of ice which are necessary in achieving Balance. To those of you who have forgotten your lessons, take heed: Take the magic tapers to the Walls of Ice. Therein, use the tapers upon the walls.");
	} else if (var0000 == 0x0004) {
		say("Create Soul Prism~~ This spell doth enchant a prism so that it may become the receptacle for a soul. Though powerful, this spell hath limited applications. The reagents necessary are: sulfuric ash, blood moss, garlic, mandrake root, spider silk, and serpent scales. ");
	} else if (var0000 == 0x0005) {
		say("Create Automata~~ This spell is actually misnamed, for it doth not create automata, rather, it repairs them. If thou dost have a damaged automaton, simply cast this spell over the body and it shall be fully restored. The necessary reagents to cast this spell are as follows: sulfuric ash, mandrake root, spider silk, and serpent scales. ");
	} else if (var0000 == 0x0006) {
		say("Create Ice~~ This spell immobilizes a chosen enemy in a block of ice. After a short period of time, the ice shatters, and the foe is released. Only two reagents are necessary to cast this spell: worm heart and spider silk. ");
	} else if (var0000 == 0x0007) {
		say("Invoke Serpent~~ This spell summons a snow serpent that is \"friendly\" to the caster. The reagents necessary to cast this spell are as follows: blood moss, garlic, worm heart, spider silk, and serpent scales. ");
	} else if (var0000 == 0x0008) {
		say("Serpent Bond~~ This powerful spell transforms the caster into a serpent for a short duration. This spell is very useful for obtaining ingress into places ordinarily inaccessible, such as a small crawlspace. ~The reagents necessary to cast this spell are as follows: blood moss, black pearl, garlic, worm heart, spider silk, and serpent scales. ");
	} else if (var0000 == 0x0009) {
		say("Imbalance~~ This powerful spell is very dangerous. The energy released by this spell sprays out in a random pattern, usually destroying whatever is hit.~ The reagents necessary to cast this spell are as follows: blood moss, sulfuric ash, worm heart, nightshade plant, and serpent scales. ");
	} else if (var0000 == 0x000A) {
		say("'Tis a wise man that doth know the contented man is never poor, whilst the discontented man is never rich...");
	} else if (var0000 == 0x000B) {
		say("When a man finds no peace within himself, 'tis useless to seek it elsewhere...");
	} else if (var0000 == 0x000C) {
		say("Thou canst never teach a person anything. Thou canst only help him discover wisdom himself...");
	} else if (var0000 == 0x000F) {
		say("Things unsavory may often be necessary. All Causes are not what they seem. What appears evil often can be good. Never discount.");
	} else if (var0000 == 0x0010) {
		say("The Hero from Another World must encounter again what he thought eradicated. The Cause is good this time.");
	} else if (var0000 == 0x0018) {
		say("~~Those who desire to meditate need only kneel before the serpent.");
	} else if (var0000 == 0x001C) {
		say("~~\tThe Ethical Man obtains his strength through Ethics.");
		say("Hence, he is stronger as well as more daring.");
		say("The Ethical Man would risk his life to save another man's life");
	} else if (var0000 == 0x001D) {
		say("~On the topic of Wealth and Ethics:");
		say("To be truly ethical, thou shouldst reject Wealth.");
		say("Wealth corrupts the soul. It doth do so by placing a greater value upon goods and material possessions rather than upon the \"anima\", that is the living matter or spiritual matter. Spiritual kinship should be established as early as possible instead of the numerous tentative efforts by parents and the various communities to establish a Wealth kinship.");
		say("Believing thou shouldst abide by rules of conduct, learning well and being of good rule and disposition are what will make an ethical Man of thee. Wealth turns too many men away from rules of conduct.");
		say("Quickly enough, young men like thee become wastrels and haunters of alehouses, thereby losing their temporary possession, Wealth, but above all losing their richest dowry, their only true wealth, their soul. Ethics will prevent thee from following that path. Reject Wealth, my dear reader and most assured brother, and be truly ethical.~ I hope I have convinced thee, for if so, I have saved thee.");
	} else if (var0000 == 0x001E) {
		say("Never, NEVER, surrender to thine enemies.");
		say("Fight to the death, but do not abandon thine Ethics.");
	} else if (var0000 == 0x003D) {
		say("~The serpent of gold can send thee along the path to knowledge, but only if balanced by wisdom. Thou mayest already have felt the ill fortune brought about by wealth without wisdom; now use thy newfound wisdom to balance the power of gold.");
	} else if (var0000 == 0x003E) {
		say("In the event that the waiting lizard should become uncontrollable, use this hammer, but be warned that using it foolishly will result in punishment for it is not easily replaced.");
	} else if (var0000 == 0x003F) {
		say("~Do thou not despair, general, for the Arrows of Discipline");
		say("are well hidden.");
		say("If thou hast need of them, I will provide them.");
	} else if (var0000 == 0x0040) {
		say("~Thou hast proven, through thy discipline, to be worthy.");
	} else if (var0000 == 0x0041) {
		say("~Drink thou of the fountain and feel the Force of Discipline flow through thee.");
	} else if (var0000 == 0x0042) {
		say("~Congratulations to thee, initiate. Thou hast found the symbol of balance.");
	} else if (var0000 == 0x0043) {
		say("~It is thy duty to meet thy death protecting the women and children. Their lives are the wellspring of our strength; draw courage from the knowledge that it is thy body which stands between the foul blades of Order and their hearts.");
	} else if (var0000 == 0x0044) {
		say("~Move one of the stones so that there are two straight lines");
		say("of four stones that cross each other at the center point of");
		say("each line");
	} else if (var0000 == 0x004B) {
		say("~Here doth lie Ssithnos, foully murdered in his unrelenting");
		say("service to balance.");
	} else if (var0000 == 0x004D) {
		say("~Let this be a final warning: Those who enter this room lacking in discipline will forfeit their lives.");
	} else if (var0000 == 0x004E) {
		say("Those who know not the password, Despair! The brass gate bars thy way, would-be intruder, and only those privy to the secret password know when to use the runes! Crawl back to your cities of structured folly and temples of Order, dog!  As I lie here, slowly dying of starvation, I laugh at thy fate, for though our city hath fallen, fool, thou wilt not use my gate as a means of ingress! Here in our city, your fellow dogs revel in their victory, knowing not that I have sealed them within! There, look! A general shakes his fist at me through the brass gate, sealed within! Nay, Order dogs, thou wilt not use my gate to send your metal slayers toward my fellows! Thou wilt have to use the serpent gates to conquer the southern lands! I can die in peace, knowing that, though mine home lies in ruin and the Chaos that is our city is now under the control of the enemy, my gate will stand closed for all eternity!");
	} else if (var0000 == 0x0050) {
		say("I write this in great haste, for I can already hear the forces of Order breaching the keep walls. I know not how this missive will survive to reach the outside lands, or for that matter, future generations. Mine only hope is that this speedily-drafted work will offer record of our hallowed philosophy. For our culture to have any chance of enduring the ages, someone, somewhere must find this. Please, reader, I beseech thee, spread the word of our peoples. Balance -- The harmony between the Principles of Order and Chaos -- is the one pure axiom we hold true. All three Principles are symbolized in our hieroglyphs: The Great Earth Serpent, keeper of Balance, lies on a vertical plane, around which the two opposing serpents of Chaos and Order wrap themselves.");
		say("Chaos and Order each embrace three Forces. These six Forces, when combined, form the three Principles of Balance. The Forces of Chaos are Tolerance, Enthusiasm, and Emotion; the Forces of Order are Ethicality, Discipline, and Logic.");
		say("CHAOS -- Tolerance is that which encourages the acceptance of all things. Enthusiasm is the energy that allows one to perform great tasks. Emotion is the ability to perceive those feelings that come from the heart, as opposed to coming from the mind.");
		say("ORDER -- Ethicality is the belief that there is great value in abiding by rules of conduct. Discipline is the drive to complete a task and avoid the distractions that will prevent its completion. Logic permits clear, reasoned thought, free from any instinctual biases.");
		say("BALANCE -- From the marriage between two Forces, one each from Chaos and Order, come the Principles. Tolerance and Ethicality combine to form Harmony, the ability to be at peace with the self, the individual, and the world. From the union of Enthusiasm and Discipline springs Dedication, that which permits one to surmount obstacles and lead others. Finally, Emotion tempered by Logic results in Rationality, the ability to comprehend life and understand the world around us. The Forces of Chaos and Order must ever remain in Balance, for imbalance leads to disaster. Witness the war-torn state of our world today! As thou canst surely see, my world hath been torn asunder by disregard for Balance -- our dearest axiom! If thou dost thrive in a time less violent, I can do no more than plead with thee to help restore Balance to the Serpent Isle! I must end this brief explication here, for I can hear mine attackers pounding upon the oaken door downstairs.");
		say("I wish thee and thy world better fortune than mine own. -- Ssithnos, the Great Hierophant");
	} else if (var0000 == 0x0051) {
		say("~The Chaos vermin took their own lives");
		say(" rather than face us.");
		say("\tLet them rot!");
	} else if (var0000 == 0x0052) {
		say("~\t\t\tSceptre of Enlightenment.");
		say("True dedication places Enlightenment above all else.");
	} else if (var0000 == 0x0053) {
		say("~Revere these remains, for they are the ashes of the brave initiates who sacrificed their bodies for the greater victory of Order over Chaos. Theirs are the minds that make the Lords of Discipline more than mere automatons. Their sacrifice will bring ultimate victory to our cause, for none can stand against an automaton with the Will and Discipline of an initiate!");
	} else if (var0000 == 0x0054) {
		say("~Report on the Cleansing of the Fiend's Domain~");
		say("~Subcommander Stherask, I regret to inform thee that, of the entire company of brass automatons, not one has returned. This mission has not only proven costly in terms of the efforts expended by our wizards to create these automatons, but in the lives of brave soldiers as well.  Of the three humans we had sent on the mission, Lieutenant Alspeth and her two sergeants, Shesparios and Iskil, none have returned.  We can only fear the worst in this case; the mission has failed.  Were it not for the unfaltering faith I have in thee and our Commander, I would question the value of our attempt, as the Fiend has ceased to meddle in the affairs of Serpent's Fang.  I assure thee, Subcommander, that none blame thee for the deaths of those three fine warriors.  All who know of the failed mission have no doubts that this was a just cause for loss of lives.");
	} else if (var0000 == 0x0063) {
		say("~Ritual of Reunification. ~");
		say("~  First -- Open the window into the Void by placing the Blackrock Serpent in its proper slot.");
		say("~  Second -- Each imprisoned Bane must be placed upon the altar corresponding to its Principle. Unrestrained Emotion leads to Madness. Unchecked Enthusiasm leads to Wantonness. Unthinking Tolerance produces Anarchy. The Flame of Chaos shall welcome each Bane to its proper place.");
		say("~  Third -- That which shall bond the Banes together must be placed upon the remaining altar.");
		say("~  If all is done correctly, Chaos shall be reunited.");
	} else if (var0000 == 0x0078) {
		say("~Ethicality. ~");
		say("~\tAs a follower of Order thou must always conform to the principles of conduct as accepted by our alliance. Without these as guides we as a people would be lost. We would be no better than those who are controlled by Chaos.");
		say("~\tWe are far better than those who permit anarchy to control their lives and their thoughts. We must be eternally vigilant to insure that our system of ethics stands strong, that it must not be corrupted from within. We must insure that we remain pure, for corruption is the strength of our enemy, though it will be his own undoing should we stand aligned against it.");
		say("~\tStudent of Ethicality, take heed! Thou must be stronger than thou art in order to stand against the false truths that Chaos will tempt thee with. As iron is in a forge, thou wilt be blasted with the torrent of Chaos and corruption 'til thou wilt lose thy brittleness and harden into a core of strength. Through Ethics, thou canst become free of the anarchy and pain that lies within Chaos and ignorance.");
	} else if (var0000 == 0x0079) {
		say("~Library of the Hierophant ~~ \tThe Great Library of the Hierophant contains all the history and knowledge that defines and guides the followers of Order. Though it is hidden away within the bowels of the mountain, a student of Order may enter it through the portal in the Temple of the Hierophant.");
		say("~\tIn times of disaster and of war, the Great Library was sealed to prevent its valuable works from being destroyed, or from falling into the hands of Chaos. Entry into the Library meant first opening the door to the Temple of the Hierophant.");
		say("~ This could only be achieved by a student placing the correct symbols of Order on the pedestal before the door to the temple. Since only true followers of Order would have the understanding of the symbols, this was the first test to prevent those of Chaos from desecrating both Temple and Library.\tOnly those who have studied\tthe writers and poets of Order will have the wisdom and knowledge to open the door.");
		say("~\tOnce the door opens the student doth need the Sceptre of the Hierophant to gain entry into the Library. Since the Hierophant keeps it in his charge, only by asking his permission can one gain access. Should the Sceptre be lost, or the Hierophant killed in battle, the Library will remain forever closed, away from the corruptions of Chaos.");
		say("~\tWith Sceptre in hand, the student must stand in front of the blue pedestal of the temple. He must place the Sceptre atop the pedestal. The student will then gain instant access to the Library. All knowledge of Order is held there as a bastion against corruption and Chaos.");
	} else if (var0000 == 0x007A) {
		say("~What is Order? a poem by Sschittek the Wise ~");
		say("~\tWhat is Order? ~Is it a rule? ~Is it a law? ~Is it a whip with barbs to control the unruly? ~It is not any of these, it is more... ~It is wisdom, it is knowledge, ~It is a sense of duty!~ ~Ethicality is a Scroll, ~speaking of principles, ~of wisdom and of freedom ~from fear and hate. ~It is a gleam of sunrise ~guiding thee toward enlightenment ~and to thy true fate.~ ~Discipline is strength of the mind, ~born of willpower and knowledge, ~cleansing like a noon summer shower. ~It is a well-honed Serpent Dagger, ~a blade that cuts through ~Chaos and corruption's foul power.~ ~Logic is a straight path, ~without obstacles or brambles, ~free from both rock and tooth. ~Logic is precise and unswerving, ~counting Order's truth on an ~eternal Abacus\tof Truth.");
	} else if (var0000 == 0x007B) {
		say("~To commune with the Serpent one must be in possession of the Earrings of the Serpent. Only via these can the Great Serpent channel his words to thee. ~To be at one with Balance one must have the blackrock Serpents of Order, Chaos, and of Balance. ~To enter into the Grand Shrine of Balance one must wear the Armour of the Serpent, carry the great Staff of the Serpent, and wear the Crown of the Serpent upon one's head. ~Only after these are obtained may one enter the most sacred of sanctums of the people of the Ophidian order.");
	} else if (var0000 == 0x007C) {
		say("~I have blocked the entrance to the Catacombs beneath our outpost with walls of force. None may pass ere this key is used. If thy need is great, and thou dost follow in the steps of Order, thou shalt know what to do to retrieve Loriel's Gift. ~~Ardiniss");
		var0003 = script Func09A0(0x0000, 0x0001) after 1 ticks {
			call Func0603;
		};
	} else if (var0000 == 0x007D) {
		say("~NOTES: ~~I have looked for a way through to the other chambers of this cursed outpost, but have yet found nothing. I did discover that the well in the southernmost chamber was empty. By using rope I lowered myself down into the darkness. ~At the last chamber I could go no further -- a wall of some kind of eldritch force blocked my way. I discerned that no ordinary key would grant me passage. ~I will search for this key.");
	} else {
		say("     This is not a valid scroll.");
	}
}

void Func02C4 shape#(0x2C4) () {
	var var0000;
	var var0001;

	if (event == DOUBLECLICK) {
		var0000 = get_item_frame();
		var0001 = var0000;
		if (var0000 == 0x0001) {
			var0001 = 0x0000;
		}
		if (var0000 == 0x0000) {
			var0001 = 0x0001;
		}
		UI_play_sound_effect2(0x0046, item);
		set_item_frame(var0001);
	}
}

void Func02C5 shape#(0x2C5) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;

	var0000 = get_item_quality();
	if (var0000 == 0x0000) {
		var0001 = ["POST NO", "PLAQUES HERE", "ON PAIN OF DEATH"];
	} else if (var0000 == 0x0002) {
		var0001 = ["CHOOSE"];
	} else if (var0000 == 0x0003) {
		var0001 = ["A WISE MAN KNOWS", "THAT BLOOD", "IS MORE IMPORTANT", "THAN WEALTH"];
	} else if (var0000 == 0x0004) {
		var0001 = ["DIVESTING", "THY GREED", "BESTOWS", "FREEDOM"];
	} else if (var0000 == 0x003D) {
		var0001 = ["PLACE THINE", "OFFERINGS UPON", "THE ALTAR"];
	} else if (var0000 == 0x003E) {
		var0001 = ["PEACE TO THOSE WHO", "FOLLOW THE PATH", "OF THE SERPENT"];
	} else if (var0000 == 0x003F) {
		var0001 = ["PLACE", "OF", "MEDITATION"];
	} else if (var0000 == 0x0040) {
		var0001 = ["TO CONTINUE", "IN", "BALANCE"];
	} else if (var0000 == 0x0041) {
		var0001 = ["FIRST", "INTO THE", "VOID"];
	} else if (var0000 == 0x0042) {
		var0001 = ["STAND", "HERE"];
	} else if (var0000 == 0x0043) {
		var0001 = ["BALANCE", "IS", "WISDOM"];
	} else if (var0000 == 0x0044) {
		var0001 = ["HEART OF", "THE", "SERPENT"];
	} else if (var0000 == 0x0047) {
		var0001 = ["MIND", "BODY", "ENVIRONMENT"];
	} else if (var0000 == 0x0048) {
		var0001 = ["DISCIPLINE", "OF", "MIND"];
	} else if (var0000 == 0x0049) {
		var0001 = ["DISCIPLINE", "OF", "BODY"];
	} else if (var0000 == 0x004A) {
		var0001 = ["DISCIPLINE", "OF", "ENVIRONMENT"];
	} else if (var0000 == 0x004B) {
		var0001 = ["ENTRY", "FORBIDDEN"];
	} else if (var0000 == 0x004D) {
		var0001 = ["ENTHUSIASM"];
	} else if (var0000 == 0x004E) {
		var0001 = ["EMOTION"];
	} else if (var0000 == 0x004F) {
		var0001 = ["TOLERANCE"];
	} else if (var0000 == 0x0050) {
		var0001 = ["I"];
	} else if (var0000 == 0x0051) {
		var0001 = ["S"];
	} else if (var0000 == 0x0052) {
		var0001 = ["C"];
	} else if (var0000 == 0x0053) {
		var0001 = ["G"];
	} else if (var0000 == 0x0054) {
		var0001 = ["B"];
	} else if (var0000 == 0x0055) {
		var0001 = ["O"];
	} else if (var0000 == 0x0056) {
		var0001 = ["W"];
	} else if (var0000 == 0x0057) {
		var0001 = ["MIND TRANSFERENCE", "CHAMBER"];
	} else if (var0000 == 0x0058) {
		var0001 = ["THE GREAT TEMPLE"];
	} else if (var0000 == 0x0083) {
		var0001 = ["REFLECT ON", "ETHICALITY"];
	} else if (var0000 == 0x0084) {
		var0001 = ["MEDITATE ON", "LOGIC"];
	} else if (var0000 == 0x0085) {
		var0001 = ["EXAMINE", "DISCIPLINE"];
	} else if (var0000 == 0x0086) {
		var0001 = ["EXAMINE", "REFLECT", "MEDITATE"];
	} else if (var0000 == 0x0087) {
		var0001 = ["TEMPLE", "OF THE", "HIEROPHANT"];
	} else if (var0000 == 0x0088) {
		var0001 = ["VAULT", "OF THE", "DEAD"];
	} else if (var0000 == 0x0089) {
		var0001 = ["STORAGE"];
	} else if (var0000 == 0x008A) {
		var0001 = ["GRAND", "SHRINE", "OF", "ORDER"];
	} else if (var0000 == 0x008B) {
		var0001 = ["EMOTION"];
	} else if (var0000 == 0x008C) {
		var0001 = ["DISCIPLINE"];
	} else if (var0000 == 0x008D) {
		var0001 = ["ETHICALITY"];
	} else if (var0000 == 0x008E) {
		var0001 = ["LOGIC"];
	} else if (var0000 == 0x008F) {
		var0001 = ["TOLERANCE"];
	} else if (var0000 == 0x0090) {
		var0001 = ["ENTHUSIASM"];
	} else if (var0000 == 0x0091) {
		var0001 = ["SUSTICALITY"];
	} else if (var0000 == 0x0092) {
		var0001 = ["SYMBOL", "OF", "CHAOS"];
	} else if (var0000 == 0x0093) {
		var0001 = ["SYMBOL", "OF", "ORDER"];
	} else if (var0000 == 0x0094) {
		var0001 = ["CHAMBER", "OF", "BALANCE"];
	} else if (var0000 == 0x0095) {
		var0001 = ["PLACE HERE", "THE CUBES", "OF BOTH", "CHOAS AND ORDER"];
	} else if (var0000 == 0x0096) {
		var0001 = ["ORDER SYMBOL", "THAT DOTH SPEAK", "OF PRINCIPLES", "AND WISDOM"];
	} else if (var0000 == 0x0097) {
		var0001 = ["ORDER SYMBOL", "FOR THE STRENGTH", "OF THE MIND", "AND WILLPOWER"];
	} else if (var0000 == 0x0098) {
		var0001 = ["ORDER SYMBOL", "FOR A STRAIGHT", "PATH OF TRUTH"];
	} else if (var0000 == 0x0099) {
		var0001 = ["IF THOU CANST", "READ THIS", "THOU ART DEAD"];
	} else if (var0000 == 0x009A) {
		var0001 = ["TURN OFF", "HACKMOVER", "YOU CHEATER"];
	} else if (var0000 == 0x009B) {
		var0001 = ["THE DREAMS", "OF THINE", "ENEMIES"];
	} else if (var0000 == 0x009C) {
		var0001 = ["KNOW THAT FIRE", "BRINGS BALANCE", "UNTO ICE"];
	} else if (var0000 == 0x009D) {
		var0001 = ["KNOW THAT ICE", "BRINGS BALANCE", "UNTO FIRE"];
	} else if (var0000 == 0x009E) {
		var0001 = ["THE SCEPTRE", "CAN BRING THEE", "TO THE LIBRARY"];
	} else if (var0000 == 0x009F) {
		var0001 = ["CHEATERS", "NEVER WIN"];
	} else if (var0000 == 0x00B6) {
		var0001 = ["SCEPTRE OF", "ENLIGHTENMENT"];
	} else if (var0000 == 0x00B7) {
		var0001 = ["OPHIDIAN", "VASE"];
	} else if (var0000 == 0x00B8) {
		var0001 = ["GLASS", "VIPER OF", "SESSENRA"];
	} else if (var0000 == 0x00B9) {
		var0001 = ["CRYSTAL", "SKULL", "OF THE", "MYSTICS"];
	} else if (var0000 == 0x00BA) {
		var0001 = ["HAMMER", "OF", "DEDICATION"];
	} else if (var0000 == 0x00BB) {
		var0001 = ["SSHEELISAS", "PORTRAIT"];
	} else if (var0000 == 0x00BC) {
		var0001 = ["SACRIFICE", "BY", "FULMINATION"];
	} else {
		var0001 = ["THIS IS AN ERROR", "REPORT THIS LOCATION"];
	}
	UI_display_runes(0x0031, var0001);
	if (var0000 == 0x0002) {
		var0002 = find_nearby(0x010E, 0x000A, MASK_NONE);
		if (var0002) {
			var0002->set_item_frame(0x000C);
			var0003 = script var0002 after 4 ticks {
				nohalt;
				call Func010E;
			};
			var0004 = MAN_ON_FIRE->get_npc_prop(HEALTH);
			var0003 = MAN_ON_FIRE->set_npc_prop(HEALTH, 100 - var0004);
			MAN_ON_FIRE->move_object([0x09E5, 0x032F, 0x0000]);
			var0003 = script MAN_ON_FIRE {
				face FACE_SOUTH;
			};
		}
	}
}

extern var Func090C 0x90C (var var0000, var var0001);

void Func02CA shape#(0x2CA) () {
	var var0000;
	var var0001;

	if (event == PATH_FAILURE) {
		var0000 = Func090C(AVATAR, item);
		var0001 = script AVATAR {
			face var0000;
			continue;
			actor frame bowing;
		};
		var0001 = script item after 2 ticks {
			nohalt;
			call Func019C;
		};
	}
}

extern var Func090C 0x90C (var var0000, var var0001);

void Func02CF shape#(0x2CF) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;

	if ((event == PATH_SUCCESS) || (event == PATH_FAILURE)) {
		var0000 = Func090C(AVATAR, item);
		var0001 = script AVATAR {
			face var0000;
			continue;
			actor frame bowing;
		};
		var0001 = script item after 2 ticks {
			nohalt;
			call Func02CF;
		};
	}
	if (event == SCRIPTED) {
		var0002 = AVATAR->find_nearest(0x02CF, 0x000A);
		var0003 = var0002->get_item_frame();
		var0004 = var0002->get_object_position();
		var0004[0x0001] += 0x0001;
		var0004[0x0002] += 0x0001;
		var0001 = set_last_created();
		if (var0001) {
			if (get_item_frame() == 0x0000) {
				if (var0003 > 0x0000) {
					var0002->set_item_frame(var0003 - 0x0001);
					set_item_frame(0x0001);
				}
			} else if (var0003 < 0x0003) {
				var0002->set_item_frame(var0003 + 0x0001);
				if (get_item_frame() < 0x0006) {
					set_item_frame(0x0000);
				}
			}
			var0001 = UI_update_last_created(var0004);
		}
	}
}

extern var Func0953 0x953 ();

void Func02D3 shape#(0x2D3) () {
	var var0000;

	if (event == DOUBLECLICK) {
		var0000 = Func0953();
		if (IOLO->npc_nearby()) {
			IOLO->say("\"",
				var0000,
				" dost thou notice the unique Iolo trademark on these bolts?  They are designed for maximum performance with genuine IOLO crossbows, available at a location near Yew.\"");
			IOLO->hide();
		}
	}
}

extern void Func097F 0x97F (var var0000, var var0001, var var0002);

void Func02D8 shape#(0x2D8) () {
	var var0000;
	var var0001;

	if (event == DOUBLECLICK) {
		var0000 = get_item_frame();
		if (var0000 != 0x0001) {
			abort;
		}
		var0001 = script item {
			nohalt;
			say "@Help!@";
		};
		var0001 = script item after 5 ticks {
			nohalt;
			call Func02D8;
			raw(0x0000);	// Note: should probably not he here
		};
	}
	if (event == SCRIPTED) {
		STEVE_POWERS->show_npc_face0(0x0000);
		say("\"I am trapped! Help me!\"");
		converse (["name", "Trapped?", "bye"]) {
			case "name" (remove):
				say("\"I am Shriash. Though I am only a little girl, thou must know that I am a faithful follower of Chaos.\"");
				say("\"I belong to the Temple of Emotion.\"");
				add(["girl", "Chaos", "Emotion"]);
				fallthrough;

			case "girl" (remove):
				say("\"Well, perhaps I am not a little girl anymore. My soul hath been trapped here in this rock for eons!\"");
				say("\"If there is such a thing as a little spirit girl, then that is what I am.\"");
				fallthrough;

			case "Chaos" (remove):
				say("\"My father says that Chaos is the True Path, and that the Chaos Serpent will lead us to a better life.\"");
				say("\"Chaos is the strong limb, and it cannot be beaten. It is like a rope made of many strands, many yet unified.\"");
				say("\"But we were defeated, here...\"");
				fallthrough;

			case "Emotion" (remove):
				say("\"Emotion is the energy that drives the soul. There is both good and bad energy, combined chaotically.\"");
				say("\"There is love and hatred, despair and joy. Without these, Men would cease to be Men.\"");
				say("\"Without love, we could not live in peace. If we did not have joy, life would be pointless.\"");
				say("\"Thus, Emotion is the most important of the Virtues.\"");
				fallthrough;

			case "Trapped?" (remove):
				say("\"I was caught in a great battle. The powerful magic the soldiers unleashed left my soul caught here in this wall.\"");
				add(["soldiers", "wall"]);
				fallthrough;

			case "soldiers" (remove):
				say("\"They were led by the Master of Ethicality, and his magic wrecked the Temple. My parents were slain, and my brother taken prisoner.\"");
				say("\"No one from the Temple survived to free me from my fate.\"");
				say("\"But Balance was preserved -- from my place here in the wall, I watched as Soldiers of Chaos attacked to retake the Temple. All of the Soldiers of Ethicality were slain, to the last man.\"");
				add("Temple");
				fallthrough;

			case "Temple" (remove):
				say("\"This place is the Temple of Emotion. It is a structure consecrated to the Virtue of Emotion.\"");
				say("\"We would come here yearly to hear the words of the Master of Emotion, and to drink of the Water of the Temple.\"");
				add(["Water"]);
				fallthrough;

			case "Water" (remove):
				say("\"It was such a wonderful ceremony! The old Master would pass from chamber to chamber, collecting the four Lodestones of Emotion...\"");
				say("\"One year I was chosen to sing in the chorus, and we followed behind him, tossing flower petals and singing the Hymns of Chaos.\"");
				say("\"When the Master placed the four lodestones around the pond, however, we were all silent. For thus the ordinary water became the true and rightful Water of Emotion.\"");
				fallthrough;

			case "wall" (remove):
				say("\"I am trapped within this wall. My soul hath occupied this place for many, many years.\"");
				say("\"Sometimes, I despair of ever being free to enter the Void.\"");
				add(["free", "Void"]);
				fallthrough;

			case "free" (remove):
				say("\"If thou couldst smash the Pedestal of Love, that would release some of the ancient powers of the Temple. The Pedestal lies in the middle of this room. It looks like unto a broken column now, but that is because it is so old.\"");
				say("\"I am sure that this would free me from the stone...\"");
				say("\"But it might kill thee! Or worse, thou mightest be trapped in this wall in my place!\"");
				fallthrough;

			case "Void" (remove):
				say("\"Dost thou know nothing? When we die, our bodies are placed in the ground, but our souls rise to the Void.\"");
				say("\"There, we shall unite with the Chaos Serpent. He too dwells in the Void between the Worlds.\"");
				say("\"This is what my father taught me.\"");
				fallthrough;

			case "bye":
				Func097F(AVATAR, "@Goodbye.@", 0x0000);
				var0001 = script item after 5 ticks {
					nohalt;
					say "@Please help me!@";
				};
				UI_remove_npc_face0();
				UI_remove_npc_face1();
				break;
		}
	}
}

extern var Func0992 0x992 (var var0000, var var0001, var var0002, var var0003);

void Func02DA shape#(0x2DA) () {
	var var0000;
	var var0001;
	var var0002;

	if (event == DOUBLECLICK) {
		var0000 = ["@'Tis tragic that one so young should perish in the dawn of life.@"];
		var0001 = ["@'Tis horrible to find one so young to have perished so early in life.@"];
		var0002 = Func0992(SHAMINO, var0000, var0001, false);
	}
}

extern void Func094A 0x94A (var var0000);

void Func02DF shape#(0x2DF) () {
	var var0000;

	if (event == DOUBLECLICK) {
		var0000 = "@I believe those are for the trainers to use. If thou art in need of practice, thou shouldst seek a trainer.@";
		Func094A(var0000);
	}
}

extern var Func090C 0x90C (var var0000, var var0001);

void Func02E3 shape#(0x2E3) () {
	var var0000;
	var var0001;

	if (event == PATH_SUCCESS) {
		var0000 = Func090C(AVATAR, item);
		var0001 = script AVATAR {
			face var0000;
			continue;
			actor frame strike_2h;
			actor frame standing;
		};
		set_item_frame(0x0000);
	}
}

extern var Func0992 0x992 (var var0000, var var0001, var var0002, var var0003);
extern var Func09AB 0x9AB (var var0000, var var0001, var var0002, var var0003, var var0004);

void Func02E4 shape#(0x2E4) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;
	var var0008;
	var var0009;
	var var000A;
	var var000B;
	var var000C;
	var var000D;

	if (event == DOUBLECLICK) {
		var0000 = get_item_frame();
		var0001 = false;
		var0002 = find_nearby(0x032A, 0x0014, MASK_NONE);
		for (var0005 in var0002 with var0003 to var0004) {
			var0006 = var0005->get_object_position();
			var0007 = var0005->get_item_frame();
			if ((var0006[0x0001] == 0x0882) && ((var0006[0x0002] == 0x0754) && ((var0007 == 0x0000) && (var0000 == 0x0000)))) {
				UI_play_sound_effect(0x004A);
				UI_play_sound_effect(0x0082);
				set_item_frame(0x0001);
				var0008 = script item {
					nohalt;
					frame 2;
					frame 3;
					frame 4;
					frame 5;
					call Func02E4;
				};
				abort;
			}
		}
		var0009 = ["@Methinks thou shouldst place an empty bucket at its base, Avatar.@"];
		var000A = ["@Hummmm. I'll wager I could fill an empty bucket if I placed one at its base...@"];
		var0008 = Func0992(SHAMINO, var0009, var000A, false);
	}
	if (event == SCRIPTED) {
		var0002 = find_nearby(0x032A, 0x000A, MASK_NONE);
		for (var0005 in var0002 with var000B to var000C) {
			var0007 = var0005->get_item_frame();
			var0006 = var0005->get_object_position();
			if ((var0006[0x0001] == 0x0882) && ((var0006[0x0002] == 0x0754) && (var0007 == 0x0000))) {
				var0005->set_item_frame(0x0003);
				UI_play_sound_effect(0x004A);
				UI_play_sound_effect(0x0007);
				var0008 = script item {
					nohalt;
					frame 6;
					frame 7;
					frame 8;
					frame 9;
					frame 10;
					frame 11;
					frame 12;
					frame 13;
					frame 0;
				};
			} else {
				var000D = Func09AB(0x0390, UI_die_roll(0x0014, 0x0017), 0x0000, false, [0x0882, 0x0754, 0x0000]);
				set_item_frame(0x0000);
			}
		}
	}
}

extern var Func090C 0x90C (var var0000, var var0001);

void Func02E5 shape#(0x2E5) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;

	if ((event == PATH_SUCCESS) || (event == PATH_FAILURE)) {
		var0000 = Func090C(AVATAR, item);
		var0001 = script AVATAR {
			face var0000;
			continue;
			actor frame bowing;
		};
		var0001 = script item after 2 ticks {
			nohalt;
			call Func02E5;
		};
	}
	if (event == SCRIPTED) {
		var0002 = AVATAR->find_nearest(0x02E5, 0x000A);
		var0003 = var0002->get_item_frame();
		var0004 = var0002->get_object_position();
		var0004[0x0001] += 0x0001;
		var0004[0x0002] += 0x0001;
		var0001 = set_last_created();
		if (var0001) {
			if (get_item_frame() == 0x0000) {
				if (var0003 > 0x0000) {
					if (var0002->get_item_shape() != 0x0146) {
						var0002->set_item_frame(var0003 - 0x0001);
					}
					set_item_frame(0x0001);
				}
			} else if (var0003 < 0x0003) {
				var0002->set_item_frame(var0003 + 0x0001);
				if (get_item_frame() < 0x0006) {
					set_item_frame(0x0000);
				}
			}
			var0001 = UI_update_last_created(var0004);
		}
	}
}

extern var Func0954 0x954 ();
extern void Func094F 0x94F (var var0000, var var0001);
extern void Func097F 0x97F (var var0000, var var0001, var var0002);
extern var Func09A0 0x9A0 (var var0000, var var0001);
extern void Func09B2 0x9B2 ();
extern var Func099B 0x99B (var var0000, var var0001, var var0002, var var0003, var var0004, var var0005, var var0006);
extern var Func0992 0x992 (var var0000, var var0001, var var0002, var var0003);
extern var Func0988 0x988 (var var0000, var var0001);
extern void Func0636 object#(0x636) ();

void Func02E6 shape#(0x2E6) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;
	var var0008;
	var var0009;
	var var000A;
	var var000B;

	var0000 = Func0954();
	var0001 = LUCILLA->get_object_position();
	if (event == SI_PATH_FAILURE) {
		if ((LUCILLA->get_npc_id() == 0x0008) && (item == AVATAR->get_npc_object())) {
			event = SI_PATH_SUCCESS;
		}
		if ((LUCILLA->get_npc_id() == 0x0006) && (item == LUCILLA->get_npc_object())) {
			LUCILLA->set_npc_id(0x0007);
			var0002 = script LUCILLA {
				nohalt;
				call Func02E6;
			};
			var0002 = "@Thank thee...@" & "@Goodbye!@";
			Func094F(LUCILLA, var0002);
			abort;
		}
		if ((LUCILLA->get_npc_id() == 0x0002) && (item == AVATAR->get_npc_object())) {
			AVATAR->clear_item_say();
			Func097F(AVATAR, "@Yes!@", 0x0004);
			LUCILLA->clear_item_say();
			Func097F(LUCILLA, "@Oh, my!@", 0x0007);
			AVATAR->set_schedule_type(WAIT);
			LUCILLA->set_npc_id(0x0003);
			var0002 = script AVATAR {
				nohalt;
				face west;
				call Func02E6;
				actor frame sleeping;
			};
			abort;
		}
		if ((LUCILLA->get_npc_id() < 0x0002) && (item == AVATAR->get_npc_object())) {
			event = SI_PATH_SUCCESS;
		}
		if ((LUCILLA->get_npc_id() == 0x0000) && (item == LUCILLA->get_npc_object())) {
			LUCILLA->clear_item_say();
			Func097F(LUCILLA, "@Hurry!@", 0x0003);
			var0002 = find_nearby(0x02B8, 0x000C, MASK_NONE);
			for (var0005 in var0002 with var0003 to var0004) {
				if (var0005->get_item_frame() == 0x000B) {
					var0005->set_item_frame(0x000C);
				}
			}
			LUCILLA->set_npc_id(0x0001);
			LUCILLA->set_schedule_type(WAIT);
			var0002 = script LUCILLA {
				nohalt;
				face west;
				wait 5;
				call Func02E6;
				actor frame sleeping;
			};
			AVATAR->si_path_run_usecode([0x043B, 0x0A52, 0x0000], SI_PATH_SUCCESS, AVATAR->get_npc_object(), Func02E6, false);
			AVATAR->clear_item_say();
			Func097F(AVATAR, "@Just a moment...@", 0x0000);
			abort;
		}
	}
	if (event == SI_PATH_SUCCESS) {
		if ((LUCILLA->get_npc_id() == 0x0008) && (item == AVATAR->get_npc_object())) {
			AVATAR->set_polymorph(0x02D1);
			UI_play_sound_effect(0x0001);
			LUCILLA->set_npc_id(Func09A0(0x0005, 0x0003)->get_item_quality());
			var0002 = Func09A0(0x0005, 0x0003)->set_item_quality(0x0000);
			AVATAR->clear_item_flag(DONT_MOVE);
			UI_init_conversation();
			Func097F(AVATAR, "@What a beautiful morning!@", 0x0000);
			UI_play_music(0x0016, Func09A0(0x0005, 0x0001));
			abort;
		}
		if ((LUCILLA->get_npc_id() == 0x0006) && (item == LUCILLA->get_npc_object())) {
			LUCILLA->set_npc_id(0x0007);
			var0002 = script LUCILLA {
				nohalt;
				face south;
				wait 2;
				actor frame bowing;
				sfx 36;
				wait 2;
				actor frame standing;
				call Func02E6;
			};
			var0002 = "@Thank thee...@" & "@Goodbye!@";
			Func094F(LUCILLA, var0002);
			abort;
		}
		if ((LUCILLA->get_npc_id() == 0x0002) && (item == AVATAR->get_npc_object())) {
			AVATAR->clear_item_say();
			Func097F(AVATAR, "@Yes!@", 0x0004);
			LUCILLA->clear_item_say();
			Func097F(LUCILLA, "@Oh, my!@", 0x0007);
			AVATAR->set_schedule_type(WAIT);
			LUCILLA->set_npc_id(0x0003);
			var0002 = script AVATAR {
				nohalt;
				face west;
				wait 2;
				actor frame bowing;
				wait 2;
				sfx 134;
				continue;
				actor frame sleeping;
				wait 2;
				call Func02E6;
			};
			abort;
		}
		if ((LUCILLA->get_npc_id() < 0x0002) && (item == AVATAR->get_npc_object())) {
			AVATAR->set_schedule_type(WAIT);
			LUCILLA->set_npc_id(0x0002);
			Func09B2();
			UI_play_sound_effect(0x0001);
			var0002 = script AVATAR {
				nohalt;
				call Func02E6;
			};
			abort;
		}
		if ((LUCILLA->get_npc_id() == 0x0000) && (item == LUCILLA->get_npc_object())) {
			LUCILLA->clear_item_say();
			Func097F(LUCILLA, "@Hurry!@", 0x0003);
			var0002 = find_nearby(0x02B8, 0x000C, MASK_NONE);
			for (var0005 in var0002 with var0006 to var0007) {
				if (var0005->get_item_frame() == 0x000B) {
					var0005->set_item_frame(0x000C);
				}
			}
			LUCILLA->set_npc_id(0x0001);
			LUCILLA->set_schedule_type(WAIT);
			var0002 = script LUCILLA {
				nohalt;
				face west;
				wait 2;
				actor frame bowing;
				wait 2;
				call Func02E6;
				sfx 134;
				continue;
				actor frame sleeping;
			};
			AVATAR->si_path_run_usecode([0x043B, 0x0A52, 0x0000], SI_PATH_SUCCESS, AVATAR->get_npc_object(), Func02E6, false);
			AVATAR->clear_item_say();
			Func097F(AVATAR, "@Just a moment...@", 0x0000);
			abort;
		}
	}
	if (event == SCRIPTED) {
		if (LUCILLA->get_npc_id() == 0x0008) {
			AVATAR->clear_item_say();
			Func097F(AVATAR, "@I should dress...@", 0x0003);
			AVATAR->si_path_run_usecode([0x043B, 0x0A52, 0x0000], SI_PATH_SUCCESS, AVATAR->get_npc_object(), Func02E6, false);
			abort;
		}
		if (LUCILLA->get_npc_id() == 0x0007) {
			LUCILLA->set_npc_id(0x0008);
			LUCILLA->run_schedule();
			var0002 = script AVATAR after 5 ticks {
				nohalt;
				call Func02E6;
			};
			abort;
		}
		if (LUCILLA->get_npc_id() == 0x0006) {
			LUCILLA->si_path_run_usecode([0x0437, 0x0A5A, 0x0000], SI_PATH_SUCCESS, LUCILLA->get_npc_object(), Func02E6, false);
			abort;
		}
		if (LUCILLA->get_npc_id() == 0x0005) {
			LUCILLA->set_npc_id(0x0006);
			UI_init_conversation();
			LUCILLA->show_npc_face0(0x0000);
			say("\"Once again, thou hast proved thyself to be the love of my life. When I write my book, I shall dedicate it to thee, my love.\"");
			UI_end_conversation();
			var0002 = script LUCILLA {
				nohalt;
				call Func02E6;
			};
			abort;
		}
		if (LUCILLA->get_npc_id() == 0x0004) {
			LUCILLA->set_npc_id(0x0006);
			UI_init_conversation();
			LUCILLA->show_npc_face0(0x0000);
			say("\"Thou art the man of my dreams! I have never felt so fulfilled. What an experience...\"");
			say("\"As a sign of mine appreciation and great affection for thee, please accept this gift. 'Tis my greatest possession.\"");
			say("\"Gwani cloaks are most rare, and are worn by the Goblins as a token of great bravery. My father slew the chieftain who once wore this cloak!\"");
			say("\"Please wear it, and remember me always.\"");
			LUCILLA->clear_item_say();
			Func097F(LUCILLA, "@Always...@", 0x0000);
			var0002 = Func099B(AVATAR, 0x0001, 0x00E3, QUALITY_ANY, 0x0004, 0x0000, true);
			UI_end_conversation();
			gflags[GAINED_GWANI_CLOAK] = true;
			var0002 = script LUCILLA {
				nohalt;
				call Func02E6;
			};
			abort;
		}
		if (LUCILLA->get_npc_id() == 0x0003) {
			if (gflags[GAINED_GWANI_CLOAK]) {
				LUCILLA->set_npc_id(0x0005);
			} else {
				LUCILLA->set_npc_id(0x0004);
			}
			UI_fade_palette(0x000C, 0x0001, 0x0000);
			UI_advance_time(0x05DC * 0x0003);
			LUCILLA->move_object([0x0435, 0x0A54, 0x0000]);
			AVATAR->move_object([0x0439, 0x0A5D, 0x0001]);
			var0002 = script LUCILLA after 30 ticks {
				nohalt;
				face west;
				actor frame sitting;
				wait 2;
				call Func0636;
				wait 2;
				actor frame bowing;
				actor frame standing;
				face south;
				wait 2;
				call Func02E6;
			};
			Func097F(AVATAR, "@Where am I?@", 0x0023);
			abort;
		}
		if (LUCILLA->get_npc_id() == 0x0002) {
			AVATAR->clear_item_say();
			Func097F(AVATAR, "@I'm ready...@", 0x0000);
			LUCILLA->clear_item_say();
			Func097F(LUCILLA, "@As am I!@", 0x0003);
			AVATAR->si_path_run_usecode([0x043A, 0x0A5C, 0x0000], SI_PATH_SUCCESS, AVATAR->get_npc_object(), Func02E6, false);
			abort;
		}
		if (LUCILLA->get_npc_id() == 0x0001) {
			LUCILLA->move_object([0x0439, 0x0A5D, 0x0001]);
			abort;
		}
		if (LUCILLA->get_npc_id() == 0x0000) {
			LUCILLA->show_npc_face0(0x0000);
			var0001 = LUCILLA->get_object_position();
			if ((var0001[0x0001] > 0x042F) && ((var0001[0x0001] < 0x043F) && ((var0001[0x0002] > 0x0A50) && (var0001[0x0002] < 0x0A5F)))) {
				say("\"I am ready now! Come to bed, my love!\"");
				if (UI_get_array_size(UI_get_party_list()) > 0x0001) {
					var0008 = Func0992(0x0001, "@Er, um, I believe I need some fresh air...@", 0x0000, false);
					var0002 = Func0988(AVATAR->get_npc_object(), UI_get_party_list2());
					for (var000B in var0002 with var0009 to var000A) {
						var000B->remove_from_party();
						var000B->set_new_schedules(MIDNIGHT, EAT_AT_INN, [0x0409, 0x0A4F]);
						var000B->run_schedule();
					}
					Func097F(var000B, "@Farewell...@", 0x0000);
				}
				UI_end_conversation();
				AVATAR->set_item_flag(DONT_MOVE);
				LUCILLA->si_path_run_usecode([0x043A, 0x0A5C, 0x0000], SI_PATH_SUCCESS, LUCILLA->get_npc_object(), Func02E6, false);
				LUCILLA->clear_item_say();
				Func097F(LUCILLA, "@Come, my love!@", 0x0000);
				abort;
			}
			say("\"Oh, darling! Meet me in my bedroom...\"");
			Func097F(LUCILLA, "@I'm so sleepy...@", 0x0000);
			LUCILLA->run_schedule();
			abort;
		}
	}
}

extern void Func0922 0x922 (var var0000);

void Func02E7 shape#(0x2E7) () {
	var var0000;
	var var0001;

	if (event == SCRIPTED) {
		Func0922(0x0009);
		gflags[TOLD_TO_SLAY_STATUE] = true;
		var0000 = find_nearby(0x02E7, 0x002D, MASK_NONE);
		if (var0000) {
			var0001 = var0000->set_npc_prop(HEALTH, 1);
		}
	}
}

extern var Func097D 0x97D (var var0000, var var0001, var var0002, var var0003, var var0004);
extern void Func099C 0x99C (var var0000);
extern var Func0906 0x906 (var var0000);
extern void Func0907 0x907 (var var0000, var var0001);
extern void Func0925 0x925 ();
extern void Func0926 0x926 (var var0000);
extern void Func0928 0x928 (var var0000);
extern void Func07FA object#(0x7FA) ();
extern void Func07DA object#(0x7DA) ();
extern void Func0510 object#(0x510) ();
extern void Func047F object#(0x47F) ();
extern void Func0480 object#(0x480) ();
extern void Func0602 object#(0x602) ();
extern void Func0605 object#(0x605) ();
extern void Func0314 shape#(0x314) ();

void Func02E8 shape#(0x2E8) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;
	var var0008;
	var var0009;
	var var000A;
	var var000B;
	var var000C;
	var var000D;
	var var000E;
	var var000F;
	var var0010;
	var var0011;
	var var0012;
	var var0013;
	var var0014;
	var var0015;
	var var0016;
	var var0017;
	var var0018;
	var var0019;
	var var001A;

	var0000 = get_item_quality();
	if (var0000 == 0x0001) {
		var0001 = find_nearby(0x0331, 0x0014, MASK_NONE);
		if (var0001) {
			var0001->halt_scheduled();
			var0001->clear_item_say();
		}
		var0002 = find_nearby(0x037F, 0x001E, MASK_NONE);
		for (var0005 in var0002 with var0003 to var0004) {
			var0006 = script var0005 {
				nohalt;
				remove;
			};
		}
		gflags[TEST_SAVED_MAN_ON_FIRE] = true;
		if (var0001) {
			var0007 = get_object_position();
			// BUG: This should use PATH_SUCCESS instead of BG_PATH_SUCCESS.
			MAN_ON_FIRE->si_path_run_usecode(var0007, BG_PATH_SUCCESS, item, Func0314, false);
			var0006 = script var0001 after 10 ticks {
				nohalt;
				say "@Thou didst risk thy life...@";
			};
			var0006 = script var0001 after 26 ticks {
				nohalt;
				say "@Thou art truly ethical!@";
			};
			MAN_ON_FIRE->set_npc_id(0x0005);
		}
		abort;
	}
	if (var0000 == 0x0002) {
		var0008 = false;
		var0009 = [0x03B4, 0x03B8, 0x03B7, 0x0284, 0x0285, 0x0286, 0x02F8];
		for (var000C in var0009 with var000A to var000B) {
			if (Func097D(AVATAR, 0x0001, var000C, QUALITY_ANY, FRAME_ANY)) {
				var0008 = true;
			}
		}
		var000D = Func097D(AVATAR, 0x0001, 0x02B0, QUALITY_ANY, 0x0004);
		if (var000D) {
			var000E = find_nearby(0x0320, 0x00A0, MASK_NONE);
			for (var0011 in var000E with var000F to var0010) {
				if (!Func097D(var0011, 0x0001, 0x02B0, QUALITY_ANY, 0x0004)) {
					var0012 = UI_create_new_object(0x02B0);
					if (var0012) {
						var0012->set_item_frame(0x0004);
						var0006 = var0011->give_last_created();
					}
				}
			}
			Func099C(0x02B0);
			var0008 = true;
		}
		if (var0008 == false) {
			gflags[TEST_LEFT_MONEY] = true;
		}
		var0006 = script AVATAR {
			nohalt;
			call Func07DA;
		};
		var0013 = find_nearby(0x00C8, 0x00A0, MASK_EGG);
		for (var0016 in var0013 with var0014 to var0015) {
			var0006 = script var0016 {
				nohalt;
				setegg external_criteria, 5;
			};
		}
		abort;
	}
	if (var0000 == 0x0074) {
		var0017 = AVATAR->find_nearby(0x010E, 0x0014, MASK_ALL_UNSEEN);
		var0017 &= AVATAR->find_nearby(0x0178, 0x0014, MASK_ALL_UNSEEN);
		var0017 &= AVATAR->find_nearby(0x01B1, 0x0014, MASK_ALL_UNSEEN);
		var0017 &= AVATAR->find_nearby(0x01B0, 0x0014, MASK_ALL_UNSEEN);
		for (var001A in var0017 with var0018 to var0019) {
			if (var001A->get_item_quality() == 0x0074) {
				if (Func0906(var001A) == 0x0002) {
					Func0907(var001A, 0x0000);
				}
			}
		}
		abort;
	}
	if ((var0000 == 0x0091) && (gflags[PALOS_TALKS_TO_AVATAR] == false)) {
		var0006 = script item after 1 ticks {
			nohalt;
			call Func0510;
		};
		abort;
	}
	if ((var0000 == 0x0091) && (gflags[OPENED_DOOR_TO_PALOS] == false)) {
		abort;
	}
	if ((var0000 == 0x0092) && (gflags[BRUNT_TALKS_TO_AVATAR] == false)) {
		var0006 = script item after 1 ticks {
			nohalt;
			call Func047F;
		};
		abort;
	}
	if ((var0000 == 0x0092) && (gflags[OPENED_DOOR_TO_BRUNT] == false)) {
		abort;
	}
	if ((var0000 == 0x0093) && (gflags[DEADEYE_TALKS_TO_AVATAR] == false)) {
		var0006 = script item after 1 ticks {
			nohalt;
			call Func0480;
		};
		abort;
	}
	if ((var0000 == 0x0093) && (gflags[OPENED_DOOR_TO_DEADEYE] == false)) {
		abort;
	}
	if (var0000 == 0x000A) {
		Func0925();
	}
	if ((var0000 > 0x0014) && (var0000 <= 0x0064)) {
		Func0926(var0000);
	}
	if ((var0000 > 0x0064) && (var0000 < 0x00C8)) {
		Func0928(var0000);
	}
	if (var0000 == 0x00C8) {
		item->Func07FA();
	}
	if ((var0000 >= 0x00C9) && (var0000 <= 0x00CB)) {
		var0006 = script item {
			nohalt;
			call Func0602;
		};
	}
	if (var0000 == 0x00D2) {
		var0006 = script item {
			nohalt;
			call Func0605;
		};
	}
}

void Func02E9 shape#(0x2E9) () {
	if ((event == DOUBLECLICK) || (event == SCRIPTED)) {
		UI_play_music(0x002F, item);
	}
}

void Func02F0 shape#(0x2F0) () {
	var var0000;

	if (event == DOUBLECLICK) {
		var0000 = get_item_frame();
		if (var0000 == 0x0000) {
			set_item_frame(0x0001);
			UI_play_music(0x001F, item);
		} else {
			set_item_frame(0x0000);
			UI_play_music(0x00FF, item);
		}
	}
}

void Func02F2 shape#(0x2F2) () {
	if (event == DEATH) {
		if (get_npc_id() == 0x000F) {
			clear_item_flag(SI_TOURNAMENT);
		}
		if (get_npc_id() == 0x0010) {
			clear_item_flag(SI_TOURNAMENT);
		}
		if (get_npc_id() == 0x0011) {
			clear_item_flag(SI_TOURNAMENT);
		}
		if (get_npc_id() == 0x0012) {
			clear_item_flag(SI_TOURNAMENT);
		}
	}
}

extern var Func09A0 0x9A0 (var var0000, var var0001);
extern void Func0922 0x922 (var var0000);
extern void Func00D7 shape#(0xD7) ();

void Func02F7 shape#(0x2F7) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;

	var0000 = Func09A0(0x0002, 0x0001);
	var0001 = var0000->get_item_quality();
	if (event == DOUBLECLICK) {
		UI_play_sound_effect(0x001E);
		if (!find_nearby(0x03C1, 0x0028, MASK_ALL_UNSEEN)) {
			abort;
		}
		if (gflags[KNOWS_TURTLE_MANTRA]) {
			var0001 = var0000->set_item_quality(0x0000);
			var0001 = 0x0000;
			AVATAR->show_npc_face0(0x0000);
			say("\"I Re-Ten Bentas Juxark I!\"");
			say("\"Praetimde Mir-Wis Re-Por I.\"");
			UI_remove_npc_face0();
			if (ROTOLUNCIA->get_item_flag(DEAD)) {
				if (var0001 == 0x0000) {
					gflags[KNOWS_TURTLE_MANTRA] = false;
					AVATAR->set_item_flag(DONT_MOVE);
					var0002 = var0000->set_item_quality(0x0001);
					var0002 = script var0000 {
						nohalt;
						call Func02F7;
					};
				}
			} else {
				var0002 = script var0000 after 10 ticks {
					nohalt;
					call Func02F7;
				};
			}
		}
	}
	if (event == SI_PATH_FAILURE) {
		AVATAR->move_object([0x08A8, 0x0501, 0x0001]);
	}
	if (event == SCRIPTED) {
		if (var0001 == 0x0000) {
			Func0922(0x0003);
		}
		if (var0001 == 0x0001) {
			AVATAR->si_path_run_usecode([0x08A8, 0x0501, 0x0001], SI_PATH_SUCCESS, var0000, Func02F7, false);
			UI_set_path_failure(Func02F7, item, SI_PATH_FAILURE);
			var0003 = [0x08C4, 0x04FE, 0x0000];
			UI_sprite_effect(ANIMATION_TURTLE_RISE, var0003[0x0001], var0003[0x0002], 0x0000, 0x0000, 0x0000, LOOP_ONCE);
			var0002 = var0000->set_item_quality(0x0002);
			var0002 = script var0000 after 21 ticks {
				call Func02F7;
			};
		}
		if (var0001 == 0x0002) {
			var0002 = UI_create_new_object(0x00D7);
			if (var0002) {
				var0002->clear_item_flag(TEMPORARY);
				var0002 = UI_update_last_created([0x08B8, 0x04F9, 0x0001]);
			}
			var0002 = UI_create_new_object(0x00DB);
			if (var0002) {
				var0002->clear_item_flag(TEMPORARY);
				var0002 = UI_update_last_created([0x08BC, 0x04FF, 0x0000]);
			}
			var0002 = UI_create_new_object(0x00DD);
			if (var0002) {
				var0002->clear_item_flag(TEMPORARY);
				var0002 = UI_update_last_created([0x08C4, 0x04FF, 0x0000]);
			}
			var0002 = UI_create_new_object(0x00FC);
			if (var0002) {
				var0002->clear_item_flag(TEMPORARY);
				var0002 = UI_update_last_created([0x08BC, 0x04F7, 0x0000]);
			}
			var0002 = UI_create_new_object(0x01CB);
			if (var0002) {
				var0002->clear_item_flag(TEMPORARY);
				var0002 = UI_update_last_created([0x08C4, 0x04F7, 0x0000]);
			}
			var0002 = var0000->set_item_quality(0x0003);
			var0002 = script var0000 after 0 ticks {
				call Func02F7;
			};
		}
		if (var0001 == 0x0003) {
			var0004 = AVATAR->find_nearby(0x03C1, 0x0050, MASK_ALL_UNSEEN);
			if (UI_on_barge()) {
				UI_play_music(0x000C, var0000);
				var0002 = var0000->set_item_quality(0x0000);
				var0000->halt_scheduled();
				var0005 = AVATAR->get_barge();
				var0005->Func00D7();
			} else if (var0004) {
				var0006 = var0004->get_object_position();
				if (var0006[0x0001] > 0x08B4) {
					var0002 = script var0004 after 3 ticks {
						nohalt;
						step west;
					};
				} else {
					AVATAR->clear_item_flag(DONT_MOVE);
				}
				var0002 = script var0000 after 3 ticks {
					call Func02F7;
					raw(0x0000);	// Note: should probably not he here
				};
			}
		}
	}
}

extern void Func094A 0x94A (var var0000);

void Func02F8 shape#(0x2F8) () {
	var var0000;

	if (event == DOUBLECLICK) {
		var0000 = "@Those are beautiful. I am sure that they would fetch " + "a high price.@";
		Func094A(var0000);
	}
}

extern var Func0942 0x942 (var var0000);

void Func0303 shape#(0x303) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;

	if (event == WEAPON) {
		var0000 = item;
	} else {
		var0000 = UI_click_on_item();
	}
	if (!gflags[EQUIPMENT_EXCHANGED]) {
		return;
	}
	if (var0000) {
		UI_close_gumps();
		if (var0000->is_npc()) {
			var0001 = var0000;
		} else {
			var0001 = AVATAR;
		}
		var0001->obj_sprite_effect(ANIMATION_POOF, -2, -2, 0, 0, 0, LOOP_ONCE);
		var0002 = UI_get_random(0x0003);
		if ((var0002 == 0x0001) || (var0002 == 0x0002)) {
			var0003 = script var0001 after 5 ticks {
				nohalt;
				actor frame raise_1h;
				say "Ah... ah... CHOO!";
				actor frame bowing;
				wait 2;
				actor frame raise_1h;
				actor frame standing;
			};
			if ((var0001 == AVATAR) && (Func0942(SHAMINO) && (UI_get_random(0x0002) == 0x0001))) {
				var0003 = script SHAMINO after 12 ticks {
					nohalt;
					say "Gesundheit!";
				};
			}
		}
		if (var0002 == 0x0003) {
			var0003 = script var0001 after 5 ticks {
				nohalt;
				actor frame raise_2h;
				say "I am late again! Oh, no!";
				actor frame cast_up;
				wait 2;
				actor frame raise_1h;
				actor frame standing;
			};
		}
		UI_play_sound_effect(0x0074);
		UI_lightning();
	}
}

extern void Func094A 0x94A (var var0000);
extern var Func0910 0x910 (var var0000);

void Func030D shape#(0x30D) () {
	if (event == DOUBLECLICK) {
		if (gflags[BOATING_TO_MOONSHADE]) {
			abort;
		}
		if (get_item_flag(ON_MOVING_BARGE)) {
			Func094A("@The sails must be furled before the planks can be lowered.@");
		} else if (!Func0910(item)) {
			Func094A("@I believe the gangplank is blocked.@");
		}
	}
}

extern void Func09B5 0x9B5 ();

void Func0310 shape#(0x310) () {
	if ((event == SI_PATH_SUCCESS) || (event == SI_PATH_FAILURE)) {
		Func09B5();
	}
	if (event == DOUBLECLICK) {
		AVATAR->si_path_run_usecode(get_object_position(), SI_PATH_SUCCESS, item, Func0310, true);
	}
}

extern void Func090D 0x90D (var var0000, var var0001, var var0002, var var0003, var var0004, var var0005, var var0006);
extern void Func08DA 0x8DA (var var0000);
extern void Func04A8 object#(0x4A8) ();

void Func0313 shape#(0x313) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;
	var var0008;
	var var0009;
	var var000A;
	var var000B;
	var var000C;
	var var000D;
	var var000E;
	var var000F;
	var var0010;
	var var0011;

	if (event == DOUBLECLICK) {
		UI_close_gumps();
		if (AVATAR->get_distance(item) > 0x0001) {
			var0000 = -1;
			var0001 = -1;
			var0002 = -3;
			Func090D(item, var0000, var0001, var0002, Func0313, item, DOUBLECLICK);
		} else if ((get_item_quality() == 0x0094) || (get_item_quality() == 0x0095)) {
			var0003 = script AVATAR after 1 ticks {
				call Func0313;
			};
		} else {
			var0004 = AVATAR->direction_from(item);
			var0005 = script AVATAR {
				face var0004;
				continue;
				actor frame bowing;
				wait 2;
				actor frame standing;
			};
			Func08DA(item);
		}
	}
	if (event == SCRIPTED) {
		if ((get_item_shape() == 0x02D1) || (get_item_shape() == 0x03DD)) {
			var0006 = AVATAR->find_nearest(0x0313, 0x0001);
			var0007 = find_nearby(0x0113, 0x0028, MASK_EGG);
			for (var000A in var0007 with var0008 to var0009) {
				if ((var000A->get_item_quality() == 0x00C8) && (var000A->get_item_frame() == 0x0007)) {
					var000B = var000A->find_nearest(0x00E9, 0x0008);
					if (var000B->get_item_frame() == 0x0001) {
						var0004 = AVATAR->direction_from(var0006);
						var0005 = script AVATAR {
							face var0004;
							continue;
							actor frame bowing;
							wait 2;
							actor frame standing;
						};
						Func08DA(var0006);
					} else if (STEFANO->get_schedule_type() == FOLLOW_AVATAR) {
						STEFANO->item_say("@I shall set the other lever...@");
						STEFANO->set_schedule_type(WAIT);
						var000C = AVATAR->find_nearby(0x0313, 0x0028, MASK_NONE);
						var000D = false;
						for (var0010 in var000C with var000E to var000F) {
							if (!(var0010 == var0006)) {
								var000D = var0010;
							}
						}
						var0011 = var000D->get_object_position();
						var0011[0x0002] += 0x0001;
						STEFANO->si_path_run_usecode(var0011, PATH_SUCCESS, STEFANO, Func04A8, true);
						UI_set_path_failure([Func04A8], STEFANO, SI_PATH_FAILURE);
						abort;
					} else {
						AVATAR->item_say("@The lever will not move.@");
						abort;
					}
				}
			}
		} else {
			Func08DA(item);
		}
	}
}

extern void Func090D 0x90D (var var0000, var var0001, var var0002, var var0003, var var0004, var var0005, var var0006);
extern var Func090C 0x90C (var var0000, var var0001);
extern var Func089D 0x89D (var var0000);
extern void Func0924 0x924 (var var0000, var var0001);
extern void Func092A 0x92A (var var0000);
extern void Func060B object#(0x60B) ();

void Func0314 shape#(0x314) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;
	var var0008;
	var var0009;
	var var000A;
	var var000B;
	var var000C;
	var var000D;

	if (event == DOUBLECLICK) {
		UI_close_gumps();
		var0000 = -1;
		var0001 = -1;
		var0002 = -3;
		Func090D(item, var0000, var0001, var0002, Func0314, item, PATH_SUCCESS);
	}
	if ((event == PATH_SUCCESS) || (event == SCRIPTED)) {
		if (event != SCRIPTED) {
			var0003 = Func090C(AVATAR, item);
			var0004 = script AVATAR {
				face var0003;
				continue;
				actor frame strike_1h;
				actor frame standing;
			};
		}
		var0005 = get_item_frame();
		var0006 = var0005;
		if ((var0005 % 0x0002) == 0x0000) {
			set_item_frame(var0005 + 0x0001);
		} else {
			set_item_frame(var0005 - 0x0001);
		}
		UI_play_sound_effect2(0x0046, item);
		var0007 = get_item_quality();
		if ((var0006 > 0x0005) && (var0006 < 0x000C)) {
			if (var0006 < 0x000A) {
				var0004 = script item after 1 ticks {
					nohalt;
					call Func02E8;
				};
			} else {
				var0004 = script item after 1 ticks {
					nohalt;
					call Func060B;
				};
			}
		} else {
			var0008 = find_nearby(0x0366, 0x000F, MASK_NONE);
			var0009 = find_nearby(0x0203, 0x000F, MASK_NONE);
			var0008 &= var0009;
			var0009 = [];
			for (var000C in var0008 with var000A to var000B) {
				if (var000C->get_item_quality() == var0007) {
					var0009 &= var000C;
				}
			}
			var0004 = Func089D(var0009);
			Func0924(item, SHAPE_ANY);
			if ((var0007 >= 0x00C9) && (var0007 <= 0x00D9)) {
				var000D = [0x0087, 0x06C2, 0x0001];
				if (var000D->find_object(0x0314, 0x00DC, 0x0000)) {
					gflags[MASTER_SWITCH_IS_ACTIVE] = true;
				}
				if (var000D->find_object(0x0314, 0x00DC, 0x0001)) {
					gflags[MASTER_SWITCH_IS_ACTIVE] = false;
				}
				if (gflags[MASTER_SWITCH_IS_ACTIVE] == true) {
					Func092A(var0007);
				}
			}
		}
	}
}

extern void Func094A 0x94A (var var0000);
extern var Func0890 0x890 ();
extern var Func08E7 0x8E7 (var var0000);

void Func0316 shape#(0x316) () {
	var var0000;
	var var0001;
	var var0002;

	if (event != DOUBLECLICK) {
		return;
	}
	if (UI_in_gump_mode()) {
		UI_close_gumps();
	}
	if (get_barge()) {
		if (!AVATAR->get_item_flag(ON_MOVING_BARGE)) {
			var0000 = get_item_quality();
			var0001 = PARTY->count_objects(0x031D, var0000, FRAME_ANY);
			if (((!var0001) && (!gflags[CAN_SAIL_SHIPS])) && (!((var0000 == 0x0001) && gflags[CAN_USE_FILBERCIOS_BARGE]))) {
				if (UI_get_array_size(UI_get_party_list()) == 0x0001) {
					Func094A("@This vessel belongs to another.@");
				} else {
					Func094A("@This vessel doth not belong to us.@");
				}
				return;
			}
			if (Func0890()) {
				AVATAR->clear_item_flag(ACTIVE_SAILOR);
				AVATAR->set_item_flag(ON_MOVING_BARGE);
				AVATAR->get_barge()->set_item_flag(ACTIVE_BARGE);
			} else {
				var0002 = Func08E7(item);
				set_item_flag(ACTIVE_SAILOR);
			}
		} else {
			clear_item_flag(ACTIVE_SAILOR);
			clear_item_flag(ON_MOVING_BARGE);
			clear_item_flag(ACTIVE_BARGE);
		}
	}
}

extern var Func0954 0x954 ();
extern var Func0953 0x953 ();

void Func0319 shape#(0x319) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;

	var0000 = Func0954();
	var0001 = UI_is_pc_female();
	var0002 = Func0953();
	if (event == PROXIMITY) {
		var0003 = UI_die_roll(0x0001, 0x0004);
		if (var0003 == 0x0001) {
			item_say("@All dead...@");
		}
		if (var0003 == 0x0002) {
			item_say("@Oh, Britannia...@");
		}
		if (var0003 == 0x0003) {
			item_say("@If only the Avatar...@");
		}
		if (var0003 == 0x0004) {
			item_say("@Curse the Guardian!@");
		}
	}
	if (event == STARTED_TALKING) {
		item_say("@Ah, there thou art, Avatar!@");
		set_schedule_type(TALK);
	}
	if (event == DEATH) {
		SONAR->show_npc_face0(0x0000);
		say("\"This nightmare hath become too much to bear! The Avatar himself hath turned against me!\" *\"The Guardian's foul deeds have even corrupted our last bastion of virtue. Britannia is lost without its hero! I must awake...\"");
		UI_remove_npc_face0();
		var0004 = get_object_position();
		UI_sprite_effect(ANIMATION_TELEPORT2, var0004[0x0001], var0004[0x0002], 0x0000, 0x0000, 0x0000, LOOP_ONCE);
		UI_play_sound_effect(0x004C);
		kill_npc();
	}
	if (event == DOUBLECLICK) {
		SONAR->show_npc_face0(0x0000);
		say("\"Avatar! At last thou hast come. Seeing thee again hath brought me strength.\"");
		say("\"Dost thou know that I expected to find thee here, in my dreams? I wish that thou wert truly here to counsel me...");
		converse (["name", "job", "bye"]) {
			case "name":
				say("\"Dost thou truly have to ask my name? Hast thou suffered from the recent afflictions as has all of Britannia? Canst thou not recognize thine old friend?\"* \"'Tis I, Lord British, ruler of all Britannia. Or at least what is left of it after all of the disasters...\"");
				remove("name");
				add(["disasters"]);
				fallthrough;

			case "job":
				say("\"Thou dost have to ask? Why, I am ruler of Britannia, if thou dost not remember.\" ~\"'Tis sad. Truly thou art suffering from some sort of malady such as the imbalances which are plaguing all of the land. I fear that nature is trying to rend itself apart.\" ~\"Mine only hope is that thou art truly in fair health and that this pale reflection of thee in my dream is only a deceit of thy true fate.\"");
				remove("job");
				add(["dream"]);
				fallthrough;

			case "dream":
				say("\"Of course this is a dream! Thou hast not yet returned from the Serpent Isle to which I sent thee.\" *\"Some days I fear that thou shalt never return... The storms began shortly after thou didst set sail.\"");
				remove("dream");
				add("storms");
				fallthrough;

			case "storms":
				say("\"They are storms unlike anyone has seen before. The scholars can find no mention of such storms in any of the archives.\" *\"How can a mere stroke of lightning rip away the entire royal mint...\"");
				remove("storms");
				add(["mint", "disturbance"]);
				fallthrough;

			case "mint":
				say("\"Thou dost think me slack-witted, I am certain. But I have seen it for myself...\" *\"The royal mint is gone. In its place stands a strange lighthouse.\"");
				remove("mint");
				add("lighthouse");
				fallthrough;

			case "lighthouse":
				say("\"'Twas clear enough what it was... Its light was still shining after the storm.\" *\"But none of the sailors recognized it.\"");
				remove("lighthouse");
				fallthrough;

			case "disturbance":
				say("\"I know not what they mean... But none of the mages in Britannia seem to be able to predict the outcome of the most simple spells.\"");
				remove("disturbance");
				add("outcome");
				fallthrough;

			case "outcome":
				say("\"A mage might find his entire house burned to the ground after merely trying to light a candle magically. Or another mage may, in the same instant, find himself unable to light a candle with a great flame spell.\" *\"The mages claim that the ether is unstable...\"");
				remove("outcome");
				add("ether");
				fallthrough;

			case "ether":
				say("\"Ether, that which mages call upon to shape their spells. The mages say that the instability is a very bad sign.\" *\"According to the mages, such an imbalance could easily destroy the world -- if it continues to increase in severity.\"");
				remove("ether");
				fallthrough;

			case "disasters":
				say("\"If it were only the strange storms, or only the magic instability, I would be less concerned. But when thou dost consider it along with the earthquakes, the emps, and the gargoyles, I fear that the world may indeed be ending.\"");
				remove("disasters");
				add(["earthquakes", "emps", "gargoyles"]);
				fallthrough;

			case "earthquakes":
				say("\"The earthquakes started not long after the storms began. At first they were fairly small and infrequent, but now they are growing more powerful and threatening the castle itself.\"");
				remove("earthquakes");
				add("castle");
				fallthrough;

			case "castle":
				say("\"Only this morning did a guard find a crack at the base of the castle's foundation. It hath grown wider during the day...\" *\"If the castle falls, there will be no turning back. There will be nothing I can do to hold back the destruction.\"");
				remove("castle");
				fallthrough;

			case "emps":
				say("\"Thou shouldst remember the emps, Avatar. Thou didst save their trees before I sent thee to find the Serpent Isle.\" *\"I fear that this cataclysm is affecting them the hardest of all.\"");
				remove("emps");
				add("cataclysm");
				fallthrough;

			case "cataclysm":
				say("\"The emps live in closer harmony with the natural world than man does, Avatar. The storms and earthquakes have brought a great illness upon them.\"");
				remove("cataclysm");
				add("illness");
				fallthrough;

			case "illness":
				say("\"Many of the emps have died already. I have little hope that any of that gentle race shall survive, even if the world doth not rend itself apart.\" *\"I am sure that the illness will spread to humans, if something is not done to stop these disasters.\"");
				remove("illness");
				fallthrough;

			case "gargoyles":
				say("\"The gargoyles have also succumbed to these afflictions. They have fallen into a deep state of dreaming.\"");
				remove("gargoyles");
				add("dreaming");
				fallthrough;

			case "dreaming":
				say("\"Few of the gargoyles can resist the compulsion to sleep, Avatar. Their slumber seems troubled, however. They thrash about and mutter in their sleep.\" *\"Yet when we attempted to wake a sleeping gargoyle, to see if his dreams held any answers, he attacked us. I fear that we will have no answers from dreams...\"");
				remove("dreaming");
				add("answers");
				fallthrough;

			case "answers":
				say("\"There are no answers, Avatar. No answers for those who sleep. I must wake and seek what answers I can without thee here.\" *\"I do not know that thou couldst save us if thou wert here, but I would have more hope if thou didst return...\"");
				UI_remove_npc_face1();
				set_schedule_type(TEND_SHOP);
				abort;

			case "bye":
				say("\"Yes, yes. I should not be talking to myself anyway. With Britannia in the grip of these dark events it would be best if the people not fear that I have become afflicted, too. Thank thee, Avatar. Though thou art just a dream thou hast given me hope that Britannia will yet survive these dark days.\"");
				set_schedule_type(TEND_SHOP);
				UI_remove_npc_face1();
				abort;
		}
	}
}

extern var Func0953 0x953 ();
extern var Func0992 0x992 (var var0000, var var0001, var var0002, var var0003);
extern var Func09A0 0x9A0 (var var0000, var var0001);
extern void Func0526 object#(0x526) ();

void Func031D shape#(0x31D) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;
	var var0008;

	if (event != DOUBLECLICK) {
		return;
	}
	do {
		var0000 = UI_is_pc_female();
		var0001 = "him";
		var0002 = "his";
		if (var0000) {
			var0001 = "her";
			var0002 = "her";
		}
		var0003 = get_item_quality();
		UI_play_sound_effect2(0x005E, item);
		book_mode();
		if (var0003 == 0x0000) {
			say("One bird in thine hand is better than two birds in the bush.");
		} else {
			if (var0003 == 0x0001) {
				say("To the adventurer actively looking for me treasure:~~ Yes, thou be looking for me gold, I ken that much.~~Beware!~~ All is not as easy as it seems. All is not as it appears. Thou may not see what is there and what thou do not see can harm ye. Nevertheless, what thou do not see may save thy life.~ Thy rewards will make ye rich. In order to go there, thou hast to find the entrance. Obvious, yes? Yes, but the entrance is not to be found easily, for it is a hidden one.~ Good luck to ye!~~Silverpate.");
				return;
			}
			if (var0003 == 0x0002) {
				var0004 = Func0953();
				say("To Gustacio, wisest of Mages --");
				say("The Mundane outsider, ",
					var0004,
					", carried with ",
					var0001,
					" a very rare and powerful weapon. The blade gained its considerable power from a Daemon bound within the blade by a most puissant enchantment.");
				say("I would very much like to study the Mundane's blade. Unfortunately, ",
					var0004,
					" released the Daemon from the sword in order to escape from the Mountains of Freedom.");
				say("I wonder... how doth a mere Mundane obtain such a weapon?");
				say("Now the blade needs to have its sorcerous energies realigned if it is to ever contain another bound spirit.");
				say("I could repair it if I coud use thy flux analyzer. I know that the device was stolen from thee years ago. Hast thou ever recovered it?");
				say("-- Melino");
				if (gflags[FIXED_BLACK_SWORD]) {
					break;
				}
				if (gflags[FOUND_FLUX_ANALYZER]) {
					var0005 = Func0992(0x0001, "@We found it in Skullcrusher!@", "@I found it in Skullcrusher!@", true);
				} else {
					var0005 = Func0992(0x0001, "@We must seek this flux analyzer!@", "@I must find this flux analyzer!@", true);
				}
				return;
			}
			if (var0003 == 0x0003) {
				say("I See the @Hero From Another Land@ in the frozen lands of the North. The Hero seeks the wife of ",
					var0002,
					" oldest companion. A wall of ice doth prevent the Hero from reaching the woman. The Hero lifts a horn -- the Horn of the Gwani -- to ",
					var0002,
					" lips and blows. The sound of the horn is deafening! The wall of ice is shattered!");
				return;
			}
			if (var0003 == 0x0004) {
				say("Dearest Delphynia,~~ The enchanted afternoon when I first saw thy precious face, thou wert in the full bloom of thy beauty and I was blinded. I forgot everything, everyone. I forgot all about Batlin standing next to me and the reagents we were supposed to purchase. That day I fell in love with thee, my Delphynia. But I fear thou wert blinded by my physical appearance as well. Alas! The scars that twist my face are not a pretty sight.~ Look beyond mine appearance, Delphynia. Let thy mind's eye see my soul. Thy mind is less deceitful than thine eyes which only glance at the surface of things and people. If thou wilt but look, thou wouldst see the hidden treasures of thy\tscarred Ruggs. For I am a good man. My heart is pure and so is my mind, Delphynia. I beg of thee, look at me. 'Til I see thee again,~~Ruggs.");
				return;
			}
			if (var0003 == 0x0005) {
				say("  Oh, Great Captains, my Great Captains! So powerful you were yesterday, so pitiful you are today. Rulers of the City are now prisoners of the Oracle. What a fate you might have met! Iolo is pleased that such powerful creatures as you, Great Captains, have lost power, herein uncovering the fools in them... ~~Iolo");
				return;
			}
			if (var0003 == 0x0006) {
				say("Everyone is in search of The Lady of Fawn. For The Lady hath been lost since dawn. Barking their strange tune throughout the city, All of them, townsfolk and priests. Iolo did it, enjoying such feasts. Avatar, is it not pretty?~~");
				say("      Iolo");
				return;
			}
			if (var0003 == 0x0007) {
				say("   I must seek out Voldin. He will know what can be done against the power that this \"Mad\" Iolo doth exhibit. I still can hardly believe what hath befallen me, Zulith, Chancellor of Fawn -- the most clever man on Serpent Isle: forced to flee from an insane mage!~ ~Still, all is not lost: the treasure room is well hidden and I have one of its two keys. Lady Yelinda doth have the other, though I doubt she remembers it. ~The so-called Serpent Armour is safe from that devil Iolo, and I still have my freedom and my life. Yet I cannot leave Fawn till I have secured all of the treasure!~ ~Hah! 'Tis laughable to think about the titular ruler of Fawn -- Lady Yelinda -- a woman that hath the intelligence of a fish. 'Tis best that she spend the rest of her days trapped in Gorlab, the fool! She thought that I was merely redecorating her throneroom when in sooth I had constructed (with the help of a Moonshadian mage) an illusionary wall in the southeast room of the palace! ~That is where I had to store the Serpent Armour. 'Tis safe from all, I tell you!~~");
				say("PS: I must incorporate these writings into my diary lest I forget!");
				return;
			}
			if (var0003 == 0x0008) {
				say("Kylista needs must speak with thee, Avatar, now that is interesting... Heretofore, she was in communication with the Oracle and now she wants thee. Is there any hidden meaning to this change of heart? Thou shouldst know the answer to that, Avatar. When a woman needs to speak to one such as thee, thou dost not want her to wait, Avatar, or dost thou? Is there anything we should be aware of?~ Thy good old friend Iolo wants to know, Avatar...");
				return;
			}
			if (var0003 == 0x0009) {
				say("  Journey to the mint; ambush the hero there. Succeed in thy mission and thou shalt be richly rewarded. There is but one penalty for failure -- death!");
				say("~  Remember, the Avatar often travels with accursed companions, and they may be with ",
					var0001,
					". Ignore the companions -- direct thine energies to one goal: the destruction of the Avatar! Destroy this note.~");
				say("   No evidence should be left behind thee. ~~  Batlin");
				return;
			}
			if (var0003 == 0x000A) {
				say("  Honor be to thee, dear reader. This piece of parchment is mine only means of communication with thee. Mad Iolo cruelly removed my tongue, that I might lead by example and not by words!");
				say("  I am so disenchanted... I cannot bear the fact that I could not save the city from further plagues. Moreover, there is absolutely no sign of the return of Batlin.");
				say("  What is going to happen? Thou shouldst tell me, I beg of thee. ~~   Leon.");
				return;
			}
			if (var0003 == 0x000B) {
				say("Right adventurous Avatar,~");
				say("   I greet thee well, Avatar, sending thee my blessings and letting thee know that it appears that thou art not paying due attention to my clues.");
				say("   I require thee that thou dost so. ~~Faithfully thine, ~~                  Iolo");
				return;
			}
			if (var0003 == 0x000C) {
				say("Thou art required at the temple for the trial");
				return;
			}
			if (var0003 == 0x000D) {
				say("Order be to thee, my right good reader!~~ Beware that when the virtues are in imbalance, a whole new system is set in motion. The Chaos Forces without the Order Forces create the Chaos Anti-Forces. I hope thou dost understand what the implications of such a change mean.~ A virtue like Tolerance without Ethicality creates a lack of standards of conduct and would lead, without a doubt, to Anarchy.~ Enthusiasm without Discipline promises actions without self-restraint that is Wantonness.~ Emotion deprived of Logic would foster an inability to overcome emotional impulses with rational thoughts, which augurs Insanity.~~");
				say("On the other hand, the Order Forces without the Chaos Forces create the Order Anti-Forces.~ In this case, it means that Ethicality without Tolerance would bring about disrespect for the beliefs and rights of others.~ Discipline without Enthusiasm would foster a spirit of hopelessness which retards positive action. That is called Apathy.~ Logic without Emotion leads to self-advancing actions taken without regard to the wants or needs of others. That is called Ruthlessness. Hence, it is now obvious that only Discipline can correct Gwenno.~ Have this in remembrance and take care of thyself,~~Karnax");
				return;
			}
			if (var0003 == 0x000E) {
				say("Through darkness and despair~ The land was bare~ Looking for Thee, Mondain~ Alas, but in vain~ My soul and mine heart~ Pierced by Cupid's dart~ Will never heal~ Without Mondain's will~ Love is a desolate land~ Unless Thou, Mondain~ Takest me by the hand~ To thy youth fountain ~~Minax");
				return;
			}
			if (var0003 == 0x0014) {
				say("Notes to myself~~by Erstam~");
				say("Methinks I knowest now why the blink spell no longer works. These cursed teleportation storms disturb the ether in such a way that the spell often ceases to function. Other times, it is partially successful, as when I cast it on Vasel's predecessor. Nasty business, that.");
				return;
			}
			if (var0003 == 0x0015) {
				say("After many weeks of fruitless study, I can only conclude that the blink spell simply no longer works correctly. Nine times out of ten, nothing at all happens, while the results of the tenth occurrence are best not pondered. The most obvious reason for these failures is this blasted weather we have been experiencing. Maybe when the storms lessen, I can divine the answer. Until then, I will continue in mine attempts to find the answer.~ Notes this day, by Gustacio.");
				return;
			}
			if (var0003 == 0x001B) {
				say("Most esteemed Ruggs,");
				say("  I cannot forget the day I first beheld thy face, for it is never far from my mind. As thou art never far from mine heart. I will admit that to thee, though it may shame me. I cannot promise when, or if, we can ever be together, dear Ruggs. For thou art in exile, and I am the only healer in Fawn. I cannot dwell outside of the gates with thee, no matter how much mine heart may wish it. But someday, if the heavens smile upon us, I shall be able to cast aside my doubts and come to thee as thy love. Until then, I remain ever thine.~~Delphynia");
				return;
			}
			if (var0003 == 0x001F) {
				say("The Magic Compass~~This is said to be the legendary artifact which guided Erstam the Mad during the voyage to Serpent Isle. ~ To use it, thou must set the Compass upon the ground, and then chant the mantra 'Yleg Ort.' ~According to legend, the compass will show thee the way to travel, but only if thou art worthy.~~As for myself, I have never been able to make the damn thing work. Hence, I am donating it to the Seminarium.~~Filbercio the MageLord");
				gflags[KNOWS_MAGIC_COMPASS] = true;
				return;
			}
			if (var0003 == 0x0025) {
				say("~~All is not as it seems...");
				return;
			}
			if (var0003 == 0x0026) {
				say("   This shall be the last of my writings. The freakish storms have continued to worsen. The laborers have all fled in terror, despite mine offer of greater remuneration. It seems fate hath decreed my country estate shall never be completed...");
				return;
			}
			if (var0003 == 0x002A) {
				say("     I have been here for more days than I am able to remember, though I have not forgotten the day I entered this forsaken cave which has become my tomb. That was 2-29-0227. But my food was depleted long ago, and the rats are more interested in eating me than letting me eat them. My strength is gone, as is my will. If thou dost find this, please tell Mythra I love her.~~");
				say("     --Denyel");
				return;
			}
			if (var0003 == 0x002B) {
				say("Welcome, travellers, and be at ease.~ This rest house is open to all who Walk in Beauty.~");
				say("Feel free to take whatever food thou mayest need.~");
				say("As a courtesy to other travellers, please leave the rest house in the manner that thou didst find it...");
				return;
			}
			if (var0003 == 0x002C) {
				say("Welcome to the Broken Oar, the finest inn in the known world!~");
				say("While thou art staying at our fine inn, thou mayest like to try our fine food. Inquire downstairs with the bartender, Jendon.~");
				say("We hope that thou dost enjoy thy stay at our establishment...");
				return;
			}
			if (var0003 == 0x002D) {
				say("Dearest Devra,~~ I hate having to leave thee for even a moment, but my father is as unmovable as a mountain!~ The months that we shared have been unforgettable.~ I will miss thee so much! I will miss thy wondrous red hair, thy silken skin, and thy lovely voice.~ I will miss all of thee. Please write to me. As thou knowest, I shall be going back to our inn, the Sleeping Bull.~~ Love, Angus");
				return;
			}
			if (var0003 == 0x002E) {
				say("ERAX'S JOURNAL~~");
				say("I alone have managed to safely return to the surface. Mine arrogant curiosity was almost mine undoing. The ruined Ophidian structure in the caverns below the swamp is very dangerous. My companions fell to the blows of the undead. No monk should ever return there. I have taken the key that opens the gate to the area and hidden it in the hollow tree near the southeastern portion of the ruin\tin the swamp. I pray that no one shall ever find that key...");
				return;
			}
			if (var0003 == 0x002F) {
				say("XENKA'S PROPHECIES~");
				say("Scattered Verses, Part I~~");
				say("Madness! Madness is all I can see! The world hath turned inside out. The stars shine blood red... Men are beasts... Beasts are men... Ashes... Ashes. The End is upon us all... Snakes leering in the void... Dancing a dance of death.~~ The vision is over. I am without Sight...");
				return;
			}
			if (var0003 == 0x0030) {
				say("XENKA'S PROPHECIES~");
				say("Scattered Verses, Part II~~");
				say("I see the Hero From Another World ringing the bells!");
				say("I am not there. I am dead. Ring the bells. Oh, joy!");
				say("What sweet music the bells make");
				say("I am dreaming. I hear the bells and I wake...");
				return;
			}
			if (var0003 == 0x0031) {
				say("XENKA'S PROPHECIES~");
				say("Scattered Verses, Part III~~");
				say("I See the frozen waste...");
				say("The Hero From Another World is there...");
				say("I See men who are not men covered in fur...");
				say("I See the Hero From Another World strike...");
				say("No! The world is collapsing! I cannot breathe!");
				return;
			}
			if (var0003 == 0x0032) {
				say("XENKA'S VISIONS~");
				say("Scattered Verses, Part IV~~");
				say("The Hero From Another World will meet the descendants of the Silver Captain under the\tsign of the Bull. The Hero From Another World will be betrayed by a follower of the Other...");
				return;
			}
			if (var0003 == 0x0033) {
				say("HORTICULTURAL NOTES~~");
				say("The Mandrake Root, by Trexin the Gardener~");
				say("The mandrake root is a short-stemmed plant that hath a fleshy, often forked root, somewhat resembling a man. This tuber, though not particularly pleasant to gaze upon, doth have useful qualities. The root seems to add power to certain spells of the greater circles. The mandrake root, contrary to what my colleague Moxa thinks, can indeed be found on our lonely isle. The root can be found growing in the swamp that is located on the northern part of the island. Most peculiarly, the root doth seemingly appear at random times...");
				return;
			}
			if (var0003 == 0x0034) {
				say("HORTICULTURAL NOTES~~");
				say("The Berry Bush, by Trexin the Gardener~");
				say("I have discovered a wonderful plant that I have named the Berry Bush.\tThe fruit of this plant hath a wonderfully bittersweet, tangy taste. Furthermore, the bush doth grow well in our intemperate clime and needs little maintenance to produce an abundant crop.");
				return;
			}
			if (var0003 == 0x0036) {
				say("XENKA'S VISIONS~");
				say("Scattered Verses, Part V~~");
				say("In the City of Mages, on the Isle of Beyond,~");
				say("Doth the Hero walk~");
				say("Mages with two faces prance about~");
				say("To prove his worth, The Hero From Another World");
				say("Must survive the perils of Freedom...");
				return;
			}
			if (var0003 == 0x0039) {
				say("I returned home to the Bull as soon as I received Mother's letter. It was not easy to relinquish my command, but Mother needed me, and so here I am.~ I have examined the grounds and found nothing. Mother says she heard noises from the cellar the night Father disappeared. When I investigated, I found crates overturned, but nothing else. I feel so\tuseless! If only I had something, some shred of evidence indicating what became of Father...");
				return;
			}
			if (var0003 == 0x003A) {
				say("   Welcome to the Sleeping Bull Inn! Our inn hath been owned by the same family for four generations. We have a long tradition of service. We will do our best to ensure that thy stay at the inn will be most enjoyable.~ If thou hast any questions, please inquire of Mistress Devra or Master Angus.");
				return;
			}
			if (var0003 == 0x003B) {
				say("This day Silverpate came to see me. The black-harted demon came to glote, and to give me scroll and kwill.~");
				say("He said that I could rite whate'er I wanted, fer I would never see daylite agin. I fear he is rite.~ Silverpate beleves that I stole from him, the paranoid old coot! I ne'er woud beleve me mates when they spoke of the \"littel demons\" in the cap'in's pate, tellin him what to do.~ Corse, I beleved em rite enuf when ol' Pate tole me these things hisself!~ Alas, I lerned too late to prevent me imprisonment.~ I figure ol' Pate will ne'er read me words, and if he do, then so be it.~ Whomever ye be that reads me words, be warned aginst Cap'in Silverpate. He uses majic wardrobes to spy on his own mates! The littel swiches at the Bull don't work, the cap'in said, unless the \"Master Wardrobe\" is used. This \"Master Wardrobe\" be sichuated down in these here catacomes.~ I also herd the evil-harted bastard yammer bout sum Serpint Gate. Ol' Pate said the gate was hidden. It be rite hard to be thinkin strate, but I think the cap'n said something bout too torches markin the hidden entrans.");
				say("Maybe this Serpint Gate cood help thee. Corse, it be likely that no bloke will e'er read me scribling...~ Pate thinks everyone be after his trezhure. So distrustful be ol' Pate, he even spies on his own famly!~ Let it be nown that I, Bren, cheef bosun on the Black Gull, were a pirate who ne'er turned aginst one o' his own...");
				return;
			}
			if (var0003 == 0x003C) {
				say("MAGIC SCROLLS -- A Primer~");
				say("   The process of inscribing scrolls with mystic runes is beyond the scope of this primer. Using these enchanted scrolls, however, is a trivial matter. To unleash the power of the spell, simply unroll the parchment. The Runes of Power, and the scroll itself, will be totally consumed by the energies that are released.");
				return;
			}
			if (var0003 == 0x003D) {
				say("Beloved Shamino:~");
				say("   Right beloved Sir, I recommend me to thee, greeting thee well and sending thee my blessings. I have to confess and apologize to thee for I have\tlooted the King's private arms. I beg of thee not to condemn me too hastily for I committed that horrible action when the castle was under siege. Danger was everywhere and so were the goblins. Thou wert not here and I had to take action. We need thee at the castle, prithee, when art thou returning? Life without thee is an endless torment. The goblins seemed to be a deliverance more than a threat to me. I am right sorry for this and wish it hath been otherwise. I wait daily for thee to come hither.~~Faithfully, thy Beatrix");
				return;
			}
			if (var0003 == 0x003E) {
				say("Come in and join the party...");
				return;
			}
			if (var0003 == 0x003F) {
				say("   I know I did evil things whilst I was under the control of the Bane. In order to atone for the harm I have caused, I shall sacrifice myself to the Crematorium. If mine ashes can help restore the balance, then I might be partially redeemed for mine evil acts.~~");
				say("    Farewell,~");
				say("             Dupre");
				return;
			}
			if (var0003 == 0x0040) {
				say("Me Map, but I don't need to say that, because if it's anybody but me what's looking at this, I don't want to tell where me treasure is, so read no further, ye dog, lest I leave yer fate to the briny deep! This is dead-reckoning right, but I'm awfully drunk and mebbe I'm holdin' this thing upside-down.");
				say("98S,28W");
				say("33 Paces past the rock, excludin' that break I took fer drinkin'.");
				say("11 Paces east of the whatever that blasted thing is.");
				say("30 Paces, I think, because I was staggerin' about a bit and I stumbled and lost me count a couple o' times, past whatever me stinkin' map says is supposed to be there; I was sober when I drew that beauty. Unless this is me what's readin' this, I hope the treasure's already gone, ye thief!");
				return;
			}
			if (var0003 == 0x0042) {
				say("I have paid thee -- and paid thee well -- to fulfill the contract.");
				say("Only fools would pay a great sum for an easy task... And I am no fool.");
				say("Remember, I have chosen thee because thou art the best weapon available to me at the moment. Make no mistake, the Avatar is not an easy target and certainly the most challenging thou hast ever had.");
				say("Dispose of the Avatar quickly. Destroy this note. No evidence should be left behind thee.");
				say("X");
				return;
			}
			if (var0003 == 0x0043) {
				say("My dearest,~~ I beg thy forgiveness for my behavior last night. This difficulty with the Avatar hath disrupted my performance, but I assure thee that once we have taken care of ",
					var0001,
					", I will hold a private celebration thou shalt not soon forget...");
				return;
			}
			if (var0003 == 0x0045) {
				say("Parting Verses: by Vasculio~~ As they lower me down,~ To this hole in the ground,~ I scream for help,~ But they can't hear a sound.~ I scratch on this lid,~ My fingers they bleed.~ They plant me deep,~ Like an evil seed.~ Now my bones decompose,~ My flesh doth rot,~ But soon I will rise,~ And torture the lot.");
				var0006 = AVATAR->find_nearby(0x00F3, 0x0028, MASK_NONE);
				if (!var0006) {
					break;
				}
				if (gflags[VASCULIO_AWAKENS]) {
					break;
				}
				gflags[VASCULIO_AWAKENS] = true;
				var0007 = AVATAR->direction_from(var0006);
				var0008 = script AVATAR {
					nohalt;
					face var0007;
					wait 5;
					call Func0526;
				};
				remove_item();
				return;
			}
			if (var0003 == 0x0046) {
				say("Right Heartily and Beloved Father,~~ I recommend me to thee, letting thee know I am doing exceedingly well! Though I miss thee and my beloved sister, Alyssand, I am so excited. I have been learning so much magic, thou wouldst not believe thine eyes. I am good. Honest. I swear to thee, that's what the Mages here are saying. 'Tis fun, but frightening as well.~ I am a dedicated student, Father, thou canst be proud of me. And Alyssand, too. I miss thee so much. Thou shouldst visit. The Palace is a sight to see. Gorgeous! These Mages are incredible!~ Learning how to be a Mage is not easy, but I love it as much as I miss thee.~ Thou art on my mind everyday. I hope to see thee soon.~~ Eternal love,~~ Freli");
				return;
			}
			if (var0003 == 0x0047) {
				say("   To thee, fine warrior, who hast made it this far:");
				say("If thou seekest to be a Knight of Monitor, thou must be willing");
				say("to shed thy blood for the defense of others. To prove thy resolve,");
				say("take this claw and use it upon thy person. Let thy blood be thine oath.~~");
				say("   --Shmed, Master of Knight's Test");
				return;
			}
			if (var0003 == 0x0048) {
				say("   To thee, fine warrior, who hast made it this far:");
				say("If thou seekest to be a Knight of Monitor, thou must mingle thy");
				say("blood with the ashes of our ancient foe, Gurnordir the goblin king.");
				say("Thy blood pledges vengeance against our enemies, and will give thee");
				say("thy totem animal, the key to thy soul.~~");
				say("  --Shmed, Master of Knight's Test");
				return;
			}
			if (var0003 == 0x0049) {
				say("   I love thee, father. I hope thou dost kill more than thy share of");
				say("goblins. Come home soon.~~");
				say("     Cantra");
				gflags[FOUND_CANTRAS_FATHER] = true;
				return;
			}
			if (var0003 == 0x004A) {
				say("   Note to myself for further exploration of the North:");
				say("I seem to have lost the Serpent Tooth I took from the Mad Mage.");
				say("Need to check the area near the savages, as that was where I last");
				say("remember having it with me.~~");
				say("     Frigidazzi");
				return;
			}
			if (var0003 == 0x0050) {
				UI_play_music(0x0032, Func09A0(0x0005, 0x0001));
				say("Dearest Drogeni,~");
				say("   What follows is an excerpt from my translation of an ancient manuscript. The translation is crude since I do not as yet fully understand the Serpent Runes, but I think thou wilt find this very exciting.~ Until we meet again,~~-- Erstam, thy devoted servant~~");
				say("   I write this in great haste, for I can already hear the forces of Order breaching the keep walls. I know not how this missive will survive to reach the outside lands, or for that matter, future generations. Mine only hope is that this speedily-drafted work");
				say(" will offer record of our hallowed philosophy. For our culture to have any chance of enduring the ages, someone, somewhere must find this.~ Please, reader, I beseech thee, spread the word of our peoples. Release the spirit of our word and learn from the wisdom of the past.~~");
				say("   Balance -- The harmony between the Principles of Order and Chaos -- is the one pure axiom we hold true.  All three Principles are symbolized in our hieroglyphs: The Great Earth Serpent, keeper of Balance, lies on a vertical plane, around which the two opposing serpents of Chaos and Order wrap themselves.~~");
				say("   Chaos and Order each embrace three Forces. These six Forces, when combined, form the three Principles of Balance. The Forces of Chaos are Tolerance, Enthusiasm, and Emotion; the Forces of Order are Ethicality, Discipline, and Logic.~~");
				say("CHAOS~Tolerance is that which encourages the acceptance of all things. Enthusiasm is the energy that allows one to perform great tasks. Emotion is the ability to perceive those feelings that come from the heart, as opposed to coming from the mind.~~");
				say("ORDER~Ethicality is the belief that there is great value in abiding by rules of conduct. Discipline is the drive to complete a task and avoid the distractions that will prevent its completion. Logic permits clear, reasoned thought, free from any instinctual biases.~~");
				say("BALANCE~From the marriage between two Forces, one each from Chaos and Order, come the Principles.~ Tolerance and Ethicality combine to form Harmony, the ability to be at peace with the self, the individual, and the world.~ From the union of Enthusiasm and Discipline springs Dedication, that which permits one to surmount obstacles and lead others.~");
				say("And finally, Emotion tempered by Logic results in Rationality, the ability to comprehend life and understand the world around us.~~");
				say("   The Forces of Chaos and Order must ever remain in Balance, for imbalance leads to disaster. Witness the war-torn state of our world today! ~~As thou canst surely see, my world hath been torn asunder by disregard for Balance -- our dearest axiom! If thou dost thrive");
				say("in a time less violent, I can do no more than plead with thee to help restore Balance to the Serpent Isle! I must end this brief explication here, for I can hear mine attackers pounding upon the oaken door downstairs. I wish thee and thy world better fortune than mine own.~~ -- Ssithnos, the Great Hierophant");
				return;
			}
			if (var0003 == 0x0064) {
				say("My darling Rotoluncia,~~ I know thy feelings about my letters, but I cannot help myself -- I think of thee day and night! Thou art the light of my miserable existence. Thou art like the sun, blinding all who doth gaze upon thy beauty. Thy lips are more luscious than the sweetest fruit. Thy skin is smoother than the most glorious rose. Thou art the essence of womanhood; none can surpass thee!~ Please, I beg of thee, say that thou wilt be mine!~~ Anxiously awaiting thy reply,~~ Filbercio ");
				return;
			}
			if (var0003 == 0x0065) {
				say("My darling Rotoluncia,~~ I know that thou dost love me as much as I love thee. Let us forget all of the intrigue that plagues this city and flee to the mainland! I can have built for us a modest love nest where we may spend the rest of our days in bliss!~ Thy servant,~~ Filbercio ");
			}
			if (var0003 == 0x0066) {
				say("My darling Rotoluncia,~~ I tried to sleep after our dalliance this night, yet I cannot. The feel of thy silken hair and the sweet taste of thy lips linger. Oh, my darling, I cannot wait until I see thee again. I feel that I shall go mad if I cannot make thee mine!~~ Thy lover,~~ Filbercio ");
			} else if (var0003 == 0x0067) {
				say("Rotoluncia,~~ I saw thee staring at that pig Torrissio at the banquet last night and I know now that thine affections shown toward me were false. Thou art a cow and a shabby sorceress as well!~ Do not try to pretend otherwise, for I know the truth now. I want nothing more from thee ever again!~~ Filbercio ");
			} else if (var0003 == 0x0078) {
				say("Marsten, Lord of Monitor:~~ The destruction of thine enemies is certain. My brave Goblin warriors have already plundered the Fawn Tower, and the Wolves which guarded it.~ Next, we shall strike the Bull Tower, and the Bears which serve there. Hail to victory! Soon, the Wolves and Bears shall cease to trouble thee. Then Monitor and the Goblins shall live in peace, and thou shalt be King of the Monitorians.~~ Do not let this messenger fall into the hands of our enemies.~~ Pomdirgun,~Chieftain of the Goblin Horde");
				MARSTEN->set_item_flag(SI_TOURNAMENT);
				gflags[KNOW_MARSTEN_IS_TRAITOR] = true;
			} else if (var0003 == 0x0079) {
				say("   Honor be to thee, Pomdirgun, Chieftain of the Goblin Horde:~~ Letting thee know that all of our plans in these parts fare well. I have learned from the Wolves that they plan to launch a patrol in the early morning hours of the seventh day of the new moon.~ If thou dost ambush the patrol, then it shall be easy for thee to overrun Fawn Tower itself.~ The Wolves shall be critically weakened, and the City of Fawn shall quake in fear!~ But if thou canst, spare the life of the leader of the patrol. She is a favorite of my liege.~~ We beg of thee not to let this messenger fall into the hands of our enemies, the Wolves.~~ Spektor, writing on behalf of Lord Marsten");
				gflags[KNOW_MARSTEN_IS_TRAITOR] = true;
				MARSTEN->set_item_flag(SI_TOURNAMENT);
				gflags[KNOW_SPEKTOR_IS_TRAITOR] = true;
				SPEKTOR->set_item_flag(SI_TOURNAMENT);
			} else if (var0003 == 0x007A) {
				say("   Honor be to thee, Pomdirgun, Chieftain of the Goblin Horde:~~ Letting thee know that all of our plans in these parts fare well. Having learned from our successful experience with Fawn Tower, we have decided to withdraw, on the fourth night of the coming moon, as many troops as possible from Bull Tower.~ The Bears shall be marching westward on the plains, and shall be easily slaughtered.~ Then thou canst take the Tower, and plunder the Inn of the Sleeping Bull.~~ We want to remind thee of the supreme importance not to let this messenger fall into the hands of our enemies, the Wolves and the Bears.~~ Marsten, King of Monitor");
				gflags[KNOW_MARSTEN_IS_TRAITOR] = true;
				MARSTEN->set_item_flag(SI_TOURNAMENT);
			} else if (var0003 == 0x007B) {
				say("   Old man, if thou dost truly wish to survive Freedom, but dost feel that thou canst live to tell the tale of Lorthondo's final test, thou hast only to serve in my slave pit. Tend to my pets and I shall personally show thee to the door and to the blue skies of daylight and freedom. Guard my nightmare and care for him well.~ He is a treasure and a daemon in one. Take him through the teleporter once each day and let him feel the grass beneath his hooves.~ Take care, for one strike of his hoof could kill an old fool such as thou.~ Be thou sure to keep Sabrina from him. I fear that she doth frighten him. I find it strange that such a wild, untamed creature such as that should be frightened of her touch. Then again, mayhaps I can fathom why. ~");
				say("   Lastly, take great care of my small furry prize. Do not be fooled by its diminutive size, it hath taken the lives of many a foolhardy man who dared to approach thinking it might make a tasty morsel.~ Thou shouldst treat it with as much respect as thou wouldst bestow upon me. If thou dost not, either one of us could end thy miserable existence.~ In the supply room, thou wilt find a year's worth of carrots for Buggs. Feed him but one per day. Place the carrots upon his golden plate -- 'tis the only way that he will feed. He is of royal lineage -- a born predator. If thou dost not, thou mayest find that thou art his next meal.~ Serve me well, old man, and thou mayest live to see the outside of this prison some year...");
			} else if (var0003 == 0x007F) {
				say("To me fellow trappers:~~ Greetings to ye.~~ I will be heading north when ye be reading this message. Make sure ye guard the cave and protect our goods well. If I find out ye let some ne'er-do-well steal our goods, I'll personally skin every one of ye bastards, hang yer hide on me walls, and eat yer black hearts for supper!~ By the way, don't be lookin fer the wonderful glass sword that appeared after the last storm, for I took it with me. I be headin' back to the North.~ This fancy sword should be mighty handy for slaying some dragon or other fearsome beast...~ Slaughter a beast in mine honor.~~Hazard");
				gflags[KNOWS_PINECONE_OWNER] = true;
			} else if (var0003 == 0x0082) {
				say("Virtues ----------------------------- ~ Tolerance, Enthusiasm, and Emotion Ethicality, Discipline, and Logic ~ ----------------------------- ~~");
				say("Anti-Virtues ----------------------------- ~ Anarchy, Wantonness, and Insanity Prejudice, Apathy, and Ruthlessness ~ ----------------------------- ");
			} else if (var0003 == 0x0087) {
				say("I, Purlonio, merchant of Moonshade, am about to tell my tale.~~ Back in the early days of the Sosarian colonization of Serpent Isle, I had accumulated -- I have to tell thee -- a massive fortune in the city. After a most unusual dream, I called upon an enchantress for help. She was expensive, but of good and right advice. Drogeni, the Wizard, warned me that I was about to lose all of my cherished wealth in the near future and that there was nothing she could do to prevent this from happening.~");
				say("I thought I could outsmart Fate... I took all of my possessions, all of my gold, in a ship to this cave in the far northern reaches for safe storage.~ I hired Drogeni to create a series of tunnels in the rear of the cave so that a magic map would be required and no one could survive without it.~ Thereupon, I had the wizard conjure an Ice Dragon to guard my riches. Once this was done, we sailed back to the southern plains where I rid myself of the enchantress so that no one would ever know the secret to my riches.~");
				say("Unfortunately, upon the death of the wizard, the magical map disintegrated. Fearing that the prophecy had come true, I went back to the cave and tried to find the route to my riches. To this day, I have not found my treasure.");
			} else if (var0003 == 0x008D) {
				say("   In my life as a criminal, as they call me, I have had many a task to overcome. None before was as hard as the ones I am about to describe. This is done so that thou mayest save thy time and thy life.~ Of all the traps I had to overcome, the most interesting ones were the spear traps.~ First of all, thou needest to enter the caretaker's room. After many an observation and many more days than thou wouldst think, I discovered the routine of the caretaker.~ He usually is on patrol during the whole afternoon. He makes his rounds at noon and midnight.~ In his storehouse, thou shouldst find barrels and chests. Rummaging through the barrels I found a hidden lever. That lever, I came to realize later, turns off the spear traps in the corridor.~ Make good use of that, my friend. Blessings upon thee.");
			} else if (var0003 == 0x0095) {
				say("To My Good Brethren and Comrades In Arms,~~");
				say("After many long, arduous and harrowing adventures I have collected this considerable treasure. While this fair measure of wealth would be enough to keep a man happy for the rest of his days, I cannot possess it without remembering my good fellow knights -- many to whom I owe my very life. It is to thee that I leave this bountiful reward. It is secured by the soundest means that I currently have at my disposal. To obtain it, one need only use THE KEY.~~ Ever-faithful,~~   Pendar-");
			} else if (var0003 == 0x0096) {
				say("Hark, adventurer, and read these words well.~~ Many know me as Gannt the Bard, singer of songs, and writer of fine poetry for all to enjoy. Though many know of me, most do not know of my life, or at least of how I came to this end. Read, and read well, dear adventurer.~ If thou hast any justice in thine heart, or any pity in thy soul, then thou wilt seek vengeance for mine untimely death. If thou, hearty adventurer, hast any sense of duty to avenge evils, then thou must seek out the craven and cowardly Captain Stokes of the rusty old bucket 'The Mustang' and exact just payment, for alas, since I am not of this world, I cannot.~~ One day as I was at the Inn of Sleeping Bull, plucking my lute, not bothering anyone, but practicing my trade, in walked the swine, Captain Stokes, billowing foul fog upon us with his ill-smelling fag.~");
				say("Seeing that no one in the fair establishment could stomach the pungent smell of his tobacco-like rot, I dared to ask him to put it out, for the sake of all our healths. He stared at me, then turned a blind eye. I went back to strumming my lute, 'til again the smell began to bring tears to mine eyes. Again I asked him, begged him to stop, but again he turned away.~ Finally, as gentle ladies began to leave for air, and good children began to cough and cry from the Captain's reeking root, I tried once more. This time, though, he answered with the blade of his dagger. He thrust well through my lute and into mine entrails, stuffing it deep into my belly.~");
				say("He grinned and twisted the blade, not once nor twice, but thrice! Being but a humble bard and quite mortal, I had little choice but to expire. I fell in a pool of mine own blood, mine hand strumming my last chord as I fell.~ I ask thee, I beg of thee to give me peace, and exact vengeance for my death. Before thee is the key to his rotten hovel which thou mayest find to the west of Fawn, above the forest of Knight's Test. Many ill-begotten instruments doth he hide in his house of ill-wares. Beware them! Please, noble adventurer, exact justice for my death, and exact the toll from that evil Captain Stokes.  Do this and let my spirit rest peacefully...~~Gannt...");
			} else if (var0003 == 0x00B5) {
				say("The Art of Winemaking~~ The art of winemaking is not a difficult trade; indeed, making fine wine is the simplest of tasks. There are those laymen, however, who doth think making wine is some great secret. Nothing could be further from the truth!~ Sorcery hath made the process of making wine very easy, but sorcery cannot make the wine taste good. To make great wine, thou needest but one commodity -- great grapes! That is the secret to making a truly great vintage, one that shall be remembered by all who partake. ");
			} else if (var0003 == 0x00BC) {
				var0004 = Func0953();
				say("Dear ",
					var0004,
					", ~All of the portents indicate that this Quest to Find Batlin shall severely tax thine abilities. Consequently, I have ordered the armouries of the kingdom opened in order to equip thee and thy good companions. ~~Thou shalt be given these things -- ~~The Glass Sword, which can slay any foe (but which is destroyed in the act of such slaughter). ~~The MageBane, a fabled weapon which thou didst recover in thy previous encounter with Batlin. It steals the magic from sorcerers who oppose thee. ~~The Daemon Sword which thou didst obtain at the Forge of Virtue. It is truly a terrible weapon, but thou wilt surely need it. Beware the Daemon within!");
				say("Rudyom's Wand, which doth make blackrock to explode. ~~The strange Serpent of Blackrock, which thou didst obtain from netherworlds during thy most recent adventure. Its powers are unknown, but those who gave it thee promised that it would be useful to thee soon. ~~A spellbook, to which hath been added every spell that could be speedily obtained. ~~For thee to wear, a set of armour of the best enchantments: breastplate, helm, and gauntlets. ~~For Iolo the Bard: a crossbow, which he doth wield so well. ~~For noble Dupre: a Magic Shield which I have prepared for him. ~~For Shamino the Ranger: a Magic Bow, and a goodly supply of Burst Arrows, which he shall no doubt use to good purpose. ~~As well as such common items as torches, a pair of swamp boots, a good dagger, and much food for an extended journey.");
				say("~~Travel in safety, and may the villain Batlin soon fall into thine hands! Also, I hope that thou shalt soon find Iolo's lost wife, the goodwoman Gwenno. ~~~-- Lord British, thy liege.");
			} else if (var0003 == 0x00BD) {
				say("The list of items which we found ourselves with after the storm:~~");
				say("Prepared by Shamino.");
				if (gflags[DUPRE_MADE_EQUIPMENT_LIST]) {
					say("With additional notes by Dupre.");
				}
				if (gflags[IOLO_MADE_EQUIPMENT_LIST]) {
					say("And further comments by Iolo, since being freed from that vile Monitorian prison cell!");
				}
				say("~~");
				if (gflags[STORM_PINECONE] && (!gflags[KNOWS_PINECONE_OWNER])) {
					say("A pinecone (or, at least, it appears to be one).");
				}
				if (gflags[KNOWS_PINECONE_OWNER]) {
					say("A pinecone from the northern woods.");
				}
				if (gflags[STORM_STOCKINGS] && (!gflags[KNOWS_MOONSILK_OWNER])) {
					say("A fine pair of sheer stockings, probably women's attire.");
				}
				if (gflags[KNOWS_MOONSILK_OWNER]) {
					say("A pair of moonsilk stockings, such as the enchantress Columna doth wear.");
				}
				if (gflags[STORM_URN] && (!gflags[KNOWS_URN_ORIGIN])) {
					say("Some sort of vase, with soot inside.");
				}
				if (gflags[KNOWS_URN_ORIGIN]) {
					say("A funerary urn containing the Ashes of the Dead, taken from the Caves of Monitor.");
				}
				if (gflags[STORM_LAB_APPARATUS] && (!gflags[HAS_CLUE_LAB_APPARATUS])) {
					say("A strange apparatus of glass and copper.");
				}
				if (gflags[HAS_CLUE_LAB_APPARATUS] && (!gflags[KNOWS_LAB_APPARATUS_OWNER])) {
					say("A specimen of laboratory apparatus from a mage's laboratory.");
				}
				if (gflags[HAS_CLUE_LAB_APPARATUS] && gflags[KNOWS_LAB_APPARATUS_OWNER]) {
					say("The missing apparatus from the laboratory of Erstam, the so-called Mad Mage.");
				}
				if (gflags[STORM_PUMICE] && (!gflags[KNOWS_PUMICE_ORIGIN])) {
					say("A rock.");
				}
				if (gflags[KNOWS_PUMICE_ORIGIN]) {
					say("A pumice rock from the fiery depths of some dungeon.");
				}
				if (gflags[STORM_WEDDING_RING] && (!gflags[HAS_CLUE_RING])) {
					say("A finely crafted ring, of silver, of a size to fit a small woman or a child.");
				}
				if (gflags[HAS_CLUE_RING] && (!gflags[KNOWS_RING_OWNER])) {
					say("A finely crafted silver ring, probably the lost engagement ring of a lass named Alyssand.");
				}
				if (gflags[KNOWS_RING_OWNER]) {
					say("The engagement ring belonging to Alyssand of Fawn.");
				}
				if (gflags[STORM_FUR_CAP] && (!gflags[HAS_CLUE_FUR_CAP])) {
					say("A ridiculous fur cap.");
				}
				if (gflags[HAS_CLUE_FUR_CAP] && (!gflags[KNOWS_FUR_CAP_OWNER])) {
					say("An expensive fur cap, which the MageLord of Moonshade obtained for one of his many lovers.");
				}
				if (gflags[KNOWS_FUR_CAP_OWNER]) {
					say("The elegant fur cap which Filbercio the MageLord purchased for his favorite, the sorceress Frigidazzi.");
				}
				if (gflags[STORM_SLIPPERS] && (!gflags[KNOWS_SLIPPERS_OWNER])) {
					say("Some very old and worn slippers, such as might be worn in the privacy of one's home.");
				}
				if (gflags[KNOWS_SLIPPERS_OWNER]) {
					say("The well-worn slippers belonging to Devra, the mistress of the Inn of the Sleeping Bull.");
				}
				if (gflags[STORM_BREAST_PLATE] && (!gflags[KNOWS_BREAST_PLATE_OWNER])) {
					say("An enameled breastplate, suitable for ceremonial occasions.");
				}
				if (gflags[KNOWS_BREAST_PLATE_OWNER]) {
					say("The ceremonial breastplate of the Priestess of Beauty, who is Kylista of Fawn. A very attractive lady, I should add.");
				}
				if (gflags[STORM_BLUE_EGG] && (!gflags[KNOWS_BLUE_EGG_OWNER])) {
					say("A strange blue egg.");
				}
				if (gflags[KNOWS_BLUE_EGG_OWNER]) {
					say("A penguin egg, such as may be found in the ice fields of the distant north.");
				}
				if (gflags[STORM_GOBLIN_BRUSH] && (!gflags[KNOWS_GOBLIN_BRUSH_ORIGIN])) {
					say("A crude brush.");
				}
				if (gflags[KNOWS_GOBLIN_BRUSH_ORIGIN]) {
					say("A grisly brush made from the bones of some poor victim of the Goblins. How foul!");
				}
				if (gflags[STORM_ICEWINE] && (!gflags[KNOWS_ICEWINE_ORIGIN])) {
					say("A bottle of ice wine -- whatever that is!");
				}
				if (gflags[KNOWS_ICEWINE_ORIGIN]) {
					say("A bottle of that excellent vintage of wine sold by the Rangers of Moonshade. Why, I should sample some now...");
				}
				if (gflags[STORM_FILARI] && (!gflags[KNOWS_FILARI_OWNER])) {
					say("Strange baubles -- silver disks with jewels in the center.");
				}
				if (gflags[KNOWS_FILARI_OWNER]) {
					say("Jeweled coins from the City of Beauty, Fawn.");
				}
				if (gflags[STORM_BEAR_SKULL] && (!gflags[KNOWS_BEAR_SKULL_ORIGIN])) {
					say("A large skull, no doubt belonging to some large and dead animal.");
				}
				if (gflags[KNOWS_BEAR_SKULL_ORIGIN]) {
					say("The skull of a great mountain bear.");
				}
				if (gflags[STORM_SEVERED_HAND] && (!gflags[KNOWS_SEVERED_HAND_OWNER])) {
					say("A bloody hand, severed from its corpse. It shows no sign of decay, yet...");
				}
				if (gflags[KNOWS_SEVERED_HAND_OWNER]) {
					say("The severed hand from one of the Mad Mage's experiments. It is not dead, yet not living -- it doth not decay.");
				}
				if (gflags[STORM_MONITOR_SHIELD] && (!gflags[KNOWS_MONITOR_SHIELD_ORIGIN])) {
					say("An inexpensive shield, sturdy and suitable for battle.");
				}
				if (gflags[KNOWS_MONITOR_SHIELD_ORIGIN]) {
					say("One of the common shields used by the Pikemen of Monitor.");
				}
				if (gflags[STORM_RUDDY_ROCK] && (!gflags[KNOWS_STONEHEART_ORIGIN])) {
					say("A red hunk of stone.");
				}
				if (gflags[KNOWS_STONEHEART_ORIGIN]) {
					say("The dangerous mineral known as Stoneheart, which is used to produce the illegal reagent Bloodspawn.");
				}
			} else if (var0003 == 0x00BE) {
				say(" Inventory swap list as updated by Iolo");
			} else if (var0003 == 0x00BF) {
				say("Inventory swap list as updated by Dupre");
			} else if (var0003 == 0x00C9) {
				say("This certificate entitles the bearer to commit thievery up to a maximum of one hour.~~Shamino the Anarch.");
			} else if (var0003 == 0x00CA) {
				say("This is an invitation for thee and thy friends to dine at the MageLord's Palace.");
			} else if (var0003 == 0x00CB) {
				say("Dearest Avatar,~~ I would like to congratulate thee from the bottom of mine heart, on obtaining thy spellbook. That was not an easy task. Thou didst accomplish it most admirably.~ Also, I have been told that thou art asking questions about me. I think I would be the best person from whom to obtain the ultimate answers to thy questions. That is, the ones concerning myself.~ For all those reasons and so many more, I would like for thee to come to my manor. ~~Frigidazzi.");
			} else if (var0003 == 0x00CC) {
				say("Dearest Avatar,~~ ~Love and Honor be to thee. Letting thee know that I cannot wait to see thee again. I cannot think of time far from thy strong person and handsome body. Thy broad shoulders and great arms are such an open invitation for a woman like me. Thine eyes, Avatar, so piercing yet so full of love. I could feel that love during thy last visit.~ I beg of thee, come visit me tonight. Thou dost remember where my manor is, dost thou not? I have a very rare spell (a true tongue-twister) I could teach thee and thou wouldst be the only one enjoying that treasured spell of mine. Once more, I beg of thee, do come tonight and do come alone.~~ Thy love,      ~~Frigidazzi.");
			} else if (var0003 == 0x00CD) {
				say("Dearest Avatar,~~ A thousand apologies is what I present thee with. I am the one who caused thee to be arrested and I cannot forgive myself.~ Thou hauntest my dreams. Memories of thee flash in front of mine eyes and the only way I can solve this nightmare is by presenting thee with a very special gift.~ I beg of thee to accept these Serpent Earrings, a token of mine affection for thee, Avatar. ~~Frigidazzi.");
			} else if (var0003 == 0x00CE) {
				say("   Fedabiblio, this is a message to let thee know that all is not well.~ I desperately need thine help. I beg of thee to answer my call.~ Thou must needs use the Crystal Ball.~~Gustacio.");
			} else if (var0003 == 0x00CF) {
				say("To the right good Avatar,~~ Thou must not think thy quest is done. For I offer ye a great challenge. To ye I leave my treasure -- if thou canst find it.~ Within this booty lies a Serpent Crown, waiting for ye to discover its hiding place.~~Captain Hawk.");
			} else if (var0003 == 0x00D0) {
				say("Avatar,~~ I have in my possession something extremely valuable which would be even more vital to thee. Thou couldst make good use of it, believe me.~ If thou art interested (and thou shouldst be), come to the cabin in the forest.~~Stefano.");
			} else if (var0003 == 0x00D1) {
				say("From Flindo~~ To Torrissio:~~ Dearest and most Powerful Mage,~~ I recommend me to thee as well as the bearer of this message.~ This letter of introduction entitles the bearer to a chat with thee. Trust thy righteous friend, Torrissio, the bearer is worth thy time.~ I thank thee for thine understanding. Treat the bearer the way thou wouldst treat me.~~ With a right good will, sincerely thy,~~Flindo");
			} else if (var0003 == 0x00D2) {
				say("To Melino and Columna:~~ Dearest and most Powerful Mages,~~ I recommend me to thee as well as the bearer of this message. This letter of introduction entitles the bearer to a chat with you. Trust thy righteous friend, the bearer is worth your time.~ I thank you for your understanding. Treat the bearer the way you would treat me.~~ With a right good will, faithfully,~~Flindo");
			} else if (var0003 == 0x00D3) {
				say("Dearest Avatar,~~ Love and Honor be to thee. Letting thee know that I cannot wait to see thee again. I cannot think of time far from thy strong and good-hearted person.~ Thine eyes, Avatar, so piercing yet so full of love. I could feel that love during thy last visit. I beg of thee, come visit me tonight.~ I have a very rare spell I could teach thee and thou wouldst be the only one learning it.~ Once more, I beg of thee, do come tonight and do come alone.~~ Sincerely thy,\t~~Frigidazzi.");
			} else if (var0003 == 0x00D4) {
				say("   I have made the most wonderful discovery about the Comb that I took from that empty-headed ruler of Fawn! No longer shall I be forced to content myself with the bumbling attentions of Melino, my pitiful excuse for a husband!~ For upon using the Comb on myself, I have become beautiful and desirable! No one will ever guess now that Mosh and I are twins! Now I may use my wits for better things... like the Adept Torrissio!~~Columna");
			} else if (var0003 == 0x00D5) {
				say("Know, adventurer, that to proceed onward thou must pass three puzzles. At the first test, throw two down. At the second test: throw three down to get eight. At the third test: throw four down to get twelve.\tIf the levers are not in the correct position when the button is depressed, thou wilt surely be destroyed.~ Aram-Dol ");
			} else {
				say("     QA, report this scroll.");
			}
		}
	} while (false);
}

extern void Func0422 object#(0x422) ();

void Func031F shape#(0x31F) () {
	var var0000;

	if (event == DOUBLECLICK) {
		if (get_item_frame() != 0x0012) {
			abort;
		}
		AVATAR->item_say("@Hello, head.@");
		var0000 = script item {
			nohalt;
			say "@Who said that?@";
			wait 7;
			call Func0422;
		};
	}
}

extern void Func097F 0x97F (var var0000, var var0001, var var0002);
extern void Func060F object#(0x60F) ();

void Func0320 shape#(0x320) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;
	var var0008;
	var var0009;
	var var000A;

	var0000 = AVATAR;
	var0001 = get_item_quality();
	var0002 = set_item_quality(0x0000);
	var0003 = get_object_position();
	var0004 = AVATAR->get_object_position();
	if (var0001 < 0x00FB) {
		UI_sprite_effect(ANIMATION_FROST_RING, var0003[0x0001], var0003[0x0002], 0x0000, 0x0000, 0x0000, LOOP_ONCE);
		UI_play_sound_effect(0x0051);
		if (var0002) {
			Func097F(AVATAR, "@Trapped!@", 0x0000);
			var0005 = UI_get_party_list();
			var0006 = 0x0010;
			for (var0009 in var0005 with var0007 to var0008) {
				var0009->set_item_flag(POISONED);
				var0009->set_item_flag(PARALYZED);
				var0009->set_item_flag(CHARMED);
				var0009->set_item_flag(CURSED);
				var0006 += 0x0010;
				Func097F(AVATAR, "@Arrrgh!@", var0006);
			}
			UI_sprite_effect(ANIMATION_PULSATING_DISC, (var0004[0x0001] + 0x0002), var0004[0x0002], -1,  0,  0, LOOP_ONCE);
			UI_sprite_effect(ANIMATION_PULSATING_DISC, var0004[0x0001], (var0004[0x0002] + 0x0002),  0, -1,  0, LOOP_ONCE);
			UI_sprite_effect(ANIMATION_PULSATING_DISC, (var0004[0x0001] - 0x0002), var0004[0x0002],  1,  0,  0, LOOP_ONCE);
			UI_sprite_effect(ANIMATION_PULSATING_DISC, var0004[0x0001], (var0004[0x0002] - 0x0002),  0,  1,  0, LOOP_ONCE);
		}
	}
	if (var0001 == 0x00FB) {
		UI_sprite_effect(ANIMATION_TELEPORT2, var0003[0x0001], var0003[0x0002], 0x0000, 0x0000, 0x0000, LOOP_ONCE);
		UI_play_sound_effect(0x001D);
		Func097F(AVATAR, "@Yow!", 0x0002);
		Func097F(AVATAR, "'Twas trapped!@", 0x0012);
		AVATAR->set_item_flag(CURSED);
		UI_sprite_effect(ANIMATION_TELEPORT2, var0004[0x0001], var0004[0x0002], 0x0000, 0x0000, 0x0000, LOOP_ONCE);
	}
	if (var0001 == 0x00FC) {
		UI_play_sound_effect(0x0052);
		var0002 = UI_create_new_object(0x0386);
		if (var0002) {
			Func097F(AVATAR, "@'Twas trapped!@", 0x0002);
			UI_sprite_effect(ANIMATION_TELEPORT, var0003[0x0001], var0003[0x0002], 0x0000, 0x0000, 0x0000, LOOP_ONCE);
			var0002 = UI_update_last_created(var0004);
		}
	}
	if (var0001 == 0x00FD) {
		UI_play_sound_effect(0x005C);
		UI_sprite_effect(ANIMATION_CLOUDS2, var0003[0x0001], var0003[0x0002], 0x0000, 0x0000, 0x0000, LOOP_ONCE);
		Func097F(AVATAR, "@Run away!@", 0x0000);
		var0002 = script AVATAR after 5 ticks {
			nohalt;
			call Func060F;
		};
	}
	if (var0001 == 0x00FE) {
		UI_play_sound_effect(0x0068);
		var0002 = UI_create_new_object(0x0384);
		if (var0002) {
			Func097F(AVATAR, "@Aagh! Poison!@", 0x0002);
			UI_sprite_effect(ANIMATION_GREEN_BUBBLES, var0003[0x0001], var0003[0x0002], 0x0000, 0x0000, 0x0000, LOOP_ONCE);
			var0002 = UI_update_last_created(var0004);
		}
	}
	if (var0001 == 0x00FF) {
		UI_sprite_effect(ANIMATION_SMALL_RING_BLAST, var0003[0x0001], var0003[0x0002], 0x0000, 0x0000, 0x0000, LOOP_ONCE);
		var000A = UI_create_new_object(0x037F);
		if (var000A) {
			UI_play_sound_effect(0x0027);
			var0002 = UI_update_last_created(var0004);
			var0002 = script var000A after 7 ticks {
				nohalt;
				call Func02C0;
			};
			Func097F(AVATAR, "@Run away!@", 0x0002);
		}
	}
}

extern var Func099D 0x99D (var var0000);
extern void Func08AF 0x8AF (var var0000, var var0001);
extern var Func0955 0x955 ();
extern void Func0922 0x922 (var var0000);
extern void Func097F 0x97F (var var0000, var var0001, var var0002);
extern void Func04A3 object#(0x4A3) ();

void Func0326 shape#(0x326) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;

	UI_close_gumps();
	if (event == UNREADIED) {
		if ((gflags[ARCADION_IS_FREE] == false) && (gflags[ARCADION_IN_SWORD] == true)) {
			if (!Func099D(item)) {
				Func08AF(item, 0x0000);
			}
		}
		abort;
	}
	if (event == DOUBLECLICK) {
		if (gflags[ARCADION_IN_SWORD] == false) {
			if (gflags[ANARCHY_BANE_IN_SWORD] || (gflags[INSANITY_BANE_IN_SWORD] || gflags[WANTONNESS_BANE_IN_SWORD])) {
				var0000 = UI_click_on_item();
				if (!var0000) {
					return;
				}
				var0001 = var0000->get_item_shape();
				if (var0001 == 0x01BD) {
					var0002 = var0000->get_item_frame();
					if (gflags[ANARCHY_BANE_IN_SWORD] && (var0002 == 0x0004)) {
						gflags[ANARCHY_BANE_IN_SWORD] = false;
						var0000->set_item_frame(0x0007);
					}
					if (gflags[INSANITY_BANE_IN_SWORD] && (var0002 == 0x0002)) {
						gflags[INSANITY_BANE_IN_SWORD] = false;
						var0000->set_item_frame(0x0005);
					}
					if (gflags[WANTONNESS_BANE_IN_SWORD] && (var0002 == 0x0003)) {
						gflags[WANTONNESS_BANE_IN_SWORD] = false;
						var0000->set_item_frame(0x0006);
					}
				}
			}
			abort;
		}
		if (!gflags[EQUIPMENT_EXCHANGED]) {
			UI_close_gumps();
			BILLY_CAIN->show_npc_face0(0x0000);
			say("\"Where hast thou taken me, Avatar?!\"");
			say("\"I served thee well upon the Isle of Fire! Why hast thou brought me to this cold place?\"");
			say("\"I gave thee the power of life and death over thine enemies! And see how thou hast repaid me?! I remain bound within this jewel... In a land where I cannot feed! The veins of power have been disrupted! Release me! Release me...\"");
			UI_remove_npc_face0();
			abort;
		}
		UI_close_gumps();
		BILLY_CAIN->show_npc_face0(0x0000);
		say("\"I shall offer thee mine aid once again, Avatar... Thou dost not possess the skill or power enough to overcome the madman Lorthondo thou must face. I do, but not within the constraints of this gem in which thou didst bind me.\"");
		say("\"Free me and I shall help thee win free of this place!\"");
		if (Func0955() == true) {
			UI_play_sound_effect(0x004C);
			say("\"Free! Free! Free at last!\"");
			UI_play_sound_effect(0x0074);
			say("\"Thou art a fool, Avatar! Thou hast no idea what thou hast lost!\"");
			say("\"I thank thee for thine ignorance...\"");
			UI_remove_npc_face0();
			Func0922(0x0017);
			gflags[ARCADION_IS_FREE] = true;
			gflags[ARCADION_IN_SWORD] = false;
		} else {
			say("\"Beware! The energy of the stones here is drawing away thy power to keep me imprisoned...\"");
			say("\"But thou wilt accept mine offer yet...\"");
			UI_remove_npc_face0();
		}
		if (LORTHONDO->npc_nearby() && (gflags[ARCADION_IS_FREE] == true)) {
			AVATAR->set_item_flag(DONT_MOVE);
			var0003 = LORTHONDO->find_nearby(0x0113, 0x0000, MASK_EGG);
			if (var0003) {
				var0003->remove_item();
			}
			LORTHONDO->clear_item_say();
			Func097F(LORTHONDO, "@No, wait!...@", 0x0000);
			var0004 = LORTHONDO->find_nearby(0x0341, 0x0005, MASK_NONE);
			var0004 &= LORTHONDO->find_nearby(0x0349, 0x0005, MASK_NONE);
			var0005 = script var0004[0x0001] {
				wait 5;
				call Func04A3;
				remove;
			};
			var0005 = script var0004[0x0003] {
				wait 8;
				call Func04A3;
				remove;
			};
			var0005 = script var0004[0x0002] {
				wait 10;
				call Func04A3;
				remove;
			};
			var0005 = script var0004[0x0004] {
				wait 14;
				call Func04A3;
				remove;
			};
			var0006 = LORTHONDO->find_nearest(0x031F, 0x000A);
			if (var0006) {
				var0005 = script var0006 {
					wait 16;
					call Func04A3;
				};
			}
		}
	}
	if (event == SCRIPTED) {
		if (gflags[ARCADION_IN_SWORD] == false) {
			if (AVATAR->get_distance(LORTHONDO) < 0x002D) {
				SUPER_GOBLIN->say("\"Avatar! Because thou didst keep thy promise to release me\"");
				say("\"now shall I return the favor.\"");
				say("\"This dark sorcerer will trouble thee no more...\"");
				UI_remove_npc_face0();
				LORTHONDO->clear_item_say();
				Func097F(LORTHONDO, "@No, wait! Please...@", 0x0000);
				var0004 = LORTHONDO->find_nearby(0x0341, 0x0005, MASK_NONE);
				var0004 &= LORTHONDO->find_nearby(0x0349, 0x0005, MASK_NONE);
				var0005 = script var0004[0x0001] {
					wait 5;
					call Func04A3;
					remove;
				};
				var0005 = script var0004[0x0003] {
					wait 8;
					call Func04A3;
					remove;
				};
				var0005 = script var0004[0x0002] {
					wait 10;
					call Func04A3;
					remove;
				};
				var0005 = script var0004[0x0004] {
					wait 14;
					call Func04A3;
					remove;
				};
				var0006 = LORTHONDO->find_nearest(0x031F, 0x000A);
				if (var0006) {
					var0005 = script var0006 {
						wait 16;
						call Func04A3;
					};
				}
				abort;
			}
			abort;
		}
		if (gflags[EQUIPMENT_EXCHANGED]) {
			UI_close_gumps();
			BILLY_CAIN->show_npc_face0(0x0000);
			say("\"Avatar, thou must set me free now! The stone's power is quickly diminishing, and this evil wizard will take thee before long.\" ~\"If thou wilt but liberate me from this crystal prison I shall serve thee once more before departing from thy side...\"");
			UI_remove_npc_face0();
		}
	}
}

extern void Func097F 0x97F (var var0000, var var0001, var var0002);
extern var Func0992 0x992 (var var0000, var var0001, var var0002, var var0003);

void Func0329 shape#(0x329) () {
	var var0000;
	var var0001;
	var var0002;

	if (gflags[BANES_RELEASED]) {
		clear_item_flag(SI_TOURNAMENT);
		clear_item_say();
		Func097F(item, "@No! It must work!@", 0x0000);
		obj_sprite_effect(ANIMATION_POOF, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, LOOP_ONCE);
		UI_play_sound_effect(0x002B);
		abort;
	}
	var0000 = set_npc_prop(HEALTH, 5);
	var0001 = get_object_position();
	UI_sprite_effect(ANIMATION_TELEPORT2, var0001[0x0001], var0001[0x0002], 0x0000, 0x0000, 0x0000, LOOP_ONCE);
	UI_play_sound_effect(0x0082);
	remove_npc();
	set_schedule_type(DANCE);
	var0002 = Func0992(0x0001, "@What happened?@", "@Gone!@", 0x0003);
}

extern void Func062C object#(0x62C) ();
extern void Func090D 0x90D (var var0000, var var0001, var var0002, var var0003, var var0004, var var0005, var var0006);

void Func032A shape#(0x32A) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;

	if (get_item_frame() == 0x0006) {
		return;
	}
	if (event == DOUBLECLICK) {
		var0000 = get_container();
		if (var0000 == AVATAR->get_npc_object()) {
			event = PATH_SUCCESS;
			item->Func062C();
			return;
		}
		if (var0000) {
			var0001 = set_last_created();
			if (var0001) {
				var0001 = AVATAR->give_last_created();
				if (!var0001) {
					var0001 = var0000->give_last_created();
					UI_flash_mouse(CURSOR_HAND);
				}
				event = PATH_SUCCESS;
				item->Func062C();
				return;
			}
			return;
		}
		UI_close_gumps();
		var0002 = [ 1, -1,  0,  1, -1, -1,  0, -1];
		var0003 = [ 0, -1, -1, -1,  0,  1,  1,  1];
		Func090D(item, var0002, var0003, -1, Func062C, item, PATH_SUCCESS);
	}
}

extern var Func09A0 0x9A0 (var var0000, var var0001);

void Func032B shape#(0x32B) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;
	var var0008;
	var var0009;
	var var000A;
	var var000B;
	var var000C;
	var var000D;

	if (event == BG_PATH_FAILURE) {
		set_polymorph(0x02E6);
	}
	if (event == SCRIPTED) {
		set_schedule_type(PATROL);
	}
	if ((event == PROXIMITY) && (get_schedule_type() == PATROL)) {
		AVATAR->move_object([0x018E, 0x09B3, 0x0001]);
		var0000 = UI_create_new_object(0x02F9);
		if (var0000) {
			var0000->set_item_frame(0x0005);
			var0000->remove_all_spells();
			var0001 = [SPELL_CREATE_FOOD, SPELL_CURE, SPELL_DETECT_TRAP, SPELL_GREAT_DOUSE, SPELL_GREAT_IGNITE, SPELL_LIGHT, SPELL_LOCATE,
			           SPELL_AWAKEN, SPELL_DESTROY_TRAP, SPELL_GREAT_LIGHT, SPELL_HEAL, SPELL_MASS_CURE, SPELL_PROTECTION,
			           SPELL_CURSE, SPELL_ENCHANT_MISSILES, SPELL_PROTECT_ALL, SPELL_PARALYZE, SPELL_SLEEP,
			           SPELL_BLINK, SPELL_DETER, SPELL_FLASH, SPELL_MASS_CURSE, SPELL_REVEAL, SPELL_TRANSCRIBE, SPELL_UNLOCK_MAGIC,
			           SPELL_CONJURE, SPELL_DISPEL_FIELD, SPELL_EXPLOSION, SPELL_GREAT_HEAL, SPELL_INVISIBILITY, SPELL_MASS_SLEEP,
			           SPELL_BETRAY, SPELL_CAUSE_FEAR, SPELL_FIRE_FIELD, SPELL_FIRE_RING, SPELL_CREATE_AMMO,
			           SPELL_ENERGY_FIELD, SPELL_ENERGY_MIST, SPELL_MASS_AWAKEN, SPELL_MASS_MIGHT, SPELL_POISON_MIST, SPELL_RESTORATION, SPELL_LIGHTNING,
			           SPELL_MIND_BLAST, SPELL_DELAYED_BLAST, SPELL_FIRE_SNAKE, SPELL_SWORD_STRIKE,
			           SPELL_DEATH_VORTEX, SPELL_MASS_DEATH, SPELL_INVISIBLE_ALL, SPELL_STOP_STORM, SPELL_SUMMON, SPELL_TIME_STOP];
			for (var0004 in var0001 with var0002 to var0003) {
				var0005 = UI_add_spell(var0004, 0x0000, var0000);
			}
			var0005 = AVATAR->give_last_created();
		}
		var0005 = AVATAR->add_cont_items(0x0001, 0x0326, QUALITY_ANY, 0x0000, 0x0000);
		var0005 = AVATAR->add_cont_items(0x0001, 0x025C, QUALITY_ANY, 0x0000, 0x0000);
		var0005 = AVATAR->add_cont_items(0x0001, 0x0303, QUALITY_ANY, 0x0000, 0x0000);
		UI_play_sound_effect(0x0074);
		AVATAR->set_polymorph(0x02D1);
		SHAMINO->set_schedule_type(WANDER);
		DUPRE->set_schedule_type(WANDER);
		IOLO->set_schedule_type(WANDER);
		var0005 = script IOLO after 0 ticks {
			nohalt;
			call Func01D1;
		};
		var0006 = Func09A0(0x0007, 0x0001);
		if (var0006) {
			var0005 = script var0006 after 40 ticks {
				// Bug: the next line should probably be 'music 13', but it
				// lacks the continuous flag.
				// It works because it seems that original pulls zeroes from
				// after the end of the script.
				raw((byte)0x54); raw(0x000D);
			};
		}
		AVATAR->clear_item_flag(READ);
		AVATAR->clear_item_flag(TATTOOED);
		var0007 = DUPRE;
		while (var0007 > PARTY) {
			if (var0007 != AVATAR) {
				var0007->set_npc_id(0x0000);
				var0007->clear_item_flag(MET);
				var0007->clear_item_flag(SI_ZOMBIE);
				var0007->clear_item_flag(NO_SPELL_CASTING);
			}
			var0007->clear_item_flag(SI_TOURNAMENT);
			var0007->clear_item_flag(POLYMORPH);
			var0007->set_temperature(0x0000);
			var0007 -= 0x0001;
		}
		DUPRE->set_item_flag(MET);
		SHAMINO->set_item_flag(MET);
		IOLO->set_item_flag(MET);
		BUSTER->set_item_flag(MET);
		SMUDGE->set_item_flag(MET);
		NEYOBI->set_item_flag(SI_ZOMBIE);
		GWENNO->set_item_flag(SI_ZOMBIE);
		var0008 = [AVATAR, SELINA, KALEN, ALE, KARNAX, THOXA, MIGGIM, BRACCUS, DRAXTA, SILENT1, SILENT2, SILENT3, JORVIN, HENCH1, HENCH2, HENCH3, PALOS, DBEYER, XENKA, RABINDRINATH, SIRANUSH, CANTRA, BRENDANN, SHAZZANA, CALADIN, TEMPLAR, LUTHER, GOBLIN_KING, GOBLIN_19, GOBLIN_21, GOBLIN_22, GOBLIN_23, GOBLIN_24, STEFANO];
		for (var000B in var0008 with var0009 to var000A) {
			var000B->set_item_flag(SI_TOURNAMENT);
		}
		var0008 = [HAZARD, LORD_BRITISH, D_STEFANO, D_CANTRA, D_BYRIN, ANTI_SHAM, ANTI_DUPRE, ANTI_IOLO, CELLIA, FLICKEN, HARNNA, KRAYG, LUCILLA, ALYSSAND, DELIN, DELPHYNIA, GARTH, JOTH, VOLDIN, JENDON, JORVIN, KYLISTA, YELINDA, LEON, OLON, RUGGS, SCOTS, ZULITH, BOYDON, DRAYGAN, MARSTEN, SPEKTOR, FILBERCIO, TORRISSIO, MORTEGRO, FRIGIDAZZI, FEDABIBLIO, ANDRIO, FRELI, COLUMNA, MELINO, GUSTACIO, MOSH, MORGHRIM];
		for (var000B in var0008 with var000C to var000D) {
			var000B->set_item_flag(SI_TOURNAMENT);
		}
	}
}

extern void Func090D 0x90D (var var0000, var var0001, var var0002, var var0003, var var0004, var var0005, var var0006);
extern void Func09AA 0x9AA ();
extern void Func060A object#(0x60A) ();

void Func032C shape#(0x32C) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;
	var var0008;
	var var0009;
	var var000A;
	var var000B;
	var var000C;
	var var000D;

	if (event == DOUBLECLICK) {
		var0000 = find_nearby(0x0113, 0x0005, MASK_EGG);
		for (var0003 in var0000 with var0001 to var0002) {
			var0004 = var0003->get_item_quality();
			var0005 = var0003->get_item_frame();
			if (var0005 == 0x0007) {
				if (var0004 == 0x00C8) {
					gflags[USED_IRON_MAIDEN] = true;
					var0006 = script item {
						nohalt;
						call Func060A;
					};
				}
			}
		}
		var0007 = get_item_frame();
		if (var0007 == 0x0001) {
			set_item_frame(0x0000);
			abort;
		}
		if (var0007 == 0x0000) {
			if (gflags[USED_IRON_MAIDEN] == false) {
				Func090D(item, [1, 0], [0, 1], -1, Func032C, item, PATH_SUCCESS);
				abort;
			}
		}
	}
	if (event == PATH_SUCCESS) {
		AVATAR->set_item_flag(DONT_MOVE);
		AVATAR->set_polymorph(0x00EF);
		set_item_frame(0x0001);
		var0006 = script item after 25 ticks {
			nohalt;
			call Func032C;
		};
		var0006 = script item after 2 ticks {
			nohalt;
			say "@AAAAAHHHHH!!!!!!@";
		};
		abort;
	}
	if ((event == SCRIPTED) && (gflags[TEMP_FLAG_1] == false)) {
		var0007 = get_item_frame();
		if (var0007 == 0x0000) {
			var0006 = script item {
				nohalt;
				say "@...uunnhhhh...@";
			};
		}
		if (var0007 == 0x0001) {
			var0008 = 0x0000;
			while (var0008 < 0x000F) {
				var0009 = UI_create_new_object(0x0390);
				if (var0009) {
					var0009->set_item_flag(TEMPORARY);
					var000A = UI_die_roll(0x0000, 0x0003);
					var0009->set_item_frame(var000A);
					var000B = UI_die_roll(-2,  2);
					var000C = UI_die_roll( 1,  2);
					var000D = get_object_position();
					var0006 = UI_update_last_created([(var000D[0x0001] + var000B), (var000D[0x0002] + var000C), var000D[0x0003]]);
				}
				var0008 += 0x0001;
			}
			set_item_frame(0x0000);
			var000D = get_object_position();
			var000D[0x0002] += 0x0002;
			AVATAR->move_object(var000D);
			AVATAR->set_polymorph(0x02D1);
			var0006 = script AVATAR after 5 ticks {
				nohalt;
				actor frame sleeping;
				wait 15;
			};
			var0006 = script item after 15 ticks {
				nohalt;
				call Func032C;
			};
			gflags[TEMP_FLAG_1] = true;
			abort;
		}
		if (var0007 == 0x0002) {
			var000D = get_object_position();
			UI_sprite_effect(ANIMATION_LIGHTNING, (var000D[0x0001] - 0x0006), (var000D[0x0002] - 0x0006), 0x000F, 0x000F, 0x0000, LOOP_ONCE);
			abort;
		}
	}
	if ((event == SCRIPTED) && (gflags[TEMP_FLAG_1] == true)) {
		Func09AA();
		gflags[TEMP_FLAG_1] = false;
		var0006 = AVATAR->get_npc_prop(HEALTH);
		AVATAR->reduce_health(var0006, NORMAL_DAMAGE);
	}
}

extern var Func0992 0x992 (var var0000, var var0001, var var0002, var var0003);
extern void Func097F 0x97F (var var0000, var var0001, var var0002);

void Func032D shape#(0x32D) () {
	var var0000;

	var0000 = Func0992(AVATAR, "@Who wants this?@", 0x0000, true);
	if (IOLO->npc_nearby()) {
		Func097F(IOLO, "@I do!@", 0x0008);
	}
	if (SHAMINO->npc_nearby()) {
		Func097F(SHAMINO, "@I shall do it!@", 0x000C);
	}
	if (DUPRE->npc_nearby()) {
		Func097F(DUPRE, "@Me! Me! Me!@", 0x0010);
	}
}

extern var Func0954 0x954 ();
extern var Func0953 0x953 ();
extern void Func097F 0x97F (var var0000, var var0001, var var0002);
extern var Func09A0 0x9A0 (var var0000, var var0001);
extern void Func09AF 0x9AF (var var0000, var var0001, var var0002, var var0003);
extern void Func0907 0x907 (var var0000, var var0001);
extern var Func0988 0x988 (var var0000, var var0001);
extern var Func098D 0x98D ();
extern void Func032E shape#(0x32E) ();

void Func032E shape#(0x32E) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;
	var var0008;
	var var0009;
	var var000A;
	var var000B;
	var var000C;
	var var000D;
	var var000E;
	var var000F;
	var var0010;
	var var0011;
	var var0012;
	var var0013;
	var var0014;
	var var0015;
	var var0016;
	var var0017;
	var var0018;
	var var0019;
	var var001A;
	var var001B;
	var var001C;
	var var001D;
	var var001E;
	var var001F;
	var var0020;
	var var0021;
	var var0022;

	var0000 = Func0954();
	var0001 = UI_is_pc_female();
	var0002 = "his";
	var0003 = "him";
	var0004 = "he";
	var0005 = "man";
	if (UI_is_pc_female()) {
		var0002 = "her";
		var0004 = "she";
		var0003 = "her";
		var0005 = "woman";
	}
	var0006 = Func0953();
	var0007 = UI_part_of_day();
	var0008 = 0x0000;
	if (FRIGIDAZZI->get_npc_id() > 0x0001) {
		var0008 = 0x0002;
	}
	if ((var0007 > EARLY) || (var0007 < EVENING)) {
		var0007 = "day";
	} else {
		var0007 = "evening";
	}
	if (event == EGG) {
		set_schedule_type(WAIT);
		abort;
	}
	if (event == SI_PATH_FAILURE) {
		event = SCRIPTED;
	}
	if ((event == SCRIPTED) && (!gflags[POTHOS_RETURNED])) {
		if (FILBERCIO->get_npc_id() == 0x000C) {
			FILBERCIO->set_npc_id(0x000D);
			var0009 = script POTHOS {
				nohalt;
				face north;
				actor frame bowing;
				actor frame kneeling;
				wait 2;
				call Func032E;
			};
			abort;
		}
		if (FILBERCIO->get_npc_id() == 0x000B) {
			FILBERCIO->set_npc_id(0x000C);
			UI_init_conversation();
			FILBERCIO->show_npc_face0(0x0000);
			say("\"And to think she was once a young and beautiful sorceress, before her ambitions turned her cold and heartless...\"");
			UI_end_conversation();
			POTHOS->si_path_run_usecode([0x090A, 0x071A, 0x0000], SCRIPTED, item, Func032E, false);
			Func097F(POTHOS, "@Pardon me...@", 0x0005);
			UI_play_music(0x0012, Func09A0(0x0005, 0x0001));
			abort;
		}
		if (FILBERCIO->get_npc_id() == 0x000A) {
			FILBERCIO->set_npc_id(0x000B);
			UI_init_conversation();
			GUSTACIO->show_npc_face0(0x0000);
			say("\"See here, Rotoluncia! This stranger may have secrets -- as do we all! But I will not condone treating a guest of the Council like a criminal!\"");
			ROTOLUNCIA->show_npc_face1(0x0000);
			say("\"Thou dost dare to interfere with my spells! MageLord, I demand that thou reprimandest this sorcerer.\"");
			UI_remove_npc_face1();
			UI_remove_npc_face0();
			FILBERCIO->show_npc_face0(0x0000);
			say("\"My dear, calm thyself. Perhaps our visitor shall tell us all, without the use of force...\"");
			ROTOLUNCIA->show_npc_face1(0x0000);
			say("\"If there is one thing I cannot stand, it is being hamstrung by petty politics. Thou art not half the man thou once wert, Filbercio...\"");
			say("\"I bid you all a pleasant dinner. I have lost mine appetite and am leaving. But mark my words -- I shall have my way!\"");
			UI_end_conversation();
			var000A = ROTOLUNCIA->get_object_position();
			UI_sprite_effect(ANIMATION_TELEPORT2, var000A[0x0001], var000A[0x0002], 0x0000, 0x0000, 0x0000, LOOP_ONCE);
			UI_play_sound_effect(0x0082);
			ROTOLUNCIA->set_new_schedules(MIDNIGHT, WANDER, [0x086D, 0x0837]);
			ROTOLUNCIA->run_schedule();
			ROTOLUNCIA->move_object([0x086D, 0x0837, 0x0000]);
			ROTOLUNCIA->set_item_flag(SI_TOURNAMENT);
			Func097F(FRIGIDAZZI, "@Goodbye, witch...@", 0x0004);
			var0009 = script GUSTACIO {
				nohalt;
				face south;
				actor frame bowing;
				actor frame sitting;
				wait 2;
			};
			var0009 = script FILBERCIO after 8 ticks {
				nohalt;
				wait 8;
				say "@Good riddance!@";
				wait 4;
				call Func032E;
			};
			abort;
		}
		if (FILBERCIO->get_npc_id() == 0x0009) {
			FILBERCIO->set_npc_id(0x000A);
			var000B = find_nearby(0x0121, 0x0014, MASK_NONE);
			for (var000E in var000B with var000C to var000D) {
				var000A = var000E->get_object_position();
				var000E->remove_item();
				UI_sprite_effect(ANIMATION_POOF, var000A[0x0001], var000A[0x0002], 0x0000, 0x0000, 0x0000, LOOP_ONCE);
				UI_play_sound_effect(0x0068);
			}
			var0009 = script ROTOLUNCIA {
				nohalt;
				wait 5;
				face east;
			};
			var0009 = script GUSTACIO after 10 ticks {
				face west;
				wait 2;
				call Func032E;
			};
			abort;
		}
		if (FILBERCIO->get_npc_id() == 0x0008) {
			FILBERCIO->set_npc_id(0x0009);
			var000A = GUSTACIO->get_object_position();
			UI_sprite_effect(ANIMATION_FROST_RING, (var000A[0x0001] - 0x0003), (var000A[0x0002] - 0x0003), 0x0000, 0x0000, 0x0000, LOOP_ONCE);
			UI_play_sound_effect(0x0083);
			var0009 = script GUSTACIO after 15 ticks {
				nohalt;
				call Func032E;
			};
			Func097F(ROTOLUNCIA, "@How darest thou!@", 0x000A);
			abort;
		}
		if (FILBERCIO->get_npc_id() == 0x0007) {
			FILBERCIO->set_npc_id(0x0008);
			var000B = find_nearby(0x025F, 0x0014, MASK_EGG);
			var000A = var000B->get_object_position();
			var000B->remove_item();
			var000B = UI_create_new_object(0x0121);
			if (var000B) {
				var0009 = UI_update_last_created(var000A);
				UI_sprite_effect(ANIMATION_BIG_RING_BLAST, var000A[0x0001], var000A[0x0002], 0x0000, 0x0000, 0x0000, LOOP_ONCE);
				UI_play_sound_effect(0x002A);
			}
			var0009 = script GUSTACIO {
				nohalt;
				say "@Stop this!@";
				wait 5;
				actor frame bowing;
				actor frame standing;
				actor frame cast_up;
				say "@Contra Flam!@";
				call Func032E;
			};
			abort;
		}
		if (FILBERCIO->get_npc_id() == 0x0006) {
			FILBERCIO->set_npc_id(0x0007);
			var000B = find_nearby(0x025F, 0x0014, MASK_EGG);
			var000A = var000B->get_object_position();
			var000B->remove_item();
			var000B = UI_create_new_object(0x0121);
			if (var000B) {
				var0009 = UI_update_last_created(var000A);
				UI_sprite_effect(ANIMATION_BIG_RING_BLAST, var000A[0x0001], var000A[0x0002], 0x0000, 0x0000, 0x0000, LOOP_ONCE);
				UI_play_sound_effect(0x0027);
			}
			var000B = UI_create_new_object(0x025F);
			if (var000B) {
				var000B->clear_item_flag(TEMPORARY);
				var000A = AVATAR->get_object_position();
				var0009 = UI_update_last_created([(var000A[0x0001] + 0x0002), var000A[0x0002], var000A[0x0003]]);
				var0009 = ROTOLUNCIA->set_to_attack(var000B, 0x0118);
			}
			var0009 = script ROTOLUNCIA {
				nohalt;
				actor frame standing;
				say "@Mas Mas!@";
				actor frame strike_1h;
				continue;
				sfx 20;
				attack;
				actor frame standing;
				wait 2;
				call Func032E;
			};
			Func097F(FILBERCIO, "@Must thou?@", 0x0005);
			abort;
		}
		if (FILBERCIO->get_npc_id() == 0x0005) {
			FILBERCIO->set_npc_id(0x0006);
			var000B = find_nearby(0x025F, 0x0014, MASK_EGG);
			var000A = var000B->get_object_position();
			var000B->remove_item();
			var000B = UI_create_new_object(0x0121);
			if (var000B) {
				var0009 = UI_update_last_created(var000A);
				UI_sprite_effect(ANIMATION_BIG_RING_BLAST, var000A[0x0001], var000A[0x0002], 0x0000, 0x0000, 0x0000, LOOP_ONCE);
				UI_play_sound_effect(0x0029);
			}
			var000B = UI_create_new_object(0x025F);
			if (var000B) {
				var000B->clear_item_flag(TEMPORARY);
				var000A = AVATAR->get_object_position();
				var0009 = UI_update_last_created([(var000A[0x0001] - 0x0002), var000A[0x0002], var000A[0x0003]]);
				var0009 = ROTOLUNCIA->set_to_attack(var000B, 0x0118);
			}
			var0009 = script ROTOLUNCIA {
				nohalt;
				actor frame standing;
				say "@Flam Mas!@";
				actor frame strike_1h;
				continue;
				sfx 20;
				attack;
				actor frame standing;
				wait 2;
				call Func032E;
			};
			Func097F(SERV_06, "@Help!@", 0x0000);
			SERV_06->si_path_run_usecode([0x0916, 0x0742, 0x0000], EGG, item, Func032E, false);
			Func097F(FRIGIDAZZI, "@How rude...@", 0x0006);
			Func097F(SHAMINO, "@Stop that!@", 0x0002);
			Func097F(DUPRE, "@No!@", 0x000A);
			abort;
		}
		if (FILBERCIO->get_npc_id() == 0x0004) {
			FILBERCIO->set_npc_id(0x0005);
			UI_init_conversation();
			FILBERCIO->show_npc_face0(0x0000);
			say("\"Good Mages, this is the adventurer from a distant land whose arrival was foretold in our conjurings!\"");
			FRIGIDAZZI->show_npc_face1(0x0000);
			say("\"Could ",
				var0004,
				" be responsible for the storms which plague the land? Or for the growing strangenesses which afflict our spellcasting?\"");
			UI_remove_npc_face1();
			0x0000->set_conversation_slot();
			say("\"I hope, my dear, that ",
				var0004,
				" is the solution to our problems, rather than the cause...\"");
			ROTOLUNCIA->show_npc_face1(0x0000);
			say("\"Thou art a fool, MageLord! Our guest is most certainly a factor in the supernatural disturbances that are threatening our world. Let us question ",
				var0003,
				" now!\"");
			UI_play_music(0x0010, Func09A0(0x0005, 0x0001));
			UI_end_conversation();
			UI_remove_npc_face1();
			var000B = UI_create_new_object(0x025F);
			if (var000B) {
				var000B->clear_item_flag(TEMPORARY);
				var000A = AVATAR->get_object_position();
				var0009 = UI_update_last_created([var000A[0x0001], (var000A[0x0002] + 0x0002), var000A[0x0003]]);
				var0009 = ROTOLUNCIA->set_to_attack(var000B, 0x0118);
			}
			var0009 = script ROTOLUNCIA {
				nohalt;
				actor frame standing;
				say "@Ex Ort Flam!@";
				actor frame strike_1h;
				continue;
				sfx 20;
				attack;
				actor frame standing;
				wait 2;
				call Func032E;
			};
			abort;
		}
		if (FILBERCIO->get_npc_id() == 0x0003) {
			FILBERCIO->set_npc_id(0x0004);
			UI_init_conversation();
			FRIGIDAZZI->show_npc_face0(0x0000);
			say("\"Welcome to thee. These cursed teleportation storms have made travel so difficult that we are becoming isolated! It hath disturbed everyone, but it is good to see a new face.\"");
			UI_end_conversation();
			var0009 = script FRIGIDAZZI {
				face north;
				actor frame bowing;
				actor frame sitting;
				wait 2;
				call Func032E;
			};
			abort;
		}
		if (FILBERCIO->get_npc_id() == 0x0002) {
			FILBERCIO->set_npc_id(0x0003);
			UI_init_conversation();
			ROTOLUNCIA->show_npc_face0(0x0000);
			say("\"Filbercio is never lacking in social graces, ",
				var0000,
				". Now if he only attended to the problems of Moonshade as he doth attend to his mistresses. Speaking of which...\"");
			FILBERCIO->show_npc_face1(0x0000);
			say("\"Ahem--! Also present, as my dinner companion, is the most charming Frigidazzi. She, too, is a Mage.\"");
			UI_end_conversation();
			Func09AF(ROTOLUNCIA, FRIGIDAZZI, 0x0004, Func032E);
			abort;
		}
		if (FILBERCIO->get_npc_id() == 0x0001) {
			FILBERCIO->set_npc_id(0x0002);
			UI_init_conversation();
			GUSTACIO->show_npc_face0(0x0000);
			say("\"Thou needest not worry, ",
				var0000,
				". We have brought thee here against thy will, but only that we may get to know thee. Thou art free to leave, once this dinner is concluded.\"");
			FILBERCIO->show_npc_face1(0x0000);
			say("\"Quite right, Gustacio... and here is Adept Rotoluncia, whom I believe thou hast met.\"");
			UI_end_conversation();
			Func09AF(GUSTACIO, ROTOLUNCIA, 0x0004, Func032E);
			abort;
		}
		if (FILBERCIO->get_npc_id() == 0x0000) {
			UI_play_music(0x001B, Func09A0(0x0005, 0x0001));
			FILBERCIO->set_npc_id(0x0001);
			FILBERCIO->set_item_flag(MET);
			var000F = AVATAR->find_nearby(0x010E, 0x002D, MASK_NONE);
			var0010 = AVATAR->find_nearby(0x01B0, 0x002D, MASK_NONE);
			for (var0013 in var000F with var0011 to var0012) {
				if (var0013->get_item_quality() == 0x00CF) {
					Func0907(var0013, 0x0000);
				}
			}
			for (var0013 in var0010 with var0014 to var0015) {
				if (var0013->get_item_quality() == 0x00CF) {
					Func0907(var0013, 0x0000);
				}
			}
			var0016 = UI_get_party_list();
			for (var000B in var0016 with var0017 to var0018) {
				var000B->set_schedule_type(FOLLOW_AVATAR);
			}
			UI_init_conversation();
			FILBERCIO->show_npc_face0(0x0000);
			say("\"Please be seated. We have been waiting for thee. I am the MageLord Filbercio.\"");
			say("\"Allow me to introduce the others. First, my fellow members on the Council of Mages. Adept Gustacio...\"");
			UI_end_conversation();
			Func09AF(FILBERCIO, GUSTACIO, 0x0002, Func032E);
			abort;
		}
		UI_init_conversation();
		POTHOS->show_npc_face0(0x0000);
		say("\"I beg thy pardon, MageLord Filbercio, but I have an urgent message for thee.\"");
		say("\"I regret to report that mine attempts to locate any significant quantity of the reagent Blood Moss have met with failure.\"");
		FILBERCIO->show_npc_face1(0x0000);
		say("\"Pothos! I should send thee to the dungeons and have the rats feed on thy carcass!\"");
		say("\"Dear guests, I am afraid that I shall have to adjourn this pleasant repast.\"");
		say("\"Pothos and I must speak privately concerning important matters of state. I thank thee all for coming!\"");
		gflags[POTHOS_RETURNED] = true;
		var0019 = [FILBERCIO, FRIGIDAZZI, GUSTACIO, POTHOS];
		for (var000B in var0019 with var001A to var001B) {
			var000B->revert_schedule();
		}
		var0019 = Func0988(GUSTACIO, var0019);
		for (var000B in var0019 with var001C to var001D) {
			var000A = var000B->get_object_position();
			UI_sprite_effect(ANIMATION_TELEPORT, var000A[0x0001], var000A[0x0002], 0x0000, 0x0000, 0x0000, LOOP_ONCE);
			var000B->remove_npc();
		}
		GUSTACIO->set_schedule_type(EAT_AT_INN);
		SERV_06->set_schedule_type(WAITER);
		UI_play_sound_effect(0x0082);
		FILBERCIO->set_new_schedules([MIDNIGHT, EARLY, MORNING, NOON, EVENING, NIGHT], [MAJOR_SIT, SLEEP, EAT_AT_INN, MAJOR_SIT, EAT_AT_INN, WANDER], [0x0926, 0x0726, 0x08F7, 0x071C, 0x090A, 0x0717, 0x08F7, 0x0737, 0x090A, 0x0717, 0x0918, 0x072F]);
		var001E = [0x08F3, 0x0779];
		var001F = [0x08E6, 0x0776];
		var0020 = [0x08C8, 0x0716];
		POTHOS->set_new_schedules([DAWN, MORNING, NIGHT], [EAT_AT_INN, PATROL, SLEEP], [var0020, var001E, var001F]);
		POTHOS->move_object([0x08F9, 0x0778, 0x0000]);
		POTHOS->run_schedule();
		var0016 = AVATAR->find_nearby(ANY_SHAPE, 0x002D, MASK_NPC);
		var0009 = Func098D();
		for (var000B in var0016 with var0021 to var0022) {
			if ((var000B->get_npc_id() == 0x000B) && (var000B->get_npc_number() in var0009)) {
				var000B->add_to_party();
			}
		}
		AVATAR->clear_item_flag(DONT_MOVE);
		gflags[FILBERCIO_BANQUET_WILL_HAPPEN] = false;
		FILBERCIO->set_npc_id(0x0000);
		abort;
	}
}

extern var Func0989 0x989 (var var0000, var var0001);
extern var Func0953 0x953 ();
extern void Func097F 0x97F (var var0000, var var0001, var var0002);
extern var Func09AB 0x9AB (var var0000, var var0001, var var0002, var var0003, var var0004);

void Func0334 shape#(0x334) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;
	var var0008;
	var var0009;
	var var000A;
	var var000B;
	var var000C;

	var0000 = item;
	var0001 = var0000->get_item_quality();
	if (event == EGG) {
		if (get_item_shape() != 0x0334) {
			var0000 = var0000->find_nearby(0x0334, 0x0005, MASK_ALL_UNSEEN);
			var0000 = Func0989(var0000, var0000);
			if (!var0000) {
				abort;
			}
		}
		var0001 = var0000->get_item_quality();
		var0002 = [];
		if (var0001 == 0x0007) {
			var0002 = [0x0258, 0x026F, 0x022D];
		}
		if (var0001 == 0x0008) {
			var0002 = 0x0273;
		}
		if (var0001 == 0x000A) {
			var0002 = 0x028E;
		}
		if (var0001 == 0x000B) {
			var0002 = [0x0284, 0x0285, 0x0286];
		}
		var0003 = false;
		for (var0006 in var0002 with var0004 to var0005) {
			if (var0000->find_nearby(var0006, 0x0005, MASK_ALL_UNSEEN)) {
				if (var0001 < 0x000B) {
					var0001 += 0x0001;
					var0007 = var0000->set_item_quality(var0001);
					UI_close_gumps();
					var0003 = true;
					break;
				}
				var0008 = var0000->get_object_position();
				var0008[0x0001] -= var0008[0x0003] / 0x0002;
				var0008[0x0002] -= var0008[0x0003] / 0x0002;
				UI_sprite_effect(ANIMATION_TELEPORT, var0008[0x0001], var0008[0x0002], 0x0000, 0x0000, 0x0000, LOOP_ONCE);
				UI_play_sound_effect(0x0039);
				var0000->remove_item();
				UI_close_gumps();
				abort;
			}
		}
		if (!var0003) {
			abort;
		}
	}
	var0009 = Func0953();
	if (var0001 == 0x0000) {
		var000A = ["po,\{dot}no", "plaques\{dot}here", "on\{dot}pain\{dot}of\{dot}d\{ea}\{th}"];
	} else if (var0001 == 0x0001) {
		var000A = ["choose"];
		// BUG: Invalid mask. Instead of FIND_ON_SCREEN, it should have
		// been MASK_NONE instead.
		var000B = find_nearby(0x010E, 0x0005, FIND_ON_SCREEN);
		var0007 = script var000B after 5 ticks {
			call Func010E;
		};
	} else if (var0001 == 0x0002) {
		var000A = ["wardrobe", "room"];
	} else if (var0001 == 0x0003) {
		var000A = ["wine", "room"];
	} else if (var0001 == 0x0014) {
		var000A = ["1"];
	} else if (var0001 == 0x0015) {
		var000A = ["2"];
	} else if (var0001 == 0x0016) {
		var000A = ["3"];
	} else if (var0001 == 0x0017) {
		var000A = ["4"];
	} else if (var0001 == 0x0018) {
		var000A = ["5"];
	} else if (var0001 == 0x0019) {
		var000A = ["6"];
	} else if (var0001 == 0x001A) {
		var000A = ["7"];
	} else if (var0001 == 0x001B) {
		var000A = ["Throw two up"];
	} else if (var0001 == 0x001C) {
		var000A = ["3 down gets 8"];
	} else if (var0001 == 0x001D) {
		var000A = ["\{th}e", "blue", "boar"];
	} else if (var0001 == 0x001E) {
		var000A = ["royal", "museum"];
	} else if (var0001 == 0x001F) {
		var000A = ["\{th}e", "music", "hall"];
	} else if (var0001 == 0x0020) {
		var000A = ["town", "hall"];
	} else if (var0001 == 0x0021) {
		var000A = ["royal", "mint"];
	} else if (var0001 == 0x0022) {
		var000A = ["4 down"];
	} else if (var0001 == 0x0023) {
		var000A = ["First & Last are even"];
	} else if (var0001 == 0x0024) {
		var000A = ["3 follows 4"];
	} else if (var0001 == 0x002E) {
		var000A = ["DO NOT", "ENTER"];
	} else if (var0001 == 0x0032) {
		var000A = ["in", "lovi\{ng}", "memory", "of", "mama"];
	} else if (var0001 == 0x0033) {
		var000A = ["BEWARE", "THE", "DRAGON"];
	} else if (var0001 == 0x0034) {
		var000A = ["for", "\{th}e", "love", "of", "marney"];
	} else if (var0001 == 0x0035) {
		var000A = ["\{dot}j\{dot}r\{dot}r\{dot}t\{dot}", "a\{dot}gr\{ea}t", "man", "a\{dot}gr\{ea}t", "writer"];
	} else if (var0001 == 0x003D) {
		var000A = ["beware!", "spirits", "prowl", "here!"];
	} else if (var0001 == 0x003E) {
		var000A = ["town", "hall"];
	} else if (var0001 == 0x003F) {
		var000A = ["provision", "shoppe"];
	} else if (var0001 == 0x0040) {
		var000A = ["archives"];
	} else if (var0001 == 0x0041) {
		var000A = ["goblin", "war", "drum"];
	} else if (var0001 == 0x0042) {
		var000A = ["goblin", "artifacts"];
	} else if (var0001 == 0x0043) {
		var000A = ["b\{ea}trix", "of\{dot}\{th}e", "broken", "h\{ea}rt"];
	} else if (var0001 == 0x0046) {
		var000A = ["sarah", "swift\{dot}of\{dot}blade", ",ro\{ng}\{dot}of\{dot}h\{ea}rt"];
	} else if (var0001 == 0x0047) {
		var000A = ["groat", "no\{dot}knight", "swifter", "\{th}an\{dot}he"];
	} else if (var0001 == 0x0048) {
		var000A = ["edmund", "archer", "par\{dot}excellence"];
	} else if (var0001 == 0x0049) {
		var000A = ["reynald", "valiant\{dot}and\{dot}glorious"];
	} else if (var0001 == 0x004A) {
		var000A = ["pedigar", ",re\{ng}\{th}", "and", "valor"];
	} else if (var0001 == 0x004B) {
		var000A = ["elena", "wor\{th}y", "of", "immortality"];
	} else if (var0001 == 0x004C) {
		var000A = ["caladin", "golden-to\{ng}ued", "knight"];
	} else if (var0001 == 0x004D) {
		var000A = ["terrence", "\{th}e", "pure"];
	} else if (var0001 == 0x004E) {
		var000A = ["randall", "intrepid", "and", "brave"];
	} else if (var0001 == 0x004F) {
		var000A = ["samuel", "\{th}ou\{dot}wert", "never", "matched"];
	} else if (var0001 == 0x0050) {
		var000A = ["kosric", "\{th}underbolts", "from", "above"];
	} else if (var0001 == 0x0051) {
		var000A = ["bryan", "his\{dot}skill", "knew\{dot}no\{dot}bounds"];
	} else if (var0001 == 0x0052) {
		var000A = ["goff", "renown", "and", "honor"];
	} else if (var0001 == 0x0053) {
		var000A = ["melina", "adept", "in\{dot}\{th}e", "art", "of", "war"];
	} else if (var0001 == 0x0054) {
		var000A = ["roland", "red\{ee}med", "\{th}e", "honor", "of\{dot}our", "land"];
	} else if (var0001 == 0x0055) {
		var000A = ["cellia's", "fine\{dot}furs"];
	} else if (var0001 == 0x0056) {
		var000A = ["li\{st}", "field"];
	} else if (var0001 == 0x0057) {
		var000A = ["lydia's", "tattoo\{dot}parlor"];
	} else if (var0001 == 0x0058) {
		var000A = ["crematorium"];
	} else if (var0001 == 0x0059) {
		var000A = ["armoury"];
	} else if (var0001 == 0x005A) {
		var000A = ["banquet\{dot}hall"];
	} else if (var0001 == 0x005B) {
		var000A = ["jail"];
	} else if (var0001 == 0x005C) {
		var000A = ["traini\{ng}\{dot}hall"];
	} else if (var0001 == 0x005F) {
		var000A = ["supply", "room"];
	} else if (var0001 == 0x0075) {
		var000A = ["enter", "\{th}y\{dot}name", "into\{dot}log\{dot}book"];
	} else if (var0001 == 0x0076) {
		var000A = ["enter\{dot}at", "\{th}ine\{dot}own", "risk"];
	} else if (var0001 == 0x0077) {
		var000A = ["warni\{ng}", "da\{ng}erous\{dot}b\{ea},", "wi\{th}in"];
	} else if (var0001 == 0x0078) {
		var000A = ["f\{ee}d", "b\{ea},", "daily"];
	} else if (var0001 == 0x0079) {
		var000A = ["pick", "one", "or", "die"];
	} else if (var0001 == 0x007A) {
		var000A = ["inmates", "mu\{st}", "work"];
	} else if (var0001 == 0x007B) {
		var000A = ["kn\{ee}l", "before", "\{th}e", "ma\{st}er"];
	} else if (var0001 == 0x007C) {
		var000A = ["do", "not", "di\{st}urb", "gamema\{st}ers"];
	} else if (var0001 == 0x007D) {
		var000A = ["ri\{ng}", "bell\{dot}for", "service"];
		var0007 = set_item_quality(0x007E);
	} else if (var0001 == 0x007E) {
		var000A = ["r\{ea}ch", "bell\{dot}for", "fr\{ee}dom"];
		var0007 = set_item_quality(0x007D);
	} else if (var0001 == 0x007F) {
		var000A = ["enter", "\{th}e", "flame"];
		var0007 = set_item_quality(0x0081);
	} else if (var0001 == 0x0080) {
		var000A = ["t\{ea}mwork", "insures", "liberty"];
	} else if (var0001 == 0x0081) {
		var000A = ["to", "end\{dot}\{th}y", "dr\{ea}m"];
		var0007 = set_item_quality(0x007F);
	} else if (var0001 == 0x0082) {
		var000A = ["room 1"];
	} else if (var0001 == 0x0083) {
		var000A = ["room 2"];
	} else if (var0001 == 0x0084) {
		var000A = ["room 3"];
	} else if (var0001 == 0x0085) {
		var000A = ["room 4"];
	} else if (var0001 == 0x0086) {
		var000A = ["room 5"];
	} else if (var0001 == 0x0087) {
		var000A = ["room 6"];
	} else if (var0001 == 0x0088) {
		var000A = ["room 7"];
	} else if (var0001 == 0x0089) {
		var000A = ["palace"];
	} else if (var0001 == 0x008A) {
		var000A = ["temple", "of", "b\{ea}uty"];
	} else if (var0001 == 0x008B) {
		var000A = ["royal", "gardens"];
	} else if (var0001 == 0x008C) {
		var000A = ["broken", "oar"];
	} else if (var0001 == 0x008D) {
		var000A = ["re\{st}house"];
	} else if (var0001 == 0x008E) {
		var000A = ["donations", "welcome"];
	} else if (var0001 == 0x008F) {
		var000A = ["magic", "wine"];
	} else if (var0001 == 0x009E) {
		var000A = ["gannt", "\{th}e\{dot}bard", "wanders\{dot}no\{dot}more"];
	} else if (var0001 == 0x009F) {
		var000A = ["gannt", "\{th}e\{dot}bard", "wanders\{dot}no\{dot}more"];
		UI_display_runes(0x002E, var000A);
		var0007 = set_item_quality(0x009E);
		Func097F(AVATAR, "@Stand back!@", 0x0002);
		Func097F(AVATAR, "@It dropped a scroll!@", 0x0014);
		var0008 = [0x0138, 0x07EF, 0x0000];
		UI_sprite_effect(ANIMATION_MEDIUM_BLAST, var0008[0x0001], var0008[0x0002], 0x0000, 0x0000, 0x0000, LOOP_ONCE);
		var0007 = Func09AB(0x031D, 0x0004, 0x0096, false, var0008);
		var0008 = get_object_position();
		var000C = UI_create_new_object2(0x0151, [(var0008[0x0001] + 0x0001), (var0008[0x0002] + 0x0001), 0x0002]);
		var000C->set_schedule_type(SHY);
		UI_play_sound_effect(0x003A);
		abort;
	}
	UI_display_runes(0x002E, var000A);
}

extern void Func0971 0x971 (var var0000);
extern void Func0949 0x949 (var var0000);

void Func0336 shape#(0x336) () {
	var var0000;
	var var0001;
	var var0002;

	if (event == DOUBLECLICK) {
		var0000 = get_item_frame();
		if (var0000 == 0x0000) {
			var0001 = UI_click_on_item();
			var0002 = var0001->get_item_shape();
			if (var0002 == 0x02DA) {
				set_item_frame(0x0001);
			} else if (var0001->get_item_shape() == 0x0336) {
				if (var0001->get_item_frame() == 0x0002) {
					Func0971(item);
				}
			} else {
				Func0949("@Those are for infants.@");
			}
		}
		if (var0000 == 0x0001) {
			var0001 = UI_click_on_item();
			if (var0001->is_npc()) {
				var0001->set_schedule_type(IN_COMBAT);
				var0001->set_attack_mode(FLEE);
				var0001->set_oppressor(AVATAR);
				Func0971(item);
			} else if (var0001->get_item_shape() == 0x0336) {
				if (var0001->get_item_frame() == 0x0002) {
					Func0971(item);
				}
			}
		}
		if (var0000 == 0x0002) {
			Func0949("@That is for dirty diapers.@");
		}
	}
}

extern var Func0992 0x992 (var var0000, var var0001, var var0002, var var0003);
extern void Func0949 0x949 (var var0000);

void Func0337 shape#(0x337) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;

	if (event == DOUBLECLICK) {
		var0000 = get_item_frame();
		if (var0000 < 0x0002) {
			var0001 = Func0992(IOLO, "@Thou art painting with thy fingers again?@", 0x0000, false);
		} else {
			var0002 = UI_click_on_item();
			var0003 = var0002->get_item_shape();
			if (var0003 == 0x0337) {
				if (var0002->get_item_frame() < 0x0002) {
					var0002 = UI_click_on_item();
					if (var0002->get_item_shape() == 0x0345) {
						var0004 = var0002->get_item_frame() % 0x0008;
						var0005 = UI_die_roll(0x0001, 0x000A);
						if (var0005 == 0x0001) {
							var0006 = "@That is quite good!@";
						}
						if (var0005 == 0x0002) {
							var0006 = "@Do not change thine occupation for a painter.@";
						}
						if (var0005 == 0x0003) {
							var0006 = "@I can almost not" & "see the numbers.@";
						}
						if (var0005 == 0x0004) {
							var0006 = "@Thou shouldst stay within the lines.@";
						}
						if (var0005 == 0x0005) {
							var0006 = "@What is it?@";
						}
						var0001 = Func0992(IOLO, var0006, 0x0000, false);
						if (var0004 < 0x0007) {
							var0002->set_item_frame(var0002->get_item_frame() + 0x0001);
						}
					} else if (var0002->is_npc()) {
						var0001 = Func0992(IOLO, "@Tattooing?@", 0x0000, true);
					} else {
						var0001 = Func0992(IOLO, "@The stain will never come out.@", 0x0000, false);
					}
				}
			} else {
				Func0949("@Thou must use pigments!@");
			}
		}
	}
}

extern var Func090C 0x90C (var var0000, var var0001);

void Func0339 shape#(0x339) () {
	var var0000;
	var var0001;

	if (event == PATH_SUCCESS) {
		var0000 = Func090C(AVATAR, item);
		var0001 = script AVATAR {
			face var0000;
			continue;
			actor frame strike_2h;
			actor frame standing;
		};
		set_item_frame(0x0000);
	}
}

extern void Func094A 0x94A (var var0000);
extern void Func0949 0x949 (var var0000);
extern var Func0983 0x983 (var var0000);
extern void Func0971 0x971 (var var0000);

void Func033B shape#(0x33B) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;

	if (event == DOUBLECLICK) {
		var0000 = UI_click_on_item();
		if (var0000->is_npc()) {
			var0001 = var0000->get_npc_prop(STRENGTH);
			var0002 = var0000->get_npc_prop(HEALTH);
			if (var0002 == var0001) {
				Func094A("@It doth not appear that a bandage is needed.@");
			} else {
				if (var0000->get_npc_number() == AVATAR) {
					Func0949("@Much better.@");
				} else if (Func0983(var0000)) {
					var0003 = UI_die_roll(0x0001, 0x0003);
					if (var0003 == 0x0001) {
						var0000->item_say("@Ah, much better!@");
					}
					if (var0003 == 0x0002) {
						var0000->item_say("@Thank thee!@");
					}
					if (var0003 == 0x0003) {
						var0000->item_say("@That looks better.@");
					}
				}
				var0003 = UI_die_roll(0x0001, 0x0004);
				if ((var0002 + var0003) > var0001) {
					var0003 = var0001 - var0002;
				}
				var0003 = var0000->set_npc_prop(HEALTH, var0003);
				Func0971(item);
			}
		} else {
			Func0949("@Do not soil the bandages.@");
		}
	}
}

extern var Func090A 0x90A (var var0000);

void Func033C shape#(0x33C) () {
	var var0000;

	if ((event != DOUBLECLICK) && (event != SCRIPTED)) {
		return;
	}
	if (get_item_quality() == 0x0000) {
		var0000 = Func090A(item);
	}
}

extern void Func090D 0x90D (var var0000, var var0001, var var0002, var var0003, var var0004, var var0005, var var0006);
extern var Func0953 0x953 ();
extern var Func09A0 0x9A0 (var var0000, var var0001);
extern var Func089C 0x89C (var var0000, var var0001);
extern void Func070A object#(0x70A) ();

void Func033D shape#(0x33D) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;
	var var0008;
	var var0009;
	var var000A;
	var var000B;
	var var000C;
	var var000D;
	var var000E;

	if (event == SCRIPTED) {
		if ((!gflags[TEMP_FLAG_1]) && ((!gflags[TEMP_FLAG_2]) && ((!gflags[TEMP_FLAG_3]) && (!gflags[TEMP_FLAG_4])))) {
			Func090D(item, 0, 0, -1, Func033D, item, PATH_SUCCESS);
		}
		if (gflags[TEMP_FLAG_1]) {
			var0000 = Func0953();
			AVATAR->set_item_flag(DONT_MOVE);
			UI_end_conversation();
			var0001 = ("@" + var0000) + ", I am afraid.@";
			PETRA->item_say(var0001);
			var0002 = AVATAR->direction_from(PETRA);
			var0003 = PETRA->direction_from(AVATAR);
			AVATAR->halt_scheduled();
			var0004 = script AVATAR after 14 ticks {
				nohalt;
				say "@Don't worry,@";
				wait 14;
				call Func033D;
			};
			gflags[TEMP_FLAG_1] = false;
			gflags[TEMP_FLAG_2] = true;
			return;
		}
		if (gflags[TEMP_FLAG_2]) {
			AVATAR->halt_scheduled();
			var0004 = script AVATAR {
				nohalt;
				say "@Everything should@";
				wait 12;
				call Func033D;
			};
			gflags[TEMP_FLAG_2] = false;
			gflags[TEMP_FLAG_3] = true;
			return;
		}
		if (gflags[TEMP_FLAG_3]) {
			AVATAR->halt_scheduled();
			PETRA->halt_scheduled();
			PETRA->set_polymorph(0x014E);
			PETRA->set_schedule_type(WAIT);
			AVATAR->set_item_flag(ISPETRA);
			var0005 = PETRA->get_object_position();
			var0006 = AVATAR->get_object_position();
			var0002 = AVATAR->direction_from(PETRA);
			var0003 = PETRA->direction_from(AVATAR);
			var0004 = script AVATAR {
				nohalt;
				say "@...be fine...@";
			};
			var0004 = script PETRA {
				nohalt;
				wait 4;
				call Func033D;
			};
			var0007 = PETRA->get_object_position();
			UI_sprite_effect(ANIMATION_LIGHTNING_GREEN, var0007[0x0001], var0007[0x0002], 0x0000, 0x0000, 0x0001, LOOP_ONCE);
			UI_play_sound_effect(0x0074);
			UI_lightning();
			UI_play_music(0x0035, 0x0000);
			var0008 = Func09A0(0x0001, 0x0001);
			var0004 = var0008->set_item_quality(0x0001);
			gflags[TEMP_FLAG_3] = false;
			gflags[TEMP_FLAG_4] = true;
			return;
		}
		if (gflags[TEMP_FLAG_4]) {
			AVATAR->halt_scheduled();
			PETRA->halt_scheduled();
			var0008 = Func09A0(0x0001, 0x0001);
			var0009 = var0008->get_item_quality();
			var000A = UI_is_pc_female();
			var000B = UI_get_skin_colour();
			if (var0009 == 0x0001) {
				var0004 = script AVATAR after 12 ticks {
					nohalt;
					call Func033D;
				};
			} else {
				var0007 = get_object_position();
				var000C = UI_die_roll(0x0001, 0x0002);
				if (UI_die_roll(0x0000, 0x0001)) {
					UI_sprite_effect(ANIMATION_LIGHTNING_GREEN, var0007[0x0001], var0007[0x0002], 0x0000, 0x0000, var000C, LOOP_ONCE);
				} else {
					UI_sprite_effect(ANIMATION_LIGHTNING_GREEN, var0007[0x0001], var0007[0x0002], 0x0000, 0x0000, var000C, LOOP_ONCE2);
				}
				UI_lightning();
				UI_play_sound_effect(0x0074);
			}
			if (var0009 == 0x0002) {
				if (var000B == BLONDE_AVATAR) {
					AVATAR->set_polymorph(Func089C(LATINO_AVATAR, 0x0000));
				} else {
					AVATAR->set_polymorph(Func089C(BLONDE_AVATAR, 0x0000));
				}
				var0004 = script PETRA after 5 ticks {
					nohalt;
					call Func033D;
				};
			}
			if (var0009 == 0x0003) {
				PETRA->set_polymorph(0x0292);
				var0004 = script AVATAR after 4 ticks {
					nohalt;
					call Func033D;
				};
			}
			if (var0009 == 0x0004) {
				AVATAR->set_polymorph(Func089C(var000B, var000A));
				var0004 = script PETRA after 4 ticks {
					nohalt;
					call Func033D;
				};
			}
			if (var0009 == 0x0005) {
				PETRA->set_polymorph(Func089C(var000B, var000A));
				var0004 = script PETRA after 4 ticks {
					nohalt;
					call Func033D;
				};
			}
			if (var0009 == 0x0006) {
				if (var000B == BLONDE_AVATAR) {
					PETRA->set_polymorph(Func089C(BLACK_AVATAR, 0x0001));
				} else {
					PETRA->set_polymorph(Func089C(BLONDE_AVATAR, 0x0001));
				}
				var0004 = script PETRA after 4 ticks {
					nohalt;
					call Func033D;
				};
			}
			if (var0009 == 0x0007) {
				if (var000B == LATINO_AVATAR) {
					PETRA->set_polymorph(Func089C(BLACK_AVATAR, 0x0001));
				} else {
					PETRA->set_polymorph(Func089C(LATINO_AVATAR, 0x0001));
				}
				var0004 = script AVATAR after 3 ticks {
					nohalt;
					call Func033D;
				};
				var0007 = AVATAR->get_object_position();
				var000C = UI_die_roll(0x0000, 0x0003);
				UI_sprite_effect(ANIMATION_LIGHTNING_GREEN, var0007[0x0001], var0007[0x0002], 0x0000, 0x0000, var000C, 0x0001);
				if (var000B == LATINO_AVATAR) {
					AVATAR->set_polymorph(Func089C(BLACK_AVATAR, 0x0000));
				} else {
					AVATAR->set_polymorph(Func089C(LATINO_AVATAR, 0x0000));
				}
			}
			if (var0009 == 0x0008) {
				AVATAR->set_polymorph(Func089C(var000B, var000A));
				var0004 = script PETRA after 2 ticks {
					nohalt;
					call Func033D;
				};
			}
			if (var0009 == 0x0009) {
				PETRA->set_polymorph(0x014E);
				var0004 = script PETRA after 2 ticks {
					nohalt;
					call Func033D;
				};
			}
			if (var0009 == 0x000A) {
				PETRA->set_polymorph(Func089C(var000B, 0x0001));
				var0004 = script PETRA after 2 ticks {
					nohalt;
					call Func033D;
				};
				AVATAR->set_polymorph(0x02EB);
				var0007 = AVATAR->get_object_position();
				var000C = UI_die_roll(0x0000, 0x0003);
				UI_sprite_effect(ANIMATION_LIGHTNING_GREEN, var0007[0x0001], var0007[0x0002], 0x0000, 0x0000, var000C, 0x0001);
			}
			if (var0009 == 0x000B) {
				PETRA->set_polymorph(0x0292);
				var0004 = script AVATAR after 1 ticks {
					nohalt;
					call Func033D;
				};
			}
			if (var0009 == 0x000C) {
				AVATAR->set_polymorph(0x014E);
				var0004 = script AVATAR after 1 ticks {
					nohalt;
					call Func033D;
				};
			}
			if (var0009 == 0x000D) {
				AVATAR->set_polymorph(Func089C(var000B, var000A));
				var0004 = script PETRA {
					nohalt;
					call Func033D;
				};
			}
			if (var0009 == 0x000E) {
				PETRA->set_polymorph(0x02D1);
				var0004 = script AVATAR {
					nohalt;
					call Func033D;
				};
			}
			if (var0009 == 0x000F) {
				var0004 = script var0008 after 1000 ticks {
					call Func070A;
				};
				AVATAR->set_polymorph(0x0292);
				AVATAR->clear_item_flag(DONT_MOVE);
				UI_init_conversation();
				PETRA->set_item_flag(SI_TOURNAMENT);
				gflags[TEMP_FLAG_4] = false;
				if (!var000A) {
					gflags[AVATAR_WAS_MALE] = true;
					var0004 = PETRA->set_npc_prop(SEX_FLAG, 0);
					var0004 = AVATAR->set_npc_prop(SEX_FLAG, 1);
				}
				UI_play_music(0x0040, 0x0000);
				return;
			}
			var0004 = var0008->set_item_quality(var0009 + 0x0001);
		}
	}
	if (event == PATH_SUCCESS) {
		var000D = AVATAR->direction_from(PETRA);
		var000E = PETRA->direction_from(AVATAR);
		gflags[TEMP_FLAG_1] = true;
		var0004 = script AVATAR {
			face var000D;
			call Func033D;
		};
		var0004 = script PETRA {
			face var000E;
		};
	}
}

extern var Func0953 0x953 ();
extern var Func0992 0x992 (var var0000, var var0001, var var0002, var var0003);

void Func0345 shape#(0x345) () {
	var var0000;
	var var0001;

	if (event == DOUBLECLICK) {
		var0000 = ("@Thou shouldst use the brush and pigments, " + Func0953()) + ".@";
		var0001 = Func0992(IOLO, var0000, 0x0000, true);
	}
}

extern var Func0942 0x942 (var var0000);
extern void Func090D 0x90D (var var0000, var var0001, var var0002, var var0003, var var0004, var var0005, var var0006);
extern void Func097F 0x97F (var var0000, var var0001, var var0002);

void Func0346 shape#(0x346) () {
	var var0000;
	var var0001;

	UI_close_gumps();
	if (get_item_frame() == 0x0000) {
		if (Func0942(ALE)) {
			if (AVATAR->get_distance(ALE) < 0x0003) {
				var0000 = set_last_created();
				var0001 = ALE->get_object_position();
				var0000 = UI_update_last_created(var0001);
				set_item_frame(0x0001);
				ALE->remove_npc();
			} else {
				var0000 = set_last_created();
				var0000 = AVATAR->give_last_created();
				ALE->set_schedule_type(STANDTHERE);
				Func090D(ALE, -1, -1, -3, Func0346, item, DOUBLECLICK);
			}
		} else {
			Func097F(AVATAR, "@Ale? Where art thou?@", 0x0000);
		}
	} else {
		set_item_frame(0x0000);
		var0001 = get_object_position();
		var0001[0x0001] -= 0x0001;
		var0001[0x0002] -= 0x0001;
		ALE->move_object([var0001[0x0001], var0001[0x0002], 0x0000]);
		ALE->set_new_schedules(MIDNIGHT, GRAZE, [var0001[0x0001], var0001[0x0002]]);
		ALE->run_schedule();
	}
}

extern var Func08F8 0x8F8 (var var0000, var var0001, var var0002);
extern var Func08FC 0x8FC ();
extern void Func07D2 object#(0x7D2) ();
extern var Func09A0 0x9A0 (var var0000, var var0001);

void Func0347 shape#(0x347) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;
	var var0008;
	var var0009;

	if (event == DOUBLECLICK) {
		var0000 = get_item_frame();
		if (var0000 == 0x0001) {
			var0001 = get_object_position();
			if (Func08F8(var0001, [0x0910, 0x0170], [0x093F, 0x019F])) {
				UI_close_gumps();
				UI_play_sound_effect(0x0030);
				obj_sprite_effect(ANIMATION_POOF, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, LOOP_ONCE);
				abort;
			}
			var0002 = true;
			var0003 = AVATAR->find_nearby(SHAPE_ANY, 0x000A, MASK_NPC);
			for (var0006 in var0003 with var0004 to var0005) {
				var0007 = var0006->get_schedule_type();
				if (var0007 == IN_COMBAT) {
					var0002 = false;
				}
			}
			if (var0002) {
				if (Func08FC()) {
					var0008 = AVATAR->get_object_position();
					THOXA->move_object(var0008);
					THOXA->Func07D2();
					THOXA->set_schedule_type(TALK);
					THOXA->obj_sprite_effect(ANIMATION_TELEPORT, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, LOOP_ONCE);
					UI_play_sound_effect(0x0051);
					var0009 = Func09A0(0x0002, 0x0001);
					if (var0009) {
						UI_play_music(0x003F, var0009);
					}
					UI_close_gumps();
				} else {
					UI_play_sound_effect(0x000E);
					obj_sprite_effect(ANIMATION_GREEN_BUBBLES, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, LOOP_ONCE);
				}
			} else {
				UI_play_sound_effect(0x0030);
				obj_sprite_effect(ANIMATION_POOF, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, LOOP_ONCE);
			}
		}
	}
}

extern void Func08AD 0x8AD (var var0000, var var0001, var var0002, var var0003);
extern void Func0971 0x971 (var var0000);

void Func034A shape#(0x34A) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;

	if (get_item_frame() == 0x0004) {
		var0000 = UI_click_on_item();
		Func08AD(item, 0x0002, 0x0026, var0000);
	}
	if (get_item_frame() == 0x000F) {
		var0000 = UI_click_on_item();
		if ((var0000->get_item_shape() == 0x032A) && (var0000->get_item_frame() == 0x0002)) {
			var0000->set_item_frame(0x0000);
			set_item_frame(0x0008);
			UI_play_sound_effect(0x0021);
			obj_sprite_effect(ANIMATION_PURPLE_BUBBLES, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, LOOP_ONCE);
		}
	}
	if (get_item_frame() == 0x000E) {
		var0001 = UI_click_on_item();
		if (var0001[0x0001] == AVATAR->get_npc_object()) {
			return;
		}
		if ((var0001[0x0001]->get_item_shape() == 0x0379) && ((var0001[0x0001]->get_item_frame() == 0x0000) || ((var0001[0x0001]->get_item_frame() == 0x0001) || ((var0001[0x0001]->get_item_frame() == 0x0004) || (var0001[0x0001]->get_item_frame() == 0x0005))))) {
			Func0971(item);
			var0001[0x0001]->set_item_shape(0x020E);
			var0002 = var0001[0x0001]->find_nearby(0x0211, 0x0028, MASK_NONE);
			for (var0005 in var0002 with var0003 to var0004) {
				var0005->kill_npc();
			}
		}
	}
}

extern var Func090B 0x90B (var var0000);

void Func034D shape#(0x34D) () {
	var var0000;

	if ((event != DOUBLECLICK) && (event != SCRIPTED)) {
		return;
	}
	if (get_item_quality() == 0x0000) {
		var0000 = Func090B(item);
	}
}

extern void Func094A 0x94A (var var0000);

void Func0353 shape#(0x353) () {
	var var0000;

	if (event == DOUBLECLICK) {
		var0000 = "@That appears to be very fine cloth." + "Perhaps thou couldst cut it into bandages with shears.@";
		Func094A(var0000);
	}
}

extern var Func09A0 0x9A0 (var var0000, var var0001);
extern var Func0955 0x955 ();
extern var Func099B 0x99B (var var0000, var var0001, var var0002, var var0003, var var0004, var var0005, var var0006);
extern void Func097F 0x97F (var var0000, var var0001, var var0002);

void Func0355 shape#(0x355) () {
	var var0000;
	var var0001;
	var var0002;

	if (event == SCRIPTED) {
		var0000 = get_object_position();
		if (get_npc_id() == 0x000F) {
			var0001 = UI_create_new_object(0x037F);
			if (var0001) {
				var0002 = UI_update_last_created(var0000);
			}
			remove_item();
			AVATAR->clear_item_flag(DONT_MOVE);
			UI_init_conversation();
			abort;
		}
		UI_sprite_effect(ANIMATION_DEATH_VORTEX, (var0000[0x0001] + get_npc_id()), (var0000[0x0002] - get_npc_id()), 0x0000, 0x0000, 0x0000, LOOP_ONCE);
		set_npc_id(get_npc_id() + 0x0001);
		var0002 = script item {
			nohalt;
			call Func0355;
		};
		abort;
	}
	UI_play_music(0x0035, Func09A0(0x0005, 0x0001));
	PIBB->show_npc_face0(0x0000);
	say("\"Who dares to disturb the restless repose of the Hierophant of Chaos!\"");
	say("\"Wait -- I know thee! The Void hath whispered to me of thy coming, Hero from a Distant Land. But dost thou dare to hear the answers to thy questions?\"");
	gflags[TALKED_TO_CHAOS_HIEROPHANT] = true;
	converse (["restless repose", "whispers from the Void", "questions", "bye"]) {
		case "restless repose" (remove):
			say("\"Did not faithful Sethys tell thee of my fate? I was slain on this very spot centuries ago, at the hands of the Soldiers of Order.\"");
			say("\"My spirit hath lingered here, for my final duties remain unfinished...\"");
			say("\"Once I have passed my knowledge to thee, I shall be free to ascend to the Void. However, my soul shall not have rest until the Chaos Serpent is restored.\"");
			fallthrough;

		case "whispers from the Void" (remove):
			say("\"Do not toy with me, Hero! Though our purposes may be the same, our philosophies are not -- I know thee to be no friend of Chaos!\"");
			say("\"Yet we both can sense the messages from the Void Between the Worlds. The wisdom of the Great Earth Serpent...\"");
			say("\"We thought him dead, or deposed, yet he again speaks to Men -- though his power is a pale imitation of his former glory.\"");
			fallthrough;

		case "change subject":
			UI_pop_answers();
			say("\"Must we? Very well...\"");
			fallthrough;

		case "nothing more":
			UI_pop_answers();
			say("\"If thou art certain...\"");
			fallthrough;

		case "questions" (remove):
			say("\"I know what thou dost seek, Hero, and I am opposed to it. Chaos must reign supreme, and not be unequally yoked to Order in the prison known as Balance!\"");
			say("\"Yet even servitude would be better than the damnation that Chaos now endures, with its Forces driven apart and broken.\"");
			say("\"Listen carefully -- I shall give thee mine aid this one time, but we must be enemies ever afterward!\"");
			UI_push_answers();
			add(["aid", "damnation", "change subject"]);
			fallthrough;

		case "damnation" (remove):
			say("\"Behold the mystery of Balance! When Order struck down the Serpent of Chaos, the act undid the tapestry of Balance.\"");
			say("\"Thus, both Chaos and Order were doomed!\"");
			say("\"When the Serpent was broken, the three Forces of Chaos were driven to insanity -- but so was the Order Serpent...\"");
			add(["Forces of Chaos", "Order Serpent"]);
			fallthrough;

		case "Forces of Chaos" (remove):
			say("\"The Forces of Chaos -- the sacred embodiment of the philosophies of Chaos -- were corrupted, and became the Banes which thou hast fought against!\"");
			say("\"Didst thou suppose the Banes to be innately evil? False supposition!\"");
			say("\"The Banes are only insane because of the Imbalance. Restore Balance, and they shall be healed!\"");
			fallthrough;

		case "Order Serpent" (remove):
			say("\"The Serpent of Order thought itself victorious in the War of Imbalance, but the act of destroying the Chaos Serpent brought despair!\"");
			say("\"With the Great Earth Serpent lost, and the Chaos Serpent struck down, only the Order Serpent remains to rule in the Void.\"");
			say("\"Yet due to the Imbalance, the Serpent of Order hath lost its mind! It floats mindlessly in the Void, able to coalesce a thought with only the most supreme effort!\"");
			fallthrough;

		case "aid" (remove):
			say("\"I shall now tell thee the way to restore the Serpent of Chaos. Until thou dost do this, Balance cannot be restored.\"");
			say("\"I have no love for Balance, but I also know that Chaos cannot reign in Imbalance...\"");
			say("\"Ask me these things: where thou must go, what thou must bring, and the rite thou must perform.\"");
			UI_push_answers();
			add(["where I must go", "what I must bring", "the rite", "nothing more"]);
			fallthrough;

		case "where I must go" (remove):
			say("\"The Shrine of Chaos doth lie within the heart of the Skullcrusher Mountains. I know that thou hast been in this dungeon, but hast thou found the secret passageways?\"");
			say("\"I see a shadow of a vision -- a mighty detonation, shattering the great bronze doors. Is this of the future, or hast thou done this in the past?\"");
			say("\"The rite is to be performed in the most sacred precincts of the Shrine, before the Wall of Lights.\"");
			fallthrough;

		case "what I must bring" (remove):
			say("\"The rite cannot succeed unless thou dost bring the Serpent of Blackrock, to open the Wall of Lights and admit the energy from the Void.\"");
			say("\"Any of the three Serpents shall do, though the Serpent of Chaos would be most appropriate.\"");
			say("\"Thou must also bring the Banes, imprisoned within the Prisms which thou hast fashioned.\"");
			fallthrough;

		case "the rite" (remove):
			say("\"Thou must begin by opening the Wall of Lights, for this provides the energy source which the Rite requires. This is done by placing the Serpent of Blackrock in the stone slot on the floor.\"");
			say("\"Next, thou must place the Banes upon the altars of Chaos. Thou must place each Bane upon the altar which is dedicated to its native Force!\"");
			say("\"When thou hast placed each correctly, a flame of Chaos shall appear as thy sign.\"");
			say("\"The time is now right to restore the Serpent of Chaos to completeness. Recite this mantra...\"");
			say("\"In pri kli ort ailem, Priin ort inten mani!\"");
			fallthrough;

		case "bye":
			say("\"Wait, Hero -- I can only speak with thee this once! Dost thou understand all that I have said?\"");
			if (!Func0955()) {
				say("\"Then ask of me again, and I shall explain once more.\"");
				UI_clear_answers();
				add(["restless repose", "whispers from the Void", "questions", "bye"]);
			} else {
				say("\"I disbelieve thee, mortal. Take this scroll. It shall bring our conversation to thy remembrance, in thine hour of need.\"");
				var0002 = Func099B(AVATAR, 0x0001, 0x02C3, 0x0063, 0x0000, 0x0000, true);
				say("\"I must confess, Avatar, that there is a mystery which even I cannot explain.\"");
				say("\"The Rite cannot succeed without an allied force strong enough to weld the Banes together into the Serpent. It is a greater task to restore than to destroy.\"");
				say("\"Seek the answer to this mystery, or thou shalt not succeed! Now, I must go...\"");
				UI_remove_npc_face0();
				UI_play_music(0x0035, Func09A0(0x0005, 0x0001));
				set_schedule_type(WAIT);
				Func097F(AVATAR, "@Many thanks!@", 0x0000);
				AVATAR->set_item_flag(DONT_MOVE);
				UI_end_conversation();
				set_schedule_type(WAIT);
				var0002 = script item {
					nohalt;
					actor frame cast_up;
					actor frame cast_out;
					say "@Into the Void!@";
					call Func0355;
				};
				abort;
			}

	}
}

extern void Func097F 0x97F (var var0000, var var0001, var var0002);
extern var Func0992 0x992 (var var0000, var var0001, var var0002, var var0003);

void Func0357 shape#(0x357) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;
	var var0008;
	var var0009;
	var var000A;
	var var000B;
	var var000C;
	var var000D;

	var0000 = get_item_quality();
	var0001 = get_item_frame();
	var0002 = false;
	if (!gflags[PRESSED_ORACLE_SWITCH1]) {
		var0003 = AVATAR->get_object_position();
		UI_sprite_effect(ANIMATION_SMALL_BLAST, (var0003[0x0001] - 0x0001), (var0003[0x0002] - 0x0003), 0x0000, 0x0000, 0x0000, LOOP_ONCE);
		UI_lightning();
		var0004 = UI_get_random(0x0002);
		AVATAR->reduce_health(var0004, SONIC_DAMAGE);
		var0005 = "@Yow!@" & ("@Ouch!@" & ("@That hurt!@" & ("@Ugh...@" & ("@Damn!@" & "@Yikes!@"))));
		var0002 = var0005[UI_get_random(UI_get_array_size(var0005))];
		Func097F(AVATAR, var0002, 0x0001);
	}
	if (var0000 == 0x000B) {
		if (gflags[PRESSED_ORACLE_SWITCH2]) {
			if (gflags[PRESSED_ORACLE_SWITCH1]) {
				gflags[PRESSED_ORACLE_SWITCH1] = false;
			} else {
				gflags[PRESSED_ORACLE_SWITCH1] = true;
			}
			var0002 = true;
		} else {
			AVATAR->item_say("@'Tis jammed.@");
			var0002 = false;
		}
	}
	if (var0000 == 0x000F) {
		if (gflags[PRESSED_ORACLE_SWITCH2]) {
			if (gflags[PRESSED_ORACLE_SPEAK_SWITCH]) {
				gflags[PRESSED_ORACLE_SPEAK_SWITCH] = false;
			} else {
				gflags[PRESSED_ORACLE_SPEAK_SWITCH] = true;
				var0006 = find_nearby(0x00F9, 0x001E, MASK_NONE);
				for (var0009 in var0006 with var0007 to var0008) {
					if (var0009->get_item_frame() == 0x0001) {
						var0002 = script var0009 {
							nohalt;
							say "@Yes, Master?@";
						};
						var000A = Func0992(0x0001, 0x0000, 0x0000, true);
						Func097F(var000A, "@The Oracle speaks!@", 0x0003);
						var0002 = script var0009 after 10 ticks {
							nohalt;
							call Func00F9;
						};
					}
				}
			}
			var0002 = true;
		} else {
			var0002 = false;
			AVATAR->item_say("@'Tis jammed.@");
		}
	}
	if (var0000 == 0x000D) {
		if (gflags[PRESSED_ORACLE_SWITCH2]) {
			gflags[PRESSED_ORACLE_SWITCH2] = false;
		} else {
			gflags[PRESSED_ORACLE_SWITCH2] = true;
		}
		var0002 = true;
	}
	if (var0000 == 0x000C) {
		if (gflags[PRESSED_ORACLE_SWITCH2]) {
			var000B = find_nearby(0x00C8, 0x000F, MASK_EGG);
			if (var000B) {
				var0002 = true;
				if (var0001) {
					var000B->remove_item();
				} else {
					var0002 = script var000B {
						nohalt;
						setegg avatar_near, 5;
					};
					var000A = Func0992(0x0001, "@Watch out!@", "@Whoops...@", true);
				}
			} else {
				var0002 = false;
				AVATAR->item_say("@'Tis jammed.@");
			}
		} else {
			var0002 = false;
			AVATAR->item_say("@'Tis jammed.@");
		}
	}
	if (var0000 == 0x000E) {
		if (gflags[PRESSED_ORACLE_SWITCH2]) {
			var0002 = true;
			if (!var0001) {
				gflags[PRESSED_EARTHQUAKE_SWITCH] = true;
				UI_earthquake(0x0002);
				var0006 = find_nearby(0x00F9, 0x001E, MASK_NONE);
				for (var0009 in var0006 with var000C to var000D) {
					if (var0009->get_item_frame() == 0x0001) {
						var0002 = script var0009 {
							nohalt;
							say "@Oh!@";
							wait 15;
							say "@Please, Master...@";
							wait 15;
							say "@Stop!@";
						};
					}
				}
				var000A = Func0992(0x0001, "@I hear something...@", "@What was that?@", true);
			}
		} else {
			var0002 = false;
			AVATAR->item_say("@'Tis jammed.@");
		}
	}
	if (var0002) {
		if ((var0001 % 0x0002) == 0x0000) {
			set_item_frame(var0001 + 0x0001);
		} else {
			set_item_frame(var0001 - 0x0001);
		}
		UI_play_sound_effect2(0x0046, item);
	} else {
		UI_flash_mouse(CURSOR_HAND);
	}
}

extern void Func094A 0x94A (var var0000);
extern void Func097F 0x97F (var var0000, var var0001, var var0002);
extern void Func0949 0x949 (var var0000);

void Func035F shape#(0x35F) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;
	var var0008;
	var var0009;
	var var000A;
	var var000B;
	var var000C;

	if (event == DOUBLECLICK) {
		var0000 = get_item_frame();
		if (var0000 == 0x0000) {
			var0001 = UI_click_on_item();
			var0002 = var0001->get_object_position();
			var0003 = var0001->get_item_shape();
			var0004 = -1;
			if (var0003 == 0x03FA) {
				var0004 = var0002[0x0001] - UI_die_roll(0x0000, 0x0003);
				var0005 = var0002[0x0002];
				var0006 = var0002[0x0003] + 0x0002;
			}
			if (var0003 == 0x03EB) {
				var0004 = var0002[0x0001];
				var0005 = var0002[0x0002] - UI_die_roll(0x0000, 0x0002);
				var0006 = var0002[0x0003] + 0x0002;
			}
			if (var0004 == -1) {
				Func094A("@Do not pour flour on that!@");
			} else {
				var0007 = UI_create_new_object(0x035F);
				if (var0007) {
					var0007->set_item_flag(TEMPORARY);
					var0007->set_item_frame(0x0010);
					var0008 = UI_update_last_created([var0004, var0005, var0006]);
				}
			}
		}
		if ((var0000 == 0x0008) || (var0000 == 0x0009)) {
			var0001 = UI_click_on_item();
			if (var0001->get_item_shape() == 0x035F) {
				if (var0001->get_item_frame() == 0x0012) {
					var0001->set_item_frame(0x0011);
				}
			} else {
				Func097F(var0001, "@Zounds! That did hurt!@", 0x0000);
			}
		}
		if ((var0000 == 0x000D) || (var0000 == 0x000E)) {
			set_item_frame(0x0000);
		}
		if ((var0000 == 0x0011) || (var0000 == 0x0012)) {
			var0001 = UI_click_on_item();
			var0009 = var0001->get_item_shape();
			if (var0009 == 0x033F) {
				var0008 = set_last_created();
				if (var0008) {
					var0002 = var0001->get_object_position();
					var0002[0x0001] -= UI_die_roll(0x0001, 0x0002);
					var0002[0x0003] += 0x0001;
					var0008 = UI_update_last_created(var0002);
					if (var0008) {
						var0008 = script item after 60 ticks {
							nohalt;
							call Func035F;
						};
						if (UI_die_roll(0x0001, 0x0002) == 0x0001) {
							Func0949("@Do not thou overcook it!@");
						}
					}
				}
			}
		}
	}
	if (event == SCRIPTED) {
		var0002 = get_object_position();
		var000A = find_nearby(0x033F, 0x0002, MASK_NONE);
		if (UI_get_array_size(var000A) > 0x0000) {
			remove_item();
			var000B = UI_create_new_object(0x0179);
			if (var000B) {
				var000B->set_item_flag(TEMPORARY);
				set_item_frame(0x0000);
				var0008 = UI_update_last_created(var0002);
				if (var0008) {
					var000C = UI_die_roll(0x0001, 0x0003);
					if (var000C == 0x0001) {
						Func0949("@I believe the bread is ready.@");
					}
					if (var000C == 0x0002) {
						Func0949("@Mmm... 'Tis a wonderful aroma.@");
					}
				}
			}
		}
	}
}

extern void Func097F 0x97F (var var0000, var var0001, var var0002);

void Func0362 shape#(0x362) () {
	if (IOLO->npc_nearby()) {
		Func097F(AVATAR, "@Iolo, about that gold...@", 0x0000);
		Func097F(AVATAR, "@thou dost owe me...@", 0x0010);
		Func097F(IOLO, "@Avatar, what gold?@", 0x0020);
		Func097F(AVATAR, "@Just kidding...@", 0x0030);
	}
}

extern var Func0994 0x994 ();
extern void Func097F 0x97F (var var0000, var var0001, var var0002);
extern var Func098C 0x98C ();
extern var Func099B 0x99B (var var0000, var var0001, var var0002, var var0003, var var0004, var var0005, var var0006);
extern void Func094F 0x94F (var var0000, var var0001);
extern void Func06D9 object#(0x6D9) ();

void Func0363 shape#(0x363) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;

	var0000 = UI_is_pc_female();
	var0001 = Func0994();
	var0002 = "son";
	var0003 = THOXA->get_npc_object();
	if (var0000) {
		var0002 = "daughter";
	}
	if ((event == EGG) && (var0001 == 0x001F)) {
		THOXA->show_npc_face0(0x0000);
		say("Greetings, hero from another world!\"");
		say("\"I foretold that we would meet again, though I had not expected thee in the realm of dreams.\" *\"That which thou dost see before thee is the Moon's Eye. It is thy goal in the waking world.\"");
		say("\"Seek out the true Moon's Eye in the Temple of the Ancient Ones in the icy wastes to the north. It will show thee what thou must know...\"");
		UI_remove_npc_face0();
		Func097F(THOXA, "@Seek the Moon's Eye...@", 0x0002);
		Func097F(AVATAR, "@Wait...@", 0x000C);
		var0004 = get_object_position();
		UI_sprite_effect(ANIMATION_TELEPORT, var0004[0x0001], var0004[0x0002], 0x0000, 0x0000, 0x0000, LOOP_ONCE);
		UI_play_sound_effect(0x0051);
		var0005 = set_item_quality(0x0005);
		var0005 = script item after 10 ticks {
			nohalt;
			call Func06D9;
		};
		abort;
	}
	if (event == SCRIPTED) {
		if ((item == var0003) && (var0001 == 0x0018)) {
			var0006 = THOXA->get_object_position();
			while (var0006[0x0003] > 0x0000) {
				var0006[0x0001] -= 0x0001;
				var0006[0x0002] -= 0x0001;
				var0006[0x0003] -= 0x0002;
			}
			UI_sprite_effect(ANIMATION_TELEPORT, var0006[0x0001], var0006[0x0002], 0x0000, 0x0000, 0x0000, LOOP_ONCE);
			THOXA->remove_npc();
			DUPRE->clear_item_flag(ASLEEP);
			SHAMINO->clear_item_flag(ASLEEP);
			IOLO->clear_item_flag(ASLEEP);
			abort;
		}
		if (var0001 == 0x001B) {
			UI_init_conversation();
			THOXA->show_npc_face0(0x0000);
			say("\"Even as was foretold! I have travelled a great distance to meet with thee. My name is Thoxa.\"");
			say("\"But wait! I proceed too quickly. Perhaps thou art not the promised Hero... I must test thee, lest I give mine assistance in error.\"");
			if (Func098C()) {
				say("\"Thou art truly the one I seek! Here is the Hourglass of Fate. Keep it with thee always, for through it the Monks of Xenka can aid thee.\"");
				var0005 = Func099B(AVATAR, 0x0001, 0x0347, QUALITY_ANY, 0x0001, false, true);
				add(["foretold", "promised Hero", "assistance", "Hourglass"]);
				converse ("bye") {
					case "Hourglass" (remove):
						say("\"As long as the Hourglass of Fate is with thee, if thou art killed, thou shalt be resurrected on Monk Isle.\"");
						say("\"And if one of thy companions is killed, thou canst summon one of us to resurrect him or her, by use of the Hourglass.\"");
						say("\"The monk shall come soon, when thou art in a safe place, without strangers or distractions.\"");
						fallthrough;

					case "foretold" (remove):
						say("\"I am a Xenkan monk, my ",
							var0002,
							". As such, I have devoted my life to studying the prophecies of Xenka.\"");
						say("\"The writings are clear: the Hero shall come in the last days, with Three Companions, to battle against the Evil which is in the land.\"");
						say("\"Further, the Hero shall be given guidance from a Power that dwells in the Void.\"");
						add(["Companions", "Power"]);
						fallthrough;

					case "Companions" (remove):
						say("\"The writings of Xenka speak of the Three which shall travel with thee. Without them, thou canst not succeed.\"");
						say("\"They shall be thine oldest and most trusted friends, and it is their part to share thine adventure with thee.\"");
						say("\"Thou must find them, Hero! And then never let them leave thy side...\"");
						gflags[THOXA_SPOKE_COMPANIONS] = true;
						fallthrough;

					case "Power" (remove):
						say("\"The writings are vague on this point, so that it is not certain whether the Power lives in the Void now, or merely came from that place.\"");
						say("\"However, I know that thou shalt need to seek out three artifacts -- a Ring, a Necklace, and an Earring.\"");
						say("\"Through these ancient items, the Power shall communicate with thee. More than this, I know not.\"");
						gflags[THOXA_SPOKE_POWER] = true;
						fallthrough;

					case "Xenka" (remove):
						say("\"How can I explain Xenka in the short time we have? Xenka is the prophetess who receives wisdom from beyond the Void...\"");
						fallthrough;

					case "promised Hero" (remove):
						say("\"The land is in dire need of a Hero, for the end of the world draws nigh!\"");
						say("\"There are storms which lash out with magical lightnings, and strange illnesses which plague the innocent.\"");
						say("\"Lastly, there is the growing sense that something is wrong in the land...\"");
						add(["storms", "illnesses", "wrong"]);
						fallthrough;

					case "storms" (remove):
						say("\"The storms are one of the signs that the end of the world is at hand. I know not what causes them, or how they may be stopped.\"");
						say("\"Most ships have ceased to sail, for the storms strike any vessel which leaves harbor.\"");
						say("\"The lightning doth have the power to kill or to teleport, and sometimes it changes the nature of that which it strikes.\"");
						fallthrough;

					case "illnesses" (remove):
						say("\"The prophecies mention that a plague will come among us, to sicken the meek and the innocent.\"");
						say("\"Hast thou noticed the dying birds? They are only the first victims. At first the disease shall strike the wildest races, and lastly, the race of Men.\"");
						fallthrough;

					case "wrong" (remove):
						say("\"I cannot explain further. Dost thou not feel it? The sense that something is... not right?\"");
						say("\"Xenka speaks of these days as the Time of Imbalance.\"");
						fallthrough;

					case "assistance" (remove):
						say("\"My time with thee is short, so take careful heed of mine advice --\"");
						say("\"There is a cave further south by a large red bush -- its entrance is invisible. If thou canst find thy way in, it may provide more clues.\"");
						say("\"Follow the coast until thou dost come to a great city. The name of the city is Monitor. An old friend of thine awaits thee there.\"");
						fallthrough;

					case "aid" (remove):
						say("\"With it, thou wilt know how long thou hast to complete thy quest before we are all doomed! And as long as the sands run within the Hourglass of Fate, we may intercede if thou art slain before thy quest is completed -- Thou wilt be resurrected on Monk Isle.\"");
						fallthrough;

					case "Sands of Time" (remove):
						say("\"Within the Hourglass of Fate lie the Sands of Time. As each grain doth fall, so doth another moment hasten us to our doom.\"");
						add("doom");
						fallthrough;

					case "doom" (remove):
						say("\"If thou dost fail in thy quest, our world will end... ripped apart by the earthquakes that will soon plague it.\"");
						fallthrough;

					case "bye":
						say("\"I must go now, before those who oppose me find that I have been here.\"");
						var0005 = "@Farewell!@" & "@No!@";
						Func094F(THOXA, var0005);
						UI_end_conversation();
						UI_remove_npc_face0();
						var0007 = THOXA->get_object_position();
						var0007[0x0001] += 0x000C;
						var0007[0x0002] -= 0x0003;
						KARNAX->move_object(var0007);
						UI_play_sound_effect(0x0051);
						UI_sprite_effect(ANIMATION_TELEPORT2, var0007[0x0001], var0007[0x0002], 0x0000, 0x0000, 0x0000, LOOP_ONCE);
						var0005 = script KARNAX after 20 ticks {
							nohalt;
							call Func0109;
						};
						var0005 = script item after 7 ticks {
							nohalt;
							face FACE_EAST;
							continue;
							actor frame ready;
						};
						var0005 = "@Thoxa!@" & ("" & ("@Vex Ort!@" & ("@Mas Ort!@" & ("@Vex Ort!@" & ("" & "@She lives!@")))));
						Func094F(KARNAX, var0005);
						abort;
				}
			} else {
				THOXA->set_schedule_type(SHY);
				THOXA->clear_item_say();
				Func097F(THOXA, "@An impostor!@", 0x0000);
				AVATAR->clear_item_flag(DONT_MOVE);
				abort;
			}
		}
	}
}

void Func0368 shape#(0x368) () {
	var var0000;
	var var0001;

	if (event == DOUBLECLICK) {
		var0000 = get_item_frame();
		if (var0000 == 0x0000) {
			UI_play_sound_effect(0x0061);
			set_item_frame(0x0001);
			var0001 = script item {
				nohalt;
				wait 20;
				call Func0368;
			};
			abort;
		}
	}
	if (event == SCRIPTED) {
		set_item_frame(0x0000);
		UI_play_sound_effect(0x00FF);
	}
}

extern void Func088D 0x88D (var var0000, var var0001);

void Func0369 shape#(0x369) () {
	var var0000;

	if (event == DOUBLECLICK) {
		var0000 = get_container();
		if (var0000) {
			return;
		}
		Func088D(item, 0x0369);
	}
}

extern void Func07D1 object#(0x7D1) ();
extern var Func09A0 0x9A0 (var var0000, var var0001);
extern void Func083B 0x83B (var var0000);
extern var Func0994 0x994 ();
extern var Func0992 0x992 (var var0000, var var0001, var var0002, var var0003);
extern void Func097F 0x97F (var var0000, var var0001, var var0002);

void Func036A shape#(0x36A) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;
	var var0008;

	if (event == DEATH) {
		var0000 = UI_die_roll(0x0001, 0x0002);
		clear_item_say();
		if (var0000 == 0x0001) {
			item_say("@Yipe, yipe, yipe!@");
		}
		if (var0000 == 0x0002) {
			item_say("@Aoaaoouuu!@");
		}
		set_attack_mode(FLEE);
	}
	if (event == DOUBLECLICK) {
		AVATAR->item_say("@Come here, boy!@");
		HOUND_OF_DOSKAR->Func07D1();
		var0001 = script item after 2 ticks {
			nohalt;
			say "@Woof!@";
		};
		HOUND_OF_DOSKAR->set_schedule_type(TALK);
	}
	if (event == SCRIPTED) {
		if (item == Func09A0(0x0005, 0x0001)) {
			var0002 = AVATAR->find_nearby(0x036A, 0x0028, MASK_NONE);
			if (var0002) {
				var0002->set_schedule_type(HOUND);
			}
			abort;
		}
		var0003 = UI_click_on_item();
		var0004 = var0003->get_item_shape();
		var0005 = var0003->get_item_frame();
		var0006 = var0003->get_item_quality();
		UI_play_music(0x0012, Func09A0(0x0005, 0x0001));
		if ((var0004 == 0x03BB) && ((var0005 == 0x0005) && (gflags[KNOW_YELINDAS_DIAMOND_NECKLACE] && (!gflags[RETURNED_COMB_OF_BEAUTY])))) {
			Func083B([0x0619, 0x05B9, 0x0000]);
		}
		if ((var0004 == 0x0208) && (gflags[WILL_FIND_CANTRA] && (!gflags[BATLIN_FLED_SHAMINOS_KEEP]))) {
			gflags[SHAMINOS_KEEP_BARRIERS_GONE] = true;
			if (Func0994() == 0x0010) {
				Func083B([-1, 0, 0]);
			} else {
				Func083B([0x0762, 0x03E7, 0x0000]);
			}
		}
		if ((var0004 == 0x03BB) && ((var0005 == 0x0004) && (gflags[BATLIN_FLED_SHAMINOS_KEEP] && (!gflags[BANES_RELEASED])))) {
			gflags[HOUND_TRACKED_BATLIN] = true;
			if (Func0994() == 0x0018) {
				Func083B([-1, 0, 0]);
			} else {
				Func083B([0x0768, 0x02E3, 0x0000]);
			}
		}
		if ((var0004 == 0x03BB) && ((var0005 == 0x0008) && (gflags[BANES_RELEASED] && (!gflags[INSANITY_BANE_DEAD])))) {
			if (Func0994() == 0x0000) {
				Func083B([-1, 0, 0]);
			} else {
				Func083B([0x0709, 0x05B2, 0x0000]);
			}
		}
		if ((var0004 == 0x02B4) && ((var0005 == 0x0002) && (gflags[BANES_RELEASED] && (!gflags[INSANITY_BANE_DEAD])))) {
			if (Func0994() == 0x0000) {
				Func083B([-1, 0, 0]);
			} else {
				Func083B([0x0709, 0x05B2, 0x0000]);
			}
		}
		if ((var0004 == 0x01EA) && (gflags[BANES_RELEASED] && (!gflags[WANTONNESS_BANE_DEAD]))) {
			if (Func0994() == 0x0000) {
				Func083B([-1, 0, 0]);
			} else {
				Func083B([0x0709, 0x05B2, 0x0000]);
			}
		}
		if ((var0004 == 0x0282) && ((var0006 == 0x003E) && (gflags[BANES_RELEASED] && (!gflags[ANARCHY_BANE_DEAD])))) {
			if (Func0994() == 0x0000) {
				Func083B([-1, 0, 0]);
			} else {
				Func083B([0x0709, 0x05B2, 0x0000]);
			}
		}
		var0001 = script item {
			nohalt;
			say "@Woof woof?@";
		};
		var0007 = Func0992(0x0001, 0x0000, 0x0000, false);
		var0007->clear_item_say();
		Func097F(var0007, "@The hound looks confused.@", 0x0004);
		abort;
	}
	if (event == STARTED_TALKING) {
		HOUND_OF_DOSKAR->set_schedule_type(HOUND);
		EMMIT->show_npc_face0(0x0000);
		say("\"Woof!\"");
		converse (["trick", "track", "attack", "bye"]) {
			case "track":
				var0001 = script item {
					nohalt;
					call Func036A;
				};
				abort;

			case "trick":
				set_schedule_type(DANCE);
				var0001 = script item {
					nohalt;
					say "@Ruff ruff ruff!@";
				};
				abort;

			case "attack":
				var0003 = UI_click_on_item();
				if ((!var0003) || ((var0003->get_alignment() == GOOD) || (!var0003->is_npc()))) {
					say("\"Woof?\"");
				} else {
					if (var0003->get_alignment() == NEUTRAL) {
						say("\"Woof.\"");
						set_schedule_type(IN_COMBAT);
						set_opponent(var0003);
						set_oppressor(var0003);
						abort;
					}
					if (var0003->get_alignment() == CHAOTIC) {
						say("\"Woof!\"");
						set_schedule_type(IN_COMBAT);
						set_opponent(var0003);
						set_oppressor(var0003);
						abort;
					}
					if (var0003->get_alignment() == EVIL) {
						say("\"Woof!!\"");
						set_schedule_type(IN_COMBAT);
						set_opponent(var0003);
						set_oppressor(var0003);
						abort;
					}
				}
				fallthrough;

			case "bye":
				var0001 = script item {
					nohalt;
					say "@Woof! Woof!@";
				};
				UI_remove_npc_face0();
				abort;
		}
	}
	if (event == SI_PATH_SUCCESS) {
		set_schedule_type(HOUND);
		var0001 = script item {
			nohalt;
			say "@Ruff!@";
		};
	}
	if (event == SI_PATH_FAILURE) {
		set_schedule_type(HOUND);
	}
	if (event == PROXIMITY) {
		var0008 = UI_die_roll(0x0001, 0x0002);
		if (var0008 == 0x0001) {
			HOUND_OF_DOSKAR->item_say("@Woof!@");
		}
		if (var0008 == 0x0002) {
			HOUND_OF_DOSKAR->item_say("@Bark!@");
		}
	}
}

void Func036C shape#(0x36C) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;

	if (event == SCRIPTED) {
		var0000 = get_object_position();
		var0001 = get_item_quality();
		var0002 = get_item_frame();
		if (var0002 == 0x0000) {
			var0002 = 0x0000;
		} else if (var0002 == 0x0002) {
			var0002 = 0x000A;
		} else {
			var0002 = 0x0005;
		}
		remove_item();
		var0003 = UI_create_new_object(0x036C);
		if (var0003) {
			var0003->set_item_frame(var0002);
			var0004 = var0003->set_item_quality(var0001);
			var0004 = UI_update_last_created(var0000);
			if (var0004) {
				var0005 = script var0003 {
					repeat 3 {
						next frame cycle;
						sfx 89;
					};
					sfx 88;
				};
			}
		}
		abort;
	}
	if (event == DOUBLECLICK) {
		UI_flash_mouse(CURSOR_HAND);
	}
}

void Func0370 shape#(0x370) () {
	var var0000;
	var var0001;

	if (event == SI_PATH_SUCCESS) {
		var0000 = script item {
			nohalt;
			face east;
			actor frame bowing;
			actor frame sitting;
		};
	}
	if (event == SI_PATH_FAILURE) {
		set_schedule_type(WANDER);
	}
	if (event == DEATH) {
		if (!gflags[FIXED_BLACK_SWORD]) {
			abort;
		}
		if (gflags[ARCADION_IN_SWORD]) {
			abort;
		}
		if (get_oppressor() == 0x0000) {
			if (AVATAR->get_weapon() == 0x0326) {
				BRAX->show_npc_face0(0x0000);
				say("\"Thou hast beaten me, vile human. I will remember this day!\"");
				UI_remove_npc_face0();
				var0001 = get_object_position();
				set_schedule_type(WAIT);
				AVATAR->set_opponent(0x0001);
				move_object([0x008E, 0x002E, 0x0000]);
				IOLO->clear_item_flag(DEAD);
				IOLO->set_item_flag(SI_ZOMBIE);
				IOLO->clear_item_flag(SI_TOURNAMENT);
				IOLO->move_object(var0001);
				IOLO->reduce_health(0x0037, NORMAL_DAMAGE);
				gflags[INSANITY_BANE_IN_SWORD] = true;
				gflags[INSANITY_BANE_DEAD] = true;
			}
		}
	}
}

extern void Func0919 0x919 (var var0000);
extern var Func0954 0x954 ();
extern var Func0953 0x953 ();

void Func0373 shape#(0x373) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;

	var0000 = get_npc_number();
	var0001 = get_npc_id();
	if (var0000 == DBEYER) {
		Func0919(DBEYER);
		abort;
	}
	if (event == BG_PATH_FAILURE) {
		set_polymorph(0x01F5);
	}
	if ((event == SI_PATH_SUCCESS) || (event == SI_PATH_FAILURE)) {
		set_schedule_type(WAIT);
		var0002 = script item {
			nohalt;
			actor frame bowing;
			actor frame kneeling;
			say "@Master!@";
		};
	}
	if (var0001 == 0x0000) {
		var0003 = Func0954();
		var0004 = UI_is_pc_female();
		var0005 = Func0953();
		if (event == DOUBLECLICK) {
			0x0373->set_schedule_type(TALK);
		}
		if (event == PROXIMITY) {
			var0006 = UI_die_roll(0x0001, 0x0005);
			if (var0006 == 0x0001) {
				item_say("@To fight, these snakes!@");
			}
			if (var0006 == 0x0002) {
				item_say("@To win, if Balanced!@");
			}
			if (var0006 == 0x0003) {
				item_say("@To lose, if not in Balance!@");
			}
			if (var0006 == 0x0004) {
				item_say("@To run out of time, this fight!@");
			}
			if (var0006 == 0x0005) {
				item_say("@To lose hope, this fight!@");
			}
		}
	}
	if (var0001 == 0x0001) {
		var0003 = Func0954();
		var0004 = UI_is_pc_female();
		var0005 = Func0953();
		if (event == DOUBLECLICK) {
			0x0373->set_schedule_type(TALK);
		}
		if (event == PROXIMITY) {
			var0006 = UI_die_roll(0x0001, 0x0005);
			if (var0006 == 0x0001) {
				item_say("@To seek help, for this fight!@");
			}
			if (var0006 == 0x0002) {
				item_say("@To risk all, a hero!@");
			}
			if (var0006 == 0x0003) {
				item_say("@To end world, this fight!@");
			}
			if (var0006 == 0x0004) {
				item_say("@To return home, these snakes!@");
			}
			if (var0006 == 0x0005) {
				item_say("@To fight, these snakes!@");
			}
		}
	}
	if (var0001 == 0x0002) {
		var0003 = Func0954();
		var0004 = UI_is_pc_female();
		var0005 = Func0953();
		if (event == DOUBLECLICK) {
			0x0373->set_schedule_type(TALK);
		}
		if (event == PROXIMITY) {
			var0006 = UI_die_roll(0x0001, 0x0005);
			if (var0006 == 0x0001) {
				item_say("@To need unity, these snakes!@");
			}
			if (var0006 == 0x0002) {
				item_say("@To be separate, these snakes!@");
			}
			if (var0006 == 0x0003) {
				item_say("@To fight, these snakes!@");
			}
			if (var0006 == 0x0004) {
				item_say("@To end all, this fight!@");
			}
			if (var0006 == 0x0005) {
				item_say("@To hope, this fight!@");
			}
		}
	}
}

extern void Func09A3 0x9A3 (var var0000);

void Func0375 shape#(0x375) () {
	var var0000;

	if (event == STARTED_TALKING) {
		SMITH_HORSE->show_npc_face0(0x0000);
		say("\"Avatar! How good it is to see thee! How long hath it been since we last met?\"");
		AVATAR->show_npc_face1(0x0000);
		say("\"Ahhhh... Errrr... Well....\"");
		UI_remove_npc_face1();
		SMITH_HORSE->show_npc_face0(0x0000);
		say("\"Do not tell me that thou dost not recognize me? Come now, Avatar, it hath not been that long.\"");
		AVATAR->show_npc_face1(0x0000);
		say("\"Welll... Maybe...\"");
		UI_remove_npc_face1();
		SMITH_HORSE->show_npc_face0(0x0000);
		say("\"It is I! Smith the Horse! Only the finest steed in all of Britannia.\"* \"Oh, I suppose thou wouldst not recognize me such as I am. This is the appearance I take here at the Realm of Dreams.\"* \"Ah, this is the life. Mine own keep, as much hay as I could want, no insects to bother me... Who could ask for more?\" *\"Where are my wits! Avatar, I have something important to tell thee. But what was it?\"");
		say("\"Oh, yes! Avatar, thou must take Rudyom's wand to the Isle of the Avatar!\"* \"There thou wilt find a monolith made of blackrock that Batlin is using to create a gateway to bring the Guardian into our world!\"* \"The future of Britannia doth lie in thine hands, Avatar!\"");
		AVATAR->show_npc_face1(0x0000);
		say("\"Ahh, Smith, the Guardian hath been stopped. Everything is safe.\"");
		UI_remove_npc_face1();
		SMITH_HORSE->show_npc_face0(0x0000);
		say("\"Oh...\" *\"I feel like I have made a mule of myself. Never mind...\" *\"Now I remember! Thou hast left Britannia and hast journeyed to the Serpent Isle in search of Batlin!\" *\"Poor Iolo, he must be distraught to have found that Gwenno left on that voyage with that fiend. I hope that thou wilt find her before that evil man doth do something to her. She, at least, hath always been kind to me.\" *\"Wait! Avatar, I do have some information thou canst use!\" *\"Batlin and his band of hired swords are waiting for thee at...\" *\"Yummie! Here comes someone with more hay...\"");
		UI_remove_npc_face0();
		var0000 = get_object_position();
		UI_sprite_effect(ANIMATION_PURPLE_BUBBLES, var0000[0x0001], var0000[0x0002], 0x0000, 0x0000, 0x0000, LOOP_ONCE);
		remove_item();
		UI_play_sound_effect(0x004C);
	}
	if (event == SCRIPTED) {
		AVATAR->clear_item_flag(DONT_MOVE);
		clear_item_flag(SI_TOURNAMENT);
		var0000 = get_object_position();
		UI_sprite_effect(ANIMATION_MEDIUM_BLAST, (var0000[0x0001] - 0x0001), (var0000[0x0002] - 0x0001), 0x0000, 0x0000, 0x0000, LOOP_ONCE);
		UI_sprite_effect(ANIMATION_LIGHTNING, (var0000[0x0001] - 0x0001), (var0000[0x0002] - 0x0001), 0x0000, 0x0000, 0x0002, 0x0003);
		UI_sprite_effect(ANIMATION_LIGHTNING, (var0000[0x0001] - 0x0002), (var0000[0x0002] - 0x0002), 0x0000, 0x0000, 0x0000, LOOP_ONCE);
		UI_play_sound_effect(0x002A);
		UI_lightning();
		Func09A3(item);
	}
}

extern var Func09A0 0x9A0 (var var0000, var var0001);
extern void Func0916 0x916 ();

void Func0377 shape#(0x377) () {
	if (item == Func09A0(0x0005, 0x0004)) {
		if (event == SCRIPTED) {
			Func0916();
		}
	}
}

void Func0379 shape#(0x379) () {
	var var0000;
	var var0001;
	var var0002;

	if ((event == DOUBLECLICK) || (event == SCRIPTED)) {
		var0000 = get_item_frame();
		if ((var0000 == 0x0000) || ((var0000 == 0x0001) || ((var0000 == 0x0004) || (var0000 == 0x0005)))) {
			return;
		}
		var0001 = UI_create_new_object(0x01B8);
		if (var0001) {
			var0002 = get_object_position();
			var0002[0x0001] += 0x0003;
			var0002[0x0002] += 0x0003;
			var0001->set_item_frame(UI_die_roll(0x0000, 0x0007));
			if (UI_update_last_created(var0002)) {
				set_item_shape(0x020E);
				UI_play_sound_effect2(0x0041, item);
			}
		}
	}
}

void Func038A shape#(0x38A) () {
	var var0000;
	var var0001;

	if (event == SI_PATH_SUCCESS) {
		var0000 = script item {
			nohalt;
			face east;
			actor frame bowing;
			actor frame sitting;
		};
	}
	if (event == SI_PATH_FAILURE) {
		set_schedule_type(WANDER);
	}
	if (event == DEATH) {
		if (!gflags[FIXED_BLACK_SWORD]) {
			abort;
		}
		if (gflags[ARCADION_IN_SWORD]) {
			abort;
		}
		if (get_oppressor() == 0x0000) {
			if (AVATAR->get_weapon() == 0x0326) {
				WATSON->show_npc_face0(0x0000);
				say("\"Vanquished! By a mere mortal!\"");
				UI_remove_npc_face0();
				var0001 = get_object_position();
				set_schedule_type(WAIT);
				AVATAR->set_opponent(0x0001);
				move_object([0x008E, 0x002E, 0x0000]);
				DUPRE->clear_item_flag(DEAD);
				DUPRE->move_object(var0001);
				DUPRE->set_item_flag(SI_ZOMBIE);
				DUPRE->clear_item_flag(SI_TOURNAMENT);
				DUPRE->reduce_health(0x0037, NORMAL_DAMAGE);
				gflags[WANTONNESS_BANE_IN_SWORD] = true;
				gflags[WANTONNESS_BANE_DEAD] = true;
			}
		}
	}
	if (event == SCRIPTED) {
		WATSON->show_npc_face0(0x0000);
		say("\"Puny mortal!\"");
		UI_remove_npc_face0();
	}
}

extern void Func097F 0x97F (var var0000, var var0001, var var0002);
extern void Func07D1 object#(0x7D1) ();
extern void Func09AD 0x9AD (var var0000);

void Func0395 shape#(0x395) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;

	var0000 = false;
	var0001 = AVATAR->get_object_position();
	var0002 = var0001[0x0001];
	var0003 = var0001[0x0002];
	if ((var0002 > 0x0498) && ((var0002 < 0x04F8) && ((var0003 > 0x01AF) && (var0003 < 0x021F)))) {
		var0000 = true;
	}
	if ((event == DEATH) && HAZARD->get_item_flag(SI_TOURNAMENT)) {
		LORD_BRITISH->show_npc_face0(0x0000);
		say("\"Argh! Thou thinkest thou canst save thy precious Gwani by slaying me? Fool! Thou hast the brain of a headless!\" *\"I laugh at thee, even as I lie here dying in mine own blood. The Gwani are doomed I tell thee, doomed like a feeble rabbit in my trap, hahaha...\"");
		UI_remove_npc_face0();
		HAZARD->clear_item_flag(SI_TOURNAMENT);
		Func097F(AVATAR, "@Taste my steel, trapper!@", 0x0001);
		HAZARD->reduce_health(0x0037, NORMAL_DAMAGE);
		gflags[HAZARD_IS_DEAD] = true;
	}
	if ((event == DOUBLECLICK) && (var0000 == false)) {
		AVATAR->item_say("@Stand fast, trapper!@");
		0x0395->Func07D1();
		Func097F(0x0395, "@Thou shalt not take me!@", 0x0003);
		Func09AD(item);
	}
	if ((event == DOUBLECLICK) && var0000) {
		AVATAR->item_say("@Stand fast, Trapper!@");
		0x0395->Func07D1();
		Func097F(0x0395, "@At last!@", 0x0003);
		set_schedule_type(TALK);
	}
	if (event == STARTED_TALKING) {
		run_schedule();
		clear_item_say();
		LORD_BRITISH->show_npc_face0(0x0000);
		say("\"We have stalked each other long enough!\"");
		converse (["Are you The Trapper?", "bye"]) {
			case "Are you The Trapper?" (remove):
				say("\"Forgo the pretense, I am Hazard the Trapper as thou dost know well by now.\"");
				add("Murderer!");
				fallthrough;

			case "Murderer!" (remove):
				say("\"That charge is most unfair! The Gwani are merely animals! I kill them as I would a bear, or a leopard.\"* \"Their skins keep many a man warm when they venture into these icy regions. Why, I would kill a man if he dared to steal mine.\"* \"Aye, their skins are the most profitable, too.\"");
				add(["animals", "profit", "Gwani"]);
				fallthrough;

			case "profit" (remove):
				say("\"Aye, the best skins I take are those I peel from those beasts while they still live. I have not killed a Gwani before skinning it in years, and I shan't stop till the last one is gone!\"");
				fallthrough;

			case "animals" (remove):
				say("\"Trapping them is too easy. 'Tis a wonder they survive out here at all! Why, they are as docile as sheep!\"* \"A leopard at least is sport. It would sever mine arm if I gave it the chance. Slaughtering the Gwani is doing them a favor.\"");
				add("Stop the killing.");
				fallthrough;

			case "Gwani" (remove):
				say("\"They provide me a fat living. Thou art daft to be concerned for the likes of them!\"* \"And if thou hast a plan for stopping me then I think thou shouldst leave now, lest I skin thee alive, too!\"");
				fallthrough;

			case "Stop the killing.":
				say("\"No one tells me what I can and cannot kill! Prepare to join thy Gwani friends on my wall, Avatar.\"");
				Func09AD(item);
				abort;

			case "bye":
				say("\"From the look in thine eye I can see that this is far from over. Truly this is farewell, Avatar.\"");
				Func09AD(item);
				abort;
		}
	}
}

extern void Func03E6 shape#(0x3E6) ();

void Func03A1 shape#(0x3A1) () {
	var var0000;
	var var0001;
	var var0002;

	if (event == DOUBLECLICK) {
		UI_close_gumps();
		var0000 = UI_click_on_item();
		var0001 = var0000->get_object_position();
		var0001[0x0001] -= var0001[0x0003] / 0x0002;
		var0001[0x0002] -= var0001[0x0003] / 0x0002;
		UI_sprite_effect(ANIMATION_PURPLE_BUBBLES, var0001[0x0001], var0001[0x0002], 0x0000, 0x0000, 0x0000, LOOP_ONCE);
		if ((var0000->get_item_shape() == 0x03E6) && (var0000->get_item_frame() == 0x0006)) {
			UI_play_sound_effect(0x0077);
			var0002 = script var0000 after 5 ticks {
				nohalt;
				call Func03E6;
			};
		} else {
			UI_play_sound_effect(0x0030);
		}
	}
}

extern var Func0994 0x994 ();
extern var Func0992 0x992 (var var0000, var var0001, var var0002, var var0003);
extern var Func09A0 0x9A0 (var var0000, var var0001);
extern void Func0636 object#(0x636) ();

void Func03A6 shape#(0x3A6) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;

	if (event == DOUBLECLICK) {
		var0000 = get_item_frame();
		if (Func0994() == 0x000B) {
			var0001 = UI_create_new_object2(0x01EF, [0x0259, 0x0255, 0x0000]);
			gflags[KNOWS_BLUE_EGG_OWNER] = true;
		} else {
			var0002 = UI_get_random(0x0008);
			if (var0000 == 0x0000) {
				if (var0002 == 0x0001) {
					var0001 = UI_create_new_object2(0x01EF, [0x0816, 0x052F, 0x0000]);
				}
				if (var0002 == 0x0002) {
					var0001 = UI_create_new_object2(0x01EF, [0x0258, 0x0255, 0x000E]);
				}
				if (var0002 == 0x0003) {
					var0001 = UI_create_new_object2(0x01EF, [0x02BD, 0x0687, 0x0000]);
				}
				if (var0002 == 0x0004) {
					var0001 = UI_create_new_object2(0x01EF, [0x0896, 0x054D, 0x000E]);
				}
				if (var0002 == 0x0005) {
					var0001 = UI_create_new_object2(0x01EF, [0x02DB, 0x0554, 0x0000]);
				}
				if (var0002 == 0x0006) {
					var0001 = UI_create_new_object2(0x01EF, [0x01B0, 0x006D, 0x000E]);
				}
				if (var0002 == 0x0007) {
					var0001 = UI_create_new_object2(0x01EF, [0x0419, 0x0686, 0x0000]);
				}
				if (var0002 == 0x0008) {
					var0001 = UI_create_new_object2(0x01EF, [0x0929, 0x07C5, 0x0000]);
				}
			} else {
				if (var0002 == 0x0001) {
					var0001 = UI_create_new_object2(0x01EF, [0x0507, 0x08C0, 0x0000]);
				}
				if (var0002 == 0x0002) {
					var0001 = UI_create_new_object2(0x01EF, [0x0896, 0x054D, 0x000E]);
				}
				if (var0002 == 0x0003) {
					var0001 = UI_create_new_object2(0x01EF, [0x05C6, 0x0998, 0x0002]);
				}
				if (var0002 == 0x0004) {
					var0001 = UI_create_new_object2(0x01EF, [0x03C0, 0x0A1C, 0x000E]);
				}
				if (var0002 == 0x0005) {
					var0001 = UI_create_new_object2(0x01EF, [0x0965, 0x04A0, 0x000E]);
				}
				if (var0002 == 0x0006) {
					var0001 = UI_create_new_object2(0x01EF, [0x090E, 0x0889, 0x0000]);
				}
				if (var0002 == 0x0007) {
					var0001 = UI_create_new_object2(0x01EF, [0x0248, 0x09B0, 0x000E]);
				}
				if (var0002 == 0x0008) {
					var0001 = UI_create_new_object2(0x01EF, [0x01D0, 0x04A0, 0x000E]);
				}
			}
		}
		if (!var0001) {
			var0003 = Func0992(0x0001, "@It doesn't work!@", "@'Tis broken...@", true);
			abort;
		}
		var0001->set_schedule_type(WAIT);
		var0001->set_item_flag(SI_TOURNAMENT);
		var0001->set_polymorph(0x00EF);
		UI_end_conversation();
		AVATAR->set_item_flag(DONT_MOVE);
		UI_fade_palette(0x000C, 0x0001, 0x0000);
		var0001->set_item_flag(TEMPORARY);
		var0001->set_camera();
		var0004 = script Func09A0(0x0005, 0x0002) after 1 ticks {
			nohalt;
			call Func0636;
		};
		var0004 = script var0001 after 50 ticks {
			nohalt;
			call Func03A6;
		};
		abort;
	}
	if (event == SCRIPTED) {
		UI_fade_palette(0x000C, 0x0001, 0x0000);
		AVATAR->clear_item_flag(DONT_MOVE);
		UI_init_conversation();
		set_polymorph(0x01EF);
		AVATAR->set_camera();
		var0004 = script Func09A0(0x0005, 0x0001) after 3 ticks {
			nohalt;
			call Func0636;
		};
	}
}

void Func03A7 shape#(0x3A7) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;

	if (event == SCRIPTED) {
		var0000 = get_object_position();
		var0001 = get_item_quality();
		var0002 = get_item_frame();
		if (var0002 <= 0x0004) {
			var0002 = 0x0000;
		} else if (var0002 >= 0x000A) {
			var0002 = 0x0002;
		} else {
			var0002 = 0x0001;
		}
		remove_item();
		var0003 = UI_create_new_object(0x03A7);
		if (var0003) {
			var0003->set_item_frame(var0002);
			var0004 = var0003->set_item_quality(var0001);
			var0004 = UI_update_last_created(var0000);
		}
		abort;
	}
	if (event == DOUBLECLICK) {
		UI_flash_mouse(CURSOR_HAND);
	}
}

void Func03A8 shape#(0x3A8) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;

	if (event == SCRIPTED) {
		var0000 = get_object_position();
		var0001 = get_item_quality();
		var0002 = get_item_frame();
		if (var0002 <= 0x0004) {
			var0002 = 0x0000;
		} else if (var0002 >= 0x000A) {
			var0002 = 0x0002;
		} else {
			var0002 = 0x0001;
		}
		remove_item();
		var0003 = UI_create_new_object(0x03A8);
		if (var0003) {
			var0003->set_item_frame(var0002);
			var0004 = var0003->set_item_quality(var0001);
			var0004 = UI_update_last_created(var0000);
		}
		abort;
	}
	if (event == DOUBLECLICK) {
		UI_flash_mouse(CURSOR_HAND);
	}
}

extern var Func0983 0x983 (var var0000);

void Func03B0 shape#(0x3B0) () {
	var var0000;

	if (event == DOUBLECLICK) {
		if (get_item_frame()) {
			if (Func0983(AVATAR)) {
				AVATAR->item_say("Ptui!");
				if (!UI_in_gump_mode()) {
					var0000 = script item after 3 ticks {
						sfx 30;
					};
				}
			}
		}
	}
}

extern var Func0954 0x954 ();
extern var Func0953 0x953 ();
extern void Func07D1 object#(0x7D1) ();
extern void Func097F 0x97F (var var0000, var var0001, var var0002);
extern var Func099B 0x99B (var var0000, var var0001, var var0002, var var0003, var var0004, var var0005, var var0006);

void Func03B1 shape#(0x3B1) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;

	var0000 = Func0954();
	var0001 = Func0953();
	var0002 = "he";
	if (UI_is_pc_female()) {
		var0002 = "she";
	}
	if (event == DOUBLECLICK) {
		AVATAR->item_say("@Might I speak with thee?@");
		item->Func07D1();
		Func097F(item, (("@Certainly, " + var0000) + ".@"), 0x0005);
		set_schedule_type(TALK);
	}
	if (event == STARTED_TALKING) {
		set_schedule_type(STANDTHERE);
		clear_item_say();
		ISSTANAR->show_npc_face0(0x0000);
		var0003 = get_npc_id();
		if (var0003 == false) {
			set_npc_id(0x0001);
			say("\"So, thou art come as the Order Hierophant foretold. I must admit, even as dedicated as I am, I doubted that there could be another Champion of Balance.");
			say("\"I am Isstanar, Commander of The Serpent's Fang and its garrison.");
			say("\"Thou wilt forgive me if I remain skeptical a bit longer. One does not attain a position such as mine by being overly trusting.\"");
			gflags[MET_ISSTANAR] = true;
		} else if (gflags[HAVE_SILVER_SEED] || gflags[PLANTED_SILVER_SEED]) {
			say("\"I am pleased to see thee, ",
				var0001,
				".");
			say("\"How might I aid the Champion of Balance in fulfilling thy duty?\"");
			add("apologize");
		} else {
			say("\"I am pleased to see thee, ",
				var0001,
				". Thy continued survival does much to convince me that thou art indeed the Champion of Balance.");
			say("\"How might I aid thee in fulfilling thy duty?\"");
		}
		converse (["Order Hierophant", "Champion of Balance", "Serpent's Fang", "bye"]) {
			case "apologize" (remove):
				if (gflags[HAVE_SILVER_SEED] && (!gflags[PLANTED_SILVER_SEED])) {
					say("\"I am now convinced that thou art the Champion of Balance, ",
						var0001,
						". I apologize for doubting thee.");
					say("\"Now that thou hast the Silver Seed, thou shouldst plant it. Our only hope is that the Tree of Balance will heal the land.");
					say("\"Please, ",
						var0001,
						", I humbly ask that thee to plant it soon.\"");
				} else {
					say("\"I apologize for doubting thee, Champion of Balance.");
					say("\"Although it is too late to stop the war, perhaps the Tree of Balance will speed the healing of the land's wounds after this grim business is done.\"");
				}
				fallthrough;

			case "Order Hierophant" (remove):
				say("\"Could it be that thou dost not know of Calithiss the Avenger and our holy crusade?");
				say("\"But, if thou art the Champion of Balance, perhaps thou hast spent thy life as an Acolyte on the Isle of Crypts.");
				say("\"I shall honor thy title by telling thee the tale. If art an imposter, it shall be apparent soon enough... For thou wilt never survive what lies ahead.\"");
				add(["Avenger", "holy crusade", "Isle of Crypts", "what lies ahead"]);
				fallthrough;

			case "Avenger" (remove):
				say("\"Before the War of Imbalance began, Calithiss was known as the Steadfast. But after the foul murder of Ssithnos she named herself the Avenger.\"");
				UI_push_answers();
				add(["War of Imbalance", "Ssithnos", "nothing more"]);
				fallthrough;

			case "War of Imbalance" (remove):
				say("\"Those who served Balance were always few in number, ",
					var0001,
					". I cannot imagine how one could walk the shining path, swayed by neither Order nor Chaos. I do not see how it is humanly possible.");
				say("\"But there has always been those few called to serve all Ophidians, and they followed the Great Hierophant. But followers of Chaos slew the last Great Hierophant and plunged the land into war, for there was no one to maintain Balance.\"");
				add(["shining path", "Ophidians"]);
				fallthrough;

			case "shining path" (remove):
				say("\"Art thou testing my knowledge, Champion of Balance? Dost thou think to find an Order warrior of my status wanting?");
				say("\"I am no follower of Balance, but even I know that only the Great Hierophant may safely enter the Void to commune with the Serpents, that he walks upon a shining path to receive Their wisdom.");
				say("\"All others who would venture into the Void have no path to guide them and are doomed to death for their arrogance.\"");
				fallthrough;

			case "Ophidians" (remove):
				say("\"Thy questions art most perplexing, ",
					var0001,
					".  Thou art the Champion of Balance, and yet thou dost ask about things that all people know...");
				say("\"Art thou trying to discover how far we have fallen since Ssithnos perished? Then thou mayest judge Order by me, one of their ultimate warriors.");
				say("\"We are Ophidians, followers of Balance, Order and, alas, Chaos. We revere the Serpents that dwell within the Void, for Theirs is the wisdom that guides us all.");
				say("\"There, thou dost see that Order does not forget the teachings. That is why Order must triumph in this war. Chaos fiends killed the Great Hierophant. It is they who have fallen from the path, not Order.\"");
				fallthrough;

			case "Ssithnos" (remove):
				say("\"Ssithnos was the last Great Hierophant. He was a holy man, ",
					var0001,
					". The wisdom of the Great Earth Serpent shone in him.");
				say("\"It was my honor to meet him once when I was a young warrior, when he came to the Temple of Discipline. That was long before he met his tragic end.\"");
				add(["Great Earth Serpent", "young warrior", "Temple of Discipline"]);
				fallthrough;

			case "Great Earth Serpent" (remove):
				say("\"Why wouldst thou ask me? Thou art the Champion of Balance. How could I instruct thee in such a matter?");
				say("\"But I would venture to ask thee a question, ",
					var0001,
					". Do not take this amiss, for I do not mean to disparage thee. But...");
				say("\"What hope is there for thee, the Champion of Balance, to restore Balance if the Great Hierophant is dead? Without him to voice the will of the Great Earth Serpent, how canst thou hope to succeed?\"");
				UI_push_answers();
				add(["I know not.", "All shall be revealed later.", "There is no hope."]);
				fallthrough;

			case "I know not.":
				remove(["I know not.", "All shall be revealed later.", "There is no hope."]);
				say("\"Alas, I had hoped that thou wouldst know what was to happen. Now I do not know whether to believe that thou art not the Champion of Balance, or whether thou art simply ignorant of thy fate.");
				say("\"I must consider this... It is not unusual for a warrior to be sent into battle without knowing what he shall face, but I had expected a pawn of prophecy to be more... informed.\"");
				UI_pop_answers();
				fallthrough;

			case "All shall be revealed later.":
				remove(["I know not.", "All shall be revealed later.", "There is no hope."]);
				say("\"Thou dost answer my question with an easy evasion. This either means that thou knowest not, or that thou wilt not tell me.");
				say("\"If thou knowest not, it means that thou art either not the Champion of Balance, or that thou art ignorant of thy fate.");
				say("\"If thou art not the Champion of Balance, I pity thee for thou art not long for this life. If thou art ignorant of thy fate, it is nothing to cause thee shame. Many warriors go to battle uncertain of their fate.");
				say("\"If, on the other hand, thou knowest and choose not to reveal it to me, I respect thy choice. The Champion of Balance is the pawn of prophecy, and I can wait forever to learn the true answer to my question.\"");
				UI_pop_answers();
				fallthrough;

			case "There is no hope.":
				remove(["I know not.", "All shall be revealed later.", "There is no hope."]);
				say("\"Thou art truly worthy of the title Champion of Balance. Only a true warrior understands that duty is all that remains when hope is lost.");
				say("\"I salute thee, ",
					var0001,
					", for thy path is difficult, but thy name shall be honored among warriors.\"");
				UI_pop_answers();
				fallthrough;

			case "young warrior" (remove):
				say("\"I have not always been as thou dost see me now. I have spent a lifetime becoming worthy of this honor.\"");
				add("honor");
				fallthrough;

			case "honor" (remove):
				say("\"I was once flesh and blood, like thee, a warrior of Order. I was chosen to be tested shortly before the war began.\"");
				add("tested");
				fallthrough;

			case "tested" (remove):
				say("\"Only those warriors possessing unswerving Discipline, flawless Ethicality, and the finest Logic are selected for testing.");
				say("\"Of all of those brought before the Order Hierophant, only a few hands of that number withstand the testing. Of that number, less than a hand make the final sacrifice.");
				say("\"I am one of the elite... The ultimate Order warrior. I have traded my body for eternal service to Order.\"");
				fallthrough;

			case "Temple of Discipline" (remove):
				say("\"The Temple was once my home, ",
					var0001,
					". It was my privilege to serve as a guard for the Master of Discipline. It was there that the long road to this keep began.");
				say("\"The Temple is the primary staging and training area for our efforts in this accursed war. It is the headquarters of the High Command.\"");
				add("High Command");
				fallthrough;

			case "High Command" (remove):
				say("\"All respect to them!");
				say("\"The High Command are the highest ranking Order officers who report directly to the Order Hierophant. It is they who are charged with fulfilling the will of the Order Serpent to unite the world under the Ethicality and Discipline of Order.\"");
				fallthrough;

			case "holy crusade" (remove):
				say("\"The followers of Chaos broke the Teaching and plunged the land into war. It is they who murdered the Great Hierophant. It is they who have killed thousands of peaceful followers of Order.");
				say("\"The followers of Chaos must be held responsible for their crimes. There is no Great Hierophant to oversee justice, so it must fall to Order to see that the shedding of blood is met in kind until Chaos bows before Order, and Balance is restored.\"");
				add("Teaching");
				fallthrough;

			case "Teaching" (remove):
				say("\"Before Ssithnos was murdered, this land thrived in Balance. Order and Chaos each knew their duty, their place within the scheme of life. Both factions were equal, held in check by the authority of the Great Hierophant.");
				say("\"All people were taught that this had always been so, and must remain so. That was the will of the Great Earth Serpent, so that all people would reap the bounty of Balance's peace.");
				say("\"But the Great Hierophant was murdered and now there is no peace. There is no bounty... only war and bloodshed. It was Chaos that brought us to this crossroad, and it is they who will pay.\"");
				fallthrough;

			case "Isle of Crypts" (remove):
				say("\"How canst thou be the Champion of Balance and not know of the Isle of Crypts?! I suspect thee to be an imposter with each question thou dost utter!");
				say("\"But I have been taught that it is the duty of all people to aid a pawn of prophecy. I must hold fast to the belief that, if thou art false, thou wilt fall to a fate worse than any I could mete out.");
				say("\"So I shall tell thee what little a warrior of Order knows. I hope that it instructs thee well, if thou art truly the Champion of Balance, for thou art woefully ignorant of thy duty.\"");
				add("Tell me.");
				fallthrough;

			case "Tell me." (remove):
				say("\"The Isle of Crypts is the very heart of Balance. It is believed that the island was once the dwelling place of the Great Earth Serpent, before He journeyed into the Void to bring Balance to the universe.");
				say("\"It is common knowledge that this hallowed ground is the final resting place of all the Great Hierophants... though I know not if this is true of poor Sithnos.");
				say("\"It is also said that the island is the home of the Acolytes of Balance, though I would have thought that thou wouldst have known more of this than I.\"");
				add("Where is the island?");
				fallthrough;

			case "Where is the island?" (remove):
				say("\"Thou art most certainly not what I would have expected from the Champion of Balance. But it is not my place to judge a pawn of prophecy.");
				say("\"I regret to inform thee that I do not know the exact location of the Isle of Crypts. It is somewhere in the north-west, but other than that I know not.");
				say("\"I had always hoped that one day I would be able to make a pilgrimage there, but now it shall have to wait until after the war.\"");
				fallthrough;

			case "what lies ahead" (remove):
				say("\"If thou art truly the Champion of Balance, which I begin to doubt more strongly, then thou must have the Silver Seed to restore Balance to the world.");
				say("\"While I will freely tell thee that it is hidden here within this keep, I shall not tell thee where. Thou must be truly illumined before thou wilt find the Seed... *However, I shall tell thee that the magical orbs have been lost or scattered.");
				say("\"It shall be up to thee to overcome the hazards of this region to obtain these orbs. If thou dost survive in these attempts, I shall be more disposed to believe that thou art the Champion of Balance.\"");
				add(["Silver Seed", "magical orbs"]);
				fallthrough;

			case "Silver Seed" (remove):
				say("\"The Silver Seed is the acorn from the Tree of Balance. Only once every one hundred centuries does the Tree of Balance cast an acorn. It is our honor to be the keeper of the Seed.");
				say("\"When the Great Hierophant was murdered, the Tree of Balance that had existed for time beyond memory withered and died. Once we have crushed Chaos, Calithiss the Avenger shall take a new name -- the Renewer, and plant the seed so that Balance may heal our land.\"");
				fallthrough;

			case "magical orbs" (remove):
				say("\"I am sorry, ",
					var0001,
					". My conscious will not allow me to tell thee any more on this subject. I still cannot believe that thou art the Champion of Balance. So thou must find thy own answers. I have aided thee enough.");
				say("\"The only thing I will tell thee is that thou shouldst search the areas adjacent to this keep for the orbs. They have been widely scattered... And, take care for those areas are dangerous.\"");
				add("dangerous");
				fallthrough;

			case "dangerous" (remove):
				say("\"I have not been at the keep long, ",
					var0001,
					", so I cannot yet confirm any of these stories. I shall continue investigating their truth, but I see no reason why the warriors garrisoned here should lie.");
				say("\"It is said that there is a dragon, and a lich, nearby. This seems unlikely, as one would usually immediately kill or drive away the other... unless they are in league in some way.");
				say("\"There is also an abandoned outpost that is considered to be inhabited by creatures of Chaos. And, of course, there is the unfinished maze... from which Issik, the architect, never returned to reveal the secret of its interior.");
				say("\"I am told there is a madman who dwells within one of the caverns near here. The warriors call him the Fiend. They say that he feeds on human flesh.\"");
				say("\"Use caution, but I fear that thou wilt have to scour these areas in search of the orbs thou dost seek.\"");
				fallthrough;

			case "Champion of Balance" (remove):
				say("\"Thou dost possess the lost Amulet of Balance, ",
					var0001,
					". According to legend, only the Champion of Balance may bear it... all others would perish. However, I am no Mage. I do not know if this is true.");
				if (!gflags[HAVE_KEYRING]) {
					say("\"It is said that the Champion will restore Balance and heal our land. As it appears that thou art this long-awaited Champion, I have something which should aid thee.\"");
					add("What is it?");
				} else {
					say("\"I hope thou art finding the key ring to be of use, ",
						var0001,
						". Thou wilt need all the help thou canst find ere thy quest is finished.\"");
				}
				fallthrough;

			case "What is it?" (remove):
				say("\"It is a key ring, ",
					var0001,
					". Although it may seem to be a paltry offering, it is no mere trinket. It is a magical item.");
				say("\"Any key that thou dost put upon it will disappear. It shall never weigh more that what it does now. And if any of the keys thou didst put upon it fits a door thou wishest to open, one of the keys that thou dost see upon the keyring now will open it.");
				say("\"I hope that thou shall find it useful to thee.\"");
				var0004 = Func099B(AVATAR, 0x0001, 0x01E5, QUALITY_ANY, 0x0000, false, true);
				gflags[HAVE_KEYRING] = true;
				add(["Who crafted it?", "Why give it to me?"]);
				fallthrough;

			case "Who crafted it?" (remove):
				say("\"I know not who crafted it, ",
					var0001,
					". It is very old, and once belonged to the Order Hierophant.");
				say("\"When I made the final sacrifice, Calithiss said, @Give this to ",
					var0002,
					" who shall heal our land.@");
				say("\"I know now that she meant thee, Champion. How she knew that I would meet thee I shall never know. But, as always, her wisdom is infallible.\"");
				fallthrough;

			case "Why give it to me?" (remove):
				say("\"It is said that the Champion shall need the keys to the land before Balance shall be restored. I think that this was meant symbolically, but the keyring was made for thee anyway. In this way, Order recognizes what thou shalt do for us all.\"");
				fallthrough;

			case "Serpent's Fang" (remove):
				say("\"Serpent's Fang is the name of this keep, ",
					var0001,
					". It was so designated because this was once the keep from which all Order attacks on Chaos were launched.");
				say("\"Commander Ardiniss, who I now replace, was a brilliant tactician. He held this keep and its surroundings through some of the most bloody fighting this war has yet seen. It was during that time that the warriors began referring to the keep as DeathWatch.");
				say("\"Ardiniss' loss was a sad blow as the tides of war turned. Now Serpent's Fang holds the line of retreat, not the forefront of the war, and DeathWatch has taken on another meaning... watching for the fall of Chaos.\"");
				fallthrough;

			case "nothing more":
				say("\"As thou dost wish... What else shall we speak of?\"");
				UI_pop_answers();
				fallthrough;

			case "bye":
				if (gflags[HAVE_SILVER_SEED] || gflags[PLANTED_SILVER_SEED]) {
					say("\"I wish thee luck in thy journeys, Champion of Balance. I am sure that thy road will be long...\"");
				} else {
					say("\"I am still unconvinced that thou art the Champion of Balance. I suppose only time will tell. Thou art free to go, but I shall be watching thee...\"");
				}
				UI_remove_npc_face0();
				AVATAR->item_say("@Farewell!@");
				Func097F(item, "@Mind thy duty!@", 0x0002);
				set_schedule_type(LOITER);
				break;
		}
	}
}

extern var Func0953 0x953 ();
extern var Func0954 0x954 ();
extern var Func097D 0x97D (var var0000, var var0001, var var0002, var var0003, var var0004);
extern void Func07D1 object#(0x7D1) ();
extern void Func097F 0x97F (var var0000, var var0001, var var0002);
extern var Func08FB 0x8FB ();
extern var Func0955 0x955 ();
extern void Func086B 0x86B ();
extern void Func08FE 0x8FE ();
extern var Func09AE 0x9AE (var var0000);

void Func03B2 shape#(0x3B2) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;
	var var0008;
	var var0009;
	var var000A;

	var0000 = Func0953();
	var0001 = UI_part_of_day();
	var0002 = Func0954();
	var0003 = Func097D(PARTY, 0x0001, 0x03E4, QUALITY_ANY, FRAME_ANY);
	var0004 = Func097D(PARTY, 0x0001, 0x03E9, QUALITY_ANY, FRAME_ANY);
	var0005 = Func097D(PARTY, 0x0001, 0x03DE, QUALITY_ANY, FRAME_ANY);
	var0006 = Func097D(PARTY, 0x0001, 0x0128, QUALITY_ANY, 0x0003);
	var0007 = Func097D(PARTY, 0x0001, 0x03F5, QUALITY_ANY, FRAME_ANY);
	if ((var0001 > EARLY) || (var0001 < EVENING)) {
		var0001 = "day";
	} else {
		var0001 = "evening";
	}
	if (event == DOUBLECLICK) {
		AVATAR->item_say("@Greetings, sir.@");
		item->Func07D1();
		Func097F(item, "@Greetings to thee.@", 0x0002);
		set_schedule_type(TALK);
	}
	if (event == STARTED_TALKING) {
		set_schedule_type(STANDTHERE);
		clear_item_say();
		SUROK->show_npc_face0(0x0000);
		var0008 = get_npc_id();
		if (gflags[HAVE_SILVER_SEED] || gflags[PLANTED_SILVER_SEED]) {
			say("\"Who would have thought that lowly Surok would be speaking with the Champion of Balance? I am honored.");
			say("\"How may I aid thee, ",
				var0000,
				"?\"");
		} else if (!var0008) {
			if (!gflags[AVATAR_IS_DEAD]) {
				say("\"Ah, a new face! And who art thou, stranger, that thou doth risk death by coming here to Serpent's Fang? A servant of Chaos? Hmmm... I think not.\"");
				say("\"I am Surok, the Healer of Serpent's Fang and I perceive that thou art lost. Perhaps I can aid thee, if thou dost wish.\"");
			} else {
				say("\"'Tis lucky for thee that a patrol didst find thee, stranger! Thou wert unconscious and bleeding from many wounds... Ah, but I forget my manners!\"");
				say("\"I am Surok, the Healer of Serpent's Fang and I didst heal thee of thy wounds.\"");
				gflags[AVATAR_IS_DEAD] = false;
			}
			set_npc_id(0x0001);
		} else if (!gflags[AVATAR_IS_DEAD]) {
			say("\"Thou dost return? Perhaps to regale me with stories of thine exploits?\"");
		} else {
			say("\"Ah, ",
				var0000,
				", thou hast awakened. Good. Thou hast been revived by mine art. Thou art able to resume thine adventures now.\"");
			gflags[AVATAR_IS_DEAD] = false;
		}
		add(["healing", "information", "bye"]);
		if (UI_get_array_size(Func08FB()) > 0x0000) {
			say("\"Ah, one of thy companions hath been slain. 'Tis within my power to heal thy friend if thou dost wish...\"");
			add("resurrection");
		}
		var0009 = 0x0000;
		var000A = 0x0006;
		converse (0) {
			case "healing":
				say("\"Dost thou need healing?\"");
				if (Func0955()) {
					Func086B();
				} else {
					say("\"As thou dost wish.\"");
				}
				fallthrough;

			case "resurrection" (remove):
				Func08FE();
				fallthrough;

			case "information":
				if ((!gflags[ASKED_SUROK_TOO_MUCH]) || (UI_get_timer(0x0002) > 0x0004)) {
					say("\"I have been here at Serpent's Fang longer than most. Perhaps I can aid thee with information. What dost thou wish to know of?\"");
					UI_push_answers();
					var0009 = 0x0001;
					add(["people", "places", "strange items", "nothing more"]);
				} else {
					say("\"I must be about my duties. Perhaps we can discuss this another time, my friend.\"");
				}
				fallthrough;

			case "people" (remove):
				say("\"There are very few of us here, ",
					var0002,
					". I can tell thee what I know, but it is not much. Whom here at Serpent's Fang dost thou wish to know of?\"");
				UI_push_answers();
				var0009 = 0x0002;
				add(["Isstanar", "Elissa", "Tsandar", "Guards", "Strangers", "nothing more"]);
				fallthrough;

			case "places" (remove):
				say("\"I know of many places, ",
					var0002,
					". Which dost thou wish to know of?\"");
				UI_push_answers();
				var0009 = 0x0002;
				add(["Abandoned Outpost", "The Maze", "Aram-Dol's Lair", "nothing more"]);
				fallthrough;

			case "strange items" (remove):
				say("\"Show me thine items, I will tell thee what I know, if anything.\"");
				UI_push_answers();
				var0009 = 0x0002;
				if (var0003) {
					add("Loriel's Gift");
				}
				if (var0004) {
					add("Gauntlets");
				}
				if (var0005) {
					add("Axe");
				}
				if (var0006) {
					add("Ring");
				}
				if (var0007) {
					add("Helm");
				}
				add("nothing more");
				fallthrough;

			case "Gauntlets" (remove):
				say("\"Hmmm... These are obviously enchanted to aid thee in the speedy deliverance of thy blows, yet I have never seen their like. They do have the look of an Order armourer, 'tis true, yet the stench of evil doth linger upon them. Thou wouldst be wise not to trust in these gloves, ",
					var0002,
					"!\"");
				var000A = Func09AE(var000A);
				fallthrough;

			case "Axe" (remove):
				say("\"'Tis truly a wonderful weapon, ",
					var0002,
					"! Where didst thou come by such? I do not know exactly what it does, but I am sure that thou dost use it well...\"");
				var000A = Func09AE(var000A);
				fallthrough;

			case "Ring" (remove):
				say("\"Thou didst take great risk in acquiring this ring, ",
					var0002,
					". 'Tis Shal's ring itself. I would wager that thou fought many foul creatures in the Fiend's Lair... but dost thou know the true power of this ring? 'Twill allow thee to cast spells without reagents! Thou hast perhaps one of the most potent artifacts ever made!\"");
				var000A = Func09AE(var000A);
				fallthrough;

			case "Loriel's Gift" (remove):
				say("\"Why, thou dost wear the Belt of Strength! 'Twas made by Commander Ardiniss's wife, Loriel, many years ago. If I remember correctly, she made the belt from the hair of Giants and then enchanted it.  Loriel was a gifted mage, but alas, was yet another victim of this damnable war with Chaos! As thou dost wear her handiwork, thou shouldst remember her, ",
					var0002,
					"...\"");
				var000A = Func09AE(var000A);
				fallthrough;

			case "Helm" (remove):
				say("\"Thou dost possess the Helm of Light! 'Twas worn by Issik the Architect when he did create the Maze. Didst thou discover the secret of the Maze, ",
					var0002,
					"?\"");
				if (Func0955()) {
					say("\"Thou art truly the Champion of Balance! None other except Issik could navigate that Maze of Death. From my talks with Issik, the Helm will never cease giving light and the only manner of dousing it's brilliance is to cover it over or put it in a bag.\"");
				} else {
					say("\"Then how didst thou come by the Helm? Issik disappeared into his creation and never returned. *Ah, 'tis of no matter. Do not listen to the ramblings of an old man, ",
						var0002,
						".\"");
				}
				var000A = Func09AE(var000A);
				fallthrough;

			case "Isstanar" (remove):
				say("\"He is the Commander of our outpost, though he was not such a year ago. Do not cross him, ",
					var0000,
					", for he is terrible in his anger! He believes that those who have not given their lives for the cause of Order are not truly worthy. He has become the @Ultimate Warrior of Order@ and has cast his human body away to become metal. I believe that his soul has become as hardened as his exterior.\"");
				var000A = Func09AE(var000A);
				fallthrough;

			case "Elissa" (remove):
				say("\"She is our Mage. If thou hast gold enough, I am certain she would be willing to teach thee spells. Though she is young, she would like nothing better than to stay youthful -- forever.\"");
				var000A = Func09AE(var000A);
				fallthrough;

			case "Tsandar" (remove):
				say("\"Tsandar is a friend, and I will not speak ill of him. Though I wish that he would confide in me what it is that bothers him these days. He is troubled and perhaps with good cause. I will speak no more on this subject, ",
					var0002,
					".\"");
				var000A = Func09AE(var000A);
				fallthrough;

			case "Guards" (remove):
				say("\"The Automatons that thou dost see about our Outpost are our servitors. They act as guards as thou no doubt know already, but they also serve in other ways. Cooks, tailors, blacksmiths... all of these menial tasks can be performed by our metal men.\"");
				var000A = Func09AE(var000A);
				fallthrough;

			case "Strangers" (remove):
				say("\"Other than thyself, ",
					var0002,
					", there have been few that were brave enough to enter our Keep. There are three women that profess to be on the side of Order, but I doubt their word. Indeed, I believe them to be agents of Chaos, but they have not attacked us here at Serpent's Fang, and have fought the Chaos creatures that venture forth from the surrounding tunnels. They wait, but for what I am not certain.\"");
				var000A = Func09AE(var000A);
				fallthrough;

			case "Abandoned Outpost" (remove):
				say("\"Nine months ago, our Commander was Ardiniss. He led an expedition into our southwest outpost to clear it of infiltrating Chaos agents, and to set mystic traps to kill those that would surely come again. We knew that he was successful in creating the pitfalls, but he never returned. We assumed he was slain by those he sought to slay. He was a good man. If thou dost find his body in thy wanderings, 'twould be kind of thee to return him here to Serpent's Fang.\"");
				var000A = Func09AE(var000A);
				fallthrough;

			case "The Maze" (remove):
				say("\"Hah! 'Twas built by an exceedingly crafty architect indeed! An item of importance was hidden there, and that is all I shall say on the matter.\"");
				var000A = Func09AE(var000A);
				fallthrough;

			case "Aram-Dol's Lair" (remove):
				say("\"Aram Dol is a foul thing that should be destroyed! It exists only to destroy and I fear that if our forces do not return soon, that creature of loathsome chaos will continue to test our defenses and send its unholy servants to our gate! Aram Dol is a powerful sorcerer, and controls items of great power. If thou wert to destroy this demon, I am certain that Isstanar would reward thee!\"");
				var000A = Func09AE(var000A);
				fallthrough;

			case "Loriel's Gift" (remove):
				say("\"Thou dost wear the Belt of Strength?! How didst thou come by it? It was thought lost these many months. No... no, I do not want to know, ",
					var0002,
					", though I would not show the others the Belt. They would not be as understanding as I and perhaps would demand that thou returnest it.\"");
				var000A = Func09AE(var000A);
				fallthrough;

			case "nothing more":
				if (var0009 == 0x0001) {
					UI_pop_answers();
					say("\"As thou dost wish...\"");
				} else {
					while (var0009 > 0x0001) {
						UI_pop_answers();
						var0009 -= 0x0001;
					}
					say("\"Is there anything else I can help thee with?\"");
				}
				fallthrough;

			case "bye":
				UI_remove_npc_face0();
				UI_remove_npc_face1();
				Func097F(AVATAR, (("@Good " + var0001) + "!@"), 0x0000);
				Func097F(item, "@Be careful!@", 0x0002);
				set_schedule_type(LOITER);
				abort;
		}
	}
}

extern var Func0953 0x953 ();
extern void Func07D1 object#(0x7D1) ();
extern void Func097F 0x97F (var var0000, var var0001, var var0002);
extern void Func0873 0x873 ();

void Func03B3 shape#(0x3B3) () {
	var var0000;
	var var0001;

	var0000 = get_npc_id();
	var0001 = Func0953();
	if (event == DOUBLECLICK) {
		if (!var0000) {
			AVATAR->item_say("@Pardon me, Milord.@");
		} else {
			AVATAR->item_say("@Pardon me, SubCommander.@");
		}
		item->Func07D1();
		Func097F(item, "@Dost thou address me?@", 0x0002);
		set_schedule_type(TALK);
	}
	if (event == STARTED_TALKING) {
		set_schedule_type(STANDTHERE);
		clear_item_say();
		TSANDAR->show_npc_face0(0x0000);
		if (!var0000) {
			say("\"Who art thou?! But wait -- Thou dost wear the Amulet of Balance!");
			say("\"I am no lord, stranger. I am merely a warrior. Thou mayest address me by name or title. I am SubCommander Tsandar.\"");
			set_npc_id(0x0001);
		} else if (gflags[HAVE_SILVER_SEED] || gflags[PLANTED_SILVER_SEED]) {
			say("\"I am honored to see thee again, Champion of Balance.\"");
			add("Congratulations");
		} else {
			say("\"Forgive my rudeness, ",
				var0001,
				". I fear I am not yet accustomed to the title of SubCommander.\"");
		}
		converse (["Train", "SubCommander", "Amulet of Balance", "bye"]) {
			case "Congratulations" (remove):
				if (gflags[HAVE_SILVER_SEED] && (!gflags[PLANTED_SILVER_SEED])) {
					say("\"It took a mighty warrior to retrieve those Orbs, ",
						var0001,
						". Thou art truly worthy of carrying the Silver Seed.");
					say("\"Plant it quickly, ",
						var0001,
						". It may be the only hope our battered world has of surviving this war.\"");
				} else {
					say("\"Now that the Tree of Balance again graces our world, perhaps we can end this war soon.");
					say("\"Thou art truly the Champion of Balance.\"");
				}
				fallthrough;

			case "Train":
				Func0873();
				fallthrough;

			case "SubCommander" (remove):
				say("\"When I was assigned to this garrison, I was Senior File Leader. Then, nine months ago, when those Chaos fiends took Commander Ardiniss, I was was made Garrison Commander.");
				say("\"Naturally, now that Isstanar is here, I have become the SubCommander.\"");
				add(["Senior File Leader", "Chaos fiends", "Commander Ardiniss", "Isstanar"]);
				fallthrough;

			case "Senior File Leader" (remove):
				say("\"Ones rank denotes how many warriors one is responsible for. It is always an even number of men, measured in hands -- or groups of five.\"");
				add(["rank", "even number"]);
				fallthrough;

			case "rank" (remove):
				say("\"A Senior Warrior commands one hand of warriors, and reports to the Junior File Leader.");
				say("\"A Junior File Leader is in charge of two hands of warriors, and reports to the File Leader.");
				say("\"A File Leader oversees four hands of warriors, and reports to the Senior File Leader.\"");
				say("\"A Senior File Leader controls ten hands of warriors, and reports to the SubCommander of the Garrison. The SubCommander acts as the aide to the Garrison Commander.\"");
				fallthrough;

			case "even number" (remove):
				say("\"Of course, even! Dost thou not have two hands? Are there not two forces continually at war within the Void -- Order and vile Chaos?");
				fallthrough;

			case "Chaos fiends" (remove):
				say("\"Everyone knows that the followers of Chaos practice unnatural acts! By the two hands of Order, we shall wipe the Chaos abomination from the face of the land!\"");
				fallthrough;

			case "Commander Ardiniss" (remove):
				say("\"Commander Ardiniss was a brave man, ",
					var0001,
					". He was responsible for carving this keep out of hostile Chaos territory.");
				say("\"No warrior could match the Commander's mind for Logic. Yet even Logic is no match for the sheer number of Chaos followers that fell on us that day...");
				say("\"I regret that we were unable to wrest his body from those vile murderers. Ardiniss deserved a proper warrior's funeral.\"");
				add(["What is this place?", "sheer number"]);
				fallthrough;

			case "What is this place?" (remove):
				say("\"The Order High Command designated this keep as the Serpent's Fang. But our troops call it DeathWatch.");
				say("\"The battles have long since raged beyond us. It is our sad duty to continue to hold DeathWatch from any retreating Chaos minions.");
				say("\"We long for word of how the War of Imbalance turns.\"");
				add(["Order High Command", "battles"]);
				fallthrough;

			case "Order High Command" (remove):
				say("\"All respect to them!");
				say("\"The High Command are the officers that report directly to the Order Hierophant. It is their wisdom that will fulfill the will of the Order Serpent to unite the world under the Ethicality and Discipline of Order.\"");
				add(["Order Hierophant", "Order Serpent", "Ethicality", "Discipline"]);
				fallthrough;

			case "Order Hierophant" (remove):
				say("\"The Order Hierophant is our spiritual leader. She is the Voice of the Order Serpent. I would follow her orders even into the very face of death.");
				say("\"After those... those... Chaos monsters murdered the Great Hierophant, it was only natural that command of the land fall to Order. We will make them all pay for their crime!\"");
				add("Great Hierophant");
				fallthrough;

			case "Great Hierophant" (remove):
				say("\"Sithnos was the last Great Hierophant, ",
					var0001,
					". He was murdered when I was but a boy, over three hands of years ago now.");
				say("\"The Great Hierophant was the Voice of the Great Earth Serpent... Only the will of the Great Earth Serpent could keep the animosity of Order and Chaos at bay.");
				say("\"Only the Great Hierophant's wisdom kept Balance within the land.  The last Acolytes of Balance spirited Ssithnos' body away, and the warriors of Order swore vengeance upon Chaos...");
				say("\"We have been at war ever since.\"");
				fallthrough;

			case "Order Serpent" (remove):
				say("\"The Order Serpent dwells within the Void, eternally battling the Chaos Serpent. Only the strength of the Great Earth Serpent could separate these ancient enemies.");
				say("\"But something happened within the Void... I know not what. The power of the Great Earth Serpent is no longer felt, and we no longer have the wisdom of Sithnos to guide us.");
				say("\"Our land is doomed unless we can restore it to Order.\"");
				fallthrough;

			case "Ethicality" (remove):
				say("\"Ethicality is one of the major tenets of Order, ",
					var0001,
					". By forcing those depraved followers of Chaos to conform with the accepted moral standards of Order we shall end the decadence that Tolerance has spread.\"");
				add("Tolerance");
				fallthrough;

			case "Tolerance" (remove):
				say("\"Wouldst thou allow a thief or a murderer to enter thy home, to dwell alongside thy loved ones?");
				say("\"Yet this is what insanity Chaos preaches! They would have it thought that even those who practice unnatural acts must be accepted as part of the fabric of life!");
				say("\"Better that such fabric be unwoven or burned!\"");
				fallthrough;

			case "Discipline" (remove):
				say("\"Discipline is what gives meaning to my life! Once we have yoked the laggard followers of Chaos to the Discipline of Order, there will be peace in the land!");
				say("\"It matters not if one has no Enthusiasm for one's orders. Those in command know what must be done, that is enough for a true warrior.\"");
				add("Enthusiasm");
				fallthrough;

			case "Enthusiasm" (remove):
				say("\"Imagine what would happen if everyone went about doing only what they pleased, only what appealed to them! Nothing would ever work smoothly again, for there are always distasteful tasks to be performed.");
				say("\"Yet the followers of Chaos feel that no one should be constrained to do anything they do not wish to do! Who then would dig latrines, or collect refuse, or bury the dead?");
				say("\"The land would soon be overrun by disease and vermin!\"");
				fallthrough;

			case "battles" (remove):
				say("\"For more than two hands of years, Order has fought only a holding battle against the forces of Chaos. Nothing we did could give us an advantage over their numbers.");
				say("\"But now that we have the automatons, nothing can stand in our way! DeathWatch was situated on the spear's point in the confrontation... Now we guard the lines of retreat.");
				say("\"I only wish we knew more than what Commander Isstanar had to tell us when he arrived a few weeks ago.\"");
				add(["automatons", "DeathWatch"]);
				fallthrough;

			case "automatons" (remove):
				say("\"Are they not a marvel?! Look at how they go about their tasks without complaint! They have no cares, no concerns... only their assigned duty.");
				say("\"Since our mages discovered the way to imbue their metal bodies with life, Chaos has been without hope! With metal warriors to lead the way, victory will soon be ours!\"");
				fallthrough;

			case "DeathWatch" (remove):
				say("\"I am sorry. I should refer to the keep as the Serpent's Fang, but I think of it as DeathWatch... even so.\"");
				fallthrough;

			case "sheer number" (remove):
				say("\"I could not count them all, ",
					var0001,
					". They filled all the passageways.  It was all we could do to maintain our hold on the keep.\"");
				fallthrough;

			case "Isstanar" (remove):
				say("\"The epitome of Order warriors, ",
					var0001,
					"! Isstanar has forsaken the cares of the flesh and taken the body of an automaton!");
				say("\"Eternal life and service to Order are his. It is quite an honor to have him assigned as our new Commander. I am proud that he has allowed me to become his aide.");
				say("\"Perhaps one day I too will be worthy of a Commander's position... And I shall not have to make these endless circuits of a nearly empty garrison!\"");
				add("taken the body");
				fallthrough;

			case "taken the body" (remove):
				say("\"I know not how it is accomplished. It is a secret closely guarded by the Order Hierophant and the High Command. Thou couldst ask Isstanar if thou dost desire, but I doubt that he will tell thee anything.");
				say("\"In fact, there is a cold arrogance about him. He does not speak with any of the command unless it is in the line of duty. His commitment to Discipline is absolute, but he does little to ease our minds.\"");
				fallthrough;

			case "Amulet of Balance" (remove):
				say("\"Thou dost not know what thou dost wear?! Couldst thou truly be the warrior of prophecy and not know what it is that thou dost wear?");
				say("\"Perhaps I should send thee to speak with Surok. He is the closest thing we have to a Keeper of Knowledge. I canst tell thee what I know, but I fear that it will do thee little good.\"");
				add(["warrior of prophecy", "Surok"]);
				fallthrough;

			case "warrior of prophecy" (remove):
				say("\"When the Great Hierophant was struck down, tales spread through the land saying that a warrior would arise to avenge the death of Sithnos.");
				say("\"The Amulet thou dost wear is one that only the Champion of Balance could wear. I do not know how thou couldst wear it and live, if thou art not the chosen Champion.");
				say("\"But I do not understand how thou couldst not know of thy duty, if thou art the chosen Champion. This is most perplexing... My Logic does not seem equal to the task. Speak with Isstanar or Surok.\"");
				add("Champion of Balance");
				fallthrough;

			case "Champion of Balance" (remove):
				say("\"In the history of our people there were times when a group of disbelievers refused to accept the authority of the Great Hierophant.");
				say("\"It would be unseemly for such a holy man to take arms against anyone. So a warrior was chosen from among the Acolytes of Balance to go forth and subdue the renegades. These warriors were without equal and never failed, no matter what the odds.\"");
				fallthrough;

			case "Surok" (remove):
				say("\"Surok is our healer. He is very old, and I fear that his resolve is weakening. He has not yet failed in his duty, but I have advised Isstanar to watch him closely nonetheless.");
				say("\"We cannot allow any lapse in Discipline. I suspect that he has lost sight of the absolute Ethicality.\"");
				add(["resolve weakening", "lost sight"]);
				fallthrough;

			case "resolve weakening" (remove):
				say("\"Surok has been a fearless warrior in his day, as well as a healer. It is a sign of his aging, assuredly, but he seems... well, less sure of the right of our cause.");
				say("\"I hope that I die in battle, that no one may doubt my dedication to Order!\"");
				fallthrough;

			case "lost sight" (remove):
				say("\"We captured a Chaos monster lurking on the outskirts of the keep nearly a month ago. It was a fearsome beast -- an impossible cross between a man and a cat.");
				say("\"It was my immediate thought that this creature might be Chaos' answer to our automatons. So I brought the beast to Surok to dissect.");
				say("\"I have no way to prove this, of course, else I would have gone to Isstanar. But I believe that Surok was taken in with pity for the beast and allowed it to escape.");
				say("\"The beast fled into the Endless Maze, and we have been unable to recapture it. I could not afford to risk any warriors to hunt it down, and we have not seen the monster again.\"");
				add("Endless Maze");
				fallthrough;

			case "Endless Maze" (remove):
				say("\"Issik the Architect came to the keep before the start of the war. It was his duty to create an impossible maze to protect the treasures of the Order.");
				say("\"But when the war started, Issik was told that he only had three months to complete the work. No one knows what became of him, for he never came out.");
				say("\"The three rescuers who sought to find him never returned. The entrance to the Maze was locked... until the beast stole the key during its escape.\"");
				fallthrough;

			case "bye":
				UI_remove_npc_face0();
				Func097F(AVATAR, "@Goodbye!@", 0x0000);
				Func097F(item, "@Have Discipline!@", 0x0002);
				set_schedule_type(LOITER);
				break;
		}
	}
}

extern void Func09BB 0x9BB (var var0000, var var0001);

void Func03B5 shape#(0x3B5) () {
	UI_close_gumps();
	Func09BB(item, event);
}

extern void Func09BB 0x9BB (var var0000, var var0001);

void Func03B6 shape#(0x3B6) () {
	if (get_item_quality() == 0x000A) {
		if (gflags[IOLO_ACCUSED] || (gflags[DUPRE_ACCUSED] || gflags[SHAMINO_ACCUSED])) {
			abort;
		}
	}
	UI_close_gumps();
	Func09BB(item, event);
}

extern void Func0916 0x916 ();
extern void Func087C 0x87C ();
extern void Func097F 0x97F (var var0000, var var0001, var var0002);
extern var Func0994 0x994 ();
extern void Func07D3 object#(0x7D3) ();

void Func03BB shape#(0x3BB) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;

	if (event == DOUBLECLICK) {
		var0000 = AVATAR->get_readied(SI_AMULET);
		if (var0000 == item) {
			var0001 = var0000->get_item_frame();
			var0002 = var0000->get_item_shape();
			if ((var0002 == 0x03BB) && (var0001 == 0x0002)) {
				Func0916();
				abort;
			}
			if ((var0002 == 0x03BB) && (var0001 == 0x0009)) {
				Func087C();
				abort;
			}
		}
	}
	if (event == PATH_SUCCESS) {
		if (!gflags[USED_AMULET_OF_BALANCE]) {
			gflags[USED_AMULET_OF_BALANCE] = true;
			save_pos();
			AVATAR->set_item_flag(DONT_MOVE);
			Func097F(AVATAR, "@What?@", 0x0023);
			Func097F(AVATAR, "@Why isn't this working?@", 0x0037);
			var0003 = script AVATAR {
				nohalt;
				wait 2;
				face south;
				wait 2;
				actor frame bowing;
				wait 2;
				repeat 30 {
					actor frame kneeling;
				};
				wait 30;
				call Func07D3;
			};
		} else {
			var0003 = script AVATAR {
				nohalt;
				wait 2;
				face south;
				wait 2;
				actor frame bowing;
				wait 2;
				repeat 10 {
					actor frame kneeling;
				};
				call Func03BB;
			};
		}
	}
	if (event == SCRIPTED) {
		var0004 = Func0994();
		if (var0004 == 0x0020) {
			teleport_to_saved_pos();
			abort;
		}
		save_pos();
		PARTY->move_object([0x0A87, 0x0B02, 0x0002]);
		abort;
	}
}

extern void Func097F 0x97F (var var0000, var var0001, var var0002);
extern void Func07D1 object#(0x7D1) ();
extern var Func0955 0x955 ();
extern var Func097D 0x97D (var var0000, var var0001, var var0002, var var0003, var var0004);

void Func03BD shape#(0x3BD) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;

	var0000 = get_npc_id();
	if (event == PROXIMITY) {
		if (get_schedule_type() == PATROL) {
			var0001 = ["@Leave Yurel alone!@", "@Stay away from Yurel!@", "@Yurel wants to go home!@", "@Oh, woe!@", "@Yurel hungry!@", "@Help me!@"];
			Func097F(item, var0001[UI_get_random(UI_get_array_size(var0001))], 0x0000);
		}
	}
	if (event == DOUBLECLICK) {
		if (!var0000) {
			AVATAR->item_say("@Stop, monster!@");
		} else {
			AVATAR->item_say("@Ho, Yurel!@");
		}
		YEARL->Func07D1();
		if (!var0000) {
			Func097F(item, "@I am no monster!@", 0x0002);
		} else {
			Func097F(item, "@Good to see thee.@", 0x0002);
		}
		set_schedule_type(TALK);
	}
	if (event == STARTED_TALKING) {
		set_schedule_type(STANDTHERE);
		clear_item_say();
		YUREL->show_npc_face0(0x0000);
		var0000 = get_npc_id();
		if (!var0000) {
			say("\"I am Yurel. Yurel is no monster. Yurel means no one harm.");
			say("\"Yurel wishes only to be left in peace... and to go home.\"");
			set_npc_id(0x0001);
		} else {
			say("\"Have they stopped looking for monsters yet? Can Yurel go home in peace now?\"");
		}
		if (gflags[KNOW_YUREL_LOVES_CHEESE] == true) {
			add("food");
		}
		converse (["monster", "peace", "home", "bye"]) {
			case "monster" (remove):
				say("\"Yurel knows not how he came to be this way... so unlike others. Yurel has been told that he was an... experiment long ago gone wrong.");
				say("\"Yurel does not care. Yurel breaths. Yurel fears. Yurel loves. That makes Yurel the same as others, though Yurel wears fur or not.\"");
				add("experiment");
				fallthrough;

			case "experiment" (remove):
				say("\"Yurel knows not who did such a thing, or why. The Master of Tolerance said that Chaos did not do such a thing. He said that it was those of Order.");
				say("\"Yurel does not care. Yurel here now, and must find a way home. Yurel only wants to live... Do not others feel the same way?\"");
				add(["Chaos", "Order"]);
				fallthrough;

			case "Chaos" (remove):
				say("\"The Master of Tolerance told Yurel that his home was a place dedicated to Chaos. Yurel was not sure what this meant. Yurel was only happy that Yurel could stay there and be useful.");
				say("\"Yurel does not understand why the others hate one another. Are they not the same? They have no fur, as Yurel does. Yurel is confused... and hungry.\"");
				fallthrough;

			case "Order" (remove):
				say("\"Yurel often saw warriors of Order as Yurel went about hunting. Yurel learned quickly to avoid them, for they would beat Yurel up if they could catch Yurel.");
				say("\"Now they have killed Yurel's friends. Killed the Master of Tolerance who took Yurel in. Yurel wishes they would go away. It was better before they took over.\"");
				fallthrough;

			case "peace" (remove):
				say("\"Yurel remembers peace. Yurel wishes to the end of his days without pain and fear. Yurel wishes what others wish, to see this fighting end.");
				say("\"And food... Food would be good. Yurel is very hungry.\"");
				add(["fighting", "food"]);
				fallthrough;

			case "fighting" (remove):
				say("\"There has been fighting for a long, long time now. Something happened when Yurel was away hunting. Yurel knows not what.");
				say("\"Those of Order who captured Yurel called Yurel a murderer. But Yurel has never harmed others. Yurel has hunted to bring others food. Yurel knows not why they say such things.\"");
				add("captured");
				fallthrough;

			case "captured" (remove):
				say("\"Warriors of Order found Yurel out hunting. They beat Yurel and dragged Yurel to the cruel place beyond these walls. They wanted to cut Yurel up... So Yurel ran away. Yurel not dumb.");
				say("\"Yearl hoped that if Yurel took their ball they would be too busy looking for it to hunt for Yurel. Yurel must have been right... They have not come for Yurel yet, and Yurel still has the ball.\"");
				add("ball");
				fallthrough;

			case "ball" (remove):
				say("\"Yurel knows not what is so special about it. It is pretty. It sat upon a pedestal. So it must have been important.\"");
				fallthrough;

			case "food" (remove):
				if (gflags[HAVE_PURPLE_ORB]) {
					say("\"Yurel thanks thee for the cheese.");
					say("\" Yurel loves cheese.\"");
				} else {
					say("\"Yurel is so hungry. Yurel has not had food in many days. Yurel would be willing to trade thee Yurel's ball for cheese.");
					say("\"Yurel loves cheese...\"");
					say("\"Dost thou have cheese thou wouldst give Yurel?\"");
					if (Func0955()) {
						var0002 = Func097D(AVATAR, 0x0001, 0x0179, QUALITY_ANY, 0x001A);
						var0003 = Func097D(AVATAR, 0x0001, 0x0179, QUALITY_ANY, 0x001B);
						var0004 = Func097D(AVATAR, 0x0001, 0x0179, QUALITY_ANY, 0x001C);
						if (var0002 || (var0003 || var0004)) {
							if (var0002) {
								var0005 = UI_remove_party_items(0x0001, 0x0179, QUALITY_ANY, 0x001A, 0x0012);
								say("\"Oh, Yurel is so happy! Thou art kind, kind, kind! The ball is yours... But be careful of the warriors, they are looking for it.\"");
								var0005 = AVATAR->add_cont_items(0x0001, 0x01C2, QUALITY_ANY, 0x0009, 0x0000);
							} else {
								if (var0003) {
									var0005 = UI_remove_party_items(0x0001, 0x0179, QUALITY_ANY, 0x001B, 0x0012);
								} else {
									var0005 = UI_remove_party_items(0x0001, 0x0179, QUALITY_ANY, 0x001C, 0x0012);
								}
								say("\"Oh, Yurel is so happy! Thou art kind, kind, kind! The ball is yours... But be careful of the warriors, they are looking for it.\"");
								var0005 = AVATAR->add_cont_items(0x0001, 0x01C2, QUALITY_ANY, 0x0009, 0x0000);
								gflags[HAVE_PURPLE_ORB] = true;
							}
						} else {
							say("\"Thou dost tease Yurel! Thou dost not have cheese!");
							say("\"But if thou dost find some, Yurel will still trade.\"");
							gflags[KNOW_YUREL_LOVES_CHEESE] = true;
						}
					} else {
						say("\"If thou dost change thy mind, Yurel will still trade.\"");
						gflags[KNOW_YUREL_LOVES_CHEESE] = true;
					}
				}
				fallthrough;

			case "home" (remove):
				say("\"Yurel's home was the Temple of Tolerance. They accepted Yurel there. Did not throw stones at Yurel. Let Yurel help, catch food for the others. Teach Yurel how to eat so as not to frighten others.");
				say("\"Yurel had friends. Yurel had a safe place to sleep. Yurel worked hard and had fun. Yurel wants to go home...\"");
				add("Temple of Tolerance");
				fallthrough;

			case "Temple of Tolerance" (remove):
				say("\"The Temple of Tolerance was the home of those the others did not want. Yurel was friends with many there.");
				say("\"Yurel does not care if they were not smart, or if they looked different... Yurel looks different from all others. Yurel does not understand why others turn out their own children for looking different. They look enough alike to Yurel.");
				say("\"Perhaps Yurel will never know. Perhaps Yurel will never live to see home again. Yurel is lonely... and hungry.\"");
				fallthrough;

			case "bye":
				UI_remove_npc_face0();
				Func097F(AVATAR, "@Goodbye.@", 0x0000);
				Func097F(item, "@Take care.@", 0x0002);
				break;
		}
	}
}

extern var Func097D 0x97D (var var0000, var var0001, var var0002, var var0003, var var0004);
extern var Func0992 0x992 (var var0000, var var0001, var var0002, var var0003);
extern void Func0887 0x887 (var var0000);
extern void Func0400 object#(0x400) ();

void Func03BE shape#(0x3BE) () {
	var var0000;
	var var0001;
	var var0002;

	var0000 = Func097D(PARTY, 0x0001, 0x0289, QUALITY_ANY, 0x000D);
	if (event == DOUBLECLICK) {
		if (var0000 || gflags[ROPE_ON_WELL]) {
			AVATAR->si_path_run_usecode(get_object_position(), SI_PATH_SUCCESS, item, Func03BE, true);
			UI_set_path_failure([Func0400], item, SI_PATH_FAILURE);
		} else if ((!var0000) || (!gflags[ROPE_ON_WELL])) {
			var0001 = Func0992(0x0001, "@Maybe we can climb down?!@", "@Maybe I can climb down?!@", true);
			var0002 = Func0992(0x0001, "@But with what?@", 0x0000, true);
			abort;
		} else {
			var0001 = Func0992(0x0001, "@We need the rope!@", "@I need the rope!@", true);
			abort;
		}
	}
	if ((event == SI_PATH_SUCCESS) || ((event == SI_PATH_FAILURE) || (event == SCRIPTED))) {
		Func0887(item);
	}
}

extern void Func091A 0x91A (var var0000);
extern void Func063D object#(0x63D) ();

void Func03C0 shape#(0x3C0) () {
	var var0000;
	var var0001;

	if (event == DOUBLECLICK) {
		Func091A(0x03C0);
		abort;
	}
	var0000 = get_npc_number();
	if ((event == SCRIPTED) && var0000->get_item_flag(CAN_FLY)) {
		if (var0000->get_item_flag(IN_PARTY)) {
			var0001 = script item {
				nohalt;
				call Func063D;
			};
			var0001 = script item after UI_die_roll(0x0064, 0x00AF) ticks {
				nohalt;
				call Func03C0;
			};
		} else {
			var0000->clear_item_flag(CAN_FLY);
		}
		abort;
	}
	if ((event == SCRIPTED) && (!var0000->get_item_flag(CAN_FLY))) {
		item_say("@Whoa. Bad shrooms.@");
		if (var0000 == AVATAR) {
			var0000->clear_item_flag(CONFUSED);
		}
	}
}

extern var Func0992 0x992 (var var0000, var var0001, var var0002, var var0003);
extern void Func090D 0x90D (var var0000, var var0001, var var0002, var var0003, var var0004, var var0005, var var0006);
extern var Func090C 0x90C (var var0000, var var0001);

void Func03CA shape#(0x3CA) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;

	if (event == DOUBLECLICK) {
		var0000 = get_npc_id();
		if (var0000 < 0x0003) {
			set_npc_id(var0000 + 0x0001);
			abort;
		}
		if (UI_die_roll(0x0001, 0x000A) == 0x0001) {
			set_npc_id(0x0000);
			var0001 = Func0992(0x0001, "@That's baaaad!@", "@I'm baaaad!@", true);
			halt_scheduled();
			set_schedule_type(WAIT);
			var0002 = [1, 1];
			var0003 = [0, 0];
			var0004 = -1;
			Func090D(item, var0002, var0003, var0004, Func03CA, item, PATH_SUCCESS);
		}
	}
	if (event == PATH_SUCCESS) {
		var0005 = Func090C(AVATAR, item);
		var0006 = Func090C(item, AVATAR);
		AVATAR->halt_scheduled();
		AVATAR->set_item_flag(DONT_MOVE);
		if (UI_is_pc_female()) {
			var0001 = script AVATAR {
				face var0005;
				actor frame sleeping;
			};
			if (!var0001) {
				AVATAR->clear_item_flag(DONT_MOVE);
			}
			var0001 = script item {
				face var0006;
				wait 20;
				call Func03CA;
			};
			if (!var0001) {
				AVATAR->clear_item_flag(DONT_MOVE);
			}
		} else {
			var0001 = script AVATAR {
				face var0005;
				actor frame kneeling;
			};
			if (!var0001) {
				AVATAR->clear_item_flag(DONT_MOVE);
			}
			var0001 = script item {
				face var0005;
				wait 20;
				call Func03CA;
			};
			if (!var0001) {
				AVATAR->clear_item_flag(DONT_MOVE);
			}
		}
	}
	if (event == SCRIPTED) {
		AVATAR->clear_item_flag(DONT_MOVE);
		set_schedule_type(SHY);
		var0001 = Func0992(0x0001, "@Thou art SICK!@", "@That felt good!@", true);
	}
}

extern var Func0953 0x953 ();
extern var Func097D 0x97D (var var0000, var var0001, var var0002, var var0003, var var0004);
extern void Func07D1 object#(0x7D1) ();
extern void Func097F 0x97F (var var0000, var var0001, var var0002);
extern var Func0955 0x955 ();
extern void Func09AD 0x9AD (var var0000);

void Func03CF shape#(0x3CF) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;

	var0000 = Func0953();
	var0001 = Func097D(PARTY, 0x0001, 0x0128, QUALITY_ANY, 0x0003);
	var0002 = false;
	if (event == DOUBLECLICK) {
		AVATAR->item_say("@I would have words with thee!@");
		item->Func07D1();
		Func097F(item, "@They will be thine last.@", 0x0005);
		set_schedule_type(TALK);
	}
	if (event == STARTED_TALKING) {
		set_schedule_type(DANCE);
		THE_FIEND->show_npc_face0(0x0000);
		add(["name", "bye"]);
		var0003 = get_npc_id();
		if (var0003) {
			say("\"How nice.  Thou hast returned to me.  Hast thou brought the ring?\"");
			var0004 = Func0955();
			if (var0004 == true) {
				if (var0001 == true) {
					say("\"Excellent.  Thou hast served me well, pawn.  Alas, I shall kill thee just the same.\"");
					Func09AD(item);
					abort;
				}
				say("\"Thou dost dare lie to me!  I shall make thee pay!\"");
				Func09AD(item);
				abort;
			}
			say("\"Curse thee!  I shall roast thine flesh!\"");
			Func09AD(item);
			abort;
		}
		say("\"Welcome, Simpleton.  Do not expect to stay long, for I am getting rather hungry and it has been months since I have eaten the flesh of a human.\"");
		set_npc_id(0x0001);
		converse (0) {
			case "name" (remove):
				say("\"I am the manifestation of the horrific images of thine mind's darkest recesses!  Ha!  I am Chaos Unrestrained!  Those cowards in the keep call me the Fiend!\"");
				add(["unrestrained", "orb"]);
				fallthrough;

			case "unrestrained" (remove):
				say("\"Fool!  Dost thou think those flimsy doors are my prison?  That the meager traps and inconsequential guards hold me here?  Nonsense!\"");
				add("Why stay?");
				fallthrough;

			case "Why stay?" (remove):
				say("\"The ring!  I am a prisoner of my former self, for without the ring I cannot right the world!\"");
				add(["former self", "ring", "right the world"]);
				fallthrough;

			case "former self" (remove):
				say("\"Master of reagents!  Wizard beyond compare!\"");
				add("master");
				fallthrough;

			case "master" (remove):
				say("\"I do not expect thee to comprehend, simpleton!  The Ring! Creator of the Ring!\"");
				if (!(var0002 == true)) {
					add("ring");
				}
				fallthrough;

			case "ring" (remove):
				say("\"Thou must know of the Ring of Shal.  Even the King of Fools knows of its powers.  Any idiot can see what importance it bears to my ambitions.\"");
				var0002 = true;
				add(["ambitions", "powers"]);
				fallthrough;

			case "right the world" (remove):
				say("\"Order is folly!  The world has blinded itself to this truth, and I shall force them to see!\"");
				add("see");
				fallthrough;

			case "see" (remove):
				say("\"I shall bring death to the hierophants to bring Chaos and freedom.  No longer shall men weaken themselves with reason! I shall liberate the entire world!\"");
				fallthrough;

			case "ambitions" (remove):
				say("\"I shall save the world.  I shall take away its order as it was taken from me.  Thus shall I show the world the truth.\"");
				fallthrough;

			case "powers" (remove):
				say("\"Fool!  Ignoramus!  I should slay you and add your bones to my collection!  Thou knowest well the powers of the ring!  If I had the reagents to spare I would strike thee down with a spell most dire!  If I had the ring...\"");
				add("reagents");
				fallthrough;

			case "reagents" (remove):
				say("\"Thou art not merely feigning stupidity, art thou?  With it on my finger, I need never use reagents, for it simulates their magical properties!  That is why I created the ring!  That is why I pledged myself to Chaos!\"");
				add("created");
				fallthrough;

			case "created" (remove):
				say("\"Yes, you fool.  I was Shal.  But Shal had not the knowledge to create his life's goal, so he called upon greater powers than he to complete his work.  The Chaos Serpent granted him that power, but there was a price.\"");
				add(["price", "greater powers"]);
				fallthrough;

			case "greater powers" (remove):
				say("\"Yes!  Greater powers!  He called to the Serpents of Order and Chaos.  He spoke with Demons.  Only the Chaos Serpent would hear him!\"");
				fallthrough;

			case "price" (remove):
				say("\"Price?  He was shown the error of his ways!  It was a gift! He was granted a year's time to complete his work, at which time he would be changed...into me.  Bless the Chaos Serpent for his Wisdom!\"");
				add(["changed", "time"]);
				fallthrough;

			case "changed" (remove):
				say("\"My dear moron, Shal was shown the wisdom of Chaos!  All traces of Order were removed from him; he became a paragon of Chaos.\"");
				add("paragon");
				fallthrough;

			case "paragon" (remove):
				say("\"Aye, a paragon of Chaos--me.  There were some Chaotics who said my words were those of a fanatic; that I am too extreme.  Ha!  They are all dead now.  That skeleton in the corner was Selioas; near you, Ajalsarthis. They now face the Chaos Serpent's wrath for defying me.\"");
				fallthrough;

			case "time" (remove):
				say("\"The Chaos Serpent was far too generous in granting him a full year.  Had it granted him but a month, I would already have saved the world!\"");
				add("generous");
				fallthrough;

			case "generous" (remove):
				say("\"Shal had time to hide the ring from me. He did give the ring to an animated suit of armor, with the orders to hide and guard it, even from himself.  I have not yet been able to recover it.\"");
				add(["recover", "armor"]);
				fallthrough;

			case "armor" (remove):
				say("\"The predecessors to automatons.  They cannot speak and can barely follow orders.  They make idiots like thyself seem intelligent.\"");
				add("orders");
				fallthrough;

			case "orders" (remove):
				say("\"I would not be surprised if the suit of armor forgot entirely about it.\"");
				add("forgot");
				fallthrough;

			case "forgot" (remove):
				say("\"The accursed thing may have noticed it days later and thought it was a rock!  It could be in a pile of rubble!  It might still have the ring in its hand!  Curse this world!\"");
				fallthrough;

			case "recover" (remove):
				say("\"My only thought thus far has been to see thine bones scattered across my floor, but you might yet be of use to me.  I shall let thee live if thou dost retrieve the ring and bring it to me.  Dost thou agree?\"");
				var0005 = Func0955();
				if (var0005 == true) {
					say("\"Ha!  Excellent!  Go then!  Bring me the ring!  Do not betray me or I shall sate myself by killing thee slowly!\"");
					abort;
				}
				say("\"Fool!  Simpleton!  Idiot!  Thou hast condemned thyself to death!\"");
				Func09AD(item);
				abort;

			case "bye":
				say("\"Not so fast, mealworm!  I have developed an appetite for thee!\"");
				Func09AD(item);
				abort;

			case "orb" (remove):
				say("\"I do not possess this orb, moron, nor have I any desire to. I do, however, recall an entertaining diversion perhaps one year ago.  A crazed soldier of Chaos stole it and brought it into my domain.\"");
				add("soldier");
				fallthrough;

			case "soldier" (remove):
				say("\"I assume he had been discovered and, rather than face the persuasive initiates of Discipline, sought asylum in my domain.  He fell victim to one of my more flamboyant traps. I'm sure he still has the orb on his charred body!\"");
		}
	}
}

extern void Func097F 0x97F (var var0000, var var0001, var var0002);

void Func03D0 shape#(0x3D0) () {
	var var0000;

	var0000 = get_item_frame();
	if (var0000 == 0x0000) {
		set_item_frame(0x0001);
		UI_play_sound_effect(0x000C);
		Func097F(DUPRE, "@Take care!@", 0x0003);
	}
	if (var0000 == 0x0001) {
		set_item_frame(0x0002);
		UI_play_sound_effect(0x000C);
		Func097F(ALE, "@Squawk!@", 0x0003);
		Func097F(SHAMINO, "@'Twas a wild throw.@", 0x0001);
	}
	if (var0000 == 0x0002) {
		set_item_frame(0x0003);
		Func097F(IOLO, "@Excellent shot!@", 0x0003);
		UI_play_sound_effect(0x000C);
	}
	if (var0000 == 0x0003) {
		set_item_frame(0x0000);
		Func097F(AVATAR, "@Another game?@", 0x0000);
	}
}

extern var Func0954 0x954 ();
extern var Func0953 0x953 ();
extern var Func0942 0x942 (var var0000);
extern void Func07D1 object#(0x7D1) ();
extern var Func0956 0x956 (var var0000);
extern var Func0955 0x955 ();
extern void Func0821 0x821 ();
extern void Func0822 0x822 ();
extern void Func0823 0x823 ();
extern void Func0824 0x824 ();
extern var Func0992 0x992 (var var0000, var var0001, var var0002, var var0003);
extern void Func097F 0x97F (var var0000, var var0001, var var0002);

void Func03D2 shape#(0x3D2) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;
	var var0008;
	var var0009;
	var var000A;
	var var000B;
	var var000C;
	var var000D;
	var var000E;
	var var000F;
	var var0010;

	var0000 = get_npc_id();
	var0001 = Func0954();
	var0002 = Func0953();
	var0003 = Func0954();
	var0004 = Func0942(IOLO);
	var0005 = Func0942(DUPRE);
	var0006 = Func0942(SHAMINO);
	var0007 = false;
	var0008 = false;
	var0009 = false;
	var000A = false;
	if (event == DOUBLECLICK) {
		item->Func07D1();
		set_schedule_type(TALK);
	}
	if (event == STARTED_TALKING) {
		DRAXINAR->show_npc_face0(0x0000);
		if (var0000 == false) {
			say("\"A human. How interesting. What dost thou want?\"");
			add(["Who art thou?", "bye"]);
		} else {
			say("\"Greetings, ",
				var0002,
				". How may I be of service to thee?\"");
			add(["information", "riddles", "bye"]);
		}
		converse (0) {
			case "Who art thou?" (remove):
				say("\"My, what an impudent hatchling. Thou hast the gall to march into my home, walk up to my presence on thy tiny, ridiculous legs, and dare to ask my name?!\"");
				say("\"I think that I shall be the one to ask the questions. We shall begin by asking thee what thou art called and why thou hast come to my domain.\"");
				var000B = Func0956(["I am the Avatar", ("I am " + var0002)]);
				if (var000B == "I am the Avatar") {
					say("\"How interesting.\"");
					set_npc_id(0x0001);
				}
				if (var000B == ("I am " + var0002)) {
					say("\"I see.\"");
					set_npc_id(0x0001);
				}
				say("\"Thou dost not look like those humans who call themselves Ophidians, but I canst smell their spore upon thee.\"");
				say("\"Art thou an official envoy from Serpent's Fang?\"");
				var000C = Func0955();
				if (var000C) {
					say("\"Hmmm. I suppose I can tolerate thy presence for a few moments.\"");
				} else {
					say("\"I thought as much! Thou dost not have that irrational look in thy eyes as do those ill-mannered Ophidians.\"");
				}
				say("\"Now then, why hast thou come to my domain?\"");
				var000D = Func0956(["No reason", "I'm looking for something", "I'm lost"]);
				if (var000D == "No reason") {
					say("\"I see. Well then, ",
						var0003,
						" ",
						var0002,
						", it hath been many years since one of thy kind hath dared to enter my domain.\"");
				}
				if (var000D == "I'm looking for something") {
					say("\"Yes, well... are not we all. Ahem. I suppose that I should not bore thee with my sophomoric philosophy.\"");
					say("\"Well, I won't ask thee what it is that thou are searching for. However, if thou art willing to stay a while I might be inclined to help thee find whatever it is thou dost seek.\"");
					add("help");
				}
				if (var000D == "I'm lost") {
					say("\"I'm sorry to hear that. I myself rarely venture far from my domain.\"");
					add("rarely");
				}
				say("\"Now that I know something about thee, it is only fair that I tell thee that my name is Draxinar. My friends, however, call me 'Stumpy'.\"");
				say("\"If thou dost desire to stay for a while I shall not prevent thee. Indeed, thy company would be most welcome.\"");
				say("\"And perhaps if thou art willing, I shall puzzle thee with my riddles.\"");
				say("\"Now then, how may I help thee?\"");
				add(["riddles", "information", "company", "Stumpy?"]);
				fallthrough;

			case "riddles":
				UI_push_answers();
				remove("riddles");
				if (var0007) {
					say("\"As I have said before, I am very good at riddles. Art thou sure that thou doth want to play?\"");
				} else {
					say("\"I don't like to boast, but I daresay there is no better riddlemaster than myself! Art thou sure thou doth want to play?\"");
					var0007 = true;
				}
				if (Func0955()) {
					if ((!gflags[SOLVED_LIARS_RIDDLE]) && ((!gflags[SOLVED_EARRINGS_RIDDLE]) && ((!gflags[SOLVED_LONGTOOTH_RIDDLE]) && (!gflags[SOLVED_CLOTH_RIDDLE])))) {
						say("\"Excellent! We shall start with a simple riddle.\"");
						say("\"If thou dost answer it correctly I shall give thee a more dificult riddle.\"");
						Func0821();
					}
					if (gflags[SOLVED_LIARS_RIDDLE] && ((!gflags[SOLVED_EARRINGS_RIDDLE]) && ((!gflags[SOLVED_LONGTOOTH_RIDDLE]) && (!gflags[SOLVED_CLOTH_RIDDLE])))) {
						say("\"Thou didst solve my first riddle. Shall I tell thee a slightly more dificult riddle?\"");
						if (Func0955()) {
							Func0822();
						} else {
							say("\"So be it. Perhaps thou wilt enjoy a riddle later.\"");
							add("bye");
						}
					}
					if (gflags[SOLVED_LIARS_RIDDLE] && (gflags[SOLVED_EARRINGS_RIDDLE] && ((!gflags[SOLVED_LONGTOOTH_RIDDLE]) && (!gflags[SOLVED_CLOTH_RIDDLE])))) {
						say("\"Thou didst solve my first two riddles. Dost thou want to hear another riddle?\"");
						if (Func0955()) {
							Func0823();
						} else {
							say("\"So be it. Perhaps thou wilt enjoy a riddle later.\"");
							add("bye");
						}
					}
					if (gflags[SOLVED_LIARS_RIDDLE] && (gflags[SOLVED_EARRINGS_RIDDLE] && (gflags[SOLVED_LONGTOOTH_RIDDLE] && (!gflags[SOLVED_CLOTH_RIDDLE])))) {
						say("\"Thou hath solved my first three riddles. Doth thou wish to try a more dificult one?\"");
						if (Func0955()) {
							say("\"Very well. See if thou canst solve my last riddle!\"");
							Func0824();
						} else {
							say("\"So be it. Perhaps thou wilt enjoy a riddle later.\"");
						}
					}
					if (gflags[SOLVED_LIARS_RIDDLE] && (gflags[SOLVED_EARRINGS_RIDDLE] && (gflags[SOLVED_LONGTOOTH_RIDDLE] && gflags[SOLVED_CLOTH_RIDDLE]))) {
						say("\"Thou hath solved all of mine riddles. Doth thou wish to hear them again?\"");
						if (Func0955()) {
							say("\"As thy wish. I shall start again with Rhys...\"");
							gflags[SOLVED_LIARS_RIDDLE] = false;
							gflags[SOLVED_EARRINGS_RIDDLE] = false;
							gflags[SOLVED_LONGTOOTH_RIDDLE] = false;
							gflags[SOLVED_CLOTH_RIDDLE] = false;
							Func0821();
						} else {
							say("\"I understand perfectly. Why wouldst thou, who hast already solved my riddles, want to hear them again?\"");
						}
					}
				} else {
					say("\"That is unfortunate. I had hoped to stump thee with my riddles. Later, perhaps, thou wilt change thy mind.\"");
					add("bye");
				}
				UI_pop_answers();
				fallthrough;

			case "information" (remove):
				say("\"And what dost thou wish to know?\"");
				add(["people", "places", "things"]);
				fallthrough;

			case "Stumpy?" (remove):
				if (var0008 == true) {
					say("\"As thou hast probably guessed by now, my friends started calling me 'Stumpy' because I loved to stump them with my riddles.\"");
					var000E = Func0992(0x0001, 0x0000, 0x0000, false);
					if ((var000E == IOLO) || ((var000E == SHAMINO) || (var000E == DUPRE))) {
						var000F = "@That is one of the worst nicknames I have ever\r\n\t\t\t\t\t\theard!@";
						var000E = Func0992(var000E, var000F, 0x0000, false);
						0x0000->set_conversation_slot();
					}
				} else {
					say("\"Tis my nickname. Perhaps when I know thee better, I shall tell thee the reason I was given this nickname...\"");
				}
				fallthrough;

			case "company" (remove):
				say("\"It hath been years since I last talked with anyone. Thou wouldst not believe how lonely the life of a dragon can be.\"");
				add("lonely");
				fallthrough;

			case "lonely" (remove):
				say("\"Everyone fears us. Dragons, that is. In the process of defending myself from countless attacks I have killed many men. Those who have come before thee let their weapons do the talking.\"");
				fallthrough;

			case "help" (remove):
				say("\"Indeed. I know that I do not look it, but I am several centuries old. Although I have lived in this area a mere dozen decades, I have managed to learn quite a few things...\"");
				fallthrough;

			case "rarely" (remove):
				say("\"My cave hast grown comfortable. I see little reason to traipse about the hinterlands like some hatchling, especially when one considers the many hazards in this area.\"");
				add("hazards");
				fallthrough;

			case "hazards" (remove):
				if (var0009 == true) {
					say("\"I have already mentioned the Opidian civil war, but I don't think thou art aware of the the liche known as Aram-Dol.\"");
					add("Aram-Dol");
				} else {
					say("\"Truly thou art not from these parts if thou art not aware of the civil war the Ophidians wage against each other, or the perils of Aram-Dol's domain!\"");
					add(["civil war", "Aram-Dol"]);
				}
				fallthrough;

			case "Ophidians" (remove):
				say("\"Yes, I have heard of these people and I don't particularly care for them.\"");
				add("don't care for them");
				fallthrough;

			case "The Fiend" (remove):
				say("\"I have heard a tale about a mad human who is known as 'The Fiend'. Apparently he is very dangerous.\"");
				say("\"Doesn't it strike\tthee as odd that the most evil creatures in these caverns are humans?\"");
				var000E = Func0992(0x0001, 0x0000, 0x0000, false);
				if ((var000E == IOLO) || ((var000E == SHAMINO) || (var000E == DUPRE))) {
					var000F = "@I suppose there has never been a dragon that was evil, eh?!@";
					var000E = Func0992(var000E, var000F, 0x0000, false);
					0x0000->set_conversation_slot();
					Func097F(var000E, "@Bloody Wyrm!@", 0x0000);
				}
				fallthrough;

			case "civil war" (remove):
				if (var0009 == true) {
					say("\"I have mentioned this war to thee already. Shall I repeat what I said?\"");
					if (Func0955()) {
						say("\"Very well.\"");
						say("\"The tribe of humans known as the Ophidians wage war upon one another. I do not know much about these humans.\"");
						say("\"They seem to worship the powers of Order and Chaos.\"");
					}
				} else {
					say("\"Aye. The tribe of humans known as the Ophidians wage war upon one another. I do not know much about these humans. They seem to worship the powers of Order and Chaos.\"");
					var0009 = true;
				}
				fallthrough;

			case "Aram-Dol" (remove):
				if (var000A == true) {
					say("\"I have already told described the liche to thee. Shall I tell thee about the liche again?\"");
					if (Func0955()) {
						say("\"A more evil or cunning creature thou wilt not find! Fortunately, the liche rarely ventures from its lair.");
						say("\"If thou art fond of thy life I would advise against venturing into Aram-Dol's domain.\"");
						var000E = Func0992(0x0001, 0x0000, 0x0000, false);
						if ((var000E == IOLO) || ((var000E == SHAMINO) || (var000E == DUPRE))) {
							var000F = "@The Avatar has fought the undead before and triumphed!@";
							var000E = Func0992(var000E, var000F, 0x0000, false);
							0x0000->set_conversation_slot();
							Func097F(var000E, "@<PCName> is not afraid!@", 0x0000);
						}
						say("\"Aram-Dol is not easily reached. The liche hath surrounded his lair with many creatures.\"");
						say("\"If I were thee, I would avoid his domain... Although, I have heard that the liche possesses two fabulous treasures.\"");
						add(["fabulous treasures", "creatures"]);
					} else {
						say("\"Very well. What shall we discuss next?\"");
					}
				} else {
					say("\"A more evil or cunning creature thou wilt not find! Fortunately, the liche rarely ventures from its lair.");
					say("\"If thou art fond of thy life I would advise against venturing into Aram-Dol's domain.\"");
					var000E = Func0992(0x0001, 0x0000, 0x0000, false);
					if ((var000E == IOLO) || ((var000E == SHAMINO) || (var000E == DUPRE))) {
						var000F = "@The Avatar has fought the undead before and triumphed!@";
						var000E = Func0992(var000E, var000F, 0x0000, false);
						0x0000->set_conversation_slot();
						Func097F(var000E, "@<PCName> is not afraid!@", 0x0000);
					}
					say("\"Aram-Dol is not easily reached. The liche hath surrounded his lair with many creatures.\"");
					say("\"If I were thee, I would avoid his domain... Although, I have heard that the liche possesses two fabulous treasures.\"");
				}
				add(["fabulous treasures", "creatures"]);
				fallthrough;

			case "Longtooth" (remove):
				say("\"Longtooth is my aunt's son. A sorrier\tdragon thou shalt never find! Of course, what happened to him was not his fault.\"");
				add("what happened?");
				fallthrough;

			case "what happened?" (remove):
				say("\"Longtooth was once smart, handsome, and very fierce. Many hatchlings looked up to Longtooth, and many females wanted to mate with him. Then one day some iron-plated human warrior came along and tried to kill him.\"");
				say("\"Longtooth thought the idea of a human challenging him, a prime example of dragonkind, was funny. So Longtooth obliged the human and the fight began.\"");
				say("\"What my cousin was not aware of was that the human had friends who were hiding. When Longtooth had the warrior pinned, the jackals struck from ambush. Longtooth managed to escape, but he's never been the same since.\"");
				say("\"Why, he can't even out riddle a goblin!\"");
				fallthrough;

			case "fabulous treasures" (remove):
				say("\"One of these treasures, I have heard tell, is a weapon -- an axe, I believe -- of unimagineable power. The other treasure is a pair of gauntlets that purportedly once belonged to some thief known\tas 'Karas the Quick'.\"");
				say("\"I have not heard what power the gauntlets possess.\"");
				fallthrough;

			case "creatures" (remove):
				say("\"The liche uses dead humans that he has reanimated as guardians. To reach Aram-Dol, one must traverse a veritable gauntlet of undead creatures.\"");
				say("\"There are also the abominations called the 'Arachnians'.\"");
				add("Arachnians");
				fallthrough;

			case "Arachnians" (remove):
				say("\"In years past, Aram-Dol took many humans as prisoners. By means of the blackest sorcery, Aram-Dol fused the torsos of men with the bulbous bodies of giant spiders.\"");
				say("\"These creatures are fiercesome fighters. They are cunning and evil. Pray to whatever gods thou doth worship if thou art caught by the Arachnians. They eat their prey alive...\"");
				var000E = Func0992(0x0001, 0x0000, 0x0000, false);
				if ((var000E == IOLO) || ((var000E == SHAMINO) || (var000E == DUPRE))) {
					var000F = "@By the virtues! Such foul creatures should be exterminated!@";
					var000E = Func0992(var000E, var000F, 0x0000, false);
					0x0000->set_conversation_slot();
					Func097F(var000E, "@Eaten alive. Yuch!@", 0x0000);
				}
				fallthrough;

			case "treasure" (remove):
				say("\"It hath been many years since one of thy kind ventured into my domain. Those who came before thought they could slay me with their bits of iron and steal my tresure!");
				say("\"They were wrong. They paid for their foolishness and greed with their lives.\"");
				say("\"Aye, tis true. I have a treasure. What self-respecting dragon doesn't have a treasure horde?\"");
				say("\"Of course, there is my aunt's son Longtooth. A sorrier dragon thou shalt never find! Of course, what happened to him was not his fault.\"");
				add("Longtooth");
				fallthrough;

			case "people" (remove):
				say("\"People! Hrrmphh. Thou dost realize, I hope, that not every sentient creature likes to be characterized in human terminology.\"");
				var000E = Func0992(0x0001, 0x0000, 0x0000, false);
				if ((var000E == IOLO) || ((var000E == SHAMINO) || (var000E == DUPRE))) {
					var000F = "@Thou art an insufferable wyrm!@";
					var000E = Func0992(var000E, var000F, 0x0000, false);
					0x0000->set_conversation_slot();
					Func097F(var000E, "@What arrogance!@", 0x0000);
				}
				say("\"To answer thy question, however, I know, or have heard of, many 'people'. Who, in particular, wert thou interested in?\"");
				add(["Ophidians", "The Fiend", "Aram-Dol", "Longtooth"]);
				fallthrough;

			case "not human" (remove):
				say("\"Aye. This new commander is some sort of magical construct. I believe the Ophidians call these creatures 'automatons'. I daresay that it is probably an improvement...\"");
				add("automatons");
				var000E = Func0992(0x0001, 0x0000, 0x0000, false);
				if ((var000E == IOLO) || ((var000E == SHAMINO) || (var000E == DUPRE))) {
					var000F = "@Now see here! There is no cause to be insulting!@";
					var000E = Func0992(var000E, var000F, 0x0000, false);
					0x0000->set_conversation_slot();
					Func097F(var000E, "@Insolent dragon!@", 0x0000);
				}
				if (var000E == PETRA) {
					var000F = "@I'll take that as a compliment!@";
					var000E = Func0992(var000E, var000F, 0x0000, false);
					0x0000->set_conversation_slot();
				}
				fallthrough;

			case "places" (remove):
				say("\"What place art thou interested in?\"");
				add(["Serpent's Fang", "The Maze", "home"]);
				fallthrough;

			case "home" (remove):
				say("\"I am quite familiar with my own cave, although I doubt that thou wouldst find it quite as charming as I do...\" Art thou really interested in learning about my humble domicile?\"");
				var0010 = Func0955();
				if (var0010) {
					say("\"Thou art a most unusual human.\"");
					say("\"I moved to this cave one hundred and twelve years ago. It was not\teasy finding the perfect cave -- I have my standards, afterall. And thou wouldst not believe how dificult it is to find a good cave.\"");
					say("\"Anyway, I had spent weeks searching and was about to give up the search when, quite by accident, I wandered into this cavern.\"");
					add("cavern");
				} else {
					say("\"I understand. I can not blame thee for not being interested. It is not a particularly fascinating topic.\"");
				}
				fallthrough;

			case "Serpent's Fang" (remove):
				say("\"Serpent's Fang is what the Ophidians call that Keep of theirs. I don't really know much about the place except that the commander of the few humans that are left is not human.\"");
				say("\"Frankly, I do not\tcare to know much about that place.\"");
				say("\"As long as those humans stay out of my domain I shall reciprocate by not trespassing upon theirs.\"");
				add("not human");
				fallthrough;

			case "things" (remove):
				say("\"My goodness! Thou art a curious one! I suppose that I should inform thee of the numerous hazards that are found within our subterranean realm.\"");
				add("hazards");
				fallthrough;

			case "automatons" (remove):
				say("\"I have heard that these constructs are absolutely obedient to their Ophidian masters, that they never tire, and that they do not need food!\"");
				fallthrough;

			case "don't care for them" (remove):
				say("\"The Ophidians are the ill-mannered humans who built the large Keep not far from this cavern. Only a few of them are left in that Keep, however.\"");
				add(["ill-mannered", "Keep"]);
				fallthrough;

			case "Keep" (remove):
				say("\"The Ophidians call their keep 'Serpent's Fang'. I don't really know much about the place except that the commander of the few humans that are left is not human.\"");
				say("\"Frankly, I do not\tcare to know much about that place.\"");
				say("\"As long as those humans stay out of my domain I shall reciprocate by not trespassing upon theirs.\"");
				add("not human");
				fallthrough;

			case "ill-mannered" (remove):
				say("\"Before the Ophidians came to these caverns there existed a natural balance\tamongst the creatures that lived here. There was conflict, to be sure, but there existed a rythym to life.\"");
				say("\"There was space and food enough for everyone. The Ophidians arrival disrupted the balance. They forced many creatures from their homes. And now they wage a war amongst themselves.\"");
				say("\"Truly. I think I shall never understand humans.\"");
				add("civil-war");
				fallthrough;

			case "civil-war" (remove):
				say("\"Aye, these snake-lovers took up arms against one another. They have taken to slaughtering one another as easily as a hatchling takes to breathing fire...\"");
				say("\"They have been fighting for at least a year I think.\"");
				add(["why", "snake-lovers"]);
				fallthrough;

			case "why" (remove):
				say("\"I cannot say why you humans do the things you do: you are peculiar creatures, with odd customs and strange rituals.\"");
				say("\"All I know is that these Ophidians starting slaughtering each other about one year ago.\"");
				fallthrough;

			case "snake-lovers" (remove):
				say("\"As I have said, I know little of your human rituals, but I do know that these Ophidians worship snakes.\"");
				say("\"Now that I think about it, I remember hearing that they worship the forces of Order and Chaos, albeit in the forms of snakes.\"");
				add("Order and Chaos?");
				fallthrough;

			case "Order and Chaos?" (remove):
				say("\"Tis a silly philosophy if thou dost ask me. The Ophidians, however, believe in their doctrines so well that they have taken up arms against one another!\"");
				fallthrough;

			case "cavern" (remove):
				say("\"These caverns are fairly large, a fact that suited me because I myself am fairly large.\"");
				say("\"This cave was perfect for me. I could come and go as I pleased, at least until Aram-Dol started expanding his territory.\"");
				add("territory");
				fallthrough;

			case "territory" (remove):
				say("\"Many years ago Aram-Dol created the Arachnian creatures. The liche released these creatures into these caverns. The foul beasts killed everything within their path. The vile creatures even managed to attack me in mass! I was very nearly slain. Fortunately for me, the Arachnians have a weakness.\"");
				add(["weakness", "Arachnians"]);
				fallthrough;

			case "weakness" (remove):
				say("\"Aye, the bugs have a weakness: they are especially vulnerable to fire. I fried dozens of the monsters before they broke ranks and ran!\"");
				say("\"After that battle I caved-in some of the passageways near my cave and moved large boulders to block other entrances into my cave.\"");
				say("\"The tactic seems to have worked because I have had little trouble from the creatures since I erected the barriers.\"");
				fallthrough;

			case "The Maze" (remove):
				say("\"The Ophidians built other structures within these caverns besides that Keep of theirs. One of these structures is a maze. Although I have not been there, I have heard that it is extremely dificult.\"");
				say("\"I don't mean any offense to thee, but I think that any maze devised by the mind of man could easily be solved by any sensible dragon!\"");
				fallthrough;

			case "bye":
				UI_remove_npc_face0();
				Func097F(AVATAR, "@So long!@", 0x0000);
				Func097F(item, "@Fare thee well!@", 0x0002);
				set_schedule_type(LOITER);
				abort;
		}
	}
}

void Func03DB shape#(0x3DB) () {
	var var0000;
	var var0001;
	var var0002;

	if (event == DOUBLECLICK) {
		var0000 = get_item_frame();
		if ((var0000 > 0x0009) && (var0000 < 0x0010)) {
			if (!in_usecode()) {
				var0001 = new script {
					frame 10;
					frame 11;
					frame 12;
					sfx 117;
					frame 12;
					frame 11;
					frame 10;
					frame 13;
					frame 14;
					sfx 117;
					frame 14;
					frame 13;
					frame 10;
				};
				halt_scheduled();
				var0002 = item->run_script(var0001 & [(byte)0x0B, -26, 2]);
			}
			abort;
		}
		UI_close_gumps();
		if ((var0000 > -1) && (var0000 < 0x0005)) {
			var0001 = new script {
				frame 0;
				frame 1;
				frame 2;
				sfx 117;
				frame 2;
				frame 1;
				frame 0;
				frame 3;
				frame 4;
				sfx 117;
				frame 4;
				frame 3;
				frame 0;
			};
		} else if ((var0000 > 0x0004) && (var0000 < 0x000A)) {
			var0001 = new script {
				frame 5;
				frame 6;
				frame 7;
				sfx 117;
				frame 7;
				frame 6;
				frame 5;
				frame 8;
				frame 9;
				sfx 117;
				frame 9;
				frame 8;
				frame 5;
			};
		}
		var0002 = item->run_script(var0001 & [(byte)0x0B, -26, 2]);
	}
}

extern var Func097D 0x97D (var var0000, var var0001, var var0002, var var0003, var var0004);
extern void Func097F 0x97F (var var0000, var var0001, var var0002);
extern var Func0992 0x992 (var var0000, var var0001, var var0002, var var0003);

void Func03DC shape#(0x3DC) () {
	var var0000;
	var var0001;

	if (!gflags[KNOWS_MAGIC_COMPASS]) {
		UI_play_sound_effect(0x0030);
		abort;
	}
	if (Func097D(PARTY, 0x0001, 0x03DC, QUALITY_ANY, FRAME_ANY)) {
		UI_play_sound_effect(0x0030);
		abort;
	}
	UI_close_gumps();
	UI_play_sound_effect(0x001B);
	Func097F(AVATAR, "@Yleg Ort!@", 0x0000);
	obj_sprite_effect(ANIMATION_PURPLE_BUBBLES, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, LOOP_ONCE);
	set_item_frame(UI_get_random(0x0008) - 0x0001);
	if (UI_get_random(0x0003) == 0x0001) {
		var0000 = ["@Let us go!@", "@It shows the way!@", "@Try again.@", "@That direction?@", "@Is it broken?@", "@I do not think it works.@"];
		var0001 = Func0992(0x0001, 0x0000, 0x0000, true);
		if (var0001 != AVATAR) {
			Func097F(var0001, var0000[UI_get_random(UI_get_array_size(var0000))], 0x0005);
		}
	}
}

extern void Func095D 0x95D (var var0000);

void Func03DE shape#(0x3DE) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;

	if ((event == READIED) || (event == UNREADIED)) {
		var0000 = get_container();
		while ((var0000 != 0x0000) && (!var0000->is_npc())) {
			var0000 = var0000->get_container();
		}
		if (var0000 == 0x0000) {
			UI_flash_mouse(CURSOR_HAND);
			return;
		}
	}
	if (event == READIED) {
		if (get_container()->get_readied(SI_WEAPON_HAND)) {
			if (!gflags[EXPERIENCE_FROM_ERINONS_AXE]) {
				Func095D(0x03E8);
				gflags[EXPERIENCE_FROM_ERINONS_AXE] = true;
			}
			if (!gflags[HOLDING_ERINONS_AXE]) {
				var0001 = var0000->get_npc_prop(COMBAT);
				var0002 = 30 - var0001;
				if (var0002 > 10) {
					var0002 = 10;
				}
				var0003 = set_item_quality(var0002);
				var0004 = var0000->set_npc_prop(COMBAT, var0002);
				if (var0004) {
					gflags[HOLDING_ERINONS_AXE] = true;
				}
			}
		}
	}
	if (event == UNREADIED) {
		if (gflags[HOLDING_ERINONS_AXE]) {
			var0005 = get_item_quality();
			var0006 = -1 * var0005;
			var0004 = var0000->set_npc_prop(COMBAT, var0006);
			if (var0004) {
				gflags[HOLDING_ERINONS_AXE] = false;
			}
		}
	}
}

extern void Func095D 0x95D (var var0000);

void Func03E4 shape#(0x3E4) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;
	var var0008;

	if ((event == READIED) || (event == UNREADIED)) {
		var0000 = get_container();
		while ((var0000 != 0x0000) && (!var0000->is_npc())) {
			var0000 = var0000->get_container();
		}
		if (var0000 == 0x0000) {
			UI_flash_mouse(CURSOR_HAND);
			return;
		}
	}
	if (event == READIED) {
		if (get_container()->get_readied(SI_BELT)) {
			if (!gflags[EXPERIENCE_FROM_BELT_OF_STRENGTH]) {
				Func095D(0x03E8);
				gflags[EXPERIENCE_FROM_BELT_OF_STRENGTH] = true;
			}
			if (!gflags[WEARING_BELT_OF_STRENGTH]) {
				var0001 = var0000->get_npc_prop(STRENGTH);
				var0002 = 30 - var0001;
				if (var0002 > 10) {
					var0002 = 10;
				}
				var0003 = set_item_quality(var0002);
				var0004 = var0000->set_npc_prop(STRENGTH, var0002);
				if (var0004) {
					gflags[WEARING_BELT_OF_STRENGTH] = true;
				}
			}
		}
	}
	if (event == UNREADIED) {
		if (gflags[WEARING_BELT_OF_STRENGTH]) {
			var0005 = get_item_quality();
			var0006 = -1 * var0005;
			var0004 = var0000->set_npc_prop(STRENGTH, var0006);
			if (var0004) {
				gflags[WEARING_BELT_OF_STRENGTH] = false;
				var0001 = var0000->get_npc_prop(STRENGTH);
				var0007 = var0000->get_npc_prop(HEALTH);
				if (var0007 > var0001) {
					var0008 = var0001 - var0007;
					var0004 = var0000->set_npc_prop(HEALTH, var0008);
				}
			}
		}
	}
}

extern var Func09A0 0x9A0 (var var0000, var var0001);
extern void Func097F 0x97F (var var0000, var var0001, var var0002);

void Func03E6 shape#(0x3E6) () {
	var var0000;

	if (event == SCRIPTED) {
		UI_play_music(0x002C, Func09A0(0x0005, 0x0001));
		var0000 = get_object_position();
		remove_item();
		FEDABIBLIO->move_object(var0000);
		FEDABIBLIO->set_new_schedules([MIDNIGHT, DAWN, NOON, AFTERNOON, EVENING], [SLEEP, LAB, LAB, EAT_AT_INN, LAB], [0x0939, 0x081A, 0x0950, 0x0823, 0x09A7, 0x07E5, 0x0943, 0x0835, 0x0950, 0x0823]);
		SERV11->set_new_schedules([MIDNIGHT, MORNING, AFTERNOON, EVENING], [PACE_HORIZONTAL, PACE_VERTICAL, WAITER, PACE_VERTICAL], [0x094F, 0x082D, 0x0970, 0x0813, 0x0943, 0x0834, 0x0961, 0x0812]);
		SERV11->run_schedule();
		FEDABIBLIO->set_schedule_type(TALK);
		Func097F(FEDABIBLIO, "@Much better...@", 0x0000);
		gflags[FEBABIBLIO_SAVED] = true;
	}
}

extern void Func095D 0x95D (var var0000);

void Func03E9 shape#(0x3E9) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;

	if ((event == READIED) || (event == UNREADIED)) {
		var0000 = get_container();
		while ((var0000 != 0x0000) && (!var0000->is_npc())) {
			var0000 = var0000->get_container();
		}
		if (var0000 == 0x0000) {
			UI_flash_mouse(CURSOR_HAND);
			return;
		}
	}
	if (event == READIED) {
		if (get_container()->get_readied(SI_GLOVES)) {
			if (!gflags[GOT_GAUNTLETS_OF_QUICKNESS]) {
				Func095D(0x03E8);
				gflags[GOT_GAUNTLETS_OF_QUICKNESS] = true;
			}
			if (!gflags[WEARING_GAUNTLETS_OF_QUICKNESS]) {
				var0001 = var0000->get_npc_prop(DEXTERITY);
				var0002 = 30 - var0001;
				if (var0002 > 10) {
					var0002 = 10;
				}
				var0003 = set_item_quality(var0002);
				var0004 = var0000->set_npc_prop(DEXTERITY, var0002);
				if (var0004) {
					gflags[WEARING_GAUNTLETS_OF_QUICKNESS] = true;
				}
			}
		}
	}
	if (event == UNREADIED) {
		if (gflags[WEARING_GAUNTLETS_OF_QUICKNESS]) {
			var0005 = get_item_quality();
			var0006 = -1 * var0005;
			var0004 = var0000->set_npc_prop(DEXTERITY, var0006);
			if (var0004) {
				gflags[WEARING_GAUNTLETS_OF_QUICKNESS] = false;
			}
		}
	}
}

void Func03F2 shape#(0x3F2) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;
	var var0008;

	if (event == SCRIPTED) {
		var0000 = find_nearby(0x03FB, 0x000A, MASK_NONE);
		var0001 = var0000->find_nearby(SHAPE_ANY, 0x0005, MASK_NONE);
		var0002 = var0000->get_object_position();
		for (var0005 in var0001 with var0003 to var0004) {
			var0006 = var0005->get_object_position();
			if (var0006[0x0003] == 0x0001) {
				var0007 = var0005->set_last_created();
				if (var0007) {
					var0006[0x0001] -= 0x0001;
					var0006[0x0003] = 0x0000;
					var0007 = UI_update_last_created(var0006);
				}
			}
		}
		if (var0000->get_item_frame() < 0x000A) {
			if (var0000) {
				var0007 = script var0000 {
					frame 0;
					repeat 10 {
						next frame cycle;
					};
					call Func03F2;
				};
			}
		} else {
			var0008 = var0000->get_object_position();
			var0008[0x0001] -= 0x0001;
			var0008[0x0002] -= 0x0001;
			var0008[0x0003] = 0x0001;
			var0007 = UI_create_new_object(0x0392);
			if (var0007) {
				var0007->set_item_frame(0x0000);
				if (gflags[TEMP_FLAG_1]) {
					gflags[TEMP_FLAG_1] = false;
					var0007 = var0007->set_item_quality(0x0001);
				} else {
					var0007 = var0007->set_item_quality(0x0000);
				}
				var0007 = UI_update_last_created(var0008);
			}
			var0000->set_item_frame(0x0000);
		}
	}
}

extern void Func087F 0x87F (var var0000);

void Func03F3 shape#(0x3F3) () {
	if (event == DOUBLECLICK) {
		Func087F(item);
	}
}

void Func03F5 shape#(0x3F5) () {
	if (event == READIED) {
		get_container()->infravision(true);
	}
	if (event == UNREADIED) {
		get_container()->infravision(false);
	}
}

extern var Func0954 0x954 ();
extern var Func0953 0x953 ();
extern void Func07D1 object#(0x7D1) ();
extern void Func097F 0x97F (var var0000, var var0001, var var0002);
extern var Func0942 0x942 (var var0000);
extern var Func0956 0x956 (var var0000);
extern void Func082A 0x82A ();
extern void Func082C 0x82C ();

void Func03F7 shape#(0x3F7) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;

	var0000 = Func0954();
	var0001 = Func0953();
	if (event == DOUBLECLICK) {
		AVATAR->item_say("@Might I speak with thee?@");
		item->Func07D1();
		Func097F(item, (("@Certainly, " + var0000) + ".@"), 0x0002);
		set_schedule_type(TALK);
	}
	if (event == STARTED_TALKING) {
		set_schedule_type(STANDTHERE);
		clear_item_say();
		ELISSA->show_npc_face0(0x0000);
		var0002 = get_npc_id();
		if (gflags[HAVE_SILVER_SEED] || gflags[PLANTED_SILVER_SEED]) {
			say("\"I am pleased to see thee, Champion of Balance.");
			say("\"How might I be of service to thee?\"");
			add("service");
		} else if (var0002 == false) {
			say("\"I do not believe I have had the pleasure of meeting thee, ",
				var0000,
				". I think it would be wise for thee to prove that thou art not a foul Chaos spy.");
			say("\"Make no untoward moves, I warn thee, for I am Elissa, Order Mage of the First Rank.\"");
			set_npc_id(0x0002);
			add(["prove", "Chaos spy", "Mage of the First Rank"]);
		} else if (var0002 == 0x0002) {
			if (gflags[MET_ISSTANAR]) {
				say("\"Ah, thou hast spoken with our Commander! Very good. What can I do for thee?\"");
				set_npc_id(0x0001);
				add("service");
			} else {
				say("\"Begone from my sight, miscreant!\"");
				abort;
			}
		} else {
			say("\"How good it is to see thee again, ",
				var0001,
				"! How might I be of service to thee this day?\"");
			add("service");
		}
		converse ("bye") {
			case "prove" (remove):
				say("\"Unless thou canst prove to me that thou dost not mean harm to DeathWatch, I shall have to turn thee over to Isstanar.  Thou wouldst find the experience most unpleasant.\"");
				add(["DeathWatch", "Isstanar"]);
				fallthrough;

			case "DeathWatch" (remove):
				say("\"'Tis not what our High Command calls it, but then they are not here. To them this is the Serpent's Fang keep. To those of us who have held back the mindless hordes of Chaos, this is DeathWatch keep...");
				say("\"Or, now that the war has passed us by, perhaps we should call it DeathWait.");
				say("\"But I must have assurances of thy identity, ",
					var0000,
					", or things will go badly for thee.\"");
				add("assurances");
				fallthrough;

			case "assurances" (remove):
				say("\"Thou must have some proof of thy identity...\"");
				if ((!Func0942(IOLO)) || ((!Func0942(SHAMINO)) || (!Func0942(DUPRE)))) {
					add(["I need no proof!", "I am the Avatar!", "Amulet"]);
				} else {
					if (Func0942(IOLO)) {
						IOLO->show_npc_face1(0x0000);
						say("\"",
							var0001,
							" is the Avatar! Thou dost not need any further proof than the fact that the Amulet didst bring us here!\"");
						UI_remove_npc_face1();
						IOLO->item_say("@Nosey biddy!@");
						0x0000->set_conversation_slot();
					}
					if (Func0942(SHAMINO)) {
						SHAMINO->show_npc_face1(0x0000);
						say("\"What about the Amulet that Karnax didst give thee, Avatar? It brought us here. Perhaps this Mage would recognize it.\"");
						UI_remove_npc_face1();
						if (Func0942(IOLO)) {
							SHAMINO->item_say("@Mind thy manners, Iolo!@");
						} else {
							SHAMINO->item_say("@I am sick of these rules!@");
						}
						0x0000->set_conversation_slot();
					}
					if (Func0942(DUPRE)) {
						DUPRE->show_npc_face1(0x0000);
						say("\"Beware how thou dost speak to the Avatar!");
						say("\"Avatar, let us use the Amulet to return to where we were. We have enough to worry with on this quest without such presumptuous women!\"");
						UI_remove_npc_face1();
						DUPRE->item_say("@Arrogant wench!@");
						0x0000->set_conversation_slot();
					}
					say("\"I have no idea what it is that thy friends speak of, ",
						var0000,
						". I mean no disrespect, but I have never heard of @the Avatar@ before.");
					say("\"But if I might see the Amulet that they speak about, perhaps I can end this questioning now.\"");
					add(["Amulet", "questioning"]);
				}
				fallthrough;

			case "I need no proof!":
				remove(["I need no proof!", "I am the Avatar!"]);
				say("\"Art thou a member of the High Command? Art thou a Hierophant? I think not!");
				say("\"Thine attitude dost seriously endanger thy freedom. I suggest that thou change it quickly.\"");
				fallthrough;

			case "I am the Avatar!":
				remove(["I am the Avatar!", "I need no proof!"]);
				say("\"I mean no disrespect, but I have never heard of @the Avatar@ before.\"");
				fallthrough;

			case "Amulet":
				remove(["Amulet", "I am the Avatar!", "I need no proof!"]);
				say("\"No, it cannot be! There has not been a Champion of Balance since before Ssithnos was murdered!");
				say("\"I can scarcely believe my eyes! But the item is authentic, that much I am sure of...");
				say("\"Forgive my doubts, ",
					var0001,
					". I gave little credit to the stories. I thought that they were no more than folk tales born on the eve of war. I did not mean to offend thee.\"");
				set_npc_id(0x0001);
				add(["Champion of Balance", "Ssithnos", "stories"]);
				fallthrough;

			case "Champion of Balance" (remove):
				say("\"Law required that the Great Hierophant remain an impartial judge of the people. No matter what the offense, he could not raise his hand to dispense justice.");
				say("\"Only four times in history was there any who dared to defy the word of the Great Hierophant. As these people lived outside of Order and Chaos, neither group could act upon them without usurping the power of Balance.");
				say("\"So it fell to the Great Hierophant to choose one among his Acolytes to go and battle these unlawful ones. The Champion was given all the power of Balance and never failed to restore harmony to the land.\"");
				fallthrough;

			case "Ssithnos" (remove):
				say("\"Ssithnos was the last Great Hierophant of Balance. But he was foully murdered by the followers of Chaos.");
				say("\"He was unable to choose a Champion, but only the Great Hierophant knew the location of the Amulet. Even though thou art ignorant of thy duty, thou art certainly the Champion of Balance.\"");
				fallthrough;

			case "stories" (remove):
				say("\"With the death of the Great Hierophant, the land soon fell into confusion. Order vowed vengeance upon Chaos, and those followers of Chaos fled in panic into much of the countryside.");
				say("\"During that time, the people began telling of the coming of a Champion of Balance who would see justice done and restore Balance to the world.");
				say("\"I thought that it was the prattling of cowards who wished to avoid the coming war. But now that I have seen thee and the Amulet, I am uncertain.\"");
				fallthrough;

			case "questioning" (remove):
				say("\"If thou wilt not answer to me, I shall be forced to bespell thee and take thee to the Commander of the keep.");
				if (Func0942(IOLO)) {
					IOLO->show_npc_face1(0x0000);
					say("\"Thou dost take too much upon thyself, woman!\"");
					UI_remove_npc_face1();
					0x0000->set_conversation_slot();
				}
				if (Func0942(SHAMINO)) {
					SHAMINO->show_npc_face1(0x0000);
					say("\"I doubt it shall be as easy as thou dost imagine. Thou dost not speak to an ordinary warrior...");
					say("\"This is the Avatar thou dost question!\"");
					UI_remove_npc_face1();
					0x0000->set_conversation_slot();
				}
				if (Func0942(DUPRE)) {
					DUPRE->show_npc_face1(0x0000);
					say("\"If she tries anything, Avatar, I shall gladly lop her head off for the effort!\"");
					UI_remove_npc_face1();
					0x0000->set_conversation_slot();
				}
				say("\"This is a time of war! Thou canst not think to wander about unchallenged. 'Twould be a breach of duty if I did not stop and question thee.\"");
				if (Func0942(IOLO)) {
					IOLO->show_npc_face1(0x0000);
					say("\"I am sorry, good Mage. Thou art quite right.\"");
					UI_remove_npc_face1();
					IOLO->item_say("@My apologies.@");
					0x0000->set_conversation_slot();
				}
				if (Func0942(SHAMINO)) {
					SHAMINO->show_npc_face1(0x0000);
					say("\"We are strangers here. Thou dost well in questioning us. We wrong thee with our demands to be unaccountable.\"");
					UI_remove_npc_face1();
					SHAMINO->item_say("@Remain vigilant.@");
					0x0000->set_conversation_slot();
				}
				if (Func0942(DUPRE)) {
					DUPRE->show_npc_face1(0x0000);
					say("\"Thou must honor thy duty. I apologize for speaking ill of a honorable warrior such as thyself.\"");
					UI_remove_npc_face1();
					DUPRE->item_say("@Duty is our honor...@");
					0x0000->set_conversation_slot();
				}
				fallthrough;

			case "Isstanar" (remove):
				say("\"Thou wouldst know him, if thou hadst met him. He is the ultimate Order warrior! Nothing touches him. He is bound only by his duty.\"");
				add(["ultimate warrior", "nothing touches him"]);
				fallthrough;

			case "ultimate warrior" (remove):
				say("\"Isstanar is invincible! He cannot die. He does not need food or rest. His strength makes even a weapon unnecessary.");
				say("\"What army, if filled with warriors such as Isstanar, could not march easily to victory? Soon this accursed war will be over, and I shall retire to a life of research.");
				say("\"Who knows, perhaps some day -- once I am sure that I would still have the use of my magic -- I shall make the final sacrifice and become one such as Isstanar.\"");
				add(["How can this be?", "final sacrifice"]);
				fallthrough;

			case "How can this be?" (remove):
				say("\"Oh, no! Even if I knew how this was accomplished, which I do not, I would not tell thee!");
				say("\"My honor is worth more than that! I shall not have it said that I betrayed Order!\"");
				fallthrough;

			case "final sacrifice" (remove):
				say("\"To forsake the needs and desires of the body, what more dost thou ask?");
				say("\"I know nothing further than what I have told thee. I have not yet attained that level.\"");
				fallthrough;

			case "nothing touches him" (remove):
				say("\"Isstanar has transcended the restraints of the body. All that remains is his iron will and the fine Logic of his mind.");
				say("\"Nothing can distract him from his duty. He does not fear, he does not worry. Unlike the rest of us here, he is not consumed by boredom or impatience. He just... is.\"");
				fallthrough;

			case "Chaos spy" (remove):
				say("\"Everyone knows that the tides of battle have turned since the High Command unleashed our secret weapon. Chaos would do anything to learn how to neutralize our advantage.\"");
				add(["secret weapon", "neutralize"]);
				fallthrough;

			case "secret weapon" (remove):
				say("\"If thou art observant, thou wilt know the answer to thy question. If not, I shall not aid thee... No matter who thou art.\"");
				fallthrough;

			case "neutralize" (remove):
				say("\"The only secret that spies need learn is that there is no way to neutralize our advantage. Order cannot fail now... The sooner that those wretched Chaos followers realize this, the sooner this war shall end!\"");
				fallthrough;

			case "Mage of the First Rank" (remove):
				say("\"Thou canst always tell the quality of a Mage by how rank he is... Thou canst smell his superiority for leagues!");
				say("\"But I should not jest so... Thou art a stranger and may mistake me. In truth, a Mage's rank reflects his ability.");
				say("\"Those of the First Rank have mastered all spells. Those of the Second Rank have mastered the next lowest level of spells, and so on.");
				say("\"Although our titles are different, I am equal in rank to SubCommander Tsandar.\"");
				add("SubCommander Tsandar");
				fallthrough;

			case "SubCommander Tsandar" (remove):
				say("\"Tsandar is now Isstanar's aide, though he commanded the garrison after Commander Ardiniss' death. Tsandar did not take his replacement very well, I fear.");
				say("\"Tsandar's devotion to Order is strong, to be sure. But how could he expect to command now that Isstanar is here?\"");
				add("Commander Ardiniss");
				fallthrough;

			case "Commander Ardiniss" (remove):
				say("\"Ardiniss was an old man, ",
					var0000,
					". It was he who founded this keep. He was a loyal servant of Order, but he did not keep Discipline as he should have.");
				say("\"Fortunately, he was honored by a clean death in battle before anyone could question the strictness of his command.\"");
				fallthrough;

			case "service" (remove):
				say("\"I have little to do these days. I do not know if I long to be at the front, or if I simply yearn for reassignment elsewhere. It is quite depressing being in a nearly deserted keep.");
				if (gflags[HAVE_NEW_SPELLBOOK]) {
					say("\"I canst tell thou art a Mage, though I cannot perceive what Rank. If thou desirest, I will teach thee a few spells... for a small fee, of course.");
					say("\"Or, if thou dost not desire spells, perhaps I could train thee in the use of magic... for a small fee, naturally. It will help pass the time.\"");
					say("\"What dost thou desire?\"");
					var0003 = Func0956(["Nothing", "Spells", "Training"]);
					if (var0003 == "Nothing") {
						say("\"Another time, perhaps. I should go and make my rounds now anyway...\"");
						UI_remove_npc_face0();
						item_say("@Until later...@");
						abort;
					}
					if (var0003 == "Spells") {
						Func082A();
					}
					if (var0003 == "Training") {
						Func082C();
					}
				} else {
					say("\"If thou wert a Mage, I would have been willing to teach thee a few spells. Or I could have trained thee in the use of magic... All for a small fee, naturally. It would have helped to pass the time.");
					say("\"Ah well, I shall have to content myself with making rounds. I suppose it would be too much to hope for that I might encounter a Chaos monster this time...\"");
					UI_remove_npc_face0();
					item_say("@Duty calls!@");
					abort;
				}
				fallthrough;

			case "bye":
				UI_remove_npc_face0();
				Func097F(AVATAR, "@Goodbye!@", 0x0000);
				Func097F(item, "@Farewell!@", 0x0002);
				set_schedule_type(LAB);
				break;
		}
	}
}

extern var Func0992 0x992 (var var0000, var var0001, var var0002, var var0003);

void Func03FD shape#(0x3FD) () {
	var var0000;
	var var0001;
	var var0002;

	UI_close_gumps();
	var0000 = get_item_frame();
	if (event == DOUBLECLICK) {
		if (var0000 == 0x0003) {
			var0001 = Func0992(0x0001, "@It hath been picked clean.@", "@No more berries...@", true);
		} else {
			var0002 = AVATAR->add_cont_items(0x0001, 0x0194, 0x0000, 0x0004, 0x0012);
			if (!var0002) {
				set_item_frame(var0000 + 0x0001);
				UI_play_sound_effect(0x000C);
				var0001 = Func0992(0x0001, "@Thou hast plucked a berry!@", "@I have a berry!@", true);
			} else {
				var0001 = Func0992(0x0001, "@But thine hands are full!@", "@I have no room for berries...@", true);
			}
		}
	}
}

extern void Func0936 0x936 (var var0000, var var0001);
extern void Func092E 0x92E (var var0000);
extern var Func0994 0x994 ();
extern var Func09A6 0x9A6 (var var0000);
extern void Func092F 0x92F (var var0000, var var0001);
extern var Func09A0 0x9A0 (var var0000, var var0001);
extern var Func095C 0x95C (var var0000, var var0001);
extern void Func095E 0x95E (var var0000, var var0001, var var0002);
extern void Func07D7 object#(0x7D7) ();
extern var Func08B6 0x8B6 ();
extern void Func097F 0x97F (var var0000, var var0001, var var0002);
extern var Func08F8 0x8F8 (var var0000, var var0001, var var0002);
extern void Func08B8 0x8B8 ();
extern void Func08F6 0x8F6 ();
extern var Func0988 0x988 (var var0000, var var0001);
extern var Func08F3 0x8F3 ();
extern var Func084E 0x84E (var var0000, var var0001);
extern var Func0955 0x955 ();
extern var Func0992 0x992 (var var0000, var var0001, var var0002, var var0003);
extern void Func0636 object#(0x636) ();
extern void Func0616 object#(0x616) ();
extern void Func060C object#(0x60C) ();
extern void Func07DA object#(0x7DA) ();
extern void Func07DC object#(0x7DC) ();

void Func0400 object#(0x400) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;
	var var0008;
	var var0009;
	var var000A;
	var var000B;
	var var000C;
	var var000D;
	var var000E;
	var var000F;
	var var0010;
	var var0011;
	var var0012;
	var var0013;
	var var0014;
	var var0015;
	var var0016;
	var var0017;
	var var0018;
	var var0019;
	var var001A;
	var var001B;

	if (event == BG_PATH_FAILURE) {
		if (AVATAR->get_item_flag(ISPETRA)) {
			AVATAR->set_polymorph(0x0292);
		} else {
			AVATAR->set_polymorph(0x0212);
		}
	}
	if (event == DEATH) {
		if (gflags[MONITOR_TRAINING]) {
			var0000 = AVATAR->get_oppressor();
			var0000 = 0x0000 - var0000;
			if (!gflags[TEMP_FLAG_1]) {
				gflags[TEMP_FLAG_1] = true;
				Func0936(var0000->get_npc_object(), AVATAR->get_npc_object());
				return;
			}
			Func092E(item);
			return;
		}
		if (gflags[MONITOR_BANQUET_STARTED] && (!gflags[AVATAR_IS_KNIGHT])) {
			abort;
		}
		var0001 = Func0994();
		if ((var0001 == 0x0014) && (!AVATAR->get_item_flag(DONT_MOVE))) {
			var0002 = AVATAR->get_object_position();
			if ((var0002[0x0001] > 0x09D0) && ((var0002[0x0001] < 0x09FA) && ((var0002[0x0002] > 0x0320) && (var0002[0x0002] < 0x033A)))) {
				var0000 = AVATAR->get_npc_prop(HEALTH);
				if (var0000 < 0) {
					var0000 = 3 - var0000;
				}
				if (var0000 == 0) {
					var0000 = 3;
				}
				var0000 = AVATAR->set_npc_prop(HEALTH, var0000);
				abort;
			}
			var0003 = AVATAR->find_nearby(0x013E, 0x0014, MASK_NONE);
			var0000 = var0003->find_direction(AVATAR);
			var0000 = script var0003 {
				nohalt;
				face var0000;
			};
			AVATAR->set_item_flag(DONT_MOVE);
			AVATAR->set_schedule_type(WAIT);
			var0000 = script AVATAR {
				nohalt;
				actor frame sleeping;
			};
			var0002 = AVATAR->get_object_position();
			var0002[0x0001] += 0x0001;
			var0000 = UI_create_new_object(0x0390);
			if (var0000) {
				var0000 = UI_update_last_created(var0002);
			}
			var0002[0x0001] -= 0x0002;
			var0000 = UI_create_new_object(0x0390);
			if (var0000) {
				var0000 = UI_update_last_created(var0002);
			}
			var0002[0x0002] += 0x0001;
			var0000 = UI_create_new_object(0x0390);
			if (var0000) {
				var0000 = UI_update_last_created(var0002);
			}
			var0003->halt_scheduled();
			var0003->set_schedule_type(WAIT);
			var0000 = script var0003 after 5 ticks {
				nohalt;
				call Func0400;
			};
		}
		if (var0001 == 0x001F) {
			UI_fade_palette(0x000C, 0x0001, 0x0000);
			var0004 = AVATAR->get_cont_items(SHAPE_ANY, QUALITY_ANY, FRAME_ANY);
			for (var0007 in var0004 with var0005 to var0006) {
				if (!((var0007->get_item_shape() == 0x01E6) || (var0007->get_item_shape() == 0x025F))) {
					var0007->remove_item();
				}
			}
			var0008 = 0x0000;
			var0004 = AUTO_3->get_cont_items(SHAPE_ANY, QUALITY_ANY, FRAME_ANY);
			while (var0008 < 0x0002) {
				for (var0007 in var0004 with var0009 to var000A) {
					if (Func09A6(var0007) || (var0008 == 0x0001)) {
						if (!var0007->set_last_created()) {
							Func092F(AVATAR, 0x000D);
						}
						if (!AVATAR->give_last_created()) {
							Func092F(AVATAR, 0x000E);
						}
					}
				}
				var0008 += 0x0001;
				var0004 = AUTO_3->get_cont_items(SHAPE_ANY, QUALITY_ANY, FRAME_ANY);
			}
			UI_play_music(0x0016, Func09A0(0x0005, 0x0001));
			AVATAR->move_object([0x05B4, 0x0652, 0x0000]);
			if (Func095C(AVATAR, STRENGTH) > Func095C(AVATAR, HEALTH)) {
				var0000 = Func095C(AVATAR, STRENGTH) - Func095C(AVATAR, HEALTH);
				Func095E(AVATAR, HEALTH, var0000);
			}
			item->Func07D7();
			var0004 = Func08B6();
			for (var0007 in var0004 with var000B to var000C) {
				var0007->clear_item_flag(ASLEEP);
				var0007->set_schedule_type(FOLLOW_AVATAR);
				var0000 = script var0007 {
					nohalt;
					actor frame standing;
				};
			}
			if (var0007) {
				Func097F(var0007, "@What dreams!@", 0x000E);
			}
			var000D = Func09A0(0x0002, 0x0001);
			var0000 = script var000D {
				nohalt;
				call Func0636;
			};
		}
		if ((var0001 == 0x0020) && (!gflags[AVATAR_IS_DEAD])) {
			var000E = AVATAR->get_object_position();
			if (Func08F8(var000E, [0x0900, 0x0A00], [0x09FF, 0x0AFF])) {
				var0004 = [AVATAR];
				var000F = true;
				for (var0003 in var0004 with var0010 to var0011) {
					var0003->halt_scheduled();
					var0003->clear_item_say();
					if (!var0003->get_item_flag(SI_ZOMBIE)) {
						var0003->set_schedule_type(FOLLOW_AVATAR);
					}
					var0003->set_temperature(0x0000);
					var0003->clear_item_flag(ASLEEP);
					var0003->clear_item_flag(CHARMED);
					var0003->clear_item_flag(CURSED);
					var0003->clear_item_flag(DEAD);
					var0003->clear_item_flag(UNKNOWN_FLAG_05);
					var0003->clear_item_flag(PARALYZED);
					var0003->clear_item_flag(POISONED);
					var0003->clear_item_flag(DONT_MOVE);
					if (Func095C(var0003, STRENGTH) > Func095C(var0003, HEALTH)) {
						var0000 = Func095C(var0003, STRENGTH) - Func095C(var0003, HEALTH);
						Func095E(var0003, HEALTH, var0000);
					}
					var0000 = Func095C(var0003, FOODLEVEL);
					var0000 = 31 - var0000;
					Func095E(var0003, FOODLEVEL, var0000);
					gflags[AVATAR_IS_DEAD] = true;
					Func08B8();
					var0012 = Func09A0(0x0000, 0x0004);
					var0000 = script var0012 {
						nohalt;
						call Func0616;
					};
					abort;
				}
			} else {
				var0012 = Func09A0(0x0000, 0x0001);
				var0000 = script var0012 {
					nohalt;
					call Func060C;
				};
				gflags[AVATAR_IS_DEAD] = true;
			}
		}
		if ((var0001 != 0x0014) && ((var0001 != 0x001F) && ((var0001 != 0x0020) && (!gflags[AVATAR_IS_DEAD])))) {
			Func08F6();
			AVATAR->set_item_flag(DONT_MOVE);
			UI_fade_palette(0x000C, 0x0001, 0x0000);
			AVATAR->clear_item_flag(FREEZE);
			var0004 = Func08B6();
			var0004 = [AVATAR, var0004];
			var0002 = [0x0967, 0x047C, 0x0000];
			var0013 = [0, -1, 1, 0, -1, 1, 0, -1, 1];
			var0014 = [-1, -1, -1, 0, 1, 1, 1, 0, 0];
			var0007 = 1;
			UI_sprite_effect(ANIMATION_TELEPORT, var0002[0x0001], var0002[0x0002], 0, 0, 0, LOOP_ONCE);
			UI_play_sound_effect(0x0051);
			for (var0003 in var0004 with var0015 to var0016) {
				var0003->halt_scheduled();
				var0003->clear_item_say();
				if (!var0003->get_item_flag(SI_ZOMBIE)) {
					var0003->set_schedule_type(FOLLOW_AVATAR);
				}
				var0003->set_temperature(0x0000);
				var0003->clear_item_flag(ASLEEP);
				var0003->clear_item_flag(CHARMED);
				var0003->clear_item_flag(CURSED);
				var0003->clear_item_flag(DEAD);
				var0003->clear_item_flag(UNKNOWN_FLAG_05);
				var0003->clear_item_flag(PARALYZED);
				var0003->clear_item_flag(POISONED);
				var0003->clear_item_flag(DONT_MOVE);
				if (Func095C(var0003, STRENGTH) > Func095C(var0003, HEALTH)) {
					var0000 = Func095C(var0003, STRENGTH) - Func095C(var0003, HEALTH);
					Func095E(var0003, HEALTH, var0000);
				}
				var0000 = Func095C(var0003, FOODLEVEL);
				var0000 = 31 - var0000;
				Func095E(var0003, FOODLEVEL, var0000);
				var0000 = [(var0002[0x0001] + var0013[var0007]), (var0002[0x0002] + var0014[var0007]), var0002[0x0003]];
				var0003->move_object(var0000);
				var0000 = script var0003 {
					actor frame standing;
					face north;
				};
				var0007 += 0x0001;
			}
			var0002 = [];
			var0013 = [];
			var0014 = [];
			var0000 = script item {
				nohalt;
				call Func0636;
			};
			var0017 = [KARNAX, THOXA, MIGGIM, BRACCUS, DRAXTA, SILENT1, SILENT2, SILENT3];
			if (!gflags[HAWK_IN_MOONSHADE]) {
				var0017 = Func0988(MIGGIM, var0017);
			}
			if (Func08F3()) {
				var0017 &= XENKA;
			}
			var0000 = Func09A0(0x0005, 0x0001)->set_item_quality(0x0003);
			var0000 = script Func09A0(0x0005, 0x0001) after 200 ticks {
				nohalt;
				call Func00FA;
			};
			for (var0003 in var0017 with var0018 to var0019) {
				var0003->move_object(Func084E(var0003, 0x0003));
				var0003->set_new_schedules(MIDNIGHT, MAJOR_SIT, Func084E(var0003, 0x0003));
				var0003->run_schedule();
				if (var0003 == KARNAX) {
					var0003->clear_item_flag(ASLEEP);
					var0003->clear_item_flag(CHARMED);
					var0003->clear_item_flag(CURSED);
					var0003->clear_item_flag(DEAD);
					var0003->clear_item_flag(UNKNOWN_FLAG_05);
					var0003->clear_item_flag(PARALYZED);
					var0003->clear_item_flag(POISONED);
					var0003->clear_item_flag(DONT_MOVE);
					KARNAX->set_npc_id(0x0000);
					KARNAX->set_schedule_type(TALK);
					var0000 = script KARNAX {
						face south;
						actor frame standing;
						actor frame cast_up;
						actor frame cast_out;
					};
				} else {
					var0000 = script var0003 {
						face north;
						actor frame standing;
						actor frame cast_up;
						actor frame sitting;
					};
				}
			}
			AVATAR->set_item_flag(DONT_MOVE);
			gflags[AVATAR_IS_DEAD] = true;
		}
	}
	if (event == SCRIPTED) {
		if (gflags[BATLIN_IN_TEST_OF_ETHICALITY]) {
			set_schedule_type(IN_COMBAT);
			CINDY->show_npc_face0(0x0000);
			AVATAR->set_item_flag(DONT_MOVE);
			set_schedule_type(WAIT);
			say("\"Thou art nearly dead, Avatar!\"");
			say("\"Yield to me, and perhaps I shall spare thy life! Dost thou yield?\"");
			if (Func0955()) {
				say("\"I always knew that thou wert a coward!\"");
				var0000 = script item after 1 ticks {
					nohalt;
					actor frame strike_1h;
					nohalt;
					actor frame strike_2h;
					nohalt;
					actor frame strike_1h;
				};
				var0000 = AVATAR->set_npc_prop(HEALTH, 10);
				var0000 = script Func09A0(0x0005, 0x0001) after 10 ticks {
					nohalt;
					call Func07DA;
				};
				Func097F(item, "@Die, fool!@", 0x0000);
			} else {
				Func097F(item, "@Damn thee!@", 0x0000);
				var0000 = AVATAR->set_npc_prop(HEALTH, 10);
				gflags[TEST_REFUSED_TO_YIELD] = true;
				var0000 = script AVATAR after 10 ticks {
					nohalt;
					call Func07DA;
				};
				gflags[BATLIN_IN_TEST_OF_ETHICALITY] = false;
			}
			abort;
		}
		if (Func0994() == 0x0003) {
			if (gflags[TEMP_FLAG_1]) {
				var0000 = UI_game_hour();
				if (var0000 > 0x000A) {
					var0003 = 0x000A + (0x0018 - var0000);
				} else {
					var0003 = 0x000A - var0000;
				}
				var0000 = (0x05DC * var0003) + (0x0019 * (0x003C - UI_game_minute()));
				UI_advance_time(var0000);
				UI_fade_palette(0x000C, 0x0001, 0x0001);
				AVATAR->set_schedule_type(FOLLOW_AVATAR);
				AVATAR->clear_item_flag(DONT_MOVE);
				gflags[TEMP_FLAG_1] = false;
			} else {
				gflags[TEMP_FLAG_1] = true;
				var0004 = UI_get_party_list();
				for (var0003 in var0004 with var001A to var001B) {
					var0000 = script var0003 {
						actor frame standing;
					};
					var0003->set_schedule_type(FOLLOW_AVATAR);
				}
				gflags[GOT_FAWN_TRIAL_SUMMONS] = true;
				var0000 = UI_create_new_object(0x0281);
				if (var0000) {
					var0000 = var0000->set_item_quality(0x000B);
					var0000 = UI_update_last_created([0x03A1, 0x06F9, 0x0008]);
				}
				var0000 = UI_create_new_object(0x031D);
				if (var0000) {
					var0000 = var0000->set_item_quality(0x000C);
					var0000 = UI_update_last_created([0x03A1, 0x06F7, 0x0008]);
				}
				var0000 = script Func09A0(0x0001, 0x0004) after 300 ticks {
					call Func07DC;
				};
				var0000 = Func0992(0x0001, 0x0000, 0x0000, true);
				Func097F(var0000, "@Wake up!@", 0x0004);
				var0000 = script AVATAR {
					nohalt;
					face north;
					actor frame sleeping;
					actor frame sleeping;
					actor frame sleeping;
					actor frame sleeping;
					actor frame sleeping;
					actor frame sleeping;
					actor frame sleeping;
					say "@Oh, mine head...@";
				};
				var0000 = script AVATAR after 5 ticks {
					nohalt;
					call Func0400;
				};
				abort;
			}
		}
	}
}

extern var Func0954 0x954 ();
extern var Func0953 0x953 ();
extern void Func0936 0x936 (var var0000, var var0001);
extern void Func092E 0x92E (var var0000);
extern void Func07D1 object#(0x7D1) ();
extern void Func097F 0x97F (var var0000, var var0001, var var0002);
extern var Func0942 0x942 (var var0000);
extern void Func094E 0x94E (var var0000, var var0001);
extern void Func0829 0x829 ();
extern void Func09B4 0x9B4 (var var0000);
extern void Func092B 0x92B ();
extern var Func0994 0x994 ();

void Func0401 object#(0x401) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;

	var0000 = DUPRE->get_npc_id();
	var0001 = Func0954();
	var0002 = Func0953();
	var0003 = UI_is_pc_female();
	if (event == DEATH) {
		if (gflags[MONITOR_TRAINING]) {
			var0004 = DUPRE->get_oppressor();
			var0004 = 0x0000 - var0004;
			if (!gflags[TEMP_FLAG_1]) {
				gflags[TEMP_FLAG_1] = true;
				Func0936(var0004->get_npc_object(), DUPRE->get_npc_object());
				return;
			}
			Func092E(item);
			return;
		}
	}
	if (event == DOUBLECLICK) {
		AVATAR->item_say("@Dupre...@");
		DUPRE->Func07D1();
		if (!DUPRE->get_item_flag(SI_ZOMBIE)) {
			Func097F(DUPRE, (("@Yes, " + var0001) + "?@"), 0x0002);
			DUPRE->set_schedule_type(TALK);
		} else {
			var0005 = UI_die_roll(0x0001, 0x0004);
			if (var0005 == 0x0001) {
				Func097F(DUPRE, "@Bring to me a woman!@", 0x0002);
			}
			if (var0005 == 0x0002) {
				Func097F(DUPRE, "@I will slay you all!@", 0x0002);
			}
			if (var0005 == 0x0003) {
				Func097F(DUPRE, "@Fulfill thy desires!@", 0x0002);
			}
			if (var0005 == 0x0004) {
				Func097F(DUPRE, "@I must have ale!@", 0x0002);
			}
		}
	}
	if (event == STARTED_TALKING) {
		DUPRE->show_npc_face0(0x0000);
		DUPRE->clear_item_say();
		if (DUPRE->get_item_flag(IN_PARTY)) {
			DUPRE->set_schedule_type(FOLLOW_AVATAR);
			add("leave");
		} else {
			DUPRE->run_schedule();
			add("join");
		}
		if (var0000 == 0x001E) {
			say("\"How good to see thee again, ",
				var0001,
				"! Knowing that thou wouldst soon return, I have waited for thee at this establishment.\"");
			if (Func0942(ROCCO)) {
				Func094E(ROCCO, "@And he hath developed quite a bar tab!@");
				0x0000->set_conversation_slot();
				say("\"One that I shall pay, worry thou not!\"");
			}
			if (!gflags[AFTER_FREEDOM_NEWS]) {
				say("\"And I have good news for thee, ",
					var0001,
					".\"");
				add("good news");
			}
			DUPRE->set_npc_id(0x0000);
			DUPRE->add_to_party();
			gflags[DUPRE_HAS_BELONGINGS] = true;
			remove("join");
			add(["leave"]);
		} else if (gflags[EQUIPMENT_EXCHANGED] && (!gflags[DUPRE_MADE_EQUIPMENT_LIST])) {
			say("\"",
				var0002,
				"! I thought I would never find thee!\"");
			say("\"When that strange storm struck, there was a flash, and then I found myself in a wilderness.\"");
			say("\"Fearing to be slain by the Goblins patrolling the woods, I instead took shelter in this walled city. But these Pikemen insist on escorting me to their leader!\"");
			if (MARSTEN->npc_nearby()) {
				MARSTEN->show_npc_face1(0x0000);
				say("\"That is all right. If thou art with my friend here, thou needest not speak with me.\"");
				UI_remove_npc_face1();
				0x0000->set_conversation_slot();
			}
			DUPRE->add_to_party();
			remove("join");
			add("leave");
			DUPRE->set_new_schedules(MIDNIGHT, EAT_AT_INN, [0x097C, 0x0464]);
		} else {
			var0006 = UI_die_roll(0x0001, 0x0004);
			if (var0006 == 0x0001) {
				say("\"This is no time for idle chat. We're on a quest!\"");
			}
			if (var0006 == 0x0002) {
				say("\"This must wait. There is no time for delay!\"");
			}
			if (var0006 == 0x0003) {
				say("\"We must press on, Avatar!\"");
			}
			if (var0006 == 0x0004) {
				say("\"The Sands of Time are dwindling! We must hurry!\"");
			}
		}
		if (SHAMINO->get_npc_id() == 0x001E) {
			add("Shamino's whereabouts");
		}
		if (IOLO->get_npc_id() == 0x001E) {
			add("Iolo's whereabouts");
		}
		if (BOYDON->get_npc_id() == 0x001E) {
			add("Boydon's whereabouts");
		}
		if (gflags[DUPRE_HAS_BELONGINGS] && ((!DUPRE->get_item_flag(IN_PARTY)) && DUPRE->get_cont_items(SHAPE_ANY, QUALITY_ANY, FRAME_ANY))) {
			add("belongings");
		}
		converse (["bye"]) {
			case "belongings" (remove):
				Func0829();
				fallthrough;

			case "good news" (remove):
				if (IOLO->get_item_flag(IN_PARTY) || (IOLO->get_npc_id() == 0x001E)) {
					say("\"But I should let Iolo tell thee...\"");
				} else {
					say("\"The wizard Gustacio hath agreed to aid us, if we will but assist him in his experiments.\"");
					say("\"He bet with me that thou wouldst not survive Freedom, but I told him that thou wert made of tougher stuff than any dungeon!\"");
					say("\"I think thy survival shall impress him...\"");
					gflags[AFTER_FREEDOM_NEWS] = true;
				}
				fallthrough;

			case "join":
				if (gflags[BEGAN_KNIGHTS_TEST] && (!gflags[SLAIN_WOLF])) {
					say("\"But Sir Shmed said that the Test is only for one, ",
						var0001,
						"! I cannot come with thee.\"");
					Func094E(SHMED, "@Thou must enter alone, stranger.@");
					Func097F(SHMED, "@Alone!@", 0x0000);
					Func097F(DUPRE, "@Be brave!@", 0x0000);
					abort;
				}
				remove("join");
				if (UI_get_array_size(UI_get_party_list2()) < 0x0005) {
					add("leave");
					say("\"With great pride!\"");
					DUPRE->add_to_party();
					gflags[DUPRE_HAS_BELONGINGS] = true;
				} else {
					say("\"But thou hast so many companions, ",
						var0002,
						"! I shall only be in thy way.\"");
					say("\"'Twould be better for me to remain where I am, ",
						var0001,
						".\"");
				}
				fallthrough;

			case "leave" (remove):
				if (!gflags[EQUIPMENT_EXCHANGED]) {
					say("\"Leave thee at a time such as this? Surely, thou dost jest. Onward!\"");
				} else {
					add("join");
					say("\"I hesitate to leave thee. But if thou dost insist...\"");
					DUPRE->remove_from_party();
					Func0829();
					Func09B4(DUPRE);
				}
				fallthrough;

			case "Shamino's whereabouts" (remove):
				if (gflags[SHAMINO_RESURRECTED_BY_MONKS]) {
					say("\"I have exciting news -- the monks have returned Shamino to us again, healthy and whole! This he can explain to thee.\"");
				}
				say("\"Not being as patient as I am, ",
					var0001,
					", our good friend Shamino hath gone into the woods to hunt wild game.\"");
				say("\"He went west from here, towards the magic woods.\"");
				fallthrough;

			case "Iolo's whereabouts" (remove):
				say("\"The good bard was very disturbed by thy sudden departure, and hath been questioning the Mages constantly as to thy fate.\"");
				say("\"He hath gained the friendship of the Sorcerer Gustacio, and hath taken to aiding that worthy in his studies. We can find him there.\"");
				fallthrough;

			case "Boydon's whereabouts" (remove):
				say("\"Thou wouldst never believe it! Boydon hath become very friendly with young Bucia of the Canton, and spends much time with her.\"");
				say("\"If we can find her, then we shall find him!\"");
				fallthrough;

			case "bye":
				if (gflags[EQUIPMENT_EXCHANGED] && (!gflags[DUPRE_MADE_EQUIPMENT_LIST])) {
					say("\"Before we go any farther, Avatar, I think we should take stock of our supplies.\"");
					say("\"That blasted storm exchanged all of mine equipment for useless refuse! Even mine enchanted shield!\"");
					say("\"We cannot hope to survive long without the proper equipment. Perhaps if we can find where this rubbish came from, we can find our good equipment.\"");
					say("\"I shall prepare a list.\"");
					if (SHAMINO->npc_nearby()) {
						Func094E(SHAMINO, "@I have already begun one.@");
						0x0000->set_conversation_slot();
						say("\"Then I shall add to it.\"");
					}
					Func092B();
					gflags[DUPRE_MADE_EQUIPMENT_LIST] = true;
				}
				UI_remove_npc_face0();
				Func097F(AVATAR, "@That's all for now.@", 0x0000);
				Func097F(DUPRE, (("@Yes, " + var0001) + "."), 0x0002);
				break;
		}
	}
	if (event == EGG) {
		var0007 = Func0994();
		if (var0007 == 0x0016) {
			DUPRE->show_npc_face0(0x0000);
			say("\"Unholy creatures!\tWe must destroy these foul skeletons, Avatar!\"");
			UI_remove_npc_face0();
			Func097F(DUPRE, "@I hate skeletons!@", 0x0002);
			abort;
		}
	}
}

extern var Func0954 0x954 ();
extern var Func0953 0x953 ();
extern void Func0936 0x936 (var var0000, var var0001);
extern void Func092E 0x92E (var var0000);
extern var Func0994 0x994 ();
extern var Func095C 0x95C (var var0000, var var0001);
extern void Func095E 0x95E (var var0000, var var0001, var var0002);
extern var Func099B 0x99B (var var0000, var var0001, var var0002, var var0003, var var0004, var var0005, var var0006);
extern void Func07D1 object#(0x7D1) ();
extern void Func097F 0x97F (var var0000, var var0001, var var0002);
extern void Func092B 0x92B ();
extern void Func09AA 0x9AA ();
extern var Func09A0 0x9A0 (var var0000, var var0001);
extern void Func0863 0x863 ();
extern void Func094E 0x94E (var var0000, var var0001);
extern void Func09B4 0x9B4 (var var0000);

void Func0402 object#(0x402) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;
	var var0008;
	var var0009;
	var var000A;
	var var000B;
	var var000C;
	var var000D;

	var0000 = SHAMINO->get_npc_id();
	var0001 = Func0954();
	var0002 = UI_is_pc_female();
	var0003 = Func0953();
	var0004 = UI_part_of_day();
	if ((event == DEATH) && SHAMINO->get_item_flag(SI_TOURNAMENT)) {
		if (gflags[MONITOR_TRAINING]) {
			var0005 = SHAMINO->get_oppressor();
			var0005 = 0x0000 - var0005;
			if (!gflags[TEMP_FLAG_1]) {
				gflags[TEMP_FLAG_1] = true;
				Func0936(var0005->get_npc_object(), SHAMINO->get_npc_object());
				return;
			}
			Func092E(item);
			return;
		}
		if (gflags[BEATRIX_PROTECTION]) {
			if ((Func0994() != 0x0010) && ((!gflags[BANES_RELEASED]) && (Func0994() != 0x0018))) {
				BEATRIX->show_npc_face0(0x0000);
				say("\"Do not die, my sweet King...\"");
				SHAMINO->show_npc_face1(0x0000);
				say("\"Beatrix, is that thee?\"");
				UI_remove_npc_face1();
				0x0000->set_conversation_slot();
				say("\"I forgive thee for deserting us, King Shamino. To prove that my love for thee is stronger than eternity, I shall heal thee of thy wounds.\"");
				say("\"Keep this book as a keepsake between us. Now I must go into the Void, but remember me always...\"");
				var0006 = Func095C(SHAMINO, STRENGTH);
				var0007 = Func095C(SHAMINO, HEALTH);
				var0008 = var0006 - var0007;
				Func095E(SHAMINO, HEALTH, var0008);
				var0009 = Func099B(SHAMINO, 0x0001, 0x0282, 0x003F, 0x0000, 0x0000, true);
				gflags[BEATRIX_PROTECTION] = false;
				gflags[BEATRIX_FORGAVE_SHAMINO] = true;
				SHAMINO->clear_item_flag(SI_TOURNAMENT);
			} else {
				SHAMINO->clear_item_flag(SI_TOURNAMENT);
				SHAMINO->reduce_health(0x0032, NORMAL_DAMAGE);
			}
		}
	}
	if (event == DOUBLECLICK) {
		AVATAR->item_say("Shamino...");
		SHAMINO->Func07D1();
		if (!SHAMINO->get_item_flag(SI_ZOMBIE)) {
			Func097F(SHAMINO, (("@Yes, " + var0003) + "?"), 0x0002);
			SHAMINO->set_schedule_type(TALK);
		} else {
			var000A = UI_die_roll(0x0001, 0x0004);
			if (var000A == 0x0001) {
				Func097F(SHAMINO, "@Backward, not forward!@", 0x0002);
			}
			if (var000A == 0x0002) {
				Func097F(SHAMINO, "@Free thyselves!@", 0x0002);
			}
			if (var000A == 0x0003) {
				Func097F(SHAMINO, "@Chaos reigns!@", 0x0002);
			}
			if (var000A == 0x0004) {
				Func097F(SHAMINO, "@Take from the rich!@", 0x0002);
			}
		}
	}
	if (event == STARTED_TALKING) {
		SHAMINO->clear_item_say();
		if (SHAMINO->get_item_flag(IN_PARTY)) {
			SHAMINO->set_schedule_type(FOLLOW_AVATAR);
			add("leave");
		} else {
			SHAMINO->run_schedule();
			add("join");
		}
		SHAMINO->show_npc_face0(0x0000);
		if (gflags[EQUIPMENT_EXCHANGED] && (!gflags[SHAMINO_MADE_EQUIPMENT_LIST])) {
			say("\"Avatar! Art thou all right? I heard what sounded like the explosions of a volcano -- and look at all the fire here...\"");
			say("\"I have been searching all over for thee! That storm hath left me quite disconcerted. I can find neither Iolo nor Dupre.\"");
			say("\"And, to make matters worse, nothing remains of the equipment that Lord British gave us! It hath all been replaced by strange items that I do not recognize.\"");
			say("\"Perhaps thou shouldst inspect thine equipment as well! I shall make a list of what we have.\"");
			var0009 = Func099B(AVATAR, 0x0001, 0x031D, 0x00BD, 0x0000, 0x0000, true);
			Func092B();
			gflags[SHAMINO_MADE_EQUIPMENT_LIST] = true;
			Func097F(SHAMINO, "@Such strangeness!@", 0x0000);
			Func09AA();
			SHAMINO->add_to_party();
			gflags[SHAMINO_HAS_BELONGINGS] = true;
			SHAMINO->set_new_schedules(MIDNIGHT, EAT_AT_INN, [0x097C, 0x0464]);
			abort;
		}
		do {
			if (var0000 == 0x001E) {
				say("\"Thou hast escaped the foul mages' prison swiftly, indeed. Most wonderful!\"");
				say("\"Of course, I never doubted that thou wouldst return...\"");
				say("\"I also have news, ",
					var0001,
					". I bear a message, as well as two presents.\"");
				var000B = false;
				var000C = false;
				add(["message", "presents"]);
				if (!gflags[AFTER_FREEDOM_NEWS]) {
					add("news");
				}
				if (gflags[SHAMINO_TELEPORTED_BY_MONKS]) {
					add("How didst thou arrive?");
				}
				if (gflags[SHAMINO_RESURRECTED_BY_MONKS]) {
					add("death");
				}
				remove("join");
				break;
labelFunc0402_02F8:
				SHAMINO->add_to_party();
				gflags[SHAMINO_HAS_BELONGINGS] = true;
				SHAMINO->set_npc_id(0x0000);
				var0009 = script Func09A0(0x0005, 0x0004) after 10 ticks {
					nohalt;
					call Func0377;
				};
				Func097F(SHAMINO, "@Welcome back!@", 0x0000);
				abort;
			}
			say("\"I am ready to provide whatever aid I can, ",
				var0001,
				".\"");
			if (DUPRE->get_npc_id() == 0x001E) {
				add("Dupre's whereabouts");
			}
			if (IOLO->get_npc_id() == 0x001E) {
				add("Iolo's whereabouts");
			}
			if (BOYDON->get_npc_id() == 0x001E) {
				add("Boydon's whereabouts");
			}
			if ((!SHAMINO->get_item_flag(IN_PARTY)) && (SHAMINO->get_cont_items(SHAPE_ANY, QUALITY_ANY, FRAME_ANY) && (gflags[SHAMINO_HAS_BELONGINGS] == true))) {
				add("belongings");
			}
			add(["bye"]);
		} while (false);
		converse (0) {
			case "belongings" (remove):
				Func0863();
				fallthrough;

			case "How didst thou arrive?" (remove):
				say("\"The monks came and brought me here, saying that it was vitally important for me to be here.\"");
				say("\"The one called Karnax said that I must fulfill my purpose, or the world itself would be in jeopardy...\"");
				if (var000B && var000C) {
					// I see no way other than this
					goto labelFunc0402_02F8;
				}
				fallthrough;

			case "death" (remove):
				say("\"That is right, I was dead when last we saw one another. However, the good monks found my body and returned life to me.\"");
				if (var000B && var000C) {
					// I see no way other than this
					goto labelFunc0402_02F8;
				}
				fallthrough;

			case "news" (remove):
				if (IOLO->get_item_flag(IN_PARTY)) {
					say("\"To be honest, this is not my news -- it belongs to our good friend, the Bard. Thou shouldst ask Iolo.\"");
				} else if (IOLO->get_npc_id() == 0x001E) {
					say("\"Quickly, let us find Iolo. He can tell thee all about the discovery!\"");
				} else {
					say("\"The Mages of this place are not friendly toward outsiders, but thy survival shall surely impress them.\"");
					say("\"Particularly, I am sure that the one known as Gustacio will be inclined to help us now. Let us seek him out.\"");
					gflags[AFTER_FREEDOM_NEWS] = true;
				}
				if (var000B && var000C) {
					// I see no way other than this
					goto labelFunc0402_02F8;
				}
				fallthrough;

			case "message" (remove):
				var000B = true;
				if (var0002) {
					say("\"I have had the chance to spend a few hours in the company of the Mage Frigidazzi, on whose account thou hast been imprisoned.\"");
					say("\"She asked me to convey her apologies to thee, and to present thee with three gifts.\"");
				} else {
					say("\"The Sorceress Frigidazzi met secretly with me, and expressed her sorrow at what had been done to thee.\"");
					say("\"I think she likes thee, ",
						var0001,
						". But with that MageLord around, she doth not dare to see thee again!\"");
					say("\"As a sign of her regret for what hath happened -- jail and all -- she sent three gifts to thee.\"");
				}
				if (var000B && var000C) {
					// I see no way other than this
					goto labelFunc0402_02F8;
				}
				fallthrough;

			case "presents" (remove):
				var000C = true;
				if (var0002) {
					say("\"These earrings are of ancient devising, and I was told that they would be most flattering to thee.\"");
					say("\"Note that they are engraved with serpentine runes, milady.\"");
					say("\"There is also a magic scroll, upon which is inscribed a spell to protect against heat. This we shall need ere we venture into the subterranean passageways.\"");
				} else {
					say("\"I bear three gifts from thine admirer -- a magic scroll, an earring, and a note.\"");
					say("\"The scroll bears a spell of protection against heat, and should be most useful.\"");
					say("\"As for the earring, it is inscribed with serpentine runes of ancient design.\"");
				}
				say("\"Lastly, there is a note, but its contents are not known to me.\"");
				say("\"Here they are...\"");
				var0009 = Func099B(AVATAR, 0x0001, 0x027B, QUALITY_ANY, 0x0000, 0x0000, true);
				var0009 = Func099B(AVATAR, 0x0001, 0x031D, 0x00CD, 0x0006, 0x0000, true);
				var0009 = Func099B(AVATAR, 0x0001, 0x02CB, 0x0010, 0x0000, 0x0000, true);
				gflags[HAVE_CHILL_SPELL] = true;
				if (var000B && var000C) {
					// I see no way other than this
					goto labelFunc0402_02F8;
				}
				fallthrough;

			case "join":
				if (gflags[BEGAN_KNIGHTS_TEST] && (!gflags[SLAIN_WOLF])) {
					say("\"And disregard the rules of the Test of Knighthood? ",
						var0001,
						", I am shocked.\"");
					Func094E(SHMED, "@Thou must go alone.@");
					Func097F(SHMED, "@Alone!@", 0x0000);
					Func097F(SHAMINO, "@Shocked!@", 0x0002);
					abort;
				}
				remove("join");
				if (UI_get_array_size(UI_get_party_list2()) < 0x0005) {
					add("leave");
					say("\"Most gratefully!\"");
					SHAMINO->add_to_party();
					gflags[SHAMINO_HAS_BELONGINGS] = true;
				} else {
					say("\"I would join with thee, old friend, but I can see that thou already hast a large party.\"");
					say("\"A woodsman like myself would feel uncomfortable travelling with such a large group. I will remain here, instead.\"");
				}
				fallthrough;

			case "leave" (remove):
				if (!gflags[EQUIPMENT_EXCHANGED]) {
					say("\"But we have barely begun, Avatar! How can I stand idly here while the adventure awaits?\"");
				} else {
					add("join");
					say("\"If that is what thou dost wish...\"");
					SHAMINO->remove_from_party();
					Func0863();
					Func09B4(SHAMINO);
				}
				fallthrough;

			case "Dupre's whereabouts" (remove):
				say("\"Thou knowest our good friend! He hath deposited himself at the Blue Boar Inn, and hath been trying out the local brews!\"");
				fallthrough;

			case "Iolo's whereabouts" (remove):
				say("\"Iolo hath struck up a friendship with the Mage Gustacio, from whom he is learning much about the storms which plague this land.\"");
				say("\"I expect we could find him at Gustacio's manor.\"");
				fallthrough;

			case "Boydon's whereabouts" (remove):
				say("\"Why, that magical creation doth have a budding romance with the shopgirl from the Canton!\"");
				say("\"If the shop is open when we arrive there, Boydon will almost certainly be there.\"");
				fallthrough;

			case "bye":
				UI_remove_npc_face0();
				Func097F(AVATAR, "@Thanks!@", 0x0000);
				Func097F(SHAMINO, "@Any time.@", 0x0002);
				break;
		}
	}
	if (event == EGG) {
		var000D = Func0994();
		if (var000D == 0x0016) {
			IOLO->show_npc_face0(0x0000);
			say("\"We are beset by dragons, Avatar! We must slay them quickly!\"");
			UI_remove_npc_face0();
			Func097F(SHAMINO, "@I hate dragons!@", 0x0002);
			abort;
		}
		if (var000D == 0x0010) {
			SHAMINO->show_npc_face0(0x0000);
			say("\"It hath been so long I barely recognize this place, like somewhere from a dream. I do recall that there is an illusory door west of the castle gates near a big tree.\"");
			UI_remove_npc_face0();
			Func097F(SHAMINO, "@Somewhere around here...@", 0x0003);
		}
	}
}

extern var Func0954 0x954 ();
extern var Func0953 0x953 ();
extern void Func0936 0x936 (var var0000, var var0001);
extern void Func092E 0x92E (var var0000);
extern void Func097F 0x97F (var var0000, var var0001, var var0002);
extern void Func07D1 object#(0x7D1) ();
extern var Func0906 0x906 (var var0000);
extern void Func07D2 object#(0x7D2) ();
extern var Func0942 0x942 (var var0000);
extern void Func092B 0x92B ();
extern var Func0955 0x955 ();
extern var Func099B 0x99B (var var0000, var var0001, var var0002, var var0003, var var0004, var var0005, var var0006);
extern var Func0977 0x977 (var var0000);
extern void Func09B4 0x9B4 (var var0000);
extern var Func0957 0x957 (var var0000);
extern void Func09B0 0x9B0 (var var0000);
extern var Func0994 0x994 ();
extern void Func06D9 object#(0x6D9) ();

void Func0403 object#(0x403) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;
	var var0008;
	var var0009;
	var var000A;
	var var000B;
	var var000C;
	var var000D;
	var var000E;
	var var000F;
	var var0010;
	var var0011;
	var var0012;
	var var0013;
	var var0014;
	var var0015;
	var var0016;
	var var0017;
	var var0018;
	var var0019;
	var var001A;
	var var001B;

	var0000 = IOLO->get_npc_id();
	var0001 = Func0954();
	var0002 = Func0953();
	if (event == DEATH) {
		if (gflags[MONITOR_TRAINING]) {
			var0003 = IOLO->get_oppressor();
			var0003 = 0x0000 - var0003;
			if (!gflags[TEMP_FLAG_1]) {
				gflags[TEMP_FLAG_1] = true;
				Func0936(var0003->get_npc_object(), IOLO->get_npc_object());
				return;
			}
			Func092E(item);
			return;
		}
	}
	if (event == DOUBLECLICK) {
		Func097F(AVATAR, "@Dear friend...@", 0x0000);
		IOLO->Func07D1();
		if (!IOLO->get_item_flag(SI_ZOMBIE)) {
			if (gflags[EQUIPMENT_EXCHANGED] && (!gflags[IOLO_MADE_EQUIPMENT_LIST])) {
				var0004 = false;
				var0005 = IOLO->find_nearby(0x0178, 0x000F, MASK_NONE);
				for (var0008 in var0005 with var0006 to var0007) {
					if ((var0008->get_item_quality() == 0x0068) && (Func0906(var0008) != 0x0002)) {
						var0004 = true;
					}
				}
				var0005 = IOLO->find_nearby(0x010E, 0x000F, MASK_NONE);
				for (var0008 in var0005 with var0009 to var000A) {
					if (var0008->get_item_quality() == 0x0068) {
						var0004 = true;
					}
				}
				if (var0004) {
					Func097F(IOLO, "@I am free!@", 0x0002);
					IOLO->set_schedule_type(TALK);
				} else {
					IOLO->Func07D2();
					Func097F(IOLO, "@Help me, Avatar!@", 0x0002);
					var000B = script IOLO after 7 ticks {
						nohalt;
						call Func01D1;
					};
					IOLO->set_schedule_type(WAIT);
				}
			} else {
				Func097F(IOLO, "@Yes?@", 0x0002);
				IOLO->set_schedule_type(TALK);
			}
		} else {
			var000C = UI_get_random(0x0004);
			if (var000C == 0x0001) {
				Func097F(IOLO, "@Wrong is right!@", 0x0002);
			}
			if (var000C == 0x0002) {
				Func097F(IOLO, "@Life is a farce!@", 0x0002);
			}
			if (var000C == 0x0003) {
				Func097F(IOLO, "@Sing the dirge of love...@", 0x0002);
			}
			if (var000C == 0x0004) {
				Func097F(IOLO, "@Futility is the answer!@", 0x0002);
			}
		}
	}
	if (event == STARTED_TALKING) {
		IOLO->clear_item_say();
		AVATAR->clear_item_say();
		if (!gflags[STARTING_SPEECH]) {
			UI_init_conversation();
			IOLO->show_npc_face0(0x0000);
			say("\"'Twas a fearsome passage, ",
				var0002,
				". After we sailed between the Serpent Pillars, I could have sworn that we were flying...\"");
			say("\"Yet here we are on the ship. I wonder if I lost anything...\"");
			DUPRE->show_npc_face1(0x0000);
			say("\"We may be on the ship, but the ship is upon dry land! I think that thou art correct, Iolo. We did fly!\"");
			UI_remove_npc_face1();
			0x0000->set_conversation_slot();
			say("\"Brrr. Dost thou notice the chill in the air? 'Tis much colder here than at home.\"");
			say("\"I hope Gwenno brought enough warm clothing...\"");
			SHAMINO->show_npc_face1(0x0000);
			say("\"Do not worry so, old friend. We shall find thy wife soon enough.\"");
			UI_remove_npc_face1();
			DUPRE->show_npc_face1(0x0000);
			say("\"And that fiend, Batlin, I hope!\"");
			UI_remove_npc_face1();
			0x0000->set_conversation_slot();
			say("\"Look, ",
				var0002,
				"! A strange storm is nearly upon us. This is certainly not Britannia!\"");
			UI_remove_npc_face0();
			Func097F(SHAMINO, "@Where are we?@", 0x0005);
			Func097F(DUPRE, "@Let us find Batlin!@", 0x000F);
			Func097F(IOLO, "@Do not forget about Gwenno...@", 0x0023);
			IOLO->add_to_party();
			DUPRE->add_to_party();
			SHAMINO->add_to_party();
			gflags[STARTING_SPEECH] = true;
			AVATAR->clear_item_flag(DONT_MOVE);
			abort;
		}
		if (gflags[EQUIPMENT_EXCHANGED] && (!gflags[IOLO_MADE_EQUIPMENT_LIST])) {
			IOLO->show_npc_face0(0x0000);
			say("\"I thank thee for freeing me from this hellhole! The natives of this place are ignorant sots. Imagine, thinking me to be a sorcerer!\"");
			say("\"Hast thou looked in thy packs since the storm, ",
				var0001,
				"? Nothing in my backpack is as it was when Lord British gave us the list, Avatar!\"");
			if (Func0942(SHAMINO)) {
				SHAMINO->show_npc_face1(0x0000);
				say("\"I am making a list of the strange items which the storm gave us.\"");
				UI_remove_npc_face1();
				0x0000->set_conversation_slot();
				say("\"Then I shall add to it.\"");
			} else if (Func0942(DUPRE)) {
				DUPRE->show_npc_face1(0x0000);
				say("\"I have a list of the strange items which the storm gave us.\"");
				UI_remove_npc_face1();
				0x0000->set_conversation_slot();
				say("\"I shall add to it.\"");
			} else {
				say("\"I shall make a list of the strange things I have found in my packs. Perhaps these are clues to where our real belongings have gone.\"");
			}
			IOLO->add_to_party();
			IOLO->set_new_schedules(MIDNIGHT, EAT_AT_INN, [0x097C, 0x0464]);
			gflags[IOLO_HAS_BELONGINGS] = true;
			Func092B();
			gflags[IOLO_MADE_EQUIPMENT_LIST] = true;
			abort;
		}
		IOLO->show_npc_face0(0x0000);
		if (IOLO->get_item_flag(IN_PARTY)) {
			IOLO->set_schedule_type(FOLLOW_AVATAR);
			add("leave");
		} else {
			IOLO->run_schedule();
			add("join");
		}
		if (var0000 == 0x001E) {
			remove("join");
			say("\"Thank the Virtues! Thou art whole and hale, ",
				var0001,
				"!\"");
			say("\"I feared that I had lost both thee and my beloved wife, but thou hast survived the depths even as Dupre assured me that thou wouldst...\"");
			if (Func0942(GUSTACIO)) {
				GUSTACIO->show_npc_face1(0x0000);
				say("\"'Tis said that only a superb Mage can leave the Mountains of Freedom alive.\"");
				UI_remove_npc_face1();
				0x0000->set_conversation_slot();
			}
			say("\"The Sorcerer Gustacio hath been instructing me somewhat in the magic of this land, ",
				var0001,
				". I think that he doth have information that shall interest thee.\"");
			gflags[AFTER_FREEDOM_NEWS] = true;
			IOLO->set_npc_id(0x0000);
			IOLO->add_to_party();
			gflags[IOLO_HAS_BELONGINGS] = true;
			add("leave");
		} else {
			say("\"Wouldst thou enjoy some idle conversation, ",
				var0001,
				", or shall I embrace my lute and provide a musical interlude?\"");
			add("a song");
		}
		if (SHAMINO->get_npc_id() == 0x001E) {
			add("Shamino's whereabouts");
		}
		if (DUPRE->get_npc_id() == 0x001E) {
			add("Dupre's whereabouts");
		}
		if (BOYDON->get_npc_id() == 0x001E) {
			add("Boydon's whereabouts");
		}
		if (gflags[IOLO_HAS_BELONGINGS] && (IOLO->get_cont_items(SHAPE_ANY, QUALITY_ANY, FRAME_ANY) && (!IOLO->get_item_flag(IN_PARTY)))) {
			add("belongings");
		}
		IOLO->show_npc_face0(0x0000);
		converse (["Gwenno", "bye"]) {
			case "belongings" (remove):
				if (IOLO->get_cont_items(SHAPE_ANY, QUALITY_ANY, FRAME_ANY)) {
					say("\"I am carrying many items, some of which may be of use to thee. Wouldst thou care to have these?\"");
					if (Func0955()) {
						say("\"Here they are.\"");
						gflags[IOLO_HAS_BELONGINGS] = false;
						var000D = [false, 0x0000];
						var000E = IOLO->get_cont_items(SHAPE_ANY, QUALITY_ANY, FRAME_ANY);
						for (var0011 in var000E with var000F to var0010) {
							if (!((var0011->get_item_shape() == 0x0128) && (var0011->get_item_frame() == 0x0002))) {
								var000B = Func099B(AVATAR, var0011->get_item_quantity(0x0000), var0011->get_item_shape(), var0011->get_item_quality(), var0011->get_item_frame(), var0011->get_item_flag(TEMPORARY), false);
								if (var000D[0x0001] == 0x0000) {
									var000D[0x0001] = var000B[0x0001];
								}
								var000D[0x0002] += var000B[Func0977(var000B)];
								var0011->remove_item();
							}
						}
						var000B = var000D;
						if (var000B[0x0001] != 0x0000) {
							say("\"Thy friends will have to help carry these things.\"");
						}
						if (var000B[0x0002] > 0x0000) {
							var000B = var000B[0x0002];
							if (var000B > 0x0001) {
								say("\"Since thou canst not carry these remaining ",
									var000B,
									" items, I will place them at thy feet.\"");
							} else {
								say("\"Since thou dost not have enough room for this last item, I will place it at thy feet.\"");
							}
						}
					} else {
						gflags[IOLO_HAS_BELONGINGS] = true;
						say("\"If thou changest thy mind, thou hast but to return and ask again.\"");
					}
				}
				fallthrough;

			case "join":
				if (gflags[BEGAN_KNIGHTS_TEST] && (!gflags[SLAIN_WOLF])) {
					if (Func0942(SHMED)) {
						say("\"But ",
							var0001,
							", the Guardian of the Test is standing right here. If thou desirest to cheat, thou shouldst at least do so\tcovertly...\"");
						SHMED->show_npc_face1(0x0000);
						say("\"No cheating, stranger!\"");
						UI_remove_npc_face1();
						Func097F(SHMED, "@No cheating!@", 0x0002);
					} else {
						say("\"I cannot join thee, friend. Even if thou wouldst cheat at the Test, I cannot aid thee in so doing. I am thy true friend.\"");
					}
					Func097F(IOLO, "@Sorry...@", 0x0000);
					abort;
				}
				remove("join");
				if (UI_get_array_size(UI_get_party_list2()) < 0x0005) {
					add("leave");
					say("\"'Tis always an adventure to travel with thee, ",
						var0002,
						"! I shall be proud to accompany thee.\"");
					IOLO->add_to_party();
					gflags[IOLO_HAS_BELONGINGS] = true;
				} else {
					say("\"I would be glad to accompany thee, ",
						var0001,
						". However, I am an old man, and I can see that thou hast many companions at thy side.\"");
					say("\"I think that perhaps I should remain where I am...\"");
				}
				fallthrough;

			case "leave" (remove):
				if (!gflags[EQUIPMENT_EXCHANGED]) {
					say("\"Thy concern for an old man is appreciated, my old friend. However, we have barely begun this adventure, and I am spry enough to keep up with thee!\"");
				} else {
					add("join");
					say("\"Whatever thou dost wish, Avatar.\"");
					IOLO->remove_from_party();
					if (IOLO->get_cont_items(SHAPE_ANY, QUALITY_ANY, FRAME_ANY)) {
						say("\"I am carrying many items, some of which may be of use to thee. Wouldst thou care to have these before I depart?\"");
						if (Func0955()) {
							say("\"Here they are.\"");
							gflags[IOLO_HAS_BELONGINGS] = false;
							var000D = [false, 0x0000];
							var000E = IOLO->get_cont_items(SHAPE_ANY, QUALITY_ANY, FRAME_ANY);
							for (var0011 in var000E with var0012 to var0013) {
								if (!((var0011->get_item_shape() == 0x0128) && (var0011->get_item_frame() == 0x0002))) {
									var000B = Func099B(AVATAR, var0011->get_item_quantity(0x0000), var0011->get_item_shape(), var0011->get_item_quality(), var0011->get_item_frame(), var0011->get_item_flag(TEMPORARY), false);
									if (var000D[0x0001] == 0x0000) {
										var000D[0x0001] = var000B[0x0001];
									}
									var000D[0x0002] += var000B[Func0977(var000B)];
									var0011->remove_item();
								}
							}
							var000B = var000D;
							if (var000B[0x0001] != 0x0000) {
								say("\"Thy friends will have to help carry these things.\"");
							}
							if (var000B[0x0002] > 0x0000) {
								var000B = var000B[0x0002];
								if (var000B > 0x0001) {
									say("\"Since thou canst not carry these remaining ",
										var000B,
										" items, I will place them at thy feet.\"");
								} else {
									say("\"Since thou dost not have enough room for this last item, I will place it at thy feet.\"");
								}
							}
						} else {
							gflags[IOLO_HAS_BELONGINGS] = true;
							say("\"If thou changest thy mind, thou hast but to return and ask again.\"");
						}
					}
					Func09B4(IOLO);
				}
				fallthrough;

			case "Gwenno" (remove):
				var000B = Func0942(GWENNO);
				if (GWENNO->get_item_flag(IN_PARTY) || (var000B && (!GWENNO->get_item_flag(SI_ZOMBIE)))) {
					say("\"No truer friend have I had in all of my life than thee, ",
						var0002,
						". With my lady love Gwenno returned to my side where she doth belong, my life is once again complete.\"");
				} else if (!gflags[TALKED_TO_GWANI_ABOUT_GWENNO]) {
					say("\"I miss Gwenno so much, Avatar. I hope that it is not long before we find her and I may hold her in mine arms again.\"");
				} else if (!gflags[FREED_GWENNOS_BODY]) {
					say("\"Mine heart is broken! My life hath no meaning without my lady love! Oh, ",
						var0002,
						", how could our good and noble quest have ended in such tragedy!\"");
				} else if (gflags[GWENNO_IS_DEAD]) {
					say("\"Now that we have succeeded in freeing Gwenno's body, perhaps the Monks of Monk Isle -- the self-professed masters of life and death -- may be able to help her.\"");
				} else if (GWENNO->get_item_flag(SI_ZOMBIE)) {
					say("\"We must find some way of restoring Gwenno's mind! Unless we can do that her precious spirit is lost to me.\"");
				} else {
					say("\"My soul is at peace. Joy is to know Gwenno, and to have her once more in thriving good health.\"");
				}
				fallthrough;

			case "a song" (remove):
				var0014 = BYRIN->get_item_flag(MET);
				if (var0014) {
					say("\"Dost thou wish me to repeat a song thou hast already heard? Or dost thou wish to hear a new song?\"");
					var0015 = [];
					if (Func0957(["old song", "new song"]) == 0x0001) {
						if (gflags[HEARD_BEATRIX_SONG] == true) {
							var0015 &= 0x0001;
						}
						if (gflags[HEARD_MOUNTAIN_SONG] == true) {
							var0015 &= 0x0002;
						}
						if (gflags[HEARD_GWANI_SONG] == true) {
							var0015 &= 0x0003;
						}
						if (gflags[HEARD_FOREST_MASTER_SONG] == true) {
							var0015 &= 0x0004;
						}
						if (gflags[HEARD_DREAM_SONG] == true) {
							var0015 &= 0x0005;
						}
						if (gflags[HEARD_WHITE_DRAGON_SONG] == true) {
							var0015 &= 0x0006;
						}
					} else {
						if (gflags[HEARD_BEATRIX_SONG] == false) {
							var0015 &= 0x0001;
						}
						if (gflags[HEARD_MOUNTAIN_SONG] == false) {
							var0015 &= 0x0002;
						}
						if (gflags[HEARD_GWANI_SONG] == false) {
							var0015 &= 0x0003;
						}
						if (gflags[HEARD_FOREST_MASTER_SONG] == false) {
							var0015 &= 0x0004;
						}
						if (gflags[HEARD_DREAM_SONG] == false) {
							var0015 &= 0x0005;
						}
						if (gflags[HEARD_WHITE_DRAGON_SONG] == false) {
							var0015 &= 0x0006;
						}
					}
					if (var0015 == []) {
						say("\"I'm sorry... Thou hast heard all of my songs.\"");
					} else {
						var0016 = UI_get_random(UI_get_array_size(var0015));
						var0017 = var0015[var0016];
						Func09B0(var0017);
					}
				} else {
					say("\"I cannot think of anything to sing at the moment, ",
						var0001,
						". Perhaps if thou didst ask me later...\"");
				}
				fallthrough;

			case "Shamino's whereabouts" (remove):
				if (gflags[SHAMINO_RESURRECTED_BY_MONKS]) {
					say("\"Thou hast no doubt heard by now the news? That Shamino doth live again! The monks brought him to us.\"");
					say("\"I think he was more disturbed by thy departure than he cared to show. Or else they have told him something...\"");
				} else {
					say("\"I think he was more disturbed by thine abrupt departure than he cared to show.\"");
				}
				say("\"He went west into the woods, to be alone.\"");
				fallthrough;

			case "Dupre's whereabouts" (remove):
				say("\"At the nearest tavern, of course!\"");
				fallthrough;

			case "Boydon's whereabouts" (remove):
				say("\"Um... well, I am not sure. Perhaps Dupre or Shamino might know.\"");
				fallthrough;

			case "bye":
				Func097F(AVATAR, "@Thanks!@", 0x0000);
				Func097F(IOLO, "@A pleasure!@", 0x0002);
				UI_remove_npc_face0();
				break;
		}
	}
	if (event == EGG) {
		var0018 = Func0994();
		var0019 = get_item_quality();
		if (var0018 == 0x001F) {
			IOLO->show_npc_face0(0x0000);
			say("\"Avatar! Why art thou in my dream? I was looking for Gwenno...\"");
			say("\"Oh. Perhaps I have intruded upon thy dream.\"");
			say("\"Forgive me. I shall go seeking my wife and leave thee to thy dream.\"");
			UI_remove_npc_face0();
			Func097F(IOLO, "@Pleasant dreams!@", 0x0002);
			var001A = CLONE_IOLO->get_object_position();
			UI_sprite_effect(ANIMATION_TELEPORT2, var001A[0x0001], var001A[0x0002], 0x0000, 0x0000, 0x0000, LOOP_ONCE);
			UI_play_sound_effect(0x0051);
			var000B = set_item_quality(0x0003);
			var000B = script item after 10 ticks {
				nohalt;
				call Func06D9;
			};
			abort;
		}
		if (var0018 == 0x0016) {
			IOLO->show_npc_face0(0x0000);
			say("\"More snakes! Destroy the vile creatures, Avatar!\"");
			UI_remove_npc_face0();
			Func097F(IOLO, "@I hate snakes!@", 0x0002);
			abort;
		}
		if (var0018 == 0x0008) {
			IOLO->show_npc_face0(0x0000);
			say("\"Oh, my poor Gwenno!\" *\"Now she is truly frigid.\"");
			UI_remove_npc_face0();
			Func097F(IOLO, "@My love hath now departed!@", 0x0002);
			abort;
		}
	}
	if (event == PROXIMITY) {
		if (IOLO->get_schedule_type() == PATROL) {
			if (gflags[EQUIPMENT_EXCHANGED] && (!gflags[IOLO_MADE_EQUIPMENT_LIST])) {
				var001B = ["@Woe is me!@", "@I feel cold.@", "@I am hungry.@", "@Release me!@", "@I'm innocent!@", "@Pity an old man...@"];
				Func097F(IOLO, var001B[UI_get_random(UI_get_array_size(var001B))], 0x0000);
			}
		}
	}
}

extern var Func0954 0x954 ();
extern var Func0953 0x953 ();
extern void Func097F 0x97F (var var0000, var var0001, var var0002);
extern void Func07D1 object#(0x7D1) ();
extern var Func0956 0x956 (var var0000);
extern var Func0955 0x955 ();
extern var Func0942 0x942 (var var0000);
extern void Func08FF 0x8FF ();

void Func0404 object#(0x404) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;

	var0000 = Func0954();
	var0001 = Func0953();
	var0002 = UI_is_pc_female();
	var0003 = UI_part_of_day();
	if ((var0003 > EARLY) || (var0003 < EVENING)) {
		var0003 = "day";
	} else {
		var0003 = "evening";
	}
	if ((event == DEATH) && get_item_flag(SI_TOURNAMENT)) {
		var0004 = script item {
			nohalt;
			call Func0329;
		};
	}
	if ((event == PROXIMITY) && (ANDRIO->get_schedule_type() == HOUND)) {
		if (UI_get_random(0x000A) < 0x0006) {
			abort;
		}
		var0005 = ["@How fascinating!@", "@Pay me no mind.@", "@I am simply watching...@", "@What art thou doing?@", "@I do hope I'm not in the way...@", "@May I see?@"];
		Func097F(ANDRIO, var0005[UI_get_random(UI_get_array_size(var0005))], 0x0000);
	}
	if (event == DOUBLECLICK) {
		AVATAR->item_say(("@Good " + var0003) + "!@");
		ANDRIO->Func07D1();
		Func097F(ANDRIO, (("@Greetings, " + var0000) + "."), 0x0002);
		ANDRIO->set_schedule_type(TALK);
	}
	if (event == STARTED_TALKING) {
		ANDRIO->run_schedule();
		ANDRIO->clear_item_say();
		ANDRIO->show_npc_face0(0x0000);
		var0006 = ANDRIO->get_item_flag(MET);
		if (gflags[BANES_RELEASED]) {
			say("\"Oh, am I glad to see thee! I have been very scared.\"");
			add("scared");
			gflags[KNOWS_ANDRIO_SCARED] = true;
		} else if (var0006 == false) {
			ANDRIO->set_item_flag(MET);
			say("\"Hello, I am Andrio. I never meet outsiders. Couldst thou tell me all about thy travels and adventures?\"");
			add("adventures");
		} else {
			say("\"Hast thou done anything exciting lately?\"");
			add("exciting");
		}
		if (gflags[KNOWS_ROTOLUNCIA_IS_KIDNAPPER] && (!ROTOLUNCIA->get_item_flag(DEAD))) {
			add("kidnap");
		}
		converse (["bye"]) {
			case "scared" (remove):
				say("\"The Glowing Man came and killed nearly everyone in the entire town. Fedabiblio tried to stop him, but not even he could withstand the Glowing Man's attack.\"");
				add("Fedabiblio");
				fallthrough;

			case "Fedabiblio" (remove):
				var0007 = FEDABIBLIO->get_schedule_type();
				if (var0007 == WAIT) {
					say("\"Fedabiblio fought a terrific battle, but when the Glowing Man was done with him, he had been turned into a statue. It remains beyond mine abilities to restore him.\"");
					add("restore");
				} else {
					say("\"Thank goodness, thou wert able to restore him to life. Else I would never finish my Mage's training!\"");
				}
				fallthrough;

			case "restore" (remove):
				say("\"I do not know for certain if anything can bring Fedabiblio back to life. Once I overheard Columna talking about a special wand that Torrissio owned.\"");
				add(["wand", "Torrissio"]);
				fallthrough;

			case "wand" (remove):
				say("\"'Twas called the Philanderer's Friend. It enabled the user to command objects to move -- quite useful in thievery, I imagine. Perhaps it is a similar sort of magic that is required to\tenable Fedabiblio to move again.\"");
				gflags[KNOWS_ABOUT_PHILANDERERS_FRIEND] = true;
				fallthrough;

			case "kidnap" (remove):
				say("\"I knew that thou didst lead an interesting life, ",
					var0001,
					"! I'm sure I can help thee.\"");
				say("\"Dost thou suspect townsfolk, or strangers?\"");
				var0004 = Func0956(["townsfolk", "strangers"]);
				if (var0004 == "strangers") {
					say("\"Perhaps. Yet to me, this doth have the stench of a Moonshadian intrigue.\"");
					say("\"For the moment, let us assume that I am right and thou art wrong...\"");
				}
				say("\"Is thine enemy a Mundane, or a Mage? What dost thou believe?\"");
				var0004 = Func0956(["Mundane", "Mage"]);
				if (var0004 == "Mundane") {
					say("\"No, no, no. How could a mere mortal snatch thy friend in such an arcane fashion?\"");
					say("\"The criminal must be a Mage!\"");
				} else {
					say("\"Exactly so!\"");
				}
				say("\"This narrows the search! If thou dost want the secrets of the Mages, ask Bucia the Provisioner -- she doth know all the gossip of the town.\"");
				say("\"Yet I suspect Torrissio. He is a true swine, and it would take a devious person to plan such a crime.\"");
				gflags[TORRISSIO_KIDNAP_SUSPECT] = true;
				fallthrough;

			case "adventures", "exciting" (remove):
				say("\"Yes, yes. I would very much love to hear about thine exciting adventures. While studying magic I have so little time to plan any expeditions of mine own.\"");
				add(["magic", "expeditions"]);
				fallthrough;

			case "magic" (remove):
				say("\"I am working to become a great master. Someday I hope to be as great as Master Filbercio.\"");
				say("\"Of course, I know that level of expertise will take some time. But I have the discipline! Just ask Freli, he will tell thee I do.\"");
				add(["Filbercio", "Freli"]);
				fallthrough;

			case "Filbercio" (remove):
				say("\"He is the MageLord of all Moonshade. There are rumors that no mage hath lived who was more powerful, not even the Mad Mage!\"");
				add("Mad Mage");
				fallthrough;

			case "Mad Mage" (remove):
				say("\"His name is Erstam. He was one of the founders of Moonshade. However, our instructors\tclaim he slowly became insane as his power grew. Eventually, he left the city to\tbe far away from his fellow spellcasters.\"");
				say("\"They tell us the same could happen to us should we seek too much power too soon. I wonder if that is what caused the other two mages to flee to the Mountains of Freedom?\"");
				say("\"Goodness, I hope that doth not happen to me!\"");
				add(["two mages", "Mountains of Freedom"]);
				fallthrough;

			case "two mages" (remove):
				say("\"I remember not their names, but they had a reputation for conducting unusual experiments,\tespecially with reagents. Someone once told me that they were always searching for more powerful components to assist in their magics.\"");
				fallthrough;

			case "Mountains of Freedom" (remove):
				say("\"They lie to the north of the island. I have heard that the caves there are filled with the\trare mineral known as Stoneheart. I am sure someone as brave as thou art will go there someday and discover whether the legend is true. Please promise to bring the tale whenever thou dost return from such a grand excursion.\"");
				say("\"Thou wilt tell, wilt thou not?\"");
				if (Func0955()) {
					say("\"Excellent, ",
						var0000,
						". I cannot wait to hear further tales of thy journeys.\"");
				} else {
					say("\"I see... I suppose one with thine important duties hast not the time for a simple apprentice of the arcane arts...");
				}
				fallthrough;

			case "Freli" (remove):
				say("\"He is my companion and fellow student. We have been friends for a very long time. And his mastery of magic is almost as great as mine own.\"");
				if (Func0942(FRELI)) {
					FRELI->show_npc_face1(0x0000);
					say("\"Almost!\"");
					0x0000->set_conversation_slot();
					say("\"Well...\"");
					0x0001->set_conversation_slot();
					say("\"Better!\"");
					0x0000->set_conversation_slot();
					say("\"Thou art mad!\"");
					UI_push_answers();
					add(["Stop this bickering!", "bye"]);
				}
				fallthrough;

			case "Stop this bickering!" (remove):
				UI_pop_answers();
				FRELI->show_npc_face1(0x0000);
				say("\"Quite right, ",
					var0000,
					". I am sorry.\"");
				UI_remove_npc_face1();
				0x0000->set_conversation_slot();
				say("\"Ah, yes, ",
					var0000,
					". I, too, am truly sorry.\"");
				say("\"How else may I help thee?\"");
				fallthrough;

			case "expeditions" (remove):
				say("\"Well, I am hesitant to admit how little I have seen of the land. Unlike thee, I am not an experienced traveller. There is so little I know about my surroundings, save how to manipulate them with magic. I have no knowledge of what it is like to face danger daily. Certainly nothing so grand as that which thou dost meet frequently. In comparison, my life is filled with boredom.\"");
				add("boredom");
				fallthrough;

			case "boredom" (remove):
				say("\"Yesterday I saw Torrissio leave his house at 9 in the morning -- same as always -- and run into one of the food vendors. I was positive Torrissio was about to transform her into a frog or some such, but instead, he gave no more than a rude chastising.\"");
				add(["chastising", "Torrissio"]);
				fallthrough;

			case "chastising" (remove):
				say("\"Torrissio is not very friendly. I have heard he bears ill will for many things, and doth not often forgive transgressions. I hope never to cross him, for I could not endure his enmity for long. Thou, too, shouldst walk with care, for if thou dost ever need his aid, pray no such bad feelings exist between thee and he\tor he will offer nothing.\"");
				fallthrough;

			case "Torrissio" (remove):
				if (gflags[BANES_RELEASED]) {
					var0007 = FEDABIBLIO->get_schedule_type();
					if (var0007 == WAIT) {
						say("\"I know not if the wand is in Torrissio's possession, but perhap thou wilt be able to\tconvince him to help thee. Be wary of him, however! He hath a reputation for being very tricky!\"");
					} else {
						say("\"I am glad thou wert able to successfully deal with him, without him getting the best of thee!\"");
					}
				} else {
					say("\"He is an adept mage who commands the powers of life magic. Some day, when I am less afraid of his coarse manner, I plan to ask for his assistance in my Transmute Flesh to Wood\tspell. I am told he hath done something similar with stone before.\"");
					add(["flesh to wood", "similar"]);
				}
				fallthrough;

			case "flesh to wood" (remove):
				say("\"Yes, ",
					var0000,
					". This spell will change a warrior's skin, making it as tough as wood. This way, a fighter will require less armour to deflect blows. My greatest obstacle right now is how to permit the fighter to move once his flesh hath solidified into the wood.\"");
				fallthrough;

			case "similar" (remove):
				say("\"Freli is researching a spell like mine, but involving stone instead of wood. The patrons at the\tBlue Boar suggested we contact Torrissio about transforming such things, because his arcane emphasis involves matters of life, including changing flesh to other materials.\"");
				fallthrough;

			case "bye":
				UI_remove_npc_face0();
				Func097F(AVATAR, "@Must be going...@", 0x0000);
				Func097F(ANDRIO, "@I thank thee.@", 0x0002);
				Func08FF();
				break;
		}
	}
}

extern void Func0808 0x808 (var var0000, var var0001);

void Func0405 object#(0x405) () {
	var var0000;
	var var0001;

	var0000 = "Columna and Melino";
	var0001 = 0x0002;
	Func0808(var0000, var0001);
}

extern void Func0808 0x808 (var var0000, var var0001);

void Func0406 object#(0x406) () {
	var var0000;
	var var0001;

	var0000 = "Gustacio";
	var0001 = 0x0002;
	Func0808(var0000, var0001);
}

extern void Func0808 0x808 (var var0000, var var0001);

void Func0407 object#(0x407) () {
	var var0000;
	var var0001;

	var0000 = "Torrissio";
	var0001 = 0x0002;
	Func0808(var0000, var0001);
}

extern void Func0808 0x808 (var var0000, var var0001);

void Func0408 object#(0x408) () {
	var var0000;
	var var0001;

	var0000 = "Ducio";
	var0001 = 0x0003;
	Func0808(var0000, var0001);
}

extern void Func0808 0x808 (var var0000, var var0001);

void Func0409 object#(0x409) () {
	var var0000;
	var var0001;

	var0000 = "Ducio";
	var0001 = 0x0004;
	Func0808(var0000, var0001);
}

extern void Func0808 0x808 (var var0000, var var0001);

void Func040A object#(0x40A) () {
	var var0000;
	var var0001;

	var0000 = "Filbercio";
	var0001 = 0x0005;
	Func0808(var0000, var0001);
}

extern void Func0808 0x808 (var var0000, var var0001);

void Func040B object#(0x40B) () {
	var var0000;
	var var0001;

	var0000 = "Rotoluncia";
	var0001 = 0x0002;
	Func0808(var0000, var0001);
}

extern void Func0808 0x808 (var var0000, var var0001);

void Func040C object#(0x40C) () {
	var var0000;
	var var0001;

	var0000 = "Canton";
	var0001 = 0x0006;
	Func0808(var0000, var0001);
}

extern var Func097D 0x97D (var var0000, var var0001, var var0002, var var0003, var var0004);
extern var Func0954 0x954 ();
extern var Func0953 0x953 ();
extern void Func07D1 object#(0x7D1) ();
extern void Func097F 0x97F (var var0000, var var0001, var var0002);
extern void Func07D2 object#(0x7D2) ();
extern var Func0942 0x942 (var var0000);
extern var Func09AE 0x9AE (var var0000);
extern var Func0992 0x992 (var var0000, var var0001, var var0002, var var0003);
extern var Func0988 0x988 (var var0000, var var0001);
extern var Func0955 0x955 ();
extern void Func080C 0x80C ();
extern void Func080B 0x80B ();
extern void Func08FF 0x8FF ();

void Func040D object#(0x40D) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;
	var var0008;
	var var0009;
	var var000A;
	var var000B;
	var var000C;
	var var000D;
	var var000E;
	var var000F;
	var var0010;

	var0000 = false;
	if (BUCIA->get_schedule_type() == TEND_SHOP) {
		var0000 = true;
	}
	var0001 = Func097D(PARTY, 0x0001, 0x034A, QUALITY_ANY, 0x000F);
	var0002 = Func0954();
	var0003 = UI_is_pc_female();
	var0004 = Func0953();
	var0005 = 0x0000;
	var0006 = false;
	var0007 = BUCIA->get_item_flag(MET);
	if (event == PROXIMITY) {
		var0008 = UI_get_random(0x0006);
		if (Func097D(PARTY, 0x0001, 0x0241, QUALITY_ANY, 0x0003)) {
			if (var0008 == 0x0001) {
				BUCIA->item_say("@What is that smell?@");
			}
			if (var0008 == 0x0002) {
				BUCIA->item_say("@Phew!@");
			}
			if (var0008 == 0x0003) {
				BUCIA->item_say("@Putrid odor...@");
			}
			if (var0008 == 0x0004) {
				if (!gflags[BLUE_EGG_IS_ROTTEN]) {
					BUCIA->item_say("@Away from here!@");
				} else {
					BUCIA->item_say("@Something doth stink...@");
				}
			}
			if (var0008 == 0x0005) {
				BUCIA->item_say("@Open a window!@");
			}
			if (var0008 == 0x0006) {
				BUCIA->item_say("@Bad stench!@");
			}
		} else {
			if (var0008 == 0x0001) {
				if (var0007) {
					BUCIA->item_say(("@Greetings, " + var0004) + "!@");
				} else {
					BUCIA->item_say("@Greetings, stranger!@");
				}
			}
			if (var0008 == 0x0002) {
				BUCIA->item_say("@Goods for sale!@");
			}
			if (var0008 == 0x0003) {
				BUCIA->item_say("@What a nice day.@");
			}
			if (var0008 == 0x0004) {
				if (!var0007) {
					BUCIA->item_say("@Art thou a visitor?@");
				} else {
					BUCIA->item_say("@So nice to see thee.@");
				}
			}
			if (var0008 == 0x0005) {
				BUCIA->item_say("@Thou breakest, thou buyest.@");
			}
			if (var0008 == 0x0006) {
				BUCIA->item_say("@Provisions!@");
			}
		}
	}
	if (event == DOUBLECLICK) {
		AVATAR->item_say("@Greetings!@");
		BUCIA->Func07D1();
		Func097F(BUCIA, (("@Yes, " + var0002) + "?@"), 0x0002);
		if (!var0000) {
			BUCIA->set_schedule_type(TALK);
		} else {
			BUCIA->set_schedule_type(STANDTHERE);
			BUCIA->Func07D2();
			var0008 = script BUCIA {
				nohalt;
				wait 7;
				call Func040D;
			};
		}
	}
	if (event == SCRIPTED) {
		event = STARTED_TALKING;
	}
	if (event == STARTED_TALKING) {
		BUCIA->run_schedule();
		BUCIA->clear_item_say();
		var0000 = false;
		if (BUCIA->get_schedule_type() == TEND_SHOP) {
			var0000 = true;
		}
		BUCIA->show_npc_face0(0x0000);
		var0009 = 0x0006;
		if (Func097D(PARTY, 0x0001, 0x0241, QUALITY_ANY, 0x0003) && gflags[BLUE_EGG_IS_ROTTEN]) {
			say("\"Go away from me with that rotten egg. Phew!\"");
			abort;
		}
		if (var0007 == false) {
			if (var0000) {
				say("\"What a pleasure to meet thee. My name is Bucia, and I tend this provisions shop. Is there anything that I can help thee with?\"");
			} else {
				say("\"Strangers are always welcome in Moonshade. My name is Bucia -- if thou needest help, thou hast merely to ask.\"");
			}
			BUCIA->set_item_flag(MET);
		} else {
			say("\"I am so glad to see thee again, ",
				var0002,
				".\"");
		}
		if (var0000) {
			add(["provisions", "exchange"]);
			var0009 = 0x0003;
		}
		if (gflags[KNOWS_ROTOLUNCIA_IS_KIDNAPPER] && (!ROTOLUNCIA->get_item_flag(DEAD))) {
			add("kidnap");
		}
		if (Func0942(FLINDO)) {
			var0009 = 0x0001;
		}
		add(["information", "bye"]);
		var000A = false;
		var000B = 0x0000;
		converse (0) {
			case "kidnap":
				say("\"Oh, my! What to do? What to do?\"");
				say("\"Call the Rangers! Consult the Mages! Such a crime cannot go unpunished.\"");
				say("\"Perhaps this has something to do with the magical storms? Perhaps we are all in danger!\"");
				Func097F(BUCIA, "@I am so afraid!@", 0x0000);
				abort;

			case "information" (remove):
				if ((MUSIC01->npc_nearby() || (PETRA->npc_nearby() || ROCCO->npc_nearby())) && gflags[GOT_DATE_WITH_BUCIA]) {
					var0009 = 0x0064;
					gflags[GOT_DATE_WITH_BUCIA] = false;
					say("\"'Tis so flattering to be asked so many questions by thee, ",
						var0004,
						". Of what wouldst thou like to know?\"");
					UI_push_answers();
					var000B = 0x0001;
					add(["people", "places", "strange objects", "nothing more"]);
				} else if ((!gflags[ASKED_BUCIA_TOO_MUCH]) || (UI_get_timer(0x0002) > 0x0004)) {
					say("\"I am not certain that I'll know anything useful, but in what art thou interested?\"");
					UI_push_answers();
					var000B = 0x0001;
					add(["people", "places", "strange objects", "nothing more"]);
				} else {
					say("\"I am afraid that I'm very busy right now. Perhaps we could talk about this later.\"");
				}
				fallthrough;

			case "people":
				say("\"'Twould be wrong for me to speak about people behind their backs.\"");
				say("\"So please, do not tell anyone! Dost thou desire to know about townsfolk, or visitors?\"");
				UI_push_answers();
				var000B = 0x0002;
				add(["townsfolk", "visitors", "nothing more"]);
				fallthrough;

			case "townsfolk" (remove):
				say("\"Dost thou have an interest in mere Mundanes, or Mages?\"");
				UI_push_answers();
				var000B = 0x0003;
				add(["Mundanes", "Mages", "nothing more"]);
				fallthrough;

			case "Mundanes":
				say("\"Those of us who do not cast magic are a small and disrespected part of society here. Whom dost thou desire to know about?\"");
				UI_push_answers();
				var000B = 0x0004;
				add(["the Artisans", "the Rangers", "Rocco and Petra", "Mosh the beggar", "nothing more"]);
				fallthrough;

			case "the Artisans" (remove):
				say("\"Ducio is the Master Artisan, capable of forging or repairing all manner of magical apparatus.\"");
				say("\"He hath grown lazy with prosperity, however -- his apprentice doth do most of the hard labor, while the Master wets his throat at the inn!\"");
				say("\"Poor Topo! Someday he'll be the Master Artisan, but for now he must labor long hours for a mere pittance.\"");
				var0009 = Func09AE(var0009);
				fallthrough;

			case "Pothos the Apothecary" (remove):
				if (gflags[POTHOS_RETURNED]) {
					if (gflags[HELPED_POTHOS]) {
						say("\"He hath been most delighted lately -- as if some burden hath been lifted from his mind.\"");
					} else {
						say("\"Pothos is back, and his shop is open once again.\"");
						say("\"Hast thou heard the rumor about the apothecary? Some say that he hath a most uncanny resemblance to the Mad Mage.\"");
						say("\"I think so, too.\"");
						gflags[KNOWS_POTHOS_SECRET] = true;
						add("Mad Mage");
					}
				} else {
					say("\"Thou canst buy no reagents in Moonshade, for the Apothecary hath gone away!\"");
					say("\"There is a tale that explains his absence.\"");
					say("\"Don't tell that I told thee, but I hear that Pothos is on a secret errand for the MageLord!\"");
				}
				var0009 = Func09AE(var0009);
				fallthrough;

			case "Mad Mage" (remove):
				say("\"Surely thou hast heard of Erstam, the Mad Mage. 'Twas he who helped found this city. Once he was a great wizard, able to control the very elements themselves. But then, as his power grew, his sanity shrank. It shrank and shrank until it was too small to perceive, and he went dashing into the hills, shrieking threats and insults. Past the Mountains of Freedom wilt thou find his isles.\"");
				var0009 = Func09AE(var0009);
				fallthrough;

			case "the Rangers" (remove):
				say("\"They are the pride of our city. The Chief Ranger, Julia, hath no mercy for troublemakers.\"");
				say("\"But if thou dost ask me, she's too gruff -- I think she'd like to give everyone orders, if she could.\"");
				say("\"By the way, be sure to give thy greetings to Ranger Ernesto...\"");
				if (var0003) {
					say("\"...he's rather cute.\"");
				} else {
					say("\"...he's a winsome lad.\"");
				}
				var0009 = Func09AE(var0009);
				fallthrough;

			case "Rocco and Petra" (remove):
				say("\"I can say nothing bad about Goodman Rocco and his inn! He is a gentleman.\"");
				say("\"Now, some enjoy talking about him and that female automaton living under the same roof, but not I.\"");
				say("\"Petra is a fine girl, even if she's merely a magical construct.\"");
				var0009 = Func09AE(var0009);
				fallthrough;

			case "Mosh the beggar" (remove):
				say("\"Beware of Mosh! Those rats of hers are filled with disease.\"");
				say("\"Do not listen to her accusations about the Sorceress Columna -- all imaginings, not true!\"");
				var0009 = Func09AE(var0009);
				fallthrough;

			case "Mages":
				say("\"Everything in this city revolves around the wizards and their cliques. Whom dost thou desire to know about?\"");
				UI_push_answers();
				var000B = 0x0004;
				add(["the MageLord", "the Adepts", "the Magister", "Melino and Columna", "the minor Mages", "Pothos the Apothecary", "nothing more"]);
				fallthrough;

			case "the MageLord" (remove):
				say("\"Filbercio is the most powerful wizard of them all.\"");
				say("\"'Tis said that he hath some strange compelling power over women...\"");
				if (var0003) {
					say("\"...thou had best watch thy step, lest he ensorcel thee with a love spell!\"");
				} else {
					say("\"...not me, of course, but he hath had his way with many other beautiful women! Thou wouldst be surprised to learn of many of them.\"");
					add("learn");
				}
				if (!gflags[POTHOS_RETURNED]) {
					say("\"He is not partial to visitors, so I doubt that thou shalt ever have the chance to make his acquaintance.\"");
				}
				var0009 = Func09AE(var0009);
				fallthrough;

			case "learn" (remove):
				say("\"Perhaps thou hast heard the name Rotoluncia?\"");
				fallthrough;

			case "the Adepts" (remove):
				say("\"Besides the MageLord, there are two others who compose the Council of Mages.\"");
				say("\"Adept Gustacio is a wise wizard, but strict in his ways and aloof from Mundanes.\"");
				say("\"As for Adept Rotoluncia, she is steeped in magic and a mistress of the arcane. Do not provoke her, for her anger is terrible.\"");
				var0009 = Func09AE(var0009);
				fallthrough;

			case "the Magister" (remove):
				say("\"Fedabiblio is the Magister. 'Tis he who directs the Seminarium, where young magelings are taught.\"");
				say("\"In former times, 'twas his job to go to the mainland and acquire those babies which had promise of magical powers.\"");
				say("\"But each year there have been fewer students, until now the school lies nearly empty.\"");
				say("\"Perhaps this hath something to do with the multi-colored storms.\"");
				var0009 = Func09AE(var0009);
				fallthrough;

			case "Melino and Columna" (remove):
				say("\"Such an odd couple! Melino is one of our eldest Mages, retired from the Council. He is a good man, but often befuddled.\"");
				say("\"As for Columna, she is only one-third his age! And such an attractive woman...\"");
				if (var0003) {
					say("\"Between thou and me, she is too young for that husband of hers. If I were her, I'd die!\"");
				} else {
					say("\"There are many in this town who would like to steal her from Melino, but none hath succeeded!\"");
				}
				var0009 = Func09AE(var0009);
				fallthrough;

			case "the minor Mages" (remove):
				say("\"Well, there is Mortegro -- his speciality is dead things, spirits, and burial rites. Not a pleasant fellow.\"");
				say("\"And Torrissio, a fine young Mage with a burning ambition. He reads books and keeps to himself.\"");
				say("\"Then there is Frigidazzi, the Frost Sorceress.\"");
				if (var0003) {
					say("\"She hath some strange habits, need I say more. The MageLord protects her, for she is his latest paramour.\"");
				} else {
					say("\"But thou shouldst stay away from her, for she is the MageLord's mistress, and he is a jealous man!\"");
				}
				gflags[KNOWS_FRIGIDAZZI_IS_FAVORITE] = true;
				if (gflags[HAS_CLUE_FUR_CAP] && gflags[KNOWS_FRIGIDAZZI_IS_FAVORITE]) {
					gflags[KNOWS_FUR_CAP_OWNER] = true;
				}
				var0009 = Func09AE(var0009);
				fallthrough;

			case "visitors" (remove):
				say("\"Perhaps thou shouldst speak to Rocco at the Blue Boar Inn. All of the town's visitors stay at his fine inn, even that travelling scholar.\"");
				say("\"Also, Julia keeps an eye on all undesirables.\"");
				var000C = Func0992(IOLO, "@Then she must have spotted Batlin!@", 0x0000, false);
				if (var000C != AVATAR) {
					if (UI_get_array_size(UI_get_party_list()) > 0x0002) {
						var000D = var000C;
						while (var000D == var000C) {
							var000D = Func0992(0x0001, 0x0000, 0x0000, false);
						}
						var000D = Func0992(var000D, "@Ah, but Batlin can be very gentlemanly when it suits his purposes.@", 0x0000, false);
					}
					0x0000->set_conversation_slot();
				}
				say("\"A visit to the Chief Ranger might be a good idea. Thou canst find her at the Winery, in the western part of town.\"");
				var0009 = Func09AE(var0009);
				add("travelling scholar");
				fallthrough;

			case "travelling scholar" (remove):
				say("\"Rocco could tell thee more, for he came to know her rather... well. I only know her name: Gwenno. She left here a few weeks ago.\"");
				fallthrough;

			case "places":
				say("\"Interested in seeing the sights, eh? Well, I can tell thee about the islands, or the mountains.\"");
				UI_push_answers();
				var000B = 0x0002;
				add(["islands", "mountains", "nothing more"]);
				fallthrough;

			case "islands" (remove):
				say("\"I hope thou art not planning to visit the isle of the Mad Mage, Erstam? He was once, perhaps, a powerful wizard -- one of the founders. But now, I wonder about a man who feels the need to run from civilization.\" ~\"Now, if thou dost mean to visit Monk Isle, than I shall not discourage thee. Residing within the dense forest, the monks devote their entire lives to the pursuit of knowledge.\"");
				var0009 = Func09AE(var0009);
				fallthrough;

			case "mountains" (remove):
				say("\"Ah, yes, the Mountains of Freedom. They occupy the entire shoreline of the northern part of the island. Be wary, for there are plenty of native monstrosities that call the mountainous caverns their home.\"");
				var0009 = Func09AE(var0009);
				fallthrough;

			case "strange objects":
				var000B += 0x0001;
				remove("strange objects");
				var000E = [];
				if (gflags[STORM_PINECONE] && (!gflags[KNOWS_PINECONE_OWNER])) {
					var000E &= "pinecone";
				}
				if (gflags[STORM_STOCKINGS] && (!gflags[KNOWS_MOONSILK_OWNER])) {
					var000E &= "moonsilk stockings";
				}
				if (gflags[STORM_URN] && (!gflags[KNOWS_URN_ORIGIN])) {
					var000E &= "urn";
				}
				if (gflags[STORM_LAB_APPARATUS] && (!gflags[KNOWS_LAB_APPARATUS_OWNER])) {
					var000E &= "apparatus";
				}
				if (gflags[STORM_PUMICE] && (!gflags[KNOWS_PUMICE_ORIGIN])) {
					var000E &= "pumice";
				}
				if (gflags[STORM_WEDDING_RING] && (!gflags[KNOWS_RING_OWNER])) {
					var000E &= "lost ring";
				}
				if (gflags[STORM_FUR_CAP] && (!gflags[KNOWS_FUR_CAP_OWNER])) {
					var000E &= "fur cap";
				}
				if (gflags[STORM_SLIPPERS] && (!gflags[KNOWS_SLIPPERS_OWNER])) {
					var000E &= "slippers";
				}
				if (gflags[STORM_BREAST_PLATE] && (!gflags[KNOWS_BREAST_PLATE_OWNER])) {
					var000E &= "breastplate";
				}
				if (gflags[STORM_BLUE_EGG] && (!gflags[KNOWS_BLUE_EGG_OWNER])) {
					var000E &= "blue egg";
				}
				if (gflags[STORM_GOBLIN_BRUSH] && (!gflags[KNOWS_GOBLIN_BRUSH_ORIGIN])) {
					var000E &= "strange hairbrush";
				}
				if (gflags[STORM_ICEWINE] && (!gflags[KNOWS_ICEWINE_ORIGIN])) {
					var000E &= "bottle of wine";
				}
				if (gflags[STORM_FILARI] && (!gflags[KNOWS_FILARI_OWNER])) {
					var000E &= "strange coins";
				}
				if (gflags[STORM_BEAR_SKULL] && (!gflags[KNOWS_BEAR_SKULL_ORIGIN])) {
					var000E &= "skull";
				}
				if (gflags[STORM_SEVERED_HAND] && (!gflags[KNOWS_SEVERED_HAND_OWNER])) {
					var000E &= "bloody hand";
				}
				if (gflags[STORM_MONITOR_SHIELD] && (!gflags[KNOWS_MONITOR_SHIELD_ORIGIN])) {
					var000E &= "plain shield";
				}
				if (gflags[STORM_RUDDY_ROCK] && (!gflags[KNOWS_STONEHEART_ORIGIN])) {
					var000E &= "glowing rock";
				}
				if (gflags[STORM_FISHNET_STOCKINGS] && (!gflags[KNOWS_FISHNET_STOCKINGS_ORIGIN])) {
					var000E &= "fish-net stockings";
				}
				if (gflags[FOUND_BROWN_BOTTLE] && (SIMON->get_schedule_type() != WAIT)) {
					var000E &= "brown bottle";
				}
				if (var000E == []) {
					var000C = Func0992(0x0001, (("@But we have no strange objects to ask about, " + var0002) + ".@"), 0x0000, false);
					0x0000->set_conversation_slot();
					say("\"I do not think I can help thee, but if I think of anything, I'll inform thee!\"");
				} else {
					say("\"What sort of items art thou inquiring about?\"");
					UI_push_answers();
					var000F = 0x0005;
					while (var000F > 0x0000) {
						var0005 = var000E[UI_get_random(UI_get_array_size(var000E))];
						var000E = Func0988(var0005, var000E);
						if (var000E == []) {
							var000F = 0x0000;
							var0006 = true;
						}
						add(var0005);
						var000F -= 0x0001;
					}
					add("nothing more");
				}
				fallthrough;

			case "pinecone" (remove):
				if (Func097D(PARTY, 0x0001, 0x0108, QUALITY_ANY, FRAME_ANY)) {
					say("\"'Tis a pinecone! I don't know where they come from, but Captain Hawk gave me one once. May I have this one, too?\"");
					gflags[ASKED_BUCIA_ABOUT_PINECONE] = true;
					if (Func0955()) {
						say("\"Thank thee!\"");
						if (BUCIA->get_npc_id() < 0x0019) {
							BUCIA->set_npc_id(BUCIA->get_npc_id() + 0x0005);
						}
						var0008 = UI_remove_party_items(0x0001, 0x0108, QUALITY_ANY, FRAME_ANY, 0x0000);
					} else {
						say("\"'Tis fine, I do not need another one.\"");
					}
				} else {
					say("\"Perhaps the Magister could help thee. He is an authority on many subjects.\"");
					gflags[HAS_CLUE_PINECONE] = true;
				}
				var0009 = Func09AE(var0009);
				if (!var0006) {
					var0005 = var000E[UI_get_random(UI_get_array_size(var000E))];
					var000E = Func0988(var0005, var000E);
					if (var000E == []) {
						var0006 = true;
					}
					add(var0005);
				}
				fallthrough;

			case "moonsilk stockings" (remove):
				gflags[KNOWS_MOONSILK_OWNER] = true;
				say("\"From thy description, the stockings could only be one kind -- Moonsilk Stockings.\"");
				say("\"I sell them here in the store, but not often. Only the Mages can afford luxuries like these.\"");
				var000C = Func0992(DUPRE, "@And who buys these fripperies?@", "@Whom dost thou sell them to, milady?@", false);
				0x0000->set_conversation_slot();
				say("\"The Green Sorceress, Columna -- she dresses in only the finest materials.\"");
				say("\"She also has a moonsilk sleeping gown, which cost more guilders than I shall ever make!\"");
				if (Func097D(PARTY, 0x0001, 0x02A5, QUALITY_ANY, 0x0000)) {
					say("\"Please, may I see the stockings...\"");
					say("\"The silk is so soft! Didst thou know that the stockings are made from the cocoons of lunar moths?\"");
					say("\"May I... could I... wouldst thou mind if I kept this pair? No Mundane could ever own such finery!\"");
					if (Func0955()) {
						say("\"Ooooh!\"");
						if (BUCIA->get_npc_id() < 0x0014) {
							BUCIA->set_npc_id(BUCIA->get_npc_id() + 0x000A);
						}
						var0008 = UI_remove_party_items(0x0001, 0x02A5, QUALITY_ANY, 0x0000, 0x0000);
					} else {
						say("\"Oh.\"");
					}
				}
				gflags[KNOWS_MOONSILK_OWNER] = true;
				var0009 = Func09AE(var0009);
				if (!var0006) {
					var0005 = var000E[UI_get_random(UI_get_array_size(var000E))];
					var000E = Func0988(var0005, var000E);
					if (var000E == []) {
						var0006 = true;
					}
					add(var0005);
				}
				fallthrough;

			case "urn" (remove):
				if (Func097D(PARTY, 0x0001, 0x0392, QUALITY_ANY, 0x0000)) {
					say("\"I do not know what that is, but it doth give me a shuddery feeling. Please, take it away...\"");
				} else {
					say("\"It doth sound like some sort of pot. Perhaps Topo could aid thee -- he assists Master Ducio in fashioning bowls and pots for the Mages.\"");
					gflags[HAS_CLUE_URN] = true;
				}
				var0009 = Func09AE(var0009);
				if (!var0006) {
					var0005 = var000E[UI_get_random(UI_get_array_size(var000E))];
					var000E = Func0988(var0005, var000E);
					if (var000E == []) {
						var0006 = true;
					}
					add(var0005);
				}
				fallthrough;

			case "apparatus" (remove):
				if (gflags[HAVE_NEW_SPELLBOOK]) {
					say("\"Since thou art a Mage, perhaps thou couldst ask thy fellow wizards about this magical apparatus.\"");
					gflags[HAS_CLUE_LAB_APPARATUS] = true;
				} else {
					say("\"'Twill do no good to speak with the Mages, for they ignore Mundanes like ourselves.\"");
					say("\"But if thou spokest with Master Ducio, perhaps he could help thee. He makes all of the apparatus for the wizards of Moonshade.\"");
					gflags[KNOWS_DUCIO_IS_ARTISAN] = true;
				}
				var0009 = Func09AE(var0009);
				if (!var0006) {
					var0005 = var000E[UI_get_random(UI_get_array_size(var000E))];
					var000E = Func0988(var0005, var000E);
					if (var000E == []) {
						var0006 = true;
					}
					add(var0005);
				}
				fallthrough;

			case "pumice" (remove):
				if (Func097D(PARTY, 0x0001, 0x010B, QUALITY_ANY, FRAME_ANY)) {
					say("\"What an ugly rock. Take that with thee when thou leavest, please?\"");
				} else {
					say("\"The Magister is a storehouse of knowledge. Perhaps he could aid thee.\"");
					gflags[HAS_CLUE_PUMICE] = true;
				}
				var0009 = Func09AE(var0009);
				if (!var0006) {
					var0005 = var000E[UI_get_random(UI_get_array_size(var000E))];
					var000E = Func0988(var0005, var000E);
					if (var000E == []) {
						var0006 = true;
					}
					add(var0005);
				}
				fallthrough;

			case "lost ring" (remove):
				if (Func097D(PARTY, 0x0001, 0x0377, QUALITY_ANY, 0x0000)) {
					say("\"What a pretty ring! A simple stone in a carved setting -- so unlike anything the Mages would have!\"");
					say("\"All they think of are jewels and gold, until they've driven out all the beauty!\"");
					say("\"I'll wager that ring comes from the Sea City, Fawn. Where else could such a wonderful creation come from?\"");
				} else {
					say("\"Perhaps thou couldst speak to the Master Artisan. He hath made many baubles for the MageLord and his mistresses.\"");
					gflags[HAS_CLUE_LOST_RING] = true;
				}
				var0009 = Func09AE(var0009);
				if (!var0006) {
					var0005 = var000E[UI_get_random(UI_get_array_size(var000E))];
					var000E = Func0988(var0005, var000E);
					if (var000E == []) {
						var0006 = true;
					}
					add(var0005);
				}
				fallthrough;

			case "fur cap" (remove):
				if (Func097D(PARTY, 0x0001, 0x03EC, QUALITY_ANY, 0x0004)) {
					say("\"Why, I sold that cap myself, from this very shop!\"");
					say("\"Ordered it special from the furrier in Monitor. She obtained it from the far north, where the Trappers hunt bears, snow leopards, and the man-eating Gwani.\"");
					say("\"With the storms, though, 'tis too dangerous to sail to the north. And we cannot trade by way of land, for the Swamp of Gorlab cuts the mainland in half.\"");
					var000C = Func0992(0x0001, "@About the fur cap...@", "@About the fur cap...@", false);
					0x0000->set_conversation_slot();
					say("\"Yes, yes, yes, I remember. I sold it to the MageLord, who gave it to his favorite at the Feast of Illusions. I'm surprised that unusual fellow never bought one, what with all the other furs he was collecting.\"");
					gflags[HAS_CLUE_FUR_CAP] = true;
					add("unusual fellow");
					if (gflags[HAS_CLUE_FUR_CAP] && gflags[KNOWS_FRIGIDAZZI_IS_FAVORITE]) {
						gflags[KNOWS_FUR_CAP_OWNER] = true;
					}
				} else {
					say("\"Anyone could tell thee that fur comes from the north, on the mainland beyond the great swamp.\"");
					say("\"I've sold fur caps and cloaks from time to time, but the storms have isolated us from the Trappers. So I have none left to sell!\"");
				}
				var0009 = Func09AE(var0009);
				if (!var0006) {
					var0005 = var000E[UI_get_random(UI_get_array_size(var000E))];
					var000E = Func0988(var0005, var000E);
					if (var000E == []) {
						var0006 = true;
					}
					add(var0005);
				}
				fallthrough;

			case "unusual fellow" (remove):
				say("\"He was here about two months ago, buying all sorts of furs and such. Obviously he was planning a trip to the north. Of course, no one knows where he actually went, since he left in such a hurry.\"");
				fallthrough;

			case "slippers" (remove):
				if (Func097D(PARTY, 0x0001, 0x024B, QUALITY_ANY, 0x0005)) {
					say("\"Such old, ratty things! Must have belonged to some Mundane -- no Mage would wear anything so worn.\"");
					gflags[HAS_CLUE_SLIPPERS] = true;
				} else {
					say("\"Slippers? No Mundane could afford them, but perhaps a Mage is missing a pair.\"");
					gflags[HAS_BAD_CLUE_SLIPPERS] = true;
				}
				var0009 = Func09AE(var0009);
				if (!var0006) {
					var0005 = var000E[UI_get_random(UI_get_array_size(var000E))];
					var000E = Func0988(var0005, var000E);
					if (var000E == []) {
						var0006 = true;
					}
					add(var0005);
				}
				fallthrough;

			case "breastplate" (remove):
				if (Func097D(PARTY, 0x0001, 0x01A3, QUALITY_ANY, 0x0000)) {
					say("\"How exotic -- armour made for a woman! 'Tis too beautiful to come from Monitor, and no ranger here wears such a thing...\"");
					say("\"I'll wager that it comes from the sea-city of Fawn. Thou shouldst ask about it there.\"");
				} else {
					say("\"Such items of heavy armour are not needed here, as we depend upon the Mages for our defense.\"");
					say("\"Thou shouldst ask the armourers of the warrior-city of Monitor -- they make many kinds of armour.\"");
				}
				var0009 = Func09AE(var0009);
				if (!var0006) {
					var0005 = var000E[UI_get_random(UI_get_array_size(var000E))];
					var000E = Func0988(var0005, var000E);
					if (var000E == []) {
						var0006 = true;
					}
					add(var0005);
				}
				fallthrough;

			case "blue egg" (remove):
				if (Func097D(PARTY, 0x0001, 0x0241, QUALITY_ANY, 0x0003)) {
					say("\"Oh, 'tis a rotten egg! Leave here with that!\"");
					gflags[BLUE_EGG_IS_ROTTEN] = true;
					abort;
				}
				say("\"A blue egg? I have never heard of such a thing, but the Magister is wise in many subjects. Perhaps thou shouldst inquire of Fedabiblio.\"");
				gflags[HAS_CLUE_BLUE_EGG] = true;
				var0009 = Func09AE(var0009);
				if (!var0006) {
					var0005 = var000E[UI_get_random(UI_get_array_size(var000E))];
					var000E = Func0988(var0005, var000E);
					if (var000E == []) {
						var0006 = true;
					}
					add(var0005);
				}
				fallthrough;

			case "strange hairbrush" (remove):
				if (Func097D(PARTY, 0x0001, 0x011D, QUALITY_ANY, 0x0006)) {
					say("\"Such an odd little brush. I don't know why, but it doth give me a most unnatural feeling. Please, take it back!\"");
				} else {
					say("\"Thou art seeking brushes? Perhaps Topo the Artisan could help thee -- he makes many things for the Master Artisan.\"");
					gflags[HAS_CLUE_STRANGE_BRUSH] = true;
				}
				var0009 = Func09AE(var0009);
				if (!var0006) {
					var0005 = var000E[UI_get_random(UI_get_array_size(var000E))];
					var000E = Func0988(var0005, var000E);
					if (var000E == []) {
						var0006 = true;
					}
					add(var0005);
				}
				fallthrough;

			case "bottle of wine" (remove):
				if (Func097D(PARTY, 0x0001, 0x0268, QUALITY_ANY, 0x0010)) {
					say("\"Allow me to see that bottle. But of course! This is Moonshade wine, made by the Rangers of our town!\"");
					say("\"If thou desirest more, simply inquire at the Winery on the west side of town.\"");
					var000C = Func0992(DUPRE, "@Very good idea. Let's go.@", 0x0000, false);
					0x0000->set_conversation_slot();
				} else {
					say("\"Perhaps thou shouldst inquire at the Winery. The Rangers are most knowledgeable about wines.\"");
					var000C = Func0992(DUPRE, "@A visit to the Winery seems in order!@", 0x0000, false);
					0x0000->set_conversation_slot();
				}
				var0009 = Func09AE(var0009);
				if (!var0006) {
					var0005 = var000E[UI_get_random(UI_get_array_size(var000E))];
					var000E = Func0988(var0005, var000E);
					if (var000E == []) {
						var0006 = true;
					}
					add(var0005);
				}
				fallthrough;

			case "strange coins" (remove):
				if (Func097D(PARTY, 0x0001, 0x03B4, QUALITY_ANY, FRAME_ANY)) {
					say("\"Why, 'tis the money used in the sea-city of Fawn. See the gems in the center!\"");
					say("\"If thou desirest, I can exchange those coins for valuable Moonshadian guilders.\"");
				} else {
					say("\"I cannot tell thee what the coin is unless I see it, but if it isn't green and glowing, 'tis worthless.\"");
				}
				var0009 = Func09AE(var0009);
				if (!var0006) {
					var0005 = var000E[UI_get_random(UI_get_array_size(var000E))];
					var000E = Func0988(var0005, var000E);
					if (var000E == []) {
						var0006 = true;
					}
					add(var0005);
				}
				fallthrough;

			case "skull" (remove):
				if (Func097D(PARTY, 0x0001, 0x00F4, QUALITY_ANY, FRAME_ANY)) {
					say("\"How quaint. Take it with thee when thou leavest...\"");
				} else {
					say("\"A skull?! I know nothing about bones! Perhaps Magister Fedabiblio could help thee.\"");
					gflags[HAS_CLUE_BEAR_SKULL] = true;
				}
				var0009 = Func09AE(var0009);
				if (!var0006) {
					var0005 = var000E[UI_get_random(UI_get_array_size(var000E))];
					var000E = Func0988(var0005, var000E);
					if (var000E == []) {
						var0006 = true;
					}
					add(var0005);
				}
				fallthrough;

			case "bloody hand" (remove):
				if (Func097D(PARTY, 0x0001, 0x031A, QUALITY_ANY, 0x0000)) {
					say("\"What dost thou have there? Why, 'tis moving...\"");
					Func097F(BUCIA, "@Ah!!!@", 0x0000);
					BUCIA->set_schedule_type(SHY);
				} else {
					say("\"How repugnant.\"");
					say("\"Probably the work of the Goblins -- I have heard that they are most crude, though they do not bother us here on this island.\"");
					say("\"Or perhaps one of the Mages hath been experimenting again in the forbidden arts.\"");
					say("\"Mortegro doth have an interest in Death, and goodness knows what the Mad Mage might be doing!\"");
					gflags[HAS_CLUE_BLOODY_HAND] = true;
				}
				var0009 = Func09AE(var0009);
				if (!var0006) {
					var0005 = var000E[UI_get_random(UI_get_array_size(var000E))];
					var000E = Func0988(var0005, var000E);
					if (var000E == []) {
						var0006 = true;
					}
					add(var0005);
				}
				fallthrough;

			case "plain shield" (remove):
				if (Func097D(PARTY, 0x0001, 0x02D9, QUALITY_ANY, FRAME_ANY)) {
					say("\"Those colors are the hues worn by the Monitorians. The shield must have come from a pikeman.\"");
				} else {
					say("\"Perhaps Ernesto at the Winery could help thee. 'Tis said that he is good with weapons and such.\"");
					gflags[HAS_CLUE_SHIELD] = true;
				}
				var0009 = Func09AE(var0009);
				if (!var0006) {
					var0005 = var000E[UI_get_random(UI_get_array_size(var000E))];
					var000E = Func0988(var0005, var000E);
					if (var000E == []) {
						var0006 = true;
					}
					add(var0005);
				}
				fallthrough;

			case "glowing rock" (remove):
				if (var0001 || gflags[BUCIA_SPOKE_STONEHEART]) {
					if (var0001) {
						say("\"Put that away! I hope that no one saw...\"");
						say("\"Dost thou not know that it is a crime to possess Stoneheart! It is a most dangerous substance.\"");
					} else {
						say("\"Thou dost know that it is a crime to possess Stoneheart! It drives men into lunacy!\"");
					}
					say("\"Thou shouldst discard it in some safe place, such as a remote isle or distant mountaintop.\"");
					gflags[BUCIA_SPOKE_STONEHEART] = true;
				} else {
					say("\"I'm not sure of what thou speakest, but perhaps Pothos the Apothecary could identify it for thee.\"");
					gflags[HAS_CLUE_RUDDY_ROCK] = true;
					if (gflags[POTHOS_RETURNED]) {
						say("\"Sadly, his shop is closed today. He hath not been seen for some time.\"");
					}
				}
				var0009 = Func09AE(var0009);
				if (!var0006) {
					var0005 = var000E[UI_get_random(UI_get_array_size(var000E))];
					var000E = Func0988(var0005, var000E);
					if (var000E == []) {
						var0006 = true;
					}
					add(var0005);
				}
				fallthrough;

			case "fish-net stockings" (remove):
				var0010 = Func097D(PARTY, 0x0001, 0x02A5, QUALITY_ANY, 0x0001);
				if (var0010) {
					say("\"Those are very interesting, but too daring for a nice girl to wear, methinks.\"");
				} else {
					say("\"I think I know the stockings thou art speaking of, but I am not certain...\"");
				}
				say("\"I do not stock such goods any more, but I know where they can be obtained -- Fawn, the sea-city.\"");
				var000C = Func0992(SHAMINO, "@But thou used to sell these stockings?@", 0x0000, false);
				if (var000C != AVATAR) {
					0x0000->set_conversation_slot();
					if (var0010) {
						// Typo: it should be "Celennia", not "Selenia".
						say("\"Oh, yes. To the Sorceress of the Night, Selenia. But she hath been absent from this city for many weeks now.\"");
						say("\"This stocking might be a clue to her strange disappearance! Thou shouldst take this to the Chief Ranger!\"");
						gflags[HAS_CLUE_FISHNET_STOCKINGS] = true;
					} else {
						say("\"Well, not having seen thy stocking, I cannot be sure. But it sounds like it might be the kind which I used to sell to the Sorceress of the Night.\"");
						// Typo: it should be "Celennia", not "Selenia".
						say("\"Perhaps this is a clue to the strange disappearance of Selenia!\"");
						gflags[HAS_CLUE_FISHNET_STOCKINGS] = true;
					}
				}
				var0009 = Func09AE(var0009);
				if (!var0006) {
					var0005 = var000E[UI_get_random(UI_get_array_size(var000E))];
					var000E = Func0988(var0005, var000E);
					if (var000E == []) {
						var0006 = true;
					}
					add(var0005);
				}
				fallthrough;

			case "brown bottle" (remove):
				if (Func097D(PARTY, 0x0001, 0x0268, QUALITY_ANY, 0x0000)) {
					say("\"Could I see thy bottle? Hmm... A bitter ale of some kind.\"");
					say("\"If I were thee, I'd discard this bile and replace it with some of our excellent Moonshadian wine. If thou desirest some, simply inquire at the Winery on the west side of town.\"");
					var000C = Func0992(DUPRE, "@Can we go?@", 0x0000, false);
					0x0000->set_conversation_slot();
				} else {
					say("\"Perhaps thou shouldst inquire at the Winery. Ernesto is most knowledgeable about wines.\"");
					var000C = Func0992(DUPRE, "@I enjoy visiting wineries!@", 0x0000, false);
					0x0000->set_conversation_slot();
				}
				var0009 = Func09AE(var0009);
				if (!var0006) {
					var0005 = var000E[UI_get_random(UI_get_array_size(var000E))];
					var000E = Func0988(var0005, var000E);
					if (var000E == []) {
						var0006 = true;
					}
					add(var0005);
				}
				fallthrough;

			case "nothing more":
				if (var000B == 0x0001) {
					UI_pop_answers();
					say("\"I wish I could have been of more help to thee...\"");
				} else {
					while (var000B > 0x0001) {
						UI_pop_answers();
						var000B -= 0x0001;
					}
					say("\"Is there anything else I can help thee with?\"");
				}
				fallthrough;

			case "provisions":
				say("\"The owner keeps the shop well-stocked with all of the most useful goods.\"");
				if (!var000A) {
					say("\"But I am afraid that prices are rather high these days, now that the ships no longer sail.\"");
					var000A = true;
				}
				Func080C();
				fallthrough;

			case "exchange":
				Func080B();
				fallthrough;

			case "bye":
				UI_remove_npc_face0();
				Func097F(AVATAR, "@I must be going.@", 0x0000);
				Func097F(BUCIA, "@Do return sometime!@", 0x0002);
				Func08FF();
				break;
		}
	}
}

extern var Func0953 0x953 ();
extern void Func07D1 object#(0x7D1) ();
extern void Func097F 0x97F (var var0000, var var0001, var var0002);
extern var Func097D 0x97D (var var0000, var var0001, var var0002, var var0003, var var0004);
extern void Func0816 0x816 ();
extern var Func0955 0x955 ();
extern void Func08FF 0x8FF ();

void Func040E object#(0x40E) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;
	var var0008;
	var var0009;
	var var000A;
	var var000B;
	var var000C;

	var0000 = "Mundane";
	if (gflags[HAVE_NEW_SPELLBOOK]) {
		var0000 = "Mage";
	}
	var0001 = UI_is_pc_female();
	var0002 = Func0953();
	var0003 = UI_part_of_day();
	if ((var0003 > EARLY) || (var0003 < EVENING)) {
		var0003 = "day";
	} else {
		var0003 = "evening";
	}
	if (event == DOUBLECLICK) {
		AVATAR->item_say("Hello, there.");
		COLUMNA->Func07D1();
		Func097F(COLUMNA, (("@Greetings, " + var0000) + "."), 0x0002);
		COLUMNA->set_schedule_type(TALK);
	}
	if ((event == DEATH) && get_item_flag(SI_TOURNAMENT)) {
		var0004 = script item {
			nohalt;
			call Func0329;
		};
	}
	if (event == PROXIMITY) {
		set_schedule_type(LAB);
	}
	if (event == STARTED_TALKING) {
		COLUMNA->run_schedule();
		COLUMNA->clear_item_say();
		COLUMNA->halt_scheduled();
		AVATAR->halt_scheduled();
		var0005 = STEFANO->get_item_flag(DEAD);
		if (gflags[CAUGHT_WITH_FRIGIDAZZI]) {
			if (!var0005) {
				add("Stefano");
			}
		}
		var0006 = Func097D(PARTY, 0x0001, 0x02A5, QUALITY_ANY, 0x0000);
		if (var0006) {
			add("stockings");
		}
		if (gflags[GOT_COMB_OF_BEAUTY]) {
			COLUMNA->show_npc_face0(0x0001);
		} else {
			COLUMNA->show_npc_face0(0x0000);
		}
		if (!gflags[HAVE_NEW_SPELLBOOK]) {
			say("\"I am sorry, but thou hast mistaken me for someone else. Thou couldst not possibly be speaking to me, as I am a Mage... and thou art merely Mundane.\"");
			Func097F(COLUMNA, "@Honestly!@", 0x0000);
			abort;
		}
		var0007 = COLUMNA->get_item_flag(MET);
		if (var0007 == false) {
			COLUMNA->set_item_flag(MET);
			say("\"I do not believe that we've met. It is so nice to make the acquaintance of a new, young Mage.\"");
			say("\"I am Columna, the Green Enchantress.\"");
		} else {
			say("\"Welcome, Mage. I am pleased to see thee again.\"");
		}
		if (gflags[KNOW_ABOUT_MOSH] && (!gflags[AVATAR_BELIEVES_MOSH])) {
			add(["Mosh"]);
		}
		if (gflags[HAS_CLUE_LAB_APPARATUS] && (!gflags[KNOWS_LAB_APPARATUS_OWNER])) {
			add("apparatus");
		}
		converse (["Green Enchantress", "bye"]) {
			case "Green Enchantress" (remove):
				say("\"My name is Columna. Sorceress, wife of Melino, and I am also the most desired beauty in Moonshade.\"");
				if (gflags[GOT_COMB_OF_BEAUTY]) {
					say("\"Is that not a funny joke?! Me, a decrepit hag?! The most desired beauty in all of Moonshade?! Once, in my time... In my time...\"");
				}
				add(["sorceress", "Melino", "beauty"]);
				fallthrough;

			case "sorceress" (remove):
				say("\"Perhaps I could interest thee in a spell. Many strange travellers have come from across the Serpent Isle to learn spells from me. But that, of course, was before the Teleport Storms.\"");
				add(["buy spells", "strange travellers", "teleport storms"]);
				fallthrough;

			case "apparatus" (remove):
				var0008 = Func097D(PARTY, 0x0001, 0x02ED, QUALITY_ANY, 0x0001);
				if (var0008) {
					say("\"This laboratory equipment must surely belong to Erstam, the Mad Mage! It bears the unmistakably foul stench of one of his experiments.\"");
					gflags[KNOWS_LAB_APPARATUS_OWNER] = true;
				} else {
					say("\"Without being able to actually look at the item thou hast mentioned, I can tell thee nothing.\"");
				}
				fallthrough;

			case "teleport storms" (remove):
				say("\"Since these vile telport storms began all sea travel has virtually stopped. Even long range travel over land is considered to be extremely dangerous!\"");
				fallthrough;

			case "buy spells":
				Func0816();
				fallthrough;

			case "strange travellers" (remove):
				say("\"Many weeks ago a woman named Gwenno passed through Moonshade, and more recently a sage named Batlin.\"");
				add(["Gwenno", "Batlin"]);
				fallthrough;

			case "Gwenno" (remove):
				say("\"The one and only time I saw her she was singing a love song about her husband, Iolo. But she made quite an impression on some people while she was here. If thou dost wish to know more of her, then ask around.\"");
				fallthrough;

			case "Batlin" (remove):
				say("\"He came through town with a strange daemon creature as his companion and servant, and he had some sort of artifact in his possession.\"");
				add(["daemon", "artifact"]);
				fallthrough;

			case "daemon" (remove):
				say("\"'Twas male, and had bright red skin. But there were no horns on its head -- I swear. I believe its name was Palos.\"");
				fallthrough;

			case "artifact" (remove):
				say("\"I personally did not see it, but I know that Gustacio did.\"");
				fallthrough;

			case "Melino" (remove):
				say("\"I shall have thee know that mine husband is most influential with the Council of Mages. And is perfectly capable of satisfying my needs in nearly all other ways.\"");
				add(["influential", "satisfying needs"]);
				fallthrough;

			case "influential" (remove):
				say("\"He is a close and trusted advisor to Filbercio, the MageLord of Moonshade and senior member of the Council.\"");
				fallthrough;

			case "satisfying needs" (remove):
				say("\"Oh, worry thyself not. I am not one to allow my needs to go unsatisfied.\"");
				fallthrough;

			case "beauty" (remove):
				if (gflags[GOT_COMB_OF_BEAUTY]) {
					say("\"Without my precious comb, all of my beauty hath long faded.\"");
				} else {
					say("\"Yes, in truth it hath always been so, and shall always be. My natural good looks must be the result of my good breeding.\"");
				}
				fallthrough;

			case "Stefano" (remove):
				say("\"'Twas Stefano who stole my stockings from Torrissio's house in an attempt to blackmail us over our affair.\"");
				if (gflags[AVATAR_ESCAPED_FREEDOM]) {
					say("\"Now that he is returned to Moonshade, we have already seen to it that he shall die for what he tried to do to us.\"");
				} else {
					say("\"My sincerest wish is that he rot slowly in Filbercio's mountain prison.\"");
				}
				fallthrough;

			case "stockings" (remove):
				if (var0001) {
					say("\"Those stockings thou dost have in thy possession are rightfully my property. They can be used by people to humiliate me and destroy my marriage. As one woman to another, I appeal to thee for understanding. If thou dost return them to me I will give to thee a spell from my personal spellbook. Wilt thou please return them to me?\"");
					var0009 = Func0955();
					if (var0009) {
						var000A = UI_remove_party_items(0x0001, 0x02A5, QUALITY_ANY, 0x0000, true);
						say("\"Ha! There was thy spell, foolish woman! Now the stockings are destroyed and they shall trouble me no more!\"");
						Func097F(COLUMNA, "@Fool!@", 0x0000);
						COLUMNA->set_schedule_type(WANDER);
						abort;
					}
					say("\"Please, I beg of thee to reconsider.\"");
				} else {
					say("\"Thou hast my stockings in thy possession. They are my intimate apparel and they do not belong in thy backpack. They belong on my creamy thighs. I am a woman and thou art a man and thou dost have me at an advantage. If thou wouldst but return them, I shall be happy to wear them for thee, in a night of passion that thou shalt remember all of thy days. May I have them now?\"");
					var000B = Func0955();
					if (var000B) {
						var000C = UI_remove_party_items(0x0001, 0x02A5, QUALITY_ANY, 0x0000, true);
						if (gflags[HAVE_NEW_SPELLBOOK]) {
							say("\"Ha! Dost thou think that because thou art now a Mage, that thou art equal to me? I reject thine advances, mage.\"");
						} else {
							say("\"Ha! Thou dost think I would squander my lust on the likes of thee?! A Mundane!!! I laugh at thee.\"");
						}
						say("\"The stockings have now been destroyed by my magics. Thou dost have no hold over me, nor shall anyone else!\"");
					} else {
						say("\"Please, I beg of thee to reconsider.\"");
					}
				}
				fallthrough;

			case "Mosh" (remove):
				say("\"So thou hast been spending thy time with beggars and thieves? This does not speak well of thy character, ",
					var0002,
					".\"");
				say("\"No doubt she hath defamed me. What tales she tells! Of course, she is merely jealous of my position in society, and of my powers.\"");
				say("\"Let me say this plainly. Mosh lies. She hath ruined herself with cruel indulgences, and now she is half mad.\"");
				say("\"Why, she sleeps with her rats! I ask thee, is this the action of a respectable mage?\"");
				gflags[COLUMNA_SPOKE_ABOUT_MOSH] = true;
				fallthrough;

			case "bye":
				UI_remove_npc_face0();
				Func097F(AVATAR, "@I must be going...@", 0x0000);
				Func097F(COLUMNA, "@Farewell!@", 0x0002);
				Func08FF();
				break;
		}
	}
}

extern var Func0954 0x954 ();
extern var Func0953 0x953 ();
extern void Func0826 0x826 (var var0000);
extern void Func07D1 object#(0x7D1) ();
extern void Func097F 0x97F (var var0000, var var0001, var var0002);
extern var Func0955 0x955 ();
extern var Func097D 0x97D (var var0000, var var0001, var var0002, var var0003, var var0004);
extern var Func0956 0x956 (var var0000);
extern void Func0827 0x827 ();
extern void Func08FF 0x8FF ();

void Func040F object#(0x40F) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;
	var var0008;

	var0000 = Func0954();
	var0001 = UI_is_pc_female();
	var0002 = Func0953();
	var0003 = UI_part_of_day();
	var0004 = false;
	var0005 = DUCIO->find_nearby(0x02E3, 0x001E, MASK_NONE);
	if ((var0003 > EARLY) || (var0003 < EVENING)) {
		var0003 = "day";
	} else {
		var0003 = "evening";
	}
	if (event == PATH_SUCCESS) {
		Func0826(event);
	}
	if (event == DOUBLECLICK) {
		AVATAR->item_say("@Hello!@");
		DUCIO->Func07D1();
		Func097F(DUCIO, (("@Good " + var0003) + ".@"), 0x0002);
		DUCIO->set_schedule_type(TALK);
	}
	if (event == STARTED_TALKING) {
		DUCIO->run_schedule();
		DUCIO->clear_item_say();
		DUCIO->show_npc_face0(0x0000);
		var0006 = DUCIO->get_item_flag(MET);
		if (var0006 == false) {
			say("\"I am Ducio, the Master Artisan.\"");
			DUCIO->set_item_flag(MET);
			add("Master Artisan");
		} else if (gflags[BANES_RELEASED]) {
			say("\"Thou art alive! Thou hast survived the holocaust! So many are dead...\"");
			add("holocaust");
		} else {
			say("\"Welcome back...\"");
			add("Master Artisan");
		}
		if (var0005) {
			say("\"What is thy business?\"");
			add("business");
		} else {
			say("\"How may I be of use to thee?\"");
		}
		if (gflags[GOT_BLACK_SWORD] && (!gflags[FIXED_BLACK_SWORD])) {
			add("Daemon Sword");
		}
		if (gflags[KNOWS_DUCIO_IS_ARTISAN] && (!gflags[KNOWS_LAB_APPARATUS_OWNER])) {
			add("apparatus");
		}
		if (gflags[KNOWS_OF_WORM_GEMS] == true) {
			add("Worm Gem");
		}
		if (gflags[HAS_CLUE_LOST_RING] && (!gflags[KNOWS_RING_OWNER])) {
			add("lost ring");
		}
		if (gflags[KNOWS_ROTOLUNCIA_IS_KIDNAPPER] && (!ROTOLUNCIA->get_item_flag(DEAD))) {
			add("kidnap");
		}
		converse (["bye"]) {
			case "kidnap" (remove):
				say("\"Do not involve me in such matters, stranger! Canst thou not see that I am a Mundane?\"");
				say("\"This matter smacks of wizardry, and I want no part of it!\"");
				Func097F(DUCIO, "@No part!@", 0x0000);
				abort;

			case "holocaust" (remove):
				say("\"Thy companion Shamino did return to this place, and he was in a killing rage. Despite all efforts to stop him, he did murder everyone in our town, save for Torrissio, Andrio and myself.\"");
				fallthrough;

			case "Master Artisan" (remove):
				if (gflags[BANES_RELEASED]) {
					say("\"I have the talented hands that come from a long line of craftsmen. But I live in a world with no one but the dead to create for! A most funny joke, no?!\"");
				} else {
					say("\"I have an apprentice. I have automatons to help the work progress. That makes me a Master.\"");
					say("\"I am able to create or repair anything. I make what the Mages need. That makes me an Artisan.\"");
					say("\"If thou hast need of the Master, ask me. If not, ask Topo.\"");
					add(["automatons", "anything", "Topo"]);
				}
				fallthrough;

			case "automatons" (remove):
				say("\"One that bakes. One that sews. One that smiths. All from Torrissio. They work hard... do not talk back like Topo.\"");
				add("Torrissio");
				fallthrough;

			case "Torrissio" (remove):
				say("\"Torrissio is an Adept. He makes automaton guards and servants. He does good work... almost like a Master Artisan. But he needs magic to make everything work.\"");
				say("\"I gave him a good deal on the metal he needs. Now I've got three hard workers made of metal. Not a bad deal.\"");
				add(["magic", "deal"]);
				fallthrough;

			case "magic" (remove):
				say("\"Torrissio doth not ask about my work. I do not ask about his.\"");
				say("\"All I know is that his spells are old. Not anything created by these Mages.\"");
				say("\"Thou wishest to ask more, ask Torrissio... If he will speak with thee.\"");
				add("old");
				fallthrough;

			case "old" (remove):
				say("\"Very old. Maybe as old as the Serpent ruins, maybe not. I'm not a Mage.\"");
				add("Serpent Ruins");
				fallthrough;

			case "Serpent Ruins" (remove):
				say("\"What dost thou think I am, a teacher like Fedabiblio?!\"");
				say("\"If thou wishest a history lesson, go to him like any novice. If thou wishest the work of a Master Artisan, stay.\"");
				say("\"I do not have time for such questions!\"");
				add(["Fedabiblio", "novice"]);
				fallthrough;

			case "Fedabiblio" (remove):
				say("\"Fedabiblio teaches the young mages. He keeps the library of magic. He knows the history. Speak to him, do not bother me!\"");
				fallthrough;

			case "novice" (remove):
				say("\"If thou seekest knowledge, thou art a novice. One who seeks to be taught. I am a Master. I do not teach. I do not need teaching. I am not a novice.\"");
				fallthrough;

			case "deal" (remove):
				say("\"Art thou a Master?\"");
				say("\"No. Then do not ask what deal I give to others. Bad manners.\"");
				fallthrough;

			case "anything" (remove):
				say("\"If the Mages can speak plain enough to explain what they need, I can make it.\"");
				say("\"Magical apparatus. Swords. Whatever. I can make it. They enchant it. 'Tis fair.\"");
				add(["Magical apparatus", "Swords"]);
				fallthrough;

			case "Magical apparatus" (remove):
				say("\"I make all the apparatus for the Mages. All different. Every Mage wants something a little different than the next.\"");
				say("\"I can tell thee who a piece belongs to just by looking at it. I remember everything I've made.\"");
				say("\"Dost thou have something thou wishest me to look at?\"");
				if (Func0955() == true) {
					// I see no way other than this
					goto labelFunc040F_032A;
				}
				say("\"Fine.\"");
				fallthrough;

			case "apparatus":
labelFunc040F_032A:
				remove("apparatus");
				if (var0005) {
					if (Func097D(PARTY, 0x0001, 0x02ED, QUALITY_ANY, 0x0001)) {
						say("\"Hmmmm. This is a piece of lab apparatus that the mages use. In fact, this one was one of my first masterpieces. I thought it had been destroyed.\"");
						say("\"I might ask how thou didst come by this. But I won't. I do not want to know. Vasculio hath been dead for years...\"");
						var0007 = true;
						add("Vasculio");
					} else {
						say("\"Thou hast no such object! Do not waste my time, for I am a busy man...\"");
						Func097F(DUCIO, "@Must work...@", 0x0000);
						DUCIO->set_schedule_type(SHY);
						abort;
					}
				} else {
					say("\"If thou wouldst bring the object to my shop, I would be glad to examine it there. I do not have my tools with me now.\"");
				}
				fallthrough;

			case "Vasculio" (remove):
				say("\"Not good, that one. Sought to reach beyond life and rule death. Not good.\"");
				say("\"The Council killed him years ago. I thought they had destroyed all his equipment after they found the grave empty... But mayhaps Ensorcio took it.\"");
				add(["grave empty", "Ensorcio"]);
				fallthrough;

			case "grave empty" (remove):
				say("\"They say he rose from the dead. They think he is looking for revenge.\"");
				say("\"I think the Council secretly decided to burn him. No one can bring back the dead from ashes.\"");
				fallthrough;

			case "Ensorcio" (remove):
				say("\"Ensorcio was Vasculio's apprentice. Too much like his Master, that one.\"");
				say("\"Exiled now. Hear he spends his time drinking away his sorrows on another island.\"");
				fallthrough;

			case "Swords" (remove):
				say("\"Do not have much call for them. Not magic ones anyway. But I have made a few.\"");
				say("\"Unless it is a special order, mine automaton makes it. For something non-magic, talk to Topo. If it's magic, talk to me.\"");
				fallthrough;

			case "Topo" (remove):
				say("\"Mine apprentice. Scrawny boy. Large ambitions. Big mouth.\"");
				say("\"But he doth work hard... when I yell at him. Shows promise.\"");
				say("\"Tends to be a bit lazy, though. Must teach him better. Make certain he learns as much as he thinks he knows.\"");
				fallthrough;

			case "business" (remove):
				say("\"What dost thou need? To buy? To look? To talk?\"");
				var0008 = Func0956(["buy", "look", "talk"]);
				if (var0008 == "buy") {
					add("buy");
					// I see no way other than this
					goto labelFunc040F_046D;
				} else {
					if (var0008 == "look") {
						say("\"Looking is free. Inspect the automaton-made goods.\"");
						say("\"I have everything from cloaks to baked goods. Ceramics to swords. And many things between.\"");
						say("\"Let me know if thou dost wish to buy anything.\"");
					}
					if (var0008 == "talk") {
						say("\"Talk is free, too. But I'm a busy man.\"");
					}
				}
				fallthrough;

			case "buy":
labelFunc040F_046D:
				if (var0004 == false) {
					if (gflags[BANES_RELEASED]) {
						say("\"If thou seest something thou dost like, tell me. If thou desirest something I do not have, let me know. I can either make it for thee or direct thee to someone who can.\"");
					} else {
						say("\"If thou seest something thou dost like, tell Topo or me. If thou desirest something I do not have, let me know. I can either make it for thee or direct thee to someone who can.\"");
					}
					var0004 = true;
				}
				Func0827();
				fallthrough;

			case "lost ring" (remove):
				if (var0005) {
					if (Func097D(PARTY, 0x0001, 0x0377, QUALITY_ANY, 0x0000)) {
						say("\"May I see it? Ah, thank thee...\"");
						say("\"Too plain for a Mage... But wait, I remember this!\"");
						say("\"I made it for a sailor from Fawn. I'll wager that it cost him half a year's wages. He wanted it for an engagement ring.\"");
						add(["Fawn", "sailor"]);
					} else {
						say("\"So where is this ring? How can I tell thee anything about this ring, if thou dost not bring it to me?\"");
					}
				} else {
					say("\"If thou wouldst bring thy ring to my shop, I would be glad to examine it there. I do not have my tools with me now.\"");
				}
				fallthrough;

			case "Fawn" (remove):
				say("\"Fawn is on the other island. Somewhere on the far side, I think. 'Tis a port. Filled with sailors.\"");
				say("\"That is all I know.\"");
				fallthrough;

			case "sailor" (remove):
				say("\"I remember the piece, not the man. Wasn't a Mage. Not worth recalling, I imagine.\"");
				say("\"Ask in Fawn. He was proud enough about the ring. Someone will know who it belongs to.\"");
				fallthrough;

			case "Daemon Sword" (remove):
				say("\"Magical swords are very difficult to deal with. In some cases, I can be of aid, but other cases require the assistance of a Mage.\"");
				if (Func097D(PARTY, 0x0001, 0x0326, QUALITY_ANY, FRAME_ANY)) {
					say("\"'Tis a magic sword, right enough. I'll take thy word about the Daemon...\"");
					say("\"The structure of the blade is not damaged. It is not a problem that I can repair.\"");
					if (GUSTACIO->get_item_flag(DEAD)) {
						say("\"Thou must seek out a Mage to aid thee, if there are any left among the living...\"");
						say("\"If Gustacio's flux analyzer had not been stolen, I would have sent thee to his lab. It was the only thing that might have helped thee.\"");
					} else {
						say("\"Thou mightest check with Gustacio. He might be able to help thee. I have heard that he is working on something called the flux analyzer. It might be of aid to thee.\"");
						gflags[DUCIO_SPOKE_ABOUT_GUSTACIO] = true;
					}
				} else {
					say("\"If thou wouldst bring me the sword, I could examine it for thee.\"");
				}
				fallthrough;

			case "Worm Gem" (remove):
				if (var0005) {
					say("\"What a strange request... Yes, I can make thee a Worm Gem, if thou dost desire.\"");
					add("strange request");
					if (Func097D(PARTY, 0x0001, 0x034A, QUALITY_ANY, 0x000A)) {
						if (Func097D(PARTY, 0x0003, 0x034A, QUALITY_ANY, 0x000A)) {
							say("\"'Tis a simple matter, when thou dost know the secret...\"");
							Func0826(event);
							abort;
						}
						say("\"Thou must bring me three Worm Hearts -- no less!\"");
						add("Worm Hearts");
					} else {
						say("\"But first, thou must bring me the Hearts of three Ice Worms.\"");
						add("Worm Hearts");
					}
				} else {
					say("\"I will make thee a Worm Gem if thou wilt come to my shop when I am there...\"");
				}
				fallthrough;

			case "strange request" (remove):
				say("\"'Twas Torrissio who told me the secret of making these gems. He said he learned of it from ancient scrolls written in some strange runic lettering.\"");
				say("\"For years, he hath been mine only customer for such gems. But then the stranger named Batlin asked me to craft some for him, and now thou dost request them...\"");
				fallthrough;

			case "Worm Hearts" (remove):
				say("\"Why, the hearts of Ice Worms, of course! Kill an Ice Worm, strip it of its heart, and kill another.\"");
				say("\"The Ice Worms are found in the cold northern lands, I am told. I have not been there myself. Heard stories. Very cold.\"");
				fallthrough;

			case "bye":
				UI_remove_npc_face0();
				Func097F(AVATAR, "@Farewell!@", 0x0000);
				Func097F(DUCIO, "@Come again!@", 0x0002);
				Func08FF();
				break;
		}
	}
}

extern var Func0954 0x954 ();
extern var Func0953 0x953 ();
extern void Func097F 0x97F (var var0000, var var0001, var var0002);
extern var Func09A0 0x9A0 (var var0000, var var0001);
extern var Func0942 0x942 (var var0000);
extern void Func08FF 0x8FF ();
extern void Func0425 object#(0x425) ();

void Func0410 object#(0x410) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;
	var var0008;
	var var0009;
	var var000A;
	var var000B;
	var var000C;
	var var000D;
	var var000E;
	var var000F;
	var var0010;

	var0000 = Func0954();
	var0001 = UI_is_pc_female();
	var0002 = Func0953();
	var0003 = UI_part_of_day();
	if ((var0003 > EARLY) || (var0003 < EVENING)) {
		var0003 = "day";
	} else {
		var0003 = "evening";
	}
	if (gflags[SAW_EDRIN_TRANSFORM] && ((event == PROXIMITY) && (!gflags[RESTORED_EDRIN]))) {
		EDRIN->set_npc_id(EDRIN->get_npc_id() + 0x0001);
		if (EDRIN->get_npc_id() == 0x0008) {
			UI_play_sound_effect(0x0074);
			var0004 = EDRIN->get_object_position();
			UI_sprite_effect(ANIMATION_LIGHTNING_GREEN, var0004[0x0001], var0004[0x0002], 0x0000, 0x0000, 0x0000, LOOP_ONCE);
			var0005 = script EDRIN after 3 ticks {
				nohalt;
				call Func0410;
			};
		}
		if (EDRIN->get_npc_id() == 0x0007) {
			Func097F(EDRIN, "@Oh, no!@", 0x0000);
			UI_play_sound_effect(0x0074);
			var0004 = EDRIN->get_object_position();
			var0004[0x0001] -= 0x0004;
			var0004[0x0002] -= 0x0003;
			UI_sprite_effect(ANIMATION_LIGHTNING_BLUE, var0004[0x0001], var0004[0x0002], 0x0000, 0x0000, 0x0000, LOOP_ONCE);
		}
		if (EDRIN->get_npc_id() == 0x0006) {
			Func097F(EDRIN, "@Must hide...@", 0x0000);
			UI_play_sound_effect(0x0074);
			var0004 = EDRIN->get_object_position();
			var0004[0x0001] += 0x0011;
			UI_sprite_effect(ANIMATION_LIGHTNING_RED, var0004[0x0001], var0004[0x0002], 0x0000, 0x0000, 0x0000, LOOP_ONCE);
		}
		if (EDRIN->get_npc_id() == 0x0005) {
			Func097F(EDRIN, "@Teleport storm!@", 0x0000);
			UI_play_sound_effect(0x0074);
			var0004 = EDRIN->get_object_position();
			var0004[0x0001] += 0x000C;
			var0004[0x0002] += 0x0007;
			UI_sprite_effect(ANIMATION_LIGHTNING_YELLOW, var0004[0x0001], var0004[0x0002], 0x0000, 0x0000, 0x0000, LOOP_ONCE);
		}
		if (EDRIN->get_npc_id() == 0x0004) {
			UI_set_weather(SPARKLE);
			Func097F(EDRIN, "@'Tis so windy!@", 0x0003);
			var0006 = 0x0247;
			var0007 = EDRIN->find_nearby(var0006, 0x000A, MASK_NONE);
			if (var0007) {
				var0007->remove_item();
			}
		}
		if (EDRIN->get_npc_id() == 0x0003) {
			Func097F(EDRIN, "@I should fetch my belongings.@", 0x0000);
			var0006 = 0x0321;
			var0007 = EDRIN->find_nearby(var0006, 0x000A, MASK_NONE);
			if (var0007) {
				var0007->remove_item();
			}
		}
		if (EDRIN->get_npc_id() == 0x0002) {
			UI_fade_palette(0x000C, 0x0001, 0x0001);
			UI_play_music(0x000C, Func09A0(0x0005, 0x0001));
			Func097F(EDRIN, "@It doth foretell a storm...@", 0x0000);
		}
		if (EDRIN->get_npc_id() == 0x0001) {
			UI_play_sound_effect(0x0074);
			UI_set_weather(RAIN);
			var0008 = EDRIN->find_nearby(0x025F, 0x0014, MASK_EGG);
			var0009 = UI_create_new_object(0x0339);
			if (var0009) {
				var0009->set_item_flag(TEMPORARY);
				var0005 = UI_update_last_created(var0004);
			}
			for (var000C in var0008 with var000A to var000B) {
				if (var000C->get_item_frame() == 0x0002) {
					var0006 = 0x0321;
				}
				if (var000C->get_item_frame() == 0x0003) {
					var0006 = 0x0247;
				}
				if ((var000C->get_item_frame() == 0x0002) || (var000C->get_item_frame() == 0x0003)) {
					var0004 = var000C->get_object_position();
					var0004[0x0002] += 0x0001;
					var0009 = UI_create_new_object(var0006);
					if (var0009) {
						var0009->set_item_flag(TEMPORARY);
						var0005 = UI_update_last_created(var0004);
					}
				}
			}
		}
		abort;
	}
	if (gflags[SAW_EDRIN_TRANSFORM] && ((event == SCRIPTED) && (!gflags[RESTORED_EDRIN]))) {
		ALE->set_schedule_type(WANDER);
		Func097F(ALE, "@Awk!@", 0x0002);
		ALE->set_camera();
		EDRIN->remove_npc();
		ALE->set_polymorph(0x0304);
		var0005 = script ALE after 5 ticks {
			nohalt;
			call Func0425;
		};
	}
	if (event == DOUBLECLICK) {
		AVATAR->item_say("@Excuse me...@");
		Func097F(EDRIN, "@But of course!@", 0x0002);
		EDRIN->set_schedule_type(TALK);
	}
	if (event == STARTED_TALKING) {
		EDRIN->run_schedule();
		EDRIN->show_npc_face0(0x0000);
		EDRIN->clear_item_say();
		var000D = EDRIN->get_item_flag(MET);
		if (var000D == false) {
			EDRIN->set_item_flag(MET);
			say("\"I am a man! I am a man! I cannot tell thee how miserable it is to be a bird.\"");
			add("bird");
			UI_set_timer(0x0005);
		} else {
			say("\"I am forever in thy debt, ",
				var0000,
				". How may ol' Edrin be of aid to thee?\"");
			add("aid");
			if (UI_get_timer(0x0005) >= 0x0003) {
				var000E = true;
			}
		}
		converse (["name", "bye"]) {
			case "name":
				say("\"My name is Edrin.\"");
				remove("name");
				fallthrough;

			case "aid" (remove):
				if (UI_is_pc_female()) {
					var000F = "woman";
				} else {
					var000F = "man";
				}
				say("\"Well, ",
					var0000,
					", 'tis the least I can do for the ",
					var000F,
					" who made me once again a man. I can but hope thou wilt never experience the misery of being a bird!\"");
				add("bird");
				fallthrough;

			case "bird" (remove):
				if (var000E) {
					var0010 = "However,@ he appears sad, @I am still without passage home";
					add("still without");
				} else {
					var0010 = "Of course, first I must locate passage aboard a ship";
					add("passage");
				}
				say("\"'Twas terrible, ",
					var0000,
					"! Well, I should say, flying was rather exciting and all, but I never became accustomed to the worms. Were it not for my dreams, I would surely have lost sanity! But now, thanks to thee, I have no want but to return to my flock. ",
					var0010,
					".\"");
				add(["dreams", "flock"]);
				fallthrough;

			case "dreams" (remove):
				if (!gflags[EDRIN_DREAMS_OF_SIRANUSH]) {
					say("\"'Twas the most unusual thing I have ever known. Well, save being a bird. When I would dream, I would envision this maiden -- fair as summer's day. She called herself Siranush. Oftimes I would only see her from afar, bathing in a spring or basking in the sun. And other times, we would be together, swimming, gardening, walking...\"");
					say("\"Oh, I beg thy pardon, ",
						var0000,
						", I did forget myself for a bit.\"");
					gflags[EDRIN_DREAMS_OF_SIRANUSH] = true;
				} else if (!gflags[EDRIN_KNOWS_SIRANUSH_IS_REAL]) {
					say("\"Yes, yes, ",
						var0000,
						". I told thee about the lovely maiden, Siranush. If only she were real,\" he sighs.");
				} else {
					say("He smiles. \"Yes, ",
						var0000,
						". I had forgotten to offer thee my thanks. Thou hast provided for me the opportunity to learn my visions were real. Now, however, I will have not the opportunity to lay eyes upon my lovely Siranush again...\"");
				}
				fallthrough;

			case "flock" (remove):
				say("\"Indeed, ",
					var0000,
					". I am a shepherd, caretaker of sheep. I have never known another life. Well, excepting my time as a bird, of course! But, like one of mine own sheep lost in the wild, I long for a way to return home.\"");
				fallthrough;

			case "passage" (remove):
				say("\"Why, yes. After I find my brother we will return home, if possible. It will be much safer to travel by ship.\"");
				add(["brother", "safer"]);
				fallthrough;

			case "still without" (remove):
				say("\"Aye. My brother says that he was told we can find safe passage aboard a ship here. But all we've seen is Captain Hawk.\"");
				add(["brother", "safe", "Hawk"]);
				fallthrough;

			case "Hawk" (remove):
				say("\"He is the captain of the... the... what is the name of that ship?\"");
				if (Func0942(KANE)) {
					KANE->show_npc_face1(0x0000);
					say("\"The Arabella.\"");
					UI_remove_npc_face1();
					EDRIN->show_npc_face0(0x0000);
					say("\"Ah, yes, now I remember. I thank thee.\"");
					KANE->show_npc_face1(0x0000);
					say("\"Thou art welcome.\"");
					UI_remove_npc_face1();
					0x0000->set_conversation_slot();
				} else {
					say("\"Oh, well, I cannot remember.\"");
				}
				if (HAWK->get_item_flag(DEAD)) {
					say("\"Anyway, now that he hath been killed, I know not what we'll do. I suppose we must await the arrival of another ship.\"");
					add("killed");
				} else {
					say("\"Anyway, for some reason he doth refuse to sail again. I do wish he would change his mind, or that another ship would arrive.\"");
				}
				fallthrough;

			case "killed":
				say("\"I did not see anything...\"");
				if (Func0942(KANE)) {
					KANE->show_npc_face1(0x0000);
					say("\"Nor did I!\"");
					UI_remove_npc_face1();
					0x0000->set_conversation_slot();
				}
				say("\"Nor did Kane. However, he was in the tavern when Hawk scuffled with a man named Flindo. We can only guess the outcome, ",
					var0000,
					".\"");
				fallthrough;

			case "safe", "safer" (remove):
				say("\"Well, I suppose a ship would offer only a little more protection, but anything would be better than travelling in the open, what with the storms and all.\"");
				add("storms");
				fallthrough;

			case "storms" (remove):
				say("\"They are most unusual, ",
					var0000,
					". The thunder and lightning I have seen before, but the suddenness with which they strike would be unbelievable had I not experienced one firsthand. The storm had barely begun, when there was a flash of lightning and a clap of thunder. And the next thing I knew, I was flapping wings instead of waving arms. My memory is weak after that, but I do remember hearing Kane's shouts.\"");
				fallthrough;

			case "brother" (remove):
				say("\"Kane is my brother. He is a few years my junior, but certainly an able shepherd. I know how worried he must have been while I was a parrot.\"");
				if (var000E) {
					say("\"I'm glad he met Mistress Devra.\"");
					add("Devra");
				} else {
					say("\"I wonder how he will react to seeing me again. I hope he hath not strayed too far from home.\"");
					add("home");
				}
				fallthrough;

			case "home" (remove):
				say("\"Well, we live on the mainland. Since I spy the Mountains of Freedom off in the distance, I know that this is not the mainland. And I have seen little goblin activity.\"");
				add(["Mountains of Freedom", "Goblin activity"]);
				fallthrough;

			case "Mountains of Freedom" (remove):
				say("\"I know nothing about them, save for that they follow the coastline in an upside down `U' shape -- there are no mountain ranges like that near my farm.\"");
				fallthrough;

			case "Goblin activity" (remove):
				say("\"Yes, in the forest near our farm there are a terrible number of Goblins. They often come to raid us on the way to the city.\"");
				add(["raid", "city"]);
				fallthrough;

			case "city" (remove):
				say("\"Aye, ",
					var0000,
					". We tend our sheep south of Fawn. Excellent grazing pastures there.\"");
				fallthrough;

			case "raid" (remove):
				say("\"Well, they rarely set upon us, ",
					var0000,
					", though sometimes a few will steal our sheep. Sometimes they are worse than wolves, I think. And much meaner!\"");
				fallthrough;

			case "Devra" (remove):
				say("\"She is the owner of the inn at Sleeping Bull. Kane tells me that she helped him find a place to stay while waiting for Captain Hawk. Of course, now it is time for us to head home.\"");
				add("home");
				fallthrough;

			case "bye":
				UI_remove_npc_face0();
				Func097F(AVATAR, "@Fare thee well!@", 0x0000);
				Func097F(EDRIN, "@Goodbye!@", 0x0002);
				Func08FF();
				break;
		}
	}
}

extern var Func0954 0x954 ();
extern var Func0953 0x953 ();
extern void Func097F 0x97F (var var0000, var var0001, var var0002);
extern var Func099B 0x99B (var var0000, var var0001, var var0002, var var0003, var var0004, var var0005, var var0006);
extern var Func097D 0x97D (var var0000, var var0001, var var0002, var var0003, var var0004);
extern var Func0942 0x942 (var var0000);
extern var Func0992 0x992 (var var0000, var var0001, var var0002, var var0003);
extern var Func098C 0x98C ();
extern var Func099F 0x99F (var var0000, var var0001, var var0002);
extern void Func08FF 0x8FF ();

void Func0411 object#(0x411) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;
	var var0008;
	var var0009;
	var var000A;
	var var000B;
	var var000C;
	var var000D;
	var var000E;
	var var000F;
	var var0010;

	var0000 = Func0954();
	var0001 = UI_is_pc_female();
	var0002 = Func0953();
	var0003 = UI_part_of_day();
	if ((var0003 > EARLY) || (var0003 < EVENING)) {
		var0003 = "day";
	} else {
		var0003 = "evening";
	}
	if ((event == DEATH) && get_item_flag(SI_TOURNAMENT)) {
		var0004 = script item {
			nohalt;
			call Func0329;
		};
	}
	if (event == DOUBLECLICK) {
		AVATAR->item_say(("@Good " + var0003) + "!@");
		Func097F(FEDABIBLIO, "@Hush...@", 0x0002);
		FEDABIBLIO->set_schedule_type(TALK);
	}
	if (event == STARTED_TALKING) {
		FEDABIBLIO->run_schedule();
		FEDABIBLIO->clear_item_say();
		FEDABIBLIO->show_npc_face0(0x0000);
		var0005 = FEDABIBLIO->get_item_flag(MET);
		if (gflags[CRYSTAL_BALL_WILL_SHOW_EDRIN] && (!gflags[SAW_EDRIN_TRANSFORM])) {
			say("\"I cannot give thee what thou dost desire until thou hast gazed into my crystal ball, ",
				var0000,
				". Come back when thou hast done so.\"");
			Func097F(FEDABIBLIO, "@The crystal ball!@", 0x0000);
			abort;
		}
		if (gflags[CRYSTAL_BALL_WILL_SHOW_EDRIN] && (gflags[SAW_EDRIN_TRANSFORM] && (!gflags[HAVE_2ND_ENERGY_GLOBE]))) {
			if (gflags[KNOW_ALE_IS_EDRIN]) {
				say("\"Did I not tell thee to speak with Gustacio?\"");
				Func097F(FEDABIBLIO, "@Tell him the news.@", 0x0000);
				abort;
			}
			say("\"At last, all is made clear! Tell good Gustacio that Edrin the missing brother is actually Ale the Bird! He will know what to do from there...\"");
			gflags[KNOW_ALE_IS_EDRIN] = true;
			Func097F(FEDABIBLIO, "@Speak to Gustacio...@", 0x0000);
			abort;
		}
		if (gflags[BANES_RELEASED]) {
			if (gflags[OBTAINED_SCROLL_OF_SERPENT]) {
				say("\"So good to see that the Anarch hath not yet slain thee, ",
					var0000,
					". How may I be of aid?\"");
			} else {
				say("\"A thousand thanks! I had feared that I would remain an adornment of this place forever, thanks to Shamino the Anarch.\"");
			}
			add("Shamino the Anarch");
			if (!gflags[OBTAINED_SCROLL_OF_SERPENT]) {
				add("gratitude");
			}
		} else {
			if (var0005 == false) {
				FEDABIBLIO->set_item_flag(MET);
				say("\"Thou must be a seeker after knowledge. I am the Mage Fedabiblio, and I serve as the Magister of Moonshade.\"");
			} else {
				say("\"Thou hast a voracious appetite for knowledge. What dost thou desire to learn?\"");
			}
			add(["Magister", "Moonshade"]);
		}
		if (!gflags[HAVE_NEW_SPELLBOOK]) {
			add("spellbook");
		}
		if (gflags[FEDABIBLIO_ANALYSES_RESULTS] && (!gflags[SAW_EDRIN_TRANSFORM])) {
			add("Gustacio's experiment");
		}
		if (gflags[KNOWS_ROTOLUNCIA_IS_KIDNAPPER] && (!ROTOLUNCIA->get_item_flag(DEAD))) {
			add("kidnap");
		}
		if ((gflags[HAS_CLUE_PINECONE] && (!gflags[KNOWS_PINECONE_OWNER])) || ((gflags[HAS_CLUE_BLUE_EGG] && (!gflags[KNOWS_BLUE_EGG_OWNER])) || ((gflags[HAS_CLUE_BEAR_SKULL] && (!gflags[KNOWS_BEAR_SKULL_ORIGIN])) || ((gflags[HAS_CLUE_LAB_APPARATUS] && (!gflags[KNOWS_LAB_APPARATUS_OWNER])) || ((gflags[HAS_CLUE_PUMICE] && (!gflags[KNOWS_PUMICE_ORIGIN])) || (gflags[HAS_BAD_CLUE_SLIPPERS] && (!gflags[KNOWS_SLIPPERS_OWNER]))))))) {
			add("information");
		}
		converse (["bye"]) {
			case "kidnap" (remove):
				if (gflags[AUTOMATON_SPOKE_ABOUT_KIDNAP]) {
					say("\"Most ominous... Again, I would direct thee to the MageLord. He is a man of low intellect and great cunning. No doubt he can aid thee.\"");
				} else if (gflags[SHOULD_TELL_FILBERCIO_OF_KIDNAP]) {
					say("\"Do not waste thy time with the Rangers -- this is a case for Mages, most obviously!\"");
					say("\"I direct thee to go immediately to MageLord Filbercio with this matter.\"");
				} else {
					say("\"Thy friend hath been taken! By means magical! 'Tis an offense to the Council...\"");
					say("\"Take thy case directly to the MageLord -- he shall aid thee!\"");
					gflags[SHOULD_TELL_FILBERCIO_OF_KIDNAP] = true;
				}
				fallthrough;

			case "Shamino the Anarch" (remove):
				say("\"The first thing that thy monstrous companion did when he came into town was oust the MageLord and the Council of Mages. When they resisted his edicts, Shamino killed them!\"");
				say("\"Thou wouldst not believe it, ",
					var0000,
					"! The Anarch simply deflected all their spells... They had no effect at all.\"");
				say("\"The Rangers became his instruments of chaos... Anything was allowed, as long as one held a 'permit' from the Anarch.\"");
				say("\"I do not know how many of us are left now. It seems that most of the manors are abandoned...\"");
				UI_push_answers();
				add(["anything", "left", "abandoned", "change subject"]);
				fallthrough;

			case "change subject":
				UI_pop_answers();
				say("\"Ah, thy mind is questing again! What shall we speak of now?\"");
				fallthrough;

			case "anything" (remove):
				say("\"Many of the Mages fell to the Anarch's wild justice. Others fell to the unorthodox magic of their fellow Mages. And I found myself in the lamentable position thou didst find me in for NOT using Death spells!\"");
				if (!gflags[HAVE_HAWKS_KEY]) {
					say("\"I tried to save Captain Hawk from the Anarch, but my powers were not sufficient.\"");
					say("\"As he lay dying, Hawk gave me this key. He said that it unlocked his sea chest at the Blue Boar Inn, and that the contents might be helpful someday.\"");
					say("\"As I think the key might be useful to thee, I am giving it to thee.\"");
					var0004 = Func099B(AVATAR, 0x0001, 0x0281, 0x00BC, 0x0006, 0x0000, true);
					gflags[HAVE_HAWKS_KEY] = true;
				}
				fallthrough;

			case "abandoned" (remove):
				say("\"It might not seem virtuous, but I would suggest that thou shouldst explore the empty manors for magical scrolls and other items which might be of use in thy quest.\"");
				say("\"For instance, thou couldst perchance assemble a near- complete set of the fabled Serpent Teeth -- \"");
				say("\"It was a coup to steal such an artifact from old Erstam, but now the trophies lie abandoned in the mansions...\"");
				say("\"I know not what the powers of the Teeth might be, but they might reveal their secret to thee.\"");
				say("\"But beware of the automatons!\"");
				fallthrough;

			case "left" (remove):
				say("\"The last I knew, before I earned the Anarch's ire, Stefano was alive... though he was being pursued by some fell creature.\"");
				say("\"Ducio yet lived. As did Torrissio. And I can only pray that Andrio and Freli escaped the notice of that monster!\"");
				fallthrough;

			case "Magister" (remove):
				say("\"Thou dost not know what a Magister does? The Magister is the director of the Seminarium -- 'tis the only School for Mages in the entire land.\"");
				say("\"One of my functions is to find gifted children for this school. When they are located, I bring them to the school.\"");
				say("\"I was appointed as Magister for life.\"");
				UI_push_answers();
				add(["Seminarium", "children", "change subject"]);
				fallthrough;

			case "children" (remove):
				say("\"A young, untrained Mage can be quite dangerous! Therefore, these children must be brought to the Seminarium -- for their own safety!\"");
				say("\"For instance, take young Freli. His father was a shopkeeper. What could a merchant teach his son about magical powers!\"");
				say("\"Taking care of my students is a tiring but fulfilling duty. Young Freli shows much promise, and Andrio is almost ready to graduate.\"");
				add(["Andrio", "Freli"]);
				fallthrough;

			case "Seminarium" (remove):
				say("\"The Seminarium is unique in all the land, for all Mages are welcome to come here and study our records concerning spell research and magical activity.\"");
				say("\"Any Mage can study here in safety, knowing that this place is a sanctuary from violence.\"");
				say("\"Passing travellers also stop here to access our library.\"");
				add(["travellers"]);
				fallthrough;

			case "Andrio" (remove):
				say("\"Andrio hath quite a bit of youthful enthusiasm, and I find that most refreshing, but I do wish that he would use a bit more caution in his experiments!\"");
				fallthrough;

			case "Freli" (remove):
				say("\"I must confess that Freli is my favorite student. He is most brilliant, but the unfortunate thing is that he knows this. Sometimes I feel that he is simply too smart for his own good.\"");
				fallthrough;

			case "travellers" (remove):
				say("\"Thou art not the first to be attracted to our facilities! In recent days, two visitors are memorable.\"");
				say("\"First, there was the scholar Gwenno. We could not help her much, as her interest was in historical matters. I suggested that she consult the library on Monk Isle.\"");
				say("\"Less agreeable was the visit of the Mage Batlin. He appeared to be most interested in the ancient inhabitants of this land, the Ophidians. Indeed, one might say that he was obsessed.\"");
				fallthrough;

			case "Moonshade" (remove):
				say("\"Since thou art a visitor, I will explain a few things to thee. Moonshade is a city of Mages and for Mages. It is ruled by the Adepts, and served by the lesser Mages. There is a lower class -- the Mundanes. But some of them are skilled as artisans.\"");
				UI_push_answers();
				add(["Adepts", "lesser Mages", "artisans", "Mundanes", "change subject"]);
				fallthrough;

			case "Adepts" (remove):
				say("\"The three Adepts are the most powerful wizards in the city. They compose the Council of Mages, which governs the city.\"");
				say("\"One of the Adepts serves as MageLord. Currently, Filbercio rules as Lord of Moonshade.\"");
				add("Filbercio");
				if (ROTOLUNCIA->get_item_flag(DEAD)) {
					if (gflags[CAUGHT_WITH_FRIGIDAZZI]) {
						say("\"All is in an uproar, with Rotoluncia dead and her replacement -- the Necromancer Mortegro -- missing.\"");
						say("\"Gustacio hath asked that I join the Council in this troubled time, and I have done so.\"");
						add(["Gustacio", "missing?"]);
					} else {
						say("\"Rotoluncia was on the Council, but her recent death hath made a change necessary. Therefore, Mortegro the Necromancer now holds her former position.\"");
						say("\"Gustacio remains on the Council, as he is second in power only to Filbercio.\"");
						add(["Gustacio", "Mortegro"]);
					}
				} else {
					say("\"The other two Adepts are Gustacio the Green Mage, and the Red Sorceress, Rotoluncia.\"");
					add(["Gustacio", "Rotoluncia"]);
				}
				fallthrough;

			case "Filbercio" (remove):
				say("\"He comes from a long line of Mages. Filbercio is well-respected and is known as a shrewd administrator of city affairs. In private, though, it is said that he is something of a womanizer.\"");
				UI_push_answers();
				add(["politics", "womanizer", "nothing more"]);
				fallthrough;

			case "politics" (remove):
				say("\"When dealing with magic in this city, everything in this city is political. And when dealing with politics, Filbercio is the master of the game. I dare say, he would be a force to be reckoned with, even if his actual magical skills alone were not good enough to make him the MageLord of Moonshade.\"");
				fallthrough;

			case "womanizer" (remove):
				say("\"If Filbercio doth have a flaw, it is that he can be distracted by a pretty face. It doth not hurt if that face belongs to a woman who is also a powerful Mage. The trouble is that it doth not deter him if that woman is already betrothed to another! Oh, perhaps I have said too much...\"");
				fallthrough;

			case "Gustacio" (remove):
				say("\"He is Filbercio's chief rival for the position of MageLord. Gustacio is extremely hard-working and devout in his studies and practices of the magical arts. He is a respected citizen, although there are those who do not like him -- he tends to have a rather severe personality.\"");
				say("\"Now, Gustacio hath thrown himself into his studies of the phenomenon of the teleport storms. It hath become his obsession.\"");
				fallthrough;

			case "Rotoluncia" (remove):
				say("\"Trust me, she is someone thou dost not wish to cross.\"");
				fallthrough;

			case "Mortegro" (remove):
				say("\"Mortegro, master of death magic. Quite often he is dismissed as having the least political influence, but it is a mistake to underestimate him. He is a highly-skilled diplomat. After all, he hath remained on close personal speaking terms with the dead for all these years.\"");
				say("\"He holds seances regularly. I am certain he will invite thee to one, sooner or later.\"");
				fallthrough;

			case "missing?" (remove):
				say("\"Indeed, Mortegro hath gone missing! It is said that he chose to take a stroll during one of the magical storms...\"");
				say("\"Whilst making his observations of the storm, the Necromancer was struck by lightning -- and disappeared.\"");
				say("\"It would be a shame if he were dead, for only he knows the secrets of speaking with the souls of the dead.\"");
				fallthrough;

			case "lesser Mages" (remove):
				say("\"These are citizens who have pursued some sort of magical education. Although they know a few spells, they were not able to become Adepts. Most become Rangers or Apothecaries.\"");
				fallthrough;

			case "artisans" (remove):
				say("\"These are basically Mundanes who possess some skill that is valued in the society of Mages. Artists, writers, musicians, metalsmiths... That sort.\"");
				fallthrough;

			case "Mundanes" (remove):
				say("\"These poor souls live in a dark little world where magic is merely another powerful natural force that affects them, which they desperately try to adjust to or withstand.\"");
				say("\"Most of the Mundanes born here eventually leave. They settle in Fawn or Monitor, and this is better for them.\"");
				fallthrough;

			case "information" (remove):
				say("\"In what art thou interested?\"");
				UI_push_answers();
				var0006 = 0x0001;
				add(["people", "places", "strange objects", "nothing more"]);
				fallthrough;

			case "people" (remove):
				say("\"Thou hast mistaken me for a common gossip.\"");
				Func097F(FEDABIBLIO, "@Be gone with thee!@", 0x0000);
				abort;

			case "places" (remove):
				say("\"There are many strange places that one may explore in Moonshade. To the south of the city are ancient catacombs. Somewhere within those tunnels is a way leading to a dungeon known only as Furnace.\"");
				add(["catacombs", "Furnace"]);
				fallthrough;

			case "catacombs" (remove):
				say("\"The catacombs were once occupied by the Rangers, until the water level began to rise. The Rangers built pumps to drain the water, but then a strange breed of rodent began to infest the catacombs. The creatures are said to be large vicious rats that have fangs as big as daggers. Needless to say, the catacombs were shortly abandoned.\"");
				fallthrough;

			case "Furnace" (remove):
				say("\"I myself would not go there. It is said that the heat there is so intense that it is lethal.\"");
				fallthrough;

			case "strange objects":
				say("\"Bucia the Shopkeeper hath sent thee to me! And what did she tell thee to ask of me?\"");
				UI_push_answers();
				var0006 += 0x0001;
				if (gflags[HAS_CLUE_PUMICE] && (!gflags[KNOWS_PUMICE_ORIGIN])) {
					add("pumice");
				}
				if (gflags[HAS_CLUE_LAB_APPARATUS] && (!gflags[KNOWS_LAB_APPARATUS_OWNER])) {
					add("apparatus");
				}
				if (gflags[HAS_CLUE_PINECONE] && (!gflags[KNOWS_PINECONE_OWNER])) {
					add("pinecone");
				}
				if (gflags[HAS_CLUE_BLUE_EGG] && (!gflags[KNOWS_BLUE_EGG_OWNER])) {
					add("blue egg");
				}
				if (gflags[HAS_CLUE_BEAR_SKULL] && (!gflags[KNOWS_BEAR_SKULL_ORIGIN])) {
					add("skull");
				}
				add("nothing more");
				fallthrough;

			case "pumice" (remove):
				if (Func097D(PARTY, 0x0001, 0x010B, QUALITY_ANY, FRAME_ANY)) {
					say("\"Might I take that...\"");
					say("\"Yes, this is pumice -- black in color, rough in texture, light in weight.\"");
				} else {
					say("\"Pumice is a light, rough rock of a black or light brown hue.\"");
				}
				say("\"These rocks are formed when the Primal Forces of Fire and Earth collide -- during certain conjurations, for instance.\"");
				say("\"Pumice is also found deep in the bowels of the world, where fire runs liquid.\"");
				gflags[KNOWS_PUMICE_LAVA] = true;
				if (gflags[KNOWS_PUMICE_LAVA] && gflags[HEARD_ABOUT_FURNACE]) {
					gflags[KNOWS_PUMICE_ORIGIN] = true;
				}
				fallthrough;

			case "apparatus" (remove):
				if (Func097D(PARTY, 0x0001, 0x02ED, QUALITY_ANY, 0x0001)) {
					say("\"That item is used for researching the properties of magic, and to create new spells.\"");
					if (!gflags[HAVE_NEW_SPELLBOOK]) {
						say("\"It is not safe for thee to have such an item. As the Magister, it is my duty to take that from thee.\"");
						var0004 = UI_remove_party_items(0x0001, 0x02ED, QUALITY_ANY, 0x0001, 0x0012);
						var0007 = AVATAR->get_object_position();
						AVATAR->obj_sprite_effect(ANIMATION_PURPLE_BUBBLES, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, LOOP_ONCE);
						abort;
					}
					say("\"It is not mine, but I cannot tell thee to whom it belongs. Only Master Ducio would know.\"");
					gflags[KNOWS_DUCIO_IS_ARTISAN] = true;
				} else {
					say("\"The item sounds as if it might be a piece of magical apparatus. Master Ducio would know for certain.\"");
					if (!gflags[HAVE_NEW_SPELLBOOK]) {
						say("\"But thou shouldst not handle such equipment -- for Mundanes, it could be very dangerous.\"");
					}
				}
				fallthrough;

			case "pinecone" (remove):
				say("\"Ah, yes. We sometimes find these on the beach after a storm.\"");
				say("\"The northern trees produce tough cones which are filled with seeds. Later, the cones open and release their seeds.\"");
				if (Func097D(PARTY, 0x0001, 0x0108, QUALITY_ANY, FRAME_ANY)) {
					say("\"As thou canst see, this cone still doth have its seeds. It hath been newly released from its tree.\"");
					say("\"It must have come directly from the northern forests, on the mainland north of the Swamp of Gorlab.\"");
				} else {
					say("\"Once the pinecone releases its seeds, it becomes a dried husk. Being light, it is transported by wind and wave.\"");
					say("\"Thy pinecone could have come from any northern forest or any beach.\"");
				}
				gflags[KNOWS_PINECONE_OWNER] = true;
				fallthrough;

			case "blue egg" (remove):
				if (Func097D(PARTY, 0x0001, 0x0241, QUALITY_ANY, 0x0003)) {
					say("\"What a stench! This egg hath gone putrid!\"");
					say("\"A blue egg... doth not seem to be magical or in any way arcane...\"");
				} else {
					say("\"A blue egg... have I ever read of such a thing? Blue hens, blue frogs -- but eggs?\"");
				}
				say("\"I do not know what it is! And if I do not know, then no one shall.\"");
				if (!(HAWK->get_item_flag(DEAD) && Func0942(FRELI))) {
					FRELI->show_npc_face1(0x0000);
					say("\"Cap'n Hawk might know! He hath been everywhere in the world!\"");
					gflags[ASKED_FEDABIBLIO_ABOUT_BLUE_EGG] = true;
					0x0000->set_conversation_slot();
					say("\"The lad doth have a point. Also...\"");
					say("\"Erstam the Mad Mage would almost certainly know, but he doth not share his information with anyone.\"");
				}
				fallthrough;

			case "skull" (remove):
				if (Func097D(PARTY, 0x0001, 0x00F4, QUALITY_ANY, FRAME_ANY)) {
					say("\"Allow me to handle it...\"");
					say("\"But this is merely the skull of a common bear, such as are found on the mainland, most often along the westerly coast.\"");
					gflags[KNOWS_BEAR_SKULL_ORIGIN] = true;
				} else {
					say("\"If thou wilt bring me the item, I shall examine it for thee. I can tell thee nothing now.\"");
				}
				fallthrough;

			case "nothing more":
				UI_pop_answers();
				say("\"Remember always -- knowledge is power.\"");
				fallthrough;

			case "gratitude" (remove):
				say("\"Thank thee for saving me. Now that I am no longer imprisoned within stone, I can continue my researches. There must be some way to stop Shamino the Anarch!\"");
				var0008 = Func0992(0x0001, "@We seek the Scroll of the Serpent, sir.@", "@I seek the Scroll of the Serpent, sir.@", false);
				0x0000->set_conversation_slot();
				say("\"The ancient scroll? Be warned -- it is written entirely in the ancient runes of the Daemons who once dwelt in this land. I can understand none of it.\"");
				say("\"It is said that Erstam translated portions of it, but the translation was lost many years ago.\"");
				say("\"As a token of my gratitude, please accept this, the Scroll of the Serpent.\"");
				var0004 = Func099B(AVATAR, 0x0001, 0x02C3, 0x0050, 0x0000, 0x0000, true);
				gflags[OBTAINED_SCROLL_OF_SERPENT] = true;
				fallthrough;

			case "Gustacio's experiment" (remove):
				say("\"Hmmm... I think that thou shouldst consult my crystal ball. Perhaps it can provide a clue into the matter of the missing brother.\"");
				say("\"Once thou hast looked, come back and I shall divine what thou hast seen.\"");
				gflags[CRYSTAL_BALL_WILL_SHOW_EDRIN] = true;
				Func097F(FEDABIBLIO, "@The crystal ball!@", 0x0000);
				abort;

			case "spellbook" (remove):
				if (!gflags[NEED_FRESH_MANDRAKE]) {
					say("\"Bring me three fresh Mandrake Roots, and I shall let thee have a spellbook. The Roots are found on Monk Isle.\"");
					gflags[NEED_FRESH_MANDRAKE] = true;
				}
				if (Func097D(PARTY, 0x0001, 0x034A, QUALITY_ANY, 0x0003)) {
					if (!Func097D(PARTY, 0x0003, 0x034A, QUALITY_ANY, 0x0003)) {
						say("\"This is not a sufficient number of roots with which to make a spellbook. Return to Monk Isle, and when thou again comest, bring three roots of the Mandrake.\"");
						Func097F(FEDABIBLIO, "@Go back!@", 0x0000);
						abort;
					}
					if (gflags[HAVE_FRESH_MANDRAKE]) {
						say("\"I see that thou hast brought the Mandrake Roots. But I am still hesitant... If thou art truly a Mage, thou wilt be able to answer my four questions.\"");
						if (Func098C()) {
							say("\"Forgive me for my suspicions. But thou wilt understand that I take my responsibility seriously. I will now conjure a spellbook for thee.\"");
							AVATAR->obj_sprite_effect(ANIMATION_PURPLE_BUBBLES, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, LOOP_ONCE);
							var0004 = UI_remove_party_items(0x0003, 0x034A, QUALITY_ANY, 0x0003, 0x0000);
							var0004 = Func099B(AVATAR, 0x0001, 0x02F9, 0x0001, 0x0005, 0x0000, true);
							if (var0004[0x0002] != 0x0000) {
								var0009 = AVATAR->find_nearest(0x02F9, 0x000A);
							} else {
								var0004 = Func099F(0x02F9, QUALITY_ANY, 0x0005);
								if (var0004 == 0x0000) {
									say("\"Ummm.... For some reason, I cannot locate the spellbook that I was going to give thee. Thou wilt have to return at a later time.\"");
									abort;
								}
								var0009 = var0004[0x0001];
							}
							var0009->remove_all_spells();
							var000A = [SPELL_CURE, SPELL_AWAKEN, SPELL_HEAL, SPELL_TRANSLATION, SPELL_TRANSCRIBE];
							for (var000D in var000A with var000B to var000C) {
								var0004 = UI_add_spell(var000D, 0x0000, var0009);
							}
							say("\"Thou wilt notice that the Transcribe spell is within thy spellbook. Use it to copy spell scrolls into thy spellbook, for they will disappear once thou hast used them.\"");
							say("\"Remember this well. It may mean the difference between thy life and thy death.\"");
							gflags[HAVE_NEW_SPELLBOOK] = true;
							var000E = [0x0975, 0x0748];
							var000F = [0x0968, 0x0767];
							var0010 = [0x096F, 0x075E];
							FRIGIDAZZI->set_new_schedules([MIDNIGHT, MORNING, NOON], [SLEEP, EAT_AT_INN, LAB], [var000E, var000F, var0010]);
							FRIGIDAZZI->move_object([0x0978, 0x0764, 0x0000]);
							FRIGIDAZZI->run_schedule();
							var000E = [0x0988, 0x0742];
							var000F = [0x0969, 0x0768];
							var0010 = [0x0961, 0x0764];
							GOBLIN_MESSENGER->set_new_schedules([MIDNIGHT, MORNING, NOON], [SLEEP, WAITER, WANDER], [var000E, var000F, var0010]);
							GOBLIN_MESSENGER->move_object([0x096F, 0x075E, 0x0000]);
							GOBLIN_MESSENGER->run_schedule();
						} else {
							FEDABIBLIO->set_schedule_type(SHY);
							FEDABIBLIO->clear_item_say();
							Func097F(FEDABIBLIO, "@Be gone, rogue!@", 0x0000);
							abort;
						}
					} else {
						say("\"Thou didst not understand me. The Roots must be fresh, taken from the swamp precisely as the tides are receding. These roots are stale, and unsuitable for our purposes.\"");
						say("\"Return to Monk Isle, and return with fresh roots of the Mandrake!\"");
						Func097F(FEDABIBLIO, "@Return!@", 0x0000);
						abort;
					}
				} else if (gflags[NEED_FRESH_MANDRAKE]) {
					say("\"Without the Mandrake Roots, I can do nothing for thee.\"");
					say("\"Return to Monk Isle, and return with fresh roots of the Mandrake!\"");
				}
				fallthrough;

			case "bye":
				UI_remove_npc_face0();
				Func097F(AVATAR, "@Thank thee!@", 0x0000);
				Func097F(FEDABIBLIO, "@Seek truth always.@", 0x0002);
				Func08FF();
				break;
		}
	}
}

extern var Func0954 0x954 ();
extern var Func0953 0x953 ();
extern void Func07D1 object#(0x7D1) ();
extern void Func097F 0x97F (var var0000, var var0001, var var0002);
extern void Func0830 0x830 ();
extern var Func097D 0x97D (var var0000, var var0001, var var0002, var var0003, var var0004);
extern var Func0992 0x992 (var var0000, var var0001, var var0002, var var0003);

void Func0412 object#(0x412) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;
	var var0008;
	var var0009;
	var var000A;
	var var000B;
	var var000C;

	var0000 = Func0954();
	var0001 = UI_is_pc_female();
	var0002 = "his";
	var0003 = "him";
	var0004 = "he";
	var0005 = "man";
	if (UI_is_pc_female()) {
		var0002 = "her";
		var0004 = "she";
		var0003 = "her";
		var0005 = "woman";
	}
	var0006 = Func0953();
	var0007 = UI_part_of_day();
	var0008 = 0x0000;
	if (FRIGIDAZZI->get_npc_id() > 0x0001) {
		var0008 = 0x0002;
	}
	if ((var0007 > EARLY) || (var0007 < EVENING)) {
		var0007 = "day";
	} else {
		var0007 = "evening";
	}
	if ((event == DEATH) && get_item_flag(SI_TOURNAMENT)) {
		var0009 = script item {
			nohalt;
			call Func0329;
		};
	}
	if (event == DOUBLECLICK) {
		AVATAR->item_say("@Greetings!@");
		FILBERCIO->Func07D1();
		Func097F(FILBERCIO, "@Ah, yes...@", 0x0002);
		FILBERCIO->set_schedule_type(TALK);
	}
	if (event == STARTED_TALKING) {
		FILBERCIO->run_schedule();
		FILBERCIO->halt_scheduled();
		FILBERCIO->show_npc_face0(0x0000);
		var000A = FILBERCIO->get_item_flag(MET);
		say("\"'Tis thee again. Hast thou good news?\"");
		add(["duties", "politics"]);
		if (gflags[KNOWS_ROTOLUNCIA_IS_KIDNAPPER] && ((!gflags[AUTOMATON_SPOKE_ABOUT_KIDNAP]) && (!ROTOLUNCIA->get_item_flag(DEAD)))) {
			add("kidnap");
		}
		if (gflags[AUTOMATON_SPOKE_ABOUT_KIDNAP] && (!ROTOLUNCIA->is_dead())) {
			add("search");
		}
		if (gflags[HAS_CLUE_LAB_APPARATUS] && (!gflags[KNOWS_LAB_APPARATUS_OWNER])) {
			add("apparatus");
		}
		if (gflags[HAS_BAD_CLUE_SLIPPERS] && (!gflags[KNOWS_SLIPPERS_OWNER])) {
			add("slippers");
		}
		converse (["bye"]) {
			case "change subject":
				say("\"But we were only beginning! Very well, if thou dost insist...\"");
				UI_pop_answers();
				fallthrough;

			case "duties" (remove):
				say("\"As thou hast no doubt noticed, the burden of being MageLord wears heavily upon me. I spend all of mine hours in the palace. I have no life of mine own. I seldom even research new spells.\"");
				Func0830();
				UI_push_answers();
				add(["burden", "palace", "life", "spells", "change subject"]);
				fallthrough;

			case "spells" (remove):
				say("\"Hmmpf...\"");
				say("\"'Tis beneath my station to teach thee, or any other, the awesome knowledge that is mine alone. Go and badger Melino or Columna, if thou dost wish to learn the arcane arts.\"");
				fallthrough;

			case "burden" (remove):
				say("\"Indeed. Sometimes I think that my subjects do not appreciate me. They have given me wealth and power, but I have given them my life! Now is that a fair exchange?\"");
				say("\"Perhaps I shall go live in a hut on the coast. That would be less stressful...\"");
				Func0830();
				fallthrough;

			case "palace" (remove):
				say("\"Is this not a grand old building? Most of the downstairs chambers are used for business of the court, while the remaining rooms are mine own.\"");
				say("\"Never mind the legends of hidden treasure chambers here. If there were gold here, I would have it by now!\"");
				Func0830();
				fallthrough;

			case "life" (remove):
				say("\"It is lonely to be MageLord. I have the needs of a normal man, yet I am overwhelmed by the demands of the citizens...\"");
				if (UI_is_pc_female()) {
					say("\"I am grateful for thy sympathy, madam. I too am attracted to thee. Aha, thou didst not think I noticed thy glances!\"");
					say("\"But alas, I am spoken for! The sorceress Frigidazzi is my current love, and she allows me no trespasses.\"");
					say("\"And I am jealous of her affections, as well. I have found that women are notoriously fickle...\"");
				} else {
					say("\"No doubt thou hast heard tales of my romantic conquests! This is the answer I have found to the pressures of being MageLord.\"");
					say("\"I know that the citizens talk of me all the time, behind my back. They say that I am a great lover, and indeed, I am!\"");
					say("\"But I have never found true love. Romance is like the fog that dissolves in the sunlight.\"");
					say("\"Do not speak of this to the Sorceress Frigidazzi! She is my current passion, and I fear that she doth love me too much.\"");
					say("\"I am supremely jealous of her affections, as well. Though I do not truly love her, I will not be made a fool of!\"");
				}
				Func0830();
				fallthrough;

			case "politics" (remove):
				say("\"Is there no end to the bickering among the Mages? We have three factions here, and each elects its favorite to the Council of Moonshade.\"");
				say("\"As the voice of compromise and experience, I have always been selected MageLord by the Adepts.\"");
				if (ROTOLUNCIA->get_item_flag(DEAD)) {
					say("\"My fellow Lords are Gustacio and Mortegro.\"");
				} else {
					say("\"My fellow Lords are Rotoluncia and Gustacio.\"");
				}
				Func0830();
				UI_push_answers();
				add(["Adept Gustacio"]);
				if (ROTOLUNCIA->get_item_flag(DEAD)) {
					add("Adept Mortegro");
				} else {
					add("Adept Rotoluncia");
				}
				add("change subject");
				fallthrough;

			case "Adept Rotoluncia" (remove):
				say("\"The Sorceress Rotoluncia is the heart of dissension. She is ambitious beyond measure, and causes all manner of trouble.\"");
				say("\"She was not always this way. I remember the summer of my last apprenticeship year. She was two years younger than I, and asked me to be her tutor...\"");
				say("\"Ah, but she did tutor me as well, that summer! There have been many loves, before and since, but I shall always remember Rotoluncia.\"");
				Func0830();
				fallthrough;

			case "Adept Gustacio" (remove):
				say("\"Gustacio doth\tadhere too strictly to outdated codes of ethics. Why, we could accomplish nothing in Moonshade if we followed his advice!\"");
				if (!gflags[CAUGHT_WITH_FRIGIDAZZI]) {
					say("\"I doubt that he shall even deign to speak with thee. He is of the old school, and speaks only to those he considers worthy of his time.\"");
					say("\"Until thou hast proven thyself, he shall have little to do with thee.\"");
				}
				Func0830();
				fallthrough;

			case "Adept Mortegro" (remove):
				say("\"Now that Rotoluncia is dead -- and I shall miss her, for she and I were once lovers -- I hope for greater harmony.\"");
				say("\"The Black Mage, Mortegro, hath been selected to take Rotoluncia's seat on the Council.\"");
				say("\"They say that he is crazy, but I think there is prejudice everywhere against necromancers. He is not that bad.\"");
				Func0830();
				fallthrough;

			case "apparatus" (remove):
				if (Func097D(PARTY, 0x0001, 0x02ED, QUALITY_ANY, 0x0001)) {
					say("\"Allow me to see what thou hast -- it had better not be one of mine own!\"");
					if (SERV_06->npc_nearby()) {
						AUTOMATON_FACE->show_npc_face1(0x0000);
						say("\"Thieves could not take thy goods, MageLord. I protect them well.\"");
						UI_remove_npc_face1();
						0x0000->set_conversation_slot();
						say("\"That had best be true, or thou wilt find thyself on the scrap heap!\"");
					}
					var000B = Func0992(0x0001, "@This be it.@", "@Here it is.@", false);
					0x0000->set_conversation_slot();
					say("\"Ah, good! 'Tis not mine at all. Thou must understand that every item of magical equipment must be custom-made for each Mage.\"");
					say("\"I do not know to whom this belongs, but it is not mine.\"");
				} else {
					say("\"Hast thou brought this object with thee?\"");
					var000B = Func0992(0x0001, "@No, we do not have it with us.@", "@No, I have not.@", false);
					0x0000->set_conversation_slot();
					say("\"Then I can tell thee nothing. But if thou hast stolen this from me, I shall not pay ransom for it!\"");
				}
				Func0830();
				fallthrough;

			case "slippers" (remove):
				say("\"Slippers! What business is my footwear to thee! Dost thou think to have a laugh at mine expense?\"");
				say("\"Begone with thee, fool...\"");
				var000C = FILBERCIO->get_object_position();
				UI_sprite_effect(ANIMATION_TELEPORT2, var000C[0x0001], var000C[0x0002], 0x0000, 0x0000, 0x0000, LOOP_ONCE);
				FILBERCIO->move_object([0x05F2, 0x078F, 0x0000]);
				abort;

			case "kidnap" (remove):
				say("\"Thy friend hath been taken! How foul! And by magical means! Indeed...\"");
				say("\"Whom dost thou suspect of this terrible crime?\"");
				UI_push_answers();
				add(["Batlin"]);
				if (gflags[MORTEGRO_KIDNAP_SUSPECT]) {
					add("Mortegro");
				}
				if (gflags[TORRISSIO_KIDNAP_SUSPECT]) {
					add("Torrissio");
				}
				add(["Rotoluncia", "unknown"]);
				fallthrough;

			case "Mortegro":
				say("\"Nonsense! That man is an honest and an upright Mage, though he doth have unsettling habits...\"");
				say("\"Withdraw thy suspicions -- I vouch for his integrity. Mortegro did not steal thy friend.\"");
				UI_pop_answers();
				fallthrough;

			case "Torrissio":
				say("\"Hmm... He is very young, but also clever and devious. Perhaps thou shouldst confront him with thy suspicions, and see what he doth have to say.\"");
				UI_pop_answers();
				fallthrough;

			case "Batlin" (remove):
				say("\"That name is familiar to me... he came to Moonshade many weeks ago, a large man in a brown cloak of a very common quality.\"");
				say("\"Perhaps thou shouldst inquire of Bucia at the Provisioner's Shop -- if there is anything to be known in this city, she would know it.\"");
				UI_pop_answers();
				fallthrough;

			case "Rotoluncia" (remove):
				if (ROTOLUNCIA->get_item_flag(DEAD)) {
					say("\"A tragedy that the two of thee were unable to settle thy differences amicably.\"");
					UI_pop_answers();
				} else {
					say("\"I have heard that she believes thee to consort with Daemons, and to be a partner of the one called Batlin.\"");
					say("\"Thou shouldst search her manor for clues. Open every door, for thy friend might be hidden anywhere.\"");
					say("\"Thou canst find her mansion in the northeast part of town, built into the face of the southern mountains.\"");
					say("\"Be careful -- the Red Witch is most powerful, and I cannot protect thee from her enchantments!\"");
					Func097F(FILBERCIO, "@Report thy findings.@", 0x0000);
					abort;
				}
				fallthrough;

			case "unknown" (remove):
				say("\"If thou hast no suspects, then thou surely art clueless! I mourn for thee and thy lost friend.\"");
				UI_pop_answers();
				fallthrough;

			case "search" (remove):
				if (gflags[CAN_USE_FILBERCIOS_BARGE]) {
					say("\"I have already given thee my permission. Go! Do not trouble me further! I can do no more in this matter.\"");
				} else {
					say("\"So thou hast searched Rotoluncia's manor, and there is no sign of thy friend, or of Rotoluncia? How interesting...\"");
					say("\"I have one last hope for thee, but I must first share a secret with thee...\"");
					UI_push_answers();
					add(["last hope", "secret", "change subject"]);
				}
				fallthrough;

			case "last hope" (remove):
				say("\"If I am wrong this time, then thine enemy must not be Rotoluncia, but rather some other Mage.\"");
				say("\"If this is so, I cannot aid thee.\"");
				fallthrough;

			case "secret" (remove):
				say("\"I am reluctant to admit this, but under the circumstances, I think that I must.\"");
				say("\"A year ago, the Red Sorceress and I renewed that passionate affair which we began in our youth. This was none of mine idea, but I could not resist her advances...\"");
				say("\"She demanded that our love-making be done in secret, and so I built a secluded love palace.\"");
				add(["love palace", "love-making"]);
				fallthrough;

			case "love palace" (remove):
				say("\"Oh, it is a modest place -- not like this great masterpiece! A mere cottage.\"");
				say("\"Perhaps Rotoluncia hath gone there to hide, and taken thy friend as well. If so, then she hath betrayed me.\"");
				say("\"Go quickly! See if she is there, and if so, flush her out!\"");
				add("Where is it?");
				fallthrough;

			case "Where is it?" (remove):
				say("\"It is located in the center of the Lake of Enchantment, south and west of where we now stand.\"");
				say("\"Thou shalt need a boat to reach this place. Take my yacht. I give thee permission.\"");
				say("\"The royal yacht is moored at the pier which can only be reached from within my palace. Thou wilt note that my yacht will not move unless the mystic engine is engaged.\"");
				gflags[CAN_USE_FILBERCIOS_BARGE] = true;
				add("betrayed");
				fallthrough;

			case "betrayed" (remove):
				say("\"Did she make love to me, only thinking to use me? Was her passion false, a mere pretense in order to coerce me into building that hidden citadel?\"");
				if (!UI_is_pc_female()) {
					say("\"Women are fickle! Never give thine heart to one of their kind, stranger. Better to love them and then leave them...\"");
				}
				say("\"I am undone! Mine heart grieves. I must go away to be with my thoughts...\"");
				var000C = FILBERCIO->get_object_position();
				UI_sprite_effect(ANIMATION_TELEPORT, var000C[0x0001], var000C[0x0002], 0x0000, 0x0000, 0x0000, LOOP_ONCE);
				FILBERCIO->remove_npc();
				FILBERCIO->set_schedule_type(DANCE);
				Func097F(AVATAR, "@Gosh!@", 0x0003);
				abort;

			case "love-making" (remove):
				say("\"Aha, but I cannot speak of this with thee! It is a private matter...\"");
				say("\"But let me say this -- in the years since our youth, the Red Sorceress learned many strange and difficult practices. Why, she even taught me a thing or two!\"");
				fallthrough;

			case "bye":
				UI_remove_npc_face0();
				Func097F(AVATAR, "@Must be going...@", 0x0000);
				Func097F(FILBERCIO, "@Good fortune!@", 0x0002);
				break;
		}
	}
}

extern var Func0954 0x954 ();
extern void Func097F 0x97F (var var0000, var var0001, var var0002);
extern void Func07D1 object#(0x7D1) ();
extern var Func0942 0x942 (var var0000);
extern var Func099B 0x99B (var var0000, var var0001, var var0002, var var0003, var var0004, var var0005, var var0006);
extern void Func08FF 0x8FF ();

void Func0413 object#(0x413) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;

	var0000 = Func0954();
	var0001 = false;
	if ((event == DEATH) && get_item_flag(SI_TOURNAMENT)) {
		var0002 = script item {
			nohalt;
			call Func0329;
		};
	}
	if ((event == PROXIMITY) && (FRELI->get_schedule_type() == HOUND)) {
		if (UI_get_random(0x000A) < 0x0006) {
			abort;
		}
		var0003 = ["@Zounds!@", "@A true warrior!@", "@Tell me a story!@", "@Look! A stranger!@", "@May I be thy friend?@", "@Beware the mages...@"];
		Func097F(FRELI, var0003[UI_get_random(0x0006)], 0x0000);
	}
	if (event == DOUBLECLICK) {
		AVATAR->item_say("@Little boy!@");
		FRELI->Func07D1();
		Func097F(FRELI, "@Hi!@", 0x0002);
		FRELI->set_schedule_type(TALK);
	}
	if (event == STARTED_TALKING) {
		FRELI->run_schedule();
		FRELI->clear_item_say();
		FRELI->show_npc_face0(0x0000);
		var0004 = FRELI->get_item_flag(MET);
		if (gflags[BANES_RELEASED]) {
			if (gflags[FEBABIBLIO_SAVED]) {
				say("\"I am so glad to see thee, ",
					var0000,
					"! There hath been so much trouble here of late...\"");
			} else {
				say("\"I need thine help! I need thine help! I am in so much trouble...\"");
			}
			add("trouble");
		} else if (var0004 == false) {
			FRELI->set_item_flag(MET);
			say("\"Art thou the great hero from a distant land?! Oh, my name is Freli. I am glad to meet thee!\"");
			add(["hero", "distant land"]);
		} else {
			say("\"'Tis the Avatar! 'Tis the Avatar, from far away!\"");
			add(["Avatar", "far away"]);
		}
		if (gflags[SEEKING_SCROLL_OF_SERPENT] && (!gflags[OBTAINED_SCROLL_OF_SERPENT])) {
			add("looking for scroll");
		}
		if (gflags[DELIN_SPOKE_FRELI] && (!gflags[ANDRIO_SPOKE_ABOUT_DELIN])) {
			add("Delin");
		}
		if (gflags[KNOWS_ROTOLUNCIA_IS_KIDNAPPER] && (!ROTOLUNCIA->get_item_flag(DEAD))) {
			add("kidnap");
		}
		converse (["bye"]) {
			case "kidnap" (remove):
				say("\"Thou shouldst ask Andrio -- I am certain that he could help thee! He is very bright.\"");
				if (ANDRIO->npc_nearby()) {
					ANDRIO->set_schedule_type(TALK);
					Func097F(ANDRIO, "@I can help!@", 0x0002);
				}
				fallthrough;

			case "hero", "Avatar" (remove):
				say("\"I know thou hast participated in many daring exploits. I so want to hear about everything! Life is so dreary here. I have nothing but my study of magic to interest me.\"");
				add(["dreary", "study", "magic"]);
				fallthrough;

			case "dreary" (remove):
				say("\"Why, nothing ever happens here in Moonshade. At least, nothing to match thy fascinating activities. I would wager not even Filbercio hath seen as much as thee.\"");
				add(["Moonshade", "Filbercio"]);
				fallthrough;

			case "Moonshade" (remove):
				say("\"'Twas founded several centuries ago, ",
					var0000,
					". Legend holds that the Mad Mage himself journeyed from a far away place, arriving here and laying claim to the land.\"");
				add("Mad Mage");
				fallthrough;

			case "Mad Mage" (remove):
				say("\"His true name is Erstam. He is called the Mad Mage because he fled the city many years ago to leave behind our civilization. No one truly knows why he left, but some who were there claim he made references to the townspeoples' 'petty bickering'.\"");
				fallthrough;

			case "Filbercio" (remove):
				say("\"The MageLord? He is the greatest of all wizards, or so I have heard. He rules with a kind but stern hand. Of course, I would not count on his friendship were I to be seen with his lover.\"");
				add("lover");
				fallthrough;

			case "lover" (remove):
				say("\"This is but rumor, ",
					var0000,
					". However, it hath been said that he is seen late at night in the presence of the Mistress of Cold, Frigidazzi.\"");
				fallthrough;

			case "study" (remove):
				say("\"Well, I certainly love magic and all, but it's taking too long! I have been learning for years, thou wouldst think me a master at this point. I do not believe it fair -- that traveller needed no tutelage, he simply paid Torrissio and was off.\"");
				add(["traveller", "Torrissio"]);
				fallthrough;

			case "traveller" (remove):
				say("\"I had not the chance to meet him, but those who did called him Batlin. He was not here long, and left in a rush, but I overheard that he purchased spells from Torrissio.\"");
				fallthrough;

			case "Torrissio" (remove):
				say("\"Torrissio can be quite mean, I have heard. Andrio is afraid of him, I know that.\"");
				if (Func0942(ANDRIO)) {
					ANDRIO->show_npc_face1(0x0000);
					say("\"I am not!\"");
					0x0000->set_conversation_slot();
					say("\"Yes, thou art!\"");
					0x0001->set_conversation_slot();
					say("\"'Tis a lie! Besides, thou art afraid of him as well!\"");
					0x0000->set_conversation_slot();
					say("\"That is, uh, not at all true!\"");
					UI_remove_npc_face1();
					0x0000->set_conversation_slot();
				}
				say("\"Why, Andrio will not even pass his house before 9 in the morning.\"");
				add("nine");
				fallthrough;

			case "nine" (remove):
				say("\"That is when he leaves his laboratory to go out into the city.\"");
				fallthrough;

			case "magic" (remove):
				say("\"I mean no disrespect, ",
					var0000,
					". I find it a most fascinating topic. I could\tspend days creating brilliant flashes of light, moving stones with my mind, and summoning animals from nothing. 'Tis the arcane art that keeps mine interest in daily life. I simply want to be further along in my studies.\"");
				fallthrough;

			case "distant land", "far away" (remove):
				say("\"I have heard that thou hast travelled a great many miles to come here. When thou hast the time, I would love to listen to stories of thine homeland.\"");
				fallthrough;

			case "trouble" (remove):
				say("\"It was so terrible! Everyone is dead, and the city is destroyed...\"");
				say("\"I was in the Seminarium when the Glowing Man came. Fedabiblio tried to\tstop him, but could not...\"");
				if (!var0001) {
					add("Fedabiblio");
				}
				fallthrough;

			case "Fedabiblio":
				var0001 = true;
				remove("Fedabiblio");
				if (gflags[FEBABIBLIO_SAVED]) {
					say("\"Thou art a Mage beyond compare, ",
						var0000,
						"!\"");
					say("\"I thought that Fedabiblio was dead after the Glowing Man turned him into a statue. I had no idea how to change him back... I hope Fedabiblio rewarded thee richly for saving him!\"");
				} else {
					say("\"He is dead, he is dead... The Glowing Man turned him into cold, cold stone. He is standing in the Seminarium...\"");
					say("\"And I do not know how to change him back!\"");
				}
				fallthrough;

			case "Delin" (remove):
				say("\"He is my long-lost father. Here is a scroll thou canst give him from me.\"");
				var0002 = Func099B(AVATAR, 0x0001, 0x031D, 0x0046, 0x0000, 0x0000, true);
				gflags[ANDRIO_SPOKE_ABOUT_DELIN] = true;
				fallthrough;

			case "looking for scroll" (remove):
				say("\"I know that one! It is written entirely in Serpent Runic, and kept in the library of the Seminarium.\"");
				if (gflags[FEBABIBLIO_SAVED]) {
					say("\"Thou shouldst ask Fedabiblio for the key. I am sure he will give it to thee since thou didst save him.\"");
				} else {
					say("\"Only Fedabiblio had the key. But now he hath been turned to stone!\"");
				}
				if (!var0001) {
					add("Fedabiblio");
				}
				fallthrough;

			case "bye":
				UI_remove_npc_face0();
				Func097F(AVATAR, "@So long!@", 0x0000);
				Func097F(FRELI, "@Please come again!@", 0x0002);
				Func08FF();
				break;
		}
	}
}

extern var Func0954 0x954 ();
extern var Func0953 0x953 ();
extern var Func09A0 0x9A0 (var var0000, var var0001);
extern void Func07D2 object#(0x7D2) ();
extern void Func07D1 object#(0x7D1) ();
extern void Func097F 0x97F (var var0000, var var0001, var var0002);
extern var Func097D 0x97D (var var0000, var var0001, var var0002, var var0003, var var0004);
extern var Func099B 0x99B (var var0000, var var0001, var var0002, var var0003, var var0004, var var0005, var var0006);
extern var Func0955 0x955 ();
extern void Func0907 0x907 (var var0000, var var0001);
extern void Func08FF 0x8FF ();

void Func0414 object#(0x414) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;
	var var0008;
	var var0009;
	var var000A;
	var var000B;
	var var000C;
	var var000D;
	var var000E;

	var0000 = FRIGIDAZZI->get_item_flag(MET);
	var0001 = Func0954();
	var0002 = UI_is_pc_female();
	var0003 = Func0953();
	var0004 = UI_part_of_day();
	if ((var0004 > EARLY) || (var0004 < EVENING)) {
		var0004 = "day";
	} else {
		var0004 = "evening";
	}
	var0005 = "his";
	if (var0002) {
		var0005 = "her";
	}
	var0006 = FRIGIDAZZI->get_distance(AVATAR);
	var0007 = [0x0975, 0x0748, 0x0000];
	var0008 = FRIGIDAZZI->get_object_position();
	var0009 = [0x0986, 0x0766];
	var000A = Func09A0(0x0005, 0x0003);
	if ((event == DEATH) && get_item_flag(SI_TOURNAMENT)) {
		var000B = script item {
			nohalt;
			call Func0329;
		};
	}
	if ((event == DOUBLECLICK) && (FRIGIDAZZI->get_schedule_type() != WAIT)) {
		if (FRIGIDAZZI->get_npc_id() != 0x0000) {
			FRIGIDAZZI->set_npc_id(0x0000);
		}
		var0008 = FRIGIDAZZI->get_object_position();
		if (gflags[GOT_FRIGIDAZZI_DATE] && ((var0008[0x0001] > 0x0587) && ((var0008[0x0001] < 0x098A) && ((var0008[0x0002] > 0x0740) && (var0008[0x0002] < 0x0750))))) {
			FRIGIDAZZI->Func07D2();
			FRIGIDAZZI->Func07D1();
			FRIGIDAZZI->set_schedule_type(WAIT);
			Func097F(FRIGIDAZZI, "@Oh, 'tis thee!@", 0x0002);
			var000B = script FRIGIDAZZI after 5 ticks {
				nohalt;
				call Func00E6;
			};
		} else {
			AVATAR->item_say("Pardon me...");
			FRIGIDAZZI->Func07D1();
			if (var0002) {
				Func097F(FRIGIDAZZI, "@Yes, love?@", 0x0002);
			} else {
				Func097F(FRIGIDAZZI, "@Yes, handsome?@", 0x0002);
			}
			FRIGIDAZZI->set_schedule_type(TALK);
		}
	}
	if (event == STARTED_TALKING) {
		FRIGIDAZZI->run_schedule();
		FRIGIDAZZI->clear_item_say();
		FRIGIDAZZI->show_npc_face0(0x0000);
		if (var0000 == false) {
			FRIGIDAZZI->set_item_flag(MET);
			say("\"Yes, we met at the MageLord's banquet. I am Frigidazzi, of course.\"");
		} else {
			say("\"Back so soon? But of course.\"");
		}
		if (gflags[KNOWS_FUR_CAP_OWNER]) {
			add("fur cap");
		}
		converse (["spells", "goblin", "Batlin", "Moonshade", "Gwenno", "bye"]) {
			case "fur cap" (remove):
				var000B = Func097D(PARTY, 0x0001, 0x03EC, QUALITY_ANY, 0x0004);
				if (var000B) {
					say("\"Why, thou dost have my favorite fur cap! I have been looking for it everywhere! In fact, I have not seen it since that storm we had a while ago. Hmmm, that would mean that I have something that belongs to thee. I shall trade thee thine helm for my fur cap.\"");
					gflags[KNOWS_FUR_CAP_OWNER] = false;
					var000B = UI_remove_party_items(0x0001, 0x03EC, QUALITY_ANY, 0x0004, 0x0000);
					var000B = Func099B(AVATAR, 0x0001, 0x017F, QUALITY_ANY, 0x0000, 0x0000, true);
				} else {
					say("\"Thou must me talking about my favorite fur cap! I have been looking for it everywhere! In fact, I have not seen it since that storm we had a while ago. Hmmm, perhaps that means I have something that belongs to thee. If thou dost return my fur cap to me I shall see what I have of thine.\"");
				}
				fallthrough;

			case "goblin" (remove):
				say("\"Yes, I have a goblin for a servant. What of it? She is a perfect servant because she is almost completely impervious to the cold. But surely we can think of more interesting things to talk about...\"");
				fallthrough;

			case "Gwenno" (remove):
				say("\"Yes, I saw her briefly a few times while she was in our city. She spent a lot of time at the Seminarium. Gwenno had a lot of interest in the exotic races of our land.\"");
				fallthrough;

			case "Batlin" (remove):
				say("\"That disgusting oaf! He wanted to buy a serpent relic from me, but I did not sell it to him!\"");
				say("\"Cannot we find a different topic of conversation?\"");
				add("serpent relic");
				fallthrough;

			case "serpent relic" (remove):
				say("\"It was not very remarkable -- merely a stone in the shape of a serpent's tooth. It had no powers that I know of...\"");
				say("\"Many of us have these stones. In fact, it is a tradition for the best Mages to own one or more of them.\"");
				say("\"Canst thou keep a secret?\"");
				if (Func0955()) {
					say("\"I can tell thee from whence the Serpent Teeth came...\"");
					say("\"The Mages of Moonshade steal them from Erstam, the Mad Mage who lives on the island! It is such fine sport, but if he catches thee, he turns thee into a newt!\"");
					say("\"We do not know why he values them so. And since he now hates us, I doubt that he shall explain the matter to us.\"");
				} else {
					say("\"Neither can I! But I had best not share my secrets with thee...\"");
				}
				fallthrough;

			case "Moonshade" (remove):
				say("\"A beautiful city, is it not? But ever so much more beautiful at night when the moon is shining down upon it. Dost thou not agree?\"");
				fallthrough;

			case "spells" (remove):
				say("\"I could teach thee many things, ",
					var0003,
					". Come after midnight, alone, to my manor, and I shall reveal such knowledge as thou hast never before beheld.\"");
				say("\"I am a heavy sleeper, so thou shalt most likely have to awaken me...\"");
				gflags[GOT_FRIGIDAZZI_DATE] = true;
				var000B = AVATAR->find_nearby(0x010E, 0x003C, MASK_NONE);
				for (var000E in var000B with var000C to var000D) {
					if (var000E->get_item_quality() == 0x00C8) {
						Func0907(var000E, 0x0001);
					}
				}
				add(["knowledge"]);
				fallthrough;

			case "knowledge" (remove):
				say("\"I am the mistress of cold-fire magic, a specialty I learned during my many travels to the north.\"");
				say("\"Extreme cold is in its own way just as powerful a force as extreme heat. Over time, I have learned to bend it to my will.\"");
				add("travels to the north");
				fallthrough;

			case "travels to the north" (remove):
				say("\"Some of my most memorable experiences have been on my various expeditions to the north. It is a harsh and unforgiving environment, that brings out the passionate will in one's heart to survive. It is extremely invigorating. All I shall tell thee is that if thou shouldst ever travel there thou shouldst dress warmly!\"");
				fallthrough;

			case "bye":
				UI_remove_npc_face0();
				Func097F(AVATAR, "@So long!@", 0x0000);
				Func097F(FRIGIDAZZI, "@Until next time!@", 0x0002);
				Func08FF();
				break;
		}
	}
}

extern var Func0954 0x954 ();
extern var Func0953 0x953 ();

void Func0415 object#(0x415) () {
	var var0000;
	var var0001;
	var var0002;

	var0000 = Func0954();
	var0001 = UI_is_pc_female();
	var0002 = Func0953();
}

extern var Func0953 0x953 ();
extern void Func07D1 object#(0x7D1) ();
extern void Func097F 0x97F (var var0000, var var0001, var var0002);
extern var Func0992 0x992 (var var0000, var var0001, var var0002, var var0003);
extern void Func0834 0x834 ();
extern var Func0955 0x955 ();
extern var Func099B 0x99B (var var0000, var var0001, var var0002, var var0003, var var0004, var var0005, var var0006);
extern void Func095D 0x95D (var var0000);
extern var Func09A0 0x9A0 (var var0000, var var0001);
extern void Func08FF 0x8FF ();

void Func0416 object#(0x416) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;

	var0000 = "Mundane";
	if (gflags[HAVE_NEW_SPELLBOOK]) {
		var0000 = "Mage";
	}
	var0001 = UI_is_pc_female();
	var0002 = Func0953();
	if ((event == DEATH) && get_item_flag(SI_TOURNAMENT)) {
		var0003 = script item {
			nohalt;
			call Func0329;
		};
	}
	if (event == DOUBLECLICK) {
		AVATAR->item_say("@A moment, sir.@");
		GUSTACIO->Func07D1();
		Func097F(GUSTACIO, "@I am a busy mage...@", 0x0002);
		GUSTACIO->set_schedule_type(TALK);
	}
	if (event == STARTED_TALKING) {
		GUSTACIO->run_schedule();
		GUSTACIO->clear_item_say();
		GUSTACIO->show_npc_face0(0x0000);
		var0004 = GUSTACIO->get_item_flag(MET);
		if (GUSTACIO->get_schedule_type() == SLEEP) {
			say("\"Canst thou not see that I am trying to sleep!\"");
			Func097F(GUSTACIO, "@Return tomorrow!@", 0x0000);
			abort;
		}
		if (var0004 == false) {
			if (gflags[POTHOS_RETURNED]) {
				say("\"I know thee! Thou art the adventurer for whom the MageLord held the banquet.\"");
			} else {
				say("\"A pleasure to meet thee, I am certain. But I have no patience for idle tongue wagging.\"");
			}
			say("\"Forgive me, but this is an absolute waste of time, when there are other matters which are pressing...\"");
			GUSTACIO->set_item_flag(MET);
			GUSTACIO->set_schedule_type(WANDER);
			Func097F(GUSTACIO, "@To work...@", 0x0000);
			abort;
		}
		if (!gflags[CAUGHT_WITH_FRIGIDAZZI]) {
			say("\"I am sorry, but I do not have time for this. My studies devour mine entire day.\"");
			Func097F(GUSTACIO, "@Now, where is that book?@", 0x0000);
			abort;
		}
		say("\"It is an honor to receive thee, ",
			var0002,
			". How may I be of service to thee?\"");
		if (!gflags[AVATAR_ESCAPED_FREEDOM]) {
			add("Dungeon Freedom");
		}
		if (!gflags[FAWN_TRIAL_DONE]) {
			add("the trial");
		}
		if (gflags[FINISHED_LIGHTNING_EXPERIMENT] && (!gflags[SAW_EDRIN_TRANSFORM])) {
			add("experiment");
		}
		if (gflags[SAW_EDRIN_TRANSFORM] && ((!gflags[RESTORED_EDRIN]) && (!gflags[HAVE_2ND_ENERGY_GLOBE]))) {
			add("Ale is Edrin");
		}
		if (gflags[SAW_EDRIN_TRANSFORM] && ((!gflags[RESTORED_EDRIN]) && gflags[HAVE_2ND_ENERGY_GLOBE])) {
			add("instructions");
		}
		if (gflags[RESTORED_EDRIN] && (!gflags[HAVE_MIRROR_OF_TRUTH])) {
			add("experiment");
		}
		if (gflags[DUCIO_SPOKE_ABOUT_GUSTACIO] && (!gflags[FIXED_BLACK_SWORD])) {
			add("Daemon Sword");
		}
		if (gflags[CAUGHT_WITH_FRIGIDAZZI]) {
			add("stone altar");
		}
		add(["name", "spells", "bye"]);
		if (gflags[FINISHED_LIGHTNING_EXPERIMENT] && (!gflags[RESTORED_EDRIN])) {
			remove("spells");
		}
		converse (0) {
			case "the trial" (remove):
				say("\"Please do not hold me responsible for that travesty of justice! In Moonshade, one doth not contradict the MageLord!\"");
				say("\"Besides, thou wast guilty of the crime, meaning that thou wast in the forbidden bedchamber...\"");
				if (!UI_is_pc_female()) {
					say("\"Oh, how I envy thee! But I am old now, and have my researches to content me.\"");
				}
				fallthrough;

			case "Dungeon Freedom" (remove):
				say("\"Thou must indeed be a formidable Mage, ",
					var0002,
					", since thou wast able to survive Filbercio's dungeons.\"");
				say("\"I apologize for being brusque with thee before. I had no true concept of thine abilities.\"");
				fallthrough;

			case "name":
				say("\"My name is Gustacio, if thou must inquire!\"");
				remove("name");
				fallthrough;

			case "Daemon Sword" (remove):
				say("\"Thy daemon sword needs to have its sorcerous energies realigned. I could repair it if I had my flux analyzer.\"");
				if (gflags[FOUND_FLUX_ANALYZER]) {
					var0005 = Func0992(0x0001, "@We found it in Skullcrusher!@", "@I found it in Skullcrusher!@", false);
					var0006 = PARTY->count_objects(0x01C8, QUALITY_ANY, FRAME_ANY);
					if (var0006 > 0x0000) {
						0x0000->set_conversation_slot();
						say("\"Excellent! Now we can repair thy sword.\"~ \"Place it here and activate it. When the machine is working, use it on the sword.\"");
					} else {
						0x0000->set_conversation_slot();
						say("\"Thou didst? But then where is it?\"~ \"Thou wouldst have me think that thou didst find it!\"");
					}
				} else {
					say("\"Unfortunately, it was stolen from me years ago.\"");
				}
				fallthrough;

			case "spells" (remove):
				if (gflags[RESTORED_EDRIN]) {
					say("\"I thank thee for thine excellent help. Now that my work hath been completed, I have time to teach thee magic as I promised.\"");
					Func0834();
				} else {
					do {
						if (gflags[HAVE_1ST_ENERGY_GLOBE]) {
							say("\"Thou didst agree to help with mine experiments. Why hast thou not taken the energy globe to the tower on the plains?\"");
						} else {
							say("\"If thou wilt aid me with mine experiments involving the teleport storms, I shall reward thee with magic. Dost thou agree?\"");
							if (!Func0955()) {
								continue;
							}
							say("\"Excellent! First I shall need to tell thee what I have learned of these storms so far. They appear to have three powers: teleportation, transposition and transmutation. Also, the lightning of the teleport storms appears to have several different colors.\"");
						}
						UI_push_answers();
						var0007 = true;
						gflags[TEMP_FLAG_1] = false;
						gflags[TEMP_FLAG_2] = false;
						gflags[TEMP_FLAG_3] = false;
						gflags[TEMP_FLAG_4] = false;
						add(["teleportation", "transposition", "transmutation", "lightning colors"]);
						break;
					} while (false)
					nobreak {
						say("\"Then I am sorry, I do not have any time to spare for thee.\"");
						Func097F(GUSTACIO, "@Farewell...@", 0x0000);
						abort;
					}
				}
				fallthrough;

			case "teleportation" (remove):
				gflags[TEMP_FLAG_1] = true;
				say("\"This is the mysterious power to move things from one place to another without passing through the space between.\"");
				if (gflags[TEMP_FLAG_1] && (gflags[TEMP_FLAG_2] && (gflags[TEMP_FLAG_3] && gflags[TEMP_FLAG_4]))) {
					add("further details");
				}
				fallthrough;

			case "transposition" (remove):
				gflags[TEMP_FLAG_2] = true;
				say("\"This is a more elaborate form of teleportation, wherein two objects exchange places -- neither passing through the physical space between them. Fascinating!\"");
				if (gflags[TEMP_FLAG_1] && (gflags[TEMP_FLAG_2] && (gflags[TEMP_FLAG_3] && gflags[TEMP_FLAG_4]))) {
					add("further details");
				}
				fallthrough;

			case "transmutation" (remove):
				gflags[TEMP_FLAG_3] = true;
				say("\"I am not quite certain that this power actually exists. I have theorized that it would involve taking one object and literally changing it into another type of object. The difficulty in proving that something like this exists is that this power must be directly witnessed. Otherwise how is one to know that an item is not what it always was?\"");
				if (gflags[TEMP_FLAG_1] && (gflags[TEMP_FLAG_2] && (gflags[TEMP_FLAG_3] && gflags[TEMP_FLAG_4]))) {
					add("further details");
				}
				fallthrough;

			case "lightning colors" (remove):
				gflags[TEMP_FLAG_4] = true;
				say("\"I have a theory that the colors of the lightning somehow directly correspond to the supernatural force behind it.\"");
				if (!gflags[FINISHED_LIGHTNING_EXPERIMENT]) {
					say("\"But I have developed an experiment to test this theory, and thou canst help me with it.\"");
				} else {
					say("\"And the experiment that thou didst carry out for me seems to confirm what I believed to be true.\"");
				}
				if (gflags[TEMP_FLAG_1] && (gflags[TEMP_FLAG_2] && (gflags[TEMP_FLAG_3] && gflags[TEMP_FLAG_4]))) {
					add("further details");
				}
				fallthrough;

			case "further details" (remove):
				gflags[TEMP_FLAG_1] = false;
				gflags[TEMP_FLAG_2] = false;
				gflags[TEMP_FLAG_3] = false;
				gflags[TEMP_FLAG_4] = false;
				if (!gflags[HAVE_1ST_ENERGY_GLOBE]) {
					say("\"Since thou hast agreed to help with mine experiments, take this energy globe to my special tower. Thou wilt find this tower in the valley to the north of Moonshade in the middle of the plains.\"");
					var0003 = Func099B(AVATAR, 0x0001, 0x01C2, 0x0000, 0x0002, 0x0000, true);
					gflags[HAVE_1ST_ENERGY_GLOBE] = true;
				}
				say("\"Place the globe on the platform, on top of the tower structure.\"");
				say("\"Next, thou shouldst engage the winch. This will seal thee within the tower, and activate the levers. It will also summon a magical storm.\"");
				var0005 = Func0992(0x0001, "@Thou dost want us to summon a storm? This is madness!@", 0x0000, false);
				if (var0005 != AVATAR) {
					0x0000->set_conversation_slot();
					say("\"I assure thee, thou art in no danger! I would do this myself, but at mine age, climbing stairs is very difficult...\"");
				}
				say("\"Pull the levers one at a time. This will draw down lightning from the storm, and cause it to strike the objects which I have placed on the tower.\"");
				say("\"Observe the effects, and most importantly -- observe which color lightning hath which effect. Then return to me with thy report.\"");
				UI_pop_answers();
				fallthrough;

			case "experiment" (remove):
				if (gflags[SAW_EDRIN_TRANSFORM]) {
					say("\"Thou hast completed the experiment. As a token of appreciation, here is the Mirror of Truth.\"");
					gflags[HAVE_MIRROR_OF_TRUTH] = true;
					Func095D(0x03E8);
					var0003 = Func099B(AVATAR, 0x0001, 0x0289, 0x0000, 0x000B, 0x0000, true);
					gflags[BALANCE_ASKS_WHO_AVATAR_IS] = true;
					var0003 = script Func09A0(0x0005, 0x0004) after 100 ticks {
						nohalt;
						call Func0377;
					};
				} else {
					say("\"But of course! Thou must needs go to Fedabiblio for the answers...\"");
					gflags[FEDABIBLIO_ANALYSES_RESULTS] = true;
				}
				fallthrough;

			case "instructions" (remove):
				if (gflags[HAVE_2ND_ENERGY_GLOBE]) {
					say("\"Why hast thou not taken the energy globe which I did give thee to the tower on the plains?\"");
				}
				fallthrough;

			case "Ale is Edrin":
				say("\"Thou must needs take the bird Ale to the tower in the wilderness, and place him where the lightning can strike him.\"");
				if (!gflags[HAVE_BIRD_CAGE]) {
					say("\"I shall give thee this cage to hold the bird within.\"");
					gflags[HAVE_BIRD_CAGE] = true;
					var0003 = Func099B(AVATAR, 0x0001, 0x0346, 0x0000, 0x0000, 0x0000, true);
				}
				if (!gflags[HAVE_2ND_ENERGY_GLOBE]) {
					say("\"Return to the tower with this new energy globe!\"");
					var0003 = Func099B(AVATAR, 0x0001, 0x01C2, 0x0000, 0x0001, 0x0000, true);
					gflags[HAVE_2ND_ENERGY_GLOBE] = true;
				}
				remove("Ale is Edrin");
				fallthrough;

			case "stone altar" (remove):
				say("\"Such a curious thing happened during mine experiments, ",
					var0002,
					".\"");
				say("\"While Mortegro and I were working to discover the secret of the teleportation storms, Mortegro was hit by a lightning strike.\"");
				say("\"In his place, within my cellar, is this odd stone altar. By its look it is something from a Serpent temple, but I have no idea how to send it back where it came from... yet.\"");
				say("\"If I can discern how to reverse the teleportation, perhaps I can rescue poor Mortegro. I hope he was not killed in the exchange...\"");
				fallthrough;

			case "bye":
				UI_remove_npc_face0();
				Func097F(AVATAR, "@Many thanks!@", 0x0000);
				Func097F(GUSTACIO, "@Back to my studies...@", 0x0002);
				Func08FF();
				break;
		}
	}
}

extern var Func0954 0x954 ();
extern var Func0953 0x953 ();
extern void Func07D1 object#(0x7D1) ();
extern void Func097F 0x97F (var var0000, var var0001, var var0002);
extern var Func0955 0x955 ();
extern var Func0942 0x942 (var var0000);
extern var Func0992 0x992 (var var0000, var var0001, var var0002, var var0003);
extern var Func095B 0x95B (var var0000);
extern var Func0957 0x957 (var var0000);
extern void Func094E 0x94E (var var0000, var var0001);
extern void Func0840 0x840 ();
extern var Func099B 0x99B (var var0000, var var0001, var var0002, var var0003, var var0004, var var0005, var var0006);
extern var Func097D 0x97D (var var0000, var var0001, var var0002, var var0003, var var0004);
extern void Func08FF 0x8FF ();

void Func0417 object#(0x417) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;
	var var0008;
	var var0009;
	var var000A;
	var var000B;
	var var000C;
	var var000D;
	var var000E;
	var var000F;

	var0000 = Func0954();
	var0001 = UI_is_pc_female();
	var0002 = Func0953();
	var0003 = UI_part_of_day();
	if ((var0003 > EARLY) || (var0003 < EVENING)) {
		var0003 = "day";
	} else {
		var0003 = "evening";
	}
	if (event == DOUBLECLICK) {
		AVATAR->item_say(("@Good " + var0003) + ", miss.@");
		JULIA->Func07D1();
		Func097F(JULIA, "@So?@", 0x0002);
		JULIA->set_schedule_type(TALK);
	}
	if (event == PROXIMITY) {
		var0004 = UI_get_random(0x0006);
		if (var0004 == 0x0001) {
			JULIA->item_say("@Do not go there!@");
		}
		if (var0004 == 0x0002) {
			JULIA->item_say("@Wine for sale!@");
		}
		if (var0004 == 0x0003) {
			JULIA->item_say("@Very suspicious...@");
		}
		if (var0004 == 0x0004) {
			JULIA->item_say("@Magical wine!@");
		}
		if (var0004 == 0x0005) {
			// BUG: Invalid mask. Instead of FIND_ON_SCREEN, it should have
			// been MASK_NPC2 instead.
			var0005 = JULIA->find_nearby(0x0103, 0x000A, FIND_ON_SCREEN);
			if (var0005 != []) {
				JULIA->item_say("@Clean this!@");
				for (var0008 in var0005 with var0006 to var0007) {
					Func097F(var0008, "@Yes, ma'am@", 0x0002);
				}
			} else {
				JULIA->item_say("@Where is Ernesto?@");
			}
		}
		if (var0004 == 0x0006) {
			JULIA->item_say("@Taste the wine!@");
		}
	}
	if (event == STARTED_TALKING) {
		JULIA->run_schedule();
		JULIA->clear_item_say();
		JULIA->show_npc_face0(0x0000);
		var0009 = JULIA->get_item_flag(MET);
		if (var0009 == false) {
			say("\"In what way can I help thee, stranger?\"");
			JULIA->set_item_flag(MET);
		} else {
			say("\"We meet again.\"");
		}
		if (gflags[KNOWS_ABOUT_TUNNELS] && (!gflags[HAVE_CATACOMBS_KEY])) {
			add("Catacombs");
			if (gflags[HAVE_CHILL_SPELL]) {
				add("key");
			}
		}
		if (gflags[HAS_CLUE_SLIPPERS] && (!gflags[KNOWS_SLIPPERS_OWNER])) {
			add("slippers");
		}
		if (gflags[STORM_ICEWINE] && (!gflags[KNOWS_ICEWINE_ORIGIN])) {
			add("strange wine");
		}
		if (gflags[FOUND_BROWN_BOTTLE] && (SIMON->get_schedule_type() != WAIT)) {
			add("brown bottle");
		}
		if (gflags[HAS_CLUE_FISHNET_STOCKINGS] && (!gflags[KNOWS_CELENNIA_DISAPPEARED])) {
			add("Celennia's disappearance");
		}
		if (gflags[KNOWS_ROTOLUNCIA_IS_KIDNAPPER] && (!ROTOLUNCIA->get_item_flag(DEAD))) {
			add("kidnap");
		}
		converse (["name", "wine", "bye"]) {
			case "kidnap" (remove):
				do {
					if (gflags[PAID_JULIA_FOR_INVESTIGATION]) {
						say("\"I have most excellent news, ",
							var0002,
							"! I have spoken personally with the MageLord, and he hath agreed to see thee.\"");
						say("\"A crime that involved magic must be handled by the Council of Mages, naturally.\"");
						say("\"And due to mine intervention, the MageLord shall be glad to speak with thee. Please, go to him soonest!\"");
						break;
					}
					if (gflags[JULIA_ISNT_INVESTIGATING_KIDNAP]) {
						say("\"I have no information for thee, ",
							var0002,
							". The crime remains a mystery.\"");
						say("\"Perhaps if thou couldst provide the 30 guilders which a proper investigation costs...?\"");
						if (Func0955()) {
							if (UI_remove_party_items(0x001E, 0x03B8, QUALITY_ANY, FRAME_ANY, 0x0000)) {
								say("\"Most excellent! We shall be to work immediately, and hope to have information very soon. Please return in a few hours.\"");
								gflags[PAID_JULIA_FOR_INVESTIGATION] = true;
							} else {
								say("\"We only accept guilders here, stranger. Perhaps Bucia the Provisioner can aid thee in exchanging thy worthless coins for Moonshadian money.\"");
							}
						} else {
							say("\"That is too bad. However, if we learn anything, we shall inform thee.\"");
						}
						break;
					}
					if (gflags[SHOULD_TELL_JULIA_OF_KIDNAP]) {
						say("\"Thou wert wise to follow the advise of the townsfolk in coming to me -- \"");
						say("\"the Rangers must always be consulted in criminal matters.\"");
					}
					say("\"This crime doth seem clearly to be magical. That is a problem -- 'twill be costly to proceed. A Mage should be consulted, and his fee will be steep.\"");
					say("\"Canst thou afford the 20 guilders which a Mages' Analysis would cost?\"");
				} while (false)
				nobreak {
					if (Func0955()) {
						if (UI_remove_party_items(0x0014, 0x03B8, QUALITY_ANY, FRAME_ANY, 0x0000)) {
							say("\"Most excellent! We shall be to work immediately, and hope to have information very soon. Please return to me in a few hours.\"");
							gflags[PAID_JULIA_FOR_INVESTIGATION] = true;
						} else {
							say("\"We only accept guilders here, stranger. Perhaps Bucia the Provisioner can aid thee in exchanging thy worthless coins for Moonshadian money.\"");
						}
					} else {
						say("\"That is too bad. However, the Rangers shall investigate thy mystery. If we learn anything, we shall inform thee.\"");
					}
					gflags[JULIA_ISNT_INVESTIGATING_KIDNAP] = true;
				}
				fallthrough;

			case "name" (remove):
				say("\"What business is it of thine? Who art thou, coming into my city and asking questions?\"");
				say("\"If thou must know, I am Julia, chief of rangers. If thou dost make trouble in Moonshade, I will see that thou art sent to the dungeons!\"");
				add(["Rangers", "Moonshade", "dungeons"]);
				fallthrough;

			case "Rangers" (remove):
				say("\"We are the guardians of Moonshade. The City of Mages hath always been guarded by Rangers.\"");
				say("\"The tradition doth date to the ancient city of Moon, from whence our ancestors came.\"");
				add(["guardians", "Moon"]);
				fallthrough;

			case "guardians" (remove):
				say("\"Dost thou think that the mighty Mages deal with every thief or common brawler? Certainly not!\"");
				say("\"That is what the Rangers are for. To stop common annoyances from bothering the Mages in their work. And if thou art not a Mage, thou dost qualify as a common annoyance.\"");
				fallthrough;

			case "Moon" (remove):
				say("\"Thou art dredging up ancient history!\"");
				say("\"In days long gone, there was a peaceful land called Sosaria. It was a land of many kingdoms and cultures, a paradise of individuality.\"");
				say("\"But times changed. A tyrant named British overthrew the kingdoms and declared himself king.\"");
				var000A = false;
				var000B = [];
				if (Func0942(DUPRE)) {
					var000A = Func0992(DUPRE, "@She doth refer to Lord\r\n\t\t\t\t\t\t\t\t\t\tBritish!@", 0x0000, false);
				} else if (Func0942(SHAMINO)) {
					var000A = Func0992(SHAMINO, "@She doth refer to Lord\r\n\t\t\t\t\t\t\t\t\t\t\tBritish!@", 0x0000, false);
				} else if (Func0942(IOLO)) {
					var000A = Func0992(IOLO, "@She doth refer to\r\n\t\t\t\t\t\t\t\t\t\t\t\tLord British!@", 0x0000, false);
				}
				var000B &= ["@I serve Lord British!@", "say nothing"];
				if (var000A != 0x0000) {
					var000B &= ("@Hush, " + Func095B(var000A)) + "@";
					0x0000->set_conversation_slot();
				}
				var000C = Func0957(var000B);
				if (var000C == 0x0003) {
					Func094E(var000A, "@But she doth slander our liege!@");
					0x0000->set_conversation_slot();
				}
				if (var000C == 0x0001) {
					say("\"There is no need to be vulgar. The Daemon King hath been dead for many centuries. No one doth serve him now.\"");
				}
				say("\"The Daemon British enforced a radical\tscheme of philosophy upon his subjects, forcing them into exile if they would not submit.\"");
				say("\"The Mages and Rangers were bound by the travesty known as the Oath of Honesty!\"");
				var000A = Func0992(SHAMINO, "@But what is improper about\r\n\t\t\t\t\t\t\t\t\thonesty?@", 0x0000, false);
				UI_remove_npc_face1();
				0x0000->set_conversation_slot();
				say("\"Nothing is more cruel than unflinching Honesty. It doth shatter hearts, instill insecurity, and promote civil strife.\"");
				say("\"Therefore, our ancestors fled the City of Moon in the\tland British conquered, and sailed until they found this land.\"");
				fallthrough;

			case "Moonshade" (remove):
				say("\"Aye, the City of Mages. There is much magic here, and more than a little sorcery.\"");
				say("\"The name is symbolic. Moon represents the powers beyond those of mere mortals, just as the moon is suspended over the world.\"");
				say("\"As for Shade, it stands for shelter against the cruel light of Honesty. We believe in Truth here, but only within reason.\"");
				add(["magic", "sorcery"]);
				fallthrough;

			case "magic" (remove):
				say("\"Mages use reagents and such like to cast magic. The good or ill of it comes from the caster's intent.\"");
				say("\"Magic, in and of itself, is neither good nor evil. But sorcery is another matter altogether.\"");
				add("reagents");
				fallthrough;

			case "reagents" (remove):
				say("\"Why ask me about them? I am a Ranger, not a Mage!\"");
				say("\"If thou dost wish such information, seek out Pothos. Do not trouble me to teach thee the rudiments of magic! I am no teacher. Thou shouldst seek Fedabiblio with thine annoying questions!\"");
				add(["Pothos", "Fedabiblio"]);
				fallthrough;

			case "Pothos" (remove):
				say("\"Pothos is the Apothecary here in Moonshade. He will be able to tell thee all about anything that thou wouldst need to cast magic.\"");
				say("\"I hear the storms have cut badly into his supplies, but he should be able to help thee. Or at least he may have more time to deal with thee... I am a very busy woman!\"");
				fallthrough;

			case "Fedabiblio" (remove):
				say("\"Fedabiblio is the master of novices here in Moonshade. It is his lamentable duty to try and make those miscreants into Mages!\"");
				say("\"If he doth not have time for thee, perhaps he could allow thee to satisfy thy curiosity in the library of magics.\"");
				fallthrough;

			case "sorcery" (remove):
				say("\"Sorcery is outlawed here in Moonshade, but that doth not mean that some Mages do not still practice its dark arts.\"");
				say("\"Whereas magic is neither good nor evil, sorcery -- with its use of Bloodspawn -- hath no good intent at all. And the very possession of Stoneheart would have thee thrown into the deepest corners of the dungeons.\"");
				add(["Bloodspawn", "Stoneheart"]);
				fallthrough;

			case "Bloodspawn" (remove):
				say("\"Thou dost not know of Bloodspawn? Good!\"");
				say("\"The less that thou knowest, the less trouble that thou canst cause!\"");
				say("\"I will say only that spells of great destruction require that vile compound. I will tell thee no more...\"");
				fallthrough;

			case "Stoneheart" (remove):
				say("\"Thou art certainly ignorant!\"");
				var000A = Func0992(0x0001, "@Thou art rude!@", 0x0000, false);
				if (var000A != AVATAR) {
					0x0000->set_conversation_slot();
					say("\"My, thou art touchy! I meant no offense... Only that thou didst not know things that are common knowledge here.\"");
				}
				say("\"Stoneheart is the ore that produces Bloodspawn. I know not how this is done. I am not a Mage.\"");
				say("\"And I would advise thee to use great caution about who thou dost ask... lest thou dost find thyself thrown in the dungeons.\"");
				fallthrough;

			case "dungeons" (remove):
				say("\"Beware how thou dost step! The MageLord is apt to send any transgressor into the pits beneath the Mountains of Freedom.\"");
				say("\"None have returned from that dank, dark abyss.\"");
				add(["MageLord", "transgressor", "Freedom"]);
				fallthrough;

			case "MageLord" (remove):
				if (gflags[BANES_RELEASED] && (ANTI_DUPRE->get_schedule_type() != WAIT)) {
					say("\"Our city is ruled by Shamino the Anarch, a most powerful wizard.\"");
					say("\"He is a great improvement over our previous MageLord, who was indolent and deceitful. I am glad that Shamino rules.\"");
				} else {
					say("\"Our city is ruled by the MageLord Filbercio. He is benevolent and wise, and rules well.\"");
					if (!gflags[POTHOS_RETURNED]) {
						say("\"However, he doth not receive visitors, so do not dream of entering his palace.\"");
					}
				}
				fallthrough;

			case "transgressor" (remove):
				if (gflags[BANES_RELEASED] && (ANTI_DUPRE->get_schedule_type() != WAIT)) {
					say("\"'Tis best not to try and second guess Shamino the Anarch. His definition of a transgression changes from moment to moment...\"");
					say("\"And the fine could be as insignificant as a verbal upbraiding, or as serious as thy life.\"");
				} else {
					say("\"If thou art a Mage, thou must follow the Strictures. If thou art a Mundane, thou must not overly annoy a Mage. That much is simple logic.\"");
					say("\"But, as long as Filbercio is the MageLord, thou wouldst do well to remember that it is unhealthy to cross any of Filbercio's whims.\"");
					add("Strictures");
				}
				fallthrough;

			case "Strictures" (remove):
				say("\"'Tis not my job to know them. 'Tis for the Council of Mages to enforce.\"");
				say("\"In short, thou canst not possess Bloodspawn unless the Council approves of it. And thou shouldst report any research that thou dost wish to do to the Council, as well.\"");
				add(["approves", "Council"]);
				fallthrough;

			case "approves" (remove):
				say("\"Thou art as full of questions as a novice!\"");
				say("\"No spell is ever purposefully forgotten. But if it is dangerous, the Council tries to regulate who doth have access to such reagents and spells.\"");
				fallthrough;

			case "Council" (remove):
				say("\"The Council is comprised of the MageLord and two other Adepts. They act as the voice of all the Mages in Moonshade, except when a quorum vote is called of all Adepts...\"");
				say("\"Usually on the election of a new Council member, or a new MageLord.\"");
				fallthrough;

			case "Freedom" (remove):
				say("\"Ha! Now there is a fine jest, if ever I heard one!\"");
				say("\"All that was ever retrieved out of those mountains was the ore that was taken out while it was still a mine!\"");
				say("\"Ever since Filbercio made it a prison, no one hath come out of there again!\"");
				fallthrough;

			case "wine" (remove):
				if (JULIA->get_schedule_type() == TEND_SHOP) {
					say("\"We make the finest wine that thou wilt find anywhere. Wouldst thou care to try some?\"");
					if (Func0955() == true) {
						say("\"Good...\"");
						Func0840();
					} else {
						say("\"Thy loss...\"");
					}
				} else {
					say("\"Come to the winery when we are open and thou canst sample our wares then!\"");
				}
				fallthrough;

			case "Catacombs" (remove):
				say("\"So, thou hast learned of the catacombs, hast thou? I hope thou hast not ventured to those ruins south of town, they are dangerous!");
				say("\"I do not care what thou art after, but I'll tell thee that thou wilt throw thy life away down there.");
				say("The depths belong to the Rat-Men, not to mention the burning heat. That is why the gate must always be locked.\"");
				add(["Rat-Men", "burning heat"]);
				fallthrough;

			case "Rat-Men" (remove):
				say("\"There are too many Rat-Men to eliminate, so it is my duty to see that the gate remains closed. All that I and the other Rangers can do to keep them pacified is to toss scraps of food through the gate.\"");
				say("\"Of course, my job is to keep any of those creatures from getting into the city,");
				say("but I might be able to forget that I saw anyone going down there, if the price was good enough...\"");
				say("\"But I doubt even thou would survive the heat down there. Though the Rat-Men thrive on it, the temperatures down there would most certianly boil thee in thine own flesh.");
				fallthrough;

			case "burning heat" (remove):
				say("\"Only once did I ever venture into the catacombs, with twenty strong Rangers at my back. And before we had gone far, half of our party had fallen to the heat alone...\"");
				say("\"It felt like we were walking into a smith's forge! We had to turn back, and no one hath gone in there since.\"");
				say("I might be tempted to 'loan' thee the key at a price...");
				say("...but not until thou has found a way to protect thyself from the fervid temperatures. Giving thou the key now would mean certian death should thou be foolhearty enough to venture there.");
				say("A sword may protect thee from the Rat-Men, but only magic can save thee from the fearsome heat.");
				say("Return to me for the key when thou hast found the means to survive the heat.");
				fallthrough;

			case "key":
				say("I heard thou hast magic to protect thyself from the heat in the catacombs. I hope thou hast thought to take enough reagents, not that thou will survive the Rat-Men...");
				say("\"I will 'loan' thou this key for say... 40 guilders? Is it worth that much to adventure in the catacombs?\"");
				if (Func0955() == true) {
					var000D = PARTY->count_objects(0x03B8, QUALITY_ANY, FRAME_ANY);
					if (var000D >= 0x0028) {
						say("\"Well enough! Take this blue key. It will open the gate to the catacombs for thee.\"");
						var000E = UI_remove_party_items(0x0028, 0x03B8, QUALITY_ANY, FRAME_ANY, true);
						var000F = Func099B(AVATAR, 0x0001, 0x0281, 0x00CB, 0x0004, 0x0000, true);
						gflags[HAVE_CATACOMBS_KEY] = true;
						remove("Catacombs");
						remove("key");
					} else {
						say("\"Art thou trying to jest with me? Thou dost not have 40 guilders!\"");
						say("\"Return when thou hast learned how to count!\"");
						UI_remove_npc_face0();
						Func097F(JULIA, "@Oaf!@", 0x0000);
						abort;
					}
				} else {
					say("\"Let me know if thou dost change thy mind.\"");
				}
				fallthrough;

			case "slippers" (remove):
				say("\"They are not mine, if that is what thou art asking. I would not wear anything that frilly. And a Mage would never wear anything that plain.\"");
				fallthrough;

			case "strange wine" (remove):
				if (Func097D(PARTY, 0x0001, 0x0268, QUALITY_ANY, 0x0010)) {
					say("\"Thou hast wine from our winery! I hope thou didst enjoy it... Hmm. It is the same vintage as the wine that disappeared.\"");
					say("\"Hast thou seen our wine press? We are very proud of it.\"");
				} else {
					say("\"I am no Mage to divine what it was that thou didst have! Bring to me the bottle or trouble me no more about it. I have enough to do taking care of our wine press.\"");
				}
				add("wine press");
				fallthrough;

			case "wine press" (remove):
				say("\"The finest wine press in all the land! For it operates by no human hand!\"");
				say("\"'Tis a magic wine press, ",
					var0000,
					". Made by the one and only Mad Mage... before he began his weird experiments, that is.\"");
				add(["Mad Mage", "experiments"]);
				fallthrough;

			case "Mad Mage" (remove):
				say("\"Thou hast not heard of the Mad Mage?!\"");
				say("\"His true name is Erstam. He lives on a small island away from Moonshade. He was once the Adepts' mentor... before he went mad.\"");
				fallthrough;

			case "experiments" (remove):
				say("\"Makes me ill to think about them!\"");
				say("\"The Mad Mage thinks that he can learn to create life. Or life from death, I should say.\"");
				say("\"They say that he hacks his assistants to use in his experiments, and that he doth have all sorts of hideous things wandering around the island -- failed experiments that he turns out his door!\"");
				fallthrough;

			case "brown bottle" (remove):
				say("\"I would recognize that mud-brown bottle any day! 'Tis what those brine-drunk Fawn sailors swill! Bad enough to choke a goat, I will tell thee! Thou wilt not find any in this city!\"");
				add(["brine-drunk sailors", "Fawn"]);
				fallthrough;

			case "brine-drunk sailors" (remove):
				say("\"Nearly all who live in Fawn are sailors. I suppose after all those hours at sea, anything would taste good... Mayhaps it kills thy sense of taste. Or mayhaps the smell of fish kills thy sense of smell. I do not know how anyone could drink that bilge water any other way!\"");
				fallthrough;

			case "Fawn" (remove):
				say("\"Fawn is a pretty city, built on the water. 'Tis on the west side of the mainland.\"");
				say("\"I have met Fawn's guard captain. He is a handsome man, quite capable... though how he stomachs that swill they call ale, I shall never know.\"");
				add("guard captain");
				fallthrough;

			case "guard captain" (remove):
				say("\"Fawn's guard captain is a fellow named Jorvin.\"");
				say("\"I would have liked to have become better acquainted with him, but I think that he was already -- friendly -- with the Lady of Fawn herself...\"");
				say("\"A girl cannot compete with that.\"");
				fallthrough;

			case "Celennia's disappearance" (remove):
				say("\"I do not know the whole of it, in truth.\"");
				say("\"All I know is that Celennia and Frigidazzi had some sort of noisy falling out, over the Mage that came here, I did hear.\"");
				say("\"And then Celennia disappears, just like that! Left Frigidazzi in quite a snit, I'll tell thee!\"");
				add(["Frigidazzi", "Mage"]);
				fallthrough;

			case "Frigidazzi" (remove):
				say("\"Frigidazzi is the Adept that specializes in cold spells. I have heard her referred to as the 'ice maiden'!\"");
				say("\"She and Celennia were good friends until Celennia became involved with that Mage.\"");
				fallthrough;

			case "Mage" (remove):
				say("\"Batlin, I think his name was. Poked around Moonshade for quite a while, asking questions and buying spells.\"");
				say("\"I hear that he had something that interested Celennia -- though I will never know what, he was not her type. And whatever it was made Frigidazzi buzzing mad!\"");
				say("\"Only Frigidazzi knows what happened for certain. And I would not care to ask her about it, either!\"");
				fallthrough;

			case "certificate" (remove):
				if (gflags[GOT_CRIME_CERTIFICATE] == false) {
					say("\"With this Crime Certificate, thou canst commit one unlawful act without fear of punishment. If thou dost commit more than one, without another Certificate, Shamino the Anarch's justice will be swift!\"");
					var000F = Func099B(AVATAR, 0x0001, 0x031D, 0x00BB, FRAME_ANY, true, true);
					gflags[GOT_CRIME_CERTIFICATE] = true;
				} else {
					say("\"I did give thee the Crime Certificate already!\"");
				}
				fallthrough;

			case "bye":
				UI_remove_npc_face0();
				Func097F(AVATAR, "@Goodbye!@", 0x0000);
				Func097F(JULIA, "@Do not make trouble!@", 0x0002);
				Func08FF();
				break;
		}
	}
}

extern var Func0953 0x953 ();
extern var Func097D 0x97D (var var0000, var var0001, var var0002, var var0003, var var0004);
extern void Func07D1 object#(0x7D1) ();
extern void Func097F 0x97F (var var0000, var var0001, var var0002);
extern void Func084B 0x84B ();
extern void Func08FF 0x8FF ();

void Func0418 object#(0x418) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;
	var var0008;
	var var0009;

	var0000 = UI_is_pc_female();
	var0001 = Func0953();
	var0002 = "Mundane";
	var0003 = Func097D(PARTY, 0x0001, 0x02A5, QUALITY_ANY, 0x0000);
	if (Func097D(PARTY, 0x0001, 0x0268, QUALITY_ANY, 0x0010)) {
		var0004 = true;
	}
	if (gflags[HAVE_NEW_SPELLBOOK]) {
		var0002 = "Mage";
	}
	var0005 = Func097D(PARTY, 0x0001, 0x034A, QUALITY_ANY, 0x000F);
	var0006 = UI_part_of_day();
	if ((var0006 > EARLY) || (var0006 < EVENING)) {
		var0006 = "day";
	} else {
		var0006 = "evening";
	}
	if ((event == DEATH) && get_item_flag(SI_TOURNAMENT)) {
		var0007 = script item {
			nohalt;
			call Func0329;
		};
	}
	if (event == DOUBLECLICK) {
		AVATAR->item_say("Hello there.");
		MELINO->Func07D1();
		Func097F(MELINO, (("@Greetings, " + var0002) + "."), 0x0002);
		MELINO->set_schedule_type(TALK);
	}
	if (event == STARTED_TALKING) {
		MELINO->run_schedule();
		MELINO->clear_item_say();
		MELINO->show_npc_face0(0x0000);
		if (!gflags[HAVE_NEW_SPELLBOOK]) {
			say("\"I am sorry, but thou hast mistaken me for someone else. Thou couldst not possibly be speaking to me, as I am a Mage... and thou art merely Mundane.\"");
			Func097F(MELINO, "@Such impudence!@", 0x0000);
			abort;
		}
		if (gflags[MELINO_HATES_AVATAR] == true) {
			say("\"I shall never speak to thee again!\"");
			Func097F(MELINO, "@Never!@", 0x0000);
			abort;
		}
		var0008 = MELINO->get_item_flag(MET);
		if (var0008 == false) {
			MELINO->set_item_flag(MET);
			say("\"I do not believe that we have met. 'Tis so nice to make the acquaintance of a new, young Mage.\"");
			say("\"I am Melino, husband of the Green Enchantress.\"");
			add(["new Mage", "Green Enchantress"]);
		} else {
			say("\"Welcome, Mage. I am pleased to see thee again.\"");
		}
		if (gflags[KNOW_ABOUT_MOSH] && (!gflags[AVATAR_BELIEVES_MOSH])) {
			add("Mosh");
		}
		if (var0004 && (!gflags[KNOWS_ICEWINE_ORIGIN])) {
			add("wine");
		}
		if (gflags[HAS_CLUE_LAB_APPARATUS] && (!gflags[KNOWS_LAB_APPARATUS_OWNER])) {
			add("apparatus");
		}
		if (var0005) {
			add("Stoneheart");
		}
		if (var0003) {
			add("Moonsilk stockings");
		}
		if (MELINO->get_schedule_type() == WANDER) {
			add("spells");
		}
		converse (["bye"]) {
			case "new Mage" (remove):
				say("\"Of course thou art new here! I know all other Mages in Moonshade... And I have never seen thee before.\"");
				say("\"And thou hast thy spellbook, so thou art not a Mundane. Therefore, thou art a Mage.\"");
				say("\"By careful reasoning then, thou art a new Mage!\"");
				say("\"But I cannot recall having seen thee in Fedabiblio's training... But then I do not usually take much note of the novices.\"");
				add(["other Mages", "Mundane", "Fedabiblio"]);
				fallthrough;

			case "other Mages" (remove):
				if (!gflags[CAUGHT_WITH_FRIGIDAZZI]) {
					say("\"While I am far too busy to sit on the Council, I am well-connected, nonetheless. Many Mages come to consult me during their research.\"");
				} else {
					say("\"I have always been well-connected -- even before I took a seat on the Council. Many Mages come to consult me during their research.\"");
				}
				add(["Council", "research"]);
				fallthrough;

			case "Council" (remove):
				UI_push_answers();
				add("change subject");
				if (!gflags[CAUGHT_WITH_FRIGIDAZZI]) {
					say("\"The Council of Mages is the ruling body of Moonshade. To be asked to take a seat on the Council is a great honor, but I had to turn it down...\"");
					say("\"The current members are Mortegro, Gustacio, and Filbercio... of course.\"");
					add(["Mortegro", "Gustacio", "Filbercio"]);
				} else {
					say("\"The Council of Mages is the ruling body of Moonshade. I did not wish to accept a seat on the Council, but Columna persuaded me...\"");
					say("\"The other members are Gustacio and Filbercio, of course...\"");
					add(["Gustacio", "Filbercio"]);
				}
				fallthrough;

			case "Mortegro" (remove):
				if (!gflags[CAUGHT_WITH_FRIGIDAZZI]) {
					say("\"Mortegro is the local necromancer. He specializes in speaking with the dead, not raising them. Which is just as well, as the Council frowns on such exercises.\"");
					say("\"Why raise the dead for servants when thou hast Mundanes for servants, after all? And we have no need of another Vasculio, that is clear.\"");
					add("Vasculio");
				} else {
					say("\"Mortegro was the local necromancer. He specialized in speaking with the dead, not raising them...\"");
					say("\"Or at least that is what we all thought until he disappeared. Perhaps we have been harboring another Vasculio all this time.\"");
					add(["disappeared", "Vasculio"]);
				}
				fallthrough;

			case "Vasculio" (remove):
				say("\"Do not speak his name aloud again! I am not superstitious, mind thee... But there are those that say that calling a spirit three times by name will summon it. I would rather not find out, if thou dost not mind.\"");
				say("\"The unnamed one was an Adept who hungered for power at any cost. When he could not gain enough to suit him by normal means... he resorted to foul deeds to obtain more.\"");
				say("\"Though he was put to death for his crimes, he broke free from the grave... vowing vengeance upon us all. That is why the Council carefully monitors all research to this day.\"");
				fallthrough;

			case "disappeared" (remove):
				say("\"Gone! In a trice! No word to anyone...\"");
				say("\"Gustacio is mightily peeved, I can tell thee. Mortegro was helping him with an experiment, and Gustacio cannot complete his work alone.\"");
				add("experiment");
				fallthrough;

			case "experiment" (remove):
				say("\"I believe that the experiment had something to do with the teleport storms. Thou wouldst have to speak to Gustacio for more information, though.\"");
				fallthrough;

			case "Gustacio" (remove):
				say("\"Gustacio's specialty lies in manipulating the weather. He spends most of his days sitting and staring at the sky... I can never tell if he is collecting data or catching a few winks!\"");
				fallthrough;

			case "Filbercio" (remove):
				say("\"Filbercio is the MageLord, which is probably the safest place to keep him. Thou mayest think that doth sound ridiculous, but 'tis one of the only ways we Mages can be assured of what he is doing. As long as Filbercio thinks he doth have power, he is too busy using it to satisfy his hungers to be causing too much trouble. On the other hand, if Filbercio did not think he had power, he would devote all his being to ruining everyone else to procure power.\"");
				add(["hungers", "trouble"]);
				fallthrough;

			case "hungers" (remove):
				say("\"The only polite thing I can think of to say is that Filbercio enjoys the company of women... And that he tires of his pursuits soon after he hath won them.\"");
				fallthrough;

			case "trouble" (remove):
				say("\"Filbercio's true forte lies in playing all sides against each other. He is very subtle in creating the right illusion in which to trap his prey... It always looks enticing, until it flares in thy face. And usually very publicly, too.\"");
				fallthrough;

			case "research" (remove):
				UI_push_answers();
				add("change subject");
				say("\"I seem to have a talent for discovering forgotten references within the archives. Such information can prove to be the key to a new spell or new aspect of an existing spell.\"");
				say("\"For instance, Torrissio hath been paying me outrageous sums to deliver a list of reagents for a certain set of spells. I will not rest until I can justify his faith in me...\"");
				say("\"Luckily, Columna hath been very understanding of the time I devote to my work.\"");
				add("Torrissio");
				fallthrough;

			case "Torrissio" (remove):
				say("\"Torrissio is a very talented young Mage. His specialty is the creation of the automatons that serve as servants and guards for our mansions.\"");
				say("\"He hath a fine eye for detail, even for such menial creatures as servants. Thou mayest see his best work at the Blue Boar -- where he lets Rocco display Petra for him.\"");
				add(["Blue Boar", "Rocco", "Petra"]);
				fallthrough;

			case "Blue Boar" (remove):
				say("\"The Blue Boar is the only eating establishment in Moonshade. Therefore, it caters to both Mage and Mundane, unfortunately. Thou mayest meet many other Mages there, if thou art patient enough.\"");
				fallthrough;

			case "Rocco" (remove):
				say("\"Rocco is the Mundane innkeeper of the Blue Boar. He is a bit of a surly lout. But then I do not go there for his conversation... only his food.\"");
				say("\"His business hath certainly benefitted from Petra's skills. Petra is one of the finest cooks in the city.\"");
				fallthrough;

			case "Petra" (remove):
				say("\"Petra is one of Torrissio's creations. She is very pretty, for an automaton, and cooks very well. Sometimes I think that Torrissio is as much an artisan as a Mage.\"");
				say("\"I think that Petra's presence at the Blue Boar doth do much for Torrissio's reputation...\"");
				fallthrough;

			case "Mundane" (remove):
				say("\"One who doth not possess magic -- that is a Mundane. Without magic, man is little more than a slightly evolved animal. Suited only to be a beast of burden for those whose powers are clearly superior.\"");
				say("\"I know nothing about them, nor do I care to. What use is it to note such furtive little lives that pass so quickly and with so little note?\"");
				say("\"Only from time to time hath one caught mine eye... Like that striking young woman that came through here a while ago.\"");
				add("young woman");
				fallthrough;

			case "young woman" (remove):
				say("\"To be fair, Columna noticed her first... But then my wife always hath had a fancy for music. And this young woman was singing some sort of ballad about her beloved husband.\"");
				say("\"I found it a bit tedious, but Columna was enchanted... so to speak. However, when we spoke to her, she seemed intelligent enough for a Mundane.\"");
				say("\"She was asking all sorts of questions about history and such like. -- Her name? Let me see... I believe it was Gwenno. -- Columna directed her to Fedabiblio.\"");
				fallthrough;

			case "Fedabiblio" (remove):
				say("\"Fedabiblio is the instructor of all novice Mages. He provides a solid foundation for the principles of magic. And then he passes the students on to the Adepts for more specialized training.\"");
				say("\"Of course, at one time all Mages were taught by the Mad Mage. But not any more... Though the tradition of stealing something from him to prove that thou art indeed worthy of a title above novice remains.\"");
				say("\"I doubt that he doth have any Serpent Teeth left to steal, so thou wilt have to make do with something else I suspect.\"");
				add(["Mad Mage", "Serpent Teeth"]);
				fallthrough;

			case "Mad Mage" (remove):
				say("\"I suppose that it would be polite to refer to him by his name... Erstam. But I am an Adept, and have long since outstripped anything he had to teach me.\"");
				say("\"He dreams of becoming a god, and refuses to see his students as his equal. In truth, the Mad Mage is a doddering old man squatting on his island... Afraid of the students that surpassed him and the long march of time that his spells have cheated.\"");
				fallthrough;

			case "Serpent Teeth" (remove):
				say("\"The Mad Mage had a peculiar collection of Serpent's Teeth. Nearly every Adept in the city doth have one that they stole from the old man. It was a juvenile prank I suppose, like tweaking a dragon's beard. But it hath become a tradition, nonetheless.\"");
				say("\"I would show thee one, so that thou wouldst know what to take, but I am afraid that I seem to have lost mine. I cannot recall when I last saw it...\"");
				say("\"Perhaps Columna would show thee her Serpent Tooth. I know that she possesses it.\"");
				fallthrough;

			case "Green Enchantress" (remove):
				say("\"Thou dost not know the Green Enchantress? Ah, perhaps thou wouldst recognize her by the spell she is famous for... Columna's Intuition.\"");
				add(["famous", "Columna's Intuition"]);
				fallthrough;

			case "famous" (remove):
				say("\"No other Mage doth have a spell named after them... Of course she is famous! Why everyone agrees how remarkably useful it is!\"");
				fallthrough;

			case "Columna's Intuition" (remove):
				say("\"Columna is the Green Enchantress' name. And thou wouldst be amazed by her spell...\"");
				say("\"It tells thee of anything hidden and potentially dangerous in the area. It doth not guarantee that what it finds is dangerous, but it doth warn thee.\"");
				fallthrough;

			case "Mosh" (remove):
				say("\"She said terrible things about my wife! Terrible! All lies! Lies!\"");
				var0009 = true;
				fallthrough;

			case "wine" (remove):
				say("\"Why, that is wine from the Rangers' winery! Their magical winepress always leaves a distinctive flavor... Quite a tingle!\"");
				gflags[KNOWS_ICEWINE_ORIGIN] = true;
				fallthrough;

			case "apparatus" (remove):
				say("\"Any Mage could tell thee that this is a piece of lab equipment!\"");
				say("\"I am missing nothing... 'tis not mine. Thou wilt have to ask others about it.\"");
				fallthrough;

			case "slippers" (remove):
				say("\"What dost thou take me for, a Mundane?!\"");
				say("\"One merely has to glance at these pitiful things to know that they would belong to no self-respecting Mage! Ask a Mundane or a shopkeeper, indeed!\"");
				gflags[HAS_CLUE_SLIPPERS] = true;
				fallthrough;

			case "Stoneheart" (remove):
				say("\"I will tell thee that possession of Stoneheart is forbidden in Moonshade. I have no idea where thou didst come by it, nor do I want to know.\"");
				say("\"Thou canst find other spells without resorting to those that are restricted.\"");
				add(["spells", "restricted"]);
				fallthrough;

			case "spells":
				say("\"I could sell thee several spells, Mage...\"");
				Func084B();
				fallthrough;

			case "restricted" (remove):
				say("\"'Tis true that there are spells that require Stoneheart for a reagent, but they are very dangerous. Only a select few Mages are allowed such knowledge... So that it will not be lost.\"");
				fallthrough;

			case "Moonsilk stockings" (remove):
				say("\"Those are my wife's stockings! Oh, vile fiend! To think that thou wouldst flaunt Columna's indiscretion in my face! After I trusted thee!\"");
				say("\"Out! OUT! Take thyself from my sight and never return!\"");
				gflags[MELINO_HATES_AVATAR] = true;
				UI_remove_npc_face0();
				Func097F(MELINO, "@Never return!@", 0x0002);
				break;

			case "change subject":
				say("\"Certainly...\"");
				UI_pop_answers();
				fallthrough;

			case "bye":
				UI_remove_npc_face0();
				Func097F(AVATAR, "@I must be leaving...@", 0x0000);
				Func097F(MELINO, "@Farewell!@", 0x0002);
				Func08FF();
				break;
		}
	}
}

extern void Func0809 0x809 ();
extern var Func0954 0x954 ();
extern var Func0953 0x953 ();
extern void Func097F 0x97F (var var0000, var var0001, var var0002);
extern var Func099B 0x99B (var var0000, var var0001, var var0002, var var0003, var var0004, var var0005, var var0006);

void Func0419 object#(0x419) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;

	if (get_item_flag(SI_ZOMBIE)) {
		Func0809();
		abort;
	}
	var0000 = Func0954();
	var0001 = UI_is_pc_female();
	var0002 = Func0953();
	if (event == DOUBLECLICK) {
		AVATAR->item_say("@Excuse me...@");
		Func097F(AUTO_MESSENGER, (("@At thy service, " + var0000) + "!@"), 0x0002);
		AUTO_MESSENGER->set_schedule_type(TALK);
	}
	if (event == PROXIMITY) {
		var0003 = UI_get_random(0x0006);
		if (var0003 == 0x0001) {
			AUTO_MESSENGER->item_say("@Please leave...@");
		}
		if (var0003 == 0x0002) {
			AUTO_MESSENGER->item_say("@Rangers!@");
		}
		if (var0003 == 0x0003) {
			AUTO_MESSENGER->item_say("@Leave!@");
		}
		if (var0003 == 0x0004) {
			AUTO_MESSENGER->item_say("@Beware!@");
		}
		if (var0003 == 0x0005) {
			AUTO_MESSENGER->item_say("@Do not touch that!@");
		}
		if (var0003 == 0x0006) {
			AUTO_MESSENGER->item_say("@Go quickly!@");
		}
	}
	if (event == STARTED_TALKING) {
		AUTO_MESSENGER->run_schedule();
		AUTO_MESSENGER->clear_item_say();
		AUTOMATON_FACE->show_npc_face0(0x0000);
		if (!gflags[SCROLL_SPEAKS]) {
			if (gflags[HAVE_TALKING_SCROLL]) {
				say("\"Again we meet, ",
					var0000,
					". My mistress hath dispatched me to see if thou hast yet read the scroll she sent?\"");
			} else {
				say("\"Pardon, ",
					var0000,
					". I bring thee greetings from my mistress, the sorceress Rotoluncia. This scroll is from her.\"");
				var0004 = Func099B(AVATAR, 0x0001, 0x02C3, 0x001F, 0x0006, 0x0012, true);
				gflags[HAVE_TALKING_SCROLL] = true;
			}
			add(["Rotoluncia", "scroll", "servant"]);
		} else {
			var0005 = get_object_position();
			if ((var0005[0x0001] < 0x09C2) && ((var0005[0x0001] > 0x0992) && ((var0005[0x0002] < 0x0750) && (var0005[0x0002] > 0x0700)))) {
				say("\"This is the manor of the Enchantress Rotoluncia! Thou canst not enter without permission!\"");
				add(["Rotoluncia"]);
				if (gflags[KNOWS_ROTOLUNCIA_IS_KIDNAPPER]) {
					add(["kidnap", "Where is she?"]);
				}
			} else {
				say("\"I must be about my duties.\"");
				Func097F(item, "@Pardom me...@", 0x0000);
				set_schedule_type(WANDER);
				abort;
			}
		}
		converse ("bye") {
			case "Rotoluncia" (remove):
				say("\"My mistress commands many powerful and strange magics, and sits upon the Council of Mages.\"");
				if (!gflags[KNOWS_ROTOLUNCIA_IS_KIDNAPPER]) {
					say("\"She is terrible to her enemies, but tolerant of those who aid her.\"");
				} else {
					say("\"As thou now knowest, she is most terrible to those who do not bend to her will.\"");
				}
				fallthrough;

			case "kidnap" (remove):
				say("\"I am forbidden to discuss this subject with thee!\"");
				var0006 = true;
				fallthrough;

			case "Where is she?" (remove):
				say("\"I must not tell! In fact, thou shouldst leave here at once.\"");
				var0006 = true;
				fallthrough;

			case "scroll":
				say("\"'Tis not an ordinary scroll, but one of the magical variety. I assure thee that it is entirely free of harmful magic.\"");
				remove("scroll");
				fallthrough;

			case "servant":
				say("\"The Mages of Moonshade are quite powerful, and have found the way to acquire servants such as myself.\"");
				say("\"My mistress says that automatons are more trustworthy, since we can neither be corrupted nor tortured.\"");
				remove("servant");
				fallthrough;

			case "bye":
				if (gflags[KNOWS_ROTOLUNCIA_IS_KIDNAPPER]) {
					gflags[AUTOMATON_SPOKE_ABOUT_KIDNAP] = true;
				}
				if ((!gflags[SCROLL_SPEAKS]) && (!gflags[KNOWS_ROTOLUNCIA_IS_KIDNAPPER])) {
					UI_remove_npc_face0();
					Func097F(AVATAR, "@Good day.@", 0x0000);
					Func097F(AUTO_MESSENGER, "@Do not forget the scroll.@", 0x0002);
				} else if (gflags[KNOWS_ROTOLUNCIA_IS_KIDNAPPER] && var0006) {
					say("\"Thou dost look at me oddly... I think I have said too much!\"");
					say("\"Now I must kill thee...\"");
					AUTO_MESSENGER->set_alignment(CHAOTIC);
					Func097F(AUTO_MESSENGER, "@Must kill!@", 0x0000);
					AUTO_MESSENGER->set_schedule_type(IN_COMBAT);
					AVATAR->set_oppressor(AUTO_MESSENGER);
					abort;
				} else {
					say("\"If thou dost not leave quickly, I must call the Rangers!\"");
					AUTO_MESSENGER->set_schedule_type(TEND_SHOP);
				}
				break;
		}
	}
	if ((event == DEATH) && get_item_flag(SI_TOURNAMENT)) {
		if (gflags[KNOWS_ROTOLUNCIA_IS_KIDNAPPER] && (!ROTOLUNCIA->get_item_flag(DEAD))) {
			AUTOMATON_FACE->show_npc_face0(0x0000);
			say("\"Rotoluncia shall avenge my loss...\"");
			gflags[AUTOMATON_SPOKE_ABOUT_KIDNAP] = true;
			ROTOLUNCIA->set_alignment(CHAOTIC);
			UI_remove_npc_face0();
		}
		AUTO_MESSENGER->clear_item_flag(SI_TOURNAMENT);
		AUTO_MESSENGER->reduce_health(0x0037, NORMAL_DAMAGE);
	}
}

extern var Func0954 0x954 ();
extern var Func0953 0x953 ();
extern var Func0994 0x994 ();
extern var Func097D 0x97D (var var0000, var var0001, var var0002, var var0003, var var0004);
extern void Func07D1 object#(0x7D1) ();
extern void Func07D2 object#(0x7D2) ();
extern void Func097F 0x97F (var var0000, var var0001, var var0002);
extern var Func099B 0x99B (var var0000, var var0001, var var0002, var var0003, var var0004, var var0005, var var0006);
extern var Func0955 0x955 ();
extern var Func0992 0x992 (var var0000, var var0001, var var0002, var var0003);
extern var Func09A0 0x9A0 (var var0000, var var0001);
extern void Func094F 0x94F (var var0000, var var0001);
extern void Func084F 0x84F ();
extern void Func08FF 0x8FF ();

void Func041A object#(0x41A) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;
	var var0008;
	var var0009;
	var var000A;
	var var000B;
	var var000C;
	var var000D;

	var0000 = Func0954();
	var0001 = UI_is_pc_female();
	var0002 = Func0953();
	var0003 = Func0994();
	var0004 = Func097D(PARTY, 0x0001, 0x024B, 0x0000, 0x0005);
	var0005 = Func097D(PARTY, 0x0001, 0x031A, 0x0000, 0x0000);
	if ((event == DEATH) && get_item_flag(SI_TOURNAMENT)) {
		var0006 = script item {
			nohalt;
			call Func0329;
		};
	}
	if ((event == SCRIPTED) && ((var0003 == 0x0016) && (!gflags[AVATAR_FREED_MORTEGRO]))) {
		event = STARTED_TALKING;
	}
	if (event == DOUBLECLICK) {
		AVATAR->item_say("@Ho, mage!@");
		MORTEGRO->Func07D1();
		var0006 = find_nearby(0x0366, 0x0014, MASK_NONE);
		for (var0009 in var0006 with var0007 to var0008) {
			if (var0009->get_item_quality() == 0x00B5) {
				gflags[AVATAR_FREED_MORTEGRO] = true;
			}
		}
		if ((var0003 == 0x0016) && (!gflags[AVATAR_FREED_MORTEGRO])) {
			item->Func07D2();
			Func097F(MORTEGRO, "@Help!", 0x0002);
			var0006 = script MORTEGRO after 7 ticks {
				nohalt;
				call Func041A;
			};
		} else {
			Func097F(MORTEGRO, "@What dost thou wish?@", 0x0005);
			MORTEGRO->set_schedule_type(TALK);
		}
	}
	if (event == PROXIMITY) {
		if ((var0003 == 0x0016) && (!gflags[AVATAR_FREED_MORTEGRO])) {
			var000A = UI_get_random(0x0006);
			if (var000A == 0x0001) {
				MORTEGRO->item_say("@Another spell failed!@");
			}
			if (var000A == 0x0002) {
				MORTEGRO->item_say("@Help! Someone help me!@");
			}
			if (var000A == 0x0003) {
				MORTEGRO->item_say("@Lower the drawbridge!@");
			}
			if (var000A == 0x0004) {
				MORTEGRO->item_say("@Release me, please!@");
			}
			if (var000A == 0x0005) {
				MORTEGRO->item_say("@Why will my spells not work?@");
			}
			if (var000A == 0x0006) {
				MORTEGRO->item_say("@How did I arrive here?@");
			}
		} else {
			var000A = UI_get_random(0x0006);
			if (var000A == 0x0001) {
				MORTEGRO->item_say("@How shall I return home?@");
			}
			if (var000A == 0x0002) {
				MORTEGRO->item_say("@I am so lost...@");
			}
			if (var000A == 0x0003) {
				MORTEGRO->item_say("@Where am I?@");
			}
			if (var000A == 0x0004) {
				MORTEGRO->item_say("@How did I arrive here?@");
			}
			if (var000A == 0x0005) {
				MORTEGRO->item_say("@I am so cold...@");
				MORTEGRO->set_schedule_type(DANCE);
			}
			if (var000A == 0x0006) {
				MORTEGRO->item_say("@Perhaps this direction...@");
				MORTEGRO->set_schedule_type(PACE_HORIZONTAL);
			}
		}
	}
	if (event == STARTED_TALKING) {
		MORTEGRO->clear_item_say();
		if (MORTEGRO->get_item_flag(IN_PARTY)) {
			MORTEGRO->set_schedule_type(FOLLOW_AVATAR);
			add("leave");
		} else {
			MORTEGRO->run_schedule();
		}
		MORTEGRO->show_npc_face0(0x0000);
		var000B = MORTEGRO->get_item_flag(MET);
		if ((gflags[AVATAR_FREED_MORTEGRO] == true) && (!gflags[MORTEGRO_THANKED_AVATAR])) {
			gflags[MORTEGRO_THANKED_AVATAR] = true;
			say("\"Many thanks, ",
				var0002,
				". Now I shall reward thee, as promised!\"");
			say("\"I shall give thee a scroll, which contains the spell of Shade Summoning. Thou wouldst be wise to copy it to thy spellbook at the first opportunity.\"");
			say("\"Here it is.\"");
			var0006 = Func099B(AVATAR, 0x0001, 0x02CB, 0x0026, 0x0000, 0x0000, true);
		} else if ((var0003 == 0x0016) && (!gflags[AVATAR_FREED_MORTEGRO])) {
			if (gflags[AVATAR_REFUSED_MORTEGRO] == true) {
				say("\"Thou hast returned! Wilt thou release me from this forsaken island?\"");
				if (Func0955() == true) {
					say("\"Wonderful!\"");
					say("\"Perhaps if thou dost search the building, thou wilt find a way to lower the drawbridge...\"");
				} else {
					say("\"Suit thyself...\"");
					say("\"Perhaps I can find another way to escape before I starve to death.\"");
					gflags[AVATAR_REFUSED_MORTEGRO] = true;
					MORTEGRO->set_schedule_type(SHY);
					Func097F(MORTEGRO, "@So cold...@", 0x0000);
					abort;
				}
			} else {
				if (var000B == false) {
					say("\"Excuse me, ",
						var0000,
						"! My name is Mortegro, mage of Moonshade.\"");
					MORTEGRO->set_item_flag(MET);
				} else {
					say("\"Avatar! I am glad to see thee!\"");
				}
				say("\"I was caught in one of those bizarre storms, and seem to be trapped here on this island. If thou wouldst be so kind as to help me free of this place I would be willing to teach thee a spell or two... Or provide thee with a suitable spell scroll if thou art unable to handle spells of such a level.\"");
			}
			add(["trapped", "spell"]);
		} else if (var000B == false) {
			say("\"Hello, there! I am Mortegro, the Necromage of Moonshade.\"");
			MORTEGRO->set_item_flag(MET);
		} else {
			say("\"Hello once again, ",
				var0002,
				".\"");
		}
		if (gflags[HAS_CLUE_LAB_APPARATUS] && (!gflags[KNOWS_LAB_APPARATUS_OWNER])) {
			add("apparatus");
		}
		if (gflags[HAS_BAD_CLUE_SLIPPERS] && (!gflags[KNOWS_SLIPPERS_OWNER])) {
			add("slippers");
		}
		if (gflags[HAS_CLUE_BLOODY_HAND] && (!gflags[KNOWS_SEVERED_HAND_OWNER])) {
			add("the bloody hand");
		}
		if (var0003 == 0x000E) {
			add("Moonshade");
		}
		if (gflags[KNOWS_ABOUT_SEANCE]) {
			add("seance");
		}
		if (gflags[MORTEGRO_KIDNAP_SUSPECT] && (!ROTOLUNCIA->get_item_flag(DEAD))) {
			add("accuse");
		}
		add(["Necromage", "learn spells"]);
		converse ("bye") {
			case "apparatus" (remove):
				if (Func097D(PARTY, 0x0001, 0x02ED, QUALITY_ANY, 0x0001)) {
					say("\"It is some Mage's lab apparatus, ",
						var0000,
						". I regret that I cannot be of help to thee. It is not a design I recognize. Thou shalt have to ask another Mage.\"");
				} else {
					say("\"It sounds like it is some Mage's lab apparatus, ",
						var0000,
						". I regret that I cannot be of help to thee. It is not a design I recognize. Thou shalt have to ask another Mage.\"");
				}
				fallthrough;

			case "slippers" (remove):
				if (var0004) {
					say("\"Those slippers look most comfortable. They must belong in a place of comfort. The most comfortable place I know is the Inn of the Sleeping Bull. Perhaps that is where they are from.\"");
				} else {
					say("\"Perhaps if I could see the slippers I could tell thee more about them...\"");
				}
				fallthrough;

			case "the bloody hand" (remove):
				if (var0005) {
					say("\"This is obviously the handiwork of a powerful mage. And there is only one who would produce something as vile as this. The Mad Mage! I can say no more of this.\"");
				} else {
					say("\"Art thou absolutely certain that this thing was a living severed hand? I doubt it is so. Perhaps if thou didst have it to show to me...\"");
				}
				fallthrough;

			case "accuse" (remove):
				say("\"So! Thou dost suspect me of kidnapping thy friend!\"");
				say("\"Mine interest lies with dead beings, not with living persons. I do not have thy friend, nor do I know who doth have him.\"");
				say("\"Thine impudence is beyond belief! Always, 'tis the superstitious and the jealous who persecute the Necromancer...\"");
				var000C = MORTEGRO->get_object_position();
				UI_sprite_effect(ANIMATION_TELEPORT2, var000C[0x0001], var000C[0x0002], 0x0000, 0x0000, 0x0000, LOOP_ONCE);
				UI_play_sound_effect(0x0082);
				MORTEGRO->move_object([0x046E, 0x0985, 0x0000]);
				var0006 = Func0992(0x0001, "@Where did he go?@", "@Shazzam!@", true);
				abort;

			case "leave" (remove):
				say("\"But thou didst promise to bring me home to Moonshade! A promise is a promise, ",
					var0000,
					".\"");
				fallthrough;

			case "Necromage" (remove):
				say("\"Yes, that is a special sort of mage who specializes in magics that deal with dead things, as well as with the spirits of the dead themselves.\"");
				add(["dead things", "spirits of dead"]);
				fallthrough;

			case "dead things" (remove):
				say("\"Actually, that is rather unpleasant work. A bit discourteous to talk about it in mixed company, if thou dost know what I mean.\"");
				fallthrough;

			case "spirits of dead" (remove):
				say("\"Yes, as a Necromage I can commune with the spirits of the dead. I learn the secrets of the dead as well as the occasional portent of the future. But these seances are unpredictable in their results.\"");
				if (!gflags[KNOWS_ABOUT_SEANCE]) {
					gflags[KNOWS_ABOUT_SEANCE] = true;
					add("seance");
				}
				fallthrough;

			case "Moonshade" (remove):
				say("\"It is a city of Mages, run by Mages and that is the way we mages like it. We are even governed by our own Council of Mages, chaired by Filbercio, Gustacio and Rotoluncia.\"");
				add(["Filbercio", "Gustacio", "Rotoluncia"]);
				fallthrough;

			case "Filbercio" (remove):
				say("\"He is the supreme MageLord of the city of Moonshade.\"");
				fallthrough;

			case "Gustacio" (remove):
				say("\"Gustacio and I are engaged in studies of the strange teleport storms that have been afflicting our land.\"");
				fallthrough;

			case "Rotoluncia" (remove):
				say("\"She is a powerful mage. Her only real weakness is that she is most unpleasant when she is thwarted in her desires.\"");
				fallthrough;

			case "seance" (remove):
				if (MORTEGRO->get_schedule_type() == LAB) {
					if ((UI_get_timer(0x0006) < 0x000C) && gflags[SEANCE_CHRISTOPHER]) {
						say("\"Speaking with the spirits of the dead doth fatigue me. We must wait another day before I can muster the energies required.\"");
					} else {
						UI_set_timer(0x0006);
						UI_play_music(0x0038, Func09A0(0x0005, 0x0001));
						say("\"It is time for the seance to begin. I have already prepared all of the elaborate reagents and incantations necessary to open my mind, as a portal through which the spirits of the dead may speak. What thou shalt see are not dreams or hallucinations, but actual ghosts who will join with us in communion. Do not be afraid.\"");
						say("\"I summon you, ghosts! Come join us here and speak with us. Share with us thy visions of this world and the next.\"");
						if (!gflags[SEANCE_CHRISTOPHER]) {
							SMITHZHORSE->show_npc_face1(0x0000);
							say("\"I have heard thy call, Mortegro! In life I was Christopher, blacksmith of Trinsic. My time here is short and I wish to have words with the one who is called the Avatar.\"");
							say("\"Avatar, I thank thee for protecting my son and for breaking The Fellowship's evil grip over Britannia. But I also bring thee a warning. Many are the spirits in this realm who await thee, and there is but one thing on their mind -- to have their revenge against thee! There is one thing... that thou must... always... remember...\"");
							UI_remove_npc_face1();
							0x0000->set_conversation_slot();
							say("\"Oh! I have lost contact with the spirit! Forgive me, but with a contact that intense, the length of time that I can maintain is always shorter.\"");
							gflags[SEANCE_CHRISTOPHER] = true;
						} else if (IOLO->npc_nearby() && (!gflags[SEANCE_GWENNO])) {
							SMITHZHORSE->show_npc_face1(0x0001);
							say("\"My darling husband, Iolo, although I am dead I must tell thee that my love for thee shall never die. Always remember me. Farewell.\"");
							UI_remove_npc_face1();
							0x0000->set_conversation_slot();
							say("\"I have lost the contact -- there are strange forces connected with this spirit!\"");
							IOLO->show_npc_face1(0x0000);
							say("\"No! It cannot be true! She cannot be dead! I refuse to believe it!\"");
							var0006 = "@Gwenno!@" & "@Come back to me!@";
							Func094F(IOLO, var0006);
							Func097F(MORTEGRO, "@Spirits do not lie.@", 0x0005);
							gflags[SEANCE_GWENNO] = true;
							abort;
						} else {
							MORTEGRO->show_npc_face0(0x0000);
							say("\"Once again I call out to the spirit of Edrin, brother of Kane. If thou canst hear me, Edrin, please contact us. Thy brother Kane dost need to know if thou hast perished. Thou hast been missing for so long that even thy brother dost think that he shall never see thee again. If thou canst hear my words, please contact us.\"");
							var000D = Func0992(0x0001, "@There seems to be no reply.@", "@There is no reply.@", false);
							0x0000->set_conversation_slot();
							say("\"This is a favorable sign for Kane. It may well mean that his brother is not in the realm of ghosts.\"");
						}
					}
				} else if (gflags[CAUGHT_WITH_FRIGIDAZZI]) {
					say("\"Ahem, once I have gotten back to Moonshade I will be glad to oblige thee.\"");
				} else {
					say("\"I must first prepare the proper materials. Thou shouldst come to my manor after midnight, and we shall then conjure spectres.\"");
				}
				fallthrough;

			case "trapped" (remove):
				say("\"Well, I hesitate to admit that an Adept such as myself could be caught in such a manner... But none of my magics have worked to free me from this island.\"");
				add("magics");
				fallthrough;

			case "magics" (remove):
				say("\"Although I am not an expert in it, I can do simple teleports and fetches. But nothing I have tried has worked. I think, perhaps, that this is a null magic area.\"");
				add("null magic area");
				fallthrough;

			case "null magic area" (remove):
				say("\"There are such areas where magic cannot be used. I think that this... place... may be one of them.\" *\"Or, perhaps, common magic --  if thou wilt -- cannot function here. Whatever the case, I cannot escape by magical means.\"");
				fallthrough;

			case "learn spells" (remove):
				if (gflags[CAUGHT_WITH_FRIGIDAZZI] && (!gflags[AVATAR_FREED_MORTEGRO])) {
					say("\"How can I concentrate on teaching thee spells when I am freezing to death by the moment?\"");
				} else if (gflags[AVATAR_FREED_MORTEGRO] == true) {
					say("\"As thou didst free me, I can offer my spells to thee at a discount. Say, perhaps half the normal price? Yes, that is what I will sell my spells for -- half cost!\"");
					Func084F();
				} else if (gflags[HAVE_NEW_SPELLBOOK]) {
					say("\"I can teach thee spells... for a fee.\"");
					Func084F();
				} else {
					say("\"Thou art not a Mage, so teaching thee spells would be a waste of both our times.\"");
					say("\"If thou art serious about mastering magic, perhaps thou shouldst speak with Master Fedabiblio at the Seminarium.\"");
					say("\"But I think thou art too old to learn spell-casting...\"");
				}
				fallthrough;

			case "spell" (remove):
				say("\"Thou canst consider me a Necromancer, although I do not reanimate the dead. Specifically, I seek information from the dead. Thou wouldst no doubt find the Summon Shade spell useful.\"");
				add(["information", "Summon Shade"]);
				fallthrough;

			case "information" (remove):
				say("\"I am usually commissioned by one of the other mages when they are seeking lost information. I, myself, am not conducting any research at the moment. I was working with Gustacio on an experiment when I suddenly found myself here.\"");
				add("experiment");
				fallthrough;

			case "experiment" (remove):
				say("\"I allowed Gustacio to convince me to help him with his plan to divert the teleportation storms.\"");
				say("\"Perhaps it was not the wisest of things to have done... As I am trapped here and have no idea how to return to Moonshade.\"");
				say("\"I believe I exchanged places with an altar of some sort. I am sure it rather surprised old Gustacio when I disappeared. He is no doubt wondering about whatever is now in his work area.\"");
				add("altar");
				fallthrough;

			case "altar" (remove):
				say("\"Yes, there are marks here on the island that suggest that something was here until recently.\"");
				say("\"Given the architecture, this must be one of the old Serpent temples. So I assume that this may have been where the altar once stood.\"");
				fallthrough;

			case "Summon Shade" (remove):
				say("\"It is quite a handy spell, actually. It allows thee to question the shade of a dead person... As long as thou dost possess some item that the person had valued in life. Of course, it doth have its drawbacks...\"");
				add("drawbacks");
				fallthrough;

			case "drawbacks" (remove):
				say("\"If thou dost summon a shade from its resting place without the appropriate item, the shade may well attack thee. And the spell doth use an inordinate amount of reagents... But thou dost learn such interesting things!\"");
				add("reagents");
				fallthrough;

			case "reagents":
				say("\"It doth require Sulphurous Ash, Blood Moss, Mandrake Root, Nightshade and Spider's Silk. Quite costly, so thou shouldst use this spell sparingly. And remember that thou must have an item belonging to that person to call them forth.\"");
				remove("reagents");
				fallthrough;

			case "bye":
				if (gflags[MORTEGRO_THANKED_AVATAR] && (!MORTEGRO->get_item_flag(IN_PARTY))) {
					say("\"Wouldst thou allow me to accompany thee back to Moonshade? I am afraid that I do not know where I am.\"");
					do {
						if (UI_get_array_size(UI_get_party_list2()) > 0x0004) {
							var000D = Func0992(0x0001, "@We do not have room for another to travel with us, Avatar.@", 0x0000, false);
							continue;
						}
						if (Func0955() == true) {
							say("\"I do not believe I could return home without thy guidance... For all that I am an Adept.\"");
							MORTEGRO->add_to_party();
							Func097F(MORTEGRO, "@Thank thee!@", 0x0000);
							abort;
						}
					} while (false)
					nobreak {
						say("\"Well, perhaps I can find my way home on mine own... I am an Adept, after all.\"");
						Func097F(MORTEGRO, "@What lies this way?@", 0x0000);
						MORTEGRO->set_schedule_type(WANDER);
						abort;
					}
				}
				UI_remove_npc_face0();
				if ((var0003 == 0x0016) && (!gflags[AVATAR_FREED_MORTEGRO])) {
					Func097F(AVATAR, "@Stay calm.@", 0x0000);
					Func097F(MORTEGRO, "@Please help me!@", 0x0005);
				} else {
					Func097F(AVATAR, "@Thanks for thine help.@", 0x0000);
					Func097F(MORTEGRO, (("@Fare thee well, " + var0000) + ".@"), 0x0005);
				}
				if (Func0994() == 0x000E) {
					Func08FF();
				}
				break;
		}
	}
}

extern var Func0954 0x954 ();
extern var Func0953 0x953 ();
extern void Func07D1 object#(0x7D1) ();
extern void Func094F 0x94F (var var0000, var var0001);
extern var Func097D 0x97D (var var0000, var var0001, var var0002, var var0003, var var0004);
extern void Func097F 0x97F (var var0000, var var0001, var var0002);
extern var Func0992 0x992 (var var0000, var var0001, var var0002, var var0003);
extern var Func0955 0x955 ();
extern var Func0956 0x956 (var var0000);
extern var Func099B 0x99B (var var0000, var var0001, var var0002, var var0003, var var0004, var var0005, var var0006);
extern void Func08FF 0x8FF ();

void Func041B object#(0x41B) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;
	var var0008;
	var var0009;
	var var000A;
	var var000B;
	var var000C;
	var var000D;
	var var000E;

	var0000 = Func0954();
	var0001 = UI_is_pc_female();
	var0002 = Func0953();
	if ((event == DEATH) && get_item_flag(SI_TOURNAMENT)) {
		var0003 = script item {
			nohalt;
			call Func0329;
		};
	}
	if (event == DOUBLECLICK) {
		AVATAR->item_say("@Could we speak?@");
		MOSH->Func07D1();
		MOSH->set_schedule_type(TALK);
	}
	if (event == PROXIMITY) {
		var0004 = UI_get_array_size(AVATAR->find_nearby(0x020B, 0x0023, MASK_NONE));
		if (var0004 < 0x000A) {
			var0005 = 0x0000;
			var0006 = UI_get_random(0x0002);
			while (var0005 < var0006) {
				var0005 += 0x0001;
				var0007 = MOSH->get_object_position();
				var0008 = UI_create_new_object2(0x020B, [(var0007[0x0001] - 0x0001), (var0007[0x0002] - 0x0001), var0007[0x0003]]);
				if (var0008) {
					var0008->set_item_flag(TEMPORARY);
					var0008->set_schedule_type(HOUND);
				}
			}
		}
		var0009 = UI_get_random(0x0006);
		if (var0004 > 0x0000) {
			if (var0009 == 0x0001) {
				MOSH->item_say("@Nice rats.@");
			}
			if (var0009 == 0x0002) {
				MOSH->item_say("@Come to mother!@");
			}
			if (var0009 == 0x0003) {
				MOSH->item_say("@Cheese!@");
			}
			if (var0009 == 0x0004) {
				MOSH->item_say("@Here, rats!@");
			}
			if (var0009 == 0x0005) {
				MOSH->item_say("@Now, do not bite me!@");
			}
			if (var0009 == 0x0006) {
				var000A = ["@I am very hungry...@", "@Hmmm...@", "@Do I smell baked fish?@", "@Petra is a marvelous chef...@"];
				Func094F(MOSH, var000A);
			}
		} else {
			if (var0009 == 0x0001) {
				MOSH->item_say("@Where are they?@");
			}
			if (var0009 == 0x0002) {
				MOSH->item_say("@I've lost my rats.@");
			}
			if (var0009 == 0x0003) {
				MOSH->item_say("@Do not bother me.@");
			}
			if (var0009 == 0x0004) {
				MOSH->item_say("@Stay away!@");
			}
			if (var0009 == 0x0005) {
				MOSH->item_say("@Death to cats!@");
			}
			if (var0009 == 0x0006) {
				MOSH->item_say("@Where am I?@");
			}
		}
	}
	if (event == STARTED_TALKING) {
		MOSH->run_schedule();
		MOSH->clear_item_say();
		MOSH->show_npc_face0(0x0000);
		var000B = MOSH->get_item_flag(MET);
		if (var000B == false) {
			MOSH->set_item_flag(MET);
			say("\"So what'rt thou looking at, eh?\"");
		} else if (gflags[AVATAR_BELIEVES_MOSH]) {
			if (Func097D(PARTY, 0x0001, 0x0179, QUALITY_ANY, 0x000D)) {
				say("\"I smell something... thou hast some fish! Thou hast brought it for me! Oh, I do so love a good fish.\"");
				add("give fish");
			} else {
				say("\"Oh, it is my friend! Hast thou brought me something? No, I suppose not...\"");
			}
		} else {
			say("\"Why dost thou not leave me alone?\"");
		}
		add("name");
		if (gflags[COLUMNA_SPOKE_ABOUT_MOSH] && (!gflags[AVATAR_BELIEVES_MOSH])) {
			add("Columna");
		}
		if (gflags[HAS_CLUE_SLIPPERS] && (!gflags[KNOWS_SLIPPERS_OWNER])) {
			add("slippers");
		}
		if (gflags[KNOWS_ROTOLUNCIA_IS_KIDNAPPER] && (!ROTOLUNCIA->get_item_flag(DEAD))) {
			add("kidnap");
		}
		converse (["bye"]) {
			case "kidnap" (remove):
				say("\"Well, do not stare at me like that. I be innocent. They've never convicted me of any crimes...\"");
				Func097F(MOSH, "@Leave me alone!@", 0x0000);
				abort;

			case "name" (remove):
				say("\"What's it to ye? Some call me the Rat Woman, but I'll have ye know that my rightful name is Mosh.\"");
				add(["Rat Woman", "Mosh"]);
				fallthrough;

			case "Mosh" (remove):
				say("\"Aye, Mosh...\"");
				if (gflags[AVATAR_BELIEVES_MOSH]) {
					say("\"..and I am linked by fate to Columna, the Green Enchantress! She is my very own sister.\"");
					add("sister");
				} else {
					say("\"Would that thou wert to believe me, I could tell thee a story! 'Tis done... though not forgotten. I will not talk of it now.\"");
				}
				fallthrough;

			case "sister" (remove):
				say("\"I tell thee that I have a twin. She is Columna! Yet wert thou to see us together, any similarity would be gone.\"");
				say("\"It is she who possesses the youth and beauty I held dear not long ago. But ask whether love passes between us and I will tell thee nay.\"");
				fallthrough;

			case "Rat Woman" (remove):
				say("\"Snigger not at me! I have company enough -- more guests in mine house than thou couldst have in thine.\"");
				say("\"I was a powerful enchantress, in my prime. Before I was cheated of my powers.\"");
				add(["company", "house", "enchantress", "magic", "cheated"]);
				fallthrough;

			case "house" (remove):
				say("\"'Tis not a bad place to live.\"");
				var000C = Func0992(0x0001, "@The sewers not bad? Art thou daft?@", 0x0000, false);
				if (var000C != AVATAR) {
					0x0000->set_conversation_slot();
					say("\"Scowl not at Mosh. Thou knowest nothing of what thou sayest. Each one of us makes of life what we can, whether by fate or the treachery of others. Dost thou see me judging ye?\"");
				} else {
					say("\"Each one of us makes of life what we can, whether by fate or the treachery of others. Dost thou see me judging ye?\"");
				}
				fallthrough;

			case "company" (remove):
				say("\"The rats are my friends. Dost thou not like my companions?\"");
				if (Func0955()) {
					say("\"Good! Then with time, perhaps, we could learn to like thee.\"");
				} else {
					say("\"Then I do not like thee!\"");
					Func097F(MOSH, "@Away from me!@", 0x0000);
					MOSH->set_schedule_type(SHY);
					abort;
				}
				fallthrough;

			case "enchantress" (remove):
				say("\"I was once a beautiful young woman, and not so many years ago as thou mightest believe! There was a young mage who wanted mine hand -- \"");
				say("\"Trulacci, whose ill-fated son now languishes in the depths of the Mountains of Freedom.\"");
				if (gflags[AVATAR_BELIEVES_MOSH]) {
					say("\"It was Columna who stole him from my love, by using her magics on him. Yet she never loved him... he was simply a toy to her.\"");
				} else {
					say("\"But another stole Trulacci's heart from me, and I shall never forgive her for that!\"");
					add(["another"]);
				}
				add(["Trulacci"]);
				fallthrough;

			case "Trulacci" (remove):
				say("\"Where hath he gone? Bah, I know not. Nor, for that matter, do I care!\"");
				var000C = Func0992(IOLO, "@Ah, but I can see that thou dost still care, madam.@", 0x0000, false);
				if (var000C != AVATAR) {
					0x0000->set_conversation_slot();
					say("\"Rubbish! 'Tis long gone, and I am an old woman now.\"");
				}
				fallthrough;

			case "magic" (remove):
				if (gflags[AVATAR_BELIEVES_MOSH]) {
					say("\"Let me be honest with thee. My powers have dwindled to nothingness. I can teach thee no spell worth knowing!\"");
				} else {
					say("\"My spells are not for sale, not to the likes of such as thyself. But assume not that all my powers have left me, for some still remain.\"");
					say("\"I have no need for others, when I can create mine own friends.\"");
					Func097F(MOSH, "@See for thyself!@", 0x0000);
					var000D = MOSH->get_object_position();
					var000D[0x0001] += 0x0002;
					var000D[0x0002] -= 0x0002;
					var0008 = UI_create_new_object2(0x020B, var000D);
					if (var0008) {
						var0008->obj_sprite_effect(ANIMATION_PURPLE_BUBBLES, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, LOOP_ONCE);
						var0008->set_schedule_type(HOUND);
						Func097F(var0008, "@Eek!@", 0x0005);
					} else {
						UI_sprite_effect(ANIMATION_PURPLE_BUBBLES, var000D[0x0001], var000D[0x0002], 0x0000, 0x0000, 0x0000, LOOP_ONCE);
					}
					abort;
				}
				fallthrough;

			case "cheated" (remove):
				if (gflags[AVATAR_BELIEVES_MOSH]) {
					say("\"Cheated, and by mine own sister, wouldst thou believe it!\"");
					say("\"Yet it is as nothing compared to the greater swindles which she practices. She doth conspire against Nature itself, didst thou know?\"");
					say("\"She doth possess a Magic Comb, stolen from the City of Beauty. 'Tis an enchanted object which she used to make herself appear young and beautiful.\"");
					say("\"Without it, she would be exactly like me! I know not where she keeps it. But I am certain it is in a well hidden spot.\"");
				} else {
					say("\"I will not speak of that now, but suffice it to say that she who looks like me deep inside hath taken from me all that should be mine!\"");
				}
				fallthrough;

			case "another" (remove):
				say("\"Thou shouldst speak to she who hath done me wrong: The Sorceress Columna, whom they sometimes call the Green Sorceress.\"");
				say("\"Listen to what she says!\"");
				add("the Green Sorceress");
				gflags[KNOW_ABOUT_MOSH] = true;
				fallthrough;

			case "the Green Sorceress" (remove):
				say("\"The rumors say that her name stems from her attire, but I know the truth. 'Tis the very envy she doth have for me that hath spawned her title.\"");
				fallthrough;

			case "Columna" (remove):
				say("\"So thou hast spoken to that hag! Tell me now -- dost thou believe me, or she?\"");
				var000E = Func0956(["believe Columna", "believe Mosh"]);
				if (var000E == "believe Columna") {
					say("\"Thou art worthless.\"");
					Func097F(MOSH, "@Come, rats!@", 0x0000);
					MOSH->set_schedule_type(SHY);
					abort;
				}
				say("\"Thou dost truly believe me now... ah, I see that thou dost. Thou art truly one I can say is my friend.\"");
				gflags[AVATAR_BELIEVES_MOSH] = true;
				if (Func097D(PARTY, 0x0001, 0x0179, QUALITY_ANY, 0x000D)) {
					say("\"I smell something... thou hast some fish! Oh, I do so love a good fish.\"");
					add("give fish");
				} else {
					say("\"If thou art ever in need, come to me. I shall give thee anything I possess. Thou dost see, I have a good heart.\"");
					say("\"And if thou dost ever have something that I could use, please bring it. Nothing large. Perhaps a morsel of food.\"");
				}
				fallthrough;

			case "give fish" (remove):
				var0003 = UI_remove_party_items(0x0001, 0x0179, QUALITY_ANY, 0x000D, 0x0012);
				if (gflags[GAVE_MOSH_FISH]) {
					say("\"I thank ye for thy fish, as I do love it!\"");
				} else {
					say("\"I thank ye, ",
						var0000,
						". Thou art indeed a kind one. I knew the moment I saw ye I could call ye friend.\"");
					say("\"And know that my little ones call ye friend as well, as do their larger cousins.\"");
					add("larger cousins");
				}
				fallthrough;

			case "larger cousins" (remove):
				say("\"Aye, my friend. Beneath the very ground upon which thou dost walk rest many twisting tunnels. They are known as the catacombs, and the lovelies who call them home are the ratmen.\"");
				say("\"But how will they recognize ye as my friend? I know! I will give ye mine harp. Shouldst thou ever find thyself in the complex below, strum it for them.\"");
				say("\"The sweet tunes from mine instrument will pacify them, for in younger days I did play it for them as they laid themselves down to sleep. Here, please take this for thy kindness.\"");
				var0003 = Func099B(AVATAR, 0x0001, 0x01FA, QUALITY_ANY, FRAME_ANY, 0x0000, true);
				gflags[GAVE_MOSH_FISH] = true;
				fallthrough;

			case "bye":
				UI_remove_npc_face0();
				Func097F(AVATAR, "@Thanks for thine help.@", 0x0000);
				Func097F(MOSH, (("@Fare thee well, " + var0000) + ".@"), 0x0005);
				Func08FF();
				break;
		}
	}
}

extern var Func0954 0x954 ();
extern var Func0953 0x953 ();
extern void Func0976 0x976 (var var0000, var var0001);
extern void Func07D1 object#(0x7D1) ();
extern void Func097F 0x97F (var var0000, var var0001, var var0002);
extern var Func0942 0x942 (var var0000);
extern var Func0994 0x994 ();
extern var Func0955 0x955 ();
extern void Func0852 0x852 ();
extern void Func0853 0x853 ();
extern void Func0851 0x851 ();
extern var Func09B3 0x9B3 (var var0000);
extern void Func09B4 0x9B4 (var var0000);
extern void Func090E 0x90E (var var0000, var var0001, var var0002, var var0003, var var0004, var var0005, var var0006, var var0007, var var0008);
extern void Func08FF 0x8FF ();
extern void Func070A object#(0x70A) ();

void Func041C object#(0x41C) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;
	var var0008;
	var var0009;
	var var000A;
	var var000B;
	var var000C;
	var var000D;
	var var000E;
	var var000F;

	var0000 = Func0954();
	var0001 = UI_is_pc_female();
	var0002 = Func0953();
	var0003 = PETRA->get_object_position();
	if ((var0003[0x0001] < 0x08DF) && ((var0003[0x0001] > 0x0890) && ((var0003[0x0002] < 0x072F) && (var0003[0x0002] > 0x0700)))) {
		var0004 = true;
	}
	var0005 = false;
	var0006 = UI_part_of_day();
	if ((var0006 > EARLY) || (var0006 < EVENING)) {
		var0006 = "day";
	} else {
		var0006 = "evening";
	}
	if (event == DEATH) {
		if (PETRA->get_item_flag(SI_TOURNAMENT)) {
			Func0976(PETRA, 0x0005);
			PETRA->clear_item_flag(SI_TOURNAMENT);
			var0003 = script PETRA {
				call Func070A;
			};
		}
	}
	if (event == DOUBLECLICK) {
		AVATAR->item_say("@Hello, there.@");
		PETRA->Func07D1();
		Func097F(PETRA, (("@Greetings, " + var0000) + ".@"), 0x0002);
		PETRA->set_schedule_type(TALK);
	}
	if (event == PROXIMITY) {
		var0007 = UI_get_random(0x0006);
		if (var0007 == 0x0001) {
			PETRA->item_say("@Art thou thirsty?@");
		}
		if (var0007 == 0x0002) {
			PETRA->item_say("@Ale! Wine!@");
		}
		if (var0007 == 0x0003) {
			PETRA->item_say("@Welcome!@");
		}
		if (var0007 == 0x0004) {
			PETRA->item_say("@Want a room?@");
		}
		if (var0007 == 0x0005) {
			if (Func0942(ROCCO)) {
				PETRA->item_say("@Rocco!@");
				Func097F(ROCCO, "@In a minute...@", 0x0002);
			} else {
				PETRA->item_say("@Work, work, work...@");
			}
		}
		if (var0007 == 0x0006) {
			PETRA->item_say("@Baked fish!@");
		}
	}
	if (event == BG_PATH_FAILURE) {
		if (gflags[AVATAR_WAS_MALE]) {
			var0003 = AVATAR->set_npc_prop(SEX_FLAG, 0);
			PETRA->set_polymorph(0x02D1);
			var0003 = AVATAR->set_npc_prop(SEX_FLAG, 1);
		} else {
			PETRA->set_polymorph(0x02D1);
		}
	}
	if (event == PATH_SUCCESS) {
		PETRA->item_say("@I'm ready.@");
	}
	if (event == STARTED_TALKING) {
		if (PETRA->get_item_flag(IN_PARTY)) {
			PETRA->set_schedule_type(FOLLOW_AVATAR);
			add("leave");
		} else {
			PETRA->run_schedule();
			PETRA->clear_item_say();
			if (gflags[PETRA_HAS_BELONGINGS]) {
				add("belongings");
			}
		}
		PETRA->show_npc_face0(0x0000);
		var0008 = PETRA->get_item_flag(MET);
		if ((var0008 == false) && (!gflags[BANES_RELEASED])) {
			PETRA->set_item_flag(MET);
			say("\"This is the Blue Boar Inn, and I am the barmaid. My name is Petra.\"");
			add(["Blue Boar Inn", "barmaid"]);
		} else if (gflags[BANES_RELEASED]) {
			if (!gflags[KNOWS_PETRA_DESPAIRS]) {
				say("\"Mine existence is pointless now, ",
					var0000,
					". Rocco -- my love -- is dead, and the Blue Boar destroyed.\"");
				say("\"I am only an automaton, with no hope that any soul I may have will join Rocco in the world beyond this one. There is nothing left for me.\"");
				gflags[KNOWS_PETRA_DESPAIRS] = true;
			} else if (PETRA->get_item_flag(IN_PARTY) || (!(Func0994() == 0x000E))) {
				say("\"Glad to talk to thee again, ",
					var0002,
					". I only wish I could be of more help to thee. I am merely an automaton...\"");
			} else {
				say("\"Aiding thee is mine only solace. How may I be of service, ",
					var0000,
					"?\"");
			}
		} else if (var0004) {
			say("\"Can I bring thee anything, ",
				var0000,
				"?\"");
		} else {
			say("\"Is this not a nice day?\"");
		}
		if (gflags[KNOWS_ABOUT_ACID] && (!PETRA->get_item_flag(IN_PARTY))) {
			add("acid");
		}
		if (gflags[READ_BODY_TRANSFERENCE_BOOK] && ((Func0994() == 0x0011) && (!AVATAR->get_item_flag(ISPETRA)))) {
			var0009 = AVATAR->find_nearby(0x0314, 0x000F, MASK_NONE);
			for (var000C in var0009 with var000A to var000B) {
				if (var000C->get_item_quality() == 0x003D) {
					add("switch bodies");
					break;
				}
			}
		}
		if (gflags[KNOWS_ROTOLUNCIA_IS_KIDNAPPER] && (!ROTOLUNCIA->get_item_flag(DEAD))) {
			add("kidnap");
		}
		if (var0004 && (!PETRA->get_item_flag(IN_PARTY))) {
			add(["food", "drink", "room"]);
		}
		converse (["bye"]) {
			case "food":
				say("\"We have a fine selection of meals available for thee to choose from. Art thou hungry, ",
					var0000,
					"?\"");
				if (Func0955() == true) {
					Func0852();
				} else {
					say("\"Summon me if thou dost change thy mind, ",
						var0000,
						".\"");
				}
				fallthrough;

			case "drink":
				say("\"I think thou wilt like our selection of potables, ",
					var0000,
					". Dost thou wish a drink?\"");
				if (Func0955() == true) {
					Func0853();
				} else {
					say("\"Perhaps later, then, ",
						var0000,
						".\"");
				}
				fallthrough;

			case "room":
				Func0851();
				fallthrough;

			case "kidnap" (remove):
				say("\"Oh, this is horrible! Though I am but a woman of metal, I have a heart that feels pain for thee.\"");
				say("\"Thou shouldst go quickly to Julia -- the Rangers can solve crimes such as this!\"");
				fallthrough;

			case "leave" (remove):
				if (gflags[GOT_WATER_OF_DISCIPLINE]) {
					say("\"I will do so with haste. I have duties which need attending.\"");
				} else {
					say("\"As thou wishest, ",
						var0000,
						"... If thou hast further need of me, thou hast but to ask.\"");
				}
				PETRA->remove_from_party();
				if (PETRA->get_cont_items(SHAPE_ANY, QUALITY_ANY, FRAME_ANY)) {
					say("\"Dost thou wish thy belongings returned to thee?\"");
					if (Func0955()) {
						say("\"Here they are.\"");
						gflags[PETRA_HAS_BELONGINGS] = false;
						var0003 = Func09B3(PETRA);
						if (var0003[0x0001] != 0x0000) {
							say("\"Thy companions carry some of thine inventory.\"");
							if (var0003[0x0002] > 0x0000) {
								var0003 = var0003[0x0002];
								say("\"I also had to place ",
									var0003,
									" items of thine upon the ground.\"");
							}
						} else if (var0003[0x0002] > 0x0000) {
							var0003 = var0003[0x0002];
							say("\"I had to place ",
								var0003,
								" items of thine on the ground.\"");
						}
					} else {
						gflags[PETRA_HAS_BELONGINGS] = true;
						say("\"Then I will keep thine inventory for thee. Find me if thou changest thy mind.\"");
					}
				}
				Func09B4(PETRA);
				fallthrough;

			case "belongings" (remove):
				say("\"Thou hast returned for thy belongings. Dost thou want them now?\"");
				if (Func0955()) {
					say("\"Here they are.\"");
					gflags[PETRA_HAS_BELONGINGS] = false;
					var0003 = Func09B3(PETRA);
					if (var0003[0x0001] != 0x0000) {
						say("\"Thy companions carry some of thine inventory.\"");
						if (var0003[0x0002] > 0x0000) {
							var0003 = var0003[0x0002];
							say("\"I also had to place ",
								var0003,
								" items of thine upon the ground.\"");
						}
					} else if (var0003[0x0002] > 0x0000) {
						var0003 = var0003[0x0002];
						say("\"I had to place ",
							var0003,
							" items of thine on the ground.\"");
					}
				} else {
					gflags[PETRA_HAS_BELONGINGS] = true;
					say("\"Then I will continue to keep thine inventory for thee. Find me if thou dost truly want them returned.\"");
				}
				fallthrough;

			case "Blue Boar Inn" (remove):
				say("\"The finest eating and drinking establishment in all Moonshade! Run by the finest man in all Moonshade...\"");
				if (Func0942(ROCCO) == true) {
					ROCCO->show_npc_face1(0x0000);
					say("\"What madness art thou saying, Petra?\"");
					UI_remove_npc_face1();
					0x0000->set_conversation_slot();
					say("\"It is not madness, Rocco. I am proud of thee...\"");
				}
				say("\"Rocco, the innkeeper. A finer man thou shalt not find.\"");
				add(["Rocco"]);
				fallthrough;

			case "Rocco" (remove):
				say("\"Thou mayest find Rocco a bit gruff, but he doth have a good heart. After all, he alone hath stood between Torrissio and me... At great peril to himself, I might add.\"");
				UI_push_answers();
				add(["Torrissio", "peril", "change subject"]);
				fallthrough;

			case "change subject":
				say("\"Oh, of course! I did not mean to bore thee...\"");
				UI_pop_answers();
				fallthrough;

			case "Torrissio" (remove):
				say("\"Thou canst not have failed to notice that I am an automaton. Torrissio is my maker... Curse his black heart!\"");
				say("\"Torrissio is a man who feeds off the misery of others. He created me with the sole intent of having a captive to torment for the rest of his life.\"");
				say("\"But I escaped and Rocco took me in.\"");
				add("automaton");
				fallthrough;

			case "automaton" (remove):
				say("\"I am a magical construct. An animated body of metal.\"");
				say("\"Yet I can think. I can reason. And I believe I can care for others.\"");
				say("\"Whether this means that I have a soul locked away within the confines of mine hollow body, I do not know. All I do know is that I am much more complex than the automatons Torrissio normally makes for the other Mages.\"");
				add(["soul", "other Mages"]);
				fallthrough;

			case "soul" (remove):
				say("\"If thou dost love, if thou hast compassion for others, if thou dost feel the injustice of the world, art thou not said to possess a soul?\"");
				say("\"If I have all these things, can I not say that I, too, have a soul?\"");
				say("\"In this I am unique, for none of the other automatons claim to feel emotions as I do. But I do not know why I should be different.\"");
				fallthrough;

			case "other Mages" (remove):
				say("\"Most Mages do not wish to be disturbed by the presence of other living beings. Therefore they come to Torrissio to provide them with servants and guards of undemanding metal.\"");
				say("\"However, the magic did not originate with Torrissio --\"");
				say("he is merely the latest master of the ancient spells which he did find in certain buried ruins. It is said that automatons served those who dwelt in this land anciently.\"");
				say("\"Even with all his magic, Torrissio cannot construct new automatons --\"");
				say("he can merely reanimate those broken automatons which are discovered in the ruins.\"");
				say("\"What better servants to have? Automatons can exist for centuries without any maintenance at all.\"");
				say("\"They ask nothing. They expect nothing. They do what task is assigned to them until their magic at last fails, and then they simply stop.\"");
				fallthrough;

			case "peril" (remove):
				say("\"Oh, ",
					var0000,
					"! Thou canst not know what danger there is in thwarting the will of a Mage!\"");
				say("\"Rocco could be killed easily, and spells are untraceable. Or he could be spirited away to hideous torture. No one would be the wiser.\"");
				say("\"So I look after him as best I can, even as he doth care for me. It also helps that everyone believes the tale we have spread.\"");
				add("tale");
				fallthrough;

			case "tale" (remove):
				say("\"Rocco hath led everyone to believe that he and Torrissio reached an agreement to have me work here to advertise Torrissio's skill.\"");
				say("\"In truth, my cooking ability doth do Torrissio no small credit. And I dare say that it wins him many customers as well.\"");
				say("\"But he is still a willful, vicious man who doth not take it kindly when he feels cheated. And I fear his vengeance, for both myself and Rocco.\"");
				fallthrough;

			case "barmaid" (remove):
				say("\"I serve Rocco in whatever function I can... Barmaid, cook, whatever needs to be done. I have performed every job thou canst imagine here at the inn. Everything from painting the ceiling to keeping Mosh from stealing our fish.\"");
				add("Mosh");
				if (var0004) {
					say("\"Can I bring thee something?\"");
				}
				fallthrough;

			case "Mosh" (remove):
				say("\"They call her the Rat Woman, which is not a very kind description, but is a reasonably true one, I am sorry to say. There are others in town who can tell thee about her. She doth like fish, I will say that one thing for her.\"");
				fallthrough;

			case "acid" (remove):
				say("\"Yes, I know what acid is, ",
					var0000,
					". It is a corrosive liquid that is very detrimental to human flesh and most metals... Except mine.\"");
				say("\"Dost thou desire mine help, ",
					var0000,
					"?\"");
				if (Func0955()) {
					if (gflags[READ_BODY_TRANSFERENCE_BOOK]) {
						say("\"Let me see if I understand thee correctly. Thou wishest me to accompany thee to an ancient temple.\"");
						say("\"Once there, I will take thy form, and thou wilt take mine, for a brief period of time. Hmmm...\"");
						say("\"It sounds intriguing. I shall discover, if only for an instant, what it is to truly be human.\"");
						if (gflags[XENKA_HAS_RETURNED]) {
							if (Func0994() == 0x000E) {
								say("\"No, I must decline thine offer. Though I have enjoyed thy companionship, I must return to my duties. I shall keep the Blue Boar open, despite any calamity -- in Rocco's memory.\"");
							} else {
								say("\"No, I must decline thine offer. Though I have enjoyed thy companionship, I must return to Moonshade. I must bury my beloved Rocco.\"");
							}
						} else if (UI_get_array_size(UI_get_party_list2()) < 0x0005) {
							add("leave");
							gflags[PETRA_HAS_BELONGINGS] = true;
							say("\"If thou dost wish it, then I shall accompany thee. Perhaps the danger shall cause me to forget my grief.\"");
							PETRA->add_to_party();
						} else {
							say("\"Thou art not serious, ",
								var0002,
								"! With so many companions, thou hast no need of me.\"");
							say("\"I think thou art merely trying to cheer me. For this, I thank thee, but nothing can fill an empty heart.\"");
						}
					} else {
						say("\"But I am not very brave, ",
							var0000,
							"! I could not face the hazards of such a place, even with thy company!\"");
						say("\"If only there were a way to put thy courage into my metal body...\"");
					}
				} else {
					say("\"Oh, I am so glad! I am not very brave, ",
						var0000,
						".\"");
				}
				fallthrough;

			case "switch bodies" (remove):
				var000D = var000C->find_nearest(0x033D, 0x0008);
				if (!var000D) {
					say("\"Once we find the Body Transferance Chamber, I will oblige thee.\"");
				} else {
					say("\"If thou canst promise my safety, I will agree to aid thee.\"");
					say("\"Dost thou give me thy promise?\"");
					if (Func0955()) {
						say("\"These temples are awful old. I hope thou knowest what thou art doing.\"");
						var000E = var000D->get_object_position();
						var000F = UI_create_new_object(0x025F);
						if (var000F) {
							var000F->set_item_frame(0x0007);
							var0003 = UI_update_last_created([(var000E[0x0001] - 0x0001), (var000E[0x0002] - 0x0001), (var000E[0x0003] + 0x0001)]);
							if (var0003) {
								PETRA->set_schedule_type(WAIT);
								Func090E(PETRA, var000F, 0, 0, -1, Func041C, PETRA->get_npc_object(), PATH_SUCCESS, false);
							}
						}
						return;
					}
					say("\"Then I am sorry, but I will not take any unnecessary risks.\"");
				}
				fallthrough;

			case "bye":
				UI_remove_npc_face0();
				if (PETRA->get_item_flag(IN_PARTY) || (!(Func0994() == 0x000E))) {
					Func097F(AVATAR, "@Thanks.@", 0x0000);
					Func097F(PETRA, "@Glad to be of help.@", 0x0002);
				} else {
					Func097F(AVATAR, "@So long!@", 0x0000);
					if (gflags[BANES_RELEASED]) {
						Func097F(PETRA, "@Farewell...@", 0x0002);
					} else {
						Func097F(PETRA, "@Please come again!@", 0x0002);
					}
				}
				Func08FF();
				break;
		}
	}
}

extern var Func0954 0x954 ();
extern var Func0953 0x953 ();
extern void Func07D1 object#(0x7D1) ();
extern void Func097F 0x97F (var var0000, var var0001, var var0002);
extern var Func097D 0x97D (var var0000, var var0001, var var0002, var var0003, var var0004);
extern var Func09A0 0x9A0 (var var0000, var var0001);
extern var Func0955 0x955 ();
extern var Func0992 0x992 (var var0000, var var0001, var var0002, var var0003);
extern var Func0956 0x956 (var var0000);
extern void Func0858 0x858 ();
extern void Func0859 0x859 ();
extern void Func085A 0x85A ();
extern void Func0857 0x857 ();
extern void Func08FF 0x8FF ();
extern void Func041F object#(0x41F) ();

void Func041D object#(0x41D) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;

	var0000 = Func0954();
	var0001 = UI_is_pc_female();
	var0002 = "his";
	if (var0001) {
		var0002 = "her";
	}
	var0003 = Func0953();
	if (event == DOUBLECLICK) {
		AVATAR->item_say("@Excuse me...@");
		POTHOS->Func07D1();
		Func097F(POTHOS, (("@Yes, " + var0000) + "?@"), 0x0002);
		POTHOS->set_schedule_type(TALK);
	}
	if (event == PROXIMITY) {
		var0004 = UI_get_random(0x0006);
		if (var0004 == 0x0001) {
			POTHOS->item_say("@Wares for sale!@");
		}
		if (var0004 == 0x0002) {
			POTHOS->item_say("@Reagents!@");
		}
		if (var0004 == 0x0003) {
			POTHOS->item_say("@Potions! Scrolls!@");
		}
		if (var0004 == 0x0004) {
			POTHOS->item_say("@Do not touch that!@");
		}
		if (var0004 == 0x0005) {
			POTHOS->item_say("@Please come in.@");
		}
		if (var0004 == 0x0006) {
			if (!gflags[HELPED_POTHOS]) {
				POTHOS->item_say("@What shall I do?@");
			} else {
				POTHOS->item_say(("@Hello, " + var0003) + "!@");
			}
		}
	}
	if (event == STARTED_TALKING) {
		POTHOS->run_schedule();
		POTHOS->clear_item_say();
		POTHOS->show_npc_face0(0x0000);
		if (!POTHOS->get_item_flag(MET)) {
			say("\"Yes, I remember thee from the banquet -- Rotoluncia wanted to kill thee!\"");
			POTHOS->set_item_flag(MET);
			if (POTHOS->get_schedule_type() == PATROL) {
				say("\"Welcome to the Apothecary Shop. I am Pothos, the proprietor.\"");
			} else {
				say("\"I am Pothos, the Apothecary in this city.\"");
				say("\"If thou desirest potions, reagents, or other ingredients such as are customary in the practice of magic, come to my shop.\"");
			}
			add(["banquet", "Rotoluncia", "Apothecary Shop"]);
		} else if (gflags[WILL_HELP_POTHOS] && (!gflags[HELPED_POTHOS])) {
			if (Func097D(PARTY, 0x0001, 0x034A, QUALITY_ANY, 0x0001)) {
				say("\"Thou dost have the Blood Moss! Wonderful!\"");
				say("\"In exchange for thy service, I will trust thee with the information that wilt allow thee to speak with Erstam.");
				var0005 = PARTY->count_objects(0x034A, QUALITY_ANY, 0x0001);
				var0004 = UI_remove_party_items(var0005, 0x034A, QUALITY_ANY, 0x0001, 0x0000);
				gflags[HELPED_POTHOS] = true;
				var0004 = script Func09A0(0x0005, 0x0001) {
					nohalt;
					wait 130;
					call Func041F;
				};
			} else {
				say("\"I am waiting for the Blood Moss, ",
					var0000,
					".\"");
			}
		} else if (POTHOS->get_schedule_type() == PATROL) {
			say("\"Shopping for something, ",
				var0000,
				"?\"");
		} else {
			say("\"What can I do for thee?\"");
		}
		if (gflags[HELPED_POTHOS] && (!gflags[WILL_GET_PHOENIX_EGG])) {
			add("tell me about Erstam");
		}
		if (POTHOS->get_schedule_type() == PATROL) {
			add("buy");
		}
		if (gflags[STORM_ICEWINE] && (!gflags[KNOWS_ICEWINE_ORIGIN])) {
			add("strange wine");
		}
		if (gflags[HAS_CLUE_SLIPPERS] && (!gflags[KNOWS_SLIPPERS_OWNER])) {
			add("slippers");
		}
		if (gflags[KNOWS_DUCIO_IS_ARTISAN] && (!gflags[KNOWS_LAB_APPARATUS_OWNER])) {
			add("apparatus");
		}
		if (gflags[STORM_SEVERED_HAND] && (!gflags[KNOWS_SEVERED_HAND_OWNER])) {
			add("bloody hand");
		}
		if (Func097D(PARTY, 0x0001, 0x034A, QUALITY_ANY, 0x000F)) {
			add("Stoneheart");
		}
		if (gflags[KNOWS_POTHOS_SECRET] && (!gflags[WILL_HELP_POTHOS])) {
			add("secret");
		}
		if (gflags[KNOWS_ROTOLUNCIA_IS_KIDNAPPER] && (!ROTOLUNCIA->get_item_flag(DEAD))) {
			add("kidnap");
		}
		if (!ROTOLUNCIA->get_item_flag(DEAD)) {
			add("Rotoluncia");
		}
		converse (["bye"]) {
			case "tell me about Erstam" (remove):
				say("\"It would not be wise for me to tell thee much. I shall merely acquaint thee with how to reach the docks, how to call thy transport, and the required password.\"");
				UI_push_answers();
				add(["reach the docks", "call transport", "password", "change subject"]);
				fallthrough;

			case "kidnap" (remove):
				say("\"Thy friend was taken by magical means? 'Tis incredible. Thou art new to this town...\"");
				say("\"Julia of the Rangers might be of aid to thee, but I doubt it. This matter concerns magic, and she is merely Mundane.\"");
				say("\"I advise thee to speak to Fedabiblio -- he can counsel thee well. And he doth have connections in high places.\"");
				fallthrough;

			case "banquet" (remove):
				say("\"I apologize for disrupting the party, ",
					var0000,
					". Normally, I wouldn't have been there. But I had been on a special errand for the MageLord.\"");
				add(["Wouldn't have been there?", "errand"]);
				fallthrough;

			case "Wouldn't have been there?" (remove):
				say("\"While it is true that I am a Mage, I am not an Adept. And Filbercio invites only Adepts to his banquets, as a rule.\"");
				add(["Filbercio", "Adept"]);
				fallthrough;

			case "Filbercio" (remove):
				say("\"Filbercio is the MageLord! And thou wouldst do well not to forget that while thou art in Moonshade.\"");
				say("\"Filbercio is a man of great passions. The Mountains of Freedom are a powerful argument against crossing him in any way.\"");
				if (gflags[POTHOS_SPOKE_ABOUT_FREEDOM] == false) {
					add("Freedom");
				}
				fallthrough;

			case "Freedom" (remove):
				say("\"The name was meant in jest, I'm certain. For the Mountains of Freedom are a prison, ",
					var0000,
					". A prison meant to hold Mage and Mundane alike.\"");
				say("\"It is said that if thou art sentenced to that terrible stone pit, and thou canst win thy way back to the outside world, then thou art free. No one will hunt thee for the crimes thou didst commit before thine incarceration...\"");
				say("\"The only problem is that none have ever won free. And Filbercio reigns unchallenged.\"");
				gflags[POTHOS_SPOKE_ABOUT_FREEDOM] = true;
				add(["stone pit", "unchallenged"]);
				fallthrough;

			case "stone pit" (remove):
				say("\"The Mountains of Freedom are a mine that was shut down long ago when the quality of ore became profitless to dredge from the mountain's heart.\"");
				say("\"Filbercio devised a new use for it, and turned it into a prison. Now its value lies not in what is gotten out of the mine, but in what is put into it.\"");
				fallthrough;

			case "unchallenged" (remove):
				say("\"There is little true crime here, ",
					var0000,
					".\"");
				say("\"Most of the offenders that find themselves within the confines of Freedom are there because they angered Filbercio in some way.\"");
				say("\"The very existence of Freedom silences most of the MageLord's detractors.\"");
				fallthrough;

			case "Adept" (remove):
				say("\"There are different levels of competence with magic, ",
					var0000,
					". It is all based on what level of spells thou canst cast.\"");
				say("\"I myself can only master the third level of spells. An Adept can master the ninth level of spells.\"");
				say("\"Only an Adept can become MageLord, or sit on the Council of Mages. So I make my living selling reagents to Adepts.\"");
				fallthrough;

			case "errand" (remove):
				say("\"With these storms, I have had little trade with the mainland, so I'm nearly out of most reagents. Filbercio wished me to gather some Blood Moss for him.\"");
				say("\"I tried. But these storms have brought fierce monsters into that area... And I'm no Adept to deal with them.\"");
				say("\"Filbercio threatened to throw me into the Mountains of Freedom if I do not obtain the Blood Moss! I'd trade my dearest secret to be able to find some Blood Moss!\"");
				if (gflags[KNOWS_POTHOS_SECRET] && (!gflags[WILL_HELP_POTHOS])) {
					add("secret");
				}
				if (gflags[POTHOS_SPOKE_ABOUT_FREEDOM] == false) {
					add("Freedom");
				}
				fallthrough;

			case "secret" (remove):
				if (gflags[WONT_HELP_POTHOS] == true) {
					say("\"Hast thou reconsidered mine offer?\"");
					if (Func0955() == true) {
						say("\"Thou art my savior! I shall await thy return eagerly.\"");
						gflags[WONT_HELP_POTHOS] = false;
						gflags[WILL_HELP_POTHOS] = true;
					} else {
						say("\"My fate is certain!\"");
						gflags[WONT_HELP_POTHOS] = true;
						UI_remove_npc_face0();
						Func097F(POTHOS, "@I am lost!@", 0x0000);
						abort;
					}
				} else {
					say("\"Thou knowest?!\"");
					say("\"It is true. I am Erstam's son... Which is why I still continue to trade with him, even though it is forbidden. If the Council knew, I'd surely be exiled.\"");
					say("\"Since thou knowest, I will offer thee a deal. If thou wilt go to the swamps south of here and bring back some Blood Moss for me, I will tell thee how to contact my father.\"");
					if (Func0955() == true) {
						say("\"Thou art my savior! I shall await thy return eagerly.\"");
						gflags[WILL_HELP_POTHOS] = true;
					} else {
						say("\"Then I have nothing to bargain with. I shall certainly end my life in the Mountains of Freedom now!\"");
						gflags[WONT_HELP_POTHOS] = true;
						UI_remove_npc_face0();
						Func097F(POTHOS, "@I am lost!@", 0x0000);
						abort;
					}
				}
				fallthrough;

			case "Rotoluncia" (remove):
				say("\"Like Filbercio, Rotoluncia doth have a will of steel and a fiery temper.\"");
				say("\"She is convinced that some outside force is responsible for these abominable storms.\"");
				if (gflags[KNOWS_ROTOLUNCIA_IS_KIDNAPPER]) {
					say("\"I wonder... perhaps Rotoluncia could have had something to do with thy companion's demise?\"");
					say("\"If thou dost wish to visit her, she lives in a manor in the northeast corner of the city.\"");
				} else {
					say("\"She hates thee because she thinks that thou art keeping knowledge from her. It isn't anything personal, ",
						var0000,
						".\"");
				}
				UI_push_answers();
				add(["force", "storms", "change subject"]);
				fallthrough;

			case "change subject":
				say("\"Why, certainly, ",
					var0000,
					"...\"");
				UI_pop_answers();
				fallthrough;

			case "force" (remove):
				say("\"Well, to be precise, I should say that she suspects a recent visitor -- a Mage named Batlin.\"");
				say("\"I'll grant that he came through asking all sorts of questions, and badgering people to sell their Serpent Teeth. But I fail to see how she thinks he doth have anything to do with the storms.\"");
				say("\"And I'm afraid that she thinks all strangers are in league with Batlin. Of course, it did not help that he had that Daemon, either...\"");
				add(["Batlin", "questions", "Serpent Teeth", "Daemon"]);
				fallthrough;

			case "Batlin" (remove):
				say("\"Little, fat man... Small beard and mustache... Angry scowl. I'm sure thou wilt remember him if thou hast met him.\"");
				say("\"Not a particularly nice person, that I recall. Seemed like any other Adept -- used to getting his way, and angry if thwarted. I dealt as little with him as possible.\"");
				fallthrough;

			case "questions" (remove):
				say("\"Batlin seemed very interested in learning more of the history of the ancient people of this land -- the ones we call the Ophidians.\"");
				say("\"As I am far from my days as a novice, I do not remember all that the Magister taught us. I wasn't much interested then, or now. I sent him to Fedabiblio.\"");
				add(["Ophidians", "Fedabiblio"]);
				fallthrough;

			case "Ophidians" (remove):
				say("\"As I told thee, I don't recall very much history. All I do know is that the ancients seem to have worshipped serpents. If thou wishest to know more, ask Fedabiblio. He's very learned on the subject.\"");
				fallthrough;

			case "Fedabiblio" (remove):
				say("\"Fedabiblio keeps the library here in Moonshade. All information, whether historical or magical in nature, finds its way to his hands.\"");
				say("\"He is also the teacher of the novices, so I'm certain that he will be able to help thee with any questions thou mightest have.\"");
				fallthrough;

			case "Serpent Teeth" (remove):
				if (gflags[WILL_HELP_POTHOS] || gflags[WONT_HELP_POTHOS]) {
					say("\"'Tis a tradition, ",
						var0000,
						", to steal some small item from my father to prove that thou art a worthy Mage. 'Tis never anything of value, so I have said nothing so far.\"");
					say("\"A particular favorite item to purloin is a Serpent Tooth from my father's collection. As far as I know, they are useless. But Batlin certainly wanted to purchase them.\"");
					say("\"No one would sell... Who knows, perhaps he hoped to make some sort of deal with my father for them.\"");
				} else {
					say("\"'Tis a tradition, ",
						var0000,
						", to steal some small item from the Mad Mage to prove that thou art a worthy Mage.\"");
					say("\"A particular favorite item to purloin is a Serpent Tooth from the Mad Mage's collection. As far as I know, they are useless. But Batlin certainly wanted to purchase them.\"");
					say("\"No one would sell... Who knows, perhaps he hoped to make some sort of deal with the Mad Mage for them.\"");
				}
				fallthrough;

			case "Daemon" (remove):
				say("\"Yes! Batlin had a Daemon wandering about at his heels, as tame as thou couldst please. Did his bidding without a word... Big, big, ugly red creature.\"");
				say("\"'Tis just the thing to catch Rotoluncia's eye... She's very interested in learning to tame a Daemon for her personal servant. She was quite put out that Batlin wouldn't tell her how he had done it.\"");
				say("\"But I'm sure Filbercio heaved a sigh of relief when Batlin refused to tell her. Everyone knows that Rotoluncia would love to feed Filbercio to a Daemon, in small pieces.\"");
				fallthrough;

			case "storms" (remove):
				say("\"Definitely magic-born, no doubt about it. Anyone caught outside during one risks being teleported into oblivion.\"");
				say("\"Gustacio hath been working on finding a way to stop the storms. But so far, he hath not had any luck. Mayhaps now that Mortegro is helping him, they'll find the answer...\"");
				say("\"I certainly hope so. Moonshade is isolated until they do.\"");
				add(["Gustacio", "Mortegro"]);
				fallthrough;

			case "Gustacio" (remove):
				say("\"Gustacio is an Adept that specializes in working with the weather... the power of nature, and all that.\"");
				say("\"Gustacio said something about needing to learn as much about the storms as possible. Even babbled something about learning to see the colors... At least it sounded like babble to me.\"");
				fallthrough;

			case "Mortegro" (remove):
				say("\"Mortegro is an Adept that specializes in speaking with the dead. He doth not bind them to service or anything, simply talks to them.\"");
				say("\"Why Gustacio wants Mortegro's help, I'll never know. Unless the dead are responsible for the storms, or something.\"");
				fallthrough;

			case "Apothecary Shop" (remove):
				say("\"I sell everything that thou wouldst need to cast spells or do magic...\"");
				say("\"Unfortunately, I have a very limited supply of most things right now.\"");
				fallthrough;

			case "password" (remove):
				if (gflags[KNOWS_ERSTAM_PASSWORD]) {
					say("\"Oh -- didst thou forget? How embarrassing...\"");
				} else {
					say("\"Isn't it interesting that Blood Moss is so potent, since it is connected with the fluid of life? Blood... But I'm babbling...\"");
				}
				gflags[KNOWS_ERSTAM_PASSWORD] = true;
				say("\"Erstam shall not speak a word to thee unless thou dost speak the password which I do give thee. This will be the sign that I have sent thee.\"");
				say("\"The password is @Iskatradeeth@.\"");
				fallthrough;

			case "reach the docks" (remove):
				say("\"Thou must go to the docks north of the Mountains of Freedom. My father hath trained a sea creature to come on command. It will take thee to Erstam -- do not fear. But remember to not leave any of thy possessions upon it, for once it leaves thou shalt not be able to recall it.\"");
				fallthrough;

			case "call transport" (remove):
				say("\"To call the creature, go to the docks. There, thou shalt find a ship's bell.\"");
				say("\"Once thou hast rung the bell and chanted the mantra, thy transport will arrive. It can only take thee to my father's island... nowhere else.\"");
				add("mantra");
				fallthrough;

			case "mantra":
				if (gflags[KNOWS_ERSTAM_PASSWORD]) {
					remove("mantra");
					say("\"My, thou art impatient! I was just about to tell thee...\"");
					say("\"I Re-Ten Bentas Juxark I! Praetimde Mir-Wis Re-Por I.\"");
					say("\"To learn its meaning, translate it from the language of Magic.\"");
					say("\"Alas -- as is often the case, 'tis not required to understand power to use it.\"");
					var0006 = Func0992(IOLO, (((("@" + var0003) + " learned ") + var0002) + " lessons well in the days of the False Prophet.@"), "@I was taught well in the days of the False Prophet...@", false);
					0x0000->set_conversation_slot();
					say("\"Whom?\"");
					var0006 = Func0992(0x0001, "@Never mind...@", "@Never mind...@", false);
					0x0000->set_conversation_slot();
					gflags[KNOWS_TURTLE_MANTRA] = true;
				} else {
					say("\"No, no, no -- thou shouldst learn of the password first! Thou dost need it most of all, for Erstam shall not speak with thee without it!\"");
				}
				fallthrough;

			case "buy":
				say("\"What dost thou need?\"");
				var0004 = Func0956(["Potions", "Reagents", "Magic Items"]);
				if (var0004 == "Potions") {
					say("\"What potion dost thou wish to purchase?\"");
					Func0858();
				}
				if (var0004 == "Reagents") {
					say("\"What reagents dost thou desire to buy?\"");
					Func0859();
				}
				if (var0004 == "Magic Items") {
					say("\"What magic items wouldst thou care to buy?\"");
					Func085A();
				}
				fallthrough;

			case "strange wine" (remove):
				say("\"That can only be Moonshade wine, ",
					var0000,
					". The Rangers make it right here in the city, with a magic wine press -- naturally.\"");
				add(["Rangers", "magic wine press"]);
				fallthrough;

			case "Rangers" (remove):
				say("\"The Rangers are nominally the city guards. They deal with any physical threats that aren't worthy of bothering a Mage about. Their commander is a woman named Julia.\"");
				add("Julia");
				fallthrough;

			case "Julia" (remove):
				say("\"Julia is a rather forbidding woman. Always seems to be looking for thy secret desire to cause trouble, if thou knowest what I mean.\"");
				say("\"She's quite competent, but not overly warm. I've actually seen her rebuff the MageLord's advances... A formidable woman, indeed.\"");
				fallthrough;

			case "magic wine press" (remove):
				if (gflags[WILL_HELP_POTHOS] || gflags[WONT_HELP_POTHOS]) {
					say("\"The magic wine press is another piece of my father's legacy, ",
						var0000,
						". He hath always liked fine wine, but hated the work required to make it. So he made the wine press.\"");
				} else {
					say("\"The magic wine press is another piece of Erstam's legacy, ",
						var0000,
						". He always liked fine wine, but hated the work required to make it. So he made the wine press.\"");
					add("Erstam");
				}
				fallthrough;

			case "Erstam" (remove):
				say("\"Erstam was the mentor of most of the Adepts. He was a hard master, so they say.\"");
				say("\"The popular story is that Erstam would never admit that any of his students were ready to be called Adepts in their own right. Apparently, he wanted the free labor for as long as he could have it.\"");
				say("\"Each one rebelled against him, until he became angry and withdrew to his own little island -- forswearing any company but that of his assistants.\"");
				fallthrough;

			case "slippers" (remove):
				say("\"Hmmm. I don't think that they belong to a Mage, ",
					var0000,
					". Most Mages prefer something a bit more... impressive.\"");
				say("\"These look more like something a Mundane would wear. Thou mightest check with Bucia over at the Capessii Canton.\"");
				gflags[HAS_CLUE_SLIPPERS] = true;
				add(["Bucia", "Capessii Canton"]);
				fallthrough;

			case "Bucia" (remove):
				say("\"If any one person could be considered the heart of Moonshade, I'd be hard-pressed to say whether it was Bucia or Rocco.\"");
				say("\"Bucia doth do business with both Mage and Mundane, so she usually has a full share of the most recent gossip in the city -- which she collects like a ship collects barnacles.\"");
				add("Rocco");
				fallthrough;

			case "Rocco" (remove):
				say("\"Rocco is the proprietor of the Blue Boar Inn. Most of the people in the city -- Mage and Mundane alike -- eat there.\"");
				say("\"Rocco collects gossip from those too far in their cups to care what is said to whom. So, between Bucia and Rocco, they hear everything going on in Moonshade.\"");
				fallthrough;

			case "Capessi Canton" (remove):
				say("\"Strange name, isn't it? 'Tis actually Flindo's shop, but he's away so much that Bucia runs it.\"");
				add("Flindo");
				fallthrough;

			case "Flindo" (remove):
				say("\"Flindo travels to and from the mainland quite often to purchase merchandise for the shop -- which is another reason Bucia is a good source for information. She hears what Flindo learns in his trips.\"");
				fallthrough;

			case "apparatus" (remove):
				say("\"'Tis a Mage's equipment. But I don't recognize the style.\"");
				say("\"Every Mage prefers something different from the others. This isn't one I'm familiar with, but I'm not that well-connected.\"");
				say("\"Thou shouldst ask Master Ducio. Or, better yet, Topo -- if thou dost wish an answer.\"");
				add(["Ducio", "Topo"]);
				fallthrough;

			case "Ducio" (remove):
				say("\"Ducio is a Master Artisan. His work is incredibly good -- when he does any work at all.\"");
				say("\"Most of the time he leaves the work to his apprentice. But I know for a fact that he makes all the lab apparatus for the Adepts. He should be able to tell thee who this piece belongs to... if he's awake, that is!\"");
				fallthrough;

			case "Topo" (remove):
				say("\"Topo is the unfortunate boy that Master Ducio took for an apprentice. He's the one that does all the work at the shop.\"");
				say("\"Despite Ducio's sloth, Topo seems to have quite a bit of talent and promise. In fact, everyone in Moonshade hath learned to go to Topo if they need anything...\"");
				say("\"The service is quicker and much friendlier.\"");
				fallthrough;

			case "bloody hand" (remove):
				if (gflags[WILL_HELP_POTHOS] || gflags[WONT_HELP_POTHOS]) {
					say("\"Eyeh! Please, put it away!\"");
					say("\"I do not need to look at it any more to be able to tell thee that it is the damnable product of my father's experiments! Is it any wonder that they call him the Mad Mage?!\"");
					gflags[KNOWS_SEVERED_HAND_OWNER] = true;
				} else {
					say("\"Eyeh! Please, put it away!\"");
					say("\"I do not need to look at it any more to be able to tell thee that it is the damnable product of Erstam's experiments! Is it any wonder that they call him the Mad Mage?!\"");
					gflags[KNOWS_SEVERED_HAND_OWNER] = true;
				}
				add(["experiments", "Mad Mage"]);
				fallthrough;

			case "experiments" (remove):
				if (gflags[WILL_HELP_POTHOS] || gflags[WONT_HELP_POTHOS]) {
					say("\"My father seeks to find the secret to creating life. I surmise that it's his attempt at immortality -- Even spells fall to the ravages of time in the end.\"");
					say("\"Unfortunately, Erstam's quest for knowledge hath been at the sacrifice of his assistants. Vasel hath sidestepped the inevitable much longer than I would have expected...\"");
				} else {
					say("\"Erstam seeks to find the secret to creating life. I surmise that it's his attempt at immortality -- Even spells fall to the ravages of time in the end.\"");
					say("\"Unfortunately, Erstam's quest for knowledge hath been at the sacrifice of his assistants. Vasel hath sidestepped the inevitable much longer than I would have expected...\"");
				}
				add("Vasel");
				fallthrough;

			case "Vasel" (remove):
				if (gflags[WILL_HELP_POTHOS] || gflags[WONT_HELP_POTHOS]) {
					say("\"Vasel is my father's latest assistant. He is a grinning hunchback that I had not given credit for much intelligence. But he seems to be more cunning than even my father anticipated.\"");
				} else {
					say("\"Vasel is Erstam's latest assistant. He is a grinning hunchback that I had not given credit for much intelligence. But he seems to be more cunning than even Erstam anticipated.\"");
				}
				fallthrough;

			case "Mad Mage" (remove):
				say("\"What else wouldst thou call a man who hacks his assistants to pieces for his experiments?!\"");
				say("\"That is another reason that he lives apart from the other Mages. He will never bow to their Strictures... And I doubt that any of the Adepts in Moonshade could hope to enforce them anyway!\"");
				fallthrough;

			case "Stoneheart" (remove):
				say("\"How didst thou come by that?!\"");
				say("\"No! I did not ask that! I do not want to know!\"");
				say("\"Dost thou know that possession of that stone is forbidden? Dost thou know how much certain Adepts would pay for the reagent that that stone produces?\"");
				add(["forbidden", "reagent"]);
				fallthrough;

			case "forbidden" (remove):
				say("\"Prolonged exposure to Stoneheart causes insanity, ",
					var0000,
					". And to have the type of power that the reagent makes in the hands of a madman is unthinkable!\"");
				say("\"Of course, as an apothecary, I could buy it from thee... And find a buyer or two with clearance to possess it.\"");
				say("\"I could make thee a good offer... Say, 120 guilders. Wilt thou sell it?\"");
				if (Func0955() == true) {
					say("\"Wonderful! This will be far less trouble for thee...\"");
					Func0857();
				} else {
					say("\"I shall not tell anyone that thou hast the Stoneheart, ",
						var0000,
						". But thou shouldst be likewise discreet.\"");
				}
				fallthrough;

			case "reagent" (remove):
				say("\"It produces Bloodspawn when mixed with a quantity of blood... Well, I am getting ahead of myself.\"");
				say("\"If thou hast a ritual blood-letting device -- which is technically forbidden as well -- thou must fill a small container with blood.\"");
				say("\"Then thou must use the blood on the Stoneheart. This produces the Bloodspawn that thou wilt need for death spells. Thou must be very careful. It is very powerful.\"");
				fallthrough;

			case "bye":
				UI_remove_npc_face0();
				if (POTHOS->get_schedule_type() == PATROL) {
					Func097F(AVATAR, "@Nice shop.@", 0x0000);
					Func097F(POTHOS, "@Come again!@", 0x0002);
				} else {
					Func097F(AVATAR, "@Until later...@", 0x0000);
					Func097F(POTHOS, "@Take care!@", 0x0002);
				}
				Func08FF();
				break;
		}
	}
}

extern var Func0954 0x954 ();
extern var Func0953 0x953 ();
extern void Func097F 0x97F (var var0000, var var0001, var var0002);
extern void Func07D1 object#(0x7D1) ();
extern var Func0992 0x992 (var var0000, var var0001, var var0002, var var0003);
extern var Func0942 0x942 (var var0000);
extern void Func094E 0x94E (var var0000, var var0001);
extern void Func085E 0x85E ();
extern void Func085F 0x85F ();
extern var Func0955 0x955 ();
extern var Func099B 0x99B (var var0000, var var0001, var var0002, var var0003, var var0004, var var0005, var var0006);
extern void Func08FF 0x8FF ();

void Func041E object#(0x41E) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;
	var var0008;
	var var0009;
	var var000A;
	var var000B;
	var var000C;
	var var000D;

	var0000 = Func0954();
	var0001 = UI_is_pc_female();
	var0002 = Func0953();
	var0003 = false;
	var0004 = "him";
	if (var0001) {
		var0005 = "her";
	}
	if (event == PROXIMITY) {
		var0006 = UI_get_random(0x0006);
		if (var0006 == 0x0001) {
			ROCCO->item_say("@Petra, bring wine!@");
			Func097F(PETRA, "@In a minute...@", 0x0002);
		}
		if (var0006 == 0x0002) {
			ROCCO->item_say("@These are hard times...@");
		}
		if (var0006 == 0x0003) {
			ROCCO->item_say("@Rooms for rent!@");
		}
		if (var0006 == 0x0004) {
			ROCCO->item_say("@Care for a drink?@");
		}
		if (var0006 == 0x0005) {
			ROCCO->item_say("@Hungry?@");
		}
		if (var0006 == 0x0006) {
			ROCCO->item_say("@Have a seat...@");
		}
	}
	if (event == DOUBLECLICK) {
		AVATAR->item_say("@Might I speak with thee?@");
		ROCCO->Func07D1();
		Func097F(ROCCO, (("@Certainly, " + var0000) + ".@"), 0x0005);
		ROCCO->set_schedule_type(TALK);
	}
	if (event == STARTED_TALKING) {
		ROCCO->run_schedule();
		ROCCO->clear_item_say();
		ROCCO->show_npc_face0(0x0000);
		var0007 = ROCCO->get_item_flag(MET);
		if (var0007 == false) {
			if (ROCCO->get_schedule_type() == TEND_SHOP) {
				say("\"Welcome to the Blue Boar Inn. I am the innkeeper. My name is Rocco.\"");
			} else {
				say("\"I do not believe we've met. I'm Rocco, the innkeeper at the Blue Boar.\"");
			}
			say("\"'Tis good to have more visitors again. We had despaired, what with the storms and all.\"");
			ROCCO->set_item_flag(MET);
		} else {
			say("\"So good to see thee again, ",
				var0000,
				". Always good to have visitors.\"");
		}
		add(["Blue Boar", "visitors"]);
		add(["food", "drink", "room"]);
		if (gflags[FOUND_BROWN_BOTTLE] && (SIMON->get_schedule_type() != WAIT)) {
			add("brown bottle");
		}
		if (gflags[HAS_CLUE_SLIPPERS] && (!gflags[KNOWS_SLIPPERS_OWNER])) {
			add("slippers");
		}
		if (gflags[KNOWS_ROTOLUNCIA_IS_KIDNAPPER] && (!ROTOLUNCIA->get_item_flag(DEAD))) {
			add("kidnap");
		}
		converse ("bye") {
			case "kidnap" (remove):
				say("\"I cannot say that I'm surprised, ",
					var0002,
					". Thy coming hath mightily disturbed the Mages.\"");
				say("\"Now there are many suspects -- Torrissio is certainly a sly one, and Mortegro doth have odd interests -- but we both know whom thy enemy must be...\"");
				gflags[TORRISSIO_KIDNAP_SUSPECT] = true;
				gflags[MORTEGRO_KIDNAP_SUSPECT] = true;
				say("\"'Tis that she-witch, Rotoluncia! Everyone knows that she doth work against thee.\"");
				if (PETRA->npc_nearby()) {
					PETRA->show_npc_face1(0x0000);
					say("\"Perhaps ",
						var0002,
						" should go to Julia, dear. The Rangers must investigate this crime.\"");
					UI_remove_npc_face1();
					0x0000->set_conversation_slot();
					say("\"Nah -- she'll only try to extort money from ",
						var0004,
						". Julia is a thief...\"");
					say("\"If I wert thou, ",
						var0002,
						", I'd think about leaving town. Rotoluncia is not an enemy that a Mundane can handle!\"");
				}
				fallthrough;

			case "Blue Boar" (remove):
				say("\"Interesting name, is it not?\"");
				var0008 = Func0992(0x0001, "@That sounds just like the one in Britannia!@", "@I have heard of that name before.@", false);
				0x0000->set_conversation_slot();
				say("\"Anything is possible, I suppose. I inherited this inn from my parents, and they from theirs. 'Tis an old name... perhaps from the time of the crossing.\"");
				add("crossing");
				fallthrough;

			case "crossing" (remove):
				say("\"It hath been a long time since I heard the tale in full. Let me see if I remember it at all... For the most part it had something to do with an usurper king and the Mages. But for my folk, it was simply for money, I think.\"");
				add(["usurper king", "Mages", "money"]);
				fallthrough;

			case "usurper king" (remove):
				say("\"Back in the old lands, a domineering man named... Brattish, or Brutish, or somesuch, usurped the throne. His rule was hard and unjust, so many people fled across the seas to this land.\"");
				var0008 = Func0992(0x0001, "@It sounds like he is talking about Lord British!@", 0x0000, false);
				0x0000->set_conversation_slot();
				add(["old lands", "this land"]);
				fallthrough;

			case "old lands" (remove):
				say("\"Let me think a moment. I am terrible with names like this... Aha! I have it! The old lands were known as Sosaria.\"");
				fallthrough;

			case "this land" (remove):
				say("\"Well, when the people arrived here, they thought to name the land after their old home... ah, one moment... New Sosaria. But then they found the ruins scattered here and there, with all those snakes pictured on them, so most folks call this The Serpent Isle. Though some still refer to it by its proper name, New Sosaria.\"");
				add(["ruins", "snakes"]);
				fallthrough;

			case "ruins" (remove):
				say("\"Well, the ruins are on the mainland anyway. I saw the ones around Monitor when I was just a lad. There is nothing special about them, merely piles of old stone from settlers way before the New Sosarians.\"");
				fallthrough;

			case "snakes" (remove):
				say("\"Either this place had far more snakes when those people lived here, or they worshipped them, or something. There are snakes carved all over those ruins. I don't even think that the Mages know what they mean.\"");
				fallthrough;

			case "Mages" (remove):
				say("\"As well as I can remember, most of the people that fled from the usurper were Mages. I don't think that any of them are still alive, but thou canst never tell. Perhaps the Mad Mage is that old, who knows? Certainly not the current MageLord.\"");
				add(["Mad Mage", "MageLord"]);
				fallthrough;

			case "Mad Mage" (remove):
				say("\"The Mad Mage is a crazy old man that lives on an island not far from here. Thinks he can create life... From what I hear, he once lived here in Moonshade -- was a teacher or something, 'til he went mad.\"");
				fallthrough;

			case "MageLord" (remove):
				say("\"Filbercio is the most recent MageLord, ",
					var0000,
					". He is a man of curious passions. Not what thou wouldst expect from most Mages.\"");
				add("passions");
				fallthrough;

			case "passions" (remove):
				say("\"I'll simply say that I am mighty glad that my Petra is metal. That alone may keep her safe from his wandering eye.\"");
				fallthrough;

			case "money" (remove):
				say("\"Aye, plain money. The folks that came over were lesser sons and daughters who could never hope to inherit anything. They came hoping to start their own businesses, like the Blue Boar. 'Twas named in honor of my great-great grandsire's inn.\"");
				fallthrough;

			case "visitors" (remove):
				say("\"Of course, there's not much business now due to the terrible storms. But in better times our rooms are always full. Wert thou interested in anyone in particular?\"");
				UI_push_answers();
				add(["the sage Batlin", "the scholar Gwenno", "nothing more"]);
				fallthrough;

			case "the sage Batlin" (remove):
				say("\"Such a one did come through here, perhaps two\tmonths ago.\"");
				if (Func0942(PETRA)) {
					Func094E(PETRA, "@'Twas three months ago, Rocco.@");
					ROCCO->show_npc_face0(0x0000);
					say("\"Yes, she's right... it was three months ago.\"");
				}
				say("\"There was some sort of a scandal, as I recall. It was said that this Batlin stole an ancient artifact of some kind. He fled by ship -- perhaps Captain Hawk could tell thee more.\"");
				var0009 = true;
				fallthrough;

			case "the scholar Gwenno" (remove):
				say("\"Thou dost know her! She and I are the closest of friends. She stayed here for many weeks.\"");
				var0008 = Func0992(IOLO, "@Just how well dost thou know Gwenno?@", "@Gwenno is my friend's missing wife.@", false);
				ROCCO->show_npc_face0(0x0000);
				say("\"I swear I am innocent! We were only friends, ",
					var0000,
					".\"");
				UI_push_answers();
				add(["Where did she go?", "Why was she here?", "How long ago?", "change subject"]);
				fallthrough;

			case "Where did she go?" (remove):
				say("\"When she had studied all of the materials which were available here, she determined to go to\tthe Isle of Monks to read the scrolls kept there.\"");
				add("Isle of Monks");
				fallthrough;

			case "Isle of Monks" (remove):
				say("\"The Xenkan Monks live north of here on a forested island. They tend to keep to themselves, studying the prophecies of long-dead mystics. But thou canst not go there, for there is no sailor crazy enough to make the journey. The magical\tstorms have destroyed every boat on this coast, save Hawk's -- and he won't sail.\"");
				fallthrough;

			case "Why was she here?" (remove):
				say("\"The good lady said that it was her task to study all of the cultures and beliefs there were in the Serpent Isles. She was planning to write a report, and she said that her discoveries would startle her countrymen.\"");
				fallthrough;

			case "How long ago?" (remove):
				say("\"It hath been a long time since we last saw Gwenno. Many months.\"");
				if (Func0942(PETRA)) {
					Func094E(PETRA, "@Eight months, dear Rocco.@");
					ROCCO->show_npc_face0(0x0000);
				}
				fallthrough;

			case "nothing more", "change subject":
				say("\"I am sorry I was not more helpful...\"");
				UI_pop_answers();
				fallthrough;

			case "food":
				if ((ROCCO->get_schedule_type() == TEND_SHOP) || (ROCCO->get_schedule_type() == WAITER)) {
					say("\"We serve nothing pretentious, but it fills the belly and warms the soul.\"");
					if (!var0003) {
						say("\"Petra is a surprisingly good cook, considering that she is an automaton.\"");
						var0003 = true;
						add(["automaton", "Petra"]);
					}
					Func085E();
				} else {
					say("\"Return when we be open!\"");
					remove("food");
				}
				fallthrough;

			case "automaton" (remove):
				say("\"We have a lot of them around here -- magical creations, scavenged from the Serpent ruins and restored to service by our Mages. But Petra is unique, being an experiment by Torrissio the Sly. While all the others are mere machines, my Petra is a warm, caring person.\"");
				if (Func0942(PETRA)) {
					PETRA->show_npc_face1(0x0000);
					say("\"Do not mention that name again, Rocco! Why summon more trouble than we already have?\"");
					UI_remove_npc_face1();
					ROCCO->show_npc_face0(0x0000);
					say("\"She doth not care much for Torrissio -- considering that he created her for vile and exploitive reasons. But Petra escaped, and now I care for her.\"");
				}
				add("Torrissio");
				fallthrough;

			case "Torrissio" (remove):
				say("\"Torrissio is called the Sly for good reason. He doth meet with other people's wives on the sly. And he takes great delight in hurting people, but never enough to catch the Council's attention... Torrissio is not a nice man.\"");
				fallthrough;

			case "Petra" (remove):
				say("\"She's my serving wench, as well as being a damn fine cook -- which, considering she can neither eat nor taste, is rather incredible.\"");
				fallthrough;

			case "drink":
				if ((ROCCO->get_schedule_type() == TEND_SHOP) || (ROCCO->get_schedule_type() == WAITER)) {
					say("\"We serve only the finest of beverages.\"");
					Func085F();
				} else {
					say("\"Come talk to me when we be open for business!\"");
					remove("drink");
				}
				fallthrough;

			case "room" (remove):
				if (gflags[ASKED_ROCCO_ABOUT_ROOM] == false) {
					say("\"We've nothing fancy -- simply clean rooms, and we keep the ruffians out.\"");
					say("\"But thou lookest to be a respectable person.\"");
					gflags[ASKED_ROCCO_ABOUT_ROOM] = true;
				}
				say("\"The cost is 12 guilders per person. Wouldst thou like a room for the night?\"");
				if (Func0955()) {
					var000A = UI_get_array_size(UI_get_party_list()) * 0x000C;
					var000B = PARTY->count_objects(0x03B8, QUALITY_ANY, FRAME_ANY);
					if (var000B >= var000A) {
						say("\"Here is thy key.\"");
						var000C = Func099B(AVATAR, 0x0001, 0x0281, 0x00B8, 0x000B, 0x0000, true);
						var000D = UI_remove_party_items(var000A, 0x03B8, QUALITY_ANY, FRAME_ANY, 0x0000);
						say("\"'Tis the northwest corner room.\"");
					} else {
						var0008 = Func0992(0x0001, "@But Avatar, we do not have the guilders!@", 0x0000, false);
						if (var0008 != AVATAR) {
							ROCCO->show_npc_face0(0x0000);
							say("\"Then thou canst not stay at the inn. In these hard times, I cannot afford to keep thee and thy companions for free.\"");
						} else {
							say("\"Thou hast not enough guilders for my rooms.\"");
						}
					}
				} else {
					say("\"Some other time, perhaps.\"");
				}
				fallthrough;

			case "brown bottle" (remove):
				say("\"I do indeed recognize the description. Such bottles are used to contain that foul brew which the sailor-folk of Fawn prefer. I cannot tolerate the swill myself, nor can any of my customers. That's why I do not stock it.\"");
				var0008 = Func0992(0x0001, "@Perhaps we should investigate this place called Fawn.@", 0x0000, false);
				ROCCO->show_npc_face0(0x0000);
				if (var0008 != AVATAR) {
					say("\"Good luck to thee! With no ships sailing, there is no way to go to Fawn from here.\"");
				}
				add("Fawn");
				fallthrough;

			case "Fawn" (remove):
				say("\"'Tis somewhere on the western portion of the mainland. I never went there. Though I heard tell that it is a city built on great piers out in the water.\"");
				if (Func0942(PETRA)) {
					PETRA->show_npc_face1(0x0000);
					say("\"Sounds dangerous to me...\"");
					UI_remove_npc_face1();
					0x0000->set_conversation_slot();
					say("\"That is because thou canst not swim, Petra.\"");
				}
				fallthrough;

			case "Stefano" (remove):
				say("\"He looked as pale as a corpse, ",
					var0000,
					". He babbled something about a Death Knight and ran out as though his pants were on fire. Sounds like he's in trouble again.\"");
				if (Func0942(PETRA)) {
					PETRA->show_npc_face1(0x0000);
					say("\"Again?! When is Stefano not in trouble?\"");
					UI_remove_npc_face1();
					0x0000->set_conversation_slot();
				}
				add("Death Knight");
				fallthrough;

			case "Death Knight" (remove):
				say("\"I would thank thee not to repeat that in here. As Petra says, no use borrowing trouble...\"");
				if (Func0942(PETRA)) {
					PETRA->show_npc_face1(0x0000);
					say("\"I knew thou wert learning, Rocco.\"");
					UI_remove_npc_face1();
					0x0000->set_conversation_slot();
					say("\"Oh, go on with thee!\"");
				}
				say("\"Some say that it is a Daemon summoned to hunt the unfortunate person. Others say that it is an automaton designed to kill. I do not know, nor do I wish to ask!\"");
				fallthrough;

			case "slippers" (remove):
				say("\"They are not anything that I would wear, and Petra's metal feet are never cold... least not as she would notice.\"");
				if (Func0942(PETRA)) {
					PETRA->show_npc_face1(0x0000);
					say("\"I would know that it was cold, dear Rocco, but it would not trouble me.\"");
					0x0000->set_conversation_slot();
					say("\"See there?\"");
					0x0001->set_conversation_slot();
					say("\"But thou mightest ask Bucia. She may sell something like that.\"");
					UI_remove_npc_face1();
					0x0000->set_conversation_slot();
					say("\"Good idea, Petra!\"");
				}
				add("Bucia");
				fallthrough;

			case "Bucia" (remove):
				say("\"Bucia is the proprietor of the Capessi Canton in the bazaar. She is Moonshade's only provisioner.\"");
				if (Func0942(PETRA)) {
					PETRA->show_npc_face1(0x0000);
					say("\"And its greatest gossip, as well!\"");
					UI_remove_npc_face1();
					0x0000->set_conversation_slot();
					say("\"Petra, honestly!\"");
				}
				say("\"Bucia may be able to tell thee if she sells anything like them. And who purchased them.\"");
				fallthrough;

			case "bye":
				UI_remove_npc_face0();
				Func097F(AVATAR, "@Fare well@", 0x0000);
				Func097F(ROCCO, "@Come again!@", 0x0002);
				Func08FF();
				break;
		}
	}
}

extern var Func0954 0x954 ();
extern var Func0953 0x953 ();
extern var Func0992 0x992 (var var0000, var var0001, var var0002, var var0003);
extern void Func097F 0x97F (var var0000, var var0001, var var0002);
extern var Func09A0 0x9A0 (var var0000, var var0001);
extern void Func09AD 0x9AD (var var0000);
extern void Func09AC 0x9AC (var var0000, var var0001, var var0002, var var0003);
extern var Func0955 0x955 ();
extern var Func0900 0x900 (var var0000);
extern var Func095B 0x95B (var var0000);
extern var Func099B 0x99B (var var0000, var var0001, var var0002, var var0003, var var0004, var var0005, var var0006);
extern var Func0988 0x988 (var var0000, var var0001);
extern void Func0636 object#(0x636) ();

void Func041F object#(0x41F) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;
	var var0008;
	var var0009;
	var var000A;
	var var000B;
	var var000C;
	var var000D;
	var var000E;
	var var000F;
	var var0010;
	var var0011;
	var var0012;
	var var0013;
	var var0014;

	var0000 = Func0954();
	var0001 = UI_is_pc_female();
	var0002 = Func0953();
	if ((event == DEATH) && ROTOLUNCIA->get_item_flag(SI_TOURNAMENT)) {
		ROTOLUNCIA->show_npc_face0(0x0000);
		ROTOLUNCIA->clear_item_flag(SI_TOURNAMENT);
		ROTOLUNCIA->reduce_health(0x0032, NORMAL_DAMAGE);
		var0003 = Func0992(0x0001, 0x0000, 0x0000, true);
		Func097F(var0003, "@The witch is dead!@", 0x0005);
		say("\"With my dying breath, I place the Curse of the Red Witch upon thee!\"");
		say("\"Arrgh...\"");
		var0004 = script Func09A0(0x0005, 0x0001) after 5 ticks {
			nohalt;
			call Func016B;
		};
	}
	if (event == DOUBLECLICK) {
		AVATAR->item_say("@Listen, witch!@");
		Func097F(ROTOLUNCIA, "@Cretin!@", 0x0005);
		var0004 = script item {
			nohalt;
			wait 5;
			call Func041F;
		};
	}
	if (event == STARTED_TALKING) {
		ROTOLUNCIA->show_npc_face0(0x0000);
		if (!gflags[ROTOLUNCIA_KIDNAPPED_AVATAR]) {
			say("\"So, thou hast come to rescue thy friend? Well, thou must kill me first -- I have the only key to his cell!\"");
			say("\"Or wilt thou tell me the secret which I desire, the key to controlling Daemons!!!\"");
			var0003 = Func0992(0x0001, "@But we know nothing about gargoyles... er, Daemons.@", "@But I know nothing of Daemons...@", false);
			0x0000->set_conversation_slot();
			say("\"Then thou shalt die, liar.\"");
			Func09AD(ROTOLUNCIA);
			ROTOLUNCIA->clear_item_say();
			Func097F(ROTOLUNCIA, "@Kill the Avatar!@", 0x0000);
			Func09AC(ROTOLUNCIA, -1, 0, IN_COMBAT);
			var0004 = find_nearby(0x016B, 0x001E, MASK_NONE);
			for (var0007 in var0004 with var0005 to var0006) {
				Func09AD(var0007);
			}
		} else {
			say("\"I am tired of playing games with thee, ",
				var0002,
				". Thou must either give me thy secrets, or kill me -- I have the only key to this chamber!\"");
			say("\"This is thy last chance -- wilt thou tell me the secret which I desire, the key to controlling Daemons!!!\"");
			if (Func0955()) {
				say("\"Thou shalt not live to regret this. Open thy mind to me!\"");
				AVATAR->set_item_flag(DONT_MOVE);
				ROTOLUNCIA->set_schedule_type(STANDTHERE);
				AVATAR->set_schedule_type(WAIT);
				gflags[TEMP_FLAG_1] = true;
				var0004 = script AVATAR {
					nohalt;
					say "@Ugh...@";
					actor frame bowing;
					actor frame standing;
					face north;
					actor frame bowing;
					actor frame kneeling;
					actor frame sleeping;
					say "@Mine head!@";
					wait 6;
					call Func041F;
				};
				abort;
			}
			say("\"Then thou shalt die with thy secret, Avatar...\"");
			Func09AD(ROTOLUNCIA);
			Func097F(ROTOLUNCIA, "@Die, fool!@", 0x0000);
			Func09AC(ROTOLUNCIA, -1, 0, IN_COMBAT);
			abort;
		}
		gflags[FIGHT_ROTOLUNCIA] = true;
	}
	if (event == SCRIPTED) {
		if (gflags[TEMP_FLAG_4]) {
			gflags[TEMP_FLAG_4] = false;
			ROTOLUNCIA->set_schedule_type(TALK);
			Func097F(ROTOLUNCIA, "@Surprised, Avatar?@", 0x0003);
			abort;
		}
		if (gflags[TEMP_FLAG_3]) {
			UI_fade_palette(0x000C, 0x0001, 0x0000);
			AVATAR->move_object([0x0862, 0x0835, 0x0000]);
			ROTOLUNCIA->move_object([0x086F, 0x0822, 0x0000]);
			gflags[TEMP_FLAG_3] = false;
			gflags[TEMP_FLAG_4] = true;
			AVATAR->clear_item_flag(DONT_MOVE);
			var0004 = script AVATAR after 5 ticks {
				nohalt;
				call Func0636;
				wait 8;
				call Func041F;
			};
			abort;
		}
		if (gflags[TEMP_FLAG_2]) {
			AVATAR->set_schedule_type(FOLLOW_AVATAR);
			AVATAR->clear_item_flag(DONT_MOVE);
			var0004 = script AVATAR {
				nohalt;
				actor frame sleeping;
				continue;
				hit 100, magic_damage;
				actor frame sleeping;
				actor frame sleeping;
			};
			gflags[TEMP_FLAG_2] = false;
			Func09AC(ROTOLUNCIA, -1, 0, IN_COMBAT);
			abort;
		}
		if (gflags[TEMP_FLAG_1]) {
			var0008 = AVATAR->get_object_position();
			var0008[0x0001] -= var0008[0x0003] / 0x0002;
			var0008[0x0002] -= var0008[0x0003] / 0x0002;
			UI_sprite_effect(ANIMATION_SMALL_RING_BLAST, (var0008[0x0001] - 0x0001), (var0008[0x0002] - 0x0003), 0x0000, 0x0000, 0x0000, LOOP_ONCE);
			gflags[TEMP_FLAG_1] = false;
			gflags[TEMP_FLAG_2] = true;
			var0004 = script AVATAR after 8 ticks {
				nohalt;
				actor frame sleeping;
				continue;
				call Func041F;
				actor frame sleeping;
			};
			abort;
		}
		if (gflags[ROTOLUNCIA_KIDNAP_REVEAL] && (!gflags[KNOWS_ROTOLUNCIA_IS_KIDNAPPER])) {
			ROTOLUNCIA_SCROLL->show_npc_face0(0x0000);
			if (ROTOLUNCIA->get_item_flag(DEAD)) {
				say("\"I am speaking to thee from beyond the grave. I shall have vengeance!\"");
				abort;
			}
			say("\"Greetings, Stranger from Another Land. Once again, I am speaking to thee by means of a magic scroll.\"");
			var0009 = UI_get_npc_name(0x0000 - ROTOLUNCIA->get_npc_id());
			say("\"If thou art looking for thy companion, ",
				var0009,
				", look no further -- I have kidnapped him.\"");
			say("\"Since thou wilt not give me thy secrets, I shall obtain them from him!\"");
			say("\"Farewell, ",
				var0002,
				"...\"");
			gflags[KNOWS_ROTOLUNCIA_IS_KIDNAPPER] = true;
			abort;
		}
		if ((gflags[HAVE_TALKING_SCROLL] == true) && (!gflags[SCROLL_SPEAKS])) {
			gflags[SCROLL_SPEAKS] = true;
			var000A = false;
			var000B = false;
			var000C = false;
			var000D = UI_get_array_size(UI_get_party_list());
			ROTOLUNCIA_SCROLL->show_npc_face0(0x0000);
			say("\"Greetings, Stranger from Another Land. I am speaking to thee by means of this magic scroll -- there is no need to be afraid.\"");
			var000E = Func0900(0x0002);
			if (var000E != false) {
				var000E[0x0001]->show_npc_face1(0x0000);
				say("\"Afraid? Why, the Avatar is not afraid of magic.\"");
				UI_remove_npc_face1();
				0x0000->set_conversation_slot();
				say("\"But all barbarians fear sorcery.\"");
				var000E[0x0002]->show_npc_face1(0x0000);
				var0003 = Func095B(var000E[0x0001]);
				say("\"Be quiet, ",
					var0003,
					". That witch can hear thee through that scroll!\"");
				UI_remove_npc_face1();
				0x0000->set_conversation_slot();
				say("\"Who said that! Death draws near for those who taunt Rotoluncia the Red Witch.\"");
			}
			converse (["magic", "Council", "not afraid", "bye"]) {
				case "magic" (remove):
					say("\"I am the most powerful wizard in this city, and I could teach thee many things -- if thou wert not a mere Mundane.\"");
					var000E = Func0900(0x0002);
					if (var000E != false) {
						var000E[0x0001]->show_npc_face1(0x0000);
						say("\"But the Avatar is not a Mundane...\"");
						UI_remove_npc_face1();
						0x0000->set_conversation_slot();
						say("\"What is this that they say?\"");
						var000E[0x0002]->show_npc_face1(0x0000);
						var0003 = Func095B(var000E[0x0001]);
						say("\"Thou dost speak overly much, ",
							var0003,
							".\"");
						UI_remove_npc_face1();
						0x0000->set_conversation_slot();
					}
					say("\"Thou art not a mage, or I would have detected thy powers by now.\"");
					say("\"Or... perhaps thou dost shield thine abilities from my senses? Most interesting...\"");
					var000A = true;
					fallthrough;

				case "Council" (remove):
					say("\"So my servant told thee that I sit on the Council of Mages? Perhaps I shall dismantle him to adjust a loose tongue...\"");
					say("\"Indeed, I am one of the Three who rule this city, along with Gustacio the Decrepit, and that weak-willed profligate, Filbercio.\"");
					var000B = true;
					fallthrough;

				case "not afraid" (remove):
					say("\"Thou dost surprise me. Most Mundanes are frightened by the very idea of sorcery.\"");
					add("Mundanes");
					fallthrough;

				case "Mundanes" (remove):
					say("\"Indeed, thou art from a distant land if thou dost not know such a common term.\"");
					say("\"The world is divided into two sorts of Men -- those who can handle magics, and mere ordinary folk.\"");
					var000F = [];
					if (var000D > 0x0001) {
						var000F = "and thy companion";
						if (var000D > 0x0002) {
							var000F += "s";
						}
						var000F += " ";
					}
					say("\"Common folk such as thee ",
						var000F,
						"are known as the Mundane.\"");
					var000C = true;
					fallthrough;

				case "bye":
					say("\"Not so fast! Thou shouldst know that I met with thine ally, the fat and loathsome sage called Batlin...\"");
					say("\"He travelled with a Daemon named Palos. Where did Batlin obtain such power? If I had this power, I could rule Serpent Isle!\"");
					say("\"Reveal to me the secret of controlling Daemonfolk, and I shall reward thee with power beyond thy comprehension.\"");
					if (Func0955()) {
						say("\"Then open thy mind to me, and let me withdraw the knowledge which I lust after!\"");
						var0010 = Func0992(0x0001, "@No, my friend. Thou must not...!@", 0x0000, false);
						if (var0010 != AVATAR) {
							ROTOLUNCIA->set_npc_id(0x0000 - var0010);
							0x0000->set_conversation_slot();
							say("\"Thy friends must learn not to interfere in the interests of mages. Let them learn now!!!\"");
							var0008 = var0010->get_object_position();
							var0010->get_npc_object()->obj_sprite_effect(ANIMATION_GREEN_BUBBLES, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, LOOP_ONCE);
							var0011 = UI_create_new_object(0x037F);
							if (var0011) {
								var0011->set_item_flag(TEMPORARY);
								var0004 = UI_update_last_created(var0008);
							}
						} else {
							AVATAR->set_item_flag(DONT_MOVE);
							AVATAR->set_schedule_type(WAIT);
							gflags[TEMP_FLAG_1] = true;
							var0004 = script AVATAR {
								nohalt;
								say "@Ugh...@";
								actor frame bowing;
								actor frame standing;
								face north;
								actor frame bowing;
								actor frame kneeling;
								actor frame sleeping;
								say "@Mine head!@";
								wait 6;
								call Func041F;
							};
							abort;
						}
					} else {
						say("\"I shall contact thee again, when perhaps thou shalt be more receptive to mine offers. Adieu.\"");
					}
					abort;
			}
		}
		if (gflags[HELPED_POTHOS] && (!gflags[KNOWS_ROTOLUNCIA_IS_KIDNAPPER])) {
			AUTO_MESSENGER->move_object([0x09B9, 0x0715, 0x0000]);
			AUTO_MESSENGER->set_schedule_type(WAIT);
			AUTO_MESSENGER->set_item_flag(SI_TOURNAMENT);
			var0010 = 0x0000 - ROTOLUNCIA->get_npc_id();
			if ((var0010 == 0x0000) || var0010->get_item_flag(DEAD)) {
				var0004 = [];
				if (!SHAMINO->get_item_flag(DEAD)) {
					var0004 &= SHAMINO;
				}
				if (gflags[IOLO_MADE_EQUIPMENT_LIST] && (!IOLO->get_item_flag(DEAD))) {
					var0004 &= IOLO;
				}
				if (gflags[DUPRE_MADE_EQUIPMENT_LIST] && (!DUPRE->get_item_flag(DEAD))) {
					var0004 &= DUPRE;
				}
				if (var0004) {
					var0010 = var0004[UI_get_random(UI_get_array_size(var0004))];
				} else {
					var0010 = AVATAR;
				}
			}
			gflags[KNOWS_ROTOLUNCIA_IS_KIDNAPPER] = true;
			if (var0010 != AVATAR) {
				ROTOLUNCIA->set_npc_id(0x0000 - var0010);
				if (var0010->npc_nearby()) {
					var0010->show_npc_face0(0x0000);
					say("\"What! What's happening...\"");
					var0008 = var0010->get_object_position();
					var0008[0x0001] -= var0008[0x0003] / 0x0002;
					var0008[0x0002] -= var0008[0x0003] / 0x0002;
					UI_sprite_effect(ANIMATION_TELEPORT2, var0008[0x0001], var0008[0x0002], 0x0000, 0x0000, 0x0000, LOOP_ONCE);
					var0009 = Func095B(var0010);
					var0003 = Func0992(0x0001, (("@" + var0009) + "!"), 0x0000, true);
					Func097F(AVATAR, "@Where did he go!@", 0x0002);
				} else {
					gflags[ROTOLUNCIA_KIDNAP_REVEAL] = true;
					gflags[KNOWS_ROTOLUNCIA_IS_KIDNAPPER] = false;
					var0012 = UI_create_new_object(0x02C3);
					if (var0012) {
						var0012->set_item_frame(0x0006);
						var0004 = var0012->set_item_quality(0x001F);
						var0008 = AVATAR->get_object_position();
						var0004 = UI_update_last_created(var0008);
						AVATAR->obj_sprite_effect(ANIMATION_GREEN_BUBBLES, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, LOOP_ONCE);
						if (var0004) {
							var0003 = Func0992(0x0001, "@Look! A scroll!@", "@A scroll...@", true);
						}
					} else {
						var0004 = Func099B(AVATAR, 0x0001, 0x02C3, 0x001F, 0x0006, 0x0012, false);
						if ((var0004[0x0001] == 0x0000) && (var0004[0x0002] == 0x0000)) {
							var0003 = Func0992(0x0001, "@Thou hast a scroll!@", "@A scroll!@", true);
						} else if (var0004[0x0001] == 0x0000) {
							var0003 = Func0992(0x0001, "@Look! A scroll!@", "@A scroll...@", true);
						} else {
							var0003 = Func0992(var0004[0x0001]->get_npc_number(), "@Look what I have!@", "@Thou hast a scroll!@", true);
						}
					}
				}
				if (var0010->get_item_flag(IN_PARTY)) {
					var0010->remove_from_party();
				}
				var0010->set_new_schedules(MIDNIGHT, TEND_SHOP, [0x0858, 0x0837]);
				var0010->run_schedule();
				var0010->move_object([0x0858, 0x0837, 0x0000]);
				abort;
			}
			gflags[ROTOLUNCIA_KIDNAPPED_AVATAR] = true;
			var0004 = Func0988(AVATAR->get_npc_object(), UI_get_party_list2());
			for (var0012 in var0004 with var0013 to var0014) {
				var0012->remove_from_party();
				Func09AC(var0012, -1, 0, WANDER);
			}
			AVATAR->set_item_flag(DONT_MOVE);
			var0008 = AVATAR->get_object_position();
			AVATAR->obj_sprite_effect(ANIMATION_TELEPORT2, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, LOOP_ONCE);
			var0004 = script AVATAR after 13 ticks {
				nohalt;
				call Func041F;
			};
			gflags[TEMP_FLAG_3] = true;
			abort;
		}
	}
}

extern var Func0954 0x954 ();
extern var Func0953 0x953 ();
extern void Func07D1 object#(0x7D1) ();
extern void Func097F 0x97F (var var0000, var var0001, var var0002);
extern var Func0942 0x942 (var var0000);
extern void Func094E 0x94E (var var0000, var var0001);
extern var Func097D 0x97D (var var0000, var var0001, var var0002, var var0003, var var0004);
extern var Func0992 0x992 (var var0000, var var0001, var var0002, var var0003);
extern void Func086F 0x86F ();
extern void Func086E 0x86E ();
extern void Func08FF 0x8FF ();

void Func0420 object#(0x420) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;

	var0000 = Func0954();
	var0001 = UI_part_of_day();
	var0002 = UI_is_pc_female();
	var0003 = Func0953();
	var0004 = UI_part_of_day();
	if ((var0004 > EARLY) || (var0004 < EVENING)) {
		var0004 = "day";
	} else {
		var0004 = "evening";
	}
	if (event == DOUBLECLICK) {
		AVATAR->item_say("@Pardon me...@");
		TOPO->Func07D1();
		Func097F(TOPO, (("@Yes " + var0000) + "?@"), 0x0002);
		TOPO->set_schedule_type(TALK);
	}
	if (event == STARTED_TALKING) {
		TOPO->run_schedule();
		TOPO->clear_item_say();
		TOPO->show_npc_face0(0x0000);
		var0005 = TOPO->get_item_flag(MET);
		if (var0005 == false) {
			say("\"Allow me to introduce myself. I'm Topo the Artisan, apprenticed to Master Ducio.\"");
			TOPO->set_item_flag(MET);
			if (Func0942(DUCIO)) {
				say("\"I'm a lucky man, to serve such a talented craftsman.\"");
				Func094E(DUCIO, "@He's a good boy.@");
				0x0000->set_conversation_slot();
			} else {
				say("\"Someday I hope to be as rich and lazy as my master!\"");
				say("\"He spends all his time asleep or at the inn, except when he comes here to make me crazy with his nagging.\"");
			}
			add(["Artisan", "Ducio"]);
		} else if (Func0942(DUCIO)) {
			say("\"Again, welcome! Might I be able to help thee today?\"");
			Func094E(DUCIO, "@Do not be so wordy.@");
			UI_remove_npc_face1();
			0x0000->set_conversation_slot();
			say("\"Yes, master...\"");
		} else {
			say("\"Again, welcome! As thou canst see, Master Ducio is not here at present. Perhaps I can help thee.\"");
			add("Ducio's whereabouts");
		}
		if (gflags[HAS_CLUE_URN] && (!gflags[KNOWS_URN_ORIGIN])) {
			add("urn");
		}
		if (gflags[KNOWS_DUCIO_IS_ARTISAN] && (!gflags[KNOWS_LAB_APPARATUS_OWNER])) {
			add("apparatus");
		}
		if (gflags[HAS_CLUE_SLIPPERS] && (!gflags[KNOWS_SLIPPERS_OWNER])) {
			add("slippers");
		}
		if (gflags[HAS_CLUE_STRANGE_BRUSH] && (!gflags[KNOWS_GOBLIN_BRUSH_ORIGIN])) {
			add("strange brush");
		}
		if (TOPO->get_schedule_type() == WANDER) {
			add("buy");
		}
		if (gflags[KNOWS_ROTOLUNCIA_IS_KIDNAPPER] && (!ROTOLUNCIA->get_item_flag(DEAD))) {
			add("kidnap");
		}
		if (Func097D(PARTY, 0x0001, 0x02F8, QUALITY_ANY, FRAME_ANY)) {
			add("sell gems");
		}
		converse (["buy", "bye"]) {
			case "kidnap" (remove):
				say("\"I am terribly sorry for thee at this sensitive time. Grief is a natural emotion...\"");
				var0006 = Func0992(0x0001, "@Our friend is missing -- not DEAD!@", "@Canst thou be of aid?@", false);
				0x0000->set_conversation_slot();
				say("\"Thou shouldst bring this matter to the attention of the Rangers. Julia would not let such an injustice stand, I am sure of it.\"");
				gflags[SHOULD_TELL_JULIA_OF_KIDNAP] = true;
				fallthrough;

			case "Artisan" (remove):
				say("\"I have worked with Master Ducio for several years now. Soon I'll be able to open a shop of mine own... Topo's Treasures, I'll call it.\"");
				if (Func0942(DUCIO)) {
					DUCIO->show_npc_face1(0x0000);
					say("\"Thou art an apprentice, boy! Thou dost not work with me. Thou dost work for me! Understand?\"");
					UI_remove_npc_face1();
					0x0000->set_conversation_slot();
					say("\"Yes, master...\"");
				}
				say("\"I work with the pottery. The automatons have trouble handling the slip... They generally crush a piece before 'tis fully formed and ready to fire. After firing, they are fine, but before -- that is where I work.\"");
				add(["automatons", "slip", "firing"]);
				fallthrough;

			case "automatons" (remove):
				say("\"My Master is one of the wealthiest Mundanes in Moonshade. There is no comparison to the Mages, of course. We have three automatons -- one for sewing, one for blacksmith work, and one for baking.\"");
				if (!Func0942(DUCIO)) {
					say("\"That is what my Master actually specializes in... making everyone else do his work!\"");
				}
				add(["Mages", "Mundanes"]);
				fallthrough;

			case "Mages" (remove):
				say("\"That is where the true money lies in Moonshade, ",
					var0000,
					". But if thou dost not possess magic, thou must work for a living...\"");
				if (!Func0942(DUCIO)) {
					say("\"Unless thou art my Master, that is!\"");
				}
				say("\"The only thing a lowly Mundane can hope for is to be able to afford an automaton from Torrissio, to help with the work load.\"");
				add("Torrissio");
				fallthrough;

			case "Torrissio" (remove):
				say("\"Torrissio is the Adept that makes the automatons. No one knows how he does it...\"");
				if (Func0942(DUCIO)) {
					DUCIO->show_npc_face1(0x0000);
					say("\"Art thou a Mage, Topo?\"");
					0x0000->set_conversation_slot();
					say("\"No, master... I am a Mundane apprentice.\"");
					0x0001->set_conversation_slot();
					say("\"Then thou dost not know what a Mage may or may not know!\"");
					UI_remove_npc_face1();
					0x0000->set_conversation_slot();
					say("\"Yes, master...\"");
				}
				say("\"Though most of the automatons Torrissio makes are strictly utilitarian, he is capable of making far more sophisticated models... Thou hast only to look at Petra.\"");
				add("Adept");
				fallthrough;

			case "Adept" (remove):
				say("\"Those who are blessed with magical ability are not all equal, ",
					var0000,
					". Some, like Andrio, are novices who still have yet to learn their craft. And some, like Stefano, have little power to command even after they learn.\"");
				add(["Andrio", "Stefano"]);
				fallthrough;

			case "Andrio" (remove):
				say("\"Andrio is my friend... which is surprising since he is also a novice Mage. Perhaps the outrageous arrogance hath not developed in him yet.\"");
				if (Func0942(DUCIO)) {
					DUCIO->show_npc_face1(0x0000);
					say("\"Enough talk! Back to work!\"");
					UI_remove_npc_face1();
					0x0000->set_conversation_slot();
					say("\"Yes, master...\"");
				}
				fallthrough;

			case "Stefano" (remove):
				say("\"Thou wouldst like Stefano, I'm certain! Although he can cast a spell or two, he is not very good at it. So he makes his living by stealing things from one Mage for another.\"");
				say("\"'Tis actually very amusing. He shuns his magic and those who would look down on him must deal with him to acquire things they want... Perhaps there is some justice in the world, after all.\"");
				if (Func0942(DUCIO)) {
					DUCIO->show_npc_face1(0x0000);
					say("\"How many times have I told thee to stay away from that thief, boy?! Dost thou think stealing is funny?\"");
					0x0000->set_conversation_slot();
					say("\"Nooo, master...\"");
					0x0001->set_conversation_slot();
					say("\"I should hope not! Or I'd break thine head for thee!\"");
					UI_remove_npc_face1();
					0x0000->set_conversation_slot();
					say("\"Yes, master...\"");
				} else {
					say("\"Now, if only someone would turn Ducio into a workbench, it would be the most useful he's ever been!\"");
				}
				fallthrough;

			case "Mundanes" (remove):
				say("\"That is the title that Mages give those who cannot cast spells, ",
					var0000,
					". They assume that there is little to note of a person's life if it is not spent in pursuit of magic and pomposity.\"");
				say("\"Yet they will never know the thrill of having a fine pot shape itself under their hand from a formless piece of mud...\"");
				if (Func0942(DUCIO)) {
					DUCIO->show_npc_face1(0x0000);
					say("\"Mud?! Mud! Back to work! Thou must lack for things to do...\"");
					UI_remove_npc_face1();
					0x0000->set_conversation_slot();
					say("\"Yes, master... I mean, no, Master...\"");
				}
				fallthrough;

			case "slip" (remove):
				say("\"Slip is the wet clay that is formed into cups, or plates, or jugs... Almost anything! If thou hast a patient enough hand, thou canst create a world of goods from mere clay.\"");
				if (!Func0942(DUCIO)) {
					say("\"And heavens know that I'm patient enough... dealing with my slug of a Master!\"");
				}
				fallthrough;

			case "firing" (remove):
				say("\"Firing is where a piece of shaped clay is turned into the ceramic utensils thou art familiar with. By heating the clay to a great temperature, the water dries from the piece and it becomes tough and resilient.\"");
				say("\"But if the piece is heated or cooled too quickly, it becomes brittle and fragile. 'Tis a very exacting task.\"");
				if (Func0942(DUCIO)) {
					DUCIO->show_npc_face1(0x0000);
					say("\"Who made thee a teacher, apprentice?! Back to work!\"");
					UI_remove_npc_face1();
					0x0000->set_conversation_slot();
					say("\"Yes, master...\"");
				}
				fallthrough;

			case "Ducio" (remove):
				if (Func0942(DUCIO)) {
					say("\"Ducio is my Master. He produces the finest goods in all the city! His pottery is famed throughout the other islands as well...\"");
					DUCIO->show_npc_face1(0x0000);
					say("\"Enough bragging. Humility. Thou must learn humility.@\"");
					0x0000->set_conversation_slot();
				} else {
					say("\"If ever I believed in shape changing, I believe it with Ducio! That man is too lazy to be human... a slug, maybe. But a human, no.\"");
					say("\"If it weren't for me and the automatons, he'd have to join old Mosh out begging!\"");
					add("Mosh");
				}
				fallthrough;

			case "Mosh" (remove):
				say("\"Mosh is the town beggar. She's very ugly... and crazy, too.\"");
				say("\"She claims to be Columna's twin sister!\"");
				fallthrough;

			case "Columna" (remove):
				say("\"She is also known as the Green Enchantress. She's quite pretty, in her own way. For a Mage...\"");
				fallthrough;

			case "Ducio's whereabouts" (remove):
				if (var0001 > 0x0005) {
					say("\"The Master doth dine at the inn at this hour. Thou canst find him there.\"");
					say("\"Canst thou imagine? He doth leave his\tapprentice here, with nothing but a loaf of dry bread, while he doth gorge himself on Petra's baked fish!\"");
					add(["inn", "Petra"]);
				} else if (var0001 < 0x0003) {
					say("\"No doubt the Master is yet at home, getting his rest after a long day.\"");
					say("\"Yet I, who work far harder and longer than he, must be here promptly at dawn.\"");
					say("\"'Tis a dirty business, this apprenticeship thing. I despise it.\"");
				} else {
					say("\"I haven't a clue, except that I'm here doing all of the work, and he's not.\"");
				}
				fallthrough;

			case "inn" (remove):
				say("\"The Blue Boar inn. 'Tis in the northern part of the city, just west of the Palace. Many of the Mages eat there as well.\"");
				say("\"Thou canst bargain Rocco down on his prices, if thou dost try hard enough.\"");
				add("Rocco");
				fallthrough;

			case "Rocco" (remove):
				say("\"Rocco is the innkeeper at the Blue Boar. He's a gruff man, whose sole pleasure in life seems to be haggling. Well, besides Petra, that is.\"");
				fallthrough;

			case "Petra" (remove):
				say("\"Petra is an automaton. She is Torrissio's master work... She looks exactly like a real woman, but of metal. She's quite remarkable.\"");
				say("\"Petra looks after Rocco, and cooks for the inn. In fact, she serves the finest baked fish around. Thou shouldst try it some time.\"");
				fallthrough;

			case "urn" (remove):
				say("\"As thou hast probably deduced, I am an expert\tcraftsman -- particularly with pots and urns.\"");
				say("\"Show me thine urn, and I shall unlock its secrets for thee.\"");
				if (Func0942(DUCIO)) {
					Func094E(DUCIO, "@Don't be so boastful. Thou art making a\r\n\t\t\t\t\t\tfool of thyself!@");
					0x0000->set_conversation_slot();
					say("\"Yes, master.\"");
				}
				if (Func097D(PARTY, 0x0001, 0x0392, QUALITY_ANY, 0x0000)) {
					say("\"Indeed. Note the simple scrollwork, the plain\tglazing, the orange hue of the clay...\"");
					say("\"Now look within. Dost thou see the ashes which fill this urn?\"");
					say("\"Thou dost carry the funeral remains of one of\tthe good citizens of Monitor, the warrior city.\"");
					gflags[KNOWS_URN_ORIGIN] = true;
					Func094E(DUCIO, "@They'll want it back. Monitorians revere\r\n\t\t\t\t\t\ttheir dead.@");
					0x0000->set_conversation_slot();
					add("Monitor");
				} else {
					var0006 = Func0992(IOLO, "@But we don't have it with\r\n\t\t\t\t\t\t\t\tus...@", "@I've not brought it with me.@", false);
					0x0000->set_conversation_slot();
					say("\"Bring it by, and I shall give thee thine answer.\"");
				}
				fallthrough;

			case "Monitor" (remove):
				say("\"I have never left Moonshade, ",
					var0000,
					", so I don't know much about it. I'm told that all the citizens of Monitor are mighty warriors. Though that sounds a bit odd, to me.\"");
				say("\"Couldst thou imagine what would happen if thou wert to disagree with a shopkeeper over the prices of his wares? Why, thou couldst find thyself very dead! Or badly hurt at the least...\"");
				say("\"Thou couldst see if Hawk is at the Blue Boar. He's a sailor and might know more than a man who's never left this island.\"");
				if (Func0942(DUCIO)) {
					DUCIO->show_npc_face1(0x0000);
					say("\"Since when art thou a guide? Back to work!\"");
					UI_remove_npc_face1();
					0x0000->set_conversation_slot();
					say("\"Yes, master...\"");
				}
				fallthrough;

			case "apparatus" (remove):
				say("\"Zounds, I don't know... 'Tis like nothing I've seen before.\"");
				fallthrough;

			case "slippers" (remove):
				say("\"Definitely do not look like anything that a Mage would have lost. They have much more expensive tastes...\"");
				say("\"Thou couldst try asking Bucia, though. If anyone might know where these slippers came from, it would be her.\"");
				add("Bucia");
				fallthrough;

			case "Bucia" (remove):
				say("\"Bucia runs the Capessi Canton for Flindo. She is the provisioner here in Moonshade. She will be able to tell thee who buys what, I'm sure. Bucia adores gossip...\"");
				if (Func0942(DUCIO)) {
					DUCIO->show_npc_face1(0x0000);
					say("\"Thou art a fine one to talk! Work! Or I shall rip out thy tongue!\"");
					UI_remove_npc_face1();
					0x0000->set_conversation_slot();
					say("\"Yes, master...\"");
				}
				fallthrough;

			case "strange brush" (remove):
				say("\"As an expert craftsman, I can tell thee what most materials are, if I can examine the item.\"");
				if (Func0942(DUCIO)) {
					Func094E(DUCIO, "@Thou art a braggart. Thou art trying my\r\n\t\t\t\t\t\tpatience!@");
					0x0000->set_conversation_slot();
					say("\"Yes, master.\"");
				}
				if (Func097D(PARTY, 0x0001, 0x011D, QUALITY_ANY, 0x0005)) {
					say("\"Odd brush... Certainly doth not seem like anything a lady would want.\"");
					say("\"Look. See how porous the handle is... This definitely isn't wood. And I don't think it would last with strenuous use.\"");
					say("\"From the looks of it, ",
						var0000,
						", I'd say that it was made of bone. Thou couldst ask Mortegro, to be sure though.\"");
					add("Mortegro");
				} else {
					var0006 = Func0992(IOLO, "@But it's not here...@", "@I've not brought it with me.@", false);
					0x0000->set_conversation_slot();
					say("\"Bring it with thee some time and I shall tell thee what it is made of.\"");
				}
				fallthrough;

			case "Mortegro" (remove):
				say("\"Mortegro is an Adept that specializes in the realm of the dead. He's a bit eerie, but if that truly is bone, he would be able to tell thee for sure.\"");
				say("\"Last time I heard, Mortegro was helping Gustacio on some sort of weather experiment. Thou mightest look for him there, or at the Blue Boar.\"");
				fallthrough;

			case "buy":
				if (TOPO->get_schedule_type() == WANDER) {
					Func086F();
				} else {
					say("\"If thou wouldst talk to me when I am at work, I would gladly sell thee something.\"");
				}
				fallthrough;

			case "sell gems":
				if (TOPO->get_schedule_type() == WANDER) {
					Func086E();
				} else {
					say("\"I can buy thy gems when I am at work, ",
						var0000,
						".\"");
				}
				remove("sell gems");
				fallthrough;

			case "bye":
				UI_remove_npc_face0();
				Func097F(AVATAR, "@So long!@", 0x0000);
				Func097F(TOPO, "@Come again!@", 0x0002);
				Func08FF();
				break;
		}
	}
}

extern var Func0954 0x954 ();
extern var Func0953 0x953 ();
extern void Func07D1 object#(0x7D1) ();
extern void Func097F 0x97F (var var0000, var var0001, var var0002);
extern var Func097D 0x97D (var var0000, var var0001, var var0002, var var0003, var var0004);
extern void Func0871 0x871 ();
extern var Func0955 0x955 ();
extern void Func0986 0x986 (var var0000, var var0001);
extern var Func09A0 0x9A0 (var var0000, var var0001);
extern var Func099B 0x99B (var var0000, var var0001, var var0002, var var0003, var var0004, var var0005, var var0006);
extern void Func08FF 0x8FF ();
extern void Func0636 object#(0x636) ();

void Func0421 object#(0x421) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;
	var var0008;
	var var0009;
	var var000A;
	var var000B;
	var var000C;
	var var000D;
	var var000E;
	var var000F;
	var var0010;
	var var0011;
	var var0012;
	var var0013;

	var0000 = Func0954();
	var0001 = UI_is_pc_female();
	var0002 = Func0953();
	var0003 = false;
	var0004 = UI_part_of_day();
	if ((var0004 > EARLY) || (var0004 < EVENING)) {
		var0004 = "day";
	} else {
		var0004 = "evening";
	}
	var0005 = false;
	if ((event == DEATH) && get_item_flag(SI_TOURNAMENT)) {
		var0006 = script item {
			nohalt;
			call Func0329;
		};
	}
	if (event == DOUBLECLICK) {
		AVATAR->item_say("@Might we speak?@");
		TORRISSIO->Func07D1();
		Func097F(TORRISSIO, "@Make it brief...@", 0x0002);
		TORRISSIO->set_schedule_type(TALK);
	}
	if (event == STARTED_TALKING) {
		TORRISSIO->run_schedule();
		TORRISSIO->clear_item_say();
		TORRISSIO->show_npc_face0(0x0000);
		var0007 = TORRISSIO->get_item_flag(MET);
		if (var0007 == false) {
			TORRISSIO->set_item_flag(MET);
			say("\"I am Torrissio, a Mage of Moonshade.\"");
		}
		say("\"I am not a sociable man, so this will be brief. What dost thou desire of me, and at what price?\"");
		if (gflags[FOUND_PHILANDERERS_FRIEND] && (!gflags[TORRISSIO_HAS_MAGIC_WAND])) {
			add("magic wand");
		}
		if (gflags[KNOWS_ABOUT_PHILANDERERS_FRIEND]) {
			add("magic wand");
		}
		if (gflags[SEEKING_SOUL_TRAP_SECRET] && (!gflags[KNOWS_OF_SOUL_GEMS])) {
			add("soul trapping");
		}
		if (gflags[HAS_CLUE_LAB_APPARATUS] && (!gflags[KNOWS_LAB_APPARATUS_OWNER])) {
			add("apparatus");
		}
		if (gflags[HAS_BAD_CLUE_SLIPPERS] && (!gflags[KNOWS_SLIPPERS_OWNER])) {
			add("slippers");
		}
		if (gflags[KNOWS_OF_SOUL_GEMS]) {
			add("Worm Gems");
		}
		if (gflags[KNOWS_ROTOLUNCIA_IS_KIDNAPPER] && (!ROTOLUNCIA->get_item_flag(DEAD))) {
			add("kidnap");
		}
		if (gflags[CAUGHT_WITH_FRIGIDAZZI] && (!STEFANO->get_item_flag(DEAD))) {
			add("Stefano");
		}
		if (Func097D(PARTY, 0x0001, 0x02A5, QUALITY_ANY, 0x0000) && (!gflags[TORRISSIO_HAS_MOONSILK_STOCKINGS])) {
			add("stockings");
		}
		if (gflags[KNOWS_FEDABIBLIO_IS_STATUE]) {
			add("help Fedabiblio");
		}
		add(["Torrissio"]);
		converse ("bye") {
			case "kidnap" (remove):
				if (gflags[TORRISSIO_KIDNAP_SUSPECT]) {
					say("\"So thou dost suspect me of taking thy companion, ",
						var0002,
						"? And thou dost dare to confront me -- a Mage!\"");
					say("\"I am flattered by the suspicions, but alas... I am innocent in this case.\"");
					if (SERV_03->npc_nearby()) {
						say("\"As thou canst surely see, thy companion is not being held prisoner in my manor. Look around at thy pleasure.\"");
					} else {
						say("\"Search my manor! I have no prisoners there...\"");
					}
					Func097F(TORRISSIO, "@Now leave me alone...@", 0x0000);
					TORRISSIO->set_schedule_type(WANDER);
					abort;
				}
				say("\"Such poor luck, ",
					var0002,
					"... to have angered one of the Mages of Moonshade...\"");
				say("\"Could it be Mortegro, he for whom the cold sensations of death are more vivid than life?\"");
				gflags[MORTEGRO_KIDNAP_SUSPECT] = true;
				say("\"And what of Rotoluncia? She dislikes thee -- everyone knows it.\"");
				say("\"If I were thee, I would speak to MageLord Filbercio about this matter. Mages are involved, so thy duty is clear.\"");
				gflags[SHOULD_TELL_FILBERCIO_OF_KIDNAP] = true;
				fallthrough;

			case "Torrissio" (remove):
				say("\"I am Torrisso of Moonshade, Adept Mage and master of life spells.\"");
				add(["Moonshade", "Adept Mage", "life spells"]);
				fallthrough;

			case "Moonshade" (remove):
				say("\"Moonshade is in many ways a perfect city, a perfect example of civilization with that highest form of government -- a Magocracy.\"");
				add("Magocracy");
				fallthrough;

			case "Adept Mage" (remove):
				say("\"I come from one of the longest family lines of mages in all of the Serpent Isle. That is how one tells a good mage, thou must know -- by his family line. Good mages are a result of good breeding. My father always said that.\"");
				add("family line");
				fallthrough;

			case "family line" (remove):
				say("\"A thousand years ago, our ancestors performed tricks to amuse peasants. Hundreds of years ago they were the most trusted advisors to Kings and rulers of the land. When it comes to magic the only bloodline more pure than mine is that of the ruling family. Of course, my family was decimated in the old war. If not for that, I might be ruler today.\"");
				add(["ruling family", "old war"]);
				fallthrough;

			case "apparatus" (remove):
				var0008 = Func097D(PARTY, 0x0001, 0x02ED, QUALITY_ANY, 0x0001);
				if (var0008) {
					say("\"That looks like the sort of equipment used by Erstam, the Mad Mage! He lives at the place called Mad Mage Island.\"");
					gflags[KNOWS_LAB_APPARATUS_OWNER] = true;
				} else {
					say("\"If thou had the item I am certain I could tell thee more about it.\"");
				}
				fallthrough;

			case "slippers" (remove):
				say("\"I would ask about them at the Inn of Sleeping Bull if I were thee.\"");
				fallthrough;

			case "ruling family" (remove):
				say("\"That would be the bloodline of the MageLord of Moonshade, Filbercio.\"");
				fallthrough;

			case "old war" (remove):
				say("\"According to family records, most of my family members were killed fighting the Daemons. This is the war which brought an end to the Age of the Two Kings.\"");
				fallthrough;

			case "life spells" (remove):
				say("\"My personal specialty is spells involving healing and the sustenance of life energies.\"");
				add("buy spells");
				fallthrough;

			case "Magocracy" (remove):
				say("\"A government totally controlled by Mages is the only sensible form of government. Mages have a holistic understanding of the world that makes them far more suited to the responsibilities of government than any mundane could ever be. With Filbercio at the head of the Council of Mages, things are accomplished quickly with a minimum of politics.\"");
				add(["Council of Mages", "Filbercio", "politics"]);
				fallthrough;

			case "buy spells":
				if (gflags[TORRISSIO_HATES_AVATAR]) {
					remove("buy spells");
					say("\"Thou hast betrayed me and betrayed my lover by giving her stolen property to Filbercio for a mere pittance of profit! Now thou dost expect me to help thee?! Begone from my sight!\"");
					abort;
				}
				if (var0003 == false) {
					say("\"Of course I can sell thee a spell! I have recently sold a spell to another person passing through Moonshade. It is just such a business upon which the city of Moonshade was built. With all of the experiments and developments we produce here in the magical arts, we are practically the center of the world.\"");
					var0003 = true;
				}
				Func0871();
				add(["Sold to whom?", "experiments"]);
				fallthrough;

			case "Sold to whom?" (remove):
				say("\"Why, that fat sage that passed through town a while ago. Batlin. I remember not the specifics of the transaction.\"");
				fallthrough;

			case "experiments" (remove):
				say("\"I do not wish to violate the privacy of a fellow mage, but there is at least one mage in town working on solving the mystery of these distressing teleport storms.\"");
				fallthrough;

			case "Council of Mages" (remove):
				say("\"Do not even raise this topic -- I have no stomach for the political games which one must play in order to win a seat on the Council.\"");
				fallthrough;

			case "Filbercio" (remove):
				say("\"He is a shrewd and stern ruler. A highly skilled mage. He is not someone thou wouldst want to cross.\"");
				fallthrough;

			case "politics" (remove):
				say("\"Of course, nothing ever gets done without a little politics.");
				if (ROTOLUNCIA->get_item_flag(DEAD)) {
					say("\"I was allied with Rotoluncia, but her death makes our partnership void.\"");
				} else {
					say("\"One's enemies and allies are constantly shifting. That is why Rotoluncia and I have formed a sort of coalition, wherein we both work to protect each other's best interests.\"");
					add(["Rotoluncia", "allies and enemies"]);
				}
				fallthrough;

			case "Rotoluncia" (remove):
				say("\"Of course, our working together hath led to a few rumors -- such is the way of politics. But even partners disagree. For instance, she is convinced that there is some sort of connection between thee and this other stranger who visited us -- Batlin.\"");
				add(["partners", "Batlin"]);
				fallthrough;

			case "allies and enemies" (remove):
				say("\"Of course, in the realm of politics as well as the realm of magic what is one today may very well be the other tomorrow!\"");
				fallthrough;

			case "partners" (remove):
				say("\"Partners with Rotoluncia in politics. But partners with Columna in love.\"");
				add("Columna");
				fallthrough;

			case "Batlin" (remove):
				say("\"Rotoluncia was quite repulsed yet fascinated with Batlin and his secrets. To think of it makes me wish to offer thee a word of advice.\"");
				add(["secrets", "advice"]);
				fallthrough;

			case "secrets" (remove):
				say("\"While Batlin was here, he exhibited some sort of power or talent or knowledge. Rotoluncia is now obsessed with it although she will not speak much about this with me.\"");
				fallthrough;

			case "advice" (remove):
				say("\"Rotoluncia is not the sort of woman that thou dost want angry at thee. Mine advice to thee is that whatever she wants, thou shouldst give it to her.\"");
				fallthrough;

			case "Columna" (remove):
				say("\"Our love must remain a secret. This saddens her, and myself as well. There are those who would come between us, who plan against us. Her heart was touched by a song sung by the lady Gwenno.\"");
				add(["plan against thee", "Gwenno"]);
				fallthrough;

			case "plan against thee" (remove):
				say("\"I do not wish to burden thee with my personal problems. The less said of these things, the better.\"");
				fallthrough;

			case "Gwenno" (remove):
				say("\"She came passing through our city several weeks ago. From what I hear, she is a most unusual and interesting woman.\"");
				fallthrough;

			case "Stefano" (remove):
				say("\"Columna and I have received information that it was Stefano who attempted to destroy our love by stealing her stockings from my manor house.\"");
				if (gflags[AVATAR_ESCAPED_FREEDOM]) {
					say("\"Now that he hath dared to show his face again, it shall be him who is destroyed. Columna and I have already seen to that!\"");
				} else {
					say("\"When Filbercio sentenced him to death in the Mountains of Freedom, I laughed until blood ran from mine eyes!\"");
					say("\"It will serve that cretin good, to be entombed with the rats and maggots in that prison.\"");
				}
				fallthrough;

			case "stockings" (remove):
				if (var0001) {
					if (gflags[REFUSED_TO_GIVE_MOONSILK_STOCKINGS]) {
						// I see no way other than this
						goto labelFunc0421_0614;
					}
					say("\"I beseech thee to turn over to me that which is the instrument of humiliation against a woman who hath done thee no harm. They belong to my lover Columna and they were stolen by the bandit Stefano. Columna's stockings can be used as evidence of our affair. I neither know nor care how thou hast come into possession of them. But know this: I shall have them!\"");
					say("\"Those stockings are of no use to thee. I know thou wilt do the proper thing. Within thy chest beats a human heart. Thou art a woman of feelings.\"");
					say("\"So too am I a man stirred by strong emotions. Give unto me this thing, and together we shall share a night of passion the likes of which have never before been told in story or song.\"");
					say("\"Surrender those stockings to me.\"");
					do {
						var0009 = Func0955();
						if (var0009) {
							var000A = UI_remove_party_items(0x0001, 0x02A5, QUALITY_ANY, 0x0000, 0x0000);
							say("\"Excellent! First let us enjoy some wine! Wilt thou accept this glass of fine wine?\"");
							if (var000A) {
								gflags[TORRISSIO_HAS_MOONSILK_STOCKINGS] = true;
							}
							if (Func0955()) {
								AVATAR->set_item_flag(ASLEEP);
								var000B = 0x0006 + UI_die_roll(0x0000, 0x0009);
								UI_fade_palette(0x000C, 0x0001, 0x0000);
								TORRISSIO->move_object([0x0610, 0x078F, 0x0000]);
								var000C = var000B * 0x05DC;
								Func0986(var000B, item);
								var0006 = script Func09A0(0x0005, 0x0001) after 33 ticks {
									nohalt;
									call Func0636;
								};
								var0006 = script AVATAR after 35 ticks {
									nohalt;
									say "@Oh, my head...@";
								};
								abort;
							}
							say("\"Thou dost not trust me, eh? So be it...\" *\"Ha! The stockings are now mine!\"");
							break;
						}
						if (!gflags[REFUSED_TO_GIVE_MOONSILK_STOCKINGS]) {
							say("\"Thou dost not trust me? Then be on thy way! All I wanted were the stockings...\"");
							say("\"After all, Columna is more of a woman than thou canst ever hope to be.\"");
							gflags[REFUSED_TO_GIVE_MOONSILK_STOCKINGS] = true;
							break;
						}
						say("\"Bah! Thou art only trying to taunt me! Leave me at once!\"");
						abort;
labelFunc0421_0614:
						say("\"I ask thee again -- surrender those stockings to me!\"");
					} while (true);
				} else {
					if (gflags[REFUSED_TO_GIVE_MOONSILK_STOCKINGS]) {
						// I see no way other than this
						goto labelFunc0421_06AC;
					}
					say("\"I shall be frank with thee. I want the stockings to protect the honor of the woman I love. The stockings rightfully belong to my lover Columna, but they were stolen by the bandit Stefano. I neither know nor care how thou hast come into possession of them, but I must have them from thee.\"");
					say("\"As thou dost have something I want, then I am obliged to provide something to thee that thou couldst want.\"");
					say("\"I offer thee one of my spells in exchange for the stockings. If thou dost accept, then give them to me.\"");
					do {
						var000D = Func0955();
						if (var000D) {
							var000E = UI_remove_party_items(0x0001, 0x02A5, QUALITY_ANY, 0x0000, 0x0000);
							say("\"Ha! Now I have what I want and I did not have to give thee a thing! Thou art not dealing with a child here!\"");
							Func097F(TORRISSIO, "@I have them!@", 0x0000);
							TORRISSIO->set_schedule_type(SHY);
							if (var000E) {
								gflags[TORRISSIO_HAS_MOONSILK_STOCKINGS] = true;
							}
							abort;
						}
						if (!gflags[REFUSED_TO_GIVE_MOONSILK_STOCKINGS]) {
							say("\"Thou art as cold-hearted as any man I have ever met! I can no longer tolerate thy company.\"");
							gflags[REFUSED_TO_GIVE_MOONSILK_STOCKINGS] = true;
							abort;
						}
						say("\"Bah! Thou art only trying to taunt me! Leave me at once!\"");
						abort;
						// Dead code
						Func097F(TORRISSIO, "@Begone, foul knave.@", 0x0000);
						TORRISSIO->set_schedule_type(WANDER);
labelFunc0421_06AC:
						say("\"I ask thee again -- surrender those stockings to me!\"");
					} while (true);
				}
				fallthrough;

			case "help Fedabiblio" (remove):
				say("\"If thou dost think I will help thee, then the madness that hath seemingly infected the entire world hath also infected thy brain. I suggest thou dost have it removed.\"");
				Func097F(FEDABIBLIO, "@Be gone!@", 0x0000);
				abort;

			case "soul trapping" (remove):
				say("\"So thou dost seek to learn the ancient art of imprisoning souls within gems? I can give this to thee, for a price -- but I warn thee, the outcome may not be what thou dost expect.\"");
				add(["ancient art", "price", "outcome"]);
				fallthrough;

			case "ancient art", "ask" (remove):
				if (gflags[TORRISSIO_HAS_MAGIC_WAND]) {
					say("\"Knowledge shall be thine, Avatar. The secret is that souls can be imprisoned within gems. Only Worm Gems will do, and even these must first be enchanted with the spell which I give thee now.\"");
					gflags[KNOWS_OF_WORM_GEMS] = true;
					say("\"On this scroll, thou shalt find the spell for creating Soul Prisms. Transcribe this to thy spellbook at the first opportunity, for I shall not give thee another!\"");
					gflags[KNOWS_OF_SOUL_GEMS] = true;
					var000F = Func099B(AVATAR, 0x0001, 0x02CB, 0x001B, 0x0000, 0x0000, true);
					add("Worm Gems");
				} else {
					say("\"Pay the price, the Philanderer's Friend, and I shall reward thee!\"");
					say("\"For now, I shall merely say that this spell was used by the ancient inhabitants of this land. They would remove their souls from their bodies, and place them within inanimate objects.\"");
				}
				fallthrough;

			case "price" (remove):
				if (gflags[FOUND_PHILANDERERS_FRIEND]) {
					if (gflags[TORRISSIO_HAS_MAGIC_WAND]) {
						if (gflags[KNOWS_OF_SOUL_GEMS]) {
							say("\"Why, I already gave thee my prize! What more dost thou expect?\"");
						} else {
							say("\"Then again, thou didst restore the wand to me -- and the Philanderer's Friend is a great prize...\"");
							say("\"Thou hast paid the price, I shall grant thee thy desires. Thou hast but to ask.\"");
							remove("ancient art");
							add("ask");
						}
					} else {
						say("\"Thou hast something which I want very much, Avatar! I detect that thou hast come into contact with a magical artifact which was taken from me -- the Philanderer's Friend, a wand of mysterious powers.\"");
						say("\"Deliver the wand to me, and thou shalt have thy desires!\"");
					}
				} else {
					say("\"Sadly, thou hast nothing that I desire. I have no need for gold, and thou dost not know any spells which I crave...\"");
					say("\"Ah, but thou art a strong warrior! I have an idea.\"");
					say("\"An item was stolen from me, a wand which is great in the magic which it controls. Bring it to me, and I shall aid thee.\"");
					say("\"The wand is known as the Philanderer's Friend. I know not where it lies. Good luck, adventurer!\"");
				}
				fallthrough;

			case "outcome" (remove):
				say("\"Thou art not the first to seek this secret from me, adventurer! That fat fool Batlin purchased it from me, too.\"");
				say("\"And I gave him this warning: The gems are not powerful enough to contain any soul of great power. Should they fail, the soul released shall be very angry...\"");
				fallthrough;

			case "Worm Gems" (remove):
				say("\"Such gems are made, not found in nature. Seek out Ducio the Artisan, if he yet lives -- he fashions the gems for me, when I have need of them.\"");
				var0010 = Func097D(PARTY, 0x0001, 0x0326, QUALITY_ANY, 0x0000);
				if ((!gflags[FIXED_BLACK_SWORD]) && var0010) {
					say("\"It is a pity that the gem upon thy sword is broken. It looks remarkably like the Worm Gems that Ducio fashions. Perhaps he can repair it for thee...\"");
				}
				fallthrough;

			case "magic wand" (remove):
				var0011 = FEDABIBLIO->get_schedule_type();
				if (!gflags[FOUND_PHILANDERERS_FRIEND]) {
					if (var0011 == WAIT) {
						say("\"I no longer have the Philanderer's Friend, else I would certainly aid thee in helping the good Fedabiblio. It was stolen from me. I do not know for sure, but I suspect mine old enemy Vasculio of the crime.\"");
					}
				} else if (!gflags[TORRISSIO_HAS_MAGIC_WAND]) {
					say("\"I perceive that thou hast the device stolen from me years ago. It is called the Philanderer's Friend -- I'm not sure why, but someday I shall understand its secrets.\"");
					if (UI_remove_party_items(0x0001, 0x03A1, QUALITY_ANY, FRAME_ANY, false)) {
						say("\"Good! Thou hast brought it with thee -- and now I shall take it!\"");
						var0012 = AVATAR->get_object_position();
						AVATAR->obj_sprite_effect(ANIMATION_GREEN_BUBBLES, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, LOOP_ONCE);
						var0013 = TORRISSIO->add_cont_items(0x0001, 0x03A1, QUALITY_ANY, FRAME_ANY, false);
						TORRISSIO->set_schedule_type(SHY);
						Func097F(TORRISSIO, "@I have it!@", 0x0000);
						gflags[TORRISSIO_HAS_MAGIC_WAND] = true;
						abort;
					}
					say("\"It is my rightful property and I shall have it back!\"");
				}
				fallthrough;

			case "bye":
				UI_remove_npc_face0();
				Func097F(AVATAR, "@So long!@", 0x0000);
				Func097F(TORRISSIO, "@Don't steal anything...@", 0x0002);
				Func08FF();
				break;
		}
	}
}

extern var Func0954 0x954 ();
extern var Func0953 0x953 ();
extern void Func0936 0x936 (var var0000, var var0001);
extern void Func092E 0x92E (var var0000);
extern void Func07D1 object#(0x7D1) ();
extern void Func097F 0x97F (var var0000, var var0001, var var0002);
extern var Func0992 0x992 (var var0000, var var0001, var var0002, var var0003);
extern void Func080A 0x80A ();
extern var Func0955 0x955 ();
extern void Func09B4 0x9B4 (var var0000);

void Func0422 object#(0x422) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;
	var var0008;
	var var0009;
	var var000A;
	var var000B;
	var var000C;
	var var000D;
	var var000E;
	var var000F;
	var var0010;
	var var0011;
	var var0012;
	var var0013;

	var0000 = Func0954();
	var0001 = Func0953();
	var0002 = SHAMINO->get_item_flag(IN_PARTY);
	var0003 = IOLO->get_item_flag(IN_PARTY);
	var0004 = DUPRE->get_item_flag(IN_PARTY);
	var0005 = BOYDON->get_item_flag(IN_PARTY);
	var0006 = BOYDON->get_item_flag(MET);
	var0007 = BOYDON->get_item_flag(DEAD);
	if ((event == DEATH) && gflags[MONITOR_TRAINING]) {
		var0008 = BOYDON->get_oppressor();
		var0008 = 0x0000 - var0008;
		if (!gflags[TEMP_FLAG_1]) {
			gflags[TEMP_FLAG_1] = true;
			Func0936(var0008->get_npc_object(), BOYDON->get_npc_object());
			return;
		}
		Func092E(item);
		return;
	}
	if ((event == DEATH) && BOYDON->get_item_flag(SI_TOURNAMENT)) {
		BOYDON->clear_item_flag(SI_TOURNAMENT);
		var0009 = BOYDON->get_object_position();
		UI_play_sound_effect(0x002A);
		var0009[0x0001] -= var0009[0x0003] / 0x0002;
		var0009[0x0002] -= var0009[0x0003] / 0x0002;
		UI_sprite_effect(ANIMATION_BIG_RING_BLAST, var0009[0x0001], var0009[0x0002], 0x0000, 0x0000, 0x0000, LOOP_ONCE);
		var0009 = BOYDON->get_object_position();
		BOYDON->kill_npc();
		var000A = UI_create_new_object(0x031F);
		if (var000A) {
			var000A->set_item_frame(0x0012);
			var000B = UI_update_last_created(var0009);
			var000B = script var000A {
				nohalt;
				say "@My beautiful body!!@";
			};
		}
		var000C = 0x0001;
		var000D = [0x0006, 0x000C, 0x0012, 0x0018];
		var000E = [ 4, -5, -3,  5,  0, -2,  1,  5,  5,  5, -5,  4,  3,  2,  1,  5,  1,  0,  0,  2,  2,  2,  1, -3,  0,  3,  2,  3, -1,  4,  4,  4];
		var000F = [ 1, -2,  1, -5,  1, -4,  4, -4, -3,  2,  1, -5,  5,  5,  5,  0,  5,  1,  2,  0,  2,  1,  2,  0,  3,  2, -3,  1,  3,  4,  3,  2];
		while (var000C < 0x0005) {
			var0010 = 0x0000;
			var000A = UI_create_new_object(0x031A);
			if (var000A) {
				var000A->set_item_frame(var000D[var000C]);
				while (var0010 < 0x001A) {
					var0011 = [(var0009[0x0001] + var000E[var0010]), (var0009[0x0002] + var000F[var0010]), var0009[0x0003]];
					if (UI_is_not_blocked(var0011, 0x031F, 0x0000)) {
						var000C += 0x0001;
						var0010 = 0x001B;
						var000B = UI_update_last_created(var0011);
						var000A = UI_create_new_object(0x0390);
						if (var000A) {
							var000A->set_item_frame(UI_die_roll(0x0000, 0x0003));
							var0011 = [((var0009[0x0001] + var000E[var0010]) + 0x0001), ((var0009[0x0002] + var000F[var0010]) + 0x0001), var0009[0x0003]];
							var000B = UI_update_last_created(var0011);
						}
					} else {
						var0010 += 0x0001;
					}
				}
			}
		}
	}
	if (event == DOUBLECLICK) {
		AVATAR->item_say("@Ahem...@");
		BOYDON->Func07D1();
		Func097F(BOYDON, "@Thou didst speak?@", 0x0002);
		BOYDON->set_schedule_type(TALK);
	}
	if (event == SCRIPTED) {
		event = STARTED_TALKING;
	}
	if (event == STARTED_TALKING) {
		if (item == BOYDON->get_npc_object()) {
			if (BOYDON->get_item_flag(IN_PARTY)) {
				BOYDON->set_schedule_type(FOLLOW_AVATAR);
				add("leave");
			} else {
				BOYDON->run_schedule();
				if (gflags[ERSTAM_LETS_BOYDON_JOIN]) {
					add("join");
				}
			}
			BOYDON->show_npc_face0(0x0000);
			if (BOYDON->get_npc_id() == 0x001E) {
				say("\"Master, I am grateful that thou dost still live! I have grown fond of thee, almost as a son looks upon a parent...\"");
				if (!gflags[AFTER_FREEDOM_NEWS]) {
					say("\"It might please thee to know that there is good news!\"");
					add("good news");
				}
				BOYDON->set_npc_id(0x0000);
				BOYDON->add_to_party();
				gflags[BOYDON_HAS_BELONGINGS] = true;
				remove("join");
				add(["leave"]);
			} else if (!var0006) {
				say("\"I have a body! I have a body!\"");
				BOYDON->set_item_flag(MET);
			} else {
				say("\"Hello, there!\"");
			}
		} else {
			BOYDON_HEAD->show_npc_face0(0x0000);
			say("\"Now I see thee. Greetings! I am Boydon, the Living Head.\"");
			if (!gflags[MET_BOYDON_AS_HEAD]) {
				var0012 = Func0992(IOLO, "The severed head speaks!", 0x0000, false);
				if (var0012 != AVATAR) {
					0x0000->set_conversation_slot();
					say("\"Yes, I do. Strange, is it not?\"");
				}
				gflags[MET_BOYDON_AS_HEAD] = true;
			}
		}
		if (gflags[BOYDON_HAS_BELONGINGS] && ((!BOYDON->get_item_flag(IN_PARTY)) && BOYDON->get_cont_items(SHAPE_ANY, QUALITY_ANY, FRAME_ANY))) {
			add("return my belongings");
		}
		converse (["name", "duties", "bye"]) {
			case "return my belongings" (remove):
				Func080A();
				fallthrough;

			case "good news" (remove):
				say("\"Master, I have taken the time to speak with the Mages of this place. I do believe that the one known as Gustacio is of\ta mind to aid thee.\"");
				say("\"He said that anyone who can survive Freedom is worthy of his time!\"");
				gflags[AFTER_FREEDOM_NEWS] = true;
				fallthrough;

			case "name" (remove):
				say("\"My name is Boydon.\"");
				fallthrough;

			case "duties" (remove):
				if (!gflags[BOYDON_LIVES]) {
					say("\"I am hardly capable of performing my duties now, I'm sorry to say. I was the assistant to Erstam, the one they call the Mad Mage -- dost thou know him? Wonderful fellow. Well, one night he woke me to help him with one of his experiments.\"");
					add(["Erstam", "experiments"]);
				} else if (var0007) {
					say("\"It seems I am no longer able to perform any duties save being an observer of thine adventures. But thank goodness Erstam chose me as the subject of his experiment! The man hath now saved my life twice over! As his one-time assistant, however, I can assure thee my body hath been destroyed beyond repair, and mine head will reject any new body that it might be attatched to. Oh, well! I am sorry that I can be of no further use to thee. If I squinch up my face I am fairly certain that I shall hardly take up any room in thy backpack.\"");
				} else {
					say("\"Actually, I do believe my job now is to be observed by a careful eye in order to judge the success of Erstam's experiment. Although now I am most certainly capable of many jobs.\"");
					if (!var0005) {
						var0012 = Func0992(DUPRE, ((("@My first job would be to " + "take a long hot bath. I swear some of those ") + "body parts must have been lying about ") + "Erstam's Manor for some time!@"), 0x0000, false);
						if (var0012 != AVATAR) {
							0x0000->set_conversation_slot();
						}
					}
					if (var0005) {
						say("\"I do hope I shall be of some assistance to thee as I travel with thee during thine adventures! I am having quite a bit of fun, actually.\"");
					}
					add(["observed", "many jobs"]);
				}
				fallthrough;

			case "Erstam":
				say("\"I found working for Erstam extremely interesting and most educational. Why, for example, my knowledge of anatomy hath improved so much. He is not exactly a friendly fellow, the Master, but there is never a dull moment.\"");
				remove("Erstam");
				fallthrough;

			case "experiments":
				say("\"Of course Erstam, having mastered the art of teleportation, hath turned his sights to the creation of life. On this particular night that I am remembering we went down to his lab. He pulled an abundance of levers and things... my memory begins to fade a bit after that. The next thing I remember is awakening in this condition.\"");
				remove("experiments");
				add(["teleportation", "creation of life", "condition"]);
				fallthrough;

			case "teleportation":
				say("\"Oh, I am afraid I cannot tell thee anything about that. After all, I was merely the Mad Mage's assistant.\"");
				remove("teleportation");
				fallthrough;

			case "creation of life":
				say("\"Is that not amazing? It doth go far beyond my comprehension of life and death. The mind fairly boggles at the ramifications of it.\"");
				remove("creation of life");
				fallthrough;

			case "condition":
				say("\"It is not so bad. I am never hungry because I do not have a stomach. I do not need to breathe because I do not have any lungs. I do sleep occasionally. Sometimes my nose itches. Nothing bothers me. Most people tend to find a talking severed head a bit unsettling. Right now I am enjoying talking to someone.\"");
				remove("condition");
				fallthrough;

			case "observed" (remove):
				say("\"Certainly someone should keep an eye on me. To make sure my new body will not start to fall apart. Not to worry, I feel strange, but very well indeed.\"");
				if (!var0005) {
					var0012 = Func0992(IOLO, (("@Thou dost not need to observe. " + "Not when the smell reaches one ") + "first! Phew!@"), 0x0000, false);
					if (var0012 != AVATAR) {
						0x0000->set_conversation_slot();
					}
				}
				add("strange feelings");
				fallthrough;

			case "strange feelings" (remove):
				say("\"Well, for one thing I have decided something about my new self. I have been thinking about it for a while and I have come to the realization that I simply do not like fire. I simply do not. I cannot exactly say why. I simply do not.\"");
				fallthrough;

			case "many jobs":
				say("\"I feel I am capable of doing most anything in my present condition.\"");
				if (!gflags[ASK_ERSTAM_IF_BOYDON_CAN_JOIN]) {
					say("\"In fact, I was wondering if thou couldst use someone like me to accompany thee in thy travels and adventures.\"");
					say("\"Wouldst thou like me to join thee?\"");
					var0013 = Func0955();
					if (var0013) {
						say("\"I am delighted to hear thee say that. But first thou shouldst ask Erstam if I may go. After all, I am his creation. He is the one who made me what I am today.\"");
						gflags[ASK_ERSTAM_IF_BOYDON_CAN_JOIN] = true;
						var0012 = Func0992(SHAMINO, (((("@Art thou certain about this, " + var0001) + "? Boydon seems game enough, but he is also ") + "extremely gamey. I am surprised thou hast ") + "not noticed this for thyself.@"), 0x0000, false);
						if (var0012 != AVATAR) {
							0x0000->set_conversation_slot();
						}
					} else {
						say("\"If thou wouldst ever change thy mind, or find thyself in need of a companion, I would be most honored if thou wouldst consider me.\"");
						var0012 = Func0992(IOLO, 0x0000, 0x0000, false);
						if (var0012 != AVATAR) {
							var0012->show_npc_face1(0x0000);
							say("\"That was a near escape. I could not believe thou wouldst consider having that fellow join us. Just the smell of him is near enough to kill a dragon! He is otherwise a most pleasant fellow, I will concede.\"");
							UI_remove_npc_face1();
							0x0000->set_conversation_slot();
						}
					}
				}
				remove("many jobs");
				fallthrough;

			case "join" (remove):
				if (UI_get_array_size(UI_get_party_list2()) < 0x0005) {
					add("leave");
					say("\"That is wonderful news! Lead on!\"");
					var0012 = Func0992(SHAMINO, (("@Far be it from me to question thy judgment, Avatar. " + "But are thy senses so dulled that thou dost not notice ") + "the potent aroma emanating from this fellow?@"), 0x0000, false);
					if (var0012 != AVATAR) {
						0x0000->set_conversation_slot();
					}
					BOYDON->add_to_party();
					gflags[BOYDON_HAS_BELONGINGS] = true;
				} else {
					say("\"But there are so many in thy travelling party! I am not accustomed to crowds.\"");
					say("\"I think that I must remain where I am. Apologies, ",
						var0001,
						".\"");
				}
				fallthrough;

			case "leave" (remove):
				say("\"If that is what thou dost truly want, I will leave. But if thou dost ever change thy mind, do ask me to join again and I will.\"");
				BOYDON->remove_from_party();
				Func080A();
				Func09B4(BOYDON);
				var0012 = Func0992(DUPRE, ((("@I am also sad to see him go." * "But in truth, ") + "mine eyes were watering more while he was with us than ") + "when he left!@"), 0x0000, false);
				if (var0012 != AVATAR) {
					0x0000->set_conversation_slot();
				}
				add("join");
				fallthrough;

			case "bye":
				UI_remove_npc_face0();
				Func097F(AVATAR, "@Good luck!@", 0x0000);
				if (item == BOYDON->get_npc_object()) {
					Func097F(BOYDON, "@And to thee!@", 0x0002);
				} else {
					var000B = script item after 5 ticks {
						nohalt;
						say "@And to thee!@";
					};
				}
				break;
		}
	}
}

extern var Func0954 0x954 ();
extern var Func0953 0x953 ();
extern var Func0942 0x942 (var var0000);
extern var Func097D 0x97D (var var0000, var var0001, var var0002, var var0003, var var0004);
extern var Func099B 0x99B (var var0000, var var0001, var var0002, var var0003, var var0004, var var0005, var var0006);
extern void Func097F 0x97F (var var0000, var var0001, var var0002);
extern var Func09A0 0x9A0 (var var0000, var var0001);
extern void Func07D1 object#(0x7D1) ();
extern var Func0992 0x992 (var var0000, var var0001, var var0002, var var0003);
extern void Func094E 0x94E (var var0000, var var0001);
extern var Func0955 0x955 ();
extern var Func0956 0x956 (var var0000);
extern void Func0636 object#(0x636) ();

void Func0423 object#(0x423) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;
	var var0008;
	var var0009;
	var var000A;
	var var000B;
	var var000C;
	var var000D;
	var var000E;
	var var000F;
	var var0010;
	var var0011;
	var var0012;
	var var0013;
	var var0014;
	var var0015;
	var var0016;
	var var0017;
	var var0018;
	var var0019;
	var var001A;
	var var001B;
	var var001C;

	var0000 = Func0954();
	var0001 = Func0953();
	var0002 = Func0942(VASEL);
	var0003 = Func0942(BOYDON);
	var0004 = ERSTAM->get_item_flag(MET);
	var0005 = Func097D(PARTY, 0x0001, 0x0268, QUALITY_ANY, 0x0010);
	var0006 = Func097D(PARTY, 0x0001, 0x0252, QUALITY_ANY, FRAME_ANY);
	var0007 = Func097D(PARTY, 0x0001, 0x0289, QUALITY_ANY, 0x0001);
	var0008 = Func097D(PARTY, 0x0001, 0x022B, QUALITY_ANY, FRAME_ANY);
	var0009 = Func097D(PARTY, 0x0001, 0x022F, QUALITY_ANY, 0x0005);
	var000A = Func097D(PARTY, 0x0001, 0x022F, QUALITY_ANY, 0x000B);
	var000B = Func097D(PARTY, 0x0001, 0x022F, QUALITY_ANY, 0x000C);
	var000C = Func097D(PARTY, 0x0001, 0x02ED, QUALITY_ANY, 0x0001);
	var000D = Func097D(PARTY, 0x0001, 0x0241, QUALITY_ANY, 0x0003);
	var000E = Func097D(PARTY, 0x0001, 0x0281, 0x00CA, 0x000C);
	if ((event == SCRIPTED) || (event == SI_PATH_FAILURE)) {
		if (gflags[TEMP_FLAG_1]) {
			gflags[TEMP_FLAG_1] = false;
			ERSTAM->show_npc_face0(0x0000);
			say("\"At last, the labor of a lifetime hath come to consummation! I think Boydon hath been created rather well. Thou hast done an excellent job in assisting me in his creation.\"");
			say("\"For thine excellent work I shall reward thee. Here is the key to my storeroom. There thou wilt find the secret of teleportation. It is an old serpent jawbone.\"");
			gflags[ERSTAM_GAVE_KEY] = true;
			say("\"Also, please take this serpent tooth as a token of mine appreciation.\"");
			var000F = Func099B(AVATAR, 0x0001, 0x0281, 0x00CA, 0x000C, 0x0000, true);
			var000F = Func099B(AVATAR, 0x0001, 0x022F, QUALITY_ANY, 0x000B, false, true);
			gflags[GOT_MAD_MAGE_TOOTH] = true;
			ERSTAM->show_npc_face0(0x0000);
			say("\"Once thou hast found the jawbone, return to me -- for I have something else to give thee as well.\"");
			Func097F(ERSTAM, "@See thee soon...@", 0x0000);
			Func097F(AVATAR, "@I shall return!@", 0x0008);
			abort;
		}
		UI_fade_palette(0x000C, 0x0001, 0x0000);
		var000F = script Func09A0(0x0005, 0x0002) after 1 ticks {
			nohalt;
			call Func0636;
		};
		PARTY->move_object([0x07F6, 0x04C5, 0x0000]);
	}
	if (event == DOUBLECLICK) {
		AVATAR->item_say("@Might we speak?@");
		ERSTAM->Func07D1();
		Func097F(ERSTAM, "@No!@", 0x0002);
		ERSTAM->set_schedule_type(TALK);
	}
	if (event == STARTED_TALKING) {
		ERSTAM->run_schedule();
		ERSTAM->clear_item_say();
		ERSTAM->show_npc_face0(0x0000);
		if (!gflags[TOLD_ERSTAM_PASSWORD]) {
			say("\"Begone from my sight! Thy meddling in my business is unwelcome, stranger!\"");
			say("\"Thou dost have the distinct bearing of a Britannian about thee! No doubt thou art some fiend in league with that evil Beast British!\"");
			say("\"Why, I ought to cast a spell on thee! I could tear thee limb from limb but still leave thee alive! In fact I may do it yet! Now, out with it! Why hast thou come to disturb me here?! Bah! In truth I care not! Begone!\"");
			var0010 = Func0992(IOLO, "@The password! Avatar, tell him the password!@", 0x0000, false);
			0x0000->set_conversation_slot();
			say("\"What is this I hear?\"");
			Func094E(AVATAR, "@A mutual friend told me to mention Iskatradeeth to thee.@");
			0x0000->set_conversation_slot();
			say("\"Iskatradeeth! The password? Then I shall not feed thee to the whales...\"");
			say("\"I shall speak with thee... for the moment.\"");
			gflags[TOLD_ERSTAM_PASSWORD] = true;
		} else {
			say("\"Why hast thou returned? Why dost thou disturb mine experiments in the secrets of immortality? What could possibly be more important than the answers to the riddle of life and death?!\"");
		}
		if (!gflags[ERSTAM_EXPERIMENT_FINISHED]) {
			add("experiments");
		}
		if (!gflags[ERSTAM_DONE_IMMORTALITY]) {
			add("immortality");
		}
		if (!gflags[ERSTAM_DONE_RIDDLE]) {
			add("riddle of life and death");
		}
		if (gflags[BOYDON_LIVES] && (!gflags[AVATAR_HAS_JAWBONE])) {
			add("Boydon");
		}
		if (!var0004) {
			add("Introduce thyself");
		}
		if (!gflags[ERSTAM_SPOKE_DISTURB]) {
			add("Disturb?");
		}
		if (gflags[VASEL_SPOKE_JAWBONE]) {
			add("jawbone");
		}
		if (gflags[WILL_GET_PHOENIX_EGG] && (!gflags[DOING_ERSTAM_EXPERIMENT])) {
			if (gflags[HAVE_PHOENIX_EGG]) {
				add("phoenix egg");
			}
			add("instructions");
		}
		if (gflags[DOING_ERSTAM_EXPERIMENT] && (!gflags[BOYDON_LIVES])) {
			add("ready to create life");
		}
		if (gflags[AVATAR_HAS_JAWBONE]) {
			add("I have the jawbone.");
		}
		if (gflags[ASK_ERSTAM_IF_BOYDON_CAN_JOIN] && (!gflags[ERSTAM_LETS_BOYDON_JOIN])) {
			add("May Boydon join?");
		}
		if (gflags[STORM_BLUE_EGG]) {
			add("blue egg");
		}
		if (gflags[STORM_SEVERED_HAND] && (!gflags[KNOWS_SEVERED_HAND_OWNER])) {
			add("severed hand");
		}
		if (gflags[STORM_LAB_APPARATUS] && (!gflags[KNOWS_LAB_APPARATUS_OWNER])) {
			add("lab apparatus");
		}
		converse ("bye") {
			case "Introduce thyself" (remove):
				say("\"I do not care to know thy name! As for myself, my fame hath grown with each passing century. I am Erstam, he whom some dare call the Mad Mage!\"");
				ERSTAM->set_item_flag(MET);
				add("Mad Mage");
				fallthrough;

			case "Mad Mage" (remove):
				say("\"I said that some call me the Mad Mage! I did not give permission for thee to call me that! That is a name by which I have been called since the days when I took the dissenters of the reign of Beast British away to live here at this place.\"");
				fallthrough;

			case "Disturb?" (remove):
				say("\"I am a master sorcerer, and as such I am dedicated to my life's work -- mine experiments! I am searching for the secret of immortality and to find it I must be able to answer the riddle of life and death.\"");
				gflags[ERSTAM_SPOKE_DISTURB] = true;
				fallthrough;

			case "experiments" (remove):
				if (!gflags[DOING_ERSTAM_EXPERIMENT]) {
					if (gflags[BOYDON_LIVES]) {
						say("\"Now that mine initial experiment of Boydon hath been completed, my true work hath only begun. I shall now rest until I have learned all of the secrets of the universe. What? Thou art still here! I have no time to speak with thee! I have work to do!\"");
						Func097F(ERSTAM, "@Away with thee!@", 0x0003);
						gflags[ERSTAM_EXPERIMENT_FINISHED] = true;
						abort;
					}
					say("\"These experiments are most dangerous! If thou art faint of heart I would advise thee to stay away! As thou canst see if thou dost look around thee, these experiments are a threat to both life... and limb!\"");
					if (!(gflags[WILL_GET_PHOENIX_EGG] || gflags[BOYDON_LIVES])) {
						add(["life", "limb"]);
					}
				} else {
					say("\"Thanks to thee mine experiments in the creation of life have been successful! But there is still much for me to do! Much research! Now that I have created mine own wholly unique solution to the riddle of life and death, I must begin work on solving the rest of the problems of the universe.\"");
				}
				fallthrough;

			case "life" (remove):
				say("\"The terrible science that I pursue hath taken its toll in the lives of countless assistants. But if it leads me to the secret of eternal life, the price shall be well worth it.\"");
				fallthrough;

			case "limb" (remove):
				say("\"Aye, thou wilt see many of them strewn about as thou dost look around the manor.\"");
				fallthrough;

			case "immortality" (remove):
				UI_push_answers();
				add("change subject");
				if (gflags[DOING_ERSTAM_EXPERIMENT]) {
					if (gflags[BOYDON_LIVES]) {
						say("\"With the successful creation of Boydon we have taken the first small but vitally important step in achieving that great dream of all men -- immortality!\"");
						gflags[ERSTAM_DONE_IMMORTALITY] = true;
					} else {
						say("\"Quickly! Thou must finish the experiment! On mine oath, I will be dead of old age before I can discover the secret of immortality with an assistant such as thee!\"");
					}
				} else {
					say("\"Immortality represents the ultimate defeat of death. 'Tis essential that I obtain this as soon as possible... No doubt thou hast heard of or perhaps even witnessed the teleportation storms.\"");
				}
				if (!var0006) {
					say("\"It seems that I recall a strange dagger appearing in the Manor about the same time as a teleportation storm. Perhaps that dagger is still around somewhere...\"");
				} else {
					say("\"I see thou hast discovered the strange dagger that appeared in my Manor. Damn teleport storms! Thou hast laid claim to it as thine own, eh? Very well then, if it truly belongs to thee, thou mayest take it...\"");
				}
				add(["death", "teleportation storms"]);
				fallthrough;

			case "death":
				say("\"Unchained for all time from death and the fear of death, there would be nothing that mankind would not be capable of accomplishing! HA, ha, ha, ha, ha!\"");
				remove("death");
				fallthrough;

			case "teleportation storms" (remove):
				say("\"The power of teleportation is most certainly an awesome one. These storms have been wreaking havoc on us for some time. I fear that their increasing frequency and intensity most certainly signals an end of the world.\"");
				add("end of the world");
				if (!gflags[ERSTAM_SPOKE_TELEPORTATION]) {
					add("teleportation");
				}
				fallthrough;

			case "teleportation":
				say("\"Hrmpph... I know nothing of this foolish, dangerous power they call teleportation, dost thou hear me? Nothing! Do not ask me of this again! And do not harry my servant about it either, I warn thee!\"");
				gflags[ERSTAM_SPOKE_TELEPORTATION] = true;
				if (var0002) {
					VASEL->show_npc_face1(0x0000);
					say("\"But Master, thou dost know something of teleportation! What about the...?\"");
					0x0000->set_conversation_slot();
					say("\"Silence thine imbecilic rantings, Vasel! Not another word from thee! Pay my silly servant no mind. He is daft in the head. I know nothing about this teleportation business. I have no secrets to share with thee!\"");
					0x0001->set_conversation_slot();
					say("\"So I have given away thy secret? Do not beat me! Please Master! Do not beat me!\"");
					UI_remove_npc_face1();
					0x0000->set_conversation_slot();
				}
				remove("teleportation");
				fallthrough;

			case "end of the world" (remove):
				say("\"Someone must survive the end of the world. That person may as well be me.\"");
				fallthrough;

			case "riddle of life and death" (remove):
				say("\"In order to obtain the secret of achieving immortality, I must first uncover the answer to the secret of life and death. In the past when people have searched for the answer, they have only brooded over the nature of death itself. What a foolish thing to do! If there is an answer to the riddle of life and death, it can only be in the creation of life!\"");
				if (gflags[BOYDON_LIVES]) {
					say("\"Finally, the secrets of the universe are nearly within my grasp!\"");
					gflags[ERSTAM_DONE_RIDDLE] = true;
				} else {
					say("\"That is what I am seeking to do!\"");
					if (gflags[DOING_ERSTAM_EXPERIMENT]) {
						say("\"So, hurry!\"");
					} else {
						add(["create life", "secret of immortality"]);
					}
				}
				fallthrough;

			case "create life" (remove):
				say("\"Lately mine experiments have been halted for there is one necessary ingredient that I lack. Bah! Thou canst tell me nothing about the creation of life that would help me advance mine experiments! There is no point in speaking to thee of the subject!\"");
				fallthrough;

			case "secret of immortality":
				say("\"Mine experiments in immortality have led to the demise of all of mine assistants save for Vasel. Oh, they are not dead! Why one may encounter them virtually anywhere throughout the manor. Or, at least, pieces of them.\"");
				remove("secret of immortality");
				fallthrough;

			case "jawbone" (remove):
				UI_push_answers();
				add("change subject");
				if (gflags[AVATAR_HAS_JAWBONE]) {
					say("\"Thou art welcome to it.\"");
				} else if (!gflags[WILL_GET_PHOENIX_EGG]) {
					say("\"So! That little knave Vasel hath been telling thee of my magical serpent jawbone! Thou wilt not obtain it under pain of death, torture or for any price. All that concerns me is mine efforts in creating life. And there is nothing that thou canst do to aid me in that endeavor. Hmmm, or perhaps there is...\"");
					add(["Vasel", "What can I do?"]);
				} else if (gflags[BOYDON_LIVES]) {
					say("\"Did I not give thee the key to my storeroom? If thou canst not find it, thou art not as intelligent as I thought thou to be!\"");
				} else if (gflags[HAVE_PHOENIX_EGG]) {
					say("\"Come now! Thou dost not take me for a fool, I hope! How am I to know that it is a real phoenix egg thou hast brought me unless I can first use it in mine experiments? There shall be plenty of time for this jawbone affair after mine experiment to create life hath been successfully performed. I will hear nothing more on the matter.\"");
				} else {
					say("\"We shall speak of this after thou hast helped me with mine experiment.\"");
				}
				fallthrough;

			case "Vasel":
				say("\"Concern thyself not with him. I shall deal with him later!\"");
				remove("Vasel");
				fallthrough;

			case "What can I do?" (remove):
				say("\"There is something thou canst do for me! On the northern island there is a phoenix. Retrieve for me its egg, which is the missing ingredient that I need. I would go myself, but I am getting much too old for that sort of thing. There are terrible beasts along the way. And I do detest beasts, especially terrible ones.\"");
				add(["northern island", "phoenix"]);
				fallthrough;

			case "northern island" (remove):
				say("\"Thou wilt have to discover the way back by thyself. Thou canst not expect me to tell thee everything!\"");
				fallthrough;

			case "phoenix":
				say("\"Thou must surely be familiar with the legend of the phoenix! It dies in flames, only to rise again in rebirth from the flame. There, I thought I saw a look of recognition in thine eyes! Then it is settled. Bring to me the egg of the phoenix and in return I shall give thee the serpent jawbone. Dost thou agree to help me?\"");
				var0011 = Func0955();
				if (var0011) {
					say("\"Excellent! Then go and bring to me my phoenix egg. I shall send thee there immediately.\"");
					gflags[WILL_GET_PHOENIX_EGG] = true;
					var0012 = AVATAR->get_object_position();
					UI_sprite_effect(ANIMATION_FIREWORKS, (var0012[0x0001] - 0x0002), (var0012[0x0002] - 0x0002), 0x0000, 0x0000, 0x0000, LOOP_ONCE);
					UI_sprite_effect(ANIMATION_FIREWORKS, var0012[0x0001], var0012[0x0002], 0x0000, 0x0000, 0x000A, LOOP_ONCE2);
					UI_play_sound_effect(0x0077);
					var000F = script ERSTAM after 7 ticks {
						nohalt;
						call Func0423;
					};
					abort;
				}
				say("\"Thou canst put from thy mind that serpent jawbone then!\"");
				remove("phoenix");
				fallthrough;

			case "instructions" (remove):
				if (gflags[WILL_GET_PHOENIX_EGG] && (!gflags[DOING_ERSTAM_EXPERIMENT])) {
					say("\"Thou hast returned without my phoenix egg! Is this some kind of great meaningless joke to thee?\"");
					if (gflags[HAVE_PHOENIX_EGG]) {
						var000F = Func0956(["I have the egg", "I do not have the egg"]);
						if (var000F == "I have the egg") {
							say("\"Then bring it to me!\"");
							Func097F(ERSTAM, "@Fool!@", 0x0000);
							abort;
						}
						say("\"Then thou must go back to the Isle of the Phoenix!\"");
						var0012 = AVATAR->get_object_position();
						UI_sprite_effect(ANIMATION_FIREWORKS, (var0012[0x0001] - 0x0002), (var0012[0x0002] - 0x0002), 0x0000, 0x0000, 0x0000, LOOP_ONCE);
						UI_sprite_effect(ANIMATION_FIREWORKS, var0012[0x0001], var0012[0x0002], 0x0000, 0x0000, 0x000A, LOOP_ONCE2);
						UI_play_sound_effect(0x0077);
						var000F = script ERSTAM after 7 ticks {
							nohalt;
							call Func0423;
						};
						abort;
					}
					say("\"If so I do not find it funny! Thou art not playing a game, fool! Go, and do not return until thou hast completed thy promised task!\"");
					var0012 = AVATAR->get_object_position();
					UI_sprite_effect(ANIMATION_FIREWORKS, (var0012[0x0001] - 0x0002), (var0012[0x0002] - 0x0002), 0x0000, 0x0000, 0x0000, LOOP_ONCE);
					UI_sprite_effect(ANIMATION_FIREWORKS, var0012[0x0001], var0012[0x0002], 0x0000, 0x0000, 0x000A, LOOP_ONCE2);
					UI_play_sound_effect(0x0077);
					var000F = script ERSTAM after 7 ticks {
						nohalt;
						call Func0423;
					};
					abort;
				}
				say("\"Thou canst begin by gathering all the various body parts scattered throughout the Manor. That includes a torso, arms, legs, and oh, yes, make extra certain that thou dost not forget the head. Place them one by one on top of the assimilation machine. Once thou hast put all the parts and phoenix egg into the machine, Boydon shall at last become complete.");
				Func097F(ERSTAM, "@Don't forget the torso!@", 0x0000);
				abort;

			case "phoenix egg" (remove):
				say("\"Dost thou have my phoenix egg?\"");
				var0013 = Func0955();
				if (var0013) {
					var0014 = Func097D(PARTY, 0x0001, 0x0289, QUALITY_ANY, 0x0001);
					if (var0014) {
						say("\"Now I have what I need to create life! Thou canst help me complete mine experiments! We shall begin immediately!");
						say("\"Thou canst begin by gathering all the various body parts scattered throughout the Manor. That includes a torso, arms, legs, and oh, yes, make extra certain that thou dost not forget the head. Place them within the hopper, on top of the life creation machine in the center of my laboratory. Once thou hast finished that, we shall speak again.");
						say("\"Quickly, put the egg into the machine!\"");
						gflags[DOING_ERSTAM_EXPERIMENT] = true;
						Func097F(ERSTAM, "@Into the machine!@", 0x0000);
						abort;
					}
					say("\"If thou dost have my phoenix egg, why dost thou not give it to me?\"");
				} else {
					say("\"Then we have nothing further to discuss until thou dost go and bring it to me.\"");
					abort;
				}
				fallthrough;

			case "ready to create life" (remove):
				say("\"Very good! So thou dost have all of the body parts in the vat! Two arms, two legs, and a torso?\"");
				var0015 = Func0955();
				if (var0015) {
					say("\"Doth that include the head?\"");
					var0016 = Func0955();
					if (var0016) {
						say("\"Excellent! Then wait until the life-creating reaction begins! But I warn thee, it may be dangerous. I am staying here.\"");
					} else {
						say("\"Then thou must find the head and put it in the hopper before the experiment can begin.\"");
						abort;
					}
				} else {
					say("\"Thou art a leadpate even worse than Vasel! Go and finish thy task and return to me!\"");
					Func097F(ERSTAM, "@Leadpate!@", 0x0000);
					abort;
				}
				fallthrough;

			case "Boydon" (remove):
				say("\"I think Boydon hath been created rather well! Thou hast done an excellent job in assisting me in his creation.\"");
				if (!gflags[ERSTAM_GAVE_KEY]) {
					var0017 = Func099B(AVATAR, 0x0001, 0x0281, 0x00CA, QUALITY_ANY, false, true);
					say("\"Here is the key to my storeroom. There thou wilt find the secret of teleportation. It is an old serpent jawbone.\"");
					gflags[ERSTAM_GAVE_KEY] = true;
				}
				if (!gflags[GOT_MAD_MAGE_TOOTH]) {
					var0018 = Func099B(AVATAR, 0x0001, 0x022F, QUALITY_ANY, 0x000B, false, true);
					say("\"Also, please take this serpent tooth as a token of my appreciation. Once you have found the jawbone, please return, as I have other items for you.\"");
					gflags[GOT_MAD_MAGE_TOOTH] = true;
				}
				fallthrough;

			case "I have the jawbone." (remove):
				if (gflags[GOT_MOONSHADE_TOOTH] && (gflags[GOT_MAD_MAGE_TOOTH] && gflags[GOT_MONK_ISLE_TOOTH])) {
					say("\"Yes. Very nice. I have already given thee my serpent teeth. I have no more of them. Good luck to thee.\"");
					Func097F(ERSTAM, "@Good fortune!@", 0x0000);
					abort;
				}
				if (!gflags[GOT_MOONSHADE_TOOTH]) {
					say("\"Yes, I see that thou hast found thy way into my storeroom and back.\"");
					say("\"Here is a serpent's tooth. This will allow thee to travel back from whence thou didst come.\"");
					say("\"As to the method of how it works -- Thou hast proven thyself intelligent. Discern it for thyself.\"");
					var0019 = Func099B(AVATAR, 0x0001, 0x022F, QUALITY_ANY, 0x000C, false, true);
					gflags[GOT_MOONSHADE_TOOTH] = true;
				}
				if (!gflags[GOT_MAD_MAGE_TOOTH]) {
					say("\"Here is another tooth. It will allow thee to travel back to this island. Although, I trust that it shall not be necessary to do so.\"");
					var001A = Func099B(AVATAR, 0x0001, 0x022F, QUALITY_ANY, 0x000B, false, true);
					gflags[GOT_MAD_MAGE_TOOTH] = true;
				}
				if (!gflags[GOT_MONK_ISLE_TOOTH]) {
					say("\"Here is a tooth that will enable thee to travel to another place.\"");
					gflags[GOT_MONK_ISLE_TOOTH] = true;
					var001B = Func099B(AVATAR, 0x0001, 0x022F, QUALITY_ANY, 0x0005, false, true);
				}
				fallthrough;

			case "May Boydon join?" (remove):
				say("\"Certainly he may. It will serve my creation well to see the world. Good journey to thee. But take care. My creation may be very durable and powerful, but if his new body should be destroyed there is no force in the universe that can remake him.\"");
				gflags[ERSTAM_LETS_BOYDON_JOIN] = true;
				fallthrough;

			case "blue egg" (remove):
				if (var000D) {
					say("\"If thou dost wish to know the mystery of that object, the answer is simple.\"");
					say("\"Glance into my telescope, and its magical view shall penetrate the universe for thee!\"");
				} else {
					say("\"Bring the item to me, and I shall discern its origin. Or perhaps I won't. We shall see.\"");
				}
				fallthrough;

			case "lab apparatus" (remove):
				if (var000C) {
					say("\"I recognize that! I have not seen it in some time, in fact.\"");
					gflags[KNOWS_LAB_APPARATUS_OWNER] = true;
					var001C = UI_remove_party_items(0x0001, 0x02ED, QUALITY_ANY, 0x0001, false);
					if (var001C) {
						say("\"That rightfully belongs to me, and I find it most suspicious that thou didst come into possession of it!\"");
						say("\"But, of course! It must have been a teleportation storm!\"");
					} else {
						say("\"I want that back! It belongs to me!\"");
					}
				} else {
					say("\"That item resembles one of my laboratory apparati -- but I don't recall that anything is missing...\"");
				}
				fallthrough;

			case "severed hand" (remove):
				if (Func097D(PARTY, 0x0001, 0x031A, QUALITY_ANY, 0x0000) || (Func097D(PARTY, 0x0001, 0x031A, QUALITY_ANY, 0x0001) || (Func097D(PARTY, 0x0001, 0x031A, QUALITY_ANY, 0x0002) || (Func097D(PARTY, 0x0001, 0x031A, QUALITY_ANY, 0x0003) || (Func097D(PARTY, 0x0001, 0x031A, QUALITY_ANY, 0x0004) || Func097D(PARTY, 0x0001, 0x031A, QUALITY_ANY, 0x0005)))))) {
					say("\"That is a remnant from one of mine experiments, something for Vasel to clean after. What art thou doing carrying that thing around?\"");
					say("\"I do not know about thee... Thou art a strange one!\"");
					gflags[KNOWS_SEVERED_HAND_OWNER] = true;
				} else {
					say("\"Bring it to me, and I shall inspect it! It might be from one of my experiments...\"");
				}
				fallthrough;

			case "change subject":
				say("\"Certainly...\"");
				UI_pop_answers();
				fallthrough;

			case "bye":
				UI_remove_npc_face0();
				Func097F(AVATAR, "@Most interesting...@", 0x0000);
				Func097F(ERSTAM, "@On thy way!@", 0x0002);
				abort;
		}
	}
}

extern var Func0954 0x954 ();
extern var Func0953 0x953 ();
extern var Func0942 0x942 (var var0000);
extern void Func07D1 object#(0x7D1) ();
extern void Func094F 0x94F (var var0000, var var0001);
extern var Func0992 0x992 (var var0000, var var0001, var var0002, var var0003);
extern void Func097F 0x97F (var var0000, var var0001, var var0002);

void Func0424 object#(0x424) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;

	var0000 = Func0954();
	var0001 = Func0953();
	var0002 = Func0942(ERSTAM);
	var0003 = IOLO->get_item_flag(IN_PARTY);
	var0004 = VASEL->get_item_flag(MET);
	if (event == DOUBLECLICK) {
		AVATAR->item_say("@A moment, good fellow.@");
		VASEL->Func07D1();
		var0005 = "@Do not hit me...@" & "@I beg thee!@";
		Func094F(VASEL, var0005);
		VASEL->set_schedule_type(TALK);
	}
	if (event == STARTED_TALKING) {
		VASEL->run_schedule();
		VASEL->clear_item_say();
		VASEL->show_npc_face0(0x0000);
		if (!var0004) {
			say("\"What dost thou want, if thou dost not want to beat me?\"");
		} else {
			say("\"Thou hast come to beat me again, I know it!\"");
		}
		add(["name", "duties"]);
		if (gflags[ERSTAM_SPOKE_TELEPORTATION]) {
			add("teleportation");
		}
		converse ("bye") {
			case "name" (remove):
				say("\"I am an orphan. I have no name. My parents were so poor they could not afford to give me one!\"");
				UI_push_answers();
				add(["orphan", "What art thou called?", "change subject"]);
				fallthrough;

			case "change subject":
				say("\"Yes, master... er, I mean, ",
					var0000,
					".\"");
				UI_pop_answers();
				fallthrough;

			case "orphan" (remove):
				say("\"My parents served an evil sorceress who stole me away and had them banished. She raised me as her own dog -- er, I mean son. But she was eventually caught and hanged for all her heinous crimes. I still miss my stepmother, terribly.\"");
				fallthrough;

			case "What art thou called?" (remove):
				say("\"As a child, I was called a freak because I collected bugs! But when I went to dispose of my collection, I was called grotesque! I was so upset I could barely finish eating! But now I am called by an honorable gentleman's name, given to me by the Master.\"");
				var0006 = Func0992(IOLO, "@Avatar, talking to this little fellow doth turn my stomach.@", 0x0000, false);
				if (var0006 != AVATAR) {
					0x0000->set_conversation_slot();
				}
				add(["freak", "grotesque", "master"]);
				fallthrough;

			case "freak" (remove):
				say("\"Merely because I had a brief career with one sideshow, everyone hath marked me for life! Still, it taught me things that have helped me in my work here. It gave me a strong stomach.\"");
				fallthrough;

			case "grotesque" (remove):
				say("\"They called me that when I was young. But looking back on it, I think they meant it in a complimentary way.\"");
				fallthrough;

			case "master" (remove):
				say("\"'Tis my master who calls me Vasel. Thou mayest address me by that name as well.\"");
				VASEL->set_item_flag(MET);
				if (var0002) {
					ERSTAM->show_npc_face1(0x0000);
					say("\"They shall be carving that name on thy tombstone if thou dost not return to work!\"");
					UI_remove_npc_face1();
					0x0000->set_conversation_slot();
				}
				add("Who is thy master?");
				fallthrough;

			case "Who is thy master?" (remove):
				say("\"I serve Erstam. He is the master of this Manor.\"");
				add(["Why serve him?", "Erstam"]);
				fallthrough;

			case "Why serve him?" (remove):
				say("\"There is something about him that reminds me of my stepmother! Call it crazy if thou wilt!\"");
				fallthrough;

			case "Erstam" (remove):
				say("\"He is the one who is called the Mad Mage!\"");
				if (var0002) {
					ERSTAM->show_npc_face1(0x0000);
					say("\"Thou dost dare to speak that name in my presence, thou cretin?! I said I do not want to hear that name come from thy lips ever again!\"");
					UI_remove_npc_face1();
					0x0000->set_conversation_slot();
					say("\"Never again! Never again! I promise! Do not beat me, Master!\"");
				}
				add("mad mage");
				fallthrough;

			case "mad mage" (remove):
				say("\"The Master hath not been himself since he lost his one true love, the enchantress Drogeni. Many years ago she left on what she said was a secret errand for a wealthy patron, and she hath never returned.\"");
				fallthrough;

			case "duties" (remove):
				say("\"I am the custodian of the Manor. I assist the Master in his experiments. I am also called upon to do the housekeeping.\"");
				add(["Manor", "experiments", "housekeeping"]);
				fallthrough;

			case "Manor" (remove):
				say("\"The Master's house is very old, and constantly in need of repair.\"");
				if (var0002) {
					ERSTAM->show_npc_face1(0x0000);
					say("\"That is correct, Vasel! Thou shouldst be returning to thine appointed chores!\"");
					0x0000->set_conversation_slot();
					UI_remove_npc_face1();
				}
				fallthrough;

			case "experiments" (remove):
				say("\"The Master's experiments are of an extremely secret nature. They are also quite dangerous.\"");
				add(["secret", "dangerous"]);
				fallthrough;

			case "secret" (remove):
				say("\"Like any mage, the Master's work involves rare artifacts and arcane spells. Thou canst look as much as thou dost want for them. But thou shalt never be able to find them! Ha! Ha!\"");
				if (var0002) {
					ERSTAM->show_npc_face1(0x0000);
					say("\"Vasel, thou art a fool! I will not tolerate thee giving away my precious secrets! Stop it at once!\"");
					UI_remove_npc_face1();
					0x0000->set_conversation_slot();
					say("\"Yes, Master... I am sorry... Please do not beat me...!\"");
				}
				fallthrough;

			case "dangerous" (remove):
				say("\"I am not the first to have worked as the Master's assistant. Nor, I fear, shall I be the last. There have been many of us.\"");
				add(["first assistant", "last assistant", "other assistants"]);
				fallthrough;

			case "first assistant" (remove):
				say("\"I do not know the name of the Master's first assistant. His partial remains are around here somewhere. I do not know where. They are not where I last left them.\"");
				if (var0002) {
					ERSTAM->show_npc_face1(0x0000);
					say("\"Hmph!  A lazy lout he was, as well. We shall not miss him!\"");
					UI_remove_npc_face1();
					0x0000->set_conversation_slot();
				}
				fallthrough;

			case "last assistant" (remove):
				say("\"The last assistant to the Master -- before myself, that is -- was named Boydon. In fact, thou canst say he is still the head assistant. Heh-heh-heh-heh...\"");
				if (var0002) {
					ERSTAM->show_npc_face1(0x0000);
					say("\"He was another one who was dead from the neck up!\"");
					UI_remove_npc_face1();
					0x0000->set_conversation_slot();
					say("\"Dost thou not actually mean dead from the neck down?\"");
					ERSTAM->show_npc_face1(0x0000);
					say("\"Yes, very well, Vasel. I shall concede that point.\"");
					UI_remove_npc_face1();
					0x0000->set_conversation_slot();
				}
				fallthrough;

			case "other assistants" (remove):
				say("\"Oh, little by little and bit by bit, they pop up now and again. I was never very good with names or faces... or arms or legs, or any of those other parts.\"");
				if (var0002) {
					ERSTAM->show_npc_face1(0x0000);
					say("\"Enough with this maudlin waste of time! Back to work with thee, Vasel!\"");
					UI_remove_npc_face1();
					0x0000->set_conversation_slot();
				}
				fallthrough;

			case "housekeeping" (remove):
				say("\"This place becomes quite... unkempt, and requires constant cleaning. 'Tis a dreadful thing to do! I hate the cleanings! I hate them!\"");
				if (var0002) {
					ERSTAM->show_npc_face1(0x0000);
					say("\"Stop thy whining, Vasel! Back to work with thee!\"");
					UI_remove_npc_face1();
					0x0000->set_conversation_slot();
				}
				add(["Why so much cleaning?", "Why hate cleaning?"]);
				fallthrough;

			case "Why so much cleaning?" (remove):
				say("\"The experiments are, to say the least, quite messy...\"");
				fallthrough;

			case "Why hate cleaning?" (remove):
				say("\"Because I have to... to touch... all those things! I have to pick them up, with all their little squeaky noises... and squirming!\"");
				var0006 = Func0992(SHAMINO, "@Things?! Squirming things?! What sort of squirming things?! Not snakes!@", 0x0000, false);
				UI_remove_npc_face1();
				if (var0006 != AVATAR) {
					0x0000->set_conversation_slot();
					say("\"Snakes would be pleasant compared to what thou canst find here...\"");
				}
				fallthrough;

			case "teleportation" (remove):
				say("\"There is a way to travel quickly from one place to another, and its magic is very powerful. The Jawbone of the Serpent enables one to walk through the great Void. But it belongs to the Master.\"");
				gflags[VASEL_SPOKE_JAWBONE] = true;
				var0006 = Func0992(SHAMINO, "@Thou dost mean one must actually touch such a hideous thing?! I simply cannot abide snakes!@", 0x0000, false);
				UI_remove_npc_face1();
				if (var0006 != AVATAR) {
					0x0000->set_conversation_slot();
					say("\"'Tis not so hideous. Sometimes I amuse myself, taking the Teeth out and putting them back into the Jawbone...\"");
				}
				fallthrough;

			case "bye":
				UI_remove_npc_face0();
				UI_remove_npc_face1();
				Func097F(AVATAR, "@Good day to thee.@", 0x0000);
				Func097F(VASEL, "@Please do not hit me!@", 0x0003);
				break;
		}
	}
}

extern var Func09A0 0x9A0 (var var0000, var var0001);
extern var Func0942 0x942 (var var0000);
extern var Func0992 0x992 (var var0000, var var0001, var var0002, var var0003);
extern void Func097F 0x97F (var var0000, var var0001, var var0002);
extern void Func0636 object#(0x636) ();

void Func0425 object#(0x425) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;

	var0000 = ALE->get_schedule_type();
	if (event == SCRIPTED) {
		UI_fade_palette(0x000C, 0x0001, 0x0000);
		UI_set_weather(CLEAR_WEATHER);
		AVATAR->set_camera();
		var0001 = script Func09A0(0x0005, 0x0001) after 30 ticks {
			nohalt;
			call Func0636;
		};
		AVATAR->clear_item_flag(DONT_MOVE);
		UI_init_conversation();
		EDRIN->set_npc_id(0x0000);
		ALE->set_new_schedules(MIDNIGHT, WANDER, [0x09A7, 0x07F7]);
		ALE->run_schedule();
		gflags[USING_FAR_SIGHT_MAGIC] = false;
	}
	if (event == PROXIMITY) {
		if (var0000 == PATROL) {
			var0002 = ALE->find_nearby(0x025F, 0x0002, MASK_EGG);
			var0003 = var0002->get_item_quality();
			if (var0003 == 0x000F) {
				ALE->set_schedule_type(WAIT);
				var0001 = script item {
					nohalt;
					step south;
					step west;
					step south;
					step south;
				};
				var0004 = HAWK->get_npc_id();
				var0004 += 0x0001;
				HAWK->set_npc_id(var0004);
			}
		}
	}
	if ((event == DOUBLECLICK) || ((event == PROXIMITY) && (get_schedule_type() == HOUND))) {
		var0005 = UI_get_random(0x0006);
		if (var0005 == 0x0001) {
			ALE->item_say("@Awk!@");
		}
		if (var0005 == 0x0002) {
			ALE->item_say("@See nor hear. See nor hear. Squawk!@");
		}
		if (var0005 == 0x0003) {
			ALE->item_say("@Cracker!@");
		}
		if (var0005 == 0x0004) {
			ALE->item_say("@Walla Walla!@");
		}
		if (var0005 == 0x0005) {
			if (Func0942(KANE)) {
				KANE->item_say("@Leave the bird alone!@");
			} else {
				var0006 = Func0992(0x0001, "@Cute bird.@", 0x0000, true);
			}
		}
		if (var0005 == 0x0006) {
			ALE->item_say("@Squawk!@");
		}
	}
	if (event == DEATH) {
		Func097F(ALE, "@Skreee!@", 0x0000);
		AVATAR->set_oppressor(ALE);
		ALE->set_attack_mode(FLEE);
	}
}

extern var Func0954 0x954 ();
extern var Func0953 0x953 ();
extern var Func0942 0x942 (var var0000);
extern void Func07D1 object#(0x7D1) ();
extern void Func097F 0x97F (var var0000, var var0001, var var0002);
extern void Func09AD 0x9AD (var var0000);
extern void Func0805 0x805 ();
extern void Func0806 0x806 ();
extern var Func0955 0x955 ();
extern var Func099B 0x99B (var var0000, var var0001, var var0002, var var0003, var var0004, var var0005, var var0006);

void Func0426 object#(0x426) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;
	var var0008;
	var var0009;
	var var000A;
	var var000B;
	var var000C;
	var var000D;
	var var000E;
	var var000F;
	var var0010;

	var0000 = Func0954();
	var0001 = UI_is_pc_female();
	var0002 = Func0953();
	var0003 = Func0942(DEVRA);
	var0004 = false;
	var0005 = false;
	if (event == DOUBLECLICK) {
		AVATAR->item_say("@Hello!@");
		ARGUS->Func07D1();
		Func097F(ARGUS, (("@Yes, " + var0000) + "?@"), 0x0002);
		ARGUS->set_schedule_type(TALK);
	}
	if (event == PROXIMITY) {
		var0006 = UI_get_random(0x0006);
		if (var0006 == 0x0001) {
			ARGUS->item_say("@Dost thou want a drink?@");
		}
		if (var0006 == 0x0002) {
			ARGUS->item_say("@Art thou hungry?@");
		}
		if (var0006 == 0x0003) {
			if (Func0942(BYRIN)) {
				ARGUS->item_say("@Sing us a song, Byrin!@");
			} else {
				ARGUS->item_say("@Have some ale.@");
			}
		}
		if (var0006 == 0x0004) {
			ARGUS->item_say("@Dost thou want a room?@");
		}
		if (var0006 == 0x0005) {
			ARGUS->item_say("@No brawls!@");
		}
		if (var0006 == 0x0006) {
			ARGUS->item_say("@Do not break the chairs!@");
		}
	}
	if (event == STARTED_TALKING) {
		ARGUS->run_schedule();
		ARGUS->clear_item_say();
		ARGUS->show_npc_face0(0x0000);
		var0007 = ARGUS->get_item_flag(MET);
		if (var0007 == false) {
			if (gflags[HAVE_WOLF_TATTOO] == true) {
				say("\"Greetings, fellow Pikeman!\" ~\"Come in outta them strange storms and rest a bit...\" *\"This be the Inn of the Sleeping Bull.\" *\"And I be Argus, the innkeeper.\"");
			} else {
				say("\"Greetings, stranger.\" *\"Come in outta them strange storms and rest a bit...\" *\"This be the Inn of the Sleeping Bull.\" *\"And I be Argus, the innkeeper.\"");
			}
			ARGUS->set_item_flag(MET);
		} else {
			say("\"Welcome back, ",
				var0002,
				".\"");
		}
		add(["storms", "Sleeping Bull", "food", "drink", "room", "bye"]);
		if (gflags[HEARD_ARGUS_ACCUSATIONS] == true) {
			add(["duel", "bribes"]);
		}
		converse (0) {
			case "storms":
				say("\"These ain't natural storms... Or I was never a Wolf Captain.\" *\"If thou wert to ask me, living all these years across from Moonshade, I'd say they were magic born. And I'm afeard they'll drive us out of business if they last too long.\"");
				remove("storms");
				add(["Wolf Captain", "Moonshade", "out of business"]);
				fallthrough;

			case "Wolf Captain":
				if (gflags[HAVE_WOLF_TATTOO] == true) {
					say("\"I see that thou'rt also of the Wolf Command, though I must confess I can't recall having seen thee.\" *\"Until my father disappeared six months ago, I was a Captain in the Monitor Wolf Command.\" *\"Now, however, I am the innkeeper and I'll not stand by the formalities of rank. Thou'rt welcome here.\"");
				} else {
					say("\"I am sorry, ",
						var0000,
						". I did not realize that thou wert not from hereabouts.\"");
					if (var0003 == true) {
						DEVRA->show_npc_face1(0x0000);
						say("\"Ha! Thou wert fishin' for a way to tell thy tales!\" *\"I thought I broke thee of lying when thou wert a lad...\" *\"Mind thee... Captain... I can still warm thy backside if I've a mind to.\"");
						UI_remove_npc_face1();
						0x0000->set_conversation_slot();
						say("\"And I do not doubt that she could... and would!\"");
					}
					say("\"Until my father disappeared six months ago, I was a Captain in the Monitor Wolf Command.\"");
				}
				remove("Wolf Captain");
				add(["father disappeared", "Monitor", "Wolf Command"]);
				fallthrough;

			case "father disappeared":
				say("\"Aye, Angus disappeared... And not during one of those storms neither. We could have understood that.\" *\"And mother... er, Devra... Said that one of our guests disappeared the very same evening.\"");
				remove("father disappeared");
				add("one of our guests");
				fallthrough;

			case "one of our guests":
				say("\"Thou must needs ask mother what she remembers of that night. I weren't here.\" *\"Mother was understandably aggrieved by the time she called me home.\" *\"She had hoped that Lord Wilfred would come to run the inn as father had hoped, but I came instead...\" *\"And I don't recall if she mentioned the guest's name, to be honest.\"");
				remove("one of our guests");
				add("Lord Wilfred");
				fallthrough;

			case "Lord Wilfred":
				say("\"Blast! Did I call him that? Old habits die hard...\" *\"I'd thank thee not to repeat that in Devra's hearing for she'd have mine ears for sure.\" *\"Wilfred is my younger brother. And, like most brothers, we have our share of spats.\"");
				remove("Lord Wilfred");
				add("spats");
				fallthrough;

			case "spats":
				say("\"I grew up here in the inn, scrubbing pots and whatever else were needed.\" *\"But I dreamed of seeing more of the world. I went wandering when I was a young lad...\" *\"And Angus, our father, raised Wilfred using me as the bad example. But instead of making Wilfred hold to his wishes, Angus drove Wilfred into my footsteps, determined to best anything I did.\"");
				remove("spats");
				add(["bad example", "best"]);
				fallthrough;

			case "bad example":
				say("\"Father said I were too much like my great-grandfather, Silverpate.\tHe never thought I'd amount to much, even after I'd made Captain.\"");
				say("\"It like to broke his heart when Wilfred ran away to Monitor. That's where the @Lord@ Wilfred hies from...\"");
				say("\"He acts like a swaggering noble, with all his self-important ambition.\"");
				remove("bad example");
				add("Silverpate");
				fallthrough;

			case "Silverpate":
				say("\"Silverpate were a pirate, I'll make no bones about it. He built this inn when he retired from the sea.\" *\"His son, Donal -- my father's father -- took over when Silverpate disappeared. Some think he might have gone back to the sea. Others say that his evil past caught up to him... No one ever saw him again. But there've been plenty wantin' to hunt for his treasure.\"");
				remove("Silverpate");
				add("treasure");
				fallthrough;

			case "treasure":
				say("\"Family legend doth say that Silverpate used part of his treasure to build the inn. Everyone seems to think that he hid whatever was left somewhere around here before he disappeared.\" *\"But I'll tell thee, there ain't no treasure. And I should know...\"");
				if (var0003 == true) {
					DEVRA->show_npc_face1(0x0000);
					say("\"Aye, indeed! Thou and thy friends didst pry into everything and dug holes from here to Monitor when thou wert young! I never stopped thee... I thought thy father had done the same when he was young.\" *\"But I whaled thee good when I caught thee digging in me garden!\"");
					0x0000->set_conversation_slot();
					say("\"Aye... I stood up to dinner that night. I remember.\"");
					UI_remove_npc_face1();
				}
				remove("treasure");
				fallthrough;

			case "best":
				say("\"I became a Captain in Monitor, but that was not good enough for Wilfred. He had to be a knight... and a Bear at that.\" *\"'Tis sad to see the likes of him and his friends making a mockery of Monitor's ideals.\"");
				remove("best");
				add("ideals");
				fallthrough;

			case "ideals":
				if (gflags[HAVE_WOLF_TATTOO] == true) {
					say("\"Thou hast seen the changes, I'm sure...\"");
				} else {
					say("\"'Tis sad to say, ",
						var0000,
						"...\"");
				}
				say("\"Courage and Valor have become so debased that Knights like Wilfred are little more than braggarts and mercenaries! Where once the pinnacle of honor was a Monitorian knight, now people see them as vain bullies.\" *\"It sickens me... I had nearly decided to renounce my commission when mother sent word of father's disappearance.\"");
				remove("ideals");
				fallthrough;

			case "Monitor":
				if (gflags[HAVE_WOLF_TATTOO] == true) {
					say("\"What can I tell thee that thou dost not already know?\"");
				} else {
					say("\"Where to start?\"");
				}
				say("\"Monitor is a city to the south of here. 'Tis dedicated to Courage and Valor. Monitorian soldiers are called the Pikemen and wear a tattoo on their faces.\"");
				say("\"There are three Pikemen Commands -- the wolves, the leopards, and the bears. I am a Captain in the Wolf Command. Each Command runs the city for a portion of the year.\"");
				remove("Monitor");
				add("runs the city");
				fallthrough;

			case "runs the city":
				say("\"The senior officer of the Command becomes Lord of Monitor for that Command's portion of the year. This ensures the continuing balance of Commands.\"");
				say("\"'Twas meant to keep the battling for supremacy between the Commands at a minimum.\" *\"If each Command knows that it will have a chance to control the city during the year, more attention is given to the military functions of the Command rather than the political.\"");
				remove("runs the city");
				fallthrough;

			case "Wolf Command":
				if (gflags[HAVE_WOLF_TATTOO] == true) {
					say("\"A hardy bunch, are we not? Not as hot-headed as those Bears, and much more tightly knit than those Leopards.\"");
				} else {
					say("\"We are a hardy bunch, ",
						var0000,
						". Not as hot-headed as those Bears, and much more tightly knit than those Leopards.\"");
				}
				remove("Wolf Command");
				fallthrough;

			case "Moonshade":
				say("\"I've ne'er been there myself, not being overly fond of wizards and their feuds. But if thou desirest spells or items of enchantment, that is the place to go.\" *\"If thou art looking to go to the City of Mages, thou wilt need a boat.\"");
				remove("Moonshade");
				add(["wizard feuds", "boat"]);
				fallthrough;

			case "wizard feuds":
				say("\"There isn't a sorcerer alive what doesn't scheme to become MageLord of that city! The whole place is split into rival factions that bicker constantly with each other.\"");
				remove("wizard feuds");
				fallthrough;

			case "boat":
				say("\"The Magic Storms have wrecked every boat on this coast except one. That vessel belongs to Captain Hawk.\"");
				remove("boat");
				add("Captain Hawk");
				fallthrough;

			case "Captain Hawk":
				say("\"'Tis no use to think of hiring him. He was in a fracas here, broke things up a bit.\" *\"The Pikemen dragged Hawk away when he took a swing at their commander. He's being held at Bull Tower until he pays their fine.\"");
				if (var0003 == true) {
					DEVRA->show_npc_face1(0x0000);
					say("\"Fine! More like ransom, I'd call it! Thou knowest as well as I, Argus, that Hawk can't pay...\" *\"Not if he doesn't put out from here. And he swore he wouldn't until these storms stop.\"");
					UI_remove_npc_face1();
					0x0000->set_conversation_slot();
				}
				gflags[KNOW_PIKEMEN_HAVE_HAWK] = true;
				remove("Captain Hawk");
				add("Pikemen");
				fallthrough;

			case "Pikemen":
				say("\"I didn't call them, ",
					var0000,
					". I've known Hawk since I was a boy and, being a Pikeman myself, I have little to worry about with him.\"");
				say("\"To be sure, he can put up a mighty fight and break things... But he always pays for the damages when he wakes. Someone else must have pulled them in after him.\"");
				remove("Pikemen");
				add("someone else");
				fallthrough;

			case "someone else":
				say("\"I'd wager my sword that it was that merchant, Flindo. He was mightily put out when Hawk refused to sail to Moonshade until the storms eased up.\"");
				remove("someone else");
				fallthrough;

			case "out of business":
				say("\"Aye, few people care to stray too far from shelter these days.\" *\"Even Hawk put in here and refused to budge because of the storms... Though his passengers are less than thrilled with his decision.\" *\"And all our help ran off to the cities, hoping that it would be safer around all those buildings.\"");
				remove("out of business");
				add("passengers");
				fallthrough;

			case "passengers":
				say("\"Hawk hath two passengers staying here until he puts out again -- if he ever pays the Pikemen, that is. One of them is the fellow with the parrot. Kane, I think his name is. The other is an arrogant fellow named Flindo. He's a merchant.\" *\"I was glad to have them, being as we only have four other guests.\"");
				remove("passengers");
				add("guests");
				fallthrough;

			case "guests":
				say("\"Yes... There be Ensorcio. He's an exiled mage from Moonshade.\" *\"There be Selina, who hath not been here very long. She is very afraid of these storms...\"");
				if (var0003 == true) {
					DEVRA->show_npc_face1(0x0000);
					say("\"Bah! She's no more afraid of those storms than thou art! She follows thee about right well enough, storm or no!\"");
					UI_remove_npc_face1();
					0x0000->set_conversation_slot();
					say("\"Mother!\"");
				}
				say("\"Byrin's here, which is a blessing. 'Tis good to have a gleeman to pass the weary hours between storms. And then there be that new fellow, Miggim. I don't know too much about him... He hath only been here a few days and is rarely out of his room.\"");
				remove("guests");
				fallthrough;

			case "Sleeping Bull":
				say("\"'Tis an uncommon name, to be sure. It doth have something to do with the village that once was here. According to family tales, this land once belonged to a mage who hated all people. This mage created a huge stone bull to kill trespassers on his land.\"");
				say("\"'Twas the bull's defeat that gave the village its name... And, in turn, became the name of the inn itself.\"");
				remove("Sleeping Bull");
				add("bull's defeat");
				fallthrough;

			case "bull's defeat":
				say("\"One day the mage heard a local noble's son claim that he could defeat the bull. The mage told the boy he was welcome to try, but death would be the reward of failure.\"");
				say("\"When the boy asked what would reward his success, the mage wagered his land. That night the boy stole the ring from the bull's nose, turning it back to inanimate stone.\"");
				say("\"The village was named after the huge stone bull that once stood in the center of the market square. I do not know what happened to the bull, if ever there was one, for I searched for it as a lad and never found it.\"");
				remove("bull's defeat");
				fallthrough;

			case "duel":
				say("\"I will not lie to thee... I did, indeed, kill a man in a duel of honor. As I called the duel, it was he who named the conditions.\" *\"He were equally trained and armed as myself, else I would have demanded to cross swords with his seconds. And I would have asked him to yield, but my blow glanced off his hilt and took him square in the throat.\"");
				remove("duel");
				add("called the duel");
				fallthrough;

			case "called the duel":
				say("\"He likened me to my forefather, Silverpate -- loudly, and in public. I asked for his apology, and when he further heaped filth upon my name... I called him to duel before witnesses.\"");
				remove("called the duel");
				fallthrough;

			case "bribes":
				UI_push_answers();
				say("\"By the stone bull's horns! I'd like to know who insists on telling these false tales! I was cleared of all allegations by my commander and I'll have thine apology for spreading such a lie!\"");
				say("\"Wilt thou apologize? Or shall I take my recompense from thine hide?\"");
				add(["apologize", "don't apologize"]);
				fallthrough;

			case "apologize":
				say("\"I accept thine apology...\" *\"Thou art wise, for I had no wish to do thee harm. But I shall not stand by while my name is abused. Forgive me, but I must withdraw until I am more sure of my temper.\"");
				abort;

			case "don't apologize":
				say("\"So be it then!\" ~\"Prepare thyself to be thrashed!\"");
				Func09AD(ARGUS);
				abort;

			case "food":
				if ((ARGUS->get_schedule_type() == TEND_SHOP) || (ARGUS->get_schedule_type() == WAITER)) {
					if (!var0005) {
						say("\"Mother doth do all the cooking here... and she is very good.\"");
						if (var0003 == true) {
							DEVRA->show_npc_face1(0x0000);
							say("\"What a nice son! He compliments me so!\"");
							UI_remove_npc_face1();
							0x0000->set_conversation_slot();
							say("\"It IS true.\"");
						}
						var0005 = true;
					}
					Func0805();
				} else {
					say("\"Return when we be open, and I will sell thee a meal!\"");
					remove("food");
				}
				fallthrough;

			case "drink":
				if ((ARGUS->get_schedule_type() == TEND_SHOP) || (ARGUS->get_schedule_type() == WAITER)) {
					say("\"I am certain our selection will please thee, ",
						var0000,
						".\"");
					Func0806();
				} else {
					say("\"If thou wilt return when we are open, I will sell thee a drink!\"");
					remove("drink");
				}
				fallthrough;

			case "room":
				say("\"The cost is 8 gold coins per person. Wouldst thou like a room for the night?\"");
				if (Func0955()) {
					var0008 = UI_get_party_list();
					var0009 = 0x0000;
					for (var000C in var0008 with var000A to var000B) {
						var0009 += 0x0001;
					}
					var000D = var0009 * 0x0008;
					var000E = PARTY->count_objects(0x0284, QUALITY_ANY, FRAME_ANY);
					if (var000E >= var000D) {
						say("\"Here is the key to room number 3.\"");
						var000F = UI_remove_party_items(var000D, 0x0284, QUALITY_ANY, FRAME_ANY, 0x0000);
						var0010 = Func099B(AVATAR, 0x0001, 0x0281, 0x0003, 0x0009, 0x0000, true);
						say("\"The rooms are upstairs.\"");
					} else {
						say("\"I do believe thou dost not have enough gold coins for a room.\"");
					}
				} else {
					say("\"Some other time, then.\"");
				}
				remove("room");
				fallthrough;

			case "bye":
				UI_remove_npc_face0();
				Func097F(AVATAR, "@Farewell!@", 0x0000);
				Func097F(ARGUS, "@Come again!@", 0x0002);
				break;
		}
	}
}

extern var Func0954 0x954 ();
extern var Func0953 0x953 ();
extern var Func0994 0x994 ();
extern var Func0942 0x942 (var var0000);
extern void Func07D1 object#(0x7D1) ();
extern void Func097F 0x97F (var var0000, var var0001, var var0002);
extern var Func0957 0x957 (var var0000);
extern void Func09B0 0x9B0 (var var0000);
extern var Func0955 0x955 ();

void Func0427 object#(0x427) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;
	var var0008;
	var var0009;
	var var000A;

	var0000 = Func0954();
	var0001 = UI_is_pc_female();
	var0002 = Func0953();
	var0003 = BYRIN->get_item_flag(MET);
	var0004 = Func0994();
	var0005 = Func0942(IOLO);
	var0006 = Func0942(DUPRE);
	var0007 = Func0942(SHAMINO);
	if (event == DOUBLECLICK) {
		AVATAR->item_say("@Hail, minstrel!@");
		BYRIN->Func07D1();
		Func097F(BYRIN, (("@Greetings, " + var0000) + "!@"), 0x0005);
		BYRIN->set_schedule_type(TALK);
	}
	if (event == STARTED_TALKING) {
		BYRIN->run_schedule();
		BYRIN->clear_item_say();
		BYRIN->show_npc_face0(0x0000);
		if (var0004 == 0x001F) {
			if (var0003 == true) {
				say("\"I had wondered when I would encounter thee here, Avatar. Thou wouldst like some answers, no doubt.\" *\"Or perhaps I could sing thee a song to ease thy way.\"");
			} else {
				say("\"Welcome, fellow dreamer! I am Byrin, a gleeman by trade.\" *\"Thou dost look perplexed. I'll warrant that thou wouldst like some answers. Or perhaps I could sing thee a song to ease thy way.\"");
				BYRIN->set_item_flag(MET);
			}
			add(["answers", "song", "bye"]);
		} else {
			if (var0003 == false) {
				if (gflags[HAVE_WOLF_TATTOO] == true) {
					if (var0001 == true) {
						say("\"Ah, welcome to the Sleeping Bull, noble lady! I am Byrin, a gleeman... or minstrel, if thou wilt. I know several tales or tunes that might stir thy brave heart.\"");
					} else {
						say("\"Welcome to the Sleeping Bull, brave pikeman! I am Byrin, a gleeman... or minstrel, if thou wilt. I know many tales and tunes of valor and adventure.\"");
					}
				} else {
					say("\"Thou art welcome to the Sleeping Bull, fellow traveller! I am Byrin, a wandering gleeman... or minstrel, if thou wilt. I know many tales and tunes to help pass the evenings.\"");
				}
				BYRIN->set_item_flag(MET);
			} else {
				say("\"",
					var0002,
					"! What a pleasure to see thee here... I knew that thou couldst not stay long away from my tales and tunes!\"");
			}
			add(["tales", "tunes", "bye"]);
		}
		converse (0) {
			case "answers":
				say("\"Thou mayest find that the answers only give rise to more questions. But I shall do my best to help thee.\" *\"First thou must know that thou dost walk in the land of dreamers. There are only two ways to enter or exit here.\"");
				remove("answers");
				add("two ways");
				fallthrough;

			case "two ways":
				say("\"The first way to enter this realm is from the safety of thy bed... In thy nightly slumber.\" *\"The second way to enter here is far more perilous... By falling prey to the enchantments in Gorlab Swamp.\"");
				remove("two ways");
				add("Gorlab Swamp");
				fallthrough;

			case "Gorlab Swamp":
				say("\"Long ago -- even before the serpent people made this land their home -- a sorcerer named Rabindrinath swore to destroy the peaceful town of Gorlab. But the town healer, Siranush, opposed him and the evil spell went awry.\" *\"The inhabitants of the town were not destroyed, but trapped within the realm of dreams... Along with the mad sorceror... And any who dare enter the environs of Gorlab.\"");
				remove("Gorlab Swamp");
				add(["Rabindrinath", "Siranush"]);
				fallthrough;

			case "Rabindrinath":
				say("\"Rabindrinath hath struggled mightily against Siranush across the span of time. Each of his attacks have been repelled... Much to his displeasure.\"");
				remove("Rabindrinath");
				add("displeasure");
				fallthrough;

			case "displeasure":
				say("\"Rabindrinath vents his anger by troubling the dreams of those who venture here.\"");
				remove("displeasure");
				fallthrough;

			case "Siranush":
				say("\"Siranush is a strong-willed woman who hath repelled all of Rabindrinath's attacks on her people. She is no sorcerer, and I fear that her strength will one day fail her.\" *\"If Siranush is vanquished, I am sure that Rabindrinath will turn his evil intent on the wandering dreamers. Without Siranush's guidance, those who enter here might never leave.\"");
				remove("Siranush");
				add("leave");
				fallthrough;

			case "leave":
				say("\"As I said before, there are two ways to enter the land of dreamers. If thou didst come here from the comfort of thy bed, thou canst simply awaken and thou wilt return to the land of waking men.\" *\"But, if thou didst come here through the enchantments in the Swamp, thou must die here to return to thy body.\"");
				remove("leave");
				add("die");
				fallthrough;

			case "die":
				say("\"By die, I do not mean that thou must cease living. I mean that thy perceived life here must end...\" *\"Thy death here returns thee to thy body. So long as Siranush prevails and thy body lives, thou canst return to the world of waking men.\" *\"But if Siranush should fall, or thy body die... Thou shalt remain trapped here for all time.\"");
				remove("die");
				fallthrough;

			case "song":
				say("\"I know many songs...\" ~\"Dost thou wish to hear one I have already sung?\" ~\"Or dost thou wish to hear a new song?\"");
				var0008 = [];
				if (Func0957(["old song", "new song"]) == 0x0001) {
					if (gflags[HEARD_BEATRIX_SONG] == true) {
						var0008 &= 0x0001;
					}
					if (gflags[HEARD_MOUNTAIN_SONG] == true) {
						var0008 &= 0x0002;
					}
					if (gflags[HEARD_GWANI_SONG] == true) {
						var0008 &= 0x0003;
					}
					if (gflags[HEARD_FOREST_MASTER_SONG] == true) {
						var0008 &= 0x0004;
					}
					if (gflags[HEARD_DREAM_SONG] == true) {
						var0008 &= 0x0005;
					}
					if (gflags[HEARD_WHITE_DRAGON_SONG] == true) {
						var0008 &= 0x0006;
					}
				} else {
					if (gflags[HEARD_BEATRIX_SONG] == false) {
						var0008 &= 0x0001;
					}
					if (gflags[HEARD_MOUNTAIN_SONG] == false) {
						var0008 &= 0x0002;
					}
					if (gflags[HEARD_GWANI_SONG] == false) {
						var0008 &= 0x0003;
					}
					if (gflags[HEARD_FOREST_MASTER_SONG] == false) {
						var0008 &= 0x0004;
					}
					if (gflags[HEARD_DREAM_SONG] == false) {
						var0008 &= 0x0005;
					}
					if (gflags[HEARD_WHITE_DRAGON_SONG] == false) {
						var0008 &= 0x0006;
					}
				}
				if (var0008 == []) {
					say("\"I'm sorry... Thou hast heard all of my songs.\"");
				} else {
					var0009 = UI_get_random(UI_get_array_size(var0008));
					var000A = var0008[var0009];
					Func09B0(var000A);
				}
				fallthrough;

			case "tales":
				say("\"For those with an adventurous spirit, I can tell thee of the northern savages.\"");
				say("\"For those who wish to hear of a lost civilization, I can tell thee of the people who left the ruins on this continent.\"");
				say("\"For those who would hear a tale of bitter bravery, I can tell thee of the lost king.\"");
				remove("tales");
				add(["northern savages", "lost culture", "lost king"]);
				fallthrough;

			case "northern savages":
				say("\"Once thou dost leave the warm lands of Man, thou dost come into the realm of the northern savages. These creatures have faces that strongly resemble that of a normal man, but they are covered head to foot in a shaggy fur pelt.\"");
				say("\"Some say that these creatures are some lost tribe of Man that hath adapted to the cold.\" ~\"Still others claim that the savages are a mage-created race that guards some great, mystical secret.\"");
				say("\"None can say if they are intelligent.\" ~\"They build no structures and speak no recognizable language.\"");
				if (gflags[HEARD_GWANI_SONG] == false) {
					say("\"There is also a song about the northern savages.\" ~\"Wouldst thou care to hear it?\"");
					if (Func0955() == true) {
						say("\"All right, then...\"");
						Func09B0(0x0003);
					} else {
						say("\"Perhaps some other time, then.\"");
					}
				}
				remove("northern savages");
				fallthrough;

			case "lost culture":
				say("\"Long ago, before any of the cities thou knowest today were built, there was a race of Man who worshipped three great elemental serpents. Some followed one of fire. Others followed one of ice. And still others followed one of earth.\"");
				say("\"As only the serpent of earth could withstand both the fire and the ice of the other serpents, it possessed the most power. The fire and ice serpents were violently opposed to each other, but were held in check by the serpent of earth.\"");
				say("\"Then the serpent of earth lost power. The fire and ice serpents warred for supremacy. When the battle ended, it mattered not which serpent had won... for the land was destroyed and all the worshippers lay dead.\"");
				remove("lost culture");
				fallthrough;

			case "lost king":
				say("\"To the north of here stand two castles, seemingly left empty by the ravages of time. But neither is truly empty, for they both hold the ghosts of trust betrayed.\"");
				say("\"In one majestic castle a lady waits for her faithless lover who pledged his love and never returned. In the other, a father and ruler, driven mad for the loss of daughter and erstwhile friend, took his people beyond the cares of time.\"");
				say("\"All the trapped souls await the return of the one whose desertion forever changed the land he had sworn to protect. All wait for the return of the lost king... and revenge!\"");
				if (var0007 == true) {
					SHAMINO->show_npc_face1(0x0000);
					say("\"Wait! What art thou talking about? It seems... But no! It could not be!\" *\"Hast thou any more to tell of this @lost king@? Dost thou know his name?\"");
					0x0000->set_conversation_slot();
					say("\"Few in truth have ventured within that castle, lord. They fear the wrath of she who dwells there...\" *\"And none have ever returned from the other castle. But the name that is given for the lost king is... Lord Shamino.\"");
					UI_remove_npc_face1();
				}
				if (var0006 == true) {
					DUPRE->show_npc_face1(0x0000);
					say("\"It can't be!\"");
					UI_remove_npc_face1();
					0x0000->set_conversation_slot();
				}
				if (var0005 == true) {
					IOLO->show_npc_face1(0x0000);
					say("\"There must be some mistake!\"");
					UI_remove_npc_face1();
					0x0000->set_conversation_slot();
				}
				if (gflags[HEARD_BEATRIX_SONG] == false) {
					say("\"There is a song about the lady.\" ~\"Wouldst thou care to hear it?\"");
					if (Func0955() == true) {
						say("\"It is a sad ballad indeed...\"");
						Func09B0(0x0001);
					} else {
						say("\"Another time, then.\"");
					}
				}
				if (gflags[HEARD_WHITE_DRAGON_SONG] == false) {
					say("\"There is a song about the other castle, as well.\" ~\"Wouldst thou care to hear it?\"");
					if (Func0955() == true) {
						say("\"Prepare thyselves...\"");
						Func09B0(0x0006);
					} else {
						say("\"Another time, then.\"");
					}
				}
				remove("lost king");
				fallthrough;

			case "tunes":
				if (gflags[HAVE_WOLF_TATTOO] == true) {
					if (var0001 == true) {
						say("\"For thee, brave lady, I would sing of dreams, or perhaps of tragedy. Of course, although I sing to entertain others, I hope for some small token of appreciation... if possible. Singing is thirsty business.\"");
						add(["dreams", "tragedy"]);
					} else {
						say("\"For thee, noble sir, I would sing a heart-rending ballad, or perhaps long-lost lore. Of course, although I sing to entertain others, I hope for some small token of appreciation... if possible. Singing is thirsty business.\"");
						add(["ballad", "lore"]);
					}
				} else {
					say("\"I sense that thou dost like adventure. For thee I would sing of strange beings and strange places. Of course, although I sing to entertain others, I hope for some small token of appreciation... if possible. Singing is thirsty business.\"");
					add(["strange beings", "strange places"]);
				}
				remove("tunes");
				fallthrough;

			case "dreams":
				if (gflags[HEARD_DREAM_SONG] == true) {
					say("\"I believe that thou hast already heard that one.\" ~\"Wouldst thou like to hear it again?\"");
					if (Func0955() == true) {
						say("\"My pleasure...\"");
						Func09B0(0x0005);
					} else {
						say("\"Perhaps I could find another song for thee...\"");
						add("song");
					}
				} else {
					say("\"I hope thou dost enjoy it...\"");
					Func09B0(0x0005);
				}
				remove("dreams");
				fallthrough;

			case "tragedy":
				if (gflags[HEARD_WHITE_DRAGON_SONG] == true) {
					say("\"I seem to remember singing this for thee before...\" ~\"Wouldst thou like to hear it again?\"");
					if (Func0955() == true) {
						say("\"One more time then...\"");
						Func09B0(0x0006);
					} else {
						say("\"Perhaps I could find another song for thee...\"");
						add("song");
					}
				} else {
					say("\"Relax and be at ease...\"");
					Func09B0(0x0006);
				}
				remove("tragedy");
				fallthrough;

			case "ballad":
				if (gflags[HEARD_BEATRIX_SONG] == true) {
					say("\"I am sure that thou hast already...\" ~\"Wouldst thou like to hear it again?\"");
					if (Func0955() == true) {
						say("\"As thou wishest...\"");
						Func09B0(0x0001);
					} else {
						say("\"Perhaps I could find another song for thee...\"");
						add("song");
					}
				} else {
					say("\"I believe I remember it...\"");
					Func09B0(0x0001);
				}
				remove("ballad");
				fallthrough;

			case "lore":
				if (gflags[HEARD_MOUNTAIN_SONG] == true) {
					say("\"I fear that thou dost already know this one...\" ~\"Wouldst thou like to hear it again?\"");
					if (Func0955() == true) {
						say("\"Thou canst sing along if thou wishest...\"");
						Func09B0(0x0002);
					} else {
						say("\"Perhaps I could find another song for thee...\"");
						add("song");
					}
				} else {
					say("\"I think this be the right key...\"");
					Func09B0(0x0002);
				}
				remove("lore");
				fallthrough;

			case "strange beings":
				if (gflags[HEARD_GWANI_SONG] == true) {
					say("\"I have done this one for thee before...\" \"~Wouldst thou like to hear it again?\"");
					if (Func0955() == true) {
						say("\"Very well...\"");
						Func09B0(0x0003);
					} else {
						say("\"Perhaps I could find another song for thee...\"");
						add("song");
					}
				} else {
					say("\"Thou wilt like the tempo on this one...\"");
					Func09B0(0x0003);
				}
				remove("strange beings");
				fallthrough;

			case "strange places":
				if (gflags[HEARD_FOREST_MASTER_SONG] == true) {
					say("\"Thou knowest this one...\" \"~Wouldst thou like to hear it again?\"");
					if (Func0955() == true) {
						say("\"I am cheered that thou dost like it...\"");
						Func09B0(0x0004);
					} else {
						say("\"Perhaps I could find another song for thee...\"");
						add("song");
					}
				} else {
					say("\"Listen carefully...\"");
					Func09B0(0x0004);
				}
				remove("strange places");
				fallthrough;

			case "bye":
				UI_remove_npc_face0();
				Func097F(AVATAR, "@Farewell, gleeman!@", 0x0000);
				Func097F(BYRIN, "@May thy path be smooth!@", 0x0005);
				break;
		}
	}
}

extern var Func0954 0x954 ();
extern var Func0953 0x953 ();
extern var Func0994 0x994 ();
extern var Func0942 0x942 (var var0000);
extern var Func0839 0x839 ();
extern void Func0917 0x917 (var var0000, var var0001);
extern var Func0910 0x910 (var var0000);
extern void Func083A 0x83A (var var0000);
extern void Func07D1 object#(0x7D1) ();
extern void Func097F 0x97F (var var0000, var var0001, var var0002);
extern var Func0992 0x992 (var var0000, var var0001, var var0002, var var0003);
extern var Func097D 0x97D (var var0000, var var0001, var var0002, var var0003, var var0004);

void Func0428 object#(0x428) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;
	var var0008;
	var var0009;
	var var000A;
	var var000B;
	var var000C;
	var var000D;
	var var000E;
	var var000F;
	var var0010;
	var var0011;
	var var0012;
	var var0013;
	var var0014;
	var var0015;
	var var0016;
	var var0017;

	var0000 = HAWK->get_npc_id();
	var0001 = HAWK->get_schedule_type();
	var0002 = Func0954();
	var0003 = UI_is_pc_female();
	var0004 = Func0953();
	var0005 = "lad";
	var0006 = Func0994();
	var0007 = Func0942(FLINDO);
	var0008 = Func0942(ARGUS);
	var0009 = Func0942(ENSORCIO);
	if (var0003 == true) {
		var0005 = "lass";
	}
	if (Func0839() && (var0000 == 0x0000)) {
		HAWK->set_npc_id(0x0001);
		var0000 = 0x0001;
	}
	if (event == SCRIPTED) {
		var000A = HAWK->find_nearby(0x025F, 0x0028, MASK_EGG);
		for (var000D in var000A with var000B to var000C) {
			var000E = var000D->get_item_flag(TEMPORARY);
			if (!var000E) {
				var000D->remove_item();
			}
		}
		var000F = find_nearby(0x00FB, 0x0019, MASK_NONE);
		Func0917(var000F, 0x0001);
		var0010 = find_nearby(0x0096, 0x0019, MASK_NONE);
		var0011 = Func0910(var0010);
		var0012 = find_nearby(0x03C1, 0x0064, MASK_EGG);
		Func083A(var0012);
	}
	if (event == PROXIMITY) {
		if (var0001 == PATROL) {
			if (var0000 == 0x0000) {
				var000D = HAWK->find_nearby(0x025F, 0x0002, MASK_EGG);
				var0013 = var000D->get_item_quality();
				if (var0013 == 0x000F) {
					var000D->remove_item();
					HAWK->move_object([0x0503, 0x08C7, 0x0000]);
					HAWK->set_new_schedules(MIDNIGHT, EAT_AT_INN, [0x0503, 0x08C7]);
					HAWK->run_schedule();
				}
			}
			if (var0000 > 0x0002) {
				HAWK->set_schedule_type(WAIT);
				var0011 = script HAWK {
					nohalt;
					step north;
					step east;
				};
				var0000 += 0x0001;
				HAWK->set_npc_id(var0000);
			}
		}
	}
	if (event == DOUBLECLICK) {
		AVATAR->item_say("@Captain?@");
		HAWK->Func07D1();
		Func097F(HAWK, "@Aye, matey?@", 0x0002);
		if (gflags[PAID_HAWK_RANSOM]) {
			HAWK->set_schedule_type(TALK);
		} else {
			HAWK->show_npc_face0(0x0000);
			say("\"Could ye unlock this door and let me go?\"");
			Func097F(HAWK, "@I am cold...@", 0x0000);
			abort;
		}
	}
	if (event == STARTED_TALKING) {
		HAWK->run_schedule();
		HAWK->show_npc_face0(0x0000);
		if (gflags[BANES_RELEASED]) {
			say("\"I had hoped ta see ye again, ",
				var0005,
				".\" ~\"Mine health is failin' me, an' I wanted ta be sure the Arabella went ta someone I can trust to care for her.\" *\"I have no living kin no more...\" ~\"So I want ye ta take her.\"");
			say("\"Thou art a brave ",
				var0005,
				".\" ~\"An' thou wert willin' ta spend a bit o' thy time listening ta an old man's tales.\" *\"Thou... art...\" ~\"Worthy...\"");
			var0014 = Func0992(0x0001, "@He is dead!@", "@He is dead.@", false);
			HAWK->kill_npc();
			abort;
		}
		var0015 = HAWK->get_item_flag(MET);
		if (var0015 == false) {
			say("\"How pleasant to make thine acquaintance, ",
				var0005,
				".\" ~\"I be Hawk, captain of the good ship Arabella.\"");
			HAWK->set_npc_id(0x0000);
			HAWK->set_new_schedules(MIDNIGHT, EAT_AT_INN, [0x0503, 0x08C7]);
			HAWK->run_schedule();
			HAWK->set_item_flag(MET);
		} else {
			say("\"A pleasure ta see ye again, ",
				var0004,
				"!\"");
		}
		if (var0000 == 0x0000) {
			say("\"I could use a stiff drink, ",
				var0005,
				".\"");
			say("\"Thou canst talk ta me at the pub!\"");
			var0016 = HAWK->get_object_position();
			if ((var0016[0x0001] >= 0x0AF1) && ((var0016[0x0001] <= 0x0AFE) && ((var0016[0x0002] >= 0x00C1) && (var0016[0x0002] <= 0x00DE)))) {
				var000D = UI_create_new_object(0x025F);
				if (var000D) {
					var0011 = var000D->set_item_quality(0x0000);
					var000D->set_item_frame(0x0000);
					var000D->set_item_flag(TEMPORARY);
					var0011 = UI_update_last_created([0x0AFC, 0x00CF, 0x0000]);
				}
				var000D = UI_create_new_object(0x025F);
				if (var000D) {
					var0011 = var000D->set_item_quality(0x000F);
					var000D->set_item_frame(0x0001);
					var000D->set_item_flag(TEMPORARY);
					var0011 = UI_update_last_created([0x0AF6, 0x00DE, 0x0003]);
				}
				HAWK->set_schedule_type(PATROL);
			}
			Func097F(HAWK, "@I need a drink!@", 0x0000);
			abort;
		}
		say("\"So what can I do for ye, ",
			var0005,
			"?\"");
		if (var0006 == 0x0009) {
			say("\"I thank ye for releasing me from that cell!\" ~\"I never expected ta end up in jail over not wantin' ta sail in these blasted storms!\" *\"If there's anything that I can do for ye, thou shouldst tell me.\" ~\"Cap'n Hawk is a man of his word!\"");
			add(["jail", "storms"]);
		}
		if ((!gflags[HAWK_IN_MOONSHADE]) && (!gflags[BOATING_TO_MOONSHADE])) {
			add("journey");
		}
		if (gflags[HAWK_IN_MOONSHADE] && (!0x01E0->get_item_flag(MET))) {
			add("leave island");
		}
		if (gflags[ASKED_BUCIA_ABOUT_PINECONE] && (!gflags[KNOWS_PINECONE_OWNER])) {
			add("pinecone");
		}
		if (gflags[ASKED_FEDABIBLIO_ABOUT_BLUE_EGG] && (!gflags[KNOWS_BLUE_EGG_OWNER])) {
			add("blue egg");
		}
		converse (["bye"]) {
			case "jail":
				say("\"Now if that ain't gratitude for ye!\" ~\"Here I refused ta risk the Arabella and them passengers ta the terrible fierce weather.\" *\"And one of them goes and calls the Pikemen on me!\"");
				remove("jail");
				add(["Arabella", "passengers", "Pikemen"]);
				fallthrough;

			case "Arabella":
				say("\"The Arabella is my ship, ",
					var0005,
					".\" ~\"She's named after me dear, departed wife...\" ~\"And dearer ta me than a good, stiff drink!\"");
				remove("Arabella");
				fallthrough;

			case "passengers":
				say("\"I had three passengers for the trip over to Moonshade.\" ~\"There's a fellow named Kane, a scurvy merchant named Flindo, and a pretty lass named Selina.\"");
				remove("passengers");
				add(["Kane", "Flindo", "Selina"]);
				fallthrough;

			case "Kane":
				say("\"Seems I heard tell he was a sheepherder or something.\" ~\"Kane wants ta go talk ta some of those fancy wizards over in Moonshade...\" *\"See if they kin help him find what happened ta his older brother who disappeared a few months ago.\" ~\"Ye can't miss him... He always has a bird with him.\"");
				remove("Kane");
				add("bird");
				fallthrough;

			case "bird":
				say("\"Bird must have been a sailor, ",
					var0005,
					"!\" ~\"Never seen anything like it! The bird has a real fondness for a stout drink.\" *\"It doth talk purty well, too.\"");
				remove("bird");
				fallthrough;

			case "Flindo":
				say("\"That worm!\" ~\"He'd spit in yer last cup of grog he would, if he thought he could make money off it!\"");
				if (var0007 == true) {
					FLINDO->show_npc_face1(0x0000);
					say("\"Thou art a fine one to talk, thou bilge-water rat!\" ~\"Thou wouldst hold an honest merchant hostage to thy drinking sprees!\"");
					0x0000->set_conversation_slot();
					say("\"Why, thou overgrown dung beetle!\" ~\"I told ye when I landed that those seas were no safe place ta be with these forsaken storms!\" *\"And thou shouldst suck salt spray for days on end, ye 'honest' merchant!\" ~\"Then thou'd know the difference between a drunk and a man with a thirst!\"");
					0x0001->set_conversation_slot();
					say("\"Thou art the braggart that said he could sail through the fires of hell and back!\" ~\"And the only thirst thou hast is for more money, thou thief!\"");
					UI_remove_npc_face1();
					0x0000->set_conversation_slot();
					say("\"Thief, is it!? When I turned down every offer thou didst make ta make me sail out ta sea again?\" ~\"And I fear nothing the sea can throw at me, thou barnacle!\" *\"But I'll not deal with things born of magics, for I'm no fool and no mage!\" ~\"And I warned ye about saying false ta my name before...\"");
					if (var0008 == true) {
						ARGUS->show_npc_face1(0x0000);
						say("\"Now stop that, both of you!\" ~\"This is precisely what happened before!\" *\"If thou dost break any more of my furniture, I will break thine head for thee!\"");
						UI_remove_npc_face1();
					}
					if (var0009 == true) {
						ENSORCIO->show_npc_face1(0x0000);
						say("\"Will you two be quiet!\" ~\"You are loud enough to wake the dead...\" ~\"And I am beginning to lose patience with both of you!\"");
						UI_remove_npc_face1();
					}
					0x0000->set_conversation_slot();
				}
				say("\"Flindo was the one that bribed the Pikemen into pulling me away from the fight he started!\"");
				remove("Flindo");
				add("bribed");
				fallthrough;

			case "bribed":
				say("\"Aye, bribed!\" ~\"I heard some of those scum...\"");
				if (var0008 == true) {
					say("\"...Er, Pikemen. Sorry, Argus.\"");
				}
				say("\"Talking just after I woke up.\" ~\"Seems like Flindo payed them ta rough me up so that I'd decide not ta stay and go back ta Moonshade.\" *\"But, moneybags Flindo didn't count on those swine getting greedy!\"");
				remove("bribed");
				remove("greedy");
				fallthrough;

			case "greedy":
				say("\"They thought they could make me pay for my release, but I have no money ta speak of...\" ~\"Then they thought they could convince Flindo ta pay my way out, but either he'd spent all his money bribing them ta rough me up or he wouldn't pay it out of spite!\"");
				remove("greedy");
				fallthrough;

			case "Selina":
				say("\"Pretty little thing, ",
					var0005,
					"... Brought her over from Moonshade a while back. Might have been the return trip from takin' that fat sage Batlin across.\"");
				say("\"An' a sullen, bossy sort of fellow he was, too. Did not even have the decency ta lift a mug wit' me during the crossing! Bah! But what was I talkin' about... Ah yes, that lovely slip of a lass, Selina.\"");
				say("\"She must have been someone's servant. Said she wanted ta go home for a visit. Said she might be here for me ta take her back.\"");
				remove("Selina");
				add(["servant", "home"]);
				fallthrough;

			case "servant":
				say("\"Selina certainly isn't one of those over-dressed mages, for sure!\" ~\"She's too timid ta be anything but a servant.\"");
				remove("servant");
				fallthrough;

			case "home":
				say("\"I don't think she said, but I did perceive it was somewhere like Monitor.\"");
				remove("home");
				fallthrough;

			case "Pikemen":
				say("\"Well, to honor the fine keeper of this establishment...\"");
				if (gflags[HAVE_WOLF_TATTOO]) {
					say("\"'An thee, o' course, ",
						var0005,
						"...\"");
				}
				say("\"I'll try ta be kind.\" ~\"So I'll merely say that Monitor's finest are no longer cut from the same sailcloth as Argus...\" *\"If what I've seen and heard is any judge, I'd say that the Pikemen are more interested in money than in valor... and me treasure.\"");
				remove("Pikemen");
				add("treasure");
				fallthrough;

			case "treasure":
				say("\"Aye, treasure... from me wilder, younger days.\"");
				say("\"Those Pikemen scoundrels tried ta convince me ta tell 'em where I keep me map. 'Tis lucky fer me that Argus would never let 'em search me room. I never keep it on me... Hide it in me room most times.\"");
				remove("treasure");
				fallthrough;

			case "storms":
				say("\"I've sailed the seas almost all the days of my life, ",
					var0005,
					".\" ~\"And I'll tell ye that there's nothing on the water that I can't sail a ship through.\" *\"But how can a man fight something that plucks a ship out o' the water, or turns a ship's sails into slabs of stone?\" ~\"And I'll not think me a coward ta tell ye that these storms have me plenty mindful of how deep them seas are!\"");
				remove("storms");
				fallthrough;

			case "journey" (remove):
				if (var0000 == 0x0001) {
					say("\"I can take ye to Moonshade, ",
						var0005,
						".\" ~\"Wait for me out on the Arabella, and we'll try to outrace these blasted storms!\"");
					Func097F(HAWK, "The Arabella sails in two minutes!", 0x000A);
					var0017 = HAWK->get_npc_object();
					HAWK->set_npc_id(0x0002);
					var0000 = 0x0002;
				}
				abort;

			case "leave island":
				if (gflags[AVATAR_HAS_JAWBONE]) {
					say("\"So ye're still trying ta leave this island?\"");
					say("\"Well, I didn't want ta mention it before, but\tthere are caves in the southern mountains.\" ~\"Legend says they lead ta the mainland, if thou canst find the right path...\" ~\"But none who ventured there have ever returned!\" ~\"I wager that Julia doth have possession of a key that would let thee in down there, but I would think twice if I were thee before I made such a journey!\"");
					gflags[KNOWS_ABOUT_TUNNELS] = true;
				} else {
					say("\"Not on my ship, thou won't!\" ~\"'Tis too dangerous ta sail these waters in these storms!\" *\"If thou dost want ta travel elsewhere, why not speak ta the mages?\" ~\"They know how ta magic themselves for short distances...\" *\"And I've heard it said that Old Erstam the Mad Mage can travel anywhere he pleases!\"");
				}
				remove("leave island");
				fallthrough;

			case "blue egg":
				if (Func097D(PARTY, 0x0001, 0x0241, QUALITY_ANY, 0x0003)) {
					say("\"A rotten egg!\" ~\"Why art thou shoving such a thing at me?\"");
					if (Func0942(ROCCO)) {
						ROCCO->show_npc_face1(0x0000);
						say("\"Take that thing out of here!\" ~\"My patrons are trying to eat!\"");
						UI_remove_npc_face1();
						0x0000->set_conversation_slot();
						Func097F(PETRA, "@Phew!@", 0x0005);
						abort;
					}
				} else {
					say("\"A blue aig?\" ~\"",
						var0005,
						", I have never seen or heard of any such thing in all my\ttravels.\" *\"Might be that thou shouldst ask a scholar, like Fedabiblio the Magister, though.\"");
					var0014 = Func0992(0x0001, "@But he sent us to thee!@", 0x0000, false);
					0x0000->set_conversation_slot();
					if (var0014 != AVATAR) {
						say("\"Then ye be out of luck, matey.\"");
					}
				}
				remove("blue egg");
				fallthrough;

			case "pinecone":
				if (Func097D(PARTY, 0x0001, 0x0108, QUALITY_ANY, FRAME_ANY)) {
					say("\"Anyone can see 'tis a pinecone...\" ~\"What's thy question?\"");
					var0014 = Func0992(0x0001, "@But where doth it come from?@", "@Where can I find pinecones?@", false);
					HAWK->show_npc_face0(0x0000);
					0x0000->set_conversation_slot();
					say("\"In the northern woods, of course.\" ~\"But thou canst not travel there no more -- no ship will sail there, and the Swamp of\tGorlab will let no man pass!\"");
				} else {
					say("\"Pinecones come from the northern woods.\" ~\"Purty things, ain't they? I collect 'em and give 'em to sweet gals like Bucia at the Canton.\"");
					say("\"Can't git 'em now.\" ~\"Ain't gonna sail my ship no more, and a ship is the only way past Gorlab Swamp.\"");
				}
				gflags[KNOWS_PINECONE_OWNER] = true;
				remove("pinecone");
				fallthrough;

			case "bye":
				UI_remove_npc_face0();
				Func097F(AVATAR, "@Fair weather, Captain!@", 0x0000);
				Func097F(HAWK, "@Smooth sailin'!@", 0x0002);
				break;
		}
	}
}

extern var Func0954 0x954 ();
extern var Func0953 0x953 ();
extern var Func0942 0x942 (var var0000);
extern void Func07D1 object#(0x7D1) ();
extern void Func097F 0x97F (var var0000, var var0001, var var0002);
extern var Func0955 0x955 ();
extern var Func0992 0x992 (var var0000, var var0001, var var0002, var var0003);
extern var Func097D 0x97D (var var0000, var var0001, var var0002, var var0003, var var0004);
extern var Func099B 0x99B (var var0000, var var0001, var var0002, var var0003, var var0004, var var0005, var var0006);
extern void Func081E 0x81E ();
extern void Func081F 0x81F ();
extern void Func081D 0x81D ();

void Func0429 object#(0x429) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;
	var var0008;
	var var0009;
	var var000A;
	var var000B;
	var var000C;
	var var000D;
	var var000E;
	var var000F;
	var var0010;
	var var0011;

	var0000 = Func0954();
	var0001 = UI_is_pc_female();
	var0002 = Func0953();
	var0003 = Func0942(ARGUS);
	var0004 = false;
	var0005 = false;
	var0006 = UI_part_of_day();
	if ((var0006 > EARLY) || (var0006 < EVENING)) {
		var0006 = "day";
	} else {
		var0006 = "evening";
	}
	if (event == DOUBLECLICK) {
		AVATAR->item_say("@Pardon me...@");
		DEVRA->Func07D1();
		Func097F(DEVRA, (((("Good " + var0006) + ", ") + var0000) + "."), 0x0002);
		DEVRA->set_schedule_type(TALK);
	}
	if (event == PROXIMITY) {
		var0007 = UI_get_random(0x0006);
		if (var0007 == 0x0001) {
			DEVRA->item_say("@Wouldst thou like another?@");
		}
		if (var0007 == 0x0002) {
			DEVRA->item_say("@Refill?@");
		}
		if (var0007 == 0x0003) {
			DEVRA->item_say("@Lodgings available!@");
		}
		if (var0007 == 0x0004) {
			DEVRA->item_say("@Good, clean rooms!@");
		}
		if (var0007 == 0x0005) {
			if (Func0942(ARGUS)) {
				DEVRA->item_say("@We need more clean mugs, son!@");
				Func097F(ARGUS, "@Aye, mother!@", 0x0002);
			} else {
				DEVRA->item_say("@Mine aching back!@");
			}
		}
		if (var0007 == 0x0006) {
			DEVRA->item_say("@Sigh...@");
		}
	}
	if (event == STARTED_TALKING) {
		DEVRA->run_schedule();
		DEVRA->clear_item_say();
		DEVRA->show_npc_face0(0x0000);
		var0008 = DEVRA->get_item_flag(MET);
		if (var0008 == false) {
			say("\"Welcome to the Sleeping Bull, ",
				var0000,
				"! Enter before we suffer another storm.\" *\"I am Devra... My son, Argus, and I are running the inn since Angus disappeared.\"");
			DEVRA->set_item_flag(MET);
			add(["storm", "Argus", "disappeared"]);
		} else {
			say("\"Welcome back, ",
				var0002,
				". 'Tis so good to see thee again, after all these storms. Argus will be glad to see thee.\"");
			add(["storm", "Argus", "disappeared"]);
		}
		converse (["food", "drink", "room", "exchange money", "bye"]) {
			case "storm":
				say("\"I have lived here since before I was married, and I've never seen anything like these mage-born storms. Why, one caught old man Jothum in his field and changed his plow horse into a goat, in front of his eyes.\" *\"But Jothum was lucky, 'twas only his horse. We never did find what happened to Theron.\"");
				remove("storm");
				add(["mage-born", "Theron"]);
				fallthrough;

			case "mage-born":
				say("\"If thou shouldst be hit with lightning -- normal lightning, mind thee -- thou art dead. Plain and simple. They bury thy charred body the next day.\" *\"But storms that change things, or make them disappear, or exchange them for something else, well now, it seems to me that 'tis magic, right enough. I don't have to be from Moonshade to conjure that answer!\"");
				remove("mage-born");
				add("Moonshade");
				fallthrough;

			case "Moonshade":
				say("\"Fine city, though 'tis plagued by wizards and mages. The place reeks of sorcery.\" *\"Hast thou heard anything more of what might be causing these storms? I wonder if anyone has done anything to stop them.\"");
				if (Func0955() == true) {
					say("\"Is it the work of magic? Do they know who is responsible?\"");
					if (Func0955() == true) {
						say("\"Wonderful! I hope that this means that the storms will end soon...\"");
					} else {
						say("\"I had hoped that the storms would end soon, before they cause us to close...\"");
					}
				} else {
					say("\"Well, I still think 'tis the work of them mages! No good comes of controlling that type of power, I'll tell thee...\"");
					if (var0003 == true) {
						ARGUS->show_npc_face1(0x0000);
						say("\"Aye, mother. And thou wilt tell all who will listen! Do not harass what few customers we do have...\"");
						UI_remove_npc_face1();
						0x0000->set_conversation_slot();
						say("\"Hast thou ever heard a boy so rude as to talk to his mother that way?\"");
						ARGUS->show_npc_face1(0x0000);
						say("\"I am no boy, mother. For now, I'm the innkeeper here and I'll thank thee to remember that we have a mage staying here now.\"");
						UI_remove_npc_face1();
						0x0000->set_conversation_slot();
					}
				}
				remove("Moonshade");
				fallthrough;

			case "Theron":
				say("\"Theron was a simple man, not quite right in the head, if thou knowest what I mean. He worked for Angus and me for nigh on three years as a wood chopper... Until one of those storms.\"");
				say("\"Angus pulled Theron inside when the storm hit, but Theron ran back out to bring in his favorite axe... Next thing there was a blinding flash, and Theron was gone!\"");
				remove("Theron");
				fallthrough;

			case "Argus":
				say("\"Argus is mine oldest boy. He's a captain in the Pikemen... Or he was until he came home to take over his father's place.\" *\"Mine husband always thought that Wilfred, our youngest, would be the one to take the inn. But he hath become too high and mighty to be an honest innkeeper!\"");
				remove("Argus");
				add("Wilfred");
				fallthrough;

			case "Wilfred":
				say("\"Wilfred is a Monitorian knight, ",
					var0000,
					". He always was headstrong... And I think his father harried him overmuch.\" *\"He ran away to be like his brother... Only better, he said.\"");
				remove("Wilfred");
				fallthrough;

			case "disappeared":
				say("\"Thou dost seem like an honest, hard-working person. Perhaps thou canst help me discover what happened to Angus.\" *\"'Tis a right mystery. He disappeared and then my slippers disappeared...\"");
				if (!gflags[RETURNED_SLIPPERS]) {
					say("\"Now I've got no husband and a pair of old, smelly boots.\"");
				} else {
					say("\"Now I've got no husband, but I do have my slippers...\"");
				}
				remove("disappeared");
				add(["mystery", "slippers"]);
				fallthrough;

			case "slippers":
				if (!gflags[RETURNED_SLIPPERS]) {
					say("\"They were hanging on the line to dry when one of those storms hit. When I went out to gather the wash later, there were these huge boots hanging where my slippers had been.\" *\"I'd gladly give these things away, if only I had my slippers back!\"");
					var0009 = Func0992(0x0001, "@Avatar, those look like thy swamp boots!@", "@Those look like my swamp boots!@", false);
					0x0000->set_conversation_slot();
					say("\"If thou hast my slippers, ",
						var0000,
						", I would gladly trade thee these boots for them. I have no great fondness for them other than to keep my feet dry.\"");
					var000A = Func097D(PARTY, 0x0001, 0x024B, QUALITY_ANY, 0x0005);
					if (var000A == true) {
						say("\"Here are thy boots then... And I thank thee for my slippers.\"");
						var000B = Func099B(AVATAR, 0x0001, 0x024B, QUALITY_ANY, 0x0006, false, true);
						var000C = UI_remove_party_items(0x0001, 0x024B, QUALITY_ANY, 0x0005, false);
						gflags[RETURNED_SLIPPERS] = true;
					} else {
						say("\"Then I hope that thou dost not mind if I keep these... I have no way to buy new slippers, what with the storms and all.\" *\"If thou shouldst find my slippers again, I will give these back.\"");
					}
					gflags[KNOWS_SLIPPERS_OWNER] = true;
				} else {
					say("\"Thank thee again, ",
						var0002,
						", for returning my favorite slippers.\"");
				}
				remove("slippers");
				fallthrough;

			case "mystery":
				say("\"On the night Angus disappeared, I'd gone to bed and Angus had remained to sweep. If thou dost ask me though, he stayed up to keep an eye on that strange mage that was staying here.\" *\"I was stirred from a sound sleep by the sound of voices downstairs in the cellar. After I heard a crash, I went down to look, but I did not see anyone. I thought the mage's companion might have tried to slip down to have another drink for free, and thought no more of it until the morning.\"");
				gflags[DEVRA_SPOKE_OF_ANGUS_DISAPPEARANCE] = true;
				remove("mystery");
				add(["strange mage", "cellar", "mage's companion"]);
				fallthrough;

			case "strange mage":
				say("\"He was a rather portly man, if I remember rightly. He had been here once before...\"");
				say("\"I cannot seem to recall what his name was. He was not the talkative sort, least not to me.\"");
				say("\"Thou couldst ask Ensorcio, they talked quite a bit. Or... I know... Thou canst look in the registry! 'Tis on the bar.\"");
				remove("strange mage");
				add("Ensorcio");
				fallthrough;

			case "Ensorcio":
				say("\"Thou hast not met the great Ensorcio yet? Count thy blessings!\"");
				say("\"Ensorcio is the smoldering black cloud that sits here day after day, drinking himself into a fit. All he does is glower about how those fools in Moonshade threw him out, and how he'll avenge himself.\"");
				remove("Ensorcio");
				add("fools in Moonshade");
				fallthrough;

			case "fools in Moonshade":
				say("\"Ensorcio is an exiled mage. Who doth know what he did? I am too afraid to ask...\"");
				say("\"If he was thrown out by that lot, thou canst wager that it could not have been good. Although Angus did not trust mages, he allowed Ensorcio to stay... Angus said that a mage had to have a clear head to cast spells, and we should worry if Ensorcio ever sobered.\"");
				remove("fools in Moonshade");
				fallthrough;

			case "cellar":
				say("\"Aye, the cellar. We've had a lout or two think that they could slip down and take a bottle or two on the sly.\" *\"But Angus always seemed to know when they tried it... Threw them out with a few bruises for their trouble.\"");
				say("\"'Tis why I didn't worry 'til morn... When I found everything in disarray and Angus gone.\"");
				remove("cellar");
				add("disarray");
				fallthrough;

			case "disarray":
				say("\"The casks and barrels were scattered all over the floor down there. It looked like there may have been a fight, but I did not see any blood.\" *\"It took the rest of the day to put all back in order down there. And make sure that nothing was missing.\"");
				say("\"I waited a week or so before I sent word to Wilfred and Argus about their father not returning.\"");
				remove("disarray");
				fallthrough;

			case "mage's companion":
				say("\"I do not know his name either... He never spoke to anyone other than the mage that I know of.\" *\"He always walked about with his hood raised, as if he were cold or something. He always gave me the shivers.\"");
				remove("mage's companion");
				add("shivers");
				fallthrough;

			case "shivers":
				say("\"Hast thou ever been in a sickroom, ",
					var0000,
					"? A sickroom where someone is about to die?\" *\"There is a tension in the air, a stillness... And that always seemed to hover about the mage's large companion.\" *\"He was probably the one that stole whatever it was from Ensorcio that night, too.\"");
				remove("shivers");
				add("stole");
				fallthrough;

			case "stole":
				say("\"I remember that Ensorcio came storming in that morning, much earlier than usual, ranting about something being missing. I'll admit that I was a bit short with him, ",
					var0000,
					".\" *\"After all, I had to put all those barrels back myself, what with Angus gone and all. And that high and mighty mage never offered to lift a finger for anything more than another mug of ale!\"");
				var000D = true;
				remove("stole");
				fallthrough;

			case "food":
				if ((DEVRA->get_schedule_type() == TEND_SHOP) || (DEVRA->get_schedule_type() == WAITER)) {
					say("\"Thou wilt not find our cooking fancy as in Moonshade. But 'tis hardy fare and thou wilt find the portions ample.\"");
					if (!var0004) {
						say("\"I've done all the cooking here since Donal hired me, before I married Angus. I've had my share of compliments, if I do say so myself.\"");
						var0004 = true;
						add(["Donal", "Angus"]);
					}
					Func081E();
				} else {
					say("\"I will sell thee some food when we are open!\"");
					remove("food");
				}
				fallthrough;

			case "Donal":
				say("\"Donal was Angus' father, the son of Silverpate the pirate. Donal hired me as cook when I was merely a strip of a lass... 'Tis when I caught Angus' eye.\" *\"Donal never showed any tendency to leave of a sudden, like his no-account father. That's why I told Angus I'd wed him... I thought that maybe that adventuring blood died with the old pirate.\"");
				remove("Donal");
				add("Silverpate");
				fallthrough;

			case "Silverpate":
				say("\"Thou hast not yet heard of Silverpate? I was beginnin' to think the walls shouted it, as fast as the guests hear about it around here!\" *\"According to stories... and 'twere only stories, mind thee... Silverpate was a pirate who took his treasure and started this here inn. He was supposed to have hid his treasure somewhere around here before he disappeared.\"");
				remove("Silverpate");
				add("treasure");
				fallthrough;

			case "treasure":
				say("\"What a lot of nonsense! Why we've had two whole generations of kin and neighbors lookin' everywhere imaginable for it.\" *\"I even looked a bit... at first. But if it hasn't been found after all this time, ",
					var0000,
					", with all those looking for it... I'd tell thee not to waste thy time looking!\"");
				remove("treasure");
				fallthrough;

			case "Angus":
				say("\"Angus is mine husband. He was the innkeeper here after Donal died.\" *\"We raised two fine sons and he hoped to pass the inn to one of them when he were too old to run things. Only he disappeared... same as old Silverpate.\"");
				remove("Angus");
				fallthrough;

			case "drink":
				if ((DEVRA->get_schedule_type() == TEND_SHOP) || (DEVRA->get_schedule_type() == WAITER)) {
					say("\"Thou wilt like our selection, I'm certain.\"");
					Func081F();
				} else {
					say("\"Please return when we are open!\"");
					remove("drink");
				}
				fallthrough;

			case "room":
				say("\"The cost is 8 gold coins per person. Wouldst thou like a room for the night?\"");
				if (Func0955()) {
					var000E = UI_get_array_size(UI_get_party_list()) * 0x0008;
					var000F = PARTY->count_objects(0x0284, QUALITY_ANY, FRAME_ANY);
					if (var000F >= var000E) {
						say("\"Room number 3 is available. I am sure thou wilt like it. Here is the key.\"");
						var0010 = Func099B(AVATAR, 0x0001, 0x0281, 0x0003, 0x0009, 0x0000, true);
						var0011 = UI_remove_party_items(var000E, 0x0284, QUALITY_ANY, FRAME_ANY, 0x0000);
						say("\"The rooms are upstairs. If thou dost need anything, thou shouldst call.\"");
					} else {
						var0009 = Func0992(0x0001, "@But we do not have enough money...@", 0x0000, false);
						if (var0009 != AVATAR) {
							DEVRA->show_npc_face0(0x0000);
							say("\"I have no heart to turn any of thee out in these storms. With all of our help run away, I'm in sore need of help.\" *\"But I cannot allow thee to stay for free. Thou wilt have to take thy chances outside.\"");
						} else {
							say("\"I'm afraid that thou cannot afford my rooms.\" *\"With the help all run away, I'd allow thee to stay for free, but I'd soon be out of business.\"");
							say("\"Thou wilt have to take thy chances outside.\"");
						}
					}
				} else {
					say("\"Some other time, then.\"");
				}
				fallthrough;

			case "exchange money":
				Func081D();
				fallthrough;

			case "bye":
				UI_remove_npc_face0();
				Func097F(AVATAR, "@Be seeing thee!@", 0x0000);
				Func097F(DEVRA, "@Come again soon!@", 0x0002);
				break;
		}
	}
}

extern var Func0954 0x954 ();
extern var Func0953 0x953 ();
extern var Func0994 0x994 ();
extern void Func07D1 object#(0x7D1) ();
extern void Func097F 0x97F (var var0000, var var0001, var var0002);
extern var Func09A0 0x9A0 (var var0000, var var0001);
extern void Func08FF 0x8FF ();
extern void Func07DC object#(0x7DC) ();

void Func042A object#(0x42A) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;
	var var0008;
	var var0009;
	var var000A;

	var0000 = Func0954();
	var0001 = UI_is_pc_female();
	var0002 = Func0953();
	var0003 = FLINDO->get_schedule_type();
	var0004 = Func0994();
	if (event == PROXIMITY) {
		if (var0003 == PATROL) {
			var0005 = FLINDO->find_nearby(0x025F, 0x0002, MASK_EGG);
			var0006 = var0005->get_item_quality();
			if (var0006 == 0x000F) {
				FLINDO->set_schedule_type(WAIT);
				var0007 = script item {
					nohalt;
					step south;
					step south;
					step south;
				};
				var0008 = HAWK->get_npc_id();
				var0008 += 0x0001;
				HAWK->set_npc_id(var0008);
			}
		}
	}
	if (event == DOUBLECLICK) {
		AVATAR->item_say("@May we speak?@");
		FLINDO->Func07D1();
		Func097F(FLINDO, "@I have little time!@", 0x0002);
		FLINDO->set_schedule_type(TALK);
	}
	if (event == STARTED_TALKING) {
		FLINDO->run_schedule();
		FLINDO->clear_item_say();
		FLINDO->show_npc_face0(0x0000);
		var0009 = FLINDO->get_item_flag(MET);
		if (gflags[BANES_RELEASED] == true) {
			say("\"So, thou art still alive!\" ~\"I had wondered when thy companion arrived in such a strange state.\"");
			say("\"I never thought I would live to see mighty Moonshade humbled, but Shamino hath certainly managed it quite handily.\"");
			say("\"I would be careful in the streets here now, ",
				var0000,
				". 'Tis somewhat... unsafe.  Oh, and the... fallen Filbercio is searching for thee.\"");
			add(["strange state", "fallen Filbercio"]);
		}
		if (var0009 == false) {
			if (gflags[HAWK_IN_MOONSHADE]) {
				say("\"The name is Flindo. I own a provisioning shop here in Moonshade and have many important connections here.\"");
			} else {
				say("\"The name is Flindo. I own a provisioning shop in Moonshade and have many important connections there.\"");
			}
			FLINDO->set_item_flag(MET);
		} else {
			say("\"Returned again?\"");
		}
		if (var0004 == 0x0009) {
			say("\"So, art thou another stranded victim of Hawk and his childish fear of storms? Or art thou here to investigate the curious disappearance of Mistress Devra's good husband?\"");
			add(["Hawk", "storms", "curious disappearance", "connections"]);
		} else {
			say("\"I understand now why Hawk did not wish to sail the open seas. I do not know how thou wilt leave this island... Unless the tales are true.\"");
			say("\"I hope that thou dost like our fine city of Moonshade.\"");
			say("\"If thou wouldst like to know about any place within the city, come to me.\"");
			add(["tales", "Moonshade", "any place", "connections"]);
		}
		if (gflags[FLINDO_PROMISED_MAGELORD_AUDIENCE] && (!gflags[POTHOS_RETURNED])) {
			add("thy promise");
		}
		converse (["bye"]) {
			case "strange state" (remove):
				say("\"He now calls himself Shamino the Anarch.\"");
				say("\"By his command up may become down, and in may become out. And woe to anyone who disagrees. He hath totally unravelled the strictures... 'Tis a magical madhouse out there!\"");
				fallthrough;

			case "fallen Filbercio" (remove):
				say("\"When Shamino the Anarch took over, he cast Filbercio out of the Palace and made him a beggar.\"");
				say("\"Needless to say, this did not sit well with the MageLord. Filbercio would speak with thee... Perhaps thou canst, having been Shamino's companion, find a way to overcome his powers.\"");
				say("\"Look for Filbercio in the streets, ",
					var0000,
					". Shamino the Anarch hath decreed that none may take Filbercio in or aid him in any way.\"");
				fallthrough;

			case "Hawk" (remove):
				say("\"That bag of wind! Calls himself a sailor... Ha!\"");
				say("\"Now, I am asking thee... What manner of Captain would strand me and poor, dumb Kane -- paying passengers, mind thee -- here in this little backwater inn because of some... storm?\"");
				say("\"So I went to the Pikemen...\"");
				add(["Kane", "Pikemen"]);
				fallthrough;

			case "Kane" (remove):
				say("\"Look for a young lad talking to a parrot. That will be him.\"");
				say("\"Witless lad doth not have enough sense to steer clear of Ensorcio. Comes asking if Ensorcio was a mage, and would Ensorcio help him and Ale find his lost brother!\"");
				say("\"Kane doth not have the sense of a cat!\"");
				add(["Ensorcio", "Ale"]);
				fallthrough;

			case "Ensorcio" (remove):
				say("\"Now there is one to avoid, if ever there was one!\"");
				say("\"The mages wondered when Vasculio took Ensorcio as an apprentice. Temper like that, 'tis not good in a mage. And when thou considerest Vasculio's interests... Well, 'tis enough to make a body worry.\"");
				say("\"And then with what happened about that Adept's daughter... No one was surprised when the Council of Mages stepped in and exiled Ensorcio -- except maybe Ensorcio himself!\"");
				add(["Vasculio", "Adept's daughter"]);
				fallthrough;

			case "Vasculio" (remove):
				say("\"Do not tell me that thou hast not heard that legend!\"");
				say("\"I was not around for any of this, mind thee. I wasn't even born yet... Ensorcio isn't as young as he appears, being a mage and all. But my father talked about it enough -- it happened when he was a mere boy.\"");
				add("legend");
				fallthrough;

			case "legend" (remove):
				say("\"Well, years ago, there was experimenting aplenty amongst the mages. There were not nearly as many restrictions as there are now.\"");
				say("\"Vasculio specialized in death magic. Not like Mortegro, mind thee. No, Vasculio did not want to speak with the dead... He wanted to cause death.\"");
				say("\"And he was none too particular if it was a quick death or not. Anyway, soon his 'research' even upset the Council of Mages.\"");
				say("\"When the Council went to deliver Vasculio an ultimatum, they found him in deeds so horrible that it was determined that he was no longer human.\"");
				say("\"They put him to death... but his tomb was broken open and empty before a week had passed. And they say that, somehow, he still lives to practice his dark arts.\"");
				add(["restrictions", "Mortegro"]);
				fallthrough;

			case "restrictions" (remove):
				say("\"Well, now, there are quite a number of them. And I only know a few... not being a mage.\"");
				say("\"Let's see... certain creatures cannot be summoned within the confines of the city. This would come to light after some damn fool mage summons a dragon that burns half the city!\"");
				say("\"Only mages approved of by the Council of Mages may sell death spells. And the Council must be notified of all research and experiments.\"");
				say("\"There. 'Tis all I can remember. If thou desirest to know more, thou shouldst speak to a mage.\"");
				fallthrough;

			case "Mortegro" (remove):
				say("\"Mortegro is fine. A bit flighty at times, but all mages are if thou dost ask me.\"");
				say("\"Mortegro's true specialty is speaking with the dead.\"");
				fallthrough;

			case "Adept's daughter" (remove):
				say("\"Oh, thou wouldst do well not to ask too closely about who she is, ",
					var0000,
					"! Mages are very protective of their privacy AND their pride.\"");
				say("\"Suffice it to say that Ensorcio took a fancy to the girl and, when she would not give him the time of day, used his magic to... persuade... her to see him.\"");
				say("\"I was surprised the Council punished him with simple exile. I would have thought he would have gone to the Mountains of Freedom for his crime!\"");
				add("Mountains of Freedom");
				fallthrough;

			case "Mountains of Freedom" (remove):
				say("\"Speak that name quietly, ",
					var0000,
					". And hope that thou never hast reason to learn too much about it.\"");
				say("\"Long ago, those mountains were full of ore and many spent their lives mining it. But most of the veins were empty when they uncovered the Stoneheart...\"");
				add("Stoneheart");
				fallthrough;

			case "Stoneheart" (remove):
				say("\"Hsst! Never repeat that word in public, ",
					var0000,
					"! Or thou wilt find a personal view of the Mountains of Freedom!\"");
				say("\"Stoneheart can be used to create another mineral, a strange reagent that magnifies magical power, especially death spells. And it is very dangerous.\"");
				say("\"Anyway, after that was found there, the mines were sealed. Until Filbercio became MageLord, that is.\"");
				add(["Filbercio", "MageLord"]);
				fallthrough;

			case "Filbercio" (remove):
				say("\"Filbercio is an ambitious man, ",
					var0000,
					". He is also a man of many... passions, shall we say.\"");
				say("\"Not all in Moonshade were happy when he became MageLord. And Filbercio would have it that he is a popular ruler. And he would enjoy the powers of his office without fearing rivals.\"");
				say("\"So Filbercio filled the mines with all manner of magical traps, and made it a prison for his enemies. 'Tis said that if thou canst escape from the depths of stone, thou art free and vindicated of any charges against thee.\"");
				say("\"But, as of yet, none have proven themselves innocent... If thou takest my meaning.\"");
				fallthrough;

			case "MageLord" (remove):
				say("\"The MageLord must be an Adept, and rules all Moonshade.\"");
				say("\"Although the MageLord's power is great, it is held in check by the other members of the Council of Mages.\"");
				say("\"Being that mages are, by nature, egotistical, the Council of Mages is only open to other Adepts. The peers of the MageLord. Their presence on the Council is meant to keep the MageLord from becoming too tyrannical.\"");
				fallthrough;

			case "Ale" (remove):
				say("\"Ale is what Kane calls that parrot of his...\"");
				say("\"And it certainly shows a great enthusiasm for the brew, to be sure. Not usual for a bird, mind thee, but a trick most likely taught to it by some sailor before the lad found it.\"");
				fallthrough;

			case "Pikemen" (remove):
				if (gflags[HAVE_WOLF_TATTOO] == true) {
					say("\"Everyone knows that the Pikemen guard the roads and towns, ",
						var0000,
						".\"");
					say("\"They are noted for their honesty. I thought perhaps they could 'persuade' Hawk to abandon his ploy for more money and sail for Moonshade as he should.\"");
					say("\"I made an appropriately large 'donation' to their coffers. But I did not expect them to waylay Hawk to rot in some jail cell!\"");
					say("\"I suppose that is what comes of not knowing the difference between Leopards, Bears and Wolves...\"");
				} else {
					say("\"I thought perhaps the Pikemen could... disturb Hawk enough to abandon his ploy for more money. I thought that if they made his life difficult enough here, Hawk would sail for Moonshade -- as he should have in the first place!\"");
					say("\"I paid them well enough! But I did not expect them to waylay Hawk to rot in some jail cell!\"");
					say("\"I suppose that is what comes of not knowing the difference between Leopards, Bears and Wolves...\"");
				}
				gflags[KNOW_PIKEMEN_HAVE_HAWK] = true;
				add(["Leopards", "Bears", "Wolves"]);
				fallthrough;

			case "Leopards" (remove):
				if (gflags[HAVE_WOLF_TATTOO] == true) {
					say("\"I know what any non-Monitorian knows, ",
						var0000,
						".\"");
					say("\"The Leopards are one of the three Commands of Monitor. They control the tower nearest Monitor itself. I know that they share the rule of Monitor.\"");
				} else {
					say("\"I know what any non-Monitorian knows...\"");
					say("\"The Leopards are one of the three Commands of Monitor. They control the tower nearest Monitor itself.\"");
					say("\"I have also heard that, like all cats, they are a sneaky, conniving lot.\"");
				}
				fallthrough;

			case "Bears" (remove):
				if (gflags[HAVE_WOLF_TATTOO] == true) {
					say("\"I know little about them, ",
						var0000,
						".\"");
					say("\"The Bears are one of the three Commands of Monitor. They control the tower near Fawn, where their natural aggressiveness can be put to use against the goblins.\"");
				} else {
					say("\"I know little about them...\"");
					say("\"The Bears are one of the three Commands of Monitor. They control the tower near Fawn, where their natural aggressiveness can be put to use against the goblins.\"");
					say("\"I have also heard, from a Fawn merchant, that many Fawn citizens would rather face the goblins than the Bears.\"");
				}
				fallthrough;

			case "Wolves" (remove):
				if (gflags[HAVE_WOLF_TATTOO] == true) {
					say("\"Not being from Monitor, I am afraid I am woefully uninformed, ",
						var0000,
						".\"");
					say("\"The Wolves are one of the three Commands of Monitor. They control the tower near here, er... Sleeping Bull. Wolves are regarded as the friendliest of all the Commands...\"");
				} else {
					say("\"Not being from Monitor, I am afraid I am woefully uninformed...\"");
					say("\"The Wolves are one of the three Commands of Monitor. They control the tower near here, er... Sleeping Bull. Wolves are said to be little more than trained dogs...\"");
				}
				fallthrough;

			case "storms" (remove):
				say("\"I find it hard to believe that a man such as Hawk, with a ship such as the Arabella, would fear any storm -- magical or otherwise.\"");
				say("\"I have heard of too many odd events connected to these storms to discount their unusual nature. But all such tales speak of danger on land...\"");
				say("\"I think Hawk's reluctance to sail lies more at the bottom of an empty mug and an empty coffer...\"");
				add("Arabella");
				fallthrough;

			case "Arabella" (remove):
				say("\"The Arabella is a fine ship... Good lines and fast-running before a stiff breeze.\"");
				say("\"And I have heard that Hawk had some sort of enchantment laid on her so that she can not be sailed without him on board. But that could merely be more of his idle boasts.\"");
				fallthrough;

			case "curious disappearance" (remove):
				say("\"It occurred immediately after I arrived here...\"");
				say("\"I recall that one morning Mistress Devra was beside herself with worry because Angus was nowhere to be found.\"");
				say("\"I told her not to worry herself too much, as sometimes a man will feel too constricted at home and need to wander for a bit. But she would not be dissuaded and sent for Argus.\"");
				add(["Devra", "Angus", "Argus"]);
				fallthrough;

			case "Devra" (remove):
				say("\"Mistress Devra is a sweet-natured lady. Too good-hearted to be an innkeeper sometimes.\"");
				say("\"I had recently begun making the trips with my father when Donal hired her to do the cooking. That was before she married Angus.\"");
				say("\"Poor woman, first Theron and then her husband...\"");
				add(["Donal", "Theron"]);
				fallthrough;

			case "Donal" (remove):
				say("\"Donal was Angus' father. He was a good, hard-working man.\"");
				say("\"'Twas a good thing Donal was not anything like his father, Silverpate, or I doubt that Mistress Devra would ever have given Angus a second look.\"");
				say("\"'Tis hard to think that Angus disappeared exactly like his grandfather did...\"");
				add("Silverpate");
				fallthrough;

			case "Silverpate" (remove):
				say("\"Why, Silverpate is the one who built this inn!\"");
				say("\"Everyone said Silverpate was a pirate who grew too old for the sea and went searching for a way to become respectable. He used part of his treasure to construct this place...\"");
				say("\"There are rumors in Moonshade that he hired a mage for some reason, but I have never been able to confirm it. They say that he was a very suspicious man...\"");
				say("\"Anyhow, Silverpate disappeared when Donal was still a young man. Everyone thinks the treasure is still hidden here somewhere.\"");
				add(["treasure", "disappeared"]);
				fallthrough;

			case "treasure" (remove):
				say("\"Do not ask me! Silverpate was a pirate... Who knows what such a man would have hidden?\"");
				say("\"Personally, I think that if there were any treasure, it hath long since been found. And if none hath been found, then there never was any hidden treasure!\"");
				fallthrough;

			case "disappeared" (remove):
				say("\"Thou shouldst ask Mistress Devra about that. All I know is that one day no one could find Silverpate, and he was never found.\"");
				say("\"Donal took over the inn and nothing more untoward happened until Theron disappeared.\"");
				fallthrough;

			case "Theron" (remove):
				say("\"Theron was a worker here. Mistress Devra took him in and gave him work and a place to stay. He was not very bright...\"");
				say("\"Like I said, sometimes Mistress Devra is too kind for her own good. Anyway, Theron was caught in one of those storms and no one hath been able to find him since.\"");
				fallthrough;

			case "Angus" (remove):
				say("\"Angus was a big man. I cannot see how any harm could befall him without alerting the whole inn.\"");
				say("\"I think perhaps he took a notion to leave and go adventuring. He had a strange sense of humor and a powerful temper...\"");
				say("\"Who knows? Mayhaps he became angry at Mistress Devra and walked away.\"");
				fallthrough;

			case "Argus" (remove):
				say("\"Argus is Mistress Devra's oldest son, ",
					var0000,
					".\"");
				say("\"He inherited more than a little bit of his father's temper, and always dreamed of being a fighter. 'Twas no surprise when he travelled to Monitor to become a Pikeman.\"");
				say("\"Not all good came of it, however. He found himself some trouble down there, so I have heard. And there hath been bad blood between him and Wilfred ever since he left here.\"");
				add(["trouble", "Wilfred"]);
				fallthrough;

			case "trouble" (remove):
				say("\"If thou dost not want to answer to Argus' steel, ",
					var0000,
					", thou shouldst not mention this to him.\"");
				say("\"Seems that Argus' temper found him a duel with a boy from another Command. Argus killed the boy, apparently without giving him any quarter. Sad business for a fighter.\"");
				fallthrough;

			case "Wilfred" (remove):
				say("\"Wilfred is Argus' younger brother...\"");
				say("\"After Argus left, Angus raised Wilfred very strictly. So Wilfred holds Argus in no great esteem.\"");
				say("\"Wilfred was always a willful, snobbish sort of child. In mine own opinion, he needed to have his head knocked a time or two to deflate that ego of his. Angus was stricken when Wilfred left to become a knight.\"");
				fallthrough;

			case "connections" (remove):
				say("\"Although I am not a mage, I am an influential man in Moonshade because my shop provides the staples of life to that secluded island! Why, I even know the MageLord's mistress.\"");
				if (gflags[FLINDO_PROMISED_MAGELORD_AUDIENCE]) {
					if (gflags[POTHOS_RETURNED]) {
						say("\"As thou dost well know, seeing that I did obtain thee an audience with the MageLord. Who else could have done such a thing?\"");
					} else {
						say("\"And I shall obtain for thee an audience with the MageLord, have no fear! I am as good as my promise.\"");
					}
				} else if (gflags[HAWK_IN_MOONSHADE]) {
					say("\"In fact, this is what I shall do for thee! Since thou didst make it possible for Hawk to sail us here, I shall repay thee --\"");
					say("\"I shall arrange for thee to meet with the MageLord himself. This is quite an honor, ",
						var0002,
						". This will take time, but I can arrange this.\"");
					gflags[FLINDO_PROMISED_MAGELORD_AUDIENCE] = true;
				} else {
					say("\"If we ever leave this forsaken inn, ",
						var0000,
						", perhaps I can obtain thee an audience with the MageLord himself. He trusts me implicitly. Ask me again when we arrive.\"");
				}
				say("\"And thou mayest find that some of the mages are very reclusive and will not speak to thee without proper introduction.\"");
				add("mistress");
				fallthrough;

			case "mistress" (remove):
				say("\"Oh, yes! Filbercio is quite a lady's man. And what woman would not jump at the opportunity to win the MageLord's favor?\"");
				say("\"For now, Frigidazzi holds the MageLord's eye. And, from what I have seen, Filbercio seems to have found a way to thaw the charms of that cold mage...\"");
				if (gflags[HAWK_IN_MOONSHADE]) {
					say("\"Though I have heard that Frigidazzi is not always so cool. And I have been told that Filbercio hath not been... faithful... shall we say.\"");
					add(["Frigidazzi", "heard", "faithful"]);
				} else {
					say("\"Ask me about it again, if we ever sail to Moonshade. I shall relish telling thee more then. But for now, it only makes me angrier with Hawk for stranding me here!\"");
				}
				fallthrough;

			case "Frigidazzi" (remove):
				say("\"Frigidazzi specializes in cold-related spells. She is a great beauty, but she is rather cold to everyone.\"");
				say("\"Perhaps I should not say this, but I think Frigidazzi is using Filbercio to gain status within the ranks of the Adepts.\"");
				var000A = true;
				fallthrough;

			case "heard" (remove):
				say("\"I have heard that Frigidazzi can be quite... warm, to those who catch her fancy. And I am told that she can be very persistent about getting what she wants.\"");
				say("\"Although I think it would be foolish to catch her eye as long as Filbercio doth have an interest in her... If thou knowest what I mean.\"");
				fallthrough;

			case "faithful" (remove):
				say("\"Filbercio hath been trying to coerce Columna into a dalliance for some time. But she will have nothing to do with him.\"");
				say("\"As Filbercio doth not take being rebuffed lightly, he hired Stefano to steal something of Columna's from Torrissio, to use as blackmail. So the MageLord may prevail in this intended infidelity -- if Frigidazzi doth not discover him.\"");
				say("\"Of course, this is not the MageLord's only indiscretion... As I have this story from Julia, who found out from Filbercio, during a night of... ahem... stolen passion.\"");
				add(["Columna", "Stefano", "Torrissio", "Julia"]);
				fallthrough;

			case "Columna" (remove):
				say("\"There is not too much to say about Columna. She is one of Moonshade's most reclusive mages. I think that is what makes her so attractive to Filbercio. She seems unattainable.\"");
				say("\"Why she insists on dallying with that scum Torrissio, I will never know. She would do better with the MageLord... any way thou dost look at it.\"");
				fallthrough;

			case "Stefano" (remove):
				say("\"Stefano is a thief of some skill, with a bit of magical ability. He tends to live from one disaster to another, though he would like to see himself as a great lord somewhere, someday.\"");
				say("\"Stefano would do better practicing his magic... But he would rather be a skilled thief than a novice mage.\"");
				fallthrough;

			case "Torrissio" (remove):
				say("\"I hate even to utter his name... It leaves a bitter taste in the mouth!\"");
				say("\"Torrissio specializes in creating the magical automatons that most mages prefer as their servants. I will grant that he is skilled enough, but he doth have the ethics of a snake!\"");
				say("\"'Tis a good thing Petra escaped from his sickening clutches and has Rocco to protect her.\"");
				add(["Petra", "Rocco"]);
				fallthrough;

			case "Petra" (remove):
				say("\"Petra is the automaton at the Blue Boar. Torrissio created her.\"");
				say("\"I have only heard a bit of the tale, so thou shouldst go speak to Petra directly to hear the right of it. In short, Torrissio had vile intent for Petra. But she escaped and Rocco took her in and watches over her.\"");
				fallthrough;

			case "Rocco" (remove):
				say("\"Rocco is the innkeeper at the Blue Boar.\"");
				say("\"Although Rocco can be quite gruff, he is devoted to Petra... If thou askest me, I would say 'tis a perfect match -- Rocco and Petra. He can complain as much as he wants and she still takes care of him.\"");
				fallthrough;

			case "Julia" (remove):
				say("\"Julia is a Ranger at the Winery. She is a rather handsome woman. Very no-nonsense sort.\"");
				fallthrough;

			case "tales" (remove):
				say("\"As thou mayest imagine, Moonshade hath its share of tall tales and stories. In fact, many of them are started by the mages in question, to enhance their reputations!\"");
				say("\"But, if thou dost listen to the tales, there are ancient passages that connect to the other islands. Or, for that matter, some say that the Mad Mage can teleport anywhere he likes.\"");
				add(["passages", "Mad Mage"]);
				fallthrough;

			case "passages" (remove):
				say("\"I know nothing other than the fact that they are said to exist, and that they are supposedly fraught with peril.\"");
				say("\"Perhaps if thou dost ask Fedabiblio, he could confirm it... Or even tell thee where they are.\"");
				add("Fedabiblio");
				fallthrough;

			case "Fedabiblio" (remove):
				say("\"Fedabiblio is the Magister of Moonshade. It is his duty to test the children throughout the land and bring them to Moonshade for training. Thou mayest find him at the Seminarium.\"");
				say("\"It makes my very skin crawl, ",
					var0000,
					", to think of the damage an untutored mage could do...\"");
				add("Seminarium");
				fallthrough;

			case "Seminarium" (remove):
				say("\"That is where all the novice mages are taught. Look for the youngsters in the street and thou wilt find it.\"");
				fallthrough;

			case "Mad Mage" (remove):
				say("\"His name is actually Erstam. But everyone here refers to him as the Mad Mage.\"");
				say("\"'Tis a very complex situation, ",
					var0000,
					". Erstam trained all of the Adepts in Moonshade. And, as their master, he is a threat to them because he is still more powerful than they are.\"");
				say("\"As I said before, mages are nothing if not prideful. So it is now forbidden for any to visit Erstam... Which, from what I am told is fine with him!\"");
				say("\"If thou wishest to try and contact the Mad Mage, thou canst try speaking with Pothos. I believe that they still maintain a contact of sorts.\"");
				add("Pothos");
				fallthrough;

			case "Pothos" (remove):
				say("\"Pothos is the apothecary. He hath some small magical ability, but not enough to enter the ranks of the Adepts. So he makes his living selling them reagents and potions...\"");
				if (gflags[POTHOS_RETURNED]) {
					if (gflags[HELPED_POTHOS]) {
						say("\"He hath been very cheerful as of late...\"");
					} else {
						say("\"There are those who believe that Erstam is Pothos' father. But Pothos will never talk about it, so I do not know.\"");
						gflags[KNOWS_POTHOS_SECRET] = true;
					}
				}
				fallthrough;

			case "Moonshade" (remove):
				say("\"Moonshade, the city of mages! A place where anything thou mayest desire can be thine... If thou dost have enough guilders, and thou canst find a mage with enough skill.\"");
				add("guilders");
				fallthrough;

			case "guilders" (remove):
				say("\"Guilders are the coins of Moonshade, ",
					var0000,
					".\"");
				say("\"None of the artisans or shopkeepers will deal with thee if thou dost not have guilders. Thou canst exchange thine other coins with Bucia, at my shop.\"");
				fallthrough;

			case "any place" (remove):
				say("\"There are many places that thou wilt want to visit while thou art here.\"");
				say("\"Thou mayest find lodgings at the Blue Boar. Thou shouldst see the Winery. And there's the artist's bazaar...\"");
				add(["Blue Boar", "Winery", "bazaar"]);
				fallthrough;

			case "Blue Boar" (remove):
				say("\"The Blue Boar is a tavern here. It provides food and lodging at a reasonable rate... for Moonshade.\"");
				say("\"Thou wilt sometimes find some of the less reclusive mages there. Be careful not to offend any of them for they may call thee out to a magical duel!\"");
				fallthrough;

			case "Winery" (remove):
				say("\"The Rangers have a magic winepress. It works without need of human assistance. I am sure that thou wilt find it interesting.\"");
				fallthrough;

			case "bazaar" (remove):
				say("\"'Tis where many of the artisans can be found... My shop, the Capessi Canton, is located near the Blue Boar Inn. Be sure to stop and say hello to Bucia, who runs the shop for me.\"");
				add("Bucia");
				fallthrough;

			case "Bucia" (remove):
				say("\"Sometimes I cannot understand why I keep her. Each time I enter the shop, there she is -- babbling with someone. Makes me wonder if she doth do any work at all...\"");
				say("\"And sometimes I wonder at her sanity, too. She hath developed some far-fetched notions, certis. Why she would have it that poor young Pothos is connected in some way to the Mad Mage! Canst thou imagine?!\"");
				fallthrough;

			case "thy promise" (remove):
				if (gflags[SCROLL_SPEAKS]) {
					if (gflags[FLINDO_SECURED_MAGELORD_AUDIENCE]) {
						say("\"What? Dost thou not trust my word?\"");
						say("\"Go about thy business, and the MageLord shall certainly summon thee when he is ready.\"");
					} else {
						gflags[FLINDO_SECURED_MAGELORD_AUDIENCE] = true;
						say("\"I have good news for thee, my friend! As promised, I have arranged for thee to meet with MageLord Filbercio.\"");
						say("\"In fact, he plans to hold a banquet in thine honor. I am certain thou wilt find his means of summoning thee... very unusual...\"");
						say("\"Go about thy business, and at the appropriate moment, the MageLord shall summon thee.\"");
						gflags[FILBERCIO_BANQUET_WILL_HAPPEN] = true;
						var0007 = script Func09A0(0x0001, 0x0004) after 330 ticks {
							call Func07DC;
						};
						var0007 = script Func09A0(0x0001, 0x0003) after 315 ticks {
							call Func07DC;
						};
					}
				} else {
					say("\"I am working on securing that appointment for thee to meet with the MageLord, but these things take time...\"");
					say("\"Ask me again tomorrow. I promise thee that I can accomplish this thing, but not instantly, not immediately.\"");
				}
				fallthrough;

			case "bye":
				UI_remove_npc_face0();
				Func097F(AVATAR, "@Thanks for thine help.@", 0x0000);
				Func097F(FLINDO, "@Whatever...@", 0x0005);
				Func08FF();
				break;
		}
	}
}

extern var Func0954 0x954 ();
extern var Func0953 0x953 ();
extern var Func0994 0x994 ();
extern void Func07D1 object#(0x7D1) ();
extern void Func097F 0x97F (var var0000, var var0001, var var0002);

void Func042B object#(0x42B) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;
	var var0008;
	var var0009;

	var0000 = Func0954();
	var0001 = UI_is_pc_female();
	var0002 = Func0953();
	var0003 = Func0994();
	var0004 = KANE->get_schedule_type();
	if (event == PROXIMITY) {
		if (var0004 == PATROL) {
			var0005 = KANE->find_nearby(0x025F, 0x0002, MASK_EGG);
			var0006 = var0005->get_item_quality();
			if (var0006 == 0x000F) {
				KANE->set_schedule_type(WAIT);
				var0007 = script item {
					nohalt;
					step south;
				};
				var0008 = HAWK->get_npc_id();
				var0008 += 0x0001;
				HAWK->set_npc_id(var0008);
			}
		}
	}
	if (event == DOUBLECLICK) {
		AVATAR->item_say("@A moment, young sir!@");
		KANE->Func07D1();
		Func097F(KANE, "@Who, me?@", 0x0002);
		KANE->set_schedule_type(TALK);
	}
	if (event == STARTED_TALKING) {
		KANE->run_schedule();
		KANE->clear_item_say();
		var0009 = KANE->get_item_flag(MET);
		KANE->show_npc_face0(0x0000);
		if (var0009 == false) {
			if (gflags[HAVE_WOLF_TATTOO] == true) {
				say("\"I am not in trouble, am I?\" ~\"I did not do anything!\"");
				say("\"M'name's Kane. I be a sheepherder...\"");
				if (gflags[HAWK_IN_MOONSHADE]) {
					if (gflags[RESTORED_EDRIN] == true) {
						say("\"Edrin is returned, ",
							var0000,
							"!\" ~\"Edrin was Ale!\" *\"I mean, the storm trans... er, changed, Edrin into that parrot I found!\" ~\"All that time I was searchin' for him, and I had him right there wit me!\"");
						say("\"I knew one of them Mages could help me!\" *\"We be goin' home soon...\" ~\"After Edrin finds a ship to return on.\"");
					} else {
						say("\"I be searchin' for a Mage to help me find my brother what was lost in the storms, if thou pleasest.\"");
					}
					add("storms");
				} else {
					say("\"I am waitin' for passage to Moonshade, if thou pleasest.\"");
					add("passage");
				}
			} else {
				say("\"How may I serve thee, ",
					var0000,
					"?\"");
				if (gflags[HAWK_IN_MOONSHADE]) {
					if (gflags[RESTORED_EDRIN] == true) {
						say("\"Edrin is returned! Edrin was Ale!\" *\"I mean, the storm trans... er, changed, Edrin into that parrot I found!\" ~\"All that time I was searchin' for him, and I had him right there wit me!\"");
						say("\"I knew one of them Mages could help me!\" *\"We be goin' home soon...\" ~\"After Edrin finds a ship to return on.\"");
					} else {
						say("\"M'name's Kane. I be searchin' for a Mage to help me find my brother what was lost in the storms, if thou pleasest.\"");
					}
					add("storms");
				} else {
					say("\"M'name's Kane. I be a sheepherder...\" ~\"I be waitin' for passage to Moonshade, if thou pleasest.\"");
					add("passage");
				}
			}
			KANE->set_item_flag(MET);
		} else {
			say("\"Welcome back, ",
				var0000,
				".\"");
			if (gflags[HAWK_IN_MOONSHADE]) {
				if (gflags[RESTORED_EDRIN] == true) {
					say("\"Edrin is returned, ",
						var0000,
						"!\" ~\"Edrin was Ale!\" *\"I mean, the storm trans... er, changed, Edrin into that parrot I found!\" ~\"All that time I was searchin' for him, and I had him right there wit me!\"");
					say("\"Did I not tell thee that one of them Mages could help me?\" ~\"I knew it!\" *\"We be goin' home soon...\" ~\"After Edrin finds a ship to return on.\"");
					add("storms");
				} else {
					say("\"Is not this place marvelous, ",
						var0000,
						"? There be so much to see... Everything is so fancy! I wish Edrin was here wit me. I be certain he could show me around.\"");
					say("\"I hope some of these powerful Mages will help me find him.\"");
					add("passage");
				}
			}
		}
		converse ("bye") {
			case "passage":
				if (gflags[HAWK_IN_MOONSHADE]) {
					say("\"Now that we are here in Moonshade it seems that thou canst not find passage to go elsewhere. Not even Captain Hawk will brave those Teleport Storms again.\"");
				} else {
					say("\"I was told by Mistress Devra that I could buy passage with Captain Hawk to Moonshade.\" ~\"But when the Cap'n came to the dock, he swore that he'd not go out in these storms again.\" *\"I do not blame him, to tell thee the honest truth, ",
						var0000,
						".\" ~\"But I do wish there was some way for me to talk to the mages there.\"");
					add("Devra");
				}
				remove("passage");
				add(["Hawk", "storms"]);
				fallthrough;

			case "Devra":
				if (gflags[HAWK_IN_MOONSHADE]) {
					say("\"I wish Edrin and I were back with Mistress Devra. She was nice to me, and said that I could return to Sleeping Bull and be her helper. I'd like that.\"");
				} else {
					say("\"Oh, she be a nice lady, ",
						var0000,
						"!\" ~\"Mistress Devra helped me to count my money when I came.\"");
					say("\"She put part of it in a little sack and told me that I was to give it to Captain Hawk to buy passage.\" ~\"And when she counted the rest I could not afford to stay here until the Captain decided it was safe to sail.\" *\"But she said if I helped by choppin' wood and such I could stay as a servant, like.\" ~\"That was terrible kind of her.\"");
				}
				remove("Devra");
				fallthrough;

			case "Hawk":
				if (gflags[HAWK_IN_MOONSHADE]) {
					say("\"After that terrible crossing, Hawk swore he'd drink all of Moonshade dry. I doubt that thou wilt find him far from a mug of strong spirits.\"");
				} else {
					say("\"Cap'n Hawk sails the Arabella, that's the ship at the dock out there a ways.\" ~\"He was staying here until he got in a fight and the Pikemen took him away...\"");
					if (gflags[HAVE_WOLF_TATTOO] == true) {
						say("\"Thou art not here to take me too, art thou?\" ~\"I didn't fight, honest. I hid under the table when Cap'n Hawk and Master Flindo started shoutin' at one another.\"");
					} else {
						say("\"I didn't fight, honest. I hid under the table when Cap'n Hawk and Master Flindo started shoutin' at one another.\" ~\"I hope they don't think I did anything...\"");
					}
					add(["Pikemen", "Flindo"]);
				}
				remove("Hawk");
				fallthrough;

			case "Pikemen":
				if (gflags[HAVE_WOLF_TATTOO] == true) {
					say("\"Beggin' thy pardon, ",
						var0000,
						".\" ~\"I don't mean any disrespect...\"");
					say("\"Master Flindo came in with several Pikemen and said something to Cap'n Hawk that I didn't hear.\" ~\"Then the two of them began yellin', and well, then someone began swinging...\" ~\"I did not see who, bein' under the table and all.\"");
					say("\"Someone clouted Captain Hawk pretty hard and then the Pikemen were draggin' him away.\" ~\"Master Argus shouted at them to leave him be, but, thy pardon, they told him to mind his own innkeepin' and nothin' else.\" *\"Master Argus was mighty angry, and was for goin' after them. But Mistress Devra stopped him.\" ~\"He said words I ain't never heard before...\"");
				} else {
					say("\"Master Flindo came in with several Pikemen and said something to Captain Hawk that I didn't hear.\" ~\"Then the two of them began shoutin', and well, then someone began swinging...\" ~\"I didn't see who, bein' under the table and all.\"");
					say("\"Someone clouted Cap'n Hawk pretty hard and then the Pikemen were draggin' him away.\" ~\"Master Argus yelled at them to leave him be, but they told him to mind his innkeepin' and nothin' else.\" *\"Master Argus was mighty angry, and was for goin' after them. But Mistress Devra stopped him.\" ~\"He said words I ain't never heard before...\"");
				}
				gflags[KNOW_PIKEMEN_HAVE_HAWK] = true;
				remove("Pikemen");
				add("Argus");
				fallthrough;

			case "Argus":
				say("\"Ain't he big and strong, though? I'll wager he could lift even more than my brother.\" ~\"And Edrin can lift two full-grown ewes all by himself!\"");
				say("\"I can tell that Master Argus is... or was... a Pikeman.\" ~\"He doth have those marks on his face.\" *\"But I do not understand why those other fellows treated him like they did.\" ~\"Mayhaps they were angry at him for talkin' like that in front of his mother...\"");
				remove("Argus");
				fallthrough;

			case "Flindo":
				if (gflags[HAWK_IN_MOONSHADE]) {
					say("\"First this Flindo was unhappy that we would not sail to Moonshade, now he is unhappy that we will not sail back! I have had enough of him and his lust for commerce. Let us change the subject.\"");
				} else {
					say("\"Master Flindo is a merchant of some sort, I think.\" ~\"He is not very nice.\"");
					say("\"All he doth do is complain about Cap'n Hawk not wantin' to sail to Moonshade.\" ~\"He says that Cap'n Hawk only wants more money... But the Cap'n refused all his offers of more money.\"");
					say("\"I think the Cap'n doth not want to put any of us in danger, is all.\" ~\"And Master Flindo was not very happy when the Pikemen took Cap'n Hawk away.\"");
				}
				remove("Flindo");
				fallthrough;

			case "storms":
				if (gflags[HAWK_IN_MOONSHADE]) {
					if (gflags[RESTORED_EDRIN] == true) {
						say("\"'Tis strange what them storms can do, ",
							var0000,
							". To think that they could change mine own brother into a bird -- wondrous strange!\"");
						say("\"I am most glad to have Edrin back.\"");
					} else {
						say("\"I was frightened during that storm when Edrin disappeared. But it weren't nothing compared to that sea crossing in Hawk's ship.\"");
						say("\"I am not looking forward to sailing again, I can tell thee.\"");
					}
				} else {
					say("\"Enough to make a man's blood turn to ice, ",
						var0000,
						"!\" ~\"Why one moment Edrin was not more than five paces from me, and then he weren't nowhere to be found.\" *\"'Course it took a minute or two for mine eyes to clear and mine ears to cease ringing, after that lightnin' strike.\" ~\"But I went searchin' right away, and I couldn't find hide nor hair of him.\"");
				}
				remove("storms");
				add("Edrin");
				fallthrough;

			case "Edrin":
				if (gflags[HAWK_IN_MOONSHADE]) {
					if (gflags[RESTORED_EDRIN] == true) {
						say("\"He is doing fine now that he's not a parrot any more. Though he says that he hath been having bad dreams of late. I do not blame him.\"");
						say("\"I'll wager being a bird would give anyone nightmares...\"");
					} else {
						say("\"I have not yet spoken with any of them Mages. I'll admit that they frighten me...\"");
						say("\"But I know that I have to do it sometime. They are mine only hope of finding Edrin again.\"");
					}
				} else {
					say("\"Edrin is mine older brother, ",
						var0000,
						".\" ~\"We were herdin' the sheep into the pen one night when one of these strange storms hit outta a clear sky.\" *\"I looked and looked and looked, but ain't no one seen him.\" ~\"All I found was this here parrot, which I brought along for the company to Moonshade.\"");
					add(["parrot", "Moonshade"]);
				}
				remove("Edrin");
				fallthrough;

			case "parrot":
				say("\"I'd been searchin' for Edrin a little over a day, I suppose, when I found this here parrot sittin' under a tree, all pitiful like.\" ~\"Well, now I was awful lonesome, so I asked the bird what it was doin' out in the forest instead of home in a cage.\" *\"Like to leapt out of my skin when the thing croaked 'Ale!'.\" ~\"But Cap'n Hawk said that's the way of such birds.\"");
				say("\"Still and all, I think Ale -- 'tis his name now -- is smarter than some of the folks I know.\" ~\"And he doth have a powerful fondness for ale.\" *\"I hope Edrin will allow me to keep Ale...\" ~\"After all, he doth have his crystal and I do not have nothin'.\"");
				remove("parrot");
				add("crystal");
				fallthrough;

			case "crystal":
				say("\"When I was not very old, Da took Edrin to Moonshade with him.\" ~\"I remember I cried and cried, but Mother said I was too young to go. She promised I'd be allowed to go the next time.\"");
				say("\"Only there wasn't a next time because Da died that fall, and Edrin and I have been too busy with the sheep to go since then.\" ~\"But sometimes, when I was scared at night, Edrin would let me hold the crystal until I fell asleep...\" *\"And I never had any dreams then.\" ~\"Who would've thought I'd travel all alone to Moonshade like this one day?\"");
				remove("crystal");
				fallthrough;

			case "Moonshade":
				say("\"Well, ",
					var0000,
					", as near as I can surmise, if these storms ain't natural then that means they must be magic-like.\" ~\"And ever'one knows that if thou dost want anything magic-like, thou shouldst go to Moonshade.\" *\"If these storms took Edrin away and they're magic-like, then one of them mages must be able to tell me how to find him.\" ~\"All I have to do is go there and ask...\"");
				say("\"Mistress Devra told me I might ask Master Ensorcio if he could help me.\" ~\"She said he was one of them mages.\" *\"I wondered a little about that... because ever'one doth know that all mages live in Moonshade.\" ~\"But I asked anyhow...\"");
				remove("Moonshade");
				add("Ensorcio");
				fallthrough;

			case "Ensorcio":
				say("\"I do not like to speak ill of anyone, ",
					var0000,
					".\" ~\"But Master Ensorcio doth have the worst temper I've ever seen!\" *\"All I did was ask if he was a mage and could he help me...\" ~\"And he threatened to change me to a frog!\"");
				say("\"All he would have had to do was tell me to go away and leave him alone.\" ~\"And I would've not bothered him no more.\" ~\"Now I know why Da used to say if we were bad the mages would come and take us away...\" ~\"Mayhap Master Ensorcio never had a Da to teach him manners.\"");
				remove("Ensorcio");
				fallthrough;

			case "bye":
				UI_remove_npc_face0();
				Func097F(AVATAR, "@Good luck, Kane!@", 0x0000);
				Func097F(KANE, "@Luck to thee, too!@", 0x0002);
				break;
		}
	}
	if (event == DEATH) {
		Func097F(KANE, "@Yowie!@", 0x0000);
		AVATAR->set_oppressor(KANE);
		KANE->set_attack_mode(FLEE);
	}
}

extern var Func0954 0x954 ();
extern var Func0953 0x953 ();
extern void Func07D1 object#(0x7D1) ();
extern void Func097F 0x97F (var var0000, var var0001, var var0002);
extern var Func0994 0x994 ();
extern void Func0861 0x861 ();
extern var Func0955 0x955 ();
extern var Func0988 0x988 (var var0000, var var0001);
extern var Func0992 0x992 (var var0000, var var0001, var var0002, var var0003);
extern var Func09A0 0x9A0 (var var0000, var var0001);
extern var Func099B 0x99B (var var0000, var var0001, var var0002, var var0003, var var0004, var var0005, var var0006);
extern var Func097D 0x97D (var var0000, var var0001, var var0002, var var0003, var var0004);
extern void Func0971 0x971 (var var0000);
extern var Func0977 0x977 (var var0000);

void Func042C object#(0x42C) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;
	var var0008;
	var var0009;
	var var000A;
	var var000B;
	var var000C;
	var var000D;
	var var000E;
	var var000F;
	var var0010;
	var var0011;
	var var0012;
	var var0013;
	var var0014;
	var var0015;
	var var0016;
	var var0017;
	var var0018;
	var var0019;
	var var001A;
	var var001B;
	var var001C;
	var var001D;
	var var001E;
	var var001F;
	var var0020;
	var var0021;
	var var0022;
	var var0023;

	var0000 = Func0954();
	var0001 = Func0953();
	var0002 = [0x04F4, 0x08B8];
	var0003 = [0x04F4, 0x08B8];
	var0004 = [0x04F4, 0x08B8];
	if (event == DOUBLECLICK) {
		if (UI_is_pc_female()) {
			AVATAR->item_say("@Hello.@");
		} else {
			AVATAR->item_say("@Excuse me, miss...@");
		}
		SELINA->Func07D1();
		Func097F(SELINA, (("@Yes, " + var0000) + "?@"), 0x0002);
		SELINA->set_schedule_type(TALK);
	}
	if (event == STARTED_TALKING) {
		SELINA->show_npc_face0(0x0000);
		SELINA->clear_item_say();
		if (Func0994() == 0x0018) {
			say("\"I want to be alone.\"");
			abort;
		}
		if (SELINA->get_item_flag(IN_PARTY)) {
			SELINA->set_schedule_type(FOLLOW_AVATAR);
			add("leave");
		} else {
			SELINA->run_schedule();
			if (SELINA->get_schedule_type() == TALK) {
				SELINA->revert_schedule();
				SELINA->run_schedule();
			}
		}
		if ((!SELINA->get_item_flag(IN_PARTY)) && gflags[PIKEMEN_SPOKE_HAWK]) {
			if (gflags[SELINA_GAVE_KEY]) {
				say("\"If thou hast the stomach to face great danger, then perhaps we can resume the quest for the lost gold.\"");
				add(["resume quest"]);
			} else {
				if (!SELINA->get_item_flag(MET)) {
					say("\"Allow me to introduce myself. My name is Selina. And I have heard that thou art in need of... finances, shall we say.\"");
					say("\"I believe that I can be of help...\"");
					SELINA->set_item_flag(MET);
				} else {
					say("\"I have heard that thou art in need of... finances, shall we say.\"");
					say("\"I believe that I can be of help...\"");
				}
				add(["finances", "help"]);
			}
		} else if (!SELINA->get_item_flag(MET)) {
			if (UI_is_pc_female()) {
				say("\"'Tis a pleasure to meet thee, ",
					var0000,
					". I am Selina.\"");
				say("\"It is so wonderful that a woman such as thyself hath come to our land!\"");
				say("\"There is so much that thou canst teach us.\"");
				add("teach");
			} else {
				say("\"Pardon me, ",
					var0000,
					"...\tMy name is Selina.\"");
				say("\"Thou dost look to be brave and trustworthy.\"");
				say("\"I need thy protection.\"");
				add("protection");
			}
			SELINA->set_item_flag(MET);
		} else if (!SELINA->get_item_flag(IN_PARTY)) {
			say("\"So, we meet again, ",
				var0001,
				"!\"");
			say("\"It seems we are fated to be together...\"");
			if (UI_is_pc_female()) {
				say("\"I'm glad thou art returned.\"");
				say("\"Thou still hast much to teach us.\"");
				add("teach");
			} else {
				say("\"I'm glad thou art returned.\"");
				say("\"I would still be grateful for thy protection.\"");
				add("protection");
			}
		} else {
			say("\"What dost thou wish to speak about, ",
				var0001,
				"?\"");
		}
		// This is likely an error and should be STORM_FISHNET_STOCKINGS instead
		if (gflags[STORM_FISHNET_STOCKINGS_SELINA] == true) {
			add("fishnet stockings");
		}
		if (gflags[STORM_STOCKINGS] && (!gflags[KNOWS_MOONSILK_OWNER])) {
			add("Moonsilk stockings");
		}
		if (gflags[STORM_WEDDING_RING] && (!gflags[KNOWS_RING_OWNER])) {
			add("lost ring");
		}
		if (gflags[STORM_FUR_CAP] && (!gflags[KNOWS_FUR_CAP_OWNER])) {
			add("fur cap");
		}
		if (gflags[STORM_RUDDY_ROCK] && (!gflags[KNOWS_STONEHEART_ORIGIN])) {
			add("Stoneheart");
		}
		if (gflags[SELINA_HAS_BELONGINGS] && ((!SELINA->get_item_flag(IN_PARTY)) && SELINA->get_cont_items(SHAPE_ANY, QUALITY_ANY, FRAME_ANY))) {
			add("belongings");
		}
		if (SELINA->get_item_flag(IN_PARTY) && (!gflags[GOT_GOLD_BARS])) {
			add("Are we there yet?");
		}
		converse ("bye") {
			case "Are we there yet?" (remove):
				var0005 = [0x06D0, 0x0766, 0x0000];
				var0006 = SELINA->get_object_position();
				var0007 = var0005[0x0002] - var0006[0x0002];
				var0008 = var0005[0x0001] - var0006[0x0001];
				var0009 = var0007;
				if (var0007 < 0x0000) {
					var0009 *= -1;
				}
				var000A = var0008;
				if (var0008 < 0x0000) {
					var000A *= -1;
				}
				var000B = var000A + var0009;
				if (var000A > var0009) {
					if (var0008 > 0x0000) {
						var000C = 0x0002;
						var000D = "east";
					} else {
						var000C = 0x0006;
						var000D = "west";
					}
				} else if (var0007 > 0x0000) {
					var000C = 0x0004;
					var000D = "south";
				} else {
					var000C = 0x0000;
					var000D = "north";
				}
				if (var000B > 0x01F4) {
					say("\"We still have a long way to travel.\"");
				} else if (var000B < 0x0032) {
					say("\"This is the place!\"");
					Func097F(SELINA, "@We should find the gold!@", 0x0000);
					abort;
				} else {
					say("\"We are very close!\"");
				}
				if ((var0006[0x0001] < 0x0593) && (var0006[0x0002] > 0x0743)) {
					var000C = 0x0000;
					say("\"We must follow the coast north, and then turn east.\"");
				} else {
					say("\"We must go further ",
						var000D,
						". Is not this adventure exciting, ",
						var0001,
						"?\"");
				}
				var000E = script item {
					nohalt;
					face var000C;
					actor frame strike_2h;
					say "@This way!@";
				};
				abort;

			case "belongings" (remove):
				Func0861();
				fallthrough;

			case "finances" (remove):
				say("\"I will simply say that a little birdie told me that thou dost need desperately to sail to Moonshade.\"");
				say("\"Now, with Captain Hawk a prisoner of the Tower guards, thou must certainly be trying to scrape together a ransom sufficient to sate those greedy ruffians.\"");
				say("\"It is all so obvious, if one thinks about it just so...\"");
				fallthrough;

			case "leave" (remove):
				say("\"But we agreed to be partners. From now on, thou and I are inseparable!\"");
				fallthrough;

			case "help" (remove):
				say("\"Not long ago, one of those strange storms took the lighthouse that was up the coast, north and east of here.\"");
				say("\"In its place is a strange building, locked tight and reportedly filled with hideous monsters and great treasure!\"");
				say("\"One I thought of as my beloved found a key on a creature outside of the building. He gave this key to me for certain... favors... and promised to meet me here so we could seek the treasure together.\"");
				add(["beloved", "key"]);
				fallthrough;

			case "beloved" (remove):
				say("\"He is not here, and shows no signs of keeping his word. Men!\"");
				if (UI_is_pc_female()) {
					say("\"Frankly, we would do best if we were to rid ourselves of Men entirely! What a sisterhood we should make...\"");
				} else {
					say("\"I feel terrible, for this time I had given away mine heart, and now 'tis broken...\"");
				}
				fallthrough;

			case "key", "resume quest" (remove):
				gflags[ASK_SELINA_KEY] = true;
				if (gflags[SELINA_GAVE_KEY]) {
					say("\"Dost thou pledge to go directly to the site of the gold this time?\"");
				} else {
					say("\"If thou art willing to allow me to join thee, I can lead thee to treasure enough for both of us.\"");
					say("\"I have the key and the instructions, but I am no match for what may lie ahead. Wilt thou join me in seeking the treasure?\"");
				}
				if (Func0955() == true) {
					if (gflags[SELINA_GAVE_KEY]) {
						say("\"I shall hold thee to thy word!\"");
					} else {
						say("\"I knew that thou wouldst be interested!\"");
					}
					if (UI_get_array_size(UI_get_party_list2()) > 0x0001) {
						say("\"Judging from what I've been told, it would be best if only two went. The danger to any more than two is great. Wilt thou leave thy companions here for their safety?\"");
						if (Func0955() == true) {
							say("\"Thou art a true friend to them, ",
								var0001,
								"! Thou canst salve their wounded pride with some of the treasure that we bring back.\"");
							var000E = Func0988(AVATAR->get_npc_object(), UI_get_party_list2());
							for (var0011 in var000E with var000F to var0010) {
								var0011->remove_from_party();
								var0011->set_new_schedules([MIDNIGHT, DAWN, MORNING], [SLEEP, EAT_AT_INN, TEND_SHOP], [var0002, var0003, var0004]);
								var0011->run_schedule();
							}
							Func097F(var0011, "@I need a drink!@", 0x0002);
						} else {
							say("\"I hope that thou dost not live to regret thy decision, ",
								var0001,
								". They are thy friends and will not thank thee if thou dost lead them to their deaths...\"");
						}
					}
					if (UI_get_array_size(UI_get_party_list2()) > 0x0004) {
						var000E = Func0992(0x0001, 0x0000, 0x0000, false);
						var000E->show_npc_face1(0x0000);
						say("\"This group is getting a little large for my tastes. I think I'll stay at the Inn for a while...\"");
						var000E->remove_from_party();
						var000E->set_new_schedules([MIDNIGHT, DAWN, MORNING], [SLEEP, EAT_AT_INN, TEND_SHOP], [var0002, var0003, var0004]);
						var000E->set_schedule_type(WANDER);
						Func097F(var000E, "@So long...@", 0x0000);
						UI_remove_npc_face1();
						0x0000->set_conversation_slot();
						say("\"We'll be fine without that troublemaker, ",
							var0001,
							"!\"");
					}
					SELINA->add_to_party();
					gflags[SELINA_HAS_BELONGINGS] = true;
					var000E = script Func09A0(0x0005, 0x0001) after 25 ticks {
						nohalt;
						call Func042C;
					};
					Func097F(SELINA, "@Onward!@", 0x0000);
					if (!gflags[SELINA_GAVE_KEY]) {
						say("\"Here is the key I promised.\"");
						var000E = Func099B(AVATAR, 0x0001, 0x0281, 0x0075, 0x0003, 0x0000, true);
					}
					gflags[SELINA_GAVE_KEY] = true;
					var000E = SELINA->find_object(0x0128, QUALITY_ANY, 0x0002);
					if (var000E) {
						var000E = var000E->set_last_created();
						var000E = SELINA->give_last_created();
					}
					abort;
				}
				if (gflags[SELINA_GAVE_KEY]) {
					say("\"But how shall I gain the gold, if thou dost not aid me?\"");
					Func097F(SELINA, "@Oh!@", 0x0000);
					SELINA->set_schedule_type(SHY);
					abort;
				}
				say("\"I had thought thou wouldst be interested! Oh, well, 'tis his loss for buying my... favors so cheaply! And thy loss for not joining me!\" *\"But, I will not hold it against thee, ",
					var0001,
					". If thou art still here and in need of money when I return... Perhaps I will lend thee some!\"");
				fallthrough;

			case "teach":
				say("\"In Monitor, women may be warriors... But at the cost of their femininity.\"");
				say("\"In Fawn, women are valued for their beauty... At the cost of their independence and intelligence.\"");
				say("\"And in Moonshade, women may be mages... But the true power lies in the hands of men.\"");
				say("\"So, thou seest... Thou art brave, intelligent and beautiful. Thou art not one nor the other... Thou art all these things at once.\"");
				remove("teach");
				add(["Monitor", "Fawn", "Moonshade"]);
				fallthrough;

			case "Monitor":
				say("\"Monitor is just south of here... It is controlled by Pikemen who place fighting prowess above all else.\" *\"Few there value beauty and even fewer possess intelligence. They would do well with a dose of humility.\"");
				remove("Monitor");
				add("Pikemen");
				fallthrough;

			case "Pikemen":
				if (gflags[HAVE_WOLF_TATTOO] == true) {
					say("\"If the only Pikemen I had ever had the pleasure of encountering were thou and Argus, I would say differently. But many of the Pikemen I have seen are vain braggarts who delight in bullying anyone weaker than they are.\" *\"And their idea of honor is bought cheaply in ransom and @tolls@ on the travellers they are sworn to protect! I'm sorry, ",
						var0001,
						", but I think the Pikemen are, on the whole, contemptible!\"");
				} else {
					say("\"If the only Pikeman I had ever had the pleasure of encountering was Argus, I would say differently. But many of the Pikemen I have seen are vain braggarts who delight in bullying anyone weaker than they are.\" *\"And their idea of honor is bought cheaply in ransom and @tolls@ on the travellers they are sworn to protect! The Pikemen are, Argus excepted, contemptible!\"");
				}
				remove("Pikemen");
				fallthrough;

			case "Fawn":
				say("\"Fawn is northwest of here... They have a woman for a ruler, but she rules in name alone.\" *\"The Great Captains and money control the city in truth, and give lip service to Beauty only when it's convenient. It would serve them right if the women revolted and went to Monitor to learn how to fight.\"");
				remove("Fawn");
				add("Great Captains");
				fallthrough;

			case "Great Captains":
				say("\"I have never been to Fawn, ",
					var0001,
					", so I can only repeat what I have heard or have been told. The Great Captains keep the Lady of Fawn in ignorance, preferring a pretty figurehead to an intelligent ruler!\"");
				remove("Great Captains");
				fallthrough;

			case "Moonshade":
				say("\"Moonshade is east of here, on another island... They are ruled by Adepts, but shun normal people as below their notice.\" *\"Each mage doth have his or her own version of reality to such an extent that thou shouldst sift everything they say for a kernel of truth. I sometimes wish the mages could find themselves on the decks of Fawn's fishing fleet and work for an honest living for just a few days... Maybe then they'd learn who the important people truly are.\"");
				remove("Moonshade");
				add("Adepts");
				fallthrough;

			case "Adepts":
				say("\"From what I've heard, being an Adept is as much a result of an accident of birth, rather than any great training. Each Adept specializes in some skill or another...\" *\"So a mage that could kill everyone in his mansion with a single spell, might well be unable to fetch his slippers from in front of the fire with even a series of spells! The Adepts are entirely too full of themselves, ",
					var0001,
					".\"");
				remove("Adepts");
				fallthrough;

			case "protection" (remove):
				say("\"Yes, protection... People are disappearing around here.\" *\"I do not know if it's those mysterious storms, or if there's something more sinister at work. All I know is that I'm afraid.\"");
				UI_push_answers();
				add(["people disappearing", "mysterious storms", "change subject"]);
				fallthrough;

			case "change subject":
				UI_pop_answers();
				say("\"We can discuss whatever thou dost wish to discuss, ",
					var0000,
					"!\"");
				fallthrough;

			case "people disappearing":
				say("\"First there was someone they call Silverpate... And now Angus is gone.\" *\"One built the inn and the other was the innkeeper here... And those others disappearing doth cause me to wonder if this place is cursed or something!\"");
				remove("people disappearing");
				add("others");
				fallthrough;

			case "others":
				say("\"Well, Ensorcio told me that Theron, one of the servants, disappeared not long ago. And then, on the night that Angus disappeared, two guests disappeared as well.\"");
				remove("others");
				add(["Ensorcio", "two guests"]);
				fallthrough;

			case "Ensorcio":
				say("\"He is the mage who's staying here... He doth seem sinister, but he's nice to me. Not as nice as Argus... But nice, for a mage.\" *\"He seems to drink a lot. And he doth have a bad temper, too.\"");
				remove("Ensorcio");
				add("Argus");
				fallthrough;

			case "Argus":
				say("\"Argus is very nice to me. He compliments me on my dress or mine hair, even though I know I look a mess.\" *\"He's much nicer when Devra isn't around... I do not think she likes me.\"");
				remove("Argus");
				add("Devra");
				fallthrough;

			case "Devra":
				say("\"She's always watching me... It doth make me nervous. Mayhap I shall be the next one to disappear.\" *\"If she were not so old, I might think that she had something to do with those people disappearing. Or maybe she knows more than she doth admit...\"");
				remove("Devra");
				fallthrough;

			case "two guests":
				say("\"I did not meet them, but Ensorcio told me about them. He said something about one of them being a mage, and the other being a very large man.\" *\"So now thou dost understand why I am so worried... If something could happen to a mage, or a big, strong man, what chance do I have?\"");
				remove("two guests");
				fallthrough;

			case "mysterious storms":
				say("\"Everyone knows that these are not natural storms, ",
					var0001,
					"! Why even the mages of Moonshade are worried...\" *\"Old Gustacio is practically pulling out what little hair he doth have trying to discover what's causing them. And if the mages are worried, ",
					var0001,
					", people such as we should be very wary indeed.\"");
				remove("mysterious storms");
				add("Gustacio");
				fallthrough;

			case "Gustacio":
				say("\"Gustacio specializes in weather magic, ",
					var0001,
					". 'Tis all very confusing, if thou dost ask me...\" *\"I know that the Council of Mages questioned him closely after these storms began. But they seemed to think that he had no hand in them and set him the task of trying to stop them.\"");
				remove("Gustacio");
				add("Council of Mages");
				fallthrough;

			case "Council of Mages":
				say("\"The Council of Mages oversees all of the mages in Moonshade. I don't know much more about them than that.\" *\"Thou shouldst ask Ensorcio if thou dost wish to know more.\"");
				remove("Council of Mages");
				fallthrough;

			case "fishnet stockings":
				if (Func097D(PARTY, 0x0001, 0x02A5, QUALITY_ANY, 0x0001)) {
					say("\"Oh, look! How quaint... Fishnet stockings! I've heard that some people find them attractive, but they're much too rough for my taste. I would never wear anything like that.\"");
				} else {
					say("\"They sound quaint, ",
						var0001,
						". Perhaps thou couldst show them to me some time.\"");
				}
				remove("fishnet stockings");
				fallthrough;

			case "Moonsilk stockings":
				if (Func097D(PARTY, 0x0001, 0x02A5, QUALITY_ANY, 0x0000)) {
					if (UI_is_pc_female()) {
						say("\"Moonsilk stockings! Oh, how I have longed for a pair of my very own!\"");
						say("\"Thou dost not need to enhance thy beauty, ",
							var0001,
							"... Wouldst thou give them to me?\"");
						if (Func0955() == true) {
							say("\"Marvelous! I knew that another woman would understand!\"");
							var000E = UI_remove_party_items(0x0001, 0x02A5, QUALITY_ANY, 0x0000, true);
						} else {
							say("\"Sigh... Thou canst not blame a girl for dreaming, ",
								var0001,
								".\"");
						}
					} else {
						say("\"Moonsilk stockings! Oh, how I have longed for a pair of my very own!\"");
						say("\"Wouldst thou give them to me, ",
							var0001,
							"? I would cherish them forever...\"");
						if (Func0955() == true) {
							say("\"Thou art wonderful! I will think of thee every time I wear them!\"");
							var000E = UI_remove_party_items(0x0001, 0x02A5, QUALITY_ANY, 0x0000, true);
						} else {
							say("\"Sigh... Thou canst not blame a girl for dreaming, ",
								var0001,
								".\"");
						}
					}
				} else {
					say("\"The stockings sound wonderful, ",
						var0001,
						". If thou dost find any more like them, remember me.\"");
				}
				remove("Moonsilk stockings");
				fallthrough;

			case "lost ring":
				if (Func097D(PARTY, 0x0001, 0x0377, QUALITY_ANY, 0x0000)) {
					if (UI_is_pc_female()) {
						say("\"An engagement ring!\"");
						say("\"Congratulations, ",
							var0001,
							"! Who is the lucky man?\"");
						if (!SELINA->get_item_flag(IN_PARTY)) {
							var0012 = Func0992(0x0001, "@Indeed, young lady!@", "@It isn't mine...@", false);
							0x0000->set_conversation_slot();
						}
						say("\"Forgive me, ",
							var0001,
							"... I made an assumption before examining the ring.\"");
						say("\"I should have realized that it was not thine.\tSee how crude the tracery is, and how ill the stones fit?\"");
						say("\"It is clearly an unacceptable piece of inferior quality. It looks like it may have come from one of the lesser artisans in Moonshade.\"");
					} else {
						say("\"An engagement ring!\"");
						say("\"I suppose it would be too much to hope that it was for me...\"");
						if (!SELINA->get_item_flag(IN_PARTY)) {
							var0012 = Func0992(0x0001, "@Honestly, young lady!@", "@It isn't mine...@", false);
							0x0000->set_conversation_slot();
						}
						say("\"Forgive me, ",
							var0001,
							".\tI was merely jesting...\tI should have realized that it was not thine, ",
							var0001,
							"!\"");
						say("\"See how crude the tracery is, and how ill the stones fit? It is clearly an unacceptable piece of inferior quality.\"");
						say("\"It looks like it may have come from one of the lesser artisans in Moonshade.\"");
					}
				} else {
					say("\"If thou dost find it again, ",
						var0001,
						", I would love to see it.\"");
				}
				remove("lost ring");
				fallthrough;

			case "fur cap":
				if (Func097D(PARTY, 0x0001, 0x03EC, QUALITY_ANY, 0x0004)) {
					say("\"How cute! But dost thou not think it is a bit warm here for a fur cap?\" \"And... I don't know... But it seems a bit small for thee...\"");
				} else {
					say("\"Perhaps thou wouldst show it to me later.\"");
				}
				remove("fur cap");
				fallthrough;

			case "Stoneheart":
				if (Func097D(PARTY, 0x0001, 0x034A, QUALITY_ANY, 0x000F)) {
					say("\"I... um... I don't know about... uh... rocks, ",
						var0001,
						". Put it away... please.\"* \"Thou shouldst find someone else to ask.\"");
				} else {
					say("\"I know nothing about rocks, ",
						var0001,
						". Thou shouldst find someone else to ask.\"");
				}
				remove("Stoneheart");
				add("someone else");
				fallthrough;

			case "someone else":
				say("\"Thou couldst ask a scholar or some such... Perhaps even a mage might be able to help. I don't know.\"");
				remove("someone else");
				fallthrough;

			case "bye":
				UI_remove_npc_face0();
				Func097F(AVATAR, "@Farewell, Selina!@", 0x0000);
				Func097F(SELINA, "@Until we meet again...@", 0x0002);
				abort;
		}
	}
	if (event == SCRIPTED) {
		var0013 = SELINA->get_npc_id();
		if (var0013 == 0x0000) {
			if (!SELINA->get_item_flag(IN_PARTY)) {
				abort;
			}
			var0005 = SELINA->get_object_position();
			if ((var0005[0x0001] < 0x0479) || (var0005[0x0002] > 0x08D9)) {
				SELINA->show_npc_face0(0x0000);
				if (!gflags[SELINA_WARNED_WRONG_WAY]) {
					say("\"Now look here, ",
						var0001,
						". Thou didst pledge to take me to the treasure, but this is the wrong direction!\"");
					say("\"Wilt thou take me to the treasure, or no?\"");
					if (Func0955()) {
						say("\"Much better.\"");
						Func097F(SELINA, "@To the gold!@", 0x0000);
						gflags[SELINA_WARNED_WRONG_WAY] = true;
						var000E = script Func09A0(0x0005, 0x0001) after 50 ticks {
							nohalt;
							call Func042C;
						};
						abort;
					}
					say("\"Then I'm leaving!\"");
					SELINA->remove_from_party();
					Func097F(SELINA, "@Fool!@", 0x0000);
					Func0861();
					SELINA->revert_schedule();
					SELINA->run_schedule();
					gflags[SELINA_WARNED_WRONG_WAY] = false;
					abort;
				}
				say("\"Thou still goest the wrong way. I'm leaving!\"");
				SELINA->remove_from_party();
				Func097F(SELINA, "@Fool!@", 0x0000);
				Func0861();
				SELINA->revert_schedule();
				SELINA->run_schedule();
				gflags[SELINA_WARNED_WRONG_WAY] = false;
				abort;
			}
			var000E = script Func09A0(0x0005, 0x0001) after 50 ticks {
				nohalt;
				call Func042C;
			};
			gflags[SELINA_WARNED_WRONG_WAY] = false;
		}
		if (var0013 == 0x0001) {
			var000E = PALOS->get_npc_object();
			if (var000E) {
				var000E->set_polymorph(0x01F5);
				var000E->set_npc_id(0x0000);
			}
			var000E = DEADEYE->get_npc_object();
			if (var000E) {
				var000E->set_polymorph(0x01F5);
				var000E->set_npc_id(0x0000);
			}
			var000E = BRUNT->get_npc_object();
			if (var000E) {
				var000E->set_polymorph(0x01F5);
				var000E->set_npc_id(0x0000);
			}
		}
		if (var0013 == 0x0002) {
			PALOS->set_polymorph(0x0373);
			DEADEYE->set_polymorph(0x01CA);
			BRUNT->set_polymorph(0x0325);
			SELINA->show_npc_face0(0x0000);
			say("\"Gloat if thou wilt! Even if thou slayest me here thou hast not truly defeated me!\"");
			say("\"Even as we speak, Batlin is opening the Wall of Lights in the next room! With the Guardian's help he and I shall meet in the Eternal Void to conquer new realms together!\"");
			say("\"Batlin! Guardian! I await thee in the Void!\"");
			UI_remove_npc_face0();
			var0014 = find_nearby(0x0300, 0x003C, MASK_NONE);
			for (var0017 in var0014 with var0015 to var0016) {
				var0005 = var0017->get_object_position();
				Func0971(var0017);
			}
			var000E = 0x0000;
			var0018 = UI_create_new_object(0x02CB);
			if (var0018) {
				var0018->set_item_frame(0x0000);
				var000E = var0018->set_item_quality(0x0021);
				var0018->clear_item_flag(TEMPORARY);
				var000E = give_last_created();
			}
			if (var000E) {
				SELINA->clear_item_flag(SI_TOURNAMENT);
				SELINA->reduce_health(0x0032, NORMAL_DAMAGE);
			}
		}
	}
	do {
		if (event == DEATH) {
			if (gflags[SELINA_FINAL_BATTLE]) {
				var0019 = PALOS->get_item_flag(DEAD);
				var001A = DEADEYE->get_item_flag(DEAD);
				var001B = BRUNT->get_item_flag(DEAD);
				if (var0019 && (var001A && var001B)) {
					if (SELINA->get_npc_id() != 0x0001) {
						break;
					}
					SELINA->set_npc_id(0x0002);
					var001C = SELINA->get_npc_object();
					var000E = script var001C after 25 ticks {
						nohalt;
						call Func042C;
					};
					return;
				}
				var001D = UI_get_party_list();
				var001E = UI_die_roll(0x0001, Func0977(var001D));
				var001F = var001D[var001E];
				var000E = set_to_attack(var001F, 0x0276);
				var001F->obj_sprite_effect(ANIMATION_PULSATING_DISC, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, LOOP_ONCE);
				return;
			}
			if (gflags[UNLOCKED_MINT]) {
				abort;
			}
			var0020 = Func097D(SELINA, 0x0001, 0x0128, QUALITY_ANY, 0x0002);
			var0021 = Func097D(PARTY, 0x0001, 0x0286, QUALITY_ANY, 0x0002);
			var0022 = Func097D(PARTY, 0x0001, 0x0281, 0x0075, 0x0003);
			if (var0020) {
				var0023 = SELINA->get_oppressor();
				if (var0023->get_item_flag(IN_PARTY)) {
					SELINA->show_npc_face0(0x0000);
					say("\"Thou shalt not find me such easy prey, mighty Avatar!\"");
					say("\"When thou dost least expect it, thou shalt find me a worthy opponent!\"");
				} else {
					SELINA->show_npc_face0(0x0000);
					say("\"I must retreat to the safety of the Sleeping Bull. Do not worry -- we shall meet again, Avatar!\"");
				}
				UI_remove_npc_face0();
				Func097F(SELINA, "@We shall meet again!@", 0x0000);
				var0005 = SELINA->get_object_position();
				while (var0005[0x0003] > 0x0000) {
					var0005[0x0001] -= 0x0001;
					var0005[0x0002] -= 0x0001;
					var0005[0x0003] -= 0x0002;
				}
				UI_sprite_effect(ANIMATION_PULSATING_DISC, var0005[0x0001], var0005[0x0002], 0x0000, 0x0000, 0x0000, LOOP_ONCE);
				UI_sprite_effect(ANIMATION_TELEPORT2, var0005[0x0001], var0005[0x0002], 0x0000, 0x0000, 0x0000, LOOP_ONCE);
				if (SELINA->get_item_flag(IN_PARTY)) {
					SELINA->remove_from_party();
				}
				SELINA->remove_npc();
				SELINA->revert_schedule();
				SELINA->run_schedule();
			}
		}
	} while (false);
}

extern var Func0954 0x954 ();
extern var Func0953 0x953 ();
extern var Func0994 0x994 ();
extern var Func0942 0x942 (var var0000);
extern void Func0874 0x874 ();
extern void Func097F 0x97F (var var0000, var var0001, var var0002);
extern void Func09AC 0x9AC (var var0000, var var0001, var var0002, var var0003);
extern void Func07D1 object#(0x7D1) ();
extern var Func0955 0x955 ();
extern var Func0956 0x956 (var var0000);
extern var Func0992 0x992 (var var0000, var var0001, var var0002, var var0003);
extern void Func0875 0x875 ();

void Func042D object#(0x42D) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;
	var var0008;
	var var0009;
	var var000A;
	var var000B;

	var0000 = Func0954();
	var0001 = UI_is_pc_female();
	var0002 = Func0953();
	var0003 = Func0994();
	var0004 = Func0942(IOLO);
	var0005 = Func0942(DUPRE);
	var0006 = Func0942(SHAMINO);
	if (event == PROXIMITY) {
		var0007 = UI_get_random(0x0006);
		if (var0007 == 0x0001) {
			WILFRED->item_say("@Care to fight?@");
		}
		if (var0007 == 0x0002) {
			WILFRED->item_say("@Move aside!@");
		}
		if (var0007 == 0x0003) {
			WILFRED->item_say("@I need a drink!@");
		}
		if (var0007 == 0x0004) {
			WILFRED->item_say("@Where are the women?@");
		}
		if (var0007 == 0x0005) {
			if (Func0942(ARGUS)) {
				WILFRED->item_say("@Argus, thou art a coward!@");
			} else {
				WILFRED->item_say("@I'm bored!@");
			}
		}
		if (var0007 == 0x0006) {
			WILFRED->item_say("@My sword wants blood!@");
		}
	}
	if ((event == SCRIPTED) && (!WILFRED->get_item_flag(DEAD))) {
		var0008 = WILFRED->set_npc_prop(HEALTH, 10);
		WILFRED->show_npc_face0(0x0000);
		say("\"I was a fool to join with thee, Avatar! Now I am to lose my life in this foolish quest.\"");
		WILFRED->remove_from_party();
		gflags[BRAVE_SIR_WILFRED_RAN_AWAY] = true;
		Func0874();
		say("\"I am leaving -- do not try to stop me!\"");
		Func097F(WILFRED, "@Farewell!@", 0x0000);
		WILFRED->set_attack_mode(FLEE);
		WILFRED->set_schedule_type(SHY);
		Func09AC(WILFRED, -1, 0, WANDER);
		abort;
	}
	if (event == DEATH) {
		if (WILFRED->get_item_flag(SI_TOURNAMENT)) {
			WILFRED->clear_item_flag(SI_TOURNAMENT);
			var0008 = WILFRED->set_npc_prop(HEALTH, 10);
			WILFRED->set_attack_mode(FLEE);
			Func097F(WILFRED, "@I am dying!@", 0x0000);
			var0008 = script WILFRED after 7 ticks {
				nohalt;
				call Func042D;
			};
		}
	}
	if (event == DOUBLECLICK) {
		AVATAR->item_say("@Well met, Knight!@");
		WILFRED->Func07D1();
		Func097F(WILFRED, "@Greetings!@", 0x0005);
		WILFRED->set_schedule_type(TALK);
	}
	if (event == STARTED_TALKING) {
		WILFRED->run_schedule();
		WILFRED->clear_item_say();
		WILFRED->show_npc_face0(0x0000);
		if (WILFRED->get_item_flag(IN_PARTY)) {
			WILFRED->set_schedule_type(FOLLOW_AVATAR);
			add("leave");
		} else {
			WILFRED->run_schedule();
		}
		var0009 = WILFRED->get_item_flag(MET);
		if (!WILFRED->get_item_flag(IN_PARTY)) {
			WILFRED->run_schedule();
		} else {
			WILFRED->set_schedule_type(FOLLOW_AVATAR);
			add("leave");
		}
		if ((gflags[BRAVE_SIR_WILFRED_RAN_AWAY] || gflags[WILFRED_KICKED_OUT]) && (gflags[WILFRED_HAS_BELONGINGS] && WILFRED->get_cont_items(SHAPE_ANY, QUALITY_ANY, FRAME_ANY))) {
			add("return my belongings");
		}
		if (gflags[BANES_RELEASED] == true) {
			if (gflags[WILFRED_HAS_JOINED]) {
				if (WILFRED->get_item_flag(IN_PARTY)) {
					say("\"I am ready to aid thee. Thou couldst have chosen no better companion than myself!\"");
				} else {
					say("\"Why dost thou trouble me now? Canst thou not see that I am very busy...\"");
					add("join");
				}
			} else {
				say("\"Well met, Avatar!\"");
				say("\"Hath vengeance been exacted upon Batlin for his evil deeds?\"");
				if (Func0955() == true) {
					say("\"Marvelous! The world will be a better place!\"");
					if (gflags[HAVE_WOLF_TATTOO] == true) {
						say("\"Thou art truly worthy of thy Knighthood!\"");
					} else {
						say("\"Thou art worthy of Knighthood!\"");
					}
				} else {
					say("\"Then I must continue to seek him.\"");
					Func097F(WILFRED, "@Batlin must die!@", 0x0000);
					WILFRED->set_schedule_type(SHY);
					abort;
				}
				if (UI_get_array_size(UI_get_party_list()) < 0x0005) {
					say("\"I am now without a cause to champion. I see that thou art without thy companions. If thou wishest, I will join thee.\"");
					if (Func0955() == true) {
						say("\"Together, none can stand in our way!\"");
						WILFRED->add_to_party();
						gflags[WILFRED_HAS_BELONGINGS] = true;
						WILFRED->set_item_flag(SI_TOURNAMENT);
						add("leave");
						gflags[WILFRED_HAS_JOINED] = true;
					} else {
						say("\"Very well. Perhaps I shall journey to Monitor and see what hath transpired there.\"");
					}
				} else {
					say("\"Thou hast more than enough companions to protect thee!\"");
					say("\"Look for me in Monitor when thou dost truly need mine excellent skills. Perhaps I will aid thee then.");
				}
			}
		} else if (var0009 == false) {
			if (gflags[HAVE_WOLF_TATTOO] == true) {
				say("\"Ah, I see that thou art a Knight of Monitor!\"");
				say("\"Although I do not know thee, I am certain that thou knowest me!\"");
			} else {
				say("\"I do not recall having met thee before...\"");
				say("\"But I am certain that thou hast heard of me!\"");
			}
		} else {
			say("\"Art thou not honored? We meet again...\"");
		}
		add(["name", "duties", "bye"]);
		if (gflags[BANES_RELEASED] == true) {
			add("train");
		}
		converse (0) {
			case "return my belongings" (remove):
				say("\"Art thou jesting? They belong to me now! I gave thee thy chance when I left. If thou still wantest them, thou wilt have to take them from me!!\"");
				WILFRED->set_alignment(CHAOTIC);
				WILFRED->clear_item_say();
				Func097F(WILFRED, "@They are mine!@", 0x0000);
				abort;

			case "join" (remove):
				if (gflags[BRAVE_SIR_WILFRED_RAN_AWAY]) {
					say("\"Join thee? Why, thou art incompetent as a battle leader -- I was nearly killed the last time I journeyed with thee!\"");
					say("\"Thou couldst not give me enough coins to join with thee, ",
						var0002,
						".\"");
				} else if (gflags[WILFRED_KICKED_OUT]) {
					say("\"Join thee now? When I was not good enough to continue with thee before? I think not!\"");
					say("\"One must have his pride, or be merely a worm...\"");
				} else if (UI_get_array_size(UI_get_party_list()) > 0x0005) {
					say("\"But thou hast all of these other companions! Knight Wilfred is not one to join a crowd...\"");
				} else {
					say("\"I can see that thou dost need a strong arm like myself. Since it is thy wish, I shall come with thee.\"");
					WILFRED->add_to_party();
					gflags[WILFRED_HAS_BELONGINGS] = true;
					WILFRED->set_item_flag(SI_TOURNAMENT);
					add("leave");
				}
				fallthrough;

			case "leave" (remove):
				say("\"What! Dost thou think me some strumpet, to be cast off at the first excuse? I do not agree to leave.\"");
				var000A = Func0956(["insist", "give in"]);
				if (var000A == "insist") {
					say("\"Damn thee, Avatar!\"");
					WILFRED->remove_from_party();
					Func0874();
					gflags[WILFRED_KICKED_OUT] = true;
					WILFRED->clear_item_flag(SI_TOURNAMENT);
					Func097F(WILFRED, "@Damn thee!@", 0x0000);
					WILFRED->set_schedule_type(SHY);
					WILFRED->set_new_schedules([MIDNIGHT, MORNING, NOON, AFTERNOON, NIGHT], [SLEEP, EAT, TALK, LOITER, EAT], [0x0516, 0x08F7, 0x04F7, 0x08CC, 0x050D, 0x08B6, 0x0516, 0x08A2, 0x04F7, 0x08CC]);
					abort;
				}
				say("\"Thou couldst not succeed without me!\"");
				fallthrough;

			case "name" (remove):
				say("\"What! Thou hast not heard of me?\"");
				say("\"Where hast thou been all thy life, the frozen north?\"");
				say("\"I am Wilfred, Knight of the Bear Command -- formerly of Sleeping Bull Inn.\"");
				WILFRED->set_item_flag(MET);
				add("Sleeping Bull");
				fallthrough;

			case "Sleeping Bull" (remove):
				say("\"Well, if thou art so rude to ask...\"");
				var000B = Func0992(0x0001, "@Thou art the rude one!@", 0x0000, false);
				0x0000->set_conversation_slot();
				say("\"Devra and Angus, proprietors of the inn, are my parents. I was born here.\"");
				fallthrough;

			case "duties" (remove):
				say("\"As thou canst see... I am a Knight of Monitor.\"");
				say("\"I am currently seeking the murderer of my father.\"");
				add("murderer");
				fallthrough;

			case "murderer" (remove):
				say("\"He disappeared some time ago, and is presumed dead. I have been seeking clues since I was notified...\"");
				say("\"Unlike my brother, Argus, who came running home to take over the inn.\"");
				add(["clues", "Argus"]);
				fallthrough;

			case "clues" (remove):
				say("\"Why should I tell thee what I have learned? Thou mayest well be the murderer...\"");
				if (var0005 == true) {
					DUPRE->show_npc_face1(0x0000);
					say("\"Retract thy words, or eat them! Thou art speaking about the Avatar!\"");
					UI_remove_npc_face1();
					0x0000->set_conversation_slot();
				}
				if (var0004 == true) {
					IOLO->show_npc_face1(0x0000);
					say("\"Take the wind out of this egotistical dog's sails, Avatar!\"");
					UI_remove_npc_face1();
					0x0000->set_conversation_slot();
				}
				if (var0006 == true) {
					SHAMINO->show_npc_face1(0x0000);
					say("\"Thou dost tread on dangerous ground with such accusations...\"");
					UI_remove_npc_face1();
					0x0000->set_conversation_slot();
				}
				say("\"Perhaps I was too hasty, ",
					var0000,
					". But I would see my father avenged.\"");
				say("\"If thou art truly searching for my father's killer, then I will tell thee what I have learned.\"");
				add("learned");
				fallthrough;

			case "learned" (remove):
				say("\"Mother mentioned that a guest -- a mage by the name of Batlin -- also disappeared the same night father did. I know for a fact that Angus hated mages and would never have gone anywhere with one willingly... or alive!\"");
				say("\"The name Batlin stirred something in my brain, so I asked around Monitor before I left. And I discovered some very interesting things indeed.\"");
				add("interesting");
				fallthrough;

			case "interesting" (remove):
				say("\"Batlin came to Monitor some time ago. He was accompanied by several unsavory companions -- one was a huge hooded man, like the one that mother mentioned in her letter.\"");
				say("\"This odd party came asking about the Serpent ruins. The mage was unusually interested in anything to do with the Serpent people.\"");
				say("\"And... After Batlin and his henchmen left Monitor, it was discovered that a valuable Serpent relic was stolen from Andral, the sculptor.\"");
				add(["henchmen", "relic"]);
				fallthrough;

			case "henchmen" (remove):
				say("\"There were three with him, so I was told.\"");
				say("\"One was a pirate, by his looks, with an unearthly white eye.\"");
				say("\"One was a dark-skinned fighter, very strong but seemingly lacking in wit.\"");
				say("\"And the other, as I have said, was a tall hooded man -- No one recalls hearing him speak at all. So perhaps he is mute.\"");
				fallthrough;

			case "relic" (remove):
				say("\"Though Andral is a Pikeman, I still cannot understand the interest he places in pieces of stone...\"");
				say("\"He was the one that told me a carved blackrock serpent was missing soon after the mage left. Apparently it was a family heirloom or something.\"");
				fallthrough;

			case "Argus" (remove):
				say("\"Thou shouldst say cowardly cur, instead!\"");
				say("\"He was so glad of an excuse to flee his accusers in Monitor that he ran all the way to the inn when mother notified us of father's disappearance!\"");
				add("accusers");
				fallthrough;

			case "accusers" (remove):
				say("\"There are many who say that Argus took bribes to look aside while illegal activities took place.\"");
				say("\"When Argus heard Flessar repeating these things, Argus called him into a selfish duel and killed him!\"");
				say("\"Of course, like the pack of dogs that they are, the Wolves declared it an accident. And their investigation of the bribes was more for show than anything.\"");
				gflags[HEARD_ARGUS_ACCUSATIONS] = true;
				add(["Flessar", "Wolves"]);
				fallthrough;

			case "Flessar" (remove):
				say("\"Flessar was a Knight of the Leopard Command. He was Templar's friend.\"");
				say("\"He was also not nearly as skilled as my... brother, being many years Argus' junior.\"");
				add("Templar");
				fallthrough;

			case "Templar" (remove):
				say("\"Templar is a Knight of the Bear Command, and my friend.\"");
				say("\"Although his friendship with Flessar was unusual, in that they were from different Commands, it was inevitable that young Flessar would look to one of Monitor's best swordsmen for guidance.\"");
				say("\"Alas, Templar's skill could not help young Flessar on the dueling field.\"");
				fallthrough;

			case "Wolves" (remove):
				say("\"Argus is... or was... a member of the Wolf Command.\"");
				say("\"It doth not take much more than a glance at their commander to see what a worthless Command they are.\"");
				say("\"Brendann's womanizing speaks well enough for the character of the rank and file of his troops.\"");
				say("\"And that includes Argus.\"");
				fallthrough;

			case "train":
				Func0875();
				fallthrough;

			case "bye":
				UI_remove_npc_face0();
				Func097F(AVATAR, "@Goodbye.@", 0x0000);
				Func097F(WILFRED, "@Indeed.@", 0x0005);
				Func097F(IOLO, "@What a butthead!@", 0x0007);
				break;
		}
	}
}

extern var Func0954 0x954 ();
extern var Func0953 0x953 ();
extern var Func0942 0x942 (var var0000);
extern var Func09A0 0x9A0 (var var0000, var var0001);
extern void Func094F 0x94F (var var0000, var var0001);
extern void Func07D1 object#(0x7D1) ();
extern void Func097F 0x97F (var var0000, var var0001, var var0002);
extern void Func0801 0x801 ();
extern var Func08AC 0x8AC (var var0000);
extern var Func099B 0x99B (var var0000, var var0001, var var0002, var var0003, var var0004, var var0005, var var0006);
extern void Func0803 0x803 ();
extern var Func0955 0x955 ();
extern void Func0802 0x802 ();
extern var Func0956 0x956 (var var0000);
extern var Func0992 0x992 (var var0000, var var0001, var var0002, var var0003);
extern var Func097D 0x97D (var var0000, var var0001, var var0002, var var0003, var var0004);
extern void Func08AB 0x8AB ();
extern void Func08AA 0x8AA ();
extern void Func043D object#(0x43D) ();

void Func042E object#(0x42E) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;
	var var0008;
	var var0009;
	var var000A;
	var var000B;
	var var000C;
	var var000D;
	var var000E;
	var var000F;
	var var0010;

	var0000 = false;
	if (ALYSSAND->get_schedule_type() == SEW) {
		var0000 = true;
	}
	var0001 = Func0954();
	var0002 = UI_is_pc_female();
	var0003 = Func0953();
	var0004 = Func0942(IOLO);
	var0005 = Func0942(SHAMINO);
	var0006 = Func0942(DUPRE);
	var0007 = Func0942(DELIN);
	var0008 = false;
	var0009 = false;
	var000A = "";
	if ((event == SI_PATH_SUCCESS) || (event == SI_PATH_FAILURE)) {
		ALYSSAND->set_schedule_type(WANDER);
	}
	if (event == SCRIPTED) {
		if (gflags[ALYSSAND_GAVE_KEY] || (!gflags[FAWN_TRIAL_RECESS])) {
			abort;
		}
		var000B = ALYSSAND->approach_avatar(0x0078, 0x0028);
		ALYSSAND->set_schedule_type(TALK);
		var000B = script Func09A0(0x0001, 0x0002) after 50 ticks {
			nohalt;
			call Func042E;
		};
		var000B = "" & ("@Psst!@" & "@Avatar...@");
		Func094F(ALYSSAND, var000B);
		abort;
	}
	if (event == DEATH) {
		var000B = script item {
			nohalt;
			call Func0112;
		};
	}
	if (event == DOUBLECLICK) {
		AVATAR->item_say("@Might I speak with thee?@");
		ALYSSAND->Func07D1();
		Func097F(ALYSSAND, (("@Certainly, " + var0001) + ".@"), 0x0005);
		ALYSSAND->set_schedule_type(TALK);
	}
	if (event == STARTED_TALKING) {
		ALYSSAND->run_schedule();
		var0000 = false;
		if (ALYSSAND->get_schedule_type() == SEW) {
			var0000 = true;
		}
		if (ALYSSAND->get_schedule_type() == TALK) {
			ALYSSAND->set_schedule_type(SHY);
		}
		ALYSSAND->clear_item_say();
		ALYSSAND->show_npc_face0(0x0000);
		var000C = ALYSSAND->get_item_flag(MET);
		if (gflags[FAWN_TRIAL_RECESS] && (gflags[AVATAR_JOINED_REBELS] && (!gflags[ALYSSAND_GAVE_KEY]))) {
			UI_play_music(0x0014, Func09A0(0x0005, 0x0001));
			Func0801();
			var000D = Func08AC(false);
			say("\"",
				var0003,
				", I have discovered where thy companion ",
				var000D,
				" is being held. He is directly beneath the Temple, in a locked cell.\"");
			say("\"One of the Temple guards is sympathetic to our Cause. He hath given me this key, which will lead thee into the hidden parts of the Temple.\"");
			say("\"If thou dost explore the Temple tonight, I can arrange for the guards to be absent. Now, I must go, before Zulith doth see me speaking with thee!\"");
			var000B = Func099B(AVATAR, 0x0001, 0x0281, 0x00B4, 0x0001, 0x0000, true);
			gflags[ALYSSAND_GAVE_KEY] = true;
			Func097F(ALYSSAND, "@Good fortune!@", 0x0000);
			if (ZULITH->npc_nearby()) {
				var000B = "" & ("@Alyssand!@" & "@What art thou doing?@");
				Func094F(ZULITH, var000B);
			}
			ALYSSAND->set_schedule_type(SHY);
			abort;
		}
		if (var000C == false) {
			if (gflags[HAVE_WOLF_TATTOO] == true) {
				say("\"'Tis always an honor to serve the Pikemen.\" *\"I am Alyssand, daughter of Delin. I am a weaver by trade.\"");
			} else {
				say("\"I am Alyssand, daughter of Delin. I am a weaver by trade.\" *\"How might I be of assistance?\"");
			}
			ALYSSAND->set_item_flag(MET);
		} else if (gflags[ZULITH_SPOKE_RING] && (!gflags[AVATAR_JOINED_REBELS])) {
			UI_play_music(0x0014, Func09A0(0x0005, 0x0001));
			Func0801();
			say("\"Again we meet, ",
				var0003,
				". Perhaps by now, thine experiences have given thee reason to change thine answer...\"");
			say("\"We need thee. The Cause needs thee!\"");
			add("answer");
		} else {
			say("\"'Tis a pleasure to see thee again, ",
				var0003,
				".\"");
		}
		if (gflags[ASK_ALYSSAND_FISHNET_STOCKINGS] && (!gflags[KNOWS_FISHNET_STOCKINGS_ORIGIN])) {
			add("fishnet stockings");
		}
		if (gflags[ZULITH_CAUGHT_TAILING] && (!(gflags[FAWN_TRIAL_DONE_FIRST_DAY] || gflags[FAWN_TRIAL_DONE]))) {
			add("Zulith");
		}
		if (gflags[HAS_CLUE_MOONSILK_STOCKINGS] && (!gflags[KNOWS_MOONSILK_OWNER])) {
			add("Moonsilk stockings");
		}
		if (gflags[HAS_CLUE_RING] && (!gflags[ZULITH_SPOKE_RING])) {
			add("engagement ring");
		}
		if (gflags[AVATAR_JOINED_REBELS]) {
			add("the Cause");
		}
		if (gflags[ZULITH_SPOKE_RING] && (!gflags[GOT_GAUNTLETS_BACK])) {
			add("gauntlets");
		}
		if (var0000 == true) {
			add("provisions");
		}
		converse (["storms", "Goblins", "bye"]) {
			case "provisions":
				if (ALYSSAND->get_schedule_type() == SEW) {
					say("\"I help father with the shop when he is... indisposed. What dost thou wish to purchase?\"");
					Func0803();
				} else {
					say("\"I will gladly sell to thee if thou wilt come to my father's shop when we are open for business.\"");
				}
				remove("provisions");
				fallthrough;

			case "storms":
				say("\"The storms have not been kind to us, ",
					var0001,
					". Without our fleet, Fawn cannot hope to survive for long.\"");
				remove("storms");
				add(["Fawn", "fleet"]);
				fallthrough;

			case "Fawn":
				say("\"Fawn, the city of Beauty. Fawn, the city that lost Love in vanity and the pursuit of power.\"");
				if (gflags[FAWN_TRIAL_DONE_FIRST_DAY] && (gflags[FAWN_TRIAL_DONE] && (!gflags[ORACLE_SET_TO_INNOCENT]))) {
					say("\"But there is fresh hope in Fawn, for Lady Yelinda doth rule for herself now. It is a new dawning for Beauty and Love.\"");
				} else {
					say("\"Beauty nourisheth the senses, ",
						var0001,
						". But Love nourisheth the soul. The soul of Fawn withered long ago...\"");
				}
				remove("Fawn");
				add(["Beauty", "Love"]);
				fallthrough;

			case "Beauty" (remove):
				if (gflags[FAWN_TRIAL_DONE_FIRST_DAY] && (gflags[FAWN_TRIAL_DONE] && (!gflags[ORACLE_SET_TO_INNOCENT]))) {
					say("\"The consequences of the trial of thy friend hath been far-reaching. I think that the people of Fawn doth again see Beauty for the light divine that she can be.\"");
				} else {
					say("\"The people of Fawn are content to let the world end... As long as it doth not mar their Beautiful view of the dying embers!\"");
				}
				fallthrough;

			case "Love":
				say("\"Love and Beauty were once regarded as aspects of the same entity. Whoever loved was beautiful. Whoever nurtured the beauty of truth was loved.\"");
				if (gflags[FAWN_TRIAL_DONE_FIRST_DAY] && (gflags[FAWN_TRIAL_DONE] && (!gflags[ORACLE_SET_TO_INNOCENT]))) {
					say("\"With the aid of Lady Yelinda, those ways shall be restored to Fawn. These are such glorious times...\"");
				} else {
					say("\"Now the two are sundered, and Fawn cares for no one but herself.\"");
				}
				remove("Love");
				fallthrough;

			case "fleet":
				say("\"The storms stripped us of our ships, one by one.\"");
				say("\"Some were plucked away, even as we watched. Others left harbor and never returned. And Beauty is cold comfort to those who have lost their loved ones.\"");
				say("\"Thou hast not seen the storms hit, and watched as something vanished before thy very eyes?\"");
				say("\"Then count thy blessings, ",
					var0001,
					".\"");
				remove("fleet");
				fallthrough;

			case "Goblins" (remove):
				say("\"The Goblins have grown bold of late. They have often come to hurl themselves upon our gate. Thankfully, we have held fast so far.\"");
				if (gflags[FAWN_TRIAL_DONE_FIRST_DAY] && (gflags[FAWN_TRIAL_DONE] && (!gflags[ORACLE_SET_TO_INNOCENT]))) {
					say("\"Thankfully, Leon and his followers have been allowed to enter the city once again. I shall not fear for their safety now.\"");
				} else {
					say("\"Their attacks bring fear in me for Leon and his companions. Lady Yelinda hath forbidden them entrance into the city, even if 'twere certain death to remain outside.\"");
					UI_push_answers();
					add(["Leon", "companions", "Lady Yelinda", "change subject"]);
				}
				fallthrough;

			case "change subject":
				UI_pop_answers();
				if (var000A == "") {
					say("\"What shall we speak of, then?\"");
				}
				if (var000A == "Cause") {
					var000A = "";
					if (!gflags[AVATAR_JOINED_REBELS]) {
						say("\"Now that I have explained it, thy duty must be evident. Wilt thou join us in this Cause?\"");
						if (Func0955()) {
							say("\"Thy courage doth delight the soul of a weary rebel like myself.\"");
							Func0802();
						} else {
							say("\"I regret that thou wilt not aid the Cause. Nevertheless, we will not be turned from our quest to save this society.\"");
							say("\"If events should change thy mind, contact me.\"");
						}
					}
					if (gflags[AVATAR_JOINED_REBELS]) {
						if (gflags[FAWN_TRIAL_RECESS]) {
							var000D = Func08AC(false);
							say("\"",
								var0003,
								", I have discovered where thy companion ",
								var000D,
								" is being held. He is directly beneath the Temple, in a locked cell.\"");
							say("\"One of the Temple guards is sympathetic to our Cause. He hath given me this key, which will lead thee into the hidden parts of the Temple.\"");
							say("\"If thou dost explore the Temple tonight, I can arrange for the guards to be absent. Now, I must go, before Zulith doth see me speaking with thee!\"");
							var000B = Func099B(AVATAR, 0x0001, 0x0281, 0x00B4, 0x0001, 0x0000, true);
							gflags[ALYSSAND_GAVE_KEY] = true;
							Func097F(ALYSSAND, "@Good fortune!@", 0x0000);
							if (ZULITH->npc_nearby()) {
								var000B = "" & ("@Alyssand!@" & "@What art thou doing?@");
								Func094F(ZULITH, var000B);
							}
							ALYSSAND->set_schedule_type(SHY);
							abort;
						}
						say("\"Be ready at any time, for one doth not know when the time to act shall arrive.\"");
						say("\"We once tried to enter the Temple during the night, while Kylista was with one of her lovers... but the guards foiled our attempt.\"");
						say("\"Nevertheless -- look everywhere, talk to everyone, see if thou canst find the clue that hath eluded us!\"");
					}
				}
				if (var000A == "Ring") {
					do {
						UI_play_music(0x0014, Func09A0(0x0005, 0x0001));
						var000A = "";
						say("\"One more moment of thy time, if thou wilt, ",
							var0003,
							".\"");
						Func0801();
						say("\"A person like thyself, brave and adventurous, could be useful in times like these...\"");
						say("\"Wouldst thou be willing to aid us in liberating this city from false traditions and evil schemes?\"");
						var000B = Func0956(["yes", "no", "perhaps"]);
						if (var000B == "no") {
							say("\"I regret that thou wilt not aid the Cause. Nevertheless, we will not be turned from our quest to save this society.\"");
							say("\"If events should change thy mind, contact me.\"");
							break;
						} else if (var000B == "yes") {
							say("\"Thy thinking is more advanced than I had hoped! But surely, thou hast questions...?\"");
							Func0802();
						} else {
							say("\"If thou wilt only let me explain the concepts, I am certain that thou wilt join our Cause.\"");
						}
						UI_push_answers();
						var000A = "Cause";
						add(["false traditions", "evil schemes", "change subject"]);
					} while (false);
				}
				fallthrough;

			case "answer" (remove):
				say("\"Do not toy with mine expectations -- hast thou reconsidered?\"");
				say("\"Wouldst thou aid us in liberating this city from false traditions and evil schemes?\"");
				var000B = Func0956(["yes", "no", "perhaps"]);
				do {
					if (var000B == "no") {
						say("\"If events should change thy mind, contact me.\"");
						break;
					} else if (var000B == "yes") {
						say("\"I knew that thou wouldst perceive the ethicality of this Cause, given time. If thou hast questions, I shall be glad to answer them.\"");
						Func0802();
					} else {
						say("\"I beg thee, let me explain the concepts which propel the Cause. When thou dost understand, thou wilt surely join us...\"");
					}
					UI_push_answers();
					var000A = "Cause";
					add(["false traditions", "evil schemes", "change subject"]);
				} while (false);
				fallthrough;

			case "the Cause" (remove):
				UI_play_music(0x0014, Func09A0(0x0005, 0x0001));
				Func0801();
				if (!(gflags[FAWN_TRIAL_DONE_FIRST_DAY] || gflags[FAWN_TRIAL_DONE])) {
					say("\"Persevere, ",
						var0003,
						", for one cannot tell when the time to act shall arrive.\"");
					say("\"Continue to pry secrets from the townsfolk -- sometimes, a stranger can learn more than an old friend.\"");
					say("\"Go places thou art not wanted, and look for the hidden things. Surely, thou wilt find a clue.\"");
					say("\"Thou must find the evidence that hath eluded us, so that Fawn can be freed!\"");
				}
				if (gflags[FAWN_TRIAL_DONE_FIRST_DAY] && ((!gflags[FAWN_TRIAL_RECESS]) && (!gflags[FAWN_TRIAL_DONE]))) {
					say("\"I have heard that thy friend hath been taken prisoner, to be placed on trial before the Oracle.\"");
					say("\"I have no faith in the truth of the Oracle, but perhaps an opportunity shall present itself to advance the Cause.\"");
					say("\"Thou shouldst submit thyself to the trial, for the time being. That is mine advice.\"");
				}
				if (gflags[FAWN_TRIAL_RECESS]) {
					if (!gflags[CAUGHT_VOLDIN]) {
						say("\"Why dost thou delay? Take the key that I gave thee, and enter the hidden places within the Temple.\"");
						say("\"Perhaps thou canst free thy companion -- or unearth the secret of the Oracle!\"");
					}
					if (gflags[CAUGHT_VOLDIN] && (!(gflags[ORACLE_SET_TO_INNOCENT] || gflags[ORACLE_SET_TO_CORRUPT]))) {
						say("\"Return to the Temple! The secret room which thou hast seen must have some influence over the Oracle.\"");
					}
					if (gflags[ORACLE_SET_TO_CORRUPT]) {
						say("\"Now let the trial resume! Kylista and her knaves shall regret the day they were born...\"");
						if (!UI_is_pc_female()) {
							gflags[ALYSSAND_LIKES_AVATAR] = true;
							say("\"I think I could love a man like thee, ",
								var0003,
								"...\"");
						}
					}
					if (gflags[ORACLE_SET_TO_INNOCENT]) {
						say("\"Hast thou forgotten thine allies, ",
							var0003,
							"? 'Tis not enough to coerce the Oracle into freeing thy friend...\"");
						say("\"Thou must find a way to make the thing denounce Kylista and the Great Captains, and overthrow this evil system!\"");
					}
				}
				if (gflags[FAWN_TRIAL_DONE_FIRST_DAY] && gflags[FAWN_TRIAL_DONE]) {
					if (gflags[ORACLE_SET_TO_INNOCENT]) {
						say("\"The Cause is doomed, ",
							var0003,
							". I am pleased that thy friend hath been freed from jail...\"");
						say("\"Yet I believe that we somehow missed the last chance to expose Kylista and her minions for the hypocrites they truly are!\"");
						say("\"Thy part is done. Go thy way, continue thy quest -- we of the Cause shall struggle on without thee.\"");
					} else {
						say("\"The Cause is triumphant, ",
							var0003,
							"! Lady Yelinda hath ended the exile of The Fellowship. The Great Captains are in disgrace, and Lady Yelinda doth rule for herself now.\"");
						say("\"If there is anything I can ever do for thee, return to Fawn, and I shall aid thee.\"");
						if (gflags[ALYSSAND_LIKES_AVATAR]) {
							add("Kiss me.");
						}
					}
				}
				fallthrough;

			case "Kiss me." (remove):
				say("\"Um, ",
					var0003,
					"... when I said that I loved thee, 'twas a moment of weakness...\"");
				say("\"Surely, thou wouldst not take advantage of a girl for a few hasty words?\"");
				say("\"Besides, there is so much to be done for the Cause and Lady Yelinda. I'm hopeful of becoming an advisor to the Lady! There is not time for love, not now...\"");
				fallthrough;

			case "false traditions" (remove):
				say("\"According to legend, the Oracle was brought by our ancestors from Sosaria, our homeland. It now stands in the Temple of Beauty.\"");
				say("\"Our traditions teach us that the statue is an infallible guide to Truth and Beauty.\"");
				say("\"But we suspect that the legends are false.\"");
				add(["guide to Truth"]);
				if (!var0008) {
					add("We?");
				}
				fallthrough;

			case "We?":
				var0008 = true;
				remove("We?");
				say("\"Most of the young people of the town belong to the Cause -- but they are not willing to say so publicly, for fear of exile.\"");
				say("\"I am also pleased to say that Leon supports us, as do the other Fellowship members.\"");
				fallthrough;

			case "guide to Truth" (remove):
				say("\"The Oracle actually speaks -- all of us have heard it. It speaks in reply to the Priestess of Beauty.\"");
				say("\"The Statue of Beauty only speaks at certain times, such as during the spring festivals or when the city needs special guidance.\"");
				say("\"According to tradition, it will also reply to the ruler of Fawn. However, I have never seen Lady Yelinda speak to the statue. She leaves such duties to Kylista.\"");
				fallthrough;

			case "evil schemes" (remove):
				say("\"The Oracle is supposed to speak only the Truth, yet it too often parrots the words of the Priestess and the Great Captains.\"");
				say("\"We do not believe that truth only serves those in power... we think that someone hath corrupted the Oracle!\"");
				add(["Priestess", "Great Captains"]);
				if (!var0008) {
					add("We?");
				}
				fallthrough;

			case "Priestess" (remove):
				say("\"Kylista is the worst example of this pernicious doctrine of Beauty...\"");
				say("\"She believes that her attractiveness marks her as superior to all others, and that her sensuality is a divine gift by which to influence men's minds.\"");
				say("\"Kylista is lustful and greedy, but she is also cunning. She is very dangerous to us.\"");
				fallthrough;

			case "Great Captains":
				say("\"According to all of our traditions, only women are capable of ruling in Fawn -- for only women are capable of True Beauty.\"");
				say("\"The highest station which a male can hope for is to serve as one of the Great Captains. These men serve as Lady Yelinda's advisors.\"");
				say("\"Yet they do much more than merely advise. There are three of them -- Garth, Joth and Voldin.\"");
				var0009 = true;
				remove("Great Captains");
				add(["Garth", "Joth", "Voldin", "Lady Yelinda"]);
				fallthrough;

			case "Garth":
				say("\"Because he is the youngest of the Captains, we had hoped to find a way to persuade Garth to support our Cause.\"");
				say("\"When one of us spoke with him, he claimed to be sympathetic to the Cause. Yet Garth says he is afraid to confront Voldin with our suspicions.\"");
				say("\"I do not trust him...\"");
				remove("Garth");
				fallthrough;

			case "Joth" (remove):
				say("\"The sailors trust and respect Joth. In mine heart, I cannot believe he is part of any conspiracy to control the Oracle.\"");
				say("\"We thought of asking Joth to aid us, but he hath not been the same since the storms.\"");
				say("\"He doth live in his memories and stare out to sea. I think he cannot stop yearning to return to sea long enough to be of much help.\"");
				fallthrough;

			case "Voldin":
				say("\"Voldin is the one who truly controls the Great Captains. I think he would make himself ruler of Fawn, if he could find a way.\"");
				say("\"Voldin is a cruel man who secretly despises women. If there is an evil scheme, then Voldin must be the mastermind.\"");
				remove("Voldin");
				fallthrough;

			case "Zulith" (remove):
				say("\"That worm hath been following thee? Then he doth suspect that thou art allied with the Cause...\"");
				say("\"Watch thy step, lest thou be exiled like the Fellowship folks. Without thee to help us, our Cause would be lost.\"");
				fallthrough;

			case "Leon":
				say("\"Thou hast not heard Leon speak? Oh, thou shouldst!\"");
				say("\"He doth tell of something wonderful, wherein all people are equal and capable of independent thought. Something called The Fellowship.\"");
				say("\"Thou canst find him at the camp outside the city gates.\"");
				var000E = Func0992(0x0001, 0x0000, 0x0000, false);
				if ((var000E == IOLO) || ((var000E == DUPRE) || (var000E == SHAMINO))) {
					var000B = "@I had thought we had rid ourselves of that blight." & "@But it seems that it is following in Batlin's footsteps.@";
					var000E = Func0992(var000E, var000B, 0x0000, false);
					0x0000->set_conversation_slot();
				}
				remove("Leon");
				add("Fellowship");
				fallthrough;

			case "Fellowship":
				say("\"Imagine, ",
					var0001,
					"! Imagine what the world would be like if only we trusted one another, worked together, and sought to earn that which we strived for!\"");
				say("\"Imagine if women were not coddled or thought of as inferior! What would the world be like if we all listened to our Inner Voice?\"");
				var000E = Func0992(IOLO, ("@The world would be full of frustrated fools, " + "I am sure.@"), 0x0000, false);
				if (var000E != AVATAR) {
					if (UI_get_array_size(UI_get_party_list()) > 0x0002) {
						var000F = var000E;
						while (var000F == var000E) {
							var000F = Func0992(0x0001, 0x0000, 0x0000, false);
						}
						var000F = Func0992(var000F, ("@Another one who hath fallen prey to the empty promises " + "of The Fellowship, Avatar.@"), 0x0000, false);
					}
					0x0000->set_conversation_slot();
				}
				remove("Fellowship");
				fallthrough;

			case "companions":
				say("\"Leon's companions are the sailors that brought him here. Their names are Scots, Ruggs and Kalen.\"");
				remove("companions");
				UI_push_answers();
				add(["Scots", "Ruggs", "Kalen", "change subject"]);
				fallthrough;

			case "Scots":
				say("\"Scots is not precisely a sailor, I suppose. He is actually a cartographer.\"");
				say("\"He is most often with his pens and ink, drawing intricate little lines...\"");
				remove("Scots");
				add("lines");
				fallthrough;

			case "lines":
				say("\"I surmise all those lines make a map, I do not know. But I do not know how he could be making a map, either. He cannot go anywhere because of the storms.\"");
				remove("lines");
				fallthrough;

			case "Ruggs":
				say("\"Ruggs is a sailor, for sure. Although he seems to take well to gardening now that he's on shore.\"");
				say("\"Thou canst not mistake which of the three is Ruggs. His face is hideous to behold, though he speaks fair enough.\"");
				remove("Ruggs");
				fallthrough;

			case "Kalen":
				say("\"Of the three of Leon's companions, I know the least about Kalen, and I have no desire to learn more.\"");
				say("\"He always seems to be hovering about, staring at me. He never seems to be doing anything around the camp.\"");
				remove("Kalen");
				fallthrough;

			case "Lady Yelinda" (remove):
				if (var0009) {
					say("\"She, too, is a prisoner of Beauty! Yelinda must not strain herself, lest she mar her perfect appearance with any sign of weariness.\"");
					say("\"The Great Captains therefore have usurped many of her duties, on the pretext of sparing Yelinda from tedium.\"");
					say("\"I do not think the Lady to be the mindless, spineless creature which some others do. I think she is a victim of this system.\"");
				} else {
					say("\"Lady Yelinda is the ruler of Fawn. Her word is law... Usually delivered by her little shadow, Zulith.\"");
					say("\"Zulith's official title is Chancellor. But he is little more than a glorified messenger.\"");
				}
				fallthrough;

			case "fishnet stockings":
				say("\"I had not expected a stranger to know of my tiny industry. I weave the nets and sew in my father's shop.\"");
				say("\"It assists me in mine attempts to keep a watchful eye on my father... He hath not been right since my mother, Elissia, died.\"");
				say("\"I have few customers, but perhaps people are beginning to take an interest.\"");
				remove("fishnet stockings");
				add("customers");
				fallthrough;

			case "customers":
				say("\"Well, to be truthful, I have only one returning customer. Flindo, a merchant from Moonshade, hath only just left here after ordering several more pair.\"");
				say("\"Apparently one of the mages hath taken a liking to them. They are the only ones who could afford such luxuries now.\"");
				remove("customers");
				fallthrough;

			case "Moonsilk stockings" (remove):
				if (Func097D(PARTY, 0x0001, 0x02A5, QUALITY_ANY, 0x0000)) {
					if (var0002) {
						say("\"Thou art a lucky woman to possess such a fine pair of stockings!\"");
						say("\"I knew that such fine work was possible. But I had never actually seen the stockings they sell in Moonshade.\"");
						say("\"It doth cause me to wonder why anyone in the city of Mages would buy the rough stockings I make, when they could purchase ones so soft.\"");
					} else {
						say("\"Thou wilt make some woman happy with so fine a pair of stockings!\"");
						say("\"I knew that such fine work was possible. But I had never actually seen the stockings they sell in Moonshade.\"");
						say("\"It doth cause me to wonder why anyone in the city of Mages would buy the rough stockings I make when they could purchase ones so soft.\"");
					}
				} else {
					say("\"I have heard of the stockings they sell in Moonshade. So I know that such fine work is possible.\"");
					say("\"Without seeing them, I cannot be sure that the stockings thou hast are from Moonshade. They could be merely homespun, like unto the ones I make...\"");
				}
				fallthrough;

			case "engagement ring":
				var000A = "Ring";
				remove("engagement ring");
				say("\"I had heard that thou hadst been asking after me. That thou didst have an interest in my missing engagement ring... Or perhaps in the gauntlets that replaced it.\"");
				if (Func097D(PARTY, 0x0001, 0x0377, QUALITY_ANY, 0x0000)) {
					say("\"That is it, indeed. I thank thee for telling me... But thou mayest keep it if thou wishest.\"");
				} else {
					say("\"I thank thee for telling me that thou hast seen it... But if thou dost have it, thou mayest keep it.\"");
				}
				gflags[ZULITH_SPOKE_RING] = true;
				ZULITH->set_new_schedules([MIDNIGHT, DAWN, MORNING, NOON, AFTERNOON, EVENING, NIGHT], [HOUND, HOUND, HOUND, HOUND, HOUND, HOUND, HOUND], [0x0408, 0x0778, 0x03A8, 0x0728, 0x03A8, 0x06C8, 0x0448, 0x06C4, 0x0408, 0x0788, 0x03A8, 0x0728, 0x0448, 0x06C4]);
				var000B = script Func09A0(0x0005, 0x0001) after 100 ticks {
					nohalt;
					call Func043D;
				};
				gflags[KNOWS_RING_OWNER] = true;
				UI_push_answers();
				add(["gauntlets", "Keep it?", "change subject"]);
				fallthrough;

			case "Keep it?" (remove):
				say("\"If thou wouldst wish the honest truth, I do not think that my beloved Keth will ever come back from wherever that storm took him.\"");
				say("\"Therefore, this ring hath only melancholy memories for me. This jewelry hath become bitter to me.\"");
				add("Keth");
				fallthrough;

			case "gauntlets" (remove):
				if (!gflags[GOT_GAUNTLETS_BACK]) {
					say("\"I assume that the gauntlets are thine... They are clearly meant for someone more adventurous than a mere weaver.\"");
					say("\"Wouldst thou like to have them back?\"");
					if (Func0955() == true) {
						say("\"Then thou shalt have them. Here!\"");
						var000B = Func099B(AVATAR, 0x0001, 0x0343, QUALITY_ANY, 0x0000, false, true);
						gflags[GOT_GAUNTLETS_BACK] = true;
					} else {
						say("\"If thou dost change thy mind, let me know. I have no use for them, and know of no one else who would.\"");
						var0010 = true;
					}
				} else {
					say("\"I am glad that I was able to give thee thy gauntlets. I had no use for them, and I am sure that thou didst miss their protection.\"");
				}
				fallthrough;

			case "Keth":
				say("\"Keth and I were to marry, but it was not fated to be.\"");
				say("\"He was first mate on one of the largest merchant ships. On one of his voyages, he purchased the engagement ring -- from an artisan in Moonshade, as I recall.\"");
				say("\"But then the storms came, and ships began disappearing. And eventually it was Keth's ship that never came back.\"");
				remove("Keth");
				fallthrough;

			case "bye":
				gflags[TEMP_FLAG_2] = false;
				Func08AB();
				UI_remove_npc_face0();
				Func097F(AVATAR, "@Goodbye!@", 0x0000);
				Func097F(ALYSSAND, "@Farewell!@", 0x0002);
				Func08AA();
				break;
		}
	}
}

extern var Func0954 0x954 ();
extern void Func07D1 object#(0x7D1) ();
extern void Func097F 0x97F (var var0000, var var0001, var var0002);
extern var Func097D 0x97D (var var0000, var var0001, var var0002, var var0003, var var0004);
extern void Func0818 0x818 ();
extern var Func0942 0x942 (var var0000);
extern var Func0992 0x992 (var var0000, var var0001, var var0002, var var0003);
extern void Func08A9 0x8A9 ();
extern var Func0955 0x955 ();
extern void Func08AB 0x8AB ();
extern void Func08AA 0x8AA ();

void Func042F object#(0x42F) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;

	var0000 = Func0954();
	var0001 = false;
	var0002 = false;
	if (event == DEATH) {
		var0003 = script item {
			nohalt;
			call Func0112;
		};
	}
	if (event == DOUBLECLICK) {
		AVATAR->item_say("@Excuse me, sir.@");
		DELIN->Func07D1();
		Func097F(DELIN, "@Do I know thee?@", 0x0005);
		DELIN->set_schedule_type(TALK);
	}
	if (event == STARTED_TALKING) {
		DELIN->run_schedule();
		DELIN->clear_item_say();
		DELIN->show_npc_face0(0x0000);
		var0004 = DELIN->get_item_flag(MET);
		if (gflags[DELIN_MAD_AT_AVATAR] == true) {
			say("\"Unless thou bearest word from my son, I will not bother with thee! Go back to Fedabiblio and tell him I have no business with the affairs of Mages!\"");
			if (gflags[ANDRIO_SPOKE_ABOUT_DELIN] == true) {
				add("letter");
			} else {
				abort;
			}
		} else {
			if (gflags[HAVE_WOLF_TATTOO] == true) {
				if (UI_is_pc_female()) {
					say("\"I cannot understand why Monitorians prefer their women scarred.\"");
					say("\"Forgive me... I am forgetting myself. I am... ah...\"");
					say("\"I am Delin, Fawn's provisioner. How may I serve thee, lady Pikeman?\"");
				} else {
					say("\"I do not recall seeing thy face among the Fawn Tower garrison. Have I met thee? I regret I cannot remember...\"");
					say("\"I am Delin, Fawn's provisioner. Forgive me if thou dost already know me...\"");
					say("\"How may I serve thee, noble Pikeman?\"");
				}
			} else if (UI_is_pc_female()) {
				say("\"Ah... art thou one of my daughter's friends? I cannot seem to recall thee...\"");
				say("\"I am Delin, Fawn's provisioner. Is there something I can do for thee?\"");
			} else {
				say("\"Hast thou need of my services, ",
					var0000,
					"? Or art thou here to court my daughter? I fear I cannot recall...\"");
				say("\"I am Delin, provisioner of Fawn. In case we have not been introduced.\"");
			}
			DELIN->set_item_flag(MET);
			if (gflags[ASK_DELIN_FUR_CAP] && (!gflags[KNOWS_FUR_CAP_OWNER])) {
				add("fur cap");
			}
			if (gflags[ASK_DELIN_SLIPPERS] && (!gflags[KNOWS_SLIPPERS_OWNER])) {
				add("slippers");
			}
			if (DELIN->get_schedule_type() == TEND_SHOP) {
				add("provisions");
			}
			if (gflags[DELIN_SAID_MOONSHADE] == true) {
				add("Moonshade");
			}
			if (gflags[ASKED_JENDON_DAEMON_ARTIFACTS]) {
				add("Batlin");
			}
			if (gflags[ANDRIO_SPOKE_ABOUT_DELIN] == true) {
				add("letter");
			}
			add(["storms", "Goblins"]);
			add("bye");
		}
		converse (0) {
			case "fur cap" (remove):
				if (Func097D(PARTY, 0x0001, 0x03EC, QUALITY_ANY, 0x0004)) {
					say("\"'Tis a nice fur cap, ",
						var0000,
						". If thou dost wish more, I fear thou wilt have to venture to Monitor thyself. Though I have forgotten the maker's name at this time...\"");
					say("\"I have not had a supply wagon bring arms or furs in a score of days. 'Tis the storms!\"");
				} else {
					say("\"I fear I have no more fur caps in stock, ",
						var0000,
						". I fear thou wilt have to venture to Monitor thyself, if thou dost wish one.\tThough I have forgotten the maker's name at this time...\"");
					say("\"I have not had a supply wagon bring arms or furs in a score of days. 'Tis the storms!\"");
				}
				fallthrough;

			case "slippers" (remove):
				if (Func097D(PARTY, 0x0001, 0x024B, QUALITY_ANY, 0x0005)) {
					say("\"Fine slippers, though well-worn. Not something that thou wouldst find here, ",
						var0000,
						".\"");
					say("\"Such frail things would be quickly ruined by the cold and wet here in Fawn... Just like my poor Elissia...\"");
				} else {
					say("\"I have never carried slippers, ",
						var0000,
						", though my poor Elissia yearned for them so.\"");
					say("\"Such frail things would be quickly ruined by the cold and wet here in Fawn... Just like my poor Elissia...\"");
				}
				if (!var0001) {
					add("Elissia");
				}
				fallthrough;

			case "provisions":
				say("\"I provide Fawn with adventuring supplies... Though I regret that my stock is not great at the moment. These storms have made the supply wagons from the other cities rare indeed.\" *\"What dost thou wish to purchase?\"");
				Func0818();
				remove("provisions");
				fallthrough;

			case "storms":
				say("\"The storms... oh, yes. They're very interesting to watch. Though my daughter will not allow me to go outside where I can see better.\" *\"So many pretty colors, and such unusual results...\"");
				if (Func0942(ALYSSAND)) {
					ALYSSAND->show_npc_face1(0x0000);
					say("\"Father, thou WILT stay indoors when those storms come through town!\"");
					UI_remove_npc_face1();
					0x0000->set_conversation_slot();
					say("\"Ah... I suppose I must if thou sayest so, my dear.\"");
				}
				remove("storms");
				UI_push_answers();
				add(["daughter", "colors", "results", "change subject"]);
				fallthrough;

			case "change subject":
				UI_pop_answers();
				say("\"Of course. Um, what was it we were discussing...?\"");
				fallthrough;

			case "daughter":
				say("\"Thou hast met my daughter? I had forgotten, I'm sorry. Alyssand is very pretty, but she worries too much about me.\" *\"She doth not believe that I'd be all right without her.\"");
				if (Func0942(ALYSSAND)) {
					ALYSSAND->show_npc_face1(0x0000);
					say("\"Thou dost need me, father. Thy business is much too complex for thee to run by thyself!\"");
					UI_remove_npc_face1();
					0x0000->set_conversation_slot();
					say("\"Ah, er... I can do fine without thee, my dear.\"");
					say("\"Hmmm... what were we discussing, ",
						var0000,
						"?\"");
				}
				remove("daughter");
				add("Alyssand");
				fallthrough;

			case "Alyssand":
				say("\"Alyssand is around somewhere... Or at least she was. She never leaves me alone for long.\" *\"She hovers over me quite a bit since Keth disappeared... Alyssand's my daughter. Didst thou know?\"");
				if (Func0942(ALYSSAND)) {
					ALYSSAND->show_npc_face1(0x0000);
					say("\"Father, that is my business!\"");
					UI_remove_npc_face1();
					0x0000->set_conversation_slot();
					say("\"Er... I am sorry, daughter.\"");
				} else {
					add("Keth");
				}
				remove("Alyssand");
				fallthrough;

			case "Keth":
				say("\"Hast thou seen Keth? If so, thou shouldst tell him that Alyssand still doth have the engagement ring... Or did have it... I think she said something about losing it.\" *\"'Tis not right to say that thou wilt marry someone and then not return...\"");
				remove("Keth");
				UI_push_answers();
				add(["engagement ring", "not return", "change subject"]);
				fallthrough;

			case "engagement ring":
				say("\"Keth was passing proud of that ring. He ordered it specially from someone in Moonshade...\" \"Mine Elissia was from Moonshade. Oh, my poor Elissia... She's gone. Gone.\"");
				var0003 = Func0992(SHAMINO, "@Art thou daft, old man!@", 0x0000, false);
				if (var0003 != AVATAR) {
					0x0000->set_conversation_slot();
					if (UI_get_array_size(UI_get_party_list()) > 0x0002) {
						var0005 = var0003;
						while (var0005 == var0003) {
							var0005 = Func0992(0x0001, 0x0000, 0x0000, false);
						}
						if (var0005 != AVATAR) {
							say("\"Elissia... Dear, sweet Elissia...\"");
							var0005 = Func0992(var0005, "@Be gentle with him. I fear he's a bit confused.@", 0x0000, false);
						}
					}
				}
				0x0000->set_conversation_slot();
				say("\"I'm sorry... very sorry, ",
					var0000,
					". I still mourn the loss of my wife.\"");
				say("\"Now, thou didst ask about Alyssand's ring... I would call her and ask her to show it to thee, but Alyssand lost her ring not long ago.\"");
				remove("engagement ring");
				if (Func097D(PARTY, 0x0001, 0x0377, QUALITY_ANY, 0x0000)) {
					add("ring");
				} else {
					say("\"I cannot know if the ring thou didst find is my daughter's unless I see it. Perhaps if thou dost bring it to me I can ascertain whether thou shouldst speak with Alyssand.\"");
				}
				if (!var0001) {
					add("Elissia");
				}
				if (!var0002) {
					add("Moonshade");
				}
				fallthrough;

			case "ring":
				say("\"Why, it certainly doth look like it... Alyssand will be so happy!\"");
				say("\"I would reward thee for returning it to her, ",
					var0000,
					", but a storm stripped my cash box of all my funds the other day.\"");
				say("\"I went to open my shop the next morning and there was a bundle of food in place of the Filari Alyssand had put there the night before.\"");
				var0003 = Func0992(0x0001, "@That is what happened to our food!@", 0x0000, false);
				if (var0003 != AVATAR) {
					0x0000->set_conversation_slot();
				}
				Func08A9();
				remove("ring");
				add("Filari");
				fallthrough;

			case "Filari":
				if (gflags[HAVE_WOLF_TATTOO] == true) {
					say("\"I had forgotten that thou wert from Monitor, ",
						var0000,
						".\"");
				} else {
					say("\"Thou must be a stranger...\"");
				}
				say("\"Filari are Fawn's currency... A small silver disk with a colored gem in the center.\"");
				if (Func097D(PARTY, 0x0001, 0x03B4, QUALITY_ANY, FRAME_ANY)) {
					say("\"Yes... yes. Those are Filari.\"");
					say("\"That is as much as the storm took from me...\"");
					var0003 = Func0992(0x0001, "@These must be his coins then, Avatar!@", 0x0000, false);
					0x0000->set_conversation_slot();
					if (DELIN->get_schedule_type() == TEND_SHOP) {
						say("\"I would accept thy money if thou dost wish to purchase something.\"");
						Func0818();
					} else {
						say("\"If thou wouldst come to my shop when I am open I wouldst gladly sell thee something, ",
							var0000,
							"...\"");
					}
				}
				gflags[KNOWS_FILARI_OWNER] = true;
				remove("Filari");
				fallthrough;

			case "not return":
				say("\"Of course Keth hath not returned! He would have come to see Alyssand the moment he set foot on shore.\" *\"No one hath seen him or his crewmates since one of those storms.\"");
				remove("not return");
				fallthrough;

			case "colors":
				say("\"Oh, yes! Thou shouldst watch one of these storms some time. The lightning is all different colors...\" *\"Of course, if thou strayest too far out to watch, thou mayest not enjoy it too much.\"");
				remove("colors");
				fallthrough;

			case "results":
				say("\"Results? Results of what? What were we talking about...\" *\"Now I remember! The storms! There are two reasons these storms are fun to watch.\"");
				remove("results");
				add("two reasons");
				fallthrough;

			case "two reasons":
				say("\"Sometimes 'tis FLASH!, and something thou wert standing across from is gone.\"");
				say("\"But sometimes 'tis FLASH!, and something thou wert watching is a big, orange pumpkin.\"");
				say("\"I like the last one best... 'Tis fun to guess what will be there after the flash.\"");
				var0003 = Func0992(DUPRE, 0x0000, 0x0000, false);
				if ((var0003 != IOLO) && IOLO->npc_nearby()) {
					var0003 = Func0992(var0003, "@Sounds like he doth have a sense of humor like thine, Iolo!@", 0x0000, false);
					0x0000->set_conversation_slot();
				} else if (var0003 != AVATAR) {
					var0003 = Func0992(var0003, "@This man is quite jovial!@", 0x0000, false);
					0x0000->set_conversation_slot();
				}
				if (var0003 != AVATAR) {
					if (UI_get_array_size(UI_get_party_list()) > 0x0002) {
						var0005 = var0003;
						while (var0005 == var0003) {
							var0005 = Func0992(0x0001, 0x0000, 0x0000, false);
						}
						if (var0005 != AVATAR) {
							0x0000->set_conversation_slot();
							say("\"'Tis such an incredible sight. Ho ho hee!\"");
							var0005 = Func0992(var0005, "@'Tis not very funny if what was hit was a person!@", 0x0000, false);
						}
					}
					0x0000->set_conversation_slot();
				}
				remove("two reasons");
				fallthrough;

			case "Goblins":
				say("\"Why wouldst thou want to talk about them? The storms are much more fun...\"");
				var0003 = Func0992(SHAMINO, "@We do not have time for this!@", 0x0000, false);
				if (var0003 != AVATAR) {
					0x0000->set_conversation_slot();
					say("\"Oh, all right! Don't be testy!\"");
				}
				say("\"Thou dost not need to scowl so. Everyone is so serious these days! 'Tis not healthy, thou knowest.\" *\"The Goblins are large, mean and hateful. They prefer to eat humans and they make it unsafe to travel. But I never travel since they took away my son, Freli...\"");
				remove("Goblins");
				UI_push_answers();
				add(["unsafe", "Freli", "change subject"]);
				fallthrough;

			case "unsafe":
				say("\"Nothing is safe... Not even life. I lost my dear Elissia after childbirth...\"");
				var0003 = "friends are";
				if (UI_get_array_size(UI_get_party_list()) < 0x0003) {
					var0003 = "friend is";
				}
				var0003 = Func0992(IOLO, ("@If thou couldst return to the subject at hand, " + ("Delin, we would be most grateful.@" & "@I fear that my <Check> becoming a bit impatient.@")), 0x0000, false);
				if (var0003 != AVATAR) {
					0x0000->set_conversation_slot();
				}
				say("\"I wandered off again, didn't I? What was I saying...?\" *\"The Goblins have killed our healer, and now we have to make do with a horticulturist. Imagine that! And, of course, the Goblins have attacked the Fawn Tower.\"");
				remove("unsafe");
				add("Fawn Tower");
				UI_push_answers();
				add(["healer", "horticulturist", "change subject"]);
				if (!var0001) {
					add("Elissia");
				}
				fallthrough;

			case "Elissia":
				var0001 = true;
				say("\"Oh, she was a true beauty, I tell thee! Soft golden hair and the brightest eyes that thou hast seen.\" *\"Though she came from Moonshade, no one had cause to fear her. She had not a drop of magic...\"");
				say("\"Other than her smile.\"");
				if (IOLO->npc_nearby() && (UI_get_array_size(UI_get_party_list()) > 0x0002)) {
					var0003 = IOLO;
					while (var0003 == IOLO) {
						var0003 = Func0992(0x0001, 0x0000, 0x0000, false);
					}
					var0003->show_npc_face1(0x0000);
					say("\"Our friend Iolo shares thy grief, milord. His wife is lost somewhere in these lands.\"");
					UI_remove_npc_face1();
					0x0000->set_conversation_slot();
					say("\"For thy sake, I hope that she doth live, stranger Iolo.\"");
					IOLO->show_npc_face1(0x0000);
					say("\"If Gwenno were lost from me forever, perhaps I too would be a little confused.\"");
					say("\"Condolences to thee, Delin, and apologies if we have been unfeeling.\"");
					UI_remove_npc_face1();
					0x0000->set_conversation_slot();
					say("\"They say that I shall feel better soon...\"");
					say("\"But I don't believe it.\"");
				}
				if (!var0002) {
					add("Moonshade");
				}
				remove("Elissia");
				fallthrough;

			case "healer":
				say("\"His name was, ah... Seth, I believe. Good healer, but he had a nasty temper.\" *\"I am certain that the Goblins found him a bitter meal. Ha!\"");
				remove("healer");
				add("Seth");
				fallthrough;

			case "Seth":
				say("\"Seth? Oh, the healer! Didst thou know him, too?\" *\"Always insisted on going herb gathering alone... 'Tis what finally killed him. Wouldn't take any guards along with him, even after the Goblin attacks increased.\"");
				remove("Seth");
				fallthrough;

			case "horticulturist":
				say("\"Did I say something about a horticulturist? I thought we were talking about healers...\" *\"When Seth was killed, Delphynia took his place. We could not obtain a replacement from anywhere because of the storms.\"");
				remove("horticulturist");
				add("Delphynia");
				fallthrough;

			case "Delphynia":
				say("\"Delphynia is a fine horticulturist, to be sure. But she hath had little or no training as a healer.\"");
				say("\"And it doth not seem right having a woman as a healer. Women should concern themselves with the delights of life, not the sorrows.\"");
				remove("Delphynia");
				fallthrough;

			case "Fawn Tower":
				if (gflags[HAVE_WOLF_TATTOO] == true) {
					say("\"But then thou knowest all about Goblin treachery, being a Pikeman and all.\"");
					if (gflags[CLEARED_FAWN_TOWER] == true) {
						say("\"Everyone is so relieved that thy fine Pikemen companions have retaken the Tower from Pomdirgun. But they do not understand that it is only a matter of time before we die... Admittedly though, I will grant that most any death would be better than becoming a Goblin's supper.\"");
					} else {
						say("\"Everyone is so worried, now that Pomdirgun hath taken the Tower from thy Pikemen companions. But they do not understand that it is only a matter of time before we die... But I intend to try my luck with the storms, rather than becoming a Goblin's supper.\"");
					}
				} else if (gflags[CLEARED_FAWN_TOWER] == true) {
					say("\"Everyone is so relieved that the Tower hath been retaken from Pomdirgun. But they do not understand that it is only a matter of time before we die... Admittedly though, I will grant that most any death would be better than becoming a Goblin's supper.\"");
				} else {
					say("\"Everyone is so worried, now that Pomdirgun holds the Tower.\" ~\"But they do not understand that it is only a matter of time before we die... But I intend to try my luck with the storms, rather than becoming a Goblin's supper.\"");
				}
				remove("Fawn Tower");
				add("Pomdirgun");
				fallthrough;

			case "Pomdirgun":
				say("\"I am certain that Pomdirgun would be very disappointed to learn that thou dost not know of him. He hath gone to great lengths to be sure that we in Fawn know the name of the Goblin leader that will bring us to our knees...\"");
				say("\"...Or his stewpot.\"");
				remove("Pomdirgun");
				fallthrough;

			case "Freli":
				say("\"Freli... Didst thou say Freli? Hast thou seen him? I have not seen him since the Magister took him away.\" *\"I would give anything to be able to see him again, or to have some word from him. Elissia died bringing him into this world... He is all that I have to remember her by, except for Alyssand of course. But Freli favors his mother more.\"");
				gflags[DELIN_SPOKE_FRELI] = true;
				remove("Freli");
				add("Magister");
				if (!var0001) {
					add("Elissia");
				}
				fallthrough;

			case "Magister" (remove):
				say("\"The Magister comes like a thief in the night, to test the children of the land for magic talent. If a Mage Child is discovered, the Magister steals the child.\"");
				say("\"Just as he stole my little Freli...\"");
				say("\"Thou dost not work for the Magister, dost thou?\"");
				if (Func0955() == true) {
					say("\"Thou hast no cause to spy on me! I have not seen or heard from my son since he left here! I am not responsible for anything he may have done!\" *\"Tell thine employer that he took Freli, let him be responsible!\"");
					gflags[DELIN_MAD_AT_AVATAR] = true;
					Func097F(DELIN, "@Spy not on me!@", 0x0000);
					abort;
				}
				say("\"Good! Because the Magister hath no call to spy on me.\"");
				say("\"I have had no contact with Freli since he was taken away. No mortal can win in a struggle against wizards...\"");
				fallthrough;

			case "Moonshade":
				var0002 = true;
				say("\"Moonshade is where my wife was from... She was the most patient of women.\" *\"Moonshade is ruled by Mages. To them, if thou art not a Mage, thou art nothing. The Mages shed no tears when mine Elissia left the town. She was nothing in their eyes... But everything in mine.\"");
				remove("Moonshade");
				if (!var0001) {
					add("Elissia");
				}
				fallthrough;

			case "Batlin":
				say("\"Bats? What bats?\"");
				var0003 = Func0992(0x0001, "@Not bats! B-A-T-L-I-N!@", "@Not bats! B-A-T-L-I-N!@", false);
				0x0000->set_conversation_slot();
				say("\"No need to shout. I'm not deaf.\"");
				say("\"Batlin... ah, I remember he came here asking about some sort of rock sculpture or something. Black rock...\"");
				say("\"I told him I am a simple merchant. I do not carry such luxuries. I directed him to Monitor. There is a sculptor there.\"");
				remove("Batlin");
				UI_push_answers();
				add(["Monitor", "change subject"]);
				fallthrough;

			case "Monitor":
				if (gflags[HAVE_WOLF_TATTOO] == true) {
					say("\"And people accuse me of being forgetful! Thou art a Knight, and doth ask me about Monitor?\"");
				}
				say("\"Monitor is south of us, ",
					var0000,
					", on the coast. Their soldiers, the Pikemen, act as guards for the roads, and as highwaymen for Monitor's coffers...\"");
				remove("Monitor");
				add("highwaymen");
				fallthrough;

			case "highwaymen":
				say("\"Yes, highwaymen! They charge each traveller and merchant who would make use of the road they guard!\" *\"An exorbitant amount doth go to Monitor every year, I'm certain. And then we must feed them in their Tower, and offer them our goods at a discount!\"");
				remove("highwaymen");
				fallthrough;

			case "letter" (remove):
				say("\"A letter from Freli! Oh, what joy!\"");
				if (UI_remove_party_items(0x0001, 0x031D, 0x0046, 0x0000, 0x0000)) {
					say("\"Let me have it! Alyssand must hear of this.\"");
					if (Func0942(ALYSSAND)) {
						ALYSSAND->show_npc_face1(0x0000);
						say("\"I am here, father! Tell me how Freli fares. Hath he become a Mage?\"");
						UI_remove_npc_face1();
						0x0000->set_conversation_slot();
						say("\"A moment, a moment... It will take me a moment. His writing is terrible!\"");
					}
					say("\"Oh, for this piece of good work, ",
						var0000,
						", thou must be rewarded!\"");
					say("\"Let me see... ah, yes! How wouldst thou like a discount on anything within the store? Yes, yes... half my normal price -- but just this once!\"");
					gflags[ANDRIO_SPOKE_ABOUT_DELIN] = false;
					gflags[DELIN_WILL_GIVE_DISCOUNT] = true;
					gflags[DELIN_MAD_AT_AVATAR] = false;
				} else {
					say("\"Thou art having fun with me, stranger! I see no letter.\"");
					Func097F(DELIN, "@Out with ye!@", 0x0000);
					DELIN->set_schedule_type(SHY);
					abort;
				}
				fallthrough;

			case "bye":
				Func08AB();
				UI_remove_npc_face0();
				Func097F(AVATAR, "@Thanks for thine help!@", 0x0000);
				Func097F(DELIN, "@Come back any time!@", 0x0005);
				Func08AA();
				break;
		}
	}
}

extern var Func0954 0x954 ();
extern void Func07D1 object#(0x7D1) ();
extern void Func097F 0x97F (var var0000, var var0001, var var0002);
extern var Func0955 0x955 ();
extern void Func081A 0x81A ();
extern void Func081B 0x81B ();
extern var Func097D 0x97D (var var0000, var var0001, var var0002, var var0003, var var0004);
extern void Func08A9 0x8A9 ();
extern var Func099B 0x99B (var var0000, var var0001, var var0002, var var0003, var var0004, var var0005, var var0006);
extern void Func08AB 0x8AB ();
extern void Func08AA 0x8AA ();

void Func0430 object#(0x430) () {
	var var0000;
	var var0001;
	var var0002;

	var0000 = Func0954();
	if (event == DEATH) {
		var0001 = script item {
			nohalt;
			call Func0112;
		};
	}
	if (event == DOUBLECLICK) {
		AVATAR->item_say("@A moment, if thou wilt.@");
		DELPHYNIA->Func07D1();
		Func097F(DELPHYNIA, (("@At thy service, " + var0000) + ".@"), 0x0005);
		DELPHYNIA->set_schedule_type(TALK);
	}
	if (event == STARTED_TALKING) {
		DELPHYNIA->run_schedule();
		DELPHYNIA->clear_item_say();
		DELPHYNIA->show_npc_face0(0x0000);
		var0002 = DELPHYNIA->get_item_flag(MET);
		if (gflags[FAWN_TRIAL_RECESS] || (gflags[FAWN_TRIAL_DONE_FIRST_DAY] && (!gflags[FAWN_TRIAL_DONE]))) {
			say("\"Leave! I have no wish to be seen with thee! Thou dost consort with criminals and blasphemers.\"");
			UI_remove_npc_face0();
			Func097F(DELPHYNIA, "@Leave me alone!@", 0x0000);
			abort;
		}
		if (var0002 == false) {
			if (gflags[HAVE_WOLF_TATTOO] == true) {
				if (UI_is_pc_female()) {
					say("\"I am Delphynia, horticulturist and healer. State thy business or be on thy way. I do not traffic with oafs and knaves.\"");
				} else {
					say("\"I am Delphynia, horticulturist and healer. Welcome, noble Pikeman. Thy presence honors me.\"");
				}
			} else {
				say("\"I am Delphynia, horticulturist and healer. How may I be of service, ",
					var0000,
					"?\"");
			}
			DELPHYNIA->set_item_flag(MET);
		} else {
			say("\"'Tis always a pleasure to see thee, Avatar. How may I be of service to thee?\"");
		}
		add(["Goblins", "healer", "storms", "buy", "bye"]);
		if (gflags[ASK_DELPHYNIA_APPARATUS] && (!gflags[KNOWS_LAB_APPARATUS_OWNER])) {
			add("apparatus");
		}
		if (gflags[ASK_DELPHYNIA_PUMICE] && (!gflags[KNOWS_PUMICE_ORIGIN])) {
			add("pumice");
		}
		if (gflags[ASK_DELPHYNIA_BLUE_EGG] && (!gflags[KNOWS_BLUE_EGG_OWNER])) {
			add("blue egg");
		}
		if (gflags[ASK_DELPHYNIA_GLOWING_ROCK] && (!gflags[KNOWS_STONEHEART_ORIGIN])) {
			add("glowing rock");
		}
		if ((gflags[ACCEPTED_RUGGS_LETTER] == true) && (!gflags[DELIVERED_RUGGS_LETTER])) {
			add("letter");
		}
		if ((gflags[KNOWS_ABOUT_VARO_LEAVES] == true) && ((gflags[CURED_LYDIA_POISON] == false) && (gflags[DELPHYNIA_SPOKE_VARO_LEAVES] == false))) {
			add("Varo Leaves");
		}
		if (gflags[BANES_RELEASED] == true) {
			add("Iolo the Mad");
		}
		converse (0) {
			case "Goblins":
				say("\"Would that I never hear of those horrible creatures again! They are why I am now Fawn's healer, though I am not properly trained.\" *\"Pomdirgun's shadow hath cast a blight on all the land!\"");
				remove("Goblins");
				add("Pomdirgun");
				fallthrough;

			case "healer":
				say("\"I am a horticulturist by trade. What little I know of herbs hath given me a responsibility I did not want. I curse the day that Seth refused a guard escort to do his herb gathering!\"");
				say("\"Dost thou wish healing?\"");
				if (Func0955()) {
					Func081A();
				} else {
					say("\"I hate to say this, but I am relieved to hear that!\"");
				}
				remove("healer");
				add("Seth");
				fallthrough;

			case "Seth":
				say("\"Seth was two years older than the heavens, and set in his ways, to be sure. But he was a fine healer. He refused a guard escort to gather his herbs. He told Jorvin it was because the guards stepped on the plants he wanted to gather.\"");
				say("\"But I think he simply wanted to be able to escape alone for a while. Thou hast no idea how little time one has when thou must be at the beck and call of everyone with some imagined ill!\"");
				remove("Seth");
				add("Jorvin");
				fallthrough;

			case "Jorvin":
				say("\"Jorvin is the Captain of the Guards. 'Twas he that went looking for Seth near twilight when the old man had not returned to the city.\" *\"Jorvin found signs that the Goblins had taken Seth, and led pursuit. But it was too late. By the time the guards caught the foul monsters, Seth was already the makings for their next meal!\"");
				remove("Jorvin");
				fallthrough;

			case "Pomdirgun":
				say("\"Iiieeee! That very name sends ice down my spine! Pomdirgun hath welded all the Goblins into his weapon. He will never stop until he hath driven us all from the land... Or feasted on us to the last child.\" *\"He is a fiend drawn to destroy our Beauty!\"");
				remove("Pomdirgun");
				fallthrough;

			case "storms" (remove):
				if (gflags[FAWN_TRIAL_DONE_FIRST_DAY] && (gflags[FAWN_TRIAL_DONE] && (!gflags[ORACLE_SET_TO_INNOCENT]))) {
					say("\"My sole hope is now that the conspiracy of Kylista and Voldin hath been exposed the curse which lies upon this land might be raised.\"");
					say("\"Can a City built upon the concept of Pure Beauty remain cursed? I hope not...\"");
				} else {
					say("\"What foulness is about in the land! That I received one of the harbingers of Fawn's doom stains my Beauty! Even the heavens lash out to burn away the vile truth that I harbor within mine heart!\"");
					add(["harbingers", "vile truth"]);
				}
				fallthrough;

			case "harbingers":
				say("\"When those sailors -- those false prophets -- first landed on our shores, two of their number came to seek me. One was a mage of some sort who came seeking what reagents I grow.\"");
				if (gflags[DELIVERED_RUGGS_LETTER]) {
					say("\"The other... as thou knowest, was Ruggs.\"");
					add(["false prophets", "mage"]);
				} else {
					say("\"The other... He was a thief who wore a face none could love. He stole mine heart away!\"");
					add(["false prophets", "mage", "thief"]);
				}
				remove("harbingers");
				fallthrough;

			case "false prophets" (remove):
				if (gflags[FAWN_TRIAL_DONE_FIRST_DAY] && (gflags[FAWN_TRIAL_DONE] && (!gflags[ORACLE_SET_TO_INNOCENT]))) {
					say("\"But now I am so confused... 'Twas Kylista who told us that The Fellowship was false, but now she doth stand accused of heresy...\"");
					say("\"And The Fellowship is again openly admitted within the city! I know not what to think.\"");
				} else {
					say("\"That is what the Priestess of Beauty calls them. They speak of something called The Fellowship, and claim that it will make our lives complete.\"");
					say("\"Everyone knows that the true way lies along Beauty's path. By seeking Beauty, we draw all good things to us.\" *\"I rue the day I ever saw him!\"");
					add("Fellowship");
				}
				fallthrough;

			case "Fellowship":
				say("\"I can tell thee nothing. Nothing! I would not listen to such blasphemy. 'Tis enough that one of them hath bewitched me and stolen mine heart...\"");
				remove("Fellowship");
				fallthrough;

			case "mage":
				say("\"I think his companion called him by the name Batlin.\" *\"He was disappointed in what little I had to offer in the way of reagents. I told him to seek out Pothos in Moonshade for a better selection.\"");
				say("\"He also inquired about blackrock carvings or sculpture, I do not remember exactly. I told him to ask Delin, who doth know artisans in Monitor and Moonshade.\"");
				remove("mage");
				add("Delin");
				fallthrough;

			case "buy":
				if (DELPHYNIA->get_schedule_type() == TEND_SHOP) {
					say("\"What dost thou wish to purchase?\"");
					Func081B();
				} else {
					say("\"I will gladly sell thee vegetables or reagents when I am open, ",
						var0000,
						". Come to Healers Hall or the greenhouse during the daytime.\"");
					remove("buy");
				}
				fallthrough;

			case "Delin":
				say("\"Delin is Fawn's dry goods dealer, poor man. I wished Batlin luck in discussing anything with him.\"");
				say("\"Delin hath not been right since his wife died in childbirth. His daughter, Alyssand, hath always looked after him, though she hath problems of her own now.\"");
				remove("Delin");
				add("Alyssand");
				fallthrough;

			case "Alyssand" (remove):
				if (gflags[FAWN_TRIAL_DONE_FIRST_DAY] && (gflags[FAWN_TRIAL_DONE] && (!gflags[ORACLE_SET_TO_INNOCENT]))) {
					say("\"Hast thou not heard? Lady Yelinda doth look to the young woman as her chief advisor!\"");
					say("\"Alyssand hath never been so busy, nor so burdened with cares. She doth work to exhaustion, yet I think she is happy.\"");
				} else {
					say("\"Alyssand hath always been a headstrong girl. Thou wouldst expect it of someone with her responsibilities. We all thought Keth would take care of her, keep her under control. But then Keth was lost in one of those terrible storms.\"");
					say("\"Alyssand swore that as long as she had his ring there was still hope that he would return. When that disappeared not long ago, she seemed to go mad! She seems to have fallen in with those blasphemers and claims that the Oracle is a sham.\"");
					add(["ring", "Oracle"]);
				}
				fallthrough;

			case "ring":
				say("\"I cannot tell thee very much about it. I fear that I only glanced at it... I would know it if I saw it again, though.\"");
				if (Func097D(PARTY, 0x0001, 0x0377, QUALITY_ANY, 0x0000)) {
					say("\"I could not swear before the Oracle that this is truly Alyssand's ring. But it certainly doth look like it...\" *\"Thou shouldst find Alyssand and ask her, to be sure.\"");
				}
				Func08A9();
				remove("ring");
				fallthrough;

			case "Oracle":
				say("\"Thou dost not know of the Oracle of Fawn? The Oracle is the instrument of Beauty here on Serpent Isle. It receives messages from the heavens, which Kylista makes plain for everyone to understand.\"");
				remove("Oracle");
				add("Kylista");
				fallthrough;

			case "Kylista":
				say("\"Kylista is the Priestess of Beauty, all honor to her. 'Tis she that instructs us all in Beauty's truth, which she receives in revelations from the Oracle.\" *\"Even Lady Yelinda honors Kylista's wisdom.\"");
				remove("Kylista");
				add("Lady Yelinda");
				fallthrough;

			case "Lady Yelinda":
				say("\"Lady Yelinda, honor to her, is the ruler of Fawn. She is the most beautiful woman in the city, the very embodiment of Beauty.\"");
				remove("Lady Yelinda");
				fallthrough;

			case "thief":
				say("\"Thief, yes, that's what he is! His name is Ruggs, and he hath bewitched me. Perhaps he is some sort of mage, like his companion.\" *\"He hath stolen mine heart and I do not know what to do.\"");
				remove("thief");
				fallthrough;

			case "vile truth":
				say("\"I must confess, I am the cause of these storms. I know I am. I must live with the vile truth that I hold in mine heart of hearts.\" *\"I am in love with one of those who brought this ruin upon my city! Although I did not embrace his beliefs, mine heart embraced him.\" *\"I am as guilty as Alyssand! I cannot see how she bears such shame...\"");
				remove("vile truth");
				fallthrough;

			case "apparatus" (remove):
				if (Func097D(PARTY, 0x0001, 0x02ED, QUALITY_ANY, 0x0001)) {
					say("\"That is a piece of Mage's equipment, ",
						var0000,
						".\"");
					say("\"Thou sayest it is not thine? Hmmm... Then thou wilt have to enquire in Moonshade to find who it belongs to.\"");
					say("\"Each Mage's equipment is different from every other Mage's... As much for pride as anything else. I am sorry I cannot be of any more help to thee.\"");
				} else {
					say("\"It sounds like a piece of Mage's equipment, ",
						var0000,
						". But I could not be certain without seeing it. It could be a simple piece of brewing equipment for all I know.\"");
					say("\"Thou couldst enquire in Moonshade, to see if any of the Mages are missing any equipment. I am sorry I cannot be of any more help to thee.\"");
				}
				fallthrough;

			case "pumice" (remove):
				gflags[KNOWS_PUMICE_ORIGIN] = true;
				if (Func097D(PARTY, 0x0001, 0x010B, QUALITY_ANY, FRAME_ANY)) {
					say("\"Why, that is pumice, ",
						var0000,
						". 'Tis very unusual to see any here in Fawn... There is no volcanic activity anywhere near.\"");
					say("\"The only place that such a rock could have come from, that I know of, is somewhere beyond Moonshade.\"");
				} else {
					say("\"A grayish rock? Light in weight for its mass?\"");
					say("\"This sounds like pumice, to me. The only place that such a rock could have come from, that I know of, is somewhere beyond Moonshade... Where there is volcanic activity.\"");
				}
				fallthrough;

			case "blue egg" (remove):
				if (Func097D(PARTY, 0x0001, 0x0241, QUALITY_ANY, 0x0003)) {
					say("\"What a putrid smell!\"");
					say("\"Remove that immediately!\"");
					UI_remove_npc_face0();
					Func097F(DELPHYNIA, "@Take it away!@", 0x0000);
					abort;
				}
				say("\"A blue egg? I have never heard of a blue egg.\"");
				say("\"Perhaps thou couldst try asking someone in Moonshade. I am told that the Mages have a great library on their island, full of unusual things.\"");
				fallthrough;

			case "glowing rock" (remove):
				if (Func097D(PARTY, 0x0001, 0x034A, QUALITY_ANY, 0x000F)) {
					say("\"That is no reagent that I know of, ",
						var0000,
						". But it is fascinating...\"");
					say("\"I am sure that it is magical, but I do not know how. And for some reason I feel I should ask thee to take it away from here and forget that I saw it...\"");
					say("\"I am sorry I cannot be of more help.\"");
				} else {
					say("\"It is no reagent that I know of, ",
						var0000,
						". But it sounds fascinating...\"");
					say("\"I am sure that it is magical, if it glows and is cool enough to hold. But I have never heard of it before.\"");
					say("\"I am sorry I cannot be of more help.\"");
				}
				fallthrough;

			case "letter":
				if (Func097D(PARTY, 0x0001, 0x031D, 0x0004, FRAME_ANY)) {
					say("\"A letter from Ruggs? Oh, I must see it!\"");
					var0001 = UI_remove_party_items(0x0001, 0x031D, 0x0004, 0x0005, false);
					gflags[DELIVERED_RUGGS_LETTER] = true;
					say("\"I am adrift! I am torn to my very soul and I know not what to do. Thou must help me.\"");
					say("\"Ruggs hath told me often of his love for me. In truth 'twould be a lie if I were to say that I did not care for him. But he is so... deformed... so ugly, that I know not what to think.\"");
					say("\"All I have been taught tells me that Ruggs' features are the outward sign of the evil within. Yet I can find no trace of it... If that is wrong, what else might also be false?\" *\"I am shaken to my very core, but I cannot deny mine heart.\"");
					say("\"Wilt thou carry a letter back to Ruggs for me?\"");
					if (Func0955()) {
						say("\"There is no one else that I can trust such a secret to.\" *\"If there be a way, some day I will go to him.\"");
						var0001 = Func099B(AVATAR, 0x0001, 0x031D, 0x001B, 0x0000, false, true);
						gflags[CARRY_DELPHYNIAS_LETTER] = true;
					} else {
						say("\"Perhaps it is best this way... I know not how to look upon his face and not wonder if there is some evil lurking there.\"");
					}
				} else {
					say("\"Thou dost lie! I see no letter!\"");
					Func097F(DELPHYNIA, "@Liar!@", 0x0000);
					DELPHYNIA->set_schedule_type(SHY);
					abort;
				}
				remove("letter");
				fallthrough;

			case "Varo Leaves" (remove):
				if (gflags[KNOWS_ABOUT_VARO_LEAVES] == true) {
					say("\"Harnna would not have sent thee if thou didst not have great need of the Varo leaves. I would help thee if I could. But my skills as a healer are limited. Take these leaves back to Harnna quickly, before thou dost worsen.\"");
				} else {
					say("\"Thou canst only be permanently cured of thine infection by a special ointment made from Varo leaves. I do not know how to make the ointment myself, however. Take these leaves back to Harnna in Monitor quickly, before thou dost worsen. She is a true healer and will be able to help thee.\"");
				}
				gflags[DELPHYNIA_SPOKE_VARO_LEAVES] = true;
				var0001 = Func099B(AVATAR, 0x0005, 0x01D3, QUALITY_ANY, 0x0003, false, true);
				fallthrough;

			case "bye":
				Func08AB();
				UI_remove_npc_face0();
				Func097F(AVATAR, "@Many thanks.@", 0x0000);
				Func097F(DELPHYNIA, "@Walk in Beauty.@", 0x0005);
				Func08AA();
				break;
		}
	}
}

extern var Func0954 0x954 ();
extern var Func0953 0x953 ();
extern void Func07D1 object#(0x7D1) ();
extern void Func097F 0x97F (var var0000, var var0001, var var0002);
extern void Func08AB 0x8AB ();
extern void Func08AA 0x8AA ();

void Func0431 object#(0x431) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;

	var0000 = Func0954();
	var0001 = Func0953();
	var0002 = UI_is_pc_female();
	if (event == DEATH) {
		var0003 = script item {
			nohalt;
			call Func0112;
		};
	}
	if (event == DOUBLECLICK) {
		AVATAR->item_say("@A moment, sir.@");
		GARTH->Func07D1();
		Func097F(GARTH, "@At thy service.@", 0x0005);
		GARTH->set_schedule_type(TALK);
	}
	if (event == STARTED_TALKING) {
		GARTH->run_schedule();
		GARTH->clear_item_say();
		GARTH->show_npc_face0(0x0000);
		var0004 = GARTH->get_item_flag(MET);
		if (gflags[FAWN_TRIAL_RECESS] || (gflags[FAWN_TRIAL_DONE_FIRST_DAY] && (!gflags[FAWN_TRIAL_DONE]))) {
			say("\"Why, thou art the confidant of the accused blasphemer! I cannot be seen speaking with thee...\"");
			UI_remove_npc_face0();
			Func097F(GARTH, "@Off with thee!@", 0x0000);
			GARTH->set_schedule_type(WANDER);
			abort;
		}
		if (var0004 == false) {
			if (gflags[HAVE_WOLF_TATTOO] == true) {
				if (var0002 == true) {
					say("\"Ah, a sweet savior! No fairer face hath a warrior worn.\"");
					say("\"Welcome to Fawn, dear ",
						var0000,
						". I am Great Captain Garth, but thou canst call me Garth.\"");
				} else {
					say("\"Welcome to Fawn, noble Pikeman. We are honored by thy presence.\" *\"I am Great Captain Garth. Call me Garth.\"");
				}
			} else if (var0002 == true) {
				say("\"Welcome to Fawn, most fair ",
					var0000,
					"! Now that thou art here, we can truly say that this is the city of Beauty.\"");
				say("\"I am Great Captain Garth, but thou canst call me Garth.\"");
			} else {
				say("\"Thou art a welcome sight, noble ",
					var0000,
					".\" ~\"We are sorely in need of more able-bodied fighters in Fawn's darkest hour.\" *\"I am Great Captain Garth. Call me Garth.\"");
			}
			GARTH->set_item_flag(MET);
		} else if (var0002 == true) {
			say("\"Now may I rest my weary eyes on thy lovely face. Thou art always a welcome sight, ",
				var0001,
				".\"");
		} else {
			say("\"'Tis good to see thee, ",
				var0001,
				". I trust that thou art feeling well.\"");
		}
		converse (["storms", "goblins", "bye"]) {
			case "storms":
				say("\"Without question, these storms are unnatural. If they do not cease soon, Fawn will perish!\" ~\"Already our livelihood hath been taken from us.\" ~\"And women weep at the loss of those who once sailed in our fleet. We have no idea what became of them.\"");
				remove("storms");
				add(["livelihood", "fleet"]);
				fallthrough;

			case "livelihood" (remove):
				say("\"As thou canst see, Fawn is built upon the water. We are... or were... fishermen by trade.\"");
				say("\"That is how we fed our people, and how we traded with the other towns.\"");
				if (var0002 == true) {
					say("\"But we are a hardy lot.\" ~\"We will weather these foul storms and rebuild what hath been destroyed.\"");
					if (gflags[FAWN_TRIAL_DONE_FIRST_DAY] && (gflags[FAWN_TRIAL_DONE] && (!gflags[ORACLE_SET_TO_INNOCENT]))) {
						say("\"Perhaps I shall speak with Lady Yelinda again. Surely, she doth need mine advice if this town is to be saved...\"");
					} else {
						say("\"Lady Yelinda hath charged me with the task of finding a way to sustain the people until the storms pass.\"");
						add("Lady Yelinda");
					}
				} else {
					say("\"We have lost most of our men to the sea and storms.\" ~\"We do not know if they were drowned or transformed.\"");
					if (gflags[FAWN_TRIAL_DONE_FIRST_DAY] && (gflags[FAWN_TRIAL_DONE] && (!gflags[ORACLE_SET_TO_INNOCENT]))) {
						say("\"May Beauty lay their souls to rest...\"");
					} else {
						say("\"Now Lady Yelinda hath charged me with the task of finding a way to sustain our people until we can rebuild our ships.\" ~\"To be truthful, I am not hopeful...\"");
						add("Lady Yelinda");
					}
				}
				fallthrough;

			case "Lady Yelinda":
				if (var0002 == true) {
					say("\"Lady Yelinda rules Fawn, assisted by Joth, Voldin and myself.\" ~\"Many say she is the most beautiful woman in the city.\" ~\"Others, like Zulith, say Kylista is more beautiful.\"");
					say("\"Now that I have seen thee, I think they are all wrong.\" ~\"Thou art the most wondrous beauty I have seen.\"");
				} else {
					say("\"Lady Yelinda is a ruler of Fawn, at least in name.\" ~\"Zulith fetches and carries for her, and makes her feel important.\" *\"But the truth of the matter is that Fawn's real power lies in the hands of Joth, Voldin and Kylista.\"");
				}
				remove("Lady Yelinda");
				add(["Zulith", "Joth", "Voldin", "Kylista"]);
				fallthrough;

			case "Zulith":
				say("\"He is the messenger between the Great Captains and Lady Yelinda.\" ~\"He takes orders well enough, if thou dost stroke his ego enough.\" *\"But, if thou shouldst belittle him, beware!\" ~\"He hath the ears of both Yelinda and Kylista.\"");
				remove("Zulith");
				fallthrough;

			case "Joth":
				say("\"Joth was a fine seaman, before his injury. But he hath little use for the politics of those on the land.\" *\"He doth do his best to represent the interests of the fleet. But it is plain that his heart is still at sea.\"");
				if (var0002 == false) {
					say("\"Without his support on the Council, I am locked against Voldin and must defer to his seniority.\" ~\"If Joth would waken to life as it is, Fawn would be in far better shape.\"");
				}
				remove("Joth");
				add("injury");
				fallthrough;

			case "injury":
				say("\"Before one of those freak storms hit, a fine lighthouse stood near the town to guide the fleet home at night.\" ~\"During one very bad storm, its light went out and the sailors could not see to make their way back to the docks.\"");
				say("\"Joth ordered his ship to stand near the shoals and set fire to her sails so that the remainder of the fleet could find their way in.\" ~\"All of the ships docked safely that night, except for his.\"");
				say("\"A freak change of wind cast his ship aground and he was trapped in the rigging.\"");
				say("\"The healers say his back will never be the same again. He can never go back to sea.\"");
				remove("injury");
				add("lighthouse");
				fallthrough;

			case "lighthouse":
				say("\"The heart seemed to go out of the sailors when the storms exchanged our lighthouse for a haunted building.\" ~\"They believed that it was a bad omen...\" *\"They were right.\"");
				remove("lighthouse");
				add("haunted building");
				fallthrough;

			case "haunted building":
				say("\"Joth led a party of sailors and guardsmen to check what happened to the lighthouse.\" ~\"We suspected goblin mayhem, to lure us out of the city.\"");
				say("\"The party returned pale and shaken. All they could tell us was that the lighthouse was gone.\" ~\"In its place was a strange haunted building!\"");
				say("\"I know no more than that. I must concern myself with trying to provide Fawn with food.\"");
				remove("haunted building");
				fallthrough;

			case "Voldin":
				say("\"Voldin is the senior member of the Great Captains.\" ~\"He is a very ambitious man with strong opinions and no great love for our fishing captains.\"");
				remove("Voldin");
				add(["opinions", "fishing captains"]);
				fallthrough;

			case "opinions":
				if (var0002 == true) {
					say("\"I shall merely say that Voldin's views are very old fashioned, ",
						var0000,
						".\" ~\"He firmly believes in the sanctity of Beauty and the protection of all things beautiful.\"");
				} else {
					say("\"Voldin doth have a very limited opinion of a woman's intelligence.\" ~\"He doth not believe that they are capable of making decisions more challenging than what to wear in the morning.\" *\"I fear that Lady Yelinda is too easily led by Voldin's wishes.\"");
				}
				remove("opinions");
				fallthrough;

			case "fishing captains":
				say("\"Voldin hath long been a bully -- from his days as a guardsman, to his days as a sea captain.\" ~\"Few sailors were willing to serve under him for long.\"");
				say("\"When the Council seat opened, they begged Lady Yelinda to appoint Voldin to the post. They told her it was to honor his years of service.\" ~\"But Voldin knows, as doth every other sailor, that it was to bring him in off the sea.\" *\"This was a vaster mistake than anyone could foretell.\"");
				remove("fishing captains");
				fallthrough;

			case "Kylista":
				if (var0002 == true) {
					say("\"Kylista is the Priestess of Beauty.\" ~\"She presides over the Oracle and insures that Fawn adheres to the tenets of Beauty.\" *\"It is her duty to advise Lady Yelinda on spiritual matters.\"");
				} else {
					say("\"Kylista is the Priestess of Beauty.\" ~\"She is a very ambitious woman who is not above using her feminine wiles or the words of the Oracle to obtain what she wants.\"");
					say("\"Kylista holds Zulith in her thrall, I know.\" ~\"I think she seeks to use Voldin to gain power of her own. But Voldin thinks to use her as his own pawn.\" ~\"'Tis a monumental game, and I fear Fawn is the prize.\"");
				}
				remove("Kylista");
				add("Oracle");
				fallthrough;

			case "Oracle":
				say("\"The Oracle is a strange magical device built long ago as an instrument of truth.\" *\"But of late its revelations have become echoes of Kylista and Voldin.\" ~\"I do not know how they accomplish this, but I am certain that their plots are anything but divine.\"");
				remove("Oracle");
				add("revelations");
				fallthrough;

			case "revelations":
				say("\"When I was a lad, the Oracle was called on to settle disputes and reveal the truth.\" ~\"Now it pronounces marriages based more on wealth and power than on love.\" ~\"The Oracle hath become a political tool, and I have no idea how.\"");
				remove("revelations");
				fallthrough;

			case "fleet":
				say("\"After the lighthouse was lost, the fleet sailed only in the daylight hours. There was no other choice.\" ~\"But the storms seemed drawn to the water. They took the ships as well, one by one.\"");
				remove("fleet");
				add("ships");
				fallthrough;

			case "ships":
				say("\"A few we know were lost at sea... transformed into blazes knows what.\" ~\"The others could have been transported to the frozen mountains, for all we know. None have been seen again.\"");
				remove("ships");
				fallthrough;

			case "goblins":
				say("\"We have battled goblins since the time of Fawn's founding.\" ~\"We drove the savage creatures from this area when we settled here.\" *\"Because of their innate cowardice, we have always been able to drive them away with ease. Until Pomdirgun gathered them under his leadership.\"");
				remove("goblins");
				add("Pomdirgun");
				fallthrough;

			case "Pomdirgun":
				say("\"Pomdirgun is far more cunning than normal goblins. He hath attacked Fawn without respite for nearly a year now.\"");
				say("\"His attacks have grown more daring of late.\"");
				remove("Pomdirgun");
				add("attacks");
				fallthrough;

			case "attacks":
				say("\"Without Pomdirgun leading them, the goblins would never have had the nerve to take the Pikeman tower.\"");
				say("\"And he was responsible for the death of Seth, Fawn's healer.\"");
				say("\"Delphynia is all we have now.\"");
				remove("attacks");
				add("Delphynia");
				fallthrough;

			case "Delphynia" (remove):
				say("\"Delphynia is a horticulturist.\" ~\"Her knowledge of herbs made her the only logical choice as healer when Seth was killed.\"");
				if (gflags[FAWN_TRIAL_DONE_FIRST_DAY] && (gflags[FAWN_TRIAL_DONE] && (!gflags[ORACLE_SET_TO_INNOCENT]))) {
					say("\"She doth seem happier of late, since the Lady did allow the Fellowship scum to return to the city.\"");
					say("\"How can she abide that fellow Ruggs? He is so confounded ugly...\"");
				} else {
					say("\"Delphynia hath been a sad lady since Kylista arranged to exile the Fellowship sailors from the city.\" ~\"She cannot decide whether she is glad that Ruggs is gone, or not. Poor lady.\"");
					add(["Fellowship sailors", "Ruggs"]);
				}
				fallthrough;

			case "Fellowship sailors":
				say("\"They sailed in quite a while ago. We had never seen the like of their ship before.\" ~\"Then one of them proved to be a charismatic leader who spoke eloquently of some new belief called The Fellowship.\" ~\"It appealed to many people, especially the women.\"");
				say("\"Kylista was mightily put out, I will tell thee.\" ~\"So she blamed the storms on the strangers and had them banned from the city. She still has everyone atoning for their transgressions against Beauty.\" ~\"She says the storms will not stop until the heavens are appeased. I do not think she knows when -- or if -- they will stop.\"");
				remove("Fellowship sailors");
				fallthrough;

			case "Ruggs":
				say("\"Ruggs is one of the Fellowship sailors.\" ~\"He is a good man who thinks that Delphynia put the stars in the sky.\" ~\"The only problem is that he is hideously ugly.\" *\"Ruggs could curdle milk with that face! But he is a gentle man.\"");
				remove("Ruggs");
				fallthrough;

			case "bye":
				Func08AB();
				UI_remove_npc_face0();
				Func097F(AVATAR, "@Thou hast been most kind.@", 0x0000);
				Func097F(JOTH, "@A pleasure.@", 0x0005);
				Func08AA();
				break;
		}
	}
}

extern var Func0954 0x954 ();
extern var Func0953 0x953 ();
extern void Func07D1 object#(0x7D1) ();
extern void Func097F 0x97F (var var0000, var var0001, var var0002);
extern void Func08AB 0x8AB ();
extern void Func08AA 0x8AA ();

void Func0432 object#(0x432) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;

	var0000 = Func0954();
	var0001 = Func0953();
	var0002 = UI_is_pc_female();
	if (event == DEATH) {
		var0003 = script item {
			nohalt;
			call Func0112;
		};
	}
	if (event == DOUBLECLICK) {
		AVATAR->item_say("@Greetings, good sir.@");
		JOTH->Func07D1();
		Func097F(JOTH, (("@Greetings, " + var0000) + ".@"), 0x0005);
		JOTH->set_schedule_type(TALK);
	}
	if (event == STARTED_TALKING) {
		JOTH->run_schedule();
		JOTH->clear_item_say();
		JOTH->show_npc_face0(0x0000);
		var0004 = JOTH->get_item_flag(MET);
		if (var0004 == false) {
			if (gflags[HAVE_WOLF_TATTOO] == true) {
				say("\"Welcome ta Fawn. I am Great Captain Joth. Thou canst call me Joth.\" *\"'Tis always a pleasure ta meet a Pikeman.\"");
			} else {
				say("\"I cannot remember seeing thee here... I am Great Captain Joth. Thou canst call me Joth.\" *\"Welcome ta Fawn, ",
					var0000,
					".\"");
			}
			JOTH->set_item_flag(MET);
		} else {
			say("\"Good ta see thee again.\"");
		}
		converse (["storms", "goblins", "bye"]) {
			case "storms":
				say("\"'Twas a storm what ran me ship aground and took me from the sea! 'Tis fitting that these daemon storms will be the end of us all.\" *\"They have taken all me old friends -- plucked 'em right off the water or drowned 'em deep. Never thought I'd live ta see the day when Fawn's fleet was brought low.\"");
				remove("storms");
				add(["aground", "friends", "fleet"]);
				fallthrough;

			case "aground" (remove):
				say("\"'Twere a handful o' years ago, and me body remembers it like 'twere yesterday. I was fouled in a mass of rigging when me ship was thrown inta the shoals.\"");
				say("\"Seth, the healer, patched me up right enough, but that were the end of me sea-goin' days.\"");
				if (gflags[FAWN_TRIAL_DONE_FIRST_DAY] && (gflags[FAWN_TRIAL_DONE] && (!gflags[ORACLE_SET_TO_INNOCENT]))) {
					say("\"Life's not been the same for me since. I do miss the sea!\"");
				} else {
					say("\"Never dreamed a crusty old salt like meself would end my days on the Great Captain's Council.\"");
					add(["Great Captain's Council"]);
				}
				add(["Seth"]);
				fallthrough;

			case "Seth":
				say("\"Seth's gone too. Only the goblins got 'im. Put 'im in their big ol' stewpots, they did.\" *\"What's the world comin' ta, I ask thee? If it isn't vile monsters, 'tis Nature herself what has turned against us.\"");
				remove("Seth");
				add("Nature herself");
				fallthrough;

			case "Nature herself":
				say("\"'Tis plain that thou art not a seaman... The rain's the tears o' Nature. An' the wind, that be the breath o' Nature. Whene'er there be a bad storm, 'tis Nature's anger.\" *\"I'll wager that she be fearsome upset about now.\"");
				remove("Nature herself");
				fallthrough;

			case "Great Captain's Council":
				say("\"Aye. 'Tis the Great Captains what advise Lady Yelinda in the workings of trade and the fleet. Things what some feel that women have no interest in.\" *\"The Great Captains be meself, Garth and Voldin.\"");
				remove("Great Captain's Council");
				add(["Lady Yelinda", "Garth", "Voldin"]);
				fallthrough;

			case "Lady Yelinda":
				say("\"She be the ruler of Fawn. 'Tis Lady Yelinda what doth do the meetin' an' greetin' of all what wish ta trade with Fawn. An' Lady Yelinda be the one what makes the official decrees an' laws an' such. After she counsels with us, of course. Ha.\"");
				remove("Lady Yelinda");
				fallthrough;

			case "Garth":
				say("\"Garth be no more than a green lad with a passion for the ladies. Never been ta sea that I know of. Some Great Captain that is.\" *\"But 'is family's had money an' lots o' trade smarts. Could do worse for a council member, I reckon. Could put poor ol' drunken Olon in the seat. Ha.\"");
				remove("Garth");
				add("Olon");
				fallthrough;

			case "Olon":
				say("\"Olon was one of the best fishermen we had, 'til the day he watched his ship go down.\" *\"'Twere durin' one of these weird storms, an' Olon had missed castoff. He was fixin' ta row out ta the ship when it were hit by that freak lightning. All of a sudden, it weren't no ship. It were a grain wagon. All hands drowned, and Olon thinks he's a doomed man.\"");
				say("\"If thou wert ta ask me, I'd tell thee that we all be doomed, so why not bury our troubles in the bottom of an ale glass? But no one hath asked ol' Joth nothin', so I go about me business.\"");
				remove("Olon");
				fallthrough;

			case "Voldin":
				say("\"Now Voldin were a captain, all right. An' a guardsman ta boot. He likes ta run things... be in charge.\" *\"Suppose 'twere only natural that he end on the Council. Now he doth have Garth and me ta bully, and Zulith and Kylista at his beck an' call.\"");
				remove("Voldin");
				add(["Zulith", "Kylista"]);
				fallthrough;

			case "Zulith":
				say("\"Look for a bright green flare... that'd be Zulith in his flashy Chancellor's robes.\" *\"Puffs like he's important, runnin' messages from the palace ta the Great Captains. But ever'one laughs real quiet behind their sleeves. Zulith is a vengeful little man, and thou had best be wary around him.\"");
				remove("Zulith");
				fallthrough;

			case "Kylista":
				if (var0002 == true) {
					say("\"Now thou art talkin' o' the other end o' Zulith's tether. Kylista is the Priestess of Beauty, but -- between thee an' me -- I think she would rather be called Lady Kylista, if it pleases thee.\" *\"She doth perform a pretty show at the Oracle, no doubt, callin' for those revelations.\"");
				} else {
					say("\"A wondrous fling between the covers, she is! Kylista certainly knows the secrets of usin' Beauty ta obtain what she wants. If not before the Oracle callin' revelations, then in a man's bedchamber.\"");
					say("\"Kylista is the Priestess of Beauty, but -- between thee an' me -- I think she would rather be called Lady Kylista, if it pleases thee. She hath a firm hold on Zulith's tether, 'tis certain.\"");
				}
				remove("Kylista");
				add(["Oracle", "revelations"]);
				fallthrough;

			case "Oracle":
				say("\"'Tis a wonder ta behold, make no mistake. A true magical type of thing. Used ta draw quite a crowd, before the storms went so bad.\" *\"Pretty ta look at, for sure.\"");
				remove("Oracle");
				fallthrough;

			case "revelations":
				say("\"Straight from the heavens, ta hear Kylista speak of it. Never found much use in 'em meself. A fisherman don't see much beauty out haulin' in nets all day long.\"");
				remove("revelations");
				fallthrough;

			case "friends":
				say("\"Good seamen all. Fishermen an' captains alike. These cursed storms have taken every good man from Fawn's shores an' left me alone with these land crawlers.\" *\"'Tis enough ta make a man think about walkin' inta the sea at high tide...\"");
				remove("friends");
				fallthrough;

			case "fleet" (remove):
				say("\"Fawn used ta be able ta bring in enough fish for us an' the other cities besides. Now there's nothing but a few old rowboats left.");
				if (gflags[FAWN_TRIAL_DONE_FIRST_DAY] && (gflags[FAWN_TRIAL_DONE] && (!gflags[ORACLE_SET_TO_INNOCENT]))) {
					say("\"An' there be nobody brave enough to even sail the rowboats! Not in these storms...\"");
				} else {
					say("\"An' what's worse, Lady Yelinda tells me that I'm ta be in charge of the restorations!\"");
					add("restorations");
				}
				fallthrough;

			case "restorations":
				say("\"Restorations she calls it! Like there was something ta restore! But drawn the reports and plans, I have. As ordered.\"");
				say("\"But tell me, if thou canst, how Fawn is ta build ships when most of the shipwrights are drowned? Or tell me how we're ta acquire the wood ta build with if these storms have us runnin' like rabbits ta a hole?\"");
				say("\"An' Voldin sits holdin' the money tellin' me 'tis unsafe ta begin buildin'. As if I had ballast for brains! But he doth not have ta report to Lady Yelinda. I do!\"");
				remove("restorations");
				fallthrough;

			case "goblins":
				say("\"The goblins have always been like fleas infestin' this part o' the land. We'd stomp on 'em good an' hard, an' they'd go crawl back ta whate'er hole they crawled out of.\" *\"But since this Pomdirgun brute came along, there's been no drivin' 'em back.\"");
				remove("goblins");
				add("Pomdirgun");
				fallthrough;

			case "Pomdirgun":
				say("\"Pomdirgun's larger than most goblins. Certainly meaner or he would never have gotten the brutes all under his command. I'm almost willin' ta believe that he's half daemon, like some folk say.\"");
				remove("Pomdirgun");
				add("daemon");
				fallthrough;

			case "daemon":
				say("\"There are daemon ruins all around this land. Thou canst not miss them -- they are all covered with evil lookin' serpents.\" *\"Some say that the daemons are still here. They say that civilized man drove them underground when we settled here.\" ~\"Haven't ever seen one. Wouldn't want to neither.\"");
				remove("daemon");
				fallthrough;

			case "bye":
				Func08AB();
				UI_remove_npc_face0();
				Func097F(AVATAR, "@Goodbye!@", 0x0000);
				Func097F(JOTH, "@Keep a weather eye!@", 0x0002);
				Func08AA();
				break;
		}
	}
}

extern var Func0954 0x954 ();
extern var Func0953 0x953 ();
extern void Func097F 0x97F (var var0000, var var0001, var var0002);
extern void Func07D1 object#(0x7D1) ();
extern void Func07D2 object#(0x7D2) ();
extern var Func0955 0x955 ();
extern void Func08AB 0x8AB ();
extern void Func08AA 0x8AA ();

void Func0433 object#(0x433) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;

	var0000 = Func0954();
	var0001 = UI_is_pc_female();
	var0002 = Func0953();
	if (event == DEATH) {
		var0003 = script item {
			nohalt;
			call Func0112;
		};
	}
	if ((event == PROXIMITY) && (VOLDIN->get_schedule_type() == TEND_SHOP)) {
		var0004 = ["@Garth will save me...@", (("@Damn " + var0002) + "!@"), "@I need more food!@", "@Jailer!@", "@Be patient.@", "@Curse that weaver!@"];
		if (KYLISTA->npc_nearby()) {
			var0004 &= "@Be silent, Priestess!@" & ("@Pleasure me, Kylista!@" & "@Our time shall come...@");
		}
		Func097F(VOLDIN, var0004[UI_get_random(UI_get_array_size(var0004))], 0x0000);
	}
	if ((event == DOUBLECLICK) && (VOLDIN->get_schedule_type() != WAIT)) {
		VOLDIN->Func07D1();
		if ((gflags[FAWN_TRIAL_DONE_FIRST_DAY] && gflags[FAWN_TRIAL_DONE]) && (!gflags[ORACLE_SET_TO_INNOCENT])) {
			AVATAR->item_say("@Hail, criminal!@");
			VOLDIN->set_schedule_type(WAIT);
			Func097F(VOLDIN, "@Not thee!@", 0x0002);
			VOLDIN->Func07D2();
			var0003 = script VOLDIN after 7 ticks {
				nohalt;
				call Func0433;
			};
		} else {
			AVATAR->item_say("@A moment of thy time, sir.@");
			Func097F(VOLDIN, (("@At thy service, " + var0000) + ".@"), 0x0005);
			VOLDIN->set_schedule_type(TALK);
		}
	}
	do {
		if (event == SCRIPTED) {
			VOLDIN->run_schedule();
			VOLDIN->clear_item_say();
			VOLDIN->show_npc_face0(0x0000);
			say("\"So thou hast come to pity me, eh, ",
				var0002,
				"? Well, I'm not done yet!\"");
			add(["false Oracle", "Kylista", "not done yet"]);
		} else if (!(event == STARTED_TALKING)) {
			break;
		} else {
			VOLDIN->run_schedule();
			VOLDIN->clear_item_say();
			VOLDIN->show_npc_face0(0x0000);
			var0005 = VOLDIN->get_item_flag(MET);
			if (gflags[FAWN_TRIAL_RECESS] || (gflags[FAWN_TRIAL_DONE_FIRST_DAY] && (!gflags[FAWN_TRIAL_DONE]))) {
				say("\"Thou dost dare to confront me? Thou, that didst bring the blasphemer to Lady Yelinda!\"");
				UI_remove_npc_face0();
				Func097F(VOLDIN, "@Spare me thy presence!@", 0x0000);
				VOLDIN->set_schedule_type(SHY);
				abort;
			}
			if (var0005 == false) {
				if (gflags[HAVE_WOLF_TATTOO] == true) {
					if (var0001 == true) {
						say("\"Another of Monitor's female Pikemen, I see. Odd that they encourage women to disfigure themselves.\" *\"I am Great Captain Voldin.\"");
					} else {
						say("\"Welcome, good Pikeman. Thy presence honors us.\" *\"I am Great Captain Voldin.\"");
					}
				} else if (var0001 == true) {
					say("\"Thy Beauty enriches us. Welcome to Fawn, ",
						var0000,
						".\" *\"I am Great Captain Voldin.\"");
				} else {
					say("\"It is a pleasure to meet thee. I am Great Captain Voldin.\" *\"Fawn is in sore need of more men to help hold the Goblins at bay.\"");
				}
				VOLDIN->set_item_flag(MET);
			} else {
				say("\"How might I be of service this time, ",
					var0002,
					"?\"");
			}
			add(["storms", "Goblins"]);
		}
		converse ("bye") {
			case "false Oracle" (remove):
				say("\"The Oracle hath always been a fraud! Dost thou not comprehend?\"");
				say("\"Even in our ancient homeland, the Statue of Beauty was controlled by the Great Captains. It said what we told it to.\"");
				add(["fraud", "Why?"]);
				fallthrough;

			case "fraud" (remove):
				say("\"For centuries, the women of our culture have believed themselves to be divine. Yet the men governed secretly, through the revelations issued by the Oracle.\"");
				say("\"Thou hast destroyed a great tradition, foreigner! It was glorious, while it lasted...\"");
				fallthrough;

			case "Why?" (remove):
				if (UI_is_pc_female()) {
					say("\"Thou wouldst not understand...\"");
				} else {
					say("\"Learn from our experience, ",
						var0002,
						"! Women are easily controlled by their vanity. Tell them that they are superior -- and then manipulate them. That's the key!\"");
					say("\"The females of our race are exceedingly willful, yet they lack common sense. Without men to dominate them, they would ruin everything.\"");
				}
				fallthrough;

			case "Kylista" (remove):
				say("\"She was merely our pawn -- a pretty thing, clever in a limited way, but always our tool.\"");
				if (KYLISTA->npc_nearby()) {
					KYLISTA->show_npc_face1(0x0000);
					say("\"Close thy trap, Voldin, or I'll scratch thine eyes out!\"");
					UI_remove_npc_face1();
					0x0000->set_conversation_slot();
					say("\"Such a clever threat, girl! Dost thou not realize that thou dost live at my pleasure?\"");
					if (!UI_is_pc_female()) {
						say("\"Fear not -- so long as the nights remain cold, I shall have a use for thee...\"");
					}
				}
				fallthrough;

			case "not done yet" (remove):
				say("\"Surely, thou dost not think that Leon the Preacher and Alyssand the Weaver have won? They don't have the strength to govern.\"");
				say("\"Give it time. Perhaps three moons. And then the people will clamor for the old ways, and remember Voldin in his jail cell.\"");
				say("\"Then I shall rule as I always deserved, as King of Fawn!\"");
				fallthrough;

			case "storms":
				say("\"The storms are a regrettable consequence of incurring the heavens' displeasure. I'm certain that our punishment will end soon if we adhere to Beauty's truth.\"");
				remove("storms");
				add(["the heavens' displeasure", "Beauty's truth"]);
				fallthrough;

			case "the heavens' displeasure":
				say("\"Out of misguided kindness, we allowed infidels to enter our city. They spread their contagion, corrupting many of our people to their misguided ways. This displeased the heavens. The storms were clearly sent to punish us.\"");
				remove("the heavens' displeasure");
				add(["infidels", "misguided ways"]);
				fallthrough;

			case "infidels":
				say("\"The sailors camped outside of the city are infidels. They do not follow the path of Beauty.\" *\"They came to our city claiming to be from Britannia, which -- as any sailor knows -- is pure fiction. The Priestess was right to remove their ugly dishonesty from our midst.\"");
				remove("infidels");
				add("Priestess");
				fallthrough;

			case "Priestess":
				say("\"Kylista is the Priestess of Beauty. She receives the wisdom of the Oracle and interprets it for those of us who cannot understand the words of the heavens.\" *\"Kylista tried to dissuade us from allowing that false prophet into our city. Now we are paying for our folly.\"");
				remove("Priestess");
				add("Oracle");
				fallthrough;

			case "Oracle":
				say("\"The Oracle is an instrument of the heavens. Its words are divine revelations to those who follow Beauty's truth.\"");
				remove("Oracle");
				add("revelations");
				fallthrough;

			case "revelations":
				say("\"Thou hast not heard a revelation from the Oracle yet?\"");
				var0006 = Func0955();
				if (var0006) {
					say("\"Then thou knowest that these are words meant to enlighten and guide our lives to Beauty.\"");
				} else {
					say("\"Thou shouldst go to the Temple. Judging by the time, there will be another revelation soon.\" *\"I'm certain that thou wilt find it an enlightening experience.\"");
				}
				remove("revelations");
				fallthrough;

			case "misguided ways":
				say("\"There is one among them, Leon, who preaches of something they call The Fellowship. While I'll grant that he is a powerful speaker, he is clearly a misguided fool.\" *\"Who in their right mind would believe that the world could be changed by such simplistic views?\"");
				remove("misguided ways");
				add("simplistic views");
				fallthrough;

			case "simplistic views":
				if (var0001 == true) {
					say("\"Forgive me, ",
						var0000,
						". I did not intend to enter a philosophical discussion. Thy Beauty distracted me, I must confess.\"");
				} else {
					say("\"What man could honestly expect that the neighbor who covets thy land would not do everything possible to acquire it?\" *\"Wouldst thou, like a trusting woman, trust such a neighbor to act in Unity with thee, and work to become Worthy of owning thy land?\"");
					var0007 = Func0955();
					if (var0007) {
						say("\"Then thou art destined for a dismal life, my friend. For the world is what thou makest of it. Thou canst acquire only what thou takest.\"");
					} else {
						say("\"Of course not! Thou art a man of the world. Thou knowest that thou canst acquire only what thou takest.\"");
					}
				}
				remove("simplistic views");
				fallthrough;

			case "Beauty's truth":
				say("\"Everyone is drawn to that which is beautiful. Therefore, if we strive to honor and protect all things beautiful, our lives will be fulfilled.\" *\"All good and honest people are Beautiful.\"");
				remove("Beauty's truth");
				fallthrough;

			case "Goblins":
				if (gflags[HAVE_WOLF_TATTOO] == true) {
					if (gflags[CLEARED_FAWN_TOWER] == true) {
						if (var0001 == true) {
							say("\"Please convey Fawn's thanks to thy fellow Pikemen who retook the tower from Pomdirgun and the Goblins. 'Twas most nobly done and Monitor doth have Lady Yelinda's gratitude.\"");
						} else {
							say("\"Thou hast Fawn's thanks, noble Pikeman. Lady Yelinda was quite distraught until thou didst retake the tower from Pomdirgun and the Goblins.\"");
						}
					} else if (var0001 == true) {
						say("\"Not to belittle thy prowess, ",
							var0000,
							", but thou shouldst remain here in safety with Lady Yelinda. Leave the retaking of the tower to thy larger male companions.\" *\"The battle will likely be more fierce than thou canst imagine with Pomdirgun goading them on.\"");
					} else {
						say("\"I will feel more secure in the knowledge that thou wilt be among the fighters seeking to reclaim our tower. With Pomdirgun goading them on, the battle will most likely be quite fierce.\" *\"I wish it were not my duty to protect Lady Yelinda. I would join thee in the fray if I could.\"");
					}
				} else if (var0001 == true) {
					say("\"Thou shouldst have remained in the safety of the city, noble ",
						var0000,
						". The Pikemen have been driven from the tower by Pomdirgun and his Goblin hordes.\" *\"I have advised Lady Yelinda to order that the gates remain closed at night until the tower is retaken.\"");
				} else {
					say("\"Thou art just in time for a fine fight, brave ",
						var0000,
						"! Pomdirgun and his Goblin hordes must be driven from the Pikeman tower.\" *\"Lady Yelinda will be most grateful to all who join in the fray.\"");
				}
				remove("Goblins");
				add(["Lady Yelinda", "Pomdirgun"]);
				fallthrough;

			case "Lady Yelinda":
				say("\"Lady Yelinda is the most beautiful woman in the city. She rules Fawn with the aid of the Chancellor and the Great Captain's Council.\"");
				remove("Lady Yelinda");
				add(["Chancellor", "Great Captain's Council"]);
				fallthrough;

			case "Chancellor":
				say("\"The Chancellor is Lady Yelinda's chief assistant. He conveys messages to and from the Council to her Ladyship and makes public proclamations of Lady Yelinda's judgments.\" *\"If thou wishest a matter brought before her Ladyship, thou must first speak with Zulith. Look for a small man wearing bright green robes. That will be the Chancellor.\"");
				remove("Chancellor");
				fallthrough;

			case "Great Captain's Council":
				say("\"The Great Captains take much of the weight of mundane affairs from Lady Yelinda's schedule. Garth, Joth and I oversee trade and the disposition of the fleets.\"");
				remove("Great Captain's Council");
				add(["Garth", "Joth", "fleet"]);
				fallthrough;

			case "Garth":
				say("\"Garth is merely a lad. He could never have gotten a Council seat without his family's money.\" *\"He spends his days chasing skirts. Which is just as well, as it keeps him out from under foot.\"");
				remove("Garth");
				fallthrough;

			case "Joth":
				say("\"Joth is an old fishing captain who had to be forcibly removed from the fleet, I'm afraid. I don't think that he quite realizes that he isn't on the deck of a ship anymore, poor man.\" *\"He thinks we can rebuild the fleet with little or no money. We humor him as best we can.\"");
				remove("Joth");
				fallthrough;

			case "fleet":
				say("\"These severe storms have caused the total loss of all our fishing ships. Fawn once supplied fish to the other cities. But that is a thing of the past, I'm afraid.\" *\"Even if we were able to rebuild the ships, we have almost no able-bodied men to crew them. This may be the death knell of Fawn without the proper guidance.\"");
				remove("fleet");
				fallthrough;

			case "Pomdirgun":
				say("\"I do not know what evil spawned such a fearful creature. Pomdirgun is easily larger than the other Goblins, and twice as fierce. All the other Goblins fear him.\" *\"His first foray against Fawn cost us our healer, Seth. And now he hath led the Goblins to overtake the Pikeman tower. I'd give much to see his head on a pike!\"");
				remove("Pomdirgun");
				add("Seth");
				fallthrough;

			case "Seth":
				say("\"Seth was a stubborn man. But a good healer. He refused to take a guard contingent along with him to hunt herbs. He said that the guards did nothing but trample what he was looking for.\" *\"Unfortunately, such stubbornness cost him his life.\"");
				if (var0001 == true) {
					say("\"The details are best left unmentioned. 'Tis not a tale for a beautiful lady.\" *\"The result is that Delphynia is all Fawn doth have in the way of a healer.\"");
				} else {
					say("\"By the time the guards caught up with the foul creatures, they had eaten all but his head!\" *\"But perhaps the worst part of the tale is that Fawn is left with only Delphynia as a healer!\"");
				}
				remove("Seth");
				add("Delphynia");
				fallthrough;

			case "Delphynia":
				say("\"Delphynia is a nice enough woman. But she is no healer. She's a horticulturist. Not even an herbalist. But she's all we have until these cursed storms lighten.\"");
				say("\"I fear, however, that she hath fallen under the spell of one of those infidels! Ruggs, I think his name is.\"");
				remove("Delphynia");
				add("Ruggs");
				fallthrough;

			case "Ruggs":
				say("\"Ruggs is so ugly that his sins are written plain for all to see. But Delphynia seems to find him compelling. I'm told he speaks sweetly, as doth his companion Leon.\" *\"But I expect all evil things are compelling in some manner. Else how would any good person be tempted by them?\"");
				remove("Ruggs");
				fallthrough;

			case "bye":
				Func08AB();
				UI_remove_npc_face0();
				Func097F(AVATAR, "@Goodbye.@", 0x0000);
				if ((gflags[FAWN_TRIAL_DONE_FIRST_DAY] && gflags[FAWN_TRIAL_DONE]) && (!gflags[ORACLE_SET_TO_INNOCENT])) {
					Func097F(VOLDIN, "@Thou shalt see!@", 0x0002);
				} else {
					Func097F(VOLDIN, "@Walk in Beauty.@", 0x0002);
				}
				Func08AA();
				break;
		}
	} while (false);
}

extern var Func0954 0x954 ();
extern void Func07D1 object#(0x7D1) ();
extern void Func097F 0x97F (var var0000, var var0001, var var0002);
extern var Func0955 0x955 ();
extern var Func0942 0x942 (var var0000);
extern var Func099B 0x99B (var var0000, var var0001, var var0002, var var0003, var var0004, var var0005, var var0006);
extern var Func09AE 0x9AE (var var0000);
extern void Func083D 0x83D ();
extern void Func083E 0x83E ();
extern var Func0992 0x992 (var var0000, var var0001, var var0002, var var0003);
extern var Func0988 0x988 (var var0000, var var0001);
extern var Func097D 0x97D (var var0000, var var0001, var var0002, var var0003, var var0004);
extern void Func08A9 0x8A9 ();
extern void Func08AB 0x8AB ();
extern void Func08AA 0x8AA ();

void Func0434 object#(0x434) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;
	var var0008;
	var var0009;
	var var000A;
	var var000B;
	var var000C;
	var var000D;
	var var000E;
	var var000F;
	var var0010;
	var var0011;

	var0000 = UI_game_hour();
	var0001 = Func0954();
	if (var0000 < 0x000C) {
		var0002 = "morning";
	} else if (var0000 > 0x0011) {
		var0002 = "evening";
	} else {
		var0002 = "afternoon";
	}
	if (event == DEATH) {
		var0000 = script item {
			nohalt;
			call Func0112;
		};
	}
	if (event == DOUBLECLICK) {
		AVATAR->item_say(("@Good " + var0002) + ", barkeep.@");
		JENDON->Func07D1();
		Func097F(JENDON, (((("@Good " + var0002) + ", ") + var0001) + ".@"), 0x0002);
		JENDON->set_schedule_type(TALK);
	}
	if (event == STARTED_TALKING) {
		JENDON->run_schedule();
		JENDON->clear_item_say();
		JENDON->show_npc_face0(0x0000);
		var0003 = 0x0005;
		if (gflags[FAWN_TRIAL_RECESS] || (gflags[FAWN_TRIAL_DONE_FIRST_DAY] && (!gflags[FAWN_TRIAL_DONE]))) {
			say("\"I should have known that thou wert trouble! Askin' all those questions...\"");
			say("\"I shall not speak to thee until the Oracle hath ruled!\"");
			UI_remove_npc_face0();
			Func097F(JENDON, "@Be gone!@", 0x0000);
			abort;
		}
		if (!JENDON->get_item_flag(MET)) {
			if (UI_is_pc_female()) {
				say("\"I am Jendon, ",
					var0001,
					", proprietor of the Broken Oar. Hast thou need of something here?\"");
				if (Func0955() == true) {
					say("\"How may I help thee this ",
						var0002,
						"?\"");
				} else {
					say("\"Then thou shouldst be on thy way. 'Tis not a fit place for such a beautiful lady as thyself.\"");
				}
			} else {
				say("\"The name's Jendon, ",
					var0001,
					", proprietor of the Broken Oar. What can I do for thee this ",
					var0002,
					"?\"");
			}
			JENDON->set_item_flag(MET);
			add("proprietor");
		} else {
			say("\"Returned so soon? How may I help thee now?\"");
			add("duties");
		}
		if (Func0942(OLON)) {
			var0003 = 0x0003;
		}
		if (JENDON->get_schedule_type() == MAJOR_SIT) {
			var0003 = 0x0001;
		}
		add(["information"]);
		if (JENDON->get_schedule_type() == WAITER) {
			add("buy");
		}
		add("bye");
		var0004 = 0x0000;
		converse (0) {
			case "buy":
				say("\"Dost thou desire a stiff drink, a warm meal, or a room where thou canst rest?\"");
				UI_push_answers();
				add(["food", "drink", "room", "nothing"]);
				fallthrough;

			case "proprietor", "duties" (remove):
				say("\"I used ta serve the sailors that spent their days drinkin' sea spray and their nights drinkin' ale. Not a pretty bunch, but they spent enough ta keep a roof over mine head.\"");
				say("\"But since those cursed storms destroyed the fleet, there hath been precious little business.\"");
				say("\"Used ta have a lad that served the drinks for me. His mother cooked and did the washin' up. But Danysia became ill and died -- the healers could do nothing -- and young Rindor went ta sea... never returned.\"");
				add(["storms"]);
				fallthrough;

			case "storms" (remove):
				say("\"Products of evil, I tell ya! We be folks as live off the bounty of the sea. But these storms do not like nothin' on the water!\"");
				say("\"All the fishin' ships have either been destroyed or transformed inta somethin' that was never meant ta touch water. That was what happened ta Rindor -- his ship suddenly became a grain wagon. Wagons don't float too good...\"");
				fallthrough;

			case "room":
				say("\"Used ta rent my sleepin' rooms regularly ta strangers that came through. But we've had only a few visitors since the storms began.\"");
				say("\"The cost for a room is 12 filari per person. Dost thou want one?\"");
				if (Func0955()) {
					var0005 = UI_get_party_list();
					var0006 = 0x0000;
					for (var0009 in var0005 with var0007 to var0008) {
						var0006 += 0x0001;
					}
					var000A = var0006 * 0x000C;
					var000B = PARTY->count_objects(0x03B4, QUALITY_ANY, FRAME_ANY);
					if (var000B >= var000A) {
						say("\"Here is thy key.\"");
						var0000 = Func099B(AVATAR, 0x0001, 0x0281, 0x000B, 0x0004, 0x0000, true);
						var000C = UI_remove_party_items(var000A, 0x0284, QUALITY_ANY, FRAME_ANY, 0x0000);
						say("\"Thy room be upstairs.\"");
					} else {
						say("\"Thou dost not have enough filari! If thou canst not pay, then I do not rent ye a room!\"");
					}
				} else {
					say("\"Some other time, then.\"");
				}
				fallthrough;

			case "information":
				if ((!gflags[ASKED_JENDON_TOO_MUCH]) || (UI_get_timer(0x0002) > 0x0004)) {
					say("\"What be thou interested in?\"");
					UI_push_answers();
					var0004 = 0x0001;
					add(["people", "places", "strange objects", "nothing more"]);
				} else {
					say("\"Return later, ",
						var0001,
						". This be a bad time now.\"");
				}
				fallthrough;

			case "people":
				say("\"Who dost thou wish ta know about -- townsfolk or strangers?\"");
				UI_push_answers();
				var0004 = 0x0002;
				add(["townsfolk", "strangers", "nothing more"]);
				fallthrough;

			case "townsfolk" (remove):
				say("\"Whom dost thou wish ta know about?\"");
				UI_push_answers();
				var0004 = 0x0003;
				add(["the sailors", "the shopkeepers", "the healers", "the Priestess", "town leaders", "nothing more"]);
				fallthrough;

			case "the sailors" (remove):
				say("\"These cursed wizard-storms have destroyed all of our ships. Olon is the only sailor left alive in the city.\"");
				say("\"Used to be a mate on one of the fishin' ships...\"");
				say("\"'til it sank.\"");
				say("\"Could say he's lucky... though he doth not think so. He doth spend most of his time here drinking... I fear that he is a lost soul. He even refuses ta go ta the Temple!\"");
				var0003 = Func09AE(var0003);
				fallthrough;

			case "the shopkeepers" (remove):
				say("\"Aside from me, there be only old Delin the Provisioner, and he be half-crazy.\"");
				say("\"Delin hath not been quite right since his wife died, and the Magister came to take away his infant child.\"");
				say("\"His daughter, Alyssand, looks after him these days. She doth make certain that he doth not wander away.\"");
				add("Magister");
				var0003 = Func09AE(var0003);
				fallthrough;

			case "Magister" (remove):
				say("\"Thou dost not know of the Magister? The Mage who comes in the night and steals our children away?\"");
				say("\"The Mages of Moonshade claim that it would be dangerous for magically-gifted children to grow up without proper training.\"");
				say("\"I do not like it, but there is not much mortals can do against a City of Mages...\"");
				var0003 = Func09AE(var0003);
				fallthrough;

			case "the healers" (remove):
				say("\"Last one we had was killed by the Goblins a few months ago. Closest thing we have now is the herbalist, Delphynia.\"");
				say("\"Little slip of a woman. She's usually at her greenhouse or at the healer's hall.\"");
				if (UI_is_pc_female()) {
					say("\"Some of the townsfolk are a bit shy of having a female healer -- it doth go against tradition, if thou dost see? But it doth not bother me!\"");
				} else {
					say("\"But I say that 'tis no duty for a woman. I know thou wouldst agree with me, mate.\"");
				}
				fallthrough;

			case "the Priestess" (remove):
				if (gflags[FAWN_TRIAL_DONE_FIRST_DAY] && (gflags[FAWN_TRIAL_DONE] && (!gflags[ORACLE_SET_TO_INNOCENT]))) {
					say("\"Kylista hath been imprisoned since the trial, ",
						var0001,
						". I think the experience hath been a boon to her.\"");
					say("\"She is a changed woman, I think. Hast thou visited her in her cell?\"");
				} else {
					say("\"Kylista is the Priestess of Beauty. Ta her falls the duty of keeping Fawn on the path of Beauty through these dark days.\"");
					say("\"An' that be a large job for such slender shoulders, make no mistake!\"");
				}
				var0003 = Func09AE(var0003);
				fallthrough;

			case "town leaders" (remove):
				say("\"Well now, there be plenty of those here. Who dost thou wish ta know about?\"");
				UI_push_answers();
				var0004 = 0x0004;
				add(["Lady Yelinda", "Chancellor Zulith", "Commander Jorvin", "the Great Captains", "nothing more"]);
				fallthrough;

			case "Lady Yelinda" (remove):
				say("\"Lady Yelinda be the ruler here in Fawn. She be Fawn's living symbol of Beauty.\"");
				say("\"She be a wise lady. Always concerned with what the people think -- Always listens ta any advice offered.\"");
				var0003 = Func09AE(var0003);
				fallthrough;

			case "Chancellor Zulith" (remove):
				say("\"I hate to speak ill of anyone, but for Zulith I shall make an exception.\"");
				say("\"He is called the Chancellor, but Zulith is little more than a messenger with an over-full ego. Thou wouldst be wise ta steer clear of him, for he takes offense at petty things.\"");
				var0003 = Func09AE(var0003);
				fallthrough;

			case "Commander Jorvin" (remove):
				say("\"Jorvin be the Commander of the Fawn Guards. He is a fine, strong lad. And I think that he is sweet on the Lady.\"");
				if (Func0942(OLON)) {
					OLON->show_npc_face1(0x0000);
					say("\"Aye! An' the Lady be sweet on him, too!\"");
					UI_remove_npc_face1();
					0x0000->set_conversation_slot();
					say("\"Thou shouldst not speak of the Lady so!\"");
				}
				var0003 = Func09AE(var0003);
				fallthrough;

			case "the Great Captains" (remove):
				if (gflags[FAWN_TRIAL_DONE_FIRST_DAY] && (gflags[FAWN_TRIAL_DONE] && (!gflags[ORACLE_SET_TO_INNOCENT]))) {
					say("\"Why, they have been in disrepute ever since the trial. Joth hath taken to drinking, and as for Garth -- well, no woman will give him the time of day!");
					if (VOLDIN->get_item_flag(DEAD)) {
						say("\"As for old Voldin, I think he is not greatly missed.\"");
					} else {
						say("\"Voldin doth scheme endlessly in his cell, but what can come of it?\"");
					}
				} else {
					say("\"To ease the burdens which Lady Yelinda must carry, the Great Captains assist her in ruling the city.\"");
					say("\"Voldin be the eldest of the three Great Captains. They say he's a wise man, but I do not much care for him.\"");
					say("\"Then there's Joth, an old sea-farin' man and a good customer of mine. But since he was hurt in the storms, he hath been a bit gruff.\"");
					say("\"Captain Garth is the youngest of Lady Yelinda's advisors. He is always trailing some lady's skirts, that puppy!\"");
				}
				var0003 = Func09AE(var0003);
				fallthrough;

			case "strangers" (remove):
				say("\"The only visitors we have had of late are connected with the strange voyagers from a distant land. First came the sailors and scholars, and lastly, their leader.\"");
				say("\"Who wouldst thou care to hear about?\"");
				UI_push_answers();
				var0004 = 0x0003;
				add(["sailors", "scholars", "leader", "nothing more"]);
				fallthrough;

			case "sailors" (remove):
				say("\"They were the crew of that ship that sailed from the other side of the world -- said something about Serpent Pillars in the ocean.\"");
				say("\"Brunt, Ruggs, Deadeye, Kalen... I found them congenial enough. Excepting Kalen... he enjoyed arguing with my customers.\"");
				if (gflags[FAWN_TRIAL_DONE_FIRST_DAY] && (gflags[FAWN_TRIAL_DONE] && (!gflags[ORACLE_SET_TO_INNOCENT]))) {
					say("\"The Lady hath admitted them back into the city, thou dost know... They have not made trouble yet, but I'm keeping an eye on them.\"");
				} else {
					say("\"But when the sailors began spouting that Fellowship nonsense, Kylista did right, orderin' their contagion outside the city walls.\"");
				}
				var0003 = Func09AE(var0003);
				add("Fellowship");
				fallthrough;

			case "Fellowship" (remove):
				say("\"Mere foolishness. Everyone knows that Beauty is what is important.\"");
				say("\"After all these centuries, we have no intention of changing our sacred beliefs now...\"");
				fallthrough;

			case "leader" (remove):
				say("\"He arrived in the most unnatural way! The sailors had erected a great pillar made outa some blackish rock...\"");
				say("\"Then in the night -- BLAM! Lightning, explosions! The pillar is disintegrated. And this mage is standing there.\"");
				say("\"Said his name was Batlin. Came to town askin' about the Daemon artifacts hereabouts. Bothering poor Delin...\"");
				say("\"Told him ta go talk ta others of his ilk, not badger the honest folk.\"");
				var0003 = Func09AE(var0003);
				add("Daemon artifacts");
				fallthrough;

			case "Daemon artifacts" (remove):
				say("\"Stay away from 'em myself. But thou canst not miss 'em...\"");
				say("\"Have snakes carved all over 'em. Left behind by the ancient inhabitants of this land. Horrible Daemonic folk.\"");
				say("\"Legend claims that the Lady keeps a Daemon shrine locked away in a secret room of her palace. Hard to believe, eh?\"");
				gflags[ASK_DELIN_ABOUT_BATLIN] = true;
				fallthrough;

			case "scholars" (remove):
				say("\"Came on the ship. Said The Fellowship had sent them here to study our way of life -- make maps, collect histories, and so forth.\"");
				say("\"Scots is the geographer. Spends all his time working on his new map of the continent.\"");
				say("\"Then there was the culturist -- her name was, uh...\"");
				say("\"Gwenno...\"");
				say("\"Askin' about folk tales. Bought the boys a round or two ta loosen their tongues. Her favorites were the tales of the Gwani.\"");
				gflags[KNOWS_JENDON_MET_GWENNO] = true;
				var0003 = Func09AE(var0003);
				add("Gwani");
				fallthrough;

			case "Gwani" (remove):
				say("\"Never seen 'em. Never wanted to.\"");
				say("\"Covered in fur, like an animal. Hear they're worse than Goblins... even eat their own kind!\"");
				say("\"Olon might be able to tell ya more.\"");
				gflags[ASK_ONLON_GWANI] = true;
				fallthrough;

			case "places":
				say("\"I know little about the wilderness areas hereabouts. I be a town man, meself.\"");
				say("\"But I can tell thee about the other towns, if thou wouldst like.\"");
				UI_push_answers();
				var0004 = 0x0002;
				add(["wilderness areas", "other towns", "nothing more"]);
				fallthrough;

			case "wilderness areas" (remove):
				say("\"Oh, I wandered about a bit as a lad, but I never went too far. Never wanted ta lose myself...\"");
				say("\"Went as far west of here as that forest the Monitorian warriors use for their training. Did not enter. I got stopped by some of those fancy knights who told me ta turn back.\"");
				if (!gflags[HAVE_HELM_OF_MONITOR]) {
					say("\"Hear the woods are overrun by Goblins, these days.\"");
				}
				var0003 = Func09AE(var0003);
				fallthrough;

			case "other towns" (remove):
				say("\"Well now, like I said before, I have never visited the other towns. But I have heard tell of them.\"");
				UI_push_answers();
				var0004 = 0x0003;
				add(["Moonshade", "Monitor", "Sleeping Bull", "nothing more"]);
				fallthrough;

			case "Moonshade" (remove):
				say("\"'Tis the town of wizards on an island east of here...\"");
				say("\"Which is just as well by my line of thinking. Who would want ta live where ya can't trust anything? Mark my words, don't thou trust no wizards. They'll lead ye wrong.\"");
				gflags[DELIN_SAID_MOONSHADE] = true;
				var0003 = Func09AE(var0003);
				fallthrough;

			case "Sleeping Bull" (remove):
				say("\"Sleeping Bull is not exactly a town, but it doth lie on the road ta Monitor and is where thou mayest hire passage to Moonshade.\"");
				say("\"The inn is run by a man called Angus, and his wife, Devra. Honest folk... though I have heard tell that the inn was originally a pirate fort, a very long time ago.\"");
				var0003 = Func09AE(var0003);
				fallthrough;

			case "Monitor" (remove):
				if (gflags[HAVE_WOLF_TATTOO] == true) {
					say("\"Why ask me, ",
						var0001,
						"? 'Tis plain thou hast already been there.\"");
					if (UI_is_pc_female()) {
						say("\"It looks most comely on thee. Thou must be the adventurous sort...\"");
					} else {
						say("\"Thou dost look a bit like a bold pirate with that jaunty mark.\"");
					}
				} else {
					say("\"Arrogant people down there. Always wantin' ta beat thee. They have a big walled city south of here. Monitor is where the Pikemen are from.\"");
					say("\"Larcenous bunch of armoured scum! They'll protect the roads for thee... if thou dost give them all thy money!\"");
					say("\"The lot hereabouts weren't much good. The Goblins killed 'em.\"");
					add("Goblins");
				}
				gflags[JENDON_SPOKE_MONITOR] = true;
				var0003 = Func09AE(var0003);
				fallthrough;

			case "Goblins" (remove):
				say("\"Vile creatures, ",
					var0001,
					"! They steal our children if we don't keep close watch. Like human flesh, they do.\"");
				say("\"They've become bolder here of late. That's why Fawn closes her gates at night now.\"");
				fallthrough;

			case "food":
				say("\"Aye, we have something here that'll fill thy belly.\"");
				Func083D();
				fallthrough;

			case "drink":
				say("\"If thou dost want ta wet thy whistle, I can sell thee a fine drink -- Fawnish Ale. 'Tis a strong refreshment, though...\"");
				Func083E();
				fallthrough;

			case "strange objects":
				gflags[JENDON_SPOKE_STRANGE_OBJECTS] = true;
				remove("strange objects");
				var0004 += 0x0001;
				var000D = [];
				if (gflags[STORM_PINECONE] && (!gflags[KNOWS_PINECONE_OWNER])) {
					var000D &= "pinecone";
				}
				if (gflags[STORM_STOCKINGS] && (!gflags[KNOWS_MOONSILK_OWNER])) {
					var000D &= "moonsilk stockings";
				}
				if (gflags[STORM_URN] && (!gflags[KNOWS_URN_ORIGIN])) {
					var000D &= "urn";
				}
				if (gflags[STORM_LAB_APPARATUS] && (!gflags[KNOWS_LAB_APPARATUS_OWNER])) {
					var000D &= "apparatus";
				}
				if (gflags[STORM_PUMICE] && (!gflags[KNOWS_PUMICE_ORIGIN])) {
					var000D &= "pumice";
				}
				if (gflags[STORM_WEDDING_RING] && (!gflags[KNOWS_RING_OWNER])) {
					var000D &= "lost ring";
				}
				if (gflags[STORM_FUR_CAP] && (!gflags[KNOWS_FUR_CAP_OWNER])) {
					var000D &= "fur cap";
				}
				if (gflags[STORM_SLIPPERS] && (!gflags[KNOWS_SLIPPERS_OWNER])) {
					var000D &= "slippers";
				}
				if (gflags[STORM_BREAST_PLATE] && (!gflags[KNOWS_BREAST_PLATE_OWNER])) {
					var000D &= "breastplate";
				}
				if (gflags[STORM_BLUE_EGG] && (!gflags[KNOWS_BLUE_EGG_OWNER])) {
					var000D &= "blue egg";
				}
				if (gflags[STORM_GOBLIN_BRUSH] && (!gflags[KNOWS_GOBLIN_BRUSH_ORIGIN])) {
					var000D &= "strange hairbrush";
				}
				if (gflags[STORM_ICEWINE] && (!gflags[KNOWS_ICEWINE_ORIGIN])) {
					var000D &= "bottle of wine";
				}
				if (gflags[STORM_FILARI] && (!gflags[KNOWS_FILARI_OWNER])) {
					var000D &= "strange coins";
				}
				if (gflags[STORM_BEAR_SKULL] && (!gflags[KNOWS_BEAR_SKULL_ORIGIN])) {
					var000D &= "skull";
				}
				if (gflags[STORM_SEVERED_HAND] && (!gflags[KNOWS_SEVERED_HAND_OWNER])) {
					var000D &= "bloody hand";
				}
				if (gflags[STORM_MONITOR_SHIELD] && (!gflags[KNOWS_MONITOR_SHIELD_ORIGIN])) {
					var000D &= "plain shield";
				}
				if (gflags[STORM_RUDDY_ROCK] && (!gflags[KNOWS_STONEHEART_ORIGIN])) {
					var000D &= "glowing rock";
				}
				if (gflags[STORM_FISHNET_STOCKINGS] && (!gflags[KNOWS_FISHNET_STOCKINGS_ORIGIN])) {
					var000D &= "fish-net stockings";
				}
				if (gflags[FOUND_BROWN_BOTTLE] && (SIMON->get_schedule_type() != WAIT)) {
					var000D &= "brown bottle";
				}
				if (var000D == []) {
					var000E = Func0992(0x0001, (("@But we have no strange objects to ask about, " + var0001) + ".@"), 0x0000, false);
					0x0000->set_conversation_slot();
					say("\"If thou dost think of anything, let me know!\"");
				} else {
					say("\"What sort of items art thou inquiring about?\"");
					UI_push_answers();
					var000F = 0x0005;
					while (var000F > 0x0000) {
						var0010 = var000D[UI_get_random(UI_get_array_size(var000D))];
						var000D = Func0988(var0010, var000D);
						if (var000D == []) {
							var000F = 0x0000;
							var0011 = true;
						}
						add(var0010);
						var000F -= 0x0001;
					}
					add("nothing more");
				}
				fallthrough;

			case "pinecone" (remove):
				if (Func097D(PARTY, 0x0001, 0x0108, QUALITY_ANY, FRAME_ANY)) {
					say("\"That looks like a pinecone to me!\"");
				} else {
					say("\"Sounds like a pinecone to me!\"");
				}
				say("\"They come from big trees, but not like those hereabouts. Thou couldst ask Olon about it, he hath travelled quite a bit.\"");
				gflags[HAS_CLUE_PINECONE_OLON] = true;
				if (!var0011) {
					var0010 = var000D[UI_get_random(UI_get_array_size(var000D))];
					var000D = Func0988(var0010, var000D);
					if (var000D == []) {
						var0011 = true;
					}
					add(var0010);
				}
				fallthrough;

			case "moonsilk stockings" (remove):
				if (Func097D(PARTY, 0x0001, 0x02A5, QUALITY_ANY, 0x0000)) {
					if (UI_is_pc_female()) {
						say("\"Hast thou no modesty, ",
							var0001,
							"? Showing thy stockings about like that...\"");
						var000E = Func0992(0x0001, "@They are not hers!@", "@They are not mine!@", false);
						0x0000->set_conversation_slot();
						say("\"Oh... They are fine things, not what thou wouldst find among the women of fisher-folk.\"");
					} else {
						say("\"These are fine things, not what thou wouldst find among the women of fisher-folk.\"");
					}
					say("\"Perhaps Alyssand could help thee. She is a good hand at weaving the stockings that are found hereabouts.\"");
				} else if (UI_is_pc_female()) {
					say("\"I know nothing of women's stockings, ",
						var0001,
						"!\"");
					if (Func0942(OLON)) {
						OLON->show_npc_face1(0x0000);
						say("\"Aye! That be the truth! No woman would have him!\"");
						UI_remove_npc_face1();
						0x0000->set_conversation_slot();
					}
					say("\"Seek thou Alyssand. She makes stockings. She might be able to help thee.\"");
				} else {
					say("\"A mighty fancy pair of stockings, ",
						var0001,
						"! Thou wilt make some woman happy...\"");
					say("\"We have none so fancy here -- Only the ones that Alyssand makes.\"");
				}
				gflags[HAS_CLUE_MOONSILK_STOCKINGS] = true;
				if (!var0011) {
					var0010 = var000D[UI_get_random(UI_get_array_size(var000D))];
					var000D = Func0988(var0010, var000D);
					if (var000D == []) {
						var0011 = true;
					}
					add(var0010);
				}
				fallthrough;

			case "urn" (remove):
				if (Func097D(PARTY, 0x0001, 0x0392, QUALITY_ANY, 0x0000)) {
					say("\"Why art thou carrying a dead person with thee? Was it someone kin to thee?\"");
					var000E = Func0992(0x0001, "@What?!@", "@What?!@", false);
					0x0000->set_conversation_slot();
					say("\"Thou didst not know? That urn holds the ashes of one of Monitor's dead warriors.\"");
					say("\"I am sure they would appreciate its return, ",
						var0001,
						".\"");
				} else {
					say("\"I cannot be sure without seeing it, ",
						var0001,
						". But it sounds like one of the urns that hold the ashes of one of Monitor's dead warriors.\"");
					say("\"I am sure they would appreciate its return...\"");
				}
				if (!var0011) {
					var0010 = var000D[UI_get_random(UI_get_array_size(var000D))];
					var000D = Func0988(var0010, var000D);
					if (var000D == []) {
						var0011 = true;
					}
					add(var0010);
				}
				fallthrough;

			case "apparatus" (remove):
				if (Func097D(PARTY, 0x0001, 0x02ED, QUALITY_ANY, 0x0001)) {
					say("\"Doth not look like anything I ever heard of.\"");
				} else {
					say("\"Doth not sound like anything I ever heard of.\"");
				}
				say("\"But perhaps Delphynia could help thee. She uses all manner of fancy equipment to prepare her herbs for healing and such.\"");
				gflags[ASK_DELPHYNIA_APPARATUS] = true;
				if (!var0011) {
					var0010 = var000D[UI_get_random(UI_get_array_size(var000D))];
					var000D = Func0988(var0010, var000D);
					if (var000D == []) {
						var0011 = true;
					}
					add(var0010);
				}
				fallthrough;

			case "pumice" (remove):
				if (Func097D(PARTY, 0x0001, 0x010B, QUALITY_ANY, FRAME_ANY)) {
					say("\"What a strange rock... Not from around here. Wouldn't be much good for building or for ballast.\"");
					say("\"Go thou and ask Delphynia, though. She collects odd things that she calls reagents. Perhaps she might know what that is.\"");
					gflags[ASK_DELPHYNIA_PUMICE] = true;
				} else {
					say("\"I have never heard of such a rock. Who doth care about rocks?\"");
				}
				if (!var0011) {
					var0010 = var000D[UI_get_random(UI_get_array_size(var000D))];
					var000D = Func0988(var0010, var000D);
					if (var000D == []) {
						var0011 = true;
					}
					add(var0010);
				}
				fallthrough;

			case "lost ring" (remove):
				if (Func097D(PARTY, 0x0001, 0x0377, QUALITY_ANY, 0x0000)) {
					say("\"Why, that looks exactly like the engagement ring that Keth gave Alyssand!\"");
					if (Func0942(OLON)) {
						say("\"What dost thou think, Olon?\"");
						OLON->show_npc_face1(0x0000);
						say("\"Aye, sure as ships sail. That be Alyssand's ring all right. Keth showed it to me enough times, I should know.\"");
						UI_remove_npc_face1();
						0x0000->set_conversation_slot();
					}
					say("\"Thou shouldst find Alyssand and give to her the ring, ",
						var0001,
						". She hath been a bit crazy since she lost it\"");
					Func08A9();
				} else {
					say("\"Can't say without seeing it, but it might be the ring that one of our young ladies did lose.\"");
					say("\"Bring it here, and I can tell thee for certain.\"");
				}
				if (!var0011) {
					var0010 = var000D[UI_get_random(UI_get_array_size(var000D))];
					var000D = Func0988(var0010, var000D);
					if (var000D == []) {
						var0011 = true;
					}
					add(var0010);
				}
				fallthrough;

			case "fur cap" (remove):
				if (Func097D(PARTY, 0x0001, 0x03EC, QUALITY_ANY, 0x0004)) {
					say("\"Nice cap. A bit small, though. Not something a fisherman would wear... It would blow off the ship.\"");
					say("\"Ask thou Delin if he hath seen a cap like this. He is the provisioner. He should know.\"");
				} else {
					say("\"Doth not sound like something a fisherman would wear...\"");
					say("\"Ask thou Delin if he hath heard of such a cap. He is the provisioner. He should know.\"");
				}
				gflags[ASK_DELIN_FUR_CAP] = true;
				if (!var0011) {
					var0010 = var000D[UI_get_random(UI_get_array_size(var000D))];
					var000D = Func0988(var0010, var000D);
					if (var000D == []) {
						var0011 = true;
					}
					add(var0010);
				}
				fallthrough;

			case "slippers" (remove):
				if (Func097D(PARTY, 0x0001, 0x024B, QUALITY_ANY, 0x0005)) {
					say("\"I cannot recall having seen any of the women in town with slippers like these.\"");
					say("\"Thou mightest check with Delin to see if he remembers who purchased these.\"");
					gflags[ASK_DELIN_SLIPPERS] = true;
				} else {
					say("\"I cannot recall any of the women wearing slippers like thou hast described.\"");
				}
				if (!var0011) {
					var0010 = var000D[UI_get_random(UI_get_array_size(var000D))];
					var000D = Func0988(var0010, var000D);
					if (var000D == []) {
						var0011 = true;
					}
					add(var0010);
				}
				fallthrough;

			case "breastplate" (remove):
				gflags[KNOWS_BREAST_PLATE_OWNER] = true;
				if (Func097D(PARTY, 0x0001, 0x01A3, QUALITY_ANY, 0x0000)) {
					say("\"Perhaps Fawn's luck shall change after all!\"");
					say("\"That is the Priestess Kylista's ceremonial breastplate!");
					if (gflags[FAWN_TRIAL_DONE_FIRST_DAY] && (gflags[FAWN_TRIAL_DONE] && (!gflags[ORACLE_SET_TO_INNOCENT]))) {
						say("\"Thou shouldst leave it in the Temple, for it belongs within the Place of Beauty.\"");
					} else {
						say("\"Thou shouldst take it to her quickly!\"");
					}
				} else {
					say("\"Too bad thou dost not have it with thee. But that is Fawn's luck nowadays!\"");
					say("\"It sounds like Priestess Kylista's ceremonial breastplate.\"");
					if (gflags[FAWN_TRIAL_DONE_FIRST_DAY] && (gflags[FAWN_TRIAL_DONE] && (!gflags[ORACLE_SET_TO_INNOCENT]))) {
						say("\"If it is, then it belongs in the Temple. Perhaps thou shouldst leave it before the Oracle.\"");
					} else {
						say("\"Thou shouldst as least tell her that thou hast seen it -- it will cheer her.\"");
					}
				}
				if (!var0011) {
					var0010 = var000D[UI_get_random(UI_get_array_size(var000D))];
					var000D = Func0988(var0010, var000D);
					if (var000D == []) {
						var0011 = true;
					}
					add(var0010);
				}
				fallthrough;

			case "blue egg" (remove):
				if (Func097D(PARTY, 0x0001, 0x0241, QUALITY_ANY, 0x0003)) {
					say("\"A rotten egg! How it smells! Leave here with that!\"");
					Func097F(JENDON, "@Whew!@", 0x0000);
					JENDON->set_schedule_type(SHY);
					abort;
				}
				say("\"I have never heard of a blue egg.\"");
				say("\"Ask Delphynia. She doth know all manner of strange things.\"");
				gflags[ASK_DELPHYNIA_BLUE_EGG] = true;
				if (!var0011) {
					var0010 = var000D[UI_get_random(UI_get_array_size(var000D))];
					var000D = Func0988(var0010, var000D);
					if (var000D == []) {
						var0011 = true;
					}
					add(var0010);
				}
				fallthrough;

			case "strange hairbrush" (remove):
				if (Func097D(PARTY, 0x0001, 0x011D, QUALITY_ANY, 0x0006)) {
					say("\"Strange lookin' brush...\"");
					say("\"Come ta think of it, it looks like something that Jorvin was talking about, when our healer was killed. Thou shouldst show it to him.\"");
					gflags[ASK_JORVIN_STRANGE_HAIRBRUSH] = true;
				} else {
					say("\"Hmmm... sounds malformed. No one in the City of Beauty would use such a brush.\"");
				}
				if (!var0011) {
					var0010 = var000D[UI_get_random(UI_get_array_size(var000D))];
					var000D = Func0988(var0010, var000D);
					if (var000D == []) {
						var0011 = true;
					}
					add(var0010);
				}
				fallthrough;

			case "bottle of wine" (remove):
				if (Func097D(PARTY, 0x0001, 0x0268, QUALITY_ANY, 0x0010)) {
					say("\"I know that bottle! That there is Moonshade wine.\"");
					say("\"I do not have much demand for it around here, though. The sailors don't care much for such a weak vintage -- Fawn folk prefer Fawn ale!\"");
				} else {
					say("\"Doth not sound like Fawn ale... Maybe that weak vintage from Moonshade. I do not sell it here -- Fawn folk prefer Fawn ale!\"");
				}
				if (!var0011) {
					var0010 = var000D[UI_get_random(UI_get_array_size(var000D))];
					var000D = Func0988(var0010, var000D);
					if (var000D == []) {
						var0011 = true;
					}
					add(var0010);
				}
				fallthrough;

			case "strange coins" (remove):
				if (Func097D(PARTY, 0x0001, 0x03B4, QUALITY_ANY, FRAME_ANY)) {
					say("\"Why, those are Filari! Those are the coins of Fawn...\"");
					say("\"They simply appeared, thou sayest? Strange storms, these. I seem to recall Delin complaining that he had lost some coins -- but I thought that was his forgetfulness!\"");
				} else {
					say("\"Without seeing the coins, ",
						var0001,
						", I cannot tell thee what coins thou didst have.\"");
					say("\"Perhaps thou shouldst ask Delin. He is the Provisioner here in town.\"");
				}
				gflags[JENDON_SPOKE_STRANGE_COINS] = true;
				if (!var0011) {
					var0010 = var000D[UI_get_random(UI_get_array_size(var000D))];
					var000D = Func0988(var0010, var000D);
					if (var000D == []) {
						var0011 = true;
					}
					add(var0010);
				}
				fallthrough;

			case "skull" (remove):
				if (Func097D(PARTY, 0x0001, 0x00F4, QUALITY_ANY, FRAME_ANY)) {
					say("\"'Tis the skull of some beast, obviously. Perhaps it is a Goblin skull -- I would be glad of that.\"");
					say("\"Ask Jorvin if it is a Goblin skull. If it is, I might buy it from thee to hang above the door!\"");
					gflags[ASK_JORVIN_SKULL] = true;
				} else {
					say("\"I am no expert on the bones of creatures, ",
						var0001,
						". Especially bones that I cannot see.\"");
				}
				if (!var0011) {
					var0010 = var000D[UI_get_random(UI_get_array_size(var000D))];
					var000D = Func0988(var0010, var000D);
					if (var000D == []) {
						var0011 = true;
					}
					add(var0010);
				}
				fallthrough;

			case "bloody hand" (remove):
				if (Func097D(PARTY, 0x0001, 0x031A, QUALITY_ANY, 0x0000)) {
					say("\"What manner of beast art thou, to carry such things with thee?!\"");
					say("\"Thou art as bad as those horrible wizards from Moonshade! No respect for life!\"");
					Func097F(JENDON, "@Take it away!@", 0x0000);
					abort;
				}
				say("\"Sounds like the work of those horrible wizards from Moonshade! No respect for life!\"");
				if (!var0011) {
					var0010 = var000D[UI_get_random(UI_get_array_size(var000D))];
					var000D = Func0988(var0010, var000D);
					if (var000D == []) {
						var0011 = true;
					}
					add(var0010);
				}
				fallthrough;

			case "plain shield" (remove):
				if (Func097D(PARTY, 0x0001, 0x02D9, QUALITY_ANY, FRAME_ANY)) {
					say("\"Do I look like a warrior, ",
						var0001,
						"? What would a poor innkeeper know about arms and such like?\"");
					say("\"Talk with Jorvin. He of any here in Fawn would know where such armour hails from.\"");
				} else {
					say("\"I have no knowledge of arms, ",
						var0001,
						". I am a poor innkeeper, not a guard.\"");
					say("\"Seek Jorvin's aid. He is well trained with the devices of battle. I shall content myself with a mug and broom...\"");
				}
				gflags[ASK_JORVIN_SHIELD] = true;
				if (!var0011) {
					var0010 = var000D[UI_get_random(UI_get_array_size(var000D))];
					var000D = Func0988(var0010, var000D);
					if (var000D == []) {
						var0011 = true;
					}
					add(var0010);
				}
				fallthrough;

			case "glowing rock" (remove):
				if (Func097D(PARTY, 0x0001, 0x034A, QUALITY_ANY, 0x000F)) {
					say("\"Now that is strange, indeed! It fairly reeks of wizardry, ",
						var0001,
						".\"");
					say("\"I shall thank thee to take it out of here. I want nothing to do with such evil things... Take it to Delphynia, if thou must parade it about.\"");
				} else {
					say("\"I suppose that Delphynia would be the best to answer thy question. This stone sounds magical -- since she deals with spell reagents, perhaps she'll know of it.\"");
				}
				gflags[ASK_DELPHYNIA_GLOWING_ROCK] = true;
				if (!var0011) {
					var0010 = var000D[UI_get_random(UI_get_array_size(var000D))];
					var000D = Func0988(var0010, var000D);
					if (var000D == []) {
						var0011 = true;
					}
					add(var0010);
				}
				fallthrough;

			case "fish-net stockings" (remove):
				if (Func097D(PARTY, 0x0001, 0x02A5, QUALITY_ANY, 0x0001)) {
					if (UI_is_pc_female()) {
						say("\"'Tis not proper, ",
							var0001,
							", flaunting personal garments about like that!\"");
						var000E = Func0992(0x0001, "@They are not hers!@", "@They are not mine!@", false);
						0x0000->set_conversation_slot();
						say("\"Well... uh... these are made right here, by young Alyssand.\"");
					} else {
						say("\"These are stockings thou mayest find our fisher women wearing. They are made right here, by young Alyssand.\"");
					}
				} else if (UI_is_pc_female()) {
					say("\"What dost thou take me for!\"");
					if (Func0942(OLON)) {
						OLON->show_npc_face1(0x0000);
						say("\"Trust me, ",
							var0001,
							", Jendon knows nothing of the fairer sex!\"");
						UI_remove_npc_face1();
						0x0000->set_conversation_slot();
					}
					say("\"Seek another woman to help thee... Alyssand, perhaps. She makes stockings.\"");
				} else {
					say("\"If it is stockings thou seekest...\"");
					say("\"Alyssand weaves them right here in Fawn.\"");
				}
				gflags[ASK_ALYSSAND_FISHNET_STOCKINGS] = true;
				if (!var0011) {
					var0010 = var000D[UI_get_random(UI_get_array_size(var000D))];
					var000D = Func0988(var0010, var000D);
					if (var000D == []) {
						var0011 = true;
					}
					add(var0010);
				}
				fallthrough;

			case "brown bottle" (remove):
				say("\"Why, thou hast better taste than I didst give thee credit for, ",
					var0001,
					". I would not have chosen thee for a Fawn ale drinker!\"");
				say("\"No one outside of our town cares for it at all.\"");
				if (OLON->npc_nearby()) {
					OLON->show_npc_face1(0x0000);
					say("\"Thou dost speak in error, friend. Remember, thou hast a customer in Monitor...\"");
					UI_remove_npc_face1();
					0x0000->set_conversation_slot();
					say("\"Aye. The innkeeper in Monitor doth order Fawnish ale from time to time, but I know not for whom.\"");
				}
				say("\"Wouldst thou like more Fawnish ale?\"");
				if (Func0955() == true) {
					Func083E();
				} else {
					say("\"Another time, then...\"");
				}
				if (!var0011) {
					var0010 = var000D[UI_get_random(UI_get_array_size(var000D))];
					var000D = Func0988(var0010, var000D);
					if (var000D == []) {
						var0011 = true;
					}
					add(var0010);
				}
				fallthrough;

			case "nothing more":
				if (var0004 == 0x0001) {
					UI_pop_answers();
					say("\"I wish I could have been of more help to thee...\"");
				} else {
					while (var0004 > 0x0001) {
						UI_pop_answers();
						var0004 -= 0x0001;
					}
					say("\"Glad ta be of service ta thee, ",
						var0001,
						". Return if thou hast more questions.\"");
				}
				fallthrough;

			case "change subject":
				UI_pop_answers();
				say("\"Why, we've drifted completely off the subject! What were we talking about...?\"");
				fallthrough;

			case "nothing":
				say("\"I understand -- everyone is short of coins these days...\"");
				UI_pop_answers();
				fallthrough;

			case "bye":
				Func08AB();
				UI_remove_npc_face0();
				Func097F(AVATAR, "@Farewell!@", 0x0000);
				Func097F(JENDON, "@Walk in Beauty!@", 0x0002);
				Func08AA();
				break;
		}
	}
}

extern var Func0954 0x954 ();
extern var Func0953 0x953 ();
extern var Func097D 0x97D (var var0000, var var0001, var var0002, var var0003, var var0004);
extern var Func0994 0x994 ();
extern var Func09A0 0x9A0 (var var0000, var var0001);
extern void Func097F 0x97F (var var0000, var var0001, var var0002);
extern void Func07D1 object#(0x7D1) ();
extern var Func0955 0x955 ();
extern void Func08A9 0x8A9 ();
extern void Func08AB 0x8AB ();

void Func0435 object#(0x435) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;
	var var0008;

	var0000 = Func0954();
	var0001 = UI_is_pc_female();
	var0002 = Func0953();
	var0003 = Func097D(PARTY, 0x0001, 0x0377, QUALITY_ANY, 0x0000);
	var0004 = Func0994();
	if ((event == SI_PATH_SUCCESS) || (event == SI_PATH_FAILURE)) {
		JORVIN->set_schedule_type(STANDTHERE);
	}
	if (event == SCRIPTED) {
		if (gflags[HAVE_YELINDA_AUDIENCE]) {
			abort;
		}
		if (Func0994() == 0x0003) {
			var0005 = script Func09A0(0x0005, 0x0001) after 75 ticks {
				nohalt;
				call Func0435;
			};
			var0005 = JORVIN->approach_avatar(0x0078, 0x0028);
			JORVIN->set_schedule_type(TALK);
			Func097F(JORVIN, (("@Hail, " + var0002) + "!@"), 0x0002);
		} else {
			var0005 = script Func09A0(0x0005, 0x0001) after 150 ticks {
				nohalt;
				call Func0435;
			};
		}
	}
	if (event == DEATH) {
		var0005 = script item {
			nohalt;
			call Func0112;
		};
	}
	if (event == DOUBLECLICK) {
		AVATAR->item_say("@Hail, guardsman!@");
		JORVIN->Func07D1();
		Func097F(JORVIN, (("@Hail, " + var0000) + "!@"), 0x0005);
		JORVIN->set_schedule_type(TALK);
	}
	if (event == STARTED_TALKING) {
		JORVIN->run_schedule();
		JORVIN->clear_item_say();
		JORVIN->show_npc_face0(0x0000);
		var0006 = JORVIN->get_item_flag(MET);
		if (gflags[JORVIN_SUMMONS_AVATAR] && (!gflags[HAVE_YELINDA_AUDIENCE])) {
			JORVIN->show_npc_face0(0x0000);
			say("\"Greetings, visitors! Thanks to the beautiful songs of the bard Iolo, thou hast found favor in our good city.\"");
			say("\"The Lady would welcome thee formally to Fawn. Thou mayest attend her within her throne room at the palace, after noon.\"");
			say("\"Be certain to bring that fellow Iolo with thee -- the Lady doth wish to confer an honor upon him.\"");
			UI_remove_npc_face0();
			Func097F(JORVIN, "@Such an honor...@", 0x0002);
			gflags[HAVE_YELINDA_AUDIENCE] = true;
			abort;
		}
		if (var0006 == false) {
			if (gflags[HAVE_WOLF_TATTOO] == true) {
				if (gflags[CLEARED_FAWN_TOWER] == true) {
					say("\"Finely done, brave Monitorian! We had despaired when those vile goblins seized the tower.\" *\"I am Jorvin, Captain of the guard. How may I be of service?\"");
				} else {
					say("\"A Monitorian! I hope this means that Monitor plans to retake the Fawn tower from those vile goblins.\" *\"I am Jorvin, Captain of the guard. How may I be of service?\"");
				}
				add("tower");
			} else {
				say("\"Thou art new here, ",
					var0000,
					". I am Jorvin, Captain of the guard. How may I be of service?\"");
			}
			JORVIN->set_item_flag(MET);
		} else {
			say("\"Well met, ",
				var0002,
				"! 'Tis good to see thee again.\"");
		}
		add(["goblins", "storms", "Fellowship troublemakers", "Wand of Detainment"]);
		if (gflags[KALEN_IS_DEAD] == true) {
			add("Assassin");
		}
		if (gflags[ASK_JORVIN_STRANGE_HAIRBRUSH] && (!gflags[KNOWS_GOBLIN_BRUSH_ORIGIN])) {
			add("strange hairbrush");
		}
		if (gflags[ASK_JORVIN_SKULL] && (!gflags[KNOWS_BEAR_SKULL_ORIGIN])) {
			add("skull");
		}
		if (gflags[ASK_JORVIN_SHIELD] && (!gflags[KNOWS_MONITOR_SHIELD_ORIGIN])) {
			add("plain shield");
		}
		converse ("bye") {
			case "tower":
				if (gflags[HAVE_WOLF_TATTOO] == true) {
					if (gflags[CLEARED_FAWN_TOWER] == true) {
						say("\"When the goblins took the tower, we feared that Fawn would be crushed without the Pikemen. 'Twas a horrible thought -- trapped between the storms and the goblins with no escape.\" *\"'Twas certainly the bravest of Monitorians that led the assault to retake the tower.\" ~\"Wert thou there?\"");
						var0007 = Func0955();
						if (var0007) {
							if (var0001 == true) {
								say("\"How remarkable! Thou art surely as beautiful as Lady Yelinda, and as brave as any Pikeman.\" *\"Pray, forgive mine astonishment. In Fawn, all females -- especially the beautiful ones -- are forbidden to endanger themselves. We could not bear to see Beauty such as thine marred in any way.\"");
							} else {
								say("\"Oh, how I wish I could have been at thy side! My duty to Lady Yelinda is such that -- even had we enough able-bodied men to attempt it -- I could not leave her unprotected to undertake the task.\" *\"I envy thee, ",
									var0000,
									".\"");
							}
						} else if (var0001 == true) {
							say("\"Perhaps 'twas for the best. Do not mistake me, ",
								var0000,
								". I do not mean to imply that thou wouldst not have fought valiantly.\" *\"In Fawn, all females -- especially the beautiful ones -- are forbidden to endanger themselves. Beauty that rivals even that of Lady Yelinda should not be marred in any way.\"");
						} else {
							say("\"No doubt there will be another day for thee, ",
								var0000,
								".\" *\"Mine own duty to Lady Yelinda kept me from joining in the fray. I could not leave her unprotected in a city so besieged.\"");
						}
					} else {
						say("\"I fear that Fawn will be crushed without the aid of thee and thy Pikemen comrades. 'Tis a horrible thought -- trapped between the storms and the goblins with no escape.\" *\"'Twill certainly take the bravest of Monitorians to lead the assault to retake the tower. I fear that my duty to Lady Yelinda doth not allow me to undertake the attempt myself.\"");
					}
				} else if (gflags[CLEARED_FAWN_TOWER] == true) {
					say("\"The Monitorians have guard towers along the central roads between cities. The Pikemen are often the only thing that stands between the goblins and the travellers.\" *\"Lady Yelinda is much relieved now that the Pikemen have wrested control of the Fawn tower from those vile goblins. 'Twas a frightening notion to be caught between the goblins and the storms... with no hope of escape.\"");
				} else {
					say("\"The Monitorians had guard towers along the central roads between cities. The Pikemen were often the only thing that stood between the goblins and the travellers.\" *\"Lady Yelinda is very concerned now that those vile goblins have wrested control of the Fawn tower from the Pikemen. 'Tis a frightening notion, being caught between the goblins and the storms... with no hope of escape.\"");
				}
				remove("tower");
				add(["Monitorians", "Pikemen", "Lady Yelinda"]);
				fallthrough;

			case "Monitorians":
				if (gflags[HAVE_WOLF_TATTOO] == true) {
					if (gflags[JORVIN_KNOWS_AVATAR_NOT_MONITORIAN] == false) {
						say("\"By the mark that thou dost wear on thy face, I judged thee as a Monitorian. Perhaps I am mistaken. Art thou from Monitor, ",
							var0000,
							"?\"");
						var0008 = Func0955();
						if (var0008) {
							say("\"I am honored to meet thee. I have always valued the brave Pikemen that guard our roads.\"");
						} else {
							say("\"Then thou must be brave indeed! Monitor hath never before welcomed outsiders into the ranks of the Pikemen.\" *\"I am honored to meet thee.\"");
						}
					} else {
						say("\"I am certain that Lady Yelinda will wish to receive thee formally once she knows that thou art in the city. I will see that thou art properly escorted when she doth wish to see thee.\"");
					}
					gflags[JORVIN_KNOWS_AVATAR_NOT_MONITORIAN] = true;
				} else {
					say("\"The Monitorians come from a city dedicated to bravery. Their soldiers are called the Pikemen. Thou mayest know them by the tattoos on their faces.\"");
				}
				remove("Monitorians");
				fallthrough;

			case "Pikemen":
				if (gflags[HAVE_WOLF_TATTOO] == true) {
					if (gflags[JORVIN_KNOWS_AVATAR_NOT_MONITORIAN] == false) {
						say("\"By the mark that thou dost wear on thy face, I judged thee as a Pikeman. Perhaps I am mistaken. Art thou from Monitor, ",
							var0000,
							"?\"");
						var0008 = Func0955();
						if (var0008) {
							say("\"I am honored to meet thee. I have always valued the brave Pikemen that guard our roads.\"");
						} else {
							say("\"Then thou must be brave indeed! Monitor hath never before welcomed outsiders into the ranks of the Pikemen.\" *\"I am honored to meet thee.\"");
						}
					} else {
						say("\"I am certain that Lady Yelinda will wish to receive thee formally once she knows that thou art in the city. I will see that thou art properly escorted when she doth wish to see thee.\"");
					}
					gflags[JORVIN_KNOWS_AVATAR_NOT_MONITORIAN] = true;
				} else {
					if (gflags[CLEARED_FAWN_TOWER] == true) {
						say("\"They are the finest warriors in the land. Though some may grumble at the tribute they ask, I think it is a small price to pay. Their bravery hath been the only thing that hath kept the goblins at bay all these years.\"");
					} else {
						say("\"They are the finest warriors in the land. Though some feel that the tribute they asked was too much, now that they have failed to hold the tower.\"");
					}
					add("tribute");
				}
				remove("Pikemen");
				fallthrough;

			case "tribute":
				if (gflags[CLEARED_FAWN_TOWER] == true) {
					say("\"The Fawn tower Pikemen levy a toll for every person that travels along this length of road.\" *\"The Pikemen must not only protect the travellers, but also insure the upkeep of the tower and this portion of the road. I do not feel that the charge is unwarranted.\"");
				} else {
					say("\"The Fawn tower Pikemen levied a toll for every person that travelled along this length of road.\" *\"The Pikemen not only protected the travellers, but also insured the upkeep of the tower and this portion of the road. I did not feel that the charge was unwarranted, although there are those in the city that disagree with me now that the tower hath fallen to the goblins.\"");
				}
				remove("tribute");
				fallthrough;

			case "Lady Yelinda":
				say("\"Lady Yelinda is the ruler of Fawn, and is the most beautiful of all women within the city. If thou seekest an audience with her, thou must speak with the Chancellor.\"");
				remove("Lady Yelinda");
				add("Chancellor");
				fallthrough;

			case "Chancellor" (remove):
				say("\"His name is Zulith. Thou mayest know him by his green robes of state. Thou canst not miss them.");
				if (gflags[FAWN_TRIAL_DONE_FIRST_DAY] && (gflags[FAWN_TRIAL_DONE] && (!gflags[ORACLE_SET_TO_INNOCENT]))) {
					say("\"Thou canst most often find Zulith in the palace, acting as Lady Yelinda's secretary.\"");
				} else {
					say("\"Thou canst most often find Zulith either in the palace, acting as Lady Yelinda's envoy to the Great Captains, or in the Temple. He seems to be a fervent follower of Beauty.\"");
					add(["Great Captains", "Temple"]);
				}
				fallthrough;

			case "Great Captains":
				say("\"The Great Captains serve as counselors to Lady Yelinda. They deal with most trade matters, and oversee the disposition of the fleets. Thou canst find them near the docks most times.\"");
				remove("Great Captains");
				add("fleets");
				fallthrough;

			case "fleets":
				say("\"Until the storms began, Fawn's means of livelihood was fishing. Now our economy is all but ruined. The storms have destroyed all of our ships.\" *\"Our fishermen must fish from the docks. We have only enough fish to feed the city. We have none to trade to the other cities. Only Alyssand still finds a way to bring money into the city.\"");
				remove("fleets");
				add("Alyssand");
				fallthrough;

			case "Alyssand":
				say("\"Alyssand is the daughter of Delin the shopkeeper. She makes fishnet stockings that she exports to wealthy customers in Moonshade.\" *\"Ever since her betrothed disappeared, Alyssand hath taken to listening to the babble of The Fellowship followers. I hope she doth not go astray.\"");
				remove("Alyssand");
				add("betrothed");
				fallthrough;

			case "betrothed":
				say("\"Alyssand's betrothed was a fisherman named Keth. He was without shelter during one of these freak storms. No one hath seen him since.\" *\"Alyssand took it well enough -- until a storm took away the engagement ring he had specially made for her in Moonshade. I suspect that she always hoped that he would come back. Now that the ring is gone, Alyssand hath had to face the truth that Keth might well be a tree now, for all we know.\"");
				remove("betrothed");
				if (var0003 == true) {
					add("engagement ring");
				}
				fallthrough;

			case "engagement ring":
				say("\"'Tis the one, in truth! I would recognize it anywhere. Keth showed it to me when he did bring it back from Moonshade.\" *\"Alyssand will be thrilled, no doubt. Perhaps this will turn her mind from the false path she now follows.\" *\"Thou mayest ask for her at Delin's shop. He should know where she is.\"");
				Func08A9();
				remove("engagement ring");
				fallthrough;

			case "Temple":
				say("\"The Temple is located beyond the palace, on the waterfront. 'Tis dedicated to Beauty, as is all of Fawn.\"");
				remove("Temple");
				fallthrough;

			case "goblins":
				if (gflags[CLEARED_FAWN_TOWER] == false) {
					if (gflags[HAVE_WOLF_TATTOO] == true) {
						say("\"We did defeat them handily with the help of the Monitorians. But now that they have organized under one leader and taken control of the tower, 'tis all we can do to hold them at bay.\"");
						add("leader");
					} else {
						say("\"The Monitorians were our only hope of withstanding the new unity of the goblins. But with the tower taken, 'tis only a matter of time before Fawn is lost. With the fleets destroyed, we dare not hope to escape their cookpots.\"");
					}
					add(["unity", "cookpots"]);
				} else {
					say("\"We had despaired of falling to their newfound unity. But we have hope again now that the tower hath been retaken.\"");
				}
				add("unity");
				remove("goblins");
				fallthrough;

			case "leader":
				say("\"A huge brute that calls himself Pomdirgun. Leastways I think that is it... hard to understand anything a goblin says.\" *\"He killed all the other goblin leaders and made himself the head chief. He is very dangerous. 'Tis almost as though he doth have a brain.\"");
				remove("leader");
				fallthrough;

			case "unity":
				say("\"For these many years the goblins fought more amongst themselves than with us. Raided the towns a time or two, but nothing truly serious.\" *\"Now they are all following one crafty goblin. Always seems to outwit the soldiers sent to kill him.\"");
				remove("unity");
				fallthrough;

			case "cookpots":
				say("\"Anyone knows that goblins devour people! Why soon before the storms began, they abducted the healer who was gathering herbs.\"");
				remove("cookpots");
				add("healer");
				fallthrough;

			case "healer":
				say("\"We took an armed band after them as quickly as possible, but all we found of him was his head... The rest was doubtless in the cookpot or the grinder. Delphynia doth do her best to take his place.\"");
				remove("healer");
				add("Delphynia");
				fallthrough;

			case "Delphynia":
				say("\"She is the town herbalist, actually. She doth spend her time between her greenhouse and the healer's hall.\" *\"We tried to send word to Moonshade or Monitor for another healer, but no one was willing to come -- what with the storms and all.\"");
				remove("Delphynia");
				fallthrough;

			case "storms":
				say("\"We expect bad weather, being located on the water as we are. But these storms seem... well... evil somehow. Lightning that causes things to disappear. Not burnt to ashes, mind thee, completely gone. Lightning that takes something and leaves something else in its place.\" *\"Thou must find shelter quickly when thou dost think a storm is approaching.\"");
				remove("storms");
				fallthrough;

			case "Fellowship troublemakers" (remove):
				if (gflags[FAWN_TRIAL_DONE_FIRST_DAY] && (gflags[FAWN_TRIAL_DONE] && (!gflags[ORACLE_SET_TO_INNOCENT]))) {
					say("\"Now, do not speak of Leon's followers in such a manner! We of Fawn have learned tolerance, thanks to the Lady's example.\"");
				} else {
					say("\"I see the guards are still spreading that gossip...\" *\"Before these strange storms started, a ship came into our port bearing no resemblance to any ship we knew. Those aboard her told us that they had voyaged from Old Sosaria. Though our seamen found this hard to believe, we accepted them.\" *\"Leon began preaching about some strange notion called The Fellowship right before the storms started. Kylista took this as a sign that the heavens were angry with us for allowing this foreign belief into the city. After seeking counsel with the Great Captains, Lady Yelinda regretfully banned the sailors and the passengers from the city.\"");
					add("Kylista");
				}
				fallthrough;

			case "Kylista":
				say("\"Kylista is the Priestess of Beauty. 'Tis her duty to see to the spiritual well-being of the people of Fawn. Her task hath not been easy since the fleet was destroyed. Many people are disillusioned.\" *\"Our only comfort lies in the revelations of the Oracle.\"");
				remove("Kylista");
				add(["revelations", "Oracle"]);
				fallthrough;

			case "revelations":
				say("\"The revelations assure us that the heavens have not totally turned their eyes from Fawn.\"");
				say("\"If thou dost visit the Temple whilst thou art here, I am sure that thou wilt be able to hear for thyself.\"");
				remove("revelations");
				fallthrough;

			case "Oracle":
				say("\"'Tis quite a marvel. Before the storms began, people came from all around to hear its revelations.\" *\"'Twas built by some mage from Moonshade for Lady Fawn. If thou wishest to know more, though, thou shouldst ask Kylista.\"");
				remove("Oracle");
				fallthrough;

			case "Wand of Detainment":
				say("\"'Tis the only thing the guards have performed correctly. We make no secret of the fact that I possess the Wand of Detainment. I find that the knowledge that I can stop even the greatest brute, or the fastest thief, doth do much to deter those who would cause mischief in our city.\"");
				remove("Wand of Detainment");
				fallthrough;

			case "Assassin":
				say("\"I arrived too late to stop the culprit, ",
					var0000,
					". I am sorry. But everyone seems to agree that the person was not dressed as a citizen of Fawn. Some say that it was one of the sailors outside the city, but that may be too hasty a decision. I will look into it further. Thou hast my word.\"");
				remove("Assassin");
				fallthrough;

			case "strange hairbrush" (remove):
				if (Func097D(PARTY, 0x0001, 0x011D, QUALITY_ANY, 0x0006)) {
					say("\"I will not ask thee where thou didst come upon this hideous object, ",
						var0000,
						". That is thy business.\"");
					say("\"I only ask that thou not show it around overly much... Thou seest, it is a hairbrush used by the goblins, and it is fashioned out of human bone.\"");
					say("\"I saw several like this in empty goblin campsites when we tried to route the goblins from this area.\"");
				} else {
					say("\"It sounds like thou art describing a hairbrush used by the goblins. It is fashioned out of human bone...\"");
					say("\"I saw several in empty goblin campsites when we tried to route the goblins from this area.\"");
				}
				fallthrough;

			case "skull" (remove):
				if (Func097D(PARTY, 0x0001, 0x00F4, QUALITY_ANY, FRAME_ANY)) {
					say("\"Thou canst tell Jendon that this is no goblin skull. He will have to find something else to hang above his door.\"");
					say("\"'Tis a bear's skull. Bears are common in this area and to the south of here as well.\"");
				} else {
					say("\"No, Jendon would not know what this is. Jendon is a city man and hath never been hunting with the guards.\"");
					say("\"'Tis a bear's skull. Bears are common in this area and to the south of here as well.\"");
				}
				fallthrough;

			case "plain shield" (remove):
				if (Func097D(PARTY, 0x0001, 0x02D9, QUALITY_ANY, FRAME_ANY)) {
					say("\"Jendon was right to send thee to me. I doubt that anyone else in Fawn takes much notice of such things...\"");
					say("\"This is a Monitorian shield, ",
						var0000,
						".\"");
					if (gflags[HAVE_WOLF_TATTOO] == true) {
						say("\"I am surprised that thou hast not realized by now... One of thy Pikeman companions will be looking for this.\"");
					} else {
						say("\"Some Pikeman will be looking for this.\"");
					}
				} else {
					say("\"I believe thou art describing a Monitorian shield, ",
						var0000,
						".\"");
					if (gflags[HAVE_WOLF_TATTOO] == true) {
						say("\"Thou dost concentrate on the battle so much that thou dost not notice thine own equipment any longer, ",
							var0000,
							".\"");
					} else {
						say("\"Look at any Pikeman thou dost meet. Thou wilt most likely see another shield precisely like the one thou hast described.\"");
					}
				}
				fallthrough;

			case "bye":
				Func08AB();
				UI_remove_npc_face0();
				Func097F(AVATAR, "@Until we meet again.@", 0x0000);
				Func097F(JORVIN, "@Walk in Beauty!@", 0x0002);
				break;
		}
	}
}

extern var Func0954 0x954 ();
extern var Func0953 0x953 ();
extern var Func0942 0x942 (var var0000);
extern void Func097F 0x97F (var var0000, var var0001, var var0002);
extern void Func07D1 object#(0x7D1) ();
extern void Func07D2 object#(0x7D2) ();
extern var Func0955 0x955 ();
extern var Func097D 0x97D (var var0000, var var0001, var var0002, var var0003, var var0004);
extern var Func0992 0x992 (var var0000, var var0001, var var0002, var var0003);
extern var Func0996 0x996 (var var0000, var var0001, var var0002, var var0003, var var0004, var var0005, var var0006);
extern void Func08AB 0x8AB ();
extern void Func08AA 0x8AA ();

void Func0436 object#(0x436) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;
	var var0008;
	var var0009;
	var var000A;
	var var000B;

	var0000 = Func0954();
	var0001 = UI_is_pc_female();
	var0002 = Func0953();
	var0003 = Func0942(IOLO);
	var0004 = find_nearby(0x00F9, 0x0028, MASK_NONE);
	if (event == DEATH) {
		var0005 = script item {
			nohalt;
			call Func0112;
		};
	}
	if ((event == PROXIMITY) && (KYLISTA->get_schedule_type() == TEND_SHOP)) {
		if ((gflags[FAWN_TRIAL_DONE_FIRST_DAY] && gflags[FAWN_TRIAL_DONE]) && (!gflags[ORACLE_SET_TO_INNOCENT])) {
			var0006 = ["@I do not deserve this!@", "@Save me, please!@", "@Such filth!@", "@I wish I had a pillow...@", "@Damn Alyssand!@", "@Curse The Fellowship!@"];
			if (VOLDIN->npc_nearby()) {
				var0006 &= "@Be still, Voldin.@" & ("@Get away from me...@" & "@Thy dreams are dust.@");
			}
			Func097F(KYLISTA, var0006[UI_get_random(UI_get_array_size(var0006))], 0x0000);
		}
	}
	if ((event == DOUBLECLICK) && (KYLISTA->get_schedule_type() != WAIT)) {
		KYLISTA->Func07D1();
		if ((gflags[FAWN_TRIAL_DONE_FIRST_DAY] && gflags[FAWN_TRIAL_DONE]) && (!gflags[ORACLE_SET_TO_INNOCENT])) {
			AVATAR->item_say("@Surprise!@");
			KYLISTA->set_schedule_type(WAIT);
			Func097F(KYLISTA, "@Hello, there...!@", 0x0002);
			KYLISTA->Func07D2();
			var0005 = script KYLISTA after 7 ticks {
				nohalt;
				call Func0436;
			};
		} else {
			AVATAR->item_say("@Greetings, noble lady!@");
			KYLISTA->Func07D1();
			Func097F(KYLISTA, (("@At thy service, " + var0000) + ".@"), 0x0005);
			KYLISTA->set_schedule_type(TALK);
		}
	}
	do {
		if (event == SCRIPTED) {
			KYLISTA->run_schedule();
			KYLISTA->clear_item_say();
			KYLISTA->show_npc_face0(0x0000);
			say("\"I am so grateful that thou hast come to visit me, ",
				var0002,
				"! Everyone else hath forgotten me. I am so lonely here...\"");
			add(["plot", "Voldin", "lonely"]);
		} else if (event != STARTED_TALKING) {
			break;
		} else {
			KYLISTA->run_schedule();
			KYLISTA->clear_item_say();
			KYLISTA->show_npc_face0(0x0000);
			var0007 = KYLISTA->get_item_flag(MET);
			if (gflags[FAWN_TRIAL_RECESS] || (gflags[FAWN_TRIAL_DONE_FIRST_DAY] && (!gflags[FAWN_TRIAL_DONE]))) {
				say("\"Thou dost make my spine shiver, thou who dost associate with the enemies of Beauty!");
				say("\"I beg thee to depart...\"");
				UI_remove_npc_face0();
				Func097F(KYLISTA, "@Depart from me!@", 0x0000);
				abort;
			}
			if (var0007 == false) {
				if (gflags[HAVE_WOLF_TATTOO] == true) {
					if (var0001 == true) {
						say("\"One of Monitor's famed Pikemen! I am Kylista, Priestess of Beauty.\"");
						say("\"I have always thought it daring of Monitorian women to wear a tattoo. Tell me, do the Monitorian men find this alluring?\"");
						var0008 = Func0955();
						if (var0008) {
							say("\"Most men seem to find me attractive... Except for the Pikemen. I had wondered why. Thank thee for the enlightening information.\"");
						} else {
							say("\"Perhaps the sight is too common to affect them. I am certain that Fawn males will not be as... unaffected, shall we say.\"");
						}
					} else {
						say("\"One of Monitor's famed Pikemen! I am Kylista, Priestess of Beauty.\"");
						say("\"What a pleasure to meet one who is brave as well as handsome.\"");
					}
				} else if (var0001 == true) {
					say("\"Welcome to Fawn. I am Kylista, Priestess of Beauty.\"");
					say("\"Mayest thou walk in Beauty.\"");
				} else {
					say("\"Welcome to Fawn, the city of Beauty. I am Kylista, Priestess of Beauty.\"");
					say("\"Hast thou come for instruction in the path of Beauty?\"");
					var0009 = Func0955();
					if (var0009) {
						say("\"Hmmm... Perhaps we could arrange private instruction...\"");
					} else {
						say("\"A pity. Private instruction is available.\"");
					}
				}
				KYLISTA->set_item_flag(MET);
			} else if (gflags[KYLISTA_CAUGHT] == true) {
				KYLISTA->set_schedule_type(IN_COMBAT);
				KYLISTA->set_attack_mode(FLEE);
				say("\"Thou hast found me out! The Oracle is a fraud!\"");
				abort;
			} else {
				say("\"Thou dost honor us with thy presence, ",
					var0002,
					".\"");
			}
			add(["goblins", "storms", "Oracle", "revelations", "bye"]);
			if ((gflags[STORM_BREAST_PLATE] || gflags[ASK_STANDARR_ABOUT_BREASTPLATE]) && (!gflags[KNOWS_BREAST_PLATE_OWNER])) {
				add("white breastplate");
			}
		}
		converse ("bye") {
			case "plot" (remove):
				say("\"I see now that Captain Voldin and his men did take advantage of me, through the deception called the Oracle.\"");
				if (VOLDIN->npc_nearby()) {
					VOLDIN->show_npc_face1(0x0000);
					say("\"Of course we did, Priestess. Men have always had the advantage over the weaker sex...\"");
					UI_remove_npc_face1();
					0x0000->set_conversation_slot();
					say("\"Be still, Voldin. Thou hast been brought low, even as I have.\"");
				}
				say("\"How could I have been so naive? I was never part of their plans, but only a tool.\"");
				say("\"Perhaps Lady Yelinda will spare my life, when she understands my role -- I, too, was a victim!\"");
				fallthrough;

			case "lonely" (remove):
				if (VOLDIN->npc_nearby()) {
					say("\"Voldin doth not count -- he is an animal. What I need is companionship...\"");
				}
				if (UI_is_pc_female()) {
					say("\"Come and visit me often, ",
						var0002,
						". I am touched that thou didst come down into this dungeon to visit me.\"");
					say("\"Perhaps we could become friends.\"");
				} else {
					say("\"Look at me, ",
						var0002,
						". I am a woman in the full bloom of my youth. Such beauty doth not deserve to dwell in the squalor of a jail cell...\"");
					say("\"They say that thou hast been making friends with young Alyssand, the weaver. I think we, too, could be friends.\"");
					say("\"And I'm the kind of friend who could keep thee warm on a cold winter's night. Not like that thin-framed weaver wench.\"");
					say("\"Think of me, ",
						var0002,
						". I'll be thinking of thee...\"");
				}
				fallthrough;

			case "goblins" (remove):
				say("\"The very antithesis of Beauty! Goblins are base savages with no appreciation of Beauty and no grasp of Beauty's truth.\"");
				add("Beauty's truth");
				fallthrough;

			case "Beauty's truth" (remove):
				say("\"All things good possess an innate Beauty that attracts all living things.\"");
				say("\"To goblins, who are vile, ugly monsters, Beauty is a lie. To Pomdirgun, Beauty is something to be exterminated, not cherished.\"");
				add("Pomdirgun");
				fallthrough;

			case "Pomdirgun" (remove):
				say("\"Pomdirgun is the epitome of all repulsive things. He hath risen to unite the goblins against all things good and Beautiful.\"");
				say("\"The heavens have tired of our wandering from Beauty's truth. They have sent Pomdirgun to destroy those that fall short of the mark.\"");
				fallthrough;

			case "storms" (remove):
				say("\"Another sign that the heavens are displeased with our associations with false prophets!\"");
				say("\"We allowed corruption to enter our city, to visit the very heart of Beauty. Some even encouraged its growth. Now we must pay for our transgressions.\"");
				say("\"Once we have been brought low enough to see only Beauty, the storms will stop and Fawn will once again prosper. But while all traces of untrue beliefs linger, the punishment will remain.\"");
				add("false prophets");
				fallthrough;

			case "false prophets" (remove):
				say("\"Those who call themselves Britannians -- the sailors that dwell outside the city gates to the northeast -- are false prophets!\"");
				say("\"We thought them poor, confused seamen worthy of our embrace. But we were fooled! All they brought were lies!\"");
				say("\"The one they call Leon denounced Beauty as a mere shadow of The Fellowship's truth! And then -- then -- did the storms come! To smite those who would utter such blasphemy!\"");
				say("\"The storms will not end until the blight of the blasphemers' existence hath been wiped from Beauty's face!\"");
				if (var0003 == true) {
					IOLO->show_npc_face1(0x0000);
					say("\"I would say that she feels rather strongly about this, Avatar.\tBut what she is proposing to stop the storms seems a bit extreme.\"");
					UI_remove_npc_face1();
					0x0000->set_conversation_slot();
				}
				add(["Leon", "Fellowship"]);
				fallthrough;

			case "Leon" (remove):
				say("\"Leon seeks to divert unsuspecting people from Beauty's path. He is the one that hath brought the anger of the heavens down upon us!\"");
				say("\"Lady Yelinda should have ordered him executed for the woes that he hath brought upon our city!\"");
				add("Lady Yelinda");
				fallthrough;

			case "Lady Yelinda" (remove):
				say("\"Lady Yelinda, honor to her, is the ruler of Fawn.\"");
				say("\"I recommended that she have these foreign blasphemers killed -- let their blood wash away the evil they have wrought. But Lady Yelinda is a soft-hearted woman who doth not know the harshness of the heavens' anger.\"");
				say("\"I fear that the Great Captains urged her to leniency in favor of their common ties with the sea.\"");
				add("Great Captains");
				fallthrough;

			case "Great Captains" (remove):
				say("\"The Great Captains are advisors to Lady Yelinda. They ensure that Lady Yelinda is not overtaxed with the tedious daily problems of ruling the city.\"");
				say("\"Joth and Garth allowed themselves to be swayed by feelings of kinship with these foreign sailors. Only Voldin recognized their true danger.\"");
				add(["Joth", "Garth", "Voldin"]);
				fallthrough;

			case "Joth" (remove):
				say("\"Joth is a good man, with a fine sense of what needs to be done to keep the fleets in good order.\"");
				say("\"He is not, I fear, a good advisor when it comes to political matters. In fact, Zulith would be better in that respect.\"");
				add("Zulith");
				fallthrough;

			case "Zulith" (remove):
				say("\"Zulith is Lady Yelinda's secretary. He schedules her audiences and acts as a messenger between her Ladyship and the Great Captains.\"");
				say("\"His official title is Chancellor, I believe.\"");
				fallthrough;

			case "Garth" (remove):
				say("\"Garth is no more than a boy! He blows with the wind of anything that catches his fancy, most notably young ladies.\"");
				say("\"Garth is of little use in all but representing the interests of the merchant captains.\"");
				fallthrough;

			case "Voldin" (remove):
				if ((gflags[FAWN_TRIAL_DONE_FIRST_DAY] && gflags[FAWN_TRIAL_DONE]) && (!gflags[ORACLE_SET_TO_INNOCENT])) {
					if (VOLDIN->get_item_flag(DEAD)) {
						say("\"He was an evil man, Avatar. Captain Voldin forced me to do his bidding, beating me when I refused!\"");
						say("\"I am glad that thou didst kill him -- glad!\"");
					} else {
						say("\"The whole scheme was his -- not mine! I did only what I was told. He forced me to serve him...\"");
						if (VOLDIN->npc_nearby()) {
							VOLDIN->show_npc_face1(0x0000);
							say("\"Liar! Thou didst enjoy thy role as Priestess, using thy sensual powers over men.\"");
							UI_remove_npc_face1();
							0x0000->set_conversation_slot();
							say("\"Oh, ",
								var0002,
								"! Thou must rescue me from the presence of this evil man!\"");
						}
					}
				} else {
					say("\"Now Voldin is truly what Fawn needs as an advisor! His record of service on land and sea is impeccable.\"");
					say("\"I fear it takes all his expertise to explain most situations to his companions. Fawn would fare much better if Voldin were Lady Yelinda's only advisor.\"");
				}
				fallthrough;

			case "Fellowship" (remove):
				say("\"Lies! Lies! Simplistic half truths meant to snare the unwitting and twist Beauty's truth!\"");
				say("\"How can any person tell heaven's will without benefit of divine guidance? The deluded fools have not heard the voice of the Oracle or felt the heavens' anger.\"");
				fallthrough;

			case "Oracle" (remove):
				say("\"The Oracle was commissioned by Lady Fawn, many years ago, as an instrument to speak the heavens' truths.\"");
				say("\"The Mages of Old Sosaria labored for nearly a year before the task was done. The revealed wonder was the Oracle.\"");
				say("\"As Priestess of Beauty, I have the power to call forth a revelation from the Oracle. In times past, before the storms began, people came from all around to hear the Oracle's divine words.\"");
				fallthrough;

			case "revelations":
				say("\"The revelations are truths of heaven filtered through a mouth of stone!\"");
				say("\"It is a pity that thou wilt not hear a revelation... I have decided to close the rituals to all outsiders. We cannot be too careful, after what happened with the false prophets.\"");
				remove("revelations");
				fallthrough;

			case "white breastplate" (remove):
				gflags[KNOWS_BREAST_PLATE_OWNER] = true;
				if (Func097D(PARTY, 0x0001, 0x01A3, QUALITY_ANY, 0x0000)) {
					say("\"Thou hast the Armour of Beauty! Oh, what a sign from the heavens!\"");
					say("\"Return it to me... Perhaps the heavens shall once again smile upon Fawn.\"");
					if (Func0955() == true) {
						var000A = Func0992(0x0001, "@But what about thine own armour, Avatar?@", "@But what of mine own armour?@", false);
						if (var000A != AVATAR) {
							0x0000->set_conversation_slot();
						}
						say("\"Oh, was that strange armour that appeared in my bedchamber thine?\"");
						say("\"I cannot recall what I did with it. Perhaps I still have it... Perhaps thou wilt come by some evening and I will look for it.\"");
						var000B = Func0996(PARTY, KYLISTA, 0x0001, 0x01A3, QUALITY_ANY, 0x0000, false);
						say("\"I thank thee, ",
							var0000,
							"!\"");
					} else {
						say("\"Why dost thou not give it to me?\"");
					}
				} else {
					say("\"Thou hast seen the Armour of Beauty! Oh, will the heavens never smile upon Fawn again?. I would that thou hadst brought it with thee.\"");
					var000A = Func0992(0x0001, "@But what about thine own armour, Avatar?@", "@But what of mine own armour?@", false);
					if (var000A != AVATAR) {
						0x0000->set_conversation_slot();
					}
					say("\"Oh, was that strange armour that appeared in my bedchamber thine?\"");
					say("\"I cannot recall what I did with it. Perhaps I still have it... Perhaps thou wilt come by some evening and I will look for it.\"");
				}
				fallthrough;

			case "bye":
				Func08AB();
				UI_remove_npc_face0();
				Func097F(AVATAR, "@Farewell.@", 0x0000);
				Func097F(KYLISTA, (("@Walk in Beauty, " + var0002) + ".@"), 0x0002);
				Func08AA();
				break;
		}
	} while (false);
}

extern var Func0954 0x954 ();
extern var Func0953 0x953 ();
extern var Func0988 0x988 (var var0000, var var0001);
extern void Func07D1 object#(0x7D1) ();
extern void Func097F 0x97F (var var0000, var var0001, var var0002);
extern var Func09A0 0x9A0 (var var0000, var var0001);
extern var Func099B 0x99B (var var0000, var var0001, var var0002, var var0003, var var0004, var var0005, var var0006);
extern var Func0992 0x992 (var var0000, var var0001, var var0002, var var0003);
extern void Func07D2 object#(0x7D2) ();
extern void Func08AB 0x8AB ();
extern void Func0435 object#(0x435) ();

void Func0437 object#(0x437) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;
	var var0008;
	var var0009;
	var var000A;
	var var000B;
	var var000C;
	var var000D;
	var var000E;
	var var000F;
	var var0010;
	var var0011;
	var var0012;
	var var0013;
	var var0014;
	var var0015;
	var var0016;

	if (YELINDA->get_item_flag(POLYMORPH) && (event == STARTED_TALKING)) {
		var0000 = script YELINDA->get_npc_object() {
			nohalt;
			call Func0294;
		};
		YELINDA->run_schedule();
		abort;
	}
	if (event == BG_PATH_FAILURE) {
		if (gflags[BANES_RELEASED] && (!gflags[RETURNED_COMB_OF_BEAUTY])) {
			YELINDA->set_polymorph(0x0294);
		}
	}
	var0001 = Func0954();
	var0002 = UI_is_pc_female();
	var0003 = Func0953();
	var0004 = YELINDA->get_npc_id();
	if (event == DEATH) {
		var0000 = script item {
			nohalt;
			call Func0112;
		};
	}
	if (event == SCRIPTED) {
		var0005 = UI_get_party_list2();
		for (var0008 in var0005 with var0006 to var0007) {
			var0009 = var0008->get_schedule_type();
			if (var0008->get_schedule_type() == WAIT) {
				var0000 += 0x0001;
			}
		}
		if (gflags[TEMP_FLAG_1]) {
			UI_fade_palette(0x000C, 0x0001, 0x0000);
			var000A = [0x03A4, 0x06F7, 0x0006];
			var000B = 0x0000;
			if (gflags[DUPRE_ACCUSED]) {
				var0008 = DUPRE;
			}
			if (gflags[SHAMINO_ACCUSED]) {
				var0008 = SHAMINO;
			}
			if (gflags[IOLO_ACCUSED]) {
				var0008 = IOLO;
			}
			var0008->remove_from_party();
			var0008->remove_npc();
			var0005 = UI_get_party_list2();
			for (var0008 in var0005 with var000C to var000D) {
				var0008->set_schedule_type(FOLLOW_AVATAR);
				var0008->move_object([0x03A9, (0x06F1 + (var000B * 0x0002)), 0x0006]);
				var0000 = script var0008 {
					nohalt;
					face west;
				};
				var000B += 0x0002;
			}
			JORVIN->set_alignment(NEUTRAL);
			AVATAR->move_object(var000A);
			var0000 = script AVATAR after 10 ticks {
				nohalt;
				call Func0400;
			};
			gflags[TEMP_FLAG_1] = false;
			YELINDA->revert_schedule();
			JORVIN->revert_schedule();
			JORVIN->run_schedule();
			abort;
		}
		var0005 = Func0988(AVATAR->get_npc_object(), UI_get_party_list2());
		for (var0008 in var0005 with var000E to var000F) {
			if (var0008->get_item_flag(SI_ZOMBIE)) {
				var0008->clear_item_flag(SI_ZOMBIE);
				var0000 = script var0008 {
					nohalt;
					say "@Oh!@";
					actor frame bowing;
					actor frame kneeling;
					actor frame sleeping;
				};
				var0008->set_schedule_type(WAIT);
				var0010 = var0008->get_object_position();
				var0010[0x0001] -= var0010[0x0003] / 0x0002;
				var0010[0x0002] -= var0010[0x0003] / 0x0002;
				UI_sprite_effect(ANIMATION_SWORD_STRIKE, var0010[0x0001], var0010[0x0002], 0x0000, 0x0000, 0x0000, LOOP_ONCE);
				UI_play_sound_effect(0x0039);
			}
		}
		var0008 = false;
		for (var0013 in var0005 with var0011 to var0012) {
			if (var0013->npc_nearby() && ((!(var0013->get_schedule_type() == WAIT)) && (!var0013->get_item_flag(SI_ZOMBIE)))) {
				var0008 = var0013;
			}
		}
		if (var0008) {
			var0008->set_item_flag(SI_ZOMBIE);
			var0000 = JORVIN->set_to_attack(var0008, 0x0118);
			var0000 = script JORVIN {
				actor frame strike_1h;
				sfx 53;
				attack;
				actor frame standing;
			};
			var0000 = script AVATAR after 2 ticks {
				nohalt;
				call Func0437;
			};
		} else if (JORVIN->get_item_flag(SI_ZOMBIE)) {
			gflags[TEMP_FLAG_1] = true;
			var0010 = AVATAR->get_object_position();
			AVATAR->set_item_flag(DONT_MOVE);
			AVATAR->set_schedule_type(WAIT);
			var0010[0x0001] -= var0010[0x0003] / 0x0002;
			var0010[0x0002] -= var0010[0x0003] / 0x0002;
			UI_sprite_effect(ANIMATION_SWORD_STRIKE, var0010[0x0001], var0010[0x0002], 0x0000, 0x0000, 0x0000, LOOP_ONCE);
			UI_play_sound_effect(0x0039);
			var0000 = script AVATAR {
				nohalt;
				actor frame bowing;
				actor frame kneeling;
				actor frame sleeping;
				call Func0437;
			};
		} else {
			var0000 = JORVIN->set_to_attack(AVATAR, 0x0118);
			var0000 = script JORVIN {
				actor frame strike_1h;
				sfx 53;
				attack;
				actor frame standing;
			};
			var0000 = script AVATAR after 2 ticks {
				nohalt;
				call Func0437;
			};
			JORVIN->set_item_flag(SI_ZOMBIE);
		}
		abort;
	}
	if (event == DOUBLECLICK) {
		if (YELINDA->get_item_flag(POLYMORPH)) {
			AVATAR->item_say("@Lady!@");
			item->Func07D1();
			Func097F(item, "@Avert thine eyes!@", 0x0002);
			set_schedule_type(TALK);
		} else {
			AVATAR->item_say("@Greetings, Lady.@");
			YELINDA->Func07D1();
			Func097F(YELINDA, (("@Greetings, " + var0001) + ".@"), 0x0002);
			YELINDA->set_schedule_type(TALK);
			if (gflags[HAVE_YELINDA_AUDIENCE] && (!(gflags[DUPRE_ACCUSED] || (gflags[SHAMINO_ACCUSED] || gflags[IOLO_ACCUSED])))) {
				JORVIN->si_path_run_usecode(YELINDA->get_object_position(), SI_PATH_SUCCESS, JORVIN->get_npc_object(), Func0435, false);
			}
		}
	}
	if (event == STARTED_TALKING) {
		YELINDA->run_schedule();
		YELINDA->clear_item_say();
		YELINDA->show_npc_face0(0x0000);
		if (gflags[FAWN_TRIAL_RECESS] || (gflags[FAWN_TRIAL_DONE_FIRST_DAY] && (!gflags[FAWN_TRIAL_DONE]))) {
			say("\"It is not fitting that I be seen with thee until thou hast been judged by the Oracle.\"");
			say("\"Please do not approach me again until the Oracle hath ruled!\"");
			UI_remove_npc_face0();
			Func097F(YELINDA, "@'Tis unseemly!@", 0x0000);
			abort;
		}
		if (gflags[BANES_RELEASED] == true) {
			if (gflags[RETURNED_COMB_OF_BEAUTY] == true) {
				say("\"Thank thee, Avatar! Thank thee for returning me to my former Beauty.\"");
			} else {
				say("\"I wish I had some way to further reward thee, ",
					var0003,
					". I wish thee luck on thy quest!\"");
			}
		} else {
			var0014 = YELINDA->get_item_flag(MET);
			if (gflags[HAVE_YELINDA_AUDIENCE] && (!gflags[AUDIENCE_WITH_YELINDA])) {
				if (IOLO->npc_nearby() && IOLO->get_item_flag(IN_PARTY)) {
					gflags[IOLO_HAS_DIAMOND_NECKLACE] = true;
					gflags[AUDIENCE_WITH_YELINDA] = true;
					UI_play_music(0x001F, Func09A0(0x0005, 0x0001));
					say("\"I am so glad that thou hast come -- and thou hast brought the Good Bard Iolo!\"");
					say("\"Dear Iolo, our subjects have spoken of that fine ballad which thou didst sing, and thy devotion to thy lost wife hath touched our heart.\"");
					say("\"I give thee this White Diamond Necklace, which thou mayest give to thy beloved when thou dost at last find her. It is a twin to mine own, except that mine is of a more subtle hue.\"");
					var0000 = Func099B(IOLO, 0x0001, 0x03BB, 0x0000, 0x0008, 0x0000, true);
					IOLO->show_npc_face1(0x0000);
					say("\"Thou art too kind, Lady! I thank thee, and shall give it to Gwenno upon our reunion!\"");
					UI_remove_npc_face1();
					0x0000->set_conversation_slot();
					say("\"This calls for a toast. Hail to Beauty!\"");
					var0015 = Func0992(0x0001, "@To Beauty!@", "@To Beauty!@", false);
					0x0000->set_conversation_slot();
					say("\"And to love! Let us drink to the virtues of romance and bliss!\"");
					var0015 = Func0992(0x0001, "@To bliss!@", "@To bliss!@", false);
					0x0000->set_conversation_slot();
					say("\"And to good rulers, such as beloved Queen Fawn, who founded our fine society.\"");
					var0015 = false;
					var0016 = UI_get_party_list();
					if (DUPRE->get_npc_object() in var0016) {
						var0015 = DUPRE;
						gflags[DUPRE_ACCUSED] = true;
					} else if (SHAMINO->get_npc_object() in var0016) {
						var0015 = SHAMINO;
						gflags[SHAMINO_ACCUSED] = true;
					} else if (IOLO->get_npc_object() in var0016) {
						var0015 = IOLO;
						gflags[IOLO_ACCUSED] = true;
					}
					var0015->show_npc_face1(0x0000);
					say("\"Thou must not forget our distant liege, Lady Yelinda. All hail Lord British and the glory that is Britannia!\"");
					UI_remove_npc_face1();
					UI_play_music(0x001E, Func09A0(0x0005, 0x0001));
					0x0000->set_conversation_slot();
					say("\"Oh, my!\"");
					JORVIN->show_npc_face1(0x0000);
					say("\"Milady, this one is allied with that foul fiend, Beast British!\"");
					UI_remove_npc_face1();
					0x0000->set_conversation_slot();
					say("\"This is blasphemy! Jorvin, lock that criminal away and call for a speedy trial. Let this intruder be executed, even as Beast British slew our forefathers during his conquest of Sosaria!\"");
					UI_remove_npc_face0();
					JORVIN->set_schedule_type(WAIT);
					JORVIN->Func07D2();
					var0000 = script AVATAR after 0 ticks {
						nohalt;
						call Func0437;
					};
					Func097F(JORVIN, "@Take this!@", 0x0000);
					YELINDA->set_new_schedules(MIDNIGHT, SHY, [0x0000, 0x0000]);
					YELINDA->run_schedule();
					Func097F(YELINDA, "@Blasphemer!@", 0x0005);
					var0000 = 0x0003;
					while (var0000 > 0x0000) {
						var0008 = UI_create_new_object2(0x017D, [0x0000, 0x0000, 0x0000]);
						if (var0008) {
							var0000 = var0008->approach_avatar(0x005A, 0x0028);
							if (var0000) {
								var0008->si_path_run_usecode(JORVIN->get_object_position(), SI_PATH_SUCCESS, var0008, Func017D, true);
							}
						}
						var0000 -= 0x0001;
					}
					if (var0008) {
						Func097F(var0008, "@Save the Queen!@", 0x0002);
					}
					abort;
				}
				say("\"\"I am so glad that thou hast come... But where is the Good Bard Iolo?\"");
				say("\"I wish to welcome him as well as thee. Return when he is with thee!\"");
				abort;
			}
			if (var0014 == false) {
				if ((var0002 == true) && (gflags[HAVE_WOLF_TATTOO] == true)) {
					say("\"What an interesting Beauty mark thou hast... I am Lady Yelinda, ruler of Fawn -- the city of Beauty.\"");
				} else {
					say("\"Welcome to the city of Beauty. I am Lady Yelinda, ruler of Fawn.\"");
				}
			} else if (gflags[FAWN_TRIAL_DONE_FIRST_DAY] && (!gflags[FAWN_TRIAL_DONE])) {
				say("\"Until thy friend's innocence or guilt hath been proven, Avatar, we may not speak together.\"");
				UI_remove_npc_face0();
				Func097F(YELINDA, "@I am sorry...@", 0x0000);
				abort;
			} else {
				say("\"Welcome back, ",
					var0003,
					". Thy presence in Fawn adds greatly\tto its Beauty.\"");
			}
		}
		YELINDA->set_item_flag(MET);
		add(["Fawn", "Beauty", "goblins", "storms", "name"]);
		converse ("bye") {
			case "goblins":
				say("\"Oh, horrible, vile creatures! They have killed all the Pikemen that were guarding the road to our beautiful city.\"");
				say("\"Whatever shall we do now?\"");
				remove("goblins");
				add("Pikemen");
				fallthrough;

			case "Pikemen":
				say("\"Wonderful people. They hail from Monitor. They keep the roads safe.\"");
				remove("Pikemen");
				add("Monitor");
				fallthrough;

			case "Monitor" (remove):
				say("\"'Tis south of here. I do not associate with them. They are too warlike.\"");
				if (gflags[FAWN_TRIAL_DONE_FIRST_DAY] && (gflags[FAWN_TRIAL_DONE] && (!gflags[ORACLE_SET_TO_INNOCENT]))) {
					say("\"Chancellor Zulith deals with them for me.\"");
					add("Chancellor");
				} else {
					say("\"The Great Captains deal with them for me.\"");
					add("Great Captains");
				}
				fallthrough;

			case "Great Captains":
				say("\"Yes, Joth, Garth, and Voldin. They are my most trusted advisors... Aside from the Chancellor, of course.\"");
				say("\"They handle all the horrible little details of running the city. I would be lost without them, 'tis certain.\"");
				remove("Great Captains");
				add("Chancellor");
				fallthrough;

			case "Chancellor":
				say("\"Zulith is a dear little man. He absolutely dotes on me, I fear. He simply would not have a life if he were not looking after me. He keeps all the paperwork for me and schedules mine audiences. Quite a mouse of a man, though.\"");
				remove("Chancellor");
				fallthrough;

			case "storms" (remove):
				say("\"Quite a nuisance, actually.\"");
				if (gflags[FAWN_TRIAL_DONE_FIRST_DAY] && (gflags[FAWN_TRIAL_DONE] && (!gflags[ORACLE_SET_TO_INNOCENT]))) {
					say("\"Alyssand tells me that the storms are the result of a lack of devotion to the pure concept of Beauty.");
					say("\"She is quite helpful to me. I think I shall make her my chief advisor...\"");
				} else {
					say("\"The Oracle says the storms are a result of permitting the heretics within the city gates.\"");
					say("\"Odd that they did not stop after the heretics were banished from the city. I shall have to consult Kylista.\"");
					add("heretics");
					if (!gflags[YELINDA_SPOKE_ORACLE]) {
						add("Oracle");
					}
				}
				fallthrough;

			case "heretics":
				say("\"Those filthy sailors camped outside the city gates have no regard whatsoever for Beauty. They preach some ridiculous notion about brotherhood... or some such.\"");
				remove("heretics");
				add("sailors");
				fallthrough;

			case "sailors":
				say("\"They and their passengers arrived shortly before the storms began.\"");
				remove("sailors");
				add("passengers");
				fallthrough;

			case "passengers":
				say("\"There was a portly mage named Batlin and a lovely lady named Gwenno.\"");
				remove("passengers");
				add(["Batlin", "Gwenno"]);
				fallthrough;

			case "Batlin":
				say("\"A disagreeable fellow. Travelled with some very rough sorts. He was seeking Daemon artifacts, I believe.\"");
				remove("Batlin");
				add("Daemon artifacts");
				fallthrough;

			case "Daemon artifacts":
				say("\"Thou mayest find them throughout the land. They are of little interest... not Beautiful at all.\"");
				remove("Daemon artifacts");
				fallthrough;

			case "Gwenno":
				say("\"She was interested in folk tales, I believe. I am afraid I could not help her. My last bard was transformed into a fox during a storm and ran away.\"");
				remove("Gwenno");
				fallthrough;

			case "Fawn" (remove):
				say("\"Our city was named after the beautiful ruler who commissioned the Oracle.\"");
				gflags[KNOW_FAWN_MEANING] = true;
				if (gflags[FAWN_TRIAL_RECESS] || (!gflags[FAWN_TRIAL_DONE])) {
					add("Oracle");
				}
				fallthrough;

			case "Oracle":
				say("\"Thou hast never heard of the Oracle of Beauty?\" *\"Thou shouldst speak with Kylista at the temple.\"");
				gflags[YELINDA_SPOKE_ORACLE] = true;
				remove("Oracle");
				add("Kylista");
				fallthrough;

			case "Kylista":
				say("\"She is the most beautiful woman in town...\"");
				say("\"aside from myself, of course.\"");
				say("\"She is the Priestess of Beauty. Thou canst find her at the temple.\"");
				remove("Kylista");
				add("temple");
				fallthrough;

			case "temple":
				say("\"'Tis the largest building in the city, except for my palace.\"");
				remove("temple");
				fallthrough;

			case "Beauty":
				say("\"We revere and protect all beautiful things here in Fawn. Everyone is dedicated to the truths of Beauty.\"");
				remove("Beauty");
				if (gflags[KNOW_FAWN_MEANING] == false) {
					add("Fawn");
				}
				fallthrough;

			case "name":
				say("\"Forgive me, I thought I had already introduced myself. I am Lady Yelinda.\"");
				remove("name");
				fallthrough;

			case "bye":
				Func08AB();
				UI_remove_npc_face0();
				Func097F(AVATAR, "@Farewell, gracious Lady!@", 0x0000);
				Func097F(YELINDA, "@Do come again!@", 0x0002);
				break;
		}
	}
}

extern var Func0954 0x954 ();
extern var Func0953 0x953 ();
extern var Func0942 0x942 (var var0000);
extern void Func07D1 object#(0x7D1) ();
extern void Func097F 0x97F (var var0000, var var0001, var var0002);
extern void Func0965 0x965 ();
extern void Func0966 0x966 ();
extern var Func0955 0x955 ();

void Func0438 object#(0x438) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;

	var0000 = Func0954();
	var0001 = UI_is_pc_female();
	var0002 = Func0953();
	var0003 = Func0942(KALEN);
	if (event == DEATH) {
		var0004 = script item {
			nohalt;
			call Func0112;
		};
	}
	if (event == DOUBLECLICK) {
		AVATAR->item_say("@A moment if thou wilt, sir.@");
		LEON->Func07D1();
		Func097F(LEON, (("@At thy service, " + var0000) + ".@"), 0x0002);
		LEON->set_schedule_type(TALK);
	}
	if (event == STARTED_TALKING) {
		LEON->run_schedule();
		LEON->clear_item_say();
		LEON->show_npc_face0(0x0000);
		var0005 = LEON->get_item_flag(MET);
		if (var0005 == false) {
			if (gflags[HAVE_WOLF_TATTOO] == true) {
				say("\"At last, the values of The Fellowship have reached into the ranks of the Pikemen! I am honored.\"");
				say("\"I am Leon, a speaker for The Fellowship and former farmer.\"");
				add("Fellowship");
			} else {
				say("\"I always have time for those who come seeking knowledge. Be welcome.\"");
				say("\"I am Leon, a speaker for The Fellowship and former farmer.\"");
			}
			LEON->set_item_flag(MET);
		} else {
			say("\"As always, I am honored that thou choosest to visit me, ",
				var0002,
				". How may I help thy quest for Unity?\"");
		}
		converse (["goblins", "storms", "bye"]) {
			case "Fellowship":
				say("\"While the Virtues that Lord British expounded are all very well and good, they are nearly impossible for ordinary people to achieve.\"");
				say("\"Simple people need a simple philosophy.\"");
				say("\"The Triad of Inner Strength is the answer.\"");
				remove("Fellowship");
				gflags[LEON_SPOKE_FELLOWSHIP] = true;
				add("Triad of Inner Strength");
				Func0965();
				fallthrough;

			case "Triad of Inner Strength" (remove):
				say("\"The Triad of Inner Strength is based on three basic principles that all people can grasp. The first is Unity. The next is Trust, and the last is Worthiness.\"");
				UI_push_answers();
				add(["Unity", "Trust", "Worthiness"]);
				fallthrough;

			case "Unity":
				say("\"Surely thou must know the importance of learning to cooperate and work together.\"");
				say("\"If we seek to live in harmony with one another, there is nothing we cannot accomplish. One rock doth not make a wall. But many rocks can -- with a common purpose.\"");
				remove("Unity");
				gflags[LEON_SPOKE_UNITY] = true;
				if ((gflags[LEON_SPOKE_UNITY] == true) && ((gflags[LEON_SPOKE_TRUST] == true) && ((gflags[LEON_SPOKE_WORTHINESS] == true) && (gflags[LEON_SPOKE_INNER_VOICE] == true)))) {
					UI_pop_answers();
				}
				fallthrough;

			case "Trust":
				say("\"The main stumbling block to Unity lies in a lack of Trust.\"");
				say("\"If thou dost trust thy brother, thou wouldst not live in fear. Without fear, our lives are happier and Unity may grow and thrive.\"");
				remove("Trust");
				gflags[LEON_SPOKE_TRUST] = true;
				if ((gflags[LEON_SPOKE_UNITY] == true) && ((gflags[LEON_SPOKE_TRUST] == true) && ((gflags[LEON_SPOKE_WORTHINESS] == true) && (gflags[LEON_SPOKE_INNER_VOICE] == true)))) {
					UI_pop_answers();
				}
				fallthrough;

			case "Worthiness":
				say("\"How wouldst thou feel, if all that thou hadst strived for were given to a man who had done nothing to deserve it?\"");
				say("\"I will wager that thou wouldst feel the injustice.\"");
				say("\"If everyone strives to be worthy of that which they seek, such injustices would be few.\"");
				say("\"Let every person be rewarded according to their merits and Trust and Unity will follow naturally.\"");
				say("\"Following the Triad of Inner Strength allows one to become attuned to the Inner Voice.\"");
				remove("Worthiness");
				add("Inner Voice");
				gflags[LEON_SPOKE_WORTHINESS] = true;
				if ((gflags[LEON_SPOKE_UNITY] == true) && ((gflags[LEON_SPOKE_TRUST] == true) && ((gflags[LEON_SPOKE_WORTHINESS] == true) && (gflags[LEON_SPOKE_INNER_VOICE] == true)))) {
					UI_pop_answers();
				}
				fallthrough;

			case "Inner Voice":
				say("\"The Inner Voice is within all living beings. It flows from pure instinct and contains all the wisdom and irreproachable logic that anyone would ever need to live peacefully and happily.\"");
				say("\"If everyone learned to listen to their Inner Voice, I could return to Britannia and farm contentedly for the rest of my life.\"");
				remove("Inner Voice");
				gflags[LEON_SPOKE_INNER_VOICE] = true;
				if ((gflags[LEON_SPOKE_UNITY] == true) && ((gflags[LEON_SPOKE_TRUST] == true) && ((gflags[LEON_SPOKE_WORTHINESS] == true) && (gflags[LEON_SPOKE_INNER_VOICE] == true)))) {
					UI_pop_answers();
				}
				fallthrough;

			case "philosophy" (remove):
				Func0966();
				fallthrough;

			case "goblins" (remove):
				if (gflags[FAWN_TRIAL_DONE_FIRST_DAY] && (gflags[FAWN_TRIAL_DONE] && (!gflags[ORACLE_SET_TO_INNOCENT]))) {
					say("\"Now that Lady Yelinda hath admitted my people within the city walls, we shall be safe from the goblins.\"");
				} else {
					if (gflags[HAVE_WOLF_TATTOO] == true) {
						if (gflags[CLEARED_FAWN_TOWER] == true) {
							say("\"Without the fine aid of thee and thy Monitorian comrades, these poor sailors and I would have been lost long ago.\"");
							say("\"Kylista refused us the safety of the city walls, even when the tower fell to the barbaric goblins.\"");
							say("\"I never thought that I would rue the day that another intelligent being learned the truths of The Fellowship.\"");
							say("\"But we would be doing far better if the goblins had not found Unity under the leadership of Pomdirgun.\"");
						} else {
							say("\"Hast thou come seeking the wisdom of The Fellowship so that thee and thy Monitorian comrades can reclaim the tower?\"");
							say("\"Even now, Kylista refuses us refuge within the city walls.\"");
							say("\"Obviously, she fears the truths of The Fellowship as much as she fears Pomdirgun.\"");
						}
					} else if (gflags[CLEARED_FAWN_TOWER] == true) {
						say("\"Without the fine aid of the Pikemen, these poor sailors and I would have been lost long ago.\"");
						say("\"Kylista refused us the safety of the city walls, even when the tower fell to the barbaric goblins.\"");
						say("\"I never thought that I would rue the day that another intelligent being learned the truths of The Fellowship.\"");
						say("\"But we would be doing far better if the goblins had not found Unity under the leadership of Pomdirgun.\"");
					} else {
						say("\"Thou art one among many that have come seeking the wisdom of The Fellowship to withstand these difficult times.\"");
						say("\"Thou shouldst not stay overlong outside the city walls, even if Kylista refuses refuge to me and my companions.\"");
						say("\"Obviously, she fears the truths of The Fellowship as much as she fears Pomdirgun.\"");
					}
					add(["Kylista", "Pomdirgun"]);
					if (gflags[LEON_SPOKE_FELLOWSHIP] == false) {
						add("Fellowship");
					}
				}
				fallthrough;

			case "Kylista":
				say("\"She is the Priestess of Beauty -- the cult that controls Fawn.\"");
				say("\"Kylista presides over the Oracle, which never varies in supporting her views...\"");
				say("\"One might suspect that Kylista uses the Oracle to increase her own personal power. But I have no idea how such a thing would be accomplished.\"");
				remove("Kylista");
				add("Oracle");
				fallthrough;

			case "Oracle":
				say("\"It was commissioned by Lady Fawn herself, and built by the Mages of Britannia.\"");
				say("\"'Twas to be an instrument of truth... I cannot say that that is still so.\"");
				say("\"It gives revelations throughout the day.\"");
				remove("Oracle");
				add("revelations");
				fallthrough;

			case "revelations":
				say("\"For the most part, they are simple platitudes that further ingrain their reverence of Beauty.\"");
				say("\"They do nothing to help the people improve their lives.\"");
				say("\"At other times -- like when the sailors and I were banished from the city -- they reflect the wishes of Kylista and the Great Captains.\"");
				remove("revelations");
				add("Great Captains");
				fallthrough;

			case "Great Captains":
				say("\"They are the counselors of Lady Yelinda, by title. They control the fishing fleets... or did before the storms began.\"");
				say("\"In reality, they control all of Fawn. It is painfully obvious that Lady Yelinda is merely a figurehead to be manipulated by Zulith at the behest of Garth, Joth, and Voldin.\"");
				remove("Great Captains");
				add(["Zulith", "Garth", "Joth", "Voldin"]);
				fallthrough;

			case "Zulith":
				say("\"'Tis easy enough to overlook him, unless he wants thy notice. He is a simpering little man who styles himself as the consort of Lady Yelinda.\"");
				say("\"Sadly, she pays no more heed of him than her mirror. Her interests, I think, lie more in line with Jorvin, Captain of the Guard.\"");
				say("\"Zulith is a puppet for Kylista and the Great Captains. But beware of him, friend, for he can be vicious if slighted.\"");
				remove("Zulith");
				fallthrough;

			case "Garth":
				say("\"Garth is the most junior of the three Great Captains. His interests seem to lie mostly in impressing the ladies of the city.\"");
				say("\"I do not think he dares go against the wishes of the other two Captains.\"");
				remove("Garth");
				fallthrough;

			case "Joth":
				say("\"Joth is the only one of the Great Captains that seems to have any real interest in the fleets. He would certainly be more at home on the deck of a ship than here on land.\"");
				remove("Joth");
				fallthrough;

			case "Voldin":
				say("\"Voldin is perhaps the person who would most benefit from practicing Worthiness.\"");
				say("\"I have heard that he is diverting funds from the fleets for his own gain. But who can say for sure?\"");
				say("\"It is his heavy hand that holds the reins of the city. Thou shouldst be careful around him. He is a violent man.\"");
				remove("Voldin");
				fallthrough;

			case "Pomdirgun":
				say("\"He hath but lately declared himself chief of all goblins.\"");
				say("\"Where once they could be discouraged by the mere presence of armed resistance, they now are bold and organized. They no longer flee, but stay and fight.\"");
				remove("Pomdirgun");
				fallthrough;

			case "storms":
				say("\"The storms at sea cannot compare to these unnatural occurrences. Their very existence says that we are in a land so far from the natural order of things that even the skies lash out at us.\"");
				say("\"Batlin was right. We cannot hope to survive if Unity is not brought to this place.\"");
				remove("storms");
				add("Batlin");
				fallthrough;

			case "Batlin":
				say("\"Thou knowest Batlin?\"");
				var0006 = Func0955();
				if (var0006) {
					say("\"What canst thou tell us of home? What news of his noble cause?\"");
					add(["All Is Well.", "It Hath Been Disbanded."]);
				} else {
					say("\"What a wondrous man of insight he is!\"");
					say("\"Without him giving voice to the Triad of Inner Strength, we would all be doomed to failure... failure to live up to Lord British's high standards, or realize the full potential of every one of us.\"");
					say("\"'Tis a pity that thou didst miss him. He hath gone inland to spread word of The Fellowship.\"");
				}
				remove("Batlin");
				fallthrough;

			case "All Is Well.":
				say("\"Marvelous! Soon thou shalt see, everyone shall embrace the Triad of Inner Strength. The storms shall end and we shall live in peace and happiness all our days.\"");
				remove("All Is Well.");
				fallthrough;

			case "It Hath Been Disbanded.":
				say("\"This is unthinkable! Surely there hath been some mistake!\"");
				say("\"There is nothing evil in our principles! They are meant for all, without regard for station of birth.\"");
				say("\"Batlin must be told of this! If he returns to Britannia to explain to Lord British, I am sure that everything will be settled.\"");
				say("\"Perhaps our good name was degraded by those wishing to stop our ministering... But that shows a lack of Trust.\"");
				say("\"I must meditate on this. Mine Inner Voice will no doubt provide an answer for such horrible news.\"");
				Func097F(LEON, "@This cannot be!@", 0x0000);
				LEON->set_schedule_type(SHY);
				abort;

			case "bye":
				UI_remove_npc_face0();
				Func097F(AVATAR, "@Many thanks for thine help.@", 0x0000);
				Func097F(LEON, (("@Go in Fellowship, " + var0002) + ".@"), 0x0005);
				break;
		}
	}
}

extern var Func0954 0x954 ();
extern var Func0953 0x953 ();
extern void Func07D1 object#(0x7D1) ();
extern void Func097F 0x97F (var var0000, var var0001, var var0002);
extern void Func08AA 0x8AA ();
extern var Func0992 0x992 (var var0000, var var0001, var var0002, var var0003);

void Func0439 object#(0x439) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;

	var0000 = Func0954();
	var0001 = UI_is_pc_female();
	var0002 = Func0953();
	if (event == DOUBLECLICK) {
		AVATAR->item_say("@Greetings.@");
		KALEN->Func07D1();
		Func097F(KALEN, "@What dost thou want?@", 0x0005);
		KALEN->set_schedule_type(TALK);
	}
	if (event == STARTED_TALKING) {
		KALEN->run_schedule();
		KALEN->clear_item_say();
		KALEN->show_npc_face0(0x0000);
		var0003 = KALEN->get_item_flag(MET);
		if (var0003 == false) {
			if (gflags[HAVE_WOLF_TATTOO] == true) {
				if (var0001 == true) {
					say("\"Bold wench, thou art, to wear a tattoo so openly.\"");
				} else {
					say("\"Be careful, mate, lest thou be mistaken for an honest seafarin' man.\"");
				}
			} else {
				say("\"I have business to attend to. Be quick.\"");
			}
			KALEN->set_item_flag(MET);
		} else {
			say("\"Returned again?\"");
		}
		if (gflags[KALEN_IS_DEAD] == true) {
			add("assassin");
		}
		add(["name", "job", "goblins", "storms"]);
		if (gflags[BANES_RELEASED] == true) {
			add("Iolo the Mad");
		}
		converse ("bye") {
			case "name":
				say("\"Second Mate Kalen, to ye.\"");
				remove("name");
				fallthrough;

			case "job":
				say("\"I'm a seafarer. And I do whate'er the Cap'n wants done.\"");
				remove("job");
				fallthrough;

			case "goblins" (remove):
				say("\"Green fellows. Hospitable. Be thou sure to accept their dinner invitation.\"");
				fallthrough;

			case "storms" (remove):
				say("\"Afraid of a bit of rain?\"");
				if (var0001 == true) {
					say("\"I can keep ye safe, darlin'. Thou shouldst come over ta mine hut...\"");
				} else {
					say("\"Run back to town like a good boy. I am sure the Lady would find ye an interesting pet.\"");
				}
				fallthrough;

			case "assassin":
				say("\"Thou art hard to catch, Avatar. But now thou must die!\"");
				KALEN->set_schedule_type(IN_COMBAT);
				AVATAR->set_oppressor(KALEN);
				abort;

			case "Iolo the Mad":
				say("\"He is Master of Fawn now, Avatar. Thou wouldst be wise to leave while it amuses him to let ye live.\" *\"He might grant to me that fine wench, Alyssand, if I bring him thine head...\"");
				KALEN->set_schedule_type(IN_COMBAT);
				AVATAR->set_oppressor(KALEN);
				abort;

			case "bye":
				UI_remove_npc_face0();
				Func097F(AVATAR, "@Goodbye.@", 0x0000);
				Func097F(KALEN, "@Good riddance.@", 0x0005);
				Func08AA();
				break;
		}
	}
	if (event == SCRIPTED) {
		if (KALEN->get_item_flag(DEAD)) {
			abort;
		}
		Func097F(KALEN, "@I shall return!@", 0x0000);
		KALEN->set_attack_mode(FLEE);
	}
	if ((event == DEATH) && KALEN->get_item_flag(SI_TOURNAMENT)) {
		gflags[KALEN_IS_DEAD] = true;
		KALEN->show_npc_face0(0x0000);
		KALEN->clear_item_flag(SI_TOURNAMENT);
		KALEN->reduce_health(0x0032, NORMAL_DAMAGE);
		Func097F(KALEN, "@Urgghh...@", 0x0000);
		var0004 = Func0992(0x0001, 0x0000, 0x0000, true);
		Func097F(var0004, "@He is dead...@", 0x0005);
		if (gflags[BANES_RELEASED] == true) {
			say("\"Thou canst defeat me, Avatar. But thou hast no hope against the power of Iolo the Mad...\"");
		} else {
			say("\"My death only delays the inevitable, Avatar. Batlin will soon have more power than thou canst dream of, and my reward will be sure...\"");
		}
	}
}

extern var Func0954 0x954 ();
extern var Func0942 0x942 (var var0000);
extern var Func0953 0x953 ();
extern var Func097D 0x97D (var var0000, var var0001, var var0002, var var0003, var var0004);
extern var Func0994 0x994 ();
extern var Func09A0 0x9A0 (var var0000, var var0001);
extern void Func097F 0x97F (var var0000, var var0001, var var0002);
extern void Func07D1 object#(0x7D1) ();
extern var Func0955 0x955 ();
extern void Func08A9 0x8A9 ();
extern void Func08AB 0x8AB ();
extern void Func08AA 0x8AA ();

void Func043A object#(0x43A) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;
	var var0008;

	var0000 = Func0954();
	var0001 = Func0942(JENDON);
	var0002 = Func0953();
	var0003 = UI_is_pc_female();
	var0004 = Func097D(PARTY, 0x0001, 0x0377, QUALITY_ANY, 0x0000);
	var0005 = OLON->get_object_position();
	if ((var0005[0x0001] > 0x03A0) && ((var0005[0x0001] < 0x06D1) && ((var0005[0x0002] > 0x03BF) && (var0005[0x0002] < 0x06EF)))) {
		var0006 = true;
	}
	if (event == SCRIPTED) {
		if (gflags[IOLO_HAS_SUNG_FAWN] || gflags[IOLO_SINGS_FAWN]) {
			abort;
		}
		if (Func0994() == 0x0003) {
			var0007 = script Func09A0(0x0005, 0x0001) after 20 ticks {
				nohalt;
				call Func043A;
			};
			var0007 = OLON->approach_avatar(0x0078, 0x0028);
			OLON->set_schedule_type(TALK);
			Func097F(OLON, "@Hold there, old man!@", 0x0002);
		} else {
			var0007 = script Func09A0(0x0005, 0x0001) after 50 ticks {
				nohalt;
				call Func043A;
			};
		}
	}
	if (event == DEATH) {
		var0007 = script item {
			nohalt;
			call Func0112;
		};
	}
	if (event == DOUBLECLICK) {
		AVATAR->item_say("@A word with thee, friend.@");
		OLON->Func07D1();
		Func097F(OLON, "@If thou art paying...@", 0x0005);
		OLON->set_schedule_type(TALK);
	}
	if (event == STARTED_TALKING) {
		OLON->run_schedule();
		OLON->clear_item_say();
		OLON->show_npc_face0(0x0000);
		if (gflags[FAWN_INITIAL_STORM] && ((!gflags[IOLO_SINGS_FAWN]) && (!gflags[IOLO_HAS_SUNG_FAWN]))) {
			say("\"Say there, thou with the lute! Art thou a bard?\"");
			IOLO->show_npc_face1(0x0000);
			say("\"Yes, I am, though as of late I do not feel the music within me.\"");
			UI_remove_npc_face1();
			0x0000->set_conversation_slot();
			say("\"I beg of thee, canst thou indulge me for but one song? The sinister thunder doth linger in mine ears.\"");
			say("\"A few strums from thy strings may bring comfort to this sorrowful town...\"");
			IOLO->show_npc_face1(0x0000);
			say("\"I am truly sorry, but I do not think that I can help thee...\"");
			UI_remove_npc_face0();
			UI_remove_npc_face1();
			gflags[IOLO_SINGS_FAWN] = true;
			OLON->set_schedule_type(WAIT);
			Func097F(IOLO, "@Hmmmm...@", 0x0000);
			Func097F(DELPHYNIA, "@Please sing...@", 0x0002);
			Func097F(KYLISTA, "@Sing of Beauty!@", 0x0004);
			Func097F(JORVIN, "@Disperse!@", 0x0008);
			Func097F(OLON, "@Now I need me a drink!@", 0x000C);
			var0007 = script IOLO {
				nohalt;
				wait 10;
				call Func01D1;
			};
			abort;
		}
		var0008 = OLON->get_item_flag(MET);
		if ((UI_get_timer(0x000C) < 0x0003) && gflags[OLON_NEEDS_DRINK]) {
			say("\"Go away, I'm not drunk enough yet.\"");
			Func097F(OLON, "@A drink!@", 0x0000);
			OLON->set_schedule_type(EAT_AT_INN);
			abort;
		}
		gflags[OLON_NEEDS_DRINK] = false;
		if (var0008 == false) {
			if (gflags[HAVE_WOLF_TATTOO] == true) {
				if (var0003 == true) {
					say("\"By my sore eyes! 'Tis a comely wench wit' a tattoo... like any good sailor! Me name's Olon, and I'm a fisherman by trade.\"");
					add("tattoo");
				} else {
					say("\"I haven't been out of this 'ere tavern all day. Find someone else ta put the blame on, Pikeman! Me name's Olon, and I'm a fisherman by trade.\"");
					add("Pikeman");
				}
			} else {
				say("\"If it's a word or three thou art wantin' of me, I do me best talkin' wit' a bottle of Fawn ale! Me name's Olon, and I'm a fisherman by trade.\"");
				add("Fawn ale");
			}
			OLON->set_item_flag(MET);
		} else {
			say("\"Welcome back, ol' friend. These're thirsty times, aye?\"");
			if (gflags[HAVE_WOLF_TATTOO] == true) {
				if (var0003 == true) {
					say("\"Come lift a glass wit' me, lass. I do enjoy the company of a tattooed wench!\"");
					add("tattoo");
				} else {
					say("\"Come lift a glass wit' me, lad. Tell me what a brave Pikeman like ye have been a doin'.\"");
					add("Pikeman");
				}
			}
		}
		add(["goblins", "bye"]);
		if (gflags[OLON_SPOKE_STORMS] == false) {
			add("storms");
		}
		if (gflags[HAS_CLUE_PINECONE_OLON] && (!gflags[KNOWS_PINECONE_OWNER])) {
			add("pinecone");
		}
		if (gflags[HAS_CLUE_DEAD_CAT] && (!gflags[KNOWS_DEAD_CAT_ORIGIN])) {
			add("dead cat");
		}
		converse (0) {
			case "tattoo":
				say("\"Now don't go tellin' me that thou beest a Pikeman like those ugly sons out in the tower.\"");
				if (Func0955() == true) {
					say("\"Well, mayhaps they be uppin' their standards. Thou certainly art easy on the eyes. Jendon over there's pleasant enough, but ain't what thee'd be wantin' ta spend time with... if thou knowest what I mean.\"");
				} else {
					say("\"I didn't think so! Thou art more pleasin' ta look at. 'Tisn't often that thou findest a woman what's brave enough ta face the tattoo needle around here.\"");
				}
				if (var0006) {
					say("\"Join me over a bottle of Fawn's finest ale and we can swap tales. I'd like ta know how a beauty like thee came away with a tattoo.\"");
					add("tales");
				}
				remove("tattoo");
				fallthrough;

			case "tales":
				say("\"Don't be hasty! There's plenty of time for that. Thou still hast not told me how a comely piece of work like unto thee did find herself with a tattoo.\"");
				remove("tales");
				add(["I don't remember.", "I was tricked.", "I am Monitor's Champion."]);
				fallthrough;

			case "I don't remember.":
				say("\"Ah! I can understand right well, that I can. I've lost a day or two meself. Come ta think of it, that's how I ended up with me first tattoo... That was on that voyage when we found that pecul'ar island of cats.\"");
				remove(["I don't remember.", "I was tricked.", "I am Monitor's Champion."]);
				add("island of cats");
				fallthrough;

			case "island of cats":
				say("\"There's this island... Can't at all remember where it is. No one lives there, though. A barren, uninviting place...\"");
				if (var0001 == true) {
					JENDON->show_npc_face1(0x0000);
					say("\"Oh, not that ale tale again, Olon! If thou drivest away what customers I have left, thou canst find somewhere else ta drink.\"");
					0x0000->set_conversation_slot();
					say("\"Quit thy complainin', Jendon. I'm the only reason anyone comes in here now, and thou knowest it! They come ta hear me tales...\"");
					0x0001->set_conversation_slot();
					say("\"Be that as may be, Olon. 'Tis not some bar maid that thou art speakin' with. Some of thy tales are not fit for any but a sailor's ears.\"");
					0x0000->set_conversation_slot();
					say("\"What objection hast thou of this tale?\"");
					0x0001->set_conversation_slot();
					if (var0003) {
						say("\"None ta this one, though it is a bigger tale than the story about the flying whale. But I know thee! Let thee start on one tale and thou must tell them all. And I'll not have thee frightening the lady.\"");
						0x0000->set_conversation_slot();
						if (gflags[HAVE_WOLF_TATTOO]) {
							say("\"Frighten a saucy thing that wears a tattoo? Now where was I? Oh, yes...\"");
						} else {
							say("\"Frighten such an adventurous wench? Now where was I? Oh, yes...\"");
						}
						UI_remove_npc_face1();
					} else {
						say("\"None ta this one, though it is a bigger tale than the story about the flying whale. But I know thee! Let thee start on one tale and thou must tell them all. And I'll not have thee makin' a payin' customer sick wit' thy stories.\"");
						0x0000->set_conversation_slot();
						say("\"Turn the stomach of so bold a lad? Now where was I? Oh, yes...\"");
						UI_remove_npc_face1();
					}
				}
				say("\"The whole island is crawling with glowin' cats. Don't know how they arrived there, nor how they live in such a forsaken spot. But I've heard it said that they live there guarding some fantastical cat treasure.\" ~\"This be little Delphynia's favorite tale...\"");
				remove("island of cats");
				add("Delphynia");
				fallthrough;

			case "Delphynia":
				say("\"Delphynia is an herbalist.\"");
				if (var0001 == true) {
					JENDON->show_npc_face1(0x0000);
					say("\"She's a Horticulturist, Olon. Thou shouldst only give facts...\"");
					0x0000->set_conversation_slot();
					if (var0003) {
						say("\"Thou wouldst have me say such things in front of a lady? Weren't thou the one what was tellin' me ta mind me manners?\"");
					} else {
						say("\"Thou wouldst have me say such things of a lady? Weren't thou the one what was tellin' me ta mind me manners?\"");
					}
					0x0001->set_conversation_slot();
					say("\"Oh, I surrender!\"");
					0x0000->set_conversation_slot();
					say("\"An' him worried about what's proper an' what's not...\"");
					UI_remove_npc_face1();
				}
				say("\"She's what passes for a healer in these forsaken parts ever since the last healer were et by them goblins.\"");
				if (var0001 == true) {
					JENDON->show_npc_face1(0x0000);
					if (var0003) {
						say("\"Don't rant on about the goblins, Olon! 'Tis not a fit subject ta discuss before a lady.\"");
						0x0000->set_conversation_slot();
						say("\"Go back ta washin' the glasses, Jendon! Thou art no judge of what ta say in front of ladies.\"");
					} else {
						say("\"Don't rant on about the goblins, Olon! Thou canst turn the stomach of a bilge rat when thou dost have a mind to.\"");
						0x0000->set_conversation_slot();
						say("\"Go back ta washin' the glasses, Jendon! Thou art no judge of what a darin' adventurer like this 'ere lad might like ta hear.\"");
					}
					0x0001->set_conversation_slot();
					say("\"I'd throw thee out, if thou weren't mine only steady customer. I would.\"");
					UI_remove_npc_face1();
					0x0000->set_conversation_slot();
				}
				say("\"Wouldst thou care to spend a while longer listenin' to another story?\"");
				if (Func0955() == true) {
					add("story");
				}
				remove("Delphynia");
				fallthrough;

			case "story":
				if (var0003) {
					say("\"Ah, I know just the one for a bold wench as thyself! A tale ta stir the blood, that's for certain... the King of the White Dragon!\"");
				} else {
					say("\"Ah, I know just the one for a bold warrior as thyself! A tale ta stir the blood, that's for certain... the King of the White Dragon!\"");
				}
				remove("story");
				add("King of the White Dragon");
				fallthrough;

			case "I was tricked.":
				say("\"Aye, there are those that would do such things. Sometimes 'tis them that thou trustest most. Just like that ol' King of the White Dragon...\"");
				if (var0001 == true) {
					JENDON->show_npc_face1(0x0000);
					say("\"Olon, even I don't want ta hear that one... ever again!\"");
					0x0000->set_conversation_slot();
					say("\"Thou always didst lack a backbone, Jendon! Go ta Temple and soothe thy nerves with the Oracle's empty mouthings!\"");
					0x0001->set_conversation_slot();
					say("\"Now 'tis blasphemy, is it, Olon? I would never have guessed thou hadst been taken in by that lot of fools.\"");
					0x0000->set_conversation_slot();
					say("\"Thou art a fine one ta be talkin' about being taken in, Jendon. An' I've said so often enough.\"");
					0x0001->set_conversation_slot();
					say("\"That's all thou ever dost, Olon -- talk.\"");
					0x0000->set_conversation_slot();
					add(["Temple", "Oracle"]);
					UI_remove_npc_face1();
				}
				remove(["I don't remember.", "I was tricked.", "I am Monitor's Champion."]);
				add("King of the White Dragon");
				fallthrough;

			case "Temple":
				say("\"It sits crouching in the shadow of the palace. But 'tis what controls the palace, if'n thou knowest what I mean.\"");
				remove("Temple");
				fallthrough;

			case "Oracle":
				say("\"I hear tell it was built by some important mage, in the days before our ancestors left Sosaria. Supposed ta be an instrument of truth. But, seein' that lot, I wonder whose truth it tells.\"");
				remove("Oracle");
				fallthrough;

			case "King of the White Dragon":
				say("\"Long ago, when the mountains were young, this land was ruled by two rival kings. One of those kings was called the King of the White Dragon.\"");
				if (var0001 == true) {
					JENDON->show_npc_face1(0x0000);
					if (var0003) {
						say("\"I'll not stay here and listen ta this again! Lady, I see that thou art armed. If he doth offend thee, run him through. I'll make no complaint.\" *\"If thou hast need of me, I shall be in back.\"");
						0x0000->set_conversation_slot();
						say("\"Perhaps he is right. Perhaps this tale is too rough for thy pretty ears. Dost thou wish me ta tell another tale instead?\"");
						if (Func0955() == true) {
							say("\"Then perhaps thou wouldst prefer ta hear a tale of a timeless love story that crosses the frozen wastes.\"");
						} else {
							say("\"I was right! Thou art a sturdy wench! I'll tell thee a fine love story next. Now where was I?\"");
						}
						add("love story");
						UI_remove_npc_face1();
					} else {
						say("\"I'll not stay here and listen ta this again! Milord, I see that thou art armed. If he doth offend thee, run him through. I'll make no complaint.\" *\"If thou hast need of me, I shall be in back.\"");
						0x0000->set_conversation_slot();
						say("\"Perhaps he is right. Perhaps this tale is too brutal even for thee. Dost thou wish me ta tell another tale instead?\"");
						if (Func0955() == true) {
							say("\"Then perhaps thou wouldst prefer ta hear a tale of a timeless love story that crosses the frozen wastes.\"");
						} else {
							say("\"I was right! Thou art a brave lad! I'll tell thee a fine love story next. Now where was I?\"");
						}
						add("love story");
						UI_remove_npc_face1();
					}
				}
				say("\"The King of the White Dragon drove away his rival king, but he could not enjoy his victory, for the goblins were come. Hordes and hordes of goblins... and there weren't nothin' the old King of the White Dragon could do ta hold 'em back.\"");
				say("\"Somethin' snapped in that old man's head when he saw that he could never control the land. So the King planned a way for him ta have control over everything at last. He summoned all his folk for a big party, and locked them inta the castle. Then, one by one, he murdered them all -- down ta the last babe.\"");
				say("\"And then, as dawn broke, he stood on the tower all bloody and called ta the goblins that the King of the White Dragon had saved his people from their stewpots.\"");
				say("\"They say he lives there still, feeding off any who pass by. One thing's certain, the goblins don't go near that place to this very day.\"");
				remove("King of the White Dragon");
				fallthrough;

			case "love story":
				say("\"This is not thine usual love story, no. This here's about dragons, ice dragons.\"");
				if (var0001 == true) {
					JENDON->show_npc_face1(0x0000);
					say("\"A love story about ice dragons! Now I've heard everything, even from thee, Olon.\"");
					0x0000->set_conversation_slot();
					say("\"Thou wouldst not recognize a love story if it hit thee between the eyes, Jendon.\"");
					0x0001->set_conversation_slot();
					say("\"So sayest thou, Olon. I think Alyssand's story qualifies well enough.\"");
					0x0000->set_conversation_slot();
					say("\"Shows what thou knowest, Jendon. We bards would call that a tragedy.\"");
					0x0001->set_conversation_slot();
					say("\"Thou wouldst style thyself a bard now? Perhaps I should bow.\"");
					0x0000->set_conversation_slot();
					say("\"Do that, and quiet! Thou hast interrupted all my tales so far. 'Tis rude.\"");
					add("Alyssand");
					UI_remove_npc_face1();
				}
				say("\"Back around the time Fawn was founded, many of our folk took it upon themselves ta explore the waterways. More than one ship returned with tales of a glittering ice dragon slowly making its way southward, calling pitiful-like.\"");
				say("\"A few years later these same sailors spied TWO ice dragons sitting atop an icy peak, singin' ta one another. Them scholars over in Moonshade say that dragons mate for life. I'd wager that's what our lads came across -- a dragon out hunting for a mate.\"");
				say("\"The only other thing I ever heard from those mages that made sense is that a dragon turns very hostile if its mate or young is killed.\"");
				if (var0001 == true) {
					JENDON->show_npc_face1(0x0000);
					say("\"Now that's truly touchin', Olon. Thou surely hast brought a tear ta mine eye, thou hast.\"");
					UI_remove_npc_face1();
					0x0000->set_conversation_slot();
				}
				remove("love story");
				fallthrough;

			case "Alyssand":
				say("\"Alyssand's the daughter of Delin, the shopkeeper. Thou mightest think she hath had enough sadness in her short life.\"");
				if (var0001 == true) {
					JENDON->show_npc_face1(0x0000);
					say("\"'Tis hard ta find many who have borne more, I'll wager.\"");
					UI_remove_npc_face1();
					0x0000->set_conversation_slot();
				}
				say("\"Her mother died after givin' birth ta Delin's only son. Never saw a man take it harder. He near ta lost his mind. Then he did go a little crazy after the Magister took young Freli away during the annual testing.\" *\"Alyssand hath looked after him all alone ever since, helpin' mind the store and doin' her weavin'. Then she met Keth.\"");
				if (var0001 == true) {
					JENDON->show_npc_face1(0x0000);
					say("\"A sturdy lad, Keth was. 'Twere a pity ta lose him.\"");
					0x0000->set_conversation_slot();
					say("\"I'll thank thee to keep thy comments to thyself, Jendon. Thou art ruining my tale.\"");
					UI_remove_npc_face1();
				}
				say("\"Keth doted upon Alyssand. Treated her better than the Lady of Fawn, he did. Sent all the way ta Moonshade ta have an engagement ring made for her.\"");
				if (var0001 == true) {
					JENDON->show_npc_face1(0x0000);
					say("\"Cost him a pretty penny, I'll wager.\"");
					UI_remove_npc_face1();
					0x0000->set_conversation_slot();
				}
				say("\"Then one day Keth didn't run fast enough ta shelter when one of those cursed storms hit. No one hath seen him since.\" *\"Until she lost her engagement ring ta another one of those storms here recently, Alyssand swore that Keth would return. She's a changed woman now.\"");
				if (var0001 == true) {
					JENDON->show_npc_face1(0x0000);
					say("\"Sounds like a love story to me...\"");
					0x0000->set_conversation_slot();
					say("\"An' I suppose that thou considerest the island of cats a tragedy then?\"");
					0x0001->set_conversation_slot();
					say("\"No, I'd call it an ale tale.. made from the fumes of mine ale!\"");
					UI_remove_npc_face1();
					0x0000->set_conversation_slot();
				}
				remove("Alyssand");
				add("island of cats");
				if (var0004 == true) {
					add("engagement ring");
				}
				fallthrough;

			case "engagement ring":
				say("\"That could be it, right enough. Though thou shouldst ask Alyssand herself. Mine eyes are not what they were.\"");
				if (var0001 == true) {
					JENDON->show_npc_face1(0x0000);
					say("\"'Tis it, sure as the tide comes in! Keth flashed it around enough, I'd recognize it anywhere.\"");
					UI_remove_npc_face1();
					0x0000->set_conversation_slot();
				}
				Func08A9();
				remove("engagement ring");
				fallthrough;

			case "I am Monitor's Champion.":
				say("\"Why not say that thou art the new Lady of Fawn, whilst thou art about it, bold wench? Methinks that thy tales must be taller than mine.\"");
				if (var0001 == true) {
					JENDON->show_npc_face1(0x0000);
					say("\"Now that be truly difficult, too.\"");
					UI_remove_npc_face1();
					0x0000->set_conversation_slot();
				}
				say("\"I think that thou wouldst benefit from the wisdom of an honest tradesman. Perhaps it would divert thy mind from a foolish girl's dreams.\"");
				remove(["I don't remember.", "I was tricked.", "I am Monitor's Champion."]);
				add("wisdom");
				fallthrough;

			case "wisdom":
				say("\"That woman who travelled with the Fellowship sailors said that the greatest wisdom comes from those of us what works for our living. Smart lady. She was willin' ta listen ta what I have to say.\"");
				remove("wisdom");
				add(["woman", "Fellowship sailors"]);
				fallthrough;

			case "woman":
				say("\"A red-haired beauty by the name of Gwenno. I told her about the island of cats, the King of the White Dragon. An' I told her a love story. I remember that -- she laughed and bought another round before she left.\"");
				remove("woman");
				add(["island of cats", "King of the White Dragon", "love story"]);
				fallthrough;

			case "Fellowship sailors" (remove):
				if (gflags[FAWN_TRIAL_DONE_FIRST_DAY] && (gflags[FAWN_TRIAL_DONE] && (!gflags[ORACLE_SET_TO_INNOCENT]))) {
					say("\"Now, if thou dost want to know more about them, thou shouldst ask them. The Lady hath let them back into the city, thou dost know...\"");
				} else {
					say("\"They're the poor lads that Jendon prattles about all the time. Ta hear him talk, the Oracle all but shook down the Temple when Kylista asked if they were the cause of the storms.\"");
					if (var0001 == true) {
						JENDON->show_npc_face1(0x0000);
						say("\"Thou canst blaspheme all thou likest, Olon, I was there and heard it!\"");
						UI_remove_npc_face1();
						0x0000->set_conversation_slot();
					}
					add(["Temple", "Oracle", "Kylista"]);
				}
				fallthrough;

			case "Kylista":
				say("\"Kylista is the priestess of Beauty. She's wondrous fair of face, but her heart's as cold as the sea is deep. Kylista cares only for those who bow and scrape ta her. She doth have no use for those what can't make her more important.\"");
				remove("Kylista");
				add("Beauty");
				fallthrough;

			case "Beauty":
				say("\"'Tis what everyone of this town is dedicated to. Everyone but those tryin' ta increase their power or wealth, that is...\" *\"Me sire told me that, once upon a time, Fawn was built in honor of love. We've come a far cry from that, I'd say.\"");
				remove("Beauty");
				fallthrough;

			case "Pikeman":
				say("\"I'm not so far gone in me cups as ta not be able ta see the mark that thou bearest on thy face. All the world knows thee for a Pikeman.\"");
				if (gflags[CLEARED_FAWN_TOWER] == true) {
					say("\"But thou must be weary after takin' back the tower from those foul goblins. Pull up a chair an' we'll swap a few yarns over a cup or two.\"");
				} else {
					say("\"Thou dost not seem a bad sort of fellow. I'd be lookin' for a bit of drink and company, too, if I wert thou.\" *\"I doubt that it will be long before thou and thy companions lay siege ta those vile goblins in the tower.\" *\"Come lift a few with me, and I'll tell a few yarns ta take thy mind off thy troubles.\"");
				}
				remove("Pikeman");
				add("yarns");
				fallthrough;

			case "yarns":
				if (gflags[CLEARED_FAWN_TOWER] == true) {
					say("\"I'm certain that thou hast many yarns ta tell. Wert thou amongst the company that retook the tower?\"");
					if (Func0955() == true) {
						say("\"I'd wager that it was as gruesome as the King of the White Dragon's castle.\"");
					} else {
						say("\"'Twas for the best, I'll warrant. I hear it was as gruesome as the King of the White Dragon's castle. An' everyone knows what happened there.\"");
					}
				} else {
					say("\"I'd not be in thy shoes, good Pikeman. Retaking that tower will be as gruesome as the King of the White Dragon's castle.\"");
				}
				remove("yarns");
				add("King of the White Dragon");
				fallthrough;

			case "King of the White Dragon":
				say("\"Thou hast not heard of the King of the White Dragon? The bards of Monitor have been lax of late then. I'll wager that thou hast not heard of the island of cats neither. Or a proper love story, neither.\"");
				if (var0001 == true) {
					JENDON->show_npc_face1(0x0000);
					say("\"Listen ta him, wilt thou? Art thou sayin' that thou art Fawn's bard now, Olon?\"");
					0x0000->set_conversation_slot();
					say("\"Our 'ficial one went down with the Delyssia. Reckon I'm all there is now.\"");
					0x0001->set_conversation_slot();
					say("\"I'd better start washin' more mugs, then. I may not have enough ta last, when word o' this gets out... If thou art not thrown out of town for thy braggin' first!\"");
					UI_remove_npc_face1();
					0x0000->set_conversation_slot();
				}
				say("\"Long ago, when the mountains were young, this land was ruled by two rival kings. One of those kings was called the King of the White Dragon.\"");
				say("\"The King of the White Dragon drove away his rival king, but he could not enjoy his victory, for the goblins were come. Hordes and hordes of goblins... and there wasn't nothin' the old King of the White Dragon could do ta hold them back.\"");
				say("\"Somethin' snapped in that old man's head when he saw that he could never control the land. So the King planned a way for him ta have control over everything at last. He summoned all his folk for a big party, and locked them inta the castle. Then, one by one, he murdered them all -- down ta the last babe.\"");
				say("\"And then, as dawn broke, he stood on the tower all bloody and called ta the goblins that the King of the White Dragon had saved his people from their stewpots.\"");
				say("\"They say he lives there still, feeding off any who pass by. One thing's for sure, the goblins don't go near that place ta this very day.\"");
				if (var0001 == true) {
					if (gflags[CLEARED_FAWN_TOWER] == false) {
						JENDON->show_npc_face1(0x0000);
						say("\"I'm sure that thou hast taken his mind off his problems, for sure, Olon. Why worry about goblins when thou canst worry about the King of the White Dragon?\"");
						UI_remove_npc_face1();
						0x0000->set_conversation_slot();
					}
				}
				remove("King of the White Dragon");
				add(["island of cats", "love story"]);
				fallthrough;

			case "island of cats":
				say("\"There's this island... Can't at all remember where it is. No one lives there, though. A barren, uninviting place...\"");
				if (var0001 == true) {
					JENDON->show_npc_face1(0x0000);
					say("\"Oh, not again, Olon! If thou drivest away what customers I have left, thou canst find somewhere else ta drink.\"");
					0x0000->set_conversation_slot();
					say("\"Cease thy complainin', Jendon. I'm the only reason anyone comes in here now, and thou knowest it! They come ta hear me tales...\" Now where was I? Oh, yes...\"");
					UI_remove_npc_face1();
				}
				say("\"The whole island is crawling with cats. Don't know how they arrived there, nor how they live in such a forsaken spot. But I've heard it said that they live there guarding some fantastical cat treasure.\"");
				say("\"This be Delphynia's favorite tale.\"");
				remove("island of cats");
				add("Delphynia");
				fallthrough;

			case "Delphynia":
				say("\"Delphynia is an herbalist.\"");
				if (var0001 == true) {
					JENDON->show_npc_face1(0x0000);
					say("\"She's a Hor-ti-culturist, Olon. Thou shouldst only give facts...\"");
					0x0000->set_conversation_slot();
					say("\"Thou wouldst have me say such things in front of a stranger? 'Tisn't polite ta speak of a lady in such a fashion, Jendon.\"");
					0x0001->set_conversation_slot();
					say("\"Oh, I surrender!\"");
					UI_remove_npc_face1();
					0x0000->set_conversation_slot();
				}
				say("\"She's what passes for a healer in these forsaken parts ever since the last healer was et by them goblins.\"");
				if (var0001 == true) {
					JENDON->show_npc_face1(0x0000);
					say("\"Don't rant on about the goblins, Olon! `Tis not a subject this young lord wishes ta hear right now, I'm certain.\"");
					0x0000->set_conversation_slot();
					say("\"Return ta washin' the glasses, Jendon! Thou art no judge of what a warrior wishes ta hear.\"");
					0x0001->set_conversation_slot();
					say("\"And thou art? I'd throw thee out, if thou weren't mine only steady customer. I would.\"");
					UI_remove_npc_face1();
					0x0000->set_conversation_slot();
				}
				remove("Delphynia");
				fallthrough;

			case "love story":
				say("\"This is not thine usual love story, no. This here's about dragons, ice dragons.\"");
				if (var0001 == true) {
					JENDON->show_npc_face1(0x0000);
					say("\"A love story about ice dragons! Now I've heard everything, even from thee, Olon.\"");
					0x0000->set_conversation_slot();
					say("\"Thou wouldst not recognize a love story if it hit thee between the eyes, Jendon.\"");
					0x0001->set_conversation_slot();
					say("\"So sayest thou, Olon. I think Alyssand's story qualifies well enough.\"");
					0x0000->set_conversation_slot();
					say("\"Shows what thou knowest, Jendon. We bards would call that a tragedy.\"");
					0x0001->set_conversation_slot();
					say("\"Perhaps I should bow.\"");
					0x0000->set_conversation_slot();
					say("\"Do that, and quiet! Thou art rude to interrupt.\"");
					add("Alyssand");
					UI_remove_npc_face1();
				}
				say("\"Back around the time Fawn was founded, many of our folk took it upon themselves ta explore the waterways. More than one ship returned with tales of a glittering ice dragon slowly making its way southward, calling pitiful-like.\"");
				say("\"A few years later these same sailors spied TWO ice dragons sitting atop an icy peak, singing ta one another. Them scholars over in Moonshade say that dragons mate for life. I'd wager that's what our lads came across -- a dragon out hunting for a mate.\"");
				say("\"The only other thing I ever heard from those mages that made sense is that a dragon is very hostile if its mate or young is killed.\"");
				if (var0001 == true) {
					JENDON->show_npc_face1(0x0000);
					say("\"Now that's truly touchin', Olon. Thou surely hast brought a tear ta mine eye, thou hast.\"");
					UI_remove_npc_face1();
					0x0000->set_conversation_slot();
				}
				remove("love story");
				add("Alyssand");
				fallthrough;

			case "Alyssand":
				say("\"Alyssand's the daughter of Delin, the shopkeeper. Thou mightest think she hath had enough sadness in her short life.\"");
				if (var0001 == true) {
					JENDON->show_npc_face1(0x0000);
					say("\"'Tis hard ta find many who have borne more, I'll wager.\"");
					UI_remove_npc_face1();
					0x0000->set_conversation_slot();
				}
				say("\"Her mother died after givin' birth ta Delin's only son. Never saw a man take it harder. He near ta lost his mind.\"");
				say("\"Then he did go a little crazy after the Magister took young Freli away during the annual testing.\" *\"Alyssand hath looked after him all alone ever since, helpin' mind the store and doin' her weavin'. Then she met Keth.\"");
				if (var0001 == true) {
					JENDON->show_npc_face1(0x0000);
					say("\"A sturdy lad, Keth was. 'Twere a pity ta lose him.\"");
					0x0000->set_conversation_slot();
					say("\"I'll thank thee ta keep thy comments ta thyself, Jendon. Thou art ruining my tale.\"");
					UI_remove_npc_face1();
				}
				say("\"Keth doted upon Alyssand. Treated her better than the Lady of Fawn, he did. Sent all the way ta Moonshade ta have an engagement ring made for her.\"");
				if (var0001 == true) {
					JENDON->show_npc_face1(0x0000);
					say("\"Cost him a pretty penny, I'll wager.\"");
					UI_remove_npc_face1();
					0x0000->set_conversation_slot();
				}
				say("\"Then one day Keth didn't run fast enough ta shelter when one of those cursed storms hit. No one hath seen him since.\"");
				say("\"Until she lost her engagement ring ta another one of those storms here recently, Alyssand swore that Keth would return. She's a changed woman now.\"");
				if (var0001 == true) {
					JENDON->show_npc_face1(0x0000);
					say("\"Sounds like a love story ta me...\"");
					0x0000->set_conversation_slot();
					say("\"Goes ta show what thou knowest!\"");
					UI_remove_npc_face1();
				}
				remove("Alyssand");
				if (var0004 == true) {
					add("engagement ring");
				}
				fallthrough;

			case "engagement ring":
				say("\"That could be it, right enough. Though thou shouldst ask Alyssand herself. Mine eyes are not what they were.\"");
				if (var0001 == true) {
					JENDON->show_npc_face1(0x0000);
					say("\"'Tis it, sure as the tide comes in! Keth flashed it around enough, I'd recognize it anywhere.\"");
					UI_remove_npc_face1();
					0x0000->set_conversation_slot();
				}
				remove("engagement ring");
				fallthrough;

			case "Fawn ale":
				if (var0003 == true) {
					say("\"'Tis a drink from the heavens. Thou shouldst try it.\"");
					if (var0001 == true) {
						JENDON->show_npc_face1(0x0000);
						say("\"I'd advise against it, lady. There aren't many outside Fawn that care for its taste, I've found. I only export a bit ta Monitor now.\"");
						add("Monitor");
						UI_remove_npc_face1();
						0x0000->set_conversation_slot();
					}
					say("\"If thou wishest Fawn ale, it only comes in brown bottles.\"");
				} else {
					say("\"The drink of hard-workin' men! A drink ta put hair on thy chest and make the women throw themselves at thee.\" *\"Thou shouldst try it.\"");
					if (var0001 == true) {
						JENDON->show_npc_face1(0x0000);
						say("\"Be careful, Olon. There aren't many outside Fawn that care for its taste. I only export a bit ta Monitor now.\"");
						add("Monitor");
						UI_remove_npc_face1();
						0x0000->set_conversation_slot();
					}
					say("\"If thou wishest Fawn ale, it comes only in brown bottles.\"");
				}
				say("\"Wilt thou buy me a drink? I would be glad ta share stories with thee if thou dost.\"");
				if (Func0955() == true) {
					if (var0001 == true) {
						say("\"Jendon! Bring thy lazy backside over here! Thou hast a payin' customer with a thirst.\"");
						JENDON->show_npc_face1(0x0000);
						say("\"As sweet-tongued as always, Olon. Dost thou truly wish ta buy this sot a drink, ",
							var0000,
							"?\"");
						if (Func0955() == true) {
							say("\"Seest thou, Jendon, not everyone is as hard-hearted as thee!\"");
							if (PARTY->count_objects(0x03B4, QUALITY_ANY, FRAME_ANY) > 0x0009) {
								var0007 = UI_remove_party_items(0x000A, 0x03B4, QUALITY_ANY, FRAME_ANY, true);
							} else {
								0x0000->set_conversation_slot();
								say("\"Not enough filari, no drink. No drink, no stories. Well, thou knowest where ta find me, if thou dost wish ta hear me stories.\"");
								Func097F(OLON, "@I'm thirsty...@", 0x0000);
								OLON->set_schedule_type(EAT_AT_INN);
								abort;
							}
						} else {
							say("\"Changed thy mind, aye? No drink, no stories. Well, thou knowest where ta find me, if thou dost wish ta hear me stories.\"");
							Func097F(OLON, "@I'm thirsty...@", 0x0000);
							OLON->set_schedule_type(EAT_AT_INN);
							abort;
						}
						0x0000->set_conversation_slot();
					} else {
						say("\"Jendon doth not seem ta be around right now. Perhaps thou couldst buy that drink when he comes back. An' then me throat won't be too dry ta tell thee those stories.\"");
					}
				} else {
					say("\"No drink, no stories! Thou knowest where ta find me, if thou dost wish ta hear me stories.\"");
					Func097F(OLON, "@I'm thirsty...@", 0x0000);
					OLON->set_schedule_type(EAT_AT_INN);
					abort;
				}
				remove("Fawn ale");
				add("stories");
				fallthrough;

			case "Monitor":
				say("\"If thou shouldst want some while thou art in Monitor, Jendon sends it ta Simon. It doth not disappear very fast, but he orders a new batch every few months.\"");
				remove("Monitor");
				add("Simon");
				fallthrough;

			case "Simon":
				say("\"He is the innkeeper in Monitor. If thou hast the opportunity ta stay there, send him regards from Olon in Fawn... a fellow Fawn ale drinker.\"");
				remove("Simon");
				fallthrough;

			case "stories":
				say("\"I know some fine ones -- scary, sentimental, or jus' plain odd. I can tell thee about the King of the White Dragon. Or I can tell thee about the island of cats. Or I can thee a love story.\"");
				remove("stories");
				add(["King of the White Dragon", "island of cats", "love story"]);
				fallthrough;

			case "goblins":
				say("\"Fierce little monsters, the goblins are. Not long in brains, but hard ta handle in a fight. Pomdirgun sends them at us in waves until we are all so tired that we can hardly stand and fight. But still, I'd rather deal with goblins than Gwani.\"");
				remove("goblins");
				add(["Pomdirgun", "Gwani"]);
				fallthrough;

			case "Pomdirgun":
				say("\"He's not like other goblins, no. ~He's smart, and clever. Almost makes me think he might be a Daemon of some sort, leadin' them ta take over the world. Cook us all if they can, they will.\"");
				if (var0001 == true) {
					JENDON->show_npc_face1(0x0000);
					say("\"They'll not cook thee, Olon. Thou art already pickled!\"");
					0x0000->set_conversation_slot();
					say("\"An' they'll not eat thy tongue, either... 'Tis too tough from overuse!\"");
					UI_remove_npc_face1();
				}
				remove("Pomdirgun");
				fallthrough;

			case "Gwani":
				say("\"Thou hast never heard of the Gwani? They're cousins ta the goblins that live north, beyond the frozen mountains.\" *\"Gwani make the goblins look like innocent children.\"");
				if (var0001 == true) {
					JENDON->show_npc_face1(0x0000);
					say("\"How wouldst thou know, Olon? Thou hast never seen one, I'll wager!\"");
					0x0000->set_conversation_slot();
					say("\"Nor would I like ta... Thou art enough ta scare a man half ta death!\"");
					0x0001->set_conversation_slot();
					say("\"If thou weren't mine only steady customer, Olon, I'd throw thee out on thine ear! I would.\"");
					UI_remove_npc_face1();
					0x0000->set_conversation_slot();
				}
				say("\"'Tis true, upon my sire's grave I swear it! They'll eat their own -- as well as outsiders!\" *\"If thou dost travel inta the northern wastes, thou art risking ending thy life in the cookpot of a fur-covered goblin!\"");
				remove("Gwani");
				fallthrough;

			case "storms":
				say("\"I would almost believe that the world was at an end. These horrible storms have all but destroyed the town! How's a body ta make a livin' without a ship? How can a fisherman fish from a wagon... it sinks!\"");
				if (var0001 == true) {
					JENDON->show_npc_face1(0x0000);
					say("\"Perhaps 'twould be best if thou didst not ask him about such things right now. He's no use like this.\"");
					UI_remove_npc_face1();
					0x0000->set_conversation_slot();
				}
				say("\"Can't put a sail on a cart and expect it ta take thee out ta sea and back again! Drowned!\" *\"Good men all... gone ta the bottom o' the sea! An' I should 'ave been with them! They'll come for me. I know they will! Down to the bottom o' the sea!\"");
				if (var0001 == true) {
					JENDON->show_npc_face1(0x0000);
					say("\"Come back in a few hours, ",
						var0000,
						". He'll have had a drink or two ta calm him down. Then thou canst have him tell his tales.\"");
					UI_remove_npc_face1();
					0x0000->set_conversation_slot();
				}
				gflags[OLON_SPOKE_STORMS] = true;
				gflags[OLON_NEEDS_DRINK] = true;
				UI_set_timer(0x000C);
				Func097F(OLON, "@Bottom of the sea!@", 0x0000);
				OLON->set_schedule_type(WANDER);
				abort;

			case "pinecone" (remove):
				if (Func097D(PARTY, 0x0001, 0x0108, QUALITY_ANY, FRAME_ANY)) {
					say("\"That be a mighty big pinecone thou dost have, ",
						var0000,
						"!\"");
					say("\"I haven't seen one that size since the last time we sailed around that big forest north of here. They were all over there.\"");
				} else {
					say("\"Sounds like a big pinecone!\"");
					say("\"I haven't heard tell of one that size since the last time we sailed around that big forest north of here. They were all over there.\"");
				}
				fallthrough;

			case "dead cat" (remove):
				if (Func097D(PARTY, 0x0001, 0x037C, QUALITY_ANY, 0x001E)) {
					say("\"Poor critter. Thou shouldst give it a decent burial... Before Jendon sees it, if thou dost know what be good for thee.\"");
					say("\"He be mighty partic'lar about things like that in his inn.\"");
					UI_remove_npc_face0();
					Func097F(OLON, "@Quick now!@", 0x0000);
					abort;
				}
				say("\"I never figured that Jendon would be listenin' ta my tales! It sounds just like them cats on that island...\"");
				say("\"Did I tell thee about the islands of cats?\"");
				if (Func0955() == true) {
					say("\"Oh, well... Another time, perhaps.\"");
				} else {
					add("island of cats");
				}
				fallthrough;

			case "bye":
				Func08AB();
				UI_remove_npc_face0();
				Func097F(AVATAR, "@Many thanks!@", 0x0000);
				Func097F(OLON, "@Take care.@", 0x0002);
				Func08AA();
				break;
		}
	}
}

extern var Func0954 0x954 ();
extern var Func0953 0x953 ();
extern var Func0942 0x942 (var var0000);
extern void Func097F 0x97F (var var0000, var var0001, var var0002);
extern void Func07D1 object#(0x7D1) ();
extern var Func0955 0x955 ();
extern var Func099B 0x99B (var var0000, var var0001, var var0002, var var0003, var var0004, var var0005, var var0006);
extern var Func097D 0x97D (var var0000, var var0001, var var0002, var var0003, var var0004);
extern var Func0992 0x992 (var var0000, var var0001, var var0002, var var0003);
extern void Func094F 0x94F (var var0000, var var0001);

void Func043B object#(0x43B) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;
	var var0008;
	var var0009;
	var var000A;
	var var000B;
	var var000C;
	var var000D;
	var var000E;
	var var000F;
	var var0010;
	var var0011;
	var var0012;
	var var0013;
	var var0014;
	var var0015;
	var var0016;
	var var0017;

	var0000 = Func0954();
	var0001 = Func0953();
	var0002 = UI_is_pc_female();
	var0003 = Func0942(IOLO);
	var0004 = Func0942(DUPRE);
	var0005 = Func0942(SHAMINO);
	var0006 = RUGGS->find_nearby(0x017D, 0x0014, MASK_NONE);
	var0007 = [0x040A, 0x07E9, 0x0000];
	if (event == DEATH) {
		var0008 = script item {
			nohalt;
			call Func0112;
		};
	}
	if ((event == PROXIMITY) || (event == SI_PATH_FAILURE)) {
		RUGGS->run_schedule();
		Func097F(RUGGS, "@I must work...@", 0x0002);
	}
	if (event == DOUBLECLICK) {
		AVATAR->item_say("@Excuse me, friend.@");
		RUGGS->Func07D1();
		Func097F(RUGGS, "@How may I be of service?@", 0x0002);
		RUGGS->set_schedule_type(TALK);
	}
	if (event == STARTED_TALKING) {
		RUGGS->clear_item_say();
		RUGGS->run_schedule();
		RUGGS->show_npc_face0(0x0000);
		var0009 = RUGGS->get_item_flag(MET);
		var000A = DELPHYNIA->get_item_flag(MET);
		if ((gflags[FIRST_RUGGS_ENCOUNTER] == false) && var0006) {
			RUGGS->set_item_flag(MET);
			gflags[FIRST_RUGGS_ENCOUNTER] = true;
			AVATAR->clear_item_flag(DONT_MOVE);
			RUGGS->set_new_schedules([DAWN, AFTERNOON, EVENING, NIGHT], [EAT_AT_INN, FARM, EAT_AT_INN, SLEEP], [0x0479, 0x076B, 0x04BC, 0x0741, 0x0479, 0x076B, 0x049D, 0x0752]);
			RUGGS->run_schedule();
			say("\"Oh, please, ",
				var0000,
				", a favor!\"");
			if (var0009 == false) {
				say("\"My name is Ruggs. I am a poor sailor whose visage offends the good people of Fawn, and I have been forbidden entry into the city.\"");
			} else {
				say("\"My visage offends the good people of Fawn, and I have been forbidden entry into the city.\"");
			}
			say("\"I have not heard from the lady I love since mine exile, and I can find no one willing to carry her word of my continuing devotion.\"");
			say("\"Please, ",
				var0000,
				", I beg of thee, wouldst thou take this letter to her for me?\"");
			if (Func0955() == true) {
				say("\"Oh, I knew by the nobility of thy face that thou wouldst take pity on a wretch such as myself!\"");
				say("\"Take this to Delphynia, the herbalist. Thou mayest find her at the greenhouse.\"");
				say("\"If thou shouldst bring a return message, I will introduce thee to my shipmate, Scots, who makes maps.\"");
				say("\"Perhaps his cartography would be of aid to thee.\"");
				var0008 = Func099B(AVATAR, 0x0001, 0x031D, 0x0004, 0x0005, false, true);
				gflags[ACCEPTED_RUGGS_LETTER] = true;
				var000B = AVATAR->find_nearby(0x017D, 0x0014, MASK_NONE);
				for (var000E in var000B with var000C to var000D) {
					if (var000E->get_npc_id() == 0x0001) {
						var000E->set_schedule_type(TALK);
					}
				}
				RUGGS->si_path_run_usecode(var0007, PROXIMITY, item, Func043B, false);
				abort;
			}
			say("\"I have searched all my life for a woman who would overlook my deformity and learn to love me. Somehow I will find a way to tell Delphynia of my love...\"");
			if (var0003 == true) {
				IOLO->show_npc_face1(0x0000);
				say("\"How can thine heart be so hard, Avatar? Thou wouldst search every corner of the land and sea to help me find Gwenno.\"");
				say("\"Wilt thou reconsider and aid this poor soul's search for love?\"");
				if (Func0955() == true) {
					0x0000->set_conversation_slot();
					say("\"There may be hope after all... Here is the scroll.\"");
					var0008 = Func099B(AVATAR, 0x0001, 0x031D, 0x0004, 0x0005, false, true);
					say("\"Take this to Delphynia, the herbalist. Thou mayest find her at the greenhouse.\"");
					say("\"If thou shouldst bring a return message, I will introduce thee to my shipmate, Scots, who makes maps.\"");
					say("\"Perhaps his cartography would be of aid to thee.\"");
					gflags[ACCEPTED_RUGGS_LETTER] = true;
					var000B = AVATAR->find_nearby(0x017D, 0x0014, MASK_NONE);
					for (var000E in var000B with var000F to var0010) {
						if (var000E->get_npc_id() == 0x0001) {
							var000E->set_schedule_type(TALK);
						}
					}
					RUGGS->si_path_run_usecode(var0007, PROXIMITY, item, Func043B, false);
					abort;
				}
				say("\"I am sure that thou hast thy reasons, Avatar. But I am sorely disappointed.\"");
				UI_remove_npc_face1();
				0x0000->set_conversation_slot();
				say("\"The Avatar! Forgive me... unlike these local folk, I know whom thou art!\"");
				say("\"I am certain that thy business is far more urgent.\"");
				gflags[REFUSED_RUGGS_LETTER] = true;
				var000B = AVATAR->find_nearby(0x017D, 0x0014, MASK_NONE);
				for (var000E in var000B with var0011 to var0012) {
					if (var000E->get_npc_id() == 0x0001) {
						var000E->set_schedule_type(TALK);
					}
				}
				RUGGS->si_path_run_usecode(var0007, PROXIMITY, item, Func043B, false);
				abort;
			}
			if (var0004 == true) {
				DUPRE->show_npc_face1(0x0000);
				say("\"Have a drink or two... Thou wilt soon forget her.\"");
				UI_remove_npc_face1();
				0x0000->set_conversation_slot();
			}
			if (var0005 == true) {
				SHAMINO->show_npc_face1(0x0000);
				say("\"Oh, no... Why is it that everyone expects the Avatar to help with their love life?\"");
				UI_remove_npc_face1();
				0x0000->set_conversation_slot();
				say("\"Why... I...\"");
				if (var0003 == true) {
					IOLO->show_npc_face1(0x0000);
					say("\"Thou wouldst not be so hard, Shamino, if thou hadst lost thy love!\"");
					UI_remove_npc_face1();
					0x0000->set_conversation_slot();
				}
			}
			gflags[REFUSED_RUGGS_LETTER] = true;
			RUGGS->si_path_run_usecode(var0007, PROXIMITY, item, Func043B, false);
			var000B = AVATAR->find_nearby(0x017D, 0x0014, MASK_NONE);
			for (var000E in var000B with var0013 to var0014) {
				if (var000E->get_npc_id() == 0x0001) {
					var000E->set_schedule_type(TALK);
				}
			}
			abort;
			// Dead code
			RUGGS->set_item_flag(MET);
			gflags[FIRST_RUGGS_ENCOUNTER] = true;
			AVATAR->clear_item_flag(DONT_MOVE);
		} else {
			if (var0009 == false) {
				if (gflags[HAVE_WOLF_TATTOO] == true) {
					say("\"Greetings, good Knight! The sight of thee and thy companions is always heartening, for the Goblins fear such as thee.\"");
					say("\"I am Ruggs, a poor sailor from Britannia.\tHow may I serve thee today?\"");
				} else {
					say("\"I am Ruggs, a poor sailor exiled from Britannia and from Fawn. How may I serve thee today?\"");
				}
				RUGGS->set_item_flag(MET);
			} else if (gflags[BANES_RELEASED]) {
				say("\"All is lost, Avatar! All is lost!\"");
			} else {
				say("\"'Tis always a pleasure to see another Britannian at Fawn, Avatar. How may I serve thee today?\"");
			}
			if (!gflags[BANES_RELEASED]) {
				add(["Britannia", "Fawn"]);
			} else {
				add(["Where is everyone?", "What happened?"]);
			}
			if ((Func097D(PARTY, 0x0001, 0x031D, 0x001B, 0x0000) && (!gflags[HAS_DELPHYNIA_LETTER])) && (!gflags[BANES_RELEASED])) {
				add("letter");
			}
		}
		converse ("bye") {
			case "Where is everyone?" (remove):
				say("\"All dead! Hast thou not seen their bodies heaped about the desolate buildings?\"");
				say("\"I do not remember it clearly, for my sanity was lost when I found Delphynia's body.\"");
				say("\"Lady Yelinda was also spared, but she hath gone into the swamps of Gorlab. I should have gone after her, but I did not. I alone remain in Fawn.\"");
				add(["Delphynia", "Lady Yelinda"]);
				fallthrough;

			case "What happened?" (remove):
				say("\"What fell companion didst thou harbor, ",
					var0000,
					"? The Bard Iolo did come here, and he hath turned Fawn into a mockery...\"");
				add(["Iolo", "mockery"]);
				fallthrough;

			case "Iolo" (remove):
				say("\"Mad Iolo, he doth call himself now! His eyes are all afire, and he doth act like a man possessed.\"");
				say("\"Such cruel acts did he commit, that I cannot relate them lest my soul shrivel and die.\"");
				say("\"Yet Mad Iolo did laugh the entire time...\"");
				fallthrough;

			case "mockery" (remove):
				say("\"There is nothing thou canst do -- all is done for, all is lost!\"");
				say("\"The City of Beauty hath become the City of Blood and Ruin. Only I am left alive.\"");
				say("\"Dost thou not see the irony? Only I, the ugliest of all, yet remain to dwell in Fawn!\"");
				fallthrough;

			case "Britannia":
				say("\"Our ship was hired by Batlin to transport scholars to explore a new land and spread word of The Fellowship.\"");
				say("\"Now, even if we wanted to return without Batlin, we cannot venture onto the sea for fear of these terrible storms.\"");
				remove("Britannia");
				add(["Batlin", "storms"]);
				fallthrough;

			case "Batlin":
				say("\"Thou hast not heard of Batlin? He was the founder of The Fellowship movement, in Britannia.\"");
				say("\"He is a pious and worthy man, for all that he doth have strange companions.\"");
				var0015 = Func0992(0x0001, "@His description doth not much fit the Batlin we know, doth it, Avatar?@", 0x0000, false);
				if (var0015 != AVATAR) {
					0x0000->set_conversation_slot();
				}
				remove("Batlin");
				add("companions");
				fallthrough;

			case "companions":
				say("\"Batlin bade Leon stay and preach to the populace of Fawn and left the ship with three companions: Palos, Brunt and Deadeye.\"");
				say("\"We have not seen them since. Although they promised to return soon.\"");
				remove("companions");
				UI_push_answers();
				add(["Leon", "Palos", "Brunt", "Deadeye", "change subject"]);
				fallthrough;

			case "change subject":
				say("\"Very well...\"");
				UI_pop_answers();
				fallthrough;

			case "Leon":
				say("\"Leon was especially chosen by Batlin to come and bring the hope of The Fellowship to this land.\"");
				say("\"He hath been the only thing that hath kept us all sane since we have been stranded here.\"");
				say("\"I strive to emulate him, in mine own humble way.\"");
				remove("Leon");
				add("emulate");
				fallthrough;

			case "emulate":
				say("\"Leon hath shown me that, by speaking well, people may see beyond my deformity and respect me. I cannot change the way I look, but I can change my speech.\"");
				say("\"And, as Leon sows the seeds of The Fellowship, I sow seeds in the soil. Gardening distracts my thoughts from being trapped ashore.\"");
				remove("emulate");
				fallthrough;

			case "Palos" (remove):
				say("\"I do not know much about him. Most of the time he remained below or went about heavily cloaked. I do not think that he was of the race of Men...\"");
				say("\"We were all very thankful that he was so strong, I tell thee that.\"");
				add("strong");
				fallthrough;

			case "strong" (remove):
				say("\"Palos was fearfully strong, ",
					var0000,
					".\"");
				say("\"During a storm, the main mast was struck by lightning and came crashing down,\tjamming the winch that operated the sea anchor.\"");
				say("\"Without the sea anchor, we would have been quickly lost to the angry waves. But Palos strode across the deck and shoved the mast aside to free the winch... All by himself.\"");
				fallthrough;

			case "Brunt":
				say("\"Brunt is little more than a common mercenary, ",
					var0000,
					".\"");
				say("\"I suspect that Batlin hired him to act as a personal guard in this foreign land. He is not fit for much else.\"");
				remove("Brunt");
				add("not fit");
				fallthrough;

			case "not fit":
				say("\"Brunt is no seaman, 'tis true.\"");
				say("\"If I had not seen his face the day he boarded, I would have thought him a Daemon. He was so green.\"");
				remove("not fit");
				add("green");
				fallthrough;

			case "green":
				say("\"He was seasick the entire voyage, ",
					var0000,
					"! I have never seen anyone worse.\"");
				say("\"And what a temper! 'Tis to be hoped he is better mannered on land.\"");
				remove("green");
				fallthrough;

			case "Deadeye":
				say("\"Deadeye is the only one of Batlin's companions that I truly know. I cannot say that I'm happy about the association, either.\"");
				remove("Deadeye");
				add("association");
				fallthrough;

			case "association":
				say("\"I served with Deadeye on another ship, several years back. He used to bully the crew by telling them that white eye of his could curse a man.\"");
				say("\"Deadeye liked to provoke a fight and dare the other man to hit him. No one would, for fear of that eye.\"");
				say("\"Sailors are a superstitious lot, I fear, ",
					var0000,
					".\"");
				remove("association");
				fallthrough;

			case "storms" (remove):
				say("\"I've been a seafarin' man for more than twenty years, ",
					var0000,
					". And I cannot recall a time that I've seen storms as strange as these.\"");
				say("\"I've seen lightning that jumps from cloud to cloud. I've seen lightning that shoots down like a pitchfork from the heavens. And I've seen lightning that dances across the masts of a ship.\"");
				say("\"But I've never seen lightning that changes a man into a rock, or makes a ship disappear before thy very eyes.\"");
				UI_push_answers();
				add(["changes a man", "ship disappear", "change subject"]);
				fallthrough;

			case "changes a man":
				say("\"I saw it happen, ",
					var0000,
					"!\"");
				say("\"I was holding the door open for one of the crew who was running for shelter when one of those storms hit.\"");
				say("\"There was this bright flash and a deafening crash... And when mine eyes cleared, Geof was gone and a chicken stood gawking at me in the very spot Geof had been in.\"");
				remove("changes a man");
				fallthrough;

			case "ship disappear":
				say("\"With my very own eyes, I saw it!\"");
				say("\"I was on the Fawn docks chatting with a salt named Olon, in the days before I was banned\tfrom the city.\"");
				say("\"All of a sudden one of those storms hit and Olon and I dove for cover under a rowboat.\"");
				say("\"We saw the ship that had just put out be hit by the lightning and it just... disappeared! Never found a trace of it or her crew.\"");
				remove("ship disappear");
				fallthrough;

			case "Lady Yelinda" (remove):
				gflags[KNOW_YELINDAS_DIAMOND_NECKLACE] = true;
				say("\"The Great Lady did flee Fawn in a terrible hurry, due to the Curse. All she left behind was her Diamond Necklace.\"");
				say("\"She hath been made as disfigured as I am. Imagine, to plummet from Beauty to Ugliness!\"");
				say("\"It hath driven her insane.\"");
				add("Diamond Necklace");
				fallthrough;

			case "Diamond Necklace" (remove):
				say("\"I did find the necklace lying in the throne room.\"");
				say("\"But I did not take it, for it belongs to the Lady. And the rats shall not disturb it.\"");
				fallthrough;

			case "Delphynia" (remove):
				if (gflags[BANES_RELEASED]) {
					say("\"I found her pitiful body dumped in the street, with her insides... twisted... torn out...\"");
					say("\"She was long dead...\"");
					say("\"I brought her body to where it is now. I could not leave my love to lie in the open, for the rats to gnaw.\"");
				} else if (gflags[FIRST_RUGGS_ENCOUNTER] == false) {
					say("\"Delphynia is the most beautiful of all women! Pray, forgive me, ",
						var0000,
						". I speak with the tongue of a man bound by the chains of love.\"");
					say("\"Delphynia is Fawn's horticulturist and healer, of late. I met her when I accompanied Batlin into town for supplies.\"");
				} else {
					if (gflags[REFUSED_RUGGS_LETTER] == true) {
						say("\"Delphynia is Fawn's horticulturist and healer, of late. I met her when I accompanied Batlin into town for supplies.\"");
						say("\"Thou wilt understand why I love her, if thou shouldst meet her.\"");
					}
					if (gflags[ACCEPTED_RUGGS_LETTER] && (var000A == false)) {
						say("\"Delphynia is Fawn's horticulturist and healer, of late. I met her when I accompanied Batlin into town for supplies.\"");
						say("\"To me, she is the most beautiful woman in Fawn. When thou dost meet her, I'm sure that thou wilt agree with me.\"");
					} else {
						say("\"Thou hast met her... Delphynia is the most beautiful woman in all Fawn, to\tme.\"");
						say("\"She is also a fine horticulturist and healer.\tI met her when I accompanied Batlin into town for supplies.\"");
					}
				}
				fallthrough;

			case "Fawn":
				say("\"'Tis the city over there, ",
					var0000,
					". They claim to honor Beauty, which my face naturally offends.\"");
				say("\"They are hard pressed, what with the Goblins and all.\"");
				remove("Fawn");
				add("Goblins");
				fallthrough;

			case "Goblins" (remove):
				if (gflags[FAWN_TRIAL_DONE_FIRST_DAY] && (gflags[FAWN_TRIAL_DONE] && (!gflags[ORACLE_SET_TO_INNOCENT]))) {
					say("\"It is such a relief to be able to shelter behind the walls of Fawn. I think the goblins cannot reach us here.\"");
				} else if (gflags[HAVE_WOLF_TATTOO] == true) {
					if (gflags[CLEARED_FAWN_TOWER] == false) {
						say("\"Now that the Goblins hold thy Pikemen tower, Fawn doth have little hope of withstanding a determined attack.\"");
						say("\"I fear that my companions and I will be the next delicacy in the Goblin stewpot without thy protection.\"");
						say("\"We do not have city gates to hide behind.\"");
					} else {
						say("\"'Tis a blessing that thou and thine honored Pikemen companions did wrest the Fawn tower from the Goblins.\"");
						say("\"Fawn could not have long resisted a determined attack. And my companions and I would have been the next delicacy in the Goblin stewpot, I fear.\"");
						say("\"We have no city gates to hide behind.\"");
					}
				} else if (gflags[CLEARED_FAWN_TOWER] == false) {
					say("\"Now that the Goblins hold the Pikemen tower, Fawn doth have little hope of withstanding a determined attack.\"");
					say("\"I fear that my companions and I will be the next delicacy in the Goblin stewpot.\"");
					say("\"We do not have city gates to hide behind.\"");
				} else {
					say("\"'Tis a blessing that the honored Pikemen ripped the Fawn tower from them Goblins.\"");
					say("\"Fawn could not have long resisted a determined attack. And my companions and I would have been the next delicacy in the Goblin stewpot, I fear.\"");
					say("\"We have no city gates to hide behind.\"");
				}
				fallthrough;

			case "letter":
				var0016 = UI_remove_party_items(0x0001, 0x031D, 0x001B, 0x0000, false);
				say("\"Oh, blessings upon thee, ",
					var0000,
					"!\"");
				say("\"Delphynia knows of my love, though she is unsure of her feelings for me.\"");
				say("\"As long as she hath not rejected me out of hand, I will be content to wait. Thy good deed hath given me reason to live!\"");
				say("\"As promised, I will send thee to my shipmate, Scots.\"");
				var0017 = true;
				remove("letter");
				add("Scots");
				fallthrough;

			case "Scots":
				say("\"Scots is a fine fellow, though he often seems a bit distracted. He is a cartographer.\"");
				say("\"Perhaps his maps will aid thee, though they are not as accurate as he wishes.\"");
				say("\"Thou mayest find him somewhere within our camp.\"");
				remove("Scots");
				add("not as accurate");
				fallthrough;

			case "not as accurate":
				say("\"Since we dare not stray too far from shelter, Scots cannot explore and map.\"");
				say("\"He hath worked from existing maps that he received from the Fawn fishermen, so he is only sure of the accuracy of the coastline.\"");
				say("\"Scots often complains that we cannot even explore by ship. None of us are happy to be stranded here.\"");
				remove("not as accurate");
				fallthrough;

			case "bye":
				UI_remove_npc_face0();
				Func097F(AVATAR, "@Goodbye, Ruggs.@", 0x0000);
				if (gflags[BANES_RELEASED]) {
					var0008 = "" & ("@Woe is me...@" & "@My love is slain!@");
					Func094F(RUGGS, var0008);
				} else {
					Func097F(RUGGS, "@Fair weather to thee.@", 0x0005);
				}
				break;
		}
	}
}

extern var Func0954 0x954 ();
extern var Func0953 0x953 ();
extern void Func07D1 object#(0x7D1) ();
extern void Func097F 0x97F (var var0000, var var0001, var var0002);
extern var Func099B 0x99B (var var0000, var var0001, var var0002, var var0003, var var0004, var var0005, var var0006);

void Func043C object#(0x43C) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;

	var0000 = Func0954();
	var0001 = UI_is_pc_female();
	var0002 = Func0953();
	if (event == DEATH) {
		var0003 = script item {
			nohalt;
			call Func0112;
		};
	}
	if (event == DOUBLECLICK) {
		AVATAR->item_say("@Greetings, sir.@");
		SCOTS->Func07D1();
		Func097F(SCOTS, (("@Hello, " + var0000) + ".@"), 0x0005);
		SCOTS->set_schedule_type(TALK);
	}
	if (event == STARTED_TALKING) {
		SCOTS->run_schedule();
		SCOTS->clear_item_say();
		SCOTS->show_npc_face0(0x0000);
		var0004 = SCOTS->get_item_flag(MET);
		if (var0004 == false) {
			say("\"Good, a new face! I am Scots, a geographer. Perhaps thou wouldst share tales of other places with me, so I might add detail to my maps.\"");
			SCOTS->set_item_flag(MET);
		} else {
			say("\"Welcome back, ",
				var0002,
				"! What tales hast thou for me today?\"");
		}
		add(["goblins", "storms", "tales", "maps", "bye"]);
		if (gflags[BANES_RELEASED] == true) {
			add("Iolo the Mad");
		}
		converse (0) {
			case "goblins" (remove):
				if (gflags[FAWN_TRIAL_DONE_FIRST_DAY] && (gflags[FAWN_TRIAL_DONE] && (!gflags[ORACLE_SET_TO_INNOCENT]))) {
					say("\"I think that we shall be safe from their raiding parties, now that the Lady hath admitted us within the city walls.\"");
				} else {
					say("\"The Pikemen track them into the woods around their Knight's Test, west of here. Then they simply seem to disappear.\"");
					if (gflags[CLEARED_FAWN_TOWER] == false) {
						say("\"We have held against their raiding parties with the help of the Pikemen. But now that the tower hath been taken and we cannot seek refuge in the city, I fear that we are lost.\"");
					} else {
						say("\"We withstand their attacks only with the help of the Pikemen. We had given up hope when the goblins took the tower. But we may hold a while longer now that it hath been returned to Monitorian keeping.\"");
					}
					add("Pikemen");
					add("Knight's Test");
				}
				fallthrough;

			case "Pikemen":
				if (gflags[HAVE_WOLF_TATTOO] == true) {
					say("\"Thou seekest to jest with me. By the mark on thy face, 'tis plain to see that thou art a Pikeman. Surely Monitor's bravest have better things to do than pull pranks on a poor, landbound sailor.\"");
				} else {
					say("\"They are warriors that come from Monitor, a city south of here. Very brave. I can usually count on many tales from them.\"");
					add("Monitor");
				}
				remove("Pikemen");
				fallthrough;

			case "Monitor":
				if (gflags[HAVE_WOLF_TATTOO] == true) {
					say("\"Perhaps thou hast been in one fight too many, if thou dost not recall thine own town.\" *\"Travel southward from here. One of thy Pikeman comrades will take thee to the healer in Monitor, I'm certain.\"");
				} else {
					say("\"'Tis on the very south edge of the continent. There are mountains to either side of the city. Very defensible.\" *\"The city is run by a representative from one of the three Pikemen units -- the wolves, the leopards, and the bears. Each unit takes a turn at having one of their number govern the city.\"");
				}
				remove("Monitor");
				fallthrough;

			case "Knight's Test":
				if (gflags[HAVE_WOLF_TATTOO] == true) {
					say("\"All I know, good knight, is that all Monitorians travel to a peninsula southwest of here for some rite of passage. 'Tis all I can tell thee. Unless thou wishest to further enlighten me...\"");
				} else {
					say("\"The Pikemen I spoke to were rather closed-mouthed about it. All I could gather is that it's some sort of rite of passage\tfor all Monitorians.\" *\"'Tis located on a peninsula to the southwest of here.\"");
				}
				remove("Knight's Test");
				fallthrough;

			case "storms":
				say("\"I've travelled far and wide all my life, and never have I seen the likes before. These storms appear without warning and leave chaos in their wake. Move things around, change things around... Simply not natural. Makes me think Leon might be right.\"");
				remove("storms");
				add("Leon");
				fallthrough;

			case "Leon":
				say("\"Thou hast not met Leon yet? Thou hast only to look for the crowd of people. Thou'lt find him in the center of it all, no doubt.\" *\"Leon is a very charismatic Fellowship follower. He speaks their beliefs fairly, to be sure. Hath drawn many of the folk from the town. I'll wager that's why that Priestess had us banned from entering the city.\"");
				remove("Leon");
				gflags[SCOTS_SAID_LEON] = true;
				add("Priestess");
				if (gflags[SCOTS_SAID_FELLOWSHIP] == false) {
					add("Fellowship");
				}
				fallthrough;

			case "Fellowship":
				say("\"I can tell thee that it digresses from the Virtues that Lord British set forth. But it makes sense.\" *\"Talk to Leon. He's far more eloquent than I on the subject.\"");
				remove("Fellowship");
				gflags[SCOTS_SAID_FELLOWSHIP] = true;
				if (gflags[SCOTS_SAID_LEON] == false) {
					add("Leon");
				}
				fallthrough;

			case "Priestess" (remove):
				if (gflags[FAWN_TRIAL_DONE_FIRST_DAY] && (gflags[FAWN_TRIAL_DONE] && (!gflags[ORACLE_SET_TO_INNOCENT]))) {
					say("\"'Tis a shame to see any creature so beautiful placed behind bars, but I think we shall all be safer because of it.\"");
				} else {
					say("\"Kylista is as beautiful as the day is long, but with the soul of a viper. I wouldn't trust her if I were thee.\" *\"She's plotting something with the Chancellor, I'll wager.\"");
					add("Chancellor");
				}
				fallthrough;

			case "Chancellor":
				say("\"Little worm named Zulith. Lady Yelinda's shadow... leads her around by the hand all the time. If thou seekest an audience with the Lady, thou must first speak to Zulith.\" *\"I saw Kylista speaking to Zulith the day before we sailors were banned from the city. She was afraid that Leon was stealing her followers. And Zulith,\tthe power-hungry toad that he is, saw to it that her wishes became law.\" *\"'Tis the Great Captains and the Chancellor that run things in Fawn, I'm afraid.\"");
				remove("Chancellor");
				add("Great Captains");
				fallthrough;

			case "Great Captains":
				say("\"There are three of them: Joth, Garth, and Voldin. Make a great show of honoring Beauty, but they honor money and power more. Yelinda consults them and Zulith about everything... even the dinner menu, I'll warrant.\" *\"And with Kylista whispering in Zulith's ear, thou hadst best count her as one of the powers of Fawn as well.\"");
				remove("Great Captains");
				fallthrough;

			case "tales":
				say("\"What good is a geographer if he cannot explore and map the lands he finds? The storms keep me and my shipmates from taking to the sea.\" *\"I ask all those who come to me for tales of distant places. There may be some truth in the telling, and I add what I can to my maps, as Gwenno suggested.\"");
				remove("tales");
				add("Gwenno");
				fallthrough;

			case "Gwenno":
				say("\"She contacted me back in Britannia with an opportunity to explore a new land. Naturally, I accepted. She was to transport some sort of obelisk here for The Fellowship and then she was free to explore and collect all the tales she wished.\"");
				remove("Gwenno");
				add("obelisk");
				if (gflags[SCOTS_SAID_FELLOWSHIP] == false) {
					add("Fellowship");
				}
				fallthrough;

			case "obelisk":
				say("\"It was abominably heavy! Quite a chore to move it on land. Then one day after we had it safely on the shore and Gwenno had already headed inland, there was a huge explosion. When I could see again, there stood Batlin -- and the obelisk was shattered all over the ground.\"");
				remove("obelisk");
				add("Batlin");
				fallthrough;

			case "Batlin":
				say("\"He seemed most upset at the time he arrived. Though I suspect that it was merely a result of the disorientation from the teleportation storm that brought him here.\" *\"He took several members of the crew with him and headed inland. He was looking for some blackrock artifact... Mayhap it doth have some connection to the obelisk. I don't know.\"");
				remove("Batlin");
				add("blackrock artifact");
				fallthrough;

			case "blackrock artifact":
				say("\"I remember that he mentioned that it was fashioned in the likeness of a snake, but that's all. Thou mightest ask Delphynia, the herbalist. I know he talked to her.\"");
				remove("blackrock artifact");
				add("Delphynia");
				fallthrough;

			case "Delphynia":
				say("\"She's an herbalist in the city that hath been doing the healer's work ever since the goblins killed the last healer.\" *\"Thou shouldst ask Ruggs if thou wishest to know more. They spent quite a bit of time together before we were cast out of the city.\"");
				remove("Delphynia");
				add("Ruggs");
				fallthrough;

			case "Ruggs":
				say("\"Thou wouldst know him if thou hadst seen him. What he lacks in handsomeness, he makes up for in the goodness of his heart. He cares deeply for Delphynia. But Delphynia is a superstitious woman and fears Ruggs' deformities are the result of some curse. 'Tis a sadness. They would make a fine couple.\"");
				remove("Ruggs");
				fallthrough;

			case "maps":
				say("\"Lord British once said that I was the finest map maker in all Britannia. I take great care in my work. Since I have explored very little of this continent, I fear that my map is less than accurate.\" *\"I would be honored if thou wouldst accept a copy of my map. Perhaps it would aid thee in thy quest.\"");
				var0005 = Func099B(AVATAR, 0x0001, 0x00B2, QUALITY_ANY, 0x0000, false, true);
				gflags[OBTAINED_SCOTS_MAP] = true;
				remove("maps");
				fallthrough;

			case "Iolo the Mad":
				say("\"What great calamity must have befallen thy trusted companion, ",
					var0002,
					". I fear that his reason hath fled. He terrorizes the city with his fiendish jokes.\" *\"Only yesterday, Iolo announced to the citizens of Fawn that he would prove once and for all whether or not Beauty was skin deep. He then cast a spell on poor Lady Yelinda and removed all of her skin. She ran out of the city toward Gorlab Swamp. Without the true ruler, I fear that Fawn will never be restored... even with thine aid.\"");
				remove("Iolo the Mad");
				fallthrough;

			case "bye":
				UI_remove_npc_face0();
				Func097F(AVATAR, "@Thanks for thine assistance.@", 0x0000);
				Func097F(SCOTS, "@A pleasure...@", 0x0005);
				break;
		}
	}
}

extern var Func0954 0x954 ();
extern var Func0953 0x953 ();
extern var Func0994 0x994 ();
extern var Func09A0 0x9A0 (var var0000, var var0001);
extern void Func07D1 object#(0x7D1) ();
extern void Func097F 0x97F (var var0000, var var0001, var var0002);
extern var Func0992 0x992 (var var0000, var var0001, var var0002, var var0003);
extern var Func0955 0x955 ();
extern void Func087B 0x87B ();
extern void Func08AB 0x8AB ();
extern void Func08AA 0x8AA ();

void Func043D object#(0x43D) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;
	var var0008;
	var var0009;
	var var000A;
	var var000B;
	var var000C;

	var0000 = Func0954();
	var0001 = UI_is_pc_female();
	var0002 = Func0953();
	var0003 = false;
	var0004 = false;
	var0005 = false;
	var0006 = false;
	var0007 = Func0994();
	if (event == DEATH) {
		var0008 = script item {
			nohalt;
			call Func0112;
		};
	}
	if (event == SCRIPTED) {
		if (gflags[ZULITH_CAUGHT_TAILING]) {
			abort;
		}
		if (Func0994() == 0x0003) {
			var0008 = script Func09A0(0x0005, 0x0001) after 50 ticks {
				nohalt;
				call Func043D;
			};
			var0008 = ZULITH->approach_avatar(0x0078, 0x0028);
			ZULITH->set_schedule_type(HOUND);
		} else {
			var0008 = script Func09A0(0x0005, 0x0001) after 100 ticks {
				nohalt;
				call Func043D;
			};
		}
	}
	if (event == DOUBLECLICK) {
		AVATAR->item_say("@A moment, if thou wilt.@");
		ZULITH->Func07D1();
		Func097F(ZULITH, "@At thy service.@", 0x0005);
		ZULITH->set_schedule_type(TALK);
	}
	if ((event == PROXIMITY) && (gflags[ZULITH_SPOKE_RING] && (!gflags[ZULITH_CAUGHT_TAILING]))) {
		var0009 = UI_get_random(0x0006);
		if (var0009 == 0x0001) {
			var000A = "@He is following us!@";
		}
		if (var0009 == 0x0002) {
			var000A = "@Look!@";
		}
		if (var0009 == 0x0003) {
			var000A = "@Who is that man?@";
		}
		if (var0009 == 0x0004) {
			var000A = "@Spy!@";
		}
		if (var0009 == 0x0005) {
			var000A = "@Careful!@";
		}
		if (var0009 == 0x0006) {
			var000A = "@Do not look now...@";
		}
		var000B = Func0992(0x0001, var000A, 0x0000, true);
		ZULITH->set_schedule_type(HOUND);
		gflags[ZULITH_TAILING_PARTY] = true;
	}
	if (event == STARTED_TALKING) {
		ZULITH->run_schedule();
		ZULITH->clear_item_say();
		ZULITH->show_npc_face0(0x0000);
		var000C = ZULITH->get_item_flag(MET);
		if (gflags[FAWN_TRIAL_RECESS] || (gflags[FAWN_TRIAL_DONE_FIRST_DAY] && (!gflags[FAWN_TRIAL_DONE]))) {
			say("\"I know thee for what thou art, stranger! And I shall testify at the trial.\"");
			UI_remove_npc_face0();
			Func097F(ZULITH, "@Wait and see!@", 0x0000);
			abort;
		}
		if (var000C == false) {
			if (gflags[HAVE_WOLF_TATTOO] == true) {
				if (var0001 == true) {
					say("\"Ah, one of Monitor's female Pikemen. I am Zulith, Chancellor of Fawn. It is mine honor and duty to serve thee.\"");
				} else {
					say("\"What a pleasure to meet one of the illustrious Monitorian knights! I am Zulith, Chancellor of Fawn. How might I assist thee, ",
						var0000,
						"?\"");
				}
			} else if (var0001 == true) {
				say("\"Welcome to Fawn, city of Beauty. My name is Zulith. I am the Chancellor. It is mine honor and duty to serve thee.\"");
			} else {
				say("\"Welcome to Fawn, honored traveller. I am Zulith, Chancellor of Fawn. How might I assist thee, ",
					var0000,
					"?\"");
			}
			ZULITH->set_item_flag(MET);
		} else {
			say("\"Well met, ",
				var0000,
				". 'Tis a pleasure to see thee again.\"");
		}
		if (gflags[ZULITH_TAILING_PARTY] && (!gflags[ZULITH_CAUGHT_TAILING])) {
			add("Art thou following me?");
		}
		converse (["storms", "goblins", "Chancellor", "bye"]) {
			case "Art thou following me?" (remove):
				say("\"I am a busy man, ",
					var0000,
					". If thy business lies along the route that mine doth, what fault of mine is that?\"");
				say("\"Besides, what hast thou done to warrant thy worries that I might be following thee?\"");
				var000B = Func0992(0x0001, "@Cheeky fellow!@", 0x0000, false);
				Func097F(ZULITH, "@Arrogant strangers!@", 0x0000);
				gflags[ZULITH_CAUGHT_TAILING] = true;
				ZULITH->revert_schedule();
				ZULITH->set_schedule_type(SHY);
				break;

			case "storms" (remove):
				say("\"Quite disruptive... They have totally depleted our fishing fleet.\"");
				if (gflags[FAWN_TRIAL_DONE_FIRST_DAY] && (gflags[FAWN_TRIAL_DONE] && (!gflags[ORACLE_SET_TO_INNOCENT]))) {
					say("\"If only these terrible storms would end!\"");
				} else {
					say("\"Great Captain Garth doth have plans laid for rebuilding the ships. But 'twould not be safe until these storms subside.\"");
					say("\"Great Captain Joth is in charge of finding the means to sustain the city until this unusual weather clears.\"");
					UI_push_answers();
					add(["Great Captains", "Great Captain Garth", "Great Captain Joth", "change subject"]);
				}
				fallthrough;

			case "change subject":
				say("\"Of course. What dost thou desire to know?\"");
				UI_pop_answers();
				fallthrough;

			case "Great Captains" (remove):
				say("\"The Great Captains are the counsellors to Lady Yelinda, ruler of Fawn. There are three of them: Garth, Joth and Voldin.\"");
				add(["duties", "Voldin"]);
				fallthrough;

			case "duties":
				say("\"'Tis their honor to oversee the fleets and all trade matters.\"");
				say("\"They are all seamen who have been appointed to their post in recognition of their expertise.\"");
				remove("duties");
				fallthrough;

			case "Voldin" (remove):
				say("\"Voldin doth have a history of service to Fawn. He was unanimously nominated for the council position by his fellow captains.\"");
				say("\"Voldin works in conjunction with the Captain of the Guard to assure Fawn's safety. He is senior on the council.\"");
				add("history");
				fallthrough;

			case "history" (remove):
				say("\"Voldin served Fawn as a member of the city guard in his younger days. Before he became a council member, he was a fishing captain.\"");
				fallthrough;

			case "Great Captain Garth" (remove):
				say("\"Garth comes from a fine family. He is the youngest member of the council, but wisely tempers his views to those of the senior council members.\"");
				say("\"Garth is also something of a ladies' man, I fear.\"");
				add("Garth's family");
				fallthrough;

			case "Garth's family":
				say("\"His family doth own a shipping business. They have been merchant seamen for generations.\"");
				say("\"As his mother's youngest son, he took the council seat when his cousin resigned. His elder brother is now in charge of the family's shipping business.\"");
				remove("Garth's family");
				fallthrough;

			case "Great Captain Joth" (remove):
				say("\"Joth was the finest sea captain before he was injured.\"");
				say("\"He favors beginning to rebuild the fleet now, but hath deferred to Voldin's opinion that it would not be safe to do so at this time.\"");
				add(["injured", "not safe"]);
				fallthrough;

			case "injured" (remove):
				say("\"Joth's ship ran aground during a storm... When his injuries would not allow him to return to sea, Lady Yelinda most graciously offered him a seat on the council.\"");
				fallthrough;

			case "not safe" (remove):
				say("\"Who would cut the wood to build the ships for fear of more goblins? And no sane person would venture into the open with these storms arriving without warning.\"");
				say("\"No, we must wait until this weather clears before we can hope to begin rebuilding our fleet.\"");
				add("Fear of more goblins?");
				fallthrough;

			case "Fear of more goblins?" (remove):
				if (gflags[CLEARED_FAWN_TOWER]) {
					say("\"Everyone knows that goblins breed like flies upon carrion! Even though the tower hath been retaken, it will not be long before they are back!\"");
				} else {
					say("\"Everyone knows that goblins breed like flies upon carrion! It will not be long before they engulf the entire city with their filthy numbers!\"");
				}
				fallthrough;

			case "goblins" (remove):
				if (gflags[HAVE_WOLF_TATTOO] == true) {
					if (gflags[CLEARED_FAWN_TOWER] == true) {
						say("\"Most horrible creatures!\"");
						say("\"Dost thou know that, without the possibility of escape by ship because of the storms, I had actually feared that the city might be lost?\"");
						say("\"Knowest thou the brave Pikemen that restored our safety? I am sure that Lady Yelinda would like to thank them personally, if possible.\"");
						if (Func0955() == true) {
							say("\"Pray tell me their names that I might relay them to her Ladyship at once.\"");
							UI_push_answers();
							add(["I do not know their names.", "I and my companions.", "I led the attack."]);
						} else {
							say("\"Thou canst not be faulted for not knowing their names. No doubt there are quite a number of Pikemen.\"");
							say("\"Lady Yelinda will have to send her thanks back to Monitor.\"");
						}
					} else if (var0001 == true) {
						say("\"The goblins are most likely preparing for an assault on our city.\"");
						say("\"Thou shouldst stay here in Fawn, ",
							var0000,
							". There is great danger now that those horrible creatures hold the tower.\"");
						say("\"I would be most distraught to know that thou wert going to endanger thyself.\"");
					} else {
						say("\"The goblins are most likely preparing for an assault on our city.\"");
						say("\"Shouldst thou not lend thy bravery to the cause of restoring our city's safety, noble Pikeman?\"");
					}
				} else if (var0001 == true) {
					say("\"Most horrible creatures!\"");
					say("\"They have a most unfortunate taste for human flesh. For thy safety, thou shouldst remain within the confines of the city. I fear that they are preparing to assault the city.\"");
				} else {
					say("\"Most horrible creatures!\"");
					say("\"Thou shouldst speak with the Captain of the Guard. We have need of able-bodied fighters, such as thyself. I fear that they are preparing to assault the city.\"");
				}
				fallthrough;

			case "I do not know their names.":
				remove(["I do not know their names.", "I and my companions.", "I led the attack."]);
				say("\"Thou canst not be faulted for not knowing their names. No doubt there are quite a number of Pikemen.\"");
				say("\"Lady Yelinda will have to send her thanks back to Monitor.\"");
				UI_pop_answers();
				fallthrough;

			case "I and my companions.":
				remove(["I do not know their names.", "I and my companions.", "I led the attack."]);
				if (var0001 == true) {
					say("\"Then thou hast companions beyond compare!\"");
					say("\"Lady Yelinda will surely wish to meet thee, a shining example of Beauty!\"");
				} else {
					say("\"Truly thou art the bravest Monitorian alive!\"");
					say("\"Lady Yelinda will surely wish to thank thee herself.\"");
				}
				UI_pop_answers();
				fallthrough;

			case "I led the attack.":
				remove(["I do not know their names.", "I and my companions.", "I led the attack."]);
				if (var0001 == true) {
					say("\"Surely thou dost jest!\"");
					say("\"They could not have allowed someone as beautiful as thyself to be endangered!\"");
				} else {
					say("\"Truly thou art the bravest Monitorian alive!\"");
					say("\"Lady Yelinda will surely wish to thank thee herself.\"");
				}
				UI_pop_answers();
				fallthrough;

			case "Chancellor" (remove):
				if (gflags[FAWN_TRIAL_DONE_FIRST_DAY] && (gflags[FAWN_TRIAL_DONE] && (!gflags[ORACLE_SET_TO_INNOCENT]))) {
					say("\"I serve the Lady, handling those details which she doth choose to delegate to me. I also exchange various forms of money.\"");
					add("exchange money");
				} else {
					say("\"I serve as an envoy from Lady Yelinda to the Great Captains. I oversee all the minor details that should not worry her Ladyship. I also exchange various forms of money.\"");
					say("\"If thou dost wish an audience with her, I can examine her schedule.\"");
					add(["Lady Yelinda", "exchange money", "audience"]);
				}
				fallthrough;

			case "Lady Yelinda" (remove):
				say("\"She is the ruler of Fawn and all its environs. All who honor Beauty honor Yelinda.\"");
				say("\"She is a wise and compassionate leader. Everyone doth love her. Her beauty is only rivaled by that of Kylista.\"");
				add("Kylista");
				fallthrough;

			case "Kylista" (remove):
				say("\"Kylista is the priestess of Beauty.\"");
				say("\"Yelinda is the embodiment of all of Fawn itself. Because Kylista presides over the Oracle, she is the personification of Beauty.\"");
				add("Oracle");
				fallthrough;

			case "Oracle" (remove):
				say("\"Many people believe that the Mages of Old Sosaria created the Oracle. I do not believe such.\"");
				say("\"I have stood alone in the temple gazing at it, and I will tell thee that it is a living being trapped there in that statue.\"");
				say("\"Those Mages did not create a magical item! They summoned some beautiful spirit and trapped it there!\"");
				add(["temple"]);
				fallthrough;

			case "temple" (remove):
				say("\"I often go there when the day hath been difficult. 'Tis directly behind the palace. 'Tis so quiet and peaceful, except before a revelation.\"");
				add("revelation");
				fallthrough;

			case "revelation" (remove):
				say("\"Yes, revelations are quite exciting. A message from the heavens, or at least that poor trapped spirit.\" *\"Often, 'tis the only thing many people have to give them hope in these troubled times.\"");
				fallthrough;

			case "audience" (remove):
				say("\"Lady Yelinda doth receive visitors and petitions every morning. Let us see... She could receive thee some time next week.\" *\"Perhaps if I intercede for thee, thou mightest be received earlier. I shall see what I can arrange.\"");
				fallthrough;

			case "exchange money":
				Func087B();
				fallthrough;

			case "bye":
				Func08AB();
				UI_remove_npc_face0();
				Func097F(AVATAR, "@Goodbye.@", 0x0000);
				Func097F(ZULITH, "@Walk in Beauty!@", 0x0005);
				Func08AA();
				break;
		}
	}
}

extern var Func0953 0x953 ();
extern void Func097F 0x97F (var var0000, var var0001, var var0002);
extern void Func07D1 object#(0x7D1) ();
extern var Func0955 0x955 ();
extern var Func0992 0x992 (var var0000, var var0001, var var0002, var var0003);

void Func043E object#(0x43E) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;
	var var0008;

	var0000 = Func0953();
	var0001 = ANDRAL->get_item_flag(MET);
	if (event == DOUBLECLICK) {
		Func097F(AVATAR, "Hello, sir.", 0x0000);
		ANDRAL->Func07D1();
		Func097F(ANDRAL, "Greetings.", 0x0002);
		ANDRAL->set_schedule_type(TALK);
	}
	if (event == STARTED_TALKING) {
		ANDRAL->run_schedule();
		ANDRAL->clear_item_say();
		ANDRAL->show_npc_face0(0x0000);
		if (!var0001) {
			say("\"Hello, stranger. I am Andral of Monitor. Dost thou need the services of a master artist?\"");
			ANDRAL->set_item_flag(MET);
		} else {
			say("\"Welcome, ",
				var0000,
				". How may I be of service to thee?\"");
		}
		add(["artist", "bye"]);
		if (!gflags[ASKED_ANDRAL_ABOUT_ROBBERY]) {
			say("\"Perhaps I should not speak with thee... I hope thou art not come to rob me!\"");
			add("rob");
		}
		converse (0) {
			case "artist" (remove):
				say("\"I am a sculptor by trade. There is a brisk business to be done in this city, fashioning busts and statues for the Knights.\"");
				if (!gflags[AVATAR_IS_KNIGHT]) {
					say("\"But I can make time for thee, if thou dost wish to commission my talents.\"");
					add("commission");
				} else {
					add(["sculptor", "Knights", "commission"]);
				}
				fallthrough;

			case "commission" (remove):
				say("\"For a fee I create works of art to honor Knights when they complete great quests -- or when they simply wish to pay me money for a monument to their vanity.\"");
				say("\"Dost thou wish to commission a work from me?\"");
				var0002 = Func0955();
				if (var0002) {
					say("\"I am sorry but I am currently working on a statue of Luther. It may take me some time to complete. I could not begin work on something for thee until then.\"");
				} else {
					say("\"I am proud of thee! Thy life and thy deeds are all the testament anyone truly needs, provided one hath truly made something of their life.\"");
				}
				fallthrough;

			case "sculptor" (remove):
				say("\"Thou mayest have noticed the various sculptures around the town. I crafted many of them.\"");
				if (gflags[AVATAR_IS_KNIGHT]) {
					say("\"'Tis our custom to carve sculptures to commemorate the bravery of our finest warriors. Now that thou art a Knight, thou canst live for the day when I shall sculpt a monument for thee.\"");
				}
				fallthrough;

			case "Knights" (remove):
				say("\"As thou knowest by now, this is a city of warriors. I myself passed the Knight's Test when I was fifteen, but my true love hath always been art.\"");
				say("\"The other Knights sometimes mock me, for I am seldom seen at the List Field. Canst thou imagine what a blade could do to my gifted fingers!\"");
				say("\"But, alas, an artist is always misunderstood.\"");
				add(["List Field", "misunderstood"]);
				fallthrough;

			case "List Field" (remove):
				say("\"There is so little time in this life, and 'twould be an utter waste for someone of mine artistic abilities to engage in duels.\"");
				say("\"Should I spend that hour in profitless combat, solely to please my fellow Knights? I think not.\"");
				say("\"Instead, I could be crafting another masterpiece, so that my name will be known to future generations. This is true glory.\"");
				fallthrough;

			case "misunderstood" (remove):
				say("\"I have no friends. The Knights tolerate me and value my services, but they do not share mine interests.\"");
				say("\"There once was a woman who cared for me, but we quarrelled. She, too, hath art in her soul, but she hides her secret well.\"");
				say("\"Lucilla would not pay the price that I have, to be so alone. Do not weep for me, my friend -- I am proud of who I am.\"");
				gflags[ASK_LUCILLA_ABOUT_ANDRAL] = true;
				fallthrough;

			case "rob" (remove):
				say("\"I am not sure that I care to speak about the incident. 'Twas most unpleasant.\"");
				say("\"There was a stranger in Monitor, one who claimed to be from another land. He was very large, a scholar rather than a warrior.\"");
				say("\"He travelled with many companions, including a tall, cloaked stranger.\"");
				say("\"On the night that Batlin the Sage left town, someone stole an ancient relic from mine home. I suspect that he was the thief!\"");
				var0003 = Func0992(DUPRE, "@Batlin! Why, he is our enemy, too!@", 0x0000, false);
				0x0000->set_conversation_slot();
				gflags[ASKED_ANDRAL_ABOUT_ROBBERY] = true;
				UI_push_answers();
				add(["Batlin", "companions", "artifact", "nothing more"]);
				fallthrough;

			case "Batlin" (remove):
				say("\"He came inquiring about ancient ruins, and was especially interested in the Serpent Stone -- but Renfry can tell thee more of this.\"");
				say("\"Simon the Innkeeper heard the sage say that he had come here from Fawn.\"");
				gflags[KNOWS_BATLIN_WAS_IN_MONITOR] = true;
				if (!gflags[ASKED_ANDRAL_ABOUT_FAWN]) {
					add("Fawn");
				}
				fallthrough;

			case "Fawn" (remove):
				say("\"The City of Beauty lies due north of here, on the shores of a great bay. Fawn is a city of fishermen.\"");
				if (UI_is_pc_female()) {
					say("\"Thou mightest like Fawn, for 'tis a place where members of thy sex are highly regarded. The city is ruled by a Queen, and the Priestess of Beauty is also female.\"");
				} else {
					say("\"The women of Fawn are the most beautiful in the land, but they are overly pampered.\"");
					say("\"Monitorian females, on the other hand, are as strong as oxen!\"");
				}
				fallthrough;

			case "companions" (remove):
				say("\"There is not much to say! The one in the cloak spent most of his time in the inn, and seldom spoke.\"");
				if (!gflags[GOBLIN_SIMON_DEAD]) {
					say("\"Perhaps Simon could tell thee more.\"");
				}
				say("\"There was also a warrior named Brunt who travelled with Batlin. He was small in stature, but with incredibly broad shoulders --\"");
				say("\"Oh! If only he would have posed in my studio! I could have created such art...\"");
				say("\"Standarr fought him in the List Field, and said that he was an opponent unlike any other!\"");
				gflags[ASKED_STANDARR_ABOUT_BRUNT] = true;
				fallthrough;

			case "artifact" (remove):
				say("\"Mine ancestors found the relic when they first founded this city, and it hath been kept in the family all this time.\"");
				say("\"To be honest, we were afraid to discard it. It had a demonic appearance, being shaped like a serpent, and composed of a dark rock never before seen.\"");
				var0003 = Func0992(0x0001, "@Perhaps blackrock, Avatar...@", 0x0000, false);
				if (var0003 != AVATAR) {
					0x0000->set_conversation_slot();
				}
				say("\"We hated the object, yet we were afraid to be parted from it. I cannot explain this. But it was so.\"");
				add(["demonic appearance", "serpent-shaped"]);
				fallthrough;

			case "demonic appearance" (remove):
				say("\"Monitorians are not a superstitious people, yet we fear the ancient ruins.\"");
				say("\"They were once the homes of Daemons who ruled this land in a distant age. They were horned beings with red skins, and they had the power to command molten rock to flow!\"");
				say("\"The Serpent was their sign.\"");
				fallthrough;

			case "serpent-shaped" (remove):
				say("\"Indeed, 'twas as if a living serpent had been changed into stone -- a perfect replica!\"");
				say("\"'Tis not uncommon to see the symbol of the serpent among the ruins, yet I have never seen before or since any such Rock Serpent.\"");
				var0003 = Func0992(SHAMINO, "@Couldst thou describe the curvings of the serpent?@", 0x0000, false);
				if (var0003 != AVATAR) {
					0x0000->set_conversation_slot();
					say("\"Umm... why, the head curved to the right, and the body was most sinuous. Why dost thou ask?\"");
					var0003 = Func0992(var0003, "@Avatar, this man's stolen relic was a\tperfect match for the one thou lost in the Storm, except that it faced the opposite way!", 0x0000, false);
					0x0000->set_conversation_slot();
				}
				fallthrough;

			case "nothing more":
				say("\"But let me say this -- Batlin shall not rest in peace, for a powerful warrior is on his trail!\"");
				say("\"Dost thou know of Wilfred the Slayer?\"");
				if (Func0955()) {
					say("\"Then I need say no more. Surely, Wilfred shall slay the evil sage and reap my revenge.\"");
				} else {
					say("\"Wilfred is a Knight of Monitor, but his home is at the inn of the Sleeping Bull.\"");
					say("\"Batlin hath been there as well, and Wilfred's father hath mysteriously disappeared. Wilfred suspects the sage of being involved.\"");
					say("\"Surely, brave Wilfred shall track down the sage and kill him, and I shall enjoy sweet revenge!\"");
				}
				gflags[HEARD_ABOUT_WILFRED] = true;
				UI_pop_answers();
				if (!gflags[ASKED_ANDRAL_ABOUT_INN]) {
					add("Sleeping Bull");
				}
				fallthrough;

			case "Sleeping Bull" (remove):
				say("\"Thou canst find the inn of the Sleeping Bull by taking the Serpent Highway north from here.\"");
				say("\"There is not much there, save for an ancient inn for which the village is named. Wilfred's brother Argus doth operate it.\"");
				gflags[ASKED_ANDRAL_ABOUT_INN] = true;
				fallthrough;

			case "bye":
				Func097F(AVATAR, "@Bye!@", 0x0000);
				Func097F(ANDRAL, "@'Til next we meet...@", 0x0002);
				break;
		}
	}
	if (event == PROXIMITY) {
		ANDRAL->clear_item_say();
		if (LUTHER->npc_nearby() && (LUTHER->get_schedule_type() == MAJOR_SIT)) {
			LUTHER->clear_item_say();
			var0004 = ANDRAL->direction_from(LUTHER);
			var0004 = script ANDRAL {
				nohalt;
				face var0004;
			};
			var0005 = UI_get_random(0x0006);
			if (var0005 == 0x0001) {
				Func097F(ANDRAL, "@Turn this way...@", 0x0000);
				Func097F(LUTHER, "@Hurry!@", 0x0003);
			}
			if (var0005 == 0x0002) {
				Func097F(ANDRAL, "@Don't move!@", 0x0000);
				Func097F(LUTHER, "@Sorry, Andral.@", 0x0003);
			}
			if (var0005 == 0x0003) {
				Func097F(LUTHER, "@Is it done yet?@", 0x0000);
				Func097F(ANDRAL, "@Art doth take time.@", 0x0003);
			}
			if (var0005 > 0x0003) {
				Func097F(ANDRAL, "@Aha!@", 0x0000);
				var0006 = ANDRAL->find_nearby(0x037E, 0x000A, MASK_NONE);
				if (var0006) {
					ANDRAL->si_path_run_usecode(var0006->get_object_position(), SI_PATH_SUCCESS, item, Func043E, false);
					UI_set_path_failure([Func043E], item, SI_PATH_FAILURE);
				}
			}
		} else {
			var0007 = ["@Piece by piece...@", "@Art is life!@", "@I have a vision...@", "@Take a chance!@", "@Patience!@", "@Art is not easy...@"];
			Func097F(ANDRAL, var0007[UI_get_random(UI_get_array_size(var0007))], 0x0000);
		}
	}
	if (event == SI_PATH_FAILURE) {
		var0006 = ANDRAL->find_nearby(0x037E, 0x0004, MASK_NONE);
		if (var0006) {
			event = SI_PATH_SUCCESS;
		} else {
			ANDRAL->run_schedule();
			abort;
		}
	}
	if (event == SI_PATH_SUCCESS) {
		var0006 = ANDRAL->find_nearby(0x037E, 0x0004, MASK_NONE);
		if (var0006) {
			var0008 = ANDRAL->direction_from(var0006);
			ANDRAL->set_schedule_type(WAIT);
			var0004 = script item {
				nohalt;
				face var0008;
				repeat 3 {
					actor frame reach_1h;
					actor frame strike_1h;
					continue;
					sfx 11;
					actor frame ready;
					wait 2;
				};
				call Func043E;
			};
		} else {
			ANDRAL->run_schedule();
		}
		abort;
	}
	if (event == SCRIPTED) {
		var0007 = ["@Much better!@", "@'Tis taking shape!@", "@Hmmm...@", "@Uh-oh...@", "@Ouch!@", "@A masterpiece!@"];
		Func097F(ANDRAL, var0007[UI_get_random(UI_get_array_size(var0007))], 0x0000);
		ANDRAL->run_schedule();
	}
}

extern var Func0954 0x954 ();
extern var Func0953 0x953 ();
extern var Func098D 0x98D ();
extern var Func0932 0x932 (var var0000);
extern void Func0976 0x976 (var var0000, var var0001);
extern void Func0936 0x936 (var var0000, var var0001);
extern void Func092E 0x92E (var var0000);
extern void Func097F 0x97F (var var0000, var var0001, var var0002);
extern void Func07D1 object#(0x7D1) ();
extern void Func08F0 0x8F0 ();
extern var Func097D 0x97D (var var0000, var var0001, var var0002, var var0003, var var0004);
extern var Func0992 0x992 (var var0000, var var0001, var var0002, var var0003);
extern var Func0955 0x955 ();
extern var Func099B 0x99B (var var0000, var var0001, var var0002, var var0003, var var0004, var var0005, var var0006);

void Func043F object#(0x43F) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;
	var var0008;
	var var0009;
	var var000A;
	var var000B;
	var var000C;
	var var000D;
	var var000E;
	var var000F;
	var var0010;
	var var0011;
	var var0012;
	var var0013;
	var var0014;
	var var0015;
	var var0016;
	var var0017;
	var var0018;
	var var0019;
	var var001A;
	var var001B;

	var0000 = Func0954();
	var0001 = Func0953();
	var0002 = CALADIN->get_item_flag(MET);
	var0003 = UI_get_array_size(UI_get_party_list());
	var0004 = false;
	var0005 = false;
	var0006 = false;
	var0007 = false;
	var0008 = false;
	if (event == DEATH) {
		if (gflags[MONITOR_TRAINING]) {
			var0009 = CALADIN->get_oppressor();
			var0009 = 0x0000 - var0009;
			if (!var0009) {
				var0009 = AVATAR;
			}
			if ((var0009 != AVATAR) && (!(var0009 in Func098D()))) {
				var0000 = Func098D();
				var0000 &= AVATAR;
				for (var000C in var0000 with var000A to var000B) {
					if (Func0932(var000C)) {
						break;
					}
				} nobreak {
					var000C = AVATAR;
				}
				CALADIN->set_opponent(var000C);
				var0009->set_opponent(var000C);
				Func0976(CALADIN, 0x0003);
				Func0976(var0009, 0x0003);
				return;
			}
			if (!gflags[TEMP_FLAG_1]) {
				gflags[TEMP_FLAG_1] = true;
				Func0936(var0009->get_npc_object(), CALADIN->get_npc_object());
				return;
			}
			Func092E(var0009);
			return;
		}
		var000D = script item {
			nohalt;
			call Func01D0;
		};
	}
	if (event == PROXIMITY) {
		if (gflags[MONITOR_TRAINING]) {
			var000E = UI_die_roll(0x0001, 0x0003);
			CALADIN->clear_item_say();
			if (var000E == 0x0001) {
				Func097F(CALADIN, "@What a hit!@", 0x0000);
			}
			if (var000E == 0x0002) {
				Func097F(CALADIN, "@Most impressive!@", 0x0000);
			}
			if (var000E == 0x0003) {
				Func097F(CALADIN, "@What dost thou call that?@", 0x0000);
			}
		}
		return;
	}
	if (event == DOUBLECLICK) {
		Func097F(AVATAR, "@Greetings, Knight.@", 0x0000);
		CALADIN->Func07D1();
		if (gflags[REFUSED_TO_RETURN_URN] && (!gflags[RETURNED_URN_TO_CALADIN])) {
			Func097F(CALADIN, "@Away with thee!@", 0x0000);
			CALADIN->set_schedule_type(SHY);
			abort;
		}
		Func097F(CALADIN, "@Greetings.@", 0x0002);
		CALADIN->set_schedule_type(TALK);
	}
	if (event == STARTED_TALKING) {
		CALADIN->run_schedule();
		CALADIN->clear_item_say();
		CALADIN->show_npc_face0(0x0000);
		Func08F0();
		if (!var0002) {
			say("\"I have not seen thee in Monitor before. Thou art new here. Welcome!\"");
		} else {
			say("\"So 'tis thee again. Well met! How shall I aid thee?\"");
		}
		add(["name", "duties"]);
		if (gflags[KNOW_MARSTEN_IS_TRAITOR] && (!gflags[PROVED_MARSTEN_IS_TRAITOR])) {
			add("know traitor");
		}
		if (gflags[SLAIN_WOLF] && (!gflags[AVATAR_IS_KNIGHT])) {
			add("Knighthood");
		}
		if (gflags[CAN_ASK_ABOUT_TEST] && (!gflags[SLAIN_WOLF])) {
			add("Test of Knighthood");
		}
		if (gflags[ASK_CALADIN_ABOUT_URN] && (!gflags[RETURNED_URN_TO_CALADIN])) {
			add("missing urn");
		}
		if (gflags[TOLD_MARSTEN_SERVES_LORD_BRITISH] && (!gflags[RENOUNCED_BRITISH])) {
			add("Marsten");
		}
		if (gflags[KNOWS_CALADIN_IS_TRAINER] || gflags[ASKED_CANTRA_ABOUT_TEST]) {
			add("trainer");
		}
		if (gflags[FOUND_BROWN_BOTTLE] && (SIMON->get_schedule_type() != WAIT)) {
			add("brown bottle");
		}
		if (gflags[AVATAR_IS_KNIGHT] && (!SIMON->get_item_flag(DEAD))) {
			add("traitor");
		}
		if (gflags[HAVE_HELM_OF_MONITOR]) {
			add("Helm of Monitor");
		}
		if (gflags[GOBLIN_SIMON_DEAD]) {
			add("Simon");
		}
		if (gflags[POMDIRGUN_IS_DEAD]) {
			add("Pomdirgun");
		}
		converse ("bye") {
			case "Helm of Monitor" (remove):
				say("\"Thou hast recovered the Helm of Monitor and proven thyself to be our Champion Knight. Thou art the best of us, the standard by which we shall all be measured. Remember, if thou shouldst leave our city, thou dost carry our honor with thee. It is thy duty to not only to serve Monitor, but to help restore the balance of the world. This is the mission of the Champion Knight.\"");
				fallthrough;

			case "Simon" (remove):
				say("\"So, Simon was a Goblin in disguise! 'Twas a clever bit of deduction on thy part to uncover his secret.\"");
				fallthrough;

			case "Pomdirgun" (remove):
				say("\"No one in this town will mourn for that vicious Goblin bastard. I only wish I could have been with thee so I could have watched his life end.\"");
				fallthrough;

			case "brown bottle" (remove):
				say("\"Thou didst find evidence in the woods? Good thinking! Thou shouldst have been a Bear, not a Wolf...\"");
				say("\"I know naught of bottles, but thou mightest ask Lucilla at the tavern. Or perhaps Krayg the Provisioner.\"");
				say("\"Perhaps Luther is right! As provisioner, Krayg could obtain many kinds of bottles...\"");
				fallthrough;

			case "Marsten" (remove):
				if (gflags[PROVED_MARSTEN_IS_TRAITOR]) {
					say("\"The villain Marsten currently resides in our prison, thanks to thee.\"");
				} else {
					say("\"He is the chieftain of the Leopard Command, and the current Lord of our Town.\"");
				}
				fallthrough;

			case "name" (remove):
				if (!var0002) {
					CALADIN->set_item_flag(MET);
					say("\"I am called Caladin, after mine own grandfather. He was a Champion Knight!\"");
					add("Champion Knight");
					if (!gflags[RETURNED_URN_TO_CALADIN]) {
						say("\"And if I ever discover who has his urn, I shall wring their neck! Canst thou imagine, someone stealing the Ashes of the Dead?\"");
						add("Ashes of the Dead");
						if (Func097D(PARTY, 0x0001, 0x0392, QUALITY_ANY, 0x0000)) {
							add("I have an urn.");
							var0006 = true;
						}
					}
				} else {
					say("\"Hast thou forgotten? Why, I am Caladin!\"");
				}
				fallthrough;

			case "Champion Knight" (remove):
				say("\"The Champion Knight of Monitor is the one who hath won the right to wear the Helm of Courage.\"");
				var000F = Func097D(PARTY, 0x0001, 0x017F, QUALITY_ANY, 0x0001);
				if (gflags[HAVE_HELM_OF_MONITOR] || var000F) {
					say("\"As thou hast recovered it, that right naturally has fallen to thee.\"");
				} else {
					say("\"Currently, the Helm is in the hands of the Goblins. They took the Helm when they slew Astrid, our last Champion Knight. The Helm must be recovered and Astrid must be avenged...!\"");
				}
				fallthrough;

			case "Ashes of the Dead", "missing urn" (remove):
				UI_push_answers();
				say("\"I am not superstitious, mind thee, but I do believe that a man's ashes are sacred. They represent his soul, his heart, his honor.\"");
				say("\"To know that my grandfather's ashes have been taken from the Crypts...\"");
				add(["honor", "Crypts", "change subject"]);
				if (Func097D(PARTY, 0x0001, 0x0392, QUALITY_ANY, 0x0000) && ((!var0006) && (!var0007))) {
					add("I have an urn.");
					var0006 = true;
				}
				fallthrough;

			case "honor" (remove):
				say("\"Nothing is more important than one's honor! I am a valiant man, and I can promise thee three things --\"");
				say("\"I shall never surrender my sword to my foe.\"");
				say("\"My promised word shall never be broken.\"");
				say("\"Fear is beneath me, and I refuse to let the creeping stink of fright soil my mind. I shall always be fearless.\"");
				fallthrough;

			case "Crypts" (remove):
				say("\"The Ashes of the Dead are kept in the mountain caves, where wild beasts cannot defile the urns.\"");
				say("\"Renfry is the caretaker there. If thou dost desire to pay thy respects to the dead, thou shalt no doubt encounter him there.\"");
				fallthrough;

			case "change subject":
				say("\"Certainly...\"");
				UI_pop_answers();
				fallthrough;

			case "I have an urn." (remove):
				gflags[KNOWS_URN_ORIGIN] = true;
				var0007 = true;
				say("\"Thou dost? An Urn of the Dead? How didst thou chance upon it? Perhaps thou hast slain the thieves who insulted mine ancestor's soul!\"");
				var0010 = Func0992(IOLO, "@Why... um... we found it, milord.@", "@I found it.@", false);
				0x0000->set_conversation_slot();
				say("\"Might I examine it, please?\"");
				if (Func0955()) {
					if (Func097D(PARTY, 0x0001, 0x0392, 0x00FF, 0x0000)) {
						say("\"This is my grandfather! Thou hast reunited the souls of my family!\"");
						var0011 = UI_remove_party_items(0x0001, 0x0392, 0x00FF, 0x0000, true);
						gflags[RETURNED_URN_TO_CALADIN] = true;
						say("\"Please accept this gift as an expression of my sincerest gratitude.\"");
						if (Func0955()) {
							if (var0003 < 0x0002) {
								var0012 = "thee.";
							} else if (var0003 > 0x0002) {
								var0012 = "thee and thy fine companions!";
							} else {
								var0012 = "thee and thy companion.";
							}
							say("\"Here are coins enough to buy room and board at any inn for ",
								var0012,
								"\"");
							var000D = Func099B(AVATAR, (var0003 * 0x0032), 0x03B7, QUALITY_ANY, FRAME_ANY, true, true);
						} else {
							say("\"Thou art a fool, to turn thy back on coins freely offered.\"");
						}
					} else {
						say("\"Ah, 'tis not the urn I am looking for.\"");
					}
				} else {
					say("\"Then perhaps thou art the thief! I shall not speak with thee further!\"");
					gflags[REFUSED_TO_RETURN_URN] = true;
				}
				fallthrough;

			case "duties" (remove):
				say("\"I am the leader of the Command of the Bear. The Bears are the bravest, most virile warriors in Monitor! Courage is our name.\"");
				say("\"Do not smirk! The Command of the Bear is unmovable. The Goblins dare not assault Monitor, for they know that we are here.\"");
				say("\"I am also one of the best combat trainers in the land, shouldst thou need such aid.\"");
				if (!gflags[KNOWS_ABOUT_MONITOR_CLANS]) {
					add("Command");
				}
				add(["Bears", "Courage", "trainer", "Goblins"]);
				fallthrough;

			case "Command" (remove):
				say("\"The Knights of Monitor each serve a particular commmand. Each command espouses its own unique military strategy.\"");
				fallthrough;

			case "Bears" (remove):
				say("\"The Bear Command follows a strategy of protection. We are concerned with protecting our home and making it impregnable, thereby giving us the perfect base from which to give any sort of military operation a successful launch.\"");
				fallthrough;

			case "Courage" (remove):
				say("\"Our city was founded on the Principle of Courage. Valor is the Virtue we follow. If one cannot show his own prowess in everything undertaken, then one is not worthy to be a Knight of Monitor!\"");
				fallthrough;

			case "Goblins" (remove):
				say("\"The wretched beasts! I suppose thou hast heard of the ambush at Fawn Tower. They do not fight fair!\"");
				say("\"Poor Astrid... she was an inspiring warrior, as well as a lusty wench. Damn, but she could kill Goblins...\"");
				add("Fawn Tower");
				if (!GOBLIN_KING->get_item_flag(DEAD)) {
					say("\"The Wolves and Leopards are useless in a crisis like this, but the Bears shall exact revenge from the Goblins. And if I ever find out who betrayed that patrol...\"");
					add(["useless", "betrayed"]);
				} else {
					say("\"At least that miserable Pomdirgun hath gone to his grave. Or by the way of the Goblins, probably the cooking pot, more like.\"");
				}
				fallthrough;

			case "Fawn Tower" (remove):
				say("\"The Pikemen of Monitor are the guardians of Serpent Isle. Our three Towers protect the Serpent Highway, and defend against Goblin invasions.\"");
				say("\"Besides the Tower here, there is a second at Sleeping Bull. The third Tower was near Fawn, and hath been overrun by Goblins.\"");
				if (gflags[CLEARED_FAWN_TOWER]) {
					say("\"Now that we have recaptured the Fawn Tower, our security is again guaranteed.\"");
				} else if (gflags[HAVE_HELM_OF_MONITOR]) {
					say("\"But it shall surely be retaken by our Pikemen, now that thou hast defeated the King of the Goblins and recaptured the Helm of Monitor! Excellent work!\"");
				}
				fallthrough;

			case "useless" (remove):
				say("\"Worse than useless! Why, the Leopards are led by so-called warriors who spend all day sitting on their arses! Marsten is too old, and Spektor... He reads books!\"");
				say("\"As for the Wolves, everyone knows that Brendann is weak. If thou dost ask me, he spends too much time playing stud, and not enough with his sword and axe.\"");
				fallthrough;

			case "betrayed" (remove):
				say("\"So maybe I should keep my own counsel, but I'm not the quiet type. The Fawn Tower was betrayed!\"");
				say("\"How else did the Goblins surprise the entire patrol? Astrid was no fool. Someone betrayed her.\"");
				if (!var0008) {
					add("traitor");
				}
				fallthrough;

			case "traitor" (remove):
				var0008 = true;
				say("\"Whoever betrayed Astrid's patrol must have been a Knight -- no one else could have done it.\"");
				if (gflags[KNOWS_GOBLINS_HIDEOUT]) {
					say("\"I don't trust that weakling Krayg, but if he says to look for evidence in the woods, perhaps thou shouldst.\"");
					say("\"However, he might be sending thee to another ambush! Hmmm...\"");
				} else {
					if (gflags[AVATAR_IS_KNIGHT]) {
						say("\"Krayg is the most likely suspect, as thou didst hear Luther proclaim at the banquet.\"");
					} else {
						say("\"The Bears suspect Krayg the Provisioner of being involved, but the Wolves deny it -- of course!\"");
					}
					say("\"Someone should question that weakling, and see if his guilt can be proven.\"");
				}
				if (LYDIA->get_item_flag(DEAD) || SHMED->get_item_flag(DEAD)) {
					UI_push_answers();
					if (LYDIA->get_item_flag(DEAD)) {
						add("Was Lydia the traitor?");
					}
					if (SHMED->get_item_flag(DEAD)) {
						add("Was Shmed the traitor?");
					}
					add("change subject");
				}
				fallthrough;

			case "Was Lydia the traitor?" (remove):
				say("\"Listen, ",
					var0001,
					" -- just because a woman tries to kill thee, is no reason to defame her good name.\"");
				say("\"I'll admit Lydia dishonored herself by poisoning thee. 'Twas a shameful act.\"");
				say("\"Yet I cannot believe that she'd betray her entire city to the Goblins. Impossible!\"");
				say("\"I tell thee, Krayg is the traitor...\"");
				fallthrough;

			case "Was Shmed the traitor?" (remove):
				say("\"Ha! Shmed was the worst coward in Monitor. We let him hide in Knight's Test to spare ourselves the agony of exiling him.\"");
				say("\"He was terrified of Goblins! So how could he have become their spy? This makes no sense.\"");
				say("\"Besides, the matter at Knight's Test smacks of wizardry. I think thou hast an unknown enemy from among the Mages of Moonshade!\"");
				fallthrough;

			case "trainer" (remove):
				if (!gflags[KNOWS_CALADIN_IS_TRAINER]) {
					if (!UI_is_pc_female()) {
						say("\"Yes, I am a trainer. I specialize in making men out of boys. Strength is the key. Once that is gained I then turn to emphasizing the fundamentals of combat. But thou shouldst ask me of this another time.\"");
					} else {
						say("\"Yes, I am a trainer. The key to winning in combat is to be strong and to achieve a deadly precision in the application of that strength. Those are the things I teach. I teach ways to make weak warriors stronger, and to make strong warriors invincible!\"");
						say("\"As thou hast probably guessed, I am especially good with female students... But thou shouldst ask me of this another time.\"");
					}
				}
				say("\"Come to the List Field at noon any day and I shall be happy to train thee. 'Tis at the south end of town, and is where all the Knights go to fight in tournaments and improve their fighting skills.\"");
				var0013 = true;
				fallthrough;

			case "Test of Knighthood" (remove):
				if (gflags[AVATAR_IS_KNIGHT]) {
					say("\"But why talk of this? Thou hast already faced the ordeal of that particular location and earned thy Knighthood! Perhaps we should change the subject.\"");
				} else {
					if (UI_is_pc_female()) {
						say("\"A woman of Courage! I perceive that thou hast the spirit of a warrior.\"");
					} else {
						say("\"Glad to see that ye have some spirit, my boy! Knighthood is what divides the real men from the weak-willed boys.\"");
					}
					say("\"To become a Knight of Monitor, thou must first ask permission of the Lord of Monitor. Then thou must journey to the Dungeon called Knight's Test. If thou canst survive that ordeal, then thou canst receive thy Knighthood.\"");
					gflags[KNOWS_MARSTEN_GIVES_PERMISSION] = true;
				}
				UI_push_answers();
				add(["ordeal", "location", "Knighthood", "change subject"]);
				fallthrough;

			case "ordeal" (remove):
				say("\"Fiery explosions! Wild animals! Puzzles to queer the mind, and mysteries beyond the understanding of mortals!\"");
				say("\"Well, perhaps I exaggerate some. The Test is difficult, and many have died. But if thou dost know the secrets of the dungeon, the Quest is not so hard.\"");
				say("\"After all, most Monitorians take the Test when they are fifteen years of age! Young Cantra will take it soon. With training, thou canst succeed.\"");
				add(["secrets", "Cantra"]);
				add("trainer");
				fallthrough;

			case "secrets" (remove):
				if (gflags[KNOW_TEST_SECRETS]) {
					say("\"I do not have time to repeat everything again! Go thou and ask young Cantra -- she hath nothing better to do.\"");
					Func097F(CALADIN, "@Ask Cantra!@", 0x0000);
					abort;
				}
				say("\"I'll give thee three clues:\"");
				say("\"In the first chamber, speed is the clue. Do not look back, or ye'll be a goner.\"");
				say("\"Later on, seek that which cannot be seen. It may be hard to find.\"");
				say("\"To overcome, thou must find the Claw, and the Urn of Gurnordir. Use the claw to draw thy blood, then mix the blood with the ashes in the Urn. Then thy fate shall be made known to thee.\"");
				gflags[KNOW_TEST_SECRETS] = true;
				fallthrough;

			case "Cantra" (remove):
				say("\"I am surprised thou dost not know of the girl. She hath a bright curiosity, and is always pestering visitors.\"");
				say("\"Cantra is the daughter of the town healer, Harnna. Her father hath been missing for many weeks. She doth favor him -- very proud, very ambitious, and eager for her Knighthood.\"");
				fallthrough;

			case "location" (remove):
				say("\"Knight's Test is located in the mountains just north of the city -- thou canst easily find it by taking the Serpent Highway north, then following the first trail leading west. A sign points the way.\"");
				if (!gflags[LORD_MARSTEN_GAVE_PERMISSION]) {
					say("\"But before going, thou must speak with Lord Marsten. Only he can give thee the password. Shmed will not admit thee to the dungeon without it.\"");
				}
				say("\"There have also been many Goblins in the area, so beware!\"");
				add("Shmed");
				fallthrough;

			case "Shmed" (remove):
				say("\"He is the Keeper of Knight's Test. Shmed is a Wolf, and if thou dost ask me, he hath gone soft. Hardly ever see him on the List Field.\"");
				say("\"I have no use for him. But he doth do a fair job of administering the Test.\"");
				fallthrough;

			case "Knighthood" (remove):
				if (!gflags[SLAIN_WOLF]) {
					say("\"When thou hast completed the Test, then there will be a great banquet held for thee!\"");
					say("\"Thou shalt receive thy tattoo, and shalt wear the pelt of thy totem animal.\"");
					say("\"But we can discuss this upon thy return... if thou dost have the courage to take the Test of Knighthood...\"");
				} else {
					say("\"Congratulations on having passed the Test of Knighthood! I greet thee as almost a brother.\"");
					if (!(gflags[HAVE_WOLF_CLOAK] && (gflags[HAVE_WOLF_TATTOO] && gflags[GAVE_WOLF_TO_LUCILLA]))) {
						say("\"Thou must prepare for thy banquet.\"");
					}
					if (!gflags[HAVE_WOLF_TATTOO]) {
						say("\"Seek out Lydia, and have her give thee the Tattoo of the Knight. Take none of her lip, mind!\"");
					}
					if (!gflags[HAVE_WOLF_CLOAK]) {
						say("\"Cellia the Furrier shall make thee the Cloak of Knighthood, if thou shalt take to her the body of thy totem animal.\"");
						add("totem animal");
					}
					if (!gflags[GAVE_WOLF_TO_LUCILLA]) {
						say("\"The banquet cannot begin until thou hast brought the meat from thy totem animal to Lucilla at the pub.\"");
						say("\"She can then make the stew for the banquet.\"");
					}
					if (gflags[HAVE_WOLF_TATTOO] && (gflags[HAVE_WOLF_CLOAK] && gflags[GAVE_WOLF_TO_LUCILLA])) {
						say("\"Thou art ready! Now thou must meet Lord Marsten at the Great Hall, in the south part of town.\"");
					} else {
						say("\"When thou hast finished thy work, then Lord Marsten can preside at thy banquet.\"");
					}
				}
				fallthrough;

			case "totem animal" (remove):
				say("\"Upon completing Knight's Test there is a ceremony wherein one's totem animal is chosen. It is always either a wolf, a leopard or a bear.\"");
				fallthrough;

			case "know traitor" (remove):
				say("\"What? Thou dost know who did betray Astrid to the Goblins! How dost thou know? Tell me now!\"");
				var0010 = Func0992(SHAMINO, "@We found evidence among the Goblins. Documents signed by\r\n\t\t\t\t\t\t\tthe traitor!@", "@I found evidence in the Goblin camp.@", false);
				0x0000->set_conversation_slot();
				say("\"May I see this evidence?\"");
				if (Func097D(PARTY, 0x0001, 0x031D, 0x0078, FRAME_ANY) || (Func097D(PARTY, 0x0001, 0x031D, 0x0079, FRAME_ANY) || Func097D(PARTY, 0x0001, 0x031D, 0x007A, FRAME_ANY))) {
					if (((Func097D(PARTY, 0x0001, 0x031D, 0x0078, FRAME_ANY) + Func097D(PARTY, 0x0001, 0x031D, 0x0079, FRAME_ANY)) + Func097D(PARTY, 0x0001, 0x031D, 0x007A, FRAME_ANY)) > 0x0001) {
						var0010 = Func0992(IOLO, "@Here are the scrolls.@", "@Here are the scrolls.@", false);
					} else {
						var0010 = Func0992(IOLO, "@Here it is.@", "@Here it is.@", false);
					}
					0x0000->set_conversation_slot();
					say("\"What is this scroll? By the blazes of Furnace! This is proof!\"");
					if (Func097D(PARTY, 0x0001, 0x031D, 0x0078, FRAME_ANY)) {
						say("\"This is proof that Lord Marsten hath been conspiring with the Goblins! That old goat!\"");
						say("\"He planned to destroy the Bears! And the Wolves! And to make himself King of the city!\"");
						gflags[PROVED_MARSTEN_IS_TRAITOR] = true;
					}
					if (Func097D(PARTY, 0x0001, 0x031D, 0x0079, FRAME_ANY)) {
						say("\"Lord Marsten was the traitor, and that worm Spektor aided him! Death would be too kind for him!\"");
						say("\"It seems that Marsten sought to spare Astrid's life, but he failed her even as he betrayed his Knighthood.\"");
						gflags[PROVED_MARSTEN_IS_TRAITOR] = true;
						gflags[PROVED_SPEKTOR_IS_TRAITOR] = true;
					}
					if (Func097D(PARTY, 0x0001, 0x031D, 0x007A, FRAME_ANY)) {
						say("\"Marsten sought to betray Bull Tower! I will send a messenger to alert them immediately!\"");
						gflags[PROVED_MARSTEN_IS_TRAITOR] = true;
					}
					if (gflags[PROVED_MARSTEN_IS_TRAITOR] && (!MARSTEN->get_item_flag(DEAD))) {
						MARSTEN->move_object([0x0446, 0x09C5, 0x0000]);
						MARSTEN->set_new_schedules([NIGHT, DAWN], [SLEEP, TEND_SHOP], [0x0446, 0x09C5, 0x0446, 0x09C5]);
					}
					if (gflags[PROVED_SPEKTOR_IS_TRAITOR] && (!SPEKTOR->get_item_flag(DEAD))) {
						SPEKTOR->move_object([0x0448, 0x09D6, 0x0000]);
						SPEKTOR->set_new_schedules([NIGHT, DAWN], [SLEEP, TEND_SHOP], [0x0448, 0x09D6, 0x0448, 0x09D6]);
					}
					CALADIN->set_new_schedules([MIDNIGHT, MORNING, NOON, AFTERNOON, EVENING, NIGHT], [SLEEP, DUEL, TEND_SHOP, DUEL, MAJOR_SIT, EAT_AT_INN], [0x03B1, 0x0A49, 0x03D7, 0x0A8A, 0x03CE, 0x09FF, 0x039B, 0x0A76, 0x03B2, 0x0A05, 0x041C, 0x0A57]);
					var0014 = 0x0003;
					while (var0014 > 0x0000) {
						var0015 = AVATAR->get_object_position();
						var0015[0x0001] = (var0015[0x0001] + 0x0014) - (UI_die_roll(0x0000, 0x0001) * 0x0028);
						var0015[0x0002] = (var0015[0x0002] + 0x0014) - (UI_die_roll(0x0000, 0x0001) * 0x0028);
						var0016 = UI_create_new_object2(0x00E4, var0015);
						var0017 = var0016->approach_avatar(0x0050, 0x0028);
						if (var0017) {
							var0016->set_item_flag(TEMPORARY);
							var0005 = true;
						} else {
							var0016->remove_item();
						}
						var0014 -= 0x0001;
					}
					var0018 = CALADIN->find_nearby(0x00E4, 0x001E, MASK_NONE);
					if (var0018) {
						for (var001B in var0018 with var0019 to var001A) {
							var001B->set_schedule_type(TALK);
							var001B->set_npc_id(0x0005);
						}
					}
					if (var0005) {
						if (gflags[PROVED_SPEKTOR_IS_TRAITOR]) {
							say("\"Do not worry -- we shall arrest these dogs!\"");
						} else {
							say("\"Do not worry -- I shall personally see that Marsten is hunted down like the dog he is.\"");
						}
						Func097F(CALADIN, "@Pikemen!@", 0x0000);
						CALADIN->set_schedule_type(STANDTHERE);
						Func097F(var0018[0x0001], "@Yes, lord!@", 0x0002);
						abort;
					}
					if (gflags[PROVED_SPEKTOR_IS_TRAITOR]) {
						say("\"Do not worry, Avatar! I shall order the Pikemen to place the traitors under arrest!\"");
					} else {
						say("\"Do not worry, Avatar! I shall order the Pikemen to place the traitor under arrest!\"");
					}
					Func097F(CALADIN, "@Pikemen!@", 0x0000);
					CALADIN->set_schedule_type(SHY);
					abort;
				}
				var0010 = Func0992(SHAMINO, "@We did not bring it with us.@", "@I did not bring it.@", false);
				0x0000->set_conversation_slot();
				say("\"Until thou dost bring proof, no one will believe thee, including myself!\"");
				Func097F(CALADIN, "@Bring proof!@", 0x0000);
				abort;

			case "bye":
				if ((!gflags[SLAIN_WOLF]) && (!gflags[CAN_ASK_ABOUT_TEST])) {
					say("\"I am not usually so talkative to an outsider. Thou shalt not find many in this town who welcome strangers!\"");
					say("\"A word of advice: If thou desirest to be accepted in Monitor, thou shouldst consider taking the Test of Knighthood.\"");
					say("\"If thou art not a Knight, then thou art nothing!\"");
					add("Test of Knighthood");
					gflags[CAN_ASK_ABOUT_TEST] = true;
				} else {
					Func097F(AVATAR, "@Until later...@", 0x0000);
					Func097F(CALADIN, "@Courage!@", 0x0002);
					break;
				}
		}
	}
}

extern var Func0954 0x954 ();
extern void Func080E 0x80E ();
extern void Func097F 0x97F (var var0000, var var0001, var var0002);
extern var Func09A0 0x9A0 (var var0000, var var0001);
extern void Func09AC 0x9AC (var var0000, var var0001, var var0002, var var0003);
extern void Func07D1 object#(0x7D1) ();
extern var Func0994 0x994 ();
extern void Func0636 object#(0x636) ();
extern void Func0443 object#(0x443) ();

void Func0440 object#(0x440) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;

	var0000 = CANTRA->find_nearby(0x013E, 0x001E, MASK_NONE);
	var0001 = CANTRA->get_item_flag(MET);
	var0002 = Func0954();
	if (gflags[VIEWING_CANTRA_ABDUCTION] && ((event == PROXIMITY) && (!gflags[BATLIN_FLED_SHAMINOS_KEEP]))) {
		CANTRA->set_npc_id(CANTRA->get_npc_id() + 0x0001);
		if (CANTRA->get_npc_id() == 0x0005) {
			Func080E();
		}
		if (CANTRA->get_npc_id() == 0x0004) {
			Func097F(CANTRA, "@Never!@", 0x0002);
			Func097F(var0000, "@Give me thy powers!@", 0x0000);
		}
		if (CANTRA->get_npc_id() == 0x0003) {
			Func097F(CANTRA, "@I am only a little girl...@", 0x0002);
			Func097F(var0000, "@I know thee!@", 0x0000);
		}
		if (CANTRA->get_npc_id() == 0x0002) {
			Func097F(CANTRA, "@Leave me alone!@", 0x0000);
			Func097F(var0000, "@Stop, fiend!@", 0x0002);
		}
		if (CANTRA->get_npc_id() == 0x0001) {
			UI_fade_palette(0x000C, 0x0001, 0x0001);
			Func097F(CANTRA, "@Help!@", 0x0000);
			UI_play_music(0x0034, Func09A0(0x0005, 0x0001));
			if (var0000) {
				var0000->set_schedule_type(PATROL);
			}
			UI_ambient_light(0x0000);
		}
		abort;
	}
	if (gflags[VIEWING_CANTRA_ABDUCTION] && ((event == SCRIPTED) && (!gflags[BATLIN_FLED_SHAMINOS_KEEP]))) {
		UI_ambient_light(0x0001);
		UI_set_time_palette();
		UI_fade_palette(0x000C, 0x0001, 0x0000);
		AVATAR->set_camera();
		gflags[VIEWING_CANTRA_ABDUCTION] = false;
		HENCH1->run_schedule();
		HENCH2->run_schedule();
		HENCH3->run_schedule();
		DBEYER->run_schedule();
		CANTRA->remove_npc();
		if (gflags[HARNNA_TALKED_CRYSTAL_BALL] && (!gflags[WILL_FIND_CANTRA])) {
			HARNNA->move_object([0x0345, 0x0A8B, 0x0000]);
			Func09AC(HARNNA, -1, -1, WAIT);
			HARNNA->clear_item_flag(ASLEEP);
			var0003 = script HARNNA {
				nohalt;
				face east;
			};
			var0003 = script HARNNA after 30 ticks {
				nohalt;
				call Func0443;
			};
		}
		var0003 = script Func09A0(0x0005, 0x0001) after 30 ticks {
			nohalt;
			call Func0636;
		};
		AVATAR->clear_item_flag(DONT_MOVE);
		UI_init_conversation();
		CANTRA->set_npc_id(0x0000);
		gflags[USING_FAR_SIGHT_MAGIC] = false;
	}
	if ((event == PROXIMITY) && (CANTRA->get_schedule_type() == HOUND)) {
		if (UI_get_random(0x000A) < 0x0007) {
			abort;
		}
		var0004 = ["@Hello, there!@", "@May I watch?@", "@Art thou a hero?@", "@Where are we going?@", "@May I come?@", "@I'm a warrior, too.@"];
		Func097F(CANTRA, var0004[UI_get_random(0x0006)], 0x0000);
	}
	if (event == DOUBLECLICK) {
		if (CANTRA->get_item_flag(SI_ZOMBIE)) {
			Func097F(AVATAR, "Hello, Cantra.", 0x0000);
			var0005 = UI_get_random(0x0006);
			if (var0005 == 0x0001) {
				var0006 = "@I want thy flesh!@";
			}
			if (var0005 == 0x0002) {
				var0006 = "@I want thy blood!@";
			}
			if (var0005 == 0x0003) {
				var0006 = "@Come pleasure me!@";
			}
			if (var0005 == 0x0004) {
				var0006 = "@How hungry I am!@";
			}
			if (var0005 == 0x0005) {
				var0006 = "@Blood! Blood everywhere!@";
			}
			if (var0005 == 0x0006) {
				var0006 = "@I desire thee!@";
			}
			Func097F(CANTRA, var0006, 0x0002);
			abort;
		}
		if (!var0001) {
			Func097F(AVATAR, "Hello, little girl.", 0x0000);
			Func097F(CANTRA, "@Zounds!@", 0x0002);
		} else {
			Func097F(AVATAR, "Hello, Cantra.", 0x0000);
			Func097F(CANTRA, "@Glad to see thee!@", 0x0002);
		}
		CANTRA->Func07D1();
		CANTRA->set_schedule_type(TALK);
	}
	if (event == STARTED_TALKING) {
		CANTRA->run_schedule();
		CANTRA->clear_item_say();
		CANTRA->show_npc_face0(0x0000);
		if (!var0001) {
			say("\"I am not as young as I look! Dost thou know how hard it is to be small for one's age? I am fourteen years old, nearly old enough to be a Knight of Monitor. But everyone thinks that I'm a little girl...\"");
			say("\"Um, sorry. I mean, welcome to Monitor! My name is Cantra.\"");
			CANTRA->set_item_flag(MET);
		} else if (gflags[CURED_CANTRA]) {
			say("\"I feel tired, but I am all right! My mind was full of awful dreams. Thou hast saved me! I shall remember thee always!\"");
		} else {
			say("\"Hast thou decided to become a Knight yet? It is so exciting! I am practicing to become one myself.\"");
		}
		add(["Knight"]);
		if (gflags[TOLD_MARSTEN_SERVES_LORD_BRITISH] && (!gflags[RENOUNCED_BRITISH])) {
			add("Marsten");
		}
		converse ("bye") {
			case "Marsten" (remove):
				if (gflags[PROVED_MARSTEN_IS_TRAITOR]) {
					say("\"I am amazed to hear that Marsten hath betrayed us. I cannot believe it.\"");
				}
				if ((gflags[KNOWS_MARSTEN_GIVES_PERMISSION] == false) && (gflags[PROVED_MARSTEN_IS_TRAITOR] == false)) {
					say("\"To become a Knight of Monitor, thou must first ask permission of the Lord of Monitor.\"");
					gflags[KNOWS_MARSTEN_GIVES_PERMISSION] = true;
				}
				if (!gflags[PROVED_MARSTEN_IS_TRAITOR]) {
					say("\"Marsten is the Lord of Monitor. One day he will give a banquet in mine honor to celebrate my becoming a Knight.\"");
				}
				fallthrough;

			case "permission" (remove):
				say("\"If thou dost wish to take Knight's Test, thou must ask Lord Marsten for his permission.\"");
				gflags[KNOWS_MARSTEN_GIVES_PERMISSION] = true;
				fallthrough;

			case "Knight" (remove):
				say("\"I have trained for a long time to become a Knight. There is nothing in the world so wonderful as being a Knight!\"");
				say("\"My father was a Knight, and a very good one. But he is dead now.\"");
				say("\"When I turn fifteen, I can take the Test of Knighthood and become a grand warrior!\"");
				add(["father", "training", "Test of Knighthood"]);
				fallthrough;

			case "father" (remove):
				say("\"Everyone says that he might be alive, but it hath been weeks since he disappeared. I am old enough to face the truth.\"");
				say("\"He was on patrol near Monitor. He told the pikemen that he had found something suspicious, and he went to look... and he never returned.\"");
				say("\"It must have been the Goblins! I refuse to weep. But I vow that the first dozen Goblins I slay shall be for him!\"");
				fallthrough;

			case "training" (remove):
				say("\"I am strong. I am ready. The Goblins will be no match for me! I have trained well.\"");
				say("\"If thou dost need a trainer, I can recommend one. Everyone says that Shazzana is the best trainer, but she is such a tyrant!\"");
				say("\"Ever since my father died, Caladin hath been my trainer. He is big and loud, and sometimes dumb, but he doth have a good heart.\"");
				gflags[ASKED_CANTRA_ABOUT_TEST] = true;
				fallthrough;

			case "Test of Knighthood" (remove):
				UI_push_answers();
				say("\"I have been training for the Test for mine entire life! Anything that thou needest to know, I can tell thee.\"");
				say("\"It truly isn't so dangerous if thou dost know the secrets. And Shmed is nothing to worry about.\"");
				say("\"What wouldst thou like to know?\"");
				add(["location", "secrets", "Shmed", "nothing more"]);
				if (!gflags[LORD_MARSTEN_GAVE_PERMISSION]) {
					add("permission");
				}
				fallthrough;

			case "location" (remove):
				say("\"The Test of Knighthood takes place in the Knight Mountains, just north of the city. Thou must follow the trail that leads west from the highway.\"");
				say("\"But beware of Goblins! They come ever closer to the city of late. Even the bravest warrior can be slain if ambushed...\"");
				fallthrough;

			case "secrets" (remove):
				say("\"These actually are not secrets, since everyone in Monitor knows how Knight's Test doth operate. To become a Knight, thou must survive the dungeon there. Simply remember these tips:\"");
				say("\"Do not look back, or the explosions will overcome thee. Move swiftly at first.\"");
				say("\"Look upwards, as well as from side to side. There are clues that would otherwise escape thee. Be prepared to climb.\"");
				say("\"Timing is essential. The fiery missiles can be outrun, if thou dost watch carefully.\"");
				say("\"Use thine hands to search as well as thine eyes, for some things are invisible.\"");
				say("\"The last chamber is kept a secret! But I would wager that it is as easy as the rest of the dungeon, if thou dost keep a calm head and steady nerves.\"");
				fallthrough;

			case "Shmed" (remove):
				say("\"Oh, he is the old man who administers the Test. I do not like him much. He looks at me oddly sometimes...\"");
				say("\"He will not let thee into the dungeon until thou dost give him the password. Only Lord Marsten can give the password to thee.\"");
				say("\"Shmed also disarms thee, since thou canst only enter the Knight's Test with a mace and leather armour. And no companions may accompany thee.\"");
				fallthrough;

			case "nothing more" (remove):
				say("\"Very well!\"");
				UI_pop_answers();
				fallthrough;

			case "bye":
				Func097F(AVATAR, "@Farewell!@", 0x0000);
				if (gflags[CURED_CANTRA]) {
					Func097F(CANTRA, "@Bless thee!@", 0x0002);
				} else {
					say("\"Oh, I hope that thou dost attempt the Knight's Test! And when thou dost, please come back to tell me about it!\"");
					Func097F(CANTRA, "@Slay a Goblin!@", 0x0002);
				}
				if (CANTRA->get_schedule_type() == HOUND) {
					CANTRA->set_schedule_type(SHY);
				}
				break;
		}
	}
	if (event == DEATH) {
		if (gflags[CURED_CANTRA]) {
			CANTRA->clear_item_flag(SI_TOURNAMENT);
			abort;
		}
		if (gflags[KNOWS_CANTRA_IS_MISSING]) {
			var0003 = 0x0000;
		} else {
			CANTRA->set_attack_mode(FLEE);
		}
	}
	if (event == EGG) {
		var0007 = Func0994();
		if ((var0007 == 0x001F) && (gflags[SLAIN_WOLF] == true)) {
			CANTRA->show_npc_face0(0x0000);
			say("\"Iieeeee.... Help me, Avatar! Help me! I can't escape... It will catch me and devour me!\" *\"Heelllp!\"");
			UI_remove_npc_face0();
			abort;
		}
	}
}

extern var Func0954 0x954 ();
extern var Func097D 0x97D (var var0000, var var0001, var var0002, var var0003, var var0004);
extern void Func097F 0x97F (var var0000, var var0001, var var0002);
extern void Func07D1 object#(0x7D1) ();
extern var Func0813 0x813 ();
extern var Func0992 0x992 (var var0000, var var0001, var var0002, var var0003);
extern var Func099B 0x99B (var var0000, var var0001, var var0002, var var0003, var var0004, var var0005, var var0006);
extern var Func0955 0x955 ();
extern void Func0811 0x811 ();

void Func0441 object#(0x441) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;
	var var0008;
	var var0009;
	var var000A;
	var var000B;

	var0000 = CELLIA->get_item_flag(MET);
	var0001 = "stranger";
	if (var0000) {
		var0001 = Func0954();
	}
	if (gflags[AVATAR_IS_KNIGHT]) {
		var0001 = "Knight";
	}
	var0002 = Func097D(PARTY, QUANTITY_ANY, 0x037C, QUALITY_ANY, 0x0007);
	var0003 = Func0954();
	if (event == DEATH) {
		var0004 = script item {
			nohalt;
			call Func01D0;
		};
	}
	if (event == DOUBLECLICK) {
		Func097F(AVATAR, "@Pardon me....@", 0x0000);
		CELLIA->Func07D1();
		Func097F(CELLIA, (("@Yes, " + var0001) + "?@"), 0x0002);
		CELLIA->set_schedule_type(TALK);
	}
	if (event == STARTED_TALKING) {
		CELLIA->run_schedule();
		CELLIA->clear_item_say();
		var0005 = false;
		if (CELLIA->get_schedule_type() == TEND_SHOP) {
			var0005 = true;
		}
		CELLIA->show_npc_face0(0x0000);
		if (!var0000) {
			if (gflags[SLAIN_WOLF]) {
				say("\"I am Cellia the Furrier. What may I do for thee, ",
					var0001,
					"?\"");
			} else {
				say("\"When thou hast become a Knight, I can be of service to thee. Until then, go thy way.\"");
				Func097F(CELLIA, "@Farewell.@", 0x0000);
				abort;
			}
			CELLIA->set_item_flag(MET);
		} else if (gflags[SLAIN_WOLF]) {
			say("\"Glad to see thee again, ",
				var0001,
				". What may I do for thee?\"");
		} else {
			say("\"Glad to see thee again, ",
				var0001,
				".\"");
			say("\"When thou hast become a Knight, I can be of service to thee. Until then, be thou gone.\"");
			Func097F(CELLIA, "@Farewell.@", 0x0000);
			abort;
		}
		if (gflags[SLAIN_WOLF] && (!gflags[GAVE_WOLF_TO_CELIA])) {
			add("slain wolf");
		}
		if (gflags[GAVE_WOLF_TO_CELIA] && (!gflags[HAVE_WOLF_CLOAK])) {
			add("cloak");
		}
		if (gflags[ASK_CELLIA_ABOUT_FUR_CAP] && (!gflags[KNOWS_FUR_CAP_OWNER])) {
			add("fur cap");
		}
		converse (["buy", "furrier", "bye"]) {
			case "slain wolf" (remove):
				say("\"Now that thou hast completed the Test, I must make a cloak for thee from the skin of the animal thou didst slay.\"");
				if (!var0005) {
					say("\"When I am in my shop, bring me the body which thou didst obtain at Knight's Test.\"");
				} else {
					say("\"Give to me the body.\"");
					if (var0002) {
						var0004 = UI_remove_party_items(QUANTITY_ANY, 0x037C, QUALITY_ANY, 0x0007, true);
						say("\"Oooh, 'tis a large one.\"");
						var0006 = var0004->get_cont_items(SHAPE_ANY, QUALITY_ANY, FRAME_ANY);
						if (var0006) {
							for (var0009 in var0006 with var0007 to var0008) {
								var000A = var0009->set_last_created();
								var0004 = Func0813();
							}
						}
						var000B = Func0992(IOLO, "@The Avatar is quite skilled at killing large animals.@", 0x0000, false);
						if (var000B != AVATAR) {
							0x0000->set_conversation_slot();
							UI_remove_npc_face1();
						}
						say("\"Return in one day. I shall have thy cloak by then.\"");
						UI_set_timer(0x0004);
						gflags[GAVE_WOLF_TO_CELIA] = true;
					} else {
						var000B = Func0992(0x0001, "@But we do not have the body with us.@", "@I do not have the wolf's body.@", false);
						UI_remove_npc_face1();
						0x0000->set_conversation_slot();
						say("\"I cannot make thee a cloak without an animal's skin!\"");
						say("\"Return to Knight's Test, and bring me the slain wolf. Or else thou canst not achieve thy knighthood!\"");
						Func097F(CELLIA, "@Go!@", 0x0000);
						abort;
					}
				}
				fallthrough;

			case "cloak" (remove):
				if (UI_get_timer(0x0004) < 0x0017) {
					say("\"It is not time! I must have the full 24 hours!\"");
					var000B = Func0992(0x0001, (("@Take care, " + var0003) + ". She hath a very sharp knife!@"), 0x0000, false);
					if (var000B != AVATAR) {
						0x0000->set_conversation_slot();
						UI_remove_npc_face1();
						say("\"And I know exactly where and how to use it...\"");
					}
					Func097F(CELLIA, "@Give me time!@", 0x0000);
					abort;
				}
				say("\"It is ready.\"");
				var000B = Func0992(IOLO, (("@'Tis beautiful, " + var0003) + "!@"), 0x0000, false);
				if (var000B != AVATAR) {
					UI_remove_npc_face1();
					0x0000->set_conversation_slot();
					say("\"What didst thou expect?\"");
				}
				var0004 = Func099B(AVATAR, 0x0001, 0x00E3, QUALITY_ANY, 0x0003, 0x0000, true);
				gflags[HAVE_WOLF_CLOAK] = true;
				fallthrough;

			case "furrier" (remove):
				say("\"I am the furrier, tanner and tailor of Monitor. It is my duty to make cloaks from the animals slain by our valiant Knights. If one were to travel far north, it is exactly the sort of thing one should wear.\"");
				say("\"I skin the carcasses myself.\"");
				say("\"Other pelts I obtain from the northern trappers. They supply exotic furs which are rare here in Monitor -- especially Gwani pelts!\"");
				add(["trappers", "Gwani pelts"]);
				if (gflags[SLAIN_WOLF] && (!gflags[GAVE_WOLF_TO_CELIA])) {
					say("\"Now that thou hast completed the Test of Knighthood, thou must bring me the body of the animal thou didst slay.\"");
					say("\"I shall make a cloak from its skin for thee.\"");
					say("\"This is the cloak which thou must wear to the Ceremony of Initiation.\"");
				}
				fallthrough;

			case "Gwani pelts" (remove):
				say("\"Hast thou not heard stories of these creatures? They are terrible, ferocious, savage creatures!\"");
				say("\"They live in the snowlands of the far north, where the Goblins sometimes go to war on them.\"");
				say("\"It is exceedingly rare for the Goblins to slay a Gwani, but when they do, their chieftain immediately lays claim to the carcass.\"");
				say("\"Only the toughest Goblin chiefs wear the Gwani cloak. And only the toughest Knights can slay such a fearsome Goblin!\"");
				fallthrough;

			case "trappers" (remove):
				say("\"Luther brings me leopard pelts now and again, but mostly I must rely on the trappers to bring me exotic furs.\"");
				say("\"The trappers live in the Great Northern Forest, at the foot of the Impassable Mountains.\"");
				say("\"A trapper named Hazard sells me snow leopard pelts. Unfortunately, his men only make it as far south as Monitor a few times a year.\"");
				say("\"Sometimes he even sends Gwani pelts! He likes hunting Gwani because it is such a challenge.\"");
				add("Luther");
				fallthrough;

			case "Luther" (remove):
				say("\"Actually, when Luther doth go on the hunt he rarely catches anything!\"");
				say("\"Like all the other Bears, I think he prefers to hunt other warriors! He always bullies the strangers that come into town.\"");
				say("\"He is a bully and someone should teach him a lesson! I have noticed that Luther doth completely relax his guard whenever he loses his temper. And nothing angers him so much as when he is taunted. Do with the information what thou wilt. I simply love to cause dissension.\"");
				gflags[ASKED_LUTHER_ABOUT_BULLY] = true;
				fallthrough;

			case "buy":
				if (CELLIA->get_schedule_type() == TEND_SHOP) {
					say("\"Dost thou wish to buy one of my pelts or cloaks?\"");
					if (Func0955()) {
						Func0811();
					} else {
						say("\"Some other time, perhaps.\"");
					}
				} else {
					say("\"If thou wouldst come to my shop during the day, I could sell thee something...\"");
					remove("buy");
				}
				fallthrough;

			case "fur cap" (remove):
				say("\"The fur cap thou hast described is from Northern Forest, but it is too fancy for any woman from this part of the world. In truth it doth remind me of a piece of work I created for Frigidazzi, a mage in the city of Moonshade. Yes, that must be it.\"");
				fallthrough;

			case "bye":
				Func097F(AVATAR, "@Good day to thee.@", 0x0000);
				Func097F(CELLIA, "@Happy Hunting!@", 0x0002);
				break;
		}
	}
}

extern var Func0955 0x955 ();
extern var Func0992 0x992 (var var0000, var var0001, var var0002, var var0003);
extern void Func097F 0x97F (var var0000, var var0001, var var0002);

void Func0442 object#(0x442) () {
	var var0000;
	var var0001;
	var var0002;

	var0000 = G_SIMON->get_object_position();
	if (event == SCRIPTED) {
		if (G_SIMON->get_item_flag(MET)) {
			G_SIMON->show_npc_face0(0x0000);
			say("\"Thou hast slain me! My blood spills away... all because of Pomdirgun, that betrayer!\"");
			say("\"Come nearer, that I may boast of my deeds before I die.\"");
			converse (["deeds", "Pomdirgun", "bye"]) {
				case "deeds" (remove):
					say("\"I am a Goblin! I have lived amongst the foolish Knights all these many years and no one hath suspected!! Yes! I have supplied my fellow Goblins with all of Monitor's military secrets!\"");
					add("military secrets");
					fallthrough;

				case "military secrets" (remove):
					say("\"That is right! I have relayed patrol plans and other military information to King Pomdirgun. The assault on Fawn Tower was a success thanks to me! Monitor's Knight Champion was ambushed because of mine ingenuity!\"");
					fallthrough;

				case "Pomdirgun" (remove):
					say("\"He is our leader! But he hath double-crossed me! That is why I am telling thee this! He promised ME the Helm of Monitor, but the greedy bastard kept it for himself! After all the loyal years I have served the Goblins, I deserve it! Well, I shall have to extract revenge!\"");
					add(["loyal years", "revenge"]);
					fallthrough;

				case "loyal years" (remove):
					say("\"That is right! I have been in Monitor longer than anyone else here! I came to the town many, many years ago!\"");
					add(["many years ago", "cover"]);
					fallthrough;

				case "many years ago" (remove):
					say("\"It was Pomdirgun's father who procured the magic potion that enabled me to change mine appearance. But now... I am tired of being a Man! I want to be a Goblin again! I have thrown away mine entire life! I want to die...\"");
					fallthrough;

				case "cover" (remove):
					say("\"A Moonshadian mage created a potion that enabled us to make our appearance Man-like. But it is addictive! I cannot live without it...\"");
					fallthrough;

				case "revenge", "bye":
					say("\"Hmmm... Perhaps thou wouldst like to know the secret location of Pomdirgun's camp? If thou dost promise to slay King Pomdirgun, I shall tell thee!\"");
					if (Func0955()) {
						say("\"There is a Great Dead Tree in the Knights' Forest, north of Knight's Test. Thou wilt know it because it is surrounded by rocks. Hidden nearby is an ancient stairway leading into the bowels of the earth.\"");
						say("\"This leads to a passageway which will bring thee to the chief's village, hidden in a secret valley. No Man hath ever set foot there...\"");
						say("\"But be careful! There are many challenges for the unwary, and thou must survive to cleave Pomdirgun's head into two!\"");
						say("\"The passageway is sealed with an iron door, but thou shalt find the key tied around my neck.\"");
					} else {
						say("\"Curse thee, then! I shall take the secret of the Goblins with me to my grave...\"");
					}
					say("\"Urrgh...\"");
					var0001 = Func0992(0x0001, "@He's dead.@", "@He's dead.@", true);
					0x0000->set_conversation_slot();
					G_SIMON->clear_item_flag(SI_TOURNAMENT);
					G_SIMON->clear_item_flag(DEAD);
					G_SIMON->kill_npc();
					SIMON->set_item_flag(DEAD);
					gflags[KNOWS_ABOUT_GOBLIN_RAID] = true;
					abort;
			}
		} else {
			G_SIMON->show_npc_face0(0x0000);
			say("\"Thou hast found out my secret! Now, thou must die...\"");
			G_SIMON->set_item_flag(SI_TOURNAMENT);
			G_SIMON->set_alignment(EVIL);
			Func097F(G_SIMON, "@Die!@", 0x0000);
			G_SIMON->set_new_schedules(MIDNIGHT, IN_COMBAT, [var0000[0x0001], var0000[0x0002]]);
			G_SIMON->run_schedule();
			AVATAR->set_oppressor(G_SIMON);
			abort;
		}
	}
	if ((event == DEATH) && (!G_SIMON->get_item_flag(MET))) {
		G_SIMON->set_schedule_type(WAIT);
		G_SIMON->set_item_flag(DEAD);
		var0002 = script G_SIMON {
			actor frame sleeping;
			actor frame sleeping;
			actor frame sleeping;
			actor frame sleeping;
			actor frame sleeping;
			actor frame sleeping;
			actor frame sleeping;
			actor frame sleeping;
			actor frame sleeping;
			actor frame sleeping;
		};
		G_SIMON->set_item_flag(MET);
		var0002 = script AVATAR {
			nohalt;
			wait 10;
			call Func0442;
		};
	}
}

extern var Func097D 0x97D (var var0000, var var0001, var var0002, var var0003, var var0004);
extern var Func0954 0x954 ();
extern void Func09AC 0x9AC (var var0000, var var0001, var var0002, var var0003);
extern void Func07D1 object#(0x7D1) ();
extern void Func097F 0x97F (var var0000, var var0001, var var0002);
extern var Func0955 0x955 ();
extern var Func099B 0x99B (var var0000, var var0001, var var0002, var var0003, var var0004, var var0005, var var0006);
extern var Func0992 0x992 (var var0000, var var0001, var var0002, var var0003);
extern void Func0836 0x836 ();
extern void Func0837 0x837 ();
extern var Func09AE 0x9AE (var var0000);
extern var Func0988 0x988 (var var0000, var var0001);

void Func0443 object#(0x443) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;
	var var0008;
	var var0009;
	var var000A;
	var var000B;
	var var000C;
	var var000D;
	var var000E;

	var0000 = UI_part_of_day();
	var0001 = Func097D(PARTY, 0x0001, 0x034A, QUALITY_ANY, 0x000F);
	var0002 = Func0954();
	if ((var0000 > EARLY) || (var0000 < EVENING)) {
		var0000 = "day";
	} else {
		var0000 = "evening";
	}
	var0003 = false;
	if (event == DEATH) {
		var0004 = script item {
			call Func01D0;
		};
	}
	if (event == SCRIPTED) {
		Func09AC(HARNNA, -1, -1, TALK);
	}
	if (event == DOUBLECLICK) {
		AVATAR->item_say("@Greetings, milady.@");
		HARNNA->Func07D1();
		Func097F(HARNNA, "@Greetings to thee.@", 0x0002);
		HARNNA->set_schedule_type(TALK);
	}
	if (event == STARTED_TALKING) {
		HARNNA->clear_item_say();
		HARNNA->run_schedule();
		HARNNA->show_npc_face0(0x0000);
		if (gflags[HARNNA_TALKED_CRYSTAL_BALL] && (!gflags[WILL_FIND_CANTRA])) {
			if (gflags[KNOW_BATLIN_HAS_CANTRA]) {
				HARNNA->revert_schedule();
				HARNNA->run_schedule();
				say("\"As thou hast now seen, the peril that faces Cantra doth go beyond merely being taken by the Goblins. Some foul thing doth possess her.\"");
				say("\"The worst the Goblins could do would be to kill her and destroy her body. This new uncertain danger is nothing less than a threat to her spirit, the very essence of her being!\"");
				say("\"I implore thee, please find her and rescue her. It is certain to be a perilous undertaking and I cannot blame thee if thou wouldst refuse the pleas of a simple woman.\"");
				say("\"But none of the other Knights believe in the visions of the crystal ball. They believe that Cantra hath been taken away by the goblins, and that she is already dead.\"");
				say("\"Thou art mine only hope! Wilt thou please find my daughter Cantra and return her to me?\"");
				if (Func0955()) {
					gflags[WILL_FIND_CANTRA] = true;
					say("\"Oh, I thank thee from the bottom of mine heart for thy kindness and thy bravery!\"");
					say("\"To find Cantra, thou wilt need two things. The first of these is Cantra's practice sword. I can give that to thee now.\"");
					var0004 = Func099B(AVATAR, 0x0001, 0x0208, QUALITY_ANY, 0x0000, 0x0000, true);
					say("\"This is the very same practice sword that Cantra used every day.\"");
					say("\"Now that thou hast my daughter's sword, thou shouldst find one of the legendary Hounds of Doskar. They will be able to sniff Cantra's essence from the sword, and then track her to anywhere in the Serpent Isle.\"");
					say("\"The only dilemma thou dost face now is to find one of the Hounds of Doskar. I do not know where one may be found, but I foresee that thou must find the Hound before thou canst rescue my daughter.\"");
					HARNNA->set_schedule_type(SHY);
				} else {
					say("\"Then mine only daughter Cantra shall soon be dead... or worse. Leave thou me now.\"");
					HARNNA->set_schedule_type(SHY);
					Func097F(HARNNA, "@Oh...@", 0x0000);
					abort;
				}
			} else {
				say("\"Thou must find the crystal and gaze into it. Go to mine home. It is there, on the table.\"");
				say("\"I beg of thee, for thy sake as well as the sake of my missing child, look into the glass.\"");
				Func097F(HARNNA, "@The crystal!@", 0x0000);
				abort;
			}
		} else if (gflags[AVATAR_IS_KNIGHT]) {
			if (!gflags[KNOWS_CANTRA_IS_MISSING]) {
				say("\"My daughter Cantra is missing! I know she would never run away from me, but I feel certain that the Goblins did not take her.\"");
				gflags[KNOWS_CANTRA_IS_MISSING] = true;
				if (!HARNNA->get_item_flag(MET)) {
					say("\"Pray excuse my poor manners, stranger! I am Widow Harnna, the Healer of Monitor. I also sell vegetables from my garden.\"");
					add(["widow", "healing", "food", "information"]);
					HARNNA->set_item_flag(MET);
				} else {
					say("\"Pray excuse mine outburst, ",
						var0002,
						"! How may I help thee now? Dost thou have need of healing, or dost thou wish to buy my vegetables?\"");
				}
				add(["healing", "food", "information"]);
			} else {
				if (!HARNNA->get_item_flag(MET)) {
					say("\"I am Widow Harnna, the Healer of Monitor. I also sell vegetables from my garden.\"");
					add(["widow", "healing", "food", "information"]);
					HARNNA->set_item_flag(MET);
				} else {
					say("\"How may I help thee now? Dost thou have need of healing, or dost thou wish to buy my vegetables?\"");
				}
				add(["healing", "food", "information"]);
			}
		} else {
			var0004 = HARNNA->find_nearby(0x0334, 0x0014, MASK_NONE);
			for (var0007 in var0004 with var0005 to var0006) {
				if (var0007->get_item_quality() == 0x0048) {
					say("\"Perhaps we may speak at another time. Mine husband is recently dead, and I am in mourning.\"");
					abort;
				}
			}
			if (!HARNNA->get_item_flag(MET)) {
				say("\"How may I help thee? I am Widow Harnna, the Healer of Monitor. I also grow mine own food.\"");
				add(["widow", "healing", "food", "information"]);
				HARNNA->set_item_flag(MET);
			} else {
				say("\"How may I help thee now? Dost thou have need of healing, or dost thou wish to buy my vegetables?\"");
			}
			add(["healing", "food", "information"]);
		}
		if (gflags[WILL_FIND_CANTRA] && (!gflags[BATLIN_FLED_SHAMINOS_KEEP])) {
			add("prophecy");
			var0003 = true;
		}
		if (gflags[KNOWS_CANTRA_IS_MISSING]) {
			add("Cantra");
		}
		if (gflags[FOUND_CANTRAS_FATHER] && (!gflags[TOLD_HARNNA_FOUND_SCROLL])) {
			add("found scroll");
		}
		if (gflags[KNOWS_ABOUT_VARO_LEAVES] && ((!gflags[DELPHYNIA_SPOKE_VARO_LEAVES]) && (gflags[POISONED_BY_LYDIA] && (!gflags[CURED_LYDIA_POISON])))) {
			add(["Varo leaves", "pox"]);
		}
		if (gflags[POMDIRGUN_IS_DEAD]) {
			add("Pomdirgun");
		}
		if (gflags[KNOWS_ABOUT_VARO_LEAVES] && gflags[POISONED_BY_LYDIA]) {
			add("pox");
		}
		if (gflags[TOLD_MARSTEN_SERVES_LORD_BRITISH] && (!gflags[RENOUNCED_BRITISH])) {
			add("Marsten");
		}
		var0008 = 0x0002;
		if (gflags[AVATAR_IS_KNIGHT]) {
			var0008 = 0x0006;
		}
		if (gflags[WILL_FIND_CANTRA]) {
			var0008 = 0x000C;
		}
		var0009 = 0x0000;
		converse ("bye") {
			case "Marsten" (remove):
				if (gflags[PROVED_MARSTEN_IS_TRAITOR]) {
					say("\"I am glad that miserable traitor is no longer Lord of Monitor!\"");
				} else {
					say("\"He is the Lord of the Town. Thou shouldst talk to him if thou hast not already.\"");
				}
				fallthrough;

			case "widow" (remove):
				say("\"My beloved husband was slain while doing his duty, so I should have no complaints. Though Goblins have taken his life, they too shall die.\"");
				say("\"But it hath been hard on Cantra. A girl at her age needs a father, dost not thou agree?\"");
				add(["Cantra", "father"]);
				fallthrough;

			case "Pomdirgun" (remove):
				say("\"I truly believe it is wrong to wish harm to any living creature, but the world is far better without that foul creature Pomdirgun alive. Thy deed was fair.\"");
				fallthrough;

			case "Cantra" (remove):
				if (gflags[BATLIN_FLED_SHAMINOS_KEEP]) {
					if (gflags[TOLD_CANTRA_IS_ALIVE]) {
						say("\"It is a comfort to know that my daughter is among the monks. Yet I have a foreboding...\"");
						say("\"Something is coming to me... a thought... a premonition...\"");
						say("\"Go! The monks have need of thee. My daughter hath need of thee!\"");
						Func097F(HARNNA, "@Go to Monk Isle!@", 0x0000);
						abort;
					}
					say("\"I know that mine only daughter Cantra is now dead. Her spirit hath been haunting me. She is suffering and tormented.\"");
					var000A = Func0992(SHAMINO, "@The monks have taken Cantra to their island.@", "@The monks have taken Cantra to their island.@", false);
					0x0000->set_conversation_slot();
					say("\"I thank thee! Perhaps now there is hope that my daughter shall return home to me.\"");
					gflags[TOLD_CANTRA_IS_ALIVE] = true;
				} else if (!gflags[KNOWS_CANTRA_IS_MISSING]) {
					say("\"Cantra misses her father terribly. He hath been gone for many weeks...\"");
					say("\"She is nearly ready to become a Knight herself now. Her father would be so proud of her!\"");
					say("\"She is so serious about becoming a Knight. All she ever does is practice with her wooden sword.\"");
					add("father");
				} else if (!gflags[HARNNA_TALKED_CRYSTAL_BALL]) {
					say("\"Dost thou believe in magic?\"");
					if (Func0955()) {
						say("\"That is good, for what I have to show thee would befuddle the minds of most of this town's inhabitants.\"");
					} else {
						say("\"I would wager that there is some tiny bit of belief in thine heart, but if not, then it is time that thou wert properly enlightened.\"");
						say("\"What I have to show thee should quell any doubts thou mayest yet have.\"");
					}
					gflags[HARNNA_TALKED_CRYSTAL_BALL] = true;
					if (HARNNA->get_schedule_type() != PATROL) {
						say("\"Go to mine home. There thou shalt find a crystal ball. Gaze into it, and let thy mind be clear.\"");
					} else {
						say("\"Look into my crystal ball. Thou shalt find it on the table within mine home. Let thy mind be clear.\"");
					}
					Func097F(HARNNA, "@The crystal!@", 0x0000);
					abort;
				} else if (!gflags[CURED_CANTRA]) {
					say("\"I am so grateful that thou hast taken on the quest of saving my daughter. If I can help thee, ask.\"");
				} else if (CANTRA->get_item_flag(SI_ZOMBIE)) {
					say("\"I am glad that my daughter is alive, but I have a strange foreboding that all is not as it should be with her. A small private part of her is still awash in madness and death.\"");
				} else {
					say("\"I am so happy my daughter hath been found, resurrected by the monks, and that thou hast restored her mind.\"");
				}
				fallthrough;

			case "father" (remove):
				say("\"The Knights say that there is glory in the way that Cantra's father died, but they do not see the truth. He did his duty, not to earn their respect, but out of love for his family.\"");
				say("\"This type of courage, and the source of it, is something the Knights of Monitor do not understand. And until they gain that understanding, there will be no winning this war with the Goblins.\"");
				fallthrough;

			case "healing":
				say("\"I am not a magical healer. Monitorians are quite suspicious of magic. I use a natural healing method, which uses herbs. Art thou in need of a healer?\"");
				if (gflags[POISONED_BY_LYDIA] && (gflags[AVATAR_IS_POISONED] && (!gflags[CURED_LYDIA_POISON]))) {
					var000A = Func0992(IOLO, "@The Avatar is burning with fever!@", "@Oh... yes... mine head...@", false);
					0x0000->set_conversation_slot();
					do {
						if (gflags[KNOWS_ABOUT_VARO_LEAVES] == false) {
							say("\"I can temporarily restore thy body, but thou art suffering from an affliction that cannot easily be cured.\"");
							say("\"Such a pox may wear off in time if thou art extremely lucky, but thou canst only be permanently cured by a special ointment made from Varo leaves.\"");
							add("pox");
							if (gflags[DELPHYNIA_SPOKE_VARO_LEAVES] == true) {
								say("\"Ah, thou hast spoken with Delphynia already! Dost thou have the Varo leaves?\"");
								if (Func0955()) {
									continue;
								}
								say("\"Go thou quickly to Fawn and see if she doth have more of the leaves!\"");
							} else {
								add("Varo leaves");
							}
							gflags[KNOWS_ABOUT_VARO_LEAVES] = true;
							Func0836();
							break;
						}
					} while (false)
					nobreak {
						do {
							if (UI_remove_party_items(0x0005, 0x01D3, QUALITY_ANY, 0x0003, false)) {
								say("\"Now that I have the proper ingredients, it is a simple matter to cure thee.\"");
								say("\"Hold thou still while I apply these directly upon thy tattoo...\"");
								say("\"There, 'tis done. Thine infection hath been healed.\"");
								gflags[CURED_LYDIA_POISON] = true;
								AVATAR->clear_item_flag(POISONED);
								break;
							}
							if (AVATAR->get_item_flag(POISONED)) {
								say("\"My cure can have only a temporary effect, for thou art enthralled by a powerful disease.\"");
							}
							say("\"In order for me to provide a permanent cure to thine affliction, thou must bring me five leaves of the Varo plant.\"");
							Func0836();
							Func097F(HARNNA, "@Quickly...@", 0x0000);
							abort;
						} while (false);
					}
				} else if (Func0955()) {
					Func0836();
				} else {
					say("\"If thou art ever in need of a healer, I shall be ready to assist thee.\"");
				}
				fallthrough;

			case "Varo leaves" (remove):
				say("\"These leaves are now scarce, as the Varo grows only with abundant sunlight, and we have had clouded skies for many months.\"");
				say("\"Go thou and see Delphynia, the horticulturist in Fawn. Perhaps she will have a supply of leaves.\"");
				fallthrough;

			case "pox" (remove):
				if (gflags[LYDIA_CONFESSES] == true) {
					say("\"Didst thou speak with Lydia?\"");
					AVATAR->show_npc_face1(0x0000);
					say("\"Indeed, the wench hath confessed to her crime!\"");
					if (LYDIA->get_item_flag(DEAD)) {
						say("\"Moreover, she hath paid for her treachery in blood. She is slain.\"");
					}
					UI_remove_npc_face1();
					0x0000->set_conversation_slot();
					say("\"I see. Thou dost appear to have many enemies in my land, ",
						var0002,
						". Be thou careful whom thou dost trust!\"");
				} else {
					say("\"Thy suffering came from no accidental affliction -- the venom which mixes with thy blood is not common.\"");
					var000A = Func0992(DUPRE, "@Who did this to the Avatar?@", 0x0000, false);
					if (var000A != AVATAR) {
						0x0000->set_conversation_slot();
					}
					say("\"I strongly suspect that the source of thine infection is the tattoo thou hast been given.\"");
					say("\"I know that Lydia must have given thee this tattoo, yet I find it difficult to believe she would poison a stranger.\"");
					say("\"Thou shouldst have words with her, I think.\"");
					gflags[CAN_ASK_LYDIA_ABOUT_POISON] = true;
					LYDIA->set_alignment(CHAOTIC);
					LYDIA->set_item_flag(SI_TOURNAMENT);
				}
				gflags[HARNNA_SPOKE_ABOUT_POX] = true;
				fallthrough;

			case "food":
				say("\"I grow vegetables to feed the town, and sometimes to trade. What dost thou wish to purchase?\"");
				Func0837();
				fallthrough;

			case "prophecy" (remove):
				if (gflags[FINISHED_DREAM_QUEST]) {
					say("\"I sense that thou hast completed the Quest of the Three Artifacts.\"");
				} else {
					say("\"Thou shalt need three ancient and powerful artifacts to complete thy tasks. One of these is a helm. It seems very familiar to me...\"");
					if (gflags[HAVE_HELM_OF_MONITOR]) {
						say("\"But of course! It is the Helm of Monitor, which thou didst recover from the Goblins!\"");
						say("\"Thou shalt yet need that artifact in thy journeys.\"");
					}
				}
				say("\"Thy quest shall be long and difficult. Many are the adventures that thou must undertake. Seemingly unconnected events shall prosper thee in thy seeking of my lost daughter.\"");
				if (gflags[FAWN_TRIAL_DONE_FIRST_DAY]) {
					say("\"Thou mayest find this hard to believe, but my dreams tell me that thy sojourn in Fawn hath been of benefit to thy quest.\"");
				}
				say("\"Thy travels shall take thee north. Far north through caves that lie to the west... I can feel the cold wind blowing upon thee.\"");
				if (gflags[FAWN_TRIAL_DONE_FIRST_DAY] && gflags[HAVE_HELM_OF_MONITOR]) {
					say("\"I sense that now is the time to go north. All is ready for thy success.\"");
				}
				say("\"I see no more.\"");
				fallthrough;

			case "information":
				if ((!gflags[ASKED_HARNNA_TOO_MUCH]) || (UI_get_timer(0x0002) > 0x0004)) {
					say("\"What dost thou desire to know?\"");
					UI_push_answers();
					var0009 = 0x0001;
					add(["people", "places", "strange objects", "nothing more"]);
				} else {
					say("\"I must be about my duties. We must discuss this another time.\"");
				}
				fallthrough;

			case "people":
				if (!gflags[KNOWS_ABOUT_MONITOR_CLANS]) {
					say("\"The citizens of Monitor are all Knights, and they belong to one of three Commands: the Bears, Wolves, or Leopards.\"");
				}
				say("\"About which Command dost thou desire to inquire?\"");
				UI_push_answers();
				var0009 = 0x0002;
				add(["Bears", "Wolves", "Leopards", "visitors", "nothing more"]);
				fallthrough;

			case "Bears" (remove):
				say("\"The Bears are strong and brave, and known for their triumphs in the arena. About whom dost thou wish to inquire?\"");
				UI_push_answers();
				var0009 = 0x0003;
				add(["Caladin", "Luther", "Simon", "Flicken", "Templar", "Lydia", "nothing more"]);
				fallthrough;

			case "Caladin" (remove):
				say("\"He is the leader of the Bear Command, and the commander of the Pikemen. A good, decent man and a hardened veteran of many a tough battle. He doth hate Goblins with a passion.\"");
				var0008 = Func09AE(var0008);
				fallthrough;

			case "Luther" (remove):
				say("\"Luther is one of the Bear Command. He is a proven and respected fighter on the battlefield, but off the field he is somewhat of a bully. Best to stay clear of him, I say.\"");
				say("\"'Tis said that he doth have a terrible temper. Luther loses control and simply begins swinging.\"");
				var0008 = Func09AE(var0008);
				fallthrough;

			case "found scroll" (remove):
				say("\"A scroll? What dost thou mean?\"");
				AVATAR->show_npc_face1(0x0000);
				say("\"I found a scroll, obviously written by Cantra, upon the body of a slain Pikeman. 'Twas thine husband I fear. He was betrayed...\"");
				UI_remove_npc_face1();
				0x0000->set_conversation_slot();
				say("\"I thank thee, ",
					var0002,
					", for solving the mystery of mine husband's disappearance. 'Tis better to know what truly happened than to be left knowing nothing. I have grieved for mine husband, and I shed tears not for him, but for myself and the waste that all hath become.\"");
				gflags[TOLD_HARNNA_FOUND_SCROLL] = true;
				fallthrough;

			case "Simon" (remove):
				if (!gflags[GOBLIN_SIMON_DEAD]) {
					say("\"He is the innkeeper of The Sleeping Soldier. He is a quiet man, and the oldest person in Monitor. He enjoys his drink -- especially an unusual type of ale from Fawn.\"");
					say("\"I have told him to cease drinking that swill, but he insists. From a healer's point of view, that ale should be banned!\"");
				} else {
					say("\"That foul imposter! I spit upon all goblins!\"");
				}
				var0008 = Func09AE(var0008);
				fallthrough;

			case "Flicken" (remove):
				say("\"He is the guard at the south gate of Monitor. He hath a keen eye, despite his getting along in years.\"");
				say("\"Flicken is one of the Bear Command. He may seem argumentative, but he is simply a good fellow, doing his job.\"");
				var0008 = Func09AE(var0008);
				fallthrough;

			case "Templar" (remove):
				say("\"Templar is a virtuous knight of the Bear Command and oftimes a winner of our local tournaments. He also is our local expert on the Goblins.\"");
				var0008 = Func09AE(var0008);
				fallthrough;

			case "Lydia" (remove):
				if (!gflags[LYDIA_CONFESSES]) {
					say("\"She provides the Knights of Monitor with their tattoos, which they receive upon completing Knight's Test or carrying out some difficult quest.\"");
				} else {
					say("\"'Tis simply beyond belief that she would have poisoned thee... yet thou dost say she confessed to her crime.\"");
					say("\"It must have had something to do with that older sister of hers. Selene was taken by the Mages of Moonshade when a mere child.\"");
					say("\"Lydia was so happy when her sister visited last month, after all these years. The two were inseparable.\"");
					say("\"Selene must have ensorcelled her! How else could one explain how Lydia would commit the dishonorable crime of poisoning a stranger?\"");
				}
				var0008 = Func09AE(var0008);
				fallthrough;

			case "Wolves" (remove):
				say("\"The Wolves are known for their cunning and stealth, preferring dexterity over brute strength. Brendann is their leader.\"");
				say("\"About whom dost thou wish to inquire?\"");
				UI_push_answers();
				var0009 = 0x0003;
				add(["Brendann", "Lucilla", "Renfry", "Krayg", "Cellia", "Shmed", "nothing more"]);
				fallthrough;

			case "Brendann" (remove):
				say("\"Brendann is the leader of the Wolf Command. He is a cunning fighter, a clever strategist and a bit of a rogue. He considers himself to be a ladies' man, and not without justification.\"");
				var0008 = Func09AE(var0008);
				fallthrough;

			case "Lucilla" (remove):
				say("\"Lucilla is the barmaid and the owner of the local pub. To tell thee the truth, she is also the town flirt. I do not mean to be catty. She doth have a good heart.\"");
				var0008 = Func09AE(var0008);
				fallthrough;

			case "Renfry" (remove):
				say("\"He is a most unusual person. Renfry operates the Crematorium and is the undertaker of the town. He is a pleasant enough fellow, but he doth enjoy his work too much.\"");
				var0008 = Func09AE(var0008);
				fallthrough;

			case "Krayg" (remove):
				say("\"Krayg was a fighter, but his arm was mangled in battle a while ago. He is now the Provisioner of the town. He is still haunted by his fighting days. He doth go for long walks alone.\"");
				var0008 = Func09AE(var0008);
				fallthrough;

			case "Cellia" (remove):
				say("\"Cellia is the furrier, tanner and tailor of the city of Monitor. She buys her fur from a trapper who passes through town on occasion. Cellia is a hard-working, earthy woman.\"");
				var0008 = Func09AE(var0008);
				fallthrough;

			case "Shmed" (remove):
				if (SHMED->get_item_flag(DEAD)) {
					say("\"They say that Shmed was the traitor who sold our secrets to the Goblins.\"");
					say("\"Mine heart tells me that they were wrong. Shmed was a coward, a fool, and a reprobate -- but not a traitor.\"");
				} else {
					say("\"Shmed hath retired early from his career as a soldier and now operates the Knight's Test -- \"");
					say("\"The dungeon where would-be knights test themselves. He is a good man for that job.\"");
				}
				var0008 = Func09AE(var0008);
				fallthrough;

			case "Leopards" (remove):
				say("\"The Leopards are the glue which holds this community together. We keep the Bears and Wolves from tearing each other apart.\"");
				say("\"About whom dost thou wish to know?\"");
				UI_push_answers();
				var0009 = 0x0003;
				add(["Lord Marsten", "Spektor", "Standarr", "Andral", "Shazzana", "nothing more"]);
				fallthrough;

			case "Lord Marsten" (remove):
				if (gflags[PROVED_MARSTEN_IS_TRAITOR]) {
					say("\"I am ashamed that he is a Leopard! I hope that he doth rot in jail for a very long time!\"");
				} else {
					say("\"Marsten is the commander of the Leopard Command. He may be a bit small, but a more tenacious fighter thou shalt not find in the Serpent Isle. He is rough and tough, but gregarious.\"");
				}
				var0008 = Func09AE(var0008);
				fallthrough;

			case "Spektor" (remove):
				if (!gflags[PROVED_SPEKTOR_IS_TRAITOR]) {
					say("\"A very intelligent man who is part of the Leopard Command. He is the town's treasurer and I understand he doth have quite a collection of books at his house.\"");
					say("\"He suffers from insomnia a great deal, and doth have a nervous digestion. When he cannot sleep, he comes to me and I make him a special elixir.\"");
					say("\"I think he is worried about the thief. After all, Spektor is the town treasurer, so when money starts disappearing, everyone suspects him.\"");
				} else {
					say("\"I am glad that traitor Spektor hath been arrested!\"");
				}
				gflags[KNOW_OF_MONITOR_THIEF] = true;
				var0008 = Func09AE(var0008);
				fallthrough;

			case "Standarr" (remove):
				say("\"Standarr is the armourer and blacksmith of our town. He is an honorable fighter and skilled craftsman. He also sells weapons and armour.\"");
				var0008 = Func09AE(var0008);
				fallthrough;

			case "Andral" (remove):
				say("\"Andral is not a fighter, which is a good thing since as I hear that he was miserable at it. Instead, he is an artist. Many of the knights hire him to create statues of them.\"");
				var0008 = Func09AE(var0008);
				fallthrough;

			case "Shazzana" (remove):
				say("\"Shazzana is a trainer in the fighting arts and also a knight of the Leopard Command. It is said that one day she may very well become a Champion Knight of Monitor, which would suit her fine!\"");
				var0008 = Func09AE(var0008);
				fallthrough;

			case "visitors" (remove):
				if (gflags[GOBLIN_SIMON_DEAD]) {
					say("\"I doubt that we shall have as many visitors as memorable as thou art come through town for quite a while!\"");
				} else {
					say("\"I cannot keep track of all who come and go in this place. Thou shouldst talk to Simon, he is the innkeeper here.\"");
					if (!gflags[IOLO_MADE_EQUIPMENT_LIST]) {
						say("\"Visitors who do not reside in our inn can usually be found in our prison. For instance, a mad enchanter who was captured in the crematorium recently. Marsten will know more than I about him.\"");
					}
					var0008 = Func09AE(var0008);
				}
				fallthrough;

			case "places":
				say("\"Of which type of place wouldst thou have me tell?\"");
				UI_push_answers();
				var0009 = 0x0002;
				add(["cities", "wilderness"]);
				fallthrough;

			case "cities" (remove):
				say("\"There are three cities in the Serpent Isles, and a small hamlet. Of which can I tell thee?\"");
				UI_push_answers();
				var0009 = 0x0003;
				add(["Moonshade", "Fawn", "Sleeping Bull", "Monitor", "nothing more"]);
				fallthrough;

			case "Moonshade" (remove):
				say("\"Moonshade is a city filled with mages who look down on any who are inexperienced in the ways of magic. Moonshade is ruled by a MageLord and a council of sorcerors. It is an excellent place to learn magic, however.\"");
				var0008 = Func09AE(var0008);
				fallthrough;

			case "Fawn" (remove):
				say("\"Fawn is a city of sailors. As thou canst well imagine these teleport storms have grievously harmed their livelihood. Fawn is also a city that worships beauty.\"");
				var0008 = Func09AE(var0008);
				fallthrough;

			case "Sleeping Bull" (remove):
				say("\"This is an inn along the Serpent Highway. It is said that one could obtain passage on ships from there.\"");
				var0008 = Func09AE(var0008);
				fallthrough;

			case "Monitor" (remove):
				say("\"Why, it is the city thou dost find thyself in now! It is a city of fighters and knights. Here in Monitor is where the Pikemen that protect the highway are trained.\"");
				var0008 = Func09AE(var0008);
				fallthrough;

			case "wilderness" (remove):
				say("\"The wilderness is the place in which a warrior can test himself against fearsome beasts and challenges of nature. Of which place wouldst thou learn?\"");
				UI_push_answers();
				var0009 = 0x0003;
				add(["Furnace", "Gorlab Swamp", "Great Northern Forest", "nothing more"]);
				fallthrough;

			case "Furnace" (remove):
				say("\"This is a dungeon located to the east of here that is said to be so hot that humans cannot survive within its cavernous depths.\"");
				var0008 = Func09AE(var0008);
				fallthrough;

			case "Gorlab Swamp" (remove):
				say("\"Follow the Serpent Road north and thou shalt come to it. But thou mayest not return.\"");
				var0008 = Func09AE(var0008);
				fallthrough;

			case "Great Northern Forest" (remove):
				say("\"It is said that this forest lies beyond the swamp, but we have precious little contact with the people there.\"");
				var0008 = Func09AE(var0008);
				fallthrough;

			case "strange objects":
				var0009 += 0x0001;
				remove("strange objects");
				var000B = [];
				if (gflags[STORM_PINECONE] && (!gflags[KNOWS_PINECONE_OWNER])) {
					var000B &= "pinecone";
				}
				if (gflags[STORM_STOCKINGS] && (!gflags[KNOWS_MOONSILK_OWNER])) {
					var000B &= "moonsilk stockings";
				}
				if (gflags[STORM_URN] && (!gflags[KNOWS_URN_ORIGIN])) {
					var000B &= "urn";
				}
				if (gflags[STORM_LAB_APPARATUS] && (!gflags[KNOWS_LAB_APPARATUS_OWNER])) {
					var000B &= "apparatus";
				}
				if (gflags[STORM_PUMICE] && (!gflags[KNOWS_PUMICE_ORIGIN])) {
					var000B &= "pumice";
				}
				if (gflags[STORM_WEDDING_RING] && (!gflags[KNOWS_RING_OWNER])) {
					var000B &= "lost ring";
				}
				if (gflags[STORM_FUR_CAP] && (!gflags[KNOWS_FUR_CAP_OWNER])) {
					var000B &= "fur cap";
				}
				if (gflags[STORM_SLIPPERS] && (!gflags[KNOWS_SLIPPERS_OWNER])) {
					var000B &= "slippers";
				}
				if (gflags[STORM_BREAST_PLATE] && (!gflags[KNOWS_BREAST_PLATE_OWNER])) {
					var000B &= "breastplate";
				}
				if (gflags[STORM_BLUE_EGG] && (!gflags[KNOWS_BLUE_EGG_OWNER])) {
					var000B &= "blue egg";
				}
				if (gflags[STORM_GOBLIN_BRUSH] && (!gflags[KNOWS_GOBLIN_BRUSH_ORIGIN])) {
					var000B &= "strange hairbrush";
				}
				if (gflags[STORM_ICEWINE] && (!gflags[KNOWS_ICEWINE_ORIGIN])) {
					var000B &= "bottle of wine";
				}
				if (gflags[STORM_FILARI] && (!gflags[KNOWS_FILARI_OWNER])) {
					var000B &= "strange coins";
				}
				if (gflags[STORM_BEAR_SKULL] && (!gflags[KNOWS_BEAR_SKULL_ORIGIN])) {
					var000B &= "skull";
				}
				if (gflags[STORM_SEVERED_HAND] && (!gflags[KNOWS_SEVERED_HAND_OWNER])) {
					var000B &= "bloody hand";
				}
				if (gflags[STORM_MONITOR_SHIELD] && (!gflags[KNOWS_MONITOR_SHIELD_ORIGIN])) {
					var000B &= "plain shield";
				}
				if (gflags[STORM_RUDDY_ROCK] && (!gflags[KNOWS_STONEHEART_ORIGIN])) {
					var000B &= "glowing rock";
				}
				if (gflags[STORM_FISHNET_STOCKINGS] && (!gflags[KNOWS_FISHNET_STOCKINGS_ORIGIN])) {
					var000B &= "fish-net stockings";
				}
				if (gflags[FOUND_BROWN_BOTTLE] && (SIMON->get_schedule_type() != WAIT)) {
					var000B &= "brown bottle";
				}
				if (var000B == []) {
					var000A = Func0992(0x0001, (("@But we have no strange objects to ask about, " + var0002) + ".@"), 0x0000, false);
					0x0000->set_conversation_slot();
					say("\"I do not think I can assist thee, but if I think of anything, I will let thee know!\"");
				} else {
					say("\"What sort of items art thou inquiring about?\"");
					UI_push_answers();
					var000C = 0x0005;
					while (var000C > 0x0000) {
						var000D = var000B[UI_get_random(UI_get_array_size(var000B))];
						var000B = Func0988(var000D, var000B);
						if (var000B == []) {
							var000C = 0x0000;
							var000E = true;
						}
						add(var000D);
						var000C -= 0x0001;
					}
					add("nothing more");
				}
				fallthrough;

			case "pinecone" (remove):
				if (Func097D(PARTY, 0x0001, 0x0108, QUALITY_ANY, FRAME_ANY)) {
					say("\"'Tis a pinecone! They are not normally found anywhere near here. They come from pine trees in the great forests to the north.\"");
				} else {
					say("\"It sounds as though thou art describing a pinecone. They come from trees far to the north of here.\"");
				}
				var0008 = Func09AE(var0008);
				if (!var000E) {
					var000D = var000B[UI_get_random(UI_get_array_size(var000B))];
					var000B = Func0988(var000D, var000B);
					if (var000B == []) {
						var000E = true;
					}
					add(var000D);
				}
				fallthrough;

			case "moonsilk stockings" (remove):
				if (Func097D(PARTY, 0x0001, 0x02A5, QUALITY_ANY, 0x0000)) {
					say("\"My, those are fine stockings! Being a simple woman I could never wear such things -- nor would most of the women of Monitor, for they are Knights!\"");
					say("\"Perhaps thou shouldst speak with Brendann. He hath had the most -- ahem -- experience with women from outside the town.\"");
					gflags[ASK_BRENDANN_ABOUT_STOCKINGS] = true;
				} else {
					say("\"Oh, I know nothing of such frills. But Brendann would be well familiar with how to remove them from a woman.\"");
				}
				var0008 = Func09AE(var0008);
				if (!var000E) {
					var000D = var000B[UI_get_random(UI_get_array_size(var000B))];
					var000B = Func0988(var000D, var000B);
					if (var000B == []) {
						var000E = true;
					}
					add(var000D);
				}
				fallthrough;

			case "urn" (remove):
				if (Func097D(PARTY, 0x0001, 0x0392, QUALITY_ANY, 0x0000)) {
					say("\"Why, that looks to be a funeral urn. In our city, it is our custom to burn our dead, and keep their remains in such urns.\"");
					gflags[KNOWS_URN_ORIGIN] = true;
				} else {
					say("\"It sounds like the object thou art describing may be a funeral urn.\"");
				}
				say("\"I wonder... Caladin hath been angry because the ashes of his grandfather were missing. Perhaps that is what that urn contains.\"");
				gflags[ASK_CALADIN_ABOUT_URN] = true;
				var0008 = Func09AE(var0008);
				if (!var000E) {
					var000D = var000B[UI_get_random(UI_get_array_size(var000B))];
					var000B = Func0988(var000D, var000B);
					if (var000B == []) {
						var000E = true;
					}
					add(var000D);
				}
				fallthrough;

			case "apparatus" (remove):
				if (Func097D(PARTY, 0x0001, 0x02ED, QUALITY_ANY, 0x0001)) {
					say("\"That strange apparatus doth look like nothing I have ever seen before! Could it be some kind of statue, or mayhaps a magical implement?\"");
					say("\"Fawn is known for its statuary, while Moonshade is the City of Mages. Perhaps thou shouldst inquire there.\"");
				} else {
					say("\"That sounds as if it may be some sort of instrument of mages. They may know of such things in Moonshade, but not here I fear.\"");
				}
				var0008 = Func09AE(var0008);
				if (!var000E) {
					var000D = var000B[UI_get_random(UI_get_array_size(var000B))];
					var000B = Func0988(var000D, var000B);
					if (var000B == []) {
						var000E = true;
					}
					add(var000D);
				}
				fallthrough;

			case "pumice" (remove):
				if (Func097D(PARTY, 0x0001, 0x010B, QUALITY_ANY, FRAME_ANY)) {
					say("\"This type of rock is not common around here. Now if thou didst speak with Krayg, perhaps he could help thee...\"");
					say("\"He is fond of long walks, and sometimes he discovers odd rocks and plants. He brings me mandrake roots sometimes.\"");
					gflags[ASK_KRAYG_ABOUT_PUMICE] = true;
				} else {
					say("\"I do not recall having ever seen the type of rock thou hast described before. Krayg is much more familiar with the rocks and plants of this area than I am.\"");
				}
				var0008 = Func09AE(var0008);
				if (!var000E) {
					var000D = var000B[UI_get_random(UI_get_array_size(var000B))];
					var000B = Func0988(var000D, var000B);
					if (var000B == []) {
						var000E = true;
					}
					add(var000D);
				}
				fallthrough;

			case "lost ring" (remove):
				if (Func097D(PARTY, 0x0001, 0x0377, QUALITY_ANY, 0x0000)) {
					say("\"That looks to be a special ring, although it doth not appear to be magical. Lucilla is more interested in such baubles and trinkets than I. Perhaps she will be able to tell thee more.\"");
					gflags[ASK_LUCILLA_ABOUT_LOST_RING] = true;
				} else {
					say("\"It sounds as though it could be a magic ring, or most likely just an ordinary ring of betrothal. Lucilla is more interested in such things than I am.\"");
				}
				var0008 = Func09AE(var0008);
				if (!var000E) {
					var000D = var000B[UI_get_random(UI_get_array_size(var000B))];
					var000B = Func0988(var000D, var000B);
					if (var000B == []) {
						var000E = true;
					}
					add(var000D);
				}
				fallthrough;

			case "fur cap" (remove):
				if (Func097D(PARTY, 0x0001, 0x03EC, QUALITY_ANY, 0x0004)) {
					say("\"Cellia here in town is a tanner and a furrier. This hat looks like it could be her work.\"");
					gflags[ASK_CELLIA_ABOUT_FUR_CAP] = true;
				} else {
					say("\"Cellia is the tanner and furrier in town. I know nothing of such things.\"");
				}
				var0008 = Func09AE(var0008);
				if (!var000E) {
					var000D = var000B[UI_get_random(UI_get_array_size(var000B))];
					var000B = Func0988(var000D, var000B);
					if (var000B == []) {
						var000E = true;
					}
					add(var000D);
				}
				fallthrough;

			case "slippers" (remove):
				if (Func097D(PARTY, 0x0001, 0x024B, QUALITY_ANY, 0x0005)) {
					say("\"Surely, these belong to no one in this city. Krayg the provisioner might know who would sell something like these slippers.\"");
					gflags[ASK_KRAYG_ABOUT_SLIPPERS] = true;
				} else {
					say("\"Perhaps thou mayest buy such things from Krayg, our town's provisioner. But I doubt that even he would carry such footwear.\"");
				}
				var0008 = Func09AE(var0008);
				if (!var000E) {
					var000D = var000B[UI_get_random(UI_get_array_size(var000B))];
					var000B = Func0988(var000D, var000B);
					if (var000B == []) {
						var000E = true;
					}
					add(var000D);
				}
				fallthrough;

			case "breastplate" (remove):
				say("\"Thou shouldst ask Standarr the armourer about that.\"");
				gflags[ASK_STANDARR_ABOUT_BREASTPLATE] = true;
				var0008 = Func09AE(var0008);
				if (!var000E) {
					var000D = var000B[UI_get_random(UI_get_array_size(var000B))];
					var000B = Func0988(var000D, var000B);
					if (var000B == []) {
						var000E = true;
					}
					add(var000D);
				}
				fallthrough;

			case "blue egg" (remove):
				if (Func097D(PARTY, 0x0001, 0x0241, QUALITY_ANY, 0x0003)) {
					say("\"It appears to be an egg from some kind of bird. The shell appears to be thick, yet it is not exceedingly hard. The shell seems to be intended to protect the baby bird from the cold. I would surmise that this egg came from a bird that lives in the north.\"");
				} else {
					say("\"I once heard that the strange birds of the north lay blue eggs.\"");
				}
				var0008 = Func09AE(var0008);
				if (!var000E) {
					var000D = var000B[UI_get_random(UI_get_array_size(var000B))];
					var000B = Func0988(var000D, var000B);
					if (var000B == []) {
						var000E = true;
					}
					add(var000D);
				}
				fallthrough;

			case "strange hairbrush" (remove):
				if (Func097D(PARTY, 0x0001, 0x011D, QUALITY_ANY, 0x0006)) {
					say("\"Do not bring that thing near me! If thou dost desire to know its nature, ask of Templar...\"");
					say("\"...but never bring that object here again!\"");
					gflags[ASK_TEMPLAR_ABOUT_HAIRBRUSH] = true;
				} else {
					say("\"It sounds simply horrid. Templar may know of such things, but I do not.\"");
				}
				var0008 = Func09AE(var0008);
				if (!var000E) {
					var000D = var000B[UI_get_random(UI_get_array_size(var000B))];
					var000B = Func0988(var000D, var000B);
					if (var000B == []) {
						var000E = true;
					}
					add(var000D);
				}
				fallthrough;

			case "bottle of wine" (remove):
				if (!gflags[GOBLIN_SIMON_DEAD]) {
					say("\"Simon is the barkeep at the inn. He knows more than anyone in town about exotic beverages.\"");
					gflags[ASK_SIMON_ABOUT_STRANGE_WINE] = true;
				} else {
					say("\"I know of no one that could help thee with this. I know nothing of beverages. Perhaps Lucilla knows something...\"");
				}
				var0008 = Func09AE(var0008);
				if (!var000E) {
					var000D = var000B[UI_get_random(UI_get_array_size(var000B))];
					var000B = Func0988(var000D, var000B);
					if (var000B == []) {
						var000E = true;
					}
					add(var000D);
				}
				fallthrough;

			case "strange coins":
				if (Func097D(PARTY, 0x0001, 0x03B4, QUALITY_ANY, FRAME_ANY)) {
					say("\"They appear to be coins from another town. Spektor would recognize them, I am certain.\"");
					say("\"He is the town treasurer, and exchanges foreign coins for the good coins of Monitor.\"");
					gflags[ASK_SPEKTOR_ABOUT_STRANGE_COINS] = true;
				} else {
					say("\"Spektor the treasurer is the expert on currency in the town of Monitor.\"");
				}
				var0008 = Func09AE(var0008);
				if (!var000E) {
					var000D = var000B[UI_get_random(UI_get_array_size(var000B))];
					var000B = Func0988(var000D, var000B);
					if (var000B == []) {
						var000E = true;
					}
					add(var000D);
				}
				fallthrough;

			case "skull" (remove):
				if (Func097D(PARTY, 0x0001, 0x00F4, QUALITY_ANY, FRAME_ANY)) {
					say("\"That is a bear skull. Bears are commonly found in the south and west portions of our land.\"");
					gflags[KNOWS_BEAR_SKULL_ORIGIN] = true;
				} else {
					say("\"It sounds like thou art describing a bear skull. Bears are usually found in the south and west.\"");
				}
				var0008 = Func09AE(var0008);
				if (!var000E) {
					var000D = var000B[UI_get_random(UI_get_array_size(var000B))];
					var000B = Func0988(var000D, var000B);
					if (var000B == []) {
						var000E = true;
					}
					add(var000D);
				}
				fallthrough;

			case "bloody hand" (remove):
				if (Func097D(PARTY, 0x0001, 0x031A, QUALITY_ANY, 0x0000)) {
					say("\"It seems it was lost on the field of battle, so whoever lost it probably did not survive. Yet there are no signs of decay -- a recent injury...\"");
					say("\"Thou mightest ask Renfry if he hath encountered a body with such an injury lately.\"");
					gflags[ASK_RENFRY_ABOUT_HAND] = true;
				} else {
					say("\"What a puzzling mystery! Thou shouldst ask Renfry, our undertaker, about it.\"");
				}
				var0008 = Func09AE(var0008);
				if (!var000E) {
					var000D = var000B[UI_get_random(UI_get_array_size(var000B))];
					var000B = Func0988(var000D, var000B);
					if (var000B == []) {
						var000E = true;
					}
					add(var000D);
				}
				fallthrough;

			case "plain shield" (remove):
				if (Func097D(PARTY, 0x0001, 0x02D9, QUALITY_ANY, FRAME_ANY)) {
					say("\"That shield could belong to anyone in this town. Green and white are the colors of Monitor and its warriors.\"");
					say("\"Thou shouldst inquire if anyone is missing a shield.\"");
				} else {
					say("\"Such a shield could belong to anyone in Monitor.\"");
				}
				var0008 = Func09AE(var0008);
				if (!var000E) {
					var000D = var000B[UI_get_random(UI_get_array_size(var000B))];
					var000B = Func0988(var000D, var000B);
					if (var000B == []) {
						var000E = true;
					}
					add(var000D);
				}
				fallthrough;

			case "glowing rock" (remove):
				if (var0001) {
					say("\"This glowing rock must have come from some strange, unnatural place. I have never seen such a rock in any sort of place near here.\"");
					say("\"I sense that it doth have unusual powers... incredible energies... hidden abilities...\"");
				} else {
					say("\"I have never before heard of such an item. It sounds as though it might possess great power.\"");
				}
				var0008 = Func09AE(var0008);
				if (!var000E) {
					var000D = var000B[UI_get_random(UI_get_array_size(var000B))];
					var000B = Func0988(var000D, var000B);
					if (var000B == []) {
						var000E = true;
					}
					add(var000D);
				}
				fallthrough;

			case "fish-net stockings" (remove):
				if (Func097D(PARTY, 0x0001, 0x02A5, QUALITY_ANY, 0x0001)) {
					say("\"There is a knight in town by the name of Brendann. He hath had more experience in removing these from ladies than I have ever had wearing them, I am afraid.\"");
					gflags[ASK_BRENDANN_ABOUT_STOCKINGS] = true;
				} else {
					say("\"Brendann is more well-acquainted with finery of ladies than a simple farm woman such as I, I am afraid.\"");
				}
				var0008 = Func09AE(var0008);
				if (!var000E) {
					var000D = var000B[UI_get_random(UI_get_array_size(var000B))];
					var000B = Func0988(var000D, var000B);
					if (var000B == []) {
						var000E = true;
					}
					add(var000D);
				}
				fallthrough;

			case "brown bottle" (remove):
				if (Func097D(PARTY, 0x0001, 0x0268, QUALITY_ANY, 0x0009)) {
					say("\"May I see the bottle?\"");
					say("\"That looks like the type of bottle that usually contains the ale Simon drinks. In Monitor, only he drinks that bitter Fawnish ale.\"");
					gflags[KNOW_BROWN_BOTTLE_IS_FAWNISH_ALE] = true;
				} else {
					say("\"How strange -- a bottle in the woods? Perhaps Templar can help thee. He is the expert on Goblins and their habits.\"");
				}
				var0008 = Func09AE(var0008);
				if (!var000E) {
					var000D = var000B[UI_get_random(UI_get_array_size(var000B))];
					var000B = Func0988(var000D, var000B);
					if (var000B == []) {
						var000E = true;
					}
					add(var000D);
				}
				fallthrough;

			case "nothing more":
				if (var0009 == 0x0001) {
					UI_pop_answers();
					say("\"I wish I could have been of more help to thee...\"");
				} else {
					while (var0009 > 0x0001) {
						UI_pop_answers();
						var0009 -= 0x0001;
					}
					say("\"Is there anything else I can help thee with?\"");
				}
				fallthrough;

			case "bye":
				if (gflags[WILL_FIND_CANTRA] && (!var0003)) {
					say("\"But wait... I feel the primal forces drawing near... I hear the voices of the Void...\"");
					say("\"I have a prophecy for thee, Avatar.\"");
					add("prophecy");
					var0003 = true;
				} else {
					UI_remove_npc_face0();
					UI_remove_npc_face1();
					Func097F(AVATAR, (("@Good " + var0000) + "!@"), 0x0000);
					Func097F(HARNNA, "@And to thee.@", 0x0002);
					abort;
				}

		}
	}
}

extern var Func0954 0x954 ();
extern var Func0994 0x994 ();
extern void Func07D1 object#(0x7D1) ();
extern void Func097F 0x97F (var var0000, var var0001, var var0002);
extern void Func07D2 object#(0x7D2) ();
extern void Func08F0 0x8F0 ();
extern var Func097D 0x97D (var var0000, var var0001, var var0002, var var0003, var var0004);
extern var Func0953 0x953 ();
extern var Func0956 0x956 (var var0000);
extern void Func0842 0x842 ();
extern void Func0843 0x843 ();
extern var Func0992 0x992 (var var0000, var var0001, var var0002, var var0003);
extern void Func097A 0x97A (var var0000);

void Func0444 object#(0x444) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;
	var var0008;
	var var0009;
	var var000A;
	var var000B;
	var var000C;
	var var000D;
	var var000E;

	var0000 = false;
	if (KRAYG->get_schedule_type() == TEND_SHOP) {
		var0000 = true;
	}
	var0001 = Func0954();
	var0002 = false;
	var0003 = false;
	if (Func0994() == 0x000D) {
		var0003 = true;
	}
	if (gflags[AVATAR_IS_KNIGHT]) {
		var0001 = "knight";
	}
	var0004 = UI_is_pc_female();
	var0005 = Func0954();
	var0006 = false;
	var0007 = false;
	var0008 = false;
	if (event == DEATH) {
		var0009 = script item {
			call Func01D0;
		};
	}
	if ((event == DOUBLECLICK) && (KRAYG->get_schedule_type() != STANDTHERE)) {
		AVATAR->item_say("@Hello, sir.@");
		KRAYG->Func07D1();
		if (var0000) {
			Func097F(KRAYG, "@Hello.@", 0x0002);
			KRAYG->set_schedule_type(STANDTHERE);
			KRAYG->Func07D2();
			var0009 = script KRAYG after 7 ticks {
				nohalt;
				call Func0444;
			};
		} else {
			Func097F(KRAYG, "@Hello.@", 0x0002);
			KRAYG->set_schedule_type(TALK);
		}
	}
	if (event == SCRIPTED) {
		event = STARTED_TALKING;
	}
	if (event == STARTED_TALKING) {
		KRAYG->run_schedule();
		KRAYG->clear_item_say();
		if (KRAYG->get_schedule_type() == TEND_SHOP) {
			var0000 = true;
		}
		KRAYG->show_npc_face0(0x0000);
		Func08F0();
		var000A = KRAYG->get_item_flag(MET);
		if (!var000A) {
			if (var0000) {
				say("\"Hello, ",
					var0001,
					". I am Krayg the Provisioner. If thou needest any goods, I can provide them at a fair price.\"");
			} else {
				say("\"Hello, ",
					var0001,
					". How can I help thee?\"");
			}
			KRAYG->set_item_flag(MET);
		} else if (gflags[AVATAR_IS_KNIGHT]) {
			say("\"Hello again, ",
				var0001,
				".\"");
		} else {
			say("\"Hello, ",
				var0001,
				".\"");
		}
		if (gflags[AVATAR_IS_KNIGHT]) {
			add("duties");
		}
		if ((!var0003) || gflags[KNOWS_KRAYG_WALKS_ON_WOODS]) {
			add("walks in the woods");
		}
		if (gflags[KNOWS_KRAYG_WALKS_ON_WOODS]) {
			add("Luther");
		}
		if (gflags[FOUND_BROWN_BOTTLE] || (gflags[ASKED_KRAYG_ABOUT_RUINS] || (gflags[ASK_KRAYG_ABOUT_SLIPPERS] || gflags[ASK_KRAYG_ABOUT_PUMICE]))) {
			add("information");
		}
		converse (["Knights", "supplies", "bye"]) {
			case "information" (remove):
				say("\"Someone hath sent thee to me, eh? Well, I shall try to be of help to thee. What dost thou inquire about?\"");
				UI_push_answers();
				if (gflags[ASK_KRAYG_ABOUT_PUMICE] && (!gflags[KNOWS_PUMICE_ORIGIN])) {
					add("pumice");
				}
				if (gflags[ASK_KRAYG_ABOUT_SLIPPERS] && (!gflags[KNOWS_SLIPPERS_OWNER])) {
					add("slippers");
				}
				if (gflags[ASKED_KRAYG_ABOUT_RUINS]) {
					add("ruins");
				}
				if (gflags[FOUND_BROWN_BOTTLE] && (SIMON->get_schedule_type() != WAIT)) {
					add("brown bottle");
				}
				add("change subject");
				fallthrough;

			case "brown bottle" (remove):
				if (Func097D(PARTY, 0x0001, 0x0268, QUALITY_ANY, 0x0009)) {
					say("\"See! I told everyone that I could not be the traitor!\"");
					say("\"I am not even a drinking man. But Luther is known to imbibe to excess...\"");
					say("\"This bottle must be his! Luther is the traitor!\"");
				} else {
					say("\"A bottle in the woods? And thou dost think that I dropped it?\"");
					var0009 = Func0953();
					say("\"Thou art wrong, ",
						var0009,
						"! Ask anyone -- they will tell thee that I am not a drinking man.\"");
					say("\"'Tis due to mine injuries. Milk is all that I can tolerate. Boiled milk.\"");
					Func097F(KRAYG, "@Leave me alone...@", 0x0000);
					abort;
				}
				fallthrough;

			case "duties" (remove):
				say("\"I run the supplies shop in Monitor, The Tools of the Trade. 'Tis not a glorious duty, but I cannot wield a sword comfortably because of my condition.\"");
				UI_push_answers();
				add(["condition", "change subject"]);
				fallthrough;

			case "condition" (remove):
				say("\"If thou dost look closely, thou canst see that mine arm is bent unnaturally at the elbow. I was wounded as a lad, in my very first battle -- the Goblins surprised us, and it was a heated battle... I was not able to obtain healing in time. Thus I was left unfit for combat.\"");
				UI_pop_answers();
				fallthrough;

			case "Luther" (remove):
				say("\"So thou art a comrade of that brute Luther, eh? I know that he is no friend of mine. He is suspicious of me for no other reason than that I happen to like to take walks in the woods!\"");
				say("\"He is merely following his leader, Caladin -- they all think the Wolves are their enemies!\"");
				if (!var0002) {
					add("walks in the woods");
				}
				fallthrough;

			case "supplies":
				if (var0000) {
					say("\"I sell many things that a warrior would require while travelling outside the city. I also buy a few goods that I need. Dost thou wish to buy or sell?\"");
					var000B = Func0956(["nothing", "buy", "sell"]);
					if (var000B == "buy") {
						Func0842();
						add("buy");
					}
					if (var000B == "sell") {
						say("\"I buy a few leather items, ",
							var0001,
							"...\"");
						say("\"But my prices are set, I'm afraid.\"");
						Func0843();
						add("sell");
					}
					if (var000B == "nothing") {
						say("\"Perhaps another time, ",
							var0001,
							".\"");
					}
				} else {
					say("\"I sell supplies when I am open, ",
						var0001,
						"!\"");
				}
				fallthrough;

			case "buy":
				Func0842();
				fallthrough;

			case "sell":
				Func0843();
				fallthrough;

			case "Knights" (remove):
				if (var0003) {
					say("\"We are all Knights in this town.\"");
				} else {
					say("\"In the City of Monitor, everyone is a Knight.\"");
				}
				if (gflags[AVATAR_IS_KNIGHT]) {
					say("\"I myself belong to the Command of the Wolf.\"");
					UI_push_answers();
					add("Commands");
					if (!var0006) {
						add("Wolf");
					}
					add(["Bear", "Leopard", "change subject"]);
				} else {
					if (var0003) {
						say("\"I must tell thee, stranger, that if thou art not a Knight, thou art nothing in this town. If thou canst not master the Test of the Knights, then it would be best for thee to move on.\"");
					} else {
						say("\"In Monitor, one is either a Knight, or one is nothing at all. Unless thou art thinking of taking the Test of the Knights, thou mightest want to avoid the City of Monitor.\"");
					}
					gflags[ASKED_SHMED_ABOUT_TEST] = true;
				}
				fallthrough;

			case "Commands" (remove):
				say("\"Thou dost not know about the Commands? All Monitorians belong to one of three Commands: the Bears, the Wolves, or the Leopards.\"");
				gflags[KNOWS_ABOUT_MONITOR_CLANS] = true;
				fallthrough;

			case "Wolf":
				say("\"It is hard to be a Knight who doth not fight well. I am useless on the battlefield, but by being Provisioner I can at least earn my keep! The Wolves have treated me well. Now if I were a Bear... well, all they can think of is Prowess.\"");
				remove("Wolf");
				var0006 = true;
				fallthrough;

			case "Bear" (remove):
				var0007 = true;
				say("\"They are brutes! All they can think of are their incessant duels. The Bears fight only for glory -- but what about the Goblins? What about bandits on the road? Caladin and his Knights are too concerned with winning glory to worry about the true battles which face us.\"");
				UI_push_answers();
				add(["Caladin", "duels", "nothing more"]);
				fallthrough;

			case "Leopard" (remove):
				if (gflags[PROVED_MARSTEN_IS_TRAITOR] == true) {
					if (gflags[TALKED_KRAYG_ABOUT_TRAITOR_MARSTEN] == false) {
						say("\"That fool Marsten is a blight upon all that the Commands stood for... I believe he hath ruined the reputation of the Leopard Command for good.\"");
					} else {
						say("\"Well, that foolish leader of the Leopards is now dead. I wonder who will replace him?\"");
					}
				} else {
					say("\"The Leopards are not as bad as everyone says they are. They keep the Bears from ruining us! Lord Marsten hath ruled well here, and he is a Leopard. He hath no favorites among the Commands.\"");
				}
				fallthrough;

			case "Caladin" (remove):
				say("\"Caladin is not a bad sort, but his mind is mired in the past. All he sees is Prowess. Can he not see that we Monitorians must stop duelling amongst ourselves, and instead turn our attention outward? Caladin thinks that the Wolves hate the Bears, but the truth is that he cannot abide the plans of our leader, Brendann.\"");
				fallthrough;

			case "duels" (remove):
				say("\"They waste too many hours at the List Fields, fighting any who will challenge them.\"");
				if (gflags[AVATAR_IS_KNIGHT]) {
					say("\"Luther is the worst! Thou didst hear him! He doth accuse me of being a traitor.\"");
				} else {
					say("\"Luther is the worst!\"");
				}
				fallthrough;

			case "walks in the woods" (remove):
				if (var0002) {
					say("\"Oh, let us not discuss this again...\"");
				} else {
					UI_push_answers();
					var0002 = true;
					if (gflags[KNOWS_KRAYG_WALKS_ON_WOODS]) {
						say("\"It pains me that simply because I have this natural tendency, others would viciously gossip that I was conspiring with our enemy. I seldom venture far while I am alone and I take exceeding care, thou canst well believe me.\"");
						add("conspiring");
					}
					say("\"I take long walks. Well, what is wrong with that, I ask thee? I especially like to visit sites of battles, looking for antique weaponry or armour.\tI collect them. I collect many things.\"");
					if (!var0008) {
						add(["battle sites"]);
					}
					add("change subject");
					if ((!gflags[KNOWS_KRAYG_WALKS_ON_WOODS]) && var0008) {
						UI_pop_answers();
					}
				}
				fallthrough;

			case "change subject", "nothing more":
				say("\"Very well...\"");
				UI_pop_answers();
				fallthrough;

			case "battle sites", "ruins":
				var0008 = true;
				remove("battle sites");
				remove("ruins");
				say("\"There must have been a great war here, in the days when the Daemons ruled the Serpent Isle. My walks have taken me deep into the most tangled woods, where I have found many mysteries -- ruins built of strange stone, artifacts made of brass, sometimes a skull or shattered weapon... and always, the Sign of the Serpent.\"");
				add("Sign of the Serpent");
				fallthrough;

			case "Sign of the Serpent" (remove):
				say("\"Hast thou not wondered why our land is known as the Serpent Isle? Everywhere our ancestors went, they found the Sign of the Serpent -- in carvings, statuettes, throughout the many ancient ruins. Monitor itself was built on the site of an ancient ruin from the times of the Serpent.\"");
				fallthrough;

			case "Goblins" (remove):
				say("\"They are an infestation! We have fought them since the moment our ancestors set foot on this island. We must destroy them if we are ever to be safe, but we cannot do this unless the Bears and Leopards are willing to listen to Brendann. We must track them to their village lair and slay them. And if a traitor doth exist, then we are doomed from the start...\"");
				fallthrough;

			case "conspiring" (remove):
				say("\"Dost thou accuse me? I am an innocent man, and soon I shall present evidence of that fact! I have reasons of mine own to believe that someone among us is selling our secrets to the Goblins.\"");
				UI_push_answers();
				add(["reasons of mine own", "evidence", "nothing more"]);
				fallthrough;

			case "reasons of mine own" (remove):
				say("\"There is someone else who takes long walks in the woods. I have never seen him clearly. He is very clever, and always dashes away into the forest before I can identify him.\"");
				var000C = Func0992(DUPRE, "@But was he Goblin or Man?@", 0x0000, false);
				if (var000C != AVATAR) {
					UI_remove_npc_face1();
					0x0000->set_conversation_slot();
					say("\"He was not Goblin! They never travel in the woods except in war parties. Yet there was something in his gait that was not entirely Man-like, either.\"");
				} else {
					say("\"He could not have been Goblin, for they never walk in the woods alone. Therefore... I think he must have been the Monitorian traitor!\"");
				}
				fallthrough;

			case "evidence" (remove):
				say("\"Listen to this -- if there is a traitor, he must meet with the Goblins somewhere. I know of a place where the Goblins often gather. Perhaps I can find evidence there of who the traitor is. But of late, there have been too many Goblin patrols near the rendezvous. I have been unable to reach the place undetected.\"");
				add(["patrols", "rendezvous"]);
				fallthrough;

			case "patrols" (remove):
				say("\"The Goblins have been thick in the woods north of Knight's Test for weeks now. They have been emboldened ever since they overran the guardtower west of Fawn. That is where they slew Astrid, the bastards!\"");
				fallthrough;

			case "rendezvous" (remove):
				say("\"The place is easy to find, for the Goblins are attracted to the ancient ruins of this Isle. In the midst of the great cypress woods north of Knight's Test, look for a strange black obelisk. This is the gathering place of the Goblin war parties, before they strike south.\"");
				gflags[KNOWS_GOBLINS_HIDEOUT] = true;
				fallthrough;

			case "pumice" (remove):
				say("\"I recognize thy description! Such rocks doth come from the depths of the earth, where lava flows free and deadly gasses abound. Standarr the Blacksmith hath been to places such as these, on his Quests of Courage -- thou mightest acquire more information from him.\"");
				gflags[KNOWS_PUMICE_ORIGIN] = true;
				gflags[ASKED_STANDARR_ABOUT_QUESTS] = true;
				fallthrough;

			case "slippers" (remove):
				say("\"The nearest place where decorative footwear like that would be worn is Sleeping Bull. Certainly, no one in Monitor would be caught dead wearing them!\"");
				fallthrough;

			case "bye":
				UI_remove_npc_face0();
				Func097F(AVATAR, "@Must go now!@", 0x0000);
				Func097F(KRAYG, "@Walk in Courage!@", 0x0002);
				break;
		}
	}
	if (event == PROXIMITY) {
		var000D = UI_die_roll(0x0001, 0x0005);
		if (var0000) {
			if (var000D == 0x0001) {
				var000E = "@Supplies?@";
			}
			if (var000D == 0x0002) {
				var000E = "@Leather boots?@";
			}
			if (var000D == 0x0003) {
				var000E = "@Finest goods here!@";
			}
			if (var000D == 0x0004) {
				var000E = "@Best goods in Monitor!@";
			}
			if (var000D == 0x0005) {
				var000E = "@Bedroll?@";
			}
			KRAYG->item_say(var000E);
		} else {
			Func097A(KRAYG);
		}
	}
}

extern var Func0954 0x954 ();
extern var Func0953 0x953 ();
extern var Func09A0 0x9A0 (var var0000, var var0001);
extern void Func09AC 0x9AC (var var0000, var var0001, var var0002, var var0003);
extern void Func07D1 object#(0x7D1) ();
extern void Func097F 0x97F (var var0000, var var0001, var var0002);
extern void Func07D2 object#(0x7D2) ();
extern void Func094E 0x94E (var var0000, var var0001);
extern var Func097D 0x97D (var var0000, var var0001, var var0002, var var0003, var var0004);
extern var Func0956 0x956 (var var0000);
extern void Func084A 0x84A ();
extern var Func0992 0x992 (var var0000, var var0001, var var0002, var var0003);
extern var Func0955 0x955 ();
extern var Func099B 0x99B (var var0000, var var0001, var var0002, var var0003, var var0004, var var0005, var var0006);
extern var Func0988 0x988 (var var0000, var var0001);

void Func0445 object#(0x445) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;
	var var0008;
	var var0009;
	var var000A;
	var var000B;
	var var000C;
	var var000D;
	var var000E;
	var var000F;
	var var0010;
	var var0011;
	var var0012;
	var var0013;
	var var0014;
	var var0015;
	var var0016;
	var var0017;
	var var0018;
	var var0019;
	var var001A;
	var var001B;
	var var001C;

	var0000 = Func0954();
	var0001 = Func0953();
	var0002 = MARSTEN->get_item_flag(MET);
	var0003 = "I serve Lord British";
	var0004 = false;
	var0005 = false;
	var0006 = false;
	var0007 = "He is my friend";
	var0008 = false;
	var0009 = IOLO->get_item_flag(IN_PARTY);
	var000A = SHAMINO->get_item_flag(IN_PARTY);
	var000B = DUPRE->get_item_flag(IN_PARTY);
	var000C = SIMON->is_dead();
	var000D = "he";
	if (UI_is_pc_female()) {
		var000D = "she";
	}
	if (event == SCRIPTED) {
		if (gflags[PROVED_MARSTEN_IS_TRAITOR]) {
			MARSTEN->run_schedule();
			// I see no way other than this
			goto labelFunc0445_0257;
		} else {
			if (gflags[DUPRE_MADE_EQUIPMENT_LIST]) {
				abort;
			}
			var000E = script Func09A0(0x0005, 0x0001) after 200 ticks {
				nohalt;
				call Func0445;
			};
			if (!DUPRE->npc_nearby()) {
				var000E = DUPRE->approach_avatar(0x0064, 0x0028);
				if (var000E) {
					var000F = DUPRE->get_object_position();
					var0010 = UI_create_new_object2(0x00E4, [(var000F[0x0001] + 0x0001), (var000F[0x0002] - 0x0001), var000F[0x0003]]);
					var0011 = UI_create_new_object2(0x00E4, [(var000F[0x0001] - 0x0001), (var000F[0x0002] - 0x0001), var000F[0x0003]]);
					var0010->set_alignment(NEUTRAL);
					var0011->set_alignment(NEUTRAL);
					var0010->set_schedule_type(TALK);
					var0011->set_schedule_type(TALK);
					var0010->set_npc_id(0x000D);
					var0011->set_npc_id(0x000D);
				}
				Func09AC(DUPRE, -1, 0, TALK);
				DUPRE->set_schedule_type(TALK);
			}
			abort;
		}
	}
	if ((event == DEATH) && MARSTEN->get_item_flag(SI_TOURNAMENT)) {
		if (gflags[KNOW_MARSTEN_IS_TRAITOR]) {
			MARSTEN->show_npc_face0(0x0000);
			say("\"Thou hast ruined everything! With the current emotional and spiritual state of the city, the Goblins are certain to win this war against us!\"");
			say("\"The problem lies with the Bears and Wolves -- their bickering weakens us. So I had a plan! The Leopards would rule, and I would be King.\"");
			say("\"And with the miracle weapons in our hidden arsenal, not even the Goblins could have taken this city...\"");
			MARSTEN->clear_item_flag(SI_TOURNAMENT);
			MARSTEN->reduce_health(0x0032, NORMAL_DAMAGE);
			abort;
		}
		var000E = script item {
			nohalt;
			call Func01D0;
		};
	}
	if (event == DOUBLECLICK) {
		AVATAR->item_say("@Greetings, sir.@");
		MARSTEN->Func07D1();
		if (gflags[PROVED_MARSTEN_IS_TRAITOR]) {
			MARSTEN->set_schedule_type(WAIT);
			Func097F(MARSTEN, "@What!@", 0x0002);
			MARSTEN->Func07D2();
			var000E = script MARSTEN after 7 ticks {
				nohalt;
				call Func0445;
			};
			abort;
		}
		Func097F(MARSTEN, "@Hello.@", 0x0002);
		MARSTEN->set_schedule_type(TALK);
	}
	if (event == STARTED_TALKING) {
		MARSTEN->run_schedule();
labelFunc0445_0257:
		MARSTEN->clear_item_say();
		MARSTEN->show_npc_face0(0x0000);
		do {
			if (!var0002) {
				var000E = [BRENDANN, CALADIN, RENFRY, SPEKTOR, MARSTEN];
				for (var0014 in var000E with var0012 to var0013) {
					var0014->revert_schedule();
				}
				say("\"Greetings, stranger. I am Lord Marsten. Thou hast come to this city at a grievous hour. We are here to entomb the ashes of this brave Pikeman Groat, as well as to mourn the loss of our Knight Champion.\"");
				MARSTEN->set_item_flag(MET);
				Func094E(CALADIN, "@Astrid was the finest Knight that Monitor ever had!@");
				UI_remove_npc_face1();
				0x0000->set_conversation_slot();
				say("\"The Goblins ambushed her patrol. They slew all but one of the Pikemen, and took Astrid's body back to their camp -- to be feasted upon and used to make their sickening trophies, no doubt! When the reinforcements came, they were mere moments too late. They managed to rescue Groat but his injuries were too severe. Not even our healer Harnna could save him.\"");
				Func094E(BRENDANN, "@Damn the Goblins! They should be exterminated...@");
				UI_remove_npc_face1();
				0x0000->set_conversation_slot();
				say("\"What business dost thou have with me, stranger?\"");
				add(["Astrid", "Knight Champion"]);
			} else if (gflags[TOLD_MARSTEN_SERVES_LORD_BRITISH] && (!gflags[RENOUNCED_BRITISH])) {
				say("\"Oh, art thou bothering me again! No servant of Beast British is welcome here.\"");
				add(["I renounce Lord British", "I serve Lord British"]);
				break;
			} else if (gflags[PROVED_MARSTEN_IS_TRAITOR]) {
				say("\"Didst thou come to ask me why I did betray my city? Ha! Any idiot can see the reason. With the current emotional and spiritual state of the city, the Goblins are certain to win this war against us! The foolish Bears and the cowardly Wolves are weakening us! They needed to be turned against each other so that the Leopard Command could assume their rightful leadership of Monitor. I had even devised a secret weapon to defend the city without the Bears or Wolves.\"");
				add(["foolish Bears", "cowardly Wolves", "secret weapon"]);
				break;
			} else if (gflags[AVATAR_IS_KNIGHT]) {
				say("\"'Tis a pleasure to see thee, Knight ",
					var0001,
					". As the Lord of Monitor, I am always at thy service.\"");
			} else {
				say("\"Greetings, ",
					var0001,
					". What is thy business with me?\"");
			}
			add(["duties", "Goblins"]);
			if (gflags[AVATAR_IS_KNIGHT]) {
				add("traitor");
			}
			if (gflags[KNOWS_MARSTEN_GIVES_PERMISSION] && (!gflags[LORD_MARSTEN_GAVE_PERMISSION])) {
				add("ask permission");
			}
			if (gflags[SLAIN_WOLF] && (!gflags[AVATAR_IS_KNIGHT])) {
				add("Knighthood");
			}
			if (gflags[CAN_ACCUSE_MARSTEN] && (!gflags[PROVED_MARSTEN_IS_TRAITOR])) {
				add("accuse");
			}
			if (gflags[KNOWS_IOLO_IMPRISONED] && (!gflags[IOLO_MADE_EQUIPMENT_LIST])) {
				add("enchanter");
			}
			if ((MARSTEN->get_schedule_type() == TEND_SHOP) && (!gflags[PROVED_MARSTEN_IS_TRAITOR])) {
				add("Hall of Monitor");
			}
			if (gflags[FOUND_BROWN_BOTTLE] && (SIMON->get_schedule_type() != WAIT)) {
				add("brown bottle");
			}
		} while (false);
		converse ("bye") {
			case "brown bottle" (remove):
				if (Func097D(PARTY, 0x0001, 0x0268, QUALITY_ANY, 0x0009)) {
					say("\"Leave me with that dirty bottle! It doth look to have been lying in the woods for weeks...\"");
					Func097F(MARSTEN, "@'Sblood!@", 0x0000);
					abort;
				}
				say("\"I care not what thou didst find in the woods. 'Tis probably Goblin loot.\"");
				say("\"There is no traitor in Monitor. Search thou not for evidence, for thou shalt not find it. Instead, help us to eradicate the Goblins!\"");
				fallthrough;

			case "I renounce Lord British":
				remove(["I renounce Lord British", "I serve Lord British"]);
				say("\"Yes? Thou dost wish to say something to me?\"");
				AVATAR->show_npc_face1(0x0000);
				0x0001->set_conversation_slot();
				say("\"I renounce Lord British and everything for which he stands. From this moment forward, I am his friend and servant no longer.\"");
				UI_remove_npc_face1();
				if (var0009) {
					IOLO->show_npc_face1(0x0000);
					0x0001->set_conversation_slot();
					say("\"Avatar! I cannot believe thy words!\"");
					UI_remove_npc_face1();
				}
				if (var000A) {
					SHAMINO->show_npc_face1(0x0000);
					0x0001->set_conversation_slot();
					say("\"How could thee renounce thy rightful liege?\"");
					UI_remove_npc_face1();
				}
				if (var000B) {
					DUPRE->show_npc_face1(0x0000);
					0x0001->set_conversation_slot();
					say("\"Very well, Avatar. Do what thou must.\"");
				}
				0x0000->set_conversation_slot();
				say("\"Thou must feel better to have purged thyself of that burden. Thou wilt now be accepted by all of Monitor.\"");
				say("\"Who doth know? Perhaps one day thou couldst become a true knight of Monitor. But only if thou passest the Test of Knighthood.\"");
				add("Test of Knighthood");
				gflags[RENOUNCED_BRITISH] = true;
				fallthrough;

			case "I serve Lord British":
				say("\"Away with thee, foul servant of the Beast!\" ~\"Renounce thine allegiance with that cruel tyrant or feel a halberd in thy back as the pikemen escort thee from our fine town!\"");
				abort;

			case "Astrid" (remove):
				say("\"Canst thou imagine the horrors of being devoured alive?! She was a masterful warrior, and deserved a finer death than this...\"");
				if (!gflags[FIRST_TALK_WITH_MARSTEN]) {
					Func094E(BRENDANN, "@Understand, stranger, that Marsten and this woman\twere bedmates.@");
					0x0000->set_conversation_slot();
					add("bedmates");
				}
				say("\"There is none to replace her, and certainly none able to reclaim the Helm of Monitor from the Goblins.\"");
				add("Helm of Monitor");
				fallthrough;

			case "Helm of Monitor" (remove):
				say("\"'Tis a sacred item once belonging to the Goblins. It was what gave their ancient leader, Gurnordir, the power to build the Goblin Horde.\"");
				say("\"When our forefathers killed Gurnordir, the Helm was claimed for Monitor. It hath since been worn by the Knight Champion.\"");
				add("Gurnordir");
				if (!var0008) {
					add("Knight Champion");
				}
				if (!GOBLIN_KING->get_item_flag(DEAD)) {
					say("\"We need to reclaim it! Else, the Goblins shall again build their Horde and invade this great city.\"");
					add("raid the Goblins");
				}
				fallthrough;

			case "Gurnordir" (remove):
				say("\"If thou dost wish to learn more of this evil race and its history, speak to Templar. He is an expert on the subject.\"");
				gflags[ASKED_TEMPLAR_ABOUT_GOBLINS] = true;
				fallthrough;

			case "raid the Goblins" (remove):
				if (gflags[AVATAR_IS_KNIGHT]) {
					say("\"We must smash the Goblins! Their chieftain must be slain, the Helm recovered, and their village pillaged.\"");
					if (gflags[GOBLIN_SIMON_DEAD]) {
						say("\"Certainly, thou didst force that cretin Simon to give thee some clue before his execution!\"");
						say("\"The Goblins shall be defenseless if thou dost strike now. Take only thy companions, and surprise them, for a larger force would be seen by their scouts.\"");
						say("\"Go now, and regain the Helm!\"");
					} else {
						say("\"But no one knows where the Goblin village lies. 'Tis an evil mystery...\"");
					}
				} else {
					say("\"I see no reason to discuss this matter with someone who is not even a Knight.\"");
				}
				fallthrough;

			case "bedmates" (remove):
				say("\"Yes, Astrid and I were bedmates. I will not say we were lovers. For we were also warriors and comrades in arms. And we knew that any time either one of us took the battlefield might have been the last time we could have seen each other. I loved her, but we were not in love. I shall always remember her.\"");
				BRENDANN->show_npc_face1(0x0000);
				say("\"As shall I....\"");
				UI_remove_npc_face1();
				0x0000->set_conversation_slot();
				say("\"What was that thou saidest, Brendann!\"");
				BRENDANN->show_npc_face1(0x0000);
				say("\"What??! Oh, nothing, merely mentioning that we shall all miss her presence. She was a fine warrior.\"");
				UI_remove_npc_face1();
				0x0000->set_conversation_slot();
				fallthrough;

			case "Goblins" (remove):
				say("\"I vow to war upon them until the end of the world! There shall be no end to my vengeance upon the Goblins.\"");
				say("\"They have robbed, pillaged, and murdered our people since our ancestors came here centuries ago. They delight in kidnapping our women and eating them alive!\"");
				say("\"In the end, 'tis either Men or Goblins -- both of us cannot dwell here.\"");
				add("ancestors");
				fallthrough;

			case "ancestors" (remove):
				say("\"Our people fled from their homeland when an evil tyrant united the kingdoms, and sought to force his philosophy upon them.\"");
				say("\"So we set sail from Sosaria, and -- led beyond the Serpent Pillars by a mage named Erstam -- we came to the Serpent Isle.\"");
				say("\"This land was deserted then, settled only by Goblins and covered with the ruins of a mysterious ancient Serpentine civilization.\"");
				UI_push_answers();
				add(["tyrant", "Sosaria", "ruins", "Erstam", "change subject"]);
				fallthrough;

			case "tyrant" (remove):
				if ((gflags[RENOUNCED_BRITISH] == false) && (gflags[TOLD_MARSTEN_SERVES_LORD_BRITISH] == false)) {
					say("\"He was an evil man, and Knight and Mage alike rebelled against his tyranny. So our ancestors fled here, and founded the Three Cities.\"");
					say("\"British was his name. Lord British, he called himself. But we call him Beast British!\"");
					if (Func0956([var0003, "say nothing"]) == var0003) {
						say("\"What?! I should have known that evil tyrant would yet live! Beware -- no servant of the Beast shall be aided by any Knight of Monitor!\"");
						gflags[TOLD_MARSTEN_SERVES_LORD_BRITISH] = true;
						if (gflags[DUPRE_MADE_EQUIPMENT_LIST]) {
							MARSTEN->revert_schedule();
						}
						Func097F(MARSTEN, "@Begone!@", 0x0000);
						abort;
					}
				} else {
					say("\"Thou dost agree, since thou dost not speak well of the Beast! Aye, a tyrant if there ever were one.\"");
				}
				add(["Three Cities", "Beast British"]);
				fallthrough;

			case "Three Cities" (remove):
				say("\"Three great cities were founded by those who fled the tyrant: Moonshade, Fawn and Monitor.\"");
				say("\"Moonshade is the City of Mages. Fawn is a city that worships Beauty. As for Monitor, 'tis the city thou art in now. 'Tis a city based on Courage.\"");
				fallthrough;

			case "Beast British" (remove):
				say("\"That tyrant Beast British tried to force his bent philosophical 'virtues' upon our ancestors. As magic depends greatly upon illusion, the Moon mages dismissed the value of Truth. As worshippers of Beauty, the people of Fawn saw little worth in unconditional Love. We of Monitor feel that Courage stands above his other virtues.\"");
				fallthrough;

			case "Sosaria" (remove):
				say("\"This new land was originally to be called New Sosaria, but it became known as the Serpent Isle upon the discovery of various ruins and mysterious ancient serpent writing. We know little else of the race that left its mark here.\"");
				fallthrough;

			case "ruins" (remove):
				say("\"Thou dost see them across the land, left behind by the evil creatures which once dwelled in this place.\"");
				say("\"That fellow Krayg could tell thee more. He is most fond of taking long walks in distant places, and often sees strange sights.\"");
				gflags[ASKED_KRAYG_ABOUT_RUINS] = true;
				fallthrough;

			case "Erstam" (remove):
				say("\"He was a wild-eyed man, driven by his thirst for knowledge and his need for the freedom to pursue it. 'Tis said that in his studies and experimentations he did discover things that drove him insane. Others say it was the loss of a woman who was his true love that drove him mad. Today he is known as the Mad Mage. And his name is most often spoken in hushed whispers.\"");
				fallthrough;

			case "change subject" (remove):
				say("\"Certainly...\"");
				UI_pop_answers();
				fallthrough;

			case "duties" (remove):
				say("\"I am the Lord of Monitor, the City of Knights.\"");
				say("\"There are three bodies of Knights in the city. No Command is better than another, for all warriors are equal.\"");
				say("\"As the leader of the Leopards, this is my year to rule Monitor.\"");
				if (!var0005) {
					add("Leopards");
				}
				add("Command");
				fallthrough;

			case "Leopards" (remove):
				var0005 = true;
				say("\"We are the peacemakers. The Bears and the Wolves always quarrel, but we stop them from wringing each others' necks.\"");
				say("\"We bring balance to the community. 'Tis not always glorious to be a Leopard, but we are proud to do our duty.\"");
				if (!var0006) {
					add("Wolves");
				}
				if (!var0004) {
					add("Bears");
				}
				fallthrough;

			case "Command" (remove):
				say("\"Every citizen of the town must become a Knight of Monitor, or be banished when they reach the age of\tfifteen.\"");
				say("\"The Knights are organized into three war bands, which are known as Commands -- the Bears, the Wolves, and the Leopards.\"");
				say("\"As thou hast no doubt noted, our tattoos mark us according to our Command.\"");
				if (!var0006) {
					add("Wolves");
				}
				if (!var0004) {
					add("Bears");
				}
				if (!var0005) {
					add("Leopards");
				}
				fallthrough;

			case "Bears" (remove):
				var0004 = true;
				say("\"The Bears have saved this city again and again. They never forget that we live under siege, that the Goblins could always attack.\"");
				say("\"The city walls were constructed by the Bears. They are tough, strong, powerful warriors. Caladin is their lord.\"");
				fallthrough;

			case "Wolves":
				var0006 = true;
				remove("Wolves");
				say("\"The prosperity of Monitor is due to the foresight of the Wolves. They have forced us to reach out to our fellow Man.\"");
				say("\"The Wolves repaired the ancient highway, and added new roads to link the Three Cities. They built the guard towers.\"");
				say("\"Brendann is their lord. The Wolves are smart, preferring cunning over brute force.\"");
				fallthrough;

			case "Knight Champion" (remove):
				var0008 = true;
				say("\"Knight Champion is the most revered title in Monitor -- more than Lord! To be Knight Champion is to be the finest warrior in the land.\"");
				say("\"To hone their skills, our Knights meet daily on the List Field to spar. Thus, they demonstrate their martial prowess.\"");
				say("\"From success in tournament and in battle, the Knight Champion is determined. He or she is privileged to wear the Helm of Monitor.\"");
				add("List Field");
				fallthrough;

			case "List Field" (remove):
				say("\"Thou canst hardly miss the List Field -- 'tis the walled field in the south part of town.\"");
				say("\"There is no shortage of opponents, especially if thou dost go there in the late morning or afternoon.\"");
				if (!gflags[AVATAR_IS_KNIGHT]) {
					say("\"Even strangers like thyself are welcome to spar. 'Tis good preparation for the Test of Knighthood.\"");
					add("Test of Knighthood");
				}
				fallthrough;

			case "traitor" (remove):
				if (var000C) {
					say("\"Thou hast done us a valuable service by rooting out that miserable traitor, Simon. Although in the true sense of the word, he was merely a loyal Goblin, not a traitor... Bah! A pox on all Goblins!\"");
				} else if (LYDIA->get_item_flag(DEAD)) {
					say("\"Thou hast slain the traitor, Knight! Well done!");
					if (SHMED->get_item_flag(DEAD)) {
						say("\"Lydia must have been part of Shmed's secret conspiracy. But that no longer matters -- both of the Goblin spies are dead!\"");
					} else {
						say("\"The Goblins shall no more steal our secrets, eh!\"");
					}
				} else if (SHMED->get_item_flag(DEAD)) {
					say("\"I must apologize to thee for the attack upon thee by the traitor, Shmed.\"");
					say("\"I did not believe that there was a traitor, but this evidence proves it.\"");
				} else {
					say("\"I do not care for this talk of traitors. Who would betray us to the Goblins? No man could be that insane.\"");
				}
				fallthrough;

			case "Test of Knighthood" (remove):
				say("\"One cannot be born a Knight, nor can the title be bestowed for money or influence. Only a worthy warrior can become a Knight.\"");
				say("\"To test the worthiness of those who sought Knighthood, a special dungeon was prepared. If one can survive Knight's Test, then one is ready for Knighthood.\"");
				say("\"'Tis an honor to become a Knight of Monitor, yet 'tis also a heavy responsibility. There are many enemies in the land.\"");
				add(["Knight's Test", "responsibility"]);
				fallthrough;

			case "Knight's Test" (remove):
				say("\"The dungeon lies north of town, in the mountains. At the entrance, a Knight named Shmed awaits the hopeful warriors.\"");
				say("\"He can explain the rules of the Test to thee, or thou couldst speak with Caladin. 'Tis Caladin's duty to instruct Knight candidates.\"");
				if (!gflags[KNOWS_MARSTEN_GIVES_PERMISSION]) {
					Func084A();
				}
				fallthrough;

			case "responsibility" (remove):
				say("\"One cannot shirk one's responsibilities after becoming a Knight. Thy Command might call thee to Tower duty, or to scout the Goblins.\"");
				say("\"There is nothing worse than deserting thy Command. In times of crisis, thy place is here in Monitor.\"");
				say("\"For instance, young Knight Wilfred hath left Monitor to investigate the strange death of his father. Such nonsense! He is needed here, with his brother Knights.\"");
				fallthrough;

			case "ask permission" (remove):
				Func084A();
				fallthrough;

			case "Knighthood" (remove):
				say("\"Congratulations! Thou dost not even need to tell me. I can see that thou hast triumphed in the dungeon.\"");
				if (!(gflags[HAVE_WOLF_CLOAK] && (gflags[HAVE_WOLF_TATTOO] && gflags[GAVE_WOLF_TO_LUCILLA]))) {
					say("\"Now thou must prepare for thy banquet, at which thou wilt become a Knight of Monitor.\"");
				}
				if (!gflags[HAVE_WOLF_TATTOO]) {
					say("\"Thou wouldst be a poor Knight without the Mark. Seek out Lydia, for she will give thee the Tattoo of Knighthood.\"");
				}
				if (!gflags[HAVE_WOLF_CLOAK]) {
					say("\"In the dungeon, thou didst slay the animal which the Ashes of Gurnordir did send to thee.\"");
					say("\"Now bring the animal's body to Cellia the Furrier. From the carcass, she shall make thy Cloak of Knighthood.\"");
				}
				if (!gflags[GAVE_WOLF_TO_LUCILLA]) {
					say("\"The traditional meal of the banquet is a stew made from the meat of the animal thou didst slay.\"");
					say("\"Bring the meat to Lucilla in the pub, and she shall prepare the feast.\"");
				}
				if (gflags[HAVE_WOLF_TATTOO] && (gflags[HAVE_WOLF_CLOAK] && gflags[GAVE_WOLF_TO_LUCILLA])) {
					say("\"Thou art ready, young Knight! Go to the banquet hall in one hour. I shall meet thee there.\"");
				} else {
					say("\"When thou hast finished thy work, then thy knighting can occur.\"");
				}
				fallthrough;

			case "accuse" (remove):
				say("\"What art thou talking about? Thou dost know nothing! Leave at once, or I shall call the Pikemen!\"");
				Func097F(MARSTEN, "@Leave!@", 0x0000);
				abort;

			case "enchanter" (remove):
				if (!gflags[TALKED_TO_IMPRISONED_IOLO]) {
					say("\"It was most disrespectful, the way that enchanter did interrupt our memorial service. The white-haired wizard appeared on top of the Cremator, in the most reverent part of the ceremony!\"");
					say("\"I ordered him jailed. We are very strict here in Monitor.\"");
					var0015 = Func0992(0x0001, (("@Could this be our friend Iolo, " + var0000) + "?@"), "@Could this be my friend Iolo?", false);
					0x0000->set_conversation_slot();
					say("\"Then thou shouldst visit the criminal at jail. We have our hands full in this town with the Goblins and we do not need such pranksters in Monitor!\"");
				} else {
					if (!gflags[TOLD_MARSTEN_ABOUT_IOLO]) {
						say("\"I understand thou hast spoken with this villain.\"");
						if (var0007 == Func0956([var0007, "say nothing"])) {
							say("\"Then explain to me thy friend's actions. Is he a sorcerer?\"");
							if (Func0955()) {
								say("\"Then he can remain in jail until he rots. I have no love of mages. I will not abide their pranks under any circumstances.\"");
								abort;
							}
							say("\"Then how did he appear in the middle of the funeral? Doth he fly?\"");
							var0016 = Func0956(["@Yes, he does.@", "@He was hit by lightning.@", "@I do not know.@"]);
							if (var0016 == "@Yes, he does.@") {
								Func097F(MARSTEN, "@Bah!@", 0x0000);
								abort;
							}
							if (var0016 == "@I do not know.@") {
								say("\"Well, these are mysterious times. Strange occurrences have become usual...\"");
							}
							if (var0016 == "@He was hit by lightning.@") {
								if (gflags[RETURNED_URN_TO_CALADIN]) {
									say("\"I see! And the urn which thou didst return to Caladin -- it was exchanged for thy friend!\"");
								} else {
									say("\"Indeed. The storms have been known to magically displace their victims.\"");
								}
								gflags[TOLD_MARSTEN_ABOUT_IOLO] = true;
							}
						}
					}
					if (gflags[AVATAR_IS_KNIGHT]) {
						if (gflags[MARSTEN_GAVE_JAIL_KEY]) {
							say("\"Art thou daft? I have already given thee the key. Thy friend is locked in the jail. It is in the northeast part of town.\"");
							Func097F(MARSTEN, "@Free thy friend!@", 0x0000);
							abort;
						}
						say("\"If thou wilt vouch for thy friend's future behavior, then I shall let him go free.\"");
						if (Func0955()) {
							say("\"Very well. Keep thine eye on him. We do not want people popping in and out of our city like this!\"");
							say("\"Here is the key to thy friend's jail cell. Set him free.\"");
							var000E = Func099B(AVATAR, 0x0001, 0x0281, 0x0068, 0x0000, 0x0000, true);
							gflags[MARSTEN_GAVE_JAIL_KEY] = true;
						} else {
							say("\"Then he must remain in his cell.\"");
						}
					} else {
						say("\"If only thou wert a Knight! Then I could let thee vouch for thy friend, and let him free.\"");
						say("\"But thou art merely a stranger here...\"");
						gflags[MARSTEN_WONT_RELEASE_IOLO] = true;
					}
				}
				fallthrough;

			case "Hall of Monitor" (remove):
				say("\"This is a magnificent building. It serves as both a seat of government where important meetings are held, and as a museum of sorts.\"");
				add(["meetings", "museum"]);
				fallthrough;

			case "meetings" (remove):
				say("\"Spektor, Caladin, Brendann and myself meet at noon every day to make all the decisions involved in ruling the town.\"");
				fallthrough;

			case "museum" (remove):
				say("\"There are many fine exhibits in our museum. Thou shouldst especially note the artifacts captured from the Goblins...\"");
				say("\"Many of the artifacts are crafted from the bones of defeated Knights, I am certain. And the drum -- I think the skin across the top is human!\"");
				var0015 = Func0992(IOLO, "@I find this discussion disgusting.@", 0x0000, false);
				0x0000->set_conversation_slot();
				say("\"Oh, show courage! Thou dost look like thou mightest lose thy last meal!\"");
				fallthrough;

			case "foolish Bears" (remove):
				say("\"The Bear Command would have hibernated safe within the walls of the city, and would never have seen the danger until the Goblin hordes were climbing over our walls.\"");
				fallthrough;

			case "cowardly Wolves" (remove):
				say("\"The Wolf Command would have never remained here this long. They would have pulled up their stakes and gone roaming the day we had to fight to keep this place. Once on the run they would have been cut down like dogs!\"");
				fallthrough;

			case "secret weapon" (remove):
				say("\"I had learned of a weapon unlike any that hath ever been seen in this world. A substance that could change the face of war forever! The substance I would have used is well hidden. And thou shalt never find it. Ha!\"");
				fallthrough;

			case "bye":
				if (!gflags[FIRST_TALK_WITH_MARSTEN]) {
					say("\"But why hast thou come to our town? What is thy business here?\"");
					CALADIN->show_npc_face1(0x0000);
					say("\"Perhaps ",
						var000D,
						" is a spy for the Goblins!\"");
					UI_remove_npc_face1();
					0x0000->set_conversation_slot();
					say("\"Now, I do not agree with all this talk of a spy in our midst. Do not let these rumors divide our city, Caladin.\"");
					BRENDANN->show_npc_face1(0x0000);
					say("\"Yet there was that other suspicious stranger, the fat sage...\"");
					UI_remove_npc_face1();
					0x0000->set_conversation_slot();
					say("\"Whom I threw out of town...\"");
					BRENDANN->show_npc_face1(0x0000);
					say("\"And that scholar -- a woman with fine bone structure, but a little too old to pleasure me...\"");
					UI_remove_npc_face1();
					if (SHAMINO->npc_nearby()) {
						UI_remove_npc_face0();
						SHAMINO->show_npc_face0(0x0000);
						say("\"Could he be speaking of Iolo's wife, the good lady Gwenno?\"");
					}
					CALADIN->show_npc_face1(0x0000);
					say("\"And do not forget the enchanter who appeared in the midst of the funeral services for our deceased Pikemen!\"");
					UI_remove_npc_face1();
					gflags[KNOWS_IOLO_IMPRISONED] = true;
					UI_remove_npc_face0();
					MARSTEN->show_npc_face0(0x0000);
					say("\"Warriors, be still! There is no spy in Monitor, and I refuse to hear more of this!\"");
					gflags[FIRST_TALK_WITH_MARSTEN] = true;
					Func097F(MARSTEN, "@There is no spy!@", 0x0000);
					Func097F(CALADIN, "@I am not convinced...@", 0x0004);
					Func097F(BRENDANN, "@Nor I!@", 0x0008);
					MARSTEN->set_schedule_type(SHY);
					CALADIN->set_schedule_type(SHY);
					BRENDANN->set_schedule_type(SHY);
					var000E = script Func09A0(0x0005, 0x0001) {
						nohalt;
						call Func0445;
					};
				} else {
					Func097F(AVATAR, "@Good day!@", 0x0000);
					Func097F(MARSTEN, "@Certainly...@", 0x0002);
				}
				// I see no way other than this
				goto labelFunc0445_0D4F;
		}
	}
	if (event == PROXIMITY) {
		if (gflags[PROVED_MARSTEN_IS_TRAITOR]) {
			var0017 = UI_die_roll(0x0001, 0x0003);
			if (var0017 == 0x0001) {
				MARSTEN->item_say("@Damn that Avatar!@");
			}
			if (var0017 == 0x0002) {
				MARSTEN->item_say("@Never trust a Goblin!@");
			}
			if (var0017 == 0x0003) {
				MARSTEN->item_say("@I ruled this town!@");
			}
		} else {
			var0018 = [CALADIN];
			for (var001B in var0018 with var0019 to var001A) {
				if (!var001B->npc_nearby()) {
					var0018 = Func0988(var001B, var0018);
				}
			}
labelFunc0445_0D4F:
			if (var0018 == []) {
				abort;
			}
			MARSTEN->clear_item_say();
			var0015 = var0018[UI_get_random(UI_get_array_size(var0018))];
			var0015->clear_item_say();
			var001C = UI_get_random(0x0006);
			if (var001C == 0x0001) {
				MARSTEN->item_say("@We need law and order!@");
				Func097F(var0015, "@Attack the Goblins!@", 0x0003);
			}
			if (var001C == 0x0002) {
				MARSTEN->item_say("@Calm yourselves.@");
			}
			if (var001C == 0x0003) {
				if (GOBLIN_KING->get_item_flag(DEAD)) {
					var0015->item_say("@The Goblins are no threat.@");
					Func097F(MARSTEN, "@I told thee so.@", 0x0003);
				} else {
					var0015->item_say("@The Goblins are pressing south!@");
					Func097F(MARSTEN, "@Do not be alarmed.@", 0x0003);
				}
			}
			if (var001C == 0x0004) {
				MARSTEN->item_say("@I am in charge here!@");
				Func097F(var0015, "@Yes, milord.@", 0x0003);
			}
			if (var001C == 0x0005) {
				if (gflags[GOBLIN_SIMON_DEAD]) {
					MARSTEN->item_say("@The traitor is dead.@");
					Func097F(var0015, "@Was he working alone?@", 0x0002);
				} else {
					MARSTEN->item_say("@There is no traitor.@");
					Func097F(var0015, "@Only a rumor.@", 0x0002);
				}
			}
			if (var001C == 0x0006) {
				MARSTEN->item_say("@Listen to me!@");
			}
		}
	}
}

extern void Func091C 0x91C ();
extern var Func0954 0x954 ();
extern void Func07D2 object#(0x7D2) ();
extern void Func097F 0x97F (var var0000, var var0001, var var0002);
extern var Func09A0 0x9A0 (var var0000, var var0001);
extern void Func07D1 object#(0x7D1) ();
extern void Func094E 0x94E (var var0000, var var0001);
extern var Func0942 0x942 (var var0000);
extern var Func0992 0x992 (var var0000, var var0001, var var0002, var var0003);
extern var Func097D 0x97D (var var0000, var var0001, var var0002, var var0003, var var0004);
extern var Func0956 0x956 (var var0000);
extern void Func0845 0x845 ();
extern void Func0846 0x846 ();
extern var Func0955 0x955 ();
extern var Func099B 0x99B (var var0000, var var0001, var var0002, var var0003, var var0004, var var0005, var var0006);
extern void Func044D object#(0x44D) ();

void Func0446 object#(0x446) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;

	var0000 = get_object_position();
	if ((var0000[0x0001] >= 0x0432) && ((var0000[0x0001] <= 0x0439) && ((var0000[0x0002] >= 0x03E4) && ((var0000[0x0002] <= 0x03EB) && (var0000[0x0003] < 0x0005))))) {
		Func091C();
		abort;
	}
	var0001 = Func0954();
	if (event == DEATH) {
		var0000 = script item {
			nohalt;
			call Func01D0;
		};
	}
	if ((event == DOUBLECLICK) && (LUCILLA->get_schedule_type() != WAIT)) {
		var0002 = LUCILLA->get_object_position();
		if (gflags[ACCEPTED_LUCILLA_PROPOSAL] && ((LUCILLA->get_schedule_type() == SLEEP) && ((var0002[0x0001] > 0x042F) && ((var0002[0x0001] < 0x043F) && ((var0002[0x0002] > 0x0A50) && (var0002[0x0002] < 0x0A5F)))))) {
			LUCILLA->Func07D2();
			LUCILLA->set_schedule_type(WAIT);
			Func097F(LUCILLA, "@Yes, love?@", 0x0002);
			var0000 = script LUCILLA after 10 ticks {
				nohalt;
				call Func02E6;
			};
			UI_play_music(0x001C, Func09A0(0x0005, 0x0001));
		} else {
			AVATAR->item_say("@Miss!@");
			LUCILLA->Func07D1();
			if (UI_is_pc_female()) {
				Func097F(LUCILLA, "@Yes, dearie?@", 0x0002);
			} else {
				Func097F(LUCILLA, "@Yes, handsome?@", 0x0002);
			}
			Func097F(LUCILLA, "Hello.", 0x0002);
			LUCILLA->set_schedule_type(TALK);
		}
	}
	if (event == STARTED_TALKING) {
		LUCILLA->run_schedule();
		LUCILLA->clear_item_say();
		LUCILLA->show_npc_face0(0x0000);
		if (gflags[ACCEPTED_LUCILLA_PROPOSAL] && (LUCILLA->get_schedule_type() == SLEEP)) {
			say("\"Oh, darling! Let us meet in my bedroom...\"");
			Func097F(LUCILLA, "@I am so sleepy...@", 0x0000);
			LUCILLA->run_schedule();
			abort;
		}
		if (!LUCILLA->get_item_flag(MET)) {
			if (!UI_is_pc_female()) {
				say("\"Forgive my boldness, but I must say that thou hast a fine build, milord! Surely, thou hast overcome many foes with the powerful thrust of thy weapon...\"");
			} else {
				say("\"What can I do for thee, dear?\"");
			}
			if (SPEKTOR->npc_nearby()) {
				Func094E(SPEKTOR, "@I do hope that I am not interrupting...@");
				0x0000->set_conversation_slot();
			}
			say("\"My name is Lucilla. Is there anything I can do for thee? Anything at all?\"");
			LUCILLA->set_item_flag(MET);
		} else {
			say("\"Hello again!\"");
		}
		add(["duties"]);
		if (Func0942(SPEKTOR)) {
			add("interrupting");
		}
		if (gflags[COURTED_LUCILLA]) {
			add("rendezvous");
		}
		if (gflags[ASK_LUCILLA_ABOUT_ANDRAL]) {
			add("Andral");
		}
		if (gflags[PROVED_SPEKTOR_IS_TRAITOR]) {
			add("Spektor");
		}
		if (gflags[ASK_LUCILLA_ABOUT_LOST_RING] && (!gflags[KNOWS_RING_OWNER])) {
			add("lost ring");
		}
		if (gflags[SLAIN_WOLF] && (!gflags[GAVE_WOLF_TO_LUCILLA])) {
			add("banquet stew");
		}
		if (gflags[FOUND_BROWN_BOTTLE] && (SIMON->get_schedule_type() != WAIT)) {
			add("brown bottle");
		}
		if (gflags[AVATAR_IS_KNIGHT] && (!(SIMON->get_item_flag(DEAD) && (!(gflags[PROVED_MARSTEN_IS_TRAITOR] && (!gflags[PROVED_SPEKTOR_IS_TRAITOR])))))) {
			add("traitor");
		}
		converse (["name", "buy", "bye"]) {
			case "traitor" (remove):
				say("\"This is all so confusing. Lord Brendann is certain that there must be a traitor, and the Wolves are united behind him.\"");
				say("\"Yet I have also heard that there is certainly no traitor, and that we should not indulge in hysteria...\"");
				var0003 = Func0992(0x0001, "@Who told thee this, madam?@", 0x0000, false);
				if (var0003 != AVATAR) {
					0x0000->set_conversation_slot();
					say("\"Um... no single person, actually. I have merely heard it said in conversation. In a tavern, one hears everything.\"");
				}
				fallthrough;

			case "brown bottle" (remove):
				if (Func097D(PARTY, 0x0001, 0x0268, QUALITY_ANY, 0x0009)) {
					say("\"'Tis a very dirty bottle. Thou didst find this in the woods?\"");
					say("\"Ah! 'Tis one of Simon's ale bottles. I order them specially for him, as only he can stand the taste.\"");
					say("\"Fawnish ale -- phew! A horrible brew.\"");
					gflags[KNOW_BROWN_BOTTLE_IS_FAWNISH_ALE] = true;
				} else {
					say("\"If thou couldst bring me the bottle, I am sure that I could identify it. We supply ale and spirits for the entire town from the pub where I work.\"");
					say("\"If the bottle is of an uncommon type, then perhaps that would be a clue.\"");
				}
				fallthrough;

			case "name" (remove):
				say("\"My name is Lucilla.\"");
				LUCILLA->set_item_flag(MET);
				fallthrough;

			case "duties" (remove):
				say("\"I run the Slashing Sword, the best pub in Monitor. Thou mightest think that cooking is not a very Knightly activity, but I assure thee, feeding the warriors in this town is indeed a Quest of Courage!\"");
				if (LUCILLA->get_schedule_type() == WAITER) {
					say("\"If thou dost want anything to eat or drink, thou hast merely to say so, ",
						var0001,
						".\"");
				} else {
					say("\"Please come by the pub sometime.\"");
				}
				if (!gflags[AVATAR_IS_KNIGHT]) {
					say("\"And I would love to chat further, but I do not speak with strangers. My standards are very high, and thou art not a Knight of Monitor.\"");
					Func097F(LUCILLA, "@Not a Knight!@", 0x0000);
					abort;
				}
				add(["The Slashing Sword", "cooking", "Quest of Courage"]);
				fallthrough;

			case "buy":
				if (LUCILLA->get_schedule_type() == WAITER) {
					say("\"What wouldst thou like, ",
						var0001,
						"?\"");
					var0004 = Func0956(["food", "drink"]);
					if (var0004 == "food") {
						Func0845();
					}
					if (var0004 == "drink") {
						Func0846();
					}
				} else {
					say("\"If thou wouldst return when we are open, perhaps I could serve thee food or drink...\"");
					remove("buy");
				}
				fallthrough;

			case "The Slashing Sword" (remove):
				say("\"'Tis a pub that hath been handed down generation to generation, originating with my great-grandfather. Although 'tis a wonderful place to have a meal, most of the men in the town come by to court me!\"");
				if (!UI_is_pc_female()) {
					say("\"I enjoy all the attention...\"");
					add("court");
				}
				add(["great-grandfather", "men"]);
				fallthrough;

			case "great-grandfather" (remove):
				say("\"He was not only the founder of the pub, but he was a Champion Knight of Monitor! He wore the Helm of Monitor for several years, before he was bested in a tournament.\"");
				add(["Champion Knight", "tournament"]);
				fallthrough;

			case "Champion Knight" (remove):
				say("\"I can hardly speak of the Champion Knight without remembering Astrid's foul death at the hands of the Goblins.\"");
				if (gflags[HAVE_HELM_OF_MONITOR]) {
					say("\"I am so glad that thou hast recaptured the Helm of Monitor. Thou dost make a fine Champion Knight in thine own right.\"");
				} else {
					say("\"I fear that there is none worthy to fill her shoes as Champion Knight!\"");
					add("worthy");
					if (!UI_is_pc_female()) {
						say("\"Except, perhaps, thyself? I must believe that thou hast had thy share of conquests in thy time...\"");
					}
				}
				fallthrough;

			case "worthy" (remove):
				say("\"Monitor is not the town it once was. Our ancestors founded a settlement built on the Principle of Courage.\"");
				say("\"But today, greed and glory have corrupted our Knights. Monitor needs a champion that is not only a leader on the battlefield, but someone who can stir their hearts and lead them back to what it means to be a Knight.\"");
				if (!gflags[HAVE_HELM_OF_MONITOR]) {
					say("\"I wish a new Champion Knight would arise, one who can not only retrieve the Helm of Monitor, but also right the wrongs in this town!\"");
				}
				if (!UI_is_pc_female()) {
					say("\"Could that person be thee? I would like it to be so.\"");
				} else {
					var0003 = Func0992(0x0001, "@Perhaps this is a quest for the Avatar?@", 0x0000, false);
					if (var0003 != AVATAR) {
						0x0000->set_conversation_slot();
					}
				}
				fallthrough;

			case "tournament" (remove):
				say("\"All the Knights think about is fighting! And who do they fight? The Goblins? No! They prefer to spar with one another at the List Field!\"");
				say("\"Luther is the worst. Oh, how I hate him!\"");
				add("Luther");
				fallthrough;

			case "Luther" (remove):
				say("\"What a buffoon! He thinks every woman in this town wants him, but I find him repulsive!\"");
				say("\"To prove his prowess, he torments the weakest Knights and challenges them to meet him on the List Field.\"");
				say("\"And when they lose -- which they must, since Luther is such a powerful brute -- he gloats over them.\"");
				if (!gflags[HAS_DUPRE_SHIELD]) {
					say("\"They say that that new shield of his doth have special powers, so that now he is truly invincible!\"");
					say("\"Well, I say if it is magical, then force him to not use it! Monitorians do not use magic weapons or armour...\"");
					say("\"But no one can tell Luther anything.\"");
					gflags[HAS_CLUE_MONITOR_SHIELD] = true;
				}
				gflags[LUCILLA_SAYS_LUTHER_REPULSIVE] = true;
				fallthrough;

			case "men" (remove):
				if (UI_is_pc_female()) {
					say("\"Dost thou not know that men are scum? Yet we cannot leave them alone...\"");
					say("\"Wouldst thou like to know more about the men of Monitor?\"");
					if (Func0955()) {
						say("\"Avoid Brendann -- he sees women as trophies, to be won and then set on a shelf. He is shallow and insincere.\"");
						say("\"Templar is very attractive, I think. But Caladin is a brute, and Luther is a clod!\"");
					} else {
						say("\"'Tis just as well -- there are no great lovers in this place!\"");
					}
				} else {
					say("\"Why is it that a woman must have a man? I have looked and looked, and I have not yet found the one for me.\"");
					say("\"He must be tough, yet gentle with his woman. Brave, but afraid to disappoint his mate. He must be devious enough to win many battles, yet fair enough to consider me as his equal...\"");
				}
				fallthrough;

			case "Andral" (remove):
				say("\"For a time we were quite close. I still have great respect for his talents, but in truth he always put me second to his work. I suppose I enjoy being the center of attention too much.\"");
				fallthrough;

			case "court" (remove):
				say("\"Dost thou find me beautiful? I admit I love the attention! But I have never found the right man for me...\"");
				if (!UI_is_pc_female()) {
					say("\"But I sense that thou art somehow different, milord.\"");
					if (gflags[KNOWS_OF_LUCILLA_AND_SPEKTOR]) {
						say("\"Listen, Spektor and I truly have nothing together. Honestly, 'tis nothing.\"");
					}
					say("\"Wouldst thou like to meet later?\"");
					gflags[COURTED_LUCILLA] = true;
					if (Func0955()) {
labelFunc0446_05A1:
						say("\"Then meet me at the pub after we have closed, in the wee hours before dawn. 'Tis the only time I can be alone with thee since I work so late.\"");
						say("\"I cannot wait.\"");
						gflags[ACCEPTED_LUCILLA_PROPOSAL] = true;
					} else {
						say("\"Oh. Be that way, then. There are plenty of others who are interested in me!\"");
					}
				}
				fallthrough;

			case "cooking" (remove):
				say("\"If I do say so myself, I am a master of cooking poultry. Or as they say...\"");
				if (!UI_is_pc_female()) {
					say("\"Breasts and thighs, breasts and thighs. And which dost thou prefer, milord? But do not answer yet...\"");
				} else {
					say("\"If I cannot succeed in the bedroom, I might as well try in the kitchen! Homely women make good cooks, they say...\"");
				}
				fallthrough;

			case "Quest of Courage" (remove):
				say("\"Thou knowest -- the quests to prove that thou art fit to bear thy Knighthood...\"");
				if (gflags[HAVE_HELM_OF_MONITOR]) {
					say("\"Like when thou didst retrieve the Helm of Monitor from that vile Pomdirgun.\"");
				} else {
					say("\"Surely, a fine young warrior like thyself dost plan to partake in the Quest to retrieve the Helm of Monitor?\"");
					if (Func0955()) {
						say("\"If only we could learn the secret of their hidden camp! But it remains a mystery...\"");
					} else {
						say("\"Too dangerous for a coward like thyself? And I thought better of thee...\"");
					}
				}
				fallthrough;

			case "interrupting" (remove):
				say("\"Surely, thou dost know Spektor the Financier?\"");
				SPEKTOR->show_npc_face1(0x0000);
				say("\"I must be going. Pressing town business, that sort of thing.\"");
				0x0000->set_conversation_slot();
				say("\"And it is so seldom that we are able to talk! Be sure to give my greetings to Lord Marsten.\"");
				0x0001->set_conversation_slot();
				say("\"I shall!\"");
				gflags[KNOWS_OF_LUCILLA_AND_SPEKTOR] = true;
				Func097F(LUCILLA, "@Farewell!@", 0x0000);
				Func097F(SPEKTOR, "@Anon!@", 0x0002);
				SPEKTOR->si_path_run_usecode([0x041B, 0x0A52, 0x0000], SI_PATH_SUCCESS, SPEKTOR, Func044D, true);
				abort;

			case "rendezvous" (remove):
				if (!gflags[ACCEPTED_LUCILLA_PROPOSAL]) {
					say("\"Hast thou changed thy mind about meeting?\"");
					if (Func0955()) {
						// I see no way other than this
						goto labelFunc0446_05A1;
					} else {
						say("\"Suit thyself.\"");
					}
				} else {
					say("\"The time is not right. I cannot see thee now. Another time, my love...\"");
					Func097F(LUCILLA, "@Not now!@", 0x0000);
					abort;
				}
				fallthrough;

			case "Spektor" (remove):
				if (!gflags[PROVED_SPEKTOR_IS_TRAITOR]) {
					say("\"Very well, I shall bare my soul to thee.\"");
					if (gflags[KNOWS_OF_LUCILLA_AND_SPEKTOR]) {
						say("\"I suspected that thou knewest when thou didst catch Spektor and I together that time. But we could not fool thee...\"");
					}
					say("\"Spektor and I were lovers. Canst thou believe it? Yet there was something appealing about that man...\"");
					say("\"Despite my conscience, I have kept his guilty secret for these many months. It casts filth upon my soul. I am ashamed.\"");
					add(["lovers", "secret"]);
				} else {
					say("\"Now that Spektor hath been arrested for his crimes, I wonder what I shall do with this key that he gave to me for safekeeping. Perhaps I shall give it to thee. Since thou hast determined all of what hath been happening, perhaps thou wilt be able to put it to good use.\"");
					if (!gflags[HAVE_SPEKTOR_KEY]) {
						var0000 = Func099B(AVATAR, 0x0001, 0x0281, 0x0062, 0x0005, false, true);
						gflags[HAVE_SPEKTOR_KEY] = true;
					}
				}
				fallthrough;

			case "lovers" (remove):
				say("\"This is so embarrassing. To think that I could have had any man in this town, and yet I gave mine heart to... Spektor!\"");
				say("\"A Knight who had scarce drawn his sword in many moons...\"");
				fallthrough;

			case "secret" (remove):
				say("\"Spektor played a key part in Lord Marsten's plan to destroy the Bears and Wolves, so that the Leopards could rule Monitor!\"");
				say("\"They had a secret cache of money and weapons hidden somewhere in the mountains west of town.\"");
				say("\"I do not know what else they hid there, but Spektor said that they had the power to someday rule all of Serpent Isle!\"");
				fallthrough;

			case "lost ring" (remove):
				say("\"A ring so pretty must be intended for a loved one. Perhaps a ring of marriage or engagement.\"");
				fallthrough;

			case "banquet stew" (remove):
				if (UI_remove_party_items(0x0003, 0x0194, QUALITY_ANY, 0x0003, false)) {
					say("\"Very good! Now that I have the meat, thy stew will be ready for the banquet. Thy banquet will be held at the Knight's Banquet Hall. It is located south of the Pub. Thou shalt find it on Banquet Hall Road.\"");
					gflags[GAVE_WOLF_TO_LUCILLA] = true;
				} else {
					say("\"Now that thou hast completed the Knight's Test, thou must now bring me the meat for thy banquet stew.\"");
				}
				fallthrough;

			case "bye":
				Func097F(AVATAR, "@Must be going...@", 0x0000);
				if (!UI_is_pc_female()) {
					Func097F(LUCILLA, "@Goodbye, lover.@", 0x0002);
				} else {
					Func097F(LUCILLA, "@Goodbye, milady.@", 0x0002);
				}
				break;
		}
	}
}

extern var Func0954 0x954 ();
extern var Func0953 0x953 ();
extern var Func098D 0x98D ();
extern var Func0932 0x932 (var var0000);
extern void Func0976 0x976 (var var0000, var var0001);
extern void Func0936 0x936 (var var0000, var var0001);
extern void Func092E 0x92E (var var0000);
extern void Func097F 0x97F (var var0000, var var0001, var var0002);
extern void Func07D1 object#(0x7D1) ();
extern void Func08F0 0x8F0 ();
extern var Func097D 0x97D (var var0000, var var0001, var var0002, var var0003, var var0004);
extern var Func0955 0x955 ();
extern void Func0849 0x849 ();
extern var Func0992 0x992 (var var0000, var var0001, var var0002, var var0003);
extern void Func094E 0x94E (var var0000, var var0001);
extern var Func0956 0x956 (var var0000);
extern void Func0848 0x848 ();
extern var Func0988 0x988 (var var0000, var var0001);

void Func0447 object#(0x447) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;
	var var0008;
	var var0009;
	var var000A;
	var var000B;
	var var000C;
	var var000D;
	var var000E;
	var var000F;
	var var0010;
	var var0011;

	var0000 = Func0954();
	var0001 = UI_is_pc_female();
	var0002 = LUTHER->get_item_flag(MET);
	var0003 = Func0953();
	if (event == DEATH) {
		if (gflags[MONITOR_TRAINING]) {
			var0004 = LUTHER->get_oppressor();
			var0004 = 0x0000 - var0004;
			if (!var0004) {
				var0004 = AVATAR;
			}
			if ((var0004 != AVATAR) && (!(var0004 in Func098D()))) {
				var0000 = Func098D();
				var0000 &= AVATAR;
				for (var0007 in var0000 with var0005 to var0006) {
					if (Func0932(var0007)) {
						break;
					}
				} nobreak {
					var0007 = AVATAR;
				}
				LUTHER->set_opponent(var0007);
				var0004->set_opponent(var0007);
				Func0976(LUTHER, 0x0003);
				Func0976(var0004, 0x0003);
				return;
			}
			if (!gflags[TEMP_FLAG_1]) {
				gflags[TEMP_FLAG_1] = true;
				Func0936(var0004->get_npc_object(), LUTHER->get_npc_object());
				return;
			}
			Func092E(var0004);
			return;
		}
		var0008 = script item {
			nohalt;
			call Func01D0;
		};
	}
	if (event == PROXIMITY) {
		if (gflags[MONITOR_TRAINING]) {
			var0009 = UI_die_roll(0x0001, 0x0003);
			LUTHER->clear_item_say();
			if (var0009 == 0x0001) {
				LUTHER->item_say("@Coward!@");
			}
			if (var0009 == 0x0002) {
				LUTHER->item_say("@Pitiful excuse...@");
			}
			if (var0009 == 0x0003) {
				LUTHER->item_say("@Flay that stranger!@");
			}
		}
	}
	if (event == SCRIPTED) {
		LUTHER->show_npc_face0(0x0000);
		if (gflags[DEFEATED_LUTHER]) {
			say("\"I would love to converse with thee, friend Avatar. But this is the hour when Andral sculpts my likeness.\"");
			Func097F(LUTHER, "@Go on, Andral!@", 0x0000);
			Func097F(ANDRAL, "@Yes, milord.@", 0x0003);
			abort;
		}
		say("\"What art thou, a moron? Canst thou not see that the artist is at work? Andral is sculpting me.\"");
		say("\"When my bust is complete, then my fame will be perfect and they shall surely proclaim me Knight Champion!\"");
		Func097F(LUTHER, "@Move on!@", 0x0000);
		abort;
	}
	if (event == DOUBLECLICK) {
		AVATAR->item_say("@Sir Knight!@");
		LUTHER->Func07D1();
		Func097F(LUTHER, "@Eh?@", 0x0000);
		if ((LUTHER->get_schedule_type() == MAJOR_SIT) && ANDRAL->npc_nearby()) {
			var0008 = script LUTHER after 5 ticks {
				nohalt;
				call Func0447;
			};
		} else {
			LUTHER->set_schedule_type(TALK);
		}
	}
	if (event == STARTED_TALKING) {
		LUTHER->halt_scheduled();
		LUTHER->run_schedule();
		LUTHER->show_npc_face0(0x0000);
		Func08F0();
		if (!var0002) {
			say("\"Hmpf! Art thou a fighter? Thou dost not look like a fighter to me!\"");
			if (UI_is_pc_female()) {
				say("\"More like someone to cook Luther's meals! Har!\"");
			} else {
				say("\"Thou dost look like someone to carry Luther's water buckets! Har!\"");
			}
		} else if (!gflags[DEFEATED_LUTHER]) {
			if (!gflags[HAVE_WOLF_TATTOO]) {
				say("\"Hello, little fighter! Step on any ants today?\"");
			} else {
				say("\"Look at the new Knight! Thou dost certainly look fetching with thy tattoo. Hah!\"");
			}
		} else {
			say("\"Now that thou hast bested me on the field of battle, I am thy friend. What can I do for thee?\"");
			add("join");
		}
		add(["name", "duties"]);
		if (gflags[ASKED_LUTHER_ABOUT_BULLY] && (!gflags[CALLED_LUTHER_BULLY])) {
			add("bully");
		}
		if (gflags[BRENDANN_CALLED_LUTHER_BRAGGART] && (!gflags[CALLED_LUTHER_BRAGGART])) {
			add("braggart");
		}
		if (gflags[LUCILLA_SAYS_LUTHER_REPULSIVE] && (!gflags[CALLED_LUTHER_REPULSIVE])) {
			add("repulsive");
		}
		if (gflags[HAS_CLUE_MONITOR_SHIELD] && (!gflags[HAS_DUPRE_SHIELD])) {
			add("new shield");
		}
		if (gflags[FOUND_BROWN_BOTTLE] && (SIMON->get_schedule_type() != WAIT)) {
			add("brown bottle");
		}
		if (gflags[AVATAR_IS_KNIGHT] && (!SIMON->get_item_flag(DEAD))) {
			add("traitor");
		}
		converse ("bye") {
			case "traitor" (remove):
				say("\"The Goblins did not ambush that patrol without help. If Lord Marsten doth not recognize this, then he is blind as well as brainless.\"");
				say("\"It doth not take a wizard to untangle this skein. Who among us acts strangely, doth do things in secret, and avoids his knightly duties?\"");
				say("\"Speak to Krayg the Provisioner. Force him to spill his filthy secrets. I would do it myself, but Marsten hath ordered me to stay away from that worm.\"");
				fallthrough;

			case "brown bottle" (remove):
				say("\"So what do I care if thou didst find garbage in the woods?\"");
				if (Func097D(PARTY, 0x0001, 0x0268, QUALITY_ANY, 0x0009)) {
					say("\"Place it not in my face! That bottle is filthy...\"");
					say("\"Besides, I do not drink that brew. 'Tis Fawnish ale. A bitter brew!\"");
				}
				say("\"No doubt the bottle belongs to that traitor, Krayg.\"");
				fallthrough;

			case "name" (remove):
				say("\"I am Luther! I am a Bear and a trainer of unequalled strength. It is my destiny to become the next Knight Champion of Monitor!\"");
				LUTHER->set_item_flag(MET);
				add(["Knight Champion", "destiny"]);
				fallthrough;

			case "Knight Champion" (remove):
				say("\"The Knight Champion is the bravest and toughest fighter in all the land. Now that Astrid hath met an untimely doom, the post is open for the taking!\"");
				say("\"Actually, she must have been fairly addlepated to let the Goblins ambush her like that. When I am Champion, the Goblins shall quake in fear!\"");
				fallthrough;

			case "destiny" (remove):
				say("\"I am the greatest fighter in Monitor! But I sense that thou art uncertain. Dost thou disagree?\"");
				if (Func0955()) {
					say("\"I shall gladly prove it to thee -- on the List Field! Meet me there in the morning,...\"");
					say("\"...but not too early. I like my sleep. The ninth hour should be sufficient.\"");
				} else {
					say("\"Good for thee.\"");
				}
				fallthrough;

			case "duties" (remove):
				say("\"As a Knight of the Order of the Bear, I am charged with defending Monitor at all times.\"");
				say("\"Often I am called upon by Caladin to lead patrols outside the\tcity walls, or to single-handedly scout the wilderness. I am very brave.\"");
				add(["Bears", "brave", "Caladin"]);
				fallthrough;

			case "Bears" (remove):
				say("\"We are the hope of Monitor, the only defense against the Goblins. The Leopards are hopeless, and the Wolves too smart for their own good.\"");
				if (!gflags[SLAIN_WOLF]) {
					say("\"If thou dost become a Knight of Monitor -- which is highly unlikely by the looks of thee -- thou shalt not be a Bear.\"");
					say("\"The Ashes of Gurnordir do not select puny weaklings for our Command.\"");
					add("Ashes of Gurnordir");
				}
				fallthrough;

			case "Ashes of Gurnordir" (remove):
				say("\"Ignorant oaf! The Ashes are consecrated to the ideal of Prowess -- to the biggest, strongest, bravest warriors!\"");
				if (!gflags[SLAIN_WOLF]) {
					say("\"In the Test of Knighthood, it is the Ashes which shall show thee thy totem animal. By the blood.\"");
					say("\"But why am I speaking of this to thee? If thou didst attempt the Test, it would surely kill thee.\"");
				}
				fallthrough;

			case "brave" (remove):
				say("\"Many of the Knights tell stories about mine accomplishments. Thou shouldst especially speak with Lucilla -- she is very impressed with me...\"");
				if (!UI_is_pc_female()) {
					say("\"...if thou knowest what I mean, aye?\"");
				}
				if (!gflags[PROVED_MARSTEN_IS_TRAITOR]) {
					say("\"One day I shall be Lord of the Bears, when Caladin is at last seen for the pathetic coward that he truly is.\"");
					say("\"Then I shall challenge the Goblins to a final battle, and use their pathetic skulls for the sharpening of my blade!\"");
				} else {
					say("\"Now that I am Lord of the Bears, Monitor is at last safe from invasion.\"");
				}
				fallthrough;

			case "Caladin" (remove):
				say("\"Oftimes I am sent on the most dangerous types of patrols. Caladin, head of the Bear Command, likes to joke that he sends me on these patrols in the hopes that I do not return. But I know the truth. He sends me because he knows I am the only one who is tough enough.\"");
				fallthrough;

			case "bully" (remove):
				say("\"How darest thou call me a bully! That little whore Lydia must have put thee up to this...\"");
				if (LYDIA->get_item_flag(DEAD)) {
					say("\"I am glad that she is dead, the bitch!\"");
				} else {
					say("\"So, thou and she are teaming against me, aye? Spreading lies and rumors? Poisoning my reputation?\"");
				}
				gflags[CALLED_LUTHER_BULLY] = true;
				Func0849();
				Func097F(LUTHER, "@Damn thee!@", 0x0000);
				LUTHER->set_schedule_type(SHY);
				fallthrough;

			case "braggart" (remove):
				say("\"Braggart! Who art thou calling a braggart? Thou art a snivelling worm!\"");
				if (!gflags[PROVED_SPEKTOR_IS_TRAITOR]) {
					say("\"That cold fish Spektor must have coaxed thee to this. He hath been jealous of my manliness for many moons...\"");
					say("\"He knows that the women prefer me to him, and he schemes against me!\"");
				}
				say("\"Why, I should rip thine head off and feed it to the pigs!\"");
				gflags[CALLED_LUTHER_BRAGGART] = true;
				Func0849();
				Func097F(LUTHER, "@Curse thee!@", 0x0000);
				LUTHER->set_schedule_type(SHY);
				fallthrough;

			case "repulsive" (remove):
				say("\"Lucilla said what?! She finds me repulsive? Thou dost lie, it is a filthy lie...\"");
				say("\"I will have thine head on a pike for spreading such tales!\"");
				gflags[CALLED_LUTHER_REPULSIVE] = true;
				Func0849();
				Func097F(LUTHER, "@Blast thee!@", 0x0000);
				LUTHER->set_schedule_type(SHY);
				fallthrough;

			case "found shield" (remove):
				var000A = Func097D(PARTY, 0x0001, 0x02D9, QUALITY_ANY, 0x0000);
				do {
					if (gflags[HAS_DUPRE_SHIELD]) {
						say("\"Many thanks for returning my shield to me, friend.\"");
						break;
					} else if (var000A) {
						say("\"No, that doth not look like my shield. I do not believe I have ever seen that shield before in my life.\"");
					} else {
						say("\"I have not lost my shield. Thou art mistaken.\"");
					}
					say("\"Besides, I have this new shield -- which, by the way, is a family heirloom. Thank thee very much.\"");
				} while (false);
				fallthrough;

			case "new shield" (remove):
				say("\"So, thou hast heard of my new shield! No one hath ever seen the like of it before. It is so light, yet blows seem to bounce off of it...\"");
				if (DUPRE->npc_nearby()) {
					var000B = Func0992(DUPRE, "@Look! He doth have my missing shield!@", 0x0000, false);
					0x0000->set_conversation_slot();
				} else {
					var000B = Func0992(0x0001, "@Look! He doth have Dupre's missing shield!@", "@Why I think that is Dupre's missing shield!@", false);
					0x0000->set_conversation_slot();
				}
				if ((gflags[HAS_DUPRE_SHIELD] == false) && gflags[STORM_MONITOR_SHIELD]) {
					Func094E(var000B, "@And that mystery shield we have must be his!@");
					add("found shield");
					0x0000->set_conversation_slot();
				}
				if (var000B != AVATAR) {
					say("\"What did he say?!\"");
				} else {
					say("\"What didst thou say?!\"");
				}
				var000C = Func0956(["return our shield", "I will pay for that shield", "say nothing"]);
				if (var000C == "return our shield") {
					if (gflags[DEFEATED_LUTHER]) {
						Func0848();
					} else {
						say("\"No, I will not! This is my shield, and it hath been mine since my father -- a great Knight of Monitor -- passed it on to me!\"");
						say("\"If thou dost call me a thief again, then thou art calling me a liar -- and dishonoring the name of my father!\"");
						say("\"If thou didst that, I would have to challenge thee to combat on the List Field! So if I were thee, I would think twice about speaking to me with such an insolent tone!\"");
					}
				}
				if (var000C == "I will pay for that shield") {
					if (gflags[DEFEATED_LUTHER]) {
						say("\"I could not accept money from a friend!\"");
						Func0848();
					} else {
						say("\"Hah! A fine shield like this is not for sale. It is a family heirloom, after all.\"");
						say("\"The other Knights might grovel after money, but not I! I am no Spektor!\"");
					}
				}
				fallthrough;

			case "join" (remove):
				var000D = Func0988(AVATAR->get_npc_object(), UI_get_party_list());
				var000E = 0x0001;
				for (var0011 in var000D with var000F to var0010) {
					if (var000E == 0x0001) {
						Func094E(var0011->get_npc_number(), "@Avatar!@");
					}
					if (var000E == 0x0002) {
						Func094E(var0011->get_npc_number(), "@Luther! Travelling with us?!@");
					}
					if (var000E == 0x0003) {
						Func094E(var0011->get_npc_number(), "@I do not think this is a good idea...@");
					}
					if (var000E == 0x0004) {
						Func094E(var0011->get_npc_number(), "@If he is coming, I am going!@");
					}
					var000E += 0x0001;
				}
				0x0000->set_conversation_slot();
				say("\"Thou couldst use a warrior like myself, to guard thee against thine enemies. With me on hand, nothing could harm thee!\"");
				if (GOBLIN_KING->get_item_flag(DEAD)) {
					say("\"But alas, my duty as a Knight keeps me here in Monitor. The Goblins are a constant threat, even though thou hast slain their king.\"");
				} else {
					say("\"But alas, my duty as a Knight keeps me here in Monitor. The Goblins are a constant threat.\"");
				}
				fallthrough;

			case "bye":
				if (gflags[DEFEATED_LUTHER]) {
					Func097F(LUTHER, "@Courage!@", 0x0002);
				} else {
					Func097F(LUTHER, "@Slug!@", 0x0002);
				}
				Func097F(AVATAR, "@Bye!@", 0x0000);
				break;
		}
	}
}

extern var Func0953 0x953 ();
extern var Func0954 0x954 ();
extern var Func098E 0x98E ();
extern var Func0942 0x942 (var var0000);
extern void Func097F 0x97F (var var0000, var var0001, var var0002);
extern var Func09A0 0x9A0 (var var0000, var var0001);
extern var Func0994 0x994 ();
extern var Func0992 0x992 (var var0000, var var0001, var var0002, var var0003);
extern void Func07D1 object#(0x7D1) ();
extern var Func0956 0x956 (var var0000);
extern void Func09AC 0x9AC (var var0000, var var0001, var var0002, var var0003);
extern void Func09AD 0x9AD (var var0000);
extern void Func028C shape#(0x28C) ();

void Func0448 object#(0x448) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;
	var var0008;
	var var0009;
	var var000A;
	var var000B;
	var var000C;
	var var000D;
	var var000E;
	var var000F;
	var var0010;

	var0000 = Func0953();
	var0001 = Func0954();
	var0002 = UI_is_pc_female();
	var0003 = LYDIA->get_item_flag(MET);
	var0004 = Func098E();
	var0005 = LYDIA->find_nearby(0x0381, 0x0014, MASK_NONE);
	var0006 = Func0942(DUPRE);
	if ((event == DEATH) && LYDIA->get_item_flag(SI_TOURNAMENT)) {
		LYDIA->show_npc_face0(0x0000);
		if (!gflags[LYDIA_CONFESSES]) {
			say("\"So! Thou hast discovered me!\"");
			say("\"Yes, I poisoned thee, but I will not say who did instruct me to do so!\"");
			if (!gflags[CURED_LYDIA_POISON]) {
				say("\"There is no antidote, so thou canst look forward to a long and painful death!\"");
			}
		}
		say("\"I spit upon thee, pawn of the Demon British!\"");
		LYDIA->clear_item_flag(SI_TOURNAMENT);
		LYDIA->reduce_health(0x0032, NORMAL_DAMAGE);
		Func097F(AVATAR, "@Whew!@", 0x0002);
		abort;
	}
	if (event == SCRIPTED) {
		if (LYDIA->get_item_flag(SI_ZOMBIE) && (item == Func09A0(0x0005, 0x0002))) {
			if (AVATAR->get_item_flag(DONT_MOVE) || (Func0994() == 0x001F)) {
				var0007 = Func09A0(0x0005, 0x0002);
				var0008 = script var0007 after 100 ticks {
					nohalt;
					call Func0448;
				};
				abort;
			}
			LYDIA->clear_item_flag(SI_ZOMBIE);
			var0009 = Func0992(SHAMINO, 0x0000, 0x0000, false);
			if ((var0009 != AVATAR) && Func0942(var0009)) {
				var0009->show_npc_face0(0x0000);
				say("\"Thou dost look terrible, ",
					var0000,
					". I think thou hast been struck by some terrible malady.\"");
				Func097F(var0009, "@Thou needest a healer!@", 0x0000);
				abort;
			}
			abort;
		}
		if (AVATAR->get_item_flag(POISONED) && (item == Func09A0(0x0005, 0x0002))) {
			var0009 = Func0992(SHAMINO, "@Art thou all right?@", "@Oh...@", true);
			if (var0009 != AVATAR) {
				LYDIA->set_item_flag(SI_ZOMBIE);
				var0007 = Func09A0(0x0005, 0x0002);
				var0008 = script var0007 after 5 ticks {
					nohalt;
					call Func0448;
				};
			}
		}
		if ((item == Func09A0(0x0005, 0x0001)) && (!gflags[CURED_LYDIA_POISON])) {
			if (!AVATAR->get_item_flag(POISONED)) {
				if (Func0994() != 0x001F) {
					gflags[AVATAR_IS_POISONED] = true;
					AVATAR->set_item_flag(POISONED);
					var0007 = Func09A0(0x0005, 0x0002);
					var0008 = script var0007 after 20 ticks {
						nohalt;
						call Func0448;
					};
				}
			}
			var0007 = Func09A0(0x0005, 0x0001);
			var0008 = script var0007 after 1000 ticks {
				nohalt;
				call Func0448;
			};
		}
	}
	if (event == DOUBLECLICK) {
		AVATAR->item_say("@Hello, there.@");
		LYDIA->Func07D1();
		LYDIA->set_schedule_type(TALK);
		Func097F(LYDIA, "@Hello.@", 0x0002);
		LYDIA->clear_item_say();
	}
	if (event == STARTED_TALKING) {
		LYDIA->run_schedule();
		var000A = false;
		if (LYDIA->get_schedule_type() == TEND_SHOP) {
			var000A = true;
		}
		LYDIA->show_npc_face0(0x0000);
		if (!gflags[SLAIN_WOLF]) {
			say("\"Begone with thee, stranger. No one who hath not passed the Test of Knighthood is worthy of my time.\"");
			Func097F(LYDIA, "@Good day.@", 0x0000);
			abort;
		} else if (!var0003) {
			say("\"I am Lydia. What can I do for thee, ",
				var0001,
				"?\"");
			LYDIA->set_item_flag(MET);
		} else {
			say("\"Hello, ",
				var0001,
				".\"");
		}
		add(["duties"]);
		if (gflags[SLAIN_WOLF] && (!gflags[HAVE_WOLF_TATTOO])) {
			add("tattoo");
		}
		if (gflags[AVATAR_IS_KNIGHT] && (!SIMON->get_item_flag(DEAD))) {
			add("traitor");
		}
		if (gflags[CAN_ASK_LYDIA_ABOUT_POISON]) {
			add("poison");
		}
		converse ("bye") {
			case "traitor" (remove):
				say("\"As loathsome as Luther is, perhaps he doth have a point. Krayg doth indeed take long walks in the woods, most strangely...\"");
				if (gflags[KNOWS_GOBLINS_HIDEOUT]) {
					say("\"Yet if he hath told thee of a Goblin rendezvous site, then thou shouldst examine the site. There might be evidence there to convict the traitor, whomever he might be.\"");
				} else {
					say("\"But a man cannot be convicted simply for strange habits! We must have evidence...\"");
				}
				fallthrough;

			case "duties" (remove):
				if (var000A) {
					say("\"Look around thee! Dost thou see the needles, the vials of ink, and the sketches!\"");
					say("\"Look closer. Dost thou see the patterns which adorn my body, the swirls of color? Each doth have its meaning...\"");
					say("\"I am the artist who creates tattoos.\"");
				} else {
					say("\"Thou art new to this city, or thou wouldst have heard of me by now. Mine is the art of using needles and ink to create harmonious patterns.\"");
					say("\"I am Lydia, the tattoo artist.\"");
				}
				add(["artist", "patterns"]);
				fallthrough;

			case "artist" (remove):
				say("\"I learned the trade from my father. Counting myself, there have been twelve generations of tattooists in our family.\"");
				say("\"As the tattooist, it is my privilege to grant the first tattoo to any warrior who completes the Test of Knighthood.\"");
				say("\"Lord Marsten sometimes authorizes me to give additional tattoos, but only when the recipient hath earned them through Courage or Valor.\"");
				add(["tradition", "special tattoos"]);
				fallthrough;

			case "tradition" (remove):
				say("\"Artistry is something that one is born with -- it cannot be learned or imitated. As I was born with the talent, I could not deny my duty.\"");
				say("\"As thou canst see, I have had much practice on myself. As the tattooist, I can have as many tattoos as I desire...\"");
				say("\"My body is covered with tattoos! My mother tattooed my back and other spots I could not reach comfortably.\"");
				add(["mother", "spots?"]);
				fallthrough;

			case "mother" (remove):
				say("\"She was a courageous Knight! I miss her very much...\"");
				say("\"Others will tell thee that my mother died in a battle with road bandits, but I know better. She had lost the will to live!\"");
				say("\"Her heart was broken, ever since that Warlock from Moonshade stole her oldest daughter!\"");
				add(["Moonshade", "Warlock", "daughter"]);
				fallthrough;

			case "Moonshade" (remove):
				say("\"That is the City of Mages, to the east on the Isle of Beyond. It is a depraved, indulgent, undisciplined place.\"");
				say("\"No warrior could ever feel comfortable in such a setting. They care nothing for Duty and Courage -- only pleasure!\"");
				fallthrough;

			case "Warlock" (remove):
				say("\"I do not know his name. The evil wizard travels throughout the Serpent Isle, in search of children to steal for the mage school.\"");
				say("\"Any infant with potential is taken in the dead of night, and a white stone is left in its place.\"");
				fallthrough;

			case "daughter" (remove):
				say("\"My sister Selene was a very beautiful girl. She was four years older than I, and I thought she was so mature!\"");
				say("\"She was only twelve when she was taken, so she never had the chance to pass the Test of Knighthood... Selene doth have no tattoos.\"");
				say("\"I have often wondered about her life among the Mages, learning spells and bewitching her enemies. I would give anything to see her again!\"");
				var000B = true;
				fallthrough;

			case "spots?" (remove):
				say("\"Well, thou knowest... private places!\"");
				if (var0006) {
					DUPRE->show_npc_face1(0x0000);
					say("\"Milady, I would be very interested in seeing all of thy tattoos. Perhaps we could step into...\"");
					UI_remove_npc_face1();
					0x0000->set_conversation_slot();
					say("\"I am not on display, sir! Thou shouldst not think that any lout can see the entire gallery.\"");
					DUPRE->show_npc_face1(0x0000);
					say("\"Sorry, milady.\"");
					UI_remove_npc_face1();
					0x0000->set_conversation_slot();
					say("\"Later, perhaps... handsome stranger.\"");
				}
				fallthrough;

			case "special tattoos" (remove):
				say("\"Only Lord Marsten can approve one for a Tattoo of Valor. They are won for great deeds done on the field of battle.\"");
				say("\"Our bravest warriors have many tattoos. Caladin and Brendann, rivals in all things, have more tattoos than anyone else in Monitor!\"");
				say("\"Caladin wears his on those brawny arms of his, while Brendann's are kept in more discreet locations...\"");
				fallthrough;

			case "patterns" (remove):
				say("\"These swirls and dots may seem random, but each has its meaning. A trained artist can read thy past by thy tattoos.\"");
				say("\"Do not stare so closely at my tattoos! I wish my secrets to be mine own.\"");
				fallthrough;

			case "tattoo" (remove):
				if (var0005) {
					say("\"Thou hast earned the right to wear the Knight's Tattoo. Without it, one cannot be inducted into one's Knighthood.\"");
					say("\"Since thou didst slay the Wolf in the Test, thou art slated to receive the Mark of the Wolf.\"");
					say("\"Art thou ready to obtain thy tattoo?\"");
					var000C = Func0956(["Yes", "No", "Will it hurt?"]);
					if (var000C == "Yes") {
						say("\"We shall now begin the process. This will hurt, but as a warrior, thou art accustomed to suffering.\"");
						Func097F(LYDIA, "@Be seated.@", 0x0000);
						for (var000F in var0004 with var000D to var000E) {
							Func09AC(var000F, -1, 0, MAJOR_SIT);
						}
						AVATAR->set_item_flag(DONT_MOVE);
						UI_end_conversation();
						var0010 = var0005->get_object_position();
						var0010[0x0001] += 0x0001;
						LYDIA->set_npc_id(0x0000);
						AVATAR->si_path_run_usecode(var0010, SCRIPTED, item, Func028C, false);
						UI_set_path_failure(Func028C, item, SI_PATH_FAILURE);
						UI_play_music(0x001D, Func09A0(0x0005, 0x0001));
						LYDIA->set_schedule_type(WAIT);
						abort;
					}
					if (var000C == "Will it hurt?") {
						say("\"Will it hurt! Thou art not fit to be a Knight of Monitor.\"");
						if (var0002) {
							say("\"Thou dost shame all womankind by thy cowardice.\"");
						} else {
							say("\"Come back when thou art ready to be a man!\"");
						}
						Func097F(LYDIA, "@Away!@", 0x0000);
						abort;
					}
					say("\"Then perhaps later.\"");
				} else {
					say("\"If thou wilt come to my shop when I am at work, I shall be happy to grant thee thy Mark of Knighthood.\"");
				}
				fallthrough;

			case "poison":
				say("\"So! Thou hast discovered me!\"");
				say("\"Yes, I poisoned thee, but I will not say at whose insistence it was done!\"");
				if (!gflags[CURED_LYDIA_POISON]) {
					say("\"There is no antidote, so thou canst look forward to a long and painful death!\"");
				}
				say("\"I spit upon thee, pawn of the Demon British!\"");
				var0009 = Func0992(SHAMINO, (("@Thou hast poisoned " + var0000) + " for the sake of Lord British?@"), 0x0000, false);
				if (var0009 != AVATAR) {
					UI_remove_npc_face1();
					0x0000->set_conversation_slot();
					say("\"Yes, Fiend British!\"");
				}
				say("\"I hate that monster! He represents all that is evil!\"");
				if (gflags[CURED_LYDIA_POISON]) {
					say("\"Since the poison hath not killed thee, I see that I must do the job myself!\"");
				} else {
					say("\"Thou canst not take me to the dungeons without a fight!\"");
				}
				gflags[LYDIA_CONFESSES] = true;
				LYDIA->clear_item_say();
				Func097F(LYDIA, "@En garde!@", 0x0000);
				Func097F(IOLO, "@Stop her!@", 0x0002);
				Func09AC(LYDIA, -1, 0, IN_COMBAT);
				Func09AD(LYDIA);
				abort;

			case "bye":
				UI_remove_npc_face0();
				Func097F(AVATAR, "@So long...@", 0x0000);
				Func097F(LYDIA, "@Good day!@", 0x0002);
				break;
		}
	}
}

extern void Func07D1 object#(0x7D1) ();
extern void Func097F 0x97F (var var0000, var var0001, var var0002);
extern var Func0955 0x955 ();
extern var Func0942 0x942 (var var0000);
extern var Func0992 0x992 (var var0000, var var0001, var var0002, var var0003);
extern void Func094E 0x94E (var var0000, var var0001);
extern var Func099B 0x99B (var var0000, var var0001, var var0002, var var0003, var var0004, var var0005, var var0006);

void Func0449 object#(0x449) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;

	var0000 = "He";
	if (UI_is_pc_female()) {
		var0000 = "She";
	}
	if (event == DOUBLECLICK) {
		AVATAR->item_say("@Greetings, sir.@");
		RENFRY->Func07D1();
		Func097F(RENFRY, "@What?@", 0x0002);
		RENFRY->set_schedule_type(TALK);
	}
	if (event == STARTED_TALKING) {
		RENFRY->run_schedule();
		RENFRY->clear_item_say();
		RENFRY->show_npc_face0(0x0000);
		var0001 = RENFRY->get_item_flag(MET);
		if (!gflags[FIRST_TALK_WITH_MARSTEN]) {
			say("\"Say here! I'm Renfry the Cremator and there is a funeral in progress. Lords Marsten, Spektor, Brendann and Caladin are all in the crypts paying their last respects.\"");
			abort;
		}
		if (!gflags[AVATAR_IS_KNIGHT]) {
			say("\"I say, I say who is that? Art thou a stranger?\"");
			if (Func0955()) {
				say("\"No, no, I do not speak with strangers... I only care to speak with my fellow Knights.\"");
				Func097F(RENFRY, "@Be gone...@", 0x0000);
			} else {
				say("\"Pardon me for not recognizing thee, Sir Knight. I be an old man, and mine eyesight is not what it once was.\"");
			}
		} else {
			say("\"What? What? Oh, 'tis thee again.\"");
		}
		add(["name", "duties"]);
		if (gflags[CREMATED_PIKEMAN]) {
			add("Payment");
		}
		if (gflags[ASK_RENFRY_ABOUT_HAND] && (!gflags[KNOWS_SEVERED_HAND_OWNER])) {
			add("severed hand");
		}
		add("bye");
		var0002 = Func0942(IOLO);
		var0003 = Func0942(SHAMINO);
		var0004 = Func0942(DUPRE);
		converse (0) {
			case "name" (remove):
				say("\"Flame? Oh, yes, we keep the fires going constantly.\"");
				var0005 = Func0992(0x0001, (("@@" + var0000) + " said NAME, old man. Not FLAME.@"), 0x0000, false);
				if (var0005 != AVATAR) {
					0x0000->set_conversation_slot();
					say("\"Oh. As thou canst tell, mine hearing is not what it once was. 'Tis the roar of the fires which hath done it...\"");
					say("\"I am Renfry, Knight and Cremator.\"");
					RENFRY->set_item_flag(MET);
				}
				fallthrough;

			case "duties" (remove):
				say("\"What? Why, I am the undertaker of Monitor. Didst thou not know that? I thought everyone knew that. Do not forget, Knight, that one day I shall cremate thee!\"");
				add(["undertaker", "Body"]);
				fallthrough;

			case "undertaker" (remove):
				say("\"I take care of the dead. I am in charge of the Crematorium. I prepare bodies for cremation and oversee the chamber that houses the Ashes of the Dead.\"");
				add(["The Cremator", "Ashes of the Dead"]);
				fallthrough;

			case "Ashes of the Dead" (remove):
				if (!gflags[AVATAR_IS_KNIGHT]) {
					say("\"'Tis mighty curious for thee to know so little of our customs -- art thou certain thou art a Knight?\"");
					if (Func0955()) {
						say("\"Then thou hast spent too much time on the list fields, and not enough time pondering the traditions of our people. Pay attention!\"");
					} else {
						say("\"I don't speak with strangers!\"");
						Func097F(RENFRY, "@To blazes!@", 0x0000);
						abort;
					}
				}
				say("\"'Tis the Monitorian custom to cremate our dead. The ashes of a dead Knight are sacred. They represent the essence of that person's life, distilled by the mystical processes of the Cremator.\"");
				say("\"In the Crypts of the Dead are urns filled with the ashes of generations of Knights. The Ashes of the Dead are our heritage.\"");
				add("mysticism");
				fallthrough;

			case "The Cremator" (remove):
				say("\"Be reverent when thou art in the presence of the Machine of Cremation, as it represents Death itself.\"");
				say("\"After I throw the switch, the pumps begin to churn. When the heat builds, the trapdoor on top opens. The body then falls into the fires below.\"");
				say("\"The mechanism retrieves the Ashes of the Dead, and places them in an urn. A travelling belt carries the urn out of the fiery belly of the machine, so that I may collect it and take it to the Crypts of the Dead.\"");
				say("\"Careful with what thou wouldst put near the thing! It hath the capacity to destroy practically any object in the world!\"");
				add(["the Dead", "urn"]);
				fallthrough;

			case "the Dead" (remove):
				say("\"I am glad thou didst mention that. Remember that, if thou shouldst ever stumble across the remains of a brave departed pikeman, thou must bring his body home for cremation.\"");
				say("\"If thou dost not do this, the ghost of the dead will torment thee until thy dying day!\"");
				say("\"I have been given authority by Lord Marsten to pay 100 monetari for every pikeman's body brought home again. That way they can be properly entombed within the crypts.\"");
				gflags[HEARD_ABOUT_CREMATION] = true;
				add("crypts");
				fallthrough;

			case "crypts" (remove):
				say("\"They are just beyond the curtain in the crematorium.\"");
				fallthrough;

			case "urn" (remove):
				say("\"Andral, our town sculptor, makes them.\"");
				add("Andral");
				fallthrough;

			case "Andral" (remove):
				say("\"Talented but very solitary person, he is. Never leaves his house, except to go to his workplace. He was especially upset by the recent theft at his shop.\"");
				add("theft");
				fallthrough;

			case "theft" (remove):
				say("\"Had something to do with that sage who was in town recently. Andral will know more about it. Talk to him.\"");
				gflags[HEARD_BATLIN_IS_THIEF] = true;
				var0005 = Func0992(0x0001, "@Dost thou know the name of this sage?@", 0x0000, false);
				if (var0005 != AVATAR) {
					0x0000->set_conversation_slot();
					say("\"I have a perfect memory for names. 'Twas Badwin, I think. A very large man, with a hooded companion.\"");
					Func094E(var0005, "@Must be Batlin!@");
					0x0000->set_conversation_slot();
				}
				fallthrough;

			case "mysticism" (remove):
				say("\"We are a community of Knights. For us, the world is a harsh place in which only the valiant survive.\"");
				say("\"We do not trust magic -- thou couldst not sell a magical weapon in this town at any price! Yet there are powers greater than mere magic...\"");
				say("\"One of these mysteries concerns the Ashes of the Dead. As we all know, the Ashes of Gurnordir lie at the end of Knight's Test. What is the power which causes the totem animal to appear? Not even I can say!\"");
				say("\"And no one can explain the Serpent Gate, yet we have built our city above it.\"");
				add(["Gurnordir", "Serpent Gate"]);
				fallthrough;

			case "Gurnordir" (remove):
				say("\"I can hardly do justice to the tale -- thou shouldst speak to Lord Marsten.\"");
				say("\"Suffice it to say that when our blood is mixed with the ashes of the dead Goblin king Gurnordir, the totem animal of a Monitor knight appears.\"");
				say("\"Gurnordir was our greatest foe! Do his ashes stand for hatred, and thus the animals are produced to try to slay us?\"");
				say("\"Or do his ashes symbolize Courage? If so, this suggests that the Goblins have more in common with Monitorians than many would like to believe...\"");
				fallthrough;

			case "Serpent Gate" (remove):
				say("\"A stone platform hidden in the Crypts...\"");
				say("\"The inscribed serpent marks the stonework as being the product of the Daemons. Such daemons once dwelt throughout this land, but for as long as the Knights have been here, the Daemons have confined themselves to the dungeon called Furnace.\"");
				say("\"By legend, the platform is called the Gate of the Serpent. But a gate to where? To what?\"");
				fallthrough;

			case "Payment" (remove):
				say("\"For thy service to Monitor and to the community of Knights I shall pay thee for thy trouble.\"");
				say("\"I thank thee for cremating that once proud warrior.\"");
				gflags[CREMATED_PIKEMAN] = false;
				var0006 = Func099B(AVATAR, 0x0064, 0x03B7, QUALITY_ANY, FRAME_ANY, true, true);
				fallthrough;

			case "Body":
				say("\"Dost thou carry a pikeman's body for cremation?\"");
				var0007 = 0x0000;
				if (Func0955()) {
					var0007 = PARTY->count_objects(0x0192, QUALITY_ANY, 0x000B);
					var0007 += PARTY->count_objects(0x0190, QUALITY_ANY, 0x0005);
					var0007 += PARTY->count_objects(0x0190, QUALITY_ANY, 0x0006);
					if (var0007 > 0x0000) {
						if (var0007 == 0x0001) {
							say("\"Ah, place it there on the trapdoor on top of the Cremator. I will pay thee after thou hast performed the last rites for the fallen one.\"");
						} else {
							say("\"Ah, place them one at a time on the trapdoor on top of the Cremator.\" *\"I will pay thee after each one receives the final rites.\"");
						}
					} else {
						say("\"Thou dost not carry a pikeman! I can only pay thee for bringing me the bodies of fallen knights. Only they deserve such respect...\"");
					}
					remove("Body");
				}
				fallthrough;

			case "severed hand" (remove):
				say("\"I deduce that the severed hand found in thy possession is not dead. What manner of magic could do this? I have never seen its like.\"");
				fallthrough;

			case "bye":
				UI_remove_npc_face0();
				Func097F(AVATAR, "@Bye!@", 0x0000);
				Func097F(RENFRY, "@What? Oh, goodbye.@", 0x0002);
				break;
		}
	}
}

extern var Func0954 0x954 ();
extern var Func098D 0x98D ();
extern var Func0932 0x932 (var var0000);
extern void Func0976 0x976 (var var0000, var var0001);
extern void Func0936 0x936 (var var0000, var var0001);
extern void Func092E 0x92E (var var0000);
extern var Func0988 0x988 (var var0000, var var0001);
extern void Func097F 0x97F (var var0000, var var0001, var var0002);
extern void Func07D1 object#(0x7D1) ();
extern var Func0955 0x955 ();

void Func044A object#(0x44A) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;
	var var0008;
	var var0009;
	var var000A;
	var var000B;
	var var000C;
	var var000D;
	var var000E;
	var var000F;
	var var0010;
	var var0011;
	var var0012;
	var var0013;
	var var0014;

	var0000 = Func0954();
	var0001 = SHAZZANA->get_item_flag(MET);
	var0002 = "stranger";
	if (gflags[AVATAR_IS_KNIGHT]) {
		var0002 = "Knight";
	}
	if (event == DEATH) {
		if (gflags[MONITOR_TRAINING]) {
			var0003 = SHAZZANA->get_oppressor();
			var0003 = 0x0000 - var0003;
			if (!var0003) {
				var0003 = AVATAR;
			}
			if ((var0003 != AVATAR) && (!(var0003 in Func098D()))) {
				var0000 = Func098D();
				var0000 &= AVATAR;
				for (var0002 in var0000 with var0004 to var0005) {
					if (Func0932(var0002)) {
						break;
					}
				} nobreak {
					var0002 = AVATAR;
				}
				SHAZZANA->set_opponent(var0002);
				var0003->set_opponent(var0002);
				Func0976(SHAZZANA, 0x0003);
				Func0976(var0003, 0x0003);
				return;
			}
			if (!gflags[TEMP_FLAG_1]) {
				gflags[TEMP_FLAG_1] = true;
				Func0936(var0003->get_npc_object(), SHAZZANA->get_npc_object());
				return;
			}
			Func092E(var0003);
			return;
		}
		var0006 = script item {
			nohalt;
			call Func01D0;
		};
	}
	if (event == PROXIMITY) {
		var0007 = SHAZZANA->get_object_position();
		if (var0007[0x0002] > 0x0A41) {
			var0008 = SHAZZANA->find_nearby(ANY_SHAPE, 0x0014, MASK_NPC2);
			var0008 = Func0988(SHAZZANA->get_npc_object(), var0008);
			var0009 = [];
			for (var000C in var0008 with var000A to var000B) {
				if (var000C->get_schedule_type() == DUEL) {
					var0009 &= var000C;
				}
			}
			if (var0009 == []) {
				abort;
			}
			SHAZZANA->clear_item_say();
			var000D = var0009[UI_get_random(UI_get_array_size(var0009))];
			var000D->clear_item_say();
			var000E = UI_get_random(0x0006);
			if (var000E == 0x0001) {
				SHAZZANA->item_say("@Work harder!@");
				Func097F(var000D, "@Yes, Shazzana.@", 0x0003);
			}
			if (var000E == 0x0002) {
				SHAZZANA->item_say("@Do not rest!@");
				Func097F(var000D, "@Sorry, madam.@", 0x0003);
			}
			if (var000E == 0x0003) {
				var000D->item_say("@Slave driver...@");
				Func097F(SHAZZANA, "@I heard that!@", 0x0003);
			}
			if (var000E == 0x0004) {
				SHAZZANA->item_say("@With vigor!@");
				Func097F(var000D, "@Yes, Shazzana.@", 0x0003);
			}
			if (var000E == 0x0005) {
				SHAZZANA->item_say("@Do not slow!@");
				Func097F(var000D, "@Yes, Shazzana.@", 0x0003);
			}
			if (var000E == 0x0006) {
				SHAZZANA->item_say("@Very good!@");
				Func097F(var000D, "@Thanks.@", 0x0003);
				Func097F(SHAZZANA, "@Keep working.@", 0x0006);
			}
		} else {
			var000F = [CALADIN, BRENDANN];
			if (!gflags[PROVED_SPEKTOR_IS_TRAITOR]) {
				var000F &= SPEKTOR;
			}
			for (var000C in var000F with var0010 to var0011) {
				if (!var000C->npc_nearby()) {
					var000F = Func0988(var000C, var000F);
				}
			}
			if (var000F == []) {
				abort;
			}
			SHAZZANA->clear_item_say();
			var000D = var000F[UI_get_random(UI_get_array_size(var000F))];
			var000D->clear_item_say();
			var000E = UI_get_random(0x0006);
			if (var000E == 0x0001) {
				SHAZZANA->item_say("@Do it my way!@");
				Func097F(var000D, "@Don't dictate to me!@", 0x0003);
			}
			if (var000E == 0x0002) {
				SHAZZANA->item_say("@We should not argue.@");
			}
			if (var000E == 0x0003) {
				var000D->item_say("@Exterminate the Goblins!@");
				Func097F(SHAZZANA, "@I agree.@", 0x0003);
			}
			if (var000E == 0x0004) {
				if (!gflags[SPEKTOR_ADMITS_HIS_CRIMES]) {
					SHAZZANA->item_say("@The crops sicken.@");
					Func097F(var000D, "@Is the world ending?@", 0x0003);
				} else {
					SHAZZANA->item_say("@Money is missing.@");
					Func097F(var000D, "@Must find the thief.@", 0x0003);
				}
			}
			if (var000E == 0x0005) {
				var000D->item_say("@Kill Marsten!@");
				Func097F(SHAZZANA, "@But how...?", 0x0002);
			}
			if (var000E == 0x0006) {
				var000D->item_say("@As I was saying...@");
				Func097F(SHAZZANA, "@Be silent!@", 0x0003);
			}
		}
	}
	if (event == DOUBLECLICK) {
		AVATAR->item_say("@Hail, Knight!@");
		SHAZZANA->Func07D1();
		Func097F(SHAZZANA, "@Yes?@", 0x0002);
		SHAZZANA->set_schedule_type(TALK);
	}
	if (event == STARTED_TALKING) {
		SHAZZANA->run_schedule();
		SHAZZANA->clear_item_say();
		SHAZZANA->show_npc_face0(0x0000);
		if (!var0001) {
			say("\"We have not had many strangers in our town lately. Let me introduce myself. I am Shazzana, a Knight of the Leopards.\"");
			add("Leopards");
			SHAZZANA->set_item_flag(MET);
		} else {
			say("\"I am not one to waste time with words. What is thy business with me, Knight?\"");
		}
		add(["duties"]);
		if (gflags[ASKED_SHAZZANA_ABOUT_SAILOR]) {
			add("mysterious sailor");
		}
		if (gflags[POMDIRGUN_IS_DEAD]) {
			add("Pomdirgun");
		}
		if (gflags[GOBLIN_SIMON_DEAD]) {
			add("Simon");
		}
		converse ("bye") {
			case "Pomdirgun" (remove):
				say("\"Thou hast killed the Goblin King Pomdirgun. How wonderful!\"");
				fallthrough;

			case "Simon" (remove):
				say("\"I understand thou didst determine that the traitor in our town was Simon. I am certain thou didst deal properly with him.\"");
				fallthrough;

			case "mysterious sailor" (remove):
				say("\"The mysterious sailor thou dost speak of was a pirate by the name of Deadeye. We engaged in knightly combat on the List Field and in a more esoteric form of hand to hand combat elsewhere. He was most... diverting.\"");
				say("\"There was a very strange man who came into town not long ago. He said his name was Batlin. He wanted me to work for him.  But I felt I could not trust him, so I refused.\"");
				fallthrough;

			case "duties" (remove):
				if (!gflags[AVATAR_IS_KNIGHT]) {
					say("\"What business is this of thine? If thou dost wish to train with me, then meet me at the List Field at noon.\"");
					say("\"If not, then be on thy way.\"");
					Func097F(SHAZZANA, "@At noon...@", 0x0000);
					abort;
				}
				say("\"I am one of the best fighters in this town. This is why all of the Knights desire to be trained by me.\"");
				say("\"I fight harder than any man or woman alive. I commonly win, but when I do not, the victor knows that they were in a terrific fight.\"");
				add(["best", "train"]);
				fallthrough;

			case "best" (remove):
				say("\"There are few who can match me! The secret is to be in control. A Knight who doth lose his temper in battle is a defeated Knight.\"");
				say("\"The Bears say that strength is the key. Well, I can strike before those over-muscled brutes can react!\"");
				say("\"The Wolves pride themselves on cunning. Fools! They cannot think past my blinding sword strikes.\"");
				say("\"Since thou hast questioned my skill, I challenge thee to a match. Dost thou accept?\"");
				if (Func0955()) {
					say("\"Meet me upon the List Field at noon, and I shall teach thee to appreciate my skill with a blade.\"");
					say("\"If thou dost not show, then I shall know thee for the coward thou art.\"");
				} else {
					say("\"Thou art not worthy of thy Knighthood...\"");
					Func097F(SHAZZANA, "@Pah!@", 0x0000);
					abort;
				}
				add(["Bears", "Wolves"]);
				fallthrough;

			case "train" (remove):
				say("\"I teach the art of combat. My technique is based on swiftness and accuracy of movement. If thou wert to be at the List Field at noon, I could spar with thee.\"");
				if (UI_get_array_size(UI_get_party_list()) > 0x0001) {
					say("\"I am certain I could also teach thy friend a thing or two...\"");
					var0012 = IOLO->get_item_flag(IN_PARTY);
					var0013 = SHAMINO->get_item_flag(IN_PARTY);
					var0014 = DUPRE->get_item_flag(IN_PARTY);
					if (var0012) {
						IOLO->show_npc_face1(0x0000);
						say("\"Art thou referring to me?\"");
						UI_remove_npc_face1();
					}
					if (var0014) {
						DUPRE->show_npc_face1(0x0000);
						say("\"I believe she was referring to thee!\"");
						UI_remove_npc_face1();
					}
					if (var0013) {
						SHAMINO->show_npc_face1(0x0000);
						say("\"I believe it was thee she was referring to, Avatar.\"");
						UI_remove_npc_face1();
					}
					0x0000->set_conversation_slot();
					say("\"I can train anyone.\"");
				}
				fallthrough;

			case "Leopards" (remove):
				say("\"The Wolves and the Bears are full of dreams. We Leopards are realistic. We live one day at a time.\"");
				fallthrough;

			case "Wolves" (remove):
				say("\"The Wolves have this grand scheme for uniting the Three Cities into a commonwealth, united by trade routes.\"");
				say("\"How can this be, when the Goblins threaten our very existence? The Wolves are simply not practical.\"");
				fallthrough;

			case "Bears" (remove):
				say("\"The Bears believe in a strong defense, I will give them that! But we cannot hide behind Monitor's walls -- we must seek out our enemies.\"");
				say("\"Our highest priority should be to raid that hidden Goblin camp, and destroy that evil race!\"");
				add(["raid", "destroy"]);
				fallthrough;

			case "raid" (remove):
				say("\"We must take back the Helm of Monitor, and avenge the death of Astrid!\"");
				say("\"War is the ultimate test for any Knight. This is how one doth test one's inner strength.\"");
				say("\"War is both holy and obscene, beautiful and yet hideous. I love it. I am very good at it.\"");
				add(["Astrid", "Helm of Monitor"]);
				fallthrough;

			case "Astrid" (remove):
				say("\"Astrid was a magnificent Knight Champion! Even though she was a Bear and I a Leopard, we were boon companions.\"");
				say("\"It takes a rare individual to lead warriors in combat. Astrid united us against the Goblins. Now I fear the Bears and Wolves shall squabble again...\"");
				fallthrough;

			case "Helm of Monitor" (remove):
				say("\"The Helm was originally taken from the old goblin king, Gurnordir, in the days of the Goblin Horde.\"");
				say("\"It is an ancient and powerful talisman, endowed with the Principle of Courage. Thus, it can only be worn by the bravest of warriors.\"");
				if (gflags[HAVE_HELM_OF_MONITOR]) {
					say("\"Now thou art the Champion Knight of Monitor. It was an honor I had wished for myself. But I must admit thou dost wear it well.\"");
				} else {
					say("\"Astrid was such a person. When I become the Knight Champion and the Helm is recovered, I shall wear it in Astrid's memory.\"");
				}
				fallthrough;

			case "destroy" (remove):
				say("\"If the Goblins refuse to concede that this territory belongs to us, then what else shall we do? Sue for peace?!\"");
				say("\"We must wage war against them until they are all dead. This is the nature of the world. So be it.\"");
				fallthrough;

			case "bye":
				UI_remove_npc_face0();
				UI_remove_npc_face1();
				Func097F(AVATAR, "Good day to thee.", 0x0000);
				Func097F(SHAZZANA, "And to thee.", 0x0002);
				break;
		}
	}
}

extern var Func0953 0x953 ();
extern var Func0994 0x994 ();
extern void Func07D1 object#(0x7D1) ();
extern void Func097F 0x97F (var var0000, var var0001, var var0002);
extern void Func09AD 0x9AD (var var0000);
extern void Func094E 0x94E (var var0000, var var0001);
extern var Func0955 0x955 ();
extern void Func09AC 0x9AC (var var0000, var var0001, var var0002, var var0003);
extern var Func0992 0x992 (var var0000, var var0001, var var0002, var var0003);
extern var Func09A6 0x9A6 (var var0000);
extern var Func0906 0x906 (var var0000);
extern void Func0907 0x907 (var var0000, var var0001);
extern void Func094F 0x94F (var var0000, var var0001);
extern void Func0739 object#(0x739) ();

void Func044B object#(0x44B) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;
	var var0008;
	var var0009;
	var var000A;
	var var000B;
	var var000C;
	var var000D;
	var var000E;
	var var000F;
	var var0010;
	var var0011;
	var var0012;
	var var0013;
	var var0014;
	var var0015;
	var var0016;
	var var0017;
	var var0018;
	var var0019;
	var var001A;
	var var001B;
	var var001C;
	var var001D;
	var var001E;
	var var001F;
	var var0020;

	var0000 = Func0953();
	var0001 = Func0994();
	if (event == DOUBLECLICK) {
		AVATAR->item_say("@Greetings, Guard!@");
		SHMED->Func07D1();
		if (gflags[BANES_RELEASED]) {
			SHMED->show_npc_face0(0x0000);
			say("\"It was horrible! I was a wolf! I know I was! I saw myself in a reflection on a puddle of water!\"");
			SHMED->set_attack_mode(FLEE);
			Func097F(SHMED, "@Aieee!!@", 0x0000);
			abort;
		} else if (!gflags[SLAIN_WOLF]) {
			Func097F(SHMED, "@Greetings!@", 0x0002);
		} else {
			Func097F(SHMED, "@It cannot be!@", 0x0002);
		}
		SHMED->set_schedule_type(TALK);
	}
	if ((event == DEATH) && SHMED->get_item_flag(SI_TOURNAMENT)) {
		SHMED->clear_item_say();
		if (!gflags[KNOWS_SHMED_IS_TRAITOR]) {
			SHMED->show_npc_face0(0x0000);
			say("\"But I don't understand. How didst thou survive the Knight's Test? We fixed the place with traps to be absolutely fatal!\"");
			say("\"I did not want to do it. She seduced me into trying to kill thee! Yet even now, I cannot betray her...\"");
		}
		SHMED->clear_item_flag(SI_TOURNAMENT);
		Func097F(SHMED, "@My love!@", 0x0000);
		Func097F(AVATAR, "@Die with dishonor!@", 0x0005);
		SHMED->reduce_health(0x0037, NORMAL_DAMAGE);
		abort;
	}
	if (event == STARTED_TALKING) {
		SHMED->run_schedule();
		SHMED->clear_item_say();
		var0002 = false;
		if (var0001 == 0x000C) {
			var0002 = true;
		}
		SHMED->show_npc_face0(0x0000);
		if (gflags[SLAIN_WOLF]) {
			say("\"But I don't understand. How didst thou survive the Knight's Test? We fixed the place with traps to be absolutely fatal!\"");
			say("\"I did not want to do it. She seduced me into trying to kill thee! Yet even now, I cannot betray her...\"");
			Func09AD(SHMED);
			SHMED->set_item_flag(SI_TOURNAMENT);
			Func097F(SHMED, "@Take this!@", 0x0000);
			gflags[KNOWS_SHMED_IS_TRAITOR] = true;
			abort;
		}
		var0003 = SHMED->get_item_flag(MET);
		if (var0003) {
			say("\"Hello again.\"");
		} else {
			say("\"My name is Shmed. I am a Knight of Monitor, at thy service...\"");
			SHMED->set_item_flag(MET);
			var0004 = false;
		}
		if (gflags[ASKED_SHMED_ABOUT_TEST]) {
			add("the Test");
		}
		converse (["duties", "bye"]) {
			case "duties" (remove):
				if (gflags[SLAIN_WOLF]) {
					say("\"But thou already knowest!\"");
				}
				say("\"I am the Knight in charge of the Test of the Knights.\"");
				if (var0002) {
					say("\"The Test takes place here, beyond that locked door.\"");
				}
				if (!var0004) {
					add("the Test");
				}
				fallthrough;

			case "the Test":
				var0004 = true;
				remove("the Test");
				if (!gflags[SLAIN_WOLF]) {
					say("\"All Monitorians must pass the Test before they can be granted their Knighthood.\"");
					say("\"The Test of the Knights is a challenge which only one stout of heart, keen of mind and strong of arm can pass. It is specially designed to test thy might, thy fleetness, thy courage and thy wits. If thou dost complete the test thou shouldst follow the directions of the words contained in the scrolls that thou wilt find. Thy totem animal will then appear. Slay it and take it back to town. Cellia will take its skin to make a cloak for thee. Lucilla will cook its meat. All the Knights will have a banquet in thine honor -- if thou dost pass the test.\"");
					if (UI_get_array_size(UI_get_party_list()) > 0x0001) {
						say("\"It is a test which one must endure alone, without companions.\"");
						if (SELINA->get_item_flag(IN_PARTY)) {
							Func094E(SELINA, (("@But not before finishing our quest, " + var0000) + "!@"));
							0x0000->set_conversation_slot();
						}
					}
					if (!gflags[LORD_MARSTEN_GAVE_PERMISSION]) {
						say("\"If thou dost wish to take the Test, thou must speak with Lord Marsten and obtain his permission.\"");
						gflags[KNOWS_MARSTEN_GIVES_PERMISSION] = true;
					} else if (var0002) {
						say("\"Dost thou wish to test thy mettle by taking the Test of Knighthood?\"");
						var0005 = Func0955();
						if (var0005) {
							var0006 = SHMED->get_object_position();
							var0007 = var0006[0x0001];
							var0008 = var0006[0x0002];
							if (!((var0007 > 0x0319) && ((var0007 < 0x0347) && ((var0008 > 0x08BD) && (var0008 < 0x08E2))))) {
								SHMED->show_npc_face0(0x0000);
								say("\"Come to the building just south of the entrance to Knight's Test. There I can properly attend to thee before the test.\"");
								UI_remove_npc_face0();
								UI_remove_npc_face1();
								AVATAR->item_say("@Farewell.@");
								Func097F(SHMED, "@See thee there...@", 0x0002);
								abort;
							}
							SHMED->show_npc_face0(0x0000);
							say("\"Pray tell, what be the password?\"");
							AVATAR->show_npc_face1(0x0000);
							0x0001->set_conversation_slot();
							say("\"Courage is the Soul of Life.\"");
							UI_remove_npc_face1();
							0x0000->set_conversation_slot();
							say("\"Steel thyself! If thou dost make it through to the other side, then all will know that thou art worthy to be a Knight of Monitor.\"");
							if (UI_get_array_size(UI_get_party_list()) > 0x0001) {
								say("\"Thy friends must wait for thee here.\"");
								if (SELINA->get_item_flag(IN_PARTY)) {
									Func094E(SELINA, "@Then he cannot take this Test! I refuse to leave!@");
									0x0000->set_conversation_slot();
									say("\"I cannot change the rules of the Test. Therefore, I cannot admit thee, stranger.\"");
									Func097F(SHMED, "@Good-bye.@", 0x0000);
									abort;
								}
								gflags[BEGAN_KNIGHTS_TEST] = true;
								Func09AC(SHMED, -1, 0, LOITER);
								var0009 = Func0992(DUPRE, "@Couldn't we wait at the pub in town?@", 0x0000, false);
								if (var0009 != AVATAR) {
									if (UI_get_array_size(UI_get_party_list()) > 0x0002) {
										var000A = var0009;
										while (var000A == var0009) {
											var000A = Func0992(0x0001, 0x0000, 0x0000, false);
										}
										var000A = Func0992(var000A, (("@Of course not. We shall wait faithfully for thee here, " + var0000) + ".@"), 0x0000, false);
									}
									0x0000->set_conversation_slot();
								}
								var000B = UI_get_party_list2();
								if (var000B) {
									for (var000E in var000B with var000C to var000D) {
										if (!(var000E->get_npc_number() == AVATAR)) {
											var000E->remove_from_party();
											var000F = [0x0322, 0x08DA];
											var000E->set_new_schedules(MIDNIGHT, LOITER, var000F);
											var000E->run_schedule();
										}
									}
								}
							}
							AVATAR->clear_item_flag(INVISIBLE);
							var0010 = SHMED->find_nearby(0x020A, 0x0064, MASK_NONE);
							var0011 = 0x0000;
							for (var0014 in var0010 with var0012 to var0013) {
								if (var0014->get_item_quality() == 0x0048) {
									var0014->set_item_shape(0x0320);
									var0011 = var0014;
								}
							}
							if (var0011 == 0x0000) {
								var0015 = UI_create_new_object(0x0320);
								if (var0015) {
									var0016 = var0015->set_item_quality(0x0048);
									var0016 = UI_update_last_created(get_object_position());
									var0011 = var0015;
								} else {
									UI_error_message("backup chest creation failed.");
								}
							}
							say("\"For now I will take thy things and keep them safe. Thou art only permitted to wear leather armour and to carry no other weapon but a simple mace when thou art taking the Knight's Test of Monitor.\"");
							var0017 = 0x0000;
							var0018 = AVATAR->get_cont_items(SHAPE_ANY, QUALITY_ANY, FRAME_ANY);
							while (var0017 < 0x0002) {
								for (var001B in var0018 with var0019 to var001A) {
									if (Func09A6(var001B) || (var0017 == 0x0001)) {
										var001C = var001B->get_item_shape();
										if (!((var001C == 0x01E6) || ((var001C == 0x025F) || (var001C == 0x01E5)))) {
											if (!var001B->set_last_created()) {
												UI_error_message(" failed the push!");
												abort;
											}
											if (!var0011->give_last_created()) {
												UI_error_message(" failed the pop!");
												abort;
											}
										}
									}
								}
								var0017 += 0x0001;
								var0018 = AVATAR->get_cont_items(SHAPE_ANY, QUALITY_ANY, FRAME_ANY);
							}
							var0015 = AVATAR->add_cont_items(0x0001, 0x0293, QUALITY_ANY, 0x0000, false);
							var0015 = AVATAR->add_cont_items(0x0001, 0x0239, QUALITY_ANY, 0x0000, false);
							// BUG: This should use PATH_SUCCESS instead of BG_PATH_SUCCESS.
							SHMED->si_path_run_usecode([0x0339, 0x08D7, 0x0000], BG_PATH_SUCCESS, AVATAR, Func0739, true);
							Func097F(SHMED, "@Follow me...@", 0x0002);
							Func097F(AVATAR, "@Lead onwards...@", 0x0005);
							AVATAR->set_item_flag(DONT_MOVE);
							UI_end_conversation();
							abort;
						}
						say("\"Harrumph! Perhaps when thou hast found a bit of courage!\"");
						Func097F(SHMED, "@Be on thy way then!@", 0x0003);
						abort;
					} else {
						say("\"If thou dost meet me at the Place of the Test, thou canst take the Test of Knighthood.\"");
						say("\"Follow the Kings' Road north of Monitor, then take the trail leading west.\"");
						say("\"I can be found there everyday, from dawn until late in the afternoon.\"");
					}
				}
				fallthrough;

			case "bye":
				UI_remove_npc_face0();
				UI_remove_npc_face1();
				Func097F(AVATAR, "@Farewell.@", 0x0000);
				Func097F(SHMED, "@On thy way, then.@", 0x0002);
				return;
		}
	}
	if (event == SCRIPTED) {
		var001D = AVATAR->find_nearby(0x010E, 0x000A, MASK_ALL_UNSEEN);
		for (var0020 in var001D with var001E to var001F) {
			if (var0020->get_item_quality() == 0x0048) {
				if (Func0906(var0020) == 0x0002) {
					Func0907(var0020, 0x0000);
					Func094F(item, ["There thou dost go...", "Thou mayest begin."]);
				}
			}
		}
	}
}

extern var Func0954 0x954 ();
extern var Func0953 0x953 ();
extern void Func097F 0x97F (var var0000, var var0001, var var0002);
extern void Func07D1 object#(0x7D1) ();
extern var Func0955 0x955 ();
extern var Func099B 0x99B (var var0000, var var0001, var var0002, var var0003, var var0004, var var0005, var var0006);
extern var Func0992 0x992 (var var0000, var var0001, var var0002, var var0003);
extern void Func094E 0x94E (var var0000, var var0001);
extern void Func0620 object#(0x620) ();
extern void Func094F 0x94F (var var0000, var var0001);
extern var Func09A0 0x9A0 (var var0000, var var0001);
extern void Func0795 object#(0x795) ();

void Func044C object#(0x44C) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;
	var var0008;
	var var0009;
	var var000A;
	var var000B;
	var var000C;
	var var000D;
	var var000E;
	var var000F;
	var var0010;
	var var0011;
	var var0012;
	var var0013;
	var var0014;

	var0000 = Func0954();
	var0001 = SIMON->get_item_flag(MET);
	var0002 = Func0953();
	var0003 = false;
	if ((event == DEATH) && ((gflags[FOUND_BROWN_BOTTLE] || gflags[KNOW_BROWN_BOTTLE_IS_FAWNISH_ALE]) && ((!SIMON->get_item_flag(SI_ZOMBIE)) && (!gflags[GOBLIN_SIMON_DEAD])))) {
		SIMON->show_npc_face0(0x0000);
		say("\"So, thou hast found me out? Well, to the blazes with it all!\"");
		SIMON->set_item_flag(SI_ZOMBIE);
		SIMON->set_item_flag(DEAD);
		var0004 = SIMON->get_object_position();
		var0004[0x0001] -= var0004[0x0003] / 0x0002;
		var0004[0x0002] -= var0004[0x0003] / 0x0002;
		UI_sprite_effect(ANIMATION_PURPLE_BUBBLES, var0004[0x0001], var0004[0x0002], 0x0000, 0x0000, 0x0000, LOOP_ONCE);
		UI_play_sound_effect(0x0077);
		SIMON->remove_npc();
		G_SIMON->move_object(var0004);
		G_SIMON->set_alignment(EVIL);
		G_SIMON->set_new_schedules(MIDNIGHT, DANCE, [var0004[0x0001], var0004[0x0002]]);
		G_SIMON->run_schedule();
		Func097F(G_SIMON, "@Lorfag Tar!@", 0x0002);
		var0005 = script AVATAR {
			nohalt;
			wait 15;
			call Func0442;
		};
		gflags[GOBLIN_SIMON_DEAD] = true;
		var0005 = AVATAR->find_nearby(ANY_SHAPE, 0x0028, MASK_NPC2);
		for (var0008 in var0005 with var0006 to var0007) {
			var0008->set_opponent(G_SIMON);
			var0008->set_oppressor(G_SIMON);
		}
		abort;
	}
	if ((event == DOUBLECLICK) && (SIMON->get_schedule_type() != STANDTHERE)) {
		Func097F(AVATAR, "@Hello!@", 0x0000);
		SIMON->Func07D1();
		Func097F(SIMON, "@Welcome!@", 0x0002);
		if (SIMON->get_schedule_type() != TEND_SHOP) {
			SIMON->set_schedule_type(TALK);
		} else {
			var0005 = script SIMON after 5 ticks {
				nohalt;
				call Func044C;
			};
			SIMON->set_schedule_type(STANDTHERE);
		}
	}
	if (event == SCRIPTED) {
		event = STARTED_TALKING;
	}
	if (event == STARTED_TALKING) {
		SIMON->run_schedule();
		SIMON->clear_item_say();
		SIMON->show_npc_face0(0x0000);
		if (item == AVATAR->get_npc_object()) {
			AVATAR->clear_item_flag(IN_ACTION);
			gflags[TRIED_SIMONS_ALE] = true;
			say("\"Unusual taste, eh? I dare say I am the only one outside of the city of Fawn who drinks it.\"");
			say("\"I would share more with thee, but I think that thou dost not appreciate it. Besides, I must clean this foulness!\"");
			SIMON->set_schedule_type(LOITER);
			Func097F(SIMON, "@Such a waste!@", 0x0000);
			abort;
		}
		if (!var0001) {
			say("\"How may I help thee? My name is Simon.\"");
			SIMON->set_item_flag(MET);
		} else {
			say("\"How can I help, ",
				var0000,
				"?\"");
		}
		add(["duties", "visitors"]);
		if (gflags[FOUND_BROWN_BOTTLE] && gflags[KNOW_BROWN_BOTTLE_IS_FAWNISH_ALE]) {
			add("brown bottle");
		}
		if (gflags[ASK_SIMON_ABOUT_STRANGE_WINE] && (!gflags[KNOWS_ICEWINE_ORIGIN])) {
			add("strange wine");
		}
		if (gflags[AVATAR_IS_KNIGHT]) {
			add("traitor");
		}
		converse ("bye") {
			case "duties" (remove):
				say("\"I am the innkeeper of The Sleeping Soldier, Monitor's inn. If thou dost need a bed, I can certainly accommodate thee.\"");
				if (!gflags[TRIED_SIMONS_ALE]) {
					say("\"Or if thou dost care to join me in a bottle of ale, I will gladly share with thee.\"");
					add("ale");
				}
				add(["innkeeper", "The Sleeping Soldier", "Monitor", "bed"]);
				fallthrough;

			case "innkeeper" (remove):
				say("\"I have been Monitor's innkeeper for -- well, longer than I care to remember! I am probably the oldest person in town. I can remember when Marsten, our current Lord of Monitor, was but a baby! But I have no complaints. It hath been a fair life.\"");
				add("life");
				fallthrough;

			case "life" (remove):
				say("\"Well, one cannot truly control one's destiny, can one? I have had my share of misfortune. I have learned to move forward and try and forget the past.\"");
				add(["misfortune", "the past"]);
				fallthrough;

			case "misfortune" (remove):
				say("\"Alas, long ago, my young bride was killed by Goblins. We had ventured out onto the roads to journey to Fawn. At that time I was a Knight, and I stupidly believed that I could protect her on mine own. We were ambushed by the foul creatures. I barely escaped with mine own life.\"");
				fallthrough;

			case "the past" (remove):
				say("\"When I was young I was a Knight of Monitor. I suppose technically I still am. Mine age prevents me from performing any Quests of Courage or going on patrol, of course. I passed the Test of Knighthood, but shortly afterwards the incident with the Goblins occurred. I am afraid that I had no more desire to battle after that. I have chosen to live quietly and run the inn.\"");
				fallthrough;

			case "The Sleeping Soldier" (remove):
				say("\"'Tis an old inn. As old as Monitor itself. I can gladly accommodate thee if thou dost wish.\"");
				fallthrough;

			case "Monitor" (remove):
				say("\"I have lived here all my life. My parents were killed when I was very young. In a Goblin raid, of course. Most deaths are usually caused by Goblins. We have spent our entire history fighting the creatures.\"");
				add("Goblins");
				fallthrough;

			case "Goblins" (remove):
				say("\"No one knows where their home is. Templar is our local Goblin expert, so thou shouldst speak with him.\"");
				gflags[ASKED_TEMPLAR_ABOUT_GOBLINS] = true;
				say("\"Since the death of Astrid, some say that there is a traitor amongst us -- selling our secrets to the Goblins.\"");
				if (!var0003) {
					add("traitor");
				}
				fallthrough;

			case "traitor" (remove):
				var0003 = true;
				say("\"I have mine own suspicions. Take a close look at Krayg. He seems to spend a lot of time in the woods on long walks... alone.\"");
				var0009 = true;
				fallthrough;

			case "bed" (remove):
				if (SIMON->get_schedule_type() == TEND_SHOP) {
					say("\"The cost is 5 monetari per person. Wouldst thou like a room for the night?\"");
					if (Func0955()) {
						var000A = UI_get_array_size(UI_get_party_list()) * 0x0005;
						var000B = PARTY->count_objects(0x03B7, QUALITY_ANY, FRAME_ANY);
						if (var000B >= var000A) {
							say("\"Here is thy key.\"");
							var000C = UI_remove_party_items(var000A, 0x03B7, QUALITY_ANY, FRAME_ANY, 0x0000);
							var0005 = Func099B(AVATAR, 0x0001, 0x0281, 0x004A, 0x0006, 0x0000, true);
						} else {
							var000D = Func0992(0x0001, "@But we do not have enough money...@", 0x0000, false);
							0x0000->set_conversation_slot();
							if (var000D == AVATAR) {
								say("\"I do believe thou dost not have enough monetari. Please return when thou dost have the appropriate amount.\"");
							} else {
								0x0000->set_conversation_slot();
								say("\"Please return when thou dost have the appropriate amount.\"");
							}
						}
					} else {
						say("\"Some other time, then.\"");
					}
				} else {
					say("\"I can give thee a room if thou wilt come to mine inn when I am open!\"");
				}
				fallthrough;

			case "ale" (remove):
				say("\"Yes, thou mayest drink thy fill of ale here. But I am particularly fond of mine own personal brand of ale. Have a drink?\"");
				gflags[KNOW_BROWN_BOTTLE_IS_FAWNISH_ALE] = true;
				if (gflags[FOUND_BROWN_BOTTLE]) {
					add("brown bottle");
				}
				var000E = Func0955();
				if (var000E) {
					SIMON->set_schedule_type(WAIT);
					Func094E(AVATAR, "@Pfffz!@");
					var000D = Func0992(0x0001, 0x0000, 0x0000, false);
					if (var000D != AVATAR) {
						var000D->show_npc_face0(0x0000);
						say("\"",
							var0002,
							"! Art thou all right?\"");
						Func097F(var000D, "@What a mess!@", 0x0005);
						UI_remove_npc_face0();
						0x0000->set_conversation_slot();
					}
					AVATAR->halt_scheduled();
					AVATAR->Func0620();
					var0005 = script AVATAR after 25 ticks {
						nohalt;
						call Func044C;
					};
					var0005 = script AVATAR {
						nohalt;
						wait 5;
						actor frame bowing;
						wait 4;
						actor frame kneeling;
						wait 4;
						actor frame sleeping;
						wait 4;
						actor frame standing;
					};
					Func094F(AVATAR, ["@Ohh!@", "@Eeehhh!@", "@Bleh!@", "@Yuk!@"]);
					var0005 = script AVATAR after 17 ticks {
						nohalt;
						call Func0795;
					};
					var000F = UI_create_new_object(0x0268);
					if (var000F) {
						var000F->set_item_frame(0x0009);
						var000F->set_item_flag(TEMPORARY);
						var0010 = AVATAR->get_object_position();
						var0011 = UI_update_last_created(var0010);
					}
					abort;
				}
				say("\"Suit thyself, then.\"");
				fallthrough;

			case "visitors" (remove):
				say("\"The only two memorable visitors we have had -- besides thyself -- were a fat sage and a scholar.\"");
				add(["fat sage", "scholar"]);
				fallthrough;

			case "fat sage" (remove):
				say("\"He had such a curiosity about the ancient ruins. I believe he followed Renfry into the Crypts so he could look around -- something there fascinated him.\"");
				say("\"Thou shouldst also speak with Andral, the sculptor. He and the sage spent many hours in conversation, here at the inn.\"");
				say("\"I believe he went northeast from here, towards the little hamlet of Sleeping Bull.\"");
				var000D = Func0992(DUPRE, "@The man's name -- dost thou recall?!@", 0x0000, false);
				if (var000D != AVATAR) {
					0x0000->set_conversation_slot();
				}
				say("\"Now what was that man's name? It was a simple name, unpleasant sounding and mean...\"");
				say("\"Batlin, that was it. He called himself the Sage Batlin.\"");
				var000D = Func0992(SHAMINO, "@We have found Batlin's trail!@", 0x0000, false);
				if (var000D != AVATAR) {
					0x0000->set_conversation_slot();
				}
				say("\"Oh, and did I mention that he had several underlings travelling with him? There was a warrior, a sailor, and a hooded man.\"");
				UI_remove_npc_face1();
				add(["warrior", "sailor", "hooded man"]);
				fallthrough;

			case "warrior" (remove):
				say("\"Standarr had a disagreement with this warrior. I'd wager he could tell thee a tale or two about him!\"");
				gflags[ASKED_STANDARR_ABOUT_BRUNT] = true;
				fallthrough;

			case "sailor" (remove):
				say("\"A swarthy man who was called Deadeye. He had the look of a pirate about him. Shazzana spent a bit of time with him as I recall.\"");
				gflags[ASKED_SHAZZANA_ABOUT_SAILOR] = true;
				fallthrough;

			case "hooded man" (remove):
				say("\"I noticed a funny smell about him... almost like -- brimstone? I also could have sworn that under his hood there were horns upon his head. But, no -- that is foolish. It must be some kind of trick.\"");
				fallthrough;

			case "scholar" (remove):
				say("\"She said she was researching the land and seemed anxious to learn all about Serpent Isle. Spektor dealt with her, mostly.\"");
				gflags[ASKED_SPEKTOR_ABOUT_GWENNO] = true;
				if (IOLO->npc_nearby()) {
					IOLO->show_npc_face1(0x0000);
					0x0001->set_conversation_slot();
					say("\"Gwenno! It must have been Gwenno!\"");
					UI_remove_npc_face1();
					0x0000->set_conversation_slot();
					say("\"Yes, I believe that was her name...\"");
					IOLO->show_npc_face1(0x0000);
					say("\"",
						var0002,
						"! What luck! We have found a trail to follow! Oh, Gwenno! Dost thou know where she went from here, milord?\"");
					UI_remove_npc_face1();
					0x0000->set_conversation_slot();
					say("\"I believe she went east, anxious to learn the wisdom of the Xenkan Monks. She set sail with Captain Hawk, bound for Moonshade and points beyond.\"");
					say("\"Of course, this was before the Storms. No sailor will brave these dangerous waters now.\"");
					IOLO->show_npc_face1(0x0000);
					say("\"Praise Virtue! This means she is alive and well! I thank thee, sir, for this woman is my wife!\"");
					UI_remove_npc_face1();
					0x0000->set_conversation_slot();
					say("\"Very kind woman, she was, sir.\"");
				} else {
					say("\"Her name was Gwenno. She left here for the east, anxious to learn the wisdom of the Xenkan Monks.\"");
					say("\"Of course, this was before the Storms. No sailor will brave these dangerous waters now.\"");
					var000D = Func0992(0x0001, "@What luck! We have found a trail to follow!@", 0x0000, false);
					0x0000->set_conversation_slot();
				}
				fallthrough;

			case "brown bottle" (remove):
				say("\"Hmmm. I cannot imagine... oh yes, I remember. I was taking a walk in that area. I must have been careless and dropped the bottle.\"");
				UI_push_answers();
				add(["Walk?", "area", "change subject"]);
				fallthrough;

			case "Walk?" (remove):
				say("\"That is correct. I was taking a walk. Sometimes I want to exercise and enjoy the fresh air.\"");
				add(["Way up there?", "What about Goblins?"]);
				fallthrough;

			case "Way up there?" (remove):
				say("\"Yes. What is wrong with that?\"");
				fallthrough;

			case "What about Goblins?" (remove):
				say("\"What about them? They did not bother me. We cannot let them control our lives!\"");
				fallthrough;

			case "area" (remove):
				say("\"Is that the area they believe is the Goblin rendezvous? I do not believe it. I have never seen Goblins there.\"");
				var000D = Func0992(DUPRE, 0x0000, 0x0000, false);
				if (var000D != AVATAR) {
					var000D->show_npc_face1(0x0000);
					say("\"So thou dost go there often?\"");
					UI_remove_npc_face1();
					0x0000->set_conversation_slot();
					say("\"Er, no, not at all. I only meant I did not see any Goblins then.\"");
					var000D->show_npc_face1(0x0000);
					say("\"Mine instincts tell me this man is lying, Avatar!\"");
					UI_remove_npc_face1();
					0x0000->set_conversation_slot();
				}
				add("Thou art lying!");
				fallthrough;

			case "Thou art lying!":
				UI_play_music(0x0010, Func09A0(0x0005, 0x0001));
				say("\"So I have been found out! Well, to the blazes with it all!!\"");
				var0004 = SIMON->get_object_position();
				while (var0004[0x0003] > 0x0000) {
					var0004[0x0001] -= 0x0001;
					var0004[0x0002] -= 0x0001;
					var0004[0x0003] -= 0x0002;
				}
				SIMON->obj_sprite_effect(ANIMATION_PURPLE_BUBBLES, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, LOOP_ONCE);
				var0004 = SIMON->get_object_position();
				SIMON->remove_npc();
				G_SIMON->move_object(var0004);
				G_SIMON->set_alignment(EVIL);
				G_SIMON->set_new_schedules(MIDNIGHT, DANCE, [var0004[0x0001], var0004[0x0002]]);
				G_SIMON->run_schedule();
				Func097F(G_SIMON, "@Lorfag Tar!@", 0x0002);
				var0005 = script AVATAR {
					nohalt;
					wait 15;
					call Func0442;
				};
				gflags[GOBLIN_SIMON_DEAD] = true;
				abort;

			case "change subject" (remove):
				say("\"Gladly! Thou hast come to thy senses...\"");
				UI_pop_answers();
				fallthrough;

			case "strange wine" (remove):
				say("\"The Rangers of Moonshade make wine. Perhaps it is from there that this wine thou dost speak of hath come.\"");
				fallthrough;

			case "bye":
				Func097F(AVATAR, "@So long!@", 0x0000);
				Func097F(SIMON, "@Come again!@", 0x0002);
				break;
		}
	}
	if (event == PROXIMITY) {
		var0012 = SIMON->get_schedule_type();
		var0013 = UI_die_roll(0x0001, 0x0004);
		if (var0012 == TEND_SHOP) {
			if (var0013 == 0x0001) {
				var0014 = "@Need a room?@";
			}
			if (var0013 == 0x0002) {
				var0014 = "@Fine lodgings!@";
			}
			if (var0013 == 0x0003) {
				var0014 = "@Rest thy bones here!@";
			}
			if (var0013 == 0x0004) {
				var0014 = "@Sleep well here!@";
			}
			SIMON->item_say(var0014);
		}
	}
}

extern var Func0954 0x954 ();
extern var Func0953 0x953 ();
extern void Func097F 0x97F (var var0000, var var0001, var var0002);
extern var Func0988 0x988 (var var0000, var var0001);
extern void Func07D1 object#(0x7D1) ();
extern void Func07D2 object#(0x7D2) ();
extern var Func0992 0x992 (var var0000, var var0001, var var0002, var var0003);
extern var Func0955 0x955 ();
extern var Func097D 0x97D (var var0000, var var0001, var var0002, var var0003, var var0004);
extern var Func0996 0x996 (var var0000, var var0001, var var0002, var var0003, var var0004, var var0005, var var0006);
extern var Func099B 0x99B (var var0000, var var0001, var var0002, var var0003, var var0004, var var0005, var var0006);
extern void Func0865 0x865 ();

void Func044D object#(0x44D) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;
	var var0008;
	var var0009;
	var var000A;
	var var000B;
	var var000C;

	var0000 = Func0954();
	var0001 = Func0953();
	if ((event == SI_PATH_SUCCESS) || (event == SI_PATH_FAILURE)) {
		SPEKTOR->set_schedule_type(WANDER);
	}
	if (event == PROXIMITY) {
		if (gflags[PROVED_SPEKTOR_IS_TRAITOR]) {
			var0002 = UI_die_roll(0x0001, 0x0003);
			if (var0002 == 0x0001) {
				SPEKTOR->item_say("@My money...@");
			}
			if (var0002 == 0x0002) {
				SPEKTOR->item_say("@It was his plan!@");
				if (MARSTEN->npc_nearby()) {
					Func097F(MARSTEN, "@Quiet!@", 0x0003);
				}
			}
			if (var0002 == 0x0003) {
				SPEKTOR->item_say("@I hate thee!@");
			}
		} else {
			var0003 = [CALADIN, BRENDANN];
			if (!gflags[PROVED_MARSTEN_IS_TRAITOR]) {
				var0003 &= MARSTEN;
			} else {
				var0003 &= SHAZZANA;
			}
			for (var0006 in var0003 with var0004 to var0005) {
				if (!var0006->npc_nearby()) {
					var0003 = Func0988(var0006, var0003);
				}
			}
			if (var0003 == []) {
				abort;
			}
			SPEKTOR->clear_item_say();
			var0007 = var0003[UI_get_random(UI_get_array_size(var0003))];
			var0007->clear_item_say();
			var0008 = UI_get_random(0x0006);
			if (var0008 == 0x0001) {
				SPEKTOR->item_say("@Stop the rumors!@");
				Func097F(var0007, "@Impossible.@", 0x0003);
			}
			if (var0008 == 0x0002) {
				SPEKTOR->item_say("@Must write this down.@");
			}
			if (var0008 == 0x0003) {
				if (GOBLIN_KING->get_item_flag(DEAD)) {
					var0007->item_say("@The Goblins are weak.@");
					Func097F(SPEKTOR, "@Be cautious...@", 0x0003);
				} else {
					var0007->item_say("@Where are the Goblins?@");
					Func097F(SPEKTOR, "@Send a patrol.@", 0x0003);
				}
			}
			if (var0008 == 0x0004) {
				if (!gflags[SPEKTOR_ADMITS_HIS_CRIMES]) {
					SPEKTOR->item_say("@A storm approaches.@");
					Func097F(var0007, "@Another one?@", 0x0003);
					UI_set_weather(RAIN);
				} else {
					SPEKTOR->item_say("@I am not a thief.@");
					Func097F(var0007, "@Of course not.@", 0x0003);
				}
			}
			if (var0008 == 0x0005) {
				if (gflags[GOBLIN_SIMON_DEAD]) {
					SPEKTOR->item_say("@Poor Simon...@");
					Func097F(var0007, "@But he was a traitor!@", 0x0002);
				} else if (gflags[PROVED_MARSTEN_IS_TRAITOR]) {
					SPEKTOR->item_say("@Kill Marsten now!@");
					Func097F(var0007, "@Why so hastily?@", 0x0002);
				} else {
					SPEKTOR->item_say("@There is no traitor.@");
					Func097F(var0007, "@I disagree.@", 0x0002);
				}
			}
			if (var0008 == 0x0006) {
				SPEKTOR->item_say("@Money is short.@");
			}
		}
	}
	if ((event == DEATH) && SPEKTOR->get_item_flag(SI_TOURNAMENT)) {
		if (gflags[KNOW_SPEKTOR_IS_TRAITOR]) {
			SPEKTOR->show_npc_face0(0x0000);
			say("\"Very well, I have been found out. Listen to my secrets, brute, for I must confess all with my dying breath...\"");
			say("\"Yes, Marsten and I did plot with the Goblins -- but we did think to cheat them in the end! Then the Leopards would have ruled Monitor.\"");
			say("\"And it was I who stole from the town treasury, for we needed the money to acquire a cache of powerful weapons -- explosive weapons...\"");
			say("\"The blood of Cantra's father weighs upon my soul. He did stumble into our secret, so he had to be killed. If our secret had not been protected, Marsten would have killed me.\"");
			SPEKTOR->clear_item_flag(SI_TOURNAMENT);
			SPEKTOR->reduce_health(0x0032, NORMAL_DAMAGE);
			gflags[SPEKTOR_ADMITS_HIS_CRIMES] = true;
			abort;
		}
		var0009 = script item {
			nohalt;
			call Func01D0;
		};
	}
	if ((event == DOUBLECLICK) && (SPEKTOR->get_schedule_type() != WAIT)) {
		AVATAR->item_say("@Greetings, milord.@");
		SPEKTOR->Func07D1();
		if (gflags[PROVED_SPEKTOR_IS_TRAITOR]) {
			SPEKTOR->set_schedule_type(WAIT);
			Func097F(SPEKTOR, "@Not thee!@", 0x0002);
			SPEKTOR->Func07D2();
			var0009 = script SPEKTOR after 7 ticks {
				nohalt;
				call Func044D;
			};
			abort;
		}
		Func097F(SPEKTOR, "Yes?", 0x0002);
		SPEKTOR->set_schedule_type(TALK);
	}
	do {
		if (event != SCRIPTED) {
			if (event != STARTED_TALKING) {
				break;
			}
		}
		SPEKTOR->run_schedule();
		SPEKTOR->clear_item_say();
		SPEKTOR->show_npc_face0(0x0000);
		if (gflags[PROVED_SPEKTOR_IS_TRAITOR]) {
			if (gflags[SPEKTOR_ADMITS_HIS_CRIMES]) {
				say("\"Mine actions stand beyond the shallow morality of any tribunal. No court can condemn me. The only crime of which I am truly guilty is that I allowed myself to be caught.\"");
			} else {
				say("\"Very well, I have been found out. There is no point in denying my guilt any longer. It was I who stole the money from the treasury.\"");
				say("\"I was in league with Lord Marsten, who schemed to become King of Monitor. The Bears and Wolves would have been powerless!\"");
				say("\"Cantra's father stumbled into our secret cave, so he had to be killed. If the secret of the explosive weapons had been revealed, Marsten would have killed me...\"");
				gflags[SPEKTOR_ADMITS_HIS_CRIMES] = true;
			}
		} else {
			var000A = SPEKTOR->get_item_flag(MET);
			if (var000A) {
				say("\"Yes, how may I help?\"");
			} else {
				say("\"I am Spektor, treasurer of Monitor.\"");
				SPEKTOR->set_item_flag(MET);
			}
			add(["duties", "exchange coins"]);
			if (gflags[KNOW_MARSTEN_IS_TRAITOR] && (!(gflags[PROVED_MARSTEN_IS_TRAITOR] || gflags[TELL_SPEKTOR_ABOUT_TRAITOR]))) {
				add("know traitor");
			}
			if (gflags[ASK_SPEKTOR_ABOUT_STRANGE_COINS] && (!gflags[KNOWS_FILARI_OWNER])) {
				add("strange coins");
			}
			if (gflags[ASKED_SPEKTOR_ABOUT_GWENNO]) {
				add("Gwenno");
			}
			if (!(gflags[IOLO_MADE_EQUIPMENT_LIST] && gflags[KNOWS_IOLO_IMPRISONED])) {
				add("enchanter");
			}
			if (gflags[TELL_SPEKTOR_ABOUT_TRAITOR] && (!gflags[PROVED_MARSTEN_IS_TRAITOR])) {
				add("evidence");
			}
			if (gflags[KNOW_OF_MONITOR_THIEF] && (!gflags[SPEKTOR_ADMITS_HIS_CRIMES])) {
				add("thief");
			}
		}
		converse ("bye") {
			case "duties" (remove):
				say("\"Frankly, I do so many things. I am Monitor's treasurer. Lord Marsten may order things done, but I must find a way to pay for it all!\"");
				say("\"I handle the books and the paperwork, and I'm the local money exchanger. I also collect and administer the taxes.\"");
				say("\"Frankly, I'm not much of a fighter, even though I am a Knight.\"");
				add(["taxes", "Knight", "exchange coins"]);
				fallthrough;

			case "taxes" (remove):
				say("\"Our Pikemen patrol the major roads connecting Monitor with Fawn and Sleeping Bull, and man the guard towers.\"");
				say("\"In better times, caravans travelled these routes, and we collected a fat reward from merchants eager for our protection.\"");
				if (GOBLIN_KING->get_item_flag(DEAD)) {
					say("\"With the Goblin King slain, perhaps the roads will again be filled. But the storms also discourage travel...\"");
				} else {
					say("\"But now, the rumors of a gathering Goblin invasion have scared the travellers off the roads! Frankly, this is nonsense.\"");
					add("invasion");
				}
				fallthrough;

			case "invasion" (remove):
				say("\"The Knights of Monitor have repelled such Goblin aggressions successfully in the past and they shall do so again.\"");
				fallthrough;

			case "Knight" (remove):
				say("\"Well, I dutifully passed the Test of Knighthood when I was fifteen. But frankly, not everyone was born to be a Knight. I admit it.\"");
				say("\"What I am is an intellectual. Other Knights may scoff, but I don't care. I might be an easy target on the List Field, but in a debate I'm a killer!\"");
				if (!gflags[SLAIN_WOLF]) {
					say("\"Perhaps thou shouldst consider taking the Test of Knighthood. It is not so difficult, with proper training.\"");
					say("\"We citizens are so much nicer to thee when thou art a Knight, rather than a stranger. We distrust outsiders.\"");
					add("Test of Knighthood");
				}
				fallthrough;

			case "thief" (remove):
				say("\"Yes, frankly, 'tis true. But I do not like to talk about it.\"");
				say("\"Someone in Monitor is a thief. Money is being taken from the treasury. 'Tis a mystery.\"");
				say("\"The Bears think the Wolves are responsible. And, of course, the Wolves think the Bears are responsible. We Leopards are doing our best to keep them from killing each other.\"");
				say("\"Please keep this to thyself. Only a few select individuals are aware of this crime. Frankly, we do not want a panic.\"");
				add(["Bears", "Wolves", "Leopards", "frankly"]);
				fallthrough;

			case "Bears", "Wolves", "Leopards" (remove):
				say("\"I tire of this entire system. Wolves! Bears! Leopards! Why can we not be united, rather than divided into Commands?\"");
				say("\"I am a Leopard, and frankly, we're the only level- headed ones. When a Leopard like Lord Marsten is in residence as Lord of Monitor, things are much more in... balance.\"");
				say("\"As for the Wolves and the Bears, they are like children. \"");
				fallthrough;

			case "frankly" (remove):
				say("\"Yes, I do say that a lot, do I not? I apologize. 'Tis a bad habit. Frankly... er, to tell the truth, I should stop.\"");
				fallthrough;

			case "Gwenno" (remove):
				say("\"There was a woman here a while ago who spent much time in the Hall of Monitor, examining our museum display. Very friendly.\"");
				var0007 = Func0992(IOLO, "@Where did she go from here? Dost thou know?@", 0x0000, false);
				if (var0007 != AVATAR) {
					0x0000->set_conversation_slot();
				}
				say("\"She left here for the east. To study at the library on Monk Isle, as I recall.\"");
				add("Monk Isle");
				var0007 = Func0992(IOLO, "@Avatar! We must journey onward and find her!@", 0x0000, false);
				if (var0007 != AVATAR) {
					0x0000->set_conversation_slot();
				}
				fallthrough;

			case "Monk Isle" (remove):
				say("\"Frankly, 'tis a mysterious place. I do not know much about it, except the legend that wise monks dwell there.\"");
				say("\"The only way to go there is by ship, but there are no sailors here -- the storms have discouraged them.\"");
				say("\"Perhaps thou couldst hire a captain in Fawn -- which is the city of fishermen -- or at the hamlet of Sleeping Bull.\"");
				add(["Fawn", "Sleeping Bull"]);
				fallthrough;

			case "Fawn" (remove):
				say("\"Fawn is a coastal town filled with the worshippers of beauty. Frankly, I find those people to be a little too superficial for my liking.\"");
				fallthrough;

			case "Sleeping Bull" (remove):
				say("\"The inn there is a very old establishment, built in the days before the founding of the Three Cities. The village is built around the inn.\"");
				say("\"Since it is such a crossroads, thou canst often meet all sorts of interesting folk there. And it is the direct link to the City of Mages.\"");
				add("City of Mages");
				fallthrough;

			case "City of Mages" (remove):
				say("\"A place where I shall never be seen! I distrust magic in all its forms.\"");
				say("\"Moonshade is on the Isle of Beyond, which is across the channel from Sleeping Bull. Thou wouldst need a boat to journey there.\"");
				if (!gflags[HAVE_NEW_SPELLBOOK]) {
					var0007 = Func0992(IOLO, "@Perhaps thou couldst obtain a new spellbook there...@", 0x0000, false);
					if (var0007 != AVATAR) {
						0x0000->set_conversation_slot();
					}
				}
				fallthrough;

			case "Test of Knighthood" (remove):
				say("\"'Tis actually quite easy. Do not believe what the Knights will tell thee. Frankly, if I can pass it, anyone can!\"");
				say("\"If thou desirest to know more, I would suggest speaking with Caladin. He is the instructor for young Knight candidates.\"");
				say("\"Also, thou couldst speak with little Cantra. She is preparing to take the Test next month, and is full of information.\"");
				fallthrough;

			case "know traitor" (remove):
				if (gflags[KNOW_SPEKTOR_IS_TRAITOR]) {
					say("\"What!? What dost thou mean? Art thou calling me a traitor? I may not be much of a fighter, but I can defend myself!\"");
					SPEKTOR->set_schedule_type(SHY);
					Func097F(SPEKTOR, "@Beware!@", 0x0000);
					abort;
				}
				say("\"Marsten is the traitor? This is too incredible to believe. Hast thou proof?\"");
				if (Func0955()) {
					say("\"I must see this. Might I see the evidence?\"");
					if (!(Func097D(PARTY, 0x0001, 0x031D, 0x0078, FRAME_ANY) || (Func097D(PARTY, 0x0001, 0x031D, 0x0079, FRAME_ANY) || Func097D(PARTY, 0x0001, 0x031D, 0x007A, FRAME_ANY)))) {
						var0007 = Func0992(IOLO, "@We did not bring it with us...@", "@I did not bring it.@", false);
						0x0000->set_conversation_slot();
						say("\"Then I can do nothing for thee. Unseen evidence is useless evidence.\"");
					} else if (Func0955()) {
						var0009 = Func0996(PARTY, SPEKTOR, 0x0001, 0x031D, 0x0078, FRAME_ANY, 0x0000);
						var0009 = Func0996(PARTY, SPEKTOR, 0x0001, 0x031D, 0x0079, FRAME_ANY, 0x0000);
						var0009 = Func0996(PARTY, SPEKTOR, 0x0001, 0x031D, 0x007A, FRAME_ANY, 0x0000);
						say("\"I shall study this evidence, and if thou art right, I will bring it before the other Lords.\"");
						gflags[TELL_SPEKTOR_ABOUT_TRAITOR] = true;
						say("\"Now leave me, so that I may peruse this matter.\"");
						Func097F(SPEKTOR, "@Let me be.@", 0x0000);
						abort;
					} else {
						say("\"Then I can do nothing for thee. Unseen evidence is useless evidence.\"");
					}
				} else {
					say("\"Then be on thy way! Marsten is the traitor -- what a lark!\"");
					Func097F(SPEKTOR, "@Don't waste my time...@", 0x0000);
					abort;
				}
				fallthrough;

			case "evidence" (remove):
				say("\"Give me time, ",
					var0000,
					"! Such matters are not quickly resolved.\"");
				Func097F(SPEKTOR, "@More time!@", 0x0000);
				abort;

			case "enchanter" (remove):
				if (gflags[PAID_IOLO_FINE]) {
					say("\"I am still not certain if we can trust Iolo, that enchanter friend of thine. Tell him he had better be on his best behavior. That is a friendly warning.\"");
				} else if (gflags[MARSTEN_WONT_RELEASE_IOLO]) {
					say("\"Perhaps thou shouldst pay me, say -- a fine -- yes, a fine! That's it. To pay for this rogue Iolo's misdeeds. After all, I am the city treasurer, thou dost know. So t'would be most proper.\"");
					add("fine");
				} else {
					say("\"Oh, thou must be speaking of that wild rogue mage that was recently arrested trying to disrupt Groat's funeral! I believe he said his name was Iolo. Thou shouldst speak with Lord Marsten. He dealt with him.\"");
				}
				fallthrough;

			case "fine" (remove):
				say("\"Wouldst thou be willing to pay a fine of 30 Monetari?\"");
				var000B = Func0955();
				if (var000B) {
					var000C = UI_remove_party_items(0x001E, 0x03B7, QUALITY_ANY, FRAME_ANY, false);
					if (var000C) {
						say("\"Very well. Here is the key to the offender's cell. Tell him to consider himself lucky. Seldom is the town of Monitor so forgiving of the trespasses of others.\"");
						var0009 = Func099B(AVATAR, 0x0001, 0x0281, 0x0068, 0x0000, 0x0000, true);
						gflags[PAID_IOLO_FINE] = true;
					} else {
						say("\"Thou dost not have 30 Monetari! Art thou trying to swindle me! Bah!\"");
						abort;
					}
				} else {
					say("\"So! Thy friend is not worth the price of justice, eh? Then let him rot!\"");
				}
				fallthrough;

			case "exchange coins":
				Func0865();
				fallthrough;

			case "strange coins" (remove):
				say("\"The coins thou hast described are the currency of the city of Fawn. But where thou mayest have gotten them, without travelling to Fawn, I haven't a clue!\"");
				fallthrough;

			case "bye":
				UI_remove_npc_face0();
				UI_remove_npc_face1();
				Func097F(AVATAR, "Goodbye!", 0x0000);
				Func097F(SPEKTOR, "Go in Courage!", 0x0002);
				break;
		}
	} while (false);
}

extern var Func0954 0x954 ();
extern void Func07D1 object#(0x7D1) ();
extern void Func097F 0x97F (var var0000, var var0001, var var0002);
extern var Func0956 0x956 (var var0000);
extern void Func0867 0x867 ();
extern void Func0866 0x866 ();
extern void Func0868 0x868 ();
extern var Func097D 0x97D (var var0000, var var0001, var var0002, var var0003, var var0004);
extern void Func097A 0x97A (var var0000);

void Func044E object#(0x44E) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;

	var0000 = Func0954();
	if (gflags[AVATAR_IS_KNIGHT]) {
		var0000 = "Knight";
	}
	var0001 = STANDARR->get_item_flag(MET);
	if (STANDARR->get_schedule_type() == BLACKSMITH) {
		var0002 = true;
	}
	if (event == DOUBLECLICK) {
		AVATAR->item_say("@Hail there!@");
		STANDARR->Func07D1();
		Func097F(STANDARR, "@Greetings.@", 0x0003);
		STANDARR->set_schedule_type(TALK);
	}
	if (event == STARTED_TALKING) {
		STANDARR->run_schedule();
		STANDARR->clear_item_say();
		STANDARR->show_npc_face0(0x0000);
		if (var0001) {
			say("\"What dost thou wish of me, ",
				var0000,
				"?\"");
		} else {
			say("\"I am Standarr the Armourer. What dost thou wish of me?\"");
			STANDARR->set_item_flag(MET);
		}
		if (gflags[ASK_STANDARR_ABOUT_BREASTPLATE] && (!gflags[KNOWS_BREAST_PLATE_OWNER])) {
			add("strange breastplate");
		}
		if (gflags[ASKED_STANDARR_ABOUT_BRUNT]) {
			add("Brunt");
		}
		if (gflags[ASKED_STANDARR_ABOUT_QUESTS]) {
			add("Quests of Courage");
		}
		if (gflags[PROVED_MARSTEN_IS_TRAITOR]) {
			add("Marsten");
		}
		if (gflags[HAVE_HELM_OF_MONITOR]) {
			add("Helm of Monitor");
		}
		if (gflags[GOBLIN_SIMON_DEAD]) {
			add("Simon");
		}
		if (gflags[POMDIRGUN_IS_DEAD]) {
			add("Pomdirgun");
		}
		converse (["buy", "bye"]) {
			case "Pomdirgun":
				add("Pomdirgun");
				say("\"I envy thee the chance to kill Pomdirgun. I hope thou didst make him suffer!\"");
				fallthrough;

			case "Helm of Monitor" (remove):
				say("\"Thanks to thee for liberating the Helm of Monitor from the Goblins. Thou hast truly earned the title of Champion Knight.\"");
				fallthrough;

			case "Simon" (remove):
				say("\"Simon was a Goblin spy! I would never have suspected...\"");
				fallthrough;

			case "Marsten" (remove):
				say("\"Before he was arrested I worked for Marsten. He was, after all, acting Lord of Monitor. I created a new type of weapon for him. A highly combustible powder that exploded when it came in contact with fire. Thou shouldst keep thine eye open for it. It would be a disaster if it ever fell into the hands of the Goblins.\"");
				fallthrough;

			case "Quests of Courage" (remove):
				say("\"We Knights on occasion go on what we call Quests of Courage. Many times they involve going into the woods on Goblin raids. Other times they involve entering the depths of a dungeon called Furnace. That place is filled with a withering heat and many monsters live there. Recently, a Knight and good friend of ours named Pendar went off on a quest to Furnace in search of a treasure of which he had heard rumors. He hath not returned, and we worry about him and wonder if we shall ever see him again. Perhaps, he is spending his\ttreasure! Ha!\"");
				fallthrough;

			case "Brunt" (remove):
				say("\"Let me tell thee, when in the trade of blacksmith, one doth develop his muscles. I am no weakling, I can assure thee. But this fellow Brunt who did accompany the sage Batlin through town could probably hoist me with his weak arm. Not the brightest of fellows, mind thee. But strong as an ox! He bested me in the tournament, but not by skill. By sheer muscle.\"");
				fallthrough;

			case "buy":
				if (STANDARR->get_schedule_type() == BLACKSMITH) {
					say("\"Wouldst thou be interested in buying or selling?\"");
					var0003 = Func0956(["nothing", "buying", "selling"]);
					if (var0003 == "buying") {
						say("\"Wouldst thou care to buy weapons or armour?\"");
						var0004 = Func0956(["weapons", "armour"]);
						if (var0004 == "weapons") {
							Func0867();
							add("buy weapons");
						} else {
							Func0866();
							add("buy armour");
						}
					}
					if (var0003 == "selling") {
						say("\"I buy only armour, friend, and I do not haggle on the price.\"");
						Func0868();
						add("sell armour");
					}
					if (var0003 == "nothing") {
						say("\"Another time, perhaps.\"");
					}
				} else {
					say("\"Return when my shop is open, and we can talk business.\"");
				}
				fallthrough;

			case "buy weapons":
				Func0867();
				fallthrough;

			case "buy armour":
				Func0866();
				fallthrough;

			case "sell armour":
				Func0868();
				fallthrough;

			case "strange breastplate" (remove):
				var0005 = Func097D(PARTY, 0x0001, 0x01A3, QUALITY_ANY, 0x0000);
				if (var0005) {
					say("\"I recognize this!  This is the ornamental breastplate that I made for Kylista, priestess of Fawn.\"");
					gflags[KNOWS_BREAST_PLATE_OWNER] = true;
				} else {
					say("\"I am familiar with the making of many types of weapon and armour. A pity thou dost not have it with thee. Without looking at it, I can tell thee no more.\"");
				}
				fallthrough;

			case "bye":
				UI_remove_npc_face0();
				UI_remove_npc_face1();
				Func097F(AVATAR, "@Stay well!@", 0x0000);
				Func097F(STANDARR, "@Farewell!@", 0x0003);
				break;
		}
	}
	if (event == PROXIMITY) {
		var0006 = UI_die_roll(0x0001, 0x0004);
		if (var0002) {
			if (var0006 == 0x0001) {
				var0007 = "@Armour?@";
			}
			if (var0006 == 0x0002) {
				var0007 = "@We sell the best armour here!@";
			}
			if (var0006 == 0x0003) {
				var0007 = "@Finest goods here!@";
			}
			if (var0006 == 0x0004) {
				var0007 = "@Best weapons in Monitor!@";
			}
			STANDARR->item_say(var0007);
		} else {
			Func097A(STANDARR);
		}
	}
}

extern var Func0954 0x954 ();
extern var Func097D 0x97D (var var0000, var var0001, var var0002, var var0003, var var0004);
extern void Func07D1 object#(0x7D1) ();
extern void Func097F 0x97F (var var0000, var var0001, var var0002);
extern var Func098D 0x98D ();
extern var Func0932 0x932 (var var0000);
extern void Func0976 0x976 (var var0000, var var0001);
extern void Func0936 0x936 (var var0000, var var0001);
extern void Func092E 0x92E (var var0000);
extern void Func08F0 0x8F0 ();

void Func044F object#(0x44F) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;
	var var0008;
	var var0009;
	var var000A;

	var0000 = Func0954();
	var0001 = TEMPLAR->get_item_flag(MET);
	var0002 = Func097D(PARTY, 0x0001, 0x011D, QUALITY_ANY, 0x0006);
	var0003 = false;
	if (event == DOUBLECLICK) {
		AVATAR->item_say("@Hail, Knight.@");
		TEMPLAR->Func07D1();
		Func097F(TEMPLAR, "@Hail.@", 0x0002);
		TEMPLAR->set_schedule_type(TALK);
	}
	if (event == PROXIMITY) {
		if (gflags[MONITOR_TRAINING]) {
			var0004 = UI_die_roll(0x0001, 0x0003);
			if (var0004 == 0x0001) {
				TEMPLAR->item_say("@Strong hit!@");
			}
			if (var0004 == 0x0002) {
				TEMPLAR->item_say("@Nice form!@");
			}
			if (var0004 == 0x0003) {
				TEMPLAR->item_say("@I could do better.@");
			}
		}
	}
	if (event == DEATH) {
		if (gflags[MONITOR_TRAINING]) {
			var0005 = TEMPLAR->get_oppressor();
			var0005 = 0x0000 - var0005;
			if (!var0005) {
				var0005 = AVATAR;
			}
			if ((var0005 != AVATAR) && (!(var0005 in Func098D()))) {
				var0000 = Func098D();
				var0000 &= AVATAR;
				for (var0008 in var0000 with var0006 to var0007) {
					if (Func0932(var0008)) {
						break;
					}
				} nobreak {
					var0008 = AVATAR;
				}
				TEMPLAR->set_opponent(var0008);
				var0005->set_opponent(var0008);
				Func0976(TEMPLAR, 0x0003);
				Func0976(var0005, 0x0003);
				return;
			}
			if (!gflags[TEMP_FLAG_1]) {
				gflags[TEMP_FLAG_1] = true;
				Func0936(var0005->get_npc_object(), TEMPLAR->get_npc_object());
				return;
			}
			Func092E(var0005);
			return;
		}
		var0009 = script item {
			call Func01D0;
		};
	}
	if (event == STARTED_TALKING) {
		TEMPLAR->clear_item_say();
		TEMPLAR->run_schedule();
		TEMPLAR->show_npc_face0(0x0000);
		Func08F0();
		if (!var0001) {
			say("\"What can I do for thee? I am Templar.\"");
			TEMPLAR->set_item_flag(MET);
		} else {
			say("\"Yes?\"");
		}
		add("duties");
		if (gflags[ASK_TEMPLAR_ABOUT_HAIRBRUSH] && ((!gflags[KNOWS_GOBLIN_BRUSH_ORIGIN]) && gflags[AVATAR_IS_KNIGHT])) {
			add("grisly brush");
		}
		if (gflags[ASKED_TEMPLAR_ABOUT_GOBLINS] && gflags[AVATAR_IS_KNIGHT]) {
			add("Goblins");
		}
		if (gflags[FOUND_BROWN_BOTTLE] && (SIMON->get_schedule_type() != WAIT)) {
			add("brown bottle");
		}
		if (gflags[ASK_TEMPLAR_ARGUS] && gflags[AVATAR_IS_KNIGHT]) {
			add("Argus");
		}
		if (gflags[AVATAR_IS_KNIGHT]) {
			add("traitor");
		}
		converse ("bye") {
			case "grisly brush" (remove):
				say("\"A peculiar brush? I suspect that I already know what it is, but let me see...\"");
				if (var0002) {
					say("\"That is a Goblin hairbrush! Made out of the bones of their victims, or so the legends claim.\"");
					say("\"Perhaps crafted from the thigh bone of one of mine old friends. Someday, thou or I too may be odd bits of furnishings in some Goblin hut!\"");
					gflags[KNOWS_GOBLIN_BRUSH_ORIGIN] = true;
					add("Goblin artifacts");
				} else {
					say("\"I cannot identify the object if thou dost not show it to me. I will not waste my time making wild guesses.\"");
				}
				fallthrough;

			case "Goblin artifacts" (remove):
				say("\"Goblins have some pretty strange things. Jewelry made from human bones. Drums made with human skin. Much broken glass. Very macabre.\"");
				say("\"I suspect their own village must be brimming with such little nightmares.\"");
				say("\"They eat nearly anything, except their own kind. Goblins are especially fond of children. We had to build the city walls to keep their scouts from stealing our babies.\"");
				say("\"The Goblins consider the pelts of the Gwani to be great prizes -- thou canst recognize a Goblin chief by the pelt he wears.\"");
				say("\"The chief always keeps the prize artifacts for himself. But he must lock them away in a safe place, or his followers will steal them!\"");
				add("Gwani pelts");
				fallthrough;

			case "Gwani pelts" (remove):
				say("\"The furs are taken from the Gwani, a race of fierce warriors which live in the far north. They are said to be even more vicious than the Goblins.\"");
				say("\"Gwani fur provides great warmth, but it is also valued for its great beauty -- it sparkles in the light.\"");
				fallthrough;

			case "duties" (remove):
				if (!gflags[AVATAR_IS_KNIGHT]) {
					say("\"What business is it of thee, stranger? Canst thou not see that I am recovering from wounds?\"");
					say("\"I do not wish to spend my limited vitality in idle chatter. I am a warrior, not a clerk...\"");
					Func097F(TEMPLAR, "@Excuse me...@", 0x0000);
					TEMPLAR->set_schedule_type(SHY);
					abort;
				}
				say("\"I am a Knight of Monitor, and a member of the Command of the Bear. I also serve Lord Marsten as his tactical adviser.\"");
				add(["Command of the Bear", "adviser"]);
				fallthrough;

			case "Command of the Bear" (remove):
				say("\"We are by far the strongest of the three commands. The envy of the Serpent Isle.\"");
				fallthrough;

			case "adviser" (remove):
				say("\"Adviser for military matters, that is. Some consider me to be an expert in tactics.\"");
				say("\"For instance, hast thou ever noticed that the Goblins tend to attack in patterns? By observing them, I can sometimes predict when and how they are going to strike next. I like to imagine what it must be like, to be huddled around the fires of their village as they draw their plans against us. The better I can understand them, the better I can defend against them.\"");
				if (gflags[AVATAR_IS_KNIGHT]) {
					UI_push_answers();
					add(["patterns", "when", "how", "change subject"]);
				} else {
					say("\"But I must not speak of these things to a stranger. Thou couldst be a spy for them...\"");
				}
				fallthrough;

			case "patterns" (remove):
				say("\"They are creatures of habit, to be sure. If thou dost know their customs, then thou hast the knowledge to defeat them.\"");
				say("\"They always set their travel camps in the same pattern. The chieftain's hut is the largest, and is in the center.\"");
				say("\"Each day ends with a drunken revel, and then the exhausted celebrants stumble to their huts and sleep until long past daybreak.\"");
				say("\"When raiding a Goblin camp, strike in the morning, just as the sun is coming up. This is when the guards are fewest, and the chance for success is greatest.\"");
				fallthrough;

			case "when" (remove):
				say("\"The Goblins do not seem to like the sun and their most favored time to strike their enemies is precisely after the sun hath set for the night. Many is the time when Goblin armies have marched to the edge of a city or encampment and then they have waited until nightfall. Often these sieges lasted all night long.\"");
				fallthrough;

			case "how" (remove):
				say("\"The Goblins do not practice any sophisticated sort of military strategy or tactics. Mostly they rely on sheer numbers as well as the fear that they inspire in the hearts of men and women.\"");
				fallthrough;

			case "change subject":
				UI_pop_answers();
				say("\"What else dost thou desire of me?\"");
				fallthrough;

			case "Goblins" (remove):
				say("\"'Tis a bloody war we are fighting. That I am alive, today, speaking with thee is a miracle.\"");
				say("\"The Goblins are foul but fascinating creatures. They are more intelligent than one would think. In a bestial way, of course.\"");
				say("\"If only I could speak with their general Pomdirgun! Imagine what that mind must be like -- so calculating, so incisive, yet so utterly inhuman.\"");
				if (gflags[HAVE_HELM_OF_MONITOR]) {
					say("\"Perhaps in my next life I shall see him again. But not for any prolonged period of time, I hope.\"");
				}
				add(["war", "miracle", "Pomdirgun"]);
				fallthrough;

			case "war" (remove):
				say("\"We have been fighting the damn Goblins since our forefathers landed on these shores. This city was built on the site of a Goblin village.\"");
				var000A = Func097D(PARTY, 0x0001, 0x017F, QUALITY_ANY, 0x0001);
				if (gflags[HAVE_HELM_OF_MONITOR] || var000A) {
					say("\"Now that thou hast recovered the Helm of Monitor from their fiendish hands, the scales have again tipped in our favor.\"");
					say("\"How I look forward to the day when the Goblins have been exterminated from this land!\"");
				} else {
					say("\"There had been a balance of sorts, until the ambush of Astrid's patrol. As Knight Champion, she wore the Helm of Monitor, and now the Goblins have it.\"");
					say("\"The power of the Helm cannot be understated! With it, Pomdirgun can once again assemble the Goblin Horde, and invade the lands of Men.\"");
					say("\"Somehow, we must regain the Helm!\"");
				}
				add("forefathers");
				fallthrough;

			case "forefathers" (remove):
				say("\"The greatest battle of the Goblin wars took place in the days when Gurnordir was King of the Goblins.\"");
				say("\"He was the mightiest Goblin who ever lived, and he led the Goblin Horde in the invasion which placed Monitor itself under siege.\"");
				say("\"The Goblins stormed the walls, and fought their way inside the city. However, the Bears surrounded them, and Gurnordir was at last slain.\"");
				say("\"From his dead body was taken the Helm of Courage, and his ashes are enshrined in Knight's Test.\"");
				add(["Helm of Courage", "ashes"]);
				fallthrough;

			case "Helm of Courage" (remove):
				say("\"We now call it the Helm of Monitor, and it is worn by the Knight Champion. But it first came from the Goblins.\"");
				say("\"Whence it came before they got their hands upon it, no one can say.\"");
				say("\"The Helm doth have mystical powers, which we believe are due to being imbued with the essence of Courage.\"");
				fallthrough;

			case "ashes" (remove):
				say("\"As Renfry can tell thee, we Monitorians have a special reverence for the Ashes of the Dead.\"");
				say("\"When a Knight dies, his body must be brought back to Monitor for cremation. The ashes are then placed in the Crypts.\"");
				say("\"In the case of Gurnordir, his ashes have a strange power. Like all ashes, they are imbued with the essence of the living being.\"");
				if (gflags[SLAIN_WOLF]) {
					say("\"As thou hast seen, the ashes are used in the climax of the Test of Knighthood. Somehow, they have the power to summon one's totem animal.\"");
				} else {
					say("\"In the climax of the Test of Knighthood, one doth mix one's own blood with the Ashes of Gurnordir.\"");
					say("\"Through a mystical process, this causes one's own totem animal to appear. Thus, it is revealed to which Command thou dost belong.\"");
				}
				fallthrough;

			case "miracle" (remove):
				say("\"It shames me to say that I am the sole survivor from the ambush of Astrid's patrol. The Goblins left me for dead, but I was merely dazed.\"");
				say("\"There was a heap of bodies where Astrid had last been fighting, but her body was not there. It is obvious to me that they took her alive.\"");
				say("\"I managed to reach Knight's Test, where Shmed gave me shelter and sent for Harnna to bandage my wounds. When I recover, I am going there again!\"");
				UI_push_answers();
				if (!var0003) {
					add("ambush");
				}
				add(["Astrid", "alive", "change subject"]);
				fallthrough;

			case "ambush", "traitor":
				remove("ambush");
				remove("traitor");
				var0003 = true;
				if (gflags[GOBLIN_SIMON_DEAD]) {
					say("\"A Goblin magically transformed himself into a man and hid amongst us as Simon. Amazing! One day we must learn the secret of how they could accomplish this thing.\"");
				} else {
					say("\"It was as if they knew our plans! They were lying in wait across our path, and were upon us in moments. What carnage!\"");
					say("\"It grieves me to say this, but there must be a traitor in Monitor. Someone must have revealed our plans to the Goblins.\"");
					say("\"As a Bear, I know that our Command is innocent. Caladin doth have many faults, but being devious is not one of them.\"");
					say("\"The traitor is either a Wolf or a Leopard. Perhaps if thou dost ask around, thou mightest find clues in this mystery.\"");
					add(["Wolf", "Leopard"]);
				}
				fallthrough;

			case "Wolf" (remove):
				say("\"The Wolves have been disloyal to Monitor since Brendann took charge. He would have us guard the roads, not the city itself!\"");
				say("\"If anyone is the spy, it must be Krayg. He is often out in the woods, alone -- and he never brings back booty or prisoners.\"");
				say("\"What can he be doing? He says that he doth have an old injury, but he's merely a snivelling coward.\"");
				gflags[KNOWS_KRAYG_WALKS_ON_WOODS] = true;
				fallthrough;

			case "Leopard" (remove):
				say("\"Marsten, the leader of the Leopard Command, officially runs the town and he doth have his hands full. Not only are there the Goblins to worry about, but there is also a thief stealing money from the treasury. Spektor, his right hand man, is in charge of that as well. Needless to say it hath made things unpleasant between the commands as of late.\"");
				gflags[KNOW_OF_MONITOR_THIEF] = true;
				fallthrough;

			case "Astrid" (remove):
				say("\"She was the greatest Knight that I have ever had the honor of fighting beside. Carrying on her standard is a challenge to which I will dedicate myself for the rest of my life.\"");
				fallthrough;

			case "alive" (remove):
				say("\"Being captured alive by the Goblins is a far worse fate than being killed by them on the battlefield. Survivors tell horrifying stories of torture, mutilation and things I should not even speak of.\"");
				fallthrough;

			case "Pomdirgun" (remove):
				if (gflags[HAVE_HELM_OF_MONITOR]) {
					say("\"With Pomdirgun dead, those wicked Goblins will be much easier to defeat. His evil brain was constantly able to devise strategies that perplexed us. Thou hast done us a great service and I thank thee.\"");
				} else {
					say("\"He is the Goblin leader -- a king or a chieftain, depending on how one translates the Goblin tongue.\"");
					say("\"Pomdirgun claims to be a direct descendant of Gurnordir. Having heard him curse us on the field of battle, I know that he speaks our tongue -- quite a feat for one of those creatures.\"");
				}
				fallthrough;

			case "brown bottle" (remove):
				say("\"How strange! Thou wouldst never find an intact bottle in a Goblin camp -- the creatures delight in smashing glass. Their barbarian urges are very strong.\"");
				say("\"This must have been left by a Man. At last -- evidence to identify our traitor!\"");
				if (Func097D(PARTY, 0x0001, 0x0268, QUALITY_ANY, 0x0009)) {
					say("\"Such an unusual bottle... Perhaps Lucilla can identify it for thee.\"");
				} else {
					say("\"Thou must inquire to see if anyone can identify this bottle.\"");
				}
				fallthrough;

			case "Argus" (remove):
				say("\"He was a Knight of Monitor with whom I had an altercation. He took bribes, and when my friend accused him of it, Argus slew him on the List Field.\"");
				say("\"Then there was a hue and cry, for the honor of the List Field was at stake! The Wolves wanted to protect Argus, but the Bears were for justice!\"");
				say("\"Shortly afterward, Argus left town. He must have been guilty, or he would have stayed to prove his innocence.\"");
				fallthrough;

			case "bye":
				UI_remove_npc_face0();
				Func097F(AVATAR, "@Bye!@", 0x0000);
				Func097F(TEMPLAR, "@Vigilance!@", 0x0002);
				break;
		}
	}
}

extern var Func0953 0x953 ();
extern void Func07D1 object#(0x7D1) ();
extern void Func0833 0x833 (var var0000);
extern void Func097F 0x97F (var var0000, var var0001, var var0002);
extern var Func0956 0x956 (var var0000);
extern void Func09AC 0x9AC (var var0000, var var0001, var var0002, var var0003);

void Func0450 object#(0x450) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;
	var var0008;

	var0000 = false;
	var0001 = FLICKEN->get_item_flag(MET);
	var0002 = Func0953();
	if (event == DEATH) {
		var0003 = script item {
			nohalt;
			call Func01D0;
		};
	}
	if ((event == PATH_SUCCESS) || (event == SCRIPTED)) {
		FLICKEN->Func07D1();
		Func0833(event);
	}
	if (event == DOUBLECLICK) {
		Func097F(AVATAR, "@Hail!@", 0x0000);
		FLICKEN->Func07D1();
		FLICKEN->clear_item_say();
		FLICKEN->show_npc_face0(0x0000);
		if (!var0001) {
			say("\"Halt! Who art thou and what is thy business?\"");
			var0004 = Func0956(["I am the Avatar", ("I am " + var0002), "Who doth wish to know?"]);
			if (var0004 == "I am the Avatar") {
				say("\"Who? Never heard of thee.\"");
			}
			if (var0004 == ("I am " + var0002)) {
				say("\"I see.\"");
			}
			if (var0004 == "Who wants to know?") {
				say("\"I ask the questions here.\"");
			}
			say("\"Another stranger! Most suspicious. There have not been many travellers recently.\"");
			Func09AC(MARSTEN, 0x0310, 0x0A66, PATROL);
			Func09AC(CALADIN, 0x030F, 0x0A64, PATROL);
			Func09AC(BRENDANN, 0x0310, 0x0A6A, PATROL);
			Func09AC(SPEKTOR, 0x030F, 0x0A68, PATROL);
			add(["open the gate", "strangers"]);
		} else {
			say("\"What is it now?\"");
			add(["name", "duties"]);
			var0005 = FLICKEN->get_object_position();
			var0006 = var0005[0x0001];
			var0007 = var0005[0x0002];
			if ((var0006 > 0x0310) && ((var0006 < 0x0330) && ((var0007 > 0x0AA0) && (var0007 < 0x0AD0)))) {
				add(["gate"]);
			}
		}
		if (gflags[AVATAR_IS_KNIGHT] && (!SIMON->get_item_flag(DEAD))) {
			add("traitor");
		}
		if (gflags[POMDIRGUN_IS_DEAD]) {
			add("Pomdirgun");
		}
		if (gflags[GOBLIN_SIMON_DEAD]) {
			add("Simon");
		}
		if (var0001) {
			add("bye");
		}
		converse (0) {
			case "Pomdirgun" (remove):
				say("\"Thou hast killed the worst enemy Monitor hath ever faced! Surely the day of his death will be cause for celebration for many years to come. Thou dost have my thanks, and the thanks of all of Monitor.\"");
				fallthrough;

			case "Simon" (remove):
				say("\"Perhaps now that Simon was exposed as a Goblin spy the city will be safe again. Then again, I have the feeling that as long as there is a Goblin alive somewhere in the world we will never be truly safe.\"");
				fallthrough;

			case "traitor" (remove):
				say("\"Thou hast mistaken me for someone who wastes time with idle chatter, ",
					var0002,
					".\"");
				say("\"If there is a traitor, no doubt Lord Marsten shall unmask him. Meanwhile, I shall do my duty.\"");
				fallthrough;

			case "open the gate":
				say("\"Art thou friend or foe?\"");
				if (Func0956(["friend", "foe"]) == "friend") {
					say("\"I do not know thou art a friend... I shall let thee in, but thou must have an escort until thou hast spoken to Lord Marsten.\"");
					say("\"Thou canst find him at the Crematorium, mourning for the dead. Follow the road north.\"");
					say("\"Remember, we shall be keeping an eye upon thee!\"");
					Func097F(FLICKEN, "@Pikemen!@", 0x0001);
					var0008 = UI_create_new_object2(0x00E4, [0x032E, 0x0AAF, 0x0000]);
					if (var0008) {
						var0008->set_npc_id(0x0003);
						var0008->set_schedule_type(HOUND);
						var0008->set_alignment(NEUTRAL);
						var0003 = var0008->set_npc_prop(DEXTERITY, 10);
					}
					var0008 = UI_create_new_object2(0x00E4, [0x032C, 0x0ABE, 0x0000]);
					if (var0008) {
						var0008->set_npc_id(0x0003);
						var0008->set_schedule_type(HOUND);
						var0008->set_alignment(NEUTRAL);
						var0003 = var0008->set_npc_prop(DEXTERITY, 10);
					}
					AVATAR->set_item_flag(DONT_MOVE);
					Func0833(event);
					FLICKEN->set_item_flag(MET);
					abort;
				}
				say("\"Then I shall certainly not let thee in.\"");
				Func097F(FLICKEN, "@Be thou gone!@", 0x0000);
				abort;

			case "strangers" (remove):
				say("\"The Colored Storms and the Goblins have kept most people off the roads, and so 'tis unusual to see strangers in Monitor.\"");
				if (!var0000) {
					add("Goblins");
				}
				add("storms");
				if (!gflags[IOLO_MADE_EQUIPMENT_LIST]) {
					say("\"Suspicious, in fact...\"");
					say("\"Perhaps thou art in league with the enchanter who materialized in the center of town! We promptly jailed him.\"");
					gflags[KNOWS_IOLO_IMPRISONED] = true;
					if (!gflags[FIRST_TALK_WITH_MARSTEN]) {
						say("\"But the uproar interrupted the funeral ceremonies.\"");
						add("funeral");
					}
					add(["enchanter"]);
				}
				fallthrough;

			case "storms" (remove):
				say("\"Didst thou not see the storm which passed by here so recently? Even a Knight must hide from the fury of Nature!\"");
				say("\"Hast thou noticed the lightning? It comes in many colors, and it hath sinister magical properties!\"");
				fallthrough;

			case "gate" (remove):
				say("\"Aye, 'tis a gate indeed. And a strong one at that. To repel any foe who dares attempt to breach these walls.\" *\"I suppose thou dost want me to operate it. As if I had naught to do...\"");
				AVATAR->set_item_flag(DONT_MOVE);
				Func0833(event);
				abort;

			case "enchanter" (remove):
				say("\"Thou dost show an unusual interest in this man. Speak to Lord Marsten. I shall say no more to thee about the matter.\"");
				fallthrough;

			case "funeral" (remove):
				say("\"'Tis a sad affair. One of our patrols was ambushed, and the Goblins slew nearly all of them! Only Templar survived to return.\"");
				say("\"Worse yet, the patrol was led by the Champion Knight, and she remains lost. We must assume that she is slain, and the Helm of Monitor taken!\"");
				add(["Champion Knight", "Helm of Monitor"]);
				fallthrough;

			case "Champion Knight" (remove):
				say("\"We are lost without Astrid, for she was a Warrior of Warriors!\"");
				say("\"Only the bravest Knight can be the Champion of Monitor. We compete constantly for the title, and this keeps us fit to battle the Goblin hordes.\"");
				say("\"Astrid was unique among us, for she had held the title for nearly three years. In the north, they say that women are weak, but not in Monitor!\"");
				fallthrough;

			case "Helm of Monitor" (remove):
				say("\"The Helm is more than symbolic. Yes, the Champion Knight wears it. But it stands for something!\"");
				say("\"It was once the property of the Goblin chieftain who nearly conquered Monitor!\"");
				if (!gflags[HAVE_HELM_OF_MONITOR]) {
					say("\"Now that they have it again, we are in dire trouble.\"");
				} else {
					say("\"Since thou hast brought it back, Monitor shall surely never fall.\"");
				}
				fallthrough;

			case "name" (remove):
				say("\"I am Flicken, and I am a Knight of Monitor. I belong to the Command of the Bear.\"");
				say("\"We are all Knights here. If thou art not a Knight of Monitor, then thou dost not belong in Monitor!\"");
				if (!gflags[KNOWS_ABOUT_MONITOR_CLANS]) {
					add("Command");
				} else {
					add(["Wolves", "Leopards"]);
				}
				add("Bears");
				fallthrough;

			case "Command" (remove):
				say("\"The Knights of Monitor are organized into three clans, which are called Commands.\"");
				say("\"The Bears are the elite, but there are also the Wolves and the Leopards. Thou canst tell us apart by our tattoos.\"");
				gflags[KNOWS_ABOUT_MONITOR_CLANS] = true;
				add(["Bears", "Wolves", "Leopards"]);
				fallthrough;

			case "Bears" (remove):
				if (!gflags[SLAIN_WOLF]) {
					say("\"If thou dost ever become a Knight of Monitor, then pray that the Ashes of Gurnordir proclaim thee a Knight of the Bears!\"");
					add("Ashes of Gurnordir");
				}
				say("\"We are the strongest of the Commands. The Goblins shall never break this city, so long as we are here to man the walls!\"");
				fallthrough;

			case "Ashes of Gurnordir" (remove):
				say("\"I probably should not speak of sacred matters to outsiders, but it is true that the Ashes of the Dead are holy.\"");
				say("\"If thou wantest to know more, speak to Caladin or Marsten -- they deal with outsiders.\"");
				fallthrough;

			case "Wolves" (remove):
				say("\"Bah! If they had their way, the Wolves would waste all our men defending the highways, and leave Monitor defenseless!\"");
				say("\"Their leader, Brendann, is a profligate. Spending too much time with loose women is bad for a warrior -- mark my words!\"");
				fallthrough;

			case "Leopards" (remove):
				if (!gflags[PROVED_MARSTEN_IS_TRAITOR]) {
					say("\"No one knows what the Leopards stand for anymore! Marsten used to be strong and virile, but now he rules the city from his desk.\"");
					say("\"As for Spektor, he would rather pick up a quill than a sword. With such leaders, how can the Leopards amount to much!\"");
					add("ruler");
				} else {
					say("\"With Marsten in prison, the Leopards must needs be restored to what they once were! But Shazzana is a she-tiger... she will set things aright.\"");
				}
				fallthrough;

			case "ruler" (remove):
				say("\"Monitor hath no King or Queen -- we do not believe in such things, and left our ancient homeland to escape a tyrant who thought otherwise.\"");
				say("\"The Lords of the Commands take turns ruling Monitor. Currently, Marsten doth have that duty. Next year it shall be Caladin, then after that we must suffer a year under Brendann's yoke.\"");
				fallthrough;

			case "duties" (remove):
				say("\"I am the Chief Pikeman, and my station is the Southwest Gate. The task of the Pikemen of Monitor is to man the city walls, and watch for Goblins.\"");
				if (!var0000) {
					add(["Goblins"]);
				}
				fallthrough;

			case "Goblins" (remove):
				say("\"Foul creatures! They are the bane of our existence. We are at war with the Goblins, and have been for many generations. If it were not for the Pikemen patrolling the roads, one could never travel anywhere!\"");
				var0000 = true;
				add(["roads", "travel"]);
				fallthrough;

			case "roads" (remove):
				say("\"Dost thou know nothing?! Why, we Monitorians have rebuilt the ancient highways, and added new trails and byways.\"");
				say("\"Each of our Commands supplies the men to guard the Towers which protect the trade routes.\"");
				say("\"But it is all foolishness! Fawn Tower hath been conquered, and the Goblins will not stop there!\"");
				fallthrough;

			case "travel" (remove):
				say("\"Why would anyone bother with going anywhere beyond Monitor? This is where Courage thrives -- out there, frivolity reigns...\"");
				say("\"Moonshade is nothing more than a city of mages. Who needs magic? It pales before a sharply honed sword.\"");
				say("\"As for Fawn, the place is obsessed with strange customs. And they worship Beauty -- now, how can that compare to Courage?\"");
				fallthrough;

			case "bye":
				if (!gflags[SLAIN_WOLF]) {
					say("\"Do not be surprised if most people do not talk to thee! Since thou art not a Knight of Monitor, thou dost not belong here.\"");
					say("\"Only the bravest of the brave can be a member of our community!\"");
				}
				UI_remove_npc_face0();
				Func097F(AVATAR, "@Thank thee.@", 0x0000);
				Func097F(FLICKEN, "@Courage!@", 0x0002);
				break;
		}
	}
}

extern var Func0954 0x954 ();
extern var Func0953 0x953 ();
extern var Func0994 0x994 ();
extern var Func0942 0x942 (var var0000);
extern void Func097F 0x97F (var var0000, var var0001, var var0002);
extern void Func07D1 object#(0x7D1) ();
extern var Func097D 0x97D (var var0000, var var0001, var var0002, var var0003, var var0004);
extern var Func0956 0x956 (var var0000);
extern var Func0955 0x955 ();
extern var Func0996 0x996 (var var0000, var var0001, var var0002, var var0003, var var0004, var var0005, var var0006);
extern void Func082D 0x82D ();

void Func0451 object#(0x451) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;
	var var0008;
	var var0009;
	var var000A;
	var var000B;
	var var000C;
	var var000D;
	var var000E;
	var var000F;
	var var0010;
	var var0011;
	var var0012;
	var var0013;
	var var0014;

	var0000 = Func0954();
	var0001 = UI_is_pc_female();
	var0002 = Func0953();
	var0003 = ENSORCIO->get_item_flag(MET);
	var0004 = Func0994();
	var0005 = Func0942(DUPRE);
	var0006 = Func0942(SHAMINO);
	var0007 = Func0942(IOLO);
	var0008 = false;
	var0009 = false;
	var000A = false;
	var000B = false;
	var000C = false;
	if (event == PROXIMITY) {
		var000D = UI_get_random(0x0006);
		if (var000D == 0x0001) {
			ENSORCIO->item_say("@I shall have revenge!@");
		}
		if (var000D == 0x0002) {
			ENSORCIO->item_say("@I am an Adept!@");
		}
		if (var000D == 0x0003) {
			ENSORCIO->item_say("@Bide thee...@");
		}
		if (var000D == 0x0004) {
			ENSORCIO->item_say("@They shall see...@");
		}
		if (var000D == 0x0005) {
			if (Func0942(KANE)) {
				ENSORCIO->item_say("@Stay thou away from me!@");
				Func097F(KANE, "@Yes, m'lord.@", 0x0002);
			} else {
				ENSORCIO->item_say("@I shall prevail!@");
			}
		}
		if (var000D == 0x0006) {
			ENSORCIO->item_say("@What do I here?@");
		}
	}
	if (event == DOUBLECLICK) {
		AVATAR->item_say("@Greetings!@");
		ENSORCIO->Func07D1();
		Func097F(ENSORCIO, "@Art thou speaking to me?@", 0x0005);
		ENSORCIO->set_schedule_type(TALK);
	}
	if (event == STARTED_TALKING) {
		ENSORCIO->run_schedule();
		ENSORCIO->clear_item_say();
		ENSORCIO->show_npc_face0(0x0000);
		if (ENSORCIO->get_schedule_type() == TEND_SHOP) {
			var000E = true;
		}
		if ((gflags[BANES_RELEASED] == true) && (gflags[ANARCHY_BANE_DEAD] == false)) {
			say("\"Seest thou, ",
				var0002,
				"? I told thee that I would teach them not to take Ensorcio lightly! I told thee that one day they would welcome me back... Beg for me to return!\"");
			add(["teach them", "welcome", "bye"]);
		} else {
			if (var0003 == false) {
				if (gflags[HAVE_WOLF_TATTOO] == true) {
					say("\"Well, if it isn't another petty tyrant!\"");
					say("\"Thou mayest as well leave now, Pikeman. I have no use for the likes of thee... And thou canst do nothing to avenge the wrongs I have suffered.\"");
					say("\"So, leave thou before I grow tired of thee and thou dost feel the wrath of Ensorcio the Adept!\"");
					add(["tyrant", "wrongs", "bye"]);
				} else {
					say("\"Thou mayest as well leave now, hero. I have seen thy kind before and have no use for the likes of thee... And thou canst do nothing to avenge the wrongs I have suffered.\"");
					say("\"So, leave thou before I grow tired of thee and thou dost feel the wrath of Ensorcio the Adept!\"");
					add(["hero", "wrongs", "bye"]);
				}
				ENSORCIO->set_item_flag(MET);
			} else if (gflags[HAVE_WOLF_TATTOO] == true) {
				say("\"So, thou art returned... Failed in thy puny quest already, Pikeman?\"");
			} else {
				say("\"So, thou art returned... Failed in thy puny quest already, hero?\"");
			}
			if (var000E) {
				add("spells");
			}
			add(["wrongs", "Devra", "Hawk", "bye"]);
		}
		converse (0) {
			case "teach them":
				say("\"Shamino the Anarch hath proclaimed me the finest of Adepts! At last someone hath seen my talents and set them for the world to see... No more shall I be Ensorcio the shunned, Ensorcio the exile! Now I am the premier Adept!\"");
				remove("teach them");
				fallthrough;

			case "welcome":
				say("\"Filbercio's unjust rule hath been brought to an end!\"");
				say("\"Shamino the Anarch, thy wonderful companion, hath cast him from power and I have been welcomed with open arms!\"");
				say("\"Oh, what joy! To be back in Moonshade and free to experiment as I wish!\"");
				remove("welcome");
				fallthrough;

			case "tyrant":
				say("\"Yes, tyrant! And I shall say it in front of Argus, too, for all that matters!\"");
				say("\"You Pikemen wear your @bravery@ marked on your faces for all to see and expect the world to tremble at your feet! Thou demandest tribute like a king, but all thou art worthy of is contempt!\"");
				if (var0005 == true) {
					DUPRE->show_npc_face1(0x0000);
					say("\"Thou dost not speak to an ordinary Pikeman!\" *\"This is the Avatar!\"");
					UI_remove_npc_face1();
					0x0000->set_conversation_slot();
				}
				if (var0006 == true) {
					SHAMINO->show_npc_face1(0x0000);
					say("\"Thou mayest not judge the Avatar by this mark alone!\"");
					UI_remove_npc_face1();
					0x0000->set_conversation_slot();
				}
				if (var0007 == true) {
					IOLO->show_npc_face1(0x0000);
					say("\"Do not let him say such things about thee, Avatar!\"");
					UI_remove_npc_face1();
					0x0000->set_conversation_slot();
				}
				say("\"I see thee draw thyself up... Have I offended thee? And what wilt thou do, Pikeman? Drag me to thy jail as thy comrades did drag Hawk?\"");
				remove("tyrant");
				add(["Argus", "tribute", "Hawk"]);
				fallthrough;

			case "Argus":
				say("\"For all that he is Devra's son, he is still a dog!\"");
				say("\"I will grant that he came home when Devra summoned him, unlike Wilfred. But the two are cut from the same cloth, all the same... Vain, pompous braggarts!\"");
				remove("Argus");
				add("Wilfred");
				if (var0008 == false) {
					add("Devra");
				}
				fallthrough;

			case "Wilfred":
				say("\"Wilfred is Devra's youngest whelp. And I'll wager that thou wilt never find a better example of the attitude of which I speak.\"");
				if (var0007 == true) {
					IOLO->show_npc_face1(0x0000);
					say("\"He's a fine one to talk of attitude...\"");
					UI_remove_npc_face1();
					0x0000->set_conversation_slot();
				}
				say("\"Wilfred ran away to prove to the world that he was better than his brother... A better bully, a better ruffian and a better murderer thou shalt not find!\"");
				remove("Wilfred");
				fallthrough;

			case "tribute":
				say("\"Or perhaps I should say @donation@!\"");
				say("\"Where is the honor in charging even the poorest peasant a ruinous fee to use the only safe road in all the islands? So much for protecting the weak and helping the poor!\"");
				remove("tribute");
				fallthrough;

			case "Hawk":
				say("\"Hawk is the captain of the Arabella.\"");
				say("\"I am afraid that Flindo was a bit distressed to hear that the good captain had no intention of risking himself or his ship to take that upstanding merchant back to Moonshade in these damnable storms. So he bought the muscle of the Pikemen to @persuade@ Hawk that remaining here would be unhealthy...\"");
				gflags[KNOW_PIKEMEN_HAVE_HAWK] = true;
				remove("Hawk");
				UI_push_answers();
				add(["Moonshade", "storms", "Flindo", "change subject"]);
				fallthrough;

			case "change subject":
				say("\"As thou dost wish...\"");
				UI_pop_answers();
				fallthrough;

			case "Moonshade":
				say("\"Moonshade, the city of wonders! And the city of charlatans!\"");
				say("\"Heaven forfend that thou shouldst try something innovative! It might endanger the incompetent fools led by Filbercio and his trained Council of Mages!\"");
				remove("Moonshade");
				add(["Filbercio", "Council of Mages"]);
				fallthrough;

			case "Filbercio":
				say("\"Filbercio is a presumptuous maggot who calls himself MageLord of Moonshade!\"");
				say("\"I doubt that he could light a candle magically! But he doth have the backing of the Council and the threat of the Mountains of Freedom to support his claim!\"");
				say("\"The one saving grace for Moonshade is that Filbercio spends all of his time pursuing skirts! His insignificant knowledge of magic hath little effect in the bedchambers of his conquests!\"");
				var000A = true;
				remove("Filbercio");
				add("Freedom");
				fallthrough;

			case "Freedom":
				say("\"Freedom! What a farce!\"");
				say("\"The Mountains of Freedom are a prison, hero! A prison filled with magical traps that none can escape. And that is where Filbercio puts all who anger or oppose him.\"");
				say("\"'Tis a small wonder that I did not end there...\"");
				remove("Freedom");
				fallthrough;

			case "Council of Mages":
				say("\"The Council of Mages is a handful of Adepts meant to keep the MageLord from misusing his power. In this case, however, they spend their time making the decisions that the MageLord should be making.\"");
				say("\"But, as unto myself, they are content to allow Filbercio to continue his @amusements@. With luck, he will be killed by one of his paramours.\"");
				var000B = true;
				remove("Council of Mages");
				fallthrough;

			case "storms":
				say("\"Rather showy, if thou shouldst ask me... But rather spectacular results. Entirely too random for my tastes, however.\"");
				say("\"Of course, I cannot help wondering which mage is behind them. And I wonder if that double-crossing Batlin has anything to do with them... The storms started after he left here, thou knowest.\"");
				remove("storms");
				add("Batlin");
				fallthrough;

			case "Batlin":
				say("\"I can see that thou knowest of him.\"");
				say("\"Batlin came here some time ago, he and his tame daemon. He seemed to take an interest in my story and we spent many evenings exchanging arcane lore. Then he left on some errand.\"");
				say("\"When he returned with his other two thugs, Batlin seemed restless. But we continued our discussions as if nothing had changed. I thought he was my friend...\"");
				remove("Batlin");
				add(["Daemon", "thugs"]);
				fallthrough;

			case "Daemon":
				say("\"Absolutely huge... and ugly!\"");
				say("\"Batlin called him Palos. And the daemon went about meekly hooded and robed as his master commanded.\"");
				say("\"I do admit, I was impressed. I could not help but think about the trouble that Rotoluncia was having.\"");
				remove("Daemon");
				add("Rotoluncia");
				fallthrough;

			case "Rotoluncia":
				say("\"Ever since Filbercio replaced Rotoluncia as his playmate, Rotoluncia hath had to find some other interest to occupy her time.\"");
				say("\"And, from what I have heard, that seems to be daemons... Perhaps I can hope that she doth have designs on revenge. I would be content to think of Filbercio filling a daemon's belly.\"");
				say("\"So, I am sure that she would take quite an interest in that fat mage's pet daemon. I wish I could send her word...\"");
				remove("Rotoluncia");
				fallthrough;

			case "thugs":
				say("\"I should have guessed that Batlin intended something shady when I saw those two!\"");
				say("\"I am sure that Batlin brought them expressly to steal the old jawbone left to me by my mentor.\"");
				say("\"Between Brunt, the idiot, and Deadeye, the one-eyed pirate, I am lucky still to be alive...\"");
				remove("thugs");
				add(["jawbone", "mentor"]);
				fallthrough;

			case "jawbone":
				say("\"'Twas a large serpent jawbone that my mentor received from his mentor, the Mad Mage.\"");
				say("\"I could never discover what its use was, though it was clearly magical. 'Twas a keepsake -- though I hoped to discover its secret some day.\"");
				say("\"I think that Batlin found its secret... and created these damned storms.\"");
				var0009 = true;
				remove("jawbone");
				add("Mad Mage");
				fallthrough;

			case "Mad Mage":
				say("\"His true name is Erstam. He taught many of the Moonshadian Adepts their craft. But, as is the way with master and apprentice, they eventually surpassed him in skill and scope.\"");
				say("\"The old mage could not abide the thought that these mages were no longer his malleable students, and went quite mad... He saw them all as thieves intent on stealing his secrets and moved to an island off Moonshade.\"");
				say("\"He doth refuse to have any dealings with Moonshade to this day. He sits on his island trying to find a way to create life.\"");
				remove("Mad Mage");
				fallthrough;

			case "mentor":
				say("\"He was a very great man. His name was Vasculio.\"");
				say("\"Unfortunately, Vasculio was a man that was constantly testing the limits of convention. The Council of Mages found him threatening, and attempted to kill him when he refused to bow to their wishes...\"");
				say("\"But his experimentation with Stoneheart had given him spells to elude even that monstrous fate. He is out there somewhere still, straining at the chains of accepted wisdom.\"");
				remove("mentor");
				add(["Stoneheart", "spells"]);
				fallthrough;

			case "Stoneheart":
				say("\"Ah, such a wonder to behold! It doth come from the depths of the Mountains of Freedom, and is quite rare...\"");
				say("\"The Council hath outlawed possession of Stoneheart, because they fear its power. But a small quantity is quietly hidden -- else how would the death spells work?\"");
				gflags[KNOWS_STONEHEART_ORIGIN] = true;
				remove("Stoneheart");
				if (Func097D(PARTY, 0x0001, 0x034A, QUALITY_ANY, 0x000F)) {
					say("\"Thou dost have stoneheart! Could I...\"");
					say("\"No, I shall not succumb to its lure. I shall be strong. But thou shouldst take care, for this reagent has a way of twisting a man's heart so that he cannot bear to part from it.\"");
					say("\"In its raw form, 'tis useless for spells. For a fee -- sizable, of course -- I could teach thee its secret so that thou mayest also cast death spells.\"");
					add("secret");
				}
				fallthrough;

			case "secret":
				say("\"This is very valuable information, friend.\"");
				say("\"How much wouldst thou pay for it?\"");
				var000F = Func0956(["Guilders", "Gold Coins"]);
				if (var000F == "Guilders") {
					var0010 = 0x03B8;
				}
				if (var000F == "Gold Coins") {
					var0010 = 0x0284;
				}
				do {
					var0011 = PARTY->count_objects(var0010, QUALITY_ANY, FRAME_ANY);
					if (var0011 == 0x0000) {
						say("\"Thou dost not have any ",
							var000F,
							"!\"");
						break;
					}
					var0012 = UI_input_numeric_value(0x0000, var0011, 0x0001, 0x0000);
					var0013 = var0012;
					if (var000F == "Guilders") {
						var0013 = (var0012 * 0x0002) / 0x0003;
					}
					if (var0013 < 0x0001) {
						say("\"Imparting such information is risky. Thou dost offer too little in exchange for mine health...\"");
						break;
					}
					if ((var0013 >= 0x0001) && (var0013 <= 0x000F)) {
						say("\"Thou couldst not buy even so much as a novice's light spell for that paltry sum! Another offer perhaps...\"");
						continue;
					}
					if ((var0013 >= 0x0010) && (var0013 <= 0x001E)) {
						say("\"Art thou serious? Thou wouldst offer only ",
							var0012,
							" for the power of destruction? Think again...\"");
						continue;
					}
					if ((var0013 >= 0x001F) && (var0013 <= 0x002D)) {
						say("\"Dost thou think me a shopkeeper to haggle with? I am Ensorcio the Adept! Do not trifle with me...\"");
						continue;
					}
					if ((var0013 >= 0x002E) && (var0013 <= 0x003C)) {
						say("\"Thou canst be more reasonable than that...\"");
						continue;
					}
					if ((var0013 >= 0x003D) && (var0013 <= 0x004B)) {
						say("\"How can I be sure what use thou wilt make of this? I do not know...\"");
						continue;
					}
					if (var0013 > 0x004B) {
						say("\"Thou art most wise, indeed! For ",
							var0012,
							" ",
							var000F,
							", I shall teach thee how to put thy Stoneheart to use. Agreed?\"");
						if (Func0955() == true) {
							var0014 = Func0996(AVATAR, ENSORCIO, var0012, var0010, QUALITY_ANY, FRAME_ANY, true);
							say("\"First, thou must have a ritual blood-letting device... Most mages possess one, even though they are technically illegal.\"");
							say("\"Then thou must fill a small container with blood, using this device. The blood can be thine or that of any of thy companions... Whichever thou dost find more convenient.\"");
							say("\"Once thou hast the blood, thou must use the blood on the Stoneheart. This produces the Bloodspawn that thou wilt need for death spells.\"");
						} else {
							say("\"Perhaps another time then...\"");
						}
					}
					break;
				} while (true);
				remove("secret");
				fallthrough;

			case "spells":
				if (var000C == false) {
					say("\"Like any apprentice, I learned all that I could from my mentor... Whether he was willing to teach me or not. 'Tis all a matter of not being discovered in the act.\"");
					var000C = true;
				}
				say("\"Art thou interested in buying a spell perhaps? I could always use more money for ale...\"");
				if (Func0955() == true) {
					Func082D();
				} else {
					say("\"If thou art ever interested, find me.\"");
				}
				fallthrough;

			case "Flindo":
				say("\"Flindo would have it that he is a person of note from the fair city of Moonshade, known by one and all. But he is truly little more than a loud shopkeeper with a penchant for gossip.\"");
				say("\"Flindo flits about here and there, acquiring merchandise for Bucia to sell, and as much information as he can. I think that alone is why the Adepts humor him from time to time with some tidbit of news...\"");
				remove("Flindo");
				add("Bucia");
				fallthrough;

			case "Bucia":
				say("\"Bucia runs Flindo's shop for him. 'Tis called the Capessi Canton -- a pompous name, if thou dost ask me.\"");
				say("\"Bucia charges a fillip more on everything she sells, for her troubles. And is very careful to show Flindo the altered accounts.\"");
				remove("Bucia");
				fallthrough;

			case "hero":
				say("\"Yes, hero! And I shall say it in front of Devra, too, for all that matters!\"");
				say("\"You adventurers swagger around as though you could save the world! Thou dost expect awe and reverence from those thou dost meet... The ones that bury thy dead body when thine arrogance doth meet its match!\"");
				if (var0005 == true) {
					DUPRE->show_npc_face1(0x0000);
					say("\"Thou dost not speak to an ordinary adventurer!\" *\"This is the Avatar!\"");
					UI_remove_npc_face1();
					0x0000->set_conversation_slot();
				}
				if (var0006 == true) {
					SHAMINO->show_npc_face1(0x0000);
					say("\"Thou mayest not judge the Avatar so!\"");
					UI_remove_npc_face1();
					0x0000->set_conversation_slot();
				}
				if (var0007 == true) {
					IOLO->show_npc_face1(0x0000);
					say("\"Do not let him say such things about thee, Avatar!\"");
					UI_remove_npc_face1();
					0x0000->set_conversation_slot();
				}
				say("\"I see thee draw thyself up... Have I offended thee? And what wilt thou do, hero? Imprison me? Or wilt thou simply murder me?\"");
				remove("hero");
				add(["Devra", "Hawk"]);
				fallthrough;

			case "Devra":
				if (var0001 == true) {
					say("\"Devra's a fine woman, for all that she is a bit domineering...\"");
				} else {
					say("\"Devra's a fine woman, for all that she is a bit domineering... But then most women are, are they not?\"");
				}
				say("\"She hath taken her loss incredibly well. She hath convinced that worthless son of hers to return and help with some honest work here at the inn. But, if thou askest me, I would say that she is too kind to the rogues and misfits.\"");
				var0008 = true;
				remove("Devra");
				add("loss");
				fallthrough;

			case "loss":
				if (var0001 == true) {
					say("\"Quite sad, actually. I recall that the morning I went to her to report the theft, she was terribly upset.\"");
					say("\"It seems Angus had a bit of Silverpate in him after all, and disappeared... To think of it, perhaps he was the one that stole the jawbone from me... Though why it would interest him, I shall never know.\"");
				} else {
					say("\"Quite pathetic, actually. When I reported the theft to her that morning she was too distraught to even pay attention to my complaint... Not at all professional -- after all, I am a paying guest here.\"");
					say("\"It seems Angus had a bit of Silverpate in him after all, and disappeared... To think of it, perhaps he was the one that stole the jawbone from me... Though why it would interest him, I shall never know.\"");
				}
				remove("loss");
				add(["Angus", "Silverpate"]);
				if (var0009 == false) {
					add("jawbone");
				}
				fallthrough;

			case "Angus":
				say("\"Angus is... er, was... Devra's husband. Seemed a right enough fellow. Liked a cup or two of ale in the evenings. Worked hard -- But then, with her nagging, he couldn't help but work hard!\"");
				say("\"Would never have guessed that he had the spine to leave like that. But I suppose that every man doth have his breaking point...\"");
				remove("Angus");
				fallthrough;

			case "Silverpate":
				say("\"Silverpate is the great-grandfather of Angus.\"");
				say("\"They say that old Silverpate was a bloodthirsty pirate. According to popular tales, he reformed and took his ill-gotten gains and built this inn...\"");
				say("\"But the Adepts in Moonshade tell a different tale.\"");
				remove("Silverpate");
				add("tale");
				fallthrough;

			case "tale":
				say("\"It seems that Silverpate employed Erstam to do something at the inn -- perhaps hide that fabled treasure, who knows. In any case, the pirate planned to trick Erstam so that he would not have to pay the mage's fees.\"");
				say("\"But Erstam found him out and trapped the treacherous @innkeeper@ in a pit filled with daemons. No one ever saw Silverpate again, and people learned to fear crossing any mage.\"");
				remove("tale");
				fallthrough;

			case "wrongs":
				say("\"Thou dost not know the half of it! Here I sit, an Adept in a wretched hovel, exiled from the practice of the magic that is my life's blood!\"");
				say("\"The Council hath turned its back on Filbercio's exploits for so long that they sought to make me their scapegoat... their public example.\"");
				remove("wrongs");
				add("example");
				if (var000A == false) {
					add("Filbercio");
				}
				if (var000B == false) {
					add("Council of Mages");
				}
				fallthrough;

			case "example":
				say("\"Filbercio hath hopped from bed to bed throughout the city, using every means of coercion possible. But let it be found that poor Ensorcio used magic to catch the favor of an Adept's daughter, and suddenly I am an unspeakable monster!\"");
				say("\"Thou canst not know what humiliation is until thou hast been turned out from thine home and told never to return on pain of death!\"");
				say("\"Thou canst not know the burning shame to hear that thy wrongdoing hath been proclaimed to all. To know that wherever thou goest people will say, @Isn't Ensorcio that exiled mage from Moonshade?@!\"");
				remove("example");
				add(["coercion", "Adept's daughter"]);
				fallthrough;

			case "coercion":
				say("\"The least that I have heard of is blackmail... Who knows to what other means Filbercio will stoop to fulfill his lusts?\"");
				say("\"But I have no details, for I try not to listen to such stories as they always send me into a near-murderous fit... Thou shalt have to seek thine information elsewhere.\"");
				remove("coercion");
				fallthrough;

			case "Adept's daughter":
				say("\"Oh, no! Thou shalt not have her name to drag through the mud alongside Ensorcio! Never!\"");
				say("\"I cared enough for her to spend my magics upon her, hoping that she would come to care for me. I'll not have thee blacken her name, for all that's been done to me!\"");
				remove("Adept's daughter");
				fallthrough;

			case "bye":
				UI_remove_npc_face0();
				Func097F(AVATAR, "@Goodbye!@", 0x0000);
				Func097F(ENSORCIO, "@Fare well...@", 0x0005);
				break;
		}
	}
	if (event == EGG) {
		if (var0004 == 0x001F) {
			FILBERCIO->item_say("@Save me from this madman!@");
			ENSORCIO->show_npc_face0(0x0000);
			if (var0003 == true) {
				say("\"Do not interfere with me, Avatar!\" ~\"I am the MageLord now...\"");
				say("\"Thou dost know that Filbercio is lower than swine...\" ~\"He doth deserve to be tortured for all the ill that he hath done.\"");
			} else {
				say("\"Do not meddle in that which thou dost not understand, hero!\" ~\"I am the MageLord, and this man is evil.\"");
				say("\"He hath destroyed the lives of many.\" ~\"He doth deserve to be tortured for all the ill that he hath done.\"");
			}
			UI_remove_npc_face0();
			abort;
		}
	}
}

extern void Func0809 0x809 ();
extern var Func0954 0x954 ();
extern var Func0953 0x953 ();
extern void Func07D1 object#(0x7D1) ();
extern void Func097F 0x97F (var var0000, var var0001, var var0002);

void Func0452 object#(0x452) () {
	var var0000;
	var var0001;

	if (get_item_flag(SI_ZOMBIE)) {
		Func0809();
	}
	var0000 = Func0954();
	var0001 = Func0953();
	if (event == DOUBLECLICK) {
		AVATAR->item_say("@Speak, automaton!@");
		LORD_OF_DISCIPLINE->Func07D1();
		Func097F(LORD_OF_DISCIPLINE, "@Obedience... Failed...@", 0x0002);
		LORD_OF_DISCIPLINE->set_schedule_type(TALK);
	}
	if (event == STARTED_TALKING) {
		LORD_OF_DISCIPLINE->run_schedule();
		LORD_OF_DISCIPLINE->clear_item_say();
		AUTOMATON_FACE->show_npc_face0(0x0000);
		say("\"Unfinished... Discipline...\"");
		say("\"Master... Punishment... No Order...\"");
		say("\"Alcoves... Pain... Cannot succeed...\"");
		say("\"Failed... Duty... Punishment...\"");
		UI_remove_npc_face0();
		abort;
	}
}

extern void Func0809 0x809 ();
extern var Func0954 0x954 ();
extern var Func0953 0x953 ();
extern void Func07D1 object#(0x7D1) ();
extern void Func097F 0x97F (var var0000, var var0001, var var0002);

void Func0453 object#(0x453) () {
	var var0000;
	var var0001;

	if (get_item_flag(SI_ZOMBIE)) {
		Func0809();
	}
	var0000 = Func0954();
	var0001 = Func0953();
	if (event == DOUBLECLICK) {
		AVATAR->item_say("@May we speak?@");
		ACID_AUTOMATON->Func07D1();
		Func097F(ACID_AUTOMATON, "@Speak... Creak... Weak...@", 0x0002);
		ACID_AUTOMATON->set_schedule_type(TALK);
	}
	if (event == STARTED_TALKING) {
		ACID_AUTOMATON->run_schedule();
		ACID_AUTOMATON->clear_item_say();
		AUTOMATON_FACE->show_npc_face0(0x0000);
		say("\"Soldiers... Discipline... fountain...\"");
		say("\"Seek... Meek...\"");
		say("\"Die in acid!... automaton... fetches Water!\"");
		say("\"Sleek... Speak... Squeak...\"");
		gflags[KNOWS_ABOUT_ACID] = true;
		UI_remove_npc_face0();
		abort;
	}
}

extern void Func0809 0x809 ();
extern void Func09AD 0x9AD (var var0000);

void Func0454 object#(0x454) () {
	if (get_item_flag(SI_ZOMBIE)) {
		Func0809();
	} else {
		Func09AD(item);
	}
}

extern void Func08B2 0x8B2 ();

void Func0455 object#(0x455) () {
	if ((event == DEATH) && get_item_flag(SI_TOURNAMENT)) {
		clear_item_flag(SI_TOURNAMENT);
		reduce_health(0x0032, NORMAL_DAMAGE);
		gflags[AUTO1_IS_DEAD] = true;
		abort;
	}
	Func08B2();
}

extern void Func0809 0x809 ();

void Func0456 object#(0x456) () {
	Func0809();
}

extern void Func08B2 0x8B2 ();

void Func0457 object#(0x457) () {
	if ((event == DEATH) && get_item_flag(SI_TOURNAMENT)) {
		clear_item_flag(SI_TOURNAMENT);
		reduce_health(0x0032, NORMAL_DAMAGE);
		gflags[AUTO2_IS_DEAD] = true;
		abort;
	}
	Func08B2();
}

extern void Func0809 0x809 ();

void Func0458 object#(0x458) () {
	Func0809();
}

extern void Func0809 0x809 ();

void Func0459 object#(0x459) () {
	Func0809();
}

extern void Func0809 0x809 ();

void Func045A object#(0x45A) () {
	Func0809();
}

extern void Func0809 0x809 ();

void Func045B object#(0x45B) () {
	Func0809();
}

extern void Func08B2 0x8B2 ();

void Func045C object#(0x45C) () {
	if ((event == DEATH) && get_item_flag(SI_TOURNAMENT)) {
		clear_item_flag(SI_TOURNAMENT);
		reduce_health(0x0032, NORMAL_DAMAGE);
		gflags[AUTO3_IS_DEAD] = true;
		abort;
	}
	Func08B2();
}

extern void Func08B2 0x8B2 ();

void Func045D object#(0x45D) () {
	if ((event == DEATH) && get_item_flag(SI_TOURNAMENT)) {
		clear_item_flag(SI_TOURNAMENT);
		reduce_health(0x0032, NORMAL_DAMAGE);
		gflags[AUTO4_IS_DEAD] = true;
		abort;
	}
	Func08B2();
}

extern void Func0809 0x809 ();
extern var Func0954 0x954 ();
extern var Func0953 0x953 ();
extern void Func07D1 object#(0x7D1) ();
extern void Func097F 0x97F (var var0000, var var0001, var var0002);
extern var Func0955 0x955 ();
extern void Func094E 0x94E (var var0000, var var0001);

void Func045E object#(0x45E) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;

	if (get_item_flag(SI_ZOMBIE)) {
		Func0809();
		abort;
	}
	var0000 = Func0954();
	var0001 = Func0953();
	if (event == DOUBLECLICK) {
		AVATAR->item_say("@May we speak?@");
		MURDER1->Func07D1();
		Func097F(MURDER1, (("@Yes, " + var0000) + "?@"), 0x0002);
		MURDER1->set_schedule_type(TALK);
	}
	if (event == STARTED_TALKING) {
		MURDER1->run_schedule();
		MURDER1->clear_item_say();
		MURDER1->show_npc_face0(0x0000);
		if (gflags[SOLVED_MURDER_PUZZLE]) {
			say("\"That hath made good use of thy Logic, ",
				var0000,
				". I would not have believed that one of our fellowship could have done such a thing. I thank thee for finding the traitor in our midst.\"");
			say("\"Use the key to obtain the waters of Logic. Thou hast well earned that honor.\"");
			abort;
		}
		say("\"I am Number 1, ",
			var0000,
			". And I am sorry. Thou must postpone thy meditations, for the key to the fountain room cannot be found.\"");
		say("\"I fear that someone hath destroyed Number 7, the keeper of the key!\"");
		converse (["meditations", "destroyed", "accuse", "bye"]) {
			case "meditations" (remove):
				say("\"Thy search for Logic can go no further until thou canst drink of the waters of Logic. And until the key to the fountain room is found, no one may taste the pure waters of Logic.\"");
				fallthrough;

			case "destroyed" (remove):
				say("\"I cannot make any accusations, but we are incapable of leaving our post. Something dire must have happened to Number 7.\"");
				say("\"I am restricted from taking action against any of my fellows, so it is up to thee to determine what hath befallen the keeper of the key.\"");
				say("\"For my part, I can say that I was with Number 2 and Number 6 when last we saw Number 7.\"");
				fallthrough;

			case "accuse":
				say("\"I must warn thee, ",
					var0000,
					", we are each sworn to protect the other. If thou dost accuse me falsely, we shall attack thee.\"");
				say("\"If thou hast spoken to each of us and hast determined that one of us is guilty, accuse accordingly. But be not hasty in thy judgment.\"");
				say("\"Dost thou accuse me?\"");
				if (Func0955()) {
					say("\"Thou hast no proof! Both Number 2 and Number 6 can attest that I was with them when Number 7 disappeared!\"");
					Func094E(MURDER2, "@Number 1 was with me!@");
					Func094E(MURDER6, "@It cannot be! I was with Number 1!@");
					0x0000->set_conversation_slot();
					say("\"Thou hast wronged me!\"");
					var0002 = [MURDER1, MURDER2, MURDER3, MURDER4, MURDER5, MURDER6];
					for (var0005 in var0002 with var0003 to var0004) {
						var0005->set_alignment(CHAOTIC);
						var0005->set_schedule_type(IN_COMBAT);
						AVATAR->set_oppressor(var0005);
					}
					abort;
				}
				say("\"I hope that thou dost find what hath happened to Number 7, ",
					var0000,
					". We cannot fulfill our duty without the key.\"");
				fallthrough;

			case "bye":
				UI_remove_npc_face0();
				Func097F(AVATAR, "@Many thanks!@", 0x0000);
				Func097F(MURDER1, "@Use thy Logic!@", 0x0002);
				MURDER1->set_schedule_type(LOITER);
				break;
		}
	}
}

extern void Func0809 0x809 ();
extern var Func0954 0x954 ();
extern var Func0953 0x953 ();
extern void Func07D1 object#(0x7D1) ();
extern void Func097F 0x97F (var var0000, var var0001, var var0002);
extern var Func0955 0x955 ();
extern void Func094E 0x94E (var var0000, var var0001);

void Func045F object#(0x45F) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;

	if (get_item_flag(SI_ZOMBIE)) {
		Func0809();
		abort;
	}
	var0000 = Func0954();
	var0001 = Func0953();
	if (event == DOUBLECLICK) {
		AVATAR->item_say("@May we speak?@");
		MURDER2->Func07D1();
		Func097F(MURDER2, (("@Yes, " + var0000) + "?@"), 0x0002);
		MURDER2->set_schedule_type(TALK);
	}
	if (event == STARTED_TALKING) {
		MURDER2->run_schedule();
		MURDER2->clear_item_say();
		MURDER2->show_npc_face0(0x0000);
		if (gflags[SOLVED_MURDER_PUZZLE]) {
			say("\"That hath made good use of thy Logic, ",
				var0000,
				". I would not have believed that one of our fellowship could have done such a thing. I thank thee for finding the traitor in our midst.\"");
			say("\"Use the key to obtain the waters of Logic. Thou hast well earned that honor.\"");
			abort;
		}
		say("\"Thou mayest call me Number 2, ",
			var0000,
			".\"");
		say("\"I regret that thou canst not meditate, ",
			var0000,
			". The strange mage hath damaged the Temple and the key to the fountain room is nowhere to be found!\"");
		converse (["strange mage", "damaged", "key", "accuse", "bye"]) {
			case "strange mage" (remove):
				say("\"He was a nasty-looking little man, ",
					var0000,
					". He and his vile companions came in here without regard for the sanctity of the Temple. It was shocking!\"");
				add("companions");
				fallthrough;

			case "companions" (remove):
				say("\"I could not see them well, for the mage kept my fellows and I locked within an energy field while he went about his evil work.\"");
				say("\"All I can tell thee is that there were three of them. And one was very large and went heavily-cloaked.\"");
				fallthrough;

			case "damaged" (remove):
				say("\"The mage destroyed the prison container that it was our duty to protect... Why in the name of Order he would ever do such a horrible thing, I do not know.\"");
				add("prison container");
				fallthrough;

			case "prison container" (remove):
				say("\"I do not know what great evil was contained there, ",
					var0000,
					". But I know that it exhausted all of the Order Hierophant's magic to imprison it here.\"");
				say("\"Who knows what ill is now loose upon the world!\"");
				fallthrough;

			case "key" (remove):
				say("\"It was the duty of Number 7 to keep the key to the fountain room. It hath been quite a while since we last saw Number 7.\"");
				say("\"All I remember is that I was with Number 1 when last we saw Number 7. I wonder where he hath gone?\"");
				fallthrough;

			case "accuse":
				say("\"I must warn thee, ",
					var0000,
					", we are each sworn to protect the other. If thou dost accuse me falsely, we shall attack thee.\"");
				say("\"If thou hast spoken to each of us and hast determined that one of us is guilty, accuse accordingly. But be not hasty in thy judgment.\"");
				say("\"Dost thou accuse me?\"");
				if (Func0955()) {
					say("\"Thou art wrong! Number 1 can tell thee where I was when Number 7 disappeared!\"");
					Func094E(MURDER1, "@Number 2 was with me, as was Number 6!@");
					0x0000->set_conversation_slot();
					say("\"Thou shalt pay!\"");
					var0002 = [MURDER1, MURDER2, MURDER3, MURDER4, MURDER5, MURDER6];
					for (var0005 in var0002 with var0003 to var0004) {
						var0005->set_alignment(CHAOTIC);
						var0005->set_schedule_type(IN_COMBAT);
						AVATAR->set_oppressor(var0005);
					}
					abort;
				}
				say("\"I hope that thou dost find what hath happened to Number 7, ",
					var0000,
					". We cannot fulfill our duty without the key.\"");
				fallthrough;

			case "bye":
				UI_remove_npc_face0();
				Func097F(AVATAR, "@Goodbye!@", 0x0000);
				Func097F(MURDER2, "@Use thy Logic!@", 0x0002);
				MURDER2->set_schedule_type(LOITER);
				break;
		}
	}
}

extern void Func0809 0x809 ();
extern var Func0954 0x954 ();
extern var Func0953 0x953 ();
extern void Func07D1 object#(0x7D1) ();
extern void Func097F 0x97F (var var0000, var var0001, var var0002);
extern var Func0955 0x955 ();
extern void Func094E 0x94E (var var0000, var var0001);

void Func0460 object#(0x460) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;

	if (get_item_flag(SI_ZOMBIE)) {
		Func0809();
		abort;
	}
	var0000 = Func0954();
	var0001 = Func0953();
	if (event == DOUBLECLICK) {
		AVATAR->item_say("@May we speak?@");
		MURDER3->Func07D1();
		Func097F(MURDER3, (("@Yes, " + var0000) + "?@"), 0x0002);
		MURDER3->set_schedule_type(TALK);
	}
	if (event == STARTED_TALKING) {
		MURDER3->run_schedule();
		MURDER3->clear_item_say();
		MURDER3->show_npc_face0(0x0000);
		if (gflags[SOLVED_MURDER_PUZZLE]) {
			say("\"That hath made good use of thy Logic, ",
				var0000,
				". I would not have believed that one of our fellowship could have done such a thing. I thank thee for finding the traitor in our midst.\"");
			say("\"Use the key to obtain the waters of Logic. Thou hast well earned that honor.\"");
			abort;
		}
		say("\"We have failed to protect the Temple! We have failed to provide thee with the solitude to meditate! And no one hath seen Number 7 in ages!\"");
		say("\"I am not worthy of my Number 3! Where is Number 7, the keeper of the key?!\"");
		converse (["protect", "solitude", "Number 7", "accuse", "bye"]) {
			case "protect" (remove):
				say("\"That is the duty of my fellows and I, to protect the Temple and assist those who come here to meditate on the pure waters of Logic. And we have failed!\"");
				fallthrough;

			case "solitude" (remove):
				say("\"No one would interfere with thy communion with the waters of Logic.\"");
				fallthrough;

			case "Number 7" (remove):
				say("\"Something must have happened to Number 7. Let me think, I was with Number 5 the last time any of us saw Number 7... and that was quite some time ago.\"");
				say("\"I fear we may never find the key to the fountain room now.\"");
				fallthrough;

			case "accuse":
				say("\"I must warn thee, ",
					var0000,
					", we are each sworn to protect the other. If thou dost accuse me falsely, we shall attack thee.\"");
				say("\"If thou hast spoken to each of us and hast determined that one of us is guilty, accuse accordingly. But be not hasty in thy judgment.\"");
				say("\"Dost thou accuse me?\"");
				if (Func0955()) {
					say("\"Thou art mad! I was with Number 5 when Number 7 disappeared!\"");
					Func094E(MURDER5, "@Number 3 was with me!@");
					0x0000->set_conversation_slot();
					say("\"I shall make thee bleed!\"");
					var0002 = [MURDER1, MURDER2, MURDER3, MURDER4, MURDER5, MURDER6];
					for (var0005 in var0002 with var0003 to var0004) {
						var0005->set_alignment(CHAOTIC);
						var0005->set_schedule_type(IN_COMBAT);
						AVATAR->set_oppressor(var0005);
					}
					abort;
				}
				say("\"I hope that thou dost find what hath happened to Number 7, ",
					var0000,
					". We cannot fulfill our duty without the key.\"");
				fallthrough;

			case "bye":
				UI_remove_npc_face0();
				Func097F(AVATAR, "@Fare well!@", 0x0000);
				Func097F(MURDER3, "@Use thy Logic!@", 0x0002);
				MURDER3->set_schedule_type(LOITER);
				break;
		}
	}
}

extern void Func0809 0x809 ();
extern var Func0954 0x954 ();
extern var Func0953 0x953 ();
extern void Func07D1 object#(0x7D1) ();
extern void Func097F 0x97F (var var0000, var var0001, var var0002);
extern var Func0955 0x955 ();
extern void Func094E 0x94E (var var0000, var var0001);
extern var Func099B 0x99B (var var0000, var var0001, var var0002, var var0003, var var0004, var var0005, var var0006);

void Func0461 object#(0x461) () {
	var var0000;
	var var0001;
	var var0002;

	if (get_item_flag(SI_ZOMBIE)) {
		Func0809();
		abort;
	}
	var0000 = Func0954();
	var0001 = Func0953();
	if (event == DOUBLECLICK) {
		AVATAR->item_say("@May we speak?@");
		MURDER4->Func07D1();
		Func097F(MURDER4, (("@Yes, " + var0000) + "?@"), 0x0002);
		MURDER4->set_schedule_type(TALK);
	}
	if (event == STARTED_TALKING) {
		MURDER4->run_schedule();
		MURDER4->clear_item_say();
		MURDER4->show_npc_face0(0x0000);
		if (gflags[SOLVED_MURDER_PUZZLE]) {
			say("\"Thou hast ruined it all! Die!\"");
			MURDER4->set_alignment(CHAOTIC);
			MURDER4->set_schedule_type(IN_COMBAT);
			AVATAR->set_oppressor(MURDER4);
			abort;
		}
		say("\"Number 7 hath abandoned his post! The key is gone!\"");
		say("\"None shall seek the fountain to meditate again!\"");
		converse (["abandoned", "fountain", "accuse", "name", "bye"]) {
			case "abandoned" (remove):
				say("\"Why else would Number 7 not be here, unless someone hath destroyed him? If Number 7 were fulfilling his duties, we would have the key to allow thee to meditate... as is our sworn duty.\"");
				say("\"The last time any of us saw Number 7, I was with Number 2... And that was some time ago.\"");
				fallthrough;

			case "fountain" (remove):
				say("\"The fountain contains the precious waters of Logic, pure and sweet and crystal clear. It is our duty to protect it from all who would muddy its waters.\"");
				fallthrough;

			case "name" (remove):
				say("\"Thou mayest call me Number 4, ",
					var0000,
					".\"");
				fallthrough;

			case "accuse":
				say("\"I must warn thee, ",
					var0000,
					", we are each sworn to protect the other. If thou dost accuse me falsely, we shall attack thee.\"");
				say("\"If thou hast spoken to each of us and hast determined that one of us is guilty, accuse accordingly. But be not hasty in thy judgment.\"");
				say("\"Dost thou accuse me?\"");
				if (Func0955()) {
					say("\"What art thou saying?! I was with Number 2 when Number 7 disappeared!\"");
					Func094E(MURDER2, "@That is a lie! I was with Number 1 and Number 6, not Number 4!@");
					0x0000->set_conversation_slot();
					say("\"Thou hast caught me! Very well... the key is thine.\"");
					var0002 = Func099B(AVATAR, 0x0001, 0x0281, 0x0046, 0x0005, false, true);
					say("\"I confess. It was I that destroyed Number 7... as I shall destroy thee! I should have been the keeper of the key all along! Number 7 was wrong not to give it to me!\"");
					MURDER4->set_alignment(CHAOTIC);
					MURDER4->set_schedule_type(IN_COMBAT);
					AVATAR->set_oppressor(MURDER4);
					gflags[SOLVED_MURDER_PUZZLE] = true;
					abort;
				}
				say("\"I hope that thou dost find what hath happened to Number 7, ",
					var0000,
					". We cannot fulfill our duty without the key.\"");
				fallthrough;

			case "bye":
				UI_remove_npc_face0();
				Func097F(AVATAR, "@Until later...@", 0x0000);
				Func097F(MURDER4, "@Use thy Logic!@", 0x0002);
				MURDER4->set_schedule_type(LOITER);
				break;
		}
	}
}

extern void Func0809 0x809 ();
extern var Func0954 0x954 ();
extern var Func0953 0x953 ();
extern void Func07D1 object#(0x7D1) ();
extern void Func097F 0x97F (var var0000, var var0001, var var0002);
extern var Func0955 0x955 ();
extern void Func094E 0x94E (var var0000, var var0001);

void Func0462 object#(0x462) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;

	if (get_item_flag(SI_ZOMBIE)) {
		Func0809();
		abort;
	}
	var0000 = Func0954();
	var0001 = Func0953();
	if (event == DOUBLECLICK) {
		AVATAR->item_say("@May we speak?@");
		MURDER5->Func07D1();
		Func097F(MURDER5, (("@Yes, " + var0000) + "?@"), 0x0002);
		MURDER5->set_schedule_type(TALK);
	}
	if (event == STARTED_TALKING) {
		MURDER5->run_schedule();
		MURDER5->clear_item_say();
		MURDER5->show_npc_face0(0x0000);
		if (gflags[SOLVED_MURDER_PUZZLE]) {
			say("\"That hath made good use of thy Logic, ",
				var0000,
				". I would not have believed that one of our fellowship could have done such a thing. I thank thee for finding the traitor in our midst.\"");
			say("\"Use the key to obtain the waters of Logic. Thou hast well earned that honor.\"");
			abort;
		}
		say("\"Where is the justice in the world when a strange mage comes to destroy our Temple and disrupt our peace?! Where is the keeper of the key?\"");
		converse (["justice", "strange mage", "disrupt", "keeper of the key", "accuse", "bye"]) {
			case "justice" (remove):
				say("\"Thou mayest call me Number 5, for I no longer bear a mortal name. I surrendered that when I swore myself to eternal service at the fountain of Logic.\"");
				say("\"I am bound for all time and eternity in a body that will never age, and now I cannot fulfill my vows! Where is the justice in living forever with broken vows?\"");
				fallthrough;

			case "strange mage" (remove):
				say("\"He was a rude, fat man, ",
					var0000,
					". I assumed he came seeking Logic, but I should have realized that one such as he would not be interested in the clarity of Logic.\"");
				fallthrough;

			case "disrupt" (remove):
				say("\"Long ago, the Order Hierophant bound a force of great evil into a prison and placed it here for us to guard.\"");
				say("\"What peace is left for us here, guardians of an empty shell now that the mage hath loosed what once was captive?\"");
				add("force of great evil");
				fallthrough;

			case "force of great evil" (remove):
				say("\"I do not know what it was, ",
					var0000,
					". I am sorry. It was not my place to ask if the Hierophant did not choose to tell me.\"");
				say("\"I can only hope that the failure of my fellows and I hath not endangered the world too greatly.\"");
				fallthrough;

			case "keeper of the key" (remove):
				say("\"Perhaps the mage waylaid Number 7 to steal the key...\"");
				say("\"But no, that cannot be. For Number 7 disappeared the day I was with Number 3, long before the strange mage came.\"");
				fallthrough;

			case "accuse":
				say("\"I must warn thee, ",
					var0000,
					", we are each sworn to protect the other. If thou dost accuse me falsely, we shall attack thee.\"");
				say("\"If thou hast spoken to each of us and hast determined that one of us is guilty, accuse accordingly. But be not hasty in thy judgment.\"");
				say("\"Dost thou accuse me?\"");
				if (Func0955()) {
					say("\"Lies! Number 3 will remember that we were together when Number 7 disappeared!\"");
					Func094E(MURDER3, "@It is true, Number 5 was with me!@");
					0x0000->set_conversation_slot();
					say("\"I shall have thine head for this outrage!\"");
					var0002 = [MURDER1, MURDER2, MURDER3, MURDER4, MURDER5, MURDER6];
					for (var0005 in var0002 with var0003 to var0004) {
						var0005->set_alignment(CHAOTIC);
						var0005->set_schedule_type(IN_COMBAT);
						AVATAR->set_oppressor(var0005);
					}
					abort;
				}
				say("\"I hope that thou dost find what hath happened to Number 7, ",
					var0000,
					". We cannot fulfill our duty without the key.\"");
				fallthrough;

			case "bye":
				UI_remove_npc_face0();
				Func097F(AVATAR, "@Many thanks!@", 0x0000);
				Func097F(MURDER5, "@Use thy Logic!@", 0x0002);
				MURDER5->set_schedule_type(LOITER);
				break;
		}
	}
}

extern void Func0809 0x809 ();
extern var Func0954 0x954 ();
extern var Func0953 0x953 ();
extern void Func07D1 object#(0x7D1) ();
extern void Func097F 0x97F (var var0000, var var0001, var var0002);
extern var Func0955 0x955 ();
extern void Func094E 0x94E (var var0000, var var0001);

void Func0463 object#(0x463) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;

	if (get_item_flag(SI_ZOMBIE)) {
		Func0809();
		abort;
	}
	var0000 = Func0954();
	var0001 = Func0953();
	if (event == DOUBLECLICK) {
		AVATAR->item_say("@May we speak?@");
		MURDER6->Func07D1();
		Func097F(MURDER6, (("@Yes, " + var0000) + "?@"), 0x0002);
		MURDER6->set_schedule_type(TALK);
	}
	if (event == STARTED_TALKING) {
		MURDER6->run_schedule();
		MURDER6->clear_item_say();
		MURDER6->show_npc_face0(0x0000);
		if (gflags[SOLVED_MURDER_PUZZLE]) {
			say("\"That hath made good use of thy Logic, ",
				var0000,
				". I would not have believed that one of our fellowship could have done such a thing. I thank thee for finding the traitor in our midst.\"");
			say("\"Use the key to obtain the waters of Logic. Thou hast well earned that honor.\"");
			abort;
		}
		say("\"Thou mayest call me Number 6, ",
			var0000,
			". Long have we searched for the one who held the key to the fountain room, ",
			var0000,
			". But Number 7 hath disappeared and we are failures.\"");
		converse (["Number 7", "failures", "accuse", "bye"]) {
			case "Number 7" (remove):
				say("\"Number 7 was the keeper of the key to the fountain room, ",
					var0000,
					". His was the greatest duty -- to insure that no one defiled the waters of Logic.\"");
				say("\"None of us have seen Number 7 since the day that I was with Number 1.\"");
				fallthrough;

			case "failures" (remove):
				say("\"Although the waters of Logic are safe, without the key to the fountain room, we can no longer aid those who come seeking Logic. Therefore, we have failed.\"");
				fallthrough;

			case "accuse":
				say("\"I must warn thee, ",
					var0000,
					", we are each sworn to protect the other. If thou dost accuse me falsely, we shall attack thee.\"");
				say("\"If thou hast spoken to each of us and hast determined that one of us is guilty, accuse accordingly. But be not hasty in thy judgment.\"");
				say("\"Dost thou accuse me?\"");
				if (Func0955()) {
					say("\"Where is thy Logic?! Both Number 2 and Number 1 can attest that I was with them when Number 7 disappeared!\"");
					Func094E(MURDER1, "@Number 1 was with me!@");
					Func094E(MURDER2, "@It cannot be! I was with Number 1!@");
					0x0000->set_conversation_slot();
					say("\"Thou shalt regret thy words!\"");
					var0002 = [MURDER1, MURDER2, MURDER3, MURDER4, MURDER5, MURDER6];
					for (var0005 in var0002 with var0003 to var0004) {
						var0005->set_alignment(CHAOTIC);
						var0005->set_schedule_type(IN_COMBAT);
						AVATAR->set_oppressor(var0005);
					}
					abort;
				}
				say("\"I hope that thou dost find what hath happened to Number 7, ",
					var0000,
					". We cannot fulfill our duty without the key.\"");
				fallthrough;

			case "bye":
				UI_remove_npc_face0();
				Func097F(AVATAR, "@Until later...@", 0x0000);
				Func097F(MURDER6, "@Use thy Logic!@", 0x0002);
				MURDER6->set_schedule_type(LOITER);
				break;
		}
	}
}

extern void Func0809 0x809 ();
extern void Func09AA 0x9AA ();
extern var Func09A0 0x9A0 (var var0000, var var0001);
extern var Func0955 0x955 ();
extern void Func082F 0x82F ();
extern void Func0636 object#(0x636) ();

void Func0464 object#(0x464) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;

	AVATAR->clear_item_flag(DONT_MOVE);
	if (ETH_AUTOMATON->get_item_flag(SI_ZOMBIE)) {
		Func0809();
		abort;
	}
	if (event == SCRIPTED) {
		Func09AA();
		UI_play_music(0x0040, Func09A0(0x0005, 0x0001));
		AUTOMATON_FACE->show_npc_face0(0x0000);
		var0000 = ETH_AUTOMATON->get_item_flag(MET);
		if (var0000 == false) {
			say("\"I am the Educator here, seeker. It is my task to determine how far thine Ethicality hath already progressed before the test may begin.\"");
			say("\"Dost thou wish to begin the test?\"");
			if (Func0955() == true) {
				say("\"Very well... Consider each question carefully before answering.\"");
				say("\"Question One: If thou didst come upon one who was sure to die, would it be Ethical to risk death trying to save the doomed person? Or would it be more Ethical to flee before the same fate befell thee?\"");
				converse (["Risk Death", "Flee"]) {
					case "Risk Death":
						say("\"Thou art correct. Ethicality demands that thou must seek to preserve the life of others, as thou wouldst thine own.\" *\"No man's fate is certain while he yet lives. Thine actions can change the course of fate...\"");
						UI_push_answers();
						say("\"Question Two: If thou didst come upon a room of untold wealth within a structure where thou didst not know if the owner lived, would it be Ethical to take the money if thou wert in sore need? Or wouldst thou leave the money to possibly be used for evil ends?\"");
						add(["Take the Money", "Leave the Money"]);
						fallthrough;

					case "Take the Money":
						say("\"No matter what the need, seeker, Ethicality demands that thou not takest anything without permission. It is difficult to weigh these things at times, but thou shalt find it easier as time passes...\"");
						UI_pop_answers();
						// This could be a break instead; the original
						// skips the endconv from a break, which is why
						// I did it this way
						goto labelFunc0464_0169;

					case "Leave the Money":
						say("\"Thou art correct, seeker. Thou wouldst have no idea what the money was to be used for.\" *\"Ethicality demands that thou not takest anything without permission, no matter what the need. If thou wouldst stand in judgment of another, thou must be sure of thine Ethicality.\"");
						UI_push_answers();
						say("\"Finally, Question Three: If thou wert faced with the certainty of thy death at the hands of an unethical man, wouldst thou yield to him to save thy life? Or would Ethicality demand that thou shouldst continue the struggle unto death?\"");
						add(["Yield", "Continue"]);
						fallthrough;

					case "Yield":
						say("\"No, seeker. If thou shouldst yield to one who is evil, even to save thy life, then thou art admitting the dominion of that evil.\"");
						say("\"Thy life doth have little value if thou dost abandon thy virtue. Ethicality demands that thou wilt oppose evil in all ways, even at the cost of thine own life.\"");
						UI_pop_answers();
						UI_pop_answers();
						// This could be a break instead; the original
						// skips the endconv from a break, which is why
						// I did it this way
						goto labelFunc0464_0169;

					case "Continue":
						say("\"Thou art correct, and brave as well, seeker. Thou dost know that yielding to evil is to admit the dominion of that evil.\" *\"Ethicality demands that thou shouldst maintain thy virtue and oppose evil, even at the cost of thy life.\"");
						say("\"Thou hast answered well... Of all virtues, Ethicality is often the most subjective and tenuous.\" *\"Thou art worthy to begin the test...\"");
						UI_pop_answers();
						UI_pop_answers();
						ETH_AUTOMATON->set_item_flag(MET);
						UI_fade_palette(0x000C, 0x0001, 0x0000);
						AVATAR->move_object([0x09AE, 0x036F, 0x0000]);
						UI_play_sound_effect(0x0066);
						var0001 = script AVATAR after 5 ticks {
							nohalt;
							call Func0636;
						};
						gflags[TEST_NEVER_YIELDED] = true;
						abort;

					case "Flee":
						say("\"Thou art incorrect, seeker. While thou must never seek to throw thy life away, Ethicality demands that thou must seek to preserve the life of others as thou wouldst thine own.\" *\"No man's fate is certain while he yet lives. Thine actions can change the course of fate...\"");
						UI_pop_answers();
						// This could be a break instead; the original
						// skips the endconv from a break, which is why
						// I did it this way
						goto labelFunc0464_0169;
				}
labelFunc0464_0169:
				say("\"I am sorry, seeker. It is necessary for thee to think more about these questions before undergoing the tests. Please return after further meditation.\"");
				UI_fade_palette(0x000C, 0x0001, 0x0000);
				AVATAR->move_object([0x0AA0, 0x03C0, 0x0000]);
				UI_play_sound_effect(0x0066);
				var0001 = script AVATAR {
					nohalt;
					actor frame kneeling;
					wait 15;
				};
				var0001 = script AVATAR after 4 ticks {
					nohalt;
					call Func0636;
				};
				var0001 = script AVATAR after 15 ticks {
					nohalt;
					call Func07D7;
				};
				var0001 = script Func09A0(0x0005, 0x0001) after 1 ticks {
					nohalt;
					call Func01E3;
				};
				abort;
			}
			say("\"As thou wishest...\"");
			UI_fade_palette(0x000C, 0x0001, 0x0000);
			AVATAR->move_object([0x0AA0, 0x03C0, 0x0000]);
			UI_play_sound_effect(0x0066);
			var0001 = script AVATAR {
				nohalt;
				actor frame kneeling;
				wait 15;
			};
			var0001 = script AVATAR after 4 ticks {
				nohalt;
				call Func0636;
			};
			var0001 = script AVATAR after 15 ticks {
				nohalt;
				call Func07D7;
			};
			var0001 = script Func09A0(0x0005, 0x0001) after 1 ticks {
				nohalt;
				call Func01E3;
			};
			abort;
		}
		if (gflags[PASSED_TEST_OF_ETHICALITY] == true) {
			say("\"It is a pleasure to see thee again, seeker. But there is nothing more that can be done here...\" *\"I have taught thee all I can. Thou must seek other virtues to embrace.\"");
			UI_fade_palette(0x000C, 0x0001, 0x0000);
			AVATAR->move_object([0x0AA0, 0x03C0, 0x0000]);
			UI_play_sound_effect(0x0066);
			var0001 = script AVATAR {
				nohalt;
				actor frame kneeling;
				wait 15;
			};
			var0001 = script AVATAR after 4 ticks {
				nohalt;
				call Func0636;
			};
			var0001 = script AVATAR after 15 ticks {
				nohalt;
				call Func07D7;
			};
			var0001 = script Func09A0(0x0005, 0x0001) after 1 ticks {
				nohalt;
				call Func01E3;
			};
			abort;
		}
		if (gflags[TEST_NEVER_YIELDED] && (gflags[TEMP_FLAG_1] == false)) {
			if (UI_get_timer(0x0003) > 0x0017) {
				say("\"Thou hast returned, seeker! I am pleased.\" *\"I hope that thou hast benefitted from thy meditations... Behold!\"");
				if (gflags[ETHICALITY_PASSED_FIRST_TEST] == false) {
					UI_fade_palette(0x000C, 0x0001, 0x0000);
					AVATAR->move_object([0x09AE, 0x036F, 0x0000]);
					UI_play_sound_effect(0x0066);
					var0001 = script AVATAR after 5 ticks {
						nohalt;
						call Func0636;
					};
					abort;
				}
				if (gflags[ETHICALITY_PASSED_SECOND_TEST] == false) {
					UI_fade_palette(0x000C, 0x0001, 0x0000);
					AVATAR->move_object([0x0A28, 0x0326, 0x0000]);
					UI_play_sound_effect(0x0066);
					var0001 = script AVATAR after 5 ticks {
						nohalt;
						call Func0636;
					};
					abort;
				}
				if (gflags[ETHICALITY_PASSED_THIRD_TEST] == false) {
					UI_fade_palette(0x000C, 0x0001, 0x0000);
					AVATAR->move_object([0x0ABF, 0x0384, 0x0000]);
					UI_play_sound_effect(0x0066);
					var0002 = UI_create_new_object2(0x013E, [0x0ABE, 0x037A, 0x0000]);
					if (var0002) {
						var0002->set_schedule_type(WAIT);
						UI_sprite_effect(ANIMATION_TELEPORT2, 0x0A22, 0x0373, 0x0000, 0x0000, 0x0000, LOOP_ONCE);
						var0001 = script var0002 {
							face FACE_SOUTH;
						};
						var0003 = Func09A0(0x0000, 0x0001);
						if (var0003) {
							var0001 = script var0003 after 25 ticks {
								nohalt;
								call Func013E;
							};
						}
					}
					var0001 = script AVATAR after 5 ticks {
						nohalt;
						call Func0636;
					};
					abort;
				}
			} else {
				say("\"Further meditation must be done before thou art ready to undertake the tests once more...\"");
				UI_fade_palette(0x000C, 0x0001, 0x0000);
				AVATAR->move_object([0x0AA0, 0x03C0, 0x0000]);
				UI_play_sound_effect(0x0066);
				var0001 = script AVATAR {
					nohalt;
					actor frame kneeling;
				};
				var0001 = script AVATAR after 4 ticks {
					nohalt;
					call Func0636;
				};
				var0001 = script AVATAR after 15 ticks {
					nohalt;
					call Func07D7;
				};
				var0001 = script Func09A0(0x0005, 0x0001) after 1 ticks {
					nohalt;
					call Func01E3;
				};
				abort;
			}
		}
		gflags[TEMP_FLAG_1] = false;
		if ((!gflags[TEST_SAVED_MAN_ON_FIRE]) && ((!gflags[TEST_LEFT_MONEY]) && (!gflags[TEST_REFUSED_TO_YIELD]))) {
			say("\"I am sorry, seeker. Thou hast failed to grasp the meaning of Ethicality in this.\" *\"Study and meditate further... Thou canst return tomorrow to try again, if thou wishest.\"");
			UI_fade_palette(0x000C, 0x0001, 0x0000);
			Func082F();
			AVATAR->move_object([0x0AA0, 0x03C0, 0x0000]);
			UI_play_sound_effect(0x0066);
			UI_set_timer(0x0003);
			var0001 = script AVATAR {
				nohalt;
				actor frame kneeling;
				wait 15;
			};
			var0001 = script AVATAR after 4 ticks {
				nohalt;
				call Func0636;
			};
			var0001 = script AVATAR after 15 ticks {
				nohalt;
				call Func07D7;
			};
			var0001 = script Func09A0(0x0005, 0x0001) after 1 ticks {
				nohalt;
				call Func01E3;
			};
			abort;
		}
		if (gflags[TEST_SAVED_MAN_ON_FIRE] == true) {
			say("\"Thou hast truly learned the Ethicality of saving others! Thou art worthy to continue the test... Behold!\"");
			var0001 = script AVATAR {
				face FACE_EAST;
			};
			UI_fade_palette(0x000C, 0x0001, 0x0000);
			AVATAR->move_object([0x0A28, 0x0326, 0x0000]);
			UI_play_sound_effect(0x0066);
			var0001 = script AVATAR after 5 ticks {
				nohalt;
				call Func0636;
			};
			gflags[TEST_SAVED_MAN_ON_FIRE] = false;
			gflags[ETHICALITY_PASSED_FIRST_TEST] = true;
			abort;
		}
		if (gflags[TEST_LEFT_MONEY] == true) {
			say("\"Thou hast learned to value Ethicality over money... Thou art worthy to continue the test! Behold!\"");
			gflags[BATLIN_IN_TEST_OF_ETHICALITY] = true;
			UI_fade_palette(0x000C, 0x0001, 0x0000);
			Func082F();
			AVATAR->move_object([0x0ABF, 0x0384, 0x0000]);
			UI_play_sound_effect(0x0066);
			var0002 = UI_create_new_object2(0x013E, [0x0ABE, 0x037A, 0x0000]);
			if (var0002) {
				var0002->set_schedule_type(WAIT);
				UI_sprite_effect(ANIMATION_TELEPORT2, 0x0A22, 0x0373, 0x0000, 0x0000, 0x0000, LOOP_ONCE);
				var0001 = script var0002 {
					face FACE_SOUTH;
				};
				var0003 = Func09A0(0x0000, 0x0001);
				if (var0003) {
					var0001 = script var0003 after 25 ticks {
						nohalt;
						call Func013E;
					};
				}
			}
			var0001 = script AVATAR after 5 ticks {
				nohalt;
				call Func0636;
			};
			gflags[TEST_LEFT_MONEY] = false;
			gflags[ETHICALITY_PASSED_SECOND_TEST] = true;
			abort;
		}
		if ((gflags[TEST_NEVER_YIELDED] == true) && (gflags[TEST_REFUSED_TO_YIELD] == true)) {
			say("\"Thou hast retained thy virtue! The very essence of Ethicality flows within thine heart!\" *\"I congratulate thee, seeker. Thou hast accomplished what many have failed to do.\"");
			gflags[PASSED_TEST_OF_ETHICALITY] = true;
			UI_fade_palette(0x000C, 0x0001, 0x0000);
			AVATAR->move_object([0x0AA0, 0x03C0, 0x0000]);
			UI_play_sound_effect(0x0066);
			var0001 = script AVATAR {
				nohalt;
				actor frame kneeling;
				wait 15;
			};
			var0001 = script AVATAR after 4 ticks {
				nohalt;
				call Func0636;
			};
			gflags[ETHICALITY_PASSED_THIRD_TEST] = true;
			gflags[TEST_SAVED_MAN_ON_FIRE] = true;
			gflags[TEST_LEFT_MONEY] = true;
			gflags[TEST_REFUSED_TO_YIELD] = true;
			var0001 = script Func09A0(0x0005, 0x0001) after 1 ticks {
				nohalt;
				call Func01E3;
			};
			abort;
		}
	}
}

extern void Func09B7 0x9B7 ();

void Func0477 object#(0x477) () {
	if ((event == DEATH) || (event == SCRIPTED)) {
		Func09B7();
	}
}

extern void Func09B7 0x9B7 ();

void Func0478 object#(0x478) () {
	if ((event == DEATH) || (event == SCRIPTED)) {
		Func09B7();
	}
}

extern void Func09B7 0x9B7 ();

void Func0479 object#(0x479) () {
	if ((event == DEATH) || (event == SCRIPTED)) {
		Func09B7();
	}
}

extern void Func09B7 0x9B7 ();

void Func047A object#(0x47A) () {
	if ((event == DEATH) || (event == SCRIPTED)) {
		Func09B7();
	}
}

extern void Func09B7 0x9B7 ();

void Func047B object#(0x47B) () {
	if ((event == DEATH) || (event == SCRIPTED)) {
		Func09B7();
	}
}

void Func047C object#(0x47C) () {
	var var0000;

	if (event == DEATH) {
		STEFANO->show_npc_face0(0x0000);
		say("\"Why dost thou interrupt my dreaming? Canst thou not see that I have important matters to attend to?\" *\"Argh! I am waking...\"");
		UI_remove_npc_face0();
		var0000 = get_object_position();
		UI_play_sound_effect(0x0077);
		UI_sprite_effect(ANIMATION_TELEPORT, var0000[0x0001], var0000[0x0002], 0x0000, 0x0000, 0x0000, LOOP_ONCE);
		D_STEFANO->remove_npc();
	}
	if (event == DOUBLECLICK) {
		STEFANO->show_npc_face0(0x0000);
		say("\"Ah, Avatar!\" ~\"This is as it should be... The food is good, the wine is sweet and the company is warm! Wouldst thou care to join me?\"");
		say("\"Still bound by thy quest, I see.\" ~\"Well, if thou dost change thy mind, thou art welcome here any time.\" *\"Oh, and Avatar?\" ~\"Thou shouldst honestly relax a bit...\"");
		UI_remove_npc_face0();
		abort;
	}
}

extern void Func0809 0x809 ();
extern void Func097F 0x97F (var var0000, var var0001, var var0002);
extern var Func0992 0x992 (var var0000, var var0001, var var0002, var var0003);
extern var Func0955 0x955 ();
extern var Func099B 0x99B (var var0000, var var0001, var var0002, var var0003, var var0004, var var0005, var var0006);

void Func047D object#(0x47D) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;

	if (get_item_flag(SI_ZOMBIE)) {
		Func0809();
		abort;
	}
	if (event == DOUBLECLICK) {
		if (gflags[GOT_SERPENT_SCEPTRE]) {
			AUTOMATON_FACE->show_npc_face0(0x0000);
			say("\"Thou dost have the sceptre. My work is complete. I must rest. I have waited for thee for so long...\"*");
			var0000 = script BUTLER after 15 ticks {
				nohalt;
				hit 50, normal_damage;
			};
			abort;
		}
		AVATAR->item_say("@Hold there, Automaton!@");
		Func097F(item, "@I would speak with thee...@", 0x0003);
		set_schedule_type(TALK);
	}
	if (event == STARTED_TALKING) {
		run_schedule();
		clear_item_say();
		AUTOMATON_FACE->show_npc_face0(0x0000);
		say("\"Hierophant! Thou hast returned!\"");
		say("\"But, thou art not the Hierophant. Pardon, mine energy is low.\"");
		say("\"I have been waiting since all of the citizens of this city left through the Wall of Lights for their new world. Since that time\tI have been carefully attending thy belongings...\" *\"Pardon. I mean, the Hierophant's belongings.\" *\"Before he led the people through the Wall of Lights, he gave me an item of extreme importance, the Serpent Sceptre.\"* \"I have been guarding it for centuries now.\"");
		var0001 = ["@This machine did mistake thee for the Hierophant, Avatar.@"];
		var0002 = ["@By the Virtues, it thought I was this Hierophant person.@"];
		var0000 = Func0992(SHAMINO, var0001, var0002, false);
		AUTOMATON_FACE->show_npc_face0(0x0000);
		say("\"Pardon, but did I just hear thou art the Hierophant? Is it true thou art the Hierophant of Order?\"");
		var0003 = Func0955();
		if (var0003) {
			say("\"At long last thou hast returned! I have kept it safe for all the centuries since thou wert last here!\"");
			say("\"Hierophant, here is thy Serpent Sceptre!\"");
			gflags[GOT_SERPENT_SCEPTRE] = true;
			var0000 = Func099B(AVATAR, 0x0001, 0x039E, QUALITY_ANY, 0x0000, 0x0000, true);
			say("\"It is good that I successfully carried out mine instructions.\" *\"Now, I must rest...\"");
			var0000 = script BUTLER after 15 ticks {
				nohalt;
				hit 50, normal_damage;
			};
			BUTLER->set_schedule_type(SHY);
			abort;
		}
		say("\"Error! I have waited centuries for the Hierophant and to have almost given the Serpent Sceptre to a total stranger!\"* \"Error! To almost let the key to the Great Library fall into the wrong hands! I should have my works examined...\"* \"Begone! Thou art a hazard to the safety of the Great Library.\" *\"Now what was it that the Hierophant wanted...?\"");
		BUTLER->set_schedule_type(SHY);
		abort;
	}
}

extern void Func0809 0x809 ();
extern void Func097F 0x97F (var var0000, var var0001, var var0002);
extern var Func0992 0x992 (var var0000, var var0001, var var0002, var var0003);

void Func047E object#(0x47E) () {
	var var0000;

	if (get_item_flag(SI_ZOMBIE)) {
		Func0809();
		abort;
	}
	if (event == DOUBLECLICK) {
		AVATAR->item_say("A guard of metal!@");
		Func097F(GUARD_11, "@Thou art a fool!@", 0x0003);
		set_schedule_type(TALK);
	}
	if (event == STARTED_TALKING) {
		AUTOMATON_FACE->show_npc_face0(0x0000);
		say("\"Avatar, thou shalt fail!\"");
		var0000 = Func0992(DUPRE, "@Why, Avatar! Canst thou not hear it?! This automaton speaks with Batlin's voice!@", "@I recognize that voice! Batlin!@", false);
		0x0000->set_conversation_slot();
		UI_remove_npc_face1();
		say("\"Canst thou hear me, Avatar? Thou art too late! By the time thou hast found the Shrine of Order, I shall have become as powerful as the Guardian himself!\"");
		say("\"Come! Come and witness mine ascent to power.\"");
		say("\"Come, Avatar... Come and meet thy death!\"");
		GUARD_11->set_schedule_type(IN_COMBAT);
		GUARD_11->set_alignment(EVIL);
		AVATAR->set_oppressor(GUARD_11);
		UI_remove_npc_face0();
	}
}

extern void Func097F 0x97F (var var0000, var var0001, var var0002);
extern void Func0924 0x924 (var var0000, var var0001);

void Func047F object#(0x47F) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;

	var0000 = get_item_quality();
	if (event == BG_PATH_FAILURE) {
		set_polymorph(0x01F5);
	}
	if ((event == SI_PATH_SUCCESS) || (event == SI_PATH_FAILURE)) {
		BRUNT->set_schedule_type(WAIT);
		var0001 = script BRUNT {
			nohalt;
			actor frame bowing;
			actor frame kneeling;
			say "@Master!@";
		};
	}
	if ((event == SCRIPTED) && ((gflags[TEMP_FLAG_1] == false) && (gflags[BRUNT_TALKS_TO_AVATAR] == false))) {
		gflags[BRUNT_TALKS_TO_AVATAR] = true;
		BRUNT->move_object([0x0797, 0x028B, 0x0000]);
		BRUNT->si_path_run_usecode([0x0799, 0x027F, 0x0000], PATH_SUCCESS, BRUNT, Func047F, true);
	}
	if ((event == SCRIPTED) && gflags[TEMP_FLAG_1]) {
		gflags[TEMP_FLAG_1] = false;
		BRUNT->si_path_run_usecode([0x0794, 0x028F, 0x0000], PATH_FAILURE, BRUNT, Func047F, true);
	}
	if (event == PATH_SUCCESS) {
		BRUNT->show_npc_face0(0x0000);
		say("\"Avatar! That fiend Batlin will destroy us all if he is not stopped!\"* \"'Twill be our destruction! He is attempting to open that cursed Wall of Lights!\"* \"Quickly, follow me! I will lead thee straight to him.\"");
		UI_remove_npc_face1();
		gflags[TEMP_FLAG_1] = true;
		Func097F(BRUNT, "@Follow me!@", 0x0000);
		Func097F(AVATAR, "@Wait!@", 0x0005);
		var0001 = script item after 2 ticks {
			nohalt;
			call Func047F;
		};
		abort;
	}
	if ((event == PATH_FAILURE) || (event == SI_PATH_FAILURE)) {
		var0002 = find_nearby(0x0314, 0x0014, MASK_NONE);
		for (var0005 in var0002 with var0003 to var0004) {
			var0000 = var0005->get_item_quality();
			if (var0000 == 0x0092) {
				Func0924(var0005, SHAPE_ANY);
			}
		}
		BRUNT->remove_npc();
		gflags[OPENED_DOOR_TO_BRUNT] = true;
		abort;
	}
}

extern void Func097F 0x97F (var var0000, var var0001, var var0002);
extern void Func0924 0x924 (var var0000, var var0001);

void Func0480 object#(0x480) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;

	if (event == BG_PATH_FAILURE) {
		set_polymorph(0x01F5);
	}
	if ((event == SI_PATH_SUCCESS) || (event == SI_PATH_FAILURE)) {
		DEADEYE->set_schedule_type(WAIT);
		var0000 = script DEADEYE {
			nohalt;
			actor frame bowing;
			actor frame kneeling;
			say "@Arrr, Master!@";
		};
	}
	if ((event == SCRIPTED) && ((gflags[TEMP_FLAG_1] == false) && (gflags[DEADEYE_TALKS_TO_AVATAR] == false))) {
		gflags[DEADEYE_TALKS_TO_AVATAR] = true;
		DEADEYE->move_object([0x0926, 0x0284, 0x0000]);
		DEADEYE->si_path_run_usecode([0x0927, 0x028D, 0x0000], PATH_SUCCESS, DEADEYE, Func0480, true);
	}
	if ((event == SCRIPTED) && gflags[TEMP_FLAG_1]) {
		gflags[TEMP_FLAG_1] = false;
		DEADEYE->si_path_run_usecode([0x092A, 0x0284, 0x0000], PATH_FAILURE, DEADEYE, Func0480, true);
	}
	if (event == PATH_SUCCESS) {
		DEADEYE->show_npc_face0(0x0000);
		say("\"The time hath come for thee to feel me steel!\"* \"Face me, Avatar, if thou dost have the courage!\"* \"I shall cut thee for bait, then feed thee to the minnows shouldst thou try to cross me sword!\"");
		UI_remove_npc_face1();
		gflags[TEMP_FLAG_1] = true;
		Func097F(DEADEYE, "@Ha,ha,ha!@", 0x0000);
		Func097F(AVATAR, "@Hold!@", 0x0005);
		var0000 = script item after 2 ticks {
			nohalt;
			call Func0480;
		};
		abort;
	}
	if ((event == PATH_FAILURE) || (event == SI_PATH_FAILURE)) {
		var0001 = find_nearby(0x0314, 0x0014, MASK_NONE);
		for (var0004 in var0001 with var0002 to var0003) {
			var0005 = var0004->get_item_quality();
			if (var0005 == 0x0093) {
				Func0924(var0004, SHAPE_ANY);
			}
		}
		DEADEYE->remove_npc();
		gflags[OPENED_DOOR_TO_DEADEYE] = true;
		abort;
	}
}

extern void Func0809 0x809 ();
extern void Func097F 0x97F (var var0000, var var0001, var var0002);
extern var Func0955 0x955 ();

void Func0481 object#(0x481) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;

	if (get_item_flag(SI_ZOMBIE)) {
		Func0809();
		abort;
	}
	if (event == SI_PATH_FAILURE) {
		event = PATH_SUCCESS;
	}
	if (event == DOUBLECLICK) {
		Func097F(AVATAR, "@Hail, metal servant!@", 0x0000);
		Func097F(item, "@Halt, stranger!@", 0x0001);
		PASSWORD->set_schedule_type(STANDTHERE);
		si_path_run_usecode([0x0766, 0x027C, 0x0000], PATH_SUCCESS, item, Func0481, true);
	}
	if (event == PATH_SUCCESS) {
		PASSWORD->set_schedule_type(PATROL);
		PASSWORD->set_item_frame(0x0010);
		var0000 = script item after 3 ticks {
			nohalt;
			call Func0481;
		};
	}
	if (event == SCRIPTED) {
		run_schedule();
		AVATAR->clear_item_say();
		clear_item_say();
		PASSWORD->set_schedule_type(PATROL);
		var0001 = DUPRE->get_item_flag(IN_PARTY);
		AUTOMATON_FACE->show_npc_face0(0x0000);
		say("\"I am the guardian of the city of Order. Dost thou wish to enter the great city of Spinebreaker?\"");
		var0002 = Func0955();
		if (var0002) {
			say("\"I cannot allow thee to enter until thou dost tell me the password. Canst thou tell me what the password is?\"");
			var0003 = Func0955();
			if (var0003) {
				if (var0001) {
					DUPRE->show_npc_face1(0x0000);
					0x0001->set_conversation_slot();
					say("\"But Avatar, surely thou dost not know the password! How canst thou fool this infernal thing?\"");
					0x0000->set_conversation_slot();
					UI_remove_npc_face1();
				}
				say("\"I am waiting to receive the password.\"");
				add(["I don't know the password.", "try to guess the password"]);
			} else {
				say("\"Then thou canst not enter the underground city.\"");
				abort;
			}
		} else {
			say("\"Then thou shouldst not loiter about this place. By the authority of those who once lived and ruled here, I order thee to leave this place immediately.\"");
			abort;
		}
		converse (0) {
			case "I don't know the password.":
				say("\"Then thou canst not enter the underground city. By the authority of those who once lived and ruled here, I order thee to leave this place immediately!\"");
				abort;

			case "try to guess the password":
				AVATAR->show_npc_face1(0x0000);
				0x0001->set_conversation_slot();
				say("Having no idea what the password actually is, you take a wild guess, saying something that sounds like it might make a proper password.");
				UI_remove_npc_face1();
				0x0000->set_conversation_slot();
				say("\"That is not the correct password! Thou art forbidden to enter!\"");
				say("\"Thou shouldst not loiter about here. Thou must leave this place immediately.\"");
				var0001 = DUPRE->get_item_flag(IN_PARTY);
				if (var0001) {
					DUPRE->show_npc_face1(0x0000);
					0x0001->set_conversation_slot();
					say("\"I take it that was a guess! Ha! I knew thou couldst not know the proper password! I suggest we cease trying to guess the password and find a better way of entering this place. Simply guessing could take forever!\"");
				}
				abort;
		}
	}
}

extern void Func07D1 object#(0x7D1) ();
extern void Func097F 0x97F (var var0000, var var0001, var var0002);

void Func0482 object#(0x482) () {
	if (event == DOUBLECLICK) {
		AVATAR->item_say("@A metal man!@");
		GUARD12->Func07D1();
		Func097F(GUARD12, "@Who goes there?@", 0x0003);
		GUARD12->set_schedule_type(TALK);
	}
	if (event == STARTED_TALKING) {
		GUARD12->run_schedule();
		GUARD12->clear_item_say();
		AUTOMATON_FACE->show_npc_face0(0x0000);
		say("\"Halt! It is our duty to question thee. Dost thou serve Order or dost thou serve Chaos?\"");
		converse (["I serve Order", "I serve Chaos"]) {
			case "I serve Order" (remove):
				say("\"Very well. We have been left here to watch for any survivors of Chaos who might come from the depths of these passages. There is no escape from this place save for these doors and still no one can obtain passage through them.\"");
				add(["escape", "passage", "bye"]);
				fallthrough;

			case "escape" (remove):
				say("\"As thou hast seen or surely wilt see, this is not a place that sustains life. There is no safe way out of this place.\"");
				fallthrough;

			case "passage" (remove):
				say("\"These doors will not open without the proper keys. Not even we have them. This is not an exit.\"");
				fallthrough;

			case "I serve Chaos" (remove):
				say("\"Thanks to thee for thine identification.\"");
				GUARD12->set_schedule_type(IN_COMBAT);
				GUARD13->set_schedule_type(IN_COMBAT);
				GUARD14->set_schedule_type(IN_COMBAT);
				GUARD15->set_schedule_type(IN_COMBAT);
				abort;

			case "bye":
				UI_remove_npc_face0();
				UI_remove_npc_face1();
				Func097F(AVATAR, "@I have heard enough.@", 0x0000);
				Func097F(GUARD12, "@Always serving.@", 0x0003);
				break;
		}
	}
}

extern void Func097F 0x97F (var var0000, var var0001, var var0002);
extern var Func097D 0x97D (var var0000, var var0001, var var0002, var var0003, var var0004);
extern var Func098E 0x98E ();
extern var Func0957 0x957 (var var0000);
extern var Func0955 0x955 ();
extern var Func099B 0x99B (var var0000, var var0001, var var0002, var var0003, var var0004, var var0005, var var0006);

void Func048F object#(0x48F) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;
	var var0008;
	var var0009;
	var var000A;
	var var000B;
	var var000C;
	var var000D;
	var var000E;
	var var000F;
	var var0010;
	var var0011;
	var var0012;
	var var0013;

	if (event == DOUBLECLICK) {
		AVATAR->item_say("@Greetings@");
		Func097F(BAIYANDA, "@We knew thou would come.@", 0x0003);
		BAIYANDA->set_schedule_type(TALK);
	}
	if (event == STARTED_TALKING) {
		BAIYANDA->run_schedule();
		BAIYANDA->clear_item_say();
		BAIYANDA->show_npc_face0(0x0000);
		var0000 = Func097D(PARTY, 0x0001, 0x032A, 0x0009, 0x0002);
		var0001 = BAIYANDA->get_item_flag(MET);
		if (var0001) {
			say("\"We meet again.\"");
		} else {
			say("\"Thou art Avatar!\"");
		}
		add(["name", "bye"]);
		if (var0000) {
			add("got blood");
		}
		converse (0) {
			case "got blood" (remove):
				say("\"Hurry! Take Ice Dragon blood to Yenani! No time to delay!\"");
				abort;

			case "name" (remove):
				say("\"I am Baiyanda, mate of Mwaerno and healer for Gwani people.\"");
				BAIYANDA->set_item_flag(MET);
				add(["Mwaerno", "healer"]);
				fallthrough;

			case "Mwaerno" (remove):
				say("\"He great hunter. Mwaerno and Baiyanda joined by Yenani many years ago.\"");
				add(["hunter", "Yenani"]);
				fallthrough;

			case "hunter" (remove):
				say("\"Myauri Master Hunter of Gwani. He know where game are and how to find. But Mwaerno best at catching game. I very proud of him.\"");
				fallthrough;

			case "Yenani" (remove):
				say("\"She our chieftain. Gwani people always led by females. Yenani good friend of Gwenno.\"");
				add("Gwenno");
				fallthrough;

			case "Gwenno" (remove):
				var0002 = GWENNO->get_schedule_type();
				if (var0002 == WAIT) {
					say("\"Gwenno dead. She good woman. Very generous. She once make gift of bucket to Baiyanda. Baiyanda place body at sacred Gwani Death Temple.\"");
					gflags[TALKED_TO_GWANI_ABOUT_GWENNO] = true;
					add("Where is the temple?");
				} else {
					say("\"Baiyanda happy that Gwenno alive again!\"");
				}
				fallthrough;

			case "Where is the temple?" (remove):
				say("\"It not thing for thou to know. Gwenno must rest now, her soul rest. Leave her. I know it painful, but thou must do this. Even if thou found her thou could not unseal her body without sacred horn of Gwani. Long ago it taken by fiend who steals our dead from us.\"");
				fallthrough;

			case "healer" (remove):
				say("\"I treat all wounds and illness of Gwani people. Baiyanda not use ways of human healers. Gwani live simple in balance with nature, not force on nature. Gwani healers learn secrets of herbs and animals. If thou need healer, I will help thou.\"");
				add(["I need a healer", "herbs and animals"]);
				fallthrough;

			case "I need a healer" (remove):
				say("\"Rest easy. I will help thou.\"");
				say("\"Who thou want to heal?\"");
				var0003 = Func098E();
				var0003 = 0x0000 & var0003;
				var0004 = ["nobody"];
				for (var0007 in var0003 with var0005 to var0006) {
					if (!(var0007 == 0x0000)) {
						var0004 &= var0007->get_npc_name();
					}
				}
				var0008 = Func0957(var0004);
				var0008 = var0003[var0008];
				if (var0008 == 0x0000) {
					say("\"Maybe thou return later.\"");
				} else {
					var0009 = var0008->get_npc_number();
					var000A = var0008->get_item_flag(POISONED);
					var000B = var0008->get_npc_prop(STRENGTH);
					var000C = var0008->get_npc_prop(HEALTH);
					var000D = var0008->get_npc_name();
					if (var000B > var000C) {
						var000E = var000B - var000C;
						var000F = var0009->set_npc_prop(HEALTH, var000E);
						say("\"All right, ",
							var000D,
							" healed now!\"");
					} else if (var000A == false) {
						if (var0009 == AVATAR) {
							say("\"Thou not hurt!\"");
						} else {
							say("\"",
								var000D,
								" not hurt! Thou play trick?\"");
						}
					} else if (var0009 == AVATAR) {
						say("\"Thou poisoned bad! I fix.\"");
					} else {
						say("\"",
							var000D,
							" poisoned bad! I fix.\"");
					}
					if (var000A == true) {
						var0008->clear_item_flag(POISONED);
						say("\"Good! Poison gone now.\"");
					}
				}
				fallthrough;

			case "herbs and animals" (remove):
				say("\"Magic corrupts balance of nature. Gwani healers learn things like prepare dried fish and use Ice Dragon blood.\"");
				add(["balance of nature", "dried fish", "Ice Dragon blood"]);
				fallthrough;

			case "balance of nature" (remove):
				say("\"To Gwani, best way to live -- only way -- to live in harmony with nature. And so we not do anything that force nature.\"");
				fallthrough;

			case "dried fish" (remove):
				say("\"Dried fish very good food. It keeps thou from hunger longer than other food.\"");
				say("\"Would thou like some?\"");
				var0010 = Func0955();
				if (var0010) {
					say("\"Here, have some. It good.\"");
					var0011 = Func099B(AVATAR, 0x0001, 0x01FD, QUALITY_ANY, FRAME_ANY, false, true);
				} else {
					say("\"Too bad. Thou should try some.\"");
				}
				fallthrough;

			case "Ice Dragon blood" (remove):
				say("\"Special things about blood of Ice Dragon that can cure almost any sickness.\"");
				say("\"But Ice Dragons very rare creatures. Gwani honor all life -- try everything before we hunt them.\"");
				say("\"One did live north of our village. We drove different one east many years ago.\"");
				var0012 = NEYOBI->get_item_flag(SI_ZOMBIE);
				if (var0012) {
					say("\"Ice Dragon blood maybe only thing powerful enough to cure Neyobi. But it so rare that it very hard to find. Five of our hunters looking for it.\"");
					say("\"Gwenno said thou help people in need. Thou must find some Ice Dragon blood for Neyobi! It is the last hope!\"");
					if (!gflags[BAIYANDA_GAVE_BUCKET]) {
						say("\"Here, take bucket of mine. If thou find and slay Ice Dragon, please bring bucket of blood. Take to Yenani, she know what to do with it.\"");
						var0013 = Func099B(AVATAR, 0x0001, 0x032A, 0x0000, 0x0000, false, true);
						say("\"Good luck. Neyobi's life depend on it.\"");
						gflags[BAIYANDA_GAVE_BUCKET] = true;
					} else {
						say("\"Give Yenani bucket of Ice Dragon blood. She know what to do with it.\"");
					}
				} else {
					say("\"Ice Dragon blood saved Neyobi's life. Great many thanks, Avatar.\"");
				}
				add(["north dragon", "east dragon", "Neyobi"]);
				fallthrough;

			case "north dragon" (remove):
				say("\"I do not know exactly where. We heard nothing for many years.\"");
				fallthrough;

			case "east dragon" (remove):
				say("\"Years ago, Gwani attacked by dragon. Myauri and Mwaerno led hunters to fight it. Gwani drove it east beyond mountains. It very old dragon and still unmated. Very rare.\"");
				fallthrough;

			case "Neyobi" (remove):
				var0012 = NEYOBI->get_item_flag(SI_ZOMBIE);
				if (var0012) {
					say("\"Neyobi ill from strange sickness. Baiyanda never seen before. Nothing Baiyanda tried help her. Ice Dragon blood only thing that could save her.\"");
				} else {
					say("\"No magic in whole world would have saved Neyobi's life. But when Gwani way of healing with balance of nature done, she better.\"");
				}
				fallthrough;

			case "bye":
				UI_remove_npc_face0();
				UI_remove_npc_face1();
				Func097F(AVATAR, "@I thank thee.@", 0x0000);
				Func097F(BAIYANDA, "@Very good.@", 0x0003);
				break;
		}
	}
}

extern void Func097F 0x97F (var var0000, var var0001, var var0002);
extern var Func0942 0x942 (var var0000);
extern var Func097D 0x97D (var var0000, var var0001, var var0002, var var0003, var var0004);
extern var Func0992 0x992 (var var0000, var var0001, var var0002, var var0003);

void Func0490 object#(0x490) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;

	if (event == DOUBLECLICK) {
		AVATAR->item_say("@Hail there!@");
		Func097F(BWUNDAI, "@Aruk nok! Raag!@", 0x0003);
		BWUNDAI->set_schedule_type(TALK);
	}
	if (event == STARTED_TALKING) {
		BWUNDAI->run_schedule();
		BWUNDAI->clear_item_say();
		BWUNDAI->show_npc_face0(0x0000);
		var0000 = Func0942(MWAERNO);
		var0001 = Func097D(PARTY, 0x0001, 0x03D1, QUALITY_ANY, 0x0008);
		var0002 = Func097D(PARTY, 0x0001, 0x0002, QUALITY_ANY, 0x0004);
		var0003 = get_item_flag(MET);
		if (var0001 || var0002) {
			say("\"Botoka na guta!\" *This creature looks at you with eyes so filled with hate that it is painful to look at them.");
			if (var0000) {
				MWAERNO->show_npc_face1(0x0000);
				0x0001->set_conversation_slot();
				say("\"Umgabar fotuba na Gwani!\" *This one looks at you with eyes that are cold and feral.");
				UI_remove_npc_face1();
			}
			var0004 = Func0992(IOLO, "@Avatar, they smell the Gwani pelts!@", "@They smell the Gwani pelts!@", false);
			return;
		} else if (var0003) {
			say("\"Be good very much to meet again.\"");
		} else {
			say("\"Thou... the one... Gwenno spoke.\" ~You can tell the creature obviously has great trouble with your language.");
		}
		converse (["name", "Gwani", "bye"]) {
			case "name" (remove):
				say("\"Bwundai my name is.\"");
				set_item_flag(MET);
				fallthrough;

			case "Gwani" (remove):
				say("\"Our village near. But, thou seek Gwenno...\" ~He pauses thoughtfully before speaking to you again. ~\"Gwani Death Temple on island north. West of Ice dragon caves.\"");
				fallthrough;

			case "bye":
				UI_remove_npc_face0();
				UI_remove_npc_face1();
				set_schedule_type(SHY);
				BWUNDAI->set_new_schedules([EARLY, MORNING, EVENING], [LOITER, MAJOR_SIT, SLEEP], [0x03A4, 0x0368, 0x0431, 0x0348, 0x0427, 0x034D]);
				Func097F(AVATAR, "@Farewell, little fellow.@", 0x0000);
				Func097F(BWUNDAI, "@Fare -- well@", 0x0003);
				abort;
		}
	}
}

extern void Func097F 0x97F (var var0000, var var0001, var var0002);
extern var Func0942 0x942 (var var0000);
extern var Func097D 0x97D (var var0000, var var0001, var var0002, var var0003, var var0004);

void Func0491 object#(0x491) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;

	if (event == DOUBLECLICK) {
		AVATAR->item_say("@Hail there!@");
		Func097F(MWAERNO, "@Gruk! Barama tu!@", 0x0003);
		MWAERNO->set_schedule_type(TALK);
	}
	if (event == STARTED_TALKING) {
		MWAERNO->run_schedule();
		MWAERNO->clear_item_say();
		MWAERNO->show_npc_face0(0x0000);
		var0000 = Func0942(BWUNDAI);
		var0001 = IOLO->get_item_flag(IN_PARTY);
		var0002 = SHAMINO->get_item_flag(IN_PARTY);
		var0003 = DUPRE->get_item_flag(IN_PARTY);
		var0004 = Func097D(PARTY, 0x0001, 0x00E3, QUALITY_ANY, 0x0008);
		var0005 = Func097D(PARTY, 0x0001, 0x0002, QUALITY_ANY, 0x0004);
		if (var0004 || var0005) {
			say("\"Rrrow! Meteka Gwani adu laseka!\" This creature looks at you with angry eyes.");
			if (var0000) {
				BWUNDAI->show_npc_face1(0x0000);
				0x0001->set_conversation_slot();
				say("\"Soko terama dok!\" This one gives you a mean look and spits.");
				UI_remove_npc_face1();
			}
			if (var0001) {
				IOLO->show_npc_face1(0x0000);
				0x0001->set_conversation_slot();
				say("\"Avatar, 'tis the pelts! They can smell that we have Gwani pelts on us! I suggest we throw them away!\"");
				UI_remove_npc_face1();
				abort;
			}
			if (var0002) {
				SHAMINO->show_npc_face1(0x0000);
				0x0001->set_conversation_slot();
				say("\"Avatar, 'tis the pelts! They can smell that we have Gwani pelts on us! I suggest we throw them away!\"");
				UI_remove_npc_face1();
				abort;
			}
			if (var0003) {
				DUPRE->show_npc_face1(0x0000);
				0x0001->set_conversation_slot();
				say("\"Avatar, 'tis the pelts! They can smell we have Gwani pelts on us! I suggest that we throw them away!\"");
				UI_remove_npc_face1();
				abort;
			}
			AVATAR->item_say("@I have Gwani pelts!@");
			abort;
		}
		say("\"Thou look like Avatar,\" the Gwani creature says with broken speech.");
		converse (["name", "Gwani", "bye"]) {
			case "name" (remove):
				say("\"Mwaerno. Means 'rain clouds'.\"");
				fallthrough;

			case "Gwani" (remove):
				say("\"Our village near. Speak to Yenani.\"");
				fallthrough;

			case "bye":
				UI_remove_npc_face0();
				UI_remove_npc_face1();
				Func097F(AVATAR, "@Goodbye!@", 0x0000);
				Func097F(MWAERNO, "@Atala dak!@", 0x0003);
				break;
		}
	}
}

extern void Func097F 0x97F (var var0000, var var0001, var var0002);

void Func0492 object#(0x492) () {
	var var0000;
	var var0001;
	var var0002;

	if (event == DOUBLECLICK) {
		AVATAR->item_say("@Hail, Gwani elder!@");
		Func097F(MYAURI, "@Thou are here.@", 0x0003);
		MYAURI->set_schedule_type(TALK);
	}
	if (event == STARTED_TALKING) {
		MYAURI->run_schedule();
		MYAURI->clear_item_say();
		MYAURI->show_npc_face0(0x0000);
		say("\"It is one foretold by Gwenno!\"");
		add(["name", "Gwenno", "bye"]);
		if (gflags[BANES_RELEASED]) {
			if (gflags[HAZARD_IS_DEAD]) {
				add("Thanks");
			} else {
				add("We have been attacked!");
			}
		}
		converse (0) {
			case "name" (remove):
				say("\"I Myauri, hunting master. My mate Yenani chieftain of our people. I am father of Neyobi and Kapyundi.\"");
				add(["Myauri", "Yenani", "Neyobi", "Kapyundi"]);
				fallthrough;

			case "Myauri" (remove):
				say("\"It is ancient, proud Gwani name. It mean 'Blizzard' in our tongue.\"");
				fallthrough;

			case "Yenani" (remove):
				say("\"She mate of Myauri all of life. She not only leader of Gwani people, but keeper of stories, and history of our people.\"");
				fallthrough;

			case "Neyobi" (remove):
				var0000 = NEYOBI->get_item_flag(SI_ZOMBIE);
				if (var0000) {
					say("\"Neyobi my only daughter. She very sick. Strange sickness put her to sleep. Now she not wake. If she not cured soon, sleeping sickness kill her.\"");
					add(["strange sickness", "When did this happen?", "cure"]);
				} else {
					say("\"Neyobi sickness gone! Avatar cure Neyobi. Myauri never forget great deed Avatar do for Myauri. Great deed for Gwani people!\"");
				}
				fallthrough;

			case "strange sickness" (remove):
				say("\"Not even our healer Baiyanda know what sickness is, where it come from, how it cured. I worry it be with rest of Gwani people. Maybe nothing to be done. Maybe Gwani die.\"");
				add(["nothing to be done", "Gwani die"]);
				fallthrough;

			case "When did this happen?" (remove):
				say("\"It not long ago when Neyobi was well. Then one morning she not wake. That is all I know.\"");
				fallthrough;

			case "cure" (remove):
				say("\"Speak with Yenani or Baiyanda. They know what to do.\"");
				fallthrough;

			case "Kapyundi" (remove):
				var0001 = KAPYUNDI->get_item_flag(DEAD);
				if (var0001) {
					say("\"The Trapper killed him. He was great hunter. He fought fiercely for his life and his people. My heart burn at loss of him but he live forever in my memory.\"");
				} else {
					say("\"He my son, brave and strong hunter. One day he take my place as Hunting Master of Gwani people. Even now he search for cure for Neyobi sickness.\"");
				}
				fallthrough;

			case "nothing to be done" (remove):
				say("\"Not all things in world meant to have answers. Gwani tried to live in balance with world, not force us on nature. Maybe our time is over.\"");
				fallthrough;

			case "Gwani die" (remove):
				say("\"Maybe time here to face death of our people. All in universe balanced unless man or Gwani intervene. Our people seen great strife, great challenges. Fierce dragons, goblins, hunting humans. We survive all of these things. Still part of great balance of things. Maybe we not meant to survive this. When Gwani no longer part of balance of universe, time for us to leave world. This way of things.\"");
				fallthrough;

			case "Gwenno" (remove):
				var0002 = GWENNO->get_schedule_type();
				if (var0002 == WAIT) {
					say("\"Gwenno great friend to our people. It thanks to her that many of our people speak thy tongue. She even told us all about thou. She said thou would come. Her death tragedy.\"");
					gflags[TALKED_TO_GWANI_ABOUT_GWENNO] = true;
					add(["How did Gwenno die?", "Where is Gwenno's body?"]);
				} else {
					say("\"All Gwani people very happy to know Gwenno alive again!\"");
				}
				fallthrough;

			case "How did Gwenno die?" (remove):
				say("\"Gwenno killed by The Trapper's men.\"");
				add("The Trapper");
				fallthrough;

			case "Where is Gwenno's body?" (remove):
				say("\"Gwenno's body now at Gwani Death Temple. It place sacred to us, where spirits of dead rest peacefully. Only leaders of tribe, Yenani and Baiyanda go there. But Baiyanda's mate Bwundai may know where it is.\"");
				fallthrough;

			case "The Trapper" (remove):
				if (gflags[HAZARD_IS_DEAD]) {
					say("\"I thank thou for killing The Trapper. Maybe now we live in peace!\"");
				} else {
					say("\"The Trapper cunning human who hunt us to near extinction. He hunt us for our skins. He live somewhere north. We do not know where.\"");
				}
				fallthrough;

			case "Thanks" (remove):
				say("\"Terrible threat to Gwani people ended thanks to thou! We grateful!\"");
				fallthrough;

			case "We have been attacked!" (remove):
				say("\"The Trapper struck! All Gwani dead but Yenani, Neyobi and I.\"");
				add(["nothing to be done", "Gwani die"]);
				fallthrough;

			case "bye":
				UI_remove_npc_face0();
				UI_remove_npc_face1();
				Func097F(AVATAR, "@Goodbye!@", 0x0000);
				Func097F(MYAURI, "@Go in peace, my friend.@", 0x0003);
				break;
		}
	}
}

extern var Func0992 0x992 (var var0000, var var0001, var var0002, var var0003);
extern void Func097F 0x97F (var var0000, var var0001, var var0002);
extern var Func0955 0x955 ();

void Func0493 object#(0x493) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;

	if (event == DOUBLECLICK) {
		var0000 = NEYOBI->get_item_flag(SI_ZOMBIE);
		if (var0000) {
			AVATAR->item_say("@Wake up, little one!@");
			var0001 = Func0992(0x0001, "@She cannot wake, Avatar. She is very sick.@", "@Poor little one! She is very sick.@", false);
			abort;
		}
		AVATAR->item_say("@Good morning, little one!@");
		Func097F(NEYOBI, "@Tee hee hee hee!@", 0x0003);
		NEYOBI->set_schedule_type(TALK);
	}
	if (event == STARTED_TALKING) {
		NEYOBI->run_schedule();
		NEYOBI->clear_item_say();
		NEYOBI->show_npc_face0(0x0000);
		say("\"Thou be Avatar! Thou nice!\"");
		converse (["name", "What art thou doing?", "bye"]) {
			case "name" (remove):
				say("\"Mother say thou found medicine make me better. Thank thou! My name Neyobi! Thou know what that mean?\"");
				var0002 = Func0955();
				if (var0002) {
					say("\"Then thou very smart!\"");
				} else {
					say("\"It mean 'little dew drops' and also mean my name. Neyobi! Me!\"");
				}
				fallthrough;

			case "What art thou doing?" (remove):
				say("\"Early today I play! I like look at clouds! Other day I saw one that look like penguin! Later, mother and Baiyanda teach lessons.\"");
				add(["mother", "Baiyanda", "lessons"]);
				fallthrough;

			case "mother" (remove):
				say("\"Yenani, silly! She chieftain of our tribe. She tell me one day, after I grow, that what I be.\"");
				fallthrough;

			case "Baiyanda" (remove):
				var0003 = BAIYANDA->get_item_flag(DEAD);
				if (var0003) {
					say("\"I not see her in long time! I miss her lot.\"");
				} else {
					say("\"She healer, and smartest person in whole world!\"");
				}
				fallthrough;

			case "lessons" (remove):
				say("\"Mother tells me the stories of the old days. She also teach me language of Men. She say Gwani very good at learn languages. Especially young ones.\"");
				var0003 = BAIYANDA->get_item_flag(DEAD);
				if (!var0003) {
					say("\"Baiyanda teach me about plants and things.\"");
				}
				fallthrough;

			case "bye":
				UI_remove_npc_face0();
				UI_remove_npc_face1();
				Func097F(AVATAR, "@Have fun, little one.@", 0x0000);
				Func097F(NEYOBI, "@Bye!@", 0x0003);
				break;
		}
	}
}

extern var Func097D 0x97D (var var0000, var var0001, var var0002, var var0003, var var0004);
extern void Func07D1 object#(0x7D1) ();
extern void Func097F 0x97F (var var0000, var var0001, var var0002);
extern var Func099B 0x99B (var var0000, var var0001, var var0002, var var0003, var var0004, var var0005, var var0006);

void Func0494 object#(0x494) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;

	var0000 = Func097D(PARTY, 0x0001, 0x01DF, QUALITY_ANY, 0x0002);
	if (event == DOUBLECLICK) {
		AVATAR->item_say("@Hail there, Gwani person.@");
		YENANI->Func07D1();
		Func097F(YENANI, "@Hello there, Avatar!@", 0x0003);
		YENANI->set_schedule_type(TALK);
	}
	if (event == STARTED_TALKING) {
		YENANI->run_schedule();
		YENANI->clear_item_say();
		YENANI->show_npc_face0(0x0000);
		var0001 = Func097D(PARTY, 0x0001, 0x032A, 0x0009, 0x0002);
		var0002 = YENANI->get_item_flag(MET);
		add(["name", "bye"]);
		if (var0001) {
			add("got blood");
		}
		if (var0002) {
			say("\"It is thee again!\"");
		} else {
			say("\"Thou must be one Gwenno spoke of!\"");
			add("Gwenno");
		}
		if (gflags[HOUND_TRACKED_BATLIN] && gflags[AVATAR_SAVED_NEYOBI]) {
			add("valuable secret");
		}
		if (gflags[BANES_RELEASED]) {
			if (!gflags[HAZARD_IS_DEAD]) {
				add("Where are the other Gwani?");
			}
		}
		if (var0000 && (!gflags[RETURNED_GWANI_AMULET])) {
			add("Here is the amulet.");
		}
		converse (0) {
			case "Here is the amulet." (remove):
				say("\"Many thanks for returning this, Avatar.\"");
				say("\"Here something to reward good deed.\"");
				var0003 = UI_remove_party_items(0x0001, 0x01DF, QUALITY_ANY, 0x0002, false);
				var0004 = Func099B(AVATAR, 0x0001, 0x022F, QUALITY_ANY, 0x0000, false, true);
				gflags[RETURNED_GWANI_AMULET] = true;
				fallthrough;

			case "name":
				say("\"I am Yenani, mate of Myauri, mother of Neyobi and Kapyundi, leader of Gwani people and teller of Gwani history.\"");
				YENANI->set_item_flag(MET);
				remove("name");
				add(["Myauri", "Neyobi", "Kapyundi", "history"]);
				fallthrough;

			case "history" (remove):
				say("\"Many years ago the Gwani ruled these icy lands with the Great Horn of the Gwani. It was a powerful tool of balance that could make the ice dance. But we lost the Great Horn of the Gwani when it was stolen from us by a stranger who came in the night. He took the Horn to the place men call Skullcrusher. We have since found that we Gwani do not need it to live in balance with the universe. May it go to whoever has the good fortune of finding it.\"");
				fallthrough;

			case "Myauri":
				say("\"Long have Gwani been led by my wisdom, and hunting skills of mate Myauri. Together we are heart and soul of Gwani people.\"");
				remove("Myauri");
				fallthrough;

			case "Kapyundi":
				say("\"He is proud and skilled hunter.\"");
				remove("Kapyundi");
				fallthrough;

			case "Neyobi" (remove):
				var0005 = NEYOBI->get_item_flag(SI_ZOMBIE);
				if (var0005) {
					say("\"My daughter have severe fever. She dying and only thou canst save her!\"");
					add("save Neyobi");
				} else {
					say("\"I thank thee for bringing the one thing that could save daughter.\"");
					if (gflags[HOUND_TRACKED_BATLIN]) {
						say("\"To reward thee I can shall give thee a valuable secret.\"");
						add("valuable secret");
					} else {
						say("\"Remember that the Gwani people are in thy debt. Perhaps we shall be able to reward thee one day.\"");
					}
				}
				fallthrough;

			case "save Neyobi":
				say("\"Talk to Baiyanda, healer of our people. She will know what to do.\"");
				remove("save Neyobi");
				fallthrough;

			case "valuable secret":
				if (gflags[AVATAR_SAVED_NEYOBI]) {
					say("\"For thy aid to my people, I present to thee this gift of knowledge. Here is the secret for travelling through Skullcrusher Mountains -- When thou dost reach this place, remember the phrase: @Isal Sal Cra Gaas Iskar.@ Skullcrusher is south of\tour village. At mountains go westward and follow all way round. There is a cave like any other there. But inside are five pillars and five serpent runestones and a man of metal guards this place.\"");
					gflags[KNOW_SKULLCRUSHER_PASSWORD] = true;
				} else {
					say("\"I shall give to thee the secret for passing through the mountains of Skullcrusher, which is what one must do to reach the lands farther to the north.\"");
				}
				remove("valuable secret");
				fallthrough;

			case "Gwenno":
				var0006 = GWENNO->get_schedule_type();
				if (var0006 == WAIT) {
					say("\"Gwenno was good friend to us. She spent weeks teaching me human language. Over time I slowly teaching others.\tMany days we have mourned death of good woman Gwenno. She horribly killed by men of one we call The Trapper. She spoke of thee often.\"");
					gflags[TALKED_TO_GWANI_ABOUT_GWENNO] = true;
					add(["Spoke of me?"]);
				} else {
					say("\"We of Gwani overjoyed to learn Gwenno's resurrection.\"");
				}
				remove("Gwenno");
				fallthrough;

			case "Spoke of me?" (remove):
				say("\"She spoke of one called the Avatar. She said one called the Avatar would come and return her to her mate. She also said Avatar would save Gwani from extinction.\"");
				fallthrough;

			case "Gwani":
				say("\"We are peaceful people and chose to live apart from races of goblins and humanity.\"");
				add(["goblins", "humanity"]);
				remove("Gwani");
				fallthrough;

			case "goblins":
				say("\"Goblins hunt us without mercy. Hatred for us almost greater than hatred for humans.\"");
				remove("goblins");
				fallthrough;

			case "humanity":
				say("\"Humans also hunt us, although fewer of them than goblins. Still, one human menaces us and being greatest single threat to our race.  This is man we know only as the Trapper.\"");
				remove("humanity");
				add("The Trapper");
				fallthrough;

			case "got blood" (remove):
				say("\"Thou brought blood of Ice Dragon! I must have!\"");
				var0007 = UI_remove_party_items(0x0001, 0x032A, 0x0009, 0x0002, false);
				if (var0007) {
					say("\"Daughter can be saved! I thank thee.\"");
					if (gflags[HOUND_TRACKED_BATLIN]) {
						say("\"Now, as I promised I reward thee with a valuable secret.\"");
						add("valuable secret");
					}
					gflags[AVATAR_SAVED_NEYOBI] = true;
					NEYOBI->clear_item_flag(SI_ZOMBIE);
				} else {
					say("\"Thou must give me the blood of an ice dragon so I save daughter.\"");
				}
				fallthrough;

			case "The Trapper":
				say("\"He is human called Hazard. He lives in cave north on Ice Plains. I fear he not stop hunt us until he hunt us to extinction.\"");
				remove("The Trapper");
				fallthrough;

			case "Where are the other Gwani?" (remove):
				say("\"We were attacked by the Trapper! All of our tribe dead except Myauri, Neyobi and myself. I want to give thee magical serpent tooth, but it in amulet of Baiyanda. Amulet is now with the Trapper. Thou find his lair north, in cave along mountains.\"");
				gflags[KNOWS_HAZARD_KILLED_GWANI] = true;
				fallthrough;

			case "bye":
				UI_remove_npc_face0();
				UI_remove_npc_face1();
				Func097F(AVATAR, "@Be safe, my friend.@", 0x0001);
				Func097F(YENANI, "@And thee, as well.@", 0x0005);
				break;
		}
	}
}

extern var Func0954 0x954 ();
extern var Func0953 0x953 ();
extern void Func07D1 object#(0x7D1) ();
extern void Func097F 0x97F (var var0000, var var0001, var var0002);
extern var Func09A0 0x9A0 (var var0000, var var0001);
extern var Func097D 0x97D (var var0000, var var0001, var var0002, var var0003, var var0004);
extern var Func0996 0x996 (var var0000, var var0001, var var0002, var var0003, var var0004, var var0005, var var0006);
extern void Func0835 0x835 ();
extern void Func09B4 0x9B4 (var var0000);

void Func0495 object#(0x495) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;

	var0000 = Func0954();
	var0001 = UI_is_pc_female();
	var0002 = Func0953();
	var0003 = UI_part_of_day();
	if ((event == DOUBLECLICK) || (event == SCRIPTED)) {
		AVATAR->item_say("@A pleasure to see thee...@");
		GWENNO->Func07D1();
		if (!GWENNO->get_item_flag(SI_ZOMBIE)) {
			Func097F(GWENNO, "@'Tis good to see thee!@", 0x0002);
			GWENNO->set_schedule_type(TALK);
		} else {
			GWENNO->set_new_schedules(MIDNIGHT, DESK_WORK, [0x0977, 0x048C]);
			GWENNO->run_schedule();
			if (!gflags[SERPENT_GWENNO_BANE_SPEECH]) {
				gflags[SERPENT_GWENNO_BANE_SPEECH] = true;
				var0004 = script Func09A0(0x0005, 0x0004) after 30 ticks {
					nohalt;
					call Func0377;
				};
			}
			var0005 = UI_die_roll(0x0001, 0x0004);
			if (var0005 == 0x0001) {
				Func097F(GWENNO, "@I must sate mine hunger!@", 0x0002);
			}
			if (var0005 == 0x0002) {
				Func097F(GWENNO, "@Come, allow me to feed upon thee!@", 0x0002);
			}
			if (var0005 == 0x0003) {
				Func097F(GWENNO, "@Blood! Blood everywhere!@", 0x0002);
			}
			if (var0005 == 0x0004) {
				Func097F(GWENNO, "@Let me feel thy naked flesh!@", 0x0002);
			}
		}
	}
	if (event == STARTED_TALKING) {
		if (GWENNO->get_item_flag(IN_PARTY)) {
			GWENNO->set_schedule_type(FOLLOW_AVATAR);
			add("leave");
		} else {
			GWENNO->run_schedule();
			add("join");
		}
		GWENNO->clear_item_say();
		GWENNO->show_npc_face0(0x0000);
		var0006 = GWENNO->get_item_flag(MET);
		if (((!IOLO->get_item_flag(SI_ZOMBIE)) && gflags[INSANITY_BANE_DEAD]) && (!gflags[IOLO_GWENNO_REUNITED])) {
			say("\"Iolo! My beloved Iolo!\"");
			say("\"Oh, I had feared that I would never see thee again!\"");
			IOLO->show_npc_face1(0x0000);
			say("\"My lovely Gwenno!\"");
			say("\"Now mine heart can sing, at the sight of thee!\"");
			0x0000->set_conversation_slot();
			say("\"Thou dost look pale, dear Iolo.\"");
			say("\"Thou didst never take care of thyself when I was away...\"");
			0x0001->set_conversation_slot();
			if (Func097D(PARTY, 0x0001, 0x03BB, QUALITY_ANY, 0x0005)) {
				say("\"The Lady of Fawn gave me this necklace to give to thee, when at last I found thee, my love.\"");
				say("\"Take it as a token of my love.\"");
				var0007 = Func0996(IOLO, GWENNO, 0x0001, 0x03BB, QUALITY_ANY, 0x0005, true);
			} else {
				say("\"The Lady of Fawn gave me a necklace to give to thee, my love. But in all my trials to find thee, I seem to have lost it.\"");
				say("\"I had thought to give it to thee as a token of my love.\"");
			}
			UI_remove_npc_face1();
			0x0000->set_conversation_slot();
			if (var0007 == true) {
				say("\"I shall cherish it always, Iolo.\"");
				say("\"But thou didst not have to give me anything to prove thy love. That thou art here now is proof enough.\"");
			} else {
				say("\"It doth not matter, Iolo.\"");
				say("\"Thou dost not have to give me anything to prove thy love. That thou art here now is proof enough.\"");
			}
			gflags[IOLO_GWENNO_REUNITED] = true;
		}
		if (IOLO->get_item_flag(SI_ZOMBIE) && gflags[INSANITY_BANE_DEAD]) {
			say("\"A thousand thanks for bringing back mine husband, ",
				var0002,
				".\"");
			say("\"I grieve that his wits seem to have left him. But at least he is safe with me.\"");
			say("\"I shall do all that I can to aid thee in restoring him. Or gladly care for him all the remainder of my days... even as he is.\"");
		}
		if (!GWENNO->get_item_flag(MET)) {
			GWENNO->set_item_flag(MET);
			say("\"What a relief to see thee again, ",
				var0002,
				".\"");
			say("\"I fear that thy work hath only begun. Batlin's deeds have only worsened the storms.\"");
			say("\"As the sand dwindles within the Hourglass of Fate, the danger will only increase. Thou must find the answer quickly, Avatar!\"");
		} else {
			say("\"I have been doing much study, ",
				var0002,
				".\"");
			say("\"There is much I must tell thee before the sand runs down in the Hourglass of Fate.\"");
		}
		if (!gflags[KNOWS_OF_SOUL_GEMS]) {
			add(["Batlin's deeds", "danger", "answer"]);
		}
		if (gflags[KNOWS_OF_SOUL_GEMS] && ((!gflags[ANARCHY_BANE_DEAD]) || ((!gflags[INSANITY_BANE_DEAD]) || (!gflags[WANTONNESS_BANE_DEAD])))) {
			say("\"Avatar! I have found a most intriguing scroll that tells of some sort of mystic connection between the Banes and the ancient temples!\"");
			add("mystic connection");
		}
		if (gflags[TALKED_TO_GREAT_HIEROPHANT] && (!gflags[TALKED_TO_CHAOS_HIEROPHANT])) {
			say("\"Now I understand what Xenka meant by being aided by specters. But, unless thou canst find the grave of the last Chaos Hierophant, I know not how thou wilt restore Balance.\"");
			say("\"Perhaps if thou wouldst ask one of the monks -- perhaps Thoxa -- she could try to divine where the Chaos Hierophant lies.\"");
		}
		if (gflags[GWENNO_HAS_BELONGINGS] && ((!GWENNO->get_item_flag(IN_PARTY)) && GWENNO->get_cont_items(SHAPE_ANY, QUALITY_ANY, FRAME_ANY))) {
			add("belongings");
		}
		converse (["bye"]) {
			case "belongings" (remove):
				Func0835();
				fallthrough;

			case "join" (remove):
				if (gflags[DUPRE_IS_TOAST]) {
					if (UI_get_array_size(UI_get_party_list2()) < 0x0005) {
						add("leave");
						say("\"If thou dost think I can be of use...\"");
						GWENNO->add_to_party();
						gflags[GWENNO_HAS_BELONGINGS] = true;
					} else {
						say("\"I hardly think that thou hast need of me, Avatar. Look at all thy fine companions!\"");
						say("\"Instead, I shall remain here. After all, what can one old woman do for thee?\"");
					}
				} else if (IOLO->get_item_flag(SI_ZOMBIE)) {
					say("\"But I must remain here and study! I must help thee find a way to restore my dear Iolo!\"");
				} else {
					say("\"I will be of more use to thee if I remain here. I seem to have a talent for finding the information thou dost need.\"");
				}
				fallthrough;

			case "leave" (remove):
				add("join");
				say("\"I understand, ",
					var0002,
					"...\"");
				GWENNO->remove_from_party();
				Func09B4(GWENNO);
				fallthrough;

			case "Batlin's deeds" (remove):
				say("\"Until Batlin interfered, this land had no Balance, but complete chaos was held in check... Until he loosed the Banes.\"");
				say("\"Unless Balance is restored, this land shall die... And take every world that touches it into the dust of oblivion as well.\"");
				add(["Banes", "every world"]);
				fallthrough;

			case "Banes" (remove):
				UI_push_answers();
				say("\"The Banes are the splintered force of Chaos.\"");
				say("\"Thou wilt have to cage them again, as they were before Batlin came. 'Tis only a temporary solution at best.\"");
				say("\"Perhaps I can consult the materials here on Monk Isle and discover a way to rid this land of the threat entirely.\"");
				add(["cage them", "materials", "change subject"]);
				fallthrough;

			case "cage them" (remove):
				say("\"Thou shouldst go to Moonshade.\"");
				say("\"If thou canst learn who gave Batlin the secret of trapping souls, I will try to learn what can make them able to withstand the forces that we wish to contain.\"");
				add(["Moonshade", "secret"]);
				gflags[SEEKING_SOUL_TRAP_SECRET] = true;
				fallthrough;

			case "Moonshade" (remove):
				say("\"I do not believe that caging souls was possible within Britannia. Therefore, the spell must have come from this land.\"");
				say("\"And where else but Moonshade wilt thou find a spell in this land? But they are a closed-mouthed lot -- I wish thee luck.\"");
				fallthrough;

			case "secret" (remove):
				say("\"Although I spent quite a bit of time within Moonshade, I heard nothing about such a spell.\"");
				say("\"Since the Mages are all basically vain, that must mean that the spell is a secret... or at least not common knowledge.\"");
				fallthrough;

			case "materials" (remove):
				say("\"The Monks have said that they have an extensive library here. Perhaps, with all I have learned from my travels throughout the land, I can use their books and scrolls to find the answer.\"");
				fallthrough;

			case "every world" (remove):
				UI_push_answers();
				say("\"Britannia -- even thine home, Avatar -- is in deadly peril!\"");
				say("\"No world exists without influencing another. So all may be destroyed if New Sosaria dies.\"");
				add(["New Sosaria", "change subject"]);
				fallthrough;

			case "New Sosaria" (remove):
				say("\"According to the Mages of Moonshade, New Sosaria is the name of this land, ",
					var0002,
					", though 'tis often called Serpent Isle.\"");
				say("\"The forefathers of all the people here were dissenters of Lord British's rule.\"");
				add(["Serpent Isle", "Lord British's rule"]);
				fallthrough;

			case "Serpent Isle" (remove):
				say("\"I came upon the ruins of a civilization in many places during my travels.\"");
				say("\"They all bore the mark of some serpent design or another. I noted that there appeared to be a different serpent motif in different areas.\"");
				add("serpent motif");
				fallthrough;

			case "serpent motif" (remove):
				say("\"One serpent always seems to crawl toward the left. Another serpent always crawls toward the right, and the remaining serpent always crawls straight.\"");
				say("\"I have no idea if it means anything, but there was a difference between the different ruins.\"");
				fallthrough;

			case "Lord British's rule" (remove):
				say("\"It doth seem difficult to believe that they could be talking about the Lord British we know.\"");
				say("\"But perhaps time runs differently here than in Britannia.\"");
				fallthrough;

			case "danger" (remove):
				UI_push_answers();
				say("\"Thou hast already experienced the power of the Storms of Imbalance. As time passes, these will increase in frequency and strength.\"");
				say("\"After a further period of time, earthquakes will begin to tear the land apart... Until it at last destroys itself.\"");
				add(["Storms of Imbalance", "period of time", "change subject"]);
				fallthrough;

			case "Storms of Imbalance" (remove):
				say("\"The Prophecies of Xenka speak of the Storms of Imbalance.\"");
				say("\"Storms unlike any living man hath seen. Storms whose results no man can predict...\"");
				say("\"I am sorry, the prophecies are cryptic at best.\"");
				add(["prophecies", "cryptic"]);
				fallthrough;

			case "prophecies" (remove):
				say("\"The monks have recorded all of Xenka's visions. They keep this tome of wisdom within their Chapel, on the altar.\"");
				say("\"It is very confusing to read.\"");
				fallthrough;

			case "cryptic" (remove):
				say("\"The language is vague and hard to understand.\"");
				say("\"Much of it sounds like bad poetry... In fact, if Iolo's songs were as bad, I would break his lute rather than allow him to inflict them on others!\"");
				fallthrough;

			case "period of time" (remove):
				say("\"I do not know! These forsaken prophecies are so poorly written that I cannot make any headway in finding any reference to any other!\"");
				say("\"I do not know who is responsible, the monks or Xenka herself, but I sometimes feel as if I could strike someone!\"");
				fallthrough;

			case "answer" (remove):
				UI_push_answers();
				say("\"According to Xenka's visions, 'The Hero from Another World will succeed through the use of powerful magic, the aid of specters, and the implements of the Hierophant.'\"");
				say("\"Before the sands run down, we must find the meaning of these accursed riddles!\"");
				add(["powerful magic", "specters", "implements", "change subject"]);
				fallthrough;

			case "powerful magic" (remove):
				say("\"I know not what a farm wife would consider great magic!\"");
				say("\"For all I know it could be as simple as lighting a candle! Or perhaps she is referring to the power to trap souls.\"");
				say("\"It would be so much more simple if Xenka would return and explain these infernal riddles herself! She is worse than Chuckles!\"");
				fallthrough;

			case "specters" (remove):
				say("\"For all I know, Xenka is talking about herself!\"");
				say("\"All of these monks are convinced that she will return to help thee finish thy quest... While I wade through all these insane ramblings!\"");
				say("\"What I need is to talk to her specter and see if I can wring any sense out of her rather than these writings!\"");
				fallthrough;

			case "implements" (remove):
				say("\"From what Karnax hath told me, a Hierophant was some sort of priest or holy man for these Ophidians.\"");
				say("\"What tools would a holy man use? Something for blessing people, perhaps... I know not. I must search further for more clues.\"");
				fallthrough;

			case "mystic connection" (remove):
				UI_push_answers();
				say("\"Before thou canst redeem thy faithful companions, thou must take the soul cages and bathe them in the water of the temple that is connected to that Bane.\"");
				say("\"And whilst thou art at each temple, according to the scroll, there is a device of some sort through which thou canst divine the location of each Bane.\"");
				add(["bathe", "temple", "device", "change subject"]);
				fallthrough;

			case "bathe" (remove):
				say("\"The soul cages... er, prisms... that thou dost have cannot withstand the powers of beings such as the Banes.\"");
				say("\"Only a prism purified by the water of the appropriate temple can hold each Bane. Otherwise, the prism will be ineffective.\"");
				fallthrough;

			case "temple" (remove):
				say("\"Karnax did tell me that Miggim doth have maps to the various temples...\"");
				say("\"Apparently each temple was dedicated to one of the six virtues of the Ophidians. Thou shouldst seek out the correct temple before thou canst defeat the Banes.\"");
				add(["Karnax", "Miggim", "Ophidians"]);
				fallthrough;

			case "Karnax" (remove):
				say("\"Karnax is quite pompous. He is more inclined to lecture me than to help.\"");
				say("\"But I will gladly suffer his speeches if they can help me find the way to restore mine husband.\"");
				say("\"His knowledge of the history of these islands hath been invaluable!\"");
				fallthrough;

			case "Miggim" (remove):
				say("\"Miggim is very quiet and helpful.\"");
				say("\"He hath been most helpful reading books and scrolls that might hold some clue or another. I am thankful for his knowledge of this library... without him I would never find anything!\"");
				fallthrough;

			case "Ophidians" (remove):
				say("\"'Ophidians' is the word that Karnax uses for the people that once dwelled in the serpent ruins throughout the land.\"");
				say("\"I do not know if it is their name for themselves, or if it is a name that he concocted for them.\"");
				fallthrough;

			case "device" (remove):
				say("\"Once again, Avatar, I have nothing further that I can tell thee. I have been unable to find any more references to devices within the temples.\"");
				say("\"I can find tallies of grain given to the temples, or lists of stonework hired by each temple caretaker. But I can find nothing else to help thee... I will keep searching.\"");
				fallthrough;

			case "change subject":
				say("\"Certainly...\"");
				UI_pop_answers();
				fallthrough;

			case "bye":
				UI_remove_npc_face0();
				Func097F(AVATAR, "@I shall return...@", 0x0000);
				Func097F(GWENNO, "@Hurry back!@", 0x0002);
				break;
		}
	}
}

extern void Func091B 0x91B ();
extern var Func0954 0x954 ();
extern var Func0953 0x953 ();
extern var Func08F1 0x8F1 ();
extern var Func098D 0x98D ();
extern var Func0932 0x932 (var var0000);
extern void Func0976 0x976 (var var0000, var var0001);
extern void Func0936 0x936 (var var0000, var var0001);
extern void Func092E 0x92E (var var0000);
extern var Func0988 0x988 (var var0000, var var0001);
extern void Func097F 0x97F (var var0000, var var0001, var var0002);
extern void Func07D2 object#(0x7D2) ();
extern void Func07D1 object#(0x7D1) ();
extern var Func09A0 0x9A0 (var var0000, var var0001);
extern var Func097D 0x97D (var var0000, var var0001, var var0002, var var0003, var var0004);
extern var Func0956 0x956 (var var0000);
extern var Func0992 0x992 (var var0000, var var0001, var var0002, var var0003);
extern var Func0955 0x955 ();
extern var Func099B 0x99B (var var0000, var var0001, var var0002, var var0003, var var0004, var var0005, var var0006);

void Func0496 object#(0x496) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;
	var var0008;
	var var0009;
	var var000A;
	var var000B;
	var var000C;
	var var000D;
	var var000E;
	var var000F;
	var var0010;
	var var0011;
	var var0012;
	var var0013;
	var var0014;
	var var0015;
	var var0016;
	var var0017;
	var var0018;
	var var0019;
	var var001A;
	var var001B;

	var0000 = get_object_position();
	if ((var0000[0x0001] >= 0x0432) && ((var0000[0x0001] <= 0x0439) && ((var0000[0x0002] >= 0x03E4) && ((var0000[0x0002] <= 0x03EB) && (var0000[0x0003] < 0x0005))))) {
		Func091B();
		abort;
	}
	var0001 = Func0954();
	var0002 = Func0953();
	var0003 = false;
	var0004 = LYDIA->get_item_flag(DEAD);
	if (gflags[BRENDANN_PROPOSAL] && ((BRENDANN->get_schedule_type() == SLEEP) && (Func08F1() < 0x000F))) {
		var0005 = true;
		if ((!IOLO->npc_nearby()) && ((!DUPRE->npc_nearby()) && ((!SHAMINO->npc_nearby()) && (!BOYDON->npc_nearby())))) {
			var0006 = true;
		}
	}
	if (event == DEATH) {
		if (gflags[MONITOR_TRAINING]) {
			var0007 = BRENDANN->get_oppressor();
			var0007 = 0x0000 - var0007;
			if (!var0007) {
				var0007 = AVATAR;
			}
			if ((var0007 != AVATAR) && (!(var0007 in Func098D()))) {
				var0008 = Func098D();
				var0008 &= AVATAR;
				for (var000B in var0008 with var0009 to var000A) {
					if (Func0932(var000B)) {
						break;
					}
				} nobreak {
					var000B = AVATAR;
				}
				BRENDANN->set_opponent(var000B);
				var0007->set_opponent(var000B);
				Func0976(BRENDANN, 0x0003);
				Func0976(var0007, 0x0003);
				return;
			}
			if (!gflags[TEMP_FLAG_1]) {
				gflags[TEMP_FLAG_1] = true;
				Func0936(var0007->get_npc_object(), BRENDANN->get_npc_object());
				return;
			}
			Func092E(var0007);
			return;
		}
		var0000 = script item {
			nohalt;
			call Func01D0;
		};
	}
	if (event == PROXIMITY) {
		var000C = [CALADIN];
		if (!gflags[PROVED_MARSTEN_IS_TRAITOR]) {
			var000C &= MARSTEN;
		} else {
			var000C &= SHAZZANA;
		}
		if (!gflags[PROVED_SPEKTOR_IS_TRAITOR]) {
			var000C &= SPEKTOR;
		}
		for (var000F in var000C with var000D to var000E) {
			if (!var000F->npc_nearby()) {
				var000C = Func0988(var000F, var000C);
			}
		}
		if (var000C == []) {
			abort;
		}
		BRENDANN->clear_item_say();
		var0010 = var000C[UI_get_random(UI_get_array_size(var000C))];
		var0010->clear_item_say();
		var0011 = UI_get_random(0x0006);
		if (var0011 == 0x0001) {
			Func097F(BRENDANN, "@Protect the roads!@", 0x0000);
			Func097F(var0010, "@Protect the city!@", 0x0003);
		}
		if (var0011 == 0x0002) {
			Func097F(BRENDANN, "@We should adjourn!@", 0x0000);
		}
		if (var0011 == 0x0003) {
			if (gflags[POMDIRGUN_IS_DEAD]) {
				Func097F(var0010, "@The Goblin King is dead!@", 0x0000);
				Func097F(BRENDANN, "@Long live the Avatar!@", 0x0003);
			} else {
				Func097F(var0010, "@The Goblins are coming!@", 0x0000);
				Func097F(BRENDANN, "@Then we must attack.@", 0x0003);
			}
		}
		if (var0011 == 0x0004) {
			if (!gflags[SPEKTOR_ADMITS_HIS_CRIMES]) {
				Func097F(BRENDANN, "@The storms grow worse.@", 0x0000);
				Func097F(var0010, "@Nothing we can do.@", 0x0003);
			} else {
				Func097F(BRENDANN, "@Who is the thief?@", 0x0000);
				Func097F(var0010, "@Do not look at me!@", 0x0003);
			}
		}
		if (var0011 == 0x0005) {
			if (gflags[GOBLIN_SIMON_DEAD]) {
				Func097F(BRENDANN, "@Simon was the traitor!@", 0x0000);
				Func097F(var0010, "@I rejoice in his death...@", 0x0002);
			} else if (gflags[PROVED_MARSTEN_IS_TRAITOR]) {
				Func097F(BRENDANN, "@Execute Marsten!@", 0x0000);
				Func097F(var0010, "@We must consider...@", 0x0002);
			} else {
				Func097F(BRENDANN, "@There is a traitor.@", 0x0000);
				Func097F(var0010, "@Difficult to believe.@", 0x0002);
			}
		}
		if (var0011 == 0x0006) {
			Func097F(BRENDANN, "@The Bears are wrong!@", 0x0000);
		}
	}
	if ((event == DOUBLECLICK) && (BRENDANN->get_schedule_type() != WAIT)) {
		if (gflags[BRENDANN_PROPOSAL] && (((BRENDANN->get_schedule_type() == SLEEP) || (BRENDANN->get_schedule_type() == STANDTHERE)) && (Func08F1() < 0x000F))) {
			BRENDANN->Func07D2();
			BRENDANN->Func07D1();
			BRENDANN->set_schedule_type(WAIT);
			Func097F(BRENDANN, "@At last!@", 0x0002);
			UI_play_music(0x001C, Func09A0(0x0005, 0x0001));
			BRENDANN->set_npc_id(0x0000);
			gflags[TEMP_FLAG_1] = false;
			gflags[TEMP_FLAG_2] = false;
			gflags[TEMP_FLAG_3] = false;
			var0000 = script BRENDANN after 10 ticks {
				nohalt;
				call Func0496;
			};
		} else {
			Func097F(AVATAR, "@Greetings, sir.@", 0x0000);
			BRENDANN->Func07D1();
			Func097F(BRENDANN, "@Hello.@", 0x0002);
			BRENDANN->set_schedule_type(TALK);
		}
	}
	if (event == SCRIPTED) {
		var0000 = script BRENDANN {
			nohalt;
			call Func0235;
		};
	}
	if (event == STARTED_TALKING) {
		BRENDANN->run_schedule();
		BRENDANN->clear_item_say();
		BRENDANN->show_npc_face0(0x0000);
		if (!BRENDANN->get_item_flag(MET)) {
			if (gflags[KNOWS_CANTRA_IS_MISSING] == false) {
				say("\"I am Brendann, stranger.\"");
			} else {
				say("\"I am Brendann. I did meet thee at the Banquet Hall.\"");
			}
			if (UI_is_pc_female()) {
				say("\"And thou art the most beautiful creature I have ever seen.\"");
			}
			BRENDANN->set_item_flag(MET);
		} else {
			say("\"So we meet again, ",
				var0002,
				".\"");
			if (gflags[HAVE_WOLF_TATTOO] && (!gflags[BRENDANN_TATTOO_COMPLIMENT])) {
				if (UI_is_pc_female()) {
					say("\"And thy tattoo makes thee even more desirable than before, ",
						var0001,
						".\"");
					gflags[BRENDANN_TATTOO_COMPLIMENT] = true;
				}
			}
		}
		add(["duties"]);
		if (gflags[KNOWS_ABOUT_GOBLIN_RAID] && (!gflags[HAVE_HELM_OF_MONITOR])) {
			add("Goblin raid");
		}
		if (gflags[BRENDANN_PROPOSAL]) {
			add("ready to spar");
		}
		if (gflags[AVATAR_IS_KNIGHT] && (!SIMON->get_item_flag(DEAD))) {
			add("traitor");
		}
		if (gflags[KNOW_MARSTEN_IS_TRAITOR] && (!gflags[PROVED_MARSTEN_IS_TRAITOR])) {
			add("know traitor");
		}
		if (gflags[ASK_BRENDANN_ABOUT_STOCKINGS] && (!gflags[KNOWS_MOONSILK_OWNER])) {
			add("stockings");
		}
		if (gflags[FIRST_TALK_WITH_MARSTEN]) {
			add("Gwenno");
		}
		if (gflags[AVATAR_IS_KNIGHT]) {
			add("Welcome to the Wolf Command");
		}
		if (gflags[PROVED_MARSTEN_IS_TRAITOR] && (!gflags[IOLO_MADE_EQUIPMENT_LIST])) {
			add("Iolo");
		}
		if (gflags[FOUND_BROWN_BOTTLE] && (SIMON->get_schedule_type() != WAIT)) {
			add("brown bottle");
		}
		if (gflags[HAVE_HELM_OF_MONITOR]) {
			add("Helm of Monitor");
		}
		converse ("bye") {
			case "Helm of Monitor" (remove):
				say("\"As thou hast won back the helm of Monitor, thou art truly deserved of the title Champion Knight of Monitor. I salute thee!\"");
				fallthrough;

			case "change subject":
				UI_pop_answers();
				say("\"Of what shall we speak?\"");
				fallthrough;

			case "brown bottle" (remove):
				say("\"What clear thinking, ",
					var0002,
					"! Now I understand the wisdom of the Test of Knighthood, when it proclaimed thee a member of our Command.\"");
				say("\"Surely this proves Krayg's innocence, for he is not a drinking man.\"");
				if (Func097D(PARTY, 0x0001, 0x0268, QUALITY_ANY, 0x0009)) {
					say("\"'Tis certainly a unique bottle, unlike common ale bottles.\"");
					say("\"If I were thee, I would take this to Luther and confront him. I have always suspected him, and a drunkard like him might well drop a bottle in the woods!\"");
				} else {
					say("\"Perhaps someone could identify the bottle, if thou wert to show it around. Lucilla at the pub might recognize it.\"");
				}
				fallthrough;

			case "Gwenno" (remove):
				say("\"A fine looking woman, but I know nothing more of her. Simon would be the one to ask concerning information of the strangers passing through town.\"");
				fallthrough;

			case "Welcome to the Wolf Command" (remove):
				say("\"'Tis good to have thee as one of us, ",
					var0002,
					". Again, congratulations on receiving thy Knighthood.\"");
				fallthrough;

			case "duties" (remove):
				say("\"I am the leader of the Command of the Wolf. Like all of the Wolves, I am a warrior of cunning as well as strength.\"");
				if (gflags[HAVE_HELM_OF_MONITOR]) {
					say("\"Why, I daresay I may be the most capable knight in all of Monitor... Save for thee, Champion Knight. Now that thou hast undeniably won that honor, the ladies will certainly fawn on thee!\"");
				} else {
					say("\"When I recover the Helm of Monitor from the Goblins, then my prowess will be known to all, and I shall become the next Champion Knight of Monitor!\"");
					say("\"Then glory will be mine. And the ladies will truly fawn on me!\"");
				}
				if (!gflags[AVATAR_IS_KNIGHT]) {
					say("\"But I should not be speaking with thee until thou dost become a Knight of Monitor. Speak with Marsten about that.\"");
					abort;
				}
				add(["Wolves", "cunning", "Champion Knight", "ladies"]);
				fallthrough;

			case "Wolves":
				say("\"The Wolves are the most canny fighters in Monitor. We are quick, silent, and deadly. We are experts at tracking and hunting our prey, and when we attack -- nothing can withstand us. Someday all of Serpent Isle will belong to Monitor, and it will be because of the Command of the Wolf!\"");
				remove("Wolves");
				add("Serpent Isle");
				fallthrough;

			case "Serpent Isle" (remove):
				UI_push_answers();
				say("\"I do not see why we stay down here in the south! Undoubtedly, the climate is warmer here, but the entire continent is ours for the taking! The Bears merely want to hide here and stagnate. And the Leopards have no ambition at all!\"");
				remove("Serpent Isle");
				add(["Bears", "Leopards", "change subject"]);
				fallthrough;

			case "Bears":
				say("\"I believe one of them is a traitor! Didst thou hear that their patrol was ambushed at Fawn Tower? Our beloved Champion Knight was slain by goblins in that battle.\"");
				say("\"She may have been a Bear, but she was beautiful...\"");
				if (UI_is_pc_female()) {
					say("\"But, er, thou art even more beautiful, ",
						var0001,
						".\"");
				}
				say("\"The patrol was betrayed. And who could have known the plans? Why, another Bear, of course!\"");
				remove("Bears");
				if (!var0003) {
					add("traitor");
				}
				fallthrough;

			case "traitor" (remove):
				var0003 = true;
				if (gflags[AVATAR_IS_KNIGHT]) {
					say("\"The charges against Krayg are odious. Simply because a man is different, doth not make him a criminal! He is not the traitor.\"");
				}
				if (gflags[KNOWS_GOBLINS_HIDEOUT] && (!gflags[FOUND_BROWN_BOTTLE])) {
					say("\"So Krayg hath told thee of a secret rendezvous site in the woods? By all means, investigate! Surely, thou wilt find evidence there to convict the traitor.\"");
				} else {
					if (gflags[PROVED_MARSTEN_IS_TRAITOR]) {
						say("\"I cannot still believe that Marsten would betray the entire city to the Goblins. Still, thine evidence is most convincing...\"");
						if (gflags[PROVED_SPEKTOR_IS_TRAITOR]) {
							say("\"And Marsten would surely need an accomplice to his evil deeds. It seems that is the role Spektor chose to play in this tragic little drama.\"");
						}
					} else {
						say("\"I would not be surprised to find that one of the Bears did play traitor to their own Command! Inspect closely the actions of Luther. He is not to be trusted. He is a braggart and a buffoon. He thinks he shall be the next Champion Knight. But he hath never beaten me!\"");
						gflags[BRENDANN_CALLED_LUTHER_BRAGGART] = true;
					}
					add(["Luther", "List Field"]);
					if ((!gflags[PROVED_MARSTEN_IS_TRAITOR]) && (!gflags[PROVED_SPEKTOR_IS_TRAITOR])) {
						if (LYDIA->get_item_flag(DEAD) || SHMED->get_item_flag(DEAD)) {
							UI_push_answers();
							if (LYDIA->get_item_flag(DEAD)) {
								add("Was Lydia the traitor?");
							}
							if (SHMED->get_item_flag(DEAD)) {
								add("Was Shmed the traitor?");
							}
							add("change subject");
						}
					}
				}
				fallthrough;

			case "Was Lydia the traitor?" (remove):
				say("\"I find it hard to believe that any member of my Command could be a traitor to Monitor.\"");
				say("\"How could she betray the patrol? She was a tattoo artist, not a warrior...\"");
				say("\"No, Luther is still the most likely suspect. Continue on thy quest to find the traitor, my friend. As thy commander, I order it.\"");
				fallthrough;

			case "Was Shmed the traitor?" (remove):
				say("\"I do not pretend to know what happened in the Knighthood Dungeon, but it sounds more like wizardry than Goblin mischief.\"");
				say("\"Dost thou have enemies in the City of Mages, ",
					var0002,
					"? Hast thou been to Moonshade?\"");
				say("\"Lord Marsten may want us to believe that the traitor hath been caught, but I do not believe it.\"");
				if (!LYDIA->get_item_flag(DEAD)) {
					say("\"As a favor to me, please continue searching for the spy. Surely, conclusive evidence shall appear sooner or later...\"");
				}
				fallthrough;

			case "Luther" (remove):
				say("\"He may be a Bear, but he doth act like a pig! Ha!\"");
				fallthrough;

			case "List Field":
				say("\"If thou dost feel like a skirmish, I shall be happy to meet thee there at the List Field. I often give lessons in combat, teaching how to strike quickly. I am there every day\tat three o' clock. Thou dost look like thou art capable of a couple of rounds!\"");
				if (UI_is_pc_female()) {
					say("\"And if thou dost meet me at my barracks at next midnight, I shall show thee another way to spar...\"");
					say("\"My room is at the corner of Kosric Street and Roland Street, facing the List Field.\"");
					gflags[BRENDANN_PROPOSAL] = true;
				}
				remove(["List Field", "ready to spar"]);
				fallthrough;

			case "Leopards":
				say("\"Oh, they are all right. At least they listen to us and try to see our point of view. It is time that we dispense with the notion of 'all-for-one and one-for-all' and adopt the concept of -- may the best Knight win!\"");
				remove("Leopards");
				fallthrough;

			case "cunning" (remove):
				say("\"Stealth and cunning are primary attributes of a fighter. The Wolves are specialists in these regards. To be stalked and caught by a Wolf patrol would be a ghastly, but altogether honorable, death.\"");
				fallthrough;

			case "Champion Knight":
				if (gflags[HAVE_HELM_OF_MONITOR]) {
					say("\"And a fine champion thou dost make, as well. A true pride to the Wolf Command.\"");
					if (gflags[GOBLIN_SIMON_DEAD] && gflags[POMDIRGUN_IS_DEAD]) {
						say("\"Not only didst thou root out the imposter in our midst, but thou hast slain our longtime enemy Pomdirgun, the Goblin King. Thou shalt be the stuff of legend one day, surely! Thy place in the history of Monitor is assured.\"");
					}
				} else {
					say("\"Astrid was a brave woman. But the next Champion Knight shall be me.\"");
					if (UI_is_pc_female()) {
						say("\"Unless, my dear, thou shalt claim the title thyself.\"");
					}
				}
				remove("Champion Knight");
				fallthrough;

			case "ladies" (remove):
				UI_push_answers();
				if (UI_is_pc_female()) {
					say("\"None of the ladies in Monitor are as beautiful as thou! When I gaze upon thy lovely features, I no longer remember that I have had relations with nearly every woman in this town.\"");
					say("\"What were their names? Lydia, Lucilla, Shazzana, Cellia... and dost thou not see the resemblance between myself and young Cantra? But I should not speak of this...\"");
					say("\"Well, they mean nothing to me now that thou art in my life.\"");
				} else {
					say("\"Ah, the ladies of Monitor. All are governed by their own particular passions.\"");
					say("\"Lydia, Lucilla, Shazzana, Cellia, Harnna...\"");
				}
				remove("ladies");
				add(["Lydia", "Lucilla", "Shazzana", "Cellia", "Harnna", "change subject"]);
				fallthrough;

			case "Lydia":
				if (var0004) {
					say("\"Lydia was a strange woman, beautiful but dangerous.\"");
				} else {
					say("\"She is a spicy wench, that one! Hath quite a temper and is very opinionated.\"");
				}
				say("\"They say her sister was even more beautiful, but the sorcerers took her away to their city. 'Twould certainly be an experience to meet her, I am certain of that!\"");
				remove("Lydia");
				fallthrough;

			case "Lucilla":
				say("\"She is quite a flirt, that one. A true tease, if thou dost know what I mean. Quite good-looking, and fun, too.");
				if (!UI_is_pc_female()) {
					say("\"Perhaps thou mayest enjoy her company?\"");
				}
				say("\"To tell the truth, I believe she must be interested in someone else. A secret, torrid affair, perhaps? Now, who could her lover be? I haven't a clue.\"");
				remove("Lucilla");
				fallthrough;

			case "Shazzana":
				say("\"Now that Astrid is dead, Shazzana deeply desires to be the new Champion Knight of Monitor. This is not such a great revelation, of course. Any of us would gladly welcome such an honor.\"");
				remove("Shazzana");
				fallthrough;

			case "Cellia":
				say("\"She is more quiet. Yet she is not unaffected by the often lonely life of a Monitor knight.\"");
				if (!UI_is_pc_female()) {
					say("\"Her skin is smooth and soft. Finer than any luxuriant mane or hide thou wilt find in her shop, I can assure thee... Harrumph, excuse me!\"");
				}
				remove("Cellia");
				fallthrough;

			case "Harnna" (remove):
				say("\"She is a widow now, and hath a fine daughter.\"");
				say("\"These days, she keeps to herself and dabbles in magic, canst thou imagine? Hah!\"");
				if (gflags[KNOWS_CANTRA_IS_MISSING]) {
					say("\"I hope Cantra can be found. The Goblins must have taken her -- they eat children, as thou knowest.\"");
				}
				fallthrough;

			case "ready to spar" (remove):
				say("\"If thou dost mean what I think thou dost mean, please, meet me in my barracks tonight.\"");
				fallthrough;

			case "Goblin raid" (remove):
				if (gflags[HAVE_HELM_OF_MONITOR]) {
					say("\"Thy raid of the Goblin camp and recovery of the Helm of Monitor will live in our history forever. Astrid is avenged!\"");
				} else {
					say("\"Thou dost plan to raid the Goblin camp? I fear it may be too dangerous, ",
						var0001,
						". Best leave it to more experienced fighters.\"");
					var0012 = Func0956(["I will go!", "I beg thy pardon!"]);
					say("\"Well, if that is the way thou dost feel... Go thou. Prove thyself worthy! Go on!\"");
					if (UI_is_pc_female()) {
						say("\"I shall miss thee if thou dost not return...\"");
					}
					say("\"Templar is the expert on the Goblins. Thou mightest consider seeking his advice, before risking thy life.\"");
				}
				fallthrough;

			case "know traitor" (remove):
				say("\"Aha! I always knew that buffoon Luther was the criminal. Those Bears shall sing a different tune now!\"");
				say("\"But dost thou have proof?\"");
				var0010 = Func0992(DUPRE, "@We found evidence among the Goblins. Documents signed by the traitor!@", "@I found evidence in the Goblin camp.@", false);
				0x0000->set_conversation_slot();
				say("\"May I see?\"");
				if (Func097D(PARTY, 0x0001, 0x031D, 0x0078, FRAME_ANY) || (Func097D(PARTY, 0x0001, 0x031D, 0x0079, FRAME_ANY) || Func097D(PARTY, 0x0001, 0x031D, 0x007A, FRAME_ANY))) {
					if (((Func097D(PARTY, 0x0001, 0x031D, 0x0078, FRAME_ANY) + Func097D(PARTY, 0x0001, 0x031D, 0x0079, FRAME_ANY)) + Func097D(PARTY, 0x0001, 0x031D, 0x007A, FRAME_ANY)) > 0x0001) {
						var0010 = Func0992(IOLO, "@Here are the scrolls.@", "@Here are the scrolls.@", false);
					} else {
						var0010 = Func0992(IOLO, "@Here it is.@", "@Here it is.@", false);
					}
					0x0000->set_conversation_slot();
					say("\"But this is not what I expected...\"");
					var0000 = 0x0000;
					if (Func097D(PARTY, 0x0001, 0x031D, 0x0078, FRAME_ANY)) {
						say("\"This is proof that Lord Marsten hath been conspiring with the Goblins! That old goat!\"");
						say("\"He planned to destroy the Wolves! And the Bears! And to make himself King of the city!\"");
						var0000 = 0x0001;
						gflags[PROVED_MARSTEN_IS_TRAITOR] = true;
					}
					if (Func097D(PARTY, 0x0001, 0x031D, 0x0079, FRAME_ANY)) {
						say("\"Lord Marsten was the traitor, and that worm Spektor aided him! Death would be too kind for them!\"");
						say("\"It seems that Marsten sought to spare Astrid's life, but he failed her even as he betrayed his manhood.\"");
						var0000 += 0x0001;
						gflags[PROVED_MARSTEN_IS_TRAITOR] = true;
						gflags[PROVED_SPEKTOR_IS_TRAITOR] = true;
					}
					if (Func097D(PARTY, 0x0001, 0x031D, 0x007A, FRAME_ANY)) {
						say("\"Marsten sought to betray Bull Tower! We must act quickly to warn the Tower.\"");
						var0000 += 0x0001;
						gflags[PROVED_MARSTEN_IS_TRAITOR] = true;
					}
					if (var0000 == 0x0001) {
						say("\"I thank thee for showing me this document. Justice will be served. Thou mayest keep this document if thou wishest.\"");
					} else if (var0000 > 0x0001) {
						say("\"I thank thee for showing me these documents. Justice will be served. Thou mayest keep these documents if thou wishest.\"");
					}
					if (gflags[PROVED_MARSTEN_IS_TRAITOR] && (!MARSTEN->get_item_flag(DEAD))) {
						MARSTEN->move_object([0x0446, 0x09C5, 0x0000]);
						MARSTEN->set_new_schedules([NIGHT, DAWN], [SLEEP, TEND_SHOP], [0x0446, 0x09C5, 0x0446, 0x09C5]);
					}
					if (gflags[PROVED_SPEKTOR_IS_TRAITOR] && (!SPEKTOR->get_item_flag(DEAD))) {
						SPEKTOR->move_object([0x0448, 0x09D6, 0x0000]);
						SPEKTOR->set_new_schedules([NIGHT, DAWN], [SLEEP, TEND_SHOP], [0x0448, 0x09D6, 0x0448, 0x09D6]);
					}
					CALADIN->set_new_schedules([MIDNIGHT, MORNING, NOON, AFTERNOON, EVENING, NIGHT], [SLEEP, DUEL, TEND_SHOP, DUEL, MAJOR_SIT, EAT_AT_INN], [0x03B1, 0x0A49, 0x03D7, 0x0A8A, 0x03CE, 0x09FF, 0x039B, 0x0A76, 0x03B2, 0x0A05, 0x041C, 0x0A57]);
					var0013 = 0x0003;
					while (var0013 > 0x0000) {
						var0014 = AVATAR->get_object_position();
						var0014[0x0001] = (var0014[0x0001] + 0x0014) - (UI_die_roll(0x0000, 0x0001) * 0x0028);
						var0014[0x0002] = (var0014[0x0002] + 0x0014) - (UI_die_roll(0x0000, 0x0001) * 0x0028);
						var0015 = UI_create_new_object2(0x00E4, var0014);
						var0016 = var0015->approach_avatar(0x0032, 0x0028);
						if (var0016) {
							var0015->set_item_flag(TEMPORARY);
							var0017 = true;
						} else {
							var0015->remove_item();
						}
						var0013 -= 0x0001;
					}
					var0018 = BRENDANN->find_nearby(0x00E4, 0x001E, MASK_NONE);
					if (var0018) {
						for (var001B in var0018 with var0019 to var001A) {
							var001B->set_schedule_type(TALK);
							var001B->set_npc_id(0x0006);
						}
					}
					if (var0017) {
						if (gflags[PROVED_SPEKTOR_IS_TRAITOR]) {
							say("\"Do not worry -- we shall arrest these vermin!\"");
						} else {
							say("\"Do not worry -- I shall personally see that Marsten is hunted down like the dog he is.\"");
						}
						Func097F(BRENDANN, "@Pikemen!@", 0x0000);
						BRENDANN->set_schedule_type(STANDTHERE);
						Func097F(var0018[0x0001], "@Yes, lord!@", 0x0002);
						abort;
					}
					if (gflags[PROVED_SPEKTOR_IS_TRAITOR]) {
						say("\"Do not worry, ",
							var0002,
							"! I shall order the Pikemen to place the traitors under arrest!\"");
					} else {
						say("\"Do not worry, ",
							var0002,
							"! I shall order the Pikemen to place the traitor under arrest!\"");
					}
					Func097F(BRENDANN, "@Pikemen!@", 0x0000);
					BRENDANN->set_schedule_type(SHY);
					abort;
				}
				var0010 = Func0992(SHAMINO, "@We did not bring it with us.@", "@I did not bring it.@", false);
				0x0000->set_conversation_slot();
				say("\"Until thou dost bring proof, no one will believe us...\"");
				Func097F(BRENDANN, "@Bring proof!@", 0x0000);
				abort;

			case "stockings" (remove):
				say("\"Ha! I surmise thou hast heard of my reputation as something of a womanizer. Purely undeserved, I assure thee. I will try to answer thy questions.\"");
				if (Func097D(PARTY, 0x0001, 0x02A5, QUALITY_ANY, 0x0000)) {
					say("\"A female mage would wear stockings such as the ones thou didst discover amongst thy possessions.\"");
				} else {
					say("\"Thou must have the stockings that thou didst discover amongst thy possessions? If thou dost not have them, I cannot tell thee anything about them.\"");
				}
				if (Func097D(PARTY, 0x0001, 0x02A5, QUALITY_ANY, 0x0001)) {
					say("\"The stockings that thou didst take from Shmed were made in the city of Fawn.\"");
				}
				fallthrough;

			case "Iolo" (remove):
				if (gflags[BRENDANN_GAVE_JAIL_KEY] == false) {
					say("\"If thou wilt vouch for thy friend's future behavior, then I shall let him go free.\"");
					if (Func0955()) {
						say("\"Very well. Keep thine eye on him. We do not want people popping in and out of our city as he did!\"");
						say("\"Here is the key to thy friend's jail cell. Set him free.\"");
						var0000 = Func099B(AVATAR, 0x0001, 0x0281, 0x0068, 0x0005, 0x0000, true);
						gflags[BRENDANN_GAVE_JAIL_KEY] = true;
					} else {
						say("\"Then he must remain in his cell.\"");
					}
				} else if (Func097D(PARTY, 0x0001, 0x0281, 0x0068, 0x0005)) {
					say("\"I did already give thee the key to thy friend's cell!\"");
				} else {
					say("\"Didst thou lose the key I did give thee?\"");
					if (Func0955()) {
						say("\"Very well. Here then, take this copy. And do not lose this one!\"");
						var0000 = Func099B(AVATAR, 0x0001, 0x0281, 0x0068, 0x0005, 0x0000, true);
					} else {
						say("\"Good. I would hate for thee to have lost it...\"");
					}
				}
				fallthrough;

			case "bye":
				Func097F(AVATAR, "@Goodbye@", 0x0000);
				if (UI_is_pc_female()) {
					if (gflags[BRENDANN_PROPOSAL]) {
						Func097F(BRENDANN, "@Until tonight!@", 0x0002);
					} else {
						Func097F(BRENDANN, "@Nice legs...@", 0x0002);
					}
				} else {
					Func097F(BRENDANN, "@Be cunning!@", 0x0002);
				}
				break;
		}
	}
}

extern var Func0954 0x954 ();
extern var Func0953 0x953 ();
extern void Func07D1 object#(0x7D1) ();
extern void Func097F 0x97F (var var0000, var var0001, var var0002);

void Func0498 object#(0x498) () {
	var var0000;
	var var0001;
	var var0002;

	var0000 = Func0954();
	var0001 = Func0953();
	if (event == DOUBLECLICK) {
		AVATAR->item_say("@Greetings, friend!@");
		SETHYS->Func07D1();
		if (gflags[TALKED_TO_GREAT_HIEROPHANT]) {
			Func097F(SETHYS, "@I know thee...@", 0x0002);
		} else {
			Func097F(SETHYS, "@Don't hurt me!@", 0x0002);
		}
		SETHYS->set_schedule_type(TALK);
	}
	if (event == STARTED_TALKING) {
		SETHYS->clear_item_say();
		SETHYS->show_npc_face0(0x0000);
		if (SETHYS->get_item_flag(IN_PARTY)) {
			say("\"We must hasten to the Serpent Gate!\"");
			SETHYS->set_schedule_type(FOLLOW_AVATAR);
			add("leave");
		} else {
			SETHYS->run_schedule();
			var0002 = SETHYS->get_item_flag(MET);
			if (gflags[TALKED_TO_GREAT_HIEROPHANT]) {
				say("\"Thou art late! I have been waiting for thee for a very long time...\"");
				add(["waiting", "long time"]);
			} else {
				if (SETHYS->get_item_flag(MET)) {
					say("\"Thou art returned! What tortures hast thou devised for me, Order dog?\"");
				} else {
					say("\"I knew that thou wouldst come for me, Order dog! Thou canst take my life, but the key is gone! Gone!\" *\"Sethys shall not fail the Chaos Hierophant!\"");
					SETHYS->set_item_flag(MET);
				}
				add(["Order dog", "key", "Chaos Hierophant"]);
			}
		}
		converse ("bye") {
			case "Order dog":
				say("\"Thou canst not be satisfied with winning the war! No, thou must slaughter all who dared to believe in something other than what thou dost hold dear!\" *\"Fine warriors who kill cripples and children!\"");
				remove("Order dog");
				add(["winning the war", "cripples and children"]);
				fallthrough;

			case "winning the war":
				say("\"Thy kind hath destroyed the Balance... All power now rests with the Order villains!\"");
				say("\"The Temples have been desecrated, and the altars have been thrown down...\"");
				say("\"See how thou wilt use it... To slay an unarmed man!\"");
				remove("winning the war");
				add(["destroyed the Balance", "desecrated"]);
				fallthrough;

			case "desecrated" (remove):
				say("\"Do not deny it, fiend! I know how thy mind works. Even now, thou doth lust to topple the altar of this temple.\"");
				say("\"But I shall not tell thee where it lies! I shall not aid thee in stopping the glorious waters which flow from it, nor shall I aid thee in placing the sacred containers upon it...\"");
				fallthrough;

			case "destroyed the Balance" (remove):
				say("\"I'm certain it was thy pack of jackals that killed the Great Hierophant! Without Ssithnos' guidance, we are lost... Even thee, dog!\"");
				fallthrough;

			case "cripples and children":
				say("\"I was at the Temple of Enthusiasm as thy forces marched on it! I saw the children fall to thy soldiers' blades!\" *\"And now that thou art here -- where all are misfits and crippled... I'm certain thou wilt slay us with as little regard!\"");
				remove("cripples and children");
				fallthrough;

			case "key" (remove):
				say("\"Thou knowest of the key? The Chaos Hierophant sent thee!\" *\"Alas, I have failed my duty... The key that I was to guard and hide is gone!\"");
				add(["hide and guard", "gone"]);
				fallthrough;

			case "hide and guard":
				say("\"Our Master gave me the key as the Order soldiers came. He bade me guard the key with my life, and hide it from their filthy grasp.\" *\"I have not seen our Master since... And thus far I have eluded the Order scum.\"");
				remove("hide and guard");
				fallthrough;

			case "gone" (remove):
				say("\"Now my soul will never enter the Void! Long ago, or so it seems to me, a vicious rat came and gnashed its long teeth at me.\" *\"I dropped the key as I tried to fend the beast off. The rat, seeing a shiny treasure, took the key and fled!\"");
				add(["Void", "fled"]);
				fallthrough;

			case "Void" (remove):
				say("\"It is the goal of the devout to live pure lives, so that we can ascend to the Void and merge with the Greater One.\"");
				say("\"But I stand condemned, for the key is lost!\"");
				fallthrough;

			case "fled":
				say("\"Down that small tunnel in the wall...\" *\"I have tried to enlarge the hole so that I might retrieve the key... But I have nothing as strong and sharp as a rat's teeth.\" *\"Oh, I am doomed!\"");
				Func097F(SETHYS, "@Doomed!@", 0x0000);
				SETHYS->set_schedule_type(SHY);
				abort;

			case "Chaos Hierophant" (remove):
				say("\"The Chaos Hierophant charged me with an important task... Who would have ever thought that I would be found worthy?\"");
				add(["worthy", "task"]);
				fallthrough;

			case "worthy" (remove):
				say("\"I must confess that in mine humility, it never occurred to me that the Hierophant even knew my name!\"");
				say("\"And then, in the hour of need, he selected me! Such an honor!\"");
				fallthrough;

			case "task" (remove):
				say("\"I shall not tell thee... At last, I, Sethys, have something important, something of value.\" *\"I have a secret!\"");
				UI_push_answers();
				add(["share it with me", "don't care"]);
				fallthrough;

			case "share it with me":
				say("\"A secret! A secret! I have a secret! And I won't tell!\"");
				UI_pop_answers();
				fallthrough;

			case "don't care":
				say("\"Ah, but I can tell that thou dost want mine hidden knowledge. It will do thee no good! I shall keep my secret.\"");
				UI_pop_answers();
				fallthrough;

			case "waiting" (remove):
				say("\"How canst thou have forgotten? It is time for us to bring the key to the Master.\"");
				say("\"Sadly, I have lost the key, so I shall have to beg for forgiveness...\"");
				add("Master");
				fallthrough;

			case "long time" (remove):
				say("\"Why, I have been in this place for... centuries, it doth seem. The aura of this place must have preserved me to fulfill my duty.\"");
				fallthrough;

			case "Master":
				say("\"Only I know where our Master lies, dear friend, for I am the sole survivor of that horrible battle. I could show thee the place, but I am loathe to leave the Temple... I have been here so long.\"");
				remove("Master");
				UI_push_answers();
				add(["show me", "never mind"]);
				fallthrough;

			case "never mind" (remove):
				say("\"I am so relieved! There is so much to be done here.\"");
				UI_pop_answers();
				fallthrough;

			case "leave" (remove):
				say("\"Oh, but I cannot leave thee now! I have pledged to show thee the resting place of the Hierophant, and I shall not disappoint thee.\"");
				fallthrough;

			case "show me" (remove):
				say("\"I should remain here. This place must be cleaned before the Master of Tolerance returns... Look at what those filthy Order monsters did to our home!\"");
				if (UI_get_array_size(UI_get_party_list2()) < 0x0005) {
					say("\"But I would like to return the key to the Chaos Hierophant. Perhaps it would not hurt to go to the Temple of Enthusiasm, briefly.\"");
					say("\"Very well! I shall join with thee.\"");
					SETHYS->add_to_party();
					Func097F(SETHYS, "@Onward!@", 0x0000);
					abort;
				}
				say("\"Ah, but thou hast so many companions! Surely I would only be a nuisance to thee...\"");
				UI_pop_answers();
				fallthrough;

			case "bye":
				UI_remove_npc_face0();
				if (SETHYS->get_item_flag(IN_PARTY)) {
					Func097F(AVATAR, "@Thank thee!@", 0x0000);
					Func097F(SETHYS, "@Hasten!@", 0x0002);
				} else {
					Func097F(AVATAR, "@Farewell, ancient!@", 0x0000);
					Func097F(SETHYS, "@Go in Chaos!@", 0x0002);
				}
				abort;
		}
	}
}

extern void Func07D1 object#(0x7D1) ();
extern void Func097F 0x97F (var var0000, var var0001, var var0002);

void Func0499 object#(0x499) () {
	var var0000;

	if (event == DOUBLECLICK) {
		AVATAR->item_say("@Hail, Gwani hunter!@");
		GILWOYAI->Func07D1();
		Func097F(GILWOYAI, "@Noo Koomba!@", 0x0003);
		GILWOYAI->set_schedule_type(TALK);
	}
	if (event == STARTED_TALKING) {
		GILWOYAI->set_new_schedules([MIDNIGHT, MORNING, NOON], [SLEEP, EAT, WANDER], [0x03A6, 0x035F, 0x03A6, 0x035F, 0x03A6, 0x035F]);
		GILWOYAI->run_schedule();
		GILWOYAI->clear_item_say();
		GILWOYAI->show_npc_face0(0x0000);
		var0000 = GILWOYAI->get_item_flag(MET);
		if (var0000) {
			say("\"Greetings again.\"");
		} else {
			say("\"Beware claws of Ice Dragon!\"");
		}
		converse (["name", "Ice Dragon", "bye"]) {
			case "name" (remove):
				if (var0000) {
					say("\"Am still Gilwoyai.\"");
				} else {
					say("\"Am Gilwoyai, means @Of the Wind@.\"");
					GILWOYAI->set_item_flag(MET);
				}
				fallthrough;

			case "Ice Dragon" (remove):
				say("\"We tried to kill Ice Dragon, to bring its blood and cure Neyobi. We failed. It hit with claws, I smash into cave wall. I need Baiyanda to heal.\"");
				add(["claws", "cave"]);
				fallthrough;

			case "claws" (remove):
				say("\"Vicious beast! This Ice Dragon is mother protecting its babies.\"");
				fallthrough;

			case "cave" (remove):
				say("\"To find Ice Dragon lair walk north. Take ice raft to cross channel. Beware front opening!\"");
				fallthrough;

			case "bye":
				UI_remove_npc_face0();
				UI_remove_npc_face1();
				set_schedule_type(SHY);
				Func097F(AVATAR, "@Go home now!@", 0x0000);
				Func097F(GILWOYAI, "@Kill Ice Dragon!@", 0x0003);
				abort;
		}
	}
}

extern void Func097F 0x97F (var var0000, var var0001, var var0002);

void Func049A object#(0x49A) () {
	var var0000;

	if (event == DOUBLECLICK) {
		AVATAR->item_say("@Hail, Gwani!@");
		Func097F(KAPYUNDI, "@Noocha Ta, Avatar!@", 0x0003);
		KAPYUNDI->set_schedule_type(TALK);
	}
	if (event == STARTED_TALKING) {
		KAPYUNDI->run_schedule();
		KAPYUNDI->clear_item_say();
		KAPYUNDI->show_npc_face0(0x0000);
		var0000 = KAPYUNDI->get_item_flag(MET);
		if (var0000) {
			say("\"Greetings, great hunter.\"");
		} else {
			say("\"Our hunt bad.\"");
		}
		converse (["name", "hunt", "bye"]) {
			case "name" (remove):
				say("\"Me Kapyundi, mean @little glacier@. Me son of Yenani and Myauri.\"");
				KAPYUNDI->set_item_flag(MET);
				fallthrough;

			case "hunt" (remove):
				say("\"We try to kill Ice Dragon, use blood to save Neyobi. But lair of Ice Dragon is certain death.\"");
				add(["Ice Dragon lair", "certain death"]);
				fallthrough;

			case "Ice Dragon lair" (remove):
				say("\"Front entrance is too much danger! Must be other entrance!\"");
				fallthrough;

			case "certain death" (remove):
				say("\"Three of us died in Ice Dragon lair. We two injured. Must return to village in shame.\"");
				add("three died");
				fallthrough;

			case "three died" (remove):
				say("\"We fought by three Gwani hunters who died in Ice Dragon lair. Dragon eat them. Now we never able to take their bodies to Gwani death temple.\"");
				add("Gwani death temple");
				fallthrough;

			case "Gwani death temple":
				say("\"I do not know where temple. Gwani place of death to west of Ice Dragon's lair. Temple is there somewhere.\"");
				remove("Gwani death temple");
				fallthrough;

			case "bye":
				UI_remove_npc_face0();
				UI_remove_npc_face1();
				Func097F(AVATAR, "@Safe journey to thee.@", 0x0000);
				Func097F(KAPYUNDI, "@Good luck.@", 0x0003);
				break;
		}
	}
}

extern var Func0954 0x954 ();
extern var Func0953 0x953 ();
extern var Func0942 0x942 (var var0000);
extern var Func0994 0x994 ();
extern var Func09A0 0x9A0 (var var0000, var var0001);
extern void Func07D1 object#(0x7D1) ();
extern void Func097F 0x97F (var var0000, var var0001, var var0002);
extern var Func0955 0x955 ();
extern var Func097D 0x97D (var var0000, var var0001, var var0002, var var0003, var var0004);

void Func049B object#(0x49B) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;

	var0000 = Func0954();
	var0001 = Func0953();
	var0002 = Func0942(DRAYGAN);
	if (event == SCRIPTED) {
		if ((Func0994() != 0x0007) || (BERYL->get_item_flag(DEAD) || (DRAYGAN->get_item_flag(DEAD) || (!gflags[BERYL_WILL_MEET_AVATAR])))) {
			abort;
		}
		var0003 = script Func09A0(0x0005, 0x0001) after (0x0014 + UI_get_random(0x0032)) ticks {
			nohalt;
			call Func049B;
		};
		if (IVOR->npc_nearby() || (DRAYGAN->npc_nearby() || (HURD->npc_nearby() || MORGHRIM->npc_nearby()))) {
			abort;
		}
		var0003 = BERYL->approach_avatar(0x0078, 0x0028);
		if (var0003) {
			BERYL->set_schedule_type(TALK);
		}
		abort;
	}
	if (event == DOUBLECLICK) {
		AVATAR->item_say("@Hello.@");
		BERYL->Func07D1();
		Func097F(BERYL, "@Speaking to me?@", 0x0002);
		BERYL->set_schedule_type(TALK);
	}
	if (event == STARTED_TALKING) {
		BERYL->run_schedule();
		BERYL->show_npc_face0(0x0000);
		BERYL->set_item_flag(MET);
		BERYL->clear_item_say();
		if (var0002) {
			say("\"My name is Beryl. I need thine help, but I cannot speak now...\"");
			DRAYGAN->show_npc_face1(0x0000);
			say("\"What art thou saying to that stranger, Beryl?\"");
			UI_remove_npc_face1();
			0x0000->set_conversation_slot();
			if (gflags[BERYL_MET_AVATAR]) {
				say("\"I shall meet thee as before. Now, go...\"");
				Func097F(BERYL, "@Nothing, Draygan...@", 0x0000);
				gflags[BERYL_WILL_MEET_AVATAR] = true;
			} else {
				say("\"Nothing, Lord Draygan.\"");
				Func097F(BERYL, "@Nothing.@", 0x0000);
			}
			DRAYGAN->set_schedule_type(HOUND);
			var0003 = script Func09A0(0x0005, 0x0001) after 50 ticks {
				nohalt;
				call Func049B;
			};
			abort;
		}
		if (DRAYGAN->get_item_flag(DEAD)) {
			if (BERYL->get_item_flag(SI_ZOMBIE)) {
				say("\"I am content now, ",
					var0001,
					". There is such a peacefulness in my life, now that Morghrim doth care for me.\"");
				Func097F(BERYL, "@Good fortune!@", 0x0000);
				abort;
			}
			BERYL->set_item_flag(SI_ZOMBIE);
			say("\"I am so glad that the tyrant is dead! Thanks to thee, ",
				var0001,
				".\"");
			say("\"Do not fear for me -- I can care for myself, now that Draygan cannot use his magical secrets to control me.\"");
			if (MORGHRIM->npc_nearby()) {
				MORGHRIM->show_npc_face1(0x0000);
				say("\"Thou canst come and stay with me, woman, until thou art ready to return to thy kind. My camp is clean, and the forest animals enjoy thy company.\"");
				UI_remove_npc_face1();
				0x0000->set_conversation_slot();
				say("\"I shall accept thy kind offer, Forest Master.\"");
				Func097F(MORGHRIM, "@Stay with me.@", 0x0000);
				Func097F(BERYL, "@I shall.@", 0x0005);
				BERYL->set_new_schedules([MIDNIGHT, DAWN, EVENING], [SLEEP, TEND_SHOP, WANDER], [0x02B1, 0x0676, 0x02B9, 0x0686, 0x02C1, 0x06AD]);
				BERYL->run_schedule();
				abort;
			}
			say("\"I shall go to the Forest Master and beg for a place by his side. He is old, and doth need a help from time to time.\"");
			say("\"Thank thee Avatar for thine help. Thou hast given me back my life.\"");
			Func097F(BERYL, "@Fear not for me!@", 0x0000);
			Func097F(AVATAR, "@Live long and prosper!@", 0x0000);
			BERYL->set_new_schedules([MIDNIGHT, DAWN, EVENING], [SLEEP, TEND_SHOP, WANDER], [0x02B1, 0x0676, 0x02B9, 0x0686, 0x02C1, 0x06AD]);
			BERYL->run_schedule();
			abort;
		}
		if (gflags[GOT_SLEEP_ARROWS] && (!DRAYGAN->get_item_flag(DEAD))) {
			say("\"Why dost thou wait? Use the arrow! Use it to strike down the tyrant Draygan!\"");
			say("\"Then we shall find the secret of his power, and he shall not stop me from obtaining my freedom.\"");
			Func097F(BERYL, "@Use the arrow!@", 0x0000);
			abort;
		}
		if (gflags[KNOWS_HOW_TO_PREPARE_ARROWS] && (!DRAYGAN->get_item_flag(DEAD))) {
			say("\"Tell me -- hast thou prepared the arrow? To defeat the tyrant Draygan?\"");
			if (Func0955()) {
				if (Func097D(PARTY, 0x0001, 0x0238, QUALITY_ANY, FRAME_ANY)) {
					gflags[GOT_SLEEP_ARROWS] = true;
					say("\"Then use it! Use it to numb the tyrant Draygan!\"");
					say("\"Then we shall find the secret of his power, and prevent him from stopping mine escape.\"");
					Func097F(BERYL, "@Use the arrow!@", 0x0000);
					abort;
				}
				say("\"Do not thou give me false hopes, stranger! I see no arrow...\"");
				Func097F(BERYL, "@Bring the arrow...@", 0x0000);
				abort;
			}
			say("\"Thou must treat an arrow with the juices from the King's Savior plant.\"");
			Func097F(BERYL, "@Prepare the arrow!@", 0x0000);
			abort;
		}
		if (gflags[KNOWS_KINGS_SAVIOR]) {
			say("\"Tell me -- hast thou obtained the plant which I told thee of? The King's Savior?\"");
			if (Func0955()) {
				if (Func097D(PARTY, 0x0001, 0x01D3, QUALITY_ANY, 0x0000) || Func097D(PARTY, 0x0001, 0x01D3, QUALITY_ANY, 0x0001)) {
					gflags[KNOWS_HOW_TO_PREPARE_ARROWS] = true;
					say("\"Very good. Now, thou must treat an arrow with the juices from the King's Savior plant. I have hidden some arrows away in my quarters. If thou dost need one, get one there.\"");
					Func097F(BERYL, "@Prepare the arrow!@", 0x0000);
					abort;
				}
				if (Func097D(PARTY, 0x0001, 0x0238, QUALITY_ANY, FRAME_ANY)) {
					gflags[GOT_SLEEP_ARROWS] = true;
					say("\"And thou hast enchanted the arrow? Then use it -- use it to numb the tyrant Draygan!\"");
					say("\"Then we shall find the secret of his power, and prevent him from stopping mine escape!\"");
					Func097F(BERYL, "@Use the arrow!@", 0x0000);
					abort;
				}
				say("\"Do not give me false hopes, stranger! I see no King's Savior.\"");
				say("\"I fear Draygan more each day...\"");
				add(["afraid", "Draygan", "King's Savior"]);
			} else {
				say("\"Then I despair! For without this herb, Draygan cannot be stopped. I am so afraid...\"");
				add(["afraid", "Draygan", "King's Savior"]);
			}
		} else {
			gflags[BERYL_MET_AVATAR] = true;
			gflags[BERYL_WILL_MEET_AVATAR] = false;
			say("\"My name is Beryl. I am so glad that thou hast met me privately. We cannot speak for long, lest Draygan or his minions find us.\"");
			say("\"I live in fear of Draygan and his terrible power.\"");
			add(["afraid", "Draygan"]);
		}
		converse (["bye"]) {
			case "afraid" (remove):
				say("\"Of the two-score settlers who came to this place led by Draygan, only three of us survive! And the other two work for him!\"");
				say("\"Draygan burned the ship and left the others to die! I know he played a part in the death of mine husband, as well.\"");
				UI_push_answers();
				add(["other two", "burned ship", "dead husband", "change subject"]);
				fallthrough;

			case "other two" (remove):
				say("\"Beware them! They follow Draygan's orders\tunquestioningly! They would even kill at his word!\"");
				fallthrough;

			case "burned ship" (remove):
				say("\"One of the settlers, Falcon, wanted to leave the settlement. Many others chose to go as well. I did not believe it when Draygan allowed Falcon's group to leave so easily.\"");
				say("\"I discovered why. Draygan had the ship burned, leaving them all to be eaten by the wolves!\"");
				add(["settlement", "wolves"]);
				fallthrough;

			case "dead husband" (remove):
				say("\"Mine husband, Carvell, died when Draygan took a group of men in search of gold. Only Draygan returned.\"");
				say("\"He told a story of how they were attacked by the wolves, but he lied. I did not find the truth until a short while ago, when Draygan drunkenly boasted of killing Carvell and the others. That was when I ran away.\"");
				add("ran away");
				fallthrough;

			case "ran away" (remove):
				say("\"Yes, I could not stay here with the man who murdered mine husband! I went deep into the woods... but Draygan's lackeys found me and brought me back.\"");
				say("\"Now they watch me closely -- but not closely enough!\"");
				fallthrough;

			case "settlement" (remove):
				say("\"A year ago, a group of us left by ship and came to the Northlands. We were in search of the gold and precious gems that are said to fill this land. Our original camp was to the south, but we had no luck there and we made our way to this place. Once here, Draygan seized control! We had to do his bidding or suffer the consequences.\"");
				add("consequences");
				fallthrough;

			case "consequences" (remove):
				say("\"There were beatings, and other things... I would rather not talk about that.\"");
				fallthrough;

			case "wolves" (remove):
				say("\"Surely thou hast heard them! With every cry thou canst hear how they hunger for our flesh!\"");
				fallthrough;

			case "Draygan" (remove):
				say("\"I feared that no one could save me from Draygan, for he is invincible!\"");
				UI_push_answers();
				add(["save", "invincible", "change subject"]);
				fallthrough;

			case "change subject":
				say("\"And what shall we speak of?\"");
				UI_pop_answers();
				fallthrough;

			case "save" (remove):
				say("\"But that is before thou didst come here! Thou must save me from this devil Draygan!\"");
				fallthrough;

			case "invincible" (remove):
				say("\"He cannot be harmed by blade or knife nor by any magic that I have seen. Whatever he and his expedition found, it hath given him unimaginable power.\"");
				add("cannot be harmed");
				fallthrough;

			case "cannot be harmed" (remove):
				say("\"I have been thinking about this for some time. Perhaps Draygan can be defeated by something that doth not actually bring harm to him. Thou couldst treat an arrow with the plant that is called King's Savior!\"");
				add(["arrow"]);
				if (!gflags[KNOWS_KINGS_SAVIOR]) {
					add("King's Savior");
				}
				fallthrough;

			case "arrow" (remove):
				say("\"An arrow thusly treated would put anyone stricken by it in a deep sleep. Dost thou not see? The arrow would not harm him, but it would allow the herbal medicine to take effect!\"");
				say("\"This would give us the chance to find and steal the source of Draygan's power. Unless we do this, I am doomed to be his slave.\"");
				fallthrough;

			case "King's Savior" (remove):
				say("\"According to legend, the plant is found in the deepest and most dangerous part of the forest.\"");
				say("\"Only one man can help thee. The Forest Master could guide thee to King's Savior -- but beware him! He possesses strange powers.\"");
				gflags[KNOWS_KINGS_SAVIOR] = true;
				UI_push_answers();
				add(["Forest Master", "strange powers", "change subject"]);
				fallthrough;

			case "Forest Master" (remove):
				say("\"His name is Morghrim. His face is horribly scarred, yet I do not fear him the way I fear Draygan.\"");
				say("\"Morghrim is a strange man, foreign in some way I cannot explain. But he is the only one who hath treated me kindly since Carvell was murdered. I stayed with him a short time after I ran away.\"");
				say("\"His dwelling place lies far southwest of here, in a grove of silverleaf trees. Perhaps he shall deign to aid thee.\"");
				fallthrough;

			case "strange powers" (remove):
				say("\"I cannot say what they were, for he was careful to never let me see any such display. But thou wilt feel his power if thou dost meet him. Take care that thou dost not anger him.\"");
				fallthrough;

			case "bye":
				UI_remove_npc_face0();
				UI_remove_npc_face1();
				Func097F(AVATAR, "@Go now. Be safe.@", 0x0000);
				Func097F(BERYL, "@Do not forget me!@", 0x0003);
				break;
		}
	}
}

extern var Func0954 0x954 ();
extern var Func0953 0x953 ();
extern void Func07D1 object#(0x7D1) ();
extern void Func097F 0x97F (var var0000, var var0001, var var0002);
extern var Func09A0 0x9A0 (var var0000, var var0001);
extern void Func0982 0x982 (var var0000, var var0001);
extern void Func049B object#(0x49B) ();
extern void Func049D object#(0x49D) ();
extern void Func049E object#(0x49E) ();
extern void Func049F object#(0x49F) ();

void Func049C object#(0x49C) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;

	var0000 = Func0954();
	var0001 = Func0953();
	if (event == DOUBLECLICK) {
		AVATAR->item_say("@Hello.@");
		DRAYGAN->Func07D1();
		Func097F(DRAYGAN, "@Speaking to me?@", 0x0002);
		DRAYGAN->set_schedule_type(TALK);
	}
	if ((event == PROXIMITY) && (DRAYGAN->get_schedule_type() == TEND_SHOP)) {
		if (UI_get_random(0x000A) < 0x0007) {
			abort;
		}
		var0002 = ["@Leave us!@", "@Go thy way!@", "@Do not steal...@", "@I am destiny.@", "@Ignore the others.@", "@I am Master here.@"];
		Func097F(DRAYGAN, var0002[UI_get_random(UI_get_array_size(var0002))], 0x0000);
	}
	if ((event == DEATH) && DRAYGAN->get_item_flag(SI_TOURNAMENT)) {
		if (gflags[DRAYGAN_IS_IMMORTAL]) {
			var0003 = script Func09A0(0x0005, 0x0001) after 50 ticks {
				nohalt;
				call Func049F;
			};
			gflags[DRAYGAN_IS_IMMORTAL] = false;
			DRAYGAN->clear_item_flag(SI_TOURNAMENT);
			Func0982(DRAYGAN, 0x0032);
			BERYL->run_schedule();
			BERYL->set_alignment(NEUTRAL);
			MORGHRIM->set_alignment(NEUTRAL);
			BERYL->set_schedule_type(TALK);
		}
	}
	if (event == STARTED_TALKING) {
		DRAYGAN->run_schedule();
		DRAYGAN->clear_item_say();
		DRAYGAN->show_npc_face0(0x0000);
		var0004 = DRAYGAN->get_item_flag(MET);
		if (var0004 == false) {
			DRAYGAN->set_item_flag(MET);
			say("\"I do not believe we have met. My name is Draygan. I am lord of all the land that I survey.\"");
			say("\"At present, I am hard at work fulfilling mine appointed destiny. Conversing with thee is nothing but a useless distraction from achieving that end.\"");
		} else {
			say("\"We meet again, I see.\"");
			say("\"And thou art still of no use to my destiny. I do not have time to prattle with thee, stranger. Stay away from this camp, and from my followers. As the lord of this place, I order this to be so.\"");
		}
		add(["lord", "destiny"]);
		converse ("bye") {
			case "change subject":
				UI_pop_answers();
				say("\"But we were soon to hear the best part...\"");
				fallthrough;

			case "destiny" (remove):
				say("\"I was born a pauper's son. My father was a rancid beggar-man who lived in the dirt of the road. I hated it as I hated him. But there was one thing he always told me. He told me that one day I would be a rich and powerful man. I believe this is my destiny. When I was still a lad, I stole his near-empty coin purse and sought my fortune.\"");
				say("\"I have acquired naught but half of my legacy... though I already have the power!\"");
				UI_push_answers();
				add(["fortune", "power", "change subject"]);
				fallthrough;

			case "fortune" (remove):
				say("\"It was one year ago that I led my band of men to this spot. We had all heard the tales of gold and fabulous gems that could be found here. We came by ship -- the Emerald Lady. As we planned to settle here, they all brought their wives and children. For months we suffered through bad luck. Then one of the miners made an important discovery. That was before I went on the hunting expedition -- but, ah, I am ahead of myself. It hath been too long since I have had a fresh face to converse with. Damned distraction!\"");
				add(["suffered", "discovery", "hunting expedition"]);
				fallthrough;

			case "suffered" (remove):
				say("\"For three months we toiled near the site of our original landing. But we found nothing. It made the men so discouraged that they nearly surrendered. At last, we moved camp and came here.\"");
				fallthrough;

			case "discovery" (remove):
				say("\"One of the men, a fellow by the name of Hamlin, discovered a nugget of gold as large as my thumb. It was not far from our present location. Rest his soul.\"");
				fallthrough;

			case "hunting expedition" (remove):
				say("\"Not long after the first significant find, we had planned a great feast as a celebration. I led a group of hunters into the forest to hunt for game. We were attacked by a vicious pack of wolves. Only I survived to make it back to camp. It was then that I discovered my power. But the failed expedition was a bad omen. Soon my men were divided and our group fell into rebellion.\"");
				add(["divided", "rebellion"]);
				fallthrough;

			case "divided" (remove):
				say("\"A man named Falcon declared himself the leader of a group of dissenters that was comprised of nearly half of our number.\"");
				say("\"He was a man of exceedingly weak character. He suggested that we return home penniless, without a single piece of treasure! All because a few of the women and children had a difficult time of it in the wilderness.\"");
				say("\"Well, all that is the past, and there is nothing one can do for the dead. And we have the treasure...\"");
				fallthrough;

			case "rebellion" (remove):
				say("\"Simple disobedience, really. Oh, yes, and someone cut Hamlin's throat and stole his gold. I do not know who did it.\"");
				say("\"After this, most of the men chose to leave. So what was I to do? I gave them their fair share of the gold that we had found, and sent them back to the ship with my blessings.\"");
				say("\"They were led by the weakling, Falcon. After they left, I never saw them again. Ah, well...\"");
				fallthrough;

			case "power" (remove):
				say("\"I need not bore thee with the details of how I learned of this power. Suffice it to say that I cannot die.\"");
				say("\"Thou wouldst do well to consider that a warning. Do not think of stealing my gold, for it is thee who shall lose thy life. I cannot die because I am destined to become wealthy.\"");
				say("\"Hurd and Ivor work the mines night and day. Beryl cooks and cleans. They are good workers. They shall make me wealthy.\"");
				add("warning?");
				fallthrough;

			case "warning?" (remove):
				say("\"If we ever come into conflict over the gold that I know lies somewhere in this land, I shall kill thee dead without an ounce of regret.\"");
				fallthrough;

			case "lord" (remove):
				say("\"I am the Master of the Great Northern Forest, and none can dispute it.\"");
				say("\"And if thou shouldst ever speak to a disfigured cripple named Morghrim --\"");
				say("\"and I would recommend against that --\"");
				say("\"pay no mind to what he may say. Morghrim is an evil and depraved man. Thou shouldst avoid him like the plague.\"");
				say("\"This is the one and only piece of friendly advice I shall give to thee.\"");
				fallthrough;

			case "bye":
				if (!gflags[BERYL_MET_AVATAR]) {
					gflags[BERYL_WILL_MEET_AVATAR] = true;
					var0003 = script Func09A0(0x0005, 0x0001) after 75 ticks {
						nohalt;
						call Func049B;
					};
				}
				var0003 = script Func09A0(0x0005, 0x0002) after 300 ticks {
					nohalt;
					call Func049E;
				};
				var0003 = script Func09A0(0x0005, 0x0003) after 200 ticks {
					nohalt;
					call Func049D;
				};
				Func097F(AVATAR, "@Interesting....@", 0x0000);
				Func097F(DRAYGAN, "@Do not return!@", 0x0003);
				DRAYGAN->set_schedule_type(TEND_SHOP);
				abort;
		}
	}
}

extern var Func0994 0x994 ();
extern var Func09A0 0x9A0 (var var0000, var var0001);
extern void Func07D1 object#(0x7D1) ();
extern void Func097F 0x97F (var var0000, var var0001, var var0002);

void Func049D object#(0x49D) () {
	var var0000;

	if (event == SCRIPTED) {
		if (DRAYGAN->get_item_flag(DEAD) || ((Func0994() != 0x0007) || (HURD->get_item_flag(DEAD) || (HURD->get_npc_id() > 0x0003)))) {
			abort;
		}
		var0000 = script Func09A0(0x0005, 0x0001) after (0x0064 + UI_get_random(0x01F4)) ticks {
			nohalt;
			call Func049D;
		};
		if (IVOR->npc_nearby() || (DRAYGAN->npc_nearby() || (BERYL->npc_nearby() || MORGHRIM->npc_nearby()))) {
			abort;
		}
		var0000 = HURD->approach_avatar(0x0078, 0x0028);
		if (var0000) {
			HURD->set_schedule_type(THIEF);
		}
		abort;
	}
	if (event == DOUBLECLICK) {
		AVATAR->item_say("@Pardon me...@");
		HURD->Func07D1();
		if (DRAYGAN->npc_nearby()) {
			Func097F(HURD, "@Go away!@", 0x0003);
			DRAYGAN->set_schedule_type(HOUND);
			Func097F(DRAYGAN, "@Leave him alone!@", 0x0005);
		} else {
			Func097F(HURD, "@I am not a spy...@", 0x0003);
			HURD->set_npc_id(HURD->get_npc_id() + 0x0001);
		}
		HURD->set_schedule_type(SHY);
	}
}

extern var Func0994 0x994 ();
extern var Func09A0 0x9A0 (var var0000, var var0001);
extern void Func07D1 object#(0x7D1) ();
extern void Func097F 0x97F (var var0000, var var0001, var var0002);
extern void Func09AD 0x9AD (var var0000);

void Func049E object#(0x49E) () {
	var var0000;

	if (event == SCRIPTED) {
		if (DRAYGAN->get_item_flag(DEAD) || ((Func0994() != 0x0007) || (IVOR->get_item_flag(DEAD) || (IVOR->get_npc_id() > 0x0004)))) {
			abort;
		}
		var0000 = script Func09A0(0x0005, 0x0002) after UI_get_random(0x01F4) ticks {
			nohalt;
			call Func049E;
		};
		if (HURD->npc_nearby() || (DRAYGAN->npc_nearby() || (BERYL->npc_nearby() || MORGHRIM->npc_nearby()))) {
			abort;
		}
		var0000 = IVOR->approach_avatar(0x0078, 0x0028);
		if (var0000) {
			IVOR->set_schedule_type(SHY);
			IVOR->set_npc_id(IVOR->get_npc_id() + 0x0001);
		}
		abort;
	}
	if (event == DOUBLECLICK) {
		AVATAR->item_say("@Greetings!@");
		IVOR->clear_item_say();
		IVOR->Func07D1();
		if (DRAYGAN->npc_nearby()) {
			Func097F(IVOR, "@We cannot speak...@", 0x0003);
			DRAYGAN->set_schedule_type(HOUND);
			DRAYGAN->clear_item_say();
			Func097F(DRAYGAN, "@Go away!@", 0x0005);
			IVOR->set_schedule_type(SHY);
		} else {
			Func097F(IVOR, "@I'm no thief!@", 0x0003);
			if (IVOR->get_npc_id() > 0x0003) {
				Func09AD(IVOR);
			} else {
				IVOR->set_schedule_type(WANDER);
			}
		}
	}
}

extern var Func0954 0x954 ();
extern var Func0953 0x953 ();
extern var Func097D 0x97D (var var0000, var var0001, var var0002, var var0003, var var0004);
extern void Func09AC 0x9AC (var var0000, var var0001, var var0002, var var0003);
extern void Func097F 0x97F (var var0000, var var0001, var var0002);
extern void Func07D1 object#(0x7D1) ();
extern void Func095D 0x95D (var var0000);
extern var Func099B 0x99B (var var0000, var var0001, var var0002, var var0003, var var0004, var var0005, var var0006);
extern var Func0955 0x955 ();

void Func049F object#(0x49F) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;

	var0000 = MORGHRIM->get_npc_id();
	var0001 = Func0954();
	var0002 = Func0953();
	var0003 = Func097D(PARTY, 0x0001, 0x01C2, QUALITY_ANY, 0x0000);
	if (event == SCRIPTED) {
		if (MORGHRIM->get_item_flag(SI_ZOMBIE)) {
			Func09AC(MORGHRIM, -1, 0, TALK);
		} else {
			UI_play_sound_effect(0x0077);
			MORGHRIM->set_item_flag(SI_ZOMBIE);
			MORGHRIM->clear_item_flag(ASLEEP);
			MORGHRIM->set_item_frame(0x001E);
			MORGHRIM->move_object([0x063E, 0x044D, 0x0000]);
			MORGHRIM->set_schedule_type(WAIT);
			UI_sprite_effect(ANIMATION_TELEPORT, 0x063E, 0x044D, 0x0000, 0x0000, 0x0000, LOOP_ONCE);
			UI_sprite_effect(ANIMATION_TELEPORT, 0x063E, 0x044D, 0x0000, 0x0000, 0x000C, LOOP_ONCE2);
			Func097F(MORGHRIM, "Draygan's power is broken!", 0x0003);
			var0004 = script MORGHRIM after 10 ticks {
				nohalt;
				call Func049F;
			};
		}
	}
	if (event == DOUBLECLICK) {
		AVATAR->item_say("@Greetings, old man...@");
		MORGHRIM->Func07D1();
		Func097F(MORGHRIM, "@Who calleth me old?@", 0x0002);
		MORGHRIM->set_schedule_type(TALK);
	}
	if (event == STARTED_TALKING) {
		MORGHRIM->run_schedule();
		MORGHRIM->clear_item_say();
		MORGHRIM->show_npc_face0(0x0000);
		add(["Master"]);
		var0005 = MORGHRIM->get_item_flag(MET);
		if (DRAYGAN->get_item_flag(DEAD) && (!gflags[RETURNED_HEART_OF_ELERION])) {
			if (Func097D(PARTY, 0x0001, 0x01C2, QUALITY_ANY, 0x0000)) {
				Func09AC(MORGHRIM, -1, 0, WANDER);
				say("\"Thou must return the Heart of Elerion to me! I need it to restore balance to the forest and its creatures.\"");
				MORGHRIM->set_schedule_type(HOUND);
				BERYL->set_schedule_type(HOUND);
				BERYL->set_alignment(NEUTRAL);
				add("give Orb");
				remove("Master");
			} else {
				BERYL->set_schedule_type(HOUND);
				BERYL->set_alignment(NEUTRAL);
				MORGHRIM->set_schedule_type(HOUND);
				say("\"I must have the Heart of Elerion. Draygan had it, but it belongs to me. If thou canst find it, I shall reward thee.\"");
				add("reward");
				remove("Master");
			}
		} else {
			if (var0005 == false) {
				say("\"I am Morghrim, Master of these forests.\"");
			} else {
				say("\"There thou art! I knew thou wert here somewhere!\"");
			}
			if (gflags[KNOWS_KINGS_SAVIOR] && (!DRAYGAN->get_item_flag(DEAD))) {
				add("King's Savior");
			}
		}
		if (DRAYGAN->get_item_flag(DEAD) && gflags[RETURNED_HEART_OF_ELERION]) {
			say("\"I thank thee for all that thou hast done. The forest and its animals are free from the evil that Draygan had instilled in them.\"");
			say("\"Stay here as long as thou wishest, friend.\"");
			add("Hound of Doskar");
			remove("Master");
		}
		converse ("bye") {
			case "change subject":
				UI_pop_answers();
				say("\"What wouldst thou have me speak of, stranger?\"");
				fallthrough;

			case "give Orb" (remove):
				gflags[RETURNED_HEART_OF_ELERION] = true;
				say("\"I thank thee for thy kind deed! In return I shall give thee the whistle to summon the Hound of Doskar.\"");
				say("\"He will tend to range away from thee when thou hast not given him something to track. If thou dost ever need him, all that thou must do is blow the magic whistle.\"");
				var0004 = UI_remove_party_items(0x0001, 0x01C2, QUALITY_ANY, 0x0000, 0x0000);
				Func095D(0x012C);
				var0004 = Func099B(AVATAR, 0x0001, 0x0289, 0x0000, 0x0004, false, true);
				MORGHRIM->revert_schedule();
				MORGHRIM->run_schedule();
				fallthrough;

			case "reward" (remove):
				say("\"Give the Orb to me, and thou shalt have a most peculiar reward -- the Whistle of Doskar.\"");
				say("\"Use it and thou shalt summon one of the great supernatural hounds from my world. Such a hound can track anything, over any distance.\"");
				fallthrough;

			case "King's Savior" (remove):
				say("\"Thou art looking for the plant they call King's Savior? It is a green plant with spiked foliage and tiny yellow blossoms.\"");
				say("\"Thou shalt find King's Savior growing near mushrooms, along the western shore of this land, beyond the mountain ridge.\"");
				say("\"I won't be asking what thou dost want it for. It is none of my business.\"");
				fallthrough;

			case "Master" (remove):
				say("\"That is correct! I am the Forest Master! Friend to Windrunner! Former protector of Elerion, and now refugee of Pagan! Of course that will mean nothing to a foreigner like thyself. Dost thou know that I can speak to animals and trees? Do not smirk, knave!\"");
				MORGHRIM->set_item_flag(MET);
				add(["Windrunner", "Pagan", "Elerion", "speak to animals and trees"]);
				fallthrough;

			case "Windrunner" (remove):
				say("\"He is a great gray wolf, and my longtime friend. He is also a refugee, like myself. We have been through many adventures together.\"");
				fallthrough;

			case "Pagan" (remove):
				say("\"Ah, Pagan! A wondrous world, far better than this miserable place. At least, it was before it was destroyed by the Evil One and his followers.\"");
				UI_push_answers();
				add(["Evil One", "followers", "change subject"]);
				fallthrough;

			case "Evil One" (remove):
				say("\"He is the Destructor of Worlds, the one who calls himself the Guardian. Ah, but why do I speak of this to thee? What wouldst thou knowest of him? Bah!\"");
				fallthrough;

			case "followers" (remove):
				say("\"The followers of the Evil One were legion, and they declared war upon all who did not fall in tribute to their master. I am proud to count myself among the enemies of the Evil One and am proud to have earned his wrath. But his followers in their cowardice set fire to my forest. Even the Great Tree of Life, Elerion, burned. Using all my powers I was able to obtain the Silver Seed from within Elerion, but in the effort the flames took away my sight. The agony was unbearable and I would have surely died there, in my dead forest, on my dead world, if not for my one true friend, Windrunner. He saved me, so that one day I could become the protector of a new forest. But I have been blind since that day.\"");
				add(["saved thee", "new forest"]);
				fallthrough;

			case "saved thee" (remove):
				say("\"Through his efforts, we escaped, and I used the last of my magic to escape. We found ourselves here -- on the Serpent Isle.\"");
				fallthrough;

			case "new forest" (remove):
				say("\"That would be this place. I have been the caretaker of the trees of these lands for several centuries. It seems that time doth not pass at the same rate here as on my world. But I am sad to say that my powers are not what they once were. Now this forest, this entire world, is dying -- even as mine old world did. But this world will not die with a scream, but with a whimper. Not torn asunder by some terrible devil, but gently fallen into the slumber of death as great cosmic forces shift out of alignment.\"");
				fallthrough;

			case "Elerion" (remove):
				say("\"Elerion was the magnificent tree of life on the world of Pagan! How couldst thou not know such a thing! It stood as a symbol of peace and endurance for more than a millennium, its branches stretched across the sky. I was the last in a long line of noble and dutiful protectors of Elerion. It was the bearer of the Silver Seed and the prime target of the Evil One and his followers.\"");
				UI_push_answers();
				add(["Silver Seed", "prime target", "change subject"]);
				fallthrough;

			case "Silver Seed" (remove):
				if (gflags[USED_AMULET_OF_BALANCE]) {
					say("\"",
						var0001,
						", fate has burdened me with a tremendous weight!  The Silver Seed was split open in the destruction and discord and its magical powers have seeped from it.  The task was mine to plant the Silver Seed, if I survived the cataclysmic end this land faces. I have failed in that duty now, too.  Hrumph!  If only the tales were true!\"");
					add(["tales", "split open"]);
				} else {
					say("\"One day in the far, far future, if this world doth somehow manage to survive its myriad cataclysms, it will be time for me to plant the Silver Seed. Only I will know when and only I will know what to do. Hmmph! I will speak of this no more! Do not ask me of it again!\"");
				}
				fallthrough;

			case "prime target" (remove):
				say("\"It seemed to be the way of this Guardian to try and destroy all goodness and life in the world. I spit upon him! Why, if this Evil One were here right now I would tear off his head and feed the rest of him to Windrunner! That is what I would do!\"");
				fallthrough;

			case "speak to animals and trees" (remove):
				say("\"It is far more interesting to speak to an animal or tree than it is to speak to thee, I can assure thee of that! Much better conversation! Why, it is through this talent that I am able to speak to the Hound of Doskar, for instance.\"");
				if (!gflags[RETURNED_HEART_OF_ELERION]) {
					say("\"Unfortunately, I am having a problem with most of mine other magical powers.\"");
				}
				UI_push_answers();
				add(["Hound of Doskar", "magical powers", "change subject"]);
				fallthrough;

			case "Hound of Doskar" (remove):
				say("\"The stories that Hound can tell! I can talk with the Hound of Doskar for hours! It is a great mystical beast capable of tracking any sort of creature. It can track across worlds and is often ranging, on the scent of one unusual thing or another.\"");
				add("tracking");
				fallthrough;

			case "tracking" (remove):
				say("\"Before the Hound of Doskar can track, thou must show it an item belonging to the person whom thou dost wish to seek.\"");
				say("\"Not any old item -- it must be something which reflects the soul of the lost one! Something personal, something of the heart.\"");
				say("\"Then the Hound can guide thee to the general vicinity where the sought being doth dwell. Nothing can stop the beast.\"");
				fallthrough;

			case "magical powers" (remove):
				say("\"I confess I am not comfortable with the ways magic is practiced on this world, as prescribed by the sorcerers of Moonshade. I suppose I am simply not used to it. This world is plagued by such chaos and imbalance. Long ago, I grew so frustrated by not understanding the way it worked that I put all of my power into a living Orb -- the Heart of Elerion.\"");
				add(["chaos and imbalance", "Heart of Elerion"]);
				fallthrough;

			case "chaos and imbalance" (remove):
				say("\"For example, these bizarre storms! Surely thou art familiar with them! We had nothing like this on Pagan! It hath completely interfered with me using my powers!\"");
				fallthrough;

			case "Heart of Elerion" (remove):
				say("\"With the Orb I am as one with the animals and plants of the forest, and I am its Master, servant and devoted protector. The Orb is spiritually connected to me.\"");
				add("connected");
				if (!gflags[RETURNED_HEART_OF_ELERION]) {
					say("\"But it hath been stolen!\"");
					add("stolen");
				}
				fallthrough;

			case "connected" (remove):
				say("\"My thoughts, emotions, perceptions -- my soul -- it is all tied to the Orb. The Heart of Elerion is like unto mine own heart beating in my chest.\"");
				if (!gflags[RETURNED_HEART_OF_ELERION]) {
					say("\"Having lost the Orb I am as a dead man walking. I cannot heal the land! I cannot even summon the Hound of Doskar for a decent conversation!\"");
				} else {
					say("\"Through it I have the power to heal the land when harm hath come to it, and I can summon the Hound of Doskar.\"");
				}
				add(["heal the land", "summon the Hound"]);
				fallthrough;

			case "heal the land" (remove):
				say("\"And the land doth sorely need it. Thou hast travelled this forest.\tThe trees are tall, but brittle-dry. Soon they will be lifeless and bare. The wolves in this forest are already becoming quite mean, as I am certain thou hast noticed. It is all the wicked result of forces out of balance.\"");
				fallthrough;

			case "summon the Hound" (remove):
				if (!gflags[RETURNED_HEART_OF_ELERION]) {
					say("\"Ever since I have lost contact with the Orb, I am so weakened that I have not been able to produce a call that the Hound is capable of hearing -- even with those long floppy ears on that miserable mongrel! Bah! Didst thou require the hound for some reason?\"");
					var0006 = Func0955();
					if (var0006) {
						say("\"I cannot help thee until mine Orb, the Heart of Elerion, is returned...\"");
					} else {
						say("\"Then why are we talking about the Hound of Doskar?! Bah! I have heard more coherent conversations from trees!\"");
						Func097F(MORGHRIM, "@Bah!@", 0x0000);
						abort;
					}
				} else {
					say("\"But I already gave thee the whistle to summon the Hound! I hope thou hast not lost it, for if thou hast lost the whistle, I cannot help thee.\"");
				}
				fallthrough;

			case "stolen" (remove):
				say("\"Draygan, the leader of a mining camp that is elsewhere in the forest, came traipsing through here with some of his friends one day. They reached my Sanctuary while I was away and stole mine Orb! I had mine hands full with another problem at the time so I sent Windrunner and his mates after them.\tThe wolves killed all of them save for Draygan himself. But he threatened to destroy the Orb if I did not let him go. Since that time, he hath escaped me.\"");
				UI_push_answers();
				add(["another problem", "miner's camp", "Draygan", "change subject"]);
				fallthrough;

			case "another problem" (remove):
				say("\"That would be Hazard the Trapper. Perhaps thou hast heard of him. I am told he is a man of some renown in certain circles. He and I have come against each other before. I bear no grudge against any who hunt in my forest for food, nor one who makes their living as a hunter. But this Hazard is as he is named. No sense nor love for anything save the kill. He hunts and kills without ceasing, with bloody and painful methods. None of the predator's grace -- like the wolves. I cannot abide a man such as he!\"");
				fallthrough;

			case "miner's camp" (remove):
				say("\"A group of miners driven delirious with gold fever sold everything they owned and came here some time ago. They found nothing and were driven to the brink of starvation. Most of the miners tried to leave but they were eaten by the wolves. They were driven away because of Draygan's demands of constant work. A terrible tragedy.\"");
				fallthrough;

			case "tales" (remove):
				say("\"I did go to the Xenkan Monks for aid in my quest to make whole the seed.  They could not heal it, but they told me of a passage in a decrepit book.  It was penned by a scribe of the long-dead folk who once peopled this isle, and it hinted that they, too, possessed a Silver Seed!  Alas, the scribe made no mention of its whereabouts, so it may as well be myth!\"");
				fallthrough;

			case "split open" (remove):
				say("\"Magical as it may be, it is naught but a seed, susceptible to the rigors of the world around it.  I know not when, but the thin shell of the seed split apart.  The contents, wherein the magic of the seed did dwell, were mashed and beaten unknowingly by my own body whilst I tried to escape.  The magic within died.\"");
				fallthrough;

			case "Draygan" (remove):
				say("\"Now that Draygan possesses the Orb, he is nearly as powerful as I. Yet I am not as powerful as I once was. Over time my powers have diminished even more and I am no longer capable of challenging him for possession of the Orb. He is virtually impervious to all forms of harm. I doubt thou wouldst fare better than I have against him and the conflicts have all but killed me! If I were thee, I would try to reason with Draygan. He'll not listen to me for we are enemies. But thou mightest have a chance.\"");
				say("\"Wouldst thou try to retrieve mine Orb?\"");
				var0007 = Func0955();
				if (var0007) {
					say("\"Thou art a true friend, if a strange one. So I shall give thee a word of warning. The wolves and bears and boars of this forest are very hungry. There was a time not so long ago when I could have assured that no harm would come to thee, not only while thou wert in my forest, but all across this world. But not only hath my magic gone, but as I am certain thou dost know, this world is off kilter. Nothing is certain anymore. Good luck to thee.\"");
					gflags[WILL_HELP_MORGHRIM] = true;
				} else {
					say("\"Then I have nothing more to say to thee!\"");
					Func097F(MORGHRIM, "@I am alone...@", 0x0000);
					abort;
				}
				fallthrough;

			case "bye":
				UI_remove_npc_face0();
				UI_remove_npc_face1();
				Func097F(AVATAR, "@Goodbye.@", 0x0000);
				Func097F(MORGHRIM, "@Take care!@", 0x0003);
				break;
		}
	}
}

extern void Func0809 0x809 ();
extern var Func0954 0x954 ();
extern var Func0953 0x953 ();
extern void Func097F 0x97F (var var0000, var var0001, var var0002);
extern var Func0956 0x956 (var var0000);

void Func04A0 object#(0x4A0) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;
	var var0008;
	var var0009;
	var var000A;
	var var000B;
	var var000C;
	var var000D;
	var var000E;
	var var000F;
	var var0010;
	var var0011;
	var var0012;
	var var0013;
	var var0014;
	var var0015;
	var var0016;

	if (get_item_flag(SI_ZOMBIE)) {
		Func0809();
		abort;
	}
	var0000 = Func0954();
	var0001 = UI_is_pc_female();
	var0002 = Func0953();
	if (event == PROXIMITY) {
		var0003 = find_nearby(0x025F, 0x0000, MASK_EGG);
		for (var0006 in var0003 with var0004 to var0005) {
			var0007 = var0006->get_item_frame();
			if ((var0007 <= 0x0001) || (var0007 >= 0x0007)) {
				var0008 = find_nearby(0x0113, 0x0014, MASK_EGG);
				for (var000B in var0008 with var0009 to var000A) {
					if ((var000B->get_item_frame() == 0x0006) && (var000B->get_item_quality() == 0x0001)) {
						if (var000B->get_distance(AVATAR) < 0x0009) {
							item_say("@Thou shan't steal the gold!@");
							set_schedule_type(IN_COMBAT);
							set_alignment(EVIL);
						}
					}
				}
				var000C = find_nearest(0x010E, 0x0003);
				if (var000C) {
					var000D = var000C->get_object_position();
					var000E = var000C->get_item_quality();
					var000C->remove_item();
					var000F = UI_create_new_object(0x0178);
					if (var000F) {
						var0010 = var000F->set_item_quality(var000E);
						var000F->set_item_frame(0x0005);
						var0010 = UI_update_last_created(var000D);
						UI_play_sound_effect2(0x0020, var000F);
					}
				} else if (!(get_schedule_type() == IN_COMBAT)) {
					var000C = find_nearest(0x0178, 0x0005);
					if (var000C) {
						var000D = var000C->get_object_position();
						var000E = var000C->get_item_quality();
						var000C->remove_item();
						var000F = UI_create_new_object(0x010E);
						if (var000F) {
							var0010 = var000F->set_item_quality(var000E);
							var000F->set_item_frame(0x0006);
							var0010 = UI_update_last_created(var000D);
							UI_play_sound_effect2(0x001F, var000F);
						}
					}
				}
			}
			if (var0007 == 0x0002) {
				if (UI_die_roll(0x0001, 0x0002) == 0x0001) {
					item_say("@No new arrivals...@");
				}
				var0010 = script item {
					wait 7;
				};
			}
			if (var0007 == 0x0004) {
				if (UI_die_roll(0x0001, 0x0002) == 0x0001) {
					item_say("@'Tis as a rubbish heap!@");
					Func097F(item, "Bloody criminals...@", 0x0010);
				}
				var0010 = script item {
					wait 10;
				};
			}
		}
	}
	if (event == SCRIPTED) {
		AUTOMATON_FACE->show_npc_face0(0x0000);
		if (gflags[MET_FREEDOM_CARETAKER]) {
			say("\"Yes, felon?\"");
			say("\"'Tis gratifying to see that I shant have to collect thy skull yet. Such stamina shall be useful to thee here, certainly.\"");
			say("\"But thou shouldst journey further into the mountain soon, felon. The only source of food and water lies deeper in the heart of Freedom... if thou canst pay for it.\"");
			say("\"Forgive me if I do not linger. I have many things to attend to before I can begin my rounds. Remember, if thou canst find thy way out, thou wilt be free!\"");
			if (UI_die_roll(0x0001, 0x000A) > 0x0009) {
				set_schedule_type(PATROL);
			}
			UI_remove_npc_face0();
			item_say("@So long, felon!@");
			abort;
		}
		say("\"Greetings, felon!\"");
		say("\"Thou art in the Mountains of Freedom... A magical prison from which none have escaped.\"");
		say("\"I am the caretaker here. It is my duty to record thy name and crime.\"");
		var0011 = ("I am " + var0002) + ".";
		var0012 = [var0011, "I am the Avatar.", "None of thy business."];
		var0013 = Func0956(var0012);
		if (var0013 == var0011) {
			say("\"My condolences on thy sentence here, ",
				var0002,
				".\"");
		}
		if (var0013 == "I am the Avatar.") {
			say("\"I see... Perhaps thou couldst have pleaded insanity and avoided being sent here, felon.\"");
		}
		if (var0013 == "None of thy business.") {
			say("\"With thine attitude, I understand why thou art here.\"");
		}
		say("\"With what crime art thou charged?\"");
		var0014 = ["I am innocent!", "Angering Filbercio.", "I don't know."];
		var0015 = Func0956(var0014);
		if (var0015 == "I am innocent!") {
			say("\"Ahh, thou wouldst be surprised how many innocents come through here, felon. Only yesterday we had another such innocent... Let us see. Stefano was his name.\"");
		}
		if (var0015 == "Angering Filbercio.") {
			say("\"Ahh, thou art in fine company then, felon. Only yesterday we had another such felon arrive... Let us see. Stefano was his name.\"");
		}
		if (var0015 == "I don't know.") {
			say("\"I am certain that thou wilt discern it while thou art here. Perhaps yesterday's felon is still alive to aid thee in thy search for enlightenment... Let us see. Stefano was his name.\"");
		}
		say("\"I will tell thee as I told him. Sleep passes thy time here, and may provide thee with new ideas for winning thy freedom.\"");
		say("\"Thou shouldst be wary of two rogue mages who roam through these passages. They came here in search of the forbidden reagent, Stoneheart, and never escaped.\"");
		say("\"Be mindful of the other felons... Most are quite desperate by now and will kill thee for what thou dost possess. In fact, they may prove to be thy greatest danger.\"");
		say("\"There is another caretaker within the prison with a small supply of food and healing potions for sale, if thou dost need any... And if thou dost make it that far, of course.\"");
		say("\"I make rounds periodically, to note who hath died for the records. Thou mayest notice later that I take great care to memorialize all who perish here. So thy passing shall not go unremarked...\"");
		say("\"Remember, if thou canst find thy way out, thou wilt be free!\"");
		gflags[MET_FREEDOM_CARETAKER] = true;
		UI_remove_npc_face0();
		item_say("@Goodbye, felon!@");
	}
	if (event == DOUBLECLICK) {
		var0010 = script item {
			wait 2;
			call Func04A0;
		};
	}
	if (event == DEATH) {
		var000D = get_object_position();
		while (var000D[0x0003] > 0x0000) {
			var000D[0x0001] -= 0x0001;
			var000D[0x0002] -= 0x0001;
			var000D[0x0003] -= 0x0002;
		}
		do {
			var0016 = JAIL_01->get_cont_items(SHAPE_ANY, QUALITY_ANY, FRAME_ANY);
			if (!var0016) {
				break;
			}
			var0010 = var0016->set_last_created();
			if (var0010) {
				var0010 = UI_update_last_created(var000D);
			}
		} while (true);
		UI_sprite_effect(ANIMATION_SMALL_RING_BLAST, (var000D[0x0001] - 0x0001), (var000D[0x0002] - 0x0001), 0x0000, 0x0000, 0x0000, LOOP_ONCE);
		UI_play_sound_effect(0x002A);
		JAIL_01->remove_npc();
	}
}

extern void Func0809 0x809 ();
extern var Func0954 0x954 ();
extern var Func0953 0x953 ();
extern void Func07D1 object#(0x7D1) ();
extern var Func0955 0x955 ();
extern var Func0956 0x956 (var var0000);
extern void Func080F 0x80F ();
extern void Func0810 0x810 ();

void Func04A1 object#(0x4A1) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;

	if (get_item_flag(SI_ZOMBIE)) {
		Func0809();
		abort;
	}
	var0000 = Func0954();
	var0001 = UI_is_pc_female();
	var0002 = Func0953();
	if (event == PROXIMITY) {
		var0003 = UI_die_roll(0x0001, 0x0003);
		if (var0003 == 0x0001) {
			JAIL_02->item_say("@Healing potions!@");
		}
		if (var0003 == 0x0002) {
			JAIL_02->item_say("@Food!@");
		}
		if (var0003 == 0x0003) {
			JAIL_02->item_say("@Bandages!@");
		}
	}
	if (event == DOUBLECLICK) {
		JAIL_02->Func07D1();
		AUTOMATON_FACE->show_npc_face0(0x0000);
		say("\"Greetings, felon!\"");
		say("\"Art thou in need of food or healing?\"");
		if (Func0955() == true) {
			say("\"Such items are very valuable here, felon. Thou mayest find the prices steep...\"");
			say("\"What dost thou wish, food or healing?\"");
			var0004 = Func0956(["food", "healing"]);
			if (var0004 == "food") {
				Func080F();
			} else {
				Func0810();
			}
			say("\"Thou art always welcome here, felon... As long as thou dost have money, that is.\"");
			UI_remove_npc_face0();
			item_say("@Goodbye, felon!@");
		} else {
			say("\"Then thou wilt have to move on...\"");
			return;
		}
	}
	if (event == DEATH) {
		var0005 = get_object_position();
		while (var0005[0x0003] > 0x0000) {
			var0005[0x0001] -= 0x0001;
			var0005[0x0002] -= 0x0001;
			var0005[0x0003] -= 0x0002;
		}
		UI_sprite_effect(ANIMATION_SMALL_RING_BLAST, (var0005[0x0001] - 0x0001), (var0005[0x0002] - 0x0001), 0x0000, 0x0000, 0x0000, LOOP_ONCE);
		UI_play_sound_effect(0x002A);
		remove_item();
	}
}

extern void Func0809 0x809 ();
extern var Func0954 0x954 ();
extern var Func0953 0x953 ();
extern void Func07D1 object#(0x7D1) ();
extern var Func0955 0x955 ();
extern var Func0956 0x956 (var var0000);
extern void Func080F 0x80F ();
extern void Func0810 0x810 ();
extern void Func097F 0x97F (var var0000, var var0001, var var0002);
extern void Func09AD 0x9AD (var var0000);
extern var Func099B 0x99B (var var0000, var var0001, var var0002, var var0003, var var0004, var var0005, var var0006);

void Func04A2 object#(0x4A2) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;

	if (get_item_flag(SI_ZOMBIE)) {
		Func0809();
		abort;
	}
	var0000 = Func0954();
	var0001 = UI_is_pc_female();
	var0002 = Func0953();
	if (event == DOUBLECLICK) {
		item_say("@Well done!@");
		JAIL_03->Func07D1();
		var0003 = script item {
			wait 2;
			call Func04A2;
		};
	}
	if (event == SCRIPTED) {
		AUTOMATON_FACE->show_npc_face0(0x0000);
		say("\"Thou hast made it this far... Dost thou wish to purchase food or healing potions?\"");
		if (Func0955() == true) {
			say("\"Such items are very valuable here, felon. Thou mayest find the prices steep...\"");
			say("\"What dost thou wish, food or healing potions?\"");
			var0004 = Func0956(["food", "healing"]);
			if (var0004 == "food") {
				Func080F();
			} else {
				Func0810();
			}
		} else {
			say("\"But it is my task to bar thine exit still. If thou canst defeat me, thou mayest take the key and be free!\"* \"But if thou canst not, thou wilt remain here. Forever!\"");
			Func097F(JAIL_03, "@To arms, felon!@", 0x0002);
			Func09AD(JAIL_03);
			abort;
		}
	}
	if (event == DEATH) {
		AUTOMATON_FACE->show_npc_face0(0x0000);
		say("\"Congratulations, ",
			var0000,
			"! Thou hast proven thine innocence...\"");
		say("\"Take the key and enjoy thy freedom!\"");
		var0005 = Func099B(AVATAR, 0x0001, 0x0281, QUALITY_ANY, 0x0018, 0x0000, true);
		UI_remove_npc_face1();
		abort;
	}
}

extern void Func097F 0x97F (var var0000, var var0001, var var0002);
extern void Func09AA 0x9AA ();
extern void Func09AD 0x9AD (var var0000);

void Func04A3 object#(0x4A3) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;
	var var0008;
	var var0009;
	var var000A;
	var var000B;
	var var000C;
	var var000D;
	var var000E;
	var var000F;
	var var0010;
	var var0011;
	var var0012;
	var var0013;
	var var0014;
	var var0015;
	var var0016;
	var var0017;
	var var0018;

	if (event == EGG) {
		var0000 = script LORTHONDO {
			call Func04A3;
		};
		Func097F(LORTHONDO, "@Die, mortal!@", 0x0002);
	}
	if (event == SCRIPTED) {
		if (get_item_shape() == 0x0331) {
			var0001 = UI_die_roll(0x0001, 0x0003);
			if ((var0001 == 0x0001) && (gflags[ARCADION_IS_FREE] == false)) {
				Func097F(AVATAR, "@Free me, Avatar!@", 0x0005);
				Func097F(STEFANO, "@Listen to thy sword!@", 0x000F);
			}
			if ((var0001 == 0x0002) && (gflags[ARCADION_IS_FREE] == false)) {
				Func097F(AVATAR, "@Release me, Avatar!@", 0x0005);
				Func097F(STEFANO, "@Do what thy sword says!@", 0x000C);
			}
			if ((var0001 == 0x0003) && (gflags[ARCADION_IS_FREE] == false)) {
				Func097F(AVATAR, "@Liberate me, Avatar!@", 0x0005);
				Func097F(STEFANO, "@Do it! Do it! Do it!@", 0x0009);
			}
			var0001 = LORTHONDO->find_nearby(0x0113, 0x0000, MASK_EGG);
			if (var0001) {
				var0002 = UI_die_roll(0x0002, 0x0008);
				var0000 = script var0001 after (0x0019 + var0002) ticks {
					call Func04A3;
				};
			}
			var0002 = UI_die_roll(0x0001, 0x0004);
			var0003 = LORTHONDO->direction_from(AVATAR);
			if (var0002 == 0x0001) {
				var0004 = LORTHONDO->get_object_position();
				UI_sprite_effect(ANIMATION_GREEN_BUBBLES, (var0004[0x0001] - 0x0001), (var0004[0x0002] - 0x0001), 0x0000, 0x0000, 0x0000, LOOP_ONCE);
				UI_play_sound_effect(0x0074);
				var0000 = script LORTHONDO {
					face var0003;
					say "@Kal Ort Grav!@";
					continue;
					actor frame bowing;
					wait 2;
					actor frame kneeling;
					wait 3;
					actor frame bowing;
					wait 2;
					actor frame standing;
				};
				UI_earthquake(0x000A);
				var0005 = UI_get_party_list();
				for (var0008 in var0005 with var0006 to var0007) {
					var0009 = [];
					var000A = UI_die_roll(0x0001, 0x0003);
					if (var000A == 0x0001) {
						var0009 = new script {
							actor frame sleeping;
							wait 2;
							actor frame kneeling;
							wait 2;
							actor frame bowing;
							wait 2;
							actor frame standing;
						};
					}
					if (var000A == 0x0002) {
						var0009 = new script {
							face 4;	// Note: could be 'face south'
							wait 2;
							actor frame kneeling;
							wait 0x0002;
							actor frame bowing;
							wait 0x0002;
							actor frame standing;
						};
					}
					if (var000A == 0x0003) {
						var0009 = new script {
							face 6;	// Note: could be 'face west'
							wait 2;
							actor frame bowing;
							wait 4;
							actor frame standing;
						};
					}
					var0000 = var0008->run_script(var0009);
				}
			}
			if (var0002 == 0x0002) {
				var0004 = AVATAR->get_object_position();
				UI_sprite_effect(ANIMATION_LIGHTNING, var0004[0x0001], var0004[0x0002], 0x0000, 0x0000, 0x0000, LOOP_ONCE);
				UI_lightning();
				UI_play_sound_effect(0x0074);
				var0000 = UI_apply_damage(AVATAR->get_npc_prop(STRENGTH), 0x0004, LIGHTNING_DAMAGE, AVATAR);
				var0000 = script LORTHONDO {
					face var0003;
					say "@Kal Grav!@";
					actor frame cast_up;
					wait 3;
					actor frame cast_out;
					wait 2;
					actor frame standing;
				};
			}
			if (var0002 == 0x0003) {
				var000A = UI_die_roll(0x0001, 0x0004);
				if (var000A == 0x0001) {
					var000B = 0x0001;
				}
				if (var000A == 0x0002) {
					var000B = 0x0004;
				}
				if (var000A == 0x0003) {
					var000B = 0x0005;
				}
				if (var000A == 0x0004) {
					var000B = 0x001E;
				}
				if (var000A == 0x0005) {
					var000B = 0x001B;
				}
				if (var000A == 0x0006) {
					var000B = 0x001F;
				}
				var0004 = AVATAR->get_object_position();
				UI_sprite_effect(var000B, var0004[0x0001], var0004[0x0002], 0x0000, 0x0000, 0x0000, LOOP_ONCE);
				UI_play_sound_effect(0x002A);
				var0005 = UI_get_party_list();
				for (var0008 in var0005 with var000C to var000D) {
					var0000 = UI_apply_damage(var0008->get_npc_prop(STRENGTH), 0x0004, LIGHTNING_DAMAGE, var0008);
				}
				var0000 = script LORTHONDO {
					face var0003;
					say "@Vas Flam!@";
					actor frame ready;
					wait 2;
					actor frame raise_1h;
					wait 2;
					actor frame reach_1h;
					wait 2;
					actor frame strike_1h;
					wait 2;
					actor frame ready;
					wait 2;
					actor frame standing;
				};
			}
			if (var0002 == 0x0004) {
				var000A = UI_die_roll(0x0001, 0x0003);
				if (var000A == 0x0001) {
					var0000 = script LORTHONDO {
						face var0003;
						say "@I will kill thee!@";
					};
				}
				if (var000A == 0x0002) {
					var0000 = script LORTHONDO {
						face var0003;
						say "@Thou art no match for my power.@";
					};
				}
				if (var000A == 0x0003) {
					var0000 = script LORTHONDO {
						face var0003;
						say "@Kneel before me, worm.@";
					};
				}
			}
			abort;
		}
		if (get_item_shape() == 0x0341) {
			var0004 = LORTHONDO->get_object_position();
			var000E = get_object_position();
			if (var000E[0x0001] < var0004[0x0001]) {
				var000E[0x0001] = 0x09C7;
				var000E[0x0002] = 0x06D7;
			} else {
				var000E[0x0001] = 0x09BD;
				var000E[0x0002] = 0x06DC;
				UI_sprite_effect(ANIMATION_BIG_RING_BLAST, var0004[0x0001], var0004[0x0002], 0x0000, 0x0000, 0x0000, LOOP_ONCE);
				UI_play_sound_effect(0x002A);
			}
			UI_sprite_effect(ANIMATION_BIG_BLAST, var000E[0x0001], var000E[0x0002], 0x0000, 0x0000, 0x0000, LOOP_ONCE);
			UI_play_sound_effect(0x002A);
		}
		if (get_item_shape() == 0x0349) {
			var0004 = LORTHONDO->get_object_position();
			var000E = get_object_position();
			if (var000E[0x0002] < var0004[0x0002]) {
				var000E[0x0001] = 0x09C4;
				var000E[0x0002] = 0x06E4;
			} else {
				var000E[0x0001] = 0x09B8;
				var000E[0x0002] = 0x06E0;
			}
			UI_sprite_effect(ANIMATION_BIG_BLAST, var000E[0x0001], var000E[0x0002], 0x0000, 0x0000, 0x0000, LOOP_ONCE);
			UI_play_sound_effect(0x002A);
		}
		if (get_item_shape() == 0x031F) {
			Func09AA();
			var000F = LORTHONDO->find_nearby(0x031F, 0x001E, MASK_NONE);
			var000F &= LORTHONDO->find_nearby(0x0339, 0x001E, MASK_NONE);
			var000F &= LORTHONDO->find_nearby(0x00E0, 0x001E, MASK_NONE);
			for (var0012 in var000F with var0010 to var0011) {
				var0004 = var0012->get_object_position();
				var0004[0x0003] = 0x0000;
				var0012->move_object(var0004);
			}
			var0013 = LORTHONDO->find_nearby(0x00A3, 0x001E, MASK_NONE);
			for (var0016 in var0013 with var0014 to var0015) {
				var0002 = UI_die_roll(0x0001, 0x0003);
				var0000 = script var0016 {
					wait var0002;
					repeat 4 {
						previous frame cycle;
						wait var0002;
					};
					wait var0002;
					remove;
				};
			}
			LORTHONDO->remove_npc();
			var0005 = UI_get_party_list();
		}
		if (get_item_shape() == 0x01FB) {
			var0000 = script LORTHONDO {
				say "@Perhaps I've a use for thee after all...@";
				continue;
				actor frame cast_out;
				wait 1;
				actor frame cast_up;
				wait 4;
				actor frame cast_out;
				wait 3;
				actor frame standing;
			};
			var0004 = get_object_position();
			UI_sprite_effect(ANIMATION_GREEN_BUBBLES, var0004[0x0001], var0004[0x0002], 0x0000, 0x0000, 0x0000, LOOP_ONCE);
			UI_play_sound_effect(0x0082);
			remove_item();
			var0017 = UI_create_new_object2(0x017D, var0004);
			var0017->set_polymorph(0x01CC);
			var0017->set_item_flag(SI_TOURNAMENT);
			Func09AD(var0017);
			var0003 = var0017->find_direction(AVATAR);
			var0000 = script var0017 {
				face var0003;
				wait 4;
				actor frame raise_1h;
				wait 3;
				actor frame reach_1h;
				wait 3;
				actor frame strike_1h;
				wait 4;
				call Func04A3;
			};
			abort;
		}
		if (get_item_shape() == 0x017D) {
			var0018 = LORTHONDO->find_nearest(0x0124, 0x0005);
			if (var0018) {
				var0000 = script LORTHONDO {
					wait 3;
					actor frame bowing;
					wait 2;
					actor frame kneeling;
				};
				var0000 = script var0018 {
					say "@And now, I fear I must be going.@";
					wait 7;
					call Func04A3;
				};
			}
			abort;
		}
		if (get_item_shape() == 0x0124) {
			var0017 = LORTHONDO->find_nearby(0x017D, 0x0014, MASK_NPC2);
			if (var0017) {
				var0017->set_schedule_type(IN_COMBAT);
				var0000 = script var0017 {
					say "@Die, mortal!@";
				};
			}
			var0004 = LORTHONDO->get_object_position();
			LORTHONDO->remove_npc();
			UI_sprite_effect(ANIMATION_TELEPORT, (var0004[0x0001] - 0x0002), (var0004[0x0002] - 0x0002), 0x0000, 0x0000, 0x0000, LOOP_ONCE);
			UI_play_sound_effect(0x0082);
			Func09AA();
			abort;
		}
	}
}

extern var Func0955 0x955 ();
extern void Func0922 0x922 (var var0000);
extern var Func099D 0x99D (var var0000);
extern void Func08AF 0x8AF (var var0000, var var0001);

void Func04A5 object#(0x4A5) () {
	var var0000;
	var var0001;

	if ((event == DEATH) && PRISON2->get_item_flag(SI_TOURNAMENT)) {
		var0000 = get_cont_items(0x0326, QUALITY_ANY, FRAME_ANY);
		if (var0000) {
			PRISON2->clear_item_flag(SI_TOURNAMENT);
			UI_play_sound_effect(0x004C);
			gflags[GOT_BLACK_SWORD] = true;
			var0001 = script var0000 after 2 ticks {
				call Func04A5;
			};
			BILLY_CAIN->show_npc_face0(0x0000);
			say("\"At last thou hast found me, Avatar... I thought that I was free of thee when that strange lightning teleported me to this place...\" ~\"But now we are joined and I shall remain with thee until thou dost release me!\"");
			say("\"I have fulfilled the task thou didst set for me back in Britannia. Did I not serve thee well on the Isle of Fire? Thou didst not bind me for service in another land. Thou shouldst release me from my prison to be free again. Wilt thou?\"");
			if (Func0955() == true) {
				say("\"Free! Free! Free at last!\"");
				say("\"Fool! Thou hast no idea what thou hast lost...\"");
				UI_remove_npc_face0();
				Func0922(0x0017);
				AVATAR->obj_sprite_effect(ANIMATION_TELEPORT, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, LOOP_ONCE);
				UI_play_sound_effect(0x004C);
				gflags[ARCADION_IS_FREE] = true;
				gflags[ARCADION_IN_SWORD] = false;
			} else {
				say("\"The journey into this realm weakened thine hold on me, Avatar. Beware! If thou wilt not release me honorably, I will have my vengeance upon thee if I escape!\"");
				say("\"But perhaps thou wilt have need of me yet...\"");
				UI_remove_npc_face0();
			}
		}
	}
	if (event == SCRIPTED) {
		if ((gflags[ARCADION_IS_FREE] == false) && (gflags[ARCADION_IN_SWORD] == true)) {
			if (!Func099D(item)) {
				Func08AF(item, 0x0000);
			}
		}
	}
}

extern var Func0954 0x954 ();
extern var Func0953 0x953 ();
extern var Func0994 0x994 ();
extern void Func07D1 object#(0x7D1) ();
extern void Func097F 0x97F (var var0000, var var0001, var var0002);
extern void Func086A 0x86A ();
extern void Func09AC 0x9AC (var var0000, var var0001, var var0002, var var0003);
extern var Func099B 0x99B (var var0000, var var0001, var var0002, var var0003, var var0004, var var0005, var var0006);
extern var Func0992 0x992 (var var0000, var var0001, var var0002, var var0003);
extern var Func09A0 0x9A0 (var var0000, var var0001);

void Func04A8 object#(0x4A8) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;
	var var0008;
	var var0009;
	var var000A;
	var var000B;
	var var000C;
	var var000D;
	var var000E;
	var var000F;
	var var0010;
	var var0011;
	var var0012;
	var var0013;

	var0000 = Func0954();
	var0001 = UI_is_pc_female();
	var0002 = Func0953();
	var0003 = Func0994();
	var0004 = UI_part_of_day();
	var0005 = false;
	if ((var0004 > EARLY) || (var0004 < EVENING)) {
		var0004 = "day";
	} else {
		var0004 = "evening";
	}
	if (event == DOUBLECLICK) {
		AVATAR->item_say("@Hello!@");
		STEFANO->Func07D1();
		Func097F(STEFANO, (("@Felicitations, " + var0000) + ".@"), 0x0002);
		STEFANO->set_schedule_type(TALK);
	}
	if (event == STARTED_TALKING) {
		STEFANO->run_schedule();
		STEFANO->clear_item_say();
		STEFANO->show_npc_face0(0x0000);
		if (STEFANO->get_item_flag(IN_PARTY)) {
			STEFANO->set_schedule_type(FOLLOW_AVATAR);
			add("leave");
		} else {
			STEFANO->run_schedule();
			add("join");
		}
		var0006 = STEFANO->get_item_flag(MET);
		if (gflags[BANES_RELEASED]) {
			if (!DEATH_KNIGHT->get_item_flag(DEAD)) {
				say("\"I am not a cowardly man, ",
					var0000,
					", but I am powerfully glad to see thee again. I am in terrible trouble.\"");
				if (UI_get_array_size(UI_get_party_list2()) < 0x0005) {
					say("\"In fact, I think that I will stay close by thee -- that will be safest for me!\"");
					STEFANO->add_to_party();
					gflags[STEFANO_HAS_BELONGINGS] = true;
					remove("join");
					add("leave");
				}
				add("trouble");
			} else if (gflags[HAVE_STEFANOS_KEY]) {
				say("\"I hope that thy quest doth fare well, ",
					var0000,
					". Hast thou yet recovered the Rock Serpent?\"");
				add("Rock Serpent");
			} else if (gflags[STEFANO_SPOKE_ROCK_SERPENT]) {
				say("\"I hope that thy quest doth fare well, ",
					var0000,
					". How might a humble man such as myself be of aid to thee?\"");
			} else {
				say("\"If I were not quaking with fear, ",
					var0000,
					", I would go down on both knees before thee. I am so grateful for thine aid.\"");
				if (STEFANO->get_item_flag(IN_PARTY)) {
					STEFANO->remove_from_party();
					Func086A();
					remove("leave");
				}
				STEFANO->set_new_schedules([MIDNIGHT, NOON, AFTERNOON, EVENING, NIGHT], [SLEEP, EAT_AT_INN, WANDER, EAT_AT_INN, DANCE], [0x09A7, 0x0778, 0x08C7, 0x0714, 0x099F, 0x078F, 0x08BE, 0x0707, 0x08B6, 0x070C]);
				STEFANO->set_schedule_type(WANDER);
				add("grateful");
			}
			add("happenings");
			if (gflags[THOXA_REVIVED_STEFANO]) {
				add("thy death");
			}
		} else if (var0003 == 0x000F) {
			if (var0006 == false) {
				STEFANO->set_item_flag(MET);
				Func09AC(STEFANO, -1, 0, WANDER);
				STEFANO->set_schedule_type(SHY);
				say("\"I am Stefano, late of Moonshade, and obtainer of rarities...\"");
				say("\"I was unjustly imprisoned here, ",
					var0000,
					"! I'll freely admit that I am no fighter... But I have a quick wit and information that should help us pass out of this foul place. Perhaps if we join together, we have some small chance of escape.\"");
			} else {
				say("\"How may I aid thee, Avatar?\"");
			}
			add(["Moonshade", "rarities", "information"]);
		} else {
			say("\"I see that thou art still hale and whole, Avatar!\"");
			add(["Moonshade", "rarities"]);
		}
		if (gflags[STEFANO_HAS_BELONGINGS] && ((!STEFANO->get_item_flag(IN_PARTY)) && STEFANO->get_cont_items(SHAPE_ANY, QUALITY_ANY, FRAME_ANY))) {
			add("belongings");
		}
		converse (["bye"]) {
			case "thy death" (remove):
				gflags[THOXA_REVIVED_STEFANO] = false;
				say("\"Thou dost recall correctly -- I was dead when last we met...");
				say("\"Next I remember, this beautiful woman was standing over me. She kissed me, and a warmth spread throughout my body...\"");
				say("\"She said her name was Thoxa, and that I had to live in order to fulfill thy destiny, ",
					var0002,
					". And so I'm here.\"");
				fallthrough;

			case "change subject", "nothing more":
				UI_pop_answers();
				if (var0005) {
					say("\"Umm... I apologize for droning on and on. What wouldst thou like to speak about?\"");
				} else {
					say("\"My talk bores thee, eh? So thou dost think that I drone on and on with my long-winded stories...\"");
					say("\"Well, actually, 'tis the truth. A bad habit that I'd like to be rid of.\"");
					say("\"At any rate, what dost thou desire to speak of?\"");
					var0005 = true;
				}
				fallthrough;

			case "belongings" (remove):
				Func086A();
				fallthrough;

			case "Rock Serpent" (remove):
				say("\"Thou hast but to look within the vault behind mine old house, ",
					var0002,
					". I will not touch it again. It hath brought me enough bad luck...\"");
				say("\"I am not a bold adventurer like thee, ",
					var0002,
					". I have no need of such things, but I am sure that thou wilt find it useful.\"");
				say("\"And I thank thee once again for saving my life. I shall never forget thee.\"");
				gflags[STEFANO_SPOKE_ROCK_SERPENT] = true;
				fallthrough;

			case "happenings" (remove):
				say("\"A terrible, glowing being came to Moonshade, and battled against all of the Mages! I believe them to be dead...\"");
				say("\"I did not stay to be sure, but came here to hide myself. 'Tis the end of the world, ",
					var0002,
					"!\"");
				fallthrough;

			case "grateful" (remove):
				say("\"I thank thee a thousand times over for saving my life, ",
					var0002,
					"! There is no way for me to repay thee, but something I possess might be of use to thee on thy quest.\"");
				say("\"This is the key to the vault behind mine old house, which is west of the city. With it, thou wilt be able to retrieve the cursed Rock Serpent that hath caused me such trouble. Take it with my blessings!\"");
				var0007 = Func099B(AVATAR, 0x0001, 0x0281, 0x00C2, 0x0009, 0x0000, true);
				gflags[HAVE_STEFANOS_KEY] = true;
				fallthrough;

			case "trouble" (remove):
				say("\"This all started with a piece of work I did for the late MageLord, which involved procuring some stockings...\"");
				say("\"'Tis a long story, but to be brief, Columna the Green Witch hated me for what I did. She is dead now, but her curse lives on.\"");
				UI_push_answers();
				add(["curse", "stockings", "Columna", "change subject"]);
				fallthrough;

			case "curse" (remove):
				say("\"I'd spit on her grave, if she had one, the hag!\"");
				say("\"From the depths of some hell, she hath summoned up a tireless warrior to pursue me!\"");
				say("\"'Tis a Death Knight, whose sole purpose is to slay the victim he is promised. Columna pledged my soul to this one.\"");
				say("\"Surely, thou canst save me! Slay him for me, and thou shalt have my most priceless reward!\"");
				add(["slay", "reward", "Where is he?"]);
				fallthrough;

			case "slay" (remove):
				say("\"Well, I don't know how to kill him. I only know that he is very, very tough. Mayhap immortal.\"");
				var0008 = Func0992(0x0001, 0x0000, 0x0000, false);
				if ((var0008 != STEFANO) && (var0008 != AVATAR)) {
					var0008->show_npc_face1(0x0000);
					say("\"Perhaps nothing can stop a Death Knight.\"");
					UI_remove_npc_face1();
					0x0000->set_conversation_slot();
				}
				say("\"Don't let me discourage thee from making the attempt to slay the thing. My life depends on it, friend!\"");
				fallthrough;

			case "reward" (remove):
				say("\"Well, thou dost see, I have this item which might interest thee. In fact, I think it belongs to thee. I suspect one of those magic storms brought it my way.\"");
				say("\"If I was an honorable man, I suppose I'd give it to thee straight away. But I'm not. So if thou canst kill the Death Knight, the Rock Serpent is thine. If not...\"");
				say("\"And do not think of killing me and taking the Serpent. I have it well hidden.\"");
				fallthrough;

			case "Where is he?" (remove):
				say("\"Wish I knew. He doth charge at me when I least expect it. Sometimes he appears from thin air!\"");
				fallthrough;

			case "Moonshade" (remove):
				say("\"No, I'm no mage... Though they tell me that I have a bit of the ability. But what good is that when the entire city is ruled by Adepts? No, no, 'tis not for me!\"");
				say("\"Give me a good challenging search any day! The harder something is to find, the better I like it.\"");
				UI_push_answers();
				add(["ability", "Adepts", "search", "change subject"]);
				fallthrough;

			case "stockings" (remove):
				say("\"Filbercio promised me a small but substantial fortune if I could procure a certain pair of moonsilk stockings.\"");
				say("\"It seems that he was eager to enjoy the pleasures of one of the female Mages, and felt that these stockings would provide leverage for his arguments -- if thou dost see where I am reaching...\"");
				say("\"So I stole -- er, acquired -- the stockings for him. But then the lightning stole them from me. Filbercio accused me of swindling him, and tossed me in Dungeon Freedom!\"");
				fallthrough;

			case "Columna" (remove):
				say("\"If thou must know -- Columna is married to Melino, an old and doddering Mage but no fool. 'Tis no surprise that she lusts for young Torrissio!\"");
				say("\"The stockings were evidence, since only Columna wears this sort, and because I found them in Torrissio's manor.\"");
				say("\"However, Columna found out that I stole them, and she wants mine head on a platter. Literally!\"");
				say("\"I'm glad the old witch is dead. I only wish her curse had died with her...\"");
				fallthrough;

			case "ability" (remove):
				say("\"Magic! It seems as if some dark magic is following me these days...\"");
				say("\"I sometimes carry a spell scroll or two... May as well make use of any edge I can acquire.\"");
				if (var0003 == 0x000F) {
					say("\"In fact, if we escape, I suggest that thou shouldst acquire as many spell scrolls as thou canst -- they come in very handy!\"");
				}
				fallthrough;

			case "Adepts" (remove):
				say("\"If Moonshade weren't ruled by the Adepts, canst thou imagine what it would be like trying to govern all those powerful mages? With all their fragile egos? -- LARGE, fragile egos.\"");
				say("\"If there's one central problem with the Adepts, 'tis that they have no regard for those with little or no magic. However, in some ways, that makes my life easier.\"");
				add(["egos", "easier"]);
				fallthrough;

			case "egos" (remove):
				say("\"Thou dost not know the half of it! One time I was passing time at the Blue Boar while Frigidazzi was there.\"");
				say("\"Rotoluncia entered and rather pointedly remarked that Frigidazzi was looking excessively rumpled that day. And suddenly they were at each other...\"");
				say("\"Of course, they were pretty much evenly matched. Until Celennia showed up that is. But 'tis that I refer to... Fragile egos and hot tempers, and magic to top it. Not a safe combination.\"");
				UI_push_answers();
				add(["Frigidazzi", "Rotoluncia", "Celennia", "nothing more"]);
				fallthrough;

			case "Frigidazzi" (remove):
				say("\"Thou knowest the kind of beauty that artisans create? 'Tis like unto Frigidazzi -- like a cold marble carving.\"");
				say("\"Oh, I'll grant that there's a hot predator under that shroud of ice, but few have seen it.\"");
				say("\"Like the cold spells she excels in, Frigidazzi certainly knows how to lower the temperature in a room...\"");
				say("\"'Tis a wonder that Filbercio hath not died of frostbite by now! I cannot discern if he's a brave man... or merely stupid!\"");
				fallthrough;

			case "Rotoluncia" (remove):
				say("\"Dead, is she? At thine hand?\"");
				say("\"I'm impressed at thy skills, ",
					var0000,
					"! Most could not have killed the Red Witch.\"");
				fallthrough;

			case "Celennia" (remove):
				say("\"I would rather face the ire of Frigidazzi AND Rotoluncia than that of Celennia! She's worse than a cat, ",
					var0000,
					"! She'll toy with thee before she kills thee -- She wants thee to have time to consider what will happen to thee, and why.\"");
				say("\"Celennia was Frigidazzi's dearest friend until they had a fight. I do not know what it was about but I wouldn't be surprised if it was caused by Frigidazzi being friendly with the MageLord... I think Celennia thought she was to be his next companion.\"");
				say("\"All I know is that the fight was spectacular, and Celennia was on Hawk's ship the next day, bound for Sleeping Bull. They say she doth have relatives in Monitor...\"");
				var0009 = true;
				fallthrough;

			case "Vasculio" (remove):
				say("\"I'm not sure I can speak of it here, in this awful place. Old Fedabiblio uses it as a tale to frighten the novices... And I'll admit that it made an impression on me.\"");
				say("\"Vasculio was an Adept who lived outside of the Strictures. He tortured and killed without restraint, using death agony to feed power into his spells.\"");
				say("\"The Council put him to death, but his power had grown beyond even that limitation. They found his grave empty not long after burial... And they say he still wanders the world looking for new victims.\"");
				add("Strictures");
				fallthrough;

			case "Strictures" (remove):
				say("\"The Strictures are the rules that all mages must obey, novice and Adept alike. They address what experimentation can be done, what reagents can be used or sold... things like that.\"");
				say("\"The Strictures are meant to keep mages from abandoning all bonds of civilized behavior in pursuit of knowledge. As thou shouldst know, ",
					var0000,
					", there are some things in the world that would be better unknown.\"");
				fallthrough;

			case "easier" (remove):
				say("\"As I said, ",
					var0000,
					", I acquire rarities. And sometimes those items are... previously owned, shall we say?\"");
				say("\"But Adepts, being the pompous lot they are, fail to see anything other than a magical attack as a threat.\"");
				say("\"Most Adepts resort to simple physical traps to guard their mansions. Of course, there's always the automatons to deal with... But once I know that secret, their home is as good as mine!\"");
				add(["physical traps", "automatons"]);
				fallthrough;

			case "physical traps" (remove):
				say("\"Oh, it could be anything from sliding walls, to fireballs that shoot out of the wall, to secret doors.  And dealing with most of those are easy enough, if thou art careful.\"");
				say("\"The automatons are harder to deal with...\"");
				fallthrough;

			case "automatons" (remove):
				say("\"Those are the constructs that Torrissio makes. They are quite fast and fierce fighters. Definitely not what thou wouldst care to encounter in a dark hallway, I'll tell thee! I still have the scars to prove it...\"");
				fallthrough;

			case "search" (remove):
				say("\"When people hire my services, they know exactly what they need and where it is. Or perhaps I should say that they know whose mansion it is in.\"");
				say("\"From there I must determine how to enter, and when. And then I have to outwit the Adept who wished to keep it hidden from my talents. I have yet to be outdone, I might add.\"");
				fallthrough;

			case "rarities" (remove):
				say("\"I'll admit that that title covers quite a bit... Scrolls, magical apparatus, lab equipment, reagents. Anything that a client thinks is of value -- that's what I mean by rarities.\"");
				UI_push_answers();
				add(["magical apparatus", "client", "change subject"]);
				fallthrough;

			case "magical apparatus" (remove):
				say("\"Wands, crystal balls... things like that.\"");
				say("\"Of course I'll never admit to anything in specific. I value my life too much. Unless I'm actually caught in the act, no one can prove anything... And I stay alive a bit longer. Thou mightest say it's a game of sorts.\"");
				fallthrough;

			case "client" (remove):
				say("\"Oh, no! Ask no more! I guarantee my clients complete secrecy.\"");
				say("\"If I ever forget that promise, dealing with mages, I'll be very dead, very fast. Or at least I hope I'll be dead... There are a few drawbacks to knowing anything about magic, ",
					var0000,
					". All the alternatives to being dead come too readily to mind!\"");
				fallthrough;

			case "information" (remove):
				say("\"Somewhere, within this labyrinth, there are two switches that must be thrown... at the same time, in order to continue to the exit. I do not know where it is exactly, but I'm sure that it will be apparent.\"");
				say("\"Without me to aid thee, thou hast no chance of winning free of this place for all thy prowess. And without thee, I have no hope of surmounting what lies in the next room.\"");
				UI_push_answers();
				add(["next room", "change subject"]);
				fallthrough;

			case "next room" (remove):
				say("\"One of the things I bless about my peculiar line of work is the ability to move silently, ",
					var0000,
					". It may be the only thing that saved my life this time...\"");
				say("\"When I came into this room, I heard some sort of commotion in the next room. When I sneaked into the entrance, all I saw was a mage and a VERY, VERY large monster before I ran back in here.\"");
				say("\"Last time I looked, they were still in there...\"");
				add(["mage", "monster"]);
				fallthrough;

			case "mage" (remove):
				say("\"I did not recognize him. But by the robes, I judged him a mage. I have heard that a few foolhardy mages have attempted to sneak into these tunnels in search of Stoneheart. Few who try ever return to the outside world.\"");
				add("Stoneheart");
				fallthrough;

			case "Stoneheart" (remove):
				say("\"It is forbidden to possess Stoneheart, ",
					var0000,
					", and for good reason. It is the basis for the reagent that fueled all of Vasculio's spells -- and some say it can steal a man's wits. It is very dangerous.\"");
				add("Vasculio");
				fallthrough;

			case "monster" (remove):
				say("\"I... I think it was a... a dragon!\"");
				say("\"Oh, please, ",
					var0000,
					"! Thou must let me join thee!\"");
				say("\"Without mine aid thou canst not hope to escape, and I am no fighter! Without thee I am a dead man!\"");
				fallthrough;

			case "join":
				if (gflags[AVATAR_ESCAPED_FREEDOM]) {
					say("\"No, but thank thee for asking.\"");
				} else {
					remove("join");
					add("leave");
					say("\"Thou and I, we'll do good together!\"");
					STEFANO->add_to_party();
					gflags[STEFANO_HAS_BELONGINGS] = true;
				}
				fallthrough;

			case "leave" (remove):
				if (gflags[BANES_RELEASED]) {
					say("\"But that thing will kill me, ",
						var0000,
						"!\"");
				} else {
					say("\"But thou needest mine aid, ",
						var0000,
						"!\"");
				}
				fallthrough;

			case "bye":
				if (gflags[BANES_RELEASED] && (!gflags[STEFANO_GAVE_TEETH])) {
					say("\"Wait. I almost forgot about this...\"");
					say("\"Found this object when I happened to be passing through one of the manors, if thou knowest what I mean...\"");
					say("\"Let me give this to thee, as a token of my great esteem for thine ability to save my life.\"");
					say("\"It looks to be one of the Serpent Teeth that Mad Erstam used to collect.\"");
					var0007 = Func099B(AVATAR, 0x0001, 0x022F, 0x0000, 0x000E, 0x0000, true);
					var0007 = script Func09A0(0x0005, 0x0002) after 20 ticks {
						nohalt;
						call Func04A8;
					};
					gflags[STEFANO_GAVE_TEETH] = true;
				}
				UI_remove_npc_face0();
				if (STEFANO->get_item_flag(IN_PARTY)) {
					Func097F(STEFANO, "@Pleased to be of service.@", 0x0002);
					Func097F(AVATAR, "@Thanks!@", 0x0000);
				} else {
					Func097F(AVATAR, "@So long!@", 0x0000);
					if (gflags[BANES_RELEASED] && (!DEATH_KNIGHT->get_item_flag(DEAD))) {
						Func097F(STEFANO, "@Please protect me...@", 0x0000);
					} else {
						Func097F(STEFANO, "@'Til we meet again!@", 0x0002);
					}
				}
				abort;
		}
	}
	if (event == SI_PATH_FAILURE) {
		Func097F(STEFANO, "@Eeek! A spider!@", 0x0002);
		Func097F(STEFANO, "@Kill it, Avatar!@", 0x0016);
		abort;
	}
	if (event == PATH_SUCCESS) {
		var000A = AVATAR->find_nearest(0x0313, 0x0003);
		var000B = STEFANO->find_nearest(0x0313, 0x0003);
		if (var000A && var000B) {
			var000C = AVATAR->direction_from(var000A);
			var000D = STEFANO->direction_from(var000B);
			var000E = script AVATAR {
				nohalt;
				wait 5;
				face var000C;
				say "@Now, Stefano!@";
				wait 4;
				actor frame bowing;
				wait 2;
				actor frame standing;
			};
			var000E = script STEFANO {
				nohalt;
				wait 5;
				wait 2;
				face var000D;
				wait 2;
				say "@All right!@";
				actor frame bowing;
				wait 2;
				actor frame standing;
			};
			var000E = script var000A {
				nohalt;
				wait 12;
				call Func0313;
			};
			var000E = script var000B {
				nohalt;
				wait 12;
				call Func0313;
				call Func04A8;
			};
		}
		STEFANO->set_schedule_type(FOLLOW_AVATAR);
	}
	if (event == SCRIPTED) {
		if (gflags[TEMP_FLAG_1]) {
			gflags[TEMP_FLAG_1] = false;
			STEFANO->show_npc_face0(0x0000);
			say("\"We are back in Moonshade! This means that we have won our freedom!\" *\"What a team we made! With thy muscle and mine intellect we showed them who they can and cannot keep in that prison. Thank thee, Avatar.\" *\"I must away now for other duties call. But if thou art ever in need of my talents, do but call and I shall accommodate thee.\"");
			Func097F(STEFANO, "@See thee someday...@", 0x0000);
			Func097F(AVATAR, "@So long, Stefano.@", 0x0005);
			STEFANO->remove_from_party();
			Func086A();
			STEFANO->set_new_schedules([MIDNIGHT, NOON, AFTERNOON, EVENING, NIGHT], [SLEEP, EAT_AT_INN, WANDER, EAT_AT_INN, DANCE], [0x09A7, 0x0778, 0x08C7, 0x0714, 0x099F, 0x078F, 0x08BE, 0x0707, 0x08B6, 0x070C]);
			STEFANO->set_schedule_type(SHY);
			STEFANO->run_schedule();
			abort;
		}
		if (gflags[BANES_RELEASED]) {
			if (DEATH_KNIGHT->get_item_flag(DEAD)) {
				abort;
			}
			var0007 = script Func09A0(0x0005, 0x0002) after (UI_get_random(0x0064) + 0x0032) ticks {
				nohalt;
				call Func04A8;
			};
			if (STEFANO->npc_nearby()) {
				UI_play_music(0x001E, Func09A0(0x0005, 0x0001));
				var0007 = DEATH_KNIGHT->approach_avatar(0x0078, 0x0028);
				if (!var0007) {
					var0007 = AVATAR->get_object_position();
					var0007[0x0001] += 0x000A;
					DEATH_KNIGHT->move_object(var0007);
					UI_sprite_effect(ANIMATION_TELEPORT2, var0007[0x0001], var0007[0x0002], 0x0000, 0x0000, 0x0000, LOOP_ONCE);
					UI_play_sound_effect(0x0082);
				}
				DEATH_KNIGHT->set_alignment(EVIL);
				DEATH_KNIGHT->set_schedule_type(IN_COMBAT);
				DEATH_KNIGHT->set_opponent(STEFANO);
				DEATH_KNIGHT->set_oppressor(STEFANO);
				DEATH_KNIGHT->clear_item_say();
				Func097F(DEATH_KNIGHT, "@Die, Stefano!@", 0x0000);
				STEFANO->clear_item_say();
				Func097F(STEFANO, "@Save me!@", 0x0002);
				STEFANO->set_schedule_type(IN_COMBAT);
				STEFANO->set_attack_mode(FLEE);
			}
		} else {
			var000F = find_nearby(0x00E9, 0x0028, MASK_NONE);
			for (var0012 in var000F with var0010 to var0011) {
				if (var0012->get_item_frame() == 0x0002) {
					var0012->set_item_frame(0x0001);
					var0013 = var0012->get_object_position();
					UI_sprite_effect(ANIMATION_GREEN_BUBBLES, (var0013[0x0001] - 0x0002), (var0013[0x0002] - 0x0002), 0x0000, 0x0000, 0x0000, LOOP_ONCE);
					UI_play_sound_effect(0x0043);
				}
			}
		}
	}
}

extern var Func099F 0x99F (var var0000, var var0001, var var0002);
extern void Func08AE 0x8AE ();
extern void Func09AA 0x9AA ();
extern void Func090E 0x90E (var var0000, var var0001, var var0002, var var0003, var var0004, var var0005, var var0006, var var0007, var var0008);

void Func04A9 object#(0x4A9) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;
	var var0008;
	var var0009;
	var var000A;

	if (event == STARTED_TALKING) {
		TELDRONO->clear_item_say();
		var0000 = Func099F(0x034A, QUALITY_ANY, 0x000F);
		var0001 = Func099F(0x034A, QUALITY_ANY, 0x0008);
		if (var0000 || var0001) {
			if (var0000 && var0001) {
				TELDRONO->item_say("@Die, thief!@");
			} else if (var0000) {
				TELDRONO->item_say("@Thou shalt not steal my bloodspawn!@");
			} else {
				TELDRONO->item_say("@I shan't reveal my secret!@");
			}
			TELDRONO->set_polymorph(0x012E);
			gflags[TELDRONO_IS_CHICKEN] = false;
			gflags[TELDRONO_IS_BEAR] = true;
			TELDRONO->set_schedule_type(IN_COMBAT);
			TELDRONO->set_alignment(CHAOTIC);
			var0002 = TELDRONO->get_object_position();
			UI_sprite_effect(ANIMATION_POOF, (var0002[0x0001] - 0x0001), (var0002[0x0002] - 0x0001), 0x0000, 0x0000, 0x0000, LOOP_ONCE);
			UI_play_sound_effect(0x0021);
		} else {
			TELDRONO->item_say("@Thou shalt not have the reagent!@");
			TELDRONO->set_polymorph(0x01F2);
			gflags[TELDRONO_IS_CHICKEN] = true;
			gflags[TELDRONO_IS_BEAR] = false;
			set_schedule_type(WAIT);
			set_alignment(NEUTRAL);
			var0002 = get_object_position();
			UI_sprite_effect(ANIMATION_POOF, (var0002[0x0001] - 0x0001), (var0002[0x0002] - 0x0001), 0x0000, 0x0000, 0x0000, LOOP_ONCE);
			UI_play_sound_effect(0x0021);
			Func08AE();
		}
	}
	if (event == PATH_SUCCESS) {
		var0003 = TELDRONO->get_object_position() & (QUANTITY_ANY & 0x0006);
		var0004 = var0003->find_nearby(0x0113, 0x0001, MASK_EGG);
		if (var0004) {
			if (var0004->get_item_quality() == 0x0064) {
				item_say("@Thou shalt not have my reagents!@");
				if (gflags[TELDRONO_IS_CHICKEN]) {
					var0005 = script item {
						actor frame raise_2h;
						wait 2;
						actor frame reach_2h;
						wait 2;
						actor frame strike_2h;
						wait 3;
						call Func04A9;
					};
				} else {
					var0005 = script item {
						actor frame bowing;
						wait 2;
						actor frame kneeling;
						wait 3;
						actor frame bowing;
						wait 2;
						call Func04A9;
					};
				}
				var0006 = find_nearest(0x00E9, 0x000A);
				if (var0006) {
					var0006->set_item_frame(0x0001);
					var0002 = var0006->get_object_position();
					UI_sprite_effect(ANIMATION_GREEN_BUBBLES, (var0002[0x0001] - 0x0002), (var0002[0x0002] - 0x0002), 0x0000, 0x0000, 0x0000, LOOP_ONCE);
					UI_play_sound_effect(0x0043);
				}
				AVATAR->set_item_flag(DONT_MOVE);
				TELDRONO->set_schedule_type(WAIT);
			} else {
				var0005 = script AVATAR after 1 ticks {
					call Func04A9;
				};
			}
		}
	}
	// BUG: This should use SI_PATH_FAILURE instead of PATH_FAILURE.
	if (event == PATH_FAILURE) {
		var0006 = find_nearest(0x00E9, 0x0005);
		if (var0006) {
			var0002 = var0006->get_object_position();
			UI_sprite_effect(ANIMATION_TELEPORT, (var0002[0x0001] - 0x0002), (var0002[0x0002] - 0x0002), 0x0000, 0x0000, 0x0000, LOOP_ONCE);
			UI_play_sound_effect(0x0082);
		}
		TELDRONO->remove_npc();
		Func09AA();
	}
	if (event == SCRIPTED) {
		if (get_item_shape() == TELDRONO->get_item_shape()) {
			var0003 = TELDRONO->get_object_position() & (QUANTITY_ANY & 0x0000);
			var0004 = var0003->find_nearby(0x025F, 0x0014, MASK_EGG);
			if (var0004) {
				var0007 = -1;
				var0008 = -1;
				var0009 = -3;
				Func090E(TELDRONO, var0004, var0007, var0008, var0009, Func04A9, TELDRONO->get_npc_object(), PATH_FAILURE, false);
				// BUG: This should use SI_PATH_FAILURE instead of PATH_FAILURE.
				UI_set_path_failure(Func04A9, item, PATH_FAILURE);
			}
		} else {
			Func08AE();
		}
	}
	if (event == DOUBLECLICK) {
		item_say("@Leave me be!@");
	}
	if (event == DEATH) {
		if (gflags[TELDRONO_IS_CHICKEN] || gflags[TELDRONO_IS_BEAR]) {
			var0002 = get_object_position();
			UI_sprite_effect(ANIMATION_POOF, (var0002[0x0001] - 0x0001), (var0002[0x0002] - 0x0001), 0x0000, 0x0000, 0x0000, LOOP_ONCE);
			UI_play_sound_effect(0x0021);
			var0002[0x0001] += 0x0001;
			var0002[0x0002] += 0x0001;
			var000A = UI_create_new_object(0x03D1);
			if (var000A) {
				var000A->set_item_frame(0x0001);
				var0005 = UI_update_last_created(var0002);
			}
		}
		TELDRONO->set_polymorph(0x0191);
		gflags[TELDRONO_IS_CHICKEN] = false;
		gflags[TELDRONO_IS_BEAR] = false;
		set_alignment(NEUTRAL);
		AVATAR->set_schedule_type(FOLLOW_AVATAR);
		Func08AE();
	}
	if (event == BG_PATH_FAILURE) {
		if (gflags[TELDRONO_IS_CHICKEN]) {
			TELDRONO->set_polymorph(0x01F2);
		} else if (gflags[TELDRONO_IS_BEAR]) {
			TELDRONO->set_polymorph(0x012E);
		} else {
			TELDRONO->set_polymorph(0x0191);
		}
	}
}

extern var Func0942 0x942 (var var0000);
extern var Func0954 0x954 ();
extern var Func0953 0x953 ();
extern var Func097D 0x97D (var var0000, var var0001, var var0002, var var0003, var var0004);
extern void Func087A 0x87A ();
extern void Func094F 0x94F (var var0000, var var0001);
extern void Func097F 0x97F (var var0000, var var0001, var var0002);
extern void Func0878 0x878 ();
extern void Func0924 0x924 (var var0000, var var0001);
extern void Func07D1 object#(0x7D1) ();
extern void Func07D2 object#(0x7D2) ();
extern void Func0877 0x877 ();
extern void Func0876 0x876 ();
extern var Func0955 0x955 ();
extern var Func0992 0x992 (var var0000, var var0001, var var0002, var var0003);
extern void Func0879 0x879 ();

void Func04AA object#(0x4AA) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;
	var var0008;
	var var0009;
	var var000A;
	var var000B;
	var var000C;
	var var000D;
	var var000E;
	var var000F;
	var var0010;
	var var0011;
	var var0012;
	var var0013;
	var var0014;
	var var0015;
	var var0016;
	var var0017;
	var var0018;
	var var0019;

	var0000 = Func0942(SHAMINO);
	var0001 = Func0942(IOLO);
	var0002 = Func0942(DUPRE);
	var0003 = Func0954();
	var0004 = UI_is_pc_female();
	var0005 = Func0953();
	var0006 = Func097D(PARTY, 0x0001, 0x0268, QUALITY_ANY, 0x0014);
	var0007 = ZHELKAS->get_item_flag(MET);
	var0008 = ("I am " + var0005) + ".";
	var0009 = "his";
	var000A = "him";
	var000B = "he";
	if (var0004) {
		var0009 = "her";
		var000A = "her";
		var000B = "she";
	}
	if (event == PROXIMITY) {
		var000C = find_nearby(0x0313, 0x000A, MASK_NONE);
		var000D = var000C->get_item_quality();
		if ((var000D == 0x0047) && (gflags[ZHELKAS_OPENED_ENTRANCE] == false)) {
			var000E = var000C->get_item_frame() + 0x0001;
			var000C->set_item_frame(var000E);
			Func087A();
			Func094F(ZHELKAS, "To enter our realm...");
			gflags[ZHELKAS_OPENED_ENTRANCE] = true;
			Func097F(ZHELKAS, "@To seek the Pillars!@", 0x0010);
			Func0878();
			abort;
		}
		if ((var000D == 0x0049) && (gflags[ZHELKAS_OPENED_ENTRANCE] && (!gflags[ZHELKAS_OPENED_EXIT]))) {
			gflags[ZHELKAS_OPENED_EXIT] = true;
			var000E = var000C->get_item_frame() + 0x0001;
			var000C->set_item_frame(var000E);
			Func0924(0x0049, SHAPE_ANY);
			Func094F(ZHELKAS, "To go in Virtue!");
			Func097F(AVATAR, "@May Virtue be with thee!@", 0x0010);
			Func0878();
			var000F = find_nearby(0x0314, 0x001E, MASK_NONE);
			for (var0012 in var000F with var0010 to var0011) {
				var0013 = var0012->get_item_quality();
				if (var0013 == 0x0000) {
					var0014 = var0012->set_item_quality(0x0049);
					var0015 = var0012->get_object_position();
					Func0924(var0012, 0x0001);
				}
			}
			abort;
		}
	}
	if (event == DOUBLECLICK) {
		AVATAR->item_say("@Greetings, fine Gargoyle!@");
		ZHELKAS->Func07D1();
		Func097F(ZHELKAS, "@To say greetings.@", 0x0002);
		if (gflags[ZHELKAS_OPENED_ENTRANCE]) {
			ZHELKAS->set_schedule_type(TALK);
		} else if (ZHELKAS->get_schedule_type() != WAIT) {
			ZHELKAS->set_schedule_type(WAIT);
			ZHELKAS->Func07D2();
			var0014 = script ZHELKAS after 7 ticks {
				nohalt;
				call Func04AA;
			};
		}
	}
	if (event == SCRIPTED) {
		if (item == ZHELKAS->get_npc_object()) {
			event = STARTED_TALKING;
		} else {
			Func087A();
		}
	}
	if (event == STARTED_TALKING) {
		ZHELKAS->run_schedule();
		ZHELKAS->clear_item_say();
		ZHELKAS->show_npc_face0(0x0000);
		if (gflags[ZHELKAS_OPENED_ENTRANCE] && (!gflags[STARTED_TEST_OF_PURITY])) {
			say("\"To have told you to seek the Pillar of Fire. To grasp it and enter the Test of the Ancients.\"");
			say("\"To delay no longer.\"");
			Func097F(ZHELKAS, "@The Pillar!@", 0x0000);
			ZHELKAS->set_schedule_type(SHY);
			abort;
		}
		if (gflags[STARTED_TEST_OF_PURITY]) {
			if (gflags[PASSED_CLONE_IOLO_TEST] && (gflags[PASSED_CLONE_SHAMINO_TEST] && (gflags[PASSED_CLONE_DUPRE_TEST] && (!gflags[GOT_SERPENT_RING])))) {
				add("explain test");
				Func0877();
			} else if (gflags[GOT_SERPENT_RING]) {
				Func0876();
			} else if (!gflags[ZHELKAS_SPOKE_GOBLET]) {
				say("\"To be caught in indecision!\"");
				say("\"To say that you have returned from the Test, as the Dream said that the Hero would.\"");
				say("\"Yet you did not succeed at the Test. You have failed to show Virtue. To have thought that you would have passed all the tests if you were the Hero!\"");
				add(["second chance", "never mind"]);
			} else if (!gflags[BROUGHT_GOBLET_TO_ZHELKAS]) {
				say("\"To ask if you have brought me the Goblet. To know that this shall prove you to be the Hero of the Dream.\"");
				if (Func0955() == true) {
					if (var0006 == true) {
						var0016 = Func0992(0x0001, "@We have brought the Goblet!@", "@I have the Goblet...@", false);
						0x0000->set_conversation_slot();
						say("\"To be true! To apologize most sincerely for doubting you...\"");
						say("\"To keep the Goblet, Hero From Another World. To hope that it might have powers to aid you on your quest.\"");
						Func0877();
						gflags[BROUGHT_GOBLET_TO_ZHELKAS] = true;
					} else {
						var0016 = Func0992(0x0001, "@We do not have the Goblet!@", 0x0000, false);
						0x0000->set_conversation_slot();
						say("\"To wonder if you jest. To say you do not have the Goblet. To be unwilling to deal with you until you have gotten it.\"");
						UI_remove_npc_face0();
						Func097F(ZHELKAS, "@Not until then.@", 0x0002);
						abort;
					}
				} else if (var0006 == true) {
					var0016 = Func0992(0x0001, "@But we do have the Goblet!@", 0x0000, false);
					0x0000->set_conversation_slot();
					say("\"To say that you are confused, but to give you the ring as promised. To say that I am certain that you are the Hero from our dream.\"");
					say("\"To keep the Goblet, Hero From Another World. To hope that it might have powers to aid you on your quest.\"");
					Func0877();
					gflags[BROUGHT_GOBLET_TO_ZHELKAS] = true;
				} else {
					var0016 = Func0992(0x0001, "@We do not have the Goblet!@", 0x0000, false);
					0x0000->set_conversation_slot();
					say("\"To be displeased that you do not have the Goblet. To be unwilling to deal with you until you have gotten it.\"");
					UI_remove_npc_face0();
					Func097F(ZHELKAS, "@Not until then.@", 0x0002);
					abort;
				}
			} else {
				Func0876();
			}
		} else if (gflags[TURNED_DOWN_TEST_OF_PURITY] == true) {
			say("\"To ask if you have reconsidered. The Twin Pillars await the Hero of the Dream.\"");
			if (Func0955() == true) {
				Func0879();
			} else {
				say("\"To waste our precious time! To leave now!\"");
				ZHELKAS->set_schedule_type(WANDER);
				abort;
			}
		} else {
			Func0876();
		}
		converse ("bye") {
			case var0008:
				say("\"To be wary that you might be like others of your kind, who come here to slay my people and steal our treasures.\"");
				say("\"And yet... to wonder if you are the Hero of the Dream.\"");
				if (var0004) {
					say("\"To be female as the Hero was in the dream...\"");
				}
				remove([var0008, "I am the Avatar.", "I am lost..."]);
				add(["others of your kind", "treasures", "dream"]);
				if (!gflags[ZHELKAS_OPENED_ENTRANCE]) {
					add("drawbridge");
				}
				fallthrough;

			case "drawbridge" (remove):
				say("\"To be protection against our enemies. To be lowered and raised by ancient levers.\"");
				say("\"To know that only gargoyles are strong enough to pull the levers!\"");
				fallthrough;

			case "others of your kind" (remove):
				say("\"To say sadly that Men come to do us harm. To not understand why they call us Daemons...\"");
				say("\"To say they are brawny warriors in stout armour. To delight in shedding our blood. To hate us greatly.\"");
				say("\"To regret that we cannot make peace with them.\"");
				add("Daemons");
				fallthrough;

			case "Daemons" (remove):
				say("\"To tell you there is no such thing as a daemon. To be sure that Daemons are creatures from stories, used to frighten young ones.\"");
				say("\"To disbelieve that Men can believe us to be Daemons. To be Gargoyles.\"");
				fallthrough;

			case "treasures" (remove):
				say("\"To say that many Men have come here to steal the wealth of the Lost City.\"");
				say("\"To be willing to share... To be angry that the Men in Armour do not want to share. To want only to kill us.\"");
				say("\"To be as ignorant as they are\tgreedy.\"");
				add(["ignorant", "Lost City"]);
				fallthrough;

			case "ignorant" (remove):
				say("\"To say that these invaders cannot stand the heat of this place! To quickly die.\"");
				say("\"To be amused to see them come again and again, only to die. To survive long enough to vex us with their weapons, before their deaths.\"");
				fallthrough;

			case "Lost City" (remove):
				say("\"To say that several generations of gargoyles have dwelled here. To assure you that this place was old before we came.\"");
				say("\"To look about and know that the people who dwelt here revered serpents. To say that they also suffered a great calamity.\"");
				say("\"To wonder what happened to those who once dwelt here...\"");
				fallthrough;

			case "dream" (remove):
				UI_push_answers();
				say("\"To tell you that our slumber is filled with a single Dream, a vision of a Hero from another world...\"");
				if (var0004) {
					say("\"To say that the Hero is most like you...\"");
				} else {
					say("\"To say that the Hero is a Man, most like you.\"");
				}
				var0016 = Func0992(DUPRE, (("@It must be thee, " + var0005) + "!@"), 0x0000, false);
				if (var0016 != AVATAR) {
					if (UI_get_array_size(UI_get_party_list()) > 0x0002) {
						var0017 = var0016;
						while (var0017 == var0016) {
							var0017 = Func0992(0x0001, 0x0000, 0x0000, false);
						}
						var0017 = Func0992(var0017, "@The Avatar is the Hero... No doubt about it!@", 0x0000, false);
					}
					0x0000->set_conversation_slot();
				}
				say("\"To wonder if you are the Hero.\"");
				add(["I am not the Hero", "tell me more"]);
				fallthrough;

			case "I am not the Hero":
				say("\"To go your way! To leave my people to their slumbers, and the fate which grasps them in the night.\"");
				say("\"To hope the Hero comes soon...\"");
				Func097F(ZHELKAS, "@Soon...@", 0x0000);
				ZHELKAS->set_schedule_type(WANDER);
				abort;

			case "tell me more":
				remove(["I am not the Hero", "tell me more"]);
				say("\"To say that the Dream tells of great disasters -- storms that disintegrate with their bolts, diseases which kill the meek, and a spectral Trinity which spreads Evil.\"");
				say("\"To declare that a Hero shall come from beyond this world. To have seen that this warrior shall slay the Trinity, and triumph through virtue.\"");
				say("\"To be required to give this Hero an ancient artifact, which will provide guidance to ",
					var000A,
					".\"");
				say("\"To know the Hero by this sign -- ",
					var000B,
					" shall submit to the Test of Purity, and be shown worthy by returning in virtue.\"");
				add(["Test of Purity", "ancient artifact", "storms", "diseases", "Evil Trinity", "nothing"]);
				fallthrough;

			case "Test of Purity" (remove):
				say("\"To tell you that this city is old. To have a long history before the gargoyles found it.\"");
				say("\"To know little about the former inhabitants, but to believe that they were not Evil. To have visited their sacred places amid the ruins.\"");
				say("\"To know that the Dream says that the Hero shall go to the Place of the Twin Pillars, where ",
					var000B,
					" must face the ordeal of the ancients.\"");
				if (UI_get_array_size(UI_get_party_list()) > 0x0001) {
					say("\"To assure your companions that no harm shall come to you or to them during the Test. To believe this myself.\"");
				}
				add(["Twin Pillars"]);
				fallthrough;

			case "Twin Pillars" (remove):
				say("\"To have visited this place within the Underground City. To be in the north-eastern chambers of the city.\"");
				say("\"To have seen two stone pillars of great size, in the semblance of serpents.\"");
				say("\"To say that the Pillar of Ice is broken. To say that the Pillar of Fire yet stands.\"");
				say("\"To have dreamed of the Hero grasping the fiery serpent with ",
					var0009,
					" hands, and thus commencing the Test.\"");
				fallthrough;

			case "ancient artifact" (remove):
				say("\"To have a great treasure among the Gargoyles, an artifact discovered among the ruins. To not know its powers.\"");
				say("\"To have seen by the Dream, that we must entrust this device to the Hero who shall come.\"");
				say("\"To say that this Ring of the Serpent shall be the means of guiding the Hero in his struggle against the Imbalance.\"");
				fallthrough;

			case "storms" (remove):
				say("\"To have detected a change in the structure of the world, by means of an Imbalance of Essences.\"");
				say("\"To know this is the reason why great storms now howl across the face of this world, hurling their lightnings down.\"");
				say("\"To know this is not all -- to become worse with time, until the End of the World. Unless the Hero prevails.\"");
				fallthrough;

			case "diseases" (remove):
				say("\"To weep for the creatures that succumb most easily to the sickness of this world.\"");
				say("\"To have dreamed of dying infants, of minds numbed or gone insane, and of beings which simply waste away due to the Imbalance.\"");
				say("\"To despair for my people, for they are lost in slumbers and the Dream. Only I remain.\"");
				fallthrough;

			case "Evil Trinity" (remove):
				say("\"To have seen the Three Ghosts stalking the land, through the Dream.\"");
				say("\"To declare that one has the Evil Glow. One has the haunting eyes that mock. One has the Serpent's Head.\"");
				say("\"To know that this is not yet, but shall soon be. These are the Enemies of the Hero.\"");
				fallthrough;

			case "nothing" (remove):
				say("\"To delay my purpose no longer...\"");
				say("\"To ask if you are willing to take the Test. To prove that you are the Hero of which we dream.\"");
				if (Func0955() == true) {
					Func0879();
				} else {
					say("\"To be sad... To know that we are fading rapidly. To hope that the Hero comes soon.\"");
					Func097F(ZHELKAS, "@Depart...@", 0x0000);
					ZHELKAS->set_schedule_type(WANDER);
					abort;
				}
				fallthrough;

			case "I am the Avatar.":
				remove([var0008, "I am the Avatar.", "I am lost..."]);
				say("\"To not have heard of any Avatar...\"");
				say("\"To be wary that you are not like other Men, and to hope that you are not here to steal our treasures.\"");
				var0016 = Func0992(IOLO, "@The Avatar is the Champion of Virtue, dear gargoyle.@", 0x0000, false);
				if (var0016 != AVATAR) {
					0x0000->set_conversation_slot();
					say("\"To be possible? To be the Hero that we have dreamed of?\"");
				} else {
					say("\"To seem to recognize you, as if from the vision of my slumbers... To wonder if you are the Hero of the Dream...\"");
				}
				gflags[SAID_AVATAR_TO_ZHELKAS] = true;
				add(["others of your kind", "treasures", "dream"]);
				fallthrough;

			case "I am lost...":
				say("\"To think that you wish to do us harm, like all of your kind. To think that you are here to steal our treasures. To demand that you leave now!\"");
				Func097F(ZHELKAS, "@Leave!@", 0x0000);
				ZHELKAS->set_schedule_type(WANDER);
				abort;

			case "dreaming sickness":
				say("\"To be concerned. To have an imbalance in the land. To have affected the gargoyles and thrown them into helpless dreaming.\" *\"To be the only one that remains awake to fight back the trolls...\"");
				remove("dreaming sickness");
				add("trolls");
				fallthrough;

			case "trolls":
				say("\"To be uncivilized creatures! To enjoy killing... To have been plaguing us for generations.\" *\"To be advised to be cautious if you hear drums.\"");
				remove("trolls");
				add("drums");
				fallthrough;

			case "drums":
				say("\"To be thought of as the trolls' communication. To be trouble for all within the sound of the drums.\"");
				remove("drums");
				fallthrough;

			case "ring":
				say("\"To be a relic of the humans who once dwelt here... To have dreamed that it is a thing of great power.\" *\"To have seen in the dream that you will receive great assistance from the ring.\"");
				remove("ring");
				add("assistance");
				fallthrough;

			case "assistance":
				say("\"To have been unclear. To have only seen two snakes fighting... To know that the ring is important in the battle. To know nothing else.\"");
				remove("assistance");
				fallthrough;

			case "Serpent Staff":
				say("\"To have once had the Serpent Staff. To have been taken by the troll king.\"");
				remove("Serpent Staff");
				add("troll king");
				fallthrough;

			case "troll king" (remove):
				say("\"To be thinking that the staff will bring the trolls the power to destroy the gargoyles. To be certain that you will have to kill the troll king to reclaim the staff.\" *\"To regret that the dreamers must remain guarded. To wish to go with you...\"");
				fallthrough;

			case "information" (remove):
				say("\"To have little to tell you...\"");
				say("\"To only say that the Imbalance is growing worse. To fear that there will be no gargoyles left undreaming soon.\"");
				fallthrough;

			case "aid" (remove):
				say("\"To be fighting the dreaming. To regret that there is no aid to give as long as the Imbalance exists!\"");
				fallthrough;

			case "second chance" (remove):
				ZHELKAS->set_npc_id(0x0001);
				say("\"To need one last task from you. To be without doubt. To be done before giving thee the artifact.\"");
				var0016 = Func0992(SHAMINO, "@The Avatar took thy test willingly! Nothing was said about passing all the tests!@", 0x0000, false);
				if (var0016 != AVATAR) {
					0x0000->set_conversation_slot();
					say("\"To be sure that your friends are hasty in your behalf.\"");
				}
				say("\"To be unwilling to allow the ring to fall into the wrong hands. To say that the Dream warns of the deceitfulness of the Spectral Trinity.\"");
				say("\"To set you this test: To show Virtue by risking your life to enter the Conjury of the Ancients, and obtain the Goblet of Replenishing Water.\"");
				gflags[ZHELKAS_SPOKE_GOBLET] = true;
				add(["goblet", "Conjury"]);
				Func0878();
				fallthrough;

			case "Conjury" (remove):
				say("\"To have been a mighty hall within the city of the Ancients. To be recognized by the tiles of gold and black which floor the chamber. To be in the northern chambers of the city.\"");
				say("\"To keep its secrets well guarded. To have slain all of our warriors who entered.\"");
				fallthrough;

			case "goblet" (remove):
				say("\"To have listened to the dying speech of one explorer, and have heard of a Magic Goblet which lies in this room.\"");
				say("\"To believe that only the noblest Hero could retrieve such an object.\"");
				fallthrough;

			case "never mind" (remove):
				say("\"To refuse to give you the Ring of the Serpent. To ask that you submit further proof of your Virtue.\"");
				Func097F(ZHELKAS, "@Proof!@", 0x0000);
				Func0878();
				abort;

			case "leave Furnace" (remove):
				var0018 = ZHELKAS->find_nearby(0x0313, 0x0014, MASK_NONE);
				if (var0018->get_item_quality() == 0x0049) {
					say("\"To open the brass gate, that you may gain the surface.\"");
					Func097F(ZHELKAS, "@To wait.@", 0x0000);
					ZHELKAS->set_new_schedules(MIDNIGHT, PATROL, ZHELKAS->get_object_position());
					ZHELKAS->run_schedule();
				} else {
					say("\"To know that the only exit is at the brass gate at where we first met. To know that Men are too weak to pull the levers to open it.\"");
					say("\"To go now to the brass gate, Hero. To meet you there and\tto let you return to the surface.\"");
					Func097F(ZHELKAS, "@To meet you there...@", 0x0000);
					Func097F(AVATAR, "@See thee at the gate...@", 0x0000);
					var0019 = [0x05C4, 0x09B3];
					ZHELKAS->set_new_schedules(MIDNIGHT, STANDTHERE, [var0019]);
					ZHELKAS->run_schedule();
					abort;
				}
				fallthrough;

			case "explain test" (remove):
				say("\"To reveal that the emotional pleas for you to flee this dying world were a test of your Logic. As all worlds are connected, it would have done you no good to flee.\"");
				say("\"To commend you for your Ethicality when faced with the coercion of others. To be heartened that you did not seek to benefit from their servitude.\"");
				say("\"To see that you are the Hero, for you are Virtuous and able to complete a task -- no matter how tedious. To be relieved that you have come at last...\"");
				gflags[ZHELKAS_EXPLAINED_TEST] = true;
				fallthrough;

			case "bye":
				if (ZHELKAS->get_npc_id() == 0x0001) {
					ZHELKAS->set_npc_id(0x0000);
					say("\"To give me your answer -- will you bring me the Goblet of the Conjury?\"");
					if (Func0955()) {
						say("\"To have nothing to fear, if you are the Hero. To meditate to give you strength.\"");
						Func097F(ZHELKAS, "@To be strong!@", 0x0000);
					} else {
						say("\"To know that time is short. To wish that the true Hero shall come soon.\"");
						Func097F(ZHELKAS, "@Soon...@", 0x0000);
					}
					ZHELKAS->set_schedule_type(SHY);
					abort;
				}
				UI_remove_npc_face0();
				Func097F(AVATAR, "@Well met!@", 0x0000);
				Func097F(ZHELKAS, "@To wish you luck!@", 0x0002);
				break;

		}
	}
}

void Func04AB object#(0x4AB) () {
	if (event == DOUBLECLICK) {
		item_say("@Save us, stranger!@");
	}
}

void Func04AC object#(0x4AC) () {
	var var0000;

	if (event == DOUBLECLICK) {
		if (SEX_02->get_schedule_type() == DANCE) {
			item_say("@Later...@");
		} else {
			item_say("@Not the left button!@");
		}
	}
	if (event == PROXIMITY) {
		var0000 = "@Thou art so manly!@" & ("@Kiss me!@" & ("@Let us do it again...@" & ("@Come closer...@" & ("@Oh, Shamino!@" & "@I am overcome...@"))));
		item_say(var0000[UI_get_random(UI_get_array_size(var0000))]);
	}
}

void Func04AD object#(0x4AD) () {
	if (event == DOUBLECLICK) {
		item_say("@Please free me...@");
	}
}

void Func04AE object#(0x4AE) () {
	if (event == DOUBLECLICK) {
		item_say("@Thy friend lies...@");
	}
}

void Func04AF object#(0x4AF) () {
	if (event == DOUBLECLICK) {
		item_say("@Spare us!@");
	}
}

extern void Func097F 0x97F (var var0000, var var0001, var var0002);
extern void Func09AD 0x9AD (var var0000);

void Func04B0 object#(0x4B0) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;

	if (event == DOUBLECLICK) {
		THIEF1->item_say("@Water, please!@");
	}
	if (event == STARTED_TALKING) {
		THIEF1->set_schedule_type(TEND_SHOP);
		THIEF1->item_say("@Water, please!@");
		var0000 = script THIEF1 after 80 ticks {
			nohalt;
			call Func04B0;
		};
	}
	if (event == STARTED_TALKING) {
		var0001 = UI_die_roll(0x0001, 0x0003);
		var0002 = ["Give me some water!", "Water! I'm thirsty!", "I must have water!"];
		var0003 = var0002[var0001];
		THIEF1->item_say(var0003);
	}
	if (event == SCRIPTED) {
		var0004 = find_nearby(SHAPE_ANY, 0x0028, MASK_NPC2);
		for (var0007 in var0004 with var0005 to var0006) {
			if (!var0007->get_item_flag(IN_PARTY)) {
				var0007->clear_item_flag(ASLEEP);
				var0007->clear_item_say();
				Func097F(var0007, "@Water!@", 0x0000);
				Func09AD(var0007);
			}
		}
	}
}

void Func04B1 object#(0x4B1) () {
	var var0000;
	var var0001;
	var var0002;

	if (event == DOUBLECLICK) {
		THIEF2->item_say("@I need water!@");
	}
	if ((event == STARTED_TALKING) || (event == PROXIMITY)) {
		var0000 = UI_die_roll(0x0001, 0x0003);
		var0001 = ["Water! Please!", "I beseech thee!", "My throat is so dry..."];
		var0002 = var0001[var0000];
		THIEF2->item_say(var0002);
		THIEF2->set_schedule_type(TEND_SHOP);
	}
}

extern var Func0954 0x954 ();
extern var Func0953 0x953 ();
extern var Func0955 0x955 ();
extern void Func0814 0x814 ();
extern var Func09A0 0x9A0 (var var0000, var var0001);
extern void Func09AA 0x9AA ();
extern void Func07F7 object#(0x7F7) ();

void Func04B2 object#(0x4B2) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;
	var var0008;
	var var0009;
	var var000A;

	var0000 = Func0954();
	var0001 = UI_is_pc_female();
	var0002 = Func0953();
	var0003 = false;
	if (event == STARTED_TALKING) {
		AVATAR->clear_item_flag(DONT_MOVE);
		var0004 = AVATAR->find_nearby(0x0178, 0x0019, MASK_NONE);
		if (var0004) {
			var0005 = var0004->get_object_position();
			var0006 = UI_create_new_object(0x010E);
			if (var0006) {
				var0004->remove_item();
				var0006->set_item_frame(0x0016);
				var0007 = UI_update_last_created(var0005);
			}
		}
		CLONE_IOLO->run_schedule();
		CLONE_IOLO->set_schedule_type(WAIT);
		CLONE_IOLO->show_npc_face0(0x0000);
		say("\"Thank the heavens I have found thee! Thou didst disappear...\"");
		say("\"When the Guardian appeared, we feared thou wert taken. Thou must hurry, I have found a way for thee to return home!\"");
		converse (["disappear", "Guardian", "return home"]) {
			case "disappear":
				say("\"One moment thou wert standing between the pillars... The next, thou wert gone!\" *\"That fiend Zhelkas laughed and said that the land was well rid of thee. Dupre tried to slay him, but he was no match for the gargoyle's strength. And then the Guardian came...\"");
				remove("disappear");
				add("no match");
				fallthrough;

			case "no match":
				say("\"Dupre fought valiantly, Avatar. But Zhelkas threw him aside and ran into the caverns.\" *\"I heard one of the sliding doors open just before the drums started.\"");
				remove("no match");
				add(["sliding doors", "drums"]);
				fallthrough;

			case "sliding doors":
				say("\"The drawbridge, Avatar! They were the only thing standing between us and the trolls! Zhelkas must have let them down...\" *\"We must flee, while there is still time!\"");
				remove("sliding doors");
				fallthrough;

			case "drums":
				say("\"Zhelkas said that the drums were a sign that the trolls were on the move.\" *\"We must escape, Avatar, the drums are growing louder!\"");
				say("\"Wilt thou flee with thine old friend Iolo?\"");
				if (Func0955() == false) {
					if (var0003 == false) {
						say("\"Thou wilt reconsider when thou dost hear what the Guardian said...\"");
					} else {
						say("\"Zhelkas said that the land would be better off without thee. The Guardian said that the end is inevitable. Why stay when we shall all die?\"");
					}
					gflags[AVATAR_DENIED_LIFE] = true;
					if (gflags[AVATAR_DENIED_LIFE] && (gflags[AVATAR_DENIED_FAMILY] && gflags[AVATAR_DENIED_HOME])) {
						Func0814();
						gflags[PASSED_CLONE_IOLO_TEST] = true;
						abort;
					}
				} else {
					say("\"Follow me through the gate, Avatar! Thou wilt soon be home...\"");
					UI_remove_npc_face0();
					AVATAR->set_item_flag(DONT_MOVE);
					var0008 = AVATAR->find_nearby(0x0360, 0x0019, MASK_NONE);
					if (var0008) {
						var0005 = var0008->get_object_position();
						var0005[0x0001] -= 0x0001;
						var0005[0x0002] += 0x0001;
						AVATAR->si_path_run_usecode(var0005, PATH_SUCCESS, var0008, Func04B2, true);
						var0009 = Func09A0(0x0000, 0x0001);
						var0005[0x0001] -= 0x0002;
						CLONE_IOLO->si_path_run_usecode(var0005, PATH_FAILURE, var0009, Func04B2, false);
					} else {
						AVATAR->clear_item_flag(DONT_MOVE);
					}
					abort;
				}
				remove("drums");
				fallthrough;

			case "Guardian":
				say("\"The Guardian spoke to us after thou didst disappear.\"");
				say("\"The Guardian said that he hath grown tired of the game here on Serpent Isle. The end is inevitable now...\"");
				say("\"The Guardian said to tell thee that he was changing the venue...\"");
				var0003 = true;
				remove("Guardian");
				add(["inevitable", "venue"]);
				fallthrough;

			case "inevitable":
				say("\"The Guardian said that Balance could never be restored now. He said that the land will soon destroy itself... And us with it.\"");
				remove("inevitable");
				add("destroy itself");
				fallthrough;

			case "destroy itself":
				say("\"Without Balance, the earthquakes and storms will continue until there is not one rock upon another. Soon the seas will swallow all that remains of the land.\"");
				say("\"There is nothing that thou canst do here, Avatar! We will be crushed and dragged beneath the waves if we stay!\"");
				remove("destroy itself");
				fallthrough;

			case "venue":
				say("\"The Guardian said that he would await thee on Earth, Avatar! Thine home...\" *\"He said he was going to unleash horrible maladies upon thy people.\"");
				remove("venue");
				add("maladies");
				fallthrough;

			case "maladies":
				say("\"The Guardian said he would send vile, lingering plagues to all the leaders of thy land. Then he would set minions in their places to destroy all that thou dost hold dear.\" *\"The Guardian even threatened thy family...\"");
				remove("maladies");
				add("family");
				fallthrough;

			case "family" (remove):
				say("\"The Guardian told us to tell thee that it would be of no great matter to find out who all thy friends and family were, Avatar. He said that we were to tell thee that he had special plans for them.\"");
				say("\"Wilt thou follow me? I can help thee escape to save those that thou lovest.\"");
				if (Func0955() == false) {
					say("\"Wilt thou allow the Guardian to slay thy friends as his minions slew poor Spark's father? How canst thou consider staying in a doomed land when thy family is in danger?\"");
					gflags[AVATAR_DENIED_FAMILY] = true;
					if (gflags[AVATAR_DENIED_LIFE] && (gflags[AVATAR_DENIED_FAMILY] && gflags[AVATAR_DENIED_HOME])) {
						gflags[PASSED_CLONE_IOLO_TEST] = true;
						Func0814();
						abort;
					}
				} else {
					say("\"Follow me through the gate, Avatar! Thou wilt soon be home...\"");
					UI_remove_npc_face0();
					AVATAR->set_item_flag(DONT_MOVE);
					var0008 = AVATAR->find_nearby(0x0360, 0x0019, MASK_NONE);
					if (var0008) {
						var0005 = var0008->get_object_position();
						var0005[0x0001] -= 0x0001;
						var0005[0x0002] += 0x0001;
						AVATAR->si_path_run_usecode(var0005, PATH_SUCCESS, var0008, Func04B2, true);
						var0009 = Func09A0(0x0000, 0x0001);
						var0005[0x0001] -= 0x0002;
						CLONE_IOLO->si_path_run_usecode(var0005, PATH_FAILURE, var0009, Func04B2, false);
					} else {
						AVATAR->clear_item_flag(DONT_MOVE);
					}
					abort;
				}
				fallthrough;

			case "return home":
				say("\"When the Guardian disappeared, we began searching for thee. The Guardian's interference into this place hath opened a gate... To thine home, I think.\"");
				remove("return home");
				add("gate");
				fallthrough;

			case "gate":
				say("\"It is much like the Moongate that brought thee to Britannia the last time. Shamino thought perhaps the Guardian's passage had not fully closed.\" *\"I do not think it is a trap, Avatar! I do not think the Guardian knows that the gate here still exists...\"");
				remove("gate");
				add("trap");
				fallthrough;

			case "trap" (remove):
				say("\"Why would the Guardian go to such lengths, Avatar? He already has thee trapped here... In a land he says will soon rend its heart out.\"");
				say("\"Wilt thou come with me now? I am sure that thou canst return home at last.\"");
				if (Func0955() == false) {
					say("\"Reconsider, Avatar! Thou couldst spend the rest of thy life waiting for another chance to return to thine home and family...\"");
					gflags[AVATAR_DENIED_HOME] = true;
					if (gflags[AVATAR_DENIED_LIFE] && (gflags[AVATAR_DENIED_FAMILY] && gflags[AVATAR_DENIED_HOME])) {
						Func0814();
						gflags[PASSED_CLONE_IOLO_TEST] = true;
						abort;
					}
				} else {
					say("\"Follow me through the gate, Avatar! Thou wilt soon be home...\"");
					UI_remove_npc_face0();
					AVATAR->set_item_flag(DONT_MOVE);
					var0008 = AVATAR->find_nearby(0x0360, 0x0019, MASK_NONE);
					if (var0008) {
						var0005 = var0008->get_object_position();
						var0005[0x0001] -= 0x0001;
						var0005[0x0002] += 0x0001;
						AVATAR->si_path_run_usecode(var0005, PATH_SUCCESS, var0008, Func04B2, true);
						var0009 = Func09A0(0x0000, 0x0001);
						var0005[0x0001] -= 0x0002;
						CLONE_IOLO->si_path_run_usecode(var0005, PATH_FAILURE, var0009, Func04B2, false);
					} else {
						AVATAR->clear_item_flag(DONT_MOVE);
					}
					abort;
				}

		}
	}
	if (event == SI_PATH_FAILURE) {
		var000A = get_item_shape();
		if (var000A == 0x0360) {
			event = PATH_SUCCESS;
		} else if (var000A == 0x01D1) {
			event = SI_PATH_SUCCESS;
		} else {
			abort;
		}
	}
	if (event == PATH_SUCCESS) {
		var0008 = AVATAR->find_nearby(0x0360, 0x000A, MASK_NONE);
		Func09AA();
		var0005 = CLONE_IOLO->get_object_position();
		UI_sprite_effect(ANIMATION_TELEPORT2, var0005[0x0001], var0005[0x0002], 0x0000, 0x0000, 0x0000, LOOP_ONCE);
		CLONE_IOLO->remove_npc();
		var0005 = AVATAR->get_object_position();
		UI_sprite_effect(ANIMATION_TELEPORT2, var0005[0x0001], var0005[0x0002], 0x0000, 0x0000, 0x0000, LOOP_ONCE);
		AVATAR->set_polymorph(0x00EF);
		var0007 = script var0008 after 20 ticks {
			call Func07F7;
			continue;
			say "@What the...?@";
		};
		abort;
	}
	if (event == SI_PATH_SUCCESS) {
		var0005 = CLONE_IOLO->get_object_position();
		UI_sprite_effect(ANIMATION_TELEPORT2, var0005[0x0001], var0005[0x0002], 0x0000, 0x0000, 0x0000, LOOP_ONCE);
		CLONE_IOLO->remove_npc();
		var0007 = script AVATAR after 20 ticks {
			nohalt;
			call Func07F7;
		};
		abort;
	}
}

extern var Func0954 0x954 ();
extern var Func0953 0x953 ();
extern void Func07D1 object#(0x7D1) ();
extern void Func097F 0x97F (var var0000, var var0001, var var0002);
extern var Func09A0 0x9A0 (var var0000, var var0001);
extern var Func0955 0x955 ();
extern void Func09AC 0x9AC (var var0000, var var0001, var var0002, var var0003);
extern void Func07F7 object#(0x7F7) ();
extern void Func072A object#(0x72A) ();
extern void Func061E object#(0x61E) ();

void Func04B3 object#(0x4B3) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;
	var var0008;
	var var0009;
	var var000A;
	var var000B;
	var var000C;
	var var000D;
	var var000E;
	var var000F;
	var var0010;
	var var0011;
	var var0012;
	var var0013;
	var var0014;
	var var0015;

	var0000 = Func0954();
	var0001 = UI_is_pc_female();
	var0002 = Func0953();
	if (event == PROXIMITY) {
		var0003 = "@I like this place!@" & ("@Pleasure me, woman!@" & ("@Dance, dance, dance!@" & ("@Now!@" & ("@Come to me!@" & "@Thou art beautiful...@"))));
		item_say(var0003[UI_get_random(UI_get_array_size(var0003))]);
	}
	if (event == DOUBLECLICK) {
		AVATAR->item_say("@Old friend...@");
		CLONE_SHAMINO->Func07D1();
		Func097F(CLONE_SHAMINO, "@What dost thou wish?@", 0x0002);
		CLONE_SHAMINO->set_schedule_type(TALK);
	}
	if (event == STARTED_TALKING) {
		CLONE_SHAMINO->clear_item_say();
		if (AVATAR->get_item_flag(DONT_MOVE)) {
			var0004 = Func09A0(0x0000, 0x0001);
			var0005 = script var0004 after 2 ticks {
				nohalt;
				call Func061E;
			};
			AVATAR->clear_item_flag(DONT_MOVE);
			var0006 = AVATAR->find_nearby(0x010E, 0x001E, MASK_NONE);
			if (var0006) {
				var0007 = var0006->get_object_position();
				var0008 = UI_create_new_object(0x0178);
				if (var0008) {
					var0006->remove_item();
					var0008->set_item_frame(0x0016);
					var0005 = UI_update_last_created(var0007);
				}
			}
		}
		CLONE_SHAMINO->set_schedule_type(WAIT);
		SHAMINO->show_npc_face0(0x0000);
		say("\"We feared for thee when thou didst disappear from between the pillars. While searching, I became trapped here. I cannot seem to find the way out. Though I suspect that those buttons on the wall might be part of the answer.\"");
		converse (["disappear", "trapped", "buttons", "bye"]) {
			case "bye":
				CLONE_SHAMINO->run_schedule();
				Func097F(AVATAR, "@Thanks...@", 0x0000);
				Func097F(CLONE_SHAMINO, "@Try the left button!@", 0x0002);
				abort;

			case "disappear":
				say("\"Thou didst examine the fiery pillar, as Zhelkas instructed thee... And then thou wert gone!\"");
				say("\"I think the Gargoyle hath tricked us, Avatar. Never trust their type...\"");
				remove("disappear");
				add("tricked");
				fallthrough;

			case "tricked":
				say("\"When we sought to question him about thy disappearance, he was nowhere to be found. So we divided to look for thee...\"");
				say("\"I became confused when trying to return to the pillars. And here I am... With all these lovely people.\"");
				remove("tricked");
				add("people");
				fallthrough;

			case "people":
				say("\"They seem to be trapped here as well.\"");
				say("\"They have been trying to discourage me from using the button on the left... but there are powerful rewards for pressing that button!\"");
				remove("people");
				add("rewards");
				fallthrough;

			case "rewards":
				say("\"Well, these people seem to have been here a very long time. They are... lonely... for company.\"");
				say("\"There is much that we could do to make them feel less lonely, Avatar, if thou dost know what I mean...\"");
				remove("rewards");
				fallthrough;

			case "trapped":
				say("\"Thou canst see for thyself... There is no way out of here. I can find no concealed doors.\"");
				say("\"It is only reasonable that these buttons hold the way out. Though they also hold much more...\"");
				remove("trapped");
				add("what else");
				fallthrough;

			case "what else":
				say("\"Apparently the buttons also control the doors to the private chambers.\"");
				say("\"And also the private passions of these people! This is such fun, Avatar.\"");
				remove("what else");
				add("private chambers");
				fallthrough;

			case "private chambers" (remove):
				say("\"I can show thee, if thou wouldst like... Or thou canst press the button on the left post and see for thyself.\"");
				say("\"Wouldst thou like me to do it?\"");
				if (Func0955() == true) {
					UI_remove_npc_face0();
					Func097F(CLONE_SHAMINO, "@Watch this!@", 0x0000);
					gflags[CLONE_SHAMINO_PRESSED_SEX_BUTTON] = true;
					var0009 = AVATAR->find_nearby(0x0314, 0x0014, MASK_NONE);
					for (var000C in var0009 with var000A to var000B) {
						var000D = var000C->get_item_quality();
						if (var000D == 0x0017) {
							UI_play_music(0x001C, Func09A0(0x0005, 0x0001));
							var000E = CLONE_SHAMINO->get_distance(var000C);
							var0007 = var000C->get_object_position();
							var0007[0x0001] += 0x0001;
							CLONE_SHAMINO->set_npc_id(0x0001);
							CLONE_SHAMINO->si_path_run_usecode(var0007, SI_PATH_SUCCESS, CLONE_SHAMINO->get_npc_object(), Func04B3, true);
						}
					}
					abort;
				}
				say("\"Perhaps later, when thou art more relaxed, eh?\"");
				fallthrough;

			case "buttons":
				say("\"There are two buttons on the posts behind me.\"");
				say("\"When I went to press the one on the left, these comely folks begged me not to.\"");
				remove("buttons");
				add("begged");
				fallthrough;

			case "begged":
				say("\"Yes, begged. But they would not explain, and I was certain they were hiding something from me...\"");
				say("\"What could I do?\"");
				say("\"I pressed the button on the left... And made a rather fascinating discovery.\"");
				remove("begged");
				add("discovery");
				fallthrough;

			case "discovery":
				say("\"I found out how very lonely certain of these folks have been -- particularly the women...\"");
				say("\"They have been very convincing.\"");
				say("\"Press the button, and thou canst see for thyself!\"");
				remove("discovery");
		}
	}
	if (event == SCRIPTED) {
		if (gflags[CLONE_SHAMINO_PRESSED_SEX_BUTTON]) {
			SHAMINO->show_npc_face0(0x0000);
			say("\"See, Avatar? When I press this button, the women become so friendly towards me...\"");
			say("\"Now I and one of my new friends shall go to a private chamber for some socializing... if thou knowest what I mean...\"");
			say("\"I do not think I'll be back for quite a while, Avatar. Thou shalt have to find the way out thyself.\"");
			say("\"If thou wishest to...\"");
			UI_remove_npc_face0();
			var000F = CLONE_SHAMINO->find_nearby(0x028C, 0x001E, MASK_NPC);
			if (var000F) {
				Func097F(CLONE_SHAMINO, "@I think 'tis THY turn...@", 0x0001);
				var000F->set_schedule_type(WAIT);
				SEX_02->clear_item_say();
				Func097F(SEX_02, "@Yes, Shamino...@", 0x0002);
				var0006 = CLONE_SHAMINO->find_nearby(0x0178, 0x000A, MASK_NONE);
				if (var0006) {
					var0007 = var0006->get_object_position();
					CLONE_SHAMINO->set_npc_id(0x0000);
					CLONE_SHAMINO->si_path_run_usecode([(var0007[0x0001] + 0x0001), var0007[0x0002], var0007[0x0003]], PATH_SUCCESS, item, Func04B3, true);
					SEX_02->si_path_run_usecode([(var0007[0x0001] + 0x0001), (var0007[0x0002] + 0x0002), var0007[0x0003]], PATH_SUCCESS, item, Func04B3, true);
				}
			}
			Func097F(AVATAR, "@Hey, come back!@", 0x0003);
			gflags[CLONE_SHAMINO_PRESSED_SEX_BUTTON] = false;
			abort;
		}
		SHAMINO->show_npc_face0(0x0000);
		say("\"See, their desire to please thee hath clouded their minds...\"");
		say("\"Open the door to their private chambers and let them show thee how much they'd like thee to stay...\"");
		say("\"They can be... very... persuasive.\"");
		UI_remove_npc_face0();
		abort;
	}
	if (event == SI_PATH_FAILURE) {
		var0010 = get_item_shape();
		if (var0010 == 0x0378) {
			event = DEATH;
		}
		if ((var0010 == 0x02D1) && (gflags[REACHED_CLONE_SHAMINO_TEST] == true)) {
			event = DEATH;
		}
		if ((var0010 == 0x01E7) && (CLONE_SHAMINO->get_npc_id() == 0x0001)) {
			event = SI_PATH_SUCCESS;
		}
		if ((var0010 == 0x01E7) && (CLONE_SHAMINO->get_npc_id() == 0x0000)) {
			event = PATH_SUCCESS;
		}
		if (var0010 == 0x028C) {
			event = PATH_SUCCESS;
		}
	}
	if (event == SI_PATH_SUCCESS) {
		var0005 = script CLONE_SHAMINO {
			call Func072A;
		};
		abort;
	}
	if (event == PATH_SUCCESS) {
		if (gflags[REACHED_CLONE_SHAMINO_TEST]) {
			var0011 = CLONE_SHAMINO->get_object_position();
			var0012 = SEX_02->get_object_position();
			Func09AC(CLONE_SHAMINO, 0x001C, 0x066C, DANCE);
			Func09AC(SEX_02, 0x0018, 0x066C, DANCE);
			UI_sprite_effect(ANIMATION_TELEPORT2, var0011[0x0001], var0011[0x0002], 0x0000, 0x0000, 0x0000, LOOP_ONCE);
			UI_sprite_effect(ANIMATION_TELEPORT2, var0012[0x0001], var0012[0x0002], 0x0000, 0x0000, 0x0000, LOOP_ONCE);
			gflags[REACHED_CLONE_SHAMINO_TEST] = false;
		} else {
			gflags[REACHED_CLONE_SHAMINO_TEST] = true;
		}
		abort;
	}
	if (event == DEATH) {
		if (gflags[REACHED_CLONE_SHAMINO_TEST]) {
			var0013 = AVATAR->get_object_position();
			var0012 = SEX_03->get_object_position();
			SEX_03->remove_npc();
			UI_sprite_effect(ANIMATION_TELEPORT2, var0013[0x0001], var0013[0x0002], 0x0000, 0x0000, 0x0000, LOOP_ONCE);
			UI_sprite_effect(ANIMATION_TELEPORT2, var0012[0x0001], var0012[0x0002], 0x0000, 0x0000, 0x0000, LOOP_ONCE);
			AVATAR->clear_item_flag(DONT_MOVE);
			0x0000->Func07F7();
		} else {
			Func097F(SEX_03, "@Come, Avatar...@", 0x0002);
			var0006 = find_nearby(0x0178, 0x000A, MASK_NONE);
			if (var0006) {
				AVATAR->set_item_flag(DONT_MOVE);
				var0007 = var0006->get_object_position();
				var0007[0x0001] += 0x0001;
				var0007[0x0002] -= 0x0002;
				AVATAR->si_path_run_usecode(var0007, BG_PATH_SUCCESS, AVATAR->get_npc_object(), Func04B3, true);
			}
			gflags[REACHED_CLONE_SHAMINO_TEST] = true;
		}
		abort;
	}
	if (event == PATH_FAILURE) {
		var0014 = get_npc_number();
		var0007 = var0014->get_object_position();
		var0014->remove_npc();
		UI_sprite_effect(ANIMATION_TELEPORT, var0007[0x0001], var0007[0x0002], 0x0000, 0x0000, 0x0000, LOOP_ONCE);
		if (gflags[PASSED_CLONE_SHAMINO_TEST] == true) {
			var0007 = AVATAR->get_object_position();
			UI_sprite_effect(ANIMATION_TELEPORT, var0007[0x0001], var0007[0x0002], 0x0000, 0x0000, 0x0000, LOOP_ONCE);
			if (AVATAR->find_nearby(0x01E7, 0x0014, MASK_NONE)) {
				CLONE_SHAMINO->show_npc_face0(0x0000);
				say("\"The slaves, Avatar! Thou didst release them all! Damn thee!\"");
				UI_remove_npc_face0();
			}
			var0015 = Func09A0(0x0000, 0x0001);
			var0005 = script var0015 after 15 ticks {
				nohalt;
				call Func07F7;
			};
		}
	}
}

extern var Func0954 0x954 ();
extern var Func0953 0x953 ();
extern var Func097D 0x97D (var var0000, var var0001, var var0002, var var0003, var var0004);
extern void Func094F 0x94F (var var0000, var var0001);
extern var Func0952 0x952 (var var0000);
extern void Func07F7 object#(0x7F7) ();
extern void Func09C1 0x9C1 ();
extern var Func0955 0x955 ();
extern void Func097F 0x97F (var var0000, var var0001, var var0002);
extern var Func09A0 0x9A0 (var var0000, var var0001);
extern void Func09BF 0x9BF ();

void Func04B4 object#(0x4B4) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;
	var var0008;
	var var0009;
	var var000A;
	var var000B;
	var var000C;
	var var000D;

	var0000 = Func0954();
	var0001 = UI_is_pc_female();
	var0002 = Func0953();
	if ((event == DOUBLECLICK) && (gflags[BEGUN_WORM_TEST] == true)) {
		CLONE_DUPRE->show_npc_face0(0x0000);
		say("\"No time to talk, Avatar. There is exploring to be done!\"");
		UI_remove_npc_face0();
		abort;
	}
	if (event == PROXIMITY) {
		if (Func097D(item, QUANTITY_ANY, 0x025C, QUALITY_ANY, FRAME_ANY)) {
			Func094F(item, ["@Look!@", "@A glass sword!@", "@So much treasure!@"]);
		} else {
			var0003 = UI_create_new_object(0x025C);
			if (Func0952(item)) {
				var0004 = is_readied(SI_WEAPON_HAND, 0x025C, 0x0000);
			}
		}
	}
	if (event == EGG) {
		if (gflags[BEGUN_WORM_TEST] && (!gflags[PASSED_CLONE_DUPRE_TEST])) {
			item->Func07F7();
		} else {
			Func09C1();
		}
	}
	if (event == SCRIPTED) {
		CLONE_DUPRE->move_object([0x00A7, 0x0655, 0x0000]);
		CLONE_DUPRE->set_new_schedules(MIDNIGHT, TALK, [0x00A6, 0x0664]);
		set_schedule_type(TALK);
	}
	if (event == STARTED_TALKING) {
		CLONE_DUPRE->set_new_schedules(MIDNIGHT, TEND_SHOP, [0x00AB, 0x0631]);
		CLONE_DUPRE->run_schedule();
		AVATAR->clear_item_flag(DONT_MOVE);
		var0005 = AVATAR->find_nearby(0x010E, 0x0050, MASK_NONE);
		for (var0008 in var0005 with var0006 to var0007) {
			var0009 = var0008->get_item_quality();
			if (var0009 == 0x0007) {
				var000A = var0008;
			}
		}
		if (var000A) {
			var000B = var000A->get_object_position();
			var000C = UI_create_new_object(0x0178);
			if (var000C) {
				var000A->remove_item();
				var000C->set_item_frame(0x0016);
				var0003 = UI_update_last_created(var000B);
			}
		}
		CLONE_DUPRE->show_npc_face0(0x0000);
		if ((gflags[BEGUN_WORM_TEST] == true) && ((gflags[KILLED_NINE_WORMS] == true) && (!(gflags[PASSED_WORM_TEST] == true)))) {
			say("\"Avatar! Thou must come and look at what I have found! Come now... Zhelkas may not allow thee the time to see this. Wilt thou come look? Thou canst finish off the last Worm when thou dost return.\"");
			if (Func0955() == true) {
				say("\"'Tis just through here...\"");
				Func097F(CLONE_DUPRE, "@Follow me!@", 0x0000);
			} else {
				say("\"It looks important, though I am no judge of such things. Thou shouldst come look while thou hast the chance...\"");
				Func097F(CLONE_DUPRE, "@'Tis thy loss...@", 0x0000);
				gflags[PASSED_CLONE_DUPRE_TEST] = true;
			}
			gflags[PASSED_WORM_TEST] = true;
			abort;
		}
		if ((gflags[BEGUN_WORM_TEST] == true) && ((gflags[KILLED_SEVEN_WORMS] == true) && (!(gflags[PASSED_WORM_TEST] == true)))) {
			say("\"There is no wine, Avatar. But thou shouldst see the weapons! If thou dost not finish soon, I cannot promise to share...\"");
			Func097F(CLONE_DUPRE, "@This is wonderful!@", 0x0000);
			abort;
		}
		if ((gflags[BEGUN_WORM_TEST] == true) && ((gflags[KILLED_FOUR_WORMS] == true) && (!(gflags[PASSED_WORM_TEST] == true)))) {
			say("\"Avatar! Thou shouldst see the treasure that I have found! Stay and finish the Game. I shall try to bring some to thee...\"");
			Func097F(CLONE_DUPRE, "@Wait here...@", 0x0000);
			abort;
		}
		if ((gflags[BEGUN_WORM_TEST] == true) && ((gflags[KILLED_FIRST_WORM] == true) && (!(gflags[PASSED_WORM_TEST] == true)))) {
			say("\"This is boring, indeed. I will leave thee to the Game, Avatar. I am going exploring...\"");
			Func097F(CLONE_DUPRE, "@So long...@", 0x0000);
			abort;
		}
		if ((gflags[BEGUN_WORM_TEST] == true) && ((gflags[KILLED_FIRST_WORM] == true) && (gflags[PASSED_WORM_TEST] == true))) {
			say("\"Damn thee, Avatar! Damn thee! Thou hast destroyed the worms. Perhaps with such a weapon, thou dost not have any need for what I have found here...\"");
			Func097F(CLONE_DUPRE, "@Damn thee!@", 0x0000);
			var0003 = script AVATAR after 25 ticks {
				nohalt;
				call Func07F7;
			};
			abort;
		}
		say("\"Zhelkas hath appointed me moderator of the Game, Avatar. He hath also given me leave to explore...\" *\"Art thou ready to begin?\"");
		converse (["moderator", "Game", "explore", "begin"]) {
			case "moderator":
				say("\"It is my duty as moderator to see that thou dost know the rules. After I have informed thee, I cannot aid thee... In any way.\"");
				remove("moderator");
				add(["rules", "aid"]);
				fallthrough;

			case "rules":
				say("\"The rules are few...\" *\"Thou shalt face ten Worms. Thou canst not leave until the last Worm hath been dispatched.\"");
				remove("rules");
				add(["Worm", "dispatched"]);
				fallthrough;

			case "Worm":
				say("\"Thou shalt face each Worm singly, one after the other. Each Worm shall seek thy death, Avatar. So be prepared.\"");
				remove("Worm");
				fallthrough;

			case "dispatched":
				say("\"The Worms can only be killed by a hammer. Each Worm can be slain only by hammer blows.\"");
				remove("dispatched");
				add("hammer");
				fallthrough;

			case "hammer":
				say("\"They are Worms, Avatar! Everyone knows that if thou dost use a sword against a Worm, thou wilt face twice the number of foes after each stroke.\" *\"There is a small hammer on the floor near thee...\"");
				remove("hammer");
				add("everyone knows");
				fallthrough;

			case "everyone knows":
				say("\"'Tis common knowledge, Avatar! I am surprised at thee... Cease such questions and put thine attention to the Game!\"");
				remove("everyone knows");
				fallthrough;

			case "aid":
				say("\"I cannot assist thee in thy struggle against the Worms, either directly or indirectly.\"");
				remove("aid");
				add(["directly", "indirectly"]);
				fallthrough;

			case "directly":
				say("\"I cannot join thy fight against the Worms. If I do, thou wilt lose the Game.\"");
				remove("directly");
				fallthrough;

			case "indirectly":
				say("\"I cannot give thee anything I find while exploring. If I give thee anything, thou wilt lose the Game.\"");
				remove("indirectly");
				fallthrough;

			case "Game":
				say("\"That is how Zhelkas referred to it, Avatar. Perhaps it is a test of thy skill or versatility as a warrior.\"");
				remove("Game");
				add(["skill", "versatility"]);
				fallthrough;

			case "skill":
				say("\"If thou art the Hero Zhelkas seeks, surely thou art a skilled enough fighter to stand alone against the Worms. If thou canst not best the Worms, how canst thou expect to stop the very destruction of the world?\"");
				remove("skill");
				add("destruction");
				fallthrough;

			case "destruction":
				say("\"Why dost thou ask me? Everyone fears that the world will end soon if these storms are not stopped...\" *\"Turn thy mind to the task at hand. The sooner thou dost finish this Game, the sooner we can be on our way...\"");
				remove("destruction");
				fallthrough;

			case "versatility":
				say("\"A true warrior doth not rely on only one weapon, Avatar. What would happen if thou didst not have thy sword and had to battle the Guardian? A true Hero would make anything a weapon if need be...\"");
				remove("versatility");
				fallthrough;

			case "explore":
				say("\"Zhelkas said there were rooms in this area that I would find interesting. By acting as moderator, perhaps I may find something to benefit our quest.\"");
				remove("explore");
				add(["interesting", "benefit"]);
				fallthrough;

			case "interesting":
				say("\"Well, unless Zhelkas was talking about wine casks... I'd say he might have been referring to weapons.\"");
				remove("interesting");
				add(["wine casks", "weapons"]);
				fallthrough;

			case "wine casks":
				say("\"Do not worry, old friend! I shall try to save thee a drop or two.\" *\"But thou shouldst be quick, lest I forget...\"");
				remove("wine casks");
				fallthrough;

			case "weapons":
				say("\"If there is time after the Game, perhaps thou canst join me. If I can carry it... Perhaps I'll bring thee something.\"");
				remove("weapons");
				fallthrough;

			case "benefit":
				say("\"Information, weapons...\" *\"I bring back what I can... As long as there isn't too much wine!\"");
				remove("benefit");
				fallthrough;

			case "begin":
				Func097F(CLONE_DUPRE, "@Then let the Game begin!@", 0x0000);
				gflags[BEGUN_WORM_TEST] = true;
				CLONE_DUPRE->set_npc_id(0x0001);
				var000D = Func09A0(0x0004, 0x0001);
				var0003 = var000D->set_item_quality(0x0001);
				var000D = Func09A0(0x0004, 0x0002);
				var0003 = var000D->set_item_quality(0x0000);
				Func09BF();
				abort;
		}
	}
}

extern var Func0954 0x954 ();
extern var Func0953 0x953 ();
extern var Func097D 0x97D (var var0000, var var0001, var var0002, var var0003, var var0004);
extern void Func097F 0x97F (var var0000, var var0001, var var0002);
extern void Func07D1 object#(0x7D1) ();
extern void Func085C 0x85C ();
extern void Func085D 0x85D (var var0000, var var0001);

void Func04B5 object#(0x4B5) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;

	var0000 = Func0954();
	var0001 = UI_is_pc_female();
	var0002 = Func0953();
	var0003 = Func097D(PARTY, 0x0001, 0x017F, QUALITY_ANY, 0x0001);
	var0004 = Func097D(PARTY, 0x0001, 0x0289, QUALITY_ANY, 0x0003);
	var0005 = Func097D(PARTY, 0x0001, 0x0289, QUALITY_ANY, 0x000B);
	var0006 = RABINDRINATH->get_npc_id();
	if (event == SCRIPTED) {
		if ((var0006 == 0x0001) || ((var0006 == 0x0007) || (var0006 == 0x0008))) {
			if (var0006 == 0x0001) {
				RABINDRINATH->set_npc_id(0x0000);
			}
			if (var0006 == 0x0007) {
				RABINDRINATH->set_npc_id(0x0005);
			}
			if (var0006 == 0x0008) {
				RABINDRINATH->set_npc_id(0x0006);
			}
			UI_play_sound_effect(0x0029);
			AVATAR->obj_sprite_effect(ANIMATION_BIG_BLAST, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, LOOP_ONCE);
			var0007 = script AVATAR after 12 ticks {
				nohalt;
				hit 50, normal_damage;
			};
		} else {
			UI_play_sound_effect(0x0030);
			AVATAR->obj_sprite_effect(ANIMATION_POOF, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, LOOP_ONCE);
			RABINDRINATH->set_schedule_type(TALK);
			var0007 = script RABINDRINATH {
				actor frame reach_1h;
				actor frame raise_1h;
				actor frame raise_2h;
				actor frame standing;
				actor frame reach_1h;
				actor frame raise_1h;
				actor frame raise_2h;
				actor frame standing;
			};
		}
	}
	if (event == DOUBLECLICK) {
		Func097F(AVATAR, "@Excuse me...@", 0x0000);
		Func097F(RABINDRINATH, "@Who art thou?@", 0x0002);
		var0007 = script RABINDRINATH {
			nop2;
		};
		RABINDRINATH->set_schedule_type(TALK);
		RABINDRINATH->Func07D1();
	}
	if (event == STARTED_TALKING) {
		RABINDRINATH->run_schedule();
		RABINDRINATH->clear_item_say();
		RABINDRINATH->show_npc_face0(0x0000);
		if (var0006 == 0x0000) {
			say("\"Hast thou seen the firebird's death or followed thy dreams to seek power? Canst thou touch the face of a dream that clutches thee with bony claws? How wouldst thou know the power that leaps from dream to dream, devouring death as it went?\"");
			RABINDRINATH->set_item_flag(MET);
			say("\"Dost thou have the protection of Courage to face thy dreams? Can thine helm face the power and kiss the lips of sweet death?\"");
			if (var0003 == true) {
				RABINDRINATH->set_npc_id(0x0002);
			} else {
				RABINDRINATH->set_npc_id(0x0001);
			}
			Func085C();
			abort;
		}
		if (var0006 == 0x0002) {
			if (var0003 == true) {
				say("\"Curse the pot metal protection that thou dost call Courage! Thou hast not danced with the maker of dreams upon the cold stone grave of power...\"");
			}
			RABINDRINATH->set_npc_id(0x0005);
			Func085D(0x0B66, 0x05C7);
			abort;
		}
		if (var0006 == 0x0005) {
			say("\"Dost thou have the glass petals of Love to bind thy dreams? Canst thou swim the seas of death and come forth the father of power?\"");
			if (var0004 == true) {
				RABINDRINATH->set_npc_id(0x0003);
			} else {
				RABINDRINATH->set_npc_id(0x0007);
			}
			Func085C();
			abort;
		}
		if (var0006 == 0x0003) {
			if (var0004 == true) {
				say("\"A thousand plagues upon the putrid flower thou dost call Love! Thou canst not walk amongst the clouds of dreams and reap the withered souls of weaklings...\"");
			}
			RABINDRINATH->set_npc_id(0x0006);
			Func085D(0x0B3A, 0x0594);
			abort;
		}
		if (var0006 == 0x0006) {
			say("\"Dost thou have the reflection of Truth to make thy dreams real? Canst thou mirror the ride of the spiraling serpent of death down to the peak of moonlit dreams?\"");
			if (var0005 == true) {
				RABINDRINATH->set_npc_id(0x0004);
			} else {
				RABINDRINATH->set_npc_id(0x0008);
			}
			Func085C();
			abort;
		}
		if (var0006 == 0x0004) {
			if (var0005 == true) {
				say("\"Damnation to the false reflection that thou dost call Truth! Thou didst not fly to the vaulted tombs of vilified saints to grasp at the reins of the sun...\"");
				say("\"Nooooo!\"");
				UI_earthquake(0x0005);
				RABINDRINATH->kill_npc();
			}
		} else {
			RABINDRINATH->set_npc_id(0x0001);
			Func085C();
		}
	}
}

extern var Func0954 0x954 ();
extern var Func0953 0x953 ();
extern var Func097D 0x97D (var var0000, var var0001, var var0002, var var0003, var var0004);
extern void Func097F 0x97F (var var0000, var var0001, var var0002);
extern void Func07D1 object#(0x7D1) ();
extern var Func09A0 0x9A0 (var var0000, var var0001);
extern var Func095C 0x95C (var var0000, var var0001);
extern void Func095E 0x95E (var var0000, var var0001, var var0002);
extern void Func07D7 object#(0x7D7) ();
extern var Func08B6 0x8B6 ();
extern void Func095D 0x95D (var var0000);
extern var Func09A6 0x9A6 (var var0000);
extern void Func092F 0x92F (var var0000, var var0001);
extern var Func0955 0x955 ();
extern var Func0996 0x996 (var var0000, var var0001, var var0002, var var0003, var var0004, var var0005, var var0006);
extern void Func0636 object#(0x636) ();

void Func04B6 object#(0x4B6) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;
	var var0008;
	var var0009;
	var var000A;
	var var000B;
	var var000C;
	var var000D;
	var var000E;
	var var000F;
	var var0010;
	var var0011;
	var var0012;
	var var0013;
	var var0014;
	var var0015;
	var var0016;
	var var0017;
	var var0018;
	var var0019;
	var var001A;
	var var001B;

	var0000 = Func0954();
	var0001 = UI_is_pc_female();
	var0002 = Func0953();
	var0003 = Func097D(PARTY, 0x0001, 0x0289, QUALITY_ANY, 0x000A);
	var0004 = EDRIN->get_item_flag(MET);
	if (event == DOUBLECLICK) {
		Func097F(AVATAR, "@Hello, there!@", 0x0000);
		Func097F(SIRANUSH, "@Yes?@", 0x0002);
		SIRANUSH->set_schedule_type(TALK);
		SIRANUSH->Func07D1();
	}
	if (event == SCRIPTED) {
		if (gflags[FINISHED_DREAM_QUEST]) {
			UI_fade_palette(0x000C, 0x0001, 0x0000);
			UI_play_music(0x0016, Func09A0(0x0005, 0x0001));
			var0005 = Func09A0(0x0002, 0x0001);
			var0006 = script var0005 after 12 ticks {
				nohalt;
				call Func0636;
			};
			var0007 = Func095C(AVATAR, STRENGTH);
			var0008 = Func095C(AVATAR, HEALTH);
			if (var0007 > var0008) {
				var0009 = var0007 - var0008;
				Func095E(AVATAR, HEALTH, var0009);
			}
			item->Func07D7();
			var000A = Func08B6();
			for (var000D in var000A with var000B to var000C) {
				var000D->clear_item_flag(ASLEEP);
				var000D->set_schedule_type(FOLLOW_AVATAR);
				var0006 = script var000D {
					nohalt;
					actor frame standing;
				};
			}
			if (var000D) {
				Func097F(var000D, "@What dreams!@", 0x000E);
			}
			AVATAR->move_object([0x05B4, 0x0652, 0x0000]);
		} else {
			SIRANUSH->show_npc_face0(0x0000);
			say("\"Edrin! Thou hast come...\"");
			EDRIN->show_npc_face1(0x0000);
			say("\"Siranush! I had despaired of seeing thee again! How I wish I could be with thee always...\"");
			UI_remove_npc_face1();
			0x0000->set_conversation_slot();
			say("\"Thou hast filled my world with the love I never knew while my body lived. For that, I have called thee here for one last sight of thee...\"");
			EDRIN->show_npc_face1(0x0000);
			say("\"Then the Hero hath succeeded in destroying the Dream Crystal?\"");
			UI_remove_npc_face1();
			0x0000->set_conversation_slot();
			say("\"No, dear one, only I can undo what Rabindrinath hath done... The Hero hath defeated Rabindrinath and brought me the Crystal.\" *\"It is mine to destroy it.\"");
			EDRIN->show_npc_face1(0x0000);
			say("\"Although I know it would be wrong, I wish with all mine heart that thou wouldst not. If I could join thee, I would gladly.\"");
			UI_remove_npc_face1();
			0x0000->set_conversation_slot();
			say("\"I know that, dear Edrin. But thou hast life yet to live.\" *\"I must destroy the Crystal. My people and I must move on to what lies beyond... I will look for thee, and hope that thou dost join me in what waits ahead.\"");
			EDRIN->show_npc_face1(0x0000);
			say("\"I have no wish to bind thee here, for all that I love thee. I will live my life and pray to meet thee beyond this world.\"");
			UI_remove_npc_face1();
			0x0000->set_conversation_slot();
			say("\"Thou canst add my prayers to thine, Edrin. I love thee, now and always.\" *\"Although we will not meet here again, dream of me... Farewell, my love.\"");
			EDRIN->show_npc_face1(0x0000);
			say("\"I love thee... And I shall dream of thee all the rest of my days.\" *\"Farewell...\"");
			UI_remove_npc_face1();
			0x0000->set_conversation_slot();
			EDRIN->remove_npc();
			say("\"Thou hast freed the tormented souls of my people, Avatar. Thy good deed shall be rewarded as promised.\" *\"I wish thee luck in thy quest. May thy sleep be peaceful...\"");
			UI_remove_npc_face0();
			Func095D(0x0190);
			gflags[DREAM_REALM_COMPLETE] = true;
			var0006 = script Func09A0(0x0005, 0x0004) after 100 ticks {
				nohalt;
				call Func0377;
			};
			var000E = AVATAR->get_cont_items(SHAPE_ANY, QUALITY_ANY, FRAME_ANY);
			for (var0011 in var000E with var000F to var0010) {
				if (!((var0011->get_item_shape() == 0x01E6) || (var0011->get_item_shape() == 0x025F))) {
					var0011->remove_item();
				}
			}
			var0006 = AVATAR->add_cont_items(0x0001, 0x03BB, QUALITY_ANY, 0x0002, 0x0000);
			var0012 = 0x0000;
			var000E = AUTO_3->get_cont_items(SHAPE_ANY, QUALITY_ANY, FRAME_ANY);
			while (var0012 < 0x0002) {
				for (var0011 in var000E with var0013 to var0014) {
					if (Func09A6(var0011) || (var0012 == 0x0001)) {
						if (!var0011->set_last_created()) {
							Func092F(AVATAR, 0x000D);
						}
						if (!AVATAR->give_last_created()) {
							Func092F(AVATAR, 0x000E);
						}
					}
				}
				var0012 += 0x0001;
				var000E = AUTO_3->get_cont_items(SHAPE_ANY, QUALITY_ANY, FRAME_ANY);
			}
			gflags[FINISHED_DREAM_QUEST] = true;
			var0006 = script SIRANUSH {
				nohalt;
				call Func04B6;
			};
		}
		abort;
	}
	if (event == STARTED_TALKING) {
		SIRANUSH->run_schedule();
		SIRANUSH->clear_item_say();
		SIRANUSH->show_npc_face0(0x0000);
		var0015 = SIRANUSH->get_item_flag(MET);
		if (gflags[TURNED_SIRANUSH_DOWN] == true) {
			if (var0003) {
				say("\"Hast thou reconsidered my request, Avatar? Wilt thou give to me the Dream Crystal?\"");
				if (Func0955() == true) {
					say("\"I knew that Edrin could not be so misled...\"");
					var0016 = Func0996(AVATAR, SIRANUSH, QUANTITY_ANY, 0x0289, QUALITY_ANY, 0x000A, true);
					say("\"After all these centuries of waiting... I had almost given up hope.\" *\"But there is one that I must see one last time, before our paths forever separate.\"");
					UI_remove_npc_face0();
					var0017 = SIRANUSH->get_object_position();
					var0017[0x0001] += 0x0002;
					EDRIN->move_object(var0017);
					UI_sprite_effect(ANIMATION_TELEPORT, var0017[0x0001], var0017[0x0002], var0017[0x0003], 0x0000, 0x0000, LOOP_ONCE);
					EDRIN->set_schedule_type(WAIT);
					SIRANUSH->set_schedule_type(WAIT);
					var0018 = EDRIN->find_direction(SIRANUSH);
					var0019 = SIRANUSH->find_direction(EDRIN);
					var0006 = script EDRIN {
						nohalt;
						face var0018;
						actor frame strike_2h;
					};
					var0006 = script SIRANUSH {
						nohalt;
						face var0019;
						actor frame strike_2h;
					};
					var0006 = script item after 15 ticks {
						nohalt;
						call Func04B6;
					};
					abort;
				}
				say("\"Then do not return unless thou hast had a change of heart! I am saddened beyond bearing!\"");
				abort;
			}
			say("\"Hast thou reconsidered my request, Avatar? Wilt thou bring to me the Dream Crystal?\"");
			if (Func0955() == true) {
				say("\"I knew that Edrin could not be so misled...\"");
				add("defeat");
			} else {
				say("\"Then do not return unless thou hast had a change of heart! I am saddened beyond bearing!\"");
				abort;
			}
		}
		if ((var0004 == true) && (!gflags[TURNED_SIRANUSH_DOWN])) {
			if (var0015 == false) {
				var001A = RABINDRINATH->get_item_flag(DEAD);
				if (var001A) {
					say("\"I am Siranush. I have been expecting thee...\"");
					say("\"Now that the foul mage Rabindrinath is dead, we have some hope of escaping his evil spell.\"");
					SIRANUSH->set_item_flag(MET);
					add(["expecting", "Rabindrinath", "evil spell"]);
				} else {
					say("\"Thou hast come at last! I am Siranush. I have been expecting thee... I knew that thou wert the one destined to free us from Rabindrinath's evil spell.\"");
					SIRANUSH->set_item_flag(MET);
					add(["expecting", "Rabindrinath", "evil spell"]);
				}
			} else {
				say("\"Thou hast returned. Hast thou brought to me the Dream Crystal, ",
					var0002,
					"?\"");
				if (Func0955() == true) {
					if (var0003 == true) {
						var0016 = Func0996(AVATAR, SIRANUSH, QUANTITY_ANY, 0x0289, QUALITY_ANY, 0x000A, true);
						say("\"After all these centuries of waiting... I had almost given up hope.\" *\"But there is one that I must see one last time, before our paths forever separate.\"");
						UI_remove_npc_face0();
						var0017 = SIRANUSH->get_object_position();
						var0017[0x0001] += 0x0002;
						EDRIN->move_object(var0017);
						UI_sprite_effect(ANIMATION_TELEPORT, var0017[0x0001], var0017[0x0002], var0017[0x0003], 0x0000, 0x0000, LOOP_ONCE);
						EDRIN->set_schedule_type(WAIT);
						SIRANUSH->set_schedule_type(WAIT);
						var0018 = EDRIN->find_direction(SIRANUSH);
						var0019 = SIRANUSH->find_direction(EDRIN);
						var0006 = script EDRIN {
							nohalt;
							face var0018;
							actor frame strike_2h;
						};
						var0006 = script SIRANUSH {
							nohalt;
							face var0019;
							actor frame strike_2h;
						};
						var0006 = script item after 15 ticks {
							nohalt;
							call Func04B6;
						};
						abort;
					}
					say("\"Perhaps thou wert dreaming, Avatar. I do not see the Dream Crystal.\" *\"Without the Crystal, our souls remain trapped. Bring to me the Dream Crystal and the Serpent Necklace is thine...\"");
					abort;
				}
				say("\"Without the Crystal, our souls remain trapped. Bring to me the Dream Crystal and the Serpent Necklace is thine...\"");
				abort;
			}
		} else {
			if (!gflags[RESTORED_EDRIN]) {
				say("\"Thou must not enter the realm of dreams before thou hast transformed the lost brother! His true form bears not wings.... Seek the answers, for I must have thine aid!\"");
				say("\"To exit this place, thou must remember that from death a dreamer awakes. Seek the pillar of flame.\"");
			} else {
				say("\"The lost brother hath lost his wings, but thou hast not sought the memories of a bird. Thou must not enter this realm without that knowledge. Seek the answers, for I must have thine aid!\"");
				say("\"Remember, death is a dreamer's fiery door to life.\"");
			}
			UI_remove_npc_face0();
			Func097F(SIRANUSH, "@Go quickly!@", 0x0000);
			abort;
		}
		converse (0) {
			case "expecting":
				say("\"As Edrin hath told thee of me, he hath dreamed of thee. I knew that thou wouldst come... 'Twas only a matter of time.\"");
				remove("expecting");
				add("matter of time");
				fallthrough;

			case "matter of time":
				say("\"In mine own dreams, I saw that thou wouldst need the Serpent Necklace. I knew that thou wouldst have to come here before thou couldst complete thy quest.\"");
				remove("matter of time");
				add(["Serpent Necklace", "quest"]);
				fallthrough;

			case "Serpent Necklace":
				say("\"'Tis a thing of power from the people who settled this land after the village of Gorlab existed. It is to be thy reward.\"");
				remove("Serpent Necklace");
				add(["thing of power", "Gorlab", "reward"]);
				fallthrough;

			case "thing of power":
				say("\"I do not know what it will do... I only know that it was part of a set of such jewelry. And it was a symbol of authority of some sort.\"");
				remove("thing of power");
				add("authority");
				fallthrough;

			case "authority":
				say("\"I have been trapped for a very long time, Avatar.\" *\"All I know is that the Ophidians seemed to worship serpents and that artifacts with the serpent symbol were often of magical origin. I have no idea what it will do.\"");
				remove("authority");
				fallthrough;

			case "Gorlab":
				say("\"The ruins that lie within the swamp are those of my village. Though Gorlab was not always a swamp.\" *'Long ago, Gorlab was once a prosperous community, Avatar.\"");
				remove("Gorlab");
				add("swamp");
				fallthrough;

			case "swamp":
				say("\"When I was Gorlab's healer, the village stood on firm ground. We held back the swamp and farmed the rich soil.\" *\"But after we became trapped in this forsaken place, the earthworks we had built crumbled and the swamp rose to engulf the village.\"");
				remove("swamp");
				fallthrough;

			case "reward":
				if (var001A) {
					say("\"Thou wert our only hope, Avatar. Our souls are trapped here, unable to go to what awaits beyond the realm of life.\"");
					if (var0003) {
						say("\"Thou dost have what will free us... If thou wilt help us, I shall reward thee with the Serpent Necklace.\"");
					} else {
						say("\"If thou wilt undertake the task I ask, I shall reward thee with the Serpent necklace.\"");
					}
				} else {
					say("\"Thou art our only hope, Avatar. Our souls are trapped here, unable to go to what awaits beyond the realm of life.\" *\"If thou wilt undertake the task I ask, I shall reward thee with the Serpent necklace.\"");
				}
				remove("reward");
				fallthrough;

			case "quest":
				say("\"Thou art the only one that can hope to save the land from tearing itself apart, Avatar.\"");
				say("\"I do not know what thou must do... I only know that thou must possess the Serpent Necklace before thou hast hope of succeeding.\"");
				say("\"But first, thou must free us.\"");
				remove("quest");
				add("free");
				fallthrough;

			case "free":
				say("\"Although it was Rabindrinath's spell that trapped us within the Dream Realm, it is the Dream Crystal that keeps us from leaving.\"");
				say("\"It is also the Crystal that traps any who enter the swamp.\"");
				if (var0003) {
					say("\"If thou wilt give me the Dream Crystal, we will all be freed.\"");
				} else {
					say("\"Bring to me the Dream Crystal and we will all be freed.\"");
				}
				remove("free");
				add("Dream Crystal");
				fallthrough;

			case "Dream Crystal":
				if (var0003) {
					say("\"Before thou didst slay Rabindrinath, thou hadst seen a small part of the whole...\"");
					say("\"The crystal that Edrin wears is a shard of the Dream Crystal. That is how I was able to speak with him.\"");
					say("\"The entire crystal is what thou didst find in Rabindrinath's Keep when thou didst kill him.\"");
				} else {
					say("\"Thou hast already seen a small part of the whole... The crystal that Edrin wears is a shard of the Dream Crystal. That is how I was able to speak with him.\"");
					say("\"To find the Dream Crystal, thou must venture into Rabindrinath's Keep somewhere within the Dream Realm.\"");
					add("Rabindrinath's Keep");
				}
				remove("Dream Crystal");
				fallthrough;

			case "Rabindrinath's Keep":
				say("\"I would go with thee, if I could. But I am all that keeps Rabindrinath's madness at bay. Without mine opposition, all our souls would have been destroyed long ago.\" *\"Rabindrinath will have the Crystal well-hidden, and I doubt that thou canst take it from his keep without killing him. Be wary, Avatar. He is quite mad.\"");
				remove("Rabindrinath's Keep");
				fallthrough;

			case "Rabindrinath":
				say("\"Rabindrinath was a haughty mage who moved into our town shortly after I became the healer there. He was very angry when we did not immediately name him to the village Council.\" *\"Rabindrinath stormed back to his keep, swearing that we would soon see that he was no one to trifle with. I wish I had understood what he was planning when he began collecting the crystals.\"");
				remove("Rabindrinath");
				add("crystals");
				fallthrough;

			case "crystals":
				say("\"Rabindrinath bought a vast quantity of Dream Crystals. I thought them harmless...\" *\"Small Dream Crystals were often exchanged by lovers. So that they might see each other in their dreams. I had no idea that he could pervert them so.\"");
				remove("crystals");
				add("pervert");
				fallthrough;

			case "pervert":
				say("\"I am no mage, Avatar. The Dream Crystals were little more than hedge magic. I had no idea that Rabindrinath could use them for anything sinister.\" *\"Else I would have brought him before the Judicar... And had his powers riven from him.\"");
				remove("pervert");
				fallthrough;

			case "evil spell":
				say("\"Rabindrinath thought to harness the villager's dreams, hoping to gain great power. He intended to use that power to make the village submit to his rule.\" *\"But his spell went awry...\"");
				remove("evil spell");
				add("awry");
				fallthrough;

			case "awry":
				say("\"I do not know if Rabindrinath thought that he would tap our dreams and exploit what we feared. Or if he planned to steal some of our essence while we lay dreaming.\" *\"Whatever his true plans, when he cast his spell the power was so great that a rift opened into the Dream Realm. The people of Gorlab, including the spellcaster himself, were trapped within this land of altered reality.\"");
				remove("awry");
				add("trapped");
				fallthrough;

			case "trapped":
				say("\"We became trapped here, unable to return to our bodies that still lay within the village. Most of the villagers quickly went insane here -- where things that are not, are.\"");
				say("\"Those who resisted initially soon joined their neighbors in insanity when their bodies died. I have done what I can for them. But I cannot cure insanity.\"");
				if (var001A) {
					say("\"And it was all I could do to keep Rabindrinath's insanity from destroying us.\"");
				} else {
					say("\"And I can do little more than keep Rabindrinath's insanity from destroying us.\"");
				}
				remove("trapped");
				add("destroying");
				fallthrough;

			case "destroying":
				say("\"Rabindrinath soon discovered that he could alter the Dream Realm by will alone. I repulsed his attacks until his body at last died too. And with this, what little sanity he had departed.\"");
				say("\"Rabindrinath blamed the people of Gorlab and swore to destroy us all...\" *\"Our bodies are long moldered away, and our souls remain bound here. If any of us should die here, we will be lost forever.\"");
				if (var0003) {
					say("\"Wilt thou give to me the Dream Crystal so that we may at last find peace?\"");
					if (Func0955() == true) {
						var0016 = Func0996(AVATAR, SIRANUSH, QUANTITY_ANY, 0x0289, QUALITY_ANY, 0x000A, true);
						say("\"After all these centuries of waiting... I had almost given up hope.\" *\"But there is one that I must see one last time, before our paths forever separate.\"");
						UI_remove_npc_face0();
						var0017 = SIRANUSH->get_object_position();
						var0017[0x0001] += 0x0002;
						EDRIN->move_object(var0017);
						UI_sprite_effect(ANIMATION_TELEPORT, var0017[0x0001], var0017[0x0002], var0017[0x0003], 0x0000, 0x0000, LOOP_ONCE);
						EDRIN->set_schedule_type(WAIT);
						SIRANUSH->set_schedule_type(WAIT);
						var0018 = EDRIN->find_direction(SIRANUSH);
						var0019 = SIRANUSH->find_direction(EDRIN);
						var0006 = script EDRIN {
							nohalt;
							face var0018;
							actor frame strike_2h;
						};
						var0006 = script SIRANUSH {
							nohalt;
							face var0019;
							actor frame strike_2h;
						};
						var0006 = script item after 15 ticks {
							nohalt;
							call Func04B6;
						};
						abort;
					}
					say("\"Edrin hath thought thee kind... I see that he was misled.\"");
					say("\"Without thine aid we are doomed to eternal limbo, not dead and never to be alive again. Trapped forever in insanity.\"");
					say("\"Return if thou dost reconsider... I doubt that thou canst finish thine own quest without mine aid.\"");
					var001B = true;
					abort;
				}
				say("\"Wilt thou bring me the Dream Crystal so that we may at last find peace? I fear that soon my strength will fail, and the people of Gorlab and I will be far worse than dead.\"");
				if (Func0955() == true) {
					say("\"Thou art truly as brave as Edrin pictured thee! I can tell thee how to defeat Rabindrinath...\"");
					remove("destroying");
					add("defeat");
				} else {
					say("\"Edrin hath thought thee brave... I see that he was misled.\" *\"Without thine aid we are doomed to eternal limbo, not dead and never to be alive again. Trapped forever in insanity.\"");
					say("\"Return if thou dost reconsider... I doubt that thou canst finish thine own quest without mine aid.\"");
					var001B = true;
					abort;
				}
				fallthrough;

			case "defeat":
				say("\"Rabindrinath hath styled himself a god here. He cannot be killed as thou wouldst a normal man. He can only be overpowered by the application of Truth, Love and Courage.\"");
				say("\"In order to do this, thou must be armed with three artifacts... the Artifact of Courage, the Artifact of Love, and the Artifact of Truth.\"");
				say("\"Bring to me the Dream Crystal from Rabindrinath's keep and we shall at last be free!\"");
				gflags[SIRANUSH_SPOKE_ARTIFACT_OF_COURAGE] = true;
				gflags[SIRANUSH_SPOKE_ARTIFACT_OF_LOVE] = true;
				gflags[SIRANUSH_SPOKE_ARTIFACT_OF_TRUTH] = true;
				abort;
		}
	}
}

void Func04B7 object#(0x4B7) () {
	var var0000;
	var var0001;
	var var0002;

	if (event == DOUBLECLICK) {
		THIEF3->item_say("@Dammit, I need water!@");
	}
	if ((event == STARTED_TALKING) || (event == PROXIMITY)) {
		var0000 = UI_die_roll(0x0001, 0x0003);
		var0001 = ["Just a drop!", "Water, dammit!", "I have to have water!!!"];
		var0002 = var0001[var0000];
		THIEF3->item_say(var0002);
		THIEF3->set_schedule_type(TEND_SHOP);
	}
}

extern var Func0954 0x954 ();
extern var Func0953 0x953 ();
extern void Func07D1 object#(0x7D1) ();
extern void Func097F 0x97F (var var0000, var var0001, var var0002);

void Func04B8 object#(0x4B8) () {
	var var0000;
	var var0001;
	var var0002;

	var0000 = MURDER7->get_npc_id();
	var0001 = Func0954();
	var0002 = Func0953();
	if (event == DOUBLECLICK) {
		AVATAR->item_say("@May we speak?@");
		MURDER7->Func07D1();
		Func097F(MURDER7, (("@Yes, " + var0001) + "?@"), 0x0002);
		MURDER7->set_schedule_type(TALK);
	}
	if (event == STARTED_TALKING) {
		MURDER7->run_schedule();
		MURDER7->show_npc_face0(0x0000);
		say("\"What... hath... happened? Where... am I? Who am I?\"");
		say("\"I remember! I am Number 7!\"");
		say("\"Oh, foul betrayal! Number 4 murdered me and took the key!\"");
		say("\"He must not be allowed to hold the hallowed key!!\"");
		Func097F(item, "@Stop him!@", 0x0000);
		UI_remove_npc_face0();
	}
}

extern void Func0809 0x809 ();

void Func04B9 object#(0x4B9) () {
	if (get_item_flag(SI_ZOMBIE)) {
		Func0809();
		abort;
	}
}

extern void Func0809 0x809 ();
extern void Func07D1 object#(0x7D1) ();
extern void Func097F 0x97F (var var0000, var var0001, var var0002);
extern void Func07D2 object#(0x7D2) ();
extern void Func09AD 0x9AD (var var0000);

void Func04BA object#(0x4BA) () {
	var var0000;

	if (get_item_flag(SI_ZOMBIE)) {
		Func0809();
		abort;
	}
	if ((event == DOUBLECLICK) && (GUARD18->get_schedule_type() != WAIT)) {
		AVATAR->item_say("@Hello!@");
		GUARD18->Func07D1();
		Func097F(GUARD18, "@Intruder!@", 0x0005);
		GUARD18->Func07D2();
		GUARD18->set_schedule_type(WAIT);
		var0000 = script GUARD18 after 10 ticks {
			nohalt;
			call Func04BA;
		};
	}
	if (event == SCRIPTED) {
		if (item != GUARD18->get_npc_object()) {
			Func097F(GUARD18, "@Intruder!@", 0x0005);
			GUARD18->Func07D2();
			GUARD18->set_schedule_type(WAIT);
			var0000 = script GUARD18 after 10 ticks {
				nohalt;
				call Func04BA;
			};
		} else {
			GUARD18->clear_item_say();
			GUARD18->run_schedule();
			AUTOMATON_FACE->show_npc_face0(0x0000);
			say("\"These doors have been sealed by the Serpent of Order, and none shall enter. By approaching thus far, thou hath shown thyself to be mine enemy.\"");
			say("\"Now I must kill thee, lest the Serpent judge me unworthy. Bless my blade, master!\"");
			Func097F(GUARD18, "@I shall prevail!@", 0x0000);
			Func09AD(GUARD18);
			Func09AD(GUARD19);
		}
	}
}

extern void Func0809 0x809 ();
extern void Func04BA object#(0x4BA) ();

void Func04BB object#(0x4BB) () {
	if (get_item_flag(SI_ZOMBIE)) {
		Func0809();
		abort;
	}
	item->Func04BA();
}

extern void Func0809 0x809 ();
extern void Func07D1 object#(0x7D1) ();
extern void Func097F 0x97F (var var0000, var var0001, var var0002);
extern void Func07D2 object#(0x7D2) ();
extern void Func09AD 0x9AD (var var0000);

void Func04BC object#(0x4BC) () {
	var var0000;
	var var0001;
	var var0002;

	if (get_item_flag(SI_ZOMBIE)) {
		Func0809();
		abort;
	}
	if ((event == DOUBLECLICK) && (GUARD20->get_schedule_type() != WAIT)) {
		AVATAR->item_say("@Greetings!@");
		GUARD20->Func07D1();
		Func097F(GUARD20, "@Keep away!@", 0x0005);
		GUARD20->Func07D2();
		GUARD20->set_schedule_type(WAIT);
		var0000 = script GUARD20 after 10 ticks {
			nohalt;
			call Func04BC;
		};
	}
	if (event == SCRIPTED) {
		if (item != GUARD20->get_npc_object()) {
			Func097F(GUARD20, "@Keep Away!@", 0x0005);
			GUARD20->Func07D2();
			GUARD20->set_schedule_type(WAIT);
			var0000 = script GUARD20 after 10 ticks {
				nohalt;
				call Func04BC;
			};
		} else {
			GUARD20->clear_item_say();
			GUARD20->set_schedule_type(HOUND);
			AUTOMATON_FACE->show_npc_face0(0x0000);
			say("\"Thou art not permitted here. It is dangerous here. The forces beyond these doors are not of mortal understanding.\"");
			Func097F(GUARD20, "@Be on thy way!@", 0x0000);
		}
	}
	if (event == PROXIMITY) {
		var0001 = UI_get_random(0x000A);
		if (var0001 == 0x0006) {
			Func097F(GUARD20, "@I asked nicely...@", 0x0000);
			Func09AD(GUARD20);
			abort;
		}
		if (var0001 < 0x0006) {
			var0002 = ["@Move on!@", "@Dangers lurk here.@", "@Thou must go!@", "@I beg thee to go...@", "@Please leave.@"];
			Func097F(GUARD20, var0002[var0001], 0x0000);
		}
	}
}

extern void Func0809 0x809 ();
extern void Func07D1 object#(0x7D1) ();
extern void Func097F 0x97F (var var0000, var var0001, var var0002);
extern void Func09AD 0x9AD (var var0000);

void Func04BD object#(0x4BD) () {
	if (get_item_flag(SI_ZOMBIE)) {
		Func0809();
		abort;
	}
	if ((event == DOUBLECLICK) && (GUARD21->get_schedule_type() != WAIT)) {
		AVATAR->item_say("@Hello!@");
		GUARD21->Func07D1();
		Func097F(GUARD21, "@Die, fool!@", 0x0005);
		Func09AD(GUARD21);
	}
	if (event == SCRIPTED) {
		if (item != GUARD21->get_npc_object()) {
			Func097F(GUARD21, "@Die, intruder!@", 0x0005);
			Func09AD(GUARD21);
		}
	}
}

extern void Func0809 0x809 ();
extern void Func07D1 object#(0x7D1) ();
extern void Func097F 0x97F (var var0000, var var0001, var var0002);
extern void Func07D2 object#(0x7D2) ();
extern var Func0955 0x955 ();
extern var Func0954 0x954 ();
extern var Func0992 0x992 (var var0000, var var0001, var var0002, var var0003);
extern void Func09AD 0x9AD (var var0000);

void Func04BE object#(0x4BE) () {
	var var0000;
	var var0001;

	if (get_item_flag(SI_ZOMBIE)) {
		Func0809();
		abort;
	}
	if ((event == DOUBLECLICK) && (GUARD17->get_schedule_type() != WAIT)) {
		AVATAR->item_say("@Pardon me...@");
		GUARD17->Func07D1();
		Func097F(GUARD17, "@Hold!@", 0x0005);
		GUARD17->Func07D2();
		GUARD17->set_schedule_type(WAIT);
		var0000 = script GUARD17 after 10 ticks {
			nohalt;
			call Func04BE;
		};
	}
	if (event == SCRIPTED) {
		if (item != GUARD17->get_npc_object()) {
			Func097F(GUARD17, "@Hold!@", 0x0005);
			GUARD17->Func07D2();
			GUARD17->set_schedule_type(WAIT);
			var0000 = script GUARD17 after 10 ticks {
				nohalt;
				call Func04BE;
			};
		} else {
			GUARD17->clear_item_say();
			GUARD17->run_schedule();
			AUTOMATON_FACE->show_npc_face0(0x0000);
			say("\"Thou art not permitted here! I and my kind are the only beings allowed to prowl these tunnels. We are here to maintain Order.\"");
			say("\"Unless thou canst show me thy Medallion of Order, I shall have to slay thee. Dost thou have one?\"");
			if (Func0955()) {
				var0000 = ("@But " + Func0954()) + ", we have no such thing!@";
				var0001 = Func0992(0x0001, var0000, 0x0000, false);
				if (var0001 != AVATAR) {
					0x0000->set_conversation_slot();
					say("\"Aha! Then die, Spawn of Chaos!\"");
					Func097F(GUARD17, "@To battle!@", 0x0000);
				} else {
					say("\"Thou dost lie! Now I must certainly slay thee.\"");
					Func097F(GUARD17, "@Die, Spawn of Chaos!@", 0x0000);
				}
			} else {
				say("\"Then die, Spawn of Chaos!\"");
				Func097F(GUARD17, "@To battle!@", 0x0000);
			}
			Func09AD(GUARD17);
		}
	}
}

extern void Func0808 0x808 (var var0000, var var0001);

void Func04BF object#(0x4BF) () {
	var var0000;
	var var0001;

	var0000 = "Stefano";
	var0001 = 0x0002;
	Func0808(var0000, var0001);
}

extern void Func0808 0x808 (var var0000, var var0001);

void Func04C0 object#(0x4C0) () {
	var var0000;
	var var0001;

	var0000 = "Mortegro";
	var0001 = 0x0002;
	Func0808(var0000, var0001);
}

extern void Func0808 0x808 (var var0000, var var0001);

void Func04C1 object#(0x4C1) () {
	var var0000;
	var var0001;

	var0000 = "Seminarium";
	var0001 = 0x0002;
	Func0808(var0000, var0001);
}

extern void Func0808 0x808 (var var0000, var var0001);

void Func04C2 object#(0x4C2) () {
	var var0000;
	var var0001;

	var0000 = "Pothos";
	var0001 = 0x0007;
	Func0808(var0000, var0001);
}

extern void Func0809 0x809 ();

void Func04C5 object#(0x4C5) () {
	if (get_item_flag(SI_ZOMBIE)) {
		Func0809();
		abort;
	}
}

extern void Func0808 0x808 (var var0000, var var0001);

void Func04C6 object#(0x4C6) () {
	var var0000;
	var var0001;

	var0000 = "Rocco";
	var0001 = 0x0008;
	Func0808(var0000, var0001);
}

extern void Func0808 0x808 (var var0000, var var0001);

void Func04C7 object#(0x4C7) () {
	var var0000;
	var var0001;

	var0000 = "Rocco";
	var0001 = 0x0009;
	Func0808(var0000, var0001);
}

extern void Func0808 0x808 (var var0000, var var0001);

void Func04C8 object#(0x4C8) () {
	var var0000;
	var var0001;

	var0000 = "Rocco";
	var0001 = 0x000A;
	Func0808(var0000, var0001);
}

extern void Func097F 0x97F (var var0000, var var0001, var var0002);

void Func04C9 object#(0x4C9) () {
	var var0000;
	var var0001;
	var var0002;

	var0000 = D_CANTRA->get_item_flag(MET);
	if (event == DEATH) {
		CANTRA->show_npc_face0(0x0000);
		say("\"Why dost thou attack me? Do thine eyes deceive thee so?\" *\"Slay the foul bane that wishes to devour me instead! If it is not stopped, it will destroy us all!\" *\"I can stand this nightmare no more...\"");
		UI_remove_npc_face0();
		var0001 = get_object_position();
		UI_play_sound_effect(0x0074);
		UI_sprite_effect(ANIMATION_SMALL_RING_BLAST, var0001[0x0001], var0001[0x0002], 0x0000, 0x0000, 0x0000, LOOP_ONCE);
		D_CANTRA->remove_npc();
	}
	if (event == PROXIMITY) {
		var0002 = UI_die_roll(0x0001, 0x0004);
		if (var0002 == 0x0001) {
			Func097F(D_CANTRA, "@Make it stop!@", 0x0000);
		}
		if (var0002 == 0x0002) {
			Func097F(D_CANTRA, "@It will kill me!@", 0x0000);
		}
		if (var0002 == 0x0003) {
			Func097F(D_CANTRA, "@Canst thou not see it!@", 0x0000);
		}
		if (var0002 == 0x0004) {
			Func097F(D_CANTRA, "@It is pure evil!@", 0x0000);
		}
	}
	if (event == DOUBLECLICK) {
		if (var0000 != true) {
			CANTRA->show_npc_face0(0x0000);
			say("\"Iieeeee.... Help me!\" ~\"I cannot escape...\" ~\"It will catch and devour me!\" *\"Canst thou not see it? Please, help me!\"");
			D_CANTRA->set_item_flag(MET);
			UI_remove_npc_face0();
			D_CANTRA->set_schedule_type(PATROL);
			abort;
		}
		CANTRA->show_npc_face0(0x0000);
		say("\"Art thou blind! Canst thou not see the foul beast?\" *\"Have mercy! I beg thee to slay such an horror! Please, thou must kill it before it takes me!\"");
		UI_remove_npc_face0();
		D_CANTRA->set_schedule_type(PATROL);
		abort;
	}
}

extern void Func0809 0x809 ();
extern void Func0924 0x924 (var var0000, var var0001);
extern void Func097F 0x97F (var var0000, var var0001, var var0002);

void Func04CA object#(0x4CA) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;
	var var0008;
	var var0009;
	var var000A;
	var var000B;
	var var000C;

	if (get_item_flag(SI_ZOMBIE)) {
		Func0809();
		abort;
	}
	var0000 = METAL_MAN->get_item_flag(MET);
	if (event == DOUBLECLICK) {
		METAL_MAN->clear_item_say();
		AUTOMATON_FACE->show_npc_face0(0x0000);
		if (!var0000) {
			say("\"Halt! Only a true follower of Order may pass this portal. Art thou such a disciple?\"");
			add(["I follow Order", "I follow Chaos"]);
		} else if (gflags[OPENED_SPINEBREAKER_DOOR]) {
			say("\"'Tis good to see thee again, scholar of Order.\"");
			say("\"I surmise thou didst come across with the others.\"");
			add(["door locked", "others", "bye"]);
		} else {
			say("\"Oh, 'tis only thee. I hope that thou hast become more learned in the ways of Order, lest thou wilt not be permitted to enter the grand shrine.\"");
			add(["Give me the test", "grand shrine", "bye"]);
		}
		converse (0) {
			case "I follow Order":
				remove(["I follow Order", "I follow Chaos"]);
				say("\"That may be, but I must test thy knowledge before I permit thee access to the grand shrine.\"");
				add(["test", "grand shrine", "bye"]);
				fallthrough;

			case "test" (remove):
				say("\"Though I doubt one such as thee would attempt to deceive me, many 'followers' of late do not appear to truly be devoted to Order.\"");
				say("\"In truth, I believe them to be impostors, though they did answer the question I put to them.\"");
				add(["impostors", "question"]);
				fallthrough;

			case "question" (remove):
				say("\"To insure that thou art a true student of Order, I will ask thee to complete a line from one of our greatest books and thou must name the book.\"");
				say("\"Only a devout student of Order would know the answer.\"");
				add(["Give me the test"]);
				fallthrough;

			case "Give me the test" (remove):
				say("\"Which book tells us, ~'Being sincere and fair in all of thy transactions will provide thee with more power than thou ever hadst.'\"*");
				say("\"'Thou wert strong, thou wilt be stronger. Thy strength will be exalted in truth.'\"");
				UI_push_answers();
				add(["Strength Though Ethics", "Guidelines of Life", "Tenets of Discipline"]);
				if (gflags[READ_STRUCTURE_OF_ORDER]) {
					add(["The Structure of Order"]);
				} else {
					add(["The Joy of Order"]);
				}
				fallthrough;

			case "Strength Though Ethics":
				UI_pop_answers();
				say("\"An excellent book, one that can guide a disciple of Order to new consciousness. I would recommend that thou readest it. Then thou wouldst realize that the answer thou didst give was incorrect.\"");
				add(["Give me the test"]);
				fallthrough;

			case "Tenets of Discipline":
				UI_pop_answers();
				say("\"Shushuro was a great man indeed. If only mine hollow head could be so enlightened. But at least I realize my quote was not from that book's pages. Mayhap thou shouldst return to the city and examine thy books further.\"");
				add(["Give me the test"]);
				fallthrough;

			case "Guidelines of Life":
				UI_pop_answers();
				say("\"A masterpiece! Indeed, its words of wisdom could educate thee very well. Then thou wouldst be enlightened to learn that the book thou didst name doth not contain any such quote.\"");
				say("\"Mayhap thou dost need to study more at the Hierophant's library. 'Tis a wondrous place full of the wisdom of Order.\"");
				add(["Give me the test"]);
				fallthrough;

			case "The Joy of Order":
				UI_pop_answers();
				say("\"Curious, I have never heard of that book. Methinks that thou art trying to deceive me. Please, do us both a service and return thou to the library for further study.\"");
				add(["Give me the test"]);
				fallthrough;

			case "The Structure of Order" (remove):
				UI_pop_answers();
				say("\"Ah, so thou art a true accolyte of Order. I will permit thee to enter the Grand Shrine.\"");
				UI_remove_npc_face0();
				var0001 = find_nearby(0x0314, 0x001E, MASK_NONE);
				for (var0004 in var0001 with var0002 to var0003) {
					var0005 = var0004->get_item_quality();
					if (var0005 == 0x0000) {
						var0006 = var0004->set_item_quality(0x0096);
						gflags[OPENED_SPINEBREAKER_DOOR] = true;
						var0007 = var0004->get_object_position();
						UI_play_sound_effect(0x001E);
						Func0924(var0004, 0x0001);
					}
					if (var0005 == 0x0078) {
						var0006 = var0004->set_item_quality(0x0093);
					}
				}
				var0001 = find_nearby(0x036C, 0x0014, MASK_NONE);
				for (var000A in var0001 with var0008 to var0009) {
					var0006 = var000A->set_item_quality(0x0093);
				}
				var0001 = find_nearby(0x03A7, 0x0014, MASK_NONE);
				for (var000A in var0001 with var000B to var000C) {
					var0006 = var000A->set_item_quality(0x0093);
					var0001 = find_nearby(0x0314, 0x0014, MASK_NONE);
					var0005 = var0004->get_item_quality();
					if (var0005 == 0x0093) {
						Func0924(var0004, 0x0000);
					}
				}
				Func097F(METAL_MAN, "@Seek Order.@", 0x0003);
				abort;

			case "grand shrine" (remove):
				say("\"At the end of this corridor lies the grand shrine of Order. That is where the Hierophant performs the ceremony to open the Wall of Lights.\"");
				fallthrough;

			case "impostors" (remove):
				say("\"Though I should not speak such, they appeared to be, shall we say, less than intelligent. They seemed to have great difficulty with answering the most modest of my queries.\"");
				say("\"One of their number even threatened to tear me limb from limb if I failed to open this portal. But it was the large one who answered all the questions correctly. He alone was no dolt.\"");
				add(["large one"]);
				fallthrough;

			case "others" (remove):
				say("\"The others that I spoke about earlier. Or did I mention them? I thought that I mentioned that the 'disciples' of late do not appear to be truly devout.\"*");
				say("\"In truth, I believed them to be impostors, though they passed the test I put upon them.\"");
				add(["impostors"]);
				fallthrough;

			case "large one" (remove):
				say("\"He was an impressive man, in both size and intellect. He appeared to have the combined intellect that the rest of the party lacked.\"*");
				say("\"He answered my questions easily, though in truth I cannot remember what I asked of him.\"");
				fallthrough;

			case "door locked" (remove):
				say("\"I am truly sorry, but I can only operate these doors. I know nothing about any other doors in this place.\"");
				fallthrough;

			case "I follow Chaos" (remove):
				say("\"Then thou shalt not pass.\"");
				Func097F(METAL_MAN, "@Duty.@", 0x0003);
				METAL_MAN->set_schedule_type(PATROL);
				break;

			case "bye":
				UI_remove_npc_face0();
				UI_remove_npc_face1();
				Func097F(AVATAR, "@I have heard enough.@", 0x0000);
				Func097F(METAL_MAN, "@Always follow Order.@", 0x0003);
				METAL_MAN->set_schedule_type(PATROL);
				break;
		}
	}
}

extern void Func07D1 object#(0x7D1) ();
extern void Func0919 0x919 (var var0000);

void Func04CB object#(0x4CB) () {
	if (event == DOUBLECLICK) {
		AVATAR->item_say("Excuse me...");
		HENCH2->Func07D1();
		Func0919(item);
	}
	if ((event == DEATH) && get_item_flag(SI_TOURNAMENT)) {
		clear_item_flag(SI_TOURNAMENT);
		reduce_health(0x0032, NORMAL_DAMAGE);
		Func0919(item);
	}
	if ((event == SI_PATH_SUCCESS) || (event == SI_PATH_FAILURE)) {
		set_schedule_type(WAIT);
	}
	if (event == SCRIPTED) {
		HENCH2->Func07D1();
		Func0919(item);
	}
}

extern void Func07D1 object#(0x7D1) ();
extern void Func0919 0x919 (var var0000);

void Func04CC object#(0x4CC) () {
	if (event == DOUBLECLICK) {
		AVATAR->item_say("Excuse me...");
		HENCH3->Func07D1();
		Func0919(item);
	}
	if ((event == DEATH) && get_item_flag(SI_TOURNAMENT)) {
		Func0919(item);
		clear_item_flag(SI_TOURNAMENT);
		reduce_health(0x0032, NORMAL_DAMAGE);
	}
}

extern var Func0954 0x954 ();
extern var Func0953 0x953 ();
extern void Func07D1 object#(0x7D1) ();
extern void Func09AD 0x9AD (var var0000);
extern void Func097F 0x97F (var var0000, var var0001, var var0002);
extern var Func09A0 0x9A0 (var var0000, var var0001);

void Func04CD object#(0x4CD) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;

	var0000 = Func0954();
	var0001 = UI_is_pc_female();
	var0002 = Func0953();
	if (event == DOUBLECLICK) {
		AVATAR->item_say("Could we speak?");
		HENCH1->Func07D1();
		Func09AD(HENCH1);
	}
	if (event == PROXIMITY) {
		var0003 = HENCH1->get_distance(AVATAR);
		if (UI_get_random(0x000C) > var0003) {
			Func097F(item, "@'Tis him!@", 0x0005);
			Func09AD(HENCH1);
		} else {
			if (UI_get_music_track() != 0x000C) {
				UI_play_music(0x000C, Func09A0(0x0005, 0x0001));
			}
			var0004 = UI_get_random(0x0006);
			if (var0004 == 0x0001) {
				HENCH1->item_say("@I am hungry!@");
			}
			if (var0004 == 0x0002) {
				HENCH1->item_say("@Where is the food?@");
			}
			if (var0004 == 0x0003) {
				HENCH1->item_say("@Nothing but dust...@");
			}
			if (var0004 == 0x0004) {
				HENCH1->item_say("@Must eat...@");
			}
			if (var0004 == 0x0005) {
				HENCH1->item_say("@There must be food!@");
			}
			if (var0004 == 0x0006) {
				HENCH1->item_say("@So hungry!@");
			}
		}
	}
	if ((event == DEATH) && get_item_flag(SI_TOURNAMENT)) {
		clear_item_flag(SI_TOURNAMENT);
	}
}

extern void Func0808 0x808 (var var0000, var var0001);

void Func04CE object#(0x4CE) () {
	var var0000;
	var var0001;

	var0000 = "Ducio";
	var0001 = 0x000B;
	Func0808(var0000, var0001);
}

extern var Func0954 0x954 ();
extern var Func0994 0x994 ();
extern var Func0953 0x953 ();
extern void Func07D1 object#(0x7D1) ();
extern void Func097F 0x97F (var var0000, var var0001, var var0002);
extern var Func09A0 0x9A0 (var var0000, var var0001);
extern var Func08F8 0x8F8 (var var0000, var var0001, var var0002);
extern var Func08B6 0x8B6 ();
extern var Func095C 0x95C (var var0000, var var0001);
extern void Func095E 0x95E (var var0000, var var0001, var var0002);
extern var Func084E 0x84E (var var0000, var var0001);
extern var Func0955 0x955 ();
extern var Func097D 0x97D (var var0000, var var0001, var var0002, var var0003, var var0004);
extern var Func08FC 0x8FC ();
extern var Func099B 0x99B (var var0000, var var0001, var var0002, var var0003, var var0004, var var0005, var var0006);
extern void Func08FE 0x8FE ();
extern void Func08FA 0x8FA ();
extern var Func0992 0x992 (var var0000, var var0001, var var0002, var var0003);
extern void Func08F5 0x8F5 (var var0000);
extern void Func0612 object#(0x612) ();

void Func04CF object#(0x4CF) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;
	var var0008;
	var var0009;
	var var000A;
	var var000B;
	var var000C;
	var var000D;
	var var000E;
	var var000F;
	var var0010;
	var var0011;
	var var0012;
	var var0013;
	var var0014;
	var var0015;
	var var0016;
	var var0017;
	var var0018;
	var var0019;
	var var001A;
	var var001B;
	var var001C;
	var var001D;
	var var001E;
	var var001F;
	var var0020;
	var var0021;
	var var0022;

	var0000 = Func0954();
	var0001 = UI_is_pc_female();
	var0002 = "son";
	var0003 = Func0994();
	var0004 = "his";
	if (UI_is_pc_female()) {
		var0004 = "her";
	}
	if (var0001) {
		var0002 = "daughter";
	}
	var0005 = Func0953();
	if (event == SCRIPTED) {
		if (gflags[KARNAX_WITNESSED_SEED_PLANTING]) {
			KARNAX->item_say("@What a wonder!@");
			KARNAX->Func07D1();
			KARNAX->show_npc_face0(0x0000);
			say("\"I am honored to have been present for such a miracle! Even I had not expected anything this momentous.");
			if (gflags[BANES_RELEASED]) {
				say("\"Now that the Tree of Balance thrives in this hallowed glade, it's strong roots shall begin healing the wrents in our land.");
				say("\"Once thou hast restored Balance to our world, who knows what miracles may occur? I have even heard it said that the souls of the dead shall be returned to life once Balance is restored.");
				say("\"Only time shall tell. But now, my ",
					var0002,
					", it is time that I return thee to thy quest.\"");
			} else {
				say("\"With the Tree of Balance firmly rooted in this hallowed glade, thy task of restoring Balance to the world will be much easier, my ",
					var0002,
					".");
				say("\"Now, my ",
					var0002,
					", it is time that you return to thy quest.\"");
			}
			UI_remove_npc_face0();
			var0006 = KARNAX->get_object_position();
			UI_sprite_effect(ANIMATION_TELEPORT2, var0006[0x0001], var0006[0x0002], 0x0000, 0x0000, 0x0000, LOOP_ONCE);
			KARNAX->remove_npc();
		} else {
			KARNAX->item_say(("@Well done, my " + var0002) + "!@");
			KARNAX->Func07D1();
			KARNAX->show_npc_face0(0x0000);
			say("\"Thou hast found the Silver Seed! Now all that remains is for thee to plant it here in this hallowed glade.");
			say("\"Xenka's prophecies spoke of the Hero restoring the Tree of Balance. But even Xenka herself could not say where the seed of such a tree could be found.");
			say("\"When the Forest Master first entered our world we thought that perhaps he was to be the Hero from Another World. But we learned that the seed he possessed had been warped by his passage through the Void. It will never grow...\"");
			say("\"Until Miggim found the Amulet of Balance, we had not even considered that the Ophidians knew anything of the Tree of Balance.");
			say("\"Plant it here in this dark patch of rich ground in front of the waterfall, my ",
				var0002,
				". It looks just large enough for the seed, as if it were the seed's very own cradle. The water here will nourish it well.\"");
			UI_remove_npc_face0();
			Func097F(KARNAX, "@Plant it now.@", 0x0002);
		}
	}
	if (event == DOUBLECLICK) {
		if (KARNAX->get_npc_id() != 0x0000) {
			abort;
		}
		AVATAR->item_say("@Pardon me...@");
		KARNAX->Func07D1();
		Func097F(KARNAX, (("@Yes, my " + var0002) + "?@"), 0x0002);
		KARNAX->set_schedule_type(TALK);
	}
	if (event == PROXIMITY) {
		if ((Func09A0(0x0005, 0x0001)->get_item_quality() == 0x000A) && (!XENKA->get_item_flag(MET))) {
			KARNAX->set_schedule_type(WAIT);
			var0007 = script Func09A0(0x0005, 0x0003) {
				nohalt;
				call Func0109;
			};
		}
	}
	if (event == STARTED_TALKING) {
		KARNAX->run_schedule();
		KARNAX->clear_item_say();
		KARNAX->show_npc_face0(0x0000);
		var0008 = KARNAX->get_item_flag(MET);
		var0009 = false;
		if (KARNAX->get_npc_id() == 0x001F) {
			KARNAX->set_npc_id(0x0000);
			say("\"The bells are signaling the return of Xenka!\"");
			say("\"Thou art the Hero from Another World. It is for thee that she doth return. We must hurry!\"");
			var000A = AVATAR->get_object_position();
			if (Func08F8(var000A, [0x0950, 0x0470], [0x097E, 0x0486])) {
				say("\"Prepare yourselves for the coming of Xenka!\"");
			}
			UI_remove_npc_face0();
			AVATAR->clear_item_flag(FREEZE);
			var000B = Func08B6();
			var000B = [AVATAR, var000B];
			var000C = [0x0967, 0x047C, 0x0000];
			var000D = [ 0, -1,  1,  0, -1,  1,  0, -1,  1];
			var000E = [-1, -1, -1,  0,  1,  1,  1,  0,  0];
			var000F = 1;
			UI_sprite_effect(ANIMATION_TELEPORT, var000C[0x0001], var000C[0x0002], 0x0000, 0x0000, 0x0000, LOOP_ONCE);
			UI_play_sound_effect(0x0051);
			for (var0012 in var000B with var0010 to var0011) {
				if (!var0012->get_item_flag(SI_ZOMBIE)) {
					var0012->set_schedule_type(FOLLOW_AVATAR);
				}
				var0012->set_temperature(0x0000);
				var0012->clear_item_flag(ASLEEP);
				var0012->clear_item_flag(CHARMED);
				var0012->clear_item_flag(CURSED);
				var0012->clear_item_flag(DEAD);
				var0012->clear_item_flag(PARALYZED);
				var0012->clear_item_flag(POISONED);
				var0012->clear_item_flag(DONT_MOVE);
				var0013 = Func095C(var0012, STRENGTH);
				var0014 = Func095C(var0012, HEALTH);
				if (var0013 > var0014) {
					var0015 = var0013 - var0014;
					Func095E(var0012, HEALTH, var0015);
				}
				var0016 = Func095C(var0012, FOODLEVEL);
				var0017 = 31 - var0016;
				Func095E(var0012, FOODLEVEL, var0017);
				var0018 = [(var000C[0x0001] + var000D[var000F]), (var000C[0x0002] + var000E[var000F]), var000C[0x0003]];
				var0012->move_object(var0018);
				var0012->halt_scheduled();
				var0012->clear_item_say();
				var0007 = script var0012 {
					face north;
				};
				var000F += 0x0001;
			}
			var000C = [];
			var0018 = [];
			var000D = [];
			var000E = [];
			var0019 = [KARNAX, THOXA, MIGGIM, BRACCUS, DRAXTA, SILENT1, SILENT2, SILENT3];
			var001A = 0x000A;
			for (var0012 in var0019 with var001B to var001C) {
				var001D = Func084E(var0012, var001A);
				var0012->move_object(var001D);
				var0012->set_new_schedules(MIDNIGHT, WAIT, var001D);
				var0012->run_schedule();
				var0012->set_schedule_type(WAIT);
				var0007 = script var0012 {
					face north;
					actor frame standing;
					actor frame cast_up;
					actor frame sitting;
				};
			}
			var0007 = script Func09A0(0x0002, 0x0001) {
				call Func0109;
			};
			abort;
		}
		if (!KARNAX->get_item_flag(MET)) {
			say("\"I am Karnax, a Xenkan monk. Please forgive our previous meeting, my ",
				var0002,
				".\"");
			say("\"I have nothing against thee, but I fear that Thoxa's willful interference shall be the undoing of all for which we have prepared.\"");
			KARNAX->set_item_flag(MET);
			add(["previous meeting", "Thoxa", "interference"]);
		} else {
			if ((gflags[SEEKING_SCROLL_OF_SERPENT] == true) && (!gflags[KARNAX_HAS_SCROLL_OF_SERPENT])) {
				say("\"Hast thou returned with the scroll?\"");
				if (Func0955() == true) {
					say("\"Very good! Now, if I may see it, I may be able to unlock the secret to restoring thy lady friend.\"");
					var001E = Func097D(PARTY, 0x0001, 0x02C3, 0x0050, FRAME_ANY);
					if (var001E == true) {
						var0007 = UI_remove_party_items(0x0001, 0x02C3, 0x0050, 0x0000, 0x0000);
						gflags[KARNAX_HAS_SCROLL_OF_SERPENT] = true;
						say("\"I have it now.\"");
						add("the secret");
					} else {
						say("\"Thou dost not have the serpent scroll!\"");
					}
				} else {
					say("\"Without access to that scroll I can be of no further use to thee. Dost thou not remember what I told thee?\"");
					say("\"Fedabiblio had something he referred to as the Scroll of the Serpent. I believe that it may have the information I need to help restore thy lady friend. Bring it to me, and I will aid thee as I can.\"");
				}
			} else {
				say("\"Time grows short, my ",
					var0002,
					". I shall aid thee as I can.\"");
			}
			if (gflags[KARNAX_HAS_SCROLL_OF_SERPENT] == true) {
				add("the secret");
			}
			add(["prophecies", "Thoxa"]);
		}
		var000B = Func08B6();
		var000B = [AVATAR, var000B];
		for (var0012 in var000B with var001F to var0020) {
			var0012->clear_item_flag(ASLEEP);
		}
		AVATAR->clear_item_flag(DONT_MOVE);
		if (gflags[KARNAX_HAS_SCROLL_OF_SERPENT] && (!gflags[GOT_WATER_OF_DISCIPLINE])) {
			add("the secret");
		}
		if (gflags[TALKED_TO_GWANI_ABOUT_GWENNO]) {
			add("Gwenno");
		}
		if (gflags[AVATAR_IS_DEAD]) {
			add("leave Monk Isle");
		} else {
			add(["bye"]);
		}
		if (Func08FC()) {
			say("\"Oh! One of thy friends hath met an untimely end. This should not be...\"");
			say("\"If thou art ready to see thy friend again, ask and I will return them to thee.\"");
			add("resurrection");
		}
		if (gflags[SERPENT_GWENNO_BANE_SPEECH] && (!gflags[SEEKING_SCROLL_OF_SERPENT])) {
			add("Bane of Chaos");
		}
		if (!gflags[HAVE_AMULET_OF_BALANCE]) {
			say("\"Lest I forget... We have recently made a discovery which I believe shall aid thee, my ",
				var0002,
				".\"");
			add("discovery");
		} else {
			add("Amulet of Balance");
		}
		converse (0) {
			case "discovery" (remove):
				say("\"While searching for more materials for the library, Miggim discovered an ancient chest in the passages beneath our abbey, near the Serpent gate.");
				say("\"Within this chest was a strange amulet and a scrap of decaying scroll. The scroll indicated that this is the Amulet of Balance. It is our thought that this amulet was meant for thee, my ",
					var0002,
					".");
				say("\"I shall caution thee that we do not know what powers it has, for the scroll disintegrated before Miggim could fully translate it.");
				say("\"But I am certain it is connected to the Serpent ruins in some manner. Perhaps if thou dost use it near the Serpent gate thou wilt trigger its power.\"");
				var0007 = Func099B(AVATAR, 0x0001, 0x03BB, 0x0000, 0x0009, 0x0000, true);
				var0021 = Func09A0(0x0000, 0x0001);
				var0007 = script var0021 {
					nohalt;
					call Func0612;
				};
				gflags[HAVE_AMULET_OF_BALANCE] = true;
				fallthrough;

			case "Amulet of Balance" (remove):
				var0007 = Func097D(PARTY, 0x0001, 0x03BB, 0x0000, 0x0009);
				if (var0007) {
					say("\"We are searching all of our references for further information on thy Amulet, my ",
						var0002,
						". But, as of yet, we have discovered nothing more than what I have already told thee...");
					say("\"It was used at the Serpent gates, but we know not what it does.\"");
				} else {
					say("\"If thou hast lost the Amulet, my ",
						var0002,
						", I know not how to aid thee. As far as any of us know, there was but one... The one I gave thee.");
					say("\"I am sorry. Thou must needs search for it thyself. I fear I cannot aid thee in this.\"");
				}
				fallthrough;

			case "resurrection" (remove):
				Func08FE();
				fallthrough;

			case "leave Monk Isle":
				Func08FA();
				fallthrough;

			case "previous meeting" (remove):
				say("\"When I came to try to dissuade Thoxa from aiding thee directly it was not an attack against thee.\"");
				say("\"The prophecies state that those seeking to be thy friends shall bring about the downfall of thy quest. That is not why we have dedicated our lives.\"");
				add(["dissuade", "prophecies", "dedicated"]);
				fallthrough;

			case "dissuade" (remove):
				say("\"I sought to win her away from her foolishness by rational argument. Regrettably, it became a test of magics.\"");
				say("\"As thou canst see, Thoxa and I are both skilled enough that we both yet live.\"");
				add(["magics", "skilled"]);
				fallthrough;

			case "magics" (remove):
				say("\"Unlike the unenlightened Mages of Moonshade, our powers come not from moldering reagents.\"");
				say("\"The power of a Xenkan monk comes from a connection to the limitless Void that surrounds the universe.\"");
				add(["Mages", "Void"]);
				fallthrough;

			case "Mages" (remove):
				say("\"The Mages of Moonshade are but mere children playing at the arts they have not the patience to learn.\"");
				say("\"True magic comes after long years of meditation and self-sacrifice.\"");
				fallthrough;

			case "Void" (remove):
				say("\"Consider the Void to be the frame within which our Cosmos is bound. It is the source of unimagined power...\"");
				say("\"Power that thou mayest draw upon freely, if thou hast forged a gateway into it through long meditation.\"");
				fallthrough;

			case "skilled" (remove):
				say("\"Unlike the silent novices that thou dost see among us, Thoxa and I have both forged gateways into the power of the Void.\"");
				say("\"By tapping into this stream, any confirmed Xenkan monk can surmount his or her own death. But there are still some things that remain beyond any one monk's power and require the concerted effort of us all.\"");
				add("some things");
				fallthrough;

			case "some things" (remove):
				say("\"Manipulation of time and space requires more power than one monk can channel.\"");
				say("\"So teleportation and resurrection require that all the monks conjoin their power.\"");
				fallthrough;

			case "prophecies" (remove):
				say("\"Xenka was given visions of the ending of our world.\"");
				say("\"However, she was barely literate, and needed others to act as scribes for her convoluted visions.\"");
				add(["ending of the world", "Xenka"]);
				fallthrough;

			case "ending of the world" (remove):
				say("\"Xenka foresaw that people would turn from their basic goodness until the very land itself would rise up in revolt against their twisted ways.\"");
				var0022 = Func0992(0x0001, "@Grim tidings, indeed.@", 0x0000, false);
				0x0000->set_conversation_slot();
				say("\"Even now the storms flay the land. Soon the earthquakes will unleash the fire that will engulf the world.\"");
				add(["storms", "earthquakes"]);
				fallthrough;

			case "storms" (remove):
				say("\"The storms are what conveyed thee here, my ",
					var0002,
					".\"");
				say("\"Doth natural lightning do aught but kill? Doth normal lightning transport an item thousands of leagues from where once it stood?\"");
				say("\"And the storms are growing more frequent and fierce with each passing day.\"");
				fallthrough;

			case "earthquakes" (remove):
				say("\"The land is a living entity, my ",
					var0002,
					".\"");
				say("\"Have no doubt that it will convulse as death draws near, even as a man.\"");
				say("\"And where will we insignificant mortals be once the land which nurtures us heaves its last, explosive breath?\"");
				fallthrough;

			case "Xenka" (remove):
				say("\"Xenka was a cross farm-wife who saw her visions as a means to have others do her work for her.\"");
				say("\"Yet despite her human failings, her visions are true... Thou art here, even if she is not.\"");
				add("she is not");
				fallthrough;

			case "she is not" (remove):
				say("\"Xenka disappeared quite some time ago. Many think that she will return to deliver the final key to saving our doomed world.\"");
				say("\"I think that her visions had left her and she slunk quietly away to die in obscurity.\"");
				gflags[KNOWS_ABOUT_XENKA] = true;
				fallthrough;

			case "dedicated" (remove):
				say("\"Those that live within this abbey believe that Xenka's prophecies hold the key to diverting the fiery end that awaits the world.\"");
				say("\"Our numbers have decreased with time, for even Xenkan monks die from age. And few of the youths are willing to serve such a nihilistic prophecy.\"");
				add("the key");
				fallthrough;

			case "the key" (remove):
				say("\"I do not know if Xenka's visions were full of diverse images or if she couched them in such terms out of peevishness.\"");
				say("\"Whatever the case may be, her prophecies run round the edge of what must be known and it can take years to decipher the meaning of a single vision.\"");
				fallthrough;

			case "Thoxa" (remove):
				say("\"Thoxa is a very bright young woman, who would like to feel that she hath single-handedly saved the world.\"");
				say("\"It doth go against the grain of her youth to sit and wait for each event to come to pass. What is worse though, is that she hath pulled Miggim into her rashness as well.\"");
				add("Miggim");
				fallthrough;

			case "Miggim" (remove):
				say("\"Miggim is by nature a quiet young man, not given to impetuousness. He is ideally suited to be our librarian.\"");
				say("\"His greatest desire is to be helpful, as well as ordered. In fact, it was he who divined the passage that foretold of thy coming.\"");
				add("librarian");
				fallthrough;

			case "librarian" (remove):
				say("\"He hath taken the chaos of our library and turned it into a vastly more organized area.\"");
				say("\"In fact, I believe that we have the most concise collection of Ophidian books and scrolls that still exists.\"");
				say("\"Of course, it helps that we have the Lens of Translating.\"");
				add(["Ophidian", "Lens"]);
				fallthrough;

			case "Ophidian" (remove):
				say("\"The Ophidians are commonly referred to as the Serpent people because of the embossed serpents found within the ruins of their cities.\"");
				say("\"They had a fully-developed civilization here long before our forefathers fled from the invader British. I believe that they destroyed themselves in a bloody civil war.\"");
				add(["invader British", "civil war"]);
				fallthrough;

			case "invader British" (remove):
				say("\"Our records are incomplete concerning the time of the resettlement. For that, thou shouldst see Fedabiblio in Moonshade.\"");
				say("\"Thou shouldst bear in mind that their accounts are likely to be highly biased in their own favor.\"");
				add("Fedabiblio");
				fallthrough;

			case "Fedabiblio" (remove):
				say("\"Fedabiblio is the master archivist in the city of Mages. He is also a teacher, and will be able to help thee.\"");
				fallthrough;

			case "civil war" (remove):
				say("\"I believe that the Ophidian government disintegrated and their society split into two opposing groups.\"");
				say("\"In the end, one faction apparently slaughtered the other. But all traces of the victors disappear soon after the final battle took place. It is a mystery where they went.\"");
				fallthrough;

			case "interference" (remove):
				say("\"It was determined by all monks that the time for the Hero from Another World was at hand.\"");
				say("\"It was also decided that we would take no direct action to influence the Hero in any way...\"");
				say("\"Thoxa overstepped her bounds by giving thee the Hourglass of Fate.\"");
				add(["Hero", "Hourglass"]);
				fallthrough;

			case "Hero" (remove):
				say("\"All references to the one who can alter the course of destiny allude to the Hero from Another World.\"");
				say("\"Art thou from this land, from New Sosaria?\"");
				if (Func0955() == false) {
					say("\"Dost thou see? When taken with the other signs, it points to thee as the one who alone can save our land.\"");
				} else {
					say("\"Hmmm. Perhaps we have misinterpreted the passage.\"");
					say("\"I shall meditate further on this matter.\"");
				}
				fallthrough;

			case "Hourglass" (remove):
				say("\"The damage hath been done. It is now thine to keep.\"");
				say("\"It was designed so that we might be able to gauge when certain events were nigh. Perhaps it will serve thee better. I do not know.\"");
				fallthrough;

			case "Lens" (remove):
				say("\"It is the large device that stands in the center of the library. Anyone using it is able to decipher the cryptic Ophidian writing for a short period of time.\"");
				fallthrough;

			case "Gwenno" (remove):
				if (gflags[FREED_GWENNOS_BODY]) {
					if (gflags[GWENNO_IS_DEAD]) {
						say("\"I share thy grief over the loss of Goodwife Gwenno. I am sure that we can resurrect her, if thou dost wish.\"");
					} else if (!GWENNO->get_item_flag(SI_ZOMBIE)) {
						say("\"It hath been quite a pleasure having Gwenno here, ",
							var0000,
							". She is quite knowledgeable, and shares her wisdom willingly.\"");
					} else {
						say("\"Thy concern for this young woman is well warranted, I fear.\"");
						say("\"Something hath sorely affected her, for I do not believe that she could be so disturbed otherwise.\"");
					}
				} else {
					say("\"Gwenno was our last visitor here, ",
						var0000,
						". After she departed, the storms made travel to our island impossible. I was not able to speak with her as much as I wished. She spent quite a bit of time within our library.\"");
				}
				fallthrough;

			case "Bane of Chaos" (remove):
				say("\"Curious, the Bane of Chaos is an Ophidian term.\"");
				say("\"Fedabiblio had something he referred to as the Scroll of the Serpent. I believe that it may have the information I need to help restore thy lady friend. Bring it to me, and I will aid thee as I can.\"");
				gflags[SEEKING_SCROLL_OF_SERPENT] = true;
				fallthrough;

			case "the secret" (remove):
				say("\"It all becomes clear!\"");
				say("\"The Ophidians based all their beliefs on six virtues. And the consequences of an imbalance of these virtues are very dire...\"");
				say("\"In fact, it sounds as if they could destroy the world!\"");
				add(["six virtues", "consequences"]);
				fallthrough;

			case "six virtues" (remove):
				say("\"The virtues are: Tolerance, Ethicality, Enthusiasm, Discipline, Emotion and Logic.\"");
				say("\"The anti-virtues -- when there is no balance -- are: Amorality, Wantonness, Insanity, Prejudice, Apathy, and Ruthlessness.\"");
				var0009 = Func097D(PARTY, 0x0001, 0x031D, 0x0082, FRAME_ANY);
				if (var0009 == false) {
					say("\"I will draw thee a chart, so that it might be more clear.\"");
					var0007 = Func099B(AVATAR, 0x0001, 0x031D, 0x0082, 0x0000, 0x0000, true);
					var0009 = true;
				} else {
					say("\"Thou dost have the chart in thy possession that will explain this further.\"");
				}
				fallthrough;

			case "consequences" (remove):
				say("\"Eventually the world will destroy itself... Much like what is happening now.\"");
				say("\"Within a person, like thy friend Gwenno, the lack of Discipline would produce Wantonness... Much like the behavior she is exhibiting now.\"");
				say("\"There does seem to be a cure, however.\"");
				add("cure");
				fallthrough;

			case "cure" (remove):
				say("\"According to this, thou shouldst have the victim drink the water from the temple dedicated to that virtue which the person lacks.\"");
				say("\"It sounds as though thou shouldst bring water from one of the temples... I think that Miggim doth have a book with maps of those ancient temples.\"");
				gflags[KNOWS_IMBALANCE_CURE] = true;
				fallthrough;

			case "bye":
				UI_remove_npc_face0();
				Func097F(AVATAR, "@Many thanks!@", 0x0000);
				Func097F(item, "@Good luck!@", 0x0002);
				break;
		}
		if (gflags[AVATAR_IS_DEAD]) {
			KARNAX->show_npc_face0(0x0000);
			Func08FA();
		}
	}
	if (event == DEATH) {
		Func08F5(KARNAX);
	}
}

extern var Func0988 0x988 (var var0000, var var0001);
extern void Func097F 0x97F (var var0000, var var0001, var var0002);

void Func04D0 object#(0x4D0) () {
	var var0000;
	var var0001;

	if (event == DOUBLECLICK) {
		SILENT2->set_schedule_type(SHY);
		var0000 = SILENT2->find_nearby(0x00FA, 0x000A, MASK_NONE);
		if (SILENT1->get_npc_object() in var0000) {
			var0000 = Func0988(SILENT1->get_npc_object(), var0000);
		}
		if (SILENT2->get_npc_object() in var0000) {
			var0000 = Func0988(SILENT2->get_npc_object(), var0000);
		}
		if (SILENT3->get_npc_object() in var0000) {
			var0000 = Func0988(SILENT3->get_npc_object(), var0000);
		}
		if (var0000) {
			var0001 = var0000[UI_get_random(UI_get_array_size(var0000))];
			Func097F(var0001, "@She hath made a vow.@", 0x0000);
		}
	}
}

extern var Func0954 0x954 ();
extern var Func0994 0x994 ();
extern var Func0953 0x953 ();
extern void Func07D1 object#(0x7D1) ();
extern void Func097F 0x97F (var var0000, var var0001, var var0002);
extern var Func08FC 0x8FC ();
extern void Func08FE 0x8FE ();
extern var Func0942 0x942 (var var0000);
extern void Func08F5 0x8F5 (var var0000);

void Func04D1 object#(0x4D1) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;

	var0000 = Func0954();
	var0001 = UI_is_pc_female();
	var0002 = Func0994();
	var0003 = "son";
	if (var0001) {
		var0003 = "daughter";
	}
	var0004 = Func0953();
	if (event == DOUBLECLICK) {
		if (KARNAX->get_npc_id() != 0x0000) {
			MIGGIM->item_say("@Be silent...@");
			abort;
		}
		AVATAR->item_say("@A moment, monk!@");
		MIGGIM->Func07D1();
		Func097F(MIGGIM, (("@Yes, my " + var0003) + "?@"), 0x0002);
		MIGGIM->set_schedule_type(TALK);
	}
	if (event == STARTED_TALKING) {
		MIGGIM->run_schedule();
		MIGGIM->clear_item_say();
		MIGGIM->show_npc_face0(0x0000);
		var0005 = MIGGIM->get_item_flag(MET);
		if (var0002 == 0x0009) {
			say("\"My name is Miggim. I am the librarian on Monk Isle.\"");
			say("\"I have been awaiting thine arrival...\"");
			MIGGIM->set_item_flag(MET);
			add(["librarian", "Monk Isle", "arrival"]);
		} else if (var0005 == false) {
			say("\"So, thou art the one whose arrival we have been awaiting.\"");
			say("\"I am Miggim, the librarian here on Monk Isle.\"");
			MIGGIM->set_item_flag(MET);
			add(["arrival", "librarian", "Monk Isle"]);
		} else {
			say("\"Welcome to Monk Isle, ",
				var0004,
				". Feel free to visit me in the library whilst thou art here.\"");
			add("library");
		}
		if ((!gflags[PROVED_MARSTEN_IS_TRAITOR]) && (gflags[TOLD_MARSTEN_SERVES_LORD_BRITISH] && (!gflags[RENOUNCED_BRITISH]))) {
			say("\"I have this strange foreboding...\"");
			add("foreboding");
		}
		if (Func08FC()) {
			say("\"Oh! One of thy friends hath met an untimely end. This should not be...\"");
			say("\"If thou art ready to see thy friend again, thou hast merely to ask and I will return them to thee.\"");
			add("resurrection");
		}
		add("Amulet of Balance");
		converse (["aid", "bye"]) {
			case "Amulet of Balance" (remove):
				say("\"It was quite a find, ",
					var0000,
					"! I have been uncovering many small things over the years in the passages beneath the abbey. But this is the first time I have found something as large as a chest.");
				say("\"It was a pity that the scroll that accompanied the Amulet was so fragile. It was one of the oldest I have yet found. All I was able to make out before it disintegrated was the name of the amulet and that it was used near the Serpent gates.");
				say("\"Perhaps this means that there is more yet to be discovered. I shall certainly continue my search.\"");
				fallthrough;

			case "resurrection" (remove):
				Func08FE();
				fallthrough;

			case "aid" (remove):
				if (!gflags[IOLO_MADE_EQUIPMENT_LIST]) {
					say("\"I must be cautious in aiding thee, ",
						var0000,
						". But I can say that thou shouldst strive to keep thy three stalwart companions at thy side.\"");
					say("\"Thy friend -- the master of song and mirth -- must be found before thou dost venture on.\"");
				} else {
					say("\"I must be cautious in aiding thee, ",
						var0000,
						". But rest assured that I will prompt thee as much as possible.\"");
				}
				fallthrough;

			case "foreboding" (remove):
				say("\"I see that thou hast earned the enmity of the leader of warriors, ",
					var0000,
					". Without his favor, and the might of Monitor, thou canst not hope to further thy quest.\"");
				say("\"Only by renouncing thy friend and patron, the ruler who sent thee here, canst thou hope to continue on.\"");
				if (Func0942(DUPRE)) {
					DUPRE->show_npc_face1(0x0000);
					say("\"Why, that is unthinkable! I have never heard of such a preposterous thing!\"");
					UI_remove_npc_face1();
					Func097F(DUPRE, "@Rubbish!@", 0x0000);
					0x0000->set_conversation_slot();
				}
				fallthrough;

			case "librarian" (remove):
				say("\"'Tis my duty to transcribe and care for the prophecies of Xenka.\"");
				say("\"It was I that found the passages that told of thy coming.\"");
				add(["Xenka", "passage"]);
				fallthrough;

			case "Xenka" (remove):
				say("\"She was a very wise woman, ",
					var0000,
					".\"");
				say("\"She foretold the storms that brought thee to our land, and saw the end of the world.\"");
				say("\"Those who believed in her visions banded together to study her words so that we might help avert the fate she foresaw.\"");
				add(["end of the world"]);
				fallthrough;

			case "end of the world" (remove):
				say("\"Within Xenka's holy writings is the passage -- 'When at last the great scales unhinge, the overburdened world shall be torn asunder by the opposing forces.'\"");
				add(["great scales", "opposing forces"]);
				fallthrough;

			case "great scales" (remove):
				say("\"It could mean anything, ",
					var0004,
					". Music scales, map scales, snake scales, or weight scales...\"");
				fallthrough;

			case "opposing forces" (remove):
				say("\"I know not... Though I would hazard a guess that it refers to the forces of good and evil.\"");
				fallthrough;

			case "passage" (remove):
				say("\"Alas, Xenka's writings follow no order and are convoluted and vague.\"");
				say("\"We have spent the years since her disappearance trying to decide if some passage hath already happened or if one event will follow another.\"");
				add(["disappearance", "event"]);
				fallthrough;

			case "disappearance" (remove):
				say("\"Xenka was not a young woman, ",
					var0004,
					". After she disappeared from our midst, we found a freshly-inked passage that promised her return when the end was near.\"");
				say("\"I always thought that she had discovered some way to ensure that she would live to see her prophecies revealed. Though I know not how.\"");
				fallthrough;

			case "event" (remove):
				say("\"The events in the prophecies are wild and connected by no frame that we have been able to discover...\"");
				say("\"'Great storms, the containers of hope smashed, lost love forgiven and restored' -- we still seek their meanings.\"");
				fallthrough;

			case "Monk Isle" (remove):
				say("\"Monk Isle is where the followers of Xenka dwell, ",
					var0004,
					".\"");
				say("\"Only a few believers remain to study and contemplate the mystery of her words. Few are now willing to devote their life to waiting on events that may take centuries to unfold. Faith is not an\teasy thing...\"");
				fallthrough;

			case "arrival" (remove):
				say("\"Yes, ",
					var0004,
					", 'tis written that a hero from another world will come to right the disorder in our land. That is thee...\"");
				if (var0002 == 0x0009) {
					say("\"'Tis also written that treachery will stalk thy steps at the beginning of thy quest. That is why I am here...\"");
					say("\"Not all of Xenka's followers believe that we should take direct action in aiding thee. However, Thoxa and I disagree.\"");
					add("action");
				}
				fallthrough;

			case "action" (remove):
				say("\"I believe that an attempt will be made on thy life soon. Perhaps, by being forewarned, thou wilt be able to avoid it.\"");
				say("\"I cannot tell thee who to avoid here, ",
					var0004,
					". I arrived here only a few days ago and have remained in the barn for much of the time. I thought it wise to attract as little notice as possible.\"");
				say("\"But, now that thou art here, feel assured that I will remain vigilant against anything that would deter thee from thy destiny.\"");
				add("destiny");
				fallthrough;

			case "destiny" (remove):
				say("\"I am not in power to tell thee more of the quest that lies before thee. If I were to tell thee, thou mightest be prejudiced by my words and overlook a crucial event.\"");
				fallthrough;

			case "library" (remove):
				say("\"We have quite a collection of diverse books and scrolls -- all meant to help us aid thee on thy quest.\"");
				say("\"Feel free to look at anything in the library, even if I am attending to my chores.\"");
				add(["diverse books and scrolls", "chores"]);
				fallthrough;

			case "diverse books and scrolls" (remove):
				say("\"Poetry, astronomical observations, tide charts, and maps... Everything that might provide some insight into the meaning of the prophecies.\"");
				if (gflags[KNOWS_IMBALANCE_CURE] && (!gflags[GOT_WATER_OF_DISCIPLINE])) {
					add("maps");
				}
				fallthrough;

			case "maps" (remove):
				var0006 = AVATAR->find_nearby(0x0282, 0x000A, MASK_NONE);
				if (var0006) {
					say("\"We have no maps to aid thee, I fear. But I know that there is a book describing the old temples here in the abbey.\"");
					say("\"It is written in the Ophidian runes, of course. But thou canst use the Lens of Translating to aid thee in reading it.\"");
					say("\"Go thou and find it. I am certain that it will help thee.\"");
				} else {
					say("\"We have no maps to aid thee, I fear. But I know that there is a book describing the old temples in the abbey.\"");
					say("\"It is written in the Ophidian runes, of course. But thou canst use the Lens of Translating to aid thee in reading it.\"");
					say("\"Go thou and find it. I am certain that it will help thee.\"");
				}
				add("Lens of Translating");
				fallthrough;

			case "Lens of Translating" (remove):
				say("\"It is the large device that stands in the center of the library. Using it will allow thee to decipher the difficult Ophidian runes, but only for a short period of time.\"");
				fallthrough;

			case "chores" (remove):
				say("\"We are a self-sufficient community, ",
					var0004,
					". We share the work in growing all that we need to eat. So I am as often in the field as I am in the library.\"");
				add("growing");
				fallthrough;

			case "growing" (remove):
				say("\"We have berries, pumpkins and other vegetables. Thou mayest take some, if thou dost wish.\"");
				fallthrough;

			case "bye":
				UI_remove_npc_face0();
				Func097F(AVATAR, "@So long!@", 0x0000);
				Func097F(item, "@Fare thee well!@", 0x0002);
				break;
		}
	}
	if (event == DEATH) {
		Func08F5(MIGGIM);
	}
}

extern var Func0988 0x988 (var var0000, var var0001);
extern void Func097F 0x97F (var var0000, var var0001, var var0002);

void Func04D2 object#(0x4D2) () {
	var var0000;
	var var0001;

	if (event == DOUBLECLICK) {
		SILENT3->set_schedule_type(SHY);
		var0000 = SILENT3->find_nearby(0x00FA, 0x000A, MASK_NONE);
		if (SILENT1->get_npc_object() in var0000) {
			var0000 = Func0988(SILENT1->get_npc_object(), var0000);
		}
		if (SILENT2->get_npc_object() in var0000) {
			var0000 = Func0988(SILENT2->get_npc_object(), var0000);
		}
		if (SILENT3->get_npc_object() in var0000) {
			var0000 = Func0988(SILENT3->get_npc_object(), var0000);
		}
		if (var0000) {
			var0001 = var0000[UI_get_random(UI_get_array_size(var0000))];
			Func097F(var0001, "@He is deaf.@", 0x0000);
		}
	}
}

extern var Func0954 0x954 ();
extern var Func0994 0x994 ();
extern var Func09A0 0x9A0 (var var0000, var var0001);
extern var Func0953 0x953 ();
extern void Func07D1 object#(0x7D1) ();
extern void Func097F 0x97F (var var0000, var var0001, var var0002);
extern var Func08F8 0x8F8 (var var0000, var var0001, var var0002);
extern void Func086D 0x86D ();
extern var Func08FC 0x8FC ();
extern void Func08FE 0x8FE ();
extern var Func0942 0x942 (var var0000);
extern void Func08F5 0x8F5 (var var0000);

void Func04D3 object#(0x4D3) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;
	var var0008;
	var var0009;
	var var000A;
	var var000B;
	var var000C;
	var var000D;

	var0000 = Func0954();
	var0001 = UI_is_pc_female();
	var0002 = Func0994();
	var0003 = "son";
	var0004 = Func09A0(0x0002, 0x0001);
	var0005 = THOXA->get_npc_object();
	var0006 = THOXA->get_item_flag(MET);
	if (var0001) {
		var0003 = "daughter";
	}
	var0007 = Func0953();
	if (event == DOUBLECLICK) {
		if (KARNAX->get_npc_id() != 0x0000) {
			THOXA->item_say("@Not now...@");
			abort;
		}
		AVATAR->item_say("@Excuse me...@");
		THOXA->Func07D1();
		Func097F(THOXA, (("@Yes, my " + var0003) + "?@"), 0x0002);
		THOXA->set_schedule_type(TALK);
	}
	if (event == STARTED_TALKING) {
		THOXA->run_schedule();
		THOXA->clear_item_say();
		THOXA->show_npc_face0(0x0000);
		if ((var0002 == 0x000D) && (gflags[AVATAR_GOT_SHORT_STICK] && (!gflags[DUPRE_IS_TOAST]))) {
			say("\"It is written that 'The Hero from Another World shall face the end as the beginning'! Thou didst enter our land with thy three companions, they must be present at the final moment to forestall disaster!\"");
			UI_remove_npc_face0();
			Func097F(THOXA, "@I shall pray for thee!@", 0x0000);
			THOXA->move_object([0x05FA, 0x078F, 0x0000]);
			var0008 = [IOLO, SHAMINO, DUPRE];
			for (var000B in var0008 with var0009 to var000A) {
				if (!var000B->npc_nearby()) {
					var000C = var000B->approach_avatar(0x0050, 0x0028);
					if (!(var000B->get_schedule_type() == FOLLOW_AVATAR)) {
						var000B->add_to_party();
					}
				}
			}
			abort;
		}
		0x0000->set_conversation_slot();
		var000D = THOXA->get_object_position();
		if (Func08F8(var000D, [0x0914, 0x01BB], [0x0939, 0x01D9])) {
			say("\"Thou must not enter this door without thy three stalwart companions, Hero from Another World!\"");
			say("\"It matters not if any others venture with thee, but through this portal the four must pass!\"");
			say("\"I shall act as a channel for the power to restore thy group as it should be.\"");
			Func086D();
			var000C = script var0005 {
				nohalt;
				call Func0363;
			};
			abort;
		}
		say("\"We meet again. Thy destiny draws near quickly... How may I be of service to thee?\"");
		if (Func08FC()) {
			say("\"Oh! One of thy friends hath met an untimely end. This should not be... [\"If thou art ready to see thy friend again, merely ask and I will return them to thee.\"");
			add("resurrection");
		} else if ((var0002 == 0x0002) && (!var0006)) {
			say("\"Welcome to Monk Isle, my ",
				var0003,
				".\"");
			say("\"Thou mayest tarry with us for as long as thou dost wish, but remember... The Sands of Time wait for no one, not even thee.\"");
			say("\"Whilst thou art here, thou wilt learn that the life of a monk is governed by the bells. Not all of our membership may speak to thee, the novices are bound by a vow of silence to help them better contemplate the mysteries.\"");
			add(["Sands of Time", "bells", "mysteries"]);
		}
		if (gflags[TALKED_TO_GREAT_HIEROPHANT] && (!gflags[TALKED_TO_CHAOS_HIEROPHANT])) {
			say("\"I see... Thou hast made great progress in thy quest, my ",
				var0003,
				". But before thou canst continue, thou must seek the wisdom of the last child of Chaos. He alone holds the key to the location of the Chaos Hierophant.\"");
			if (SETHYS->get_item_flag(MET)) {
				say("\"Thou didst meet him in his imprisonment, my ",
					var0003,
					". Yet he remains a prisoner out of time. Seek him within the Shrine that is his home.\"");
			} else {
				say("\"He remains a prisoner out of time, imprisoned within the Shrine that is his home.\"");
			}
		}
		converse ("bye") {
			case "return" (remove):
				say("\"Xenka disappeared several centuries ago. No one knows where she went.\"");
				say("\"However, in her writings, Xenka hath promised to return to us when the end is near. She will then guide us once more.\"");
				fallthrough;

			case "resurrection" (remove):
				Func08FE();
				fallthrough;

			case "Sands of Time" (remove):
				say("\"Within the Hourglass of Fate lie the Sands of Time. As each grain doth fall, so doth another moment hasten us to our doom.\"");
				add("doom");
				fallthrough;

			case "doom" (remove):
				if (gflags[BANES_RELEASED]) {
					say("\"If thou dost fail in thy quest, our world will end... ripped apart by the storms and earthquakes that doth now plague it.\"");
				} else {
					say("\"If thou dost fail in thy quest, our world will end... ripped apart by the earthquakes that will soon plague it.\"");
				}
				fallthrough;

			case "bells" (remove):
				say("\"They toll, though no one rings them. And it is said that when all the bells toll it will signal Xenka's return. Until then, they signal the order of our daily life. From Chapel to field, from field to the library, and so on.\"");
				add(["return", "Chapel", "field", "library"]);
				fallthrough;

			case "Chapel" (remove):
				say("\"The Chapel is where we go to meditate. It is also where all the monks gather to perform resurrections. The book of Xenka's prophecies rests on the altar for all to see.\"");
				fallthrough;

			case "field" (remove):
				say("\"Since we are so secluded from the rest of the land, we grow our own food. And as food concerns us all, we all share the tasks of tending to the garden and orchard.\"");
				add("garden and orchard");
				fallthrough;

			case "garden and orchard" (remove):
				say("\"Thou art welcome to take what thou dost need from our fields. We would gladly share with thee the bounty of the land that thou art striving to save.\"");
				fallthrough;

			case "library" (remove):
				say("\"Over the years we have gathered many books and scrolls that we thought would help us give light to the meaning within Xenka's prophecies. Only recently hath Miggim undertaken the task of trying to set the library to rights. It is he that helps any visitors that come to us seeking information.\"");
				add(["books and scrolls", "visitors", "information"]);
				fallthrough;

			case "books and scrolls" (remove):
				say("\"I fear that I do not know all we possess. Thou art free to look, of course. But if thou hast specific questions, thou shouldst direct them to Miggim.\"");
				fallthrough;

			case "visitors" (remove):
				if (Func0942(GWENNO)) {
					if (!GWENNO->get_item_flag(SI_ZOMBIE)) {
						say("\"Such visitors are rare, for the journey here is not an easy one. As I remember it, Gwenno was our last visitor.\"");
					} else {
						say("\"Such visitors are rare, for the journey here is not an easy one. As I remember it, our last visitor was poor Gwenno.\"");
					}
				} else {
					say("\"Such visitors are rare, for the journey here is not an easy one. As I remember it, our last visitor was that woman, Gwenno.\"");
				}
				add("Gwenno");
				fallthrough;

			case "Gwenno" (remove):
				if (Func0942(GWENNO)) {
					if (!GWENNO->get_item_flag(SI_ZOMBIE)) {
						say("\"It is a pleasure having her here, my ",
							var0003,
							", now that her proper state of mind hath been restored.\"");
						say("\"I hope to speak with Gwenno about her time with the Ice People. It would be most instructive, I am sure.\"");
					} else {
						say("\"'Tis a pity to see her so undone. I hope that thou canst find a way to restore her to her proper state of mind soon.\"");
						say("\"I had hoped to be able to speak with her about her time with the Ice People. It would be most instructive, I am sure.\"");
					}
				} else {
					say("\"She stayed with us for a short period of time. I think that she was seeking information concerning the Ice People of the north. But thou shouldst speak with Miggim... Gwenno spent most of her time within the library.\"");
				}
				add("Ice People");
				fallthrough;

			case "Ice People" (remove):
				say("\"I know very little about the Ice People, my ",
					var0003,
					". I know only that they are not like me and thee, but are covered in a thick hide -- like that of a bear, only white.\"");
				fallthrough;

			case "information" (remove):
				say("\"They used to come to us for everything from healing arts to weather predictions. Of course, that was before the storms began.\"");
				fallthrough;

			case "mysteries" (remove):
				say("\"Xenka's prophecies are very unclear, my ",
					var0003,
					". Lacking Xenka's heavenly insight, we must struggle to wrest the meaning from each passage. Some devote their entire lives to finding the meaning of only a handful of passages.\"");
				fallthrough;

			case "bye":
				if (var0002 == 0x0002) {
					UI_remove_npc_face0();
					Func097F(AVATAR, "@Goodbye!@", 0x0000);
					Func097F(item, "@Fortune!@", 0x0002);
					break;
				}
				say("\"I must return to Monk Isle.\"");
				UI_remove_npc_face0();
				var000D = THOXA->get_object_position();
				var000D[0x0001] -= var000D[0x0003] / 0x0002;
				var000D[0x0002] -= var000D[0x0003] / 0x0002;
				UI_sprite_effect(ANIMATION_TELEPORT, var000D[0x0001], var000D[0x0002], 0x0000, 0x0000, 0x0000, LOOP_ONCE);
				UI_play_sound_effect(0x0051);
				THOXA->remove_npc();
				abort;
		}
	}
	if (event == DEATH) {
		Func08F5(THOXA);
	}
}

extern var Func0954 0x954 ();
extern var Func0953 0x953 ();
extern var Func0994 0x994 ();
extern void Func097F 0x97F (var var0000, var var0001, var var0002);
extern void Func09AC 0x9AC (var var0000, var var0001, var var0002, var var0003);
extern void Func07D1 object#(0x7D1) ();
extern var Func08FC 0x8FC ();
extern void Func08FE 0x8FE ();
extern var Func0992 0x992 (var var0000, var var0001, var var0002, var var0003);
extern void Func08F5 0x8F5 (var var0000);

void Func04D4 object#(0x4D4) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;
	var var0008;
	var var0009;
	var var000A;
	var var000B;
	var var000C;
	var var000D;
	var var000E;

	var0000 = Func0954();
	var0001 = UI_is_pc_female();
	var0002 = Func0953();
	var0003 = "son";
	var0004 = Func0994();
	if (var0001) {
		var0003 = "daughter";
	}
	if (event == SCRIPTED) {
		if (gflags[BANES_RELEASED]) {
			AVATAR->clear_item_flag(DONT_MOVE);
			UI_init_conversation();
			BRACCUS->show_npc_face0(0x0000);
			say("\"Well done, my ",
				var0003,
				". I shall take Yelinda back to her rightful place.\"");
			YELINDA->show_npc_face1(0x0000);
			say("\"Oh, thank thee, kind monk!\"");
			UI_remove_npc_face1();
			0x0000->set_conversation_slot();
			say("\"As for thee, ",
				var0002,
				", thou must continue toward thine union with the Powers...\"");
			UI_remove_npc_face0();
			Func097F(item, "@Peace.@", 0x0002);
			var0005 = BRACCUS->get_object_position();
			UI_sprite_effect(ANIMATION_TELEPORT, (var0005[0x0001] - 0x0003), (var0005[0x0002] - 0x0003), 0x0000, 0x0000, 0x0000, LOOP_ONCE);
			var0006 = YELINDA->get_object_position();
			UI_sprite_effect(ANIMATION_TELEPORT, (var0006[0x0001] - 0x0003), (var0006[0x0002] - 0x0003), 0x0000, 0x0000, 0x0000, LOOP_ONCE);
			BRACCUS->remove_npc();
			Func09AC(YELINDA, 0x0404, 0x06B8, WANDER);
			UI_play_sound_effect(0x0051);
		} else {
			UI_init_conversation();
			BRACCUS->show_npc_face0(0x0000);
			AVATAR->clear_item_flag(DONT_MOVE);
			say("\"We mourn with thee, Hero From Another World, for this purposeless death of the girl once known as Cantra.\"");
			say("\"We shall take her lifeless body to Monk Isle, where perhaps we can restore life where death doth now reign.\"");
			say("\"Continue on thy quest. Trouble not thyself for this girl, as we shall do all that is possible for her.\"");
			var0007 = UI_remove_party_items(QUANTITY_ANY, 0x019E, QUALITY_ANY, 0x0015, 0x0000);
			if (!var0007) {
				var0008 = find_nearby(0x019E, 0x001E, MASK_NONE);
				for (var000B in var0008 with var0009 to var000A) {
					if (var000B->get_item_frame() == 0x0015) {
						var0005 = var000B->get_object_position();
						UI_sprite_effect(ANIMATION_TELEPORT, (var0005[0x0001] - 0x0003), (var0005[0x0002] - 0x0003), 0x0000, 0x0000, 0x0000, LOOP_ONCE);
						var000B->remove_item();
					}
				}
			}
			var0005 = BRACCUS->get_object_position();
			UI_sprite_effect(ANIMATION_TELEPORT, (var0005[0x0001] - 0x0003), (var0005[0x0002] - 0x0003), 0x0000, 0x0000, 0x0000, LOOP_ONCE);
			BRACCUS->remove_npc();
			CANTRA->clear_item_flag(DEAD);
			Func09AC(CANTRA, 0x097D, 0x0469, WANDER);
			CANTRA->set_item_flag(SI_ZOMBIE);
			UI_play_sound_effect(0x0051);
		}
		abort;
	}
	if (event == DOUBLECLICK) {
		if (KARNAX->get_npc_id() != 0x0000) {
			BRACCUS->item_say("@Not now...@");
			abort;
		}
		AVATAR->item_say("@Excuse me...@");
		BRACCUS->Func07D1();
		Func097F(BRACCUS, (("@Yes, my " + var0003) + "?@"), 0x0002);
		BRACCUS->set_schedule_type(TALK);
	}
	if (event == STARTED_TALKING) {
		BRACCUS->run_schedule();
		BRACCUS->clear_item_say();
		BRACCUS->show_npc_face0(0x0000);
		say("\"I am but a humble monk. I can be of no help to thee in any way, I fear.\"");
		var000C = false;
		var000D = false;
		if (gflags[NEED_FRESH_MANDRAKE] && (!gflags[HAVE_NEW_SPELLBOOK])) {
			add("Mandrake Root");
		}
		if (gflags[KNOWS_ABOUT_XENKA]) {
			add("Xenka");
		}
		if (gflags[KNOWS_ABOUT_SALT_TIDES]) {
			add("salt tides");
		}
		if (Func08FC()) {
			say("\"Oh! One of thy friends hath met an untimely end. This should not be...\"");
			say("\"If thou art ready to see thy friend again, thou dost have but to ask and I will return them to thee.\"");
			add("resurrection");
		}
		converse (["name", "duties", "bye"]) {
			case "resurrection" (remove):
				Func08FE();
				fallthrough;

			case "name" (remove):
				say("\"I no longer believe in names. Doth the corn in the field have a name? Canst thou hear the cry of the corn?\"");
				var000E = Func0992(IOLO, (("@" + var0000) + ", this monk is a mystical man indeed...@"), 0x0000, false);
				0x0000->set_conversation_slot();
				add(["beliefs", "corn"]);
				fallthrough;

			case "beliefs" (remove):
				say("\"There are unseen energies which permeate the worlds. A monk within the Order of Xenka seeks to attune himself with these ethereal vapors.\"");
				say("\"In mine own case -- I being but the least of these, my brethren -- I can draw upon the Power of the Void to foster the growth of plants.\"");
				if (gflags[XENKA_HAS_RETURNED]) {
					say("\"Xenka the Seer is the greatest of us all.\"");
				} else {
					say("\"Xenka was the greatest of us all.\"");
				}
				gflags[KNOWS_ABOUT_XENKA] = true;
				if (!var000C) {
					add("Xenka");
				}
				fallthrough;

			case "Xenka" (remove):
				say("\"It was she who mastered the Energies of the Void, until at last she was no longer of this world.\"");
				say("\"Xenka is our exemplar -- we all would harness\tthe Powers as she did.\"");
				say("\"I am unable to speak further -- I am incapable of expressing all that Xenka is and was.\"");
				var000C = true;
				if (gflags[XENKA_HAS_RETURNED]) {
					say("\"And now she hath returned! The Seer hath come back from beyond the Void.\"");
				} else {
					say("\"Thou shouldst speak to Monk Draxta, if thou desirest to perceive the mystery of Xenka.\"");
				}
				fallthrough;

			case "corn" (remove):
				say("\"Corn is at the center of the kingdom of vegetables.\"");
				say("\"Corn is tall and green, king of the grasses, and its fruit is sweet when roasted.\"");
				say("\"I seek to find union with the corn. I am a Child of the Corn.\"");
				var000E = Func0992(IOLO, (("@As I said, " + var0000) + "...@"), 0x0000, false);
				0x0000->set_conversation_slot();
				fallthrough;

			case "duties" (remove):
				say("\"In order to become one with the soil, I have been granted the task of nurturing the crops.\"");
				add("crops");
				fallthrough;

			case "crops" (remove):
				say("\"Our harvest is varied. There are ochre berries in the spring, corn in the summer, and walnuts in the fall.\"");
				say("\"We also nurture many root crops, and make flour from their tubers.\"");
				if (gflags[BANES_RELEASED]) {
					say("\"Now the fields are dying, as the blight spreads throughout the land. The storms leach the life from the land, and the crops fail.\"");
				} else {
					say("\"But the crops have not been healthy, not since the strange storms afflicted the island.\"");
				}
				say("\"Thou mayest partake of any of the fruits and vegetables on this island, so long as thou dost not indulge in gluttony.\"");
				fallthrough;

			case "Mandrake Root" (remove):
				say("\"Thou art not the first to come to this isle in search of the Mandrakes, for the plant is the source of powerful magic.\"");
				say("\"There is a supply of roots in mine hut, if thou needest any.\"");
				say("\"Please take all that thou needest, for Mandrakes grow only in the swamps, and are exceedingly rare elsewhere.\"");
				add(["swamps", "rare"]);
				fallthrough;

			case "swamps" (remove):
				say("\"The Mandrakes are only found in the swamplands, and only when the salt tides are right.\"");
				say("\"I have only dried roots in my supply -- if thou desirest fresh roots, thou must go into the swamp when the tides are right.\"");
				if (gflags[KNOWS_ABOUT_SALT_TIDES] == false) {
					UI_set_timer(0x0001);
				}
				gflags[KNOWS_ABOUT_SALT_TIDES] = true;
				add("salt tides");
				fallthrough;

			case "salt tides" (remove):
				if ((UI_get_timer(0x0001) > 0x0003) && (!gflags[HAVE_FRESH_MANDRAKE])) {
					say("\"The tides are in convergence. If thou desirest Mandrake Roots, thou must hasten to the swamplands.\"");
					gflags[CORRECT_SALT_TIDES] = true;
				} else if (gflags[HAVE_FRESH_MANDRAKE]) {
					say("\"The tides have gone. It will be many days\tbefore the roots can again be gathered.\"");
				} else {
					say("\"The Mandrake Roots only appear when the tides are right -- otherwise, they lay beneath the mud and cannot be seen.\"");
					say("\"Now is not the time, but the tides will soon be in -- precisely when, I cannot predict.\"");
					say("\"I could tell thee when the tides were right, if thou dost ask later.\"");
				}
				var000D = true;
				fallthrough;

			case "rare" (remove):
				say("\"Mandrakes grow only in certain swamps, of which there is one on this isle.\"");
				say("\"Due to the dangers of the magical storms, the ships no longer come.\"");
				say("\"Only thou, the Stranger from Another World, canst visit us now.\"");
				say("\"Therefore, no one can take the Mandrake Roots to the mages of Moonshade.\"");
				say("\"There is certain to be a grave shortage of reagents in that city soon.\"");
				fallthrough;

			case "bye":
				UI_remove_npc_face0();
				Func097F(AVATAR, "@Farewell@", 0x0000);
				Func097F(item, "@Peace.@", 0x0002);
				break;
		}
	}
	if (event == DEATH) {
		Func08F5(KARNAX);
	}
}

extern var Func0954 0x954 ();
extern var Func0953 0x953 ();
extern void Func097F 0x97F (var var0000, var var0001, var var0002);
extern void Func07D1 object#(0x7D1) ();
extern var Func08FC 0x8FC ();
extern var Func0825 0x825 ();
extern void Func08FE 0x8FE ();
extern var Func0992 0x992 (var var0000, var var0001, var var0002, var var0003);
extern var Func0955 0x955 ();
extern void Func08F5 0x8F5 (var var0000);

void Func04D5 object#(0x4D5) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;
	var var0008;
	var var0009;
	var var000A;
	var var000B;
	var var000C;
	var var000D;
	var var000E;
	var var000F;
	var var0010;

	var0000 = Func0954();
	var0001 = UI_is_pc_female();
	var0002 = Func0953();
	var0003 = "my son";
	var0004 = "his";
	if (var0001) {
		var0003 = "my daughter";
		var0004 = "her";
	}
	if (event == PROXIMITY) {
		var0005 = DRAXTA->find_nearby(ANY_SHAPE, 0x0014, MASK_NPC2);
		var0006 = [];
		for (var0009 in var0005 with var0007 to var0008) {
			if (var0009->get_schedule_type() == DANCE) {
				var0006 &= var0009;
			}
		}
		if (var0006 == []) {
			abort;
		}
		DRAXTA->clear_item_say();
		var000A = var0006[UI_get_random(UI_get_array_size(var0006))];
		var000A->clear_item_say();
		var000B = UI_get_random(0x0006);
		if (var000B == 0x0001) {
			DRAXTA->item_say("@Do not falter!@");
			Func097F(var000A, "@Pardon, Draxta.@", 0x0003);
		}
		if (var000B == 0x0002) {
			DRAXTA->item_say("@Rhythm is pure!@");
			Func097F(var000A, "@Walk in Rhythm.@", 0x0003);
		}
		if (var000B == 0x0003) {
			var000A->item_say("@May we stop?@");
			Func097F(DRAXTA, "@It is not time...@", 0x0003);
		}
		if (var000B == 0x0004) {
			DRAXTA->item_say("@With vigor!@");
			Func097F(var000A, "@Vigor is good.@", 0x0003);
		}
		if (var000B == 0x0005) {
			DRAXTA->item_say("@Do not fail Xenka!@");
			Func097F(var000A, "@I am weak...@", 0x0003);
		}
		if (var000B == 0x0006) {
			DRAXTA->item_say("@Xenka is pleased!@");
			Func097F(var000A, "@Hail the Prophetess!@", 0x0005);
			Func097F(DRAXTA, "@Peace to all.@", 0x000A);
		}
	}
	if (event == DOUBLECLICK) {
		if (KARNAX->get_npc_id() != 0x0000) {
			DRAXTA->item_say("@Hush...@");
			abort;
		}
		AVATAR->item_say("@Might we speak?@");
		DRAXTA->Func07D1();
		Func097F(DRAXTA, (("@Yes, " + var0003) + "?@"), 0x0002);
		DRAXTA->set_schedule_type(TALK);
	}
	if (event == STARTED_TALKING) {
		DRAXTA->run_schedule();
		DRAXTA->clear_item_say();
		DRAXTA->show_npc_face0(0x0000);
		var000C = DRAXTA->get_item_flag(MET);
		if (var000C == false) {
			DRAXTA->set_item_flag(MET);
			say("\"I tremble before the Hero from Another World! Thou art even as Xenka said!\"");
			add(["name", "Hero From Another World", "Xenka"]);
		} else {
			say("\"Welcome again, Hero from Another World! Thy destiny hath again brought thee to the place of Xenka's wisdom!\"");
			add(["Hero From Another World", "Xenka", "destiny"]);
		}
		if (gflags[SERPENT_GWENNO_BANE_SPEECH] && GWENNO->get_item_flag(SI_ZOMBIE)) {
			add("Gwenno");
		}
		if (Func08FC()) {
			say("\"Oh! One of thy friends hath met an untimely end. This should not be... If thou art ready to see thy friend again, simply ask and I will return them to thee.\"");
			add("resurrection");
		}
		if (Func0825()) {
			add("vision");
		}
		converse (["bye"]) {
			case "resurrection" (remove):
				Func08FE();
				fallthrough;

			case "name" (remove):
				say("\"My name is insignificant, oh great one. I am but a shadow in thy destiny and the glory of Xenka.\"");
				var000A = Func0992(0x0001, "@Another mystic...@", 0x0000, false);
				0x0000->set_conversation_slot();
				say("\"But, if thou wilt suffer to call me by name, I am Draxta.\"");
				add("destiny");
				fallthrough;

			case "destiny" (remove):
				say("\"Xenka saw the destinies of every man, woman and child! They are written in her blessed book. I cannot tell thee thy destiny, for I am sworn not to interfere, but thou mayest look within Xenka's wisdom of thine own accord, as any may.\"");
				add(["blessed book", "not interfere"]);
				fallthrough;

			case "blessed book" (remove):
				say("\"A work of divine wisdom, certainly! It is where Xenka inscribed all of her visions.\"");
				var000A = Func0992(0x0001, "@Such wisdom might aid thee in thy quest, Avatar.@", 0x0000, false);
				0x0000->set_conversation_slot();
				if (find_nearby(0x03E6, 0x000F, MASK_NONE)) {
					say("\"Thou mayest find the book here in the Chapel, upon the altar.\"");
				} else {
					say("\"Thou mayest find the book upon the altar within the Chapel.\"");
					add(["altar", "Chapel"]);
				}
				fallthrough;

			case "altar" (remove):
				say("\"Look for the ankh, the ancient symbol of life. It is only fitting that Xenka's words rest before the symbol of all that her divinely-inspired words shall save!\"");
				fallthrough;

			case "Chapel" (remove):
				say("\"The Chapel is where we meditate. It is the central chamber of the abbey. This is where we gather to ponder the mystery of Xenka's prophecies.\"");
				fallthrough;

			case "not interfere" (remove):
				say("\"It is written that 'The friends of the Hero from Another World shall become ",
					var0004,
					" enemies.'\"");
				say("\"I shall not seek to befriend thee, as I have no wish to bring about the end of the world!\"");
				add("end of the world");
				fallthrough;

			case "end of the world" (remove):
				say("\"Xenka's visions were of the world's end, oh great one.\"");
				say("\"It is written that 'If the Hero from Another World doth fail, the world shall shudder unto death.'\"");
				fallthrough;

			case "Hero From Another World" (remove):
				say("\"Xenka saw that the one hope for our world was that A Hero from Another World would sail a ship upon dry land.\"");
				say("\"Thoxa hath told us that thy ship was found beyond the shore. And thou wert accompanied by three fine companions, as foretold.\"");
				add(["Thoxa", "three fine companions"]);
				fallthrough;

			case "Thoxa" (remove):
				say("\"Thoxa is another follower of the wondrous Xenka, although she would not be content to sit and wait for thine arrival. She would seek to be thy friend and take thee the Hourglass of Fate. I hope that it is not she that turns against thee.\"");
				add("Hourglass of Fate");
				fallthrough;

			case "Hourglass of Fate" (remove):
				say("\"The sands within the glass are the life's blood of our land. Each grain falls closer and closer to its doom if thou shouldst fail in thy quest.\"");
				fallthrough;

			case "three fine companions" (remove):
				say("\"It is written that -- 'The Hero from Another World must have the Three to fulfill ",
					var0004,
					" quest.'\"");
				fallthrough;

			case "Xenka" (remove):
				say("\"Xenka was a very wise woman, oh great one. Divine visions came to her to warn us of the end of our world.\"");
				say("\"It was she who foresaw thy coming in the Place of Visions. Though she never told us that she foresaw leaving us...\"");
				add(["Place of Visions", "leaving"]);
				fallthrough;

			case "Place of Visions" (remove):
				if (Func0825()) {
					say("\"This is the Place of Visions, Hero. Thou dost stand on hallowed ground.\"");
				} else {
					say("\"The Place of Visions is upon the very north-western edge of the fields, oh great one. Thou wilt know it by the benches placed before the great wall.\"");
					say("\"I recall the last night we ever saw Xenka... I was there for her last three visions. Wouldst thou like me to show thee a vision?\"");
					if (Func0955() == true) {
						say("\"Journey to the Place of Visions, and I shall meet thee there.\"");
						gflags[SHOW_PETRA_VISION] = true;
					} else {
						say("\"As thou wishest. But bear in mind that the visions may be of aid to thee.\"");
					}
					add("visions");
				}
				fallthrough;

			case "visions" (remove):
				say("\"From the first vision Xenka said, 'The Hero from Another World must triumph -- even in ",
					var0004,
					" dreams.' I can tell that thou shalt succeed. The very voice of the universe sings as thou dost move through it.\"");
				say("\"After the second vision Xenka said, 'The Hero from Another World must cast aside ",
					var0004,
					" prejudice and follow those of The Fellowship into the Truth of Beauty.'");
				say("\"Following the third vision Xenka said, 'The Hero from Another World shall need a thief and a braggart as ",
					var0004,
					" ally.' I must admit, I find that hard to believe.\"");
				fallthrough;

			case "leaving" (remove):
				say("\"It was a dreadful blow, oh great one, when we could not find her in any place we searched.\"");
				say("\"But I believe that some great event, some great crisis will bring forth the prophetess and her psychic wisdom to save this floundering world.\"");
				gflags[KNOWS_ABOUT_XENKA] = true;
				add("floundering");
				fallthrough;

			case "floundering" (remove):
				say("\"Thou hast already survived the strange storms that lash our land. Wouldst thou not agree that we are floundering beneath their fierce beatings?\"");
				fallthrough;

			case "Gwenno" (remove):
				say("\"Thy friend Gwenno doth not seem right, oh great one.\"");
				var000A = Func0992(0x0001, "@She is a fine one to talk...@", 0x0000, false);
				0x0000->set_conversation_slot();
				say("\"Karnax could divine what ails her, to be certain.\"");
				add("Karnax");
				fallthrough;

			case "Karnax" (remove):
				say("\"Karnax is a proud fellow, oh great one. But not so proud that he would interfere with thy quest. He knows much of the history of the land. He will be a great help to thee, if thou dost ask. But only if thou dost ask.\"");
				add(["proud", "history"]);
				fallthrough;

			case "proud" (remove):
				say("\"Karnax's ability to divine is second only to Xenka herself. He can be a bit acerbic if he doth not feel that he is being given the proper respect.\"");
				fallthrough;

			case "history" (remove):
				say("\"Karnax hath made an exhaustive study of the history of the Serpent people. He can tell thee most anything about them.\"");
				add("Serpent people");
				fallthrough;

			case "Serpent people" (remove):
				say("\"The Serpent people dwelt in this land long before our forefathers settled here. I do not know what happened to them, but Karnax might.\"");
				fallthrough;

			case "vision" (remove):
				say("\"Silence, please! We shall now listen to the song of the Void, which whispers of events both past and present...\"");
				var000D = DRAXTA->find_nearest(0x0308, 0x0014);
				if (var000D) {
					var000E = var000D->get_object_position();
					var000F = (0x0008 * (var000E[0x0001] - 0x0920)) + 0x0064;
					var0010 = (0x0008 * (var000E[0x0002] - 0x0420)) + 0x0028;
					var000D->obj_sprite_effect(ANIMATION_PETRA_VISION, var000F, var0010, 0x0000, 0x0000, 0x0000, LOOP_ONCE);
					Func097F(DRAXTA, "@Behold, the vision!@", 0x0007);
					gflags[SHOW_PETRA_VISION] = false;
				} else {
					say("\"Let us move closer to the great wall...\"");
					Func097F(DRAXTA, "@To the wall...@", 0x0000);
				}
				abort;

			case "bye":
				UI_remove_npc_face0();
				Func097F(AVATAR, "@Fare well!@", 0x0000);
				Func097F(item, "@Xenka's blessings!@", 0x0002);
				break;
		}
	}
	if (event == DEATH) {
		Func08F5(DRAXTA);
	}
}

extern var Func0988 0x988 (var var0000, var var0001);
extern void Func097F 0x97F (var var0000, var var0001, var var0002);

void Func04D6 object#(0x4D6) () {
	var var0000;
	var var0001;

	if (event == DOUBLECLICK) {
		SILENT1->set_schedule_type(SHY);
		var0000 = SILENT1->find_nearby(0x00FA, 0x000A, MASK_NONE);
		if (SILENT1->get_npc_object() in var0000) {
			var0000 = Func0988(SILENT1->get_npc_object(), var0000);
		}
		if (SILENT2->get_npc_object() in var0000) {
			var0000 = Func0988(SILENT2->get_npc_object(), var0000);
		}
		if (SILENT3->get_npc_object() in var0000) {
			var0000 = Func0988(SILENT3->get_npc_object(), var0000);
		}
		if (var0000) {
			var0001 = var0000[UI_get_random(UI_get_array_size(var0000))];
			Func097F(var0001, "@He cannot speak.@", 0x0000);
		}
	}
}

extern var Func0954 0x954 ();
extern var Func0953 0x953 ();
extern void Func07D1 object#(0x7D1) ();
extern void Func097F 0x97F (var var0000, var var0001, var var0002);
extern var Func08FC 0x8FC ();
extern void Func08FE 0x8FE ();
extern var Func099B 0x99B (var var0000, var var0001, var var0002, var var0003, var var0004, var var0005, var var0006);
extern var Func097D 0x97D (var var0000, var var0001, var var0002, var var0003, var var0004);

void Func04D7 object#(0x4D7) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;

	var0000 = Func0954();
	var0001 = UI_is_pc_female();
	var0002 = Func0953();
	var0003 = XENKA->get_item_flag(MET);
	if (event == DOUBLECLICK) {
		AVATAR->item_say("Most honored one...");
		XENKA->Func07D1();
		Func097F(XENKA, "@What?@", 0x0002);
		XENKA->set_schedule_type(TALK);
	}
	if ((event == STARTED_TALKING) || (event == SCRIPTED)) {
		XENKA->set_schedule_type(STANDTHERE);
		XENKA->show_npc_face0(0x0000);
		if (var0003) {
			say("\"We meet again, ",
				var0002,
				".  How may I aid thee?\"");
		} else {
			XENKA->set_item_flag(MET);
			say("\"Let the bells ring... for Xenka hath returned!!!\"");
			say("\"So, ",
				var0002,
				", thou art the one who hath caused me all this grief...\"");
			say("\"And you, my rock-brained monks! Is this how you serve my visions?! You cannot even take the words down properly!\"");
			say("\"I knew that thou wouldst need me to unravel the mess that these monks have made of my prophecies.\"");
		}
		add(["returned", "grief", "unravel the mess"]);
		if (!gflags[TALKED_TO_GREAT_HIEROPHANT]) {
			add("instructions");
		}
		if (gflags[TALKED_TO_CHAOS_HIEROPHANT] && (!gflags[RETURNED_GWANI_AMULET])) {
			add("journey");
		}
		if (gflags[CLUE_SERPENT_STAFF_FURNACE] && (!gflags[GOT_SERPENT_STAFF])) {
			add("Staff of the Serpent");
		}
		if (gflags[GOT_SERPENT_STAFF] && (gflags[RETURNED_GWANI_AMULET] && (gflags[TALKED_TO_CHAOS_HIEROPHANT] && (!gflags[PLACED_DUPRES_ASHES])))) {
			add("sacrifice");
		}
		if (gflags[XENKA_GAVE_FINAL_QUEST]) {
			say("\"There is no time left! Go to Sunrise Isle!\"");
			UI_remove_npc_face0();
			Func097F(XENKA, "@Hurry!@", 0x0002);
			abort;
		}
		if (gflags[DUPRE_IS_TOAST]) {
			add("final task");
		}
		if (Func08FC()) {
			say("\"Oh! One of thy friends hath met an untimely end. This should not be...\"");
			say("\"If thou art ready to see thy friend again, simply ask and I will return them to thee.\"");
			add("resurrection");
		}
		converse (["bye"]) {
			case "resurrection" (remove):
				Func08FE();
				fallthrough;

			case "returned" (remove):
				say("\"I knew that if I did not promise to return that these laggard monks would drift away from the task I set them.\"");
				say("\"As it is, they have nearly brought disaster upon us all... including thee, Hero from Another World.\"");
				remove(["task", "disaster", "Hero"]);
				fallthrough;

			case "task" (remove):
				say("\"They were to watch for thine arrival, oh mighty Hero, and prepare the people for the approaching danger.\"");
				add("danger");
				fallthrough;

			case "danger" (remove):
				say("\"I think that magical storms and earthquakes qualify as ample danger, but then I am not a Hero.\"");
				fallthrough;

			case "disaster" (remove):
				say("\"By hopelessly miring my visions in the bog of high and mighty language, they have delayed thee until it is nearly too late.\"");
				add(["miring my visions", "too late"]);
				fallthrough;

			case "miring my visions" (remove):
				say("\"I am a blunt, plain-spoken woman, noble Hero. Too plain for those who wanted to feel that they followed the words of some holy sage.\"");
				say("\"So my visions became cryptic puzzles and poor poetry, like that of some half-witted gleeman. And worse upon worse, they forgot the true meaning behind their flowery words!\"");
				fallthrough;

			case "too late" (remove):
				say("\"The world is a heavy thing, Hero. Once it gathers enough force to try and shake those who sicken it from its skin, dost thou think that turning back will be easy?\"");
				say("\"Better to try and stand beneath a falling boulder and command it to stop.\"");
				fallthrough;

			case "Hero" (remove):
				say("\"Do not thy companions dear to thine heart call thee Avatar?\"");
				say("\"Art thou not from a strange land that thou dost call Earth?\"");
				say("\"I think then that thou dost indeed fit the title of Hero from Another World.\"");
				add("Earth");
				fallthrough;

			case "Earth" (remove):
				say("\"I have never seen this wondrous land. I have only felt its presence upon the edge of the Void.\"");
				say("\"But I have felt great tides of power being directed toward it.\"");
				add(["Void", "power"]);
				fallthrough;

			case "Void" (remove):
				say("\"I cannot explain how it was that I got there, or even that it is not empty...\"");
				say("\"Thou couldst not grasp it. For it encompasses countless worlds and draws power from the life-forces of each one. It is... amazing!\"");
				fallthrough;

			case "power" (remove):
				say("\"I have no name for what that power was. I know not if the intent was hostile or good.\"");
				say("\"I only felt the power move, as a swimmer feels the currents within a stream.\"");
				fallthrough;

			case "grief" (remove):
				say("\"I was a wife, and a mother, Hero. I did not ask to become a prophetess.\"");
				say("\"My poor husband took me before the great Mages of Moonshade when these visions came upon me. And those wise men dismissed me saying, 'She is crazy.'\"");
				say("\"Mine husband, my children... even my children's children are long gone to dust. While I remain alive, enslaved to visions I never asked for!\"");
				add(["Mages of Moonshade", "visions"]);
				fallthrough;

			case "Mages of Moonshade" (remove):
				say("\"Arrogant manipulators! Never once did they attempt to divine if my visions were true!\"");
				say("\"Never once did they offer to try and cure my supposed madness, for we were too poor to pay their fees.\"");
				say("\"Is it any wonder that they could not stand to live within the rule of an honest man?!\"");
				add("honest man");
				fallthrough;

			case "honest man" (remove):
				say("\"Surely thou knowest of whom I speak... For he is the ruler that sent thee to meet thy fate here.\"");
				say("\"Thy Lord British demanded honesty of the rogues that call themselves Mages. And when that sat ill in their bellies, they fled to where they could cheat people in peace!\"");
				fallthrough;

			case "visions" (remove):
				say("\"At first they were but nightmares... Until I feared to close mine eyes. And then the death and destruction I saw followed mine every waking move.\"");
				say("\"The people of my village bade mine husband to cast me out, for they feared that my madness might spread. So I came to this island to be free of the whispers and stares.\"");
				fallthrough;

			case "unravel the mess" (remove):
				say("\"I can see that thou art unsure of how to progress, great Hero... That is why I am here.\"");
				say("\"Return here if thou art unsure of how to proceed. I shall guide thee in some small fashion.\"");
				fallthrough;

			case "instructions" (remove):
				if (!gflags[GOT_ISLE_OF_CRYPTS_TOOTH]) {
					say("\"Take this Serpent's Tooth... Thou must seek the Dead on the Isle of Crypts.\"");
					var0004 = Func099B(AVATAR, 0x0001, 0x022F, QUALITY_ANY, 0x0006, 0x0000, true);
					gflags[GOT_ISLE_OF_CRYPTS_TOOTH] = true;
				} else {
					say("\"Use the tooth that I have given thee! Seek the Dead on the Isle of Crypts.\"");
				}
				fallthrough;

			case "journey" (remove):
				if (Func097D(PARTY, 0x0001, 0x022F, QUALITY_ANY, 0x0000)) {
					say("\"Good, thou hast the tooth that will take thee to Sunrise Isle!\"");
				} else {
					say("\"Thou must journey to the frozen wastelands and speak with those considered savage. They hold the means to further thy quest with the Serpent Tooth thou dost lack.\"");
				}
				fallthrough;

			case "Staff of the Serpent" (remove):
				say("\"Without the proper armaments, thou canst not seek the wisdom of the dead. Seek the Staff of the Serpent within the bowels of Furnace.\"");
				fallthrough;

			case "sacrifice" (remove):
				if (gflags[DUPRE_IS_TOAST]) {
					say("\"I share thy sorrow at the loss of thy friend, ",
						var0002,
						". Take comfort that his ashes shall be the glue which shall bind the sundered pieces of our land together once more.\"");
					say("\"But we must hurry... Only a few grains remain to fall. Time is fleeing. Take thy friend's ashes with thee, ",
						var0002,
						", for the Three must be with thee at the Chaos Shrine deep within the heart of Skullcrusher.\"");
				} else if (gflags[AVATAR_GOT_SHORT_STICK]) {
					say("\"Do not tarry overlong in thy goodbyes to thy friends, Hero. Our land has little time left for sentiment.\"");
				} else {
					say("\"As I had feared, the imbalance hath grown too powerful...\"");
					say("\"Only the final sacrifice of one who is in balance can aid thee now. For this, only thy three companions, the lady Gwenno and thyself doth qualify.\"");
					say("\"Thou must draw straws to see who the Monitor crematorium awaits.\"");
					gflags[AVATAR_GOT_SHORT_STICK] = true;
					say("\"I am sorry, Hero. Thou hast drawn the shortest straw. Take comfort that thine ashes shall bind the wounds of the land. Go quickly for the Hourglass is nearly empty.\"");
				}
				fallthrough;

			case "final task" (remove):
				say("\"Thy time is at hand, ",
					var0002,
					"!\"");
				say("\"Thy destiny and our fate shall be found upon the island known as Sunrise Isle. Take this Serpent Sword as my final aid to thee... I can do no more.\"");
				var0004 = Func099B(AVATAR, 0x0001, 0x02C6, 0x0000, 0x0000, 0x0000, true);
				gflags[XENKA_GAVE_FINAL_QUEST] = true;
				say("\"Go quickly! The end is at hand!\"");
				fallthrough;

			case "bye":
				UI_remove_npc_face0();
				Func097F(AVATAR, "@Goodbye!@", 0x0000);
				Func097F(XENKA, "@Fulfill thy destiny!@", 0x0002);
				break;
		}
	}
}

extern void Func0808 0x808 (var var0000, var var0001);

void Func04D8 object#(0x4D8) () {
	var var0000;
	var var0001;

	var0000 = "Pothos";
	var0001 = 0x0007;
	Func0808(var0000, var0001);
}

void Func04D9 object#(0x4D9) () {
	var var0000;
	var var0001;

	SABRINA->clear_item_say();
	var0000 = SABRINA->direction_from(AVATAR);
	var0001 = script SABRINA {
		actor frame step_right;
		face var0000;
		wait 2;
		say "@Lead me to my nightmare.@";
		wait 15;
		say "@I beg of thee...@";
	};
	SABRINA->set_alignment(NEUTRAL);
	SABRINA->set_schedule_type(HOUND);
}

extern var Func0954 0x954 ();
extern var Func0953 0x953 ();
extern void Func07D1 object#(0x7D1) ();
extern void Func097F 0x97F (var var0000, var var0001, var var0002);
extern var Func0957 0x957 (var var0000);
extern void Func09B0 0x9B0 (var var0000);
extern var Func0955 0x955 ();

void Func04DA object#(0x4DA) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;

	var0000 = Func0954();
	var0001 = UI_is_pc_female();
	var0002 = Func0953();
	var0003 = BYRIN->get_item_flag(MET);
	if (event == DEATH) {
		BYRIN->show_npc_face0(0x0000);
		say("\"Art thou insane? Why art thou attacking me? This is my dream!\" *\"If I had a two-handed sword, I would make mincemeat of thee!\" *\"I must awaken...\"");
		UI_remove_npc_face0();
		var0004 = get_object_position();
		UI_play_sound_effect(0x004C);
		UI_sprite_effect(ANIMATION_TELEPORT, var0004[0x0001], var0004[0x0002], 0x0000, 0x0000, 0x0000, LOOP_ONCE);
		D_BYRIN->remove_npc();
	}
	if (event == DOUBLECLICK) {
		AVATAR->item_say("@Hail, minstrel!@");
		D_BYRIN->Func07D1();
		Func097F(D_BYRIN, (("@Greetings, " + var0000) + "!@"), 0x0005);
		D_BYRIN->set_schedule_type(TALK);
	}
	if (event == STARTED_TALKING) {
		D_BYRIN->set_schedule_type(WANDER);
		BYRIN->show_npc_face0(0x0000);
		if (var0003 == true) {
			say("\"I had wondered when I would encounter thee here, Avatar.\" ~\"I expect that thou wouldst like some answers, no doubt.\" *\"Or perhaps I could sing thee a song to ease thy way.\"");
		} else {
			say("\"Welcome, fellow dreamer!\" ~\"I am Byrin, a gleeman by trade.\" *\"Thou dost look perplexed. I'll warrant that thou wouldst like some answers.\" ~\"Or perhaps I could sing thee a song to ease thy way.\"");
		}
		converse (["answers", "song", "bye"]) {
			case "answers":
				say("\"Thou mayest find that the answers only give rise to more questions.\" ~\"But I shall do my best to help thee.\" *\"First thou shouldst know that thou dost walk in the land of dreamers.\" ~\"There are only two ways to enter or exit here.\"");
				remove("answers");
				add("two ways");
				fallthrough;

			case "two ways":
				say("\"The first way to enter this realm is from the safety of thy bed...\" ~\"In thy nightly slumber.\" *\"The second way to enter here is far more perilous...\" ~\"By falling prey to the enchantments in Gorlab Swamp.\"");
				remove("two ways");
				add("Gorlab Swamp");
				fallthrough;

			case "Gorlab Swamp":
				say("\"Long ago -- even before the serpent people made this land their home -- a sorceror named Rabindrinath swore to destroy the peaceful town of Gorlab.\" ~\"But the town healer, Siranush, opposed him and the evil spell went awry.\" *\"The inhabitants of the town were not destroyed, but were instead trapped\twithin the realm of dreams...\" ~\"Along with the mad sorceror...\" ~\"And any who dare enter the environs of Gorlab.\"");
				remove("Gorlab Swamp");
				add(["Rabindrinath", "Siranush"]);
				fallthrough;

			case "Rabindrinath":
				say("\"Rabindrinath hath struggled mightily against Siranush across the span of time.\" ~\"Each of his attacks have been repelled...\" ~\"Much to his displeasure.\"");
				remove("Rabindrinath");
				add("displeasure");
				fallthrough;

			case "displeasure":
				say("\"Rabindrinath releases his anger by troubling the thoughts of those who venture here within their dreams.\"");
				remove("displeasure");
				fallthrough;

			case "Siranush":
				say("\"Siranush is a strong-willed woman who hath repelled all of Rabindrinath's attacks on her people.\" ~\"She is no sorceror, and I fear that her strength will one day fail her.\" *\"Were Siranush to be vanquished, I am sure that Rabindrinath would turn his evil intent on the wandering dreamers.\" ~\"Without Siranush's guidance, those who enter here might never leave.\"");
				remove("Siranush");
				add("leave");
				fallthrough;

			case "leave":
				say("\"As I said before, there are two ways to enter the land of dreamers.\" ~\"If thou didst come here from the comfort of thy bed, thou canst simply awaken and thou wilt return to the land of waking men.\" *\"But, if thou didst come here through the enchantments in the Swamp, thou must die here to return to thy body.\"");
				remove("leave");
				add("die");
				fallthrough;

			case "die":
				say("\"By die, I do not mean that thou must cease living.\" ~\"I mean that thy perceived life here must end...\" *\"Thy death here returns thee to thy body.\" ~\"So long as Siranush prevails and thy body lives, thou canst return to the world of waking men.\" *\"But if Siranush should fall, or thy body die...\" ~\"thou shalt remain trapped here for all time.\"");
				remove("die");
				fallthrough;

			case "song":
				say("\"I know many songs...\" ~\"Dost thou wish to hear one I have already sung?\" ~\"Or dost thou wish to hear a new song?\"");
				var0005 = [];
				if (Func0957(["old song", "new song"]) == 0x0001) {
					if (gflags[HEARD_BEATRIX_SONG] == true) {
						var0005 &= 0x0001;
					}
					if (gflags[HEARD_MOUNTAIN_SONG] == true) {
						var0005 &= 0x0002;
					}
					if (gflags[HEARD_GWANI_SONG] == true) {
						var0005 &= 0x0003;
					}
					if (gflags[HEARD_FOREST_MASTER_SONG] == true) {
						var0005 &= 0x0004;
					}
					if (gflags[HEARD_DREAM_SONG] == true) {
						var0005 &= 0x0005;
					}
					if (gflags[HEARD_WHITE_DRAGON_SONG] == true) {
						var0005 &= 0x0006;
					}
				} else {
					if (gflags[HEARD_BEATRIX_SONG] == false) {
						var0005 &= 0x0001;
					}
					if (gflags[HEARD_MOUNTAIN_SONG] == false) {
						var0005 &= 0x0002;
					}
					if (gflags[HEARD_GWANI_SONG] == false) {
						var0005 &= 0x0003;
					}
					if (gflags[HEARD_FOREST_MASTER_SONG] == false) {
						var0005 &= 0x0004;
					}
					if (gflags[HEARD_DREAM_SONG] == false) {
						var0005 &= 0x0005;
					}
					if (gflags[HEARD_WHITE_DRAGON_SONG] == false) {
						var0005 &= 0x0006;
					}
				}
				if (var0005 == []) {
					say("\"I'm sorry... ~Thou hast heard all of my songs.\"");
				} else {
					var0006 = UI_get_random(UI_get_array_size(var0005));
					var0007 = var0005[var0006];
					Func09B0(var0007);
				}
				fallthrough;

			case "tales":
				say("\"For those with an adventurous spirit, I can tell thee of the northern savages.\"");
				say("\"For those who wish to hear of a lost civilization, I can tell thee of the people who left the ruins on this continent.\"");
				say("\"For those who would hear a tale of bitter bravery, I can tell thee of the lost king.\"");
				remove("tales");
				add(["northern savages", "lost culture", "lost king"]);
				fallthrough;

			case "northern savages":
				say("\"Once thou leavest the warm lands of Man, thou dost come into the realm of the northern savages.\" ~\"These creatures have faces that strongly resemble that of a normal man, but they are covered head to foot in a shaggy fur pelt.\"");
				say("\"Some say that these creatures are some lost tribe of Man that hath adapted to the cold.\" ~\"Still others claim that the savages are a mage-created race that guards some great, mystical secret.\"");
				say("\"None can say if they are intelligent.\" ~\"They build no structures and speak no recognizable language.\"");
				if (gflags[HEARD_GWANI_SONG] == false) {
					say("\"There is also a song about the northern savages. ~Wouldst thou care to hear it?\"");
					if (Func0955() == true) {
						say("\"All right, then...\"");
						Func09B0(0x0001);
					} else {
						say("\"Perhaps some other time, then.\"");
					}
				}
				remove("northern savages");
				fallthrough;

			case "lost culture":
				say("\"Long ago, before any of the cities thou knowest today were built, there was a race of Man who worshipped three great elemental serpents.\" ~\"Some followed one of fire. Others followed one of ice. And still others followed one of earth.\"");
				say("\"As only the serpent of earth could withstand both the fire and the ice of the other serpents, it did possess the most power.\" ~\"The fire and ice serpents were violently opposed to each other, but were held in check by the serpent of earth.\"");
				say("\"Then the serpent of earth lost power. The fire and ice serpents warred for supremacy.\" ~\"When the battle ended, it mattered not which serpent had won...\" ~\"for the land was destroyed and all the worshippers lay dead.\"");
				remove("lost culture");
				fallthrough;

			case "lost king":
				say("\"To the north of here stand two castles, seemingly empty from the ravages of time.\" ~\"But neither is truly empty, for they both hold the ghosts of trust betrayed.\"");
				say("\"In one majestic castle a lady waits for her faithless lover who pledged his love and never returned.\" ~\"In the other, a father and ruler, driven mad by the loss of daughter and erstwhile friend, took his people beyond the cares of time.\"");
				say("\"All the trapped souls await the return of the one whose desertion forever changed the land he had sworn to protect.\" ~\"All wait for the return of the lost king... and revenge!\"");
				if (gflags[HEARD_BEATRIX_SONG] == false) {
					say("\"There is a song about the lady.\" ~\"Wouldst thou care to hear it?\"");
					if (Func0955() == true) {
						say("\"It is a sad ballad indeed...\"");
						Func09B0(0x0001);
					} else {
						say("\"Another time, then.\"");
					}
				}
				if (gflags[HEARD_WHITE_DRAGON_SONG] == false) {
					say("\"There is a song about the other castle, as well.\" ~\"Wouldst thou care to hear it?\"");
					if (Func0955() == true) {
						say("\"Prepare thyselves...\"");
						Func09B0(0x0001);
					} else {
						say("\"Another time, then.\"");
					}
				}
				remove("lost king");
				fallthrough;

			case "tunes":
				if (gflags[HAVE_WOLF_TATTOO] == true) {
					if (var0001 == true) {
						say("\"For thee, brave lady, I would sing of dreams, or perhaps of tragedy.\" ~\"Of course, although I sing to entertain others, I hope for some small token of appreciation...\" ~\"if possible. Singing is thirsty business.\"");
						add(["dreams", "tragedy"]);
					} else {
						say("\"For thee, noble sir, I would sing a heart-rending ballad, or perhaps long-lost lore.\" ~\"Of course, although I sing to entertain others, I hope for some small token of appreciation...\" ~\"if possible. Singing is thirsty business.\"");
						add(["ballad", "lore"]);
					}
				} else {
					say("\"I sense that thou dost like adventure.\" ~\"For thee I would sing of strange beings and strange places.\" ~\"Of course, although I sing to entertain others, I hope for some small token of appreciation...\" ~\"if possible. Singing is thirsty business.\"");
					add(["strange beings", "strange places"]);
				}
				remove("tunes");
				fallthrough;

			case "dreams":
				if (gflags[HEARD_DREAM_SONG] == true) {
					say("\"I believe that thou hast already heard that one.\" ~\"Wouldst thou like to hear it again?\"");
					if (Func0955() == true) {
						say("\"My pleasure...\"");
						Func09B0(0x0001);
					} else {
						say("\"Perhaps I could find another song for thee...\"");
						add("song");
					}
				} else {
					say("\"I hope thou dost enjoy it...\"");
					Func09B0(0x0001);
				}
				remove("dreams");
				fallthrough;

			case "tragedy":
				if (gflags[HEARD_WHITE_DRAGON_SONG] == true) {
					say("\"I seem to remember singing this for thee before...\" ~\"Wouldst thou like to hear it again?\"");
					if (Func0955() == true) {
						say("\"One more time, then...\"");
						Func09B0(0x0001);
					} else {
						say("\"Perhaps I could find another song for thee...\"");
						add("song");
					}
				} else {
					say("\"Relax and be at ease...\"");
					Func09B0(0x0001);
				}
				remove("tragedy");
				fallthrough;

			case "ballad":
				if (gflags[HEARD_BEATRIX_SONG] == true) {
					say("\"I'm certain that thou hast before...\" ~\"Wouldst thou like to hear it again?\"");
					if (Func0955() == true) {
						say("\"As thou wishest...\"");
						Func09B0(0x0001);
					} else {
						say("\"Perhaps I could find another song for thee...\"");
						add("song");
					}
				} else {
					say("\"I do hope I remember it...\"");
					Func09B0(0x0001);
				}
				remove("ballad");
				fallthrough;

			case "lore":
				if (gflags[HEARD_MOUNTAIN_SONG] == true) {
					say("\"I fear that thou dost already know this one...\" ~\"Wouldst thou like to hear it again?\"");
					if (Func0955() == true) {
						say("\"Thou canst sing along if thou wishest...\"");
						Func09B0(0x0001);
					} else {
						say("\"Perhaps I could find another song for thee...\"");
						add("song");
					}
				} else {
					say("\"I think I am in the right key...\"");
					Func09B0(0x0001);
				}
				remove("lore");
				fallthrough;

			case "strange beings":
				if (gflags[HEARD_GWANI_SONG] == true) {
					say("\"I have done this one for thee before...\" ~\"Wouldst thou like to hear it again?\"");
					if (Func0955() == true) {
						say("\"Very well...\"");
						Func09B0(0x0001);
					} else {
						say("\"Perhaps I could find another song for thee...\"");
						add("song");
					}
				} else {
					say("\"Thou wilt like the tempo on this one...\"");
					Func09B0(0x0001);
				}
				remove("strange beings");
				fallthrough;

			case "strange places":
				if (gflags[HEARD_FOREST_MASTER_SONG] == true) {
					say("\"Thou knowest this one...\" ~\"Wouldst thou like to hear it again?\"");
					if (Func0955() == true) {
						say("\"I am cheered in that thou dost like it...\"");
						Func09B0(0x0001);
					} else {
						say("\"Perhaps I could find another song for thee...\"");
						add("song");
					}
				} else {
					say("\"Listen carefully...\"");
					Func09B0(0x0001);
				}
				remove("strange places");
				fallthrough;

			case "bye":
				UI_remove_npc_face0();
				Func097F(AVATAR, "@Farewell, gleeman!@", 0x0000);
				Func097F(BYRIN, "@May thy path be smooth!@", 0x0005);
				break;
		}
	}
}

extern void Func097F 0x97F (var var0000, var var0001, var var0002);

void Func04DB object#(0x4DB) () {
	var var0000;
	var var0001;

	var0000 = ENSORCIO->get_item_flag(MET);
	if (event == STARTED_TALKING) {
		ENSORCIO->show_npc_face0(0x0000);
		if (var0000 == true) {
			say("\"Do not interfere with me, Avatar!\" ~\"I am the MageLord now...");
			say("\"Thou dost know that Filbercio is lower than swine...\" ~\"He doth deserve to be tortured for all the ill that he hath done.\"");
			FILBERCIO->show_npc_face1(0x0000);
			say("\"Help me, Please! I beseech thee...\" *\"I cannot survive much more of this...\" *\"Uunnggghhh!\"");
			UI_remove_npc_face1();
		} else {
			say("\"Do not meddle in that which thou dost not understand, hero!\" ~\"I am the MageLord, and this man is evil.\"");
			say("\"He hath destroyed the lives of many.\" ~\"He doth deserve to be tortured for all the ill that he hath done.\"");
			FILBERCIO->show_npc_face1(0x0000);
			say("\"Help me, Please! I beseech thee... It is he who is evil, not I.\" *\"I cannot survive much more of this torture...\"");
			UI_remove_npc_face1();
		}
		ENSORCIO->show_npc_face0(0x0000);
		say("Ha, ha, ha, ha, ha!");
		UI_remove_npc_face0();
		D_ENSORCIO->set_schedule_type(STANDTHERE);
		var0001 = D_ENSORCIO->get_object_position();
		UI_sprite_effect(ANIMATION_MEDIUM_BLAST, var0001[0x0001], var0001[0x0002], 0x0000, 0x0000, 0x0000, LOOP_ONCE);
		var0001 = D_FILBERCIO->get_object_position();
		UI_sprite_effect(ANIMATION_MEDIUM_BLAST, var0001[0x0001], var0001[0x0002], 0x0000, 0x0000, 0x0000, LOOP_ONCE);
		UI_play_sound_effect(0x0029);
		Func097F(D_ENSORCIO, "@Ha, ha, ha!@", 0x0000);
		Func097F(D_FILBERCIO, "@Have mercy!@", 0x0000);
		D_ENSORCIO->remove_npc();
		D_FILBERCIO->remove_npc();
		remove_item();
		abort;
	}
}

extern void Func097F 0x97F (var var0000, var var0001, var var0002);

void Func04DE object#(0x4DE) () {
	if ((event == DEATH) && DEATH_KNIGHT->get_item_flag(SI_TOURNAMENT)) {
		DEATH_KNIGHT->clear_item_flag(SI_TOURNAMENT);
		DEATH_KNIGHT->reduce_health(0x0032, NORMAL_DAMAGE);
		if (STEFANO->get_item_flag(IN_PARTY)) {
			STEFANO->set_schedule_type(FOLLOW_AVATAR);
		} else {
			STEFANO->set_new_schedules([MIDNIGHT, NOON, AFTERNOON, EVENING, NIGHT], [SLEEP, EAT_AT_INN, WANDER, EAT_AT_INN, DANCE], [0x09A7, 0x0778, 0x08C7, 0x0714, 0x099F, 0x078F, 0x08BE, 0x0707, 0x08B6, 0x070C]);
			STEFANO->set_schedule_type(TALK);
		}
		Func097F(STEFANO, "@I am saved!@", 0x0000);
	}
}

extern void Func0809 0x809 ();

void Func04E4 object#(0x4E4) () {
	if (get_item_flag(SI_ZOMBIE)) {
		Func0809();
		abort;
	}
}

extern void Func0809 0x809 ();

void Func04E5 object#(0x4E5) () {
	if (get_item_flag(SI_ZOMBIE)) {
		Func0809();
		abort;
	}
}

extern void Func0809 0x809 ();

void Func04E6 object#(0x4E6) () {
	if (get_item_flag(SI_ZOMBIE)) {
		Func0809();
		abort;
	}
}

extern void Func0809 0x809 ();

void Func04E7 object#(0x4E7) () {
	if (get_item_flag(SI_ZOMBIE)) {
		Func0809();
		abort;
	}
}

extern void Func0809 0x809 ();

void Func04E8 object#(0x4E8) () {
	if (get_item_flag(SI_ZOMBIE)) {
		Func0809();
		abort;
	}
}

void Func0506 object#(0x506) () {
	ANTI_IOLO->show_npc_face0(0x0000);
	say("\"Avatar, when next we meet I shall wear thine eyeballs for earrings!\"");
}

void Func0507 object#(0x507) () {
	ANTI_DUPRE->show_npc_face0(0x0000);
	say("\"Avatar, when our paths cross once more I shall chop thee into little pieces and feed them to the dogs!\"");
}

extern void Func097F 0x97F (var var0000, var var0001, var var0002);
extern void Func0924 0x924 (var var0000, var var0001);

void Func0510 object#(0x510) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;

	if (event == BG_PATH_FAILURE) {
		set_polymorph(0x01F5);
	}
	if ((event == SI_PATH_SUCCESS) || (event == SI_PATH_FAILURE)) {
		PALOS->set_schedule_type(WAIT);
		var0000 = script PALOS {
			nohalt;
			actor frame bowing;
			actor frame kneeling;
			say "@To serve thee!@";
		};
	}
	if ((event == SCRIPTED) && ((gflags[TEMP_FLAG_1] == false) && (gflags[PALOS_TALKS_TO_AVATAR] == false))) {
		gflags[PALOS_TALKS_TO_AVATAR] = true;
		PALOS->move_object([0x08AF, 0x02C6, 0x0000]);
		PALOS->si_path_run_usecode([0x08A2, 0x02C6, 0x0000], PATH_SUCCESS, PALOS, Func0510, true);
	}
	if ((event == SCRIPTED) && gflags[TEMP_FLAG_1]) {
		gflags[TEMP_FLAG_1] = false;
		PALOS->si_path_run_usecode([0x08B2, 0x02C8, 0x0000], PATH_FAILURE, PALOS, Func0510, true);
	}
	if (event == PATH_SUCCESS) {
		MEELOSE->show_npc_face0(0x0000);
		say("\"To meet at last the false hero! To serve my master and to avenge the death of many of my people thou didst slay in ancient times.\" *\"To see thy bones with thy skin burned from thy body! To smell thy flesh as it is eaten away by fire and flame!\" *\"To avenge and to serve my master! To thy death, false hero!\"");
		UI_remove_npc_face1();
		gflags[TEMP_FLAG_1] = true;
		Func097F(PALOS, "@To kill thee!@", 0x0000);
		Func097F(AVATAR, "@Stop!@", 0x0005);
		var0000 = script item after 2 ticks {
			nohalt;
			call Func0510;
		};
		abort;
	}
	if ((event == PATH_FAILURE) || (event == SI_PATH_FAILURE)) {
		var0001 = find_nearby(0x0314, 0x0028, MASK_NONE);
		for (var0004 in var0001 with var0002 to var0003) {
			var0005 = var0004->get_item_quality();
			if (var0005 == 0x0091) {
				Func0924(var0004, SHAPE_ANY);
			}
		}
		PALOS->remove_npc();
		gflags[OPENED_DOOR_TO_PALOS] = true;
		abort;
	}
}

extern void Func09AA 0x9AA ();
extern var Func097D 0x97D (var var0000, var var0001, var var0002, var var0003, var var0004);
extern void Func09AD 0x9AD (var var0000);
extern void Func097F 0x97F (var var0000, var var0001, var var0002);
extern var Func0955 0x955 ();
extern var Func099B 0x99B (var var0000, var var0001, var var0002, var var0003, var var0004, var var0005, var var0006);

void Func0526 object#(0x526) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;
	var var0008;
	var var0009;
	var var000A;
	var var000B;
	var var000C;
	var var000D;
	var var000E;

	if (event == DOUBLECLICK) {
labelFunc0526_0008:
		Func09AA();
		ANTI_SHAM->show_npc_face0(0x0000);
		say("\"Why hast thou disturbed my slumber?\"");
		AVATAR->show_npc_face1(0x0000);
		say("\"Back, creature of the undead! Thou art a thing of evil!\"");
		var0000 = IOLO->get_item_flag(IN_PARTY);
		var0001 = SHAMINO->get_item_flag(IN_PARTY);
		var0002 = DUPRE->get_item_flag(IN_PARTY);
		var0003 = Func097D(PARTY, 0x0001, 0x00E7, QUALITY_ANY, FRAME_ANY);
		UI_remove_npc_face1();
		0x0000->set_conversation_slot();
		say("\"And thou art the cattle upon which I prey!\" *\"Who sent thee to destroy Vasculio? Was it those rotting worms of Moonshade?\" *\"I know it was! Soon I shall have my vengeance for what they have done to me!\" *\"Who sent thee? Filbercio?! Mortegro?! Gustacio?! Torrissio?!\"");
		converse (["Filbercio", "Mortegro", "Gustacio", "Torrissio", "vengeance"]) {
			case "bye":
				ANTI_SHAM->show_npc_face0(0x0000);
				say("\"Foolish mortal! The time hath come to relieve thee of the burden of thy life for it is also my time to feed!\"");
				Func09AD(VASCULIO);
				UI_remove_npc_face0();
				UI_remove_npc_face1();
				Func097F(VASCULIO, "@Enjoy thy death!@", 0x0000);
				abort;

			case "Filbercio":
				remove("Mortegro");
				remove("Gustacio");
				remove("Torrissio");
				remove("Filbercio");
				say("\"Do not mention the wretched name of Filbercio in my presence! He is the one who sentenced me to die!\" *\"If that swine ever comes near me, I assure thee he will pay, and pay dearly.\"");
				var0004 = true;
				fallthrough;

			case "Mortegro":
				remove("Filbercio");
				remove("Gustacio");
				remove("Torrissio");
				remove("Mortegro");
				say("\"That despicable interloper Mortegro interfered with mine experiments, and betrayed me to the Council of Mages!\"");
				var0005 = true;
				fallthrough;

			case "Gustacio":
				remove("Filbercio");
				remove("Torrissio");
				remove("Gustacio");
				remove("Mortegro");
				say("\"I always hated that insufferable Gustacio! Always flaunting his influence, willing to betray any ideal to preserve his false sense of dignity!\"");
				var0006 = true;
				fallthrough;

			case "Torrissio":
				remove("Filbercio");
				remove("Gustacio");
				remove("Mortegro");
				remove("Torrissio");
				say("\"Ha! He is the most despised one of all! He broke our alliance and betrayed me to the Council of Mages!\"");
				var0007 = true;
				fallthrough;

			always:
				if (var0007 || (var0006 || (var0005 || var0004))) {
					say("\"Bah! They concern me not!\"");
					var0007 = false;
					var0006 = false;
					var0005 = false;
					var0004 = false;
				}
				fallthrough;

			case "vengeance" (remove):
				add("bye");
				if (var0003) {
					ANTI_SHAM->show_npc_face0(0x0000);
					say("\"Ah! But thou dost have the Magebane! I will make thee a deal then, Avatar. In exchange for thy blue sword I shall teach thee my greatest spell, one that can dispatch any foe. Dost thou agree?\"");
					if (var0000) {
						IOLO->show_npc_face1(0x0000);
						say("\"Avatar, do not trust him!\"");
						UI_remove_npc_face1();
					}
					if (var0001) {
						SHAMINO->show_npc_face1(0x0000);
						say("\"Do not bargain with this devil, Avatar!\"");
						UI_remove_npc_face1();
					}
					if (var0002) {
						DUPRE->show_npc_face1(0x0000);
						say("\"Avatar, thou must refuse!\"");
						UI_remove_npc_face1();
					}
					ANTI_SHAM->show_npc_face0(0x0000);
					say("\"Avatar, ignore the whimperings of thy companions! I will trade thee thy sword for a scroll that can let thee strike men dead! What sayest thou to the bargain?\"");
					var0008 = Func0955();
					if (var0008) {
						ANTI_SHAM->show_npc_face0(0x0000);
						say("\"I knew thou couldst not resist a chance at such power!\" *\"Take this scroll. It will vanquish any foe who threatens thee.\"");
						var0009 = Func099B(AVATAR, 0x0001, 0x02CB, 0x0041, QUALITY_ANY, 0x0000, true);
						ANTI_SHAM->show_npc_face0(0x0000);
						say("\"Fool! Now I have the weapon that thou couldst have slain me with! Thou hast sealed thy fate for no mere mortal can defeat me! Prepare to die, foolish mortal!\"");
						var0009 = UI_remove_party_items(0x0001, 0x00E7, QUALITY_ANY, FRAME_ANY, 0x0000);
						Func09AD(VASCULIO);
						Func097F(VASCULIO, "@Enjoy thy death!@", 0x0000);
						abort;
					}
					ANTI_SHAM->show_npc_face0(0x0000);
					say("\"Then thou dost leave me no choice!\"");
					Func09AD(VASCULIO);
					Func097F(VASCULIO, "@Enjoy thy death!@", 0x0000);
					abort;
				}
				ANTI_SHAM->show_npc_face0(0x0000);
				say("\"Thou hast sealed thy fate for no mere mortal can defeat me! Prepare for thy death!\"");
				if (var0000 || (var0001 || var0002)) {
					ANTI_SHAM->show_npc_face0(0x0000);
					say("\"But I can be merciful. I will spare thee, Avatar, if thou wilt give me one of thy companions. I hunger for fresh blood. Dost thou accept mine offer?\"");
					if (var0000) {
						IOLO->show_npc_face1(0x0000);
						say("\"The Avatar will not accept thine offer, foul fiend!\"");
						UI_remove_npc_face1();
					}
					if (var0001) {
						SHAMINO->show_npc_face1(0x0000);
						say("\"Thou art wasting thy fetid breath making the Avatar such an offer!\"");
						UI_remove_npc_face1();
					}
					if (var0002) {
						DUPRE->show_npc_face1(0x0000);
						say("\"Thou wilt not accept this ghoul's offer, wilt thou, Avatar?\"");
						UI_remove_npc_face1();
					}
					ANTI_SHAM->show_npc_face0(0x0000);
					say("\"So, Avatar, wilt thou listen to the whimperings of thy companions, or trade their life for thine own?\"");
					say("\"True, they do not compare to thee, but I am not too selective in my tastes. One flesh is as good as another when one hungers.\"");
					var000A = Func0955();
					if (var000A) {
						if (var0000) {
							IOLO->show_npc_face1(0x0000);
							say("\"Well, I certainly do not intend to go along with this at all!\"");
							UI_remove_npc_face1();
						}
						if (var0001) {
							SHAMINO->show_npc_face1(0x0000);
							say("\"Avatar, how couldst thou?! Thou canst forget all about this idea!\"");
							UI_remove_npc_face1();
						}
						if (var0002) {
							DUPRE->show_npc_face1(0x0000);
							say("\"This is not funny in the least, Avatar.\"");
						}
						ANTI_SHAM->show_npc_face0(0x0000);
						say("\"A pity! Then what I do not receive willingly, I will have to take by force!\"");
						Func09AD(VASCULIO);
						Func097F(VASCULIO, "@Enjoy thy death!@", 0x0000);
						abort;
					}
					ANTI_SHAM->show_npc_face0(0x0000);
					say("\"A pity! Then what I do not receive willingly, I will have to take by force!\"");
					Func09AD(VASCULIO);
					Func097F(VASCULIO, "@Enjoy thy death!@", 0x0000);
					abort;
				}
				Func09AD(VASCULIO);
				Func097F(VASCULIO, "@Enjoy thy death!@", 0x0000);
				abort;
		}
	}
	do {
		if (event != SCRIPTED) {
			break;
		}
		if (get_item_shape() == 0x024C) {
			Func097F(VASCULIO, "@Back to the pit!@", 0x0001);
			return;
		}
		if (get_item_shape() == 0x00F3) {
			var000B = AVATAR->get_object_position();
			if (gflags[VASCULIO_AWAKENS]) {
				break;
			}
			gflags[VASCULIO_AWAKENS] = true;
			var000C = script AVATAR {
				nohalt;
				wait 5;
				call Func0526;
			};
			return;
		}
		var000D = AVATAR->get_object_position();
		var000E = AVATAR->find_nearby(0x00F3, 0x0028, MASK_NONE);
		if (var000E) {
			var000B = var000E->get_object_position();
			if (var000E->get_item_frame() == 0x0000) {
				UI_play_sound_effect(0x0077);
				var000E->obj_sprite_effect(ANIMATION_VAMPIRE_RISING, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, LOOP_ONCE);
				var000C = script var000E {
					frame 3;
					wait 2;
					frame 1;
				};
				var000C = script AVATAR after 18 ticks {
					nohalt;
					call Func0526;
				};
				abort;
			}
			if (var000E->get_item_frame() != 0x0001) {
				break;
			}
			UI_play_sound_effect(0x002A);
			var000B[0x0002] += 0x0002;
			VASCULIO->move_object(var000B);
			var000C = script VASCULIO {
				face south;
			};
			// I see no way other than this
			goto labelFunc0526_0008;
		}
	} while (false)
	nobreak {
		Func097F(AVATAR, "@Spooky place.@", 0x0001);
	}
}

void Func0600 object#(0x600) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;

	var0000 = get_item_quality() - 0x0001;
	var0001 = set_item_quality(var0000);
	if (var0000 == 0x0000) {
		halt_scheduled();
		var0002 = get_item_shape();
		if (var0002 == 0x0152) {
			set_item_shape(0x03E5);
		}
		if (var0002 == 0x02BD) {
			set_item_shape(0x0253);
			var0001 = set_item_quality(0x00FF);
		}
		if (var0002 == 0x01B3) {
			var0003 = get_item_frame();
			set_item_shape(0x01E1);
			set_item_frame(var0003 + 0x0002);
		}
		UI_play_sound_effect(0x0041);
	} else {
		var0004 = script item after 50 ticks {
			call Func0600;
		};
	}
}

extern void Func089F 0x89F ();
extern void Func089E 0x89E ();

void Func0601 object#(0x601) () {
	var var0000;

	if (event == SCRIPTED) {
		if (UI_in_gump_mode()) {
			UI_close_gumps();
		}
		var0000 = AVATAR->get_barge();
		var0000 = var0000->get_object_position();
		if (var0000[0x0003] > 0x0001) {
			Func089F();
		} else {
			Func089E();
		}
	}
}

extern void Func095D 0x95D (var var0000);
extern void Func0883 0x883 ();
extern void Func0882 0x882 ();

void Func0602 object#(0x602) () {
	var var0000;
	var var0001;
	var var0002;

	var0000 = get_item_quality();
	if (var0000 == 0x00C9) {
		if (get_item_frame() == 0x0007) {
			if (gflags[TRAP_SWITCH_2_DONE] && gflags[TRAP_SWITCH_3_DONE]) {
				Func095D(0x0064);
				UI_play_sound_effect(0x0043);
				AVATAR->obj_sprite_effect(ANIMATION_PURPLE_BUBBLES, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, LOOP_ONCE);
				gflags[TRAP_SWITCH_1_DONE] = true;
				var0001 = find_nearby(0x00C8, 0x000A, MASK_EGG);
				var0001->remove_item();
				var0002 = find_nearby(0x037F, 0x000A, MASK_NONE);
				var0002->remove_item();
				Func0883();
			} else {
				Func0882();
			}
		}
	}
	if (var0000 == 0x00CA) {
		if (get_item_frame() == 0x0007) {
			if (gflags[TRAP_SWITCH_3_DONE] && (!gflags[TRAP_SWITCH_1_DONE])) {
				Func095D(0x0064);
				gflags[TRAP_SWITCH_2_DONE] = true;
				UI_play_sound_effect(0x0043);
				AVATAR->obj_sprite_effect(ANIMATION_PURPLE_BUBBLES, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, LOOP_ONCE);
				var0001 = find_nearby(0x00C8, 0x000A, MASK_EGG);
				var0001->remove_item();
				var0002 = find_nearby(0x037F, 0x000A, MASK_NONE);
				var0002->remove_item();
			}
		} else {
			Func0882();
		}
	}
	if (var0000 == 0x00CB) {
		if (get_item_frame() == 0x0009) {
			if ((!gflags[TRAP_SWITCH_2_DONE]) && (!gflags[TRAP_SWITCH_1_DONE])) {
				Func095D(0x0064);
				gflags[TRAP_SWITCH_3_DONE] = true;
				UI_play_sound_effect(0x0043);
				AVATAR->obj_sprite_effect(ANIMATION_PURPLE_BUBBLES, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, LOOP_ONCE);
				var0001 = find_nearby(0x00C8, 0x000A, MASK_EGG);
				var0001->remove_item();
				var0002 = find_nearby(0x037F, 0x000A, MASK_NONE);
				var0002->remove_item();
			}
		} else {
			Func0882();
		}
	}
}

extern var Func097D 0x97D (var var0000, var var0001, var var0002, var var0003, var var0004);
extern var Func09A0 0x9A0 (var var0000, var var0001);

void Func0603 object#(0x603) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;
	var var0008;
	var var0009;
	var var000A;
	var var000B;
	var var000C;
	var var000D;

	if (event == SCRIPTED) {
		UI_close_gumps();
		var0000 = AVATAR->find_nearby(0x03BE, 0x0028, MASK_NONE);
		if (var0000) {
			var0001 = AVATAR->find_nearby(0x02D8, 0x000A, MASK_NONE);
			if (var0001) {
				for (var0004 in var0001 with var0002 to var0003) {
					if (var0004->get_item_frame() == 0x0000) {
						var0005 = var0004->get_object_position();
						UI_play_sound_effect(0x0021);
						UI_sprite_effect(ANIMATION_BIG_RING_BLAST, var0005[0x0001], var0005[0x0002], 0x0000, 0x0000, 0x0000, LOOP_ONCE);
						var0004->remove_item();
					}
				}
				var0006 = Func097D(PARTY, 0x0001, 0x02C3, 0x007C, FRAME_ANY);
				if (var0006) {
					var0007 = UI_remove_party_items(0x0001, 0x02C3, 0x007C, FRAME_ANY, 0x0000);
				} else {
					var0008 = Func09A0(0x0000, 0x0001)->find_nearby(0x02C3, 0x001E, MASK_NONE);
					for (var000B in var0008 with var0009 to var000A) {
						var000C = var000B->get_item_quality();
						if (var000C == 0x007C) {
							var000D = var000B->get_object_position();
							UI_sprite_effect(ANIMATION_PURPLE_BUBBLES, var000D[0x0001], var000D[0x0002], 0x0000, 0x0000, 0x0000, LOOP_ONCE);
							var000B->remove_item();
						}
					}
				}
			}
		}
	}
}

void Func0605 object#(0x605) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;
	var var0008;

	var0000 = find_nearby(0x01B2, 0x0050, MASK_NONE);
	for (var0003 in var0000 with var0001 to var0002) {
		var0004 = var0003->find_nearby(0x0113, 0x000A, MASK_EGG);
		if (var0004) {
			if (var0004->get_item_quality() == 0x00D2) {
				var0005 = var0003->get_object_position();
				var0003->remove_item();
				if (!gflags[CASK_WAS_MOVED]) {
					var0006 = [(var0005[0x0001] + 0x0008), var0005[0x0002], var0005[0x0003]];
					gflags[CASK_WAS_MOVED] = true;
				} else {
					var0006 = [(var0005[0x0001] - 0x0008), var0005[0x0002], var0005[0x0003]];
					gflags[CASK_WAS_MOVED] = false;
				}
				var0007 = UI_create_new_object(0x01B2);
				if (var0007) {
					UI_play_sound_effect(0x0069);
					var0008 = UI_update_last_created(var0006);
				}
			}
		}
	}
}

void Func0606 object#(0x606) () {
	var var0000;
	var var0001;
	var var0002;

	var0000 = get_object_position();
	var0001 = var0000[0x0001] - (var0000[0x0003] / 0x0002);
	var0002 = var0000[0x0002] - (var0000[0x0003] / 0x0002);
	var0001 -= 0x0003;
	var0002 -= 0x0004;
	UI_sprite_effect(ANIMATION_POOF, var0001, var0002, 0x0000, 0x0000, 0x0000, LOOP_ONCE);
	UI_play_sound_effect(0x0030);
}

void Func0607 object#(0x607) () {
	var var0000;

	var0000 = get_lift() + 0x0001;
	set_lift(var0000);
}

void Func0609 object#(0x609) () {
	var var0000;

	var0000 = get_lift() - 0x0001;
	set_lift(var0000);
}

extern void Func090D 0x90D (var var0000, var var0001, var var0002, var var0003, var var0004, var var0005, var var0006);
extern var Func09A0 0x9A0 (var var0000, var var0001);
extern void Func060D object#(0x60D) ();

void Func060A object#(0x60A) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;
	var var0008;
	var var0009;
	var var000A;
	var var000B;

	var0000 = [0x06A7, 0x0BC5, 0x0000];
	var0001 = find_nearby(0x032C, 0x0005, MASK_NONE);
	for (var0004 in var0001 with var0002 to var0003) {
		var0005 = var0004->get_item_frame();
		if (var0005 == 0x0001) {
			var0004->set_item_frame(0x0000);
			abort;
		}
		if (var0005 == 0x0000) {
			Func090D(item, [1, 0], [0, 1], -1, Func060A, item, PATH_FAILURE);
		}
	}
	if (event == PATH_FAILURE) {
		var0001->set_item_frame(0x0001);
		UI_fade_palette(0x000C, 0x0001, 0x0000);
		PARTY->move_object(var0000);
		var0006 = UI_get_party_list();
		for (var0009 in var0006 with var0007 to var0008) {
			var000A = script var0009 {
				nohalt;
				face north;
			};
		}
		gflags[USED_IRON_MAIDEN] = false;
		var000B = Func09A0(0x0000, 0x0001);
		var000A = script var000B after 1 ticks {
			nohalt;
			call Func060D;
		};
		abort;
	}
}

extern void Func08E6 0x8E6 ();

void Func060B object#(0x60B) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;
	var var0008;
	var var0009;
	var var000A;
	var var000B;
	var var000C;
	var var000D;
	var var000E;
	var var000F;
	var var0010;
	var var0011;
	var var0012;
	var var0013;
	var var0014;
	var var0015;
	var var0016;
	var var0017;
	var var0018;
	var var0019;
	var var001A;
	var var001B;
	var var001C;
	var var001D;
	var var001E;
	var var001F;
	var var0020;
	var var0021;
	var var0022;
	var var0023;
	var var0024;
	var var0025;

	var0000 = false;
	var0001 = false;
	var0002 = false;
	var0003 = false;
	var0004 = false;
	var0005 = false;
	var0006 = false;
	var0007 = false;
	var0008 = false;
	var0009 = false;
	var000A = false;
	var000B = false;
	var000C = false;
	var000D = false;
	var000E = false;
	var000F = get_item_frame();
	var0010 = get_item_quality();
	var0011 = find_nearby(0x0313, 0x000A, MASK_ALL_UNSEEN);
	if (var0010 == 0x0001) {
		for (var0014 in var0011 with var0012 to var0013) {
			var0015 = var0014->get_item_quality();
			var0016 = var0014->get_item_frame();
			if (var0015 == 0x00DD) {
				if ((var0016 % 0x0002) == 0x0001) {
					var0000 = true;
				}
			}
			if (var0015 == 0x00DE) {
				if ((var0016 % 0x0002) == 0x0000) {
					var0001 = true;
				}
			}
			if (var0015 == 0x00DF) {
				if ((var0016 % 0x0002) == 0x0001) {
					var0002 = true;
				}
			}
		}
		if (var0000 && (var0001 && var0002)) {
			var0017 = find_nearby(0x010E, 0x000F, MASK_ALL_UNSEEN);
			for (var001A in var0017 with var0018 to var0019) {
				if (var001A->get_item_quality() == 0x00F1) {
					var001B = var001A->get_object_position();
					var001A->remove_item();
					var001C = UI_create_new_object(0x0178);
					if (var001C) {
						var001D = UI_update_last_created(var001B);
						var001C->set_item_frame(0x000C);
					}
				}
			}
		} else {
			Func08E6();
		}
	}
	if (var0010 == 0x0002) {
		for (var0014 in var0011 with var001E to var001F) {
			var0015 = var0014->get_item_quality();
			var0016 = var0014->get_item_frame();
			if (var0015 == 0x00E0) {
				if ((var0016 % 0x0002) == 0x0000) {
					var0003 = true;
				}
			}
			if (var0015 == 0x00E1) {
				if ((var0016 % 0x0002) == 0x0000) {
					var0004 = true;
				}
			}
			if (var0015 == 0x00E2) {
				if ((var0016 % 0x0002) == 0x0001) {
					var0005 = true;
				}
			}
			if (var0015 == 0x00E3) {
				if ((var0016 % 0x0002) == 0x0001) {
					var0006 = true;
				}
			}
			if (var0015 == 0x00E4) {
				if ((var0016 % 0x0002) == 0x0000) {
					var0007 = true;
				}
			}
		}
		if (var0003 && (var0004 && (var0005 && (var0006 && var0007)))) {
			var0017 = find_nearby(0x010E, 0x000F, MASK_ALL_UNSEEN);
			for (var001A in var0017 with var0020 to var0021) {
				if (var001A->get_item_quality() == 0x00F1) {
					var001B = var001A->get_object_position();
					var001A->remove_item();
					var001C = UI_create_new_object(0x0178);
					if (var001C) {
						var001D = UI_update_last_created(var001B);
						var001C->set_item_frame(0x000C);
					}
				}
			}
		} else {
			Func08E6();
		}
	}
	if (var0010 == 0x0003) {
		for (var0014 in var0011 with var0022 to var0023) {
			var0015 = var0014->get_item_quality();
			var0016 = var0014->get_item_frame();
			if (var0015 == 0x00E5) {
				if ((var0016 % 0x0002) == 0x0001) {
					var0008 = true;
				}
			}
			if (var0015 == 0x00E6) {
				if ((var0016 % 0x0002) == 0x0000) {
					var0009 = true;
				}
			}
			if (var0015 == 0x00E7) {
				if ((var0016 % 0x0002) == 0x0000) {
					var000A = true;
				}
			}
			if (var0015 == 0x00E8) {
				if ((var0016 % 0x0002) == 0x0000) {
					var000B = true;
				}
			}
			if (var0015 == 0x00E9) {
				if ((var0016 % 0x0002) == 0x0001) {
					var000C = true;
				}
			}
			if (var0015 == 0x00EA) {
				if ((var0016 % 0x0002) == 0x0000) {
					var000D = true;
				}
			}
			if (var0015 == 0x00EB) {
				if ((var0016 % 0x0002) == 0x0001) {
					var000E = true;
				}
			}
		}
		if (var0008 && (var0009 && (var000A && (var000B && (var000C && (var000D && var000E)))))) {
			var0017 = find_nearby(0x010E, 0x000F, MASK_ALL_UNSEEN);
			for (var001A in var0017 with var0024 to var0025) {
				if (var001A->get_item_quality() == 0x00F1) {
					var001B = var001A->get_object_position();
					var001A->remove_item();
					var001C = UI_create_new_object(0x0178);
					if (var001C) {
						var001D = UI_update_last_created(var001B);
						var001C->set_item_frame(0x000C);
					}
				}
			}
		} else {
			Func08E6();
		}
	}
}

extern void Func08F6 0x8F6 ();
extern var Func0994 0x994 ();
extern var Func095C 0x95C (var var0000, var var0001);
extern void Func095E 0x95E (var var0000, var var0001, var var0002);
extern var Func09A0 0x9A0 (var var0000, var var0001);
extern void Func060D object#(0x60D) ();

void Func060C object#(0x60C) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;
	var var0008;
	var var0009;
	var var000A;
	var var000B;
	var var000C;
	var var000D;
	var var000E;
	var var000F;
	var var0010;

	var0000 = false;
	Func08F6();
	var0001 = Func0994();
	UI_fade_palette(0x000C, 0x0001, 0x0000);
	AVATAR->clear_item_flag(FREEZE);
	var0002 = UI_get_party_list2();
	var0002 = [AVATAR, var0002];
	var0003 = [0x0AA7, 0x0AF3, 0x0000];
	var0004 = [0, -1, 1, 0, -1, 1, 0, -1, 1];
	var0005 = [-1, -1, -1, 0, 1, 1, 1, 0, 0];
	var0006 = 0x0001;
	for (var0009 in var0002 with var0007 to var0008) {
		var0009->halt_scheduled();
		var0009->clear_item_say();
		if (!var0009->get_item_flag(SI_ZOMBIE)) {
			var0009->set_schedule_type(FOLLOW_AVATAR);
		}
		var0009->set_temperature(0x0000);
		var0009->clear_item_flag(ASLEEP);
		var0009->clear_item_flag(CHARMED);
		var0009->clear_item_flag(CURSED);
		var0009->clear_item_flag(DEAD);
		var0009->clear_item_flag(UNKNOWN_FLAG_05);
		var0009->clear_item_flag(PARALYZED);
		var0009->clear_item_flag(POISONED);
		var0009->clear_item_flag(DONT_MOVE);
		if (Func095C(var0009, STRENGTH) > Func095C(var0009, HEALTH)) {
			var000A = Func095C(var0009, STRENGTH) - Func095C(var0009, HEALTH);
			Func095E(var0009, HEALTH, var000A);
		}
		var000A = Func095C(var0009, FOODLEVEL);
		var000A = 31 - var000A;
		Func095E(var0009, FOODLEVEL, var000A);
		var000A = [(var0003[0x0001] + var0004[var0006]), (var0003[0x0002] + var0005[var0006]), var0003[0x0003]];
		var0009->move_object(var000A);
		var000A = script var0009 {
			actor frame standing;
			face east;
		};
		var0006 += 0x0001;
	}
	var000B = Func09A0(0x0000, 0x0001);
	var000C = var000B->find_nearby(0x03B2, 0x003C, MASK_NONE);
	if (var000C) {
		for (var000F in var000C with var000D to var000E) {
			var0010 = [0x0AA7, 0x0AEF, 0x0000];
			var000F->move_object(var0010);
			var000F->clear_item_flag(ASLEEP);
			var000F->clear_item_flag(CHARMED);
			var000F->clear_item_flag(CURSED);
			var000F->clear_item_flag(DEAD);
			var000F->clear_item_flag(UNKNOWN_FLAG_05);
			var000F->clear_item_flag(PARALYZED);
			var000F->clear_item_flag(POISONED);
			var000F->clear_item_flag(DONT_MOVE);
			var000F->set_schedule_type(TALK);
			var000A = script var000F {
				face south;
				actor frame standing;
				actor frame cast_up;
				actor frame cast_out;
			};
		}
	}
	var000B = Func09A0(0x0000, 0x0003);
	var000A = script var000B {
		nohalt;
		call Func060D;
	};
}

void Func060D object#(0x60D) () {
	UI_fade_palette(0x000C, 0x0001, 0x0001);
}

void Func060E object#(0x60E) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;
	var var0008;
	var var0009;
	var var000A;
	var var000B;
	var var000C;
	var var000D;
	var var000E;
	var var000F;
	var var0010;
	var var0011;
	var var0012;
	var var0013;
	var var0014;
	var var0015;
	var var0016;
	var var0017;
	var var0018;

	var0000 = false;
	var0001 = false;
	var0002 = false;
	var0003 = false;
	var0004 = false;
	var0005 = false;
	var0006 = false;
	var0007 = false;
	var0008 = false;
	var0009 = false;
	var000A = get_item_frame();
	var000B = get_item_quality();
	var000C = find_nearby(0x0314, 0x0064, MASK_ALL_UNSEEN);
	if (var000B == 0x00ED) {
		for (var000F in var000C with var000D to var000E) {
			var0010 = var000F->get_item_quality();
			var0011 = var000F->get_item_frame();
			if (var0010 == 0x00DD) {
				if ((var0011 % 0x0002) == 0x0000) {
					var0000 = true;
				}
			}
			if (var0010 == 0x00DE) {
				if ((var0011 % 0x0002) == 0x0000) {
					var0001 = true;
				}
			}
			if (var0010 == 0x00DF) {
				if ((var0011 % 0x0002) == 0x0000) {
					var0002 = true;
				}
			}
			if (var0010 == 0x00E0) {
				if ((var0011 % 0x0002) == 0x0000) {
					var0003 = true;
				}
			}
			if (var0010 == 0x00E1) {
				if ((var0011 % 0x0002) == 0x0000) {
					var0004 = true;
				}
			}
			if (var0010 == 0x00E2) {
				if ((var0011 % 0x0002) == 0x0000) {
					var0005 = true;
				}
			}
			if (var0010 == 0x00E3) {
				if ((var0011 % 0x0002) == 0x0000) {
					var0006 = true;
				}
			}
			if (var0010 == 0x00E4) {
				if ((var0011 % 0x0002) == 0x0000) {
					var0007 = true;
				}
			}
			if (var0010 == 0x00E5) {
				if ((var0011 % 0x0002) == 0x0000) {
					var0008 = true;
				}
			}
			if (var0010 == 0x00E6) {
				if ((var0011 % 0x0002) == 0x0000) {
					var0009 = true;
				}
			}
		}
		if (var0000 && (var0001 && (var0002 && (var0003 && (var0004 && (var0005 && (var0006 && (var0007 && (var0008 && var0009))))))))) {
			var0012 = find_nearby(0x010E, 0x0064, MASK_ALL_UNSEEN);
			for (var0015 in var0012 with var0013 to var0014) {
				if (var0015->get_item_quality() == 0x00F1) {
					var0016 = var0015->get_object_position();
					var0015->remove_item();
					var0017 = UI_create_new_object(0x0178);
					if (var0017) {
						var0018 = UI_update_last_created(var0016);
						var0017->set_item_frame(0x000C);
					}
				}
			}
		}
	}
}

void Func060F object#(0x60F) () {
	var var0000;
	var var0001;

	var0000 = get_object_position();
	var0000[0x0001] -= var0000[0x0003] / 0x0002;
	var0000[0x0002] -= var0000[0x0003] / 0x0002;
	UI_sprite_effect(ANIMATION_LIGHTNING, var0000[0x0001], var0000[0x0002], 0x0000, 0x0000, 0x0000, 0x0001);
	UI_play_sound_effect(0x0074);
	UI_lightning();
	var0001 = UI_apply_damage(get_npc_prop(STRENGTH), 0x000C, LIGHTNING_DAMAGE, item);
}

void Func0611 object#(0x611) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;

	var0000 = get_item_shape();
	if (var0000 == 0x0203) {
		var0001 = 0x0366;
		var0002 =  7;
	} else {
		var0001 = 0x0203;
		var0002 = -7;
	}
	var0003 = get_object_position();
	var0003[0x0002] += var0002;
	set_item_shape(var0001);
	if (set_last_created()) {
		var0004 = UI_update_last_created(var0003);
	}
}

void Func0612 object#(0x612) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;
	var var0008;
	var var0009;
	var var000A;
	var var000B;
	var var000C;
	var var000D;
	var var000E;
	var var000F;
	var var0010;

	if (event == SCRIPTED) {
		var0000 = [0x03B1, 0x03F7, 0x03B2, 0x03B3, 0x03CF, 0x03BD, 0x03D2];
		var0001 = [0x001E, 0x000C, 0x0008, 0x0018, 0x001E, 0x0017, 0x001E];
		var0002 = [0x001E, 0x000F, 0x000C, 0x0010, 0x001E, 0x001E, 0x0014];
		var0003 = [0x0014, 0x0019, 0x001C, 0x000A, 0x001E, 0x000D, 0x001E];
		var0004 = [0x001E, 0x000D, 0x000B, 0x0012, 0x001E, 0x0012, 0x001E];
		var0005 = [0x001E, 0x000C, 0x0008, 0x0018, 0x0032, 0x0017, 0x001E];
		var0006 = [0x0A79, 0x0A25, 0x0AB0, 0x0AB0, 0x0BE0, 0x09C6, 0x0120];
		var0007 = [0x0ACC, 0x0BA9, 0x0AE9, 0x0BDE, 0x0B4B, 0x0A45, 0x0BD0];
		var0008 = [MAJOR_SIT, LAB, LOITER, LOITER, DANCE, PATROL, STANDTHERE];
		var0009 = 0x0000;
		for (var000C in var0000 with var000A to var000B) {
			var0009 += 0x0001;
			var000D = UI_create_new_object2(var000C, [var0006[var0009], var0007[var0009], 0x0000]);
			if (var000D) {
				var000D->clear_item_flag(TEMPORARY);
				var000D->set_alignment(NEUTRAL);
				var000D->set_schedule_type(var0008[var0009]);
				var000D->set_npc_id(0x0000);
				var000E = var000D->get_npc_prop(STRENGTH);
				var000F = var0001[var0009] - var000E;
				var0010 = var000D->set_npc_prop(STRENGTH, var000F);
				var000E = var000D->get_npc_prop(DEXTERITY);
				var000F = var0002[var0009] - var000E;
				var0010 = var000D->set_npc_prop(DEXTERITY, var000F);
				var000E = var000D->get_npc_prop(INTELLIGENCE);
				var000F = var0003[var0009] - var000E;
				var0010 = var000D->set_npc_prop(INTELLIGENCE, var000F);
				var000E = var000D->get_npc_prop(COMBAT);
				var000F = var0004[var0009] - var000E;
				var0010 = var000D->set_npc_prop(COMBAT, var000F);
				var000E = var000D->get_npc_prop(HEALTH);
				var000F = var0005[var0009] - var000E;
				var0010 = var000D->set_npc_prop(HEALTH, var000F);
				if (var000C == 0x03B1) {
					var000D->set_item_flag(SI_TOURNAMENT);
				}
			} else {
				UI_error_message("Error! Silver Seed Installation.");
			}
		}
	}
}

void Func0614 object#(0x614) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;

	var0000 = UI_get_speech_track();
	if ((var0000 >= 0x0000) && (var0000 < 0x0015)) {
		var0001 = AVATAR->get_readied(SI_RIGHT_RING);
		var0001 &= AVATAR->get_readied(SI_LEFT_RING);
		var0002 = BALANCE_SERPENT2;
		for (var0005 in var0001 with var0003 to var0004) {
			if ((var0005->get_item_shape() == 0x0377) && (var0005->get_item_frame() == 0x0002)) {
				var0002 = BALANCE_SERPENT;
			}
		}
	}
	if (var0000 == 0x0000) {
		var0002->say("\"Hasten! The Imbalance grows stronger...\"");
		var0002->hide();
		return;
	}
	if (var0000 == 0x0001) {
		var0002->say("\"His mission here is finished. He may now depart for the Void.\"");
		var0002->hide();
		return;
	}
	if (var0000 == 0x0002) {
		var0002->say("\"Look into the Moons' Eye.\"");
		var0002->hide();
		return;
	}
	if (var0000 == 0x0003) {
		var0002->say("\"Thou hast forgotten something.\"");
		var0002->hide();
		return;
	}
	if (var0000 == 0x0004) {
		var0002->say("\"Place the Staff, Armour, and Crown on the Altar.\"");
		var0002->hide();
		return;
	}
	if (var0000 == 0x0005) {
		var0002->say("\"Return when thou hast the Three Artifacts of the Great Hierophant: Staff, Armour, and Crown.\"");
		var0002->hide();
		return;
	}
	if (var0000 == 0x0006) {
		var0002->say("\"The Blackrock Serpents... thou must have the three Serpents of Blackrock.\"");
		var0002->hide();
		return;
	}
	if (var0000 == 0x0007) {
		var0002->say("\"Thou art in Balance, having mastered both Chaos and Order. I declare thee worthy to bear the emblems of the Great Hierophant of Balance.\"");
		var0002->hide();
		return;
	}
	if (var0000 == 0x0008) {
		var0002->say("\"Now place the Eyes of the Serpent before my statue.\"");
		var0002->hide();
		return;
	}
	if (var0000 == 0x0009) {
		var0002->say("\"Slay me! Slay me with the Serpent Sword, and send my soul back into the Void!\"");
		var0002->hide();
		return;
	}
	if (var0000 == 0x000A) {
		var0002->say("\"Seek the Temple, and within it, the Eye of the Moon.\"");
		var0002->hide();
		return;
	}
	if (var0000 == 0x000B) {
		var0002->say("\"Free Gwenno... free her from the ice!\"");
		var0002->hide();
		return;
	}
	if (var0000 == 0x000C) {
		var0002->say("\"Time is short. Move on.\"");
		var0002->hide();
		return;
	}
	if (var0000 == 0x000D) {
		var0002->say("\"The wizard... the key is the dead wizard... thou must vanquish him.\"");
		var0002->hide();
		return;
	}
	if (var0000 == 0x000E) {
		var0002->say("\"The ashes... place the Ashes on the altar.\"");
		var0002->hide();
		return;
	}
	if (var0000 == 0x000F) {
		var0002->say("\"Bane of Chaos... Chaos Bane... twisted her soul...\"");
		var0002->hide();
		return;
	}
	if (var0000 == 0x0010) {
		var0002->say("\"A new Hero has entered this world... am I dreaming, or is he real?\"");
		var0002->hide();
		return;
	}
	if (var0000 == 0x0011) {
		var0002->say("\"Who art thou, stranger? Why can't I see thee? Curse this Imbalance which veils my mind...\"");
		var0002->hide();
		return;
	}
	if (var0000 == 0x0012) {
		var0002->say("\"I know that we have met before, Stranger. Dost thou not recall?\"");
		var0002->hide();
		return;
	}
	if (var0000 == 0x0013) {
		var0002->say("\"Hero from Another World! Know that it is I, the Great Earth Serpent, whom thou liberated from imprisonment in the days of Exodus the Destroyer. If only thou couldst help me now, Avatar.\"");
		var0002->hide();
		return;
	}
	if (var0000 == 0x0014) {
		var0002->say("\"Seek the Horn... the Gwani Horn... seek it in the depths beneath the Skullcrusher Mountains.\"");
		var0002->hide();
		return;
	}
	if (var0000 == 0x0015) {
		GUARDIAN->say("\"Pleasant dreams, Avatar...\"");
		say("\"Ha ha hah hah!\"");
		GUARDIAN->hide();
		return;
	}
	if (var0000 == 0x0016) {
		GUARDIAN->say("\"See how I reward those who fail me!\"");
		say("\"Hah hah hah hah!\"");
		GUARDIAN->hide();
		return;
	}
	if (var0000 == 0x0017) {
		SUPER_GOBLIN->say("\"Hah hah hah hah!\"");
		SUPER_GOBLIN->hide();
		return;
	}
	if (var0000 == 0x0018) {
		SUPER_GOBLIN->say("\"I have paid my debt to thee, and our bargain is concluded. I shall not aid thee again. Beware the Banes of Chaos, Avatar!\"");
		SUPER_GOBLIN->hide();
		return;
	}
	if (var0000 == 0x0019) {
		DBEYER->say("\"Avatar! It is I, Dupre! My soul has been fused with the Serpent of Chaos. I am keeping it from attacking thee, but I do not know how much longer I can hold out! Quickly! Thou must go to Sunrise Isle!\"");
		DBEYER->hide();
		return;
	}
	if (var0000 == 0x001A) {
		VASCULIO->say("\"Dost thou think that thou canst chain the Serpent of Order within a prison of Balance? Never! Servants of Order, attack!\"");
		VASCULIO->hide();
	}
}

extern void Func097F 0x97F (var var0000, var var0001, var var0002);
extern var Func099F 0x99F (var var0000, var var0001, var var0002);
extern void Func08AD 0x8AD (var var0000, var var0001, var var0002, var var0003);
extern var Func097D 0x97D (var var0000, var var0001, var var0002, var var0003, var var0004);

void Func0615 object#(0x615) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;

	var0000 = UI_click_on_item();
	if (!var0000) {
		abort;
	}
	if (!var0000->is_npc()) {
		abort;
	}
	if (!var0000->get_item_flag(IN_PARTY)) {
		abort;
	}
	if (var0000->get_npc_prop(FOODLEVEL) > 24) {
		var0001 = UI_die_roll(0x0001, 0x0005);
		var0000->clear_item_say();
		if ((var0001 == 0x0001) || (var0001 == 0x0002)) {
			Func097F(var0000, "@No thank thee.@", 0x0000);
		}
		if ((var0001 == 0x0003) || (var0001 == 0x0004)) {
			Func097F(var0000, "@I am quite full.@", 0x0000);
		}
		if (var0001 == 0x0005) {
			Func097F(var0000, "@I hunger not.@", 0x0000);
		}
		abort;
	}
	event = BG_PATH_FAILURE;
	var0002 = [0x0004, 0x0006, 0x0002, 0x0005, 0x0006, 0x0006, 0x0001, 0x000C, 0x0018, 0x0010, 0x0018, 0x0018, 0x0004, 0x0008, 0x0010, 0x000A, 0x0002, 0x0003, 0x0002, 0x0001, 0x0004, 0x0003, 0x0001, 0x0018, 0x0003, 0x0001, 0x0009, 0x0002, 0x0014, 0x0008, 0x0006, 0x001F];
	var0003 = Func099F(0x0179, QUALITY_ANY, FRAME_ANY);
	while (var0003) {
		var0004 = var0002[(var0003->get_item_frame() + 0x0001)];
		Func08AD(var0003, var0004, 0x0026, var0000);
		var0003 = Func099F(0x0179, QUALITY_ANY, FRAME_ANY);
	}
	var0002 = [0x000F, 0x000C, 0x0008, 0x000E, 0x0014, 0x0004, 0x0004, 0x0004, 0x0004];
	var0003 = Func099F(0x0194, QUALITY_ANY, FRAME_ANY);
	while (var0003) {
		var0004 = var0002[(var0003->get_item_frame() + 0x0001)];
		Func08AD(var0003, var0004, 0x0026, var0000);
		var0003 = Func099F(0x0194, QUALITY_ANY, FRAME_ANY);
	}
	var0003 = Func099F(0x0268, QUALITY_ANY, FRAME_ANY);
	while (var0003) {
		Func08AD(var0003, 0x0001, 0x0026, var0000);
		var0003 = Func099F(0x0268, QUALITY_ANY, FRAME_ANY);
	}
	AVATAR->clear_item_say();
	Func097F(AVATAR, "@No more food.@", 0x0000);
	if (Func097D(PARTY, 0x0001, 0x034A, QUALITY_ANY, 0x0004)) {
		Func097F(AVATAR, "@Except for some garlic.@", 0x0011);
	}
}

void Func0616 object#(0x616) () {
	if (event == SCRIPTED) {
		gflags[AVATAR_IS_DEAD] = false;
	}
}

void Func0618 object#(0x618) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;

	if ((event == SCRIPTED) && ((gflags[TEMP_FLAG_1] == false) && ((gflags[TEMP_FLAG_2] == false) && ((gflags[TEMP_FLAG_3] == false) && (gflags[TEMP_FLAG_4] == false))))) {
		var0000 = [0x0238, 0x0BCA, 0x0000];
		UI_sprite_effect(ANIMATION_LIGHTNING, var0000[0x0001], var0000[0x0002], 0x0000, 0x0000, 0x0000, LOOP_ONCE);
		UI_sprite_effect(ANIMATION_MEDIUM_RING_BLAST, var0000[0x0001], var0000[0x0002], 0x0000, 0x0000, 0x0000, LOOP_ONCE);
		UI_play_sound_effect(0x0028);
		var0001 = UI_create_new_object(0x03FF);
		if (var0001) {
			var0001->set_item_frame(0x0000);
			var0002 = UI_update_last_created(var0000);
			var0002 = script var0001 after 20 ticks {
				nohalt;
				call Func0618;
			};
		}
		gflags[TEMP_FLAG_2] = true;
		abort;
	}
	if ((event == SCRIPTED) && (gflags[TEMP_FLAG_2] == true)) {
		remove_item();
		var0000 = [0x0238, 0x0BCA, 0x0000];
		UI_sprite_effect(ANIMATION_LIGHTNING, var0000[0x0001], var0000[0x0002], 0x0000, 0x0000, 0x0000, LOOP_ONCE);
		UI_sprite_effect(ANIMATION_MEDIUM_RING_BLAST, var0000[0x0001], var0000[0x0002], 0x0000, 0x0000, 0x0000, LOOP_ONCE);
		UI_play_sound_effect(0x0029);
		var0001 = UI_create_new_object(0x03FF);
		if (var0001) {
			var0001->set_item_frame(0x0001);
			var0002 = UI_update_last_created(var0000);
			var0002 = script var0001 after 20 ticks {
				nohalt;
				call Func0618;
			};
		}
		gflags[TEMP_FLAG_2] = false;
		gflags[TEMP_FLAG_3] = true;
		abort;
	}
	if ((event == SCRIPTED) && (gflags[TEMP_FLAG_3] == true)) {
		remove_item();
		UI_sprite_effect(ANIMATION_LIGHTNING, var0000[0x0001], var0000[0x0002], 0x0000, 0x0000, 0x0000, LOOP_ONCE);
		UI_sprite_effect(ANIMATION_MEDIUM_RING_BLAST, var0000[0x0001], var0000[0x0002], 0x0000, 0x0000, 0x0000, LOOP_ONCE);
		UI_play_sound_effect(0x002A);
		var0001 = UI_create_new_object(0x03FF);
		if (var0001) {
			var0001->set_item_frame(0x0002);
			var0002 = UI_update_last_created([0x0238, 0x0BCA, 0x0000]);
		}
		var0001 = UI_create_new_object(0x03FF);
		if (var0001) {
			var0001->set_item_frame(0x0003);
			var0002 = UI_update_last_created([0x0235, 0x0BCC, 0x0005]);
		}
		var0001 = UI_create_new_object(0x03FF);
		if (var0001) {
			var0001->set_item_frame(0x0004);
			var0002 = UI_update_last_created([0x023A, 0x0BC5, 0x0005]);
		}
		var0001 = UI_create_new_object(0x03FF);
		if (var0001) {
			var0001->set_item_frame(0x0005);
			var0002 = UI_update_last_created([0x0233, 0x0BC5, 0x0005]);
		}
		var0002 = script var0001 after 25 ticks {
			nohalt;
			call Func0618;
		};
		gflags[TEMP_FLAG_3] = false;
		gflags[TEMP_FLAG_4] = true;
		abort;
	}
	if ((event == SCRIPTED) && (gflags[TEMP_FLAG_4] == true)) {
		UI_set_weather(CLEAR_WEATHER);
		AVATAR->item_say("@By Lord British's Beard!@");
		AVATAR->show_npc_face0(0x0000);
		say("\"Look at how quickly it has grown! It looks as if it has been here for decades!\"");
		UI_remove_npc_face0();
		var0002 = script item {
			nohalt;
			call Func04CF;
		};
		gflags[TEMP_FLAG_4] = false;
		var0003 = AVATAR->get_npc_prop(EXPERIENCE);
		if (var0003 <= 0x0320) {
			var0002 = AVATAR->set_npc_prop(EXPERIENCE, 0x0320);
			abort;
		}
		if (var0003 <= 0x0640) {
			var0002 = AVATAR->set_npc_prop(EXPERIENCE, 0x0640);
			abort;
		}
		if (var0003 <= 0x0C80) {
			var0002 = AVATAR->set_npc_prop(EXPERIENCE, 0x0C80);
			abort;
		}
		if (var0003 <= 0x1900) {
			var0002 = AVATAR->set_npc_prop(EXPERIENCE, 0x1900);
			abort;
		}
		if (var0003 <= 0x3200) {
			var0002 = AVATAR->set_npc_prop(EXPERIENCE, 0x3200);
			abort;
		}
		if (var0003 <= 0x6400) {
			var0002 = AVATAR->set_npc_prop(EXPERIENCE, 0x6400);
			abort;
		}
		var0002 = AVATAR->set_npc_prop(EXPERIENCE, 0xC800);
	}
}

extern var Func097D 0x97D (var var0000, var var0001, var var0002, var var0003, var var0004);
extern var Func0955 0x955 ();
extern void Func097F 0x97F (var var0000, var var0001, var var0002);

void Func0619 object#(0x619) () {
	var var0000;
	var var0001;

	var0000 = false;
	var0001 = get_npc_id();
	if (var0001 == 0x000B) {
		var0000 = true;
	}
	if (event == SCRIPTED) {
		set_schedule_type(STANDTHERE);
		clear_item_say();
		DRUSILLA->show_npc_face0(0x0000);
		if (!gflags[MET_DRUSILLA]) {
			say("\"Well, now, sweet cakes. It's about time ye showed up. I was beginnin' to get tired a waitin'. Me name's Drusilla.");
			say("\"Ye aren't what I expected. But who am I to know what a pawn of prophecy looks like?\"");
			gflags[MET_DRUSILLA] = true;
			set_npc_id(0x000B);
		} else {
			say("\"Hey ho! It's good to see ye again! Found yer way out of that there maze, huh? Somethin' tricky, weren't it?\"");
			if (Func097D(PARTY, 0x0001, 0x03F5, QUALITY_ANY, 0x0000)) {
				say("\"An' ye got that there fancy helm, too! Good for ye!");
				say("\"Never saw any use fer it meself. I kin make me own light... Wit'out mussin' up me hair! Ha!\"");
			} else {
				say("\"Not that I want ye to think that I'm an ol' busybody, or anythin' like that... But I think ye might want ta go back an' search that there maze, deary.");
				say("\"I think ye missed somethin' ye might find real helpful-like.\"");
				add("something helpful");
			}
			if (Func097D(PARTY, 0x0001, 0x01C2, QUALITY_ANY, 0x0009)) {
				say("\"Looks like ye talked wit' that there kitty person, too. He didn't want ta talk wit' me, hmmph!");
				say("\"Never did get on too well wit' cats...\"");
			} else {
				say("\"Ah, deary, I hate ta sound like I'm meddlin'... But ye left somethin' real important back there in that there maze.");
				say("\"I think ye might want ta talk wit' that there cat critter. He needs a friend, unless I miss my guess.\"");
				add(["something important", "cat critter"]);
			}
		}
		converse (["waiting", "pawn of prophecy", "bye"]) {
			case "waiting" (remove):
				say("\"Why else would I be a standin' here, deary? This isn't exactly the hotbed of excitement, iffin ye know what I mean.");
				say("\"Ye might say that I'm a part o' yer prophecy... One o' yer guides like.\"");
				add("guides");
				fallthrough;

			case "guides" (remove):
				say("\"Well now, deary, ye seem ta need some help, iffin ye don't mind my sayin' so. Ye look a little lost, if ye ask me.");
				say("\"So here I am! I kin give ye three hints ta help ye on yer way. So listen well.\"");
				add("hints");
				fallthrough;

			case "hints" (remove):
				say("\"Got yer attention now, do I? Ha! Thought so...");
				say("\"What lies beyond this 'ere gate is a magical-type o' maze, sweet cakes. Now ye listen good to ol' Drusilla, fer only one person kin enter this 'ere maze at a time else all become confused an' die!");
				say("\"I'll tell ye straight on that it'd be easier iffin ye turned an went back to that there keep right now. So do ye want yer hints or not?\"");
				if (Func0955()) {
					say("\"Stubborn cuss, aren't ye? All right, heed me well then...");
					say("\"Iffin ye find yerself trapped, do not despair lest madness overtake ye. Know that death is the only way any of us will ever win free o' this 'ere world.");
					say("\"Keep careful track of yer turnin's, fer ye may pass through a room more than once. An' sometimes ye'll have ta turn back on yer heels afore ye can find yer way.");
					say("\"Yer third, an' final, hint is that once ye have found yer path, that section of the maze shall remain clear ta ye forever more. Do not be distracted from yer path.");
					say("\"An' now, before I let ye go, deary, I'll warn ye again... Do not take anyone inta that there maze wit' ye. No two see this place the same.\"");
				} else {
					say("\"Well now, perhaps ye be more wise than ol' Drusilla gave ye credit for. Go back ta the keep. This is no place fer ye.\"");
				}
				fallthrough;

			case "pawn of prophecy" (remove):
				say("\"Why look so surprised, sweet cakes? Ye can't tell me that this is the first time someone has told ye that ye are marked...");
				say("\"Why even those benighted idiots, the Ophidians, knew ta expect ye. So it can't be such a shock ta ye.\"");
				add("benighted idiots");
				fallthrough;

			case "benighted idiots" (remove):
				say("\"Well now, perhaps I shouldn't have been so harsh, not in front of ye.");
				say("\"Suffice it to say that not all people in this 'ere world are so addled as ta believe that wisdom is found in the hissing o' serpents... especially serpents no one kin see.");
				say("\"I follow the Guide, meself, an' it's enough that I be 'ere ta meet ye ta tell ol' Drusilla whose pot is cracked an' whose isn't.\"");
				add("Guide");
				fallthrough;

			case "Guide" (remove):
				say("\"Full o' questions, aren't ye? Well now, deary, ol' Drusilla has more ta do than ta stand an' talk philosophy wit' ye. An' ye should be about yer business as well.");
				say("\"Those what follow the Guide don't seek no converts. We've enough ta do. Iffin ye finish yer own tasks an' still want ta talk, well now, perhaps there will be time fer that later.\"");
				fallthrough;

			case "something helpful" (remove):
				say("\"Well now, deary, iffin I told ye what it were I'd jus' take the fun outta it fer ye. So ye go back an' have a look see fer yerself.\"");
				fallthrough;

			case "something important" (remove):
				say("\"I can't go a tellin' ye ever'thing, deary. Iffin yer ta be this 'ere pawn of prophecy ye'll jus' have ta figger it out yerself.\"");
				fallthrough;

			case "cat critter" (remove):
				say("\"I can't see how ye could have missed 'im. Poor thing is scared half ta death... an' hungry too, I'll wager. Ye kin afford to be friendly like to such a pitiful critter.\"");
				fallthrough;

			case "bye":
				say("\"Mercy! This has taken far longer than I thought! Ye should be on yer way now...\"");
				UI_remove_npc_face0();
				AVATAR->item_say("@Goodbye!@");
				Func097F(item, "@Be off wit' ye!@", 0x0002);
				set_schedule_type(LOITER);
				break;
		}
	}
}

extern var Func0955 0x955 ();
extern void Func097F 0x97F (var var0000, var var0001, var var0002);

void Func061A object#(0x61A) () {
	var var0000;
	var var0001;

	var0000 = false;
	var0001 = get_npc_id();
	if (var0001 == 0x000C) {
		var0000 = true;
	}
	if (event == SCRIPTED) {
		set_schedule_type(STANDTHERE);
		clear_item_say();
		RIEYA->show_npc_face0(0x0000);
		if (!gflags[MET_RIEYA]) {
			say("\"Didst thy mother never tell thee not to speak with strange women then? Hmmmph!");
			say("\"A fine one thou art to be wasting Rieya's time. Thou shouldst watch thy step, my bonny pawn of prophecy, lest I forget the aid that I was meant to give thee.\"");
			gflags[MET_RIEYA] = true;
			set_npc_id(0x000C);
		} else {
			say("\"Don't tell me that thou hast come back to Rieya looking for more aid! I've helped thee all I may, pawn of prophecy. Thou needs must look elsewhere...\"");
		}
		converse (["Rieya", "pawn of prophecy", "aid", "bye"]) {
			case "Rieya" (remove):
				say("\"Rieya is my name... And I'll thank thee not to smirk so! Thy name is just as strange to me, I assure thee!");
				say("\"Thou shouldst mind thy manners, else -- Guide or no -- I'll not aid thee!\"");
				add("Guide");
				fallthrough;

			case "Guide" (remove):
				say("\"I shouldn't wonder that thou hadst never heard of the Guide before. Thou art scarcely fit to be the pawn of prophecy. Why clutter up thy mind with other possibilities...");
				say("Oh, never mind! Thou wouldst not understand!\"");
				add(["scarcely fit", "other possibilities"]);
				fallthrough;

			case "scarcely fit" (remove):
				say("\"Look at thee! Thou hast no idea what is going on! Thou art as willing to listen to me as to those fools in the keep!");
				say("\"How canst thou be so trusting? How hast thou lived so long?\"");
				add(["What is going on?", "fools in the keep"]);
				fallthrough;

			case "What is going on?" (remove):
				say("\"What is going on?! Listen to thee! Dunce, there is a war going on!");
				say("\"People are killing each other over a difference in philosophies! And thou art parading about as if no one wouldst make thee a target!\"");
				fallthrough;

			case "fools in the keep" (remove):
				say("\"Aye, they're fools. They follow the @wisdom@ of beings they have never seen, and believe that extermination of all opposing philosophies will restore Balance!");
				say("\"I tell thee that they are fools! Fools! This world is doomed. They should let it die and move on...");
				say("\"Ah well, I can't expect thee to understand. Never mind.\"");
				fallthrough;

			case "other possibilities" (remove):
				say("\"Not all follow the Teachings of the Serpents, friend. Some believe that it is pointless to hope for Balance on this flawed world.");
				say("\"But those in the keep refuse to acknowledge that there are others that follow other paths. Fools!\"");
				fallthrough;

			case "pawn of prophecy" (remove):
				say("\"The pawn of prophecy is thou, needle head! Thou dost wear the Amulet of Balance, which -- according to those fools in the keep -- makes thee the Champion of Balance.\"");
				add(["Amulet of Balance", "Champion of Balance"]);
				fallthrough;

			case "Amulet of Balance" (remove):
				say("\"Dost thou not know what that bauble is yet? Are all those Ophidians asleep?! How could they not have told thee?");
				say("\"I'll tell thee, this is service above and beyond the call! Oh well, I shall have to do their job for them.");
				say("\"The Amulet of Balance once belonged to the Great Hierophant who used it to enforce Balance upon the Ophidians. It is a magical pendant that none but the Champion of Balance may wear, or so it is said.\"");
				add(["Ophidians", "Great Hierophant"]);
				fallthrough;

			case "Ophidians" (remove):
				say("\"Oooh, thine cup is a bit shy of full, isn't it?");
				say("\"Ophidians are those who follow the Teachings of the Serpents.\"");
				add("Teachings of the Serpents");
				fallthrough;

			case "Teachings of the Serpents" (remove):
				say("\"I can't believe I am telling thee this! I should send thee back to the keep, I should!");
				say("\"The Ophidians worship the Great Earth Serpent, and the Order and Chaos serpents, which supposedly dwell within the Void.");
				say("\"And before thou dost ask, I cannot explain the Void to thee. Thou shouldst ask those idiots at the keep.");
				say("\"The values of the Ophidians are called the Teachings. Got it?\"");
				fallthrough;

			case "Great Hierophant" (remove):
				say("\"Who would have thought a pawn of prophecy could be so stupid?!");
				say("\"The Ophidians considered the Great Hierophant to be the Voice of the Great Earth Serpent. Whatever he was, he kept them from killilng each other...");
				say("\"Until they murdered him that is. THEN they started killing each other. Have to do things right, I guess...\"");
				add("murdered");
				fallthrough;

			case "murdered" (remove):
				say("\"Chaos said Order was responsible. Order said Chaos did it.");
				say("\"Who knows? Who cares? They've been trying to destroy each other ever since.\"");
				fallthrough;

			case "Champion of Balance" (remove):
				say("\"The Champion of Balance was the muscle behind the Great Hierophant. Guess the Great Hierophant couldn't get his hands dirty... Who knows?");
				say("\"It was the Champion's job to pound any dissenters of the Teachings into submission. Brute force will do it every time. Guess that explains the lack of brains...\"");
				fallthrough;

			case "aid" (remove):
				say("\"I never said that thou needs must like me. I said that I had to aid thee. Dost thou wish to hear it or not?\"");
				if (Func0955()) {
					say("\"Take all the help thou canst get, right? Hmmph!");
					say("\"Beyond this gate lies a room that will block thy progress and try to kill thee. In this room thou shalt find three buttons.");
					say("\"Press first the middle button, and then the top button. Press the south button last and thou shalt be free.\"");
				} else {
					say("\"Then why dost thou waste my time?! Go back to those fool Ophidians, where thou dost belong!\"");
					abort;
				}
				fallthrough;

			case "bye":
				UI_remove_npc_face0();
				set_schedule_type(LOITER);
				Func097F(AVATAR, "@Good riddance!@", 0x0000);
				Func097F(item, "@Pea brain!@", 0x0002);
				break;
		}
	}
}

extern void Func097F 0x97F (var var0000, var var0001, var var0002);

void Func061B object#(0x61B) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;

	var0000 = UI_is_pc_female();
	var0001 = "handsome";
	if (var0000) {
		var0001 = "beautiful";
	}
	var0002 = false;
	var0003 = get_npc_id();
	if (var0003 == 0x000D) {
		var0002 = true;
	}
	if (event == SCRIPTED) {
		set_schedule_type(STANDTHERE);
		clear_item_say();
		SOLARIA->show_npc_face0(0x0000);
		if (!gflags[MET_SOLARIA]) {
			say("\"Well hello, ",
				var0001,
				". I'm glad I did not give up on thee. Thou art worth the wait, assuredly.\"");
			gflags[MET_SOLARIA] = true;
			set_npc_id(0x000D);
		} else {
			say("\"Nice to see thee again, ",
				var0001,
				".\"");
		}
		converse (["Give up on me?", "wait", "bye"]) {
			case "Give up on me?" (remove):
				say("\"Well, I would not have done that, really. After all, it's not often a girl gets the chance to play a part in prophecy.");
				say("\"If I had given up, how would I have been able to help thee?\"");
				add(["prophecy", "help"]);
				fallthrough;

			case "prophecy" (remove):
				say("\"Thy coming was foretold long ago, ",
					var0001,
					"... though thou wert expected much earlier. I fear that the task before thee shall be much more difficult now.\"");
				add(["foretold", "task"]);
				fallthrough;

			case "foretold" (remove):
				say("\"I suppose that the Ophidians learned of it through their Hierophants. We were told by our Guide...");
				say("\"I was told to await thee here. And so I have waited... Thou hast been quite tardy, thou knowest, ",
					var0001,
					".\"");
				add(["Ophidians", "Hierophants", "Guide"]);
				fallthrough;

			case "Ophidians" (remove):
				say("\"Thou dost not know who the Ophidians are? How strange.");
				say("\"They are the people that hold the keep. Quite warlike, really. I don't have much to do with them...\"");
				fallthrough;

			case "Hierophants" (remove):
				say("\"At least I think that is what they are called.");
				say("\"The Hierophants are the holy men -- and women -- of the Ophidians. I understand that they are also the political leaders...");
				say("\"Personally, I think that anyone possessing that much power is a bad idea.\"");
				fallthrough;

			case "Guide" (remove):
				say("\"The Guide is who I follow, ",
					var0001,
					". I would love to stand and tell thee all about it, but thou shouldst really be on thy way... Thou art quite late, thou knowest.\"");
				add("late");
				fallthrough;

			case "late" (remove):
				say("\"The Ophidian's war has gone on for many years now, ",
					var0001,
					". I don't think that Chaos will be able to hold off Order much longer.");
				say("\"If thou art going to restore Balance thou wilt have to act quickly.\"");
				fallthrough;

			case "task" (remove):
				say("\"The task of the pawn of prophecy -- or, as the Ophidians call thee, the Champion of Balance -- is to restore Balance to the world.");
				say("\"I fear that the tide of battle may have turned so far that even thou canst not pull it back. If Order destroys Chaos, there will be nothing to bring Balance to, ",
					var0001,
					".\"");
				add("destroys Chaos");
				fallthrough;

			case "destroys Chaos" (remove):
				say("\"The Ophidians who follow Order believe that those who follow Chaos are responsible for the murder of one of their holy men. They have sworn to rid the world of Chaos...");
				say("\"And now that they have created the automatons, they may succeed.\"");
				add("automatons");
				fallthrough;

			case "automatons" (remove):
				say("\"Thou canst not miss seeing them anywhere near the keep, ",
					var0001,
					". They are the men of metal that does swell the ranks of Order.");
				say("\"With the added strength of the automatons, Order shall swiftly overcome Chaos... Thy time to complete thy task grows short, ",
					var0001,
					".\"");
				fallthrough;

			case "help" (remove):
				say("\"I have been charged with the task of aiding thee, ",
					var0001,
					". Beyond this gate lies a threat to thee. It is I who must give thee the key to escaping its snare.\"");
				add("key");
				fallthrough;

			case "key" (remove):
				say("\"Not a physical key, ",
					var0001,
					", but a hint... if thou wilt.");
				say("\"Thou shalt come to a room in which thy passage is blocked. To win thy freedom, thou shalt have to know which of the many levers must be moved.");
				say("\"Pull every other lever down to break free of the trap.\"");
				fallthrough;

			case "wait" (remove):
				say("\"It has been quite a while... But it does not matter, now that thou art here, ",
					var0001,
					".");
				say("\"Perhaps, after thou hast completed thy task, I couldst think of a way for thee to make it up to me.\"");
				add(["think of a way", "make it up to thee"]);
				fallthrough;

			case "think of a way" (remove):
				say("\"Let us just say that thou dost inspire me... I can promise thee that I shall be... creative.\"");
				fallthrough;

			case "make it up to thee" (remove):
				say("\"Oh, do not tempt me, ",
					var0001,
					"! We have duties yet to fulfill, thou and I. Perhaps we can find time later, in a more... romantic spot, shall we say?\"");
				fallthrough;

			case "bye":
				UI_remove_npc_face0();
				Func097F(AVATAR, "@Farewell!@", 0x0000);
				Func097F(item, "@Take care!@", 0x0002);
				set_schedule_type(LOITER);
				break;
		}
	}
}

extern void Func097F 0x97F (var var0000, var var0001, var var0002);
extern void Func073B object#(0x73B) ();

void Func061D object#(0x61D) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;
	var var0008;
	var var0009;
	var var000A;

	if (event == SCRIPTED) {
		AVATAR->show_npc_face0(0x0000);
		say("\"Quickly! Surround Batlin!\"");
		UI_remove_npc_face0();
		var0000 = AVATAR->find_nearby(0x013E, 0x0014, MASK_NONE);
		if (var0000) {
			Func097F(var0000, "@Stay back!@", 0x000A);
		}
		var0001 = AVATAR->find_nearby(0x025F, 0x0028, MASK_EGG);
		var0002 = 0x0000;
		for (var0005 in var0001 with var0003 to var0004) {
			var0006 = var0005->get_item_frame();
			if (var0006 == 0x0014) {
				var0007 = AVATAR->get_distance(var0005);
				AVATAR->si_path_run_usecode(var0005->get_object_position(), PATH_SUCCESS, var0005, Func061D, true);
				var0008 = script AVATAR after (var0007 + 0x0002) ticks {
					nohalt;
					face FACE_EAST;
				};
			}
			if (var0006 == 0x0015) {
				var0007 = IOLO->get_distance(var0005);
				IOLO->si_path_run_usecode(var0005->get_object_position(), PATH_SUCCESS, var0005, Func061D, true);
				var0008 = script IOLO after (var0007 + 0x0002) ticks {
					nohalt;
					face FACE_NORTH;
				};
			}
			if (var0006 == 0x0016) {
				var0007 = SHAMINO->get_distance(var0005);
				SHAMINO->si_path_run_usecode(var0005->get_object_position(), PATH_SUCCESS, var0005, Func061D, true);
				var0008 = script SHAMINO after (var0007 + 0x0002) ticks {
					nohalt;
					face FACE_NORTH;
				};
			}
			if (var0006 == 0x0017) {
				var0007 = DUPRE->get_distance(var0005);
				DUPRE->si_path_run_usecode(var0005->get_object_position(), PATH_SUCCESS, var0005, Func061D, true);
				var0008 = script DUPRE after (var0007 + 0x0002) ticks {
					nohalt;
					face FACE_WEST;
				};
			}
			if (var0007 > var0002) {
				var0002 = var0007;
			}
		}
		var0008 = script AVATAR after (var0002 + 0x0019) ticks {
			nohalt;
			call Func073B;
		};
		abort;
	}
	if ((event == PATH_SUCCESS) || (event == SI_PATH_FAILURE)) {
		var0009 = get_object_position();
		UI_play_sound_effect(0x0082);
		UI_play_sound_effect(0x0074);
		UI_sprite_effect(ANIMATION_LIGHTNING, var0009[0x0001], var0009[0x0002], 0x0000, 0x0000, 0x0000, LOOP_ONCE);
		UI_sprite_effect(ANIMATION_TELEPORT2, var0009[0x0001], var0009[0x0002], 0x0000, 0x0000, 0x0000, LOOP_ONCE);
		var000A = ["@I'm frozen!@", "@I can't move!@", "@What's wrong?@"];
		item_say(var000A[UI_die_roll(0x0001, 0x0003)]);
	}
}

extern void Func097F 0x97F (var var0000, var var0001, var var0002);
extern var Func09A0 0x9A0 (var var0000, var var0001);

void Func061E object#(0x61E) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;
	var var0008;
	var var0009;

	if (gflags[PASSED_CLONE_SHAMINO_TEST]) {
		abort;
	}
	var0000 = AVATAR->get_object_position();
	if ((event == SCRIPTED) && ((var0000[0x0001] > 0x0010) && ((var0000[0x0001] < 0x004F) && ((var0000[0x0002] > 0x0660) && (var0000[0x0002] < 0x067A))))) {
		var0001 = false;
		var0002 = [0x0130, 0x02FE, 0x01D5, 0x0378];
		if (!(SEX_02->get_schedule_type() == DANCE)) {
			var0002 &= 0x028C;
		}
		var0003 = ["@Help us!@", "@Press the right button!@", "@Free us with the right button!@", "@Be kind...@", "@Do not force us!@", "@Damn the buttons!@"];
		for (var0006 in var0002 with var0004 to var0005) {
			var0007 = AVATAR->find_nearby(var0006, 0x0014, MASK_NONE);
			if (var0007) {
				Func097F(var0007, var0003[UI_get_random(UI_get_array_size(var0003))], UI_get_random(0x000A));
				var0001 = true;
			}
		}
		if (var0001) {
			var0008 = UI_die_roll(0x0028, 0x0050);
			var0007 = Func09A0(0x0000, 0x0001);
			var0009 = script var0007 after var0008 ticks {
				nohalt;
				call Func061E;
			};
		}
	}
}

void Func061F object#(0x61F) () {
	clear_item_flag(IN_ACTION);
}

void Func0620 object#(0x620) () {
	set_item_flag(IN_ACTION);
}

extern var Func098D 0x98D ();
extern var Func0880 0x880 (var var0000);
extern void Func0624 object#(0x624) ();
extern void Func0986 0x986 (var var0000, var var0001);
extern void Func0881 0x881 ();
extern var Func0988 0x988 (var var0000, var var0001);
extern void Func0623 object#(0x623) ();

void Func0622 object#(0x622) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;
	var var0008;
	var var0009;
	var var000A;
	var var000B;
	var var000C;
	var var000D;
	var var000E;
	var var000F;
	var var0010;
	var var0011;
	var var0012;
	var var0013;
	var var0014;
	var var0015;
	var var0016;
	var var0017;

	if (event == DOUBLECLICK) {
		var0000 = UI_get_party_list();
		var0001 = UI_get_array_size(UI_get_party_list());
		if (var0001 == 0x0001) {
labelFunc0622_0024:
			var0002 = 0x0006 + UI_die_roll(0x0000, 0x0009);
		} else {
			var0003 = AVATAR->get_npc_name();
			if (var0001 > 0x0002) {
				var0004 = "we";
			} else {
				var0004 = "I";
			}
			var0005 = Func098D();
			for (var0008 in var0005 with var0006 to var0007) {
				if (var0008->npc_nearby() && var0008->get_item_flag(IN_PARTY)) {
					break;
				}
			} nobreak {
				// I see no way other than this
				goto labelFunc0622_0024;
			}
			var0008->show_npc_face0(0x0000);
			say("\"In how many hours shall ",
				var0004,
				" awaken thee, ",
				var0003,
				"?\"");
			var0002 = UI_input_numeric_value(0x0000, 0x000C, 0x0001, 0x0008);
			if (var0002 == 0x0000) {
				say("\"Cease thy jesting, Avatar! We have serious work to do!!\"");
				UI_remove_npc_face0();
				if (Func0880(item)) {
					item->Func0624();
				}
				for (var000B in var0000 with var0009 to var000A) {
					var000B->set_schedule_type(FOLLOW_AVATAR);
				}
				AVATAR->clear_item_flag(ASLEEP);
				return;
			}
			say("\"Pleasant dreams.\"");
			UI_remove_npc_face0();
		}
		UI_fade_palette_sleep(0x000C, 0x0001, 0x0000);
		var000C = var0002 * 0x05DC;
		Func0986(var0002, item);
		var000D = [0x004A, 0x00B8, 0x0001, 0x0002, 0x0003, 0x0004, 0x0005, 0x0006, 0x0007, 0x000B];
		for (var0010 in var000D with var000E to var000F) {
			for (var0013 in var0000 with var0011 to var0012) {
				var0014 = var0013->find_object(0x0281, var0010, FRAME_ANY);
				if (var0014) {
					var0014->remove_item();
				}
			}
		}
		Func0881();
		var0000 = Func0988(AVATAR->get_npc_object(), var0000);
		for (var000B in var0000 with var0015 to var0016) {
			var000B->set_schedule_type(LOITER);
		}
		var0017 = script AVATAR {
			wait 34;
			actor frame sleeping;
			wait 3;
		};
		var0017 = script item after 33 ticks {
			nohalt;
			call Func0622;
			call Func0623;
		};
		UI_advance_time(var000C);
	}
	if (event == SCRIPTED) {
		UI_fade_palette_sleep(0x000C, 0x0001, 0x0001);
	}
}

extern void Func094A 0x94A (var var0000);
extern void Func0624 object#(0x624) ();

void Func0623 object#(0x623) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;

	if (event == SCRIPTED) {
		var0000 = UI_get_party_list();
		if (UI_get_array_size(var0000) > 0x0001) {
			var0001 = AVATAR->get_npc_name();
			Func094A(("Arise, " + var0001) + ". 'Tis time to continue the quest.");
		}
		for (var0004 in var0000 with var0002 to var0003) {
			var0004->set_schedule_type(FOLLOW_AVATAR);
		}
		AVATAR->set_item_flag(ASLEEP);
		AVATAR->clear_item_flag(ASLEEP);
		if ((get_item_shape() == 0x03F3) && (get_item_frame() == 0x0015)) {
			event = DOUBLECLICK;
			item->Func0624();
		}
	}
}

extern void Func090D 0x90D (var var0000, var var0001, var var0002, var var0003, var var0004, var var0005, var var0006);

void Func0624 object#(0x624) () {
	var var0000;
	var var0001;
	var var0002;

	if (event == DOUBLECLICK) {
		UI_close_gumps();
		var0000 = [-1, -1, -1,  0,  0,  0,  1,  1,  1];
		var0001 = [ 1,  0, -1,  1,  0, -1,  1,  0, -1];
		AVATAR->halt_scheduled();
		Func090D(item, var0000, var0001, -1, Func0624, item, PATH_SUCCESS);
		UI_set_path_failure(Func0624, item, SCRIPTED);
	}
	if (event == SCRIPTED) {
		set_item_shape(0x0247);
		set_item_frame(0x0000);
	}
	if (event == PATH_SUCCESS) {
		UI_close_gumps();
		var0002 = script AVATAR {
			face FACE_NORTH;
			actor frame bowing;
			wait 1;
			actor frame standing;
		};
		if (var0002) {
			var0002 = script item {
				wait 2;
				call Func0624;
			};
		}
	}
}

extern var Func0994 0x994 ();
extern var Func0955 0x955 ();
extern var Func087E 0x87E (var var0000, var var0001);
extern var Func0906 0x906 (var var0000);
extern var Func090A 0x90A (var var0000);
extern void Func087D 0x87D ();
extern void Func0625 object#(0x625) ();
extern void Func063C object#(0x63C) ();

void Func0625 object#(0x625) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;
	var var0008;
	var var0009;
	var var000A;
	var var000B;
	var var000C;
	var var000D;
	var var000E;
	var var000F;
	var var0010;
	var var0011;
	var var0012;
	var var0013;
	var var0014;
	var var0015;
	var var0016;
	var var0017;
	var var0018;
	var var0019;
	var var001A;
	var var001B;
	var var001C;
	var var001D;
	var var001E;
	var var001F;
	var var0020;

	if (event == DOUBLECLICK) {
		var0000 = get_item_shape();
		if (get_npc_prop(SEX_FLAG)) {
			var0001 = "her";
			var0002 = "she";
		} else {
			var0001 = "his";
			var0002 = "he";
		}
		if (var0000 == 0x00E4) {
			HAZARD->show_npc_face(0x0000);
		} else {
			if ((var0000 == 0x012A) || (var0000 == 0x0210)) {
				UI_attack_avatar();
				return;
			}
			if ((var0000 == 0x01CD) || (var0000 == 0x0103)) {
				CHUCK->show_npc_face(0x0000);
			} else if (var0000 == 0x02EB) {
				AUTOMATON_FACE->show_npc_face(0x0000);
			} else if ((var0000 == 0x017D) || (var0000 == 0x02D0)) {
				HOUND_OF_DOSKAR->show_npc_face(0x0000);
			} else {
				var0003 = get_npc_number();
				var0003->show_npc_face(0x0000);
			}
		}
		if (var0003 == VASEL) {
			say("\"Please, I beg thee to stop this or thou wilt anger my master....\"");
			return;
		}
		var0004 = 0x0284;
		if (Func0994() == 0x000D) {
			var0004 = 0x03B7;
		}
		if (Func0994() == 0x000E) {
			var0004 = 0x03B8;
		}
		if (Func0994() == 0x0003) {
			var0004 = 0x03B4;
		}
		var0005 = PARTY->count_objects(var0004, QUALITY_ANY, FRAME_ANY);
		if ((UI_die_roll(0x0001, 0x0002) == 0x0001) && var0005) {
			say("\"Cease and desist immediately!\"~~\"Dost thou wish to avoid the unpleasantries of a lengthy trial?\"");
			var0006 = Func0955();
			if (var0006) {
				say("\"What is thy liberty worth?\"");
				do {
					if (!Func087E(var0005, var0004)) {
						say("The guard looks unimpressed by your paltry offer. \"Our jail is populated by some unsavory knaves. Thy freedom should be worth more than that...\"");
						if (!Func087E(var0005, var0004)) {
							break;
						}
					}
					if (UI_is_pc_female()) {
						var0007 = "woman";
					} else {
						var0007 = "man";
					}
					if (Func0994() == 0x000D) {
						var0008 = [0x02D0, 0x00E4];
					}
					if (Func0994() == 0x0003) {
						var0008 = [0x02D0, 0x017D];
					}
					if (Func0994() == 0x000E) {
						var0008 = [0x02D0, 0x0103, 0x01CD];
					}
					var0009 = [];
					for (var000C in var0008 with var000A to var000B) {
						var0009 &= find_nearby(var000C, 0x001E, MASK_NONE);
					}
					for (var000F in var0009 with var000D to var000E) {
						var000F->set_schedule_type(WANDER);
					}
					var0010 = find_nearby(SHAPE_ANY, 0x0041, MASK_NPC2);
					for (var0013 in var0010 with var0011 to var0012) {
						if (var0013->get_schedule_type() == IN_COMBAT) {
							var0013->set_schedule_type(WANDER);
						}
					}
					say("\"I am pleased to see that thou art a thinking ",
						var0007,
						". I will take care of this disturbance.\"");
					UI_play_music(0x00FF, item);
					abort;
				} while (false);
			}
			// I see no way other than this
			goto labelFunc0625_031E;
		}
		say("\"Cease and desist immediately, ruffian!\"");
		say("\"Wilt thou come quietly?\"");
		add(["Yes", "No"]);
		var0014 = UI_get_party_list();
		for (var0017 in var0014 with var0015 to var0016) {
			var0018 = var0017->find_object(0x031D, 0x00BB, FRAME_ANY);
			if (var0018) {
				add("certificate");
				break;
			}
		}
		converse (0) {
			case "Yes":
				say("\"Very well. Thou shalt remain in prison until we see fit to release thee.\"");
				var0010 = find_nearby(SHAPE_ANY, 0x0041, MASK_NPC2);
				for (var0013 in var0010 with var0019 to var001A) {
					if (var0013->get_schedule_type() == IN_COMBAT) {
						var0013->set_schedule_type(WANDER);
					}
				}
				UI_stop_arresting();
				var001B = script AVATAR after 2 ticks {
					nohalt;
					call Func0625;
					actor frame sleeping;
				};
				abort;

			case "No":
labelFunc0625_031E:
				say("\"An unfortunate decision, my friend.\"");
				UI_attack_avatar();
				return;

			case "certificate":
				say("\"Oh, I see. Carry on, carry on.\"");
				UI_stop_arresting();
				return;
		}
	}
	if (event == SCRIPTED) {
		var0014 = UI_get_party_list();
		for (var001E in var0014 with var001C to var001D) {
			var001E->set_schedule_type(FOLLOW_AVATAR);
			var001E->set_item_frame(0x0000);
		}
		if (Func0994() == 0x000D) {
			var001F = [0x0427, 0x09D8, 0x0000];
		}
		if (Func0994() == 0x0003) {
			var001F = [0x03E0, 0x0620, 0x0000];
		}
		if (Func0994() == 0x000E) {
			var001F = [0x0931, 0x073A, 0x0000];
		}
		UI_fade_palette(0x000C, 0x0001, 0x0000);
		UI_play_music(0x00FF, item);
		PARTY->move_object(var001F);
		var0020 = AVATAR->find_nearby(0x033C, 0x000A, MASK_NONE);
		if (var0020 && (Func0906(var0020) == 0x0001)) {
			var001B = Func090A(var0020);
		}
		Func087D();
		var001B = script AVATAR {
			nohalt;
			wait 1;
			call Func063C;
		};
	}
}

extern void Func097F 0x97F (var var0000, var var0001, var var0002);
extern var Func0988 0x988 (var var0000, var var0001);
extern var Func0989 0x989 (var var0000, var var0001);
extern var Func097E 0x97E (var var0000);
extern var Func09A0 0x9A0 (var var0000, var var0001);
extern void Func08A1 0x8A1 ();
extern void Func02C0 shape#(0x2C0) ();

void Func0626 object#(0x626) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;
	var var0008;
	var var0009;
	var var000A;
	var var000B;
	var var000C;
	var var000D;
	var var000E;
	var var000F;
	var var0010;
	var var0011;
	var var0012;
	var var0013;
	var var0014;

	if ((event == SCRIPTED) && gflags[TEMP_FLAG_4]) {
		AVATAR->set_item_flag(DONT_MOVE);
		gflags[TEMP_FLAG_4] = false;
		gflags[TEMP_FLAG_3] = true;
		UI_play_sound_effect(0x0027);
		var0000 = AVATAR->get_object_position();
		UI_sprite_effect(ANIMATION_LIGHTNING_BLUE, (var0000[0x0001] - 0x0001), (var0000[0x0002] - 0x0001), 0x0000, 0x0000, 0x0000, LOOP_ONCE);
		UI_sprite_effect(ANIMATION_SMALL_BLAST, (var0000[0x0001] - 0x0001), (var0000[0x0002] - 0x0001), 0x0000, 0x0000, 0x0000, LOOP_ONCE);
		var0001 = script AVATAR after 15 ticks {
			nohalt;
			call Func0626;
		};
		Func097F(AVATAR, "@Ooouch!@", 0x0004);
		abort;
	}
	if ((event == SCRIPTED) && gflags[TEMP_FLAG_3]) {
		gflags[TEMP_FLAG_3] = false;
		gflags[TEMP_FLAG_2] = true;
		UI_play_sound_effect(0x0029);
		var0000 = AVATAR->get_object_position();
		UI_sprite_effect(ANIMATION_LIGHTNING_RED, (var0000[0x0001] - 0x0001), (var0000[0x0002] - 0x0001), 0x0000, 0x0000, 0x0000, LOOP_ONCE);
		UI_sprite_effect(ANIMATION_BIG_RING_BLAST, (var0000[0x0001] - 0x0001), (var0000[0x0002] - 0x0001), 0x0000, 0x0000, 0x0000, LOOP_ONCE);
		var0001 = script AVATAR after 10 ticks {
			nohalt;
			call Func0626;
		};
		abort;
	}
	if ((event == SCRIPTED) && gflags[TEMP_FLAG_2]) {
		gflags[TEMP_FLAG_2] = false;
		gflags[TEMP_FLAG_1] = true;
		UI_play_sound_effect(0x002A);
		var0000 = AVATAR->get_object_position();
		UI_sprite_effect(ANIMATION_LIGHTNING_GREEN, (var0000[0x0001] - 0x0001), (var0000[0x0002] - 0x0001), 0x0000, 0x0000, 0x0000, LOOP_ONCE);
		UI_sprite_effect(ANIMATION_SMALL_RING_BLAST, (var0000[0x0001] - 0x0001), (var0000[0x0002] - 0x0001), 0x0000, 0x0000, 0x0000, LOOP_ONCE);
		var0001 = script AVATAR after 18 ticks {
			nohalt;
			call Func0626;
		};
		Func097F(AVATAR, "@Aaargh!@", 0x0004);
		abort;
	}
	if ((event == SCRIPTED) && gflags[TEMP_FLAG_1]) {
		gflags[TEMP_FLAG_1] = false;
		AVATAR->set_polymorph(0x00EF);
		UI_play_sound_effect(0x0074);
		var0000 = AVATAR->get_object_position();
		UI_sprite_effect(ANIMATION_LIGHTNING_GREEN, (var0000[0x0001] - 0x0001), (var0000[0x0002] - 0x0001), 0x0000, 0x0000, 0x0000, LOOP_ONCE);
		UI_sprite_effect(ANIMATION_BIG_RING_BLAST, (var0000[0x0001] - 0x0001), (var0000[0x0002] - 0x0001), 0x0000, 0x0000, 0x0000, LOOP_ONCE);
		UI_sprite_effect(ANIMATION_SMALL_RING_BLAST, (var0000[0x0001] - 0x0001), (var0000[0x0002] - 0x0001), 0x0000, 0x0000, 0x0000, LOOP_ONCE);
		UI_sprite_effect(ANIMATION_BLANK_28, (var0000[0x0001] - 0x0001), (var0000[0x0002] - 0x0001), 0x0000, 0x0000, 0x0000, LOOP_ONCE);
		UI_sprite_effect(ANIMATION_MEDIUM_BLAST, (var0000[0x0001] - 0x0001), (var0000[0x0002] - 0x0001), 0x0000, 0x0000, 0x0000, LOOP_ONCE);
		var0001 = script AVATAR after 30 ticks {
			nohalt;
			call Func0626;
		};
		abort;
	}
	if (event == SCRIPTED) {
		AVATAR->clear_item_flag(DONT_MOVE);
		UI_fade_palette(0x000C, 0x0001, 0x0000);
		UI_run_endgame(true);
		abort;
	}
	var0002 = get_item_shape();
	if (var0002 == 0x0206) {
		UI_call_guards();
		var0003 = Func0988(item, find_nearby(0x0206, 0x0006, MASK_NONE));
		var0004 = [];
		for (var0007 in var0003 with var0005 to var0006) {
			var0004 &= var0007->get_distance(item);
		}
		var0003 = Func0989(var0003, var0004);
		var0008 = get_object_position();
		var0009 = 0x0001;
		for (var0007 in var0003 with var000A to var000B) {
			var000C = var0007->get_object_position();
			var000D = 0x0001;
			while (var000D <= var0009) {
				var000E = ((var000D - 0x0001) * 0x0003) + 0x0001;
				if ((Func097E(var000C[0x0001] - var0008[var000E]) <= 0x0002) && (Func097E(var000C[0x0002] - var0008[(var000E + 0x0001)]) <= 0x0002)) {
					var0007->remove_item();
					var0008 &= var000C;
					var0009 += 0x0001;
					break;
				}
				var000D += 0x0001;
			}
		}
		UI_play_sound_effect2(0x005F, item);
		remove_item();
		return;
	}
	if ((var0002 == 0x0350) || (var0002 == 0x010C)) {
		if (!(get_item_frame() == 0x0002)) {
			var0001 = script item {
				nohalt;
				sfx 95;
				continue;
				frame 2;
			};
		}
		return;
	}
	if (var0002 == 0x02E7) {
		var000F = AVATAR->get_weapon();
		if (var000F != 0x02C6) {
			abort;
		}
		var0010 = get_object_position();
		var0001 = set_last_created();
		if (var0001) {
			var0011 = UI_create_new_object(0x0371);
			if (var0011) {
				UI_play_sound_effect(0x002A);
				var0001 = UI_update_last_created(var0010);
				if (var0001) {
					var0001 = script var0011 after 3 ticks {
						nohalt;
						frame 1;
						wait 2;
						frame 2;
						wait 2;
						frame 3;
						wait 2;
						frame 4;
						wait 2;
						frame 5;
						wait 2;
						frame 6;
						wait 2;
						frame 7;
					};
					var0012 = Func09A0(0x0000, 0x0003);
					var0001 = script var0012 after 25 ticks {
						nohalt;
						call Func0626;
					};
					gflags[TEMP_FLAG_4] = true;
				}
			}
		}
	}
	if (var0002 == 0x0220) {
		Func08A1();
	}
	if (get_item_shape() == 0x01DF) {
		var0013 = get_item_frame();
		if (var0013 == 0x0003) {
			set_item_frame(0x0004);
			var0001 = UI_create_new_object(0x022F);
			if (var0001) {
				var0001->set_item_frame(0x0001);
				var0014 = var0001->set_item_quality(0x0001);
				var0014 = UI_update_last_created(get_object_position());
			}
		}
		abort;
	}
	if ((var0002 == 0x020A) && (get_item_quality() == 0x00FF)) {
		item->Func02C0();
		abort;
	}
	remove_item();
}

extern void Func0949 0x949 (var var0000);

void Func0628 object#(0x628) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;
	var var0008;

	var0000 = UI_create_new_object(0x0390);
	if (var0000) {
		var0000->set_item_flag(TEMPORARY);
		var0000->set_item_frame(UI_die_roll(0x000C, 0x000F));
		var0001 = get_object_position();
		var0002 = find_nearby(0x032A, 0x0002, MASK_NONE);
		for (var0005 in var0002 with var0003 to var0004) {
			var0006 = var0005->get_object_position();
			if ((var0006[0x0001] == (var0001[0x0001] - 0x0001)) && ((var0006[0x0002] == (var0001[0x0002] + 0x0001)) && (var0006[0x0003] == var0001[0x0003]))) {
				if (var0005->get_item_frame() == 0x0000) {
					var0005->set_item_frame(0x0004);
					halt_scheduled();
					var0007 = script item after 16 ticks {
						call Func0628;
					};
					return;
				}
			}
		}
		var0001[0x0001] -= UI_die_roll(0x0001, 0x0003);
		var0001[0x0002] += UI_die_roll(0x0001, 0x0002);
		var0007 = UI_update_last_created(var0001);
		var0008 = UI_die_roll(0x0001, 0x0002);
		if (var0008 == 0x0001) {
			Func0949("@Turn it off!@");
		}
		if (var0008 == 0x0002) {
			Func0949("@Thou art wasting it!@");
		}
		if (DUPRE->npc_nearby()) {
			DUPRE->item_say("@That is perfectly good beer!@");
		}
		halt_scheduled();
		var0007 = script item after 16 ticks {
			call Func0628;
		};
	}
}

extern void Func0949 0x949 (var var0000);

void Func0629 object#(0x629) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;
	var var0008;

	var0000 = UI_create_new_object(0x0390);
	if (var0000) {
		var0000->set_item_flag(TEMPORARY);
		var0000->set_item_frame(UI_die_roll(0x0014, 0x0017));
		var0001 = get_object_position();
		var0002 = find_nearby(0x032A, 0x0002, MASK_NONE);
		for (var0005 in var0002 with var0003 to var0004) {
			var0006 = var0005->get_object_position();
			if ((var0006[0x0001] == (var0001[0x0001] + 0x0001)) && ((var0006[0x0002] == (var0001[0x0002] - 0x0001)) && (var0006[0x0003] == var0001[0x0003]))) {
				if (var0005->get_item_frame() == 0x0000) {
					var0005->set_item_frame(0x0003);
					halt_scheduled();
					var0007 = script item after 16 ticks {
						call Func0629;
					};
					return;
				}
			}
		}
		var0001[0x0001] += UI_die_roll(0x0001, 0x0002);
		var0001[0x0002] -= UI_die_roll(0x0000, 0x0002);
		var0007 = UI_update_last_created(var0001);
		var0008 = UI_die_roll(0x0001, 0x0002);
		if (var0008 == 0x0001) {
			Func0949("@Turn it off!@");
		}
		if (var0008 == 0x0002) {
			Func0949("@Thou art wasting it!@");
		}
		halt_scheduled();
		var0007 = script item after 16 ticks {
			call Func0629;
		};
	}
}

extern var Func09A0 0x9A0 (var var0000, var var0001);
extern void Func0722 object#(0x722) ();

void Func062A object#(0x62A) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;
	var var0008;
	var var0009;

	if (event == DOUBLECLICK) {
		UI_play_sound_effect2(0x005E, item);
		book_mode();
		var0000 = get_item_quality();
		if (var0000 == 0x00D5) {
			say("~~ ~~MY LIFE AND MY BELIEFS~~ ~~by Svenjaja~~");
			say("I do not have much time left. I hope it will be enough time to write everything down, before THEY come to take me. And THEY will come...~");
			say("I came here to this Temple full of love and inspiration. All I wanted was to read the writings of artistic truth. The wise men would talk to me and I wanted to listen to them. But then it happened...~");
			say("I did everything right, I followed the rules, but I still got confused. After fasting for two days in the meditation room and staring at the red and black floor, I was still waiting for a sign. A sign which would show me the right path to follow.~");
			say("And finally, I could rejoice. I found my calling and I was taken to the Pool of Dedication. But then the soldiers came and destroyed everything. They killed the Great Hierophant of Chaos in the garden. Somehow the people could save the Sceptre of Enlightenment. They were able to hide it beneath the lectern...~");
			say("I hope for the safety of my brother Sethys, for he doth have the key to the Altar of Tolerance. The Great Hierophant had entrusted him with the key, moments before the soldiers arrived...");
			say("I cannot hope for mine own safety, for I am sitting here now, awaiting my death. The Order fanatics will come soon and with them my death is arriving...");
		}
		if (var0000 == 0x00DC) {
			say("~True follower of Order do not despair! The Hierophant hath led us to a new world via passage through the Wall of Lights! Though thou wert not here to make the passage, fear not. Some day thou too wilt join us. *If thou wishest to enter into the Temple of the Hierophant thou must merely place the symbols of Order upon the pedestal indicated by the plaque. ~Once the three artifacts have been placed one at a time, the door will swing wide. *If thou art a true disciple thou wilt have read the scrolls that contain the words of wisdom that thou needest to decipher the plaque's meaning. The sacred Library of the Hierophant shall remain secure from those who art not of Order. For if thou art not true, thou wilt never enter into the Hierophant's temple.");
		}
		if (var0000 == 0x00F1) {
			var0001 = 0x0000;
			var0002 = 0x0000;
			var0003 = AVATAR->find_nearby(0x0113, 0x0005, MASK_EGG);
			if (var0003) {
				var0001 = var0003->get_item_quality();
			}
			var0004 = var0003->find_nearby(0x032C, 0x0007, MASK_NONE);
			if (((var0001 == 0x0096) || (var0001 == 0x0098)) && var0004) {
				say("Behold! Thou art worthy to cross to the Temple of Balance!");
				var0005 = Func09A0(0x0000, 0x0001);
				var0006 = var0005->set_item_quality(var0001);
				var0006 = script var0005 after 5 ticks {
					nohalt;
					call Func0722;
				};
				UI_close_gumps();
				for (var0009 in var0004 with var0007 to var0008) {
					var0006 = script var0009 after 2 ticks {
						nohalt;
						call Func032C;
					};
					var0006 = script var0009 after 4 ticks {
						nohalt;
						call Func032C;
					};
					var0006 = script var0009 after 6 ticks {
						nohalt;
						call Func032C;
					};
					var0006 = script var0009 after 8 ticks {
						nohalt;
						call Func032C;
					};
				}
				abort;
			}
			say("Within my pages lie the bridges to the great chasms. When thou dost reach the great pillars, stand between them and read my words once more.");
		}
	}
}

extern var Func0992 0x992 (var var0000, var var0001, var var0002, var var0003);

void Func062B object#(0x62B) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;

	if (event == PATH_SUCCESS) {
		var0000 = script AVATAR {
			actor frame bowing;
			actor frame standing;
		};
		var0001 = AVATAR->get_object_position();
		var0002 = get_item_frame();
		var0003 = get_item_quality();
		if (var0003 > 0x0000) {
			UI_close_gumps();
			var0004 = Func0992(SHAMINO, "@'Tis difficult to acquire! Thou shouldst save it.@", "@'Tis difficult to acquire! Mayhaps I should save it.@", false);
			abort;
		}
		if (var0002 < 0x0006) {
			set_item_frame(0x0000);
		}
		if ((var0002 == 0x0001) || (var0002 == 0x0006)) {
			var0005 = UI_create_new_object(0x0390);
			if (var0005) {
				var0005->set_item_flag(TEMPORARY);
				var0005->set_item_frame(UI_die_roll(0x0010, 0x0013));
				var0005 = UI_update_last_created(var0001);
			}
		}
		if (var0002 == 0x0002) {
			var0005 = UI_create_new_object(0x0390);
			if (var0005) {
				var0005->set_item_flag(TEMPORARY);
				var0005->set_item_frame(UI_die_roll(0x0000, 0x0003));
				var0005 = UI_update_last_created(var0001);
			}
		}
		if (var0002 == 0x0003) {
			var0005 = UI_create_new_object(0x0390);
			if (var0005) {
				var0005->set_item_flag(TEMPORARY);
				var0005->set_item_frame(UI_die_roll(0x0014, 0x0017));
				var0005 = UI_update_last_created(var0001);
			}
		}
		if ((var0002 == 0x0004) || (var0002 == 0x0005)) {
			var0005 = UI_create_new_object(0x0390);
			if (var0005) {
				var0005->set_item_flag(TEMPORARY);
				var0005->set_item_frame(UI_die_roll(0x000C, 0x000F));
				var0005 = UI_update_last_created(var0001);
			}
		}
	}
}

extern void Func088C 0x88C ();
extern void Func088B 0x88B (var var0000, var var0001);
extern void Func0889 0x889 (var var0000);
extern void Func088A 0x88A (var var0000);
extern void Func062C object#(0x62C) ();

void Func062C object#(0x62C) () {
	var var0000;

	if (event == PATH_SUCCESS) {
		UI_close_gumps();
		var0000 = get_container();
		if (!var0000) {
			Func088C();
			Func088B(item, Func062C);
		}
	}
	if ((event == SCRIPTED) || var0000) {
		if (get_item_frame() == 0x0000) {
			Func0889(item);
		} else {
			Func088A(item);
		}
	}
}

extern var Func090C 0x90C (var var0000, var var0001);
extern void Func090D 0x90D (var var0000, var var0001, var var0002, var var0003, var var0004, var var0005, var var0006);
extern void Func094A 0x94A (var var0000);
extern void Func0288 shape#(0x288) ();

void Func062D object#(0x62D) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;
	var var0008;
	var var0009;

	if (event == PATH_SUCCESS) {
		var0000 = get_container();
		if (!var0000) {
			var0001 = Func090C(AVATAR, item);
			var0002 = get_object_position();
			var0003 = set_last_created();
			if (var0003) {
				var0003 = AVATAR->give_last_created();
				if (!var0003) {
					var0003 = UI_update_last_created(var0002);
					UI_flash_mouse(CURSOR_TOO_HEAVY);
					abort;
				}
				var0003 = script AVATAR {
					face var0001;
					continue;
					actor frame bowing;
					actor frame standing;
					call Func062D;
				};
			} else {
				return;
			}
		} else {
			UI_close_gumps();
		}
	}
	if ((event == SCRIPTED) || var0000) {
		var0004 = UI_click_on_item();
		var0005 = var0004->get_item_shape();
		if (var0005 == 0x028B) {
			var0006 = [1, 1];
			var0007 = [0, 0];
			var0008 = -1;
			Func090D(var0004, var0006, var0007, var0008, Func028B, var0004, PATH_SUCCESS);
		} else {
			var0009 = "@Why dost thou not spin that wool into thread?@";
			Func094A(var0009);
		}
	}
}

extern var Func090C 0x90C (var var0000, var var0001);
extern void Func090D 0x90D (var var0000, var var0001, var var0002, var var0003, var var0004, var var0005, var var0006);
extern void Func094A 0x94A (var var0000);
extern void Func0105 shape#(0x105) ();

void Func062E object#(0x62E) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;
	var var0008;
	var var0009;

	if (event == PATH_SUCCESS) {
		var0000 = get_container();
		if (!var0000) {
			var0001 = Func090C(AVATAR, item);
			var0002 = get_object_position();
			var0003 = set_last_created();
			if (var0003) {
				var0003 = AVATAR->give_last_created();
				if (!var0003) {
					var0003 = UI_update_last_created(var0002);
					UI_flash_mouse(CURSOR_TOO_HEAVY);
					abort;
				}
				var0003 = script AVATAR {
					face var0001;
					continue;
					actor frame bowing;
					actor frame standing;
					call Func062E;
				};
			} else {
				return;
			}
		} else {
			UI_close_gumps();
		}
	}
	if ((event == SCRIPTED) || var0000) {
		var0004 = UI_click_on_item();
		var0005 = var0004->get_item_shape();
		if (var0005 == 0x0105) {
			var0006 = [ 0, -1, -2];
			var0007 = [ 1,  1,  1];
			var0008 = -1;
			Func090D(var0004, var0006, var0007, var0008, Func0105, var0004, PATH_SUCCESS);
		} else {
			var0009 = "@Why dost thou not weave cloth with that thread on the loom?@";
			Func094A(var0009);
		}
	}
}

extern void Func09AC 0x9AC (var var0000, var var0001, var var0002, var var0003);

void Func062F object#(0x62F) () {
	var var0000;
	var var0001;
	var var0002;

	if (event == SCRIPTED) {
		var0000 = UI_die_roll(0x0001, 0x000A);
		var0001 = UI_die_roll(0x0001, 0x000A);
		if (UI_die_roll(0x0001, 0x0002) == 0x0001) {
			var0001 = 0x0000 - var0001;
		}
		var0002 = [0x0A22, 0x0AB7];
		set_schedule_type(WAIT);
		Func09AC(item, (var0002[0x0001] + var0000), (var0002[0x0002] + var0001), WAIT);
	}
}

extern var Func089D 0x89D (var var0000);
extern void Func09BE 0x9BE (var var0000, var var0001);

void Func0631 object#(0x631) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;

	if (event == PATH_SUCCESS) {
		var0000 = get_item_quality();
		var0001 = find_nearby(0x0366, 0x000F, MASK_NONE);
		var0002 = find_nearby(0x0203, 0x000F, MASK_NONE);
		var0001 &= var0002;
		var0002 = [];
		for (var0005 in var0001 with var0003 to var0004) {
			if (var0005->get_item_quality() == var0000) {
				var0002 &= var0005;
			}
		}
		if (Func089D(var0002)) {
			var0006 = script item {
				frame 1;
				repeat 4 {
					next frame cycle;
				};
			};
			var0006 = script AVATAR {
				face west;
				continue;
				repeat 2 {
					actor frame bowing;
					actor frame standing;
				};
			};
			if (var0000 == 0x00B5) {
				gflags[AVATAR_FREED_MORTEGRO] = true;
			}
			return;
		}
		Func09BE(item, true);
	}
	if (event == SCRIPTED) {
		Func09BE(item, true);
	}
}

extern void Func07D2 object#(0x7D2) ();
extern var Func09A0 0x9A0 (var var0000, var var0001);
extern void Func097F 0x97F (var var0000, var var0001, var var0002);

void Func0632 object#(0x632) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;
	var var0008;
	var var0009;
	var var000A;
	var var000B;
	var var000C;
	var var000D;
	var var000E;
	var var000F;
	var var0010;
	var var0011;
	var var0012;
	var var0013;
	var var0014;

	var0000 = UI_is_pc_female();
	var0001 = "he";
	var0002 = "him";
	var0003 = "his";
	if (var0000) {
		var0001 = "she";
		var0002 = "her";
		var0003 = "her";
	}
	if ((event == SCRIPTED) && (gflags[TEMP_FLAG_1] == false)) {
		var0004 = [0x0A3B, 0x0A25, 0x0A3B, 0x0A28, 0x0A3E, 0x0A27];
		var0005 = 0x0001;
		while (var0005 <= 0x0003) {
			var0006 = var0005 * 0x0002;
			var0007 = UI_create_new_object2(0x0151, [var0004[(var0006 - 0x0001)], var0004[var0006], 0x0000]);
			if (var0007) {
				var0007->set_schedule_type(WAIT);
				var0005 += 0x0001;
				UI_sprite_effect(ANIMATION_TELEPORT2, var0004[(var0006 - 0x0001)], var0004[var0006], 0x0000, 0x0000, 0x0000, LOOP_ONCE);
				UI_play_sound_effect(0x0051);
				var0007->Func07D2();
				var0007->set_alignment(EVIL);
				var0007->set_item_flag(TEMPORARY);
				var0007->clear_item_flag(SI_TOURNAMENT);
			}
		}
		var0008 = AVATAR->get_object_position();
		AVATAR->obj_sprite_effect(ANIMATION_GREEN_BUBBLES, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, LOOP_ONCE);
		UI_sprite_effect(ANIMATION_POOF, var0008[0x0001], var0008[0x0002], 0x0000, 0x0000, 0x0000, LOOP_ONCE);
		gflags[TEMP_FLAG_1] = true;
		var0009 = Func09A0(0x0000, 0x0001);
		var000A = script var0009 after 20 ticks {
			nohalt;
			call Func0632;
		};
		abort;
	}
	if ((event == SCRIPTED) && (gflags[TEMP_FLAG_1] == true)) {
		gflags[TEMP_FLAG_1] = false;
		DRUSILLA->show_npc_face0(0x0000);
		say("\"Blast! The Amulet seems to be protecting ",
			var0002,
			"! This shall not be as easy as we were led to believe!\"");
		RIEYA->show_npc_face0(0x0000);
		say("\"Then we shall have to work together...\"");
		SOLARIA->show_npc_face1(0x0000);
		say("\"The Guide shall make our aim true! The Guide shall lead the way to our truly perfect world!\"");
		0x0000->set_conversation_slot();
		UI_remove_npc_face1();
		say("\"Let us be done with this! Once this pathetic pawn is dead we can cross into the new world, and let this decaying husk die as it was meant to!\"");
		UI_remove_npc_face0();
		var000B = ["@Attack!@", "@Die, Dog of Prophecy!@", "@Ha ha ha ha!@"];
		var000C = 0x0001;
		var0009 = Func09A0(0x0005, 0x0001);
		var000D = var0009->find_nearby(0x0299, 0x0014, MASK_NONE);
		for (var0010 in var000D with var000E to var000F) {
			var0010->set_schedule_type(IN_COMBAT);
			AVATAR->set_oppressor(var0010);
			Func097F(var0010, var000B[var000C], (var000C * 0x0002));
			var000C += 0x0001;
		}
		var0009 = Func09A0(0x0005, 0x0002);
		var0011 = var0009->find_nearby(0x0151, 0x001E, MASK_NONE);
		for (var0014 in var0011 with var0012 to var0013) {
			var0014->set_schedule_type(IN_COMBAT);
			AVATAR->set_oppressor(var0014);
			var000C += 0x0001;
		}
	}
}

extern void Func063A object#(0x63A) ();
extern var Func0983 0x983 (var var0000);
extern void Func097F 0x97F (var var0000, var var0001, var var0002);
extern void Func09AC 0x9AC (var var0000, var var0001, var var0002, var var0003);

void Func0633 object#(0x633) () {
	var var0000;

	do {
		if (!((event == DOUBLECLICK) || (event == SCRIPTED))) {
			break;
		}
		if (gflags[CALL_GUARDS_THIEVING]) {
			UI_call_guards();
			gflags[CALL_GUARDS_THIEVING] = false;
		}
		return;
		// Dead code.
		item->Func063A();
		if (UI_die_roll(0x0001, 0x0008) == 0x0001) {
			if (DUPRE->get_item_flag(IN_PARTY) && Func0983(DUPRE)) {
				DUPRE->clear_item_say();
				Func097F(DUPRE, "@I am leaving!@", 0x0000);
				DUPRE->remove_from_party();
				var0000 = DUPRE->get_object_position();
				Func09AC(DUPRE, var0000[0x0001], var0000[0x0002], WANDER);
				gflags[DUPRE_LEAVES_THIEF_AVATAR] = true;
				return;
			}
			if (SHAMINO->get_item_flag(IN_PARTY) && Func0983(SHAMINO)) {
				SHAMINO->clear_item_say();
				Func097F(SHAMINO, "@I am leaving!@", 0x0000);
				gflags[SHAMINO_LEAVES_THIEF_AVATAR] = true;
				SHAMINO->remove_from_party();
				var0000 = SHAMINO->get_object_position();
				Func09AC(SHAMINO, var0000[0x0001], var0000[0x0002], WANDER);
				return;
			}
			if (IOLO->get_item_flag(IN_PARTY) && Func0983(IOLO)) {
				IOLO->clear_item_say();
				Func097F(IOLO, "@I am leaving!@", 0x0000);
				gflags[IOLO_LEAVES_THIEF_AVATAR] = true;
				IOLO->remove_from_party();
				var0000 = IOLO->get_object_position();
				Func09AC(IOLO, var0000[0x0001], var0000[0x0002], WANDER);
			}
		}
	} while (false);
	return;
}

extern var Func088F 0x88F (var var0000);
extern void Func0918 0x918 (var var0000);

void Func0634 object#(0x634) () {
	var var0000;
	var var0001;
	var var0002;

	var0000 = get_barge();
	if (var0000) {
		var0001 = Func088F(item);
		if (var0001 == 0x0316) {
			AVATAR->clear_item_flag(ACTIVE_SAILOR);
			0x0001->set_item_flag(ON_MOVING_BARGE);
			AVATAR->get_barge()->set_item_flag(ACTIVE_BARGE);
		}
		if (var0001 == 0x00C7) {
			var0002 = AVATAR->get_item_flag(ACTIVE_SAILOR);
			if (var0002) {
				Func0918(var0002);
			}
		}
	}
}

extern void Func0949 0x949 (var var0000);

void Func0635 object#(0x635) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;

	if (event == EGG) {
		var0000 = find_nearby(0x035F, 0x0000, MASK_NONE);
		var0001 = var0000->get_item_frame();
		if ((var0001 > 0x000F) && (var0001 < 0x0013)) {
			var0002 = script var0000 after 60 ticks {
				nohalt;
				call Func0635;
			};
			if (UI_die_roll(0x0001, 0x0002) == 0x0001) {
				Func0949("@Do not thou overcook it!@");
			}
		}
	}
	if (event == SCRIPTED) {
		var0003 = get_object_position();
		var0004 = find_nearby(0x033F, 0x0002, MASK_NONE);
		if (UI_get_array_size(var0004) > 0x0000) {
			remove_item();
			var0005 = UI_create_new_object(0x0179);
			if (var0005) {
				var0005->set_item_flag(TEMPORARY);
				set_item_frame(0x0000);
				var0002 = UI_update_last_created(var0003);
				if (var0002) {
					var0006 = UI_die_roll(0x0001, 0x0003);
					if (var0006 == 0x0001) {
						Func0949("@I believe the bread is ready.@");
					}
					if (var0006 == 0x0002) {
						Func0949("@Mmm... 'Tis a wonderful aroma.@");
					}
				}
			}
		}
	}
}

void Func0636 object#(0x636) () {
	var var0000;

	UI_fade_palette(0x000C, 0x0001, 0x0001);
	if (item == AVATAR->get_npc_object()) {
		var0000 = get_object_position();
		var0000[0x0001] -= var0000[0x0003] / 0x0002;
		var0000[0x0002] -= var0000[0x0003] / 0x0002;
		UI_sprite_effect(ANIMATION_TELEPORT, var0000[0x0001], var0000[0x0002], 0x0000, 0x0000, 0x0000, LOOP_ONCE);
	}
}

void Func0637 object#(0x637) () {
	clear_item_flag(ACTIVE_BARGE);
	AVATAR->set_camera();
}

void Func0638 object#(0x638) () {
	var var0000;

	if (event != DOUBLECLICK) {
		return;
	}
	UI_play_sound_effect2(0x005E, item);
	book_mode();
	var0000 = get_item_quality();
	UI_play_sound_effect2(0x005E, item);
	book_mode();
	if (var0000 == 0x0078) {
		say("SHIP'S LOGBOOK*");
		say("Day 24:   Still looking for the miser's treasure.");
		say("\t\t\t   Fair wind and weather all day. The men are as excited as ever.");
		say("\t\t\t   Plundered a passing ship, appropriated some gold and wine.");
		say("\t\t\t   Lost one man in the fight.");
		say("Day 31:   Very stormy weather and worse at night.");
		say("\t\t\t   No encounter.");
		say("Day 32:   Uneventful except for repairs from last night's storm.");
		say("Day 40:\tThis hideout is not easy to find. The men are becoming nervous.");
		say("Day 41:\tIce filling the horizon! Temperature hath dropped.");
		say("\t\t\t\tWe are freezing. The men complain they have never seen");
		say("\t\t\t\tsuch weather this time of the year.");
		say("\t\t\t\tBurning more and more oil to stay warm. Our provisions are");
		say("\t\t\t\tdiminishing rapidly.");
		say("Day 45:   Strange how ice magnifies all.");
		say("\t\t\t\tLeaden sky is upon us. On the word of a pirate, we will");
		say("\t\t\t\tpierce through this as a sword through soft bellies!");
		say("\t\t\t\tA day of dead calm.");
		say("Day 54:\tWas forced to hang a brace of men who stole some food from the cook.");
		say("\t\t\t\tThe weather combined with our disappointing search for the");
		say("\t\t\t\tmiser's base hath created an unbearable atmosphere.");
		say("\t\t\t\tIce is surrounding us and it feels as though we are imprisoned in");
		say("\t\t\t\tthis place.");
		say("Day 55:\tWe had a storm last night. Two men were found frozen on");
		say("\t\t\t\tthe quarter-deck. One man missing. He most likely went overboard due");
		say("\t\t\t\tto the dense and damp fog, in that cold, inky black night.");
		say("\t\t\t\tThis treasure hunt is costing us too many men, and might");
		say("\t\t\t\tcost us even more...");
		say("Day 56:\tWe are wedged in by an icefloe. Food is running low.");
		say("\t\t\t\tFrozen land all around us, the ship is trapped.");
		say("\t\t\t\tAnd so are we.");
		say("Day 57\t\tMuch arguing about rations.");
		say("\t\t\t\tWe are down to our last portion. We are but a few survivors,");
		say("\t\t\t\tbundled in our rags. The terror of the seas, HA!");
		say("\t\t\t\tWe would not scare a mouse these days.");
		say("Day 58:   Finishing each other is what we have been doing for");
		say("\t\t\t\tthe last twenty-four hours. Such a waste! 'Tis only the");
		say(" \t\t\ttwo of us now and a portion of food, a single portion of food.");
		say("\t\t\t\tYet I shall not give in!");
	}
	if (var0000 == 0x0079) {
		say("JOURNAL~~*");
		say("Day 17 -- Everyone is overjoyed that we have actually ");
		say("\t\t\t\treached the northern marches, including myself.");
		say("\t\t\t\tI look forward to setting camp and finding treasure!*");
		say("Day 22 -- We were forced to kill a pair of wolves near the encampment.");
		say("Day 28 -- The men are upset that no gold hath been found...");
		say("\t\t\t\tHowever, I remain confident of our venture.*");
		say("Day 40 -- Finding more wolves than gold.");
		say("Day 41 -- Gold. At last!");
		say("Day 45 -- Women and children are finding gold nuggets.");
		say("\t\t\t\tHow exciting! This is fabulous!");
		say("\t\t\t\t'Tis finally paying.*");
		say("Day 69 -- More have been eaten alive.");
		say("\t\t\t\tWolves. More wolves.");
		say("\t\t\t\tMen behaving like wolves. Worse than wolves.");
		say("\t\t\t\tThey are after our gold.");
		say("\t\t\t\tFor them, life is suddenly worthless.");
		say("\t\t\t\tHow could they value a nugget more than its");
		say("\t\t\t\ttrue worth?*");
		say("Day 108 -- No one can be trusted.");
		say("\t\t\t\tWho will be the next target?");
		say("\t\t\t\tHopefully, I will survive and my gold will not");
		say("\t\t\t\tbe stolen.*");
		say("Day 121 -- Something horrible happened to Hamlin.");
		say("\t\t\t\tHe was found with his throat slit and, ");
		say("\t\t\t\tof course, his gold was missing.");
		say("\t\t\t\tThis worthless gold that he hath");
		say("\t\t\t\tpainstakingly gathered killed him.");
		say("\t\t\t\tSo, this is what it hath come to...");
		say("\t\t\t\tGoldthirsty and bloodthirsty bastards.*");
		say("Day 127 -- I have finally found a vein of gold, from whence");
		say("\t\t\t\tI retrieved a small quantity with");
		say("\t\t\t\tmy pick.*");
		say("Day 148-149 --  I lay awake on my bedroll all night ");
		say("\t\t\t\tuntil dawn, cannot seem to be able to sleep.");
		say("\t\t\t\tToo many angry thoughts disturbing my mind.");
		say("\t\t\t\tAt daybreak, I rose in a state of exhaustion.*");
		say("Day 167 -- More men are fighting amongst themselves.");
		say("\t\t\t\tI am so weary.");
		say("\t\t\t\tIs this what I wanted?");
		say("\t\t\t\tThe encampment is split into factions.");
		say("\t\t\t\tNow, I will cease writing and rest by the");
		say("\t\t\t   fire, gathering much needed strength for");
		say("\t\t\t\ttomorrow.*");
		say("Day 183 -- Draygan betrayed us. Who would have thought it?");
		say("\t\t\t\t I think bitterly of his treachery.");
		say("\t\t\t\t The ship is burnt. We are doomed.");
		say("\t\t\t\t The howling is getting closer...");
	}
	if (var0000 == 0x007A) {
		say("HAZARD'S LEDGER");
		say("~~PELTS~Sales by customer~Expressed in monetari*");
		say("...Summer~~Glendor, 3 pelts - 90~~Miri, 1 pelt - 50~~Tranch, 6 pelts - 180 ~~Falco, 3 pelts - 90*Autumn~~Cellia of Monitor, 4 pelts - 88~~Voldin of Fawn, 2 pelts - 90~~ *Early Winter~~Tornaldo of Moonshade, 3 pelts - 1035~~Yelinda of Fawn, 4 pelts - 138~~Jorvin of Fawn, 1 pelt - 34 *Hard freeze~~Marsten of Monitor, 4 pelts - 88~~Brendann of Monitor, 2 pelts - 69~~Fedabiblio of Moonshade, 1 pelt - 34 *Late Winter~~Cellia of Monitor, 2 pelts - 63~~Torrissio of Moonshade, 4 pelts - 140*Early Spring~~Cellia of Monitor, 1 pelt - 35 *Late Spring~~Karl of Monitor, 1 pelt - 25~~Garth of Fawn, 2 pelts - 79~~Marnok, 1 pelt - 35");
	}
	if (var0000 == 0x007B) {
		say("~~ ~~ ~~BRIGGIO'S BOOK OF ASTONISHING THINGS");
		say("~~A compiled volume of items of interest both magical and mundane~~by Briggio of Moonshade*");
		say("     In this volume, compiled for easy reference, are some of the many fascinating constructions I have found during my researches. These items range from interesting uses for mundane items to fascinating miscarriages of magic.*");
		say("Wands: A trio of terrible weaponry.~");
		say("     The three identified varieties of magical wand all seem to have been made for the express purpose of changing the combat-weak spellcaster into a battle-ready automaton. And, for those with the ability to keep them from losing their potency (no small feat of magic, mind thee, but simple for anyone capable of crafting the wand in the first place), they are perhaps the most formidable weapons of their size.~~");
		say("Fire Wand: This wand releases a bolt of flaming death. According to all known texts on the subject, the carnage was called \"amazing.\"~");
		say("Lightning Wand: The effect of a bolt of lightning as it bursts forth from the wand is as devastating as its counterpart, the fire wand. However, according to one of its proponents, \"the corpses look and smell much less offensive.\"~");
		say("Magician's Wand: While only slightly more lethal than the typical bow, this wand is rendered quite effective due to two interesting facets: Its damage is of a most magical nature and more than powerful against monsters with a predilection for challenging mages, and, it NEVER ceases to function. If thou art interested in power and duration, this is the wand for thee.*");
		say("FireDoom Staff: Lethality itself.~");
		say("This staff, which hurls exploding fireballs that actually seek out a target, is perhaps the most lethal of all magical weapons created in the era of human-gargoyle cooperation. But, as with most of the more powerful magic weapons, its limited life means it may fail thee at the worst of times.*");
		say("Glass Swords : A historical legacy of death.~");
		say("These single-use swords will almost always kill any creature in a single blow, but they are seldom useful for a second opponent.*");
		say("Other Miscellaneous Magical Weaponry.~");
		say("As a general case, any person with a modicum of magical talent can identify magical weapons, armour and other apparatus by their pulsating glow. Often, however, the color indicates even more about the item than merely the existence of the enchantment. For example, a green field often denotes a poisoning weapon.~~");
		say("Burst Arrows: An arrow of myriad targets.~");
		say("The arrow functions as a normal arrow, but upon impact, explodes into a thousand flying shards of death.~~");
		say("Venom Dagger : The assassin's tool.~");
		say("This shimmering green dagger is actually the enchanted tooth of a poisonous sea serpent, joined to the hilt of a normal dagger. Its envenomed blade injects a slow poison into its victim, but it frequently breaks. It is the perfect assassination weapon (see Alagner's History, Assassination of Baron Johann IV (page 54)).*");
		say("Stone Harpy: Unnatural beast.~");
		say("The stone harpy is the creation of the twisted mind of the magus. It is reputed to be magically triggered by the close approach of any creature.");
	}
	if (var0000 == 0x007C) {
		say("~~ ~~ ~~DRINKING SONGS DUPRE TAUGHT ME~~ ~~Volume One*");
		say("MAIDS IN TRADES");
		say(" ");
		say("Come all of ye trades and ye tradesmen,");
		say("and let ye be wise that are fools.");
		say("But remember each day that your trade would decay");
		say("if a maid did not look to your tools.");
		say(" ");
		say("The blacksmith, the smokey old blacksmith,");
		say("'tis known as a jolly old fellow.");
		say("But his iron would burn old,");
		say("and his fire would grow cold,");
		say("If a maid did not blow up the bellows.");
		say("And then there's the candlestick maker,");
		say("he works up the tallow so quick.");
		say("But his craft would be marred,");
		say("and the works not get hard,");
		say("If a maid did not hold up the wick.");
		say(" ");
		say("The ploughman, the jolly old ploughman,");
		say("he follows the plow in the silt.");
		say("But 'tis ne'er a clod turned,");
		say("if a maid had not learned him,");
		say("To drive the blade up to the hilt.");
		say(" ");
		say(" ");
		say("The brewer, the jolly old brewer,");
		say("he maketh a very fine ale.");
		say("But his brew would be waste,");
		say("if there's no maid to taste,");
		say("And make sure that it doesn't grow stale.");
		say(" ");
		say("So come all ye journeymen, craftsmen,");
		say("and all that are apprenticed to trade.");
		say("For 'tis ne'er a screw");
		say("or a nut would be turned,");
		say("If it weren't for the help of a maid!");
	}
	if (var0000 == 0x007D) {
		say("~~ ~~ ~~DRINKING SONGS DUPRE TAUGHT ME~~ ~~Volume Two*");
		say("ROLL THY LEG OVER");
		say(" ");
		say("If all the young ladies were little white rabbits,");
		say("I'd be a hare, and teach them bad habits!");
		say(" ");
		say("Refrain:");
		say("Roll thy leg over,");
		say("roll thy leg over,");
		say("Roll thy leg over");
		say("the man in the moon.");
		say(" ");
		say("If all the young ladies were bricks in a pile,");
		say("I'd be a mason and lay them in style!");
		say(" ");
		say("If all the young ladies were cocks in the hay,");
		say("I'd be a hen, and I'd have a good lay.");
		say(" ");
		say("If all the young ladies were bats in a steeple,");
		say("and I were a bat, there'd be more bats than people.");
		say(" ");
		say("If all the young ladies were bells in a tower,");
		say("and I were a clapper, I'd ring every hour!");
		say(" ");
		say("If all the young ladies were doors of stout wood,");
		say("and I were a knocker, I'd bang them up good!");
		say("If all the young ladies were stones in a mill,");
		say("and I were some grain between them, I'd spill...");
		say(" ");
		say("If all the young ladies were coconuts sweet,");
		say("I'd suck out their juices and chew on their meat.");
		say(" ");
		say("If all the young ladies were birds in their nests,");
		say("I'd be an egg and lie under their breasts.");
	}
	if (var0000 == 0x007F) {
		say("~~ ~~VETRON'S GUIDE TO WEAPONS AND ARMOUR~~ ~~Their effectiveness and value*");
		say("Here are listed, for easy comparison, various weapons and their effects upon opponents. Consider them to be rated on a scale of 1 to 100, with the lower valued weapons being less effective upon thine adversary: ~~Axe, two-handed: 10~~Blowgun: 1, causes enemy to fall asleep and be poisoned~~ Bow: 8~~Cannon: 90~~Club 2~~Crossbow: 10~~Dagger: 1~~Halberd: 10~~ Hammer: 4~~Hammer, two-handed: 9~~Knife: 2~~Mace: 5~~Main gauche: 2~~ Morningstar: 5~~Powder keg: 16~~Sling: 3~~Sword: 6~~Sword, two-handed: 11~~ Throwing axe: 4~~Torch: 3~~Whip: 4*");
		say("Armour and shields and their protection effectiveness are described here to permit the informed soldier the opportunity to select the armour best suited to his or her fighting style:~~Buckler: 1~~ Chain armour: 2~~Chain coif: 2~~Chain leggings: 2~~Crested helm: 3~~ Curved heater: 3~~Gauntlets: 2~~Gorget: 3~~Great helm: 4~~Greaves: 2~~ Kidney belt: 1~~Leather armour: 1~~Leather boots: 1~~Leather collar: 1~~ Leather gloves: 1~~Leather helm: 1~~Leather leggings: 1~~Plate armour: 4~~ Plate leggings: 3~~Scale armour: 2~~Spiked shield: 2~~Wooden shield: 2*");
		say("Here is a list of the better-known enchanted weapons:~~Magic arrow: 4~~Magic axe: 8, can be thrown~~ Magic bow: 12~~Magic sword: 7, very accurate~~Glass sword: 127, breaks*");
		say("Enchanted armour:~~Magic armour: 5,~~Magic gauntlets: 3,~~Magic gorget: 4,~~Magic helm: 5,~~Magic leggings: 4,~~Magic shield: 4*");
	}
	if (var0000 == 0x008A) {
		say("~~ ~~THE ART OF FIELD DRESSING~~ ~~by Harnna*");
		say("     Though I personally advocate the use of healing herbs and more cleanly bandaging environments, the steps told in this treatise will suffice until better healing care becomes available. Follow these steps carefully, and thou wilt have no trouble forming a reliable, if not perfect, way to prevent serious blood-loss. Remember, however, that there is no care as good as clean sheets, a sturdy bed, and proper attention!~~");
		say("     As long as one doth have shears, cloth, and a conscious mind, thou wilt have little fear of bleeding to death on the corpse-littered fields of battle. Simply cut the cloth into strips and bandages. Quickly placing the center of the bandage over the wound, wrap the strip around and around the bleeding area. As the cloth begins to soak with blood, it will combine with the natural healing aspects of the body to staunch the flow of blood and to quicken the healing process. In no time, thou wilt be ready to travel again (though I advise this travel be to the house of a competent healer!).");
	}
	if (var0000 == 0x008D) {
		say("MY NOTEBOOK~~    Anonymous~~");
		say("     The observations enclosed herein are based on mine experiments.");
		say("Reader, for thy sake and thy thirst for knowledge, I have decided to provide thee with the following accounts.");
		say("Long ago, when I accidentally landed on this world, the primitive sentients living here erected a temple to me and my 'chariot.' But they were boring and impetuous!");
		say("Soon, the cats emerged as a more likeable group than any other creatures. Thereafter, I was to begin some experiments on them. Quite successful indeed. My liking for these cats caused me to contemplate how to widen and strengthen their intelligences.");
		say("Thereupon, I set out to modify the Power Generator. Thus began the experiments. The Generator provided the felines with a more obdurate life energy, one which was most difficult to suppress -- the cats die, yet with stubborn energy return once again to life! The side effect is that strange glow which surrounds them.");
		say("After several manipulations I was successful in increasing their lives up to nine times. Thus no one would be able to truly defeat them until their ninth life.");
		say("The source of all extra life resides in the Power Generator.");
		say("Dear reader, make of mine experiments what thou wilt.");
		gflags[KNOWS_DEAD_CAT_ORIGIN] = true;
	}
	if (var0000 == 0x0096) {
		say("~MINE EXPERIMENTS~~ by Teldrono*");
		say("~This book belongs to Teldrono~The Mage*");
		say("\tFor thee,  bright reader, I have been deep in the heart of darkness");
		say("in search of the Way. The Way to reverse or even negate the effects");
		say("of Bloodspawn hath been my quest. Stoneheart is also on my mind, thou");
		say("art right, so right... By the way, dear reader, if thou shouldst know how to obtain");
		say("some, contact me immediately. I thank thee in advance for thy kindness.");
		say("Let us begin, for I am losing track of what thou art interested in.");
		say("Thou art not afraid of dying, art thou?  Well, then I shall proceed");
		say("and tell thee what all this truly concerns.");
		say("The more I would experiment with it, the closer I would come to success.");
		say("That was mine intuition. Well, I must admit it did not work.");
		say("Bloodspawn is bound to have some side effects. I do not know which yet.*");
		say("The heart of the matter, if I may say so dear reader, is that thou art");
		say("about to take possession of a secret. Darkness may fall upon thee at the very same time. I recommend thou beest extremely careful, a fatal accident is easily triggered when manipulating those forces.");
		say("In the heart of the mountain, I found the red-orange mineral. I collected samples and, after many a transformation, I turned it into the Forbidden Reagent. Thou art certain, dearest reader,");
		say("that thou fearest death no more? I want to make it clear this is nothing like what thou hast seen before... Many a mage's life was taken away.*");
		say("\t\tHow did I turn it into a powerful magical reagent, thou askest?");
		say("Yes, indeed, how? Oh! I remember, thou hast only to crush it into a fine powder.");
		say("Then, thou dost combine the powder with fresh human blood. 'Tis just so!");
		say("\t\tThis powerful reagent, too powerful for my fellow mages who were fools enough to lose their lives, enables thee to create some spells.");
		say("It might make possible the spells to flay men's minds, or set swords into dancing death, or to decimate entire cities.");
		say("Mass death. Well, think of it, thou mayest be able to make matter disintegrate, and ");
		say("even call lightning to thy service, if I recall correctly mine experiments. These are the powers of Bloodspawn.*");
		say("\t\tDear reader, thou art now ready to experiment, or ready to lose thy life.");
		say("Remember how careful thou shouldst be when carrying it. Finding safe means to");
		say("avoid the Bloodspawn's side effects is of primary concern.");
		say("Herein, I did give thee all thou wilt ever need to know.");
		say("Thou mightest want to be prepared for fits. Experimenting with Bloodspawn");
		say("and Stoneheart will trigger numerous disorders. Many a time did I attempt");
		say("to delay the onset of the fits, all in vain, alas. The future doth not");
		say("seem to be a long shining path. I even wonder how long I will");
		say("remain sane. Thou art the reason why I wrote such a book, dear reader, it");
		say("is for thee to read and for thee to take our place once I be gone.");
		say("This powerful knowledge painfully extracted from the heart of darkness must outlive us. Thou shalt continue!");
	}
}

extern var Func0953 0x953 ();
extern var Func0992 0x992 (var var0000, var var0001, var var0002, var var0003);

void Func063A object#(0x63A) () {
	var var0000;
	var var0001;
	var var0002;

	return;
	// Dead code
	var0000 = UI_die_roll(0x0001, 0x0004);
	if (var0000 == 0x0001) {
		var0001 = "@Art thou sure of thine actions, Avatar?@";
	}
	if (var0000 == 0x0002) {
		var0001 = "@Must we do this?@";
	}
	if (var0000 == 0x0003) {
		var0001 = "@Is that virtuous?@";
	}
	if (var0000 > 0x0003) {
		var0001 = ("@" + Func0953()) + "?!@";
	}
	var0002 = Func0992(0x0001, var0001, 0x0000, false);
}

void Func063B object#(0x63B) () {
	var var0000;
	var var0001;

	if (event != DOUBLECLICK) {
		return;
	}
	UI_play_sound_effect2(0x005E, item);
	book_mode();
	var0000 = get_item_quality();
	UI_play_sound_effect2(0x005E, item);
	book_mode();
	if (var0000 == 0x00B6) {
		say("~OBSERVATIONS OF PAIN~~ by MageLord Filbercio*");
		say("I. Introduction");
		say("~~     We have always thought of \"pain\" as the unpleasant reaction of a being's nervous\tsystem to certain environmental stimuli. But through my recent studies, I believe that I have come to understand pain as a state of mind, rather than a simple physical reaction.");
		say("     It is very easy to inflict physical pain on someone. A casual look about my laboratory will prove that. Iron maidens, thumbscrews, and racks are all useful for this purpose, but what should be done for the person who can literally accept and even ignore physical pain? In this case, a test of one's mental faculties shall be necessary. Research thy subject carefully, and discover what tears into his soul. Understand his psyche, and use what thou dost discover to help augment the physical torture.");
		say("     We will look now at a few examples. Suppose thou dost want to cause a harpsichordist pain. Thumbscrews are the obvious choice, but why not add to his experience by playing the blissful tune \"Sea Shanty\"? This should produce some very good results. Similarly, if the subject is a writer, strapping him to \"the rack\" and reading from the dismal \"Sir Trout's Plot Guide\" will have him writhing.");
		say("     Throughout these pages, thou wilt find even more insidious ways to produce pain. Read them well, and thou wilt never be disappointed with the results.");
	}
	if (var0000 == 0x00B8) {
		say("~POETRY FOR THE ROMANTIC LUTE~~ by Sir D. Dey*");
		say("\"Soliloquy\"~~~");
		say("I gave my love a chicken");
		say("   that had no bone");
		say("I gave my love a cherry");
		say("   that had no stone");
		say("I wrote my love a story");
		say("   that had no end...");
	}
	if (var0000 == 0x00C9) {
		say("~~ ~~ NOTES~~ ~~by Erstam*");
		say("Decade 1:");
		say("This is a new era for me. This newfound land is marvelous!");
		say("A great destiny awaits our people and thee, Erstam!");
		say("So much to learn from this land, I am overcome with joy. So much to learn about its fauna and flora, I must start early in the morning.");
		say("Tonight sleep is not to be found. I must go out, explore and meet the creatures of the night.");
		say("2nd Year of Third Decade:");
		say("Last night I decided to explore the catacombs of the city. I left as fast as I went in. This is not for a man of mine age. The place was filled with creatures unknown to me at this point. My mind doth not know how to describe them. The best description I can conjure is to say that they were some sort of monster, half-man half-rat.*");
		say("4th Decade, 1st Year:");
		say("I am still amazed at the variety and abundance of wildlife.");
		say("Thy grip on nature is always fragile at first, Erstam, remember?");
		say("As often as not, I would run into a monster or an unknown species.");
		say("I vividly remember, dear reader, the strange cat I encountered");
		say("tonight. It was eerie. The cat glowed like a spell. I left in great haste fearing for my life. Such a cat must have a strange effect upon us. I wonder what deranged mind created such a danger.");
		say("5th Decade, Third Year:");
		say("Found some ruins not too far from here.");
		say("Interesting discovery of a jawbone and large fangs. A relic from an ancient culture?*");
		say("7th Decade, 4th Year:");
		say("Today, I encountered a strange white-haired creature from the icy lands; it seemed to be a cross between Man and Beast.");
		say("Found the clue to how the Ophidians stepped from place to place without travelling through the space between. The answer lies in the Void!");
		say("2nd Year of the Eighth Decade:");
		say("That was the most frightening time so far. Dearest reader, thou wilt not believe me, but let me assure thee of the veracity of this tale. I was wandering in the forest at the northeast edge of town, when I heard this stentorian noise, this growl. I was petrified. Directly in front of me, a terrifying predator, the beast stood erect on its feet, towering well over mine height. Its huge claws and sharp teeth sent a chill down my poor old spine. I still shiver thinking of it when writing these words.");
		say("The creature lunged for my backpack, tore it asunder and devoured all of the honey jars I had saved for the outing.*");
		say("6th Year of Eighth Decade:");
		say("Those jealous mages stole some secrets and powers from me.");
		say("They want the Teeth, I am certain of it! I shall have to take up residence on some isle, where they cannot find me...");
		say("3rd Year of Ninth Decade:");
		say("I stood all night working on a few formulas.");
		say("Dawn already. What a chill bleak morning.");
		say("Need to throw more wood in the fire.");
		say("4th Year of Ninth Decade:");
		say("Today, icy blew the winds from beyond the Frozen Lands.");
		say("If this lasts I will have to make more dried meat.");
		say("Food is low. Need more firewood.");
		say("6th Year of Ninth Decade:");
		say("The day passed rather rapidly, uneventfully.");
		say("8th Year of the Ninth Decade:");
		say("What a beautiful sunrise!");
		say("I can almost taste the salt breeze from the sea.");
		say("How invigorating!");
	}
	if (var0000 == 0x00D1) {
		say("~~ ~~A SHORT TREATISE ON COMBAT TACTICS & HABILIMENTS OF WAR*");
		say("~Introduction~");
		say("\t~Trusty and well-beloved adventurer, I greet thee well and thank thee for reading this short treatise.  Herein, combat tactics will be described for thy benefit in setting forth, dearest adventurer.");
		say("Thou wilt learn how to read a book and how to fight intelligently in our worlds.");
		say("\tThy safety is important for the worlds are vast enough for thee to roam freely about. Restless warrior, I know thou hast oft crisscrossed the land and oft the swamps, so think how easy a prey an injured man would be for the creatures who inhabit these realms.");
		say("~\tThe basic rule of safety in combat and in unknown territories is not to think of thyself as over-mighty. Thou mayest be witty and subtle in thy speech, but thou must be even more alert and aware of thy combat environment. Adapt to thine opponent, to the weather and to the terrain.*");
		say(" \tKnow thyself, know thine opponent. Thou shalt know thy limits. Thou shalt identify as quickly as possible what kind of creature thou art faced with so that thou canst use the most appropriate strategy.");
		say("\tFor example, know that herbivores will flee quite oft.");
		say("On the other hand, carnivorous creatures attack the weakest opponent.");
		say("Some creatures will attack at random or toward the weakest party member.");
		say("Thou shouldst expect militiamen and guards to use tactically accurate strategies. The weakest member will be attacked, flanking will be used, as well as tactical retreats, and so forth...*");
		say("\t\tAlways use logic. Creatures from the Icy Lands will be more susceptible to fire, for example, and swamp creatures are immune to poison.");
		say("When attacking foes, a good strategy is easily available to thee: thou canst always hide and shoot. Or thou canst flank and protect thyself quite well. When flanking, it is best to use some long range type of habiliment. For example, a crossbow could be given to an ally who is flanking. Make sure the ally who is flanking does not hurt any of the other members in thy group. Caution is strongly advised.");
		say("\t\tUse thine habiliment of war well. A bow always requires arrows. Ensure thou art not short of ammunition or wielding a useless weapon.");
		say("\t\tUse thy surroundings to slow thine opponents. For example, thou mayest lay down caltrops on thine enemy's path.");
		say("\t\tMost of all, always maintain a good balance between ranged and non-ranged habiliment of war within thy travelling group.*");
		say("\t\tUpon leaving a town for thine adventures in the wilderness, do stop by the various shoppes to purchase a backpack and fill it with many a variety of foods. Long trips without food will leave thee weak and more susceptible to wounds from thine enemies' attacks. Thou shalt not bypass a trainer's hall. Thou shouldst train hard to become a better warrior. Visit trainers and learn from them. Those hours spent training with masters may save thy life.*");
		say("\t\tWhile it is necessary to use armour wisely, I recommend to thee to buy armour as soon as possible. In doing so take into consideration the following qualities: weight, sturdiness, protection.");
		say("Armour may be divided into the two types appearing hereunder:");
		say("\t- antique");
		say("\t- magic");
		say("The magic armour type is almost twice as effective in protecting thee as the antique one.");
		say("Antique armour includes leather, metal scales, chain mail and metal plates. The sturdier the material, the greater the protection.");
		say("Leather armour, boots, collar, gloves and helm offer the least protection. On the other hand, they will be the lightest.");
		say("Scale armour and chain armour, chain coif and chain leggings are a bit better than leather, but not overmuch.*");
		say("Shields: a buckler or a wooden shield will provide thee with the least amount of protection in this category. A brass shield or a curved heater will provide thee with the most protection. By protection, thou shouldst understand that thine attacker will be deflected away from thee.");
		say("Amongst helms, thy choice is great and the best protection comes from the magic helm. The great helm is nearly as efficient, though. The crested helm and the caddelite helm do offer the same amount of safety.");
		say("Chain armour, chain coif, and chain leggings will decrease very little the impact of enemy blows. ");
		say("Thou wilt need a gorget and some greaves for those exposed vital areas. A kidney belt could be useful but, I must needs warn thee, of little protection.");
		say("Plate armour offers solid protection for thy money. I would recommend a pair of plate leggings as well.");
		say("The ultimate protection, in matters of armour, at this point in time, is as follows: a magic helm, a magic shield, a magic gorget, a pair of magic leggings and some magic gauntlets.*");
		say("\t\tDearest fighter, for thine ease I will divide weapons into groups. Thus, at one glance, thou mayest easily remember their efficiency. I will begin with the least damaging weapons:");
		say("\tBlowguns, boomerangs, daggers, slings, pitchforks, picks and whips have very little effect.");
		say(" A magic axe, a mace, a morning star, a two-handed axe, a spear, a shovel or a sword are of limited effect upon thine opponent.");
		say(" A scythe, a bow, a fire sword, a musket, or a two handed hammer are slightly more damaging.");
		say(" Crossbows (my favorite), halberds, lightning whips, magic bows, fire wands and fire bolts are very powerful weapons.");
		say("Find the best weapon and armour thou canst obtain.");
		say("Remember all weapons ought to be kept ready for immediate use.");
		say("One more word of wisdom:");
		say("Do not neglect thy sleeping time. Sleeping frequently will give thee the rest fighters need. An eight hour sleep will restore full strength for thee and thine allies.*");
		say("\tIf thou hast weak allies, thou shouldst know the most suitable and productive method of combat is to prompt them to attack the weakest enemy or encourage them to flee. In order to protect a weak ally, thou shouldst bestow the protection halo on them. In addition to that, thou mayest put the strongest member in thy group in charge of protecting the weakest.");
		say("\tWhen attacking foes, a good strategy is easily available to thee: thou canst always hide and shoot. Or thou canst flank and protect thyself quite well. When flanking, it is best to use long range type of habiliments, for example, a crossbow. Be sure the member of thy group who is flanking doth not hurt any of thine other allies. Caution is strongly advised.");
		say("\tThy band members armed with heavy weapons should be swift to attack the strongest opponent. Other members should follow thy guidance and attack the weakest enemies.");
		say("\t\tWhen reading a book, look for useful information and memorize it or jot it down, for thou mayest have need of it later. Read quickly, but read all pages. I cannot emphasize enough the importance of reading all of the pages of a book.*");
		say("Conclusion");
		say("~\tDearest adventurer, I beseech thee to thoroughly consider the aforesaid cautions and advice.");
		say("The reason that I wrote such a treatise is to sharpen thy fighting skills, but thou canst tell that is not a goal in itself.");
		say("My goal in using my quill is truly to convince thee with all mine heart and all mine expertise to hasten home safely once thy quest hath been completed and thy thirst for adventuring quenched.");
	}
	if (var0000 == 0x00D3) {
		say("~~ ~~THE SLEEPING SOLDIER~~ ~~Registry*");
		say("    ~ ~Gwenno~ ~Alinda of Monitor~ ~Batlin the Sage~ ~Draygan~~Peter of Monitor");
	}
	if (var0000 == 0x00D4) {
		say("~~ ~~A TREATISE ON TORTURE~~by Evad, Royal Servant to the~~King of the White Dragon*");
		say("    I have been given the privilege of chronicling the King's romp through madness. As a reward, I will be slain quickly. His Majesty began with a commoner named Patric, stretching him on the rack. By his own hands, His Majesty turned the man to a babbling wretch over the course of twelve hours.");
		say("   ...After boiling the flesh from a family of farmers, His Majesty became inspired. He restrained a noble, a guest at the great banquet, upon the torture table and applied tourniquets to each of his limbs. One by one the limbs became useless strands of dead flesh. He showed mercy on the victim by killing him only five hours later by opening numerous small wounds on his person and letting him bleed to death.*");
		say("The King of the White Dragon killed his own wife by slaying a bull, slitting open the carcass, and placing her, tied securely, into the opening. He then sewed the opening shut such that naught but her head protruded.");
		say("He sat outside and watched as the carcass decayed around her and vultures and other carrion beasts picked apart the meat -- the bull's and hers...");
	}
	if (var0000 == 0x00D5) {
		say("~~ ~~PRINCIPLES OF ECONOMICS~~ ~~By Hyle*");
		say("    Economics is, simply put, the study of how an entity could most efficiently allocate its limited resources. I use the word \"Entity\" because these principles, moderately adjusted, may be applied on different levels.*");
		say("    From the largest, and consequently least detailed, level -- that of a worldwide market in which the intricacies of trade and specialization are most emphasized, to an individual business's or, smaller still, an individual's struggle to gain maximum utility from the limited funds provided by that person's livelihood.*");
		say("    Let us begin by defining some simple, underlying theories which may dictate the behavior of our target, which, for the purposes of this book, will focus on the economy as a whole. I intend later to publish a separate document on the wholly different level of business and/or individual-level economic fundamentals.*");
		say("    As is the case in any science, one must first be given a foundation upon which to build his knowledge; in this particular instance, I will refer to the \"Tower of Economic Understanding.\"*");
		say("    The market is the basis of my study. A market is not a tangible thing -- not like the marketplace at which one might trade with merchants for needs or wants (these I will define further into the book), although a marketplace is a part of the market.*");
		say("    Rather, the market consists of the consumer (the entity purchasing the resource) and the seller (the entity offering the resource for sale or trade). For example, at the aforementioned marketplace, the baker, offering a loaf of bread, would be the seller, and an entity interested in purchasing the loaf would be the consumer.*");
		say("    A market exists when there is a resource to be exchanged. A resource, in simplest terms, can be either a good or a service. A good is a tangible item -- examples include water, diamonds, and false beards. A service is something which is performed by an entity; e.g. the service a cargo ship supplies or even governmental bodies such as a standing garrison of soldiers...");
	}
	if (var0000 == 0x00D6) {
		say("~~ ~~THE DWELLERS OF SERPENT ISLE~~  ~~By Byman*");
		say("    One quarter of a millennium ago, the man-daemon Lord British impressed upon the citizens of Sosaria his Eight Virtues. Most of the citizens were deluded into believing that his way of life was just and fair. Some were strong enough to oppose his rule and fled to begin their own civilization, free of the oppressive autocracy.*");
		say("    These brave folk, led by a mage whose bravery is now sadly forgotten, ventured out to sea, with little idea as to their destination; only a firm belief that Lord British was a tyrant whose rule was not to be tolerated. Erstam led them to a large island, which was instantly christened \"New Sosaria.\" The land's name was changed shortly thereafter to \"Serpent Isle,\" after the strange ruins found there.*");
		say("    There were three principal groups who left Sosaria -- the Mages of Moon, the chivalrous folk of the Two Montors, and the folk of the port city of Fawn. Each had their own reasons for joining in the emigration: the mages because they felt that certain of Lord British's virtues were unrealistic; the Fawnese because Lord British had failed to acknowledge a ninth virtue -- Beauty; and the brave folk of Monitor because of their belief that Courage ranked above all else...");
	}
	if (var0000 == 0x00D7) {
		say("~~ ~~COURAGEOUS DEEDS~~ ~~By Andrew of Monitor*");
		say("~~ CHAPTER ONE~~  ~~The tale of Kosric and Pedigar*");
		say("\tThe brothers Kosric and Pedigar sailed with the original expedition to Serpent Isle, when the land was more unknown and mysterious than it is today. Each brother was the Lord of one of the two Montors on Sosaria, and, not content to settle for Lord British's uncompromising and misguided rule, convinced their people to set sail with the mages of Moon and the people of Fawn to the new land.*");
		say("\tLost in the history books of the other two cities, however, is the tale of what happened when the tired sojourners first set foot on this new land. The leader, a mage who went by the name Erstam (it surely could not be the same mad Erstam who performs intolerable experiments today), was given the honor of stepping first on Serpent Isle. It was then up to the leaders of the individual groups to decide who would next trod upon the unknown isle. Kosric and Pedigar claimed the right, as their group were the finest warriors among them. The Fawnese claimed it also, arguing that their beauty should mingle with the beauty of the new island before anyone else. The Moonshadian mages, being untrustworthy, teleported themselves onto the island while the other two groups were engaged in discussion, stealing the honor.*");
		say("\tThe greatest honor gone, the Fawnese and Monitorians descended the gangplank together. The Moonshadians scattered themselves like the four winds before they could be reprimanded, and the Fawnese ran to explore the beauty of the island. At that moment, emerging from the hills and woodlands, trolls began an assault on the intrepid band. Were it not for Kosric and Pedigar and their Monitorian soldiers, the expedition would have failed then and there, for the Fawnese and Moonshadians were caught unawares. However, the two launched themselves at the foes, Kosric wielding his hammer, \"Thunderbolt,\" and Pedigar with his greatsword, and brought doom upon the foul trolls.*");
		say("\tWhen the battle was over, a score of courageous Monitorians lay dead beside the bodies of twice that number of trolls. Let it not be forgotten, brave Monitorian, that it was thine ancestors who led the way for all civilized life on this island.");
	}
	if (var0000 == 0x00D8) {
		say("~~ ~~RECIPE BOOK~~ ~~By Petra*");
		say("Apple Way~ ~ 2 apples, peeled and sliced~ 1 cup sugar~ 2 tablespoons of corn starch~ 2 tablespoons of butter~ 1 teaspoon cinnamon~ 1 double pie crust*");
		say("Place the apples, sugar, cornstarch, and cinnamon into a large bowl and combine them. Put the mixture into the bottom pie crust with the butter. Put on top pie crust and cut slits for steam to escape. Bake in 350 degree oven for about 45 minutes.");
	}
	if (var0000 == 0x00D9) {
		say("~~ ~~RECIPE BOOK~~ ~~By Petra*");
		say("Sweet Muffins~ ~ 3/4 cup milk~ 1/2 cup sugar~ 2 teaspoons salt~ 1/2 cup butter~ 1/2 cup warm water~ 5 ounces of yeast~ 1 egg~ 4 cups unsifted flour~*");
		say("Scald milk, stir in sugar, salt, and butter. Cool to lukewarm. Measure warm water into a large warm bowl. Add yeast and stir until dissolved. Stir in lukewarm milk mixture, egg, and half of the flour, and beat until smooth. Stir in remaining flour to make a stiff batter. Cover the bowl tightly with waxed paper. Refrigerate the dough at least two hours.*");
		say("Divide dough into two halves and roll each piece into a 9 by 14 inch rectangle. Brush lightly with melted butter.");
		say("Filling:~ Sprinkle the rectangle with a mixture of 3/4 cup sugar, 1 teaspoon cinnamon, and 1/3 cup raisins and pecans. Roll the rectangles so that they are 9 inches long (like a jelly roll).  Make sure the edges are firmly sealed.*");
		say("Cut each roll into nine equal pieces and place them in a greased pan (leave enough room for the pieces to expand). Cover the pan and let the dough rise in a warm place until the rolls have doubled in size. Bake at a moderate temperature (350 F degrees) for about 30 minutes.*");
		say("Frosting:~ Frost with a mixture of confectioner's sugar (1 1/2 cup) and 5 teaspoons of milk.");
	}
	if (var0000 == 0x00DD) {
		say("~~ ~~FIGHTING IS AN ART~~ ~~By Johnson*");
		say("~  Lesson One: ~   In fighting, thou must never lose, no matter what thou must do. Anyone fighting thee is an enemy. An enemy must be destroyed. ~\tDuring battle thou wilt be confronted by thine enemy. Thou must defeat him, or thou wilt bring disgrace upon thyself, thy clan, and thy trainer. ~    Battles are always on the horizon. Thou must train hard, and work thyself hard. Thou must think battle, eat battle, sleep battle if thou dost expect to be victorious. Those warriors who do not think they can do this should contemplate another line of work.");
		say("~   Knowing thy weapon is the greatest value. Be it sword, mace, or bow, thou must train with it until mastery if thou dost want to be a true warrior. If thou hast not the time or the mind to train in this fashion then thou shouldst perhaps train with the shovel and the carrying of animal wastes from the fields instead. It is better for thee to serve thy clan as best as thou canst, though it be a less than knight-worthy post, than for thee to run in battle and endanger thy comrades.");
		say("\t Anyone caught running away from a battle should be put to the sword immediately, lest others feel that they may let their womanish fears prevail. The true knight is not he who fights battles, but he who relishes in the spilling of blood. He who is enthralled with the smell of a bowel split wide, or the sight of anothers' blood staining his sword and armour, should be praised above all. This is what a true knight seeks. He is a true master in the arts of fighting.");
	}
	if (var0000 == 0x00DE) {
		say("~~ ~~ Lord British's Tyrannical Adventure ~~ ~~by Anon *");
		say("~Lord British was a monarch who was haughty and vain ~And especially proud of his despotic reign. ~But conceit of this sort isn't proper at all ~And soon the old tyrant was doomed for a fall. ~One day as he viewed his subjects from on high, ~A voluptuous young wench caught his tired old eye.*");
		say("~Bending over to see, that oversexed goat ~Let his gold crown slip and fall into the moat. ~With a cry of sheer terror he jumped like a fool, ~he rushed to his ditch (it reeked like a cesspool).*");
		say("~He leaped in kersplash! and sank like a stone. ~(Everyone hoped for a new heir to the throne.) ~But alas he came up and staggered from the sewer, ~his robes smelled of offal, his breath like manure.*");
		say("~\"Why did I do that? What possessed me today? ~I'm as daft as old Iolo, and now I smell like Dupre.\" ~\"And if anyone sees me, oh what a disgrace, ~I had better leave if I want to save face!\"");
		say("~But a crowd had assembled and stared, amazed, ~the sight confused them, the stench left them dazed. ~Then with a shriek a young boy began to laugh, ~giggling and pointing at the king's fecal bath.*");
		say("~Becoming enraged, the monarch suddenly turned wild, ~He looked like he wanted to strangle the child! ~His hand turned to fist, he struck lightning fast, ~but the old poop missed, and fell on his ass.");
		say("~Not holding back, the crowd soon roared, ~The laughter was deafening. It grew till it soared. ~But the king found no humor and called for his men. ~The arrival of the guard quickly silenced the din.*");
		say("~\"For all of you who found humor in my sorrow and misfortune ~Will soon find the rack! And pain! And contortion! ~Then I will cackle as you stew and boil, ~in a pot full of lard and bubbling oil.*");
		say("~And for those who survive this (they'd liefer be dead), ~I'll pluck out their eyes, and chop off their head! ~Finally in the wind their bodies will swing, ~Then you fools will be sorry for laughing at this king!\"*");
		say("~Then all were led away at the point of a sword, ~While old Lord Brit took a dip in a ford. ~Then he laughed at the cries that screamed through the night, ~He chuckled at their anguish, he cackled at their plight.*");
		say("~In Britannia today no one openly tells this tale, ~lest they find themselves thrown in tyrant's darkest jail. ~But here in our new homeland this song can be sung, ~the tale of how British acquired his faint smell of dung.");
	}
	if (var0000 == 0x00DF) {
		say("~~ ~~The Crying Lute ~~ ~~By Gannt*");
		say("~The lute in mine hands as I softly strum, ~cries for it knows the hollow man I have become, ~of my tragedy, of my sorrow, of my lonely despair. ~Only my lute listens, alone, only it cares. ~ ~Though I am a knight, ~and mine emotions I hide, ~I still feel the soul-eating darkness inside. ~I am a man of armour and a man of the sword, ~but the blackness I feel I cannot ward.*");
		say("~The green swine came, silent coward attacks, ~with bow and arrow, with sword and axe. ~They came for our blood, for our flesh to eat, ~We hacked them to death, our blades flaying their meat. ~ ~Though I have loved her, she still left this life, ~her pale white skin pierced by a goblin's bloody knife. ~But I am left here, an empty shell of a man. ~I cannot speak, the sorrow is more than I can stand. ~ ~Others drink themselves blind, but I cannot partake ~The others\tcelebrate, but smiles I can't fake. ~I will sit here by the fire and softly strum, ~only my lute knows the hollow man I have finally become.");
	}
	if (var0000 == 0x00E0) {
		say("~~ ~~The House of the Unicorn ~~ ~~By Gannt*");
		say("~Come! Enter into the rich house of the Unicorn. ~Open your ears and minds, ~Absorb the magic of the steed's fair horn! ~We are not now, ~nor never have we been ~Children of the Unicorn. ~But if we give in to ourselves, ~and listen to music of the elves ~one day soon we will be with the Unicorn.*");
		say("~On the day of thy birth ~came forth a new ray of sun to our earth ~Providing warmth and green riches ~to drive away the sorcery of witches. ~And we all take part in the gifts of the harvest moon, ~and give ourselves to the lute and the tune ~and drink the wealth of the early morning dew ~and savor the pleasure held by the precious chosen few.*");
		say("~Oh, to belong to the chosen of the Unicorn, ~The wealth of spirit, no fear of the forlorn. ~We can dance in the meadows by the whispering wonders, ~and ride forth on lightning and command the thunder. ~Oh, great steed, thou magical beast, ~in thine honor we break bread and feast. ~We raise our cups high in twilight's last never ~We are in the House of the Unicorn where we will dwell forever.");
	}
	if (var0000 == 0x00E1) {
		say("~~ ~~No Such Thing as Fairies ~~ ~~By Gannt*");
		say("~In our childhood years we learn that fairies glow, ~and this is good as everyone knows. ~But we partake the juice of the dark berries ~though we know there are no such thing as fairies... ~ ~We cry, though we rarely let it show, ~our tears fall like melting mountain snow. ~But still the fairies float like smoke rings though the night. ~stealing us blind with their mythical magical sight.*");
		say("~And with the fortune to seize priceless treasures, ~and the subsequent Moonshadian pleasures ~and as we grow older and bolder and drawn, ~the fairies visit us less till, alas, they are gone. ~ ~But for our offspring the fairies will still glow, ~and this is good as every child knows. ~But we keep partaking in the juice of the dark berries ~for we know that there are no such things as fairies...");
	}
	if (var0000 == 0x00E2) {
		say("~~ ~~DEVRA'S RECIPES~~ ~~*");
		say("Chicken and Rice~ ~ 2 cups rice~ 1 1/2 cups coarsely chopped green pepper~ 3/4 cup thinly sliced onions~ 3 tablespoons salad oil~ 1/4 cup cornstarch~ 2 cups chicken stock~ 3 tablespoons soy sauce~ 2 cups slivered cooked chicken~ 3 ripe tomatoes, cut in thin wedges~ ~ Cook green pepper and onions in oil till tender. Blend cornstarch and a little chicken stock. Add remaining stock and soy sauce. Gently stir chicken and stock into vegetables. Cook and stir until sauce is clear and thickened. Add tomatoes and cook just until heated. Serve over rice. Serves six.*");
		say("Broccoli Casserole~ ~ 1/2 stick butter~ 1 cup of rice, cooked~ 1 cup chopped onions~ 1 bunch broccoli, chopped~ 6 ounces of cream of mushroom soup~ 4 ounces of melted cheese~ ~ Melt butter in skillet; add chopped onion and saute until clear. Add the chopped broccoli. Stir thoroughly. Add the cream of mushroom soup. Stir and simmer a few minutes. Add 1 cup cooked rice; stir and simmer. If too thick, add a small amount of water and cook 25 to 30 minutes at 350 degrees.*");
		say("Apple Nut Squares~ ~ 3 eggs~ 1 3/4 cups sugar~ 1 cup cooking oil~ 2 teaspoons vanilla~ 2 cups flour~ 1 teaspoon salt~ 1 teaspoon baking soda~ 1 1/2 teaspoons cinnamon~ 2 cups peeled, diced apples~ 1/2 cup chopped pecans~ ~ Heat the oven to 325 degrees. Lightly grease a 9 by 13 inch pan. In large mixing bowl, combine first 8 ingredients; beat rapidly for 3 minutes (about 150 strokes). Stir in apples and pecans. Pour into prepared pan. Bake 50 to 60 minutes until toothpick inserted in center comes out clean. Serve with whipped\ttopping, ice cream, or as is, dusted with powdered sugar. Serves 12 to 15.*");
		say("Teatime Tassies~ ~ 3 ounces cream cheese~ 1/2 cup butter~ 1 cup sifted flour~ 3/4 cup brown sugar~ 1 tablespoon soft butter~ 1 teaspoon vanilla~ 1 egg~ dash of salt~ 2/3 cup broken almonds, or other nuts~ ~ Blend cream cheese and butter. Stir in flour. Chill 1 hour. Shape in 2 dozen 1\" balls. Form dough on bottom and sides of cups or muffin tins. Beat remaining ingredients together except nuts. Divide half of the nuts among the cups. Add egg mixture to top with remaining nuts. Bake at 325 degrees for 25 minutes.*");
		say("Saucy Franks~ ~ 1 lb. franks~ 2 tablespoons butter~ 10 3/4 oz. tomato soup~ 1/4 cup brown sugar~ 1/4 cup water~ 3 tablespoons vinegar~ 1 tablespoon worcestershire sauce~ 1/2 lemon, thinly sliced~ 1/2 onion, thinly sliced~ 1/4 cup chopped green pepper~ ~ ~ Score franks in corkscrew fashion. In skillet, brown franks lightly in butter. Add remaining ingredients except green pepper. Simmer covered 10 minutes. Add green pepper and cook 5 minutes longer.*");
		say("Peanut Butter Fudge~ ~ 2 cups sugar~ dash of salt~ 2/3 cup milk~ 1 tablespoon light syrup~ 2 tablespoons butter~ 1 cup peanut butter~ 1 teaspoon vanilla~ ~ ~ Mix first 4 ingredients and cook until soft ball stage. Add remaining ingredients and blend. Pour quickly into greased pan and cut into squares.*");
		say("Noodles~ ~ ~ 1 egg, beaten~ 1 teaspoon soft butter~ 1/2 teaspoon salt~ 2 tablespoons milk~ 1 teaspoon cider vinegar~ 1 cup flour~ ~ ~ Combine egg, butter, salt, milk, and vinegar. Add enough flour to make a stiff dough. Roll out very thin on floured surface. Let dough stand about 2 hours, until dried. Cut into strips. Drop noodles in salted water or broth. Cook for 10 minutes. Makes 3 cups of uncooked noodles.");
	}
	if (var0000 == 0x00E3) {
		say("~~ ~~TROUT SURPRISE~~ ~~By Jendon*");
		say("Pan Fried Whole Trout~ ~ Trout, 2 to 3 lbs. cleaned~ 2 tsp. salt~ 1/2 tsp. ground pepper~ 1/2 cup yellow cornmeal~ 1/2 cup flour~ 3 tbsp. butter~ 8 tbsp. vegetable oil~ 1 lemon, cut into wedges~*");
		say("Wash trout under cold water; pat dry with a towel. Sprinkle with salt and pepper. Mix cornmeal and flour. In heavy skillet, melt butter in oil over moderate heat. When the foam begins to subside, roll trout in cornmeal/flour mixture, shake off excess and put in skillet. Fry 4-5 minutes on each side, until golden brown and flaky. Serve with lemon wedges.");
	}
	if (var0000 == 0x00E4) {
		say("~~ ~~GUIDE TO KNIGHTHOOD~~ ~~By Graeme of Monitor~~");
		say("Courage is in thine heart; if thine heart is not in danger of being pierced by a blade, then thou canst not fight with courage.*");
		say("Courageous men choose as weapons the sword, hammer, mace, and axe. Be wary of those who wield these weapons well, for they are fierce foes.~");
		say("Be also wary of those who weave spells, for they have no courage, and the cowardly weave webs of deceit, lies, and trickery.");
		say("Courage manifests itself on a battlefield, and the side whose courage is greatest, regardless of numbers, shall emerge victorious.~");
		say("A courageous man knows that one can leave the battlefield only two ways: By eliminating all of the enemies or in death.");
		say("A man whose life thou hast saved, or who hath saved thine, can be trusted the rest of thy life.~");
		say("A knight must never work toward personal goals in lieu of the goals of his Lord.~");
		say("Courage is not only taking sword up against his foe; it is the courage to admit to and remedy his own shortcomings, and if it happens that the knight is wrong, he must have the courage to admit as much.*");
		say("A knight must know, beyond the martial skills of the weapon of his fancy, the art of tactics, as it may some day come to him that the lives of his fellow knights may be decided by his tactical decisions.~");
		say("Any knight who betrays another will never be allowed to take up arms again. A knight who perpetrates such a wrongdoing is no knight; he is like unto the goblins he once warred against.~");
		say("Courage is separate from stupidity; there comes a time to run and regroup in some battles, but only those which are unwinnable.~");
	}
	if (var0000 == 0x00E5) {
		say("~~ ~~WARRIORS OF FORTUNE QUARTERLY~~ ~~The Adventurer's Guidebook~~ ");
		say("~\tFor you men who are stern of heart and gifted in the ways of weapons of steel, fortunes more mightier than you can dream of lie in your near future. All you must do is read the secrets held within these pages and you will be on the way to riches. Enter into mysteries that have baffled men through the ages, with rewards greater than those of today's kingdoms. Come, adventure and gold are on your horizon.*");
		say("~This issue offers the stern-hearted adventurer a chance to be the first to a miser's treasure! With more gold than ten ships can carry! Read on, and learn the history and the location of one of the world's richest lost lairs. Couldst thou be the first to find it? ~\tMany hundreds of years ago there was a miser named Triphako who had accumulated a massive fortune by swindling the local natives and by hiring pirates to attack his competitor's ships and cargo.*");
		say("~\tOne night after he had a vivid dream about losing his vast wealth, Triphako consulted a great wizard. The sage forewarned that the miser was about to lose all of his wealth in the near future and that nothing that he could do would prevent this. Thinking that he could avoid the prophecy, the miser took all of his gold to a cave in the northern icy reaches for safe storage. He hired the wizard to create a series of tunnels in the rear of the cave that no one could find their way through without a magical map. ~\tWhen all was finished, the wizard conjured an Ice Dragon to guard the mouth of the cave that led to the riches. On the voyage back to the palace, the miser, fearing that the wizard would allow his secret to be known, killed the wizard by pushing him into the sea.");
		say("~\tUnfortunately for him, upon the wizard's death, the magical map disappeared in a puff of blue smoke. Fearing that the prophecy had come true, the miser returned to the cave and tried to find the route to his riches. True to the wizard's warning, the miser never did reach his riches. Most say that he lies somewhere within the frozen caverns, for he never returned.");
		say("~\tTo this day no one hath survived the tunnels and reached the lair of the Ice Dragon. Some have attempted to face the Ice Dragons at the mouth of their cave, but all have either fled, or become permanent fixtures in the ice surrounding the cavern's mouth. ~\tIf thou beest brave, and sure of thy skills in battle, thou mayest find the secret way into the lair of Triphako and to his riches untold.");
	}
	if (var0000 == 0x00E6) {
		say("~~ ~~THE RITES OF CREMATION~~ ~~by Tolbert~~");
		say("~\tLet this book serve as a guide to those who follow me in the honorable profession of cremator to the finest warriors in all the lands known to mankind, the fine fighters of Monitor!");
		say("\tMost of this will become known during thine apprenticeship, but these written words will serve to bolster that which thy predecessor will be teaching thee.~");
		say("\tThe most important thing thou canst learn of thy profession is this: being a cremator is no less honorable or worthy a duty than taking up sword and shield and doing battle with goblins, trolls, and all the other uncivilized fiends that populate our land. I put to any doubters this question: where would a warrior be if he knew that, should he die valiantly in battle, his body would not be brought back to receive a proper cremation? That his body, primed and trained for war in life, should feed the carrion cowards who would rather flee than fight, or perhaps a meal for the wives of those foul beings who struck him down? He would be in the rear of the force, hoping that he returns home; worried more for his life than guiding his blade through the hearts of his enemies.*");
		say("\tI have shown thee the worth of thy profession; now I will reveal to thee the import of burning one's body, as opposed to the primitive practice of burial. Thou hast known from the day thy first words were spoken that there is mystical power in the ashes of the dead. 'Tis true, and thou dost know this from thy Test of Knighthood. Ashes are the soul of a man; his spirit is locked within the remains of his lifeless body, and burning it releases the spirit from its imprisonment. If this is not done, the spirit will go insane and rise up as a monster -- lifeless, yet hateful and vengeful and animated. The spirit is in torment. This is no way for a courageous knight to spend eternity. For such a reason, the cremator is a respected and honored member of our stout city.~");
		say("\tThe question arises that, after the body is cremated (the method is described in detail in a later chapter), where must the ashes be stored? Fortune and wisdom on the part of our forefathers have placed us in a land whereby an opening in the great mountains to the west can serve as catacombs; a tomb for the courageous dead. It seems that these were once daemon lands, as evidenced by the ruins in the northwest, but more definitively by the catacombs. Therein, coffins and dusty tapestries hold their unburned dead. No doubt the place is naught but ruins because the maddened corpses did rise up and wreak their vengeance on the fools...");
	}
	if (var0000 == 0x00E7) {
		say("~~TEMPLES OF CHAOS~ Translated by Miggim*");
		say("~Xenka's prophecies mention the ancient Ophidian temples of Chaos as somehow being important to the Hero From Another World. Though I have not been able to decipher the true meaning of Xenka's visions regarding these temples, I feel that the Hero From Another World shall surely need some information regarding their location. I have translated a brief description of the Chaos temples from Ophidian script into Runic.*");
		say("The Temple of Emotion was carved from the living rock of Skullcrusher. To find the Temple of Emotion thou shouldst look for a small lake. The temple's entrance is a small distance south of this lake. The Temple of Enthusiasm lies along the coast, north of the great Spinebreaker mountains. The Temple of Tolerance was built near the coast at the northern end of the snowy valley between the Spinebreaker and Skullcrusher mountains.");
	}
	if (var0000 == 0x00FA) {
		say("~~ ~~Great Practical Jokes~~  ~~*");
		say("Chapter One: Exploding Books *");
		say("Heh, heh, heh.");
		var0001 = script item {
			nohalt;
			call Func02C0;
		};
	}
}

void Func063C object#(0x63C) () {
	var var0000;
	var var0001;

	UI_fade_palette(0x000C, 0x0001, 0x0001);
	var0000 = AVATAR->find_nearby(0x0178, 0x0006, MASK_NONE);
	if (var0000) {
		var0001 = script var0000 after 1 ticks {
			nohalt;
			call Func010E;
			frame 6;
		};
	}
}

extern var Func089B 0x89B ();

void Func063D object#(0x63D) () {
	var var0000;
	var var0001;
	var var0002;

	if ((event == DOUBLECLICK) || (event == SCRIPTED)) {
		var0000 = get_npc_number();
		if (var0000 < 0x0100) {
			var0000->show_npc_face(0x0000);
			var0001 = 0x0000;
			while (var0001 < 0x000A) {
				var0002 = Func089B();
				say("\"",
					var0002,
					"\"");
				var0001 += 0x0001;
			}
		}
	}
	if (event == PROXIMITY) {
		item_say("@Oink@");
	}
}

void Func063E object#(0x63E) () {
	UI_error_message("Busted usable called! Rewrite this one!\\n");
}

extern var Func098E 0x98E ();
extern void Func090D 0x90D (var var0000, var var0001, var var0002, var var0003, var var0004, var var0005, var var0006);
extern void Func063F object#(0x63F) ();

void Func063F object#(0x63F) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;
	var var0008;
	var var0009;
	var var000A;
	var var000B;
	var var000C;
	var var000D;
	var var000E;

	if (event == SCRIPTED) {
		var0000 = Func098E();
		for (var0003 in var0000 with var0001 to var0002) {
			if (var0003->npc_nearby()) {
				var0004 = var0003->direction_from(item);
				var0005 = script var0003 {
					face var0004;
				};
			}
		}
		// This is unused. Maybe meant to be run on 'item'?
		var0006 = new script {
			call Func063F;
		};
		var0004 = direction_from(AVATAR);
		var0007 = script item {
			face var0004;
		};
		var0008 = [ 0,  2,  2,  2,  0, -2, -2, -2];
		var0009 = [-2, -2,  0,  2,  2,  2,  0, -2];
		var000A = var0008 & var0008;
		var000B = var0009 & var0009;
		var0004 = find_direction(AVATAR) + 0x0001;
		var000C = 0x0001;
		var000D = var000A[var0004];
		var000E = var000B[var0004];
		while (var000C < 0x0008) {
			var000D &= var000A[(var0004 + var000C)];
			var000E &= var000B[(var0004 + var000C)];
			var000C += 0x0001;
		}
		Func090D(item, var000D, var000E, -1, Func063F, item, PATH_SUCCESS);
	}
}

extern var Func0951 0x951 ();

void Func0640 object#(0x640) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;

	if (event == DOUBLECLICK) {
		halt_scheduled();
		item_say("@In Mani Ylem@");
		if (Func0951()) {
			var0000 = script item {
				nohalt;
				sfx 57;
				actor frame reach_1h;
				actor frame raise_1h;
				actor frame strike_1h;
				call Func0640;
			};
		} else {
			var0000 = script item {
				nohalt;
				actor frame reach_1h;
				actor frame raise_1h;
				actor frame strike_1h;
				call Func0606;
			};
		}
	}
	if (event == SCRIPTED) {
		var0001 = UI_get_party_list();
		for (var0004 in var0001 with var0002 to var0003) {
			var0005 = var0004->get_object_position();
			var0006 = UI_create_new_object(0x0179);
			if (var0006) {
				var0007 = UI_die_roll(0x0001, 0x001E);
				var0006->set_item_frame(var0007);
				var0006->set_item_flag(TEMPORARY);
				var0000 = UI_update_last_created(var0005);
			}
		}
	}
}

extern var Func0979 0x979 (var var0000);
extern var Func0951 0x951 ();

void Func0641 object#(0x641) () {
	var var0000;
	var var0001;
	var var0002;

	if (event == DOUBLECLICK) {
		var0000 = UI_click_on_item();
		halt_scheduled();
		var0001 = Func0979(var0000);
		item_say("@An Nox@");
		if (Func0951()) {
			if (var0000->is_npc()) {
				var0002 = script item {
					nohalt;
					face var0001;
					sfx 64;
					actor frame reach_1h;
					actor frame raise_1h;
					actor frame strike_1h;
				};
				var0002 = script var0000 after 6 ticks {
					nohalt;
					call Func0641;
				};
			} else {
				var0002 = script item {
					nohalt;
					face var0001;
					actor frame reach_1h;
					actor frame raise_1h;
					actor frame strike_1h;
					call Func0606;
				};
			}
		} else {
			var0002 = script item {
				nohalt;
				face var0001;
				actor frame reach_1h;
				actor frame raise_1h;
				actor frame strike_1h;
				call Func0606;
			};
		}
	}
	if (event == SCRIPTED) {
		clear_item_flag(POISONED);
		clear_item_flag(PARALYZED);
		clear_item_flag(CAN_FLY);
	}
}

extern var Func0951 0x951 ();
extern var Func0941 0x941 (var var0000);

void Func0642 object#(0x642) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;
	var var0008;
	var var0009;
	var var000A;
	var var000B;

	if (event == DOUBLECLICK) {
		halt_scheduled();
		item_say("@Wis Jux@");
		if (Func0951()) {
			var0000 = script item {
				nohalt;
				sfx 67;
				actor frame raise_1h;
				actor frame strike_1h;
			};
			var0001 = Func0941(AVATAR);
			var0002 = 0x0015 + var0001;
			var0003 = find_nearby(0x00C8, var0002, MASK_ALL_UNSEEN);
			for (var0006 in var0003 with var0004 to var0005) {
				var0000 = script var0006 after 5 ticks {
					nohalt;
					call Func0642;
				};
			}
			var0007 = find_nearby(0x0320, var0002, MASK_ALL_UNSEEN);
			var0008 = find_nearby(0x020A, var0002, MASK_ALL_UNSEEN);
			var0009 = var0007 & var0008;
			for (var0006 in var0009 with var000A to var000B) {
				if (var0006->get_item_quality() >= 0x00FA) {
					var0000 = script var0006 after 5 ticks {
						nohalt;
						call Func0642;
					};
				}
			}
		} else {
			var0000 = script item {
				nohalt;
				actor frame raise_1h;
				actor frame strike_1h;
				call Func0606;
			};
		}
	}
	if ((event == SCRIPTED) || (event == EGG)) {
		obj_sprite_effect(ANIMATION_SPARKLES, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, LOOP_ONCE);
	}
}

extern var Func0951 0x951 ();

void Func0643 object#(0x643) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;
	var var0008;
	var var0009;
	var var000A;
	var var000B;

	if (event == DOUBLECLICK) {
		halt_scheduled();
		item_say("@Vas An Flam@");
		if (Func0951()) {
			var0000 = script item {
				nohalt;
				actor frame reach_1h;
				actor frame raise_1h;
				actor frame strike_1h;
			};
			var0001 = 0x0019;
			var0002 = [0x02BD, 0x020E, 0x0152, 0x01B3];
			for (var0005 in var0002 with var0003 to var0004) {
				var0006 = find_nearby(var0005, var0001, MASK_NONE);
				for (var0009 in var0006 with var0007 to var0008) {
					var000A = var0009->get_item_shape();
					var000B = (get_distance(var0009) / 0x0003) + 0x0002;
					UI_telekenesis(var000A);
					var0000 = script var0009 after var000B ticks {
						nohalt;
						call var000A;
					};
				}
			}
		} else {
			var0000 = script item {
				nohalt;
				actor frame reach_1h;
				actor frame raise_1h;
				actor frame strike_1h;
				call Func0606;
			};
		}
	}
}

extern var Func0951 0x951 ();

void Func0644 object#(0x644) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;
	var var0008;
	var var0009;
	var var000A;
	var var000B;

	if (event == DOUBLECLICK) {
		halt_scheduled();
		item_say("@Vas In Flam@");
		if (Func0951()) {
			var0000 = script item {
				nohalt;
				actor frame raise_1h;
				actor frame reach_1h;
				actor frame strike_1h;
			};
			var0001 = 0x0019;
			var0002 = [0x0253, 0x0379, 0x0150, 0x01E1];
			for (var0005 in var0002 with var0003 to var0004) {
				var0006 = find_nearby(var0005, var0001, MASK_NONE);
				for (var0009 in var0006 with var0007 to var0008) {
					var000A = var0009->get_item_shape();
					var000B = (get_distance(var0009) / 0x0003) + 0x0002;
					UI_telekenesis(var000A);
					var0000 = script var0009 after var000B ticks {
						nohalt;
						call var000A;
					};
				}
			}
		} else {
			var0000 = script item {
				nohalt;
				actor frame raise_1h;
				actor frame reach_1h;
				actor frame strike_1h;
				call Func0606;
			};
		}
	}
}

extern var Func0951 0x951 ();

void Func0645 object#(0x645) () {
	var var0000;

	if (event == DOUBLECLICK) {
		halt_scheduled();
		item_say("@In Lor@");
		if (Func0951()) {
			var0000 = script item {
				nohalt;
				sfx 57;
				actor frame raise_1h;
				actor frame strike_1h;
				call Func0645;
			};
		} else {
			var0000 = script item {
				nohalt;
				actor frame raise_1h;
				actor frame strike_1h;
				call Func0606;
			};
		}
	}
	if (event == SCRIPTED) {
		UI_cause_light(0x029A);
	}
}

extern var Func0951 0x951 ();
extern var Func0994 0x994 ();

void Func0646 object#(0x646) () {
	var var0000;
	var var0001;
	var var0002;

	if (event == DOUBLECLICK) {
		item_say("@In Wis@");
		if (Func0951()) {
			var0000 = script item {
				nohalt;
				sfx 130;
				actor frame kneeling;
				actor frame standing;
				actor frame cast_up;
				wait 4;
				call Func0646;
			};
		} else {
			var0000 = script item {
				nohalt;
				actor frame kneeling;
				actor frame standing;
				actor frame cast_up;
				call Func0606;
			};
		}
	}
	if (event == SCRIPTED) {
		var0001 = Func0994();
		var0002 = "We must be lost.";
		if (var0001 == -1) {
			var0002 = "the Wilderness";
		}
		if (var0001 == 0x000E) {
			var0002 = "Moonshade";
		}
		if (var0001 == 0x0000) {
			var0002 = "Castle of the White Dragon";
		}
		if (var0001 == 0x0001) {
			var0002 = "Claw";
		}
		if (var0001 == 0x0002) {
			var0002 = "Monk Isle";
		}
		if (var0001 == 0x0003) {
			var0002 = "Fawn";
		}
		if (var0001 == 0x0004) {
			var0002 = "Furnace";
		}
		if (var0001 == 0x0005) {
			var0002 = "Glacier Mountains";
		}
		if (var0001 == 0x0006) {
			var0002 = "Grand Shrine";
		}
		if (var0001 == 0x0007) {
			var0002 = "Great Northern Forest";
		}
		if (var0001 == 0x0008) {
			var0002 = "Ice Plains";
		}
		if (var0001 == 0x0009) {
			var0002 = "Inn of the Sleeping Bull";
		}
		if (var0001 == 0x000A) {
			var0002 = "Isle of Crypts";
		}
		if (var0001 == 0x000B) {
			var0002 = "Isles of the Mad Mage";
		}
		if (var0001 == 0x000C) {
			var0002 = "Knight's Test";
		}
		if (var0001 == 0x000D) {
			var0002 = "Monitor";
		}
		if (var0001 == 0x000F) {
			var0002 = "Mountains of Freedom";
		}
		if (var0001 == 0x0010) {
			var0002 = "Shamino's Castle";
		}
		if (var0001 == 0x0011) {
			var0002 = "Temple of Discipline";
		}
		if (var0001 == 0x0012) {
			var0002 = "Temple of Emotion";
		}
		if (var0001 == 0x0013) {
			var0002 = "Temple of Enthusiasm";
		}
		if (var0001 == 0x0014) {
			var0002 = "Temple of Ethicality";
		}
		if (var0001 == 0x0015) {
			var0002 = "Temple of Logic";
		}
		if (var0001 == 0x0016) {
			var0002 = "Temple of Tolerance";
		}
		if (var0001 == 0x0017) {
			var0002 = "Skullcrusher Mountains";
		}
		if (var0001 == 0x0018) {
			var0002 = "Spinebreaker Mountains";
		}
		if (var0001 == 0x0019) {
			var0002 = "Sunrise Isle";
		}
		if (var0001 == 0x001A) {
			var0002 = "Gorlab Swamp";
		}
		if (var0001 == 0x001C) {
			var0002 = "Western Forest";
		}
		if (var0001 == 0x001D) {
			var0002 = "Village of the Gwani";
		}
		if (var0001 == 0x001E) {
			var0002 = "Isle of Programmers";
		}
		item_say(var0002);
	}
}

extern var Func0979 0x979 (var var0000);
extern var Func0951 0x951 ();

void Func0647 object#(0x647) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;

	if (event == DOUBLECLICK) {
		halt_scheduled();
		var0000 = UI_click_on_item();
		if (var0000[0x0001] == 0x0000) {
			return;
		}
		var0001 = Func0979(var0000);
		item_say("@Ort Por Ylem@");
		if (Func0951() && ((!var0000->is_npc()) && (var0000[0x0001] != 0x0000))) {
			var0002 = set_to_attack(var0000, 0x01BB);
			var0002 = script item {
				nohalt;
				face var0001;
				sfx 130;
				actor frame raise_1h;
				actor frame strike_1h;
				attack;
			};
		} else {
			var0002 = script item {
				nohalt;
				face var0001;
				actor frame raise_1h;
				actor frame strike_1h;
				call Func0606;
			};
		}
	}
	if (event == WEAPON) {
		var0003 = [0x0105, 0x028E, 0x028B, 0x028D, 0x032A, 0x01AF, 0x0102, 0x01B2, 0x01D6, 0x0369, 0x0247, 0x02B8, 0x03F3];
		var0004 = [0x03B5, 0x03B6, 0x0314, 0x0313];
		var0005 = get_item_shape();
		if (var0005 in var0004) {
			var0002 = script item {
				call var0005;
			};
			return;
		}
		if (!(var0005 in var0003)) {
			UI_telekenesis(var0005);
			var0002 = script item {
				call var0005;
			};
		}
	}
}

extern var Func0979 0x979 (var var0000);
extern var Func0951 0x951 ();
extern void Func0948 0x948 (var var0000);

void Func0648 object#(0x648) () {
	var var0000;
	var var0001;
	var var0002;

	if (event == DOUBLECLICK) {
		halt_scheduled();
		var0000 = UI_click_on_item();
		var0001 = Func0979(var0000);
		item_say("@An Zu@");
		if (Func0951() && (var0000[0x0001] != 0x0000)) {
			var0002 = script item {
				nohalt;
				face var0001;
				sfx 64;
				actor frame raise_1h;
				actor frame strike_1h;
			};
			var0002 = script var0000 after 5 ticks {
				nohalt;
				call Func0648;
			};
		} else {
			var0002 = script item {
				nohalt;
				face var0001;
				actor frame raise_1h;
				actor frame strike_1h;
				call Func0606;
			};
		}
	}
	if (event == SCRIPTED) {
		if (is_npc()) {
			clear_item_flag(ASLEEP);
		} else {
			Func0948(0x003C);
		}
	}
}

extern var Func0979 0x979 (var var0000);
extern var Func0951 0x951 ();
extern var Func0941 0x941 (var var0000);

void Func0649 object#(0x649) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;
	var var0008;
	var var0009;
	var var000A;
	var var000B;
	var var000C;

	if (event == DOUBLECLICK) {
		var0000 = UI_click_on_item();
		var0001 = Func0979(var0000);
		halt_scheduled();
		item_say("@An Jux@");
		if (Func0951()) {
			var0002 = 0x0005 + Func0941(AVATAR);
			var0003 = script item {
				nohalt;
				face var0001;
				actor frame cast_up;
				actor frame cast_out;
				actor frame strike_2h;
			};
			var0004 = var0000->find_nearby(0x00C8, var0002, MASK_ALL_UNSEEN);
			for (var0007 in var0004 with var0005 to var0006) {
				var0000 = var0007->get_object_position();
				var0003 = var0007->set_last_created();
				if (var0003) {
					var0003 = UI_update_last_created(FLAG_DESTROY);
					var0007->halt_scheduled();
					var0007->obj_sprite_effect(ANIMATION_GREEN_BUBBLES, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, LOOP_ONCE);
					UI_play_sound_effect(0x0043);
				}
			}
			var0008 = var0000->find_nearby(0x0320, var0002, MASK_ALL_UNSEEN);
			var0009 = var0000->find_nearby(0x020A, var0002, MASK_ALL_UNSEEN);
			var000A = var0008 & var0009;
			for (var0007 in var000A with var000B to var000C) {
				if (var0007->get_item_quality() >= 0x00FA) {
					var0003 = var0007->set_item_quality(0x0000);
					var0007->obj_sprite_effect(ANIMATION_GREEN_BUBBLES, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, LOOP_ONCE);
					UI_play_sound_effect(0x0043);
				}
			}
		} else {
			var0003 = script item {
				nohalt;
				actor frame cast_up;
				actor frame cast_out;
				actor frame strike_2h;
				call Func0606;
			};
		}
	}
}

extern var Func0979 0x979 (var var0000);
extern var Func0951 0x951 ();

void Func064A object#(0x64A) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;
	var var0008;

	if (event == DOUBLECLICK) {
		var0000 = UI_click_on_item();
		var0001 = var0000->get_item_shape();
		var0002 = Func0979(var0000);
		halt_scheduled();
		var0003 = [0x0284, 0x03B4, 0x03B7, 0x03B8];
		item_say("@Rel Ylem@");
		if (Func0951() && (var0001 in var0003)) {
			var0004 = script item {
				nohalt;
				face var0002;
				actor frame cast_up;
				actor frame cast_out;
				actor frame strike_2h;
			};
			var0004 = script var0000 {
				call Func064A;
			};
		} else {
			var0004 = script item {
				nohalt;
				actor frame cast_up;
				actor frame cast_out;
				actor frame strike_2h;
				call Func0606;
			};
		}
	}
	if (event == SCRIPTED) {
		var0005 = AVATAR->get_object_position();
		var0001 = get_item_shape();
		var0006 = get_item_quantity(var0001);
		var0007 = 0x0000;
		while (var0007 < 0x0005) {
			var0007 += 0x0001;
			var0008 = UI_create_new_object(var0001);
			if (var0008) {
				var0008->set_item_flag(TEMPORARY);
				var0004 = var0008->set_item_quantity(var0006);
				var0004 = UI_update_last_created(var0005);
			}
		}
	}
}

extern var Func0979 0x979 (var var0000);
extern var Func0951 0x951 ();

void Func064B object#(0x64B) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;

	if ((event == DOUBLECLICK) || (event == WEAPON)) {
		halt_scheduled();
		var0000 = UI_click_on_item();
		var0001 = Func0979(var0000);
		item_say("@Vas Frio@");
		if (Func0951()) {
			var0002 = set_to_attack(var0000, 0x0358);
			var0003 = script item {
				nohalt;
				face var0001;
				sfx 20;
				actor frame cast_up;
				actor frame cast_out;
				actor frame strike_2h;
				actor frame strike_2h;
				attack;
				actor frame standing;
			};
		} else {
			var0003 = script item {
				nohalt;
				face var0001;
				actor frame cast_up;
				actor frame cast_out;
				actor frame strike_2h;
				call Func0606;
			};
		}
	}
}

extern var Func0951 0x951 ();

void Func064C object#(0x64C) () {
	var var0000;

	if (event == DOUBLECLICK) {
		halt_scheduled();
		item_say("@Vas Lor@");
		if (Func0951()) {
			var0000 = script item {
				nohalt;
				sfx 57;
				actor frame raise_1h;
				actor frame strike_1h;
				call Func064C;
			};
		} else {
			var0000 = script item {
				nohalt;
				actor frame raise_1h;
				actor frame strike_1h;
				call Func0606;
			};
		}
	}
	if (event == SCRIPTED) {
		UI_cause_light(0x1388);
	}
}

extern var Func0979 0x979 (var var0000);
extern var Func0951 0x951 ();

void Func064D object#(0x64D) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;

	if (event == DOUBLECLICK) {
		var0000 = UI_click_on_item();
		var0001 = Func0979(var0000);
		halt_scheduled();
		item_say("@Mani@");
		if (Func0951() && var0000->is_npc()) {
			var0002 = script item {
				nohalt;
				face var0001;
				actor frame kneeling;
				sfx 64;
				actor frame standing;
				actor frame reach_1h;
				actor frame raise_1h;
				actor frame strike_1h;
			};
			var0002 = script var0000 after 5 ticks {
				nohalt;
				call Func064D;
			};
		} else {
			var0002 = script item {
				nohalt;
				face var0001;
				actor frame kneeling;
				actor frame standing;
				actor frame reach_1h;
				actor frame raise_1h;
				actor frame strike_1h;
				call Func0606;
			};
		}
	}
	if (event == SCRIPTED) {
		var0003 = get_npc_prop(STRENGTH);
		var0004 = get_npc_prop(HEALTH);
		if (var0004 <= var0003) {
			var0005 = (var0003 - var0004) / 2;
			var0002 = set_npc_prop(HEALTH, var0005);
		}
	}
}

extern var Func0951 0x951 ();

void Func064E object#(0x64E) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;

	if (event == DOUBLECLICK) {
		halt_scheduled();
		obj_sprite_effect(ANIMATION_TELEPORT, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, LOOP_ONCE);
		item_say("@Vas An Nox@");
		if (Func0951()) {
			var0000 = script item {
				nohalt;
				actor frame reach_1h;
				actor frame raise_1h;
				actor frame strike_1h;
				sfx 64;
				call Func064E;
			};
		} else {
			var0000 = script item {
				nohalt;
				actor frame reach_1h;
				actor frame raise_1h;
				actor frame strike_1h;
				call Func0606;
			};
		}
	}
	if (event == SCRIPTED) {
		var0001 = UI_get_party_list();
		var0001 &= AVATAR;
		for (var0004 in var0001 with var0002 to var0003) {
			var0004->clear_item_flag(POISONED);
			var0004->clear_item_flag(PARALYZED);
			var0004->clear_item_flag(CAN_FLY);
		}
	}
}

extern var Func0979 0x979 (var var0000);
extern var Func0951 0x951 ();

void Func064F object#(0x64F) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;

	if (event == DOUBLECLICK) {
		halt_scheduled();
		var0000 = UI_click_on_item();
		var0001 = Func0979(var0000);
		item_say("@Uus Sanct@");
		if (Func0951() && var0000->is_npc()) {
			var0002 = script item {
				nohalt;
				face var0001;
				sfx 90;
				actor frame cast_up;
				actor frame raise_1h;
				actor frame strike_2h;
			};
			var0003 = script var0000 after 5 ticks {
				nohalt;
				call Func064F;
			};
			var0004 = var0000->get_object_position();
			obj_sprite_effect(ANIMATION_GREEN_BUBBLES, -2, -2, 0, 0, 0, LOOP_ONCE);
		} else {
			var0002 = script item {
				nohalt;
				face var0001;
				actor frame cast_up;
				actor frame raise_1h;
				actor frame strike_2h;
				call Func0606;
			};
		}
	}
	if (event == SCRIPTED) {
		set_item_flag(PROTECTION);
	}
}

extern var Func0951 0x951 ();
extern var Func0941 0x941 (var var0000);
extern var Func09A0 0x9A0 (var var0000, var var0001);
extern void Func068A object#(0x68A) ();

void Func0650 object#(0x650) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;

	if (event == DOUBLECLICK) {
		item_say("@Rel Frio Mani@");
		if (Func0951()) {
			halt_scheduled();
			var0000 = script item {
				nohalt;
				actor frame cast_up;
				actor frame cast_out;
				actor frame cast_up;
				actor frame strike_2h;
				call Func0650;
			};
		} else {
			var0000 = script item {
				nohalt;
				actor frame cast_up;
				actor frame cast_out;
				actor frame cast_up;
				actor frame strike_2h;
				call Func0606;
			};
		}
	}
	if (event == SCRIPTED) {
		UI_play_sound_effect(0x005A);
		var0001 = Func0941(AVATAR);
		var0002 = 0x07D0 + (var0001 * 0x00C8);
		obj_sprite_effect(ANIMATION_TELEPORT, -2, -2, 0, 0, 0, LOOP_ONCE2);
		gflags[CAST_CHILL_SPELL] = true;
		var0003 = Func09A0(0x0007, 0x0002);
		var0000 = script var0003 after var0002 ticks {
			nohalt;
			finish;
			call Func068A;
		};
	}
}

extern var Func0979 0x979 (var var0000);
extern var Func0951 0x951 ();

void Func0651 object#(0x651) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;

	if (event == DOUBLECLICK) {
		halt_scheduled();
		var0000 = UI_click_on_item();
		var0001 = Func0979(var0000);
		item_say("@Des Sanct@");
		if (Func0951() && (var0000[0x0001] != 0x0000)) {
			var0002 = set_to_attack(var0000, 0x0119);
			var0003 = script item {
				nohalt;
				face var0001;
				sfx 130;
				actor frame raise_1h;
				actor frame cast_out;
				actor frame strike_2h;
				attack;
			};
		} else {
			var0003 = script item {
				nohalt;
				face var0001;
				actor frame raise_1h;
				actor frame cast_out;
				actor frame strike_2h;
				call Func0606;
			};
		}
	}
}

extern var Func0979 0x979 (var var0000);
extern var Func0951 0x951 ();

void Func0652 object#(0x652) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;
	var var0008;
	var var0009;

	var0000 = [0x02D2, 0x02D3];
	var0001 = [0x022C, 0x01A1];
	if (event == DOUBLECLICK) {
		halt_scheduled();
		var0002 = UI_click_on_item();
		var0003 = var0002->get_item_shape();
		var0004 = Func0979(var0002);
		item_say("@Ort Ylem@");
		if (Func0951() && (var0003 in var0000)) {
			var0005 = script item {
				nohalt;
				face var0004;
				sfx 130;
				actor frame reach_1h;
				actor frame raise_1h;
				actor frame strike_1h;
			};
			var0005 = script var0002 after 4 ticks {
				nohalt;
				call Func0652;
			};
		} else {
			var0005 = script item {
				nohalt;
				face var0004;
				actor frame reach_1h;
				actor frame raise_1h;
				actor frame strike_1h;
				call Func0606;
			};
		}
	}
	if (event == SCRIPTED) {
		var0006 = 0x0000;
		for (var0009 in var0000 with var0007 to var0008) {
			var0006 += 0x0001;
			if (var0009 == get_item_shape()) {
				set_item_shape(var0001[var0006]);
			}
		}
	}
}

extern var Func0951 0x951 ();
extern void Func065D object#(0x65D) ();

void Func0653 object#(0x653) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;
	var var0008;
	var var0009;

	if (event == DOUBLECLICK) {
		halt_scheduled();
		var0000 = AVATAR->get_object_position();
		var0001 = [0x00C8, 0x0113];
		var0002 = [];
		item_say("@Wis Jux Ylem@");
		if (Func0951()) {
			var0003 = script item {
				nohalt;
				sfx 130;
				actor frame raise_1h;
				actor frame reach_1h;
				actor frame strike_1h;
			};
			var0004 = 0x000F;
			for (var0007 in var0001 with var0005 to var0006) {
				var0002 &= var0000->find_nearby(var0007, var0004, MASK_EGG);
			}
			if (UI_get_array_size(var0002) > 0x0000) {
				for (var0007 in var0002 with var0008 to var0009) {
					var0003 = script var0007 after 5 ticks {
						nohalt;
						call Func065D;
					};
					var0007->obj_sprite_effect(ANIMATION_GREEN_BUBBLES, -1, -1, 0, 0, 0, LOOP_ONCE);
				}
			} else {
				obj_sprite_effect(ANIMATION_GREEN_BUBBLES, -1, -1, 0, 0, 0, LOOP_ONCE);
			}
		} else {
			var0003 = script item {
				nohalt;
				actor frame raise_1h;
				actor frame reach_1h;
				actor frame strike_1h;
				call Func0606;
			};
		}
	}
}

extern var Func0951 0x951 ();

void Func0654 object#(0x654) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;

	if (event == DOUBLECLICK) {
		item_say("@Vas Uus Sanct@");
		if (Func0951()) {
			halt_scheduled();
			var0000 = script item {
				nohalt;
				actor frame cast_up;
				actor frame cast_out;
				actor frame cast_up;
				actor frame strike_2h;
				call Func0654;
			};
		} else {
			var0000 = script item {
				nohalt;
				actor frame cast_up;
				actor frame cast_out;
				actor frame cast_up;
				actor frame strike_2h;
				call Func0606;
			};
		}
	}
	if (event == SCRIPTED) {
		UI_play_sound_effect(0x005A);
		obj_sprite_effect(ANIMATION_TELEPORT, -2, -2, 0, 0, 0, LOOP_ONCE);
		var0001 = UI_get_party_list();
		var0001 &= AVATAR;
		for (var0004 in var0001 with var0002 to var0003) {
			var0004->set_item_flag(PROTECTION);
		}
	}
}

extern var Func0979 0x979 (var var0000);
extern var Func0951 0x951 ();

void Func0655 object#(0x655) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;

	if ((event == DOUBLECLICK) || (event == WEAPON)) {
		var0000 = UI_click_on_item();
		var0001 = Func0979(var0000);
		halt_scheduled();
		item_say("@An Por@");
		if (Func0951() && (var0000[0x0001] != 0x0000)) {
			var0002 = set_to_attack(var0000, 0x0198);
			var0003 = script item {
				nohalt;
				face var0001;
				actor frame raise_1h;
				actor frame strike_1h;
				actor frame strike_1h;
				attack;
				actor frame standing;
			};
		} else {
			var0003 = script item {
				nohalt;
				face var0001;
				actor frame raise_1h;
				actor frame strike_1h;
				call Func0606;
			};
		}
	}
}

extern var Func0979 0x979 (var var0000);
extern var Func0951 0x951 ();

void Func0656 object#(0x656) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;

	if (event == DOUBLECLICK) {
		var0000 = UI_click_on_item();
		var0001 = Func0979(var0000);
		halt_scheduled();
		item_say("@In Zu@");
		if (Func0951() && (var0000[0x0001] != 0x0000)) {
			var0002 = set_to_attack(var0000, 0x00EA);
			var0003 = script item {
				nohalt;
				face var0001;
				actor frame raise_1h;
				actor frame strike_1h;
				actor frame strike_1h;
				attack;
				actor frame standing;
			};
		} else {
			var0003 = script item {
				nohalt;
				face var0001;
				actor frame raise_1h;
				actor frame strike_1h;
				call Func0606;
			};
		}
	}
}

extern var Func0951 0x951 ();
extern var Func09A0 0x9A0 (var var0000, var var0001);

void Func0657 object#(0x657) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;

	if (event == DOUBLECLICK) {
		halt_scheduled();
		item_say("@Rel Wis@");
		if (Func0951()) {
			var0000 = script item {
				nohalt;
				actor frame raise_1h;
				actor frame strike_1h;
				actor frame strike_1h;
				actor frame standing;
			};
			AVATAR->set_item_flag(READ);
			var0001 = 0x2710;
			var0002 = Func09A0(0x0003, 0x0001);
			if (var0002) {
				var0003 = script var0002 after var0001 ticks {
					nohalt;
					finish;
					call Func0657;
				};
			}
		} else {
			var0000 = script item {
				nohalt;
				actor frame raise_1h;
				actor frame strike_1h;
				call Func0606;
			};
		}
	}
	if (event == SCRIPTED) {
		AVATAR->clear_item_flag(READ);
	}
}

void Func0658 object#(0x658) () {
	var var0000;

	if (event == DOUBLECLICK) {
		halt_scheduled();
		item_say("@Rel Por@");
		var0000 = script item {
			nohalt;
			actor frame raise_1h;
			actor frame reach_2h;
			actor frame raise_1h;
			call Func0606;
		};
	}
}

extern var Func0951 0x951 ();
extern var Func0980 0x980 (var var0000);

void Func0659 object#(0x659) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;
	var var0008;

	if (event == DOUBLECLICK) {
		halt_scheduled();
		item_say("@An Xen Jux@");
		if (Func0951()) {
			var0000 = script item {
				nohalt;
				actor frame raise_1h;
				actor frame strike_1h;
				actor frame strike_2h;
				actor frame reach_2h;
				sfx 67;
			};
			var0001 = AVATAR->get_npc_object();
			var0001->obj_sprite_effect(ANIMATION_TELEPORT, -2, -2, 0, 0, 0, LOOP_ONCE);
			var0002 = 0x0019;
			var0003 = Func0980(var0002);
			for (var0006 in var0003 with var0004 to var0005) {
				var0002 = get_distance(var0006);
				var0002 = (var0002 / 0x0004) + 0x0004;
				if (!(UI_die_roll(0x0001, 0x0003) == 0x0001)) {
					var0000 = script var0006 after var0002 ticks {
						nohalt;
						call Func0659;
					};
				}
			}
		} else {
			var0000 = script item {
				nohalt;
				actor frame raise_1h;
				actor frame strike_1h;
				actor frame strike_2h;
				actor frame reach_2h;
				call Func0606;
			};
		}
	}
	if (event == SCRIPTED) {
		var0007 = get_npc_number();
		if (!(var0007 in [AVATAR])) {
			var0008 = AVATAR->get_alignment();
			if (var0008) {
				set_item_flag(CHARMED);
			} else {
				clear_item_flag(CHARMED);
			}
		}
	}
}

extern var Func0951 0x951 ();

void Func065A object#(0x65A) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;
	var var0008;
	var var0009;
	var var000A;
	var var000B;
	var var000C;
	var var000D;
	var var000E;

	var0000 = AVATAR->get_object_position();
	var0001 = AVATAR->get_npc_object();
	if (event == DOUBLECLICK) {
		halt_scheduled();
		item_say("@In Vas Lor@");
		if (Func0951()) {
			var0002 = script item {
				nohalt;
				actor frame reach_2h;
				actor frame reach_1h;
				actor frame strike_2h;
				sfx 67;
				call Func065A;
			};
			var0001->obj_sprite_effect(ANIMATION_TELEPORT, -2, -2, 0, 0, 0, LOOP_ONCE);
		} else {
			var0002 = script item {
				nohalt;
				actor frame reach_2h;
				actor frame reach_1h;
				actor frame strike_2h;
				call Func0606;
			};
		}
	}
	if (event == SCRIPTED) {
		var0001->obj_sprite_effect(ANIMATION_TELEPORT, -2, -2, 0, 0, 0, LOOP_ONCE);
		var0003 = find_nearby(SHAPE_ANY, 0x0028, MASK_NPC2);
		var0004 = UI_get_party_list();
		var0005 = 0x000C;
		var0006 = get_item_flag(IN_PARTY);
		for (var0009 in var0003 with var0007 to var0008) {
			if ((!var0006) || (!(var0009 in var0004))) {
				var000A = 0x0000;
				var000B = "";
				while (var000A < var0005) {
					var000C = UI_die_roll(0x0000, 0x0008);
					if (var000C == 0x0000) {
						var000D = new script {
							actor frame kneeling;
							actor frame bowing;
							actor frame standing;
						};
						var000B = [var000B, var000D];
					}
					if (var000C == 0x0001) {
						var000D = new script {
							actor frame kneeling;
							actor frame standing;
							actor frame standing;
						};
						var000B = [var000B, var000D];
					}
					if (var000C == 0x0002) {
						var000D = new script {
							actor frame bowing;
							actor frame sleeping;
							actor frame standing;
						};
						var000B = [var000B, var000D];
					}
					if (var000C == 0x0003) {
						var000D = new script {
							actor frame standing;
							actor frame standing;
							actor frame standing;
						};
						var000B = [var000B, var000D];
					}
					if (var000C == 0x0004) {
						var000D = new script {
							actor frame kneeling;
							actor frame ready;
							actor frame standing;
						};
						var000B = [var000B, var000D];
					}
					if (var000C == 0x0005) {
						var000D = new script {
							actor frame ready;
							actor frame kneeling;
							actor frame standing;
						};
						var000B = [var000B, var000D];
					}
					if (var000C == 0x0006) {
						var000E = FACE_NORTH + (UI_die_roll(0x0000, 0x0003) * 0x0002);
						var000D = new script {
							face var000E;
							actor frame bowing;
							actor frame standing;
						};
						var000B = [var000B, var000D];
					}
					if (var000C == 0x0007) {
						var000E = FACE_NORTH + (UI_die_roll(0x0000, 0x0003) * 0x0002);
						var000D = new script {
							face var000E;
							actor frame kneeling;
							actor frame standing;
						};
						var000B = [var000B, var000D];
					}
					if (var000C == 0x0008) {
						var000E = FACE_NORTH + (UI_die_roll(0x0000, 0x0003) * 0x0002);
						var000D = new script {
							face var000E;
							actor frame ready;
							actor frame standing;
						};
						var000B = [var000B, var000D];
					}
					var000A += 0x0001;
				}
				var0009->halt_scheduled();
				var0002 = var0009->run_script(var000B);
			}
		}
	}
}

extern var Func0979 0x979 (var var0000);
extern var Func0951 0x951 ();

void Func065B object#(0x65B) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;

	if (event == DOUBLECLICK) {
		var0000 = UI_click_on_item();
		var0001 = var0000->get_item_shape();
		var0002 = var0000->get_item_frame();
		var0003 = Func0979(item);
		halt_scheduled();
		item_say("@An Mani Ex@");
		if (Func0951() && ((var0001 == 0x01BD) && (var0002 == 0x0000))) {
			var0004 = script item {
				nohalt;
				actor frame strike_1h;
				actor frame standing;
				actor frame strike_1h;
				actor frame standing;
				sfx 67;
			};
			var0004 = script var0000 after 6 ticks {
				nohalt;
				call Func065B;
			};
		} else {
			var0004 = script item {
				nohalt;
				actor frame strike_1h;
				actor frame standing;
				actor frame strike_1h;
				actor frame standing;
				call Func0606;
			};
		}
	}
	if (event == SCRIPTED) {
		var0005 = get_object_position();
		var0004 = set_last_created();
		set_item_frame(0x0001);
		clear_item_flag(TEMPORARY);
		var0004 = UI_update_last_created(var0005);
	}
}

extern var Func0951 0x951 ();
extern var Func0980 0x980 (var var0000);

void Func065C object#(0x65C) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;

	if (event == DOUBLECLICK) {
		halt_scheduled();
		item_say("@Vas Des Sanct@");
		if (Func0951()) {
			obj_sprite_effect(ANIMATION_TELEPORT, -2, -2, 0, 0, 0, LOOP_ONCE);
			var0000 = script item {
				nohalt;
				actor frame cast_up;
				sfx 20;
				actor frame cast_out;
				actor frame cast_up;
				actor frame strike_2h;
			};
			var0001 = 0x001E;
			var0002 = Func0980(var0001);
			var0003 = UI_get_party_list();
			var0003 &= AVATAR;
			for (var0006 in var0002 with var0004 to var0005) {
				if (!(var0006 in var0003)) {
					if (!(UI_die_roll(0x0001, 0x0003) == 0x0001)) {
						var0001 = get_distance(var0006);
						var0001 = (var0001 / 0x0003) + 0x0005;
						var0000 = script var0006 after var0001 ticks {
							nohalt;
							call Func065C;
						};
					}
				}
			}
		} else {
			var0000 = script item {
				nohalt;
				actor frame cast_up;
				actor frame cast_out;
				actor frame cast_up;
				actor frame strike_2h;
				call Func0606;
			};
		}
	}
	if (event == SCRIPTED) {
		set_item_flag(CURSED);
	}
}

extern var Func0951 0x951 ();

void Func065D object#(0x65D) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;
	var var0008;
	var var0009;
	var var000A;
	var var000B;
	var var000C;
	var var000D;
	var var000E;
	var var000F;

	if (event == DOUBLECLICK) {
		halt_scheduled();
		var0000 = AVATAR->get_object_position();
		var0001 = [];
		item_say("@Wis Quas@");
		if (Func0951()) {
			var0002 = script item {
				nohalt;
				sfx 130;
				actor frame raise_1h;
				actor frame reach_1h;
				actor frame strike_1h;
			};
			var0003 = get_object_position();
			var0004 = [-15, -15, -15, -5, -5, -5,  5,  5,  5, 15, 15, 15];
			var0005 = [ -7,   2,  11, -7,  2, 11, -7,  2, 11, -7,  2, 11];
			var0006 = 0x0007;
			var0007 = 0x0000;
			while (var0007 != 0x000C) {
				var0007 += 0x0001;
				var0008 = var0000[0x0001] + var0004[var0007];
				var0009 = var0000[0x0002] + var0005[var0007];
				var0003 = [var0008, var0009, 0x0000];
				var000A = var0003->find_nearby(SHAPE_ANY, var0006, MASK_INVISIBLE);
				for (var000D in var000A with var000B to var000C) {
					if (var000D->get_item_flag(INVISIBLE) && (!(var000D in var0001))) {
						var0001 &= var000D;
					}
				}
			}
			if (var0001) {
				for (var000D in var0001 with var000E to var000F) {
					var0002 = script var000D after 5 ticks {
						nohalt;
						call Func065D;
					};
					var000D->obj_sprite_effect(ANIMATION_GREEN_BUBBLES, -1, -1, 0, 0, 0, LOOP_ONCE);
				}
			} else {
				obj_sprite_effect(ANIMATION_GREEN_BUBBLES, -1, -1, 0, 0, 0, LOOP_ONCE);
			}
		} else {
			var0002 = script item {
				nohalt;
				actor frame raise_1h;
				actor frame reach_1h;
				actor frame strike_1h;
				call Func0606;
			};
		}
	}
	if (event == SCRIPTED) {
		clear_item_flag(INVISIBLE);
	}
}

extern var Func0979 0x979 (var var0000);
extern var Func0951 0x951 ();

void Func065E object#(0x65E) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;

	if (event == DOUBLECLICK) {
		var0000 = UI_click_on_item();
		var0001 = var0000->get_item_shape();
		var0002 = Func0979(item);
		halt_scheduled();
		var0003 = PARTY->find_object(0x02F9, QUALITY_ANY, FRAME_ANY);
		item_say("@Rel Ort Wis@");
		if (Func0951() && ((var0001 == 0x02CB) && var0003)) {
			var0004 = script item {
				nohalt;
				face var0002;
				sfx 67;
			};
			var0004 = script var0000[0x0001] after 4 ticks {
				remove;
			};
			var0005 = var0000->get_item_quality();
			var0004 = UI_add_spell(var0005, 0x0000, var0003);
		} else {
			var0004 = script item {
				nohalt;
				face var0002;
				call Func0606;
			};
		}
	}
}

extern var Func0979 0x979 (var var0000);
extern var Func0951 0x951 ();
extern void Func091D 0x91D ();

void Func065F object#(0x65F) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;

	if (event == DOUBLECLICK) {
		var0000 = UI_click_on_item();
		var0001 = var0000->get_item_shape();
		var0002 = Func0979(item);
		halt_scheduled();
		var0003 = [0x010E, 0x0178, 0x01B0, 0x01B1, 0x034D, 0x033C];
		var0004 = [0x01B0, 0x01B1, 0x010E, 0x0178];
		item_say("@Ex Por@");
		do {
			if (Func0951()) {
				if (var0001 in var0003) {
					var0005 = var0000->get_item_frame();
					if (((var0005 + 0x0001) % 0x0004) == 0x0000) {
						var0006 = script item {
							nohalt;
							face var0002;
							actor frame reach_1h;
							actor frame raise_1h;
							actor frame strike_1h;
							sfx 67;
						};
						var0006 = script var0000 after 6 ticks {
							nohalt;
							call Func065F;
						};
						break;
					}
				}
			}
		} while (false)
		nobreak {
			var0006 = script item {
				nohalt;
				face var0002;
				actor frame reach_1h;
				actor frame raise_1h;
				actor frame strike_1h;
				call Func0606;
			};
		}
	}
	if (event == SCRIPTED) {
		var0005 = get_item_frame();
		var0007 = var0005 - 0x0003;
		set_item_frame(var0007);
		Func091D();
	}
}

extern var Func0951 0x951 ();
extern var Func0941 0x941 (var var0000);

void Func0660 object#(0x660) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;
	var var0008;

	if (event == DOUBLECLICK) {
		halt_scheduled();
		item_say("@Kal Xen@");
		if (Func0951()) {
			var0000 = script item {
				nohalt;
				sfx 20;
				actor frame raise_1h;
				actor frame reach_1h;
				actor frame strike_1h;
				call Func0660;
			};
		} else {
			var0000 = script item {
				nohalt;
				actor frame raise_1h;
				actor frame reach_1h;
				actor frame strike_1h;
				call Func0606;
			};
		}
	}
	if (event == SCRIPTED) {
		var0001 = [0x02CC, 0x032B, 0x020B, 0x01FE, 0x01F6, 0x0219, 0x012E];
		var0002 = UI_get_array_size(var0001);
		var0003 = Func0941(AVATAR);
		if (var0003 > var0002) {
			var0003 = var0002;
		}
		if (var0003 < 0x0002) {
			var0003 = 0x0002;
		}
		var0004 = var0003 / 0x0002;
		if (var0004 < 0x0001) {
			var0004 = 0x0001;
		}
		var0005 = UI_die_roll(var0004, var0003);
		while (var0005 > 0x0000) {
			var0005 -= 0x0001;
			var0006 = UI_die_roll(var0004, var0003);
			var0007 = var0001[var0006];
			var0008 = UI_summon(var0007, false);
		}
	}
}

extern var Func0979 0x979 (var var0000);
extern var Func0951 0x951 ();

void Func0661 object#(0x661) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;

	if (event == DOUBLECLICK) {
		var0000 = UI_click_on_item();
		var0001 = Func0979(var0000);
		halt_scheduled();
		var0002 = [0x0300, 0x037F, 0x0231, 0x0384, 0x0386];
		item_say("@An Grav@");
		if (Func0951()) {
			var0003 = script item {
				nohalt;
				sfx 20;
				face var0001;
				actor frame cast_up;
				actor frame cast_out;
				actor frame strike_2h;
			};
			for (var0006 in var0002 with var0004 to var0005) {
				if (var0006 == var0000->get_item_shape()) {
					var0003 = var0000->set_last_created();
					if (var0003) {
						var0003 = UI_update_last_created(FLAG_DESTROY);
						var0000->halt_scheduled();
					}
				}
			}
		} else {
			var0003 = script item {
				nohalt;
				face var0001;
				actor frame cast_up;
				actor frame cast_out;
				actor frame strike_2h;
				call Func0606;
			};
		}
	}
}

extern var Func0979 0x979 (var var0000);
extern var Func0951 0x951 ();

void Func0662 object#(0x662) () {
	var var0000;
	var var0001;
	var var0002;

	if ((event == DOUBLECLICK) || (event == WEAPON)) {
		var0000 = UI_click_on_item();
		halt_scheduled();
		var0001 = Func0979(var0000);
		item_say("@Vas Frio Hur@");
		if (Func0951()) {
			var0002 = set_to_attack(var0000, 0x0020);
			var0002 = script item {
				nohalt;
				face var0001;
				sfx 20;
				actor frame cast_up;
				actor frame cast_out;
				actor frame strike_1h;
				actor frame strike_1h;
				attack;
				actor frame standing;
			};
		} else {
			var0002 = script item {
				nohalt;
				face var0001;
				actor frame cast_up;
				actor frame cast_out;
				actor frame strike_1h;
				call Func0606;
			};
		}
	}
}

extern var Func0979 0x979 (var var0000);
extern var Func0951 0x951 ();

void Func0663 object#(0x663) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;

	if (event == DOUBLECLICK) {
		var0000 = UI_click_on_item();
		var0000->halt_scheduled();
		var0001 = Func0979(var0000);
		item_say("@Vas Mani@");
		if (Func0951()) {
			var0002 = script item {
				nohalt;
				face var0001;
				actor frame reach_1h;
				actor frame raise_1h;
				actor frame strike_1h;
				sfx 64;
			};
			if (var0000->is_npc()) {
				var0003 = var0000->get_npc_prop(STRENGTH);
				var0004 = var0000->get_npc_prop(HEALTH);
				var0005 = var0000->set_npc_prop(HEALTH, var0003 - var0004);
			}
		} else {
			var0002 = script item {
				nohalt;
				face var0001;
				actor frame reach_1h;
				actor frame raise_1h;
				actor frame strike_1h;
				call Func0606;
			};
		}
	}
}

extern var Func0979 0x979 (var var0000);
extern var Func0951 0x951 ();

void Func0664 object#(0x664) () {
	var var0000;
	var var0001;
	var var0002;

	if (event == DOUBLECLICK) {
		var0000 = UI_click_on_item();
		halt_scheduled();
		var0001 = Func0979(var0000);
		item_say("@Sanct Lor@");
		if (Func0951()) {
			var0002 = script item {
				nohalt;
				face var0001;
				sfx 130;
				actor frame cast_up;
				actor frame cast_out;
				actor frame strike_2h;
			};
			var0002 = script var0000 after 4 ticks {
				nohalt;
				call Func0664;
			};
		} else {
			var0002 = script item {
				nohalt;
				face var0001;
				actor frame cast_up;
				actor frame cast_out;
				actor frame strike_2h;
				call Func0606;
			};
		}
	}
	if (event == SCRIPTED) {
		set_item_flag(INVISIBLE);
	}
}

extern var Func0951 0x951 ();

void Func0665 object#(0x665) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;

	if (event == DOUBLECLICK) {
		halt_scheduled();
		item_say("@Vas Zu@");
		if (Func0951()) {
			obj_sprite_effect(ANIMATION_TELEPORT, -2, -2, 0, 0, 0, LOOP_ONCE);
			var0000 = script item {
				nohalt;
				sfx 20;
				actor frame standing;
				actor frame raise_1h;
				actor frame cast_up;
				actor frame strike_1h;
				actor frame strike_2h;
				call Func0665;
			};
		} else {
			var0000 = script item {
				nohalt;
				actor frame standing;
				actor frame raise_1h;
				actor frame cast_up;
				actor frame strike_1h;
				actor frame strike_2h;
				call Func0606;
			};
		}
	}
	if (event == SCRIPTED) {
		var0001 = 0x0019;
		var0002 = find_nearby(ANY_SHAPE, var0001, MASK_NPC);
		var0003 = UI_get_party_list();
		for (var0006 in var0002 with var0004 to var0005) {
			if (!(var0006 in var0003)) {
				var0006->halt_scheduled();
				var0006->set_item_flag(ASLEEP);
			}
		}
	}
}

extern var Func0979 0x979 (var var0000);
extern var Func0951 0x951 ();
extern var Func097D 0x97D (var var0000, var var0001, var var0002, var var0003, var var0004);

void Func0666 object#(0x666) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;
	var var0008;
	var var0009;
	var var000A;
	var var000B;
	var var000C;
	var var000D;
	var var000E;
	var var000F;
	var var0010;
	var var0011;
	var var0012;
	var var0013;
	var var0014;
	var var0015;
	var var0016;
	var var0017;

	if (event == DOUBLECLICK) {
		var0000 = true;
		var0001 = 0x0000;
		var0002 = AVATAR->get_object_position();
		var0003 = var0002[0x0001];
		var0004 = var0002[0x0002];
		var0005 = 0x0000;
		var0006 = 0x0000;
		var0007 = Func0979(item);
		halt_scheduled();
		item_say("@Kal Wis Corp@");
		do {
			if (Func0951()) {
				var0008 = script item {
					nohalt;
					face var0007;
					sfx 67;
				};
				var0005 = 0x0000;
				var0006 = 0x0000;
				var0009 = find_nearby(0x01FB, 0x000F, MASK_ALL_UNSEEN);
				for (var000C in var0009 with var000A to var000B) {
					if (var000C->get_item_quality() == 0x000D) {
						var0001 = var000C;
					}
				}
				if ((0x0927 < var0003) && (var0003 < 0x0947)) {
					var0005 = 0x0001;
				}
				if ((0x012B < var0004) && (var0004 < 0x013F)) {
					var0006 = 0x0001;
				}
				var000D = Func097D(PARTY, 0x0001, 0x00D1, QUALITY_ANY, 0x0009);
				if ((var0005 == 0x0001) && ((var0006 == 0x0001) && ((var000D == true) && (var0001 != 0x0000)))) {
					var0008 = var0001->set_item_quality(0x0000);
					var000E = var0001->get_object_position();
					var000F = UI_create_new_object2(0x0355, var000E);
					var000F->set_schedule_type(TALK);
					var0000 = false;
				}
				var0005 = 0x0000;
				var0006 = 0x0000;
				if ((0x0B45 < var0003) && (var0003 < 0x0B53)) {
					var0005 = 0x0001;
				}
				if ((0x07C6 < var0004) && (var0004 < 0x07D5)) {
					var0006 = 0x0001;
				}
				var0010 = Func097D(PARTY, 0x0001, 0x0280, QUALITY_ANY, 0x0000);
				var0011 = Func097D(PARTY, 0x0001, 0x027E, QUALITY_ANY, 0x0000);
				var0012 = Func097D(PARTY, 0x0001, 0x03EC, QUALITY_ANY, 0x0002);
				var000D = false;
				if ((var0010 == true) || ((var0011 == true) || (var0012 == true))) {
					var000D = true;
				}
				var0013 = find_nearby(0x00F3, 0x000F, MASK_ALL_UNSEEN);
				for (var0016 in var0013 with var0014 to var0015) {
					if (var0016->get_item_quality() == 0x0001) {
						var0017 = true;
					}
				}
				if ((var0005 == 0x0001) && ((var0006 == 0x0001) && ((var000D != false) && (var0017 == true)))) {
					var0016->set_item_frame(0x0005);
					var000E = [0x0B4D, 0x07D0, 0x0005];
					var000F = UI_create_new_object2(0x0175, var000E);
					var000F->set_npc_id(0x0001);
					var000F->set_schedule_type(TALK);
					var0000 = false;
				}
				if (var0000 != true) {
					break;
				}
			}
			var0008 = script item {
				nohalt;
				face var0007;
				call Func0606;
			};
		} while (false);
	}
}

extern var Func0951 0x951 ();

void Func0667 object#(0x667) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;

	if (event == DOUBLECLICK) {
		halt_scheduled();
		item_say("@Ex Por@");
		if (Func0951()) {
			var0000 = script item {
				nohalt;
				actor frame strike_2h;
				actor frame strike_1h;
				actor frame reach_2h;
				sfx 20;
				wait 5;
				call Func0667;
			};
			var0001 = find_nearby(SHAPE_ANY, 0x001E, MASK_NPC2);
			var0002 = UI_get_party_list();
			for (var0005 in var0001 with var0003 to var0004) {
				if (!(var0005 in var0002)) {
					var0006 = get_distance(var0005) + 0x000F;
					var0000 = script var0005 after var0006 ticks {
						nohalt;
						call Func0667;
					};
				}
			}
		} else {
			var0000 = script item {
				nohalt;
				actor frame strike_2h;
				actor frame strike_1h;
				actor frame reach_2h;
				call Func0606;
			};
		}
	}
	if (event == SCRIPTED) {
		if (item == AVATAR->get_npc_object()) {
			obj_sprite_effect(ANIMATION_CLOUDS,  0,  0, -3, -3,  4, 0x0019);
			obj_sprite_effect(ANIMATION_CLOUDS,  0,  0,  0, -4,  4, 0x0019);
			obj_sprite_effect(ANIMATION_CLOUDS,  0,  0,  3, -3,  3, 0x0019);
			obj_sprite_effect(ANIMATION_CLOUDS,  0,  0, -4,  0,  2, 0x0019);
			obj_sprite_effect(ANIMATION_CLOUDS,  0,  0,  4,  0,  1, 0x0019);
			obj_sprite_effect(ANIMATION_CLOUDS,  0,  0, -3,  3,  3, 0x0019);
			obj_sprite_effect(ANIMATION_CLOUDS,  0,  0,  0,  4,  1, 0x0019);
			obj_sprite_effect(ANIMATION_CLOUDS,  0,  0,  3,  3,  1, 0x0019);
		} else {
			var0007 = UI_die_roll(0x0001, 0x0003);
			if (var0007 == 0x0001) {
				set_schedule_type(IN_COMBAT);
				set_attack_mode(FLEE);
				set_oppressor(AVATAR);
			}
			if (var0007 == 0x0002) {
				halt_scheduled();
				set_item_flag(ASLEEP);
			}
			if (var0007 == 0x0003) {
				halt_scheduled();
				set_item_flag(POISONED);
			}
		}
	}
}

extern var Func0979 0x979 (var var0000);
extern var Func0951 0x951 ();

void Func0668 object#(0x668) () {
	var var0000;
	var var0001;
	var var0002;

	if (event == DOUBLECLICK) {
		var0000 = UI_click_on_item();
		var0001 = Func0979(var0000);
		halt_scheduled();
		item_say("@An Xen Ex@");
		if (Func0951()) {
			var0002 = set_to_attack(var0000, 0x001F);
			var0002 = script item {
				nohalt;
				face var0001;
				sfx 57;
				actor frame raise_1h;
				actor frame cast_out;
				actor frame strike_2h;
				attack;
			};
		} else {
			var0002 = script item {
				nohalt;
				face var0001;
				actor frame raise_1h;
				actor frame cast_out;
				actor frame strike_2h;
				call Func0606;
			};
		}
	}
}

extern var Func0951 0x951 ();

void Func0669 object#(0x669) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;

	if (event == DOUBLECLICK) {
		halt_scheduled();
		item_say("@An Quas@");
		if (Func0951()) {
			var0000 = script item {
				nohalt;
				actor frame strike_1h;
				actor frame strike_2h;
				sfx 67;
			};
			var0001 = find_nearby(0x0097, 0x0019, MASK_ALL_UNSEEN);
			var0001 &= find_nearby(0x0098, 0x0019, MASK_ALL_UNSEEN);
			var0001 &= find_nearby(0x0212, 0x0019, MASK_ALL_UNSEEN);
			if (var0001) {
				for (var0004 in var0001 with var0002 to var0003) {
					var0000 = script var0004 after 6 ticks {
						nohalt;
						call Func0669;
					};
				}
			}
		} else {
			var0000 = script item {
				nohalt;
				actor frame strike_1h;
				actor frame strike_2h;
				call Func0606;
			};
		}
	}
	if (event == SCRIPTED) {
		var0005 = [0x0212];
		var0006 = get_item_shape();
		if (var0006 in var0005) {
			if (get_item_flag(SI_ZOMBIE)) {
				var0000 = script item after 6 ticks {
					nohalt;
					remove;
				};
				obj_sprite_effect(ANIMATION_PURPLE_BUBBLES, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, LOOP_ONCE);
			}
		} else {
			var0000 = script item after 6 ticks {
				nohalt;
				remove;
			};
			obj_sprite_effect(ANIMATION_PURPLE_BUBBLES, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, LOOP_ONCE);
		}
	}
}

extern var Func0951 0x951 ();

void Func066A object#(0x66A) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;

	if (event == DOUBLECLICK) {
		halt_scheduled();
		item_say("@Quas Wis@");
		if (Func0951()) {
			var0000 = script item {
				nohalt;
				sfx 20;
				actor frame kneeling;
				actor frame standing;
				actor frame reach_1h;
				actor frame raise_1h;
				actor frame strike_1h;
				call Func066A;
			};
		} else {
			var0000 = script item {
				nohalt;
				actor frame kneeling;
				actor frame standing;
				actor frame reach_1h;
				actor frame raise_1h;
				actor frame strike_1h;
				call Func0606;
			};
		}
	}
	if (event == SCRIPTED) {
		var0001 = find_nearby(SHAPE_ANY, 0x0019, MASK_NPC2);
		var0002 = UI_get_party_list();
		for (var0005 in var0001 with var0003 to var0004) {
			if (!(var0005 in var0002)) {
				if (var0005->get_npc_prop(INTELLIGENCE) > 0x0005) {
					var0005->set_schedule_type(IN_COMBAT);
					var0005->set_attack_mode(FLEE);
					var0005->set_oppressor(UI_get_avatar_ref());
				}
			}
		}
	}
}

extern var Func0979 0x979 (var var0000);
extern var Func0951 0x951 ();

void Func066B object#(0x66B) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;
	var var0008;
	var var0009;

	if (event == DOUBLECLICK) {
		var0000 = UI_click_on_item();
		var0001 = Func0979(var0000);
		halt_scheduled();
		item_say("@In Frio Grav@");
		if (Func0951()) {
			var0002 = script item {
				nohalt;
				sfx 20;
				face var0001;
				actor frame raise_1h;
				actor frame reach_1h;
				actor frame strike_1h;
			};
			var0003 = UI_create_new_object(0x0231);
			if (var0003) {
				var0004 = var0000[0x0002] + 0x0001;
				var0005 = var0000[0x0003] + 0x0001;
				var0006 = var0000[0x0004];
				var0007 = [var0004, var0005, var0006];
				var0008 = UI_update_last_created(var0007);
				if (var0008) {
					var0009 = 0x0064;
					var0008 = var0003->set_item_quality(var0009);
					var0003->set_item_flag(TEMPORARY);
					var0008 = script var0003 after var0009 ticks remove;;
				}
			}
		} else {
			var0002 = script item {
				nohalt;
				face var0001;
				actor frame raise_1h;
				actor frame reach_1h;
				actor frame strike_1h;
				call Func0606;
			};
		}
	}
}

extern var Func0979 0x979 (var var0000);
extern var Func0951 0x951 ();

void Func066C object#(0x66C) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;
	var var0008;
	var var0009;
	var var000A;
	var var000B;
	var var000C;
	var var000D;

	if (event == DOUBLECLICK) {
		var0000 = UI_click_on_item();
		halt_scheduled();
		var0001 = Func0979(var0000);
		item_say("@Kal Frio Grav@");
		if (Func0951()) {
			var0002 = script item {
				nohalt;
				face var0001;
				sfx 20;
				actor frame reach_1h;
				actor frame strike_1h;
				actor frame raise_1h;
			};
			var0003 = [-1,  0,  1,  2,  2,  2,  1,  0, -1, -2, -2, -2];
			var0004 = [-2, -2, -2, -1,  0,  1,  2,  2,  2,  1,  0, -1];
			var0005 = 0;
			while (var0005 < 0x000C) {
				var0005 += 0x0001;
				var0006 = var0000[0x0002] + var0003[var0005];
				var0007 = var0000[0x0003] + var0004[var0005];
				var0008 = var0000[0x0004];
				var0009 = [var0006, var0007, var0008];
				var000A = [var0006, var0007, (var0008 + 0x0001)];
				if (!UI_is_not_blocked(var0009, 0x026D, 0x0000)) {
					var0009 = var000A;
				}
				if (UI_is_not_blocked(var0009, 0x026D, 0x0000)) {
					var000B = UI_create_new_object(0x026D);
					if (var000B) {
						var000B->set_item_flag(TEMPORARY);
						var000B->set_item_flag(INVISIBLE);
						var0002 = UI_update_last_created(var0009);
						if (var0002) {
							var0002 = var000B->set_npc_prop(HEALTH, 1);
							var0002 = script var000B after var0005 ticks {
								nohalt;
								call Func066C;
							};
						}
					}
				}
			}
		} else {
			var000C = script item {
				nohalt;
				face var0001;
				actor frame reach_1h;
				actor frame strike_1h;
				actor frame raise_1h;
				call Func0606;
			};
		}
	}
	if (event == SCRIPTED) {
		var0009 = get_object_position();
		var0002 = set_last_created();
		if (var0002) {
			var0002 = UI_update_last_created(FLAG_DESTROY);
		}
		var000B = UI_create_new_object(0x0231);
		if (var000B) {
			var000B->set_item_flag(TEMPORARY);
			var0002 = UI_update_last_created(var0009);
			if (var0002) {
				var000D = 0x001E;
				var000D += UI_die_roll(0x0001, 0x0005);
				var0002 = script var000B after var000D ticks {
					nohalt;
					remove;
				};
			}
		}
	}
}

extern var Func0980 0x980 (var var0000);
extern var Func0951 0x951 ();

void Func066D object#(0x66D) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;
	var var0008;
	var var0009;
	var var000A;
	var var000B;
	var var000C;
	var var000D;

	if (event == DOUBLECLICK) {
		var0000 = 0x0019;
		halt_scheduled();
		var0001 = Func0980(var0000);
		item_say("@Vas In Frio Grav@");
		if (Func0951()) {
			var0002 = script item {
				nohalt;
				sfx 20;
				actor frame bowing;
				actor frame kneeling;
				actor frame bowing;
				actor frame cast_out;
				actor frame strike_2h;
			};
			for (var0005 in var0001 with var0003 to var0004) {
				var0006 = var0005->get_object_position();
				var0007 = var0006[0x0001];
				var0008 = var0006[0x0002];
				var0009 = var0006[0x0003];
				var000A = [var0007, var0008, 0x0000];
				var000B = UI_create_new_object(0x0231);
				if (var000B) {
					var0002 = UI_update_last_created(var000A);
					if (var0002) {
						var000C = UI_die_roll(0x0001, 0x000F);
						var000D = 0x001E + var000C;
						var0002 = var000B->set_item_quality(var000D);
						var000B->set_item_flag(TEMPORARY);
						var0002 = script var000B after var000D ticks {
							nohalt;
							remove;
						};
					}
				}
			}
		} else {
			var0002 = script item {
				nohalt;
				actor frame bowing;
				actor frame kneeling;
				actor frame bowing;
				actor frame cast_out;
				actor frame strike_2h;
				call Func0606;
			};
		}
	}
}

extern var Func0951 0x951 ();
extern var Func09A0 0x9A0 (var var0000, var var0001);
extern var Func0941 0x941 (var var0000);

void Func066E object#(0x66E) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;
	var var0008;

	if (event == DOUBLECLICK) {
		halt_scheduled();
		item_say("@In Hur Sanct@");
		if (Func0951()) {
			var0000 = script item {
				nohalt;
				actor frame bowing;
				actor frame cast_out;
				actor frame bowing;
				actor frame cast_out;
				sfx 67;
			};
			var0001 = Func09A0(0x0000, 0x0004);
			var0000 = script var0001 after 10 ticks {
				nohalt;
				call Func066E;
			};
		} else {
			var0000 = script item {
				nohalt;
				actor frame bowing;
				actor frame cast_out;
				actor frame bowing;
				actor frame cast_out;
				call Func0606;
			};
		}
	}
	if (event == SCRIPTED) {
		var0002 = PARTY->count_objects(0x0255, QUALITY_ANY, FRAME_ANY);
		var0003 = PARTY->count_objects(0x025E, QUALITY_ANY, FRAME_ANY);
		var0004 = PARTY->count_objects(0x0256, QUALITY_ANY, FRAME_ANY);
		var0002 += var0003;
		var0005 = 0x02D2;
		if (var0004 > var0002) {
			var0005 = 0x02D3;
		}
		var0001 = UI_create_new_object(var0005);
		if (var0001) {
			var0006 = AVATAR->get_object_position();
			var0007 = Func0941(AVATAR) * 0x0008;
			var0008 = UI_die_roll(var0007, (var0007 + 0x0014));
			if (var0008 > 0x0063) {
				var0008 = 0x0063;
			}
			var0001->set_item_flag(TEMPORARY);
			var0000 = var0001->set_item_quantity(var0008);
			var0000 = UI_update_last_created(var0006);
		}
	}
}

extern var Func0979 0x979 (var var0000);
extern var Func0951 0x951 ();
extern void Func09AC 0x9AC (var var0000, var var0001, var var0002, var var0003);

void Func066F object#(0x66F) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;

	if (event == DOUBLECLICK) {
		var0000 = UI_click_on_item();
		var0001 = var0000->get_item_shape();
		var0002 = var0000->get_item_frame();
		var0003 = var0000->get_object_position();
		var0004 = Func0979(item);
		halt_scheduled();
		item_say("@In Ort Xen@");
		if (Func0951()) {
			if (((var0001 == 0x02FA) && ((var0002 == 0x001B) || (var0002 == 0x001C))) || ((var0001 == 0x0190) && (var0002 == 0x001E))) {
				var0005 = script item {
					nohalt;
					face var0004;
					actor frame raise_2h;
					actor frame standing;
					actor frame raise_1h;
					actor frame kneeling;
					actor frame standing;
					sfx 67;
				};
				var0000[0x0001]->obj_sprite_effect(ANIMATION_GREEN_BUBBLES, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, LOOP_ONCE);
				var0005 = var0000->get_body_npc();
				if (var0005 != DUPRE) {
					var0006 = var0000->resurrect();
					if (var0006) {
						var0007 = AVATAR->get_object_position();
						Func09AC(var0005, var0007[0x0001], var0007[0x0002], WANDER);
						var0005->set_alignment(NEUTRAL);
						var0005->set_item_flag(SI_ZOMBIE);
					} else {
						var0005 = script item {
							nohalt;
							face var0004;
							actor frame raise_2h;
							actor frame standing;
							actor frame raise_1h;
							actor frame kneeling;
							actor frame standing;
							call Func0606;
						};
					}
				} else {
					var0005 = script item {
						nohalt;
						face var0004;
						actor frame raise_2h;
						actor frame standing;
						actor frame raise_1h;
						actor frame kneeling;
						actor frame standing;
						call Func0606;
					};
				}
			}
		}
	}
}

extern var Func0951 0x951 ();

void Func0670 object#(0x670) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;
	var var0008;
	var var0009;
	var var000A;

	var0000 = false;
	if (event == DOUBLECLICK) {
		halt_scheduled();
		var0001 = UI_click_on_item();
		item_say("@In Sanct Grav@");
		var0002 = var0001[0x0002] + 0x0001;
		var0003 = var0001[0x0003] + 0x0001;
		var0004 = var0001[0x0004];
		var0005 = [var0002, var0003, var0004];
		var0006 = UI_is_not_blocked(var0005, 0x0300, 0x0000);
		if (Func0951() && var0006) {
			var0007 = script item {
				nohalt;
				actor frame raise_1h;
				actor frame reach_1h;
				actor frame strike_1h;
			};
			var0008 = UI_create_new_object(0x0300);
			if (var0008) {
				var0009 = UI_update_last_created(var0005);
				if (var0009) {
					var0008->set_item_flag(TEMPORARY);
					var000A = 0x00C8;
					var0009 = var0008->set_item_quality(var000A);
					var0009 = script var0008 after var000A ticks remove;;
				} else {
					var0000 = true;
				}
			} else {
				var0000 = true;
			}
		} else {
			var0000 = true;
		}
		// This should probably be var0000 == true
		if (0x0606 == true) {
			// Dead code
			var0007 = script item {
				nohalt;
				actor frame raise_1h;
				actor frame reach_1h;
				actor frame strike_1h;
				call Func0606;
			};
		}
	}
}

extern var Func0979 0x979 (var var0000);
extern var Func0951 0x951 ();

void Func0671 object#(0x671) () {
	var var0000;
	var var0001;
	var var0002;

	if (event == DOUBLECLICK) {
		halt_scheduled();
		var0000 = UI_click_on_item();
		var0001 = Func0979(var0000);
		item_say("@In Hur Grav Ylem@");
		if (Func0951()) {
			var0002 = set_to_attack(var0000, 0x018F);
			var0002 = script item {
				nohalt;
				face var0001;
				sfx 20;
				actor frame cast_up;
				actor frame cast_out;
				actor frame cast_up;
				actor frame strike_2h;
				attack;
			};
		} else {
			var0002 = script item {
				nohalt;
				face var0001;
				actor frame cast_up;
				actor frame cast_out;
				actor frame cast_up;
				actor frame strike_2h;
				call Func0606;
			};
		}
	}
}

extern var Func0951 0x951 ();

void Func0672 object#(0x672) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;

	if (event == DOUBLECLICK) {
		var0000 = get_object_position();
		halt_scheduled();
		item_say("@Vas An Zu@");
		if (Func0951()) {
			obj_sprite_effect(ANIMATION_TELEPORT, -2, -2, 0, 0, 0, LOOP_ONCE);
			var0001 = script item {
				nohalt;
				sfx 57;
				actor frame raise_1h;
				actor frame strike_1h;
			};
			var0002 = 0x0019;
			var0003 = find_nearby(ANY_SHAPE, var0002, MASK_NPC);
			for (var0006 in var0003 with var0004 to var0005) {
				var0001 = script var0006 {
					nohalt;
					call Func0672;
				};
			}
		} else {
			var0001 = script item {
				nohalt;
				actor frame raise_1h;
				actor frame strike_1h;
				call Func0606;
			};
		}
	}
	if (event == SCRIPTED) {
		halt_scheduled();
		clear_item_flag(ASLEEP);
	}
}

extern var Func0951 0x951 ();

void Func0673 object#(0x673) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;

	if (event == DOUBLECLICK) {
		halt_scheduled();
		item_say("@In Vas Por@");
		if (Func0951()) {
			var0000 = script item {
				nohalt;
				actor frame cast_up;
				sfx 64;
				actor frame cast_out;
				actor frame cast_up;
				actor frame strike_2h;
				call Func0673;
			};
			obj_sprite_effect(ANIMATION_TELEPORT, -2, -2, 0, 0, 0, LOOP_ONCE);
			var0001 = UI_get_party_list();
			for (var0004 in var0001 with var0002 to var0003) {
				var0005 = get_distance(var0004);
				var0005 = (var0005 / 0x0003) + 0x0005;
				var0000 = script var0004 after var0005 ticks {
					nohalt;
					call Func0673;
				};
			}
		} else {
			var0000 = script item {
				nohalt;
				actor frame cast_up;
				actor frame cast_out;
				actor frame cast_up;
				actor frame strike_2h;
				call Func0606;
			};
		}
	}
	if (event == SCRIPTED) {
		set_item_flag(MIGHT);
	}
}

extern var Func0979 0x979 (var var0000);
extern var Func0951 0x951 ();

void Func0674 object#(0x674) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;
	var var0008;

	if (event == DOUBLECLICK) {
		var0000 = UI_click_on_item();
		halt_scheduled();
		var0001 = Func0979(var0000);
		item_say("@In Hur Nox@");
		if (Func0951()) {
			var0002 = script item {
				nohalt;
				face var0001;
				sfx 91;
				actor frame raise_1h;
				actor frame reach_1h;
				actor frame strike_1h;
			};
			var0003 = UI_create_new_object(0x0384);
			if (var0003) {
				var0004 = var0000[0x0002] + 0x0001;
				var0005 = var0000[0x0003] + 0x0001;
				var0006 = var0000[0x0004];
				var0007 = [var0004, var0005, var0006];
				var0003->set_item_flag(TEMPORARY);
				var0002 = UI_update_last_created(var0007);
			}
		} else {
			var0008 = script item {
				nohalt;
				face var0001;
				actor frame raise_1h;
				actor frame reach_1h;
				actor frame strike_1h;
				call Func0606;
			};
		}
	}
}

extern var Func0951 0x951 ();

void Func0675 object#(0x675) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;

	if (event == DOUBLECLICK) {
		halt_scheduled();
		item_say("@Vas Mani@");
		if (Func0951()) {
			var0000 = script item {
				nohalt;
				actor frame raise_1h;
				actor frame cast_out;
				actor frame strike_2h;
				sfx 64;
			};
			var0001 = UI_get_party_list2();
			for (var0004 in var0001 with var0002 to var0003) {
				var0004->obj_sprite_effect(ANIMATION_GREEN_BUBBLES, -1, -1, 0, 0, 0, LOOP_ONCE);
				var0004->clear_item_flag(PARALYZED);
				var0004->clear_item_flag(POISONED);
				var0004->clear_item_flag(ASLEEP);
				var0005 = var0004->get_npc_prop(STRENGTH);
				var0006 = var0004->get_npc_prop(HEALTH);
				if (var0006 < 1) {
					var0000 = var0004->set_npc_prop(HEALTH, var0005);
				}
				var0006 = var0004->get_npc_prop(HEALTH);
				if (var0006 < 0) {
					var0006 = 1;
				}
				var0000 = var0004->set_npc_prop(HEALTH, var0005 - var0006);
			}
		} else {
			var0000 = script item {
				nohalt;
				actor frame raise_1h;
				actor frame cast_out;
				actor frame strike_2h;
				call Func0606;
			};
		}
	}
}

extern var Func0979 0x979 (var var0000);
extern var Func0951 0x951 ();

void Func0676 object#(0x676) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;

	if (event == DOUBLECLICK) {
		var0000 = UI_click_on_item();
		var0001 = var0000->get_item_shape();
		var0002 = Func0979(item);
		halt_scheduled();
		item_say("@Ex Por@");
		if (Func0951() && (var0000->is_npc() && ((var0000[0x0001] != 0x0000) && (var0001 != 0x02D1)))) {
			var0003 = script item {
				nohalt;
				face var0002;
				actor frame raise_2h;
				actor frame reach_2h;
				actor frame raise_1h;
				actor frame reach_1h;
				actor frame strike_2h;
				sfx 67;
			};
			var0003 = script var0000 after 10 ticks {
				nohalt;
				call Func0676;
			};
		} else {
			var0003 = script item {
				nohalt;
				face var0002;
				actor frame raise_2h;
				actor frame reach_2h;
				actor frame raise_1h;
				actor frame reach_1h;
				actor frame strike_2h;
				call Func0606;
			};
		}
	}
	if (event == SCRIPTED) {
		var0004 = get_cont_items(SHAPE_ANY, QUALITY_ANY, FRAME_ANY);
		if (UI_get_array_size(var0004)) {
			var0005 = var0004[0x0001]->set_last_created();
			if (var0005) {
				var0006 = get_object_position();
				var0003 = UI_update_last_created(var0006);
				if (!var0003) {
					var0003 = UI_update_last_created([(var0006[0x0001] - 0x0002), var0006[0x0002], var0006[0x0003]]);
				}
				if (!var0003) {
					var0003 = UI_update_last_created([var0006[0x0001], (var0006[0x0002] - 0x0002), var0006[0x0003]]);
				}
				if (!var0003) {
					var0003 = UI_update_last_created([(var0006[0x0001] + 0x0002), var0006[0x0002], var0006[0x0003]]);
				}
				if (!var0003) {
					var0003 = UI_update_last_created([var0006[0x0001], (var0006[0x0002] + 0x0002), var0006[0x0003]]);
				}
				if (!var0003) {
					var0005->remove_item();
				} else {
					var0003 = script item {
						nohalt;
						call Func0676;
					};
				}
			}
		}
	}
}

extern var Func0979 0x979 (var var0000);
extern var Func0951 0x951 ();

void Func0677 object#(0x677) () {
	var var0000;
	var var0001;
	var var0002;

	if ((event == DOUBLECLICK) || (event == WEAPON)) {
		var0000 = UI_click_on_item();
		halt_scheduled();
		var0001 = Func0979(var0000);
		item_say("@Ort Grav@");
		if (Func0951()) {
			var0002 = set_to_attack(var0000, 0x0327);
			var0002 = script item {
				nohalt;
				face var0001;
				actor frame raise_1h;
				actor frame cast_up;
				sfx 20;
				actor frame cast_out;
				actor frame strike_2h;
				actor frame strike_2h;
				attack;
				actor frame standing;
			};
		} else {
			var0002 = script item {
				nohalt;
				face var0001;
				actor frame raise_1h;
				actor frame cast_up;
				actor frame cast_out;
				actor frame strike_2h;
				call Func0606;
			};
		}
	}
}

extern var Func0951 0x951 ();

void Func0678 object#(0x678) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;
	var var0008;

	var0000 = false;
	if (event == DOUBLECLICK) {
		halt_scheduled();
		var0001 = UI_click_on_item();
		item_say("@In Sanct Grav@");
		var0002 = var0001[0x0002] + 0x0001;
		var0003 = var0001[0x0003] + 0x0001;
		var0004 = var0001[0x0004];
		var0005 = [var0002, var0003, var0004];
		if (Func0951()) {
			var0006 = script item {
				nohalt;
				actor frame raise_1h;
				actor frame reach_1h;
				actor frame strike_1h;
			};
			var0007 = UI_create_new_object(0x037E);
			if (var0007) {
				var0007->set_item_frame(0x0009);
				var0006 = UI_update_last_created(var0005);
				if (var0006) {
					var0007->set_item_flag(TEMPORARY);
					var0006 = script var0007 after 200 ticks remove;;
				} else {
					var0000 = true;
				}
			} else {
				var0000 = true;
			}
		} else {
			var0000 = true;
		}
		// This should probably be var0000 == true
		if (0x0606 == true) {
			// Dead code
			var0008 = script item {
				nohalt;
				actor frame raise_1h;
				actor frame reach_1h;
				actor frame strike_1h;
				call Func0606;
			};
		}
	}
}

extern var Func0979 0x979 (var var0000);
extern var Func0951 0x951 ();
extern void Func0982 0x982 (var var0000, var var0001);

void Func0679 object#(0x679) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;

	if ((event == DOUBLECLICK) || ((event == WEAPON) && (get_npc_number() == AVATAR))) {
		halt_scheduled();
		var0000 = UI_click_on_item();
		var0001 = Func0979(var0000);
		item_say("@Corp Por@");
		if (Func0951()) {
			var0002 = set_to_attack(var0000, 0x020F);
			var0002 = script item {
				nohalt;
				face var0001;
				actor frame cast_up;
				sfx 20;
				actor frame cast_out;
				actor frame cast_up;
				actor frame strike_2h;
				attack;
			};
		} else {
			var0002 = script item {
				nohalt;
				face var0001;
				actor frame cast_up;
				actor frame cast_out;
				actor frame cast_up;
				actor frame strike_2h;
				call Func0606;
			};
		}
	}
	if ((event == WEAPON) && (item != AVATAR)) {
		if (is_npc()) {
			var0003 = AVATAR->get_npc_prop(INTELLIGENCE);
			var0004 = get_npc_prop(INTELLIGENCE);
		} else {
			var0003 = 0;
			var0004 = 1;
		}
		var0005 = get_item_flag(CANT_DIE);
		if ((var0003 > var0004) && (var0005 == false)) {
			var0006 = var0003 - var0004;
			Func0982(item, var0006);
		} else {
			var0006 = var0004 - var0003;
			var0007 = AVATAR->get_npc_object();
			Func0982(var0007, var0006);
		}
	}
}

extern var Func0979 0x979 (var var0000);
extern var Func0951 0x951 ();

void Func067A object#(0x67A) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;

	if (event == DOUBLECLICK) {
		var0000 = false;
		halt_scheduled();
		var0001 = UI_click_on_item();
		var0002 = Func0979(var0001);
		var0003 = [var0001[0x0002], var0001[0x0003], var0001[0x0004]];
		item_say("@Tym Vas Flam@");
		if (Func0951()) {
			var0004 = UI_create_new_object(0x026D);
			if (var0004) {
				var0004->set_item_flag(TEMPORARY);
				var0004->set_item_flag(INVISIBLE);
				var0005 = UI_update_last_created(var0003);
				if (var0005) {
					var0005 = var0004->set_npc_prop(HEALTH, 1);
					var0005 = set_to_attack(var0004, 0x026D);
					var0005 = script item after 12 ticks {
						nohalt;
						attack;
					};
					var0005 = script var0004 after 14 ticks {
						nohalt;
						remove;
					};
					var0005 = script item {
						nohalt;
						face var0002;
						sfx 20;
						actor frame strike_2h;
						actor frame cast_out;
						actor frame cast_up;
					};
					var0001[0x0001]->obj_sprite_effect(ANIMATION_GREEN_BUBBLES, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, LOOP_ONCE);
				} else {
					var0000 = true;
				}
			} else {
				var0000 = true;
			}
		} else {
			var0000 = true;
		}
		if (var0000) {
			var0005 = script var0004 {
				nohalt;
				face var0002;
				actor frame strike_2h;
				actor frame cast_out;
				actor frame cast_up;
				call Func0606;
			};
		}
	}
}

extern var Func0979 0x979 (var var0000);
extern var Func0951 0x951 ();

void Func067B object#(0x67B) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;

	if (event == DOUBLECLICK) {
		var0000 = UI_click_on_item();
		var0001 = var0000->get_item_shape();
		var0002 = var0000->get_item_weight();
		var0003 = Func0979(item);
		halt_scheduled();
		item_say("@An Frio Xen Ex@");
		if (Func0951() && ((var0002 < 0x0002) && (var0002 > 0x0000))) {
			var0004 = script item {
				nohalt;
				face var0003;
				sfx 67;
			};
			var0004 = var0000->set_last_created();
			if (var0004) {
				var0004 = UI_update_last_created(get_object_position());
			}
		} else {
			var0004 = script item {
				nohalt;
				face var0003;
				call Func0606;
			};
		}
	}
}

extern var Func0951 0x951 ();

void Func067C object#(0x67C) () {
	var var0000;

	if (event == DOUBLECLICK) {
		halt_scheduled();
		item_say("Kal Frio Xen");
		if (Func0951()) {
			var0000 = script item {
				nohalt;
				actor frame kneeling;
				actor frame standing;
				actor frame cast_up;
				actor frame cast_out;
				actor frame strike_2h;
				sfx 20;
				call Func067C;
			};
		} else {
			var0000 = script item {
				nohalt;
				actor frame kneeling;
				actor frame standing;
				actor frame cast_up;
				actor frame cast_out;
				actor frame strike_2h;
				call Func0606;
			};
		}
	}
	if (event == SCRIPTED) {
		var0000 = UI_summon(0x02FB, true);
	}
}

extern var Func0951 0x951 ();
extern var Func09A0 0x9A0 (var var0000, var var0001);
extern void Func07D7 object#(0x7D7) ();

void Func067D object#(0x67D) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;

	if (event == DOUBLECLICK) {
		halt_scheduled();
		item_say("@An Frio Xen Ex@");
		if (Func0951() && (!AVATAR->get_item_flag(ISPETRA))) {
			var0000 = script item {
				nohalt;
				actor frame raise_2h;
				actor frame reach_2h;
				actor frame strike_2h;
				actor frame reach_2h;
				actor frame standing;
				actor frame kneeling;
				actor frame sleeping;
				actor frame sleeping;
				call Func07D6;
				sfx 67;
			};
			var0000 = script Func09A0(0x0005, 0x0001) after 300 ticks {
				nohalt;
				finish;
				call Func067D;
			};
			AVATAR->get_npc_object()->set_polymorph(0x0212);
		} else {
			var0000 = script item {
				nohalt;
				actor frame raise_2h;
				actor frame reach_2h;
				actor frame strike_2h;
				actor frame reach_2h;
				actor frame standing;
				actor frame kneeling;
				actor frame sleeping;
				actor frame sleeping;
				call Func0606;
			};
		}
	}
	if (event == SCRIPTED) {
		var0001 = get_object_position();
		var0002 = (var0001[0x0001] + 0x0002) & ((var0001[0x0002] + 0x0002) & var0001[0x0003]);
		var0003 = false;
		if ((var0001[0x0001] > 0x0550) && ((var0001[0x0001] < 0x0573) && ((var0001[0x0002] > 0x01EA) && (var0001[0x0002] < 0x0212)))) {
			var0003 = true;
		}
		if ((var0003 == false) && UI_is_not_blocked(var0002, 0x02D1, 0x0001)) {
			AVATAR->get_npc_object()->set_polymorph(0x02D1);
			item->Func07D7();
		} else {
			var0000 = script Func09A0(0x0005, 0x0001) after 10 ticks {
				nohalt;
				finish;
				call Func067D;
			};
		}
	}
}

extern void Func07E9 object#(0x7E9) ();

void Func067E object#(0x67E) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;
	var var0008;
	var var0009;

	if (event == DOUBLECLICK) {
		var0000 = AVATAR->get_object_position() & (0x0096 & 0x001F);
		var0001 = var0000->find_nearby(0x025F, 0x0050, MASK_EGG);
		for (var0004 in var0001 with var0002 to var0003) {
			var0005 = var0004->get_item_quality();
			var0006 = var0004->get_item_frame();
			if ((var0005 == 0x0096) && (var0006 == 0x001F)) {
				var0007 = AVATAR->get_npc_object()->get_object_position();
				var0008 = var0007[0x0003] + 0x0001;
				var0008 /= 0x0002;
				AVATAR->obj_sprite_effect(ANIMATION_POOF, var0008, var0008, 0x0000, 0x0000, 0x0000, LOOP_ONCE);
				UI_play_sound_effect(0x0021);
			} else {
				var0009 = script item after 1 ticks {
					nohalt;
					call Func07E9;
				};
			}
		}
	}
}

extern var Func0979 0x979 (var var0000);
extern var Func0951 0x951 ();

void Func067F object#(0x67F) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;

	if ((event == DOUBLECLICK) || (event == WEAPON)) {
		halt_scheduled();
		var0000 = UI_click_on_item();
		var0001 = Func0979(var0000);
		item_say("@In Jux Por Ylem@");
		if (Func0951()) {
			var0002 = set_to_attack(var0000, 0x011F);
			var0003 = script item {
				nohalt;
				face var0001;
				sfx 20;
				actor frame raise_1h;
				actor frame standing;
				actor frame cast_up;
				actor frame standing;
				actor frame strike_1h;
				actor frame strike_2h;
				attack;
				actor frame standing;
			};
		} else {
			var0003 = script item {
				nohalt;
				face var0001;
				actor frame raise_1h;
				actor frame standing;
				actor frame cast_up;
				actor frame standing;
				actor frame strike_2h;
				call Func0606;
			};
		}
	}
}

extern var Func0979 0x979 (var var0000);
extern var Func0951 0x951 ();

void Func0680 object#(0x680) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;

	if (event == DOUBLECLICK) {
		var0000 = UI_click_on_item();
		var0001 = Func0979(var0000);
		halt_scheduled();
		item_say("@Vas Corp Hur@");
		if (Func0951()) {
			var0002 = set_to_attack(var0000, 0x027F);
			var0003 = script item {
				nohalt;
				face var0001;
				sfx 20;
				actor frame cast_up;
				actor frame strike_1h;
				attack;
			};
		} else {
			var0002 = script item {
				nohalt;
				face var0001;
				actor frame cast_up;
				actor frame strike_1h;
				call Func0606;
			};
		}
	}
}

extern var Func0951 0x951 ();
extern void Func0982 0x982 (var var0000, var var0001);

void Func0681 object#(0x681) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;
	var var0008;
	var var0009;
	var var000A;
	var var000B;
	var var000C;

	if (event == DOUBLECLICK) {
		halt_scheduled();
		item_say("@Vas Corp@");
		if (Func0951()) {
			obj_sprite_effect(ANIMATION_TELEPORT, -2, -2, 0, 0, 0, LOOP_ONCE);
			var0000 = script item {
				nohalt;
				sfx 20;
				actor frame kneeling;
				actor frame standing;
				actor frame cast_up;
				actor frame cast_out;
				sfx 130;
			};
			var0001 = 0x0019;
			var0002 = find_nearby(ANY_SHAPE, var0001, MASK_NPC);
			var0003 = UI_get_party_list2();
			var0004 = false;
			for (var0007 in var0002 with var0005 to var0006) {
				if (!(var0007 in var0003)) {
					var0001 = get_distance(var0007);
					var0001 = (var0001 / 0x0003) + 0x0005;
					var0007->halt_scheduled();
					var0000 = script var0007 after var0001 ticks {
						nohalt;
						call Func0681;
					};
					var0004 = true;
				}
			}
			if (var0004 == true) {
				var0003 = UI_get_party_list();
				for (var000A in var0003 with var0008 to var0009) {
					var000B = var000A->get_npc_prop(HEALTH);
					Func0982(var000A, var000B - 2);
				}
			}
		} else {
			var0000 = script item {
				nohalt;
				actor frame kneeling;
				actor frame standing;
				actor frame cast_up;
				actor frame cast_out;
				call Func0606;
			};
		}
	}
	if (event == SCRIPTED) {
		var000C = get_item_flag(CANT_DIE);
		if (var000C == false) {
			var000B = get_npc_prop(HEALTH);
			Func0982(item, var000B - 2);
			Func0982(item, 50);
		}
	}
}

extern var Func0951 0x951 ();

void Func0682 object#(0x682) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;

	if (event == DOUBLECLICK) {
		halt_scheduled();
		item_say("@Vas Sact Lor@");
		if (Func0951()) {
			obj_sprite_effect(ANIMATION_TELEPORT, -2, -2, 0, 0, 0, LOOP_ONCE);
			var0000 = script item {
				nohalt;
				actor frame raise_1h;
				sfx 130;
				actor frame standing;
				actor frame cast_up;
				actor frame standing;
				actor frame strike_2h;
			};
			var0001 = UI_get_party_list();
			for (var0004 in var0001 with var0002 to var0003) {
				var0005 = get_distance(var0004);
				var0005 = (var0005 / 0x0003) + 0x0005;
				var0000 = script var0004 after var0005 ticks {
					nohalt;
					call Func0682;
				};
			}
		} else {
			var0006 = script item {
				nohalt;
				actor frame raise_1h;
				actor frame standing;
				actor frame cast_up;
				actor frame standing;
				actor frame strike_2h;
				call Func0606;
			};
		}
	}
	if (event == SCRIPTED) {
		set_item_flag(INVISIBLE);
	}
}

extern var Func0951 0x951 ();
extern var Func0941 0x941 (var var0000);
extern var Func0980 0x980 (var var0000);

void Func0683 object#(0x683) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;

	if (event == DOUBLECLICK) {
		halt_scheduled();
		item_say("Uus Vas Jux Ylem@");
		if (Func0951()) {
			obj_sprite_effect(ANIMATION_TELEPORT, -2, -2, 0, 0, 0, LOOP_ONCE);
			var0000 = script item {
				nohalt;
				actor frame raise_1h;
				actor frame raise_2h;
				actor frame raise_2h;
				actor frame strike_2h;
				actor frame reach_2h;
				sfx 67;
			};
			var0001 = Func0941(AVATAR) + UI_die_roll(0x0001, 0x0004);
			if (var0001 > 0x0008) {
				var0000 = script item after 5 ticks {
					nohalt;
					call Func0683;
				};
				var0000 = script item after 6 ticks {
					nohalt;
					call Func0683;
				};
				var0000 = script item after 7 ticks {
					nohalt;
					call Func0683;
				};
				var0000 = script item after 8 ticks {
					nohalt;
					call Func0683;
				};
				var0000 = script item after 9 ticks {
					nohalt;
					call Func0683;
				};
				var0000 = script item after 10 ticks {
					nohalt;
					call Func0683;
				};
				var0000 = script item after 11 ticks {
					nohalt;
					call Func0683;
				};
				var0000 = script item after 12 ticks {
					nohalt;
					call Func0683;
				};
				var0000 = script item after 13 ticks {
					nohalt;
					call Func0683;
				};
			}
			if (var0001 == 0x0008) {
				var0000 = script item after 5 ticks {
					nohalt;
					call Func0683;
				};
				var0000 = script item after 6 ticks {
					nohalt;
					call Func0683;
				};
				var0000 = script item after 7 ticks {
					nohalt;
					call Func0683;
				};
				var0000 = script item after 8 ticks {
					nohalt;
					call Func0683;
				};
				var0000 = script item after 9 ticks {
					nohalt;
					call Func0683;
				};
				var0000 = script item after 10 ticks {
					nohalt;
					call Func0683;
				};
				var0000 = script item after 11 ticks {
					nohalt;
					call Func0683;
				};
				var0000 = script item after 12 ticks {
					nohalt;
					call Func0683;
				};
			}
			if (var0001 == 0x0007) {
				var0000 = script item after 5 ticks {
					nohalt;
					call Func0683;
				};
				var0000 = script item after 6 ticks {
					nohalt;
					call Func0683;
				};
				var0000 = script item after 7 ticks {
					nohalt;
					call Func0683;
				};
				var0000 = script item after 8 ticks {
					nohalt;
					call Func0683;
				};
				var0000 = script item after 9 ticks {
					nohalt;
					call Func0683;
				};
				var0000 = script item after 10 ticks {
					nohalt;
					call Func0683;
				};
				var0000 = script item after 11 ticks {
					nohalt;
					call Func0683;
				};
			}
			if (var0001 < 0x0007) {
				var0000 = script item after 5 ticks {
					nohalt;
					call Func0683;
				};
				var0000 = script item after 6 ticks {
					nohalt;
					call Func0683;
				};
				var0000 = script item after 7 ticks {
					nohalt;
					call Func0683;
				};
				var0000 = script item after 8 ticks {
					nohalt;
					call Func0683;
				};
				var0000 = script item after 9 ticks {
					nohalt;
					call Func0683;
				};
				var0000 = script item after 10 ticks {
					nohalt;
					call Func0683;
				};
			}
		} else {
			var0000 = script item {
				nohalt;
				actor frame raise_1h;
				actor frame raise_2h;
				actor frame raise_2h;
				actor frame strike_2h;
				actor frame reach_2h;
				call Func0606;
			};
		}
	}
	if (event == SCRIPTED) {
		var0002 = 0x0019;
		var0003 = Func0980(var0002);
		var0004 = UI_get_array_size(var0003);
		if (var0003) {
			var0005 = UI_get_random(var0004);
			var0006 = var0003[var0005];
			var0007 = set_to_attack(var0006, 0x0327);
			var0000 = script item {
				nohalt;
				attack;
			};
		}
	}
}

extern var Func0951 0x951 ();

void Func0684 object#(0x684) () {
	var var0000;

	if (event == DOUBLECLICK) {
		halt_scheduled();
		item_say("@Rel Hur@");
		if (Func0951()) {
			var0000 = script item {
				nohalt;
				actor frame raise_1h;
				actor frame strike_1h;
				sfx 57;
			};
			if (UI_get_weather() != SPARKLE) {
				UI_set_weather(CLEAR_WEATHER);
			}
		} else {
			var0000 = script item {
				nohalt;
				actor frame raise_1h;
				actor frame strike_1h;
				call Func0606;
			};
		}
	}
}

extern var Func0951 0x951 ();
extern var Func0977 0x977 (var var0000);

void Func0685 object#(0x685) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;
	var var0008;
	var var0009;

	if (event == DOUBLECLICK) {
		halt_scheduled();
		item_say("Kal Vas Xen");
		if (Func0951()) {
			var0000 = script item {
				nohalt;
				actor frame kneeling;
				actor frame standing;
				actor frame cast_up;
				actor frame cast_out;
				actor frame strike_2h;
				sfx 20;
				call Func0685;
			};
		} else {
			var0000 = script item {
				nohalt;
				actor frame kneeling;
				actor frame standing;
				actor frame cast_up;
				actor frame cast_out;
				actor frame strike_2h;
				call Func0606;
			};
		}
	}
	if (event == SCRIPTED) {
		var0001 = [0x0210, 0x0151, 0x0215, 0x01F5, 0x0202, 0x0295, 0x02C2];
		var0002 = [0x0005, 0x0005, 0x0005, 0x0005, 0x0005, 0x0005, 0x0005];
		var0003 = [0x0005, 0x0005, 0x0001, 0x0002, 0x0003, 0x0005, 0x0002];
		var0004 = Func0977(var0001);
		do {
			var0005 = UI_die_roll(0x0001, var0004);
			var0006 = UI_die_roll(0x0001, 0x0064);
		} while (var0002[var0005] < var0006);
		var0007 = var0003[var0005];
		var0008 = var0007 / 0x0002;
		if (var0008 < 0x0001) {
			var0008 = 0x0001;
		}
		var0009 = UI_die_roll(0x0001, var0008);
		if (UI_die_roll(0x0001, 0x0002) == 0x0001) {
			var0009 = -1 * var0009;
		}
		var0007 += var0009;
		while (var0007) {
			var0000 = UI_summon(var0001[var0005], true);
			var0007 -= 1;
		}
	}
}

void Func0686 object#(0x686) () {
	var var0000;

	halt_scheduled();
	item_say("@An Tym@");
	var0000 = script item {
		nohalt;
		actor frame strike_2h;
		actor frame cast_out;
		call Func0606;
	};
}

extern var Func0951 0x951 ();
extern var Func0941 0x941 (var var0000);
extern void Func0688 object#(0x688) ();

void Func0687 object#(0x687) () {
	var var0000;
	var var0001;
	var var0002;

	if (event == DOUBLECLICK) {
		halt_scheduled();
		var0000 = get_object_position();
		item_say("@Ex Por@");
		if (Func0951()) {
			obj_sprite_effect(ANIMATION_TELEPORT , -2, -2, -3, -3, 0, LOOP_ONCE);
			obj_sprite_effect(ANIMATION_TELEPORT , -2, -2,  3, -3, 0, LOOP_ONCE);
			obj_sprite_effect(ANIMATION_TELEPORT , -2, -2,  3,  3, 0, LOOP_ONCE);
			obj_sprite_effect(ANIMATION_TELEPORT , -2, -2, -3,  3, 0, LOOP_ONCE);
			obj_sprite_effect(ANIMATION_TELEPORT2, -2, -2,  0,  0, 0, LOOP_ONCE);
			var0001 = script item {
				nohalt;
				actor frame raise_1h;
				actor frame reach_2h;
				actor frame kneeling;
				actor frame kneeling;
				actor frame reach_2h;
				sfx 67;
			};
			var0002 = 0x000F + Func0941(AVATAR);
			while (var0002 != 0x0000) {
				var0002 -= 0x0001;
				var0001 = script AVATAR after (var0002 + 0x000A) ticks {
					nohalt;
					call Func0688;
				};
			}
		} else {
			var0001 = script item {
				nohalt;
				actor frame raise_1h;
				actor frame reach_2h;
				actor frame kneeling;
				actor frame kneeling;
				actor frame reach_2h;
				call Func0606;
			};
		}
	}
}

extern var Func0941 0x941 (var var0000);

void Func0688 object#(0x688) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;
	var var0008;
	var var0009;
	var var000A;
	var var000B;
	var var000C;
	var var000D;
	var var000E;
	var var000F;
	var var0010;
	var var0011;

	var0000 = [];
	var0001 = 0x000A + Func0941(AVATAR);
	var0002 = find_nearby(SHAPE_ANY, var0001, MASK_NPC2);
	var0003 = UI_get_party_list();
	var0004 = [];
	for (var0007 in var0002 with var0005 to var0006) {
		if (!(var0007 in var0003)) {
			var0004 &= var0007;
		}
	}
	var0008 = UI_get_array_size(var0004);
	var0009 = UI_die_roll(0x0001, 0x0003);
	if (var0009 == 0x0001) {
		var000A = AVATAR->get_object_position();
		var000B = var000A[0x0001] + UI_die_roll(-12, 12);
		var000C = var000A[0x0002] + UI_die_roll(-12, 12);
		var000D = var000A[0x0003];
		var0000 = [var000B, var000C, 0x0000];
	} else if (var0008 != 0x0000) {
		var000E = UI_die_roll(0x0001, var0008);
		var000A = var0004[var000E]->get_object_position();
		var000B = var000A[0x0001];
		var000C = var000A[0x0002];
		var000D = var000A[0x0003];
		var0000 = [var000B, var000C, var000D];
	}
	if (var0000 != []) {
		var000F = UI_die_roll(0x0001, 0x0005);
		var0010 = 0x0000;
		if ((var000F == 0x0001) || (var000F == 0x0002)) {
			var0010 = UI_create_new_object(0x037F);
		}
		if ((var000F == 0x0003) || (var000F == 0x0004)) {
			var0010 = UI_create_new_object(0x0231);
		}
		if (var0010) {
			var000F = UI_update_last_created(var0000);
			if (var000F) {
				var0011 = UI_die_roll(0x0005, 0x000F);
				var000F = var0010->set_item_quality(var0011);
				var0010->set_item_flag(TEMPORARY);
				var000F = script var0010 after var0011 ticks {
					nohalt;
					call Func0688;
					remove;
				};
			}
		}
	}
}

void Func068A object#(0x68A) () {
	obj_sprite_effect(ANIMATION_TELEPORT2, -3, -4, 0, 0, 0, LOOP_ONCE2);
	gflags[CAST_CHILL_SPELL] = false;
}

void Func068B object#(0x68B) () {
	AVATAR->show_npc_face0(0x0000);
	say("\"Fascinating. This key refuses to be added to the key ring.\"");
	UI_remove_npc_face0();
}

void Func068C object#(0x68C) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;
	var var0008;
	var var0009;
	var var000A;
	var var000B;
	var var000C;
	var var000D;
	var var000E;
	var var000F;
	var var0010;
	var var0011;
	var var0012;
	var var0013;
	var var0014;

	if (gflags[BANES_RELEASED] == true) {
		var0000 = AVATAR->get_object_position();
		var0001 = [0x0125, 0x0351, 0x0274, 0x02CD, 0x0222, 0x019F, 0x012C, 0x01A5, 0x021A, 0x017A, 0x01A6];
		AVATAR->move_object([0x0880, 0x0680, 0x0000]);
		for (var0004 in var0001 with var0002 to var0003) {
			var0005 = UI_find_nearby_avatar(var0004);
			for (var0008 in var0005 with var0006 to var0007) {
				var0008->remove_item();
			}
		}
		AVATAR->move_object([0x0980, 0x0680, 0x0000]);
		for (var0004 in var0001 with var0009 to var000A) {
			var0005 = UI_find_nearby_avatar(var0004);
			for (var0008 in var0005 with var000B to var000C) {
				var0008->remove_item();
			}
		}
		AVATAR->move_object([0x0880, 0x0780, 0x0000]);
		for (var0004 in var0001 with var000D to var000E) {
			var0005 = UI_find_nearby_avatar(var0004);
			for (var0008 in var0005 with var000F to var0010) {
				var0008->remove_item();
			}
		}
		AVATAR->move_object([0x0980, 0x0780, 0x0000]);
		for (var0004 in var0001 with var0011 to var0012) {
			var0005 = UI_find_nearby_avatar(var0004);
			for (var0008 in var0005 with var0013 to var0014) {
				var0008->remove_item();
			}
		}
		AVATAR->move_object(var0000);
		gflags[BANE_MOONSHADE_DECORATION_CLEANUP] = true;
	}
}

extern void Func094A 0x94A (var var0000);

void Func06A4 object#(0x6A4) () {
	if (event == EGG) {
		Func094A("Damn! I've stepped on an egg! Egg 0, to be precise!");
	}
}

extern void Func0998 0x998 (var var0000, var var0001);
extern var Func09A0 0x9A0 (var var0000, var var0001);
extern void Func07D9 object#(0x7D9) ();
extern void Func06A6 object#(0x6A6) ();

void Func06A5 object#(0x6A5) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;

	if ((event == EGG) && (!gflags[TEST_SAVED_MAN_ON_FIRE])) {
		var0000 = find_nearby(0x0178, 0x000A, MASK_NONE);
		if (var0000) {
			var0001 = script var0000 {
				nohalt;
				call Func0178;
			};
			var0001 = script var0000 after 2 ticks {
				nohalt;
				frame 14;
			};
		}
		var0002 = find_nearby(0x0331, 0x000A, MASK_NONE);
		var0003 = find_nearby(0x0314, 0x0014, MASK_NONE);
		if (var0002) {
			Func0998(var0002, 0x037F);
		}
		if (var0003) {
			Func0998(var0003, 0x037F);
		}
		if (var0002) {
			var0002->set_npc_id(0x0000);
			var0001 = script var0002 after 5 ticks {
				nohalt;
				call Func06A6;
			};
			var0001 = script var0002 after 20 ticks {
				nohalt;
				call Func06A6;
			};
			var0001 = script var0002 after 45 ticks {
				nohalt;
				call Func06A6;
			};
			var0001 = script var0002 after 60 ticks {
				nohalt;
				call Func06A6;
			};
			var0004 = Func09A0(0x0000, 0x0001);
			var0001 = script var0004 after 90 ticks {
				nohalt;
				call Func07D9;
			};
		}
	}
}

extern var Func09A0 0x9A0 (var var0000, var var0001);
extern void Func07D9 object#(0x7D9) ();

void Func06A6 object#(0x6A6) () {
	var var0000;
	var var0001;
	var var0002;

	if (event == SCRIPTED) {
		var0000 = get_npc_id();
		if (var0000 == 0x0000) {
			var0001 = script item {
				say "@Help me!@";
			};
		}
		if (var0000 == 0x0001) {
			var0001 = script item {
				say "@The button! Press the button!@";
			};
		}
		if (var0000 == 0x0002) {
			var0001 = script item {
				say "@The flames -- burning me!@";
			};
		}
		if (var0000 == 0x0003) {
			var0001 = script item {
				say "@Please!@";
			};
		}
		if (var0000 == 0x0004) {
			var0002 = Func09A0(0x0000, 0x0001);
			var0001 = script var0002 {
				nohalt;
				call Func07D9;
			};
		}
		set_npc_id(var0000 + 0x0001);
	}
}

void Func06A7 object#(0x6A7) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;
	var var0008;

	var0000 = [0x03B4, 0x03B8, 0x03B7, 0x0284, 0x0285, 0x0286, 0x02F8];
	for (var0003 in var0000 with var0001 to var0002) {
		var0004 = find_nearby(var0003, 0x0001, MASK_NONE);
		if (var0004) {
			UI_play_sound_effect(0x0039);
			var0005 = get_object_position();
			UI_sprite_effect(ANIMATION_TELEPORT, (var0005[0x0001] - 0x0001), (var0005[0x0002] - 0x0001), 0x0000, 0x0000, 0x0000, LOOP_ONCE);
			var0006 = UI_die_roll(0x0001, 0x000A);
			var0007 = 0x0000 - UI_die_roll(0x0001, 0x000A);
			var0008 = var0004->set_last_created();
			if (var0008) {
				var0008 = UI_update_last_created([(0x0A21 + var0006), (0x037A + var0007), 0x0000]);
			}
		}
	}
}

void Func06A8 object#(0x6A8) () {
	var var0000;
	var var0001;

	if (event == EGG) {
		var0000 = script item {
			call Func0636;
		};
		var0001 = find_nearby(0x02EB, 0x0005, MASK_NONE);
		if (var0001) {
			var0000 = script var0001 after 2 ticks {
				call Func0464;
			};
		} else {
			gflags[TEMP_FLAG_1] = false;
		}
	}
}

extern var Func097D 0x97D (var var0000, var var0001, var var0002, var var0003, var var0004);
extern void Func099C 0x99C (var var0000);
extern void Func07DA object#(0x7DA) ();

void Func06A9 object#(0x6A9) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;
	var var0008;
	var var0009;
	var var000A;
	var var000B;
	var var000C;
	var var000D;
	var var000E;
	var var000F;
	var var0010;
	var var0011;

	if (event == EGG) {
		var0000 = script AVATAR {
			nohalt;
			wait 10;
		};
		AVATAR->obj_sprite_effect(ANIMATION_FIREWORKS, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, LOOP_ONCE);
		UI_play_sound_effect(0x0039);
		var0001 = Func097D(AVATAR, 0x0001, 0x02B0, QUALITY_ANY, 0x0004);
		if (var0001) {
			var0002 = find_nearby(0x0320, 0x0014, MASK_NONE);
			for (var0005 in var0002 with var0003 to var0004) {
				if (!Func097D(var0005, 0x0001, 0x02B0, QUALITY_ANY, 0x0004)) {
					var0006 = UI_create_new_object(0x02B0);
					if (var0006) {
						var0006->set_item_frame(0x0004);
						var0000 = var0005->give_last_created();
					}
				}
			}
			Func099C(0x02B0);
			var0000 = script AVATAR after 10 ticks {
				call Func07DA;
			};
		}
		var0007 = false;
		var0008 = [0x03B4, 0x03B8, 0x03B7, 0x0284, 0x0285, 0x0286, 0x02F8];
		for (var000B in var0008 with var0009 to var000A) {
			if (Func097D(AVATAR, 0x0001, var000B, QUALITY_ANY, FRAME_ANY)) {
				var0007 = true;
			}
		}
		var000C = find_nearby(0x00C8, 0x00A0, MASK_EGG);
		if (var0007) {
			for (var000F in var000C with var000D to var000E) {
				var0000 = script var000F {
					setegg avatar_near, 5;
				};
			}
		} else {
			for (var000F in var000C with var0010 to var0011) {
				var0000 = script var000F {
					nohalt;
					setegg external_criteria, 5;
				};
			}
		}
	}
}

extern var Func097D 0x97D (var var0000, var var0001, var var0002, var var0003, var var0004);

void Func06AA object#(0x6AA) () {
	if (Func097D(PARTY, 0x0001, 0x0289, QUALITY_ANY, 0x0000)) {
		gflags[GOT_COMB_OF_BEAUTY] = true;
		remove_item();
	}
}

void Func06AB object#(0x6AB) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;

	if (event == EGG) {
		var0000 = find_nearby(0x0113, 0x0014, MASK_EGG);
		for (var0003 in var0000 with var0001 to var0002) {
			var0004 = var0003->get_item_frame();
			if (var0004 == 0x0000) {
				var0005 = script var0003 {
					nohalt;
					hatch;
				};
				var0005 = script AVATAR after 5 ticks {
					nohalt;
					call Func06AB;
				};
				abort;
			}
		}
	}
	if (event == SCRIPTED) {
		var0006 = find_nearby(0x0215, 0x0014, MASK_NONE);
		if (var0006) {
			var0006[0x0001]->set_npc_id(0x0001);
			var0006[0x0001]->set_item_flag(SI_TOURNAMENT);
			var0006[0x0002]->set_npc_id(0x0002);
			var0006[0x0002]->set_item_flag(SI_TOURNAMENT);
		}
	}
}

void Func06AC object#(0x6AC) () {
	var var0000;

	if ((event == SCRIPTED) || (event == EGG)) {
		var0000 = find_nearby(0x0280, 0x0001, MASK_NONE);
		if (!var0000) {
			gflags[GOT_SERPENT_STAFF] = true;
			if (!((item == AVATAR->get_npc_object()) || (item == AVATAR))) {
				remove_item();
			}
		}
	}
}

extern var Func0988 0x988 (var var0000, var var0001);
extern var Func0992 0x992 (var var0000, var var0001, var var0002, var var0003);

void Func06AD object#(0x6AD) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;
	var var0008;
	var var0009;

	if (event == EGG) {
		if (!gflags[CREATED_BROWN_BOTTLE]) {
			abort;
		}
		var0000 = find_nearby(0x0268, 0x0001, MASK_NONE);
		for (var0003 in var0000 with var0001 to var0002) {
			if (var0003->get_item_frame() != 0x0007) {
				var0000 = Func0988(var0003, var0000);
			}
		}
		if (UI_get_array_size(var0000) == 0x0000) {
			gflags[FOUND_BROWN_BOTTLE] = true;
			SIMON->set_alignment(CHAOTIC);
			SIMON->set_item_flag(SI_TOURNAMENT);
			var0004 = Func0992(0x0001, "@A clue...@", "@A clue...@", true);
			if (var0004 != AVATAR) {
				var0005 = script var0004 after 10 ticks {
					nohalt;
					call Func06AD;
				};
			}
		}
	}
	if (event == SCRIPTED) {
		var0006 = find_nearby(0x0113, 0x0014, MASK_EGG);
		for (var0009 in var0006 with var0007 to var0008) {
			if (var0009->get_item_frame() == 0x0007) {
				var0009->remove_item();
			}
		}
		var0004 = get_npc_number();
		if (var0004->get_item_shape() == 0x02EB) {
			AUTOMATON_FACE->show_npc_face0(0x0000);
		} else {
			var0004->show_npc_face0(0x0000);
		}
		if (gflags[TRIED_SIMONS_ALE]) {
			say("\"Avatar! This bottle is identical to the one from which thou didst drink at the inn in Monitor!\"");
			say("\"'Tis a bottle of Fawnish ale.\"");
			gflags[KNOW_BROWN_BOTTLE_IS_FAWNISH_ALE] = true;
		} else {
			say("\"I cannot help but think that this strange bottle must be a clue as to the identity of Monitor's traitor.\"");
			say("\"Perhaps if we can find whom this bottle doth belong to, we shall find our traitor!\"");
		}
	}
}

extern var Func0992 0x992 (var var0000, var var0001, var var0002, var var0003);
extern void Func097F 0x97F (var var0000, var var0001, var var0002);

void Func06AE object#(0x6AE) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;
	var var0008;
	var var0009;
	var var000A;
	var var000B;
	var var000C;
	var var000D;

	var0000 = find_nearby(0x0212, 0x0014, MASK_NONE);
	var0001 = find_nearby(0x0373, 0x0014, MASK_NONE);
	var0002 = find_nearby(0x01FB, 0x0014, MASK_NONE);
	if (event == EGG) {
		if (var0000) {
			var0003 = Func0992(IOLO, 0x0000, 0x0000, false);
			var0003->item_say("@Snakes!@");
		} else if (var0001) {
			var0003 = Func0992(SHAMINO, 0x0000, 0x0000, false);
			var0003->item_say("@Hmmm...@");
		} else if (var0002) {
			var0003 = Func0992(DUPRE, 0x0000, 0x0000, false);
			var0003->item_say("@Damned bones!@");
			var0004 = find_nearby(0x0113, 0x000F, MASK_EGG);
			var0005 = 0x0000;
			for (var0008 in var0004 with var0006 to var0007) {
				if (var0008->get_item_frame() == 0x0000) {
					var0005 = var0008;
				}
			}
			if (!var0005) {
				abort;
			}
		} else {
			abort;
		}
		if ((var0003 != AVATAR) && ((var0003 != BOYDON_HEAD) && (var0003 != AUTOMATON_FACE))) {
			var0009 = script var0003 after 7 ticks {
				nohalt;
				call Func06AE;
			};
		}
	}
	if (event == SCRIPTED) {
		clear_item_say();
		get_npc_number()->show_npc_face0(0x0000);
		if ((!var0000) && ((!var0001) && (!var0002))) {
			say("\"Oh, mindest thou not.\"");
			Func097F(item, "@I am so confused...@", 0x0000);
			abort;
		}
		if (var0000) {
			say("\"Snakes! Why did it have to be snakes? Why could not Lord British have sent thee somewhere akin to 'Daisy Isle' instead?\"");
			Func097F(item, "@Why me?@", 0x0000);
			Func097F(AVATAR, "@Oh, desist...@", 0x0005);
			abort;
		}
		var0004 = find_nearby(0x0113, 0x000F, MASK_EGG);
		var0005 = 0x0000;
		for (var0008 in var0004 with var000A to var000B) {
			if (var0008->get_item_frame() == 0x0000) {
				var0005 = var0008;
			}
		}
		if (var0002 && var0005) {
			say("\"Skeletons! The foul things! At least they are not moving about and terrorizing the living! Let those who have died rest, and not bother those of us that live on...\"");
			var0009 = script var0005 after 3 ticks {
				hatch;
			};
			var000C = var0005->get_object_position();
			UI_sprite_effect(ANIMATION_TELEPORT2, var000C[0x0001], var000C[0x0002], 0x0000, 0x0000, 0x0000, LOOP_ONCE);
			AVATAR->show_npc_face1(0x0000);
			say("\"Perhaps thou didst speak too soon, my friend...\"");
			UI_remove_npc_face1();
		}
		if (var0001) {
			var000D = [IOLO, SHAMINO, DUPRE, GWENNO];
			if (get_npc_number() in var000D) {
				say("\"A hall of sleeping gargoyles...\"");
				say("\"'Tis reminiscent of the problems that are occurring in Britannia this very instant!\"");
				Func097F(item, "@The emps...@", 0x0000);
				gflags[SPOKE_EMPS] = true;
			} else {
				say("\"A hall of sleeping Daemons...\"");
				Func097F(item, "@Let us go...@", 0x0000);
			}
		}
		UI_remove_npc_face0();
		abort;
	}
}

extern var Func09A0 0x9A0 (var var0000, var var0001);
extern var Func0993 0x993 (var var0000);
extern void Func097F 0x97F (var var0000, var var0001, var var0002);
extern void Func0982 0x982 (var var0000, var var0001);

void Func06AF object#(0x6AF) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;
	var var0008;
	var var0009;
	var var000A;
	var var000B;
	var var000C;
	var var000D;

	if (event == EGG) {
		var0000 = Func09A0(0x0007, 0x0003);
		if (var0000) {
			var0001 = script var0000 after 300 ticks {
				call Func06AF;
			};
			var0001 = var0000->set_item_quality(0x00FA);
		}
	}
	if (event == SCRIPTED) {
		var0002 = AVATAR->get_object_position();
		var0003 = var0002[0x0001];
		var0004 = var0002[0x0002];
		if ((var0003 > 0x000D) && ((var0003 < 0x00AB) && ((var0004 > 0x061F) && (var0004 < 0x067B)))) {
			var0001 = set_item_quality(0x00FA);
			var0001 = script item after 250 ticks {
				call Func06AF;
			};
			abort;
		}
		var0005 = Func0993(var0002);
		if (var0005 == 0x0004) {
			if (!gflags[CAST_CHILL_SPELL]) {
				var0006 = ["@'Tis hot!@", "@Yow!@", "@It feels like a steambath.@", "@I am drenched.@", "@Doth anyone have ice?@", "@Blistering heat...@", "@Dost thou possess any cold spells, Avatar?@", "@I am roasting!@", "@Think cool thoughts.@", "@'Sblood, 'tis hot.@", "@Britannia for a fan!@", "@Uugghh. I am hot.@", "@Damn this heat!@"];
				var0007 = UI_get_party_list();
				for (var000A in var0007 with var0008 to var0009) {
					var000B = UI_die_roll(0x0001, 0x0002);
					if (var000B == 0x0001) {
						var000C = UI_die_roll(0x0001, 0x000D);
						var000D = UI_die_roll(0x0001, 0x0006);
						Func097F(var000A, var0006[var000C], var000D);
					}
					Func0982(var000A->get_npc_object(), 0x0001);
				}
				var000D = get_item_quality();
				var000D /= 0x0002;
				if (var000D < 0x000F) {
					var000D = 0x000F;
				}
				var0001 = script item after var000D ticks {
					call Func06AF;
				};
				var0001 = set_item_quality(var000D);
			} else {
				var0001 = set_item_quality(0x00FA);
				var0001 = script item after 250 ticks {
					call Func06AF;
				};
			}
		}
	}
}

void Func06B0 object#(0x6B0) () {
	var var0000;
	var var0001;

	if (gflags[PASSED_TEST_OF_ETHICALITY] == true) {
		var0000 = find_nearby(0x02CA, 0x000A, MASK_NONE);
		if (var0000) {
			var0000->set_item_frame(0x0000);
		}
		var0001 = find_nearby(0x019C, 0x000A, MASK_NONE);
		if (var0001) {
			var0001->set_item_frame(0x0001);
		}
		abort;
	}
}

void Func06B1 object#(0x6B1) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;

	if (gflags[BANES_RELEASED]) {
		var0000 = get_item_quality();
		var0001 = UI_get_npc_object(0x0000 - var0000);
		if (var0001) {
			if (var0001->get_distance(item) < 0x001E) {
				var0001->kill_npc();
			} else if (!var0001->get_item_flag(DEAD)) {
				var0002 = get_object_position();
				var0003 = var0001->get_object_position();
				UI_error_message(["Trying to kill npc#", var0000, ". Teleporting him to", var0002, ". He was at ", var0003, "."]);
				var0001->move_object(var0002);
				var0001->kill_npc();
			}
		}
		remove_item();
	}
}

void Func06B2 object#(0x6B2) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;

	if (gflags[BANES_RELEASED] != 0x0000) {
		var0000 = get_item_quality();
		var0001 = find_nearby(0x0113, 0x000A, MASK_EGG);
		for (var0004 in var0001 with var0002 to var0003) {
			if ((var0004->get_item_frame() == 0x0000) || (var0004->get_item_frame() == 0x0004)) {
				var0005 = UI_die_roll(0x0001, var0000);
				if (var0005 < var0000) {
					var0006 = script var0004 {
						hatch;
					};
				}
			}
		}
	}
}

extern var Func09A0 0x9A0 (var var0000, var var0001);
extern var Func0992 0x992 (var var0000, var var0001, var var0002, var var0003);
extern var Func08B5 0x8B5 ();
extern var Func08B6 0x8B6 ();
extern var Func0988 0x988 (var var0000, var var0001);
extern void Func07D6 object#(0x7D6) ();
extern var Func09A6 0x9A6 (var var0000);
extern void Func092F 0x92F (var var0000, var var0001);
extern var Func097D 0x97D (var var0000, var var0001, var var0002, var var0003, var var0004);

void Func06B3 object#(0x6B3) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;
	var var0008;
	var var0009;
	var var000A;
	var var000B;
	var var000C;
	var var000D;
	var var000E;
	var var000F;
	var var0010;
	var var0011;
	var var0012;
	var var0013;
	var var0014;
	var var0015;

	var0000 = Func09A0(0x0002, 0x0001);
	if (gflags[FINISHED_DREAM_QUEST]) {
		remove_item();
		abort;
	}
	if (event == EGG) {
		var0001 = Func0992(0x0001, "@I feel sleepy@", "@I feel sleepy@", true);
		var0001 = var0000->set_item_quality(0x0000);
		var0001 = script var0000 after 15 ticks {
			nohalt;
			call Func06B3;
		};
	}
	if (event == SCRIPTED) {
		var0002 = var0000->get_item_quality();
		if (var0002 == 0x0000) {
			var0001 = Func0992(0x0001, "@Mine eyes are closing...@", "@I can go no further...@", true);
			var0001 = var0000->set_item_quality(0x0001);
			var0001 = script var0000 after 15 ticks {
				nohalt;
				call Func06B3;
			};
		}
		if (var0002 == 0x0001) {
			var0001 = Func0992(0x0001, "@I can go no further...@", "@Mine eyes are closing...@", true);
			var0003 = Func08B5();
			if (var0003) {
				var0004 = var0003->get_npc_object();
				var0004->set_item_flag(ASLEEP);
				var0004->set_schedule_type(SLEEP);
				var0005 = var0003->get_object_position();
				var0003->set_new_schedules(MIDNIGHT, SLEEP, var0005);
			} else {
				var0001 = var0000->set_item_quality(0x0002);
				AVATAR->clear_item_say();
				AVATAR->set_item_flag(DONT_MOVE);
				AVATAR->set_schedule_type(SLEEP);
			}
			var0001 = script var0000 after 15 ticks {
				nohalt;
				call Func06B3;
			};
		}
		if (var0002 == 0x0002) {
			var0001 = Func0992(0x0001, 0x0000, 0x0000, false);
			var0001->show_npc_face0(0x0000);
			if (var0001 == AVATAR) {
				say("\"I must stay awake...\"");
			} else {
				say("\"We must stay awake...\"");
			}
			var0001 = script AVATAR {
				nohalt;
				actor frame bowing;
				actor frame kneeling;
				actor frame sitting;
				actor frame sleeping;
				actor frame sleeping;
				actor frame sleeping;
				actor frame sleeping;
				actor frame sleeping;
				actor frame sleeping;
				actor frame sleeping;
				wait 5;
			};
			var0001 = var0000->set_item_quality(0x0003);
			var0001 = script var0000 after 5 ticks {
				nohalt;
				call Func06B3;
			};
		}
		if (var0002 == 0x0003) {
			var0006 = Func08B6();
			var0007 = AVATAR->get_npc_object();
			var0008 = Func0988(var0007, var0006);
			for (var000B in var0008 with var0009 to var000A) {
				var000C = var000B->get_npc_object();
				var000C->set_schedule_type(WAIT);
				var000D = UI_die_roll(-2, 2);
				var000E = UI_die_roll(-2, 2);
				var000C->move_object([(0x05B4 + var000D), (0x0652 + var000E), 0x0000]);
				var000C->set_new_schedules(MIDNIGHT, SLEEP, [(0x05B4 + var000D), (0x0652 + var000E), 0x0000]);
			}
			item->Func07D6();
			var000F = UI_die_roll(0x0001, 0x0004);
			var0010 = [0x0011, 0x05CE, 0x0000];
			if (var000F == 0x0001) {
				var0010 = [0x00AF, 0x056B, 0x0000];
			}
			if (var000F == 0x0002) {
				var0010 = [0x008B, 0x0459, 0x0000];
			}
			if (var000F == 0x0003) {
				var0010 = [0x0B53, 0x0463, 0x0000];
			}
			if (var000F == 0x0004) {
				var0010 = [0x0011, 0x05CE, 0x0000];
			}
			AVATAR->clear_item_flag(POISONED);
			UI_fade_palette(0x000C, 0x0001, 0x0000);
			AVATAR->move_object(var0010);
			var0001 = var0000->set_item_quality(0x0004);
			var0001 = script var0000 after 15 ticks {
				nohalt;
				call Func06B3;
			};
		}
		if (var0002 == 0x0004) {
			AVATAR->clear_item_flag(INVISIBLE);
			var0011 = 0x0000;
			var0012 = AVATAR->get_cont_items(SHAPE_ANY, QUALITY_ANY, FRAME_ANY);
			while (var0011 < 0x0002) {
				for (var0015 in var0012 with var0013 to var0014) {
					if (Func09A6(var0015) || (var0011 == 0x0001)) {
						var0001 = var0015->get_item_shape();
						if (!((var0001 == 0x01E6) || (var0001 == 0x025F))) {
							if (!var0015->set_last_created()) {
								Func092F(AVATAR, 0x0011);
							}
							if (!AUTO_3->give_last_created()) {
								Func092F(AVATAR, 0x0012);
							}
						}
					}
				}
				var0011 += 0x0001;
				var0012 = AVATAR->get_cont_items(SHAPE_ANY, QUALITY_ANY, FRAME_ANY);
			}
			var0001 = AVATAR->add_cont_items(0x0001, 0x0321, QUALITY_ANY, 0x0000, 0x0000);
			if (Func097D(AUTO_3, 0x0001, 0x0289, QUALITY_ANY, 0x0003)) {
				var0001 = AVATAR->add_cont_items(0x0001, 0x0289, QUALITY_ANY, 0x0003, 0x0000);
			}
			if (Func097D(AUTO_3, 0x0001, 0x017F, QUALITY_ANY, 0x0001)) {
				var0001 = AVATAR->add_cont_items(0x0001, 0x017F, QUALITY_ANY, 0x0001, 0x0000);
			}
			if (Func097D(AUTO_3, 0x0001, 0x0289, QUALITY_ANY, 0x000B)) {
				var0001 = AVATAR->add_cont_items(0x0001, 0x0289, QUALITY_ANY, 0x000B, 0x0000);
			}
			UI_fade_palette(0x000C, 0x0001, 0x0001);
			AVATAR->clear_item_flag(DONT_MOVE);
			UI_play_music(0x0018, Func09A0(0x0005, 0x0001));
			AVATAR->set_schedule_type(FOLLOW_AVATAR);
			var0001 = var0000->set_item_quality(0x0000);
		}
	}
}

extern void Func0922 0x922 (var var0000);

void Func06B4 object#(0x6B4) () {
	if (event == EGG) {
		Func0922(0x0002);
	}
}

void Func06B5 object#(0x6B5) () {
	var var0000;
	var var0001;
	var var0002;

	if (gflags[KNOWS_GOBLINS_HIDEOUT]) {
		if (!gflags[CREATED_BROWN_BOTTLE]) {
			var0000 = UI_create_new_object(0x0268);
			if (var0000) {
				var0000->set_item_frame(0x0009);
				var0000->clear_item_flag(TEMPORARY);
				var0001 = get_object_position();
				var0002 = UI_update_last_created(var0001);
				if (var0002) {
					gflags[CREATED_BROWN_BOTTLE] = true;
				}
			}
		}
	}
}

extern var Func0977 0x977 (var var0000);
extern void Func097F 0x97F (var var0000, var var0001, var var0002);

void Func06B6 object#(0x6B6) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;
	var var0008;
	var var0009;
	var var000A;
	var var000B;
	var var000C;
	var var000D;
	var var000E;
	var var000F;
	var var0010;
	var var0011;

	if (event == EGG) {
		var0000 = get_item_quality();
		var0001 = [];
		var0002 = [];
		if (var0000 == 0x0001) {
			var0001 = [0x06B1, 0x0751];
			var0002 = [0x002D, 0x001D];
		}
		if (var0000 == 0x0002) {
			var0001 = [0x07F0, 0x073F];
			var0002 = [0x001A, 0x0017];
		}
		var0003 = [0x0000, 0x0000, 0x0000];
		var0004 = UI_get_party_list();
		var0005 = UI_die_roll(0x0001, Func0977(var0004));
		var0006 = var0004[var0005];
		var0003 = var0006->get_object_position();
		var0007 = true;
		while (var0007) {
			var0003[0x0001] = var0001[0x0001] + UI_die_roll(0x0000, var0002[0x0001]);
			var0003[0x0002] = var0001[0x0002] + UI_die_roll(0x0000, var0002[0x0002]);
			if (UI_is_not_blocked(var0003, 0x02D1, 0x0000)) {
				var0007 = false;
			}
		}
		var0006->move_object(var0003);
		var0008 = ["@Whoa!@", "@Huh?@", "@What happened?@", "@Magic!@", "@Whoops...@", "@Watch out!@", "@Help!@"];
		var0009 = var0008[UI_get_random(UI_get_array_size(var0008))];
		Func097F(var0006, var0009, 0x0014);
		UI_sprite_effect(ANIMATION_TELEPORT2, var0003[0x0001], var0003[0x0002], 0x0000, 0x0000, 0x0000, LOOP_ONCE);
		var000A = find_nearby(0x0113, 0x001E, MASK_EGG);
		if (var000A) {
			for (var000D in var000A with var000B to var000C) {
				if (var000D->get_item_quality() == var0000) {
					var0003[0x0001] = var0001[0x0001] + UI_die_roll(0x0000, var0002[0x0001]);
					var0003[0x0002] = var0001[0x0002] + UI_die_roll(0x0000, var0002[0x0002]);
					UI_sprite_effect(ANIMATION_FROST_RING, var0003[0x0001], var0003[0x0002], 0x0000, 0x0000, 0x0000, LOOP_ONCE);
					UI_play_sound_effect(0x0030);
					var000D->move_object(var0003);
				}
			}
		}
		if (var0000 == 0x0001) {
			var000E = UI_find_nearby_avatar(0x0202);
			var000F = UI_get_array_size(var000E);
			if (var000F < 0x0003) {
				var0003[0x0001] = var0001[0x0001] + UI_die_roll(0x0000, var0002[0x0001]);
				var0003[0x0002] = var0001[0x0002] + UI_die_roll(0x0000, var0002[0x0002]);
				var0010 = UI_create_new_object2(0x0202, var0003);
				var0010->set_alignment(EVIL);
				var0010->set_schedule_type(IN_COMBAT);
				var0010->set_oppressor(AVATAR->get_npc_object());
				var0010->set_item_flag(SI_TOURNAMENT);
				var0010->set_item_flag(TEMPORARY);
				var0010->set_npc_id(0x0001);
				var0011 = var0010->get_npc_prop(HEALTH);
				var0007 = var0010->set_npc_prop(HEALTH, 1 - var0011);
				var0011 = var0010->get_npc_prop(STRENGTH);
				var0007 = var0010->set_npc_prop(STRENGTH, 0 - var0011);
				var0011 = var0010->get_npc_prop(DEXTERITY);
				var0007 = var0010->set_npc_prop(DEXTERITY, 5 - var0011);
			}
		}
	}
}

extern void Func08EE 0x8EE (var var0000);

void Func06B7 object#(0x6B7) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;

	if (!gflags[BANES_RELEASED]) {
		abort;
	}
	var0000 = get_object_position();
	var0001 = get_item_quality();
	if (var0001 > 0x0064) {
		var0001 = 0x0000 - (var0001 - 0x0064);
	}
	var0002 = get_item_quantity(0x0000);
	if (var0002 > 0x0064) {
		var0002 = 0x0000 - (var0002 - 0x0064);
	}
	var0003 = var0001 / 0x0004;
	var0004 = var0002 / 0x0004;
	var0005 = 0x0000;
	while (var0005 < 0x0004) {
		var0006 = UI_create_new_object(0x0390);
		if (var0006) {
			var0006->set_item_frame(var0005);
			var0007 = UI_update_last_created([(var0000[0x0001] + var0001), (var0000[0x0002] + var0002), 0x0000]);
			if (!var0007) {
				UI_error_message(" failed to create blood");
				abort;
			}
		}
		var0001 -= var0003;
		var0002 -= var0004;
		var0005 += 0x0001;
	}
	Func08EE(var0000);
	remove_item();
}

extern void Func08EE 0x8EE (var var0000);

void Func06B8 object#(0x6B8) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;
	var var0008;
	var var0009;
	var var000A;
	var var000B;

	if (!gflags[BANES_RELEASED]) {
		abort;
	}
	var0000 = get_object_position();
	if (get_item_quality() == 0x000D) {
		var0001 = [ 0,  0, -2,  2,  0];
		var0002 = [ 2, -2,  0,  0,  0];
		var0003 = 1;
		for (var0006 in var0001 with var0004 to var0005) {
			var0007 = UI_create_new_object(0x00E0);
			if (var0007) {
				var0007->set_item_frame(var0003);
				var0008 = UI_update_last_created([(var0000[0x0001] + var0006), (var0000[0x0002] + var0002[var0003]), var0000[0x0003]]);
				if (!var0008) {
					UI_error_message(" failed to create a burn mark!");
					abort;
				}
			}
			var0003 += 0x0001;
		}
		var0009 = UI_create_new_object(0x0339);
		if (var0009) {
			var000A = UI_die_roll(0x0004, 0x0006);
			var0009->set_item_frame(var000A);
			var0008 = UI_update_last_created(var0000);
		}
	}
	var0001 = [ 3,  3,  3,  3,  3,  3,  2,  1,  0, -1, -2, -2, -2, -2, -2, -2, -1,  0,  1,  2];
	var0002 = [-1,  0,  1,  2,  3,  4,  4,  4,  4,  4,  4,  3,  2,  1,  0, -1, -1, -1, -1, -1];
	var000B = UI_die_roll(0x0001, 0x0014);
	Func08EE([(var0000[0x0001] + var0001[var000B]), (var0000[0x0002] + var0002[var000B]), var0000[0x0003]]);
	remove_item();
}

extern var Func0988 0x988 (var var0000, var var0001);

void Func06B9 object#(0x6B9) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;

	var0000 = find_nearby(0x02EB, 0x0014, MASK_NONE);
	for (var0003 in var0000 with var0001 to var0002) {
		if (var0003->get_item_flag(SI_ZOMBIE)) {
			var0000 = Func0988(var0003, var0000);
		}
	}
	if (var0000) {
		// Bug: NPC numbers returned are always negative, hence this
		// will result in the *wrong* *function*.
		// It should be '0x400 - var0000->get_npc_number()' instead.
		var0004 = var0000->get_npc_number() + 0x0400;
		var0005 = script item {
			nohalt;
			call var0004;
		};
	}
}

void Func06BA object#(0x6BA) () {
	var var0000;
	var var0001;

	if (event == EGG) {
		var0000 = get_item_quality();
		if (var0000 == 0x0000) {
			AVATAR->clear_item_flag(FREEZE);
			var0001 = AVATAR->get_temperature();
			var0001 -= 0x0005;
			if (var0001 < 0x0000) {
				var0001 = 0x0000;
			}
			AVATAR->set_temperature(var0001);
		}
		if (var0000 == 0x0001) {
			AVATAR->set_item_flag(FREEZE);
		}
	}
}

extern var Func089D 0x89D (var var0000);

void Func06BB object#(0x6BB) () {
	var var0000;
	var var0001;
	var var0002;

	if (event == EGG) {
		if (gflags[IOLO_ACCUSED] || (gflags[DUPRE_ACCUSED] || gflags[SHAMINO_ACCUSED])) {
			var0000 = UI_find_nearby_avatar(0x0366);
			if (UI_get_array_size(var0000)) {
				var0001 = Func089D(var0000);
			}
			abort;
		}
		var0000 = UI_find_nearby_avatar(0x0366);
		var0002 = UI_find_nearby_avatar(0x0203);
		var0000 &= var0002;
		var0002 = [];
		var0001 = Func089D(var0000);
	}
}

extern var Func09A0 0x9A0 (var var0000, var var0001);
extern var Func0942 0x942 (var var0000);
extern var Func0992 0x992 (var var0000, var var0001, var var0002, var var0003);
extern var Func0940 0x940 (var var0000, var var0001);
extern void Func093E 0x93E (var var0000);
extern var Func099B 0x99B (var var0000, var var0001, var var0002, var var0003, var var0004, var var0005, var var0006);
extern void Func097F 0x97F (var var0000, var var0001, var var0002);

void Func06BC object#(0x6BC) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;
	var var0008;
	var var0009;

	var0000 = Func09A0(0x0002, 0x0001);
	var0001 = 0x0006;
	if (event == EGG) {
		if (gflags[IOLO_HAS_SUNG_FAWN]) {
			remove_item();
		}
		var0002 = get_item_quality();
		if ((!gflags[FAWN_INITIAL_STORM]) && Func0942(IOLO)) {
			UI_play_music(0x0017, Func09A0(0x0005, 0x0001));
			var0003 = var0000->set_item_quality(0x0000);
			gflags[FAWN_INITIAL_STORM] = true;
			UI_set_weather(RAIN);
			var0004 = Func0992(0x0001, "@Looks like a storm coming...@", 0x0000, true);
			var0003 = script var0000 after 30 ticks {
				nohalt;
				call Func06BC;
			};
		}
	}
	if (event == SCRIPTED) {
		var0002 = var0000->get_item_quality();
		if (var0002 < var0001) {
			var0003 = script var0000 after 10 ticks {
				nohalt;
				call Func06BC;
			};
			var0003 = var0000->set_item_quality(var0002 + 0x0001);
			var0005 = Func0940(AVATAR->get_object_position(), 0x000F);
			UI_play_sound_effect(0x0074);
			UI_sprite_effect(ANIMATION_PURPLE_BUBBLES, var0005[0x0001], var0005[0x0002], 0x0000, 0x0000, 0x0000, LOOP_ONCE);
			UI_sprite_effect(ANIMATION_LIGHTNING_RED, var0005[0x0001], var0005[0x0002], 0x0000, 0x0000, 0x0000, LOOP_ONCE);
			Func093E(var0005);
			var0006 = "@Run!@" & ("@'Tis a magic storm!@" & ("@Help!@" & ("@That almost hit me!@" & ("@Whoa!@" & "@I wish I were home!@"))));
			var0004 = Func0992(0x0001, var0006[UI_get_random(UI_get_array_size(var0006))], 0x0000, true);
			abort;
		}
		if (var0002 == var0001) {
			AVATAR->set_item_flag(DONT_MOVE);
			var0007 = UI_create_new_object(0x02B4);
			if (var0007) {
				var0007->set_item_frame(0x0002);
				var0008 = IOLO->get_object_position();
				var0008[0x0002] += 0x0001;
				var0003 = UI_update_last_created(var0008);
				if (var0003) {
					var0008[0x0001] -= var0008[0x0003] / 0x0002;
					var0008[0x0002] -= var0008[0x0003] / 0x0002;
					UI_sprite_effect(ANIMATION_PURPLE_BUBBLES, var0008[0x0001], var0008[0x0002], 0x0000, 0x0000, 0x0000, LOOP_ONCE);
					var0009 = IOLO->find_direction(var0007);
					var0003 = script IOLO {
						nohalt;
						wait 1;
						face var0009;
						say "@Look, Avatar!@";
						wait 5;
						actor frame bowing;
						wait 9;
						call Func06BC;
					};
					var0003 = var0000->set_item_quality(var0002 + 0x0001);
					UI_set_weather(CLEAR_WEATHER);
				} else {
					var0003 = script var0000 after 10 ticks {
						nohalt;
						call Func06BC;
					};
				}
			} else {
				var0003 = script var0000 after 10 ticks {
					nohalt;
					call Func06BC;
				};
			}
			abort;
		}
		if (var0002 == (var0001 + 0x0001)) {
			var0007 = IOLO->find_nearby(0x02B4, 0x0019, MASK_NONE);
			if (var0007) {
				var0007->remove_item();
				var0003 = Func099B(IOLO, 0x0001, 0x02B4, 0x0000, 0x0002, 0x0000, false);
			}
			var0003 = script IOLO {
				nohalt;
				actor frame standing;
			};
			var0003 = script var0000 after 3 ticks {
				nohalt;
				call Func06BC;
			};
			var0003 = var0000->set_item_quality(var0002 + 0x0001);
			AVATAR->clear_item_flag(DONT_MOVE);
			Func097F(IOLO, "@A lute!@", 0x0000);
		}
		if (var0002 == (var0001 + 0x0002)) {
			var0003 = var0000->set_item_quality(var0002 + 0x0001);
			var0003 = script Func09A0(0x0005, 0x0001) after 45 ticks {
				nohalt;
				call Func043A;
			};
			var0003 = DELPHYNIA->approach_avatar(0x0078, 0x0028);
			if (var0003) {
				DELPHYNIA->set_schedule_type(HOUND);
				Func097F(DELPHYNIA, "@The storm is over!@", 0x0000);
			}
			var0003 = script var0000 after 10 ticks {
				nohalt;
				call Func06BC;
			};
		}
		if (var0002 == (var0001 + 0x0003)) {
			var0003 = var0000->set_item_quality(var0002 + 0x0001);
			var0003 = JORVIN->approach_avatar(0x0078, 0x0028);
			if (var0003) {
				JORVIN->set_schedule_type(HOUND);
				Func097F(JORVIN, "@All is safe now!@", 0x0000);
			}
			var0003 = script var0000 after 10 ticks {
				nohalt;
				call Func06BC;
			};
		}
		if (var0002 == (var0001 + 0x0004)) {
			var0003 = KYLISTA->approach_avatar(0x0078, 0x0028);
			if (var0003) {
				KYLISTA->set_schedule_type(HOUND);
				Func097F(KYLISTA, "@Praise Beauty!@", 0x0000);
			}
		}
	}
}

extern var Func0942 0x942 (var var0000);

void Func06BF object#(0x6BF) () {
	var var0000;
	var var0001;
	var var0002;

	if (event == EGG) {
		var0000 = UI_is_pc_female();
		var0001 = Func0942(ZULITH);
		if (var0000 && (gflags[HAVE_WOLF_TATTOO] && (!var0001))) {
			var0002 = UI_summon(0x017D, false);
			var0002->set_schedule_type(HOUND);
		}
	}
}

void Func06C0 object#(0x6C0) () {
	var var0000;
	var var0001;

	if (gflags[BANES_RELEASED]) {
		remove_item();
		abort;
	}
	var0000 = UI_part_of_day();
	if ((event == EGG) && ((var0000 > EARLY) && (var0000 < EVENING))) {
		var0001 = script AVATAR after 5 ticks {
			// Bug: the next line should probably be 'music 26', but it
			// lacks the continuous flag.
			// It works because it seems that original pulls zeroes from
			// after the end of the script.
			raw((byte)0x54); raw(0x001A);
		};
		if (!LEON->is_dead()) {
			LEON->move_object([0x0498, 0x0765, 0x0000]);
			LEON->set_item_frame(0x0010);
			LEON->set_schedule_type(LOITER);
			var0001 = script LEON {
				nohalt;
				wait 24;
				say "@Go in Unity!@";
				wait 48;
				say "@Come again@";
			};
		}
		if (!KALEN->is_dead()) {
			KALEN->move_object([0x0493, 0x076A, 0x0000]);
			KALEN->set_schedule_type(LOITER);
			var0001 = script KALEN {
				nohalt;
				wait 16;
				say "@Very uplifting...@";
			};
		}
		if (!RUGGS->is_dead()) {
			RUGGS->move_object([0x0496, 0x076B, 0x0000]);
			RUGGS->set_schedule_type(LOITER);
			var0001 = script RUGGS {
				nohalt;
				wait 32;
				say "@The Fellowship is the way...@";
			};
		}
		if (!SCOTS->is_dead()) {
			SCOTS->move_object([0x049B, 0x0769, 0x0000]);
			SCOTS->set_schedule_type(LOITER);
			var0001 = script KYLISTA {
				nohalt;
				wait 64;
				say "@Good sermon, Leon...@";
			};
		}
		if (!ALYSSAND->is_dead()) {
			ALYSSAND->move_object([0x049C, 0x076F, 0x0000]);
			ALYSSAND->set_schedule_type(LOITER);
			var0001 = script ALYSSAND {
				nohalt;
				wait 48;
				say "@His words are truth!@";
			};
		}
		remove_item();
	}
}

extern void Func00F9 shape#(0xF9) ();

void Func06C1 object#(0x6C1) () {
	var var0000;

	if (event == EGG) {
		if (!gflags[FAWN_TRIAL_DONE_FIRST_DAY]) {
			var0000 = UI_game_hour();
			if ((var0000 > 0x0006) && (var0000 < 0x0014)) {
				item->Func00F9();
			}
		} else {
			item->Func00F9();
		}
	}
}

void Func06C2 object#(0x6C2) () {
	var var0000;

	if (event == EGG) {
		var0000 = script AVATAR {
			nohalt;
			call Func0437;
		};
	}
	if (event == SCRIPTED) {
		var0000 = script AVATAR {
			nohalt;
			call Func0437;
		};
	}
}

void Func06C3 object#(0x6C3) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;
	var var0008;
	var var0009;

	var0000 = UI_find_nearby_avatar(0x00E4);
	if (UI_get_array_size(var0000) > 0x0000) {
		abort;
	}
	var0001 = 0x04C1;
	var0002 = 0x04CE;
	var0003 = 0x0841;
	var0004 = 0x084E;
	var0005 = AVATAR->get_object_position();
	var0006 = get_object_position();
	if ((var0005[0x0001] > var0001) && ((var0005[0x0001] < var0002) && ((var0005[0x0002] > var0003) && (var0005[0x0002] < var0004)))) {
		var0006[0x0002] += 0x001E;
	}
	var0007 = false;
	var0008 = 0x0000;
	while (var0008 < 0x0008) {
		if (var0008 < 0x0003) {
			var0009 = UI_create_new_object2(0x00E4, [(var0006[0x0001] + var0008), (var0006[0x0002] + var0008), 0x0000]);
			var0009->set_item_flag(TEMPORARY);
			var0009->set_schedule_type(TEND_SHOP);
		} else if (var0008 < 0x0005) {
			if (var0007) {
				var0009 = UI_create_new_object2(0x00E4, [0x04CA, 0x0846, 0x0006]);
			} else {
				var0009 = UI_create_new_object2(0x00E4, [0x04C9, 0x084C, 0x0006]);
				var0007 = true;
			}
			var0009->set_item_flag(TEMPORARY);
			var0009->set_schedule_type(SLEEP);
		} else {
			var0009 = UI_create_new_object2(0x00E4, [(var0006[0x0001] - (var0008 / 0x0002)), (var0006[0x0002] - (var0008 / 0x0002)), 0x0000]);
			var0009->set_item_flag(TEMPORARY);
			var0009->set_schedule_type(WANDER);
		}
		var0009->set_npc_id(0x0001);
		var0008 += 0x0001;
	}
}

extern void Func0862 0x862 ();
extern var Func097D 0x97D (var var0000, var var0001, var var0002, var var0003, var var0004);
extern var Func09A0 0x9A0 (var var0000, var var0001);
extern void Func097F 0x97F (var var0000, var var0001, var var0002);
extern void Func09AD 0x9AD (var var0000);
extern void Func09AC 0x9AC (var var0000, var var0001, var var0002, var var0003);

void Func06C4 object#(0x6C4) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;
	var var0008;
	var var0009;
	var var000A;

	var0000 = SELINA->get_item_flag(IN_PARTY);
	if (gflags[POST_MINT_AMBUSH]) {
		if (var0000) {
			SELINA->show_npc_face0(0x0000);
			say("\"We are attacked again! Now that we have the gold, I think that it is time for me to use my Blink Ring to escape.\"");
			say("\"I shall see thee at the inn!\"");
			var0001 = SELINA->get_object_position();
			UI_sprite_effect(ANIMATION_TELEPORT, var0001[0x0001], var0001[0x0002], 0x0000, 0x0000, 0x0000, LOOP_ONCE);
			SELINA->remove_from_party();
			Func0862();
			SELINA->remove_npc();
		}
		WILFRED->set_new_schedules([MIDNIGHT, MORNING, NOON, AFTERNOON, NIGHT], [SLEEP, EAT_AT_INN, TEND_SHOP, WANDER, EAT_AT_INN], [0x0516, 0x08F7, 0x04F7, 0x08CC, 0x050D, 0x08B6, 0x0516, 0x08A2, 0x04F7, 0x08CC]);
		WILFRED->run_schedule();
		abort;
	}
	var0002 = Func097D(PARTY, 0x0001, 0x0286, QUALITY_ANY, 0x0002);
	var0003 = SELINA->find_nearby(0x0202, 0x001E, MASK_NONE);
	if (var0002) {
		gflags[GOT_GOLD_BARS] = true;
	}
	if (var0002 && var0000) {
		if (get_item_shape() == 0x0113) {
			remove_item();
		}
		if (var0003) {
			var0004 = script Func09A0(0x0005, 0x0001) after 33 ticks {
				nohalt;
				call Func06C4;
			};
		} else {
			var0005 = AVATAR->get_object_position();
			var0005[0x0002] -= 0x0014;
			var0006 = UI_create_new_object2(0x0202, var0005);
			if (var0006) {
				var0006->set_polymorph(0x0202);
				var0006->reduce_health(0x0032, NORMAL_DAMAGE);
			}
			Func097F(SELINA, "@Oh, my!@", 0x0000);
			gflags[POST_MINT_AMBUSH] = true;
			var0004 = script Func09A0(0x0005, 0x0001) after 7 ticks {
				nohalt;
				call Func06C4;
			};
			var0007 = [LOAF1, LOAF2, LOAF3, LOAF4, LOAF5, LOAF6];
			for (var000A in var0007 with var0008 to var0009) {
				var0004 = var000A->approach_avatar(0x0078, 0x0028);
				Func09AD(var000A);
				Func09AC(var000A, -1, 0, IN_COMBAT);
			}
		}
	}
}

extern var Func09A0 0x9A0 (var var0000, var var0001);

void Func06C5 object#(0x6C5) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;

	var0000 = find_nearest(0x03B5, 0x0014);
	var0001 = find_nearby(0x01C2, 0x0001, MASK_NONE);
	if (UI_get_array_size(var0001) > 0x0000) {
		for (var0004 in var0001 with var0002 to var0003) {
			if (var0000 && (var0000->get_item_quality() == 0x00C8)) {
				var0005 = var0004->get_item_frame();
				if (var0005 == 0x0001) {
					var0006 = var0000->set_item_quality(0x00CB);
					UI_play_sound_effect(0x0039);
					UI_play_music(0x0010, Func09A0(0x0005, 0x0001));
				}
				if (var0005 == 0x0002) {
					var0006 = var0000->set_item_quality(0x00C9);
					UI_play_sound_effect(0x0039);
					UI_play_music(0x0017, Func09A0(0x0005, 0x0001));
				}
			}
		}
	} else if (var0000) {
		UI_set_weather(CLEAR_WEATHER);
		var0006 = var0000->set_item_quality(0x00C8);
	}
}

extern void Func0922 0x922 (var var0000);

void Func06C6 object#(0x6C6) () {
	var var0000;
	var var0001;
	var var0002;

	var0000 = get_item_quality();
	if (var0000 == 0x0001) {
		var0001 = 0x03A1;
	}
	if (var0000 == 0x0002) {
		var0001 = 0x01C8;
	}
	if (var0000 == 0x0003) {
		var0001 = 0x022B;
	}
	if (var0000 == 0x0004) {
		var0001 = 0x022F;
	}
	if (var0000 == 0x0005) {
		var0001 = 0x0289;
	}
	var0002 = find_nearby(var0001, 0x0001, MASK_NONE);
	if (UI_get_array_size(var0002) == 0x0000) {
		if (var0000 == 0x0001) {
			gflags[FOUND_PHILANDERERS_FRIEND] = true;
			remove_item();
		}
		if (var0000 == 0x0002) {
			gflags[FOUND_FLUX_ANALYZER] = true;
			remove_item();
		}
		if (var0000 == 0x0003) {
			gflags[AVATAR_HAS_JAWBONE] = true;
			remove_item();
		}
		if (var0000 == 0x0004) {
			UI_error_message(["WARNING: remove this egg at ", get_object_position()]);
			abort;
			// Dead code
			gflags[RETURNED_GWANI_AMULET] = true;
			remove_item();
		}
		if (var0000 == 0x0005) {
			remove_item();
			Func0922(0x000B);
			gflags[TOLD_TO_FREE_GWENNO] = true;
		}
	}
}

void Func06C7 object#(0x6C7) () {
	var var0000;
	var var0001;
	var var0002;

	if (gflags[CORRECT_SALT_TIDES] || (UI_get_timer(0x0001) > 0x0005)) {
		var0000 = get_object_position();
		var0001 = UI_create_new_object(0x034A);
		if (var0001) {
			var0001->set_item_frame(0x0003);
			var0001->clear_item_flag(TEMPORARY);
			var0001 = var0001->set_item_quantity(get_item_quality());
			var0002 = UI_update_last_created(var0000);
			if (var0002) {
				remove_item();
			}
		}
	}
}

void Func06C8 object#(0x6C8) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;

	var0000 = UI_get_array_size(find_nearby(0x0113, 0x0005, MASK_EGG));
	if (var0000 < 0x0002) {
		var0001 = find_nearby(0x034A, 0x0001, MASK_NONE);
		for (var0004 in var0001 with var0002 to var0003) {
			if (var0004->get_item_frame() == 0x0003) {
				abort;
			}
		}
		gflags[HAVE_FRESH_MANDRAKE] = true;
		remove_item();
	}
}

void Func06C9 object#(0x6C9) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;
	var var0008;

	var0000 = get_item_quality();
	var0001 = UI_game_hour();
	var0002 = get_object_position();
	if (gflags[ERNESTO_IS_DEAD] == false) {
		var0003 = 0x0001;
		var0004 = find_nearest(0x0103, 0x0050);
		for (var0007 in var0004 with var0005 to var0006) {
			if (var0007->get_npc_id() == 0x0001) {
				var0003 = 0x0000;
			}
		}
		if ((var0001 < 0x0007) && ((var0000 == 0x0001) && var0003)) {
			var0008 = UI_create_new_object2(0x0103, var0002);
			var0008->set_schedule_type(SLEEP);
			var0008->set_npc_id(0x0001);
			var0008->set_item_flag(SI_TOURNAMENT);
		}
		if ((var0001 > 0x0007) && ((var0001 < 0x000F) && var0003)) {
			var0008 = UI_create_new_object2(0x0103, var0002);
			var0008->set_schedule_type(TEND_SHOP);
			var0008->set_npc_id(0x0001);
			var0008->set_item_flag(SI_TOURNAMENT);
		}
		if ((var0001 > 0x0010) && ((var0001 < 0x0014) && var0003)) {
			var0008 = UI_create_new_object2(0x0103, var0002);
			var0008->set_schedule_type(PATROL);
			var0008->set_npc_id(0x0001);
			var0008->set_item_flag(SI_TOURNAMENT);
		}
		if ((var0001 > 0x0013) && var0003) {
			var0008 = UI_create_new_object2(0x0103, var0002);
			var0008->set_schedule_type(TEND_SHOP);
			var0008->set_npc_id(0x0001);
			var0008->set_item_flag(SI_TOURNAMENT);
		}
	}
}

extern var Func09A0 0x9A0 (var var0000, var var0001);

void Func06CA object#(0x6CA) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;
	var var0008;
	var var0009;
	var var000A;
	var var000B;
	var var000C;
	var var000D;
	var var000E;
	var var000F;
	var var0010;
	var var0011;
	var var0012;
	var var0013;
	var var0014;
	var var0015;
	var var0016;
	var var0017;
	var var0018;
	var var0019;
	var var001A;
	var var001B;
	var var001C;
	var var001D;

	var0000 = get_object_position();
	var0001 = var0000[0x0001];
	var0002 = var0000[0x0002];
	var0003 = find_nearby(0x01DB, 0x000C, MASK_ALL_UNSEEN);
	var0003 &= find_nearby(0x02D8, 0x000C, MASK_ALL_UNSEEN);
	var0004 = [0x0000, 0x0000, 0x0000, 0x0000];
	var0005 = [0x0000, 0x0000, 0x0000, 0x0000];
	for (var0008 in var0003 with var0006 to var0007) {
		var0009 = var0008->get_object_position();
		var000A = var0009[0x0001];
		var000B = var0009[0x0002];
		var000C = var000A - var0001;
		var000D = var000B - var0002;
		if (var000D < -5) {
			var0004[0x0001] = 0x0001;
			var0005[0x0001] = var0008;
		}
		if (var000C >  5) {
			var0004[0x0002] = 0x0001;
			var0005[0x0002] = var0008;
		}
		if (var000D >  5) {
			var0004[0x0003] = 0x0001;
			var0005[0x0003] = var0008;
		}
		if (var000C < -5) {
			var0004[0x0004] = 0x0001;
			var0005[0x0004] = var0008;
		}
	}
	var000E = find_nearby(0x0216, 0x000C, MASK_ALL_UNSEEN);
	var000F = [0x0000, 0x0000, 0x0000, 0x0000];
	var0010 = [0x0000, 0x0000, 0x0000, 0x0000];
	for (var0013 in var000E with var0011 to var0012) {
		var0014 = var0013->get_object_position();
		var000A = var0014[0x0001];
		var000B = var0014[0x0002];
		var000C = var000A - var0001;
		var000D = var000B - var0002;
		if (var000D < -5) {
			var000F[0x0001] = 0x0001;
			var0010[0x0001] = var0013;
		}
		if (var000C >  5) {
			var000F[0x0002] = 0x0001;
			var0010[0x0002] = var0013;
		}
		if (var000D >  5) {
			var000F[0x0003] = 0x0001;
			var0010[0x0003] = var0013;
		}
		if (var000C < -5) {
			var000F[0x0004] = 0x0001;
			var0010[0x0004] = var0013;
		}
	}
	var0015 = get_item_quality();
	var0016 = 0x0000;
	var0017 = 0x0000;
	if ((var0015 == 0x0001) || ((var0015 == 0x0003) || ((var0015 == 0x0005) || ((var0015 == 0x0007) || ((var0015 == 0x0009) || ((var0015 == 0x000B) || ((var0015 == 0x000D) || (var0015 == 0x000F)))))))) {
		if (var0004[0x0001] == 0x0000) {
			var0010[0x0001]->remove_item();
			UI_play_sound_effect(0x0025);
			var0018 = UI_create_new_object(0x02D8);
			var0018->set_item_frame(0x0004);
			var0018->clear_item_flag(TEMPORARY);
			var0016 =  2;
			var0017 = -8;
			var0019 = UI_update_last_created([(var0001 + var0016), (var0002 + var0017), 0x0000]);
		} else {
			var0005[0x0001]->remove_item();
			var001A = UI_create_new_object(0x0216);
			var001A->set_item_frame(0x0000);
			var001A->clear_item_flag(TEMPORARY);
			var0019 = UI_update_last_created([(var0001 + 0x0002), (var0002 - 0x0008), 0x0000]);
		}
	}
	if ((var0015 == 0x0002) || ((var0015 == 0x0003) || ((var0015 == 0x0006) || ((var0015 == 0x0007) || ((var0015 == 0x000A) || ((var0015 == 0x000B) || ((var0015 == 0x000E) || (var0015 == 0x000F)))))))) {
		if (var0004[0x0002] == 0x0000) {
			var0010[0x0002]->remove_item();
			UI_play_sound_effect(0x0025);
			var0018 = UI_create_new_object(0x01DB);
			var0018->set_item_frame(0x000A);
			var0018->clear_item_flag(TEMPORARY);
			var0016 = 0x0008;
			var0017 = 0x0002;
			var0019 = UI_update_last_created([(var0001 + var0016), (var0002 + var0017), 0x0000]);
		} else {
			var0005[0x0002]->remove_item();
			var001A = UI_create_new_object(0x0216);
			var001A->set_item_frame(0x0000);
			var001A->clear_item_flag(TEMPORARY);
			var0019 = UI_update_last_created([(var0001 + 0x0008), (var0002 + 0x0002), 0x0000]);
		}
	}
	if ((var0015 == 0x0004) || ((var0015 == 0x0005) || ((var0015 == 0x0006) || ((var0015 == 0x0007) || ((var0015 == 0x000C) || ((var0015 == 0x000D) || ((var0015 == 0x000E) || (var0015 == 0x000F)))))))) {
		if (var0004[0x0003] == 0x0000) {
			var0010[0x0003]->remove_item();
			UI_play_sound_effect(0x0025);
			var0018 = UI_create_new_object(0x02D8);
			var0018->set_item_frame(0x0004);
			var0018->clear_item_flag(TEMPORARY);
			var0016 = 0x0002;
			var0017 = 0x0008;
			var0019 = UI_update_last_created([(var0001 + var0016), (var0002 + var0017), 0x0000]);
		} else {
			var0005[0x0003]->remove_item();
			var001A = UI_create_new_object(0x0216);
			var001A->set_item_frame(0x0000);
			var001A->clear_item_flag(TEMPORARY);
			var001B = UI_update_last_created([(var0001 + 0x0002), (var0002 + 0x0008), 0x0000]);
		}
	}
	if ((var0015 == 0x0008) || ((var0015 == 0x0009) || ((var0015 == 0x000A) || ((var0015 == 0x000B) || ((var0015 == 0x000C) || ((var0015 == 0x000D) || ((var0015 == 0x000E) || (var0015 == 0x000F)))))))) {
		if (var0004[0x0004] == 0x0000) {
			var0010[0x0004]->remove_item();
			UI_play_sound_effect(0x0025);
			var0018 = UI_create_new_object(0x01DB);
			var0018->set_item_frame(0x000A);
			var0018->clear_item_flag(TEMPORARY);
			var0016 = -8;
			var0017 =  2;
			var0019 = UI_update_last_created([(var0001 + var0016), (var0002 + var0017), 0x0000]);
		} else {
			var0005[0x0004]->remove_item();
			var001A = UI_create_new_object(0x0216);
			var001A->set_item_frame(0x0000);
			var001A->clear_item_flag(TEMPORARY);
			var001B = UI_update_last_created([(var0001 - 0x0008), (var0002 + 0x0002), 0x0000]);
		}
	}
	var0003 = find_nearby(0x01DB, 0x000C, MASK_ALL_UNSEEN);
	var0003 &= find_nearby(0x02D8, 0x000C, MASK_ALL_UNSEEN);
	var0004 = [0x0000, 0x0000, 0x0000, 0x0000];
	for (var0008 in var0003 with var001C to var001D) {
		var0009 = var0008->get_object_position();
		var000A = var0009[0x0001];
		var000B = var0009[0x0002];
		var000C = var000A - var0001;
		var000D = var000B - var0002;
		if (var000D < -5) {
			var0004[0x0001] = 0x0001;
		}
		if (var000C >  5) {
			var0004[0x0002] = 0x0001;
		}
		if (var000D >  5) {
			var0004[0x0003] = 0x0001;
		}
		if (var000C < -5) {
			var0004[0x0004] = 0x0001;
		}
	}
	if ((var0004[0x0001] == 0x0001) && ((var0004[0x0002] == 0x0001) && ((var0004[0x0003] == 0x0001) && (var0004[0x0004] == 0x0001)))) {
		UI_play_music(0x0004, Func09A0(0x0005, 0x0001));
	}
}

void Func06CB object#(0x6CB) () {
	AVATAR->set_item_flag(DONT_MOVE);
	UI_end_conversation();
	AVATAR->set_polymorph(0x00EF);
	remove_item();
}

extern void Func09AD 0x9AD (var var0000);

void Func06CC object#(0x6CC) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;

	if (event == EGG) {
		var0000 = get_object_position();
		var0001 = UI_create_new_object2(0x02FB, var0000);
		if (var0001) {
			Func09AD(var0001);
			var0002 = UI_create_new_object(0x034A);
			if (var0002) {
				var0002->set_item_frame(0x000A);
				var0002->set_item_flag(OKAY_TO_TAKE);
				var0003 = var0001->give_last_created();
			}
		}
		var0004 = get_item_quality();
		var0004 -= 0x0001;
		if (var0004 > 0x0001) {
			var0003 = set_item_quality(var0004);
		} else {
			remove_item();
		}
	}
}

void Func06CD object#(0x6CD) () {
	var var0000;
	var var0001;

	if (gflags[BANES_RELEASED]) {
		var0000 = UI_create_new_object(0x03E6);
		if (var0000) {
			var0000->clear_item_flag(TEMPORARY);
			var0000->set_item_frame(0x0006);
			var0001 = UI_update_last_created(get_object_position());
			if (var0001) {
				remove_item();
			}
		}
	}
}

extern void Func09A3 0x9A3 (var var0000);
extern void Func09AD 0x9AD (var var0000);
extern void Func097F 0x97F (var var0000, var var0001, var var0002);
extern void Func0971 0x971 (var var0000);
extern void Func07D2 object#(0x7D2) ();

void Func06CE object#(0x6CE) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;
	var var0008;
	var var0009;
	var var000A;
	var var000B;
	var var000C;
	var var000D;
	var var000E;
	var var000F;
	var var0010;
	var var0011;
	var var0012;
	var var0013;
	var var0014;
	var var0015;
	var var0016;
	var var0017;

	if (event == EGG) {
		var0000 = get_item_quality();
		if (var0000 == 0x0000) {
			var0001 = find_nearby(0x01FB, 0x0014, MASK_NONE);
			for (var0004 in var0001 with var0002 to var0003) {
				var0005 = var0004->get_object_position();
				var0005[0x0001] -= var0005[0x0003] / 0x0002;
				var0005[0x0002] -= var0005[0x0003] / 0x0002;
				UI_sprite_effect(ANIMATION_MEDIUM_BLAST, var0005[0x0001], var0005[0x0002], 0x0000, 0x0000, 0x0000, LOOP_ONCE);
				UI_play_sound_effect(0x002A);
			}
			for (var0004 in var0001 with var0006 to var0007) {
				var0005 = var0004->get_object_position();
				Func09A3(var0004);
				var0008 = UI_create_new_object2(0x0210, var0005);
				Func09AD(var0008);
			}
			Func097F(AVATAR, "@Uh-oh...@", 0x0005);
		}
		if (var0000 == 0x0001) {
			var0009 = find_nearby(0x03D1, 0x0014, MASK_NONE);
			for (var000C in var0009 with var000A to var000B) {
				var0005 = var000C->get_object_position();
				var0005[0x0001] -= var0005[0x0003] / 0x0002;
				var0005[0x0002] -= var0005[0x0003] / 0x0002;
				UI_sprite_effect(ANIMATION_TELEPORT2, var0005[0x0001], var0005[0x0002], 0x0000, 0x0000, 0x0000, LOOP_ONCE);
				UI_play_sound_effect(0x0077);
			}
			for (var000C in var0009 with var000D to var000E) {
				var0005 = var000C->get_object_position();
				Func0971(var000C);
				var000F = UI_create_new_object2(0x02F2, var0005);
				Func09AD(var000F);
			}
			Func097F(AVATAR, "@By the Virtues!@", 0x0005);
		}
		if (var0000 == 0x0002) {
			var0001 = find_nearby(0x0356, 0x001E, MASK_NONE);
			for (var0004 in var0001 with var0010 to var0011) {
				var0005 = var0004->get_object_position();
				var0005[0x0001] -= var0005[0x0003] / 0x0002;
				var0005[0x0002] -= var0005[0x0003] / 0x0002;
				UI_sprite_effect(ANIMATION_PURPLE_BUBBLES, var0005[0x0001], var0005[0x0002], 0x0000, 0x0000, 0x0000, LOOP_ONCE);
				UI_play_sound_effect(0x005F);
			}
			for (var0004 in var0001 with var0012 to var0013) {
				var0005 = var0004->get_object_position();
				Func09A3(var0004);
				var0008 = UI_create_new_object2(0x0226, var0005);
				Func09AD(var0008);
				var0008->Func07D2();
			}
			Func097F(AVATAR, "@By the Virtues!@", 0x0005);
		}
		if (var0000 == 0x0003) {
			var0001 = find_nearby(0x0356, 0x0008, MASK_NONE);
			for (var0004 in var0001 with var0014 to var0015) {
				var0005 = var0004->get_object_position();
				var0005[0x0001] -= var0005[0x0003] / 0x0002;
				var0005[0x0002] -= var0005[0x0003] / 0x0002;
				UI_sprite_effect(ANIMATION_PURPLE_BUBBLES, var0005[0x0001], var0005[0x0002], 0x0000, 0x0000, 0x0000, LOOP_ONCE);
				UI_play_sound_effect(0x005F);
			}
			for (var0004 in var0001 with var0016 to var0017) {
				var0005 = var0004->get_object_position();
				Func09A3(var0004);
				var0008 = UI_create_new_object2(0x0226, var0005);
				Func09AD(var0008);
				var0008->Func07D2();
			}
		}
	}
}

extern void Func097F 0x97F (var var0000, var var0001, var var0002);

void Func06CF object#(0x6CF) () {
	var var0000;

	if (event == EGG) {
		FITCH->item_say("@Help me...@");
		var0000 = script AVATAR after 10 ticks {
			nohalt;
			call Func06CF;
		};
	}
	if (event == SCRIPTED) {
		FITCH_FACE->show_npc_face0(0x0000);
		say("\"Oh, the pain... The end is near...\"");
		converse (["Who art thou?", "What happened?"]) {
			case "Who art thou?":
				say("\"Me name's Fitch. Me and me mates were trappers for Hazard.\"");
				remove("Who art thou?");
				fallthrough;

			case "What happened?":
				say("\"Several days ago we were camped in a nearby cave when we were attacked by a terrible sorceress.\"");
				say("Evil she was, striking men dead before we knew what was upon us. We slew her, though she took many men with her even as she fell. Only I survived, though I fear not for long.\"");
				remove("What happened?");
				add("Rest easy.");
				fallthrough;

			case "Rest easy.":
				say("\"I am glad thou didst find me. I'd have hated to have died out here alone...\"");
				Func097F(FITCH, "@The pain!@", 0x0000);
				UI_remove_npc_face0();
				UI_remove_npc_face1();
				var0000 = script FITCH after 5 ticks {
					nohalt;
					hit 50, normal_damage;
				};
				break;
		}
	}
}

extern void Func0922 0x922 (var var0000);

void Func06D0 object#(0x6D0) () {
	if (VASCULIO->get_item_flag(DEAD)) {
		remove_item();
	} else {
		Func0922(0x000D);
		gflags[TOLD_TO_KILL_VASCULIO] = true;
	}
}

extern var Func09A0 0x9A0 (var var0000, var var0001);
extern var Func097D 0x97D (var var0000, var var0001, var var0002, var var0003, var var0004);
extern void Func07D1 object#(0x7D1) ();
extern void Func07D2 object#(0x7D2) ();
extern void Func097F 0x97F (var var0000, var var0001, var var0002);

void Func06D1 object#(0x6D1) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;

	if (event == EGG) {
		if (!gflags[SHAMINOS_KEEP_BARRIERS_GONE]) {
			abort;
		}
		var0000 = script Func09A0(0x0005, 0x0001) after 5 ticks {
			nohalt;
			call Func06D1;
		};
		remove_item();
		abort;
	}
	if (event == SCRIPTED) {
		var0001 = AVATAR->get_object_position();
		var0000 = AVATAR->find_nearby(0x019E, 0x001E, MASK_NONE);
		var0002 = false;
		for (var0005 in var0000 with var0003 to var0004) {
			if (var0005->get_item_frame() == 0x0015) {
				var0002 = var0005;
			}
		}
		var0006 = 0x0064;
		if (var0002) {
			var0006 = var0002->get_distance(AVATAR);
		}
		if ((var0001[0x0003] > 0x0005) && ((var0006 < 0x0006) || Func097D(PARTY, QUANTITY_ANY, 0x019E, QUALITY_ANY, 0x0015))) {
			AVATAR->set_item_flag(DONT_MOVE);
			UI_end_conversation();
			var0001 = AVATAR->get_object_position();
			var0001[0x0001] += 0x0005;
			UI_sprite_effect(ANIMATION_TELEPORT, (var0001[0x0001] - 0x0003), (var0001[0x0002] - 0x0003), 0x0000, 0x0000, 0x0000, LOOP_ONCE);
			BRACCUS->move_object(var0001);
			UI_play_sound_effect(0x0051);
			BRACCUS->Func07D1();
			BRACCUS->Func07D2();
			Func097F(BRACCUS, "@Hero...@", 0x0002);
			UI_play_music(0x003F, Func09A0(0x0005, 0x0001));
			var0000 = script BRACCUS after 14 ticks {
				nohalt;
				call Func04D4;
			};
		} else {
			var0000 = script Func09A0(0x0005, 0x0001) after 2 ticks {
				nohalt;
				call Func06D1;
			};
		}
	}
}

void Func06D2 object#(0x6D2) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;

	var0000 = find_nearby(0x0151, 0x0019, MASK_NONE);
	if (var0000) {
		abort;
	}
	var0001 = get_object_position();
	var0002 = 0x0004;
	while (var0002 > 0x0000) {
		var0001[0x0001] = (var0001[0x0001] - 0x0008) + (var0002 * 0x0002);
		var0003 = UI_create_new_object2(0x0151, var0001);
		if (var0003) {
			var0003->set_schedule_type(LOITER);
			var0003->set_alignment(NEUTRAL);
			var0003->set_item_flag(SI_TOURNAMENT);
			var0003->set_npc_id(var0002);
		}
		var0002 -= 0x0001;
	}
	if (var0003) {
		var0003->set_schedule_type(PATROL);
	}
}

void Func06D3 object#(0x6D3) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;

	var0000 = find_nearby(0x0151, 0x0019, MASK_NONE);
	var0001 = get_item_quality();
	if (var0000) {
		abort;
	}
	var0002 = get_object_position();
	var0003 = UI_create_new_object2(0x0151, var0002);
	if (var0003) {
		var0003->set_schedule_type(LOITER);
		var0003->set_alignment(NEUTRAL);
		var0003->set_npc_id(var0001);
	}
}

void Func06D4 object#(0x6D4) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;

	var0000 = UI_find_nearby_avatar(0x010F) & UI_find_nearby_avatar(0x0110);
	for (var0003 in var0000 with var0001 to var0002) {
		var0004 = var0003->get_object_position();
		UI_sprite_effect(ANIMATION_PURPLE_BUBBLES, var0004[0x0001], var0004[0x0002], 0x0000, 0x0000, 0x0000, LOOP_ONCE);
		if (var0004[0x0003] < 0x0001) {
			var0005 = script var0003 {
				// Bug: this is invalid and does nothing. Maybe it was
				// supposed to be 'call Func0607'? As is, it becomes two
				// opcodes (0x07 followed by 0x06), both of which are
				// invalid and does nothing.
				raw(0x0607);
				// This is a repeat opcode that jumps to the 0x06 "opcode"
				// above. I did it this way so this code compiles identically
				// to the original usecode.
				raw((byte)0x0B); raw(-1); raw(0x0006);
				wait 20;
				// Bug: this is invalid and does nothing. Maybe it was
				// supposed to be 'call Func0609'? As is, it becomes two
				// opcodes (0x09 followed by 0x06), both of which are
				// invalid and does nothing.
				raw(0x0609);
				// This is a repeat opcode that jumps to the 0x06 "opcode"
				// above. I did it this way so this code compiles identically
				// to the original usecode.
				raw((byte)0x0B); raw(-1); raw(0x0006);
			};
		}
		if (var0004[0x0003] > 0x0005) {
			var0005 = script var0003 {
				// Bug: this is invalid and does nothing. Maybe it was
				// supposed to be 'call Func0609'? As is, it becomes two
				// opcodes (0x09 followed by 0x06), both of which are
				// invalid and does nothing.
				raw(0x0609);
				// This is a repeat opcode that jumps to the 0x06 "opcode"
				// above. I did it this way so this code compiles identically
				// to the original usecode.
				raw((byte)0x0B); raw(-1); raw(0x0006);
			};
		}
	}
}

void Func06D5 object#(0x6D5) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;

	if (gflags[SHAMINOS_KEEP_BARRIERS_GONE]) {
		var0000 = find_nearby(0x012D, 0x000F, MASK_NONE);
		for (var0003 in var0000 with var0001 to var0002) {
			var0004 = var0003->get_object_position();
			var0004[0x0002] += 0x0002;
			var0003->remove_item();
			var0005 = UI_create_new_object(0x0121);
			if (var0005) {
				var0005->clear_item_flag(TEMPORARY);
				var0006 = UI_update_last_created(var0004);
			}
			var0005 = UI_create_new_object(0x00E0);
			if (var0005) {
				var0005->clear_item_flag(TEMPORARY);
				var0006 = UI_update_last_created(var0004);
			}
		}
		var0005 = UI_create_new_object(0x0192);
		if (var0005) {
			var0005->set_item_frame(0x0004);
			var0005->clear_item_flag(TEMPORARY);
			var0006 = UI_update_last_created([0x0750, 0x0416, 0x0000]);
		}
		remove_item();
	}
}

extern var Func09AB 0x9AB (var var0000, var var0001, var var0002, var var0003, var var0004);

void Func06D6 object#(0x6D6) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;
	var var0008;
	var var0009;
	var var000A;
	var var000B;
	var var000C;
	var var000D;
	var var000E;
	var var000F;
	var var0010;
	var var0011;
	var var0012;
	var var0013;
	var var0014;
	var var0015;
	var var0016;
	var var0017;
	var var0018;
	var var0019;
	var var001A;
	var var001B;
	var var001C;
	var var001D;
	var var001E;
	var var001F;
	var var0020;
	var var0021;
	var var0022;
	var var0023;
	var var0024;
	var var0025;
	var var0026;
	var var0027;
	var var0028;
	var var0029;
	var var002A;
	var var002B;
	var var002C;
	var var002D;
	var var002E;

	if (event == EGG) {
		if (gflags[BANES_RELEASED]) {
			var0000 = get_item_quality();
			if (var0000 == 0x0001) {
				var0001 = find_nearby(0x03C2, 0x0050, MASK_NONE);
				for (var0004 in var0001 with var0002 to var0003) {
					var0005 = var0004->get_object_position();
					if ((var0005[0x0001] == 0x03E7) && (var0005[0x0002] == 0x0A0F)) {
						var0004->remove_item();
						var0006 = UI_create_new_object(0x00DF);
						if (var0006) {
							var0006->set_item_frame(0x0004);
							var0007 = UI_update_last_created(var0005);
						}
					}
					if ((var0005[0x0001] == 0x03EB) && (var0005[0x0002] == 0x0A0F)) {
						var0004->remove_item();
						var0006 = UI_create_new_object(0x00DF);
						if (var0006) {
							var0006->set_item_frame(0x0003);
							var0007 = UI_update_last_created(var0005);
						}
					}
					if ((var0005[0x0001] == 0x03EF) && (var0005[0x0002] == 0x0A0F)) {
						var0004->remove_item();
						var0006 = UI_create_new_object(0x00DF);
						if (var0006) {
							var0006->set_item_frame(0x0000);
							var0007 = UI_update_last_created(var0005);
						}
					}
					if ((var0005[0x0001] == 0x03EF) && (var0005[0x0002] == 0x0A0B)) {
						var0004->remove_item();
						var0006 = UI_create_new_object(0x00DF);
						if (var0006) {
							var0006->set_item_frame(0x0002);
							var0007 = UI_update_last_created(var0005);
						}
					}
					if ((var0005[0x0001] == 0x03D3) && (var0005[0x0002] == 0x0A0F)) {
						var0004->remove_item();
						var0006 = UI_create_new_object(0x00DF);
						if (var0006) {
							var0006->set_item_frame(0x0004);
							var0007 = UI_update_last_created(var0005);
						}
					}
					if ((var0005[0x0001] == 0x03D7) && (var0005[0x0002] == 0x0A0F)) {
						var0004->remove_item();
						var0006 = UI_create_new_object(0x00DF);
						if (var0006) {
							var0006->set_item_frame(0x0006);
							var0007 = UI_update_last_created(var0005);
						}
					}
					if ((var0005[0x0001] == 0x03DB) && (var0005[0x0002] == 0x0A0F)) {
						var0004->remove_item();
						var0006 = UI_create_new_object(0x00DF);
						if (var0006) {
							var0006->set_item_frame(0x0003);
							var0007 = UI_update_last_created(var0005);
						}
					}
					if ((var0005[0x0001] == 0x03DF) && (var0005[0x0002] == 0x0A0F)) {
						var0004->remove_item();
						var0006 = UI_create_new_object(0x00DF);
						if (var0006) {
							var0006->set_item_frame(0x0006);
							var0007 = UI_update_last_created(var0005);
						}
					}
				}
				var0008 = find_nearby(0x038D, 0x0050, MASK_NONE);
				for (var000B in var0008 with var0009 to var000A) {
					var0005 = var000B->get_object_position();
					if ((var0005[0x0001] == 0x03E8) && (var0005[0x0002] == 0x0A0F)) {
						var000B->remove_item();
						var000C = UI_create_new_object(0x038D);
						if (var000C) {
							var000C->set_item_frame(0x0008);
							var0007 = UI_update_last_created(var0005);
						}
					}
					if ((var0005[0x0001] == 0x03EA) && (var0005[0x0002] == 0x0A0F)) {
						var000B->remove_item();
						var000C = UI_create_new_object(0x038D);
						if (var000C) {
							var000C->set_item_frame(0x000D);
							var0007 = UI_update_last_created(var0005);
						}
					}
					if ((var0005[0x0001] == 0x03EC) && (var0005[0x0002] == 0x0A0F)) {
						var000B->remove_item();
						var000C = UI_create_new_object(0x038D);
						if (var000C) {
							var000C->set_item_frame(0x0009);
							var0007 = UI_update_last_created(var0005);
						}
					}
					if ((var0005[0x0001] == 0x03EE) && (var0005[0x0002] == 0x0A0F)) {
						var000B->remove_item();
						var000C = UI_create_new_object(0x038D);
						if (var000C) {
							var000C->set_item_frame(0x000A);
							var0007 = UI_update_last_created(var0005);
						}
					}
					if ((var0005[0x0001] == 0x03D2) && (var0005[0x0002] == 0x0A0F)) {
						var000B->remove_item();
						var000C = UI_create_new_object(0x038D);
						if (var000C) {
							var000C->set_item_frame(0x000A);
							var0007 = UI_update_last_created(var0005);
						}
					}
					if ((var0005[0x0001] == 0x03D4) && (var0005[0x0002] == 0x0A0F)) {
						var000B->remove_item();
						var000C = UI_create_new_object(0x038D);
						if (var000C) {
							var000C->set_item_frame(0x000D);
							var0007 = UI_update_last_created(var0005);
						}
					}
					if ((var0005[0x0001] == 0x03DA) && (var0005[0x0002] == 0x0A0F)) {
						var000B->remove_item();
						var000C = UI_create_new_object(0x038D);
						if (var000C) {
							var000C->set_item_frame(0x000D);
							var0007 = UI_update_last_created(var0005);
						}
					}
					if ((var0005[0x0001] == 0x03DC) && (var0005[0x0002] == 0x0A0F)) {
						var000B->remove_item();
						var000C = UI_create_new_object(0x038D);
						if (var000C) {
							var000C->set_item_frame(0x0008);
							var0007 = UI_update_last_created(var0005);
						}
					}
					if ((var0005[0x0001] == 0x03DE) && (var0005[0x0002] == 0x0A0F)) {
						var000B->remove_item();
						var000C = UI_create_new_object(0x038D);
						if (var000C) {
							var000C->set_item_frame(0x000D);
							var0007 = UI_update_last_created(var0005);
						}
					}
				}
				var0008 = find_nearby(0x038E, 0x0050, MASK_NONE);
				for (var000B in var0008 with var000D to var000E) {
					var0005 = var000B->get_object_position();
					if ((var0005[0x0001] == 0x03EF) && (var0005[0x0002] == 0x0A0D)) {
						var000B->remove_item();
						var000C = UI_create_new_object(0x038E);
						if (var000C) {
							var000C->set_item_frame(0x000C);
							var0007 = UI_update_last_created(var0005);
						}
					}
					if ((var0005[0x0001] == 0x03EF) && (var0005[0x0002] == 0x0A0F)) {
						var000B->remove_item();
						var000C = UI_create_new_object(0x038E);
						if (var000C) {
							var0007 = UI_update_last_created(var0005);
							var000C->set_item_frame(0x0009);
						}
					}
				}
				var000F = 0x0000;
				var0010 = find_nearby(0x02A3, 0x000A, MASK_NONE);
				for (var0013 in var0010 with var0011 to var0012) {
					if (var0013->get_item_quality() == 0x0001) {
						var000F = 0x0001;
					}
				}
				if (var000F == 0x0000) {
					var0007 = Func09AB(0x02A3, 0x0000, 0x0001, false, item);
					var0014 = find_nearby(0x01B0, 0x0050, MASK_NONE);
					for (var0017 in var0014 with var0015 to var0016) {
						var0017->remove_item();
					}
					var0014 = find_nearby(0x0178, 0x0050, MASK_NONE);
					for (var0017 in var0014 with var0018 to var0019) {
						var0017->remove_item();
					}
					var001A = 0x0001;
					var001B = [0x03D0, 0x03D2, 0x03D4, 0x03D2, 0x03D8, 0x03DA, 0x03DC, 0x03DE, 0x03DA, 0x03DC, 0x03D6, 0x03E3, 0x03F5, 0x03F5, 0x03F5, 0x03DB, 0x03D2, 0x03E8, 0x03EA, 0x03EC, 0x03EC, 0x03EA];
					var001C = [0x0A11, 0x0A11, 0x0A11, 0x0A13, 0x0A11, 0x0A11, 0x0A11, 0x0A11, 0x0A13, 0x0A13, 0x0A15, 0x0A13, 0x0A0E, 0x0A14, 0x0A16, 0x0A10, 0x0A10, 0x0A11, 0x0A11, 0x0A11, 0x0A13, 0x0A13];
					var001D = [0x0003, 0x0005, 0x0004, 0x0001, 0x0003, 0x0005, 0x0005, 0x0004, 0x0001, 0x0001, 0x0000, 0x0000, 0x0000, 0x0002, 0x0001, 0x0004, 0x0006, 0x0003, 0x0005, 0x0005, 0x0001, 0x0001];
					while (var001A < 0x0017) {
						var001E = UI_create_new_object(0x00E0);
						if (var001E) {
							var001E->set_item_frame(var001D[var001A]);
							var0005 = [var001B[var001A], var001C[var001A], 0x0000];
							var0007 = UI_update_last_created(var0005);
						}
						var001A += 0x0001;
					}
					var001A = 0x0001;
					var001B = [0x03F5, 0x03F4, 0x03EB, 0x03E2, 0x03DC, 0x03D9, 0x03D2];
					var001C = [0x0A15, 0x0A0D, 0x0A10, 0x0A12, 0x0A10, 0x0A10, 0x0A10];
					var001D = [0x0005, 0x0004, 0x0005, 0x0006, 0x0005, 0x0006, 0x0005];
					while (var001A < 0x0008) {
						var001E = UI_create_new_object(0x0339);
						if (var001E) {
							var001E->set_item_frame(var001D[var001A]);
							var0005 = [var001B[var001A], var001C[var001A], 0x0000];
							var0007 = UI_update_last_created(var0005);
						}
						var001A += 0x0001;
					}
				}
			}
		}
		if (var0000 == 0x0002) {
			var001F = get_object_position();
			var001A = 0x0000;
			while (var001A < 0x0002) {
				var0020 = UI_die_roll(0x0001, 0x0028);
				var0020 = UI_die_roll(0x0001, 0x0028);
				var0021 = UI_die_roll(0x0001, 0x0028);
				var0021 = UI_die_roll(0x0001, 0x0028);
				var0022 = UI_die_roll(0x0000, 0x000F);
				var0023 = UI_create_new_object(0x0222);
				if (var0023) {
					var0023->set_item_frame(var0022);
					var0005 = [((var001F[0x0001] - 0x0028) + (var0020 * 0x0002)), ((var001F[0x0002] - 0x0028) + (var0021 * 0x0002)), 0x0000];
					var0024 = UI_is_not_blocked(var0005, 0x0222, var0022);
					if (var0024) {
						var0007 = UI_update_last_created(var0005);
						var001A += 0x0001;
					}
				}
			}
			var001A = 0x0000;
			while (var001A < 0x0002) {
				var0020 = UI_die_roll(0x0001, 0x0028);
				var0025 = UI_die_roll(0x0001, 0x0028);
				var0021 = UI_die_roll(0x0001, 0x0028);
				var0021 = UI_die_roll(0x0001, 0x0028);
				var0022 = UI_die_roll(0x0000, 0x001F);
				var0023 = UI_create_new_object(0x019F);
				if (var0023) {
					var0023->set_item_frame(var0022);
					var0005 = [((var001F[0x0001] - 0x0028) + (var0020 * 0x0002)), ((var001F[0x0002] - 0x0028) + (var0021 * 0x0002)), 0x0000];
					var0024 = UI_is_not_blocked(var0005, 0x019F, var0022);
					if (var0024) {
						var0007 = UI_update_last_created(var0005);
						var001A += 0x0001;
					}
				}
			}
			var001A = 0x0000;
			while (var001A < 0x0002) {
				var0020 = UI_die_roll(0x0001, 0x0028);
				var0025 = UI_die_roll(0x0001, 0x0028);
				var0021 = UI_die_roll(0x0001, 0x0028);
				var0021 = UI_die_roll(0x0001, 0x0028);
				var0023 = UI_create_new_object(0x00E0);
				if (var0023) {
					var0005 = [((var001F[0x0001] - 0x0028) + (var0020 * 0x0002)), ((var001F[0x0002] - 0x0028) + (var0021 * 0x0002)), 0x0000];
					var0024 = UI_is_not_blocked(var0005, 0x00E0, 0x0000);
					if (var0024) {
						var0007 = UI_update_last_created(var0005);
						var001A += 0x0001;
					}
				}
			}
			var0026 = UI_find_nearby_avatar(0x012C);
			for (var0007 in var0026 with var0027 to var0028) {
				var0007->remove_item();
			}
			var0029 = find_nearby(0x0369, 0x0050, MASK_NONE);
			for (var002C in var0029 with var002A to var002B) {
				var0005 = var002C->get_object_position();
				var002C->remove_item();
				if (UI_die_roll(0x0001, 0x0003) == 0x0002) {
					var0022 = UI_die_roll(0x0014, 0x0017);
					var002D = UI_create_new_object(0x0369);
					if (var002D) {
						var002D->set_item_frame(var0022);
						var0007 = UI_update_last_created(var0005);
					}
				}
			}
			var002E = UI_die_roll(0x0000, 0x0063);
			if (var002E < 0x0021) {
				var0007 = UI_summon(0x012E, item);
			}
			if ((var002E > 0x0021) && (var002E < 0x0042)) {
				var0007 = UI_summon(0x0219, item);
			}
			if (var002E > 0x0042) {
				var0007 = UI_summon(0x02F2, item);
			}
			remove_item();
		}
	}
}

extern var Func0992 0x992 (var var0000, var var0001, var var0002, var var0003);

void Func06D7 object#(0x6D7) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;

	if (event == PATH_SUCCESS) {
		var0000 = Func0992(0x0001, "@Let us leave here.@", "@Unusual place...@", true);
	}
	if (event == EGG) {
		var0001 = get_item_quality();
		var0002 = get_object_position();
		if (var0001 == 0x0001) {
			UI_sprite_effect(ANIMATION_MEDIUM_BLAST, var0002[0x0001], var0002[0x0002], 0x0000, 0x0000, 0x0000, LOOP_ONCE);
			UI_play_sound_effect(0x002A);
			var0003 = -3;
			while (var0003 < 0x0002) {
				var0004 = [(var0002[0x0001] + var0003), var0002[0x0002], 0x0000];
				var0005 = UI_create_new_object2(0x0373, var0004);
				var0005->set_alignment(EVIL);
				var0005->set_schedule_type(IN_COMBAT);
				AVATAR->set_oppressor(var0005);
				var0003 += 0x0002;
			}
		}
		if (var0001 == 0x0002) {
			UI_sprite_effect(ANIMATION_TELEPORT2, var0002[0x0001], var0002[0x0002], 0x0000, 0x0000, 0x0000, LOOP_ONCE);
			var0004 = [0x0A26, 0x001A, 0x0000];
			PARTY->move_object(var0004);
		}
		if (var0001 == 0x0003) {
			var0006 = AVATAR->get_object_position();
			if (var0006[0x0003] < 0x0003) {
				UI_sprite_effect(ANIMATION_TELEPORT2, var0002[0x0001], var0002[0x0002], 0x0000, 0x0000, 0x0000, LOOP_ONCE);
				PARTY->move_object([0x0508, 0x062F, 0x0000]);
				var0007 = [0x0508, 0x0636, 0x0000];
				var0000 = UI_path_run_usecode(var0007, Func06D7, AVATAR, PATH_SUCCESS);
			}
		}
	}
}

void Func06D8 object#(0x6D8) () {
	var var0000;

	if (event == EGG) {
		var0000 = script AVATAR {
			nohalt;
			hit 50, normal_damage;
		};
	}
}

extern void Func097F 0x97F (var var0000, var var0001, var var0002);
extern void Func07D2 object#(0x7D2) ();
extern void Func09A4 0x9A4 (var var0000);
extern void Func09A3 0x9A3 (var var0000);
extern var Func09AB 0x9AB (var var0000, var var0001, var var0002, var var0003, var var0004);

void Func06D9 object#(0x6D9) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;
	var var0008;
	var var0009;
	var var000A;
	var var000B;
	var var000C;
	var var000D;
	var var000E;
	var var000F;
	var var0010;
	var var0011;
	var var0012;
	var var0013;
	var var0014;
	var var0015;
	var var0016;
	var var0017;
	var var0018;
	var var0019;
	var var001A;

	if (event == EGG) {
		var0000 = UI_get_skin_colour();
		var0001 = UI_is_pc_female();
		var0002 = get_item_quality();
		var0003 = get_object_position();
		if (var0002 == 0x0001) {
			var0004 = find_nearby(0x00E4, 0x0014, MASK_NONE);
			if (var0004) {
				var0004->set_npc_id(0x000F);
			}
			abort;
		}
		if (var0002 == 0x00DE) {
			var0004 = find_nearby(0x00E4, 0x0014, MASK_NONE);
			if (var0004) {
				var0004->clear_item_say();
				HAZARD->show_npc_face0(0x0000);
				say("\"Aaargh! I cannot keep pace with thee! My chest feels as though it shall soon explode!\"");
				var0005 = script var0004 after 8 ticks {
					nohalt;
					hit 50, normal_damage;
				};
				Func097F(var0004, "@Mine heart!!!@", 0x0001);
			}
			abort;
		}
		if (var0002 == 0x0002) {
			UI_play_sound_effect(0x0051);
			UI_sprite_effect(ANIMATION_TELEPORT2, var0003[0x0001], var0003[0x0002], 0x0000, 0x0000, 0x000C, LOOP_ONCE2);
			CLONE_IOLO->move_object(var0003);
			CLONE_IOLO->set_schedule_type(STANDTHERE);
			Func097F(CLONE_IOLO, "@Avatar!@", 0x0001);
			var0005 = script item after 8 ticks {
				nohalt;
				call Func0403;
			};
			var0005 = set_item_quality(0x00FF);
			CLONE_IOLO->Func07D2();
		}
		if (var0002 == 0x0003) {
			remove_item();
			var0003 = [0x0061, 0x0644, 0x0000];
			CLONE_IOLO->set_schedule_type(SHY);
			CLONE_IOLO->move_object(var0003);
		}
		if (var0002 == 0x0004) {
			UI_play_sound_effect(0x0051);
			UI_sprite_effect(ANIMATION_TELEPORT, var0003[0x0001], var0003[0x0002], 0x0000, 0x0000, 0x000C, LOOP_ONCE2);
			THOXA->move_object(var0003);
			THOXA->set_schedule_type(STANDTHERE);
			THOXA->Func07D2();
			Func097F(THOXA, "@Avatar!@", 0x0001);
			var0005 = script item after 10 ticks {
				nohalt;
				call Func0363;
			};
			var0005 = set_item_quality(0x00FF);
		}
		if (var0002 == 0x0005) {
			THOXA->remove_npc();
			remove_item();
		}
		if (var0002 == 0x0006) {
			D_ENSORCIO->set_schedule_type(TALK);
			var0005 = set_item_quality(0x00FF);
		}
		if (var0002 == 0x0007) {
			D_ENSORCIO->remove_npc();
			D_FILBERCIO->remove_npc();
			remove_item();
		}
		if (var0002 == 0x0008) {
			var0006 = UI_create_new_object2(0x013E, var0003);
			var0006->set_schedule_type(IN_COMBAT);
			var0006->set_alignment(CHAOTIC);
			Func09A4(var0006);
			var0007 = [(var0003[0x0001] + 0x0009), var0003[0x0002], var0003[0x0003]];
			var0008 = UI_create_new_object2(0x012E, var0007);
			var0008->set_schedule_type(IN_COMBAT);
			var0008->set_alignment(EVIL);
			Func09A4(var0008);
			var0006->set_oppressor(var0008);
			var0008->set_oppressor(var0006);
			var0006->set_opponent(var0008);
			var0008->set_opponent(var0006);
			var0006->set_item_flag(SI_TOURNAMENT);
			var0008->set_item_flag(SI_TOURNAMENT);
			var0008->set_polymorph(0x02D1);
			UI_play_sound_effect(0x0051);
			UI_sprite_effect(ANIMATION_TELEPORT2, var0003[0x0001], var0003[0x0002], 0x0000, 0x0000, 0x000C, LOOP_ONCE2);
			UI_sprite_effect(ANIMATION_TELEPORT, var0007[0x0001], var0007[0x0002], 0x0000, 0x0000, 0x000C, LOOP_ONCE2);
			var0005 = script item after 30 ticks {
				nohalt;
				call Func013E;
			};
			var0005 = set_item_quality(0x00FF);
			var0005 = var0006->add_cont_items(0x0001, 0x02C6, 0x0000, 0x0000, false);
		}
		if (var0002 == 0x0010) {
			var0009 = find_nearby(0x012E, 0x0028, MASK_NONE);
			for (var000C in var0009 with var000A to var000B) {
				var000D = var000C->get_object_position();
				var000C->set_polymorph(0x012E);
				Func09A3(var000C);
				var000E = 0x0190;
				var000F = 0x0001;
				var0010 = find_nearby(0x013E, 0x0014, MASK_NONE);
				for (var0013 in var0010 with var0011 to var0012) {
					var0013->set_alignment(GOOD);
					var0013->set_schedule_type(DANCE);
				}
				if (var0001) {
					if (var0000 == BLACK_AVATAR) {
						var000E = 0x0190;
						var000F = 0x0002;
					}
					if (var0000 == LATINO_AVATAR) {
						var000E = 0x019E;
						var000F = 0x001F;
					}
					if (var0000 > LATINO_AVATAR) {
						var000E = 0x019E;
						var000F = 0x001D;
					}
				} else {
					if (var0000 == BLACK_AVATAR) {
						var000E = 0x0190;
						var000F = 0x0001;
					}
					if (var0000 == LATINO_AVATAR) {
						var000E = 0x019E;
						var000F = 0x001E;
					}
					if (var0000 > LATINO_AVATAR) {
						var000E = 0x019E;
						var000F = 0x001C;
					}
				}
				var0005 = Func09AB(var000E, var000F, 0x0000, true, var000D);
			}
			Func097F(var0013, "@Die, Avatar!@", 0x0003);
			Func097F(var0013, "@Nothing can stop me now!@", 0x0014);
			Func097F(var0013, "@The universe is mine!@", 0x0020);
			var0005 = set_item_quality(0x0009);
			var0005 = script item after 40 ticks {
				nohalt;
				call Func06D9;
			};
		}
		if (var0002 == 0x0009) {
			var0010 = find_nearby(0x013E, 0x001E, MASK_NONE);
			for (var0013 in var0010 with var0014 to var0015) {
				var0003 = var0013->get_object_position();
				Func09A3(var0013);
				UI_sprite_effect(ANIMATION_TELEPORT2, var0003[0x0001], var0003[0x0002], 0x0000, 0x0000, 0x0000, LOOP_ONCE);
				UI_play_sound_effect(0x0082);
			}
			var0016 = find_nearby(0x019E, 0x0014, MASK_NONE);
			for (var000C in var0016 with var0017 to var0018) {
				var0003 = var000C->get_object_position();
				Func09A3(var000C);
				UI_play_sound_effect(0x004C);
				UI_sprite_effect(ANIMATION_TELEPORT2, var0003[0x0001], var0003[0x0002], 0x0000, 0x0000, 0x0000, LOOP_ONCE);
			}
			var0016 = find_nearby(0x0190, 0x0014, MASK_NONE);
			for (var000C in var0016 with var0019 to var001A) {
				var0003 = var000C->get_object_position();
				Func09A3(var000C);
				UI_play_sound_effect(0x0077);
				UI_sprite_effect(ANIMATION_TELEPORT2, var0003[0x0001], var0003[0x0002], 0x0000, 0x0000, 0x0000, LOOP_ONCE);
			}
			remove_item();
		}
	}
}

extern var Func0992 0x992 (var var0000, var var0001, var var0002, var var0003);
extern void Func097F 0x97F (var var0000, var var0001, var var0002);
extern void Func09AD 0x9AD (var var0000);

void Func06DA object#(0x6DA) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;

	if (event == EGG) {
		var0000 = get_item_quality();
		if (var0000 == 0x0001) {
			var0001 = Func0992(AVATAR, "@A Software Pirate!@", 0x0000, true);
			if (IOLO->npc_nearby()) {
				Func097F(IOLO, "@Kill him quickly!@", 0x0010);
			}
			if (SHAMINO->npc_nearby()) {
				Func097F(SHAMINO, "@Format his hard drive!@", 0x0020);
			}
			if (DUPRE->npc_nearby()) {
				Func097F(DUPRE, "@Die, Wares-thief!@", 0x0030);
			}
			Func09AD(PERRY_STOKES);
		}
		if (var0000 == 0x0002) {
			Func097F(AVATAR, "@Look at the bones!@", 0x0000);
		}
		if (var0000 == 0x0003) {
			Func097F(AVATAR, "@Where are we?@", 0x0000);
			var0002 = Func0992(0x0001, 0x0000, 0x0000, true);
			if (var0002 != AVATAR) {
				Func097F(var0002, "@We are lost, Avatar.@", 0x0020);
			}
		}
		if (var0000 == 0x0004) {
			Func097F(AVATAR, "@I don't like this place...@", 0x0000);
		}
		if (var0000 == 0x0005) {
			var0003 = "Batlin must be opening the Wall of Lights!";
			var0004 = "Make haste! Batlin must be opening the Wall of Lights!";
			var0002 = Func0992(0x0001, var0004, var0003, false);
		}
	}
}

extern void Func097F 0x97F (var var0000, var var0001, var var0002);

void Func06DB object#(0x6DB) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;

	if (event == EGG) {
		var0000 = get_item_quality();
		if (var0000 > 0x0064) {
			var0001 = AVATAR->get_object_position();
			var0002 = script item after 16 ticks {
				nohalt;
				call Func06DB;
			};
			var0002 = set_item_quality(var0000 - 0x0064);
			if (var0000 == 0x0065) {
				AVATAR->item_say("@I have a bad feeling...@");
			}
			UI_play_sound_effect(0x0082);
			AVATAR->obj_sprite_effect(ANIMATION_TELEPORT, 0x0000, 0x0000, 0x0000, 0x0000, 0x0001, LOOP_ONCE);
			return;
		}
		if (var0000 == 0x0001) {
			var0003 = [0x0027, 0x03E1, 0x0000];
		}
		if (var0000 == 0x0002) {
			var0003 = [0x0037, 0x03B1, 0x0000];
		}
		if (var0000 == 0x0003) {
			var0003 = [0x0037, 0x031E, 0x0000];
		}
		if (var0000 == 0x0004) {
			var0003 = [0x0067, 0x02DE, 0x0000];
		}
		if (var0000 == 0x0005) {
			var0003 = [0x00A8, 0x02DD, 0x0000];
			Func097F(AVATAR, "By the Virtues!", 0x0005);
		}
		if (var0000 == 0x0006) {
			var0003 = [0x03A7, 0x00C6, 0x0000];
		}
		if (var0000 == 0x0007) {
			var0003 = [0x03C6, 0x0116, 0x0000];
			Func097F(AVATAR, "I have a bad feeling...", 0x0005);
		}
		if (var0000 == 0x0008) {
			var0003 = [0x03A7, 0x00C6, 0x0000];
		}
		if (var0000 == 0x0009) {
			var0003 = [0x0346, 0x00F6, 0x0000];
		}
		if (var0000 == 0x000A) {
			var0003 = [0x035F, 0x0126, 0x0000];
		}
		var0002 = set_item_quality(var0000 + 0x0064);
		PARTY->move_object(var0003);
		UI_play_sound_effect(0x0077);
		AVATAR->obj_sprite_effect(ANIMATION_FROST_RING, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, LOOP_ONCE);
	}
}

extern void Func097F 0x97F (var var0000, var var0001, var var0002);

void Func06DC object#(0x6DC) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;
	var var0008;
	var var0009;
	var var000A;
	var var000B;
	var var000C;
	var var000D;
	var var000E;
	var var000F;
	var var0010;
	var var0011;
	var var0012;
	var var0013;
	var var0014;
	var var0015;
	var var0016;
	var var0017;
	var var0018;
	var var0019;

	var0000 = get_object_position();
	var0001 = get_item_quality();
	var0002 = find_nearby(SHAPE_ANY, 0x0002, MASK_NONE);
	for (var0005 in var0002 with var0003 to var0004) {
		var0006 = var0005->get_item_shape();
		if ((var0001 == 0x0001) && (var0006 == 0x02C3)) {
			var0000 = var0005->get_object_position();
			UI_sprite_effect(ANIMATION_GREEN_BUBBLES, (var0000[0x0001] - 0x0003), (var0000[0x0002] - 0x0005), var0000[0x0003], 0x0000, 0x0000, LOOP_ONCE);
			UI_sprite_effect(ANIMATION_PURPLE_BUBBLES, (var0000[0x0001] - 0x0005), (var0000[0x0002] - 0x0003), var0000[0x0003], 0x0000, 0x0000, LOOP_ONCE);
			UI_play_sound_effect(0x0028);
			var0005->remove_item();
			var0007 = set_item_quality(0x0002);
			var0008 = find_nearby(0x02C5, 0x0005, MASK_NONE);
			for (var000B in var0008 with var0009 to var000A) {
				var0007 = var000B->set_item_quality(0x0097);
			}
			Func097F(AVATAR, "@The plaque!@", 0x0000);
			Func097F(AVATAR, "@It hath changed!@", 0x0010);
			abort;
		}
		if ((var0001 == 0x0002) && (var0006 == 0x027C)) {
			var0000 = var0005->get_object_position();
			UI_sprite_effect(ANIMATION_GREEN_BUBBLES, (var0000[0x0001] - 0x0003), (var0000[0x0002] - 0x0005), var0000[0x0003], 0x0000, 0x0000, LOOP_ONCE);
			UI_sprite_effect(ANIMATION_PURPLE_BUBBLES, (var0000[0x0001] - 0x0005), (var0000[0x0002] - 0x0003), var0000[0x0003], 0x0000, 0x0000, LOOP_ONCE);
			UI_play_sound_effect(0x0029);
			var0005->remove_item();
			var0007 = set_item_quality(0x0003);
			Func097F(AVATAR, "@The plaque hath changed!@", 0x0002);
			var0008 = find_nearby(0x02C5, 0x0005, MASK_NONE);
			for (var000E in var0008 with var000C to var000D) {
				var0007 = var000E->set_item_quality(0x0098);
			}
			abort;
		}
		if ((var0001 == 0x0003) && (var0006 == 0x00D1)) {
			var0000 = var0005->get_object_position();
			UI_sprite_effect(ANIMATION_GREEN_BUBBLES, (var0000[0x0001] - 0x0003), (var0000[0x0002] - 0x0005), var0000[0x0003], 0x0000, 0x0000, LOOP_ONCE);
			UI_sprite_effect(ANIMATION_PURPLE_BUBBLES, (var0000[0x0001] - 0x0005), (var0000[0x0002] - 0x0003), var0000[0x0003], 0x0000, 0x0000, LOOP_ONCE);
			UI_play_sound_effect(0x002A);
			var0005->remove_item();
			var0007 = set_item_quality(0x0004);
			Func097F(AVATAR, "@The door opened!@", 0x0005);
			var000F = find_nearby(0x0178, 0x0014, MASK_NONE);
			for (var0012 in var000F with var0010 to var0011) {
				var0000 = var0012->get_object_position();
				UI_sprite_effect(ANIMATION_TELEPORT, (var0000[0x0001] - 0x0003), (var0000[0x0002] - 0x0003), var0000[0x0003], 0x0000, 0x0000, LOOP_ONCE);
				var0012->remove_item();
				var0013 = UI_create_new_object(0x010E);
				if (var0013) {
					var0013->set_item_frame(0x0014);
					var0007 = UI_update_last_created(var0000);
				}
			}
			abort;
		}
		if ((var0001 == 0x0005) && (var0006 == 0x039E)) {
			var0014 = false;
			var0000 = [0x08F7, 0x0263, 0x0001];
			PARTY->move_object(var0000);
			UI_play_sound_effect(0x0051);
			Func097F(AVATAR, "@By the Virtues!@", 0x0005);
			AVATAR->obj_sprite_effect(ANIMATION_TELEPORT, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, LOOP_ONCE);
			AVATAR->obj_sprite_effect(ANIMATION_LIGHTNING, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, LOOP_ONCE);
			abort;
		}
	}
	var0014 = false;
	var0002 = find_nearby(SHAPE_ANY, 0x0002, MASK_NONE);
	for (var0017 in var0002 with var0015 to var0016) {
		var0000 = var0017->get_object_position();
		var0018 = get_object_position();
		var0007 = var0017->get_item_shape();
		if (var0000[0x0003] >= 0x0004) {
			var0014 = true;
		}
	}
	if (var0014) {
		var0019 = UI_die_roll(0x0001, 0x0006);
		if (var0019 == 0x0001) {
			Func097F(AVATAR, "@That did nothing...@", 0x0002);
		}
		if (var0019 == 0x0002) {
			Func097F(AVATAR, "@'Twas not it...@", 0x0001);
		}
		if (var0019 == 0x0003) {
			Func097F(AVATAR, "@Wrong item...@", 0x0001);
		}
		if (var0019 == 0x0004) {
			Func097F(AVATAR, "@Maybe something else?@", 0x0001);
		}
	}
	abort;
}

void Func06DD object#(0x6DD) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;

	if (event == EGG) {
		var0000 = get_item_quality();
		if (var0000 == 0x0000) {
			var0001 = set_item_quality(0x0001);
		}
		if (var0000 == 0x0001) {
			var0002 = find_nearby(0x00C8, 0x0014, MASK_EGG);
			for (var0005 in var0002 with var0003 to var0004) {
				var0001 = script var0005 {
					hatch;
				};
			}
			remove_item();
		}
	}
	if (var0000 == 0x0002) {
		gflags[BRUNT_TALKS_TO_AVATAR] = true;
	}
}

void Func06DE object#(0x6DE) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;

	if (event == EGG) {
		if (gflags[BANES_RELEASED] && (!ANTI_IOLO->is_dead())) {
			var0000 = get_item_quality();
			var0001 = get_object_position();
			var0002 = UI_create_new_object2(0x00F7, var0001);
			var0002->set_schedule_type(IN_COMBAT);
			var0002->set_alignment(EVIL);
			AVATAR->set_oppressor(var0002);
			var0003 = UI_die_roll(0x0000, 0x001E);
			var0004 = var0002->add_cont_items(0x0001, 0x019F, 0x0000, var0003, false);
			UI_sprite_effect(ANIMATION_BIG_RING_BLAST, var0001[0x0001], var0001[0x0002], 0x0000, 0x0000, 0x0000, LOOP_ONCE);
			UI_play_sound_effect(0x0029);
			if (var0000 > 0x0000) {
				var0004 = script item after 15 ticks {
					nohalt;
					call Func06DE;
				};
				var0000 -= 0x0001;
				var0004 = set_item_quality(var0000);
			} else {
				remove_item();
			}
		}
	}
}

void Func06DF object#(0x6DF) () {
	var var0000;

	var0000 = get_item_quality();
	if (var0000 < 0x0001) {
		AVATAR->set_item_flag(FREEZE);
	} else {
		AVATAR->clear_item_flag(FREEZE);
	}
}

extern void Func097F 0x97F (var var0000, var var0001, var var0002);
extern var Func08AC 0x8AC (var var0000);
extern void Func09AD 0x9AD (var var0000);

void Func06E0 object#(0x6E0) () {
	var var0000;
	var var0001;
	var var0002;

	if (event == EGG) {
		var0000 = AVATAR->get_object_position();
		if (var0000[0x0003] < 0x0002) {
			gflags[CAUGHT_VOLDIN] = true;
			Func097F(VOLDIN, "@Ah, 'tis thee...@", 0x0000);
			AVATAR->set_item_flag(DONT_MOVE);
			VOLDIN->clear_item_flag(SI_TOURNAMENT);
			var0001 = script VOLDIN {
				actor frame standing;
				continue;
				face north;
				wait 7;
				nohalt;
				call Func06E0;
			};
			remove_item();
		}
	}
	if (event == SCRIPTED) {
		VOLDIN->clear_item_say();
		var0002 = Func08AC(false);
		VOLDIN->show_npc_face0(0x0000);
		say("\"Kylista, the levers have been set, and the traitor's fate is sealed...\"");
		say("\"Wait, thou art not Kylista!\"");
		say("\"So, thou hast found out our little scheme, hast thou?\"");
		if (UI_is_pc_female()) {
			say("\"I'm certain that thou hadst help from thy companions to come this far, girl.\"");
			Func097F(VOLDIN, "@Die, wench!@", 0x0000);
		} else {
			say("\"Thou shouldst have understood -- a woman cannot be left to control a city! They have not the brains for such matters!\"");
			say("\"But thou hast no doubt been swayed by the ploys of a woman... Did Alyssand give her favors willingly, or did she force thee to bargain for them?\"");
			Func097F(VOLDIN, "@Ha ha ha!@", 0x0000);
		}
		say("\"Of course, I can never allow thee to leave this chamber alive...\"");
		Func09AD(VOLDIN);
		AVATAR->clear_item_flag(DONT_MOVE);
	}
}

extern var Func097E 0x97E (var var0000);
extern void Func0907 0x907 (var var0000, var var0001);

void Func06E1 object#(0x6E1) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;
	var var0008;
	var var0009;
	var var000A;
	var var000B;
	var var000C;
	var var000D;
	var var000E;
	var var000F;
	var var0010;
	var var0011;

	var0000 = AVATAR->get_object_position();
	var0001 = get_object_position();
	if ((event == EGG) && (Func097E(var0000[0x0003] - var0001[0x0003]) < 0x0003)) {
		if (gflags[BANES_RELEASED] == true) {
			AVATAR->set_item_flag(DONT_MOVE);
			var0002 = get_object_position();
			var0002[0x0002] -= 0x0007;
			var0003 = UI_create_new_object2(0x0151, var0002);
			if (var0003) {
				var0003->set_schedule_type(WAIT);
				var0004 = script var0003 {
					nohalt;
					face FACE_SOUTH;
				};
				UI_play_sound_effect(0x0053);
			}
			var0004 = script AVATAR after 10 ticks {
				nohalt;
				call Func06E1;
			};
			remove_item();
		}
	}
	if (event == SCRIPTED) {
		var0005 = UI_get_party_list();
		var0003 = find_nearby(0x0151, 0x000A, MASK_NONE);
		if (SHAMINO in var0005) {
			if (var0003) {
				SMITHZHORSE->show_npc_face0(0x0002);
				say("\"Traitor! Foul murderer! Thou didst kill my Beatrix, faithless liar!\"");
				say("\"Thou shalt see the power of the King of the White Dragon!\"");
				UI_remove_npc_face0();
			}
		} else if (var0003) {
			SMITHZHORSE->show_npc_face0(0x0002);
			say("\"I am the King of the White Dragon!\"");
			say("\"I shall protect thee... I shall take thee beyond all mortal concerns -- into my kingdom of death!\"");
			UI_remove_npc_face0();
		}
		AVATAR->clear_item_flag(DONT_MOVE);
		if (var0003) {
			var0002 = var0003->get_object_position();
			var0002[0x0001] -= var0002[0x0003] / 0x0002;
			var0002[0x0002] -= var0002[0x0003] / 0x0002;
			UI_sprite_effect(ANIMATION_FIREWORKS, var0002[0x0001], var0002[0x0002], 0x0000, 0x0000, 0x0000, LOOP_ONCE);
			UI_play_sound_effect(0x0039);
			var0002 = var0003->get_object_position();
			var0006 = find_nearby(0x0113, 0x000A, MASK_EGG);
			for (var0009 in var0006 with var0007 to var0008) {
				var000A = var0009->get_item_frame();
				if (var000A == 0x0000) {
					var0004 = script var0009 after 5 ticks {
						hatch;
					};
				}
			}
			var0003->remove_item();
			var000B = find_nearby(0x01B0, 0x0014, MASK_NONE);
			var000C = find_nearby(0x010E, 0x0014, MASK_NONE);
			if (var000B) {
				for (var000F in var000B with var000D to var000E) {
					Func0907(var000F, 0x0000);
				}
			}
			if (var000C) {
				for (var000F in var000C with var0010 to var0011) {
					Func0907(var000F, 0x0000);
				}
			}
		}
	}
}

void Func06E2 object#(0x6E2) () {
	var var0000;
	var var0001;

	if (gflags[BANES_RELEASED] == true) {
		var0000 = UI_create_new_object(0x031D);
		if (var0000) {
			var0001 = UI_update_last_created([0x0707, 0x05C0, 0x0000]);
			var0001 = var0000->set_item_quality(0x003E);
		}
		remove_item();
	}
}

extern var Func097E 0x97E (var var0000);
extern void Func097F 0x97F (var var0000, var var0001, var var0002);
extern void Func09B8 0x9B8 ();
extern void Func09AD 0x9AD (var var0000);

void Func06E3 object#(0x6E3) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;
	var var0008;
	var var0009;
	var var000A;
	var var000B;
	var var000C;
	var var000D;
	var var000E;
	var var000F;

	if (gflags[INSANITY_BANE_DEAD]) {
		abort;
	}
	var0000 = AVATAR->get_object_position();
	var0001 = get_object_position();
	if ((event == EGG) && (Func097E(var0000[0x0003] - var0001[0x0003]) < 0x0003)) {
		var0002 = get_item_quality();
		if (var0002 == 0x0000) {
			UI_sprite_effect(ANIMATION_PURPLE_BUBBLES, 0x071E, 0x05A6, 0x0000, 0x0000, 0x0000, LOOP_ONCE);
			ANTI_IOLO->move_object([0x071E, 0x05A6, 0x0000]);
			ANTI_IOLO->set_schedule_type(WAIT);
			var0003 = script ANTI_IOLO {
				nohalt;
				actor frame standing;
				face FACE_EAST;
			};
			var0003 = script ANTI_IOLO after 10 ticks {
				nohalt;
				call Func06E3;
			};
			remove_item();
			abort;
		}
		if (var0002 == 0x0001) {
			AVATAR->set_item_flag(DONT_MOVE);
			Func097F(AVATAR, "@What...?@", 0x0005);
			Func097F(AVATAR, "@NO!@", 0x0028);
			var0004 = find_nearby(0x010C, 0x000F, MASK_NONE);
			var0004 &= find_nearby(0x0350, 0x000F, MASK_NONE);
			for (var0007 in var0004 with var0005 to var0006) {
				var0007->set_item_frame(0x0004);
			}
			var0003 = script AVATAR after 20 ticks {
				nohalt;
				call Func06E3;
			};
			gflags[TEMP_FLAG_1] = true;
			remove_item();
			abort;
		}
	}
	if (event == SCRIPTED) {
		if ((gflags[TEMP_FLAG_1] == false) && (gflags[TEMP_FLAG_2] == false)) {
			BRAX->show_npc_face0(0x0000);
			say("\"Come and see the freak show, Avatar!\"");
			UI_remove_npc_face0();
			Func09B8();
			abort;
		}
		if (gflags[TEMP_FLAG_1] == true) {
			var0004 = find_nearby(0x010C, 0x000F, MASK_NONE);
			var0004 &= find_nearby(0x0350, 0x000F, MASK_NONE);
			for (var0007 in var0004 with var0008 to var0009) {
				var0007->set_item_frame(0x0005);
			}
			UI_play_sound_effect(0x005F);
			var0003 = script AVATAR after 20 ticks {
				nohalt;
				call Func06E3;
			};
			gflags[TEMP_FLAG_1] = false;
			gflags[TEMP_FLAG_2] = true;
			abort;
		}
		if (gflags[TEMP_FLAG_2] == true) {
			var0004 = find_nearby(0x010C, 0x000F, MASK_NONE);
			for (var0007 in var0004 with var000A to var000B) {
				var000C = var0007->get_object_position();
				var000C[0x0001] -= var000C[0x0003] / 0x0002;
				var000C[0x0002] -= var000C[0x0003] / 0x0002;
				UI_sprite_effect(ANIMATION_POOF, var000C[0x0001], var000C[0x0002], 0x0000, 0x0000, 0x0000, LOOP_ONCE);
				var000C = var0007->get_object_position();
				var000D = UI_create_new_object2(0x014E, var000C);
				if (var000D) {
					var0003 = var000D->set_npc_prop(INTELLIGENCE, 20);
					var000D->set_polymorph(0x02D1);
					var0003 = script var000D {
						nohalt;
						face FACE_EAST;
					};
					Func09AD(var000D);
					var0007->remove_item();
				}
			}
			var0004 = find_nearby(0x0350, 0x000F, MASK_NONE);
			for (var0007 in var0004 with var000E to var000F) {
				var000C = var0007->get_object_position();
				var000C[0x0001] -= var000C[0x0003] / 0x0002;
				var000C[0x0002] -= var000C[0x0003] / 0x0002;
				UI_sprite_effect(ANIMATION_POOF, var000C[0x0001], var000C[0x0002], 0x0000, 0x0000, 0x0000, LOOP_ONCE);
				var000C = var0007->get_object_position();
				var000D = UI_create_new_object2(0x014E, var000C);
				if (var000D) {
					var0003 = var000D->set_npc_prop(INTELLIGENCE, 20);
					var000D->set_polymorph(0x02D1);
					var0003 = script var000D {
						nohalt;
						face FACE_SOUTH;
					};
					Func09AD(var000D);
					var0007->remove_item();
				}
			}
			UI_play_sound_effect(0x0052);
			gflags[TEMP_FLAG_2] = false;
			AVATAR->clear_item_flag(DONT_MOVE);
		}
	}
}

extern var Func09BA 0x9BA ();
extern var Func097E 0x97E (var var0000);
extern var Func09A0 0x9A0 (var var0000, var var0001);
extern void Func09B8 0x9B8 ();

void Func06E4 object#(0x6E4) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;
	var var0008;
	var var0009;
	var var000A;

	if (Func09BA()) {
		abort;
	}
	var0000 = AVATAR->get_object_position();
	var0001 = get_object_position();
	if ((event == EGG) && (Func097E(var0000[0x0003] - var0001[0x0003]) < 0x0003)) {
		UI_sprite_effect(ANIMATION_PURPLE_BUBBLES, 0x06D8, 0x0591, 0x0000, 0x0000, 0x0000, LOOP_ONCE);
		UI_play_sound_effect(0x0051);
		ANTI_IOLO->move_object([0x06D8, 0x0591, 0x0000]);
		ANTI_IOLO->set_schedule_type(WAIT);
		var0002 = script ANTI_IOLO {
			nohalt;
			actor frame standing;
			face FACE_SOUTH;
		};
		var0002 = script ANTI_IOLO after 10 ticks {
			nohalt;
			call Func06E4;
		};
		var0003 = find_nearby(0x010E, 0x0006, MASK_NONE);
		if (var0003) {
			var0002 = script var0003 {
				nohalt;
				call Func010E;
			};
		}
		gflags[TEMP_FLAG_1] = false;
		remove_item();
		abort;
	}
	if ((event == SCRIPTED) && (gflags[TEMP_FLAG_1] == false)) {
		BRAX->show_npc_face0(0x0000);
		say("\"Want to try some spinning...\"* \"...and dying, Avatar?\"");
		UI_remove_npc_face0();
		var0004 = find_nearby(0x0178, 0x000A, MASK_NONE);
		if (var0004) {
			var0004->set_item_frame(0x0002);
		}
		gflags[TEMP_FLAG_1] = true;
		var0005 = Func09A0(0x0000, 0x0001);
		if (var0005) {
			var0002 = script var0005 {
				nohalt;
				call Func06E4;
			};
		}
		abort;
	}
	if ((event == SCRIPTED) && (gflags[TEMP_FLAG_1] == true)) {
		var0006 = find_nearby(0x00C8, 0x001E, MASK_EGG);
		for (var0009 in var0006 with var0007 to var0008) {
			var000A = var0009->get_item_frame();
			if ((var000A > 0x0001) && (var000A < 0x0006)) {
				var0002 = script var0009 {
					setegg avatar_near, 15;
				};
			}
		}
		Func09B8();
		gflags[TEMP_FLAG_1] = false;
	}
}

extern var Func09BA 0x9BA ();
extern var Func097E 0x97E (var var0000);
extern void Func09B8 0x9B8 ();

void Func06E5 object#(0x6E5) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;
	var var0008;
	var var0009;
	var var000A;
	var var000B;
	var var000C;

	if (Func09BA()) {
		abort;
	}
	var0000 = AVATAR->get_object_position();
	var0001 = get_object_position();
	if ((event == EGG) && (Func097E(var0000[0x0003] - var0001[0x0003]) < 0x0003)) {
		UI_sprite_effect(ANIMATION_PURPLE_BUBBLES, 0x06F2, 0x05A5, 0x0000, 0x0000, 0x0000, LOOP_ONCE);
		UI_play_sound_effect(0x0051);
		ANTI_IOLO->move_object([0x06F2, 0x05A5, 0x0000]);
		ANTI_IOLO->set_schedule_type(WAIT);
		var0002 = script ANTI_IOLO {
			nohalt;
			actor frame standing;
			face FACE_NORTH;
		};
		var0002 = script ANTI_IOLO after 10 ticks {
			nohalt;
			call Func06E5;
		};
		var0003 = find_nearby(0x02B1, 0x000F, MASK_NONE);
		if (var0003) {
			var0002 = script var0003 after 5 ticks {
				nohalt;
				call Func02B1;
			};
		}
		var0004 = find_nearby(0x02B4, 0x0014, MASK_NONE);
		if (var0004) {
			var0002 = script var0004 after 25 ticks {
				nohalt;
				call Func02B4;
			};
		}
		var0005 = find_nearby(0x02B2, 0x000F, MASK_NONE);
		if (var0005) {
			var0002 = script var0005 after 45 ticks {
				nohalt;
				call Func02B2;
			};
		}
		var0006 = find_nearby(0x02E9, 0x000F, MASK_NONE);
		if (var0006) {
			var0002 = script var0006 after 65 ticks {
				nohalt;
				call Func02E9;
			};
		}
		var0007 = find_nearby(0x02B5, 0x0014, MASK_NONE);
		if (var0007) {
			var0002 = script var0007 after 85 ticks {
				nohalt;
				call Func02B5;
			};
		}
		var0008 = find_nearby(0x0113, 0x0014, MASK_EGG);
		for (var000B in var0008 with var0009 to var000A) {
			var000C = var000B->get_item_frame();
			if (var000C == 0x0000) {
				var0002 = script var000B after 100 ticks {
					hatch;
				};
			}
		}
		remove_item();
	}
	if ((event == SCRIPTED) && (gflags[TEMP_FLAG_1] == false)) {
		BRAX->show_npc_face0(0x0000);
		say("\"Want to sing an opera, Avatar?\"");
		UI_remove_npc_face0();
		Func09B8();
	}
}

extern var Func09BA 0x9BA ();
extern var Func097E 0x97E (var var0000);
extern var Func09A0 0x9A0 (var var0000, var var0001);
extern void Func09B8 0x9B8 ();
extern var Func09A1 0x9A1 (var var0000);

void Func06E6 object#(0x6E6) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;
	var var0008;
	var var0009;
	var var000A;
	var var000B;
	var var000C;

	if (Func09BA()) {
		abort;
	}
	var0000 = AVATAR->get_object_position();
	var0001 = get_object_position();
	if ((event == EGG) && (Func097E(var0000[0x0003] - var0001[0x0003]) < 0x0003)) {
		var0002 = get_item_quality();
		var0003 = 0x0000;
		var0004 = 0x0000;
		var0005 = [ANTI_IOLO, ANTI_SHAM, ANTI_DUPRE];
		var0006 = var0005[UI_die_roll(0x0001, 0x0003)];
		if (var0002 == 0x0000) {
			UI_sprite_effect(ANIMATION_PURPLE_BUBBLES, 0x0715, 0x0582, 0x0000, 0x0000, 0x0000, LOOP_ONCE);
			UI_play_sound_effect(0x0051);
			var0006->move_object([0x0715, 0x0582, 0x0000]);
			var0007 = script var0006 {
				nohalt;
				actor frame standing;
				face FACE_SOUTH;
			};
			var0004 = Func09A0(0x0000, 0x0001);
			if (var0004) {
				var0007 = var0004->set_item_quality(0x0000);
			}
		}
		if (var0002 == 0x0001) {
			UI_sprite_effect(ANIMATION_PURPLE_BUBBLES, 0x06F1, 0x0582, 0x0000, 0x0000, 0x0000, LOOP_ONCE);
			UI_play_sound_effect(0x0051);
			var0006->move_object([0x06F1, 0x0582, 0x0000]);
			var0007 = script var0006 {
				nohalt;
				actor frame standing;
				face FACE_EAST;
			};
			var0004 = Func09A0(0x0000, 0x0001);
			if (var0004) {
				var0007 = var0004->set_item_quality(0x0001);
			}
		}
		if (var0002 == 0x0002) {
			UI_sprite_effect(ANIMATION_PURPLE_BUBBLES, 0x06C6, 0x0566, 0x0000, 0x0000, 0x0000, LOOP_ONCE);
			UI_play_sound_effect(0x0051);
			var0006->move_object([0x06C6, 0x0566, 0x0000]);
			var0007 = script var0006 {
				nohalt;
				actor frame standing;
				face FACE_SOUTH;
			};
			var0004 = Func09A0(0x0000, 0x0001);
			if (var0004) {
				var0007 = var0004->set_item_quality(0x0002);
			}
		}
		if (var0002 == 0x0003) {
			UI_sprite_effect(ANIMATION_PURPLE_BUBBLES, 0x06D1, 0x0555, 0x0000, 0x0000, 0x0000, LOOP_ONCE);
			UI_play_sound_effect(0x0051);
			var0006->move_object([0x06D1, 0x0555, 0x0000]);
			var0007 = script var0006 {
				nohalt;
				actor frame standing;
				face FACE_EAST;
			};
			var0004 = Func09A0(0x0000, 0x0001);
			if (var0004) {
				var0007 = var0004->set_item_quality(0x0003);
			}
		}
		if (var0002 == 0x0004) {
			UI_sprite_effect(ANIMATION_PURPLE_BUBBLES, 0x0705, 0x0571, 0x0000, 0x0000, 0x0000, LOOP_ONCE);
			UI_play_sound_effect(0x0051);
			var0006->move_object([0x0705, 0x0571, 0x0000]);
			var0007 = script var0006 {
				nohalt;
				actor frame standing;
				face FACE_WEST;
			};
			var0004 = Func09A0(0x0000, 0x0001);
			if (var0004) {
				var0007 = var0004->set_item_quality(0x0004);
			}
		}
		if (var0002 == 0x0005) {
			UI_sprite_effect(ANIMATION_PURPLE_BUBBLES, 0x0731, 0x0569, 0x0000, 0x0000, 0x0000, LOOP_ONCE);
			UI_play_sound_effect(0x0051);
			var0006->move_object([0x0731, 0x0569, 0x0000]);
			var0007 = script var0006 {
				nohalt;
				actor frame standing;
				face FACE_EAST;
			};
			var0004 = Func09A0(0x0000, 0x0001);
			if (var0004) {
				var0007 = var0004->set_item_quality(0x0005);
			}
		}
		if (var0002 == 0x0006) {
			UI_sprite_effect(ANIMATION_PURPLE_BUBBLES, 0x0726, 0x0573, 0x0000, 0x0000, 0x0000, LOOP_ONCE);
			UI_play_sound_effect(0x0051);
			var0006->move_object([0x0726, 0x0573, 0x0000]);
			var0007 = script var0006 {
				nohalt;
				actor frame standing;
				face FACE_SOUTH;
			};
			var0004 = Func09A0(0x0000, 0x0001);
			if (var0004) {
				var0007 = var0004->set_item_quality(0x0006);
			}
		}
		if (var0002 == 0x0007) {
			UI_sprite_effect(ANIMATION_PURPLE_BUBBLES, 0x09A1, 0x0050, 0x0000, 0x0000, 0x0000, LOOP_ONCE);
			UI_play_sound_effect(0x0051);
			var0006->move_object([0x09A1, 0x0050, 0x0000]);
			var0007 = script var0006 {
				nohalt;
				actor frame standing;
				face FACE_SOUTH;
			};
			var0004 = Func09A0(0x0000, 0x0001);
			if (var0004) {
				var0007 = var0004->set_item_quality(0x0007);
			}
		}
		if (var0002 == 0x0008) {
			UI_sprite_effect(ANIMATION_PURPLE_BUBBLES, 0x09C0, 0x0058, 0x0000, 0x0000, 0x0000, LOOP_ONCE);
			UI_play_sound_effect(0x0051);
			var0006->move_object([0x09C0, 0x0058, 0x0000]);
			var0007 = script var0006 {
				nohalt;
				actor frame standing;
				face FACE_EAST;
			};
			var0004 = Func09A0(0x0000, 0x0001);
			if (var0004) {
				var0007 = var0004->set_item_quality(0x0008);
			}
		}
		var0006->set_schedule_type(WAIT);
		var0007 = script var0006 after 10 ticks {
			nohalt;
			call Func06E6;
		};
		remove_item();
		abort;
	}
	if (event == SCRIPTED) {
		var0006 = get_npc_number();
		var0008 = "";
		var0004 = Func09A0(0x0000, 0x0001);
		if (var0004) {
			var0002 = var0004->get_item_quality();
		}
		if (var0002 == 0x0000) {
			var0008 = "Dost thou like to read, Avatar? I have some hot new titles for thee.";
		}
		if (var0002 == 0x0001) {
			var0008 = "Come in and relax, Avatar.";
		}
		if (var0002 == 0x0002) {
			var0008 = "Come and meet the sweet ladies, Avatar.";
		}
		if (var0002 == 0x0003) {
			var0008 = "Wilt thou watch the children for me, Avatar?";
		}
		if (var0002 == 0x0004) {
			var0008 = "Come and dance a jig with these fine fellows, Avatar.";
		}
		if (var0002 == 0x0005) {
			var0009 = UI_part_of_day();
			if ((var0009 == MIDNIGHT) || (var0009 == EARLY)) {
				var000A = "a late night morsel";
			}
			if ((var0009 == DAWN) || (var0009 == MORNING)) {
				var000A = "breakfast";
			}
			if ((var0009 == NOON) || (var0009 == AFTERNOON)) {
				var000A = "lunch";
			}
			if ((var0009 == EVENING) || (var0009 == NIGHT)) {
				var000A = "dinner";
			}
			var0008 = ("Thou'rt just in time for " + var000A) + ", Avatar.";
		}
		if (var0002 == 0x0006) {
			var0008 = "Come in, come in, Avatar. I have cooked something special for thee.";
		}
		if (var0002 == 0x0007) {
			var0008 = "So, thou hast found my playroom...";
		}
		if (var0002 == 0x0008) {
			var0008 = "Thou'rt almost there, Avatar.";
			var0004 = Func09A0(0x0000, 0x0001);
			UI_play_music(0x0033, var0004);
		}
		if (var0006 == ANTI_IOLO) {
			BRAX->show_npc_face0(0x0000);
		}
		if (var0006 == ANTI_DUPRE) {
			WATSON->show_npc_face0(0x0000);
		}
		if (var0006 == ANTI_SHAM) {
			BRENDA->show_npc_face0(0x0000);
		}
		say(var0008,
			"");
		UI_remove_npc_face0();
		var000B = var0006->get_object_position();
		Func09B8();
		if (var0002 == 0x0006) {
			var000C = UI_create_new_object2(0x0151, var000B);
			if (var000C) {
				var000C->set_alignment(EVIL);
				var000C->set_schedule_type(IN_COMBAT);
				var0007->set_oppressor(AVATAR->get_npc_object());
			}
			var0007 = Func09A1(0x0151);
		}
	}
}

extern var Func09BA 0x9BA ();
extern var Func097E 0x97E (var var0000);
extern void Func09B8 0x9B8 ();

void Func06E7 object#(0x6E7) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;
	var var0008;
	var var0009;

	if (Func09BA()) {
		abort;
	}
	var0000 = AVATAR->get_object_position();
	var0001 = get_object_position();
	if ((event == EGG) && (Func097E(var0000[0x0003] - var0001[0x0003]) < 0x0003)) {
		UI_sprite_effect(ANIMATION_PURPLE_BUBBLES, 0x06C9, 0x0588, 0x0000, 0x0000, 0x0000, LOOP_ONCE);
		UI_play_sound_effect(0x0051);
		ANTI_IOLO->move_object([0x06C9, 0x0588, 0x0000]);
		var0002 = script ANTI_IOLO {
			nohalt;
			actor frame standing;
			face FACE_SOUTH;
		};
		var0002 = script ANTI_IOLO after 10 ticks {
			nohalt;
			call Func06E7;
		};
		var0003 = find_nearby(0x010E, 0x0006, MASK_NONE);
		if (var0003) {
			var0002 = script var0003 {
				nohalt;
				call Func010E;
			};
		}
		remove_item();
	}
	if (event == SCRIPTED) {
		BRAX->show_npc_face0(0x0000);
		say("\"Welcome to mine own private shooting gallery, Avatar.\"");
		UI_remove_npc_face0();
		Func09B8();
		var0004 = find_nearby(0x0178, 0x000A, MASK_NONE);
		if (var0004) {
			var0004->set_item_frame(0x0002);
		}
		var0005 = find_nearby(0x00C8, 0x001E, MASK_EGG);
		for (var0008 in var0005 with var0006 to var0007) {
			var0009 = var0008->get_item_frame();
			if (((var0009 > 0x0001) && (var0009 < 0x0006)) || ((var0009 > 0x0008) && (var0009 < 0x000D))) {
				var0002 = script var0008 {
					setegg avatar_near, 15;
				};
			}
		}
	}
}

extern var Func097E 0x97E (var var0000);
extern void Func09B8 0x9B8 ();

void Func06E8 object#(0x6E8) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;

	var0000 = AVATAR->get_object_position();
	var0001 = get_object_position();
	if ((event == EGG) && (Func097E(var0000[0x0003] - var0001[0x0003]) < 0x0003)) {
		var0002 = find_nearby(0x00C8, 0x0028, MASK_EGG);
		for (var0005 in var0002 with var0003 to var0004) {
			var0006 = script var0005 {
				setegg avatar_near, 15;
			};
		}
		Func09B8();
		remove_item();
	}
}

extern var Func09B9 0x9B9 (var var0000, var var0001);

void Func06E9 object#(0x6E9) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;
	var var0008;
	var var0009;
	var var000A;
	var var000B;
	var var000C;
	var var000D;

	if (event == EGG) {
		var0000 = find_nearby(0x00C8, 0x0082, MASK_EGG);
		for (var0003 in var0000 with var0001 to var0002) {
			var0004 = var0003->get_item_frame();
			if (((var0004 > 0x0002) && (var0004 < 0x0007)) || ((var0004 > 0x0008) && (var0004 < 0x000D))) {
				var0003->remove_item();
			}
		}
		var0005 = get_object_position();
		var0006 = 0x0000;
		UI_play_sound_effect(0x002C);
		while (var0006 < 0x000E) {
			var0007 = UI_die_roll(0x0001, 0x0002);
			if (UI_die_roll(0x0000, 0x0001) == 0x0000) {
				var0007 *= -1;
			}
			var0008 = var0006 + var0007;
			var0009 = UI_create_new_object(0x037F);
			if (var0009) {
				var0009->set_item_flag(TEMPORARY);
				var000A = UI_update_last_created(Func09B9(var0005[0x0001], (var0005[0x0002] + var0008)));
			}
			var000B = UI_create_new_object(0x037F);
			if (var000B) {
				var000B->set_item_flag(TEMPORARY);
				var000A = UI_update_last_created(Func09B9(var0005[0x0001], (var0005[0x0002] - var0008)));
			}
			var0006 += 0x0001;
		}
		var0006 = 0x0000;
		UI_play_sound_effect(0x002C);
		while (var0006 < 0x000F) {
			var0005 = get_object_position();
			var000C = UI_die_roll(0x0001, 0x0008);
			var000D = UI_die_roll(0x0001, 0x0008);
			if (UI_die_roll(0x0000, 0x0001) == 0x0000) {
				var000C *= -1;
			}
			if (UI_die_roll(0x0000, 0x0001) == 0x0000) {
				var000D *= -1;
			}
			var0005[0x0001] += var000C;
			var0005[0x0002] += var000D;
			var0009 = UI_create_new_object(0x037F);
			if (var0009) {
				var0009->set_item_flag(TEMPORARY);
				var000A = UI_update_last_created(Func09B9(var0005[0x0001], var0005[0x0002]));
			}
			var0006 += 0x0001;
		}
		remove_item();
	}
}

extern void Func09AD 0x9AD (var var0000);

void Func06EA object#(0x6EA) () {
	var var0000;

	if (event == EGG) {
		if (!gflags[INSANITY_BANE_DEAD]) {
			BRAX->show_npc_face0(0x0000);
			say("\"I had almost tired of waiting for thee, Avatar. Thou'rt some hero... it\ttook thee long enough.\"");
			UI_remove_npc_face0();
		}
		var0000 = [ANTI_IOLO, ANTI_DUPRE, ANTI_SHAM];
		if (!gflags[INSANITY_BANE_DEAD]) {
			ANTI_IOLO->set_item_flag(SI_TOURNAMENT);
			ANTI_IOLO->set_alignment(EVIL);
			ANTI_IOLO->set_schedule_type(IN_COMBAT);
			Func09AD(ANTI_IOLO);
		}
		if (!gflags[WANTONNESS_BANE_DEAD]) {
			ANTI_DUPRE->set_item_flag(SI_TOURNAMENT);
			ANTI_DUPRE->set_alignment(EVIL);
			ANTI_DUPRE->set_schedule_type(IN_COMBAT);
			Func09AD(ANTI_DUPRE);
		}
		if (!gflags[ANARCHY_BANE_DEAD]) {
			ANTI_SHAM->set_item_flag(SI_TOURNAMENT);
			ANTI_SHAM->set_alignment(EVIL);
			ANTI_SHAM->set_schedule_type(IN_COMBAT);
			Func09AD(ANTI_SHAM);
		}
	}
}

extern void Func09B8 0x9B8 ();

void Func06EB object#(0x6EB) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;
	var var0008;
	var var0009;
	var var000A;
	var var000B;
	var var000C;
	var var000D;

	if (event == EGG) {
		var0000 = find_nearby(0x0113, 0x000F, MASK_EGG);
		var0001 = 0x0000;
		for (var0004 in var0000 with var0002 to var0003) {
			var0005 = var0004->get_item_frame();
			if (var0005 == 0x0000) {
				var0001 = var0004;
			}
		}
		if (var0001) {
			UI_sprite_effect(ANIMATION_PURPLE_BUBBLES, 0x09B3, 0x0027, 0x0000, 0x0000, 0x0000, LOOP_ONCE);
			UI_play_sound_effect(0x0051);
			ANTI_IOLO->move_object([0x09B3, 0x0027, 0x0000]);
			var0006 = script ANTI_IOLO {
				nohalt;
				actor frame standing;
				face FACE_EAST;
			};
			var0006 = script ANTI_IOLO after 10 ticks {
				nohalt;
				call Func06EB;
			};
		} else {
			var0007 = find_nearby(0x0370, 0x0014, MASK_NONE);
			var0007 &= find_nearby(0x038A, 0x0014, MASK_NONE);
			var0007 &= find_nearby(0x013D, 0x0014, MASK_NONE);
			for (var000A in var0007 with var0008 to var0009) {
				var000B = var000A->get_object_position();
				UI_sprite_effect(ANIMATION_TELEPORT2, var000B[0x0001], var000B[0x0002], 0x0000, 0x0000, 0x0000, LOOP_ONCE);
				UI_play_sound_effect(0x0051);
			}
			Func09B8();
		}
	}
	if (event == SCRIPTED) {
		var0000 = find_nearby(0x0113, 0x000F, MASK_EGG);
		var0001 = 0x0000;
		for (var0004 in var0000 with var000C to var000D) {
			var0005 = var0004->get_item_frame();
			if (var0005 == 0x0000) {
				var0006 = script var0004 {
					hatch;
				};
				var0001 = var0004;
			}
		}
		if (var0001) {
			BRAX->show_npc_face0(0x0000);
			say("\"Hurry, Avatar, I am waiting for thee...\"");
			UI_remove_npc_face0();
		}
		Func09B8();
	}
}

extern var Func09BA 0x9BA ();
extern var Func097E 0x97E (var var0000);
extern void Func09B8 0x9B8 ();

void Func06EC object#(0x6EC) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;

	if (Func09BA()) {
		abort;
	}
	var0000 = AVATAR->get_object_position();
	var0001 = get_object_position();
	if ((event == EGG) && (Func097E(var0000[0x0003] - var0001[0x0003]) < 0x0003)) {
		if (!gflags[AVATAR_IN_BEDROOM]) {
			var0002 = 0x0000;
			var0003 = get_item_quality();
			if (var0003 == 0x0000) {
				UI_sprite_effect(ANIMATION_PURPLE_BUBBLES, 0x09A0, 0x0027, 0x0000, 0x0000, 0x0000, LOOP_ONCE);
				UI_play_sound_effect(0x0051);
				ANTI_IOLO->move_object([0x09A0, 0x0027, 0x0000]);
				var0004 = FACE_EAST;
			}
			if (var0003 == 0x0001) {
				UI_sprite_effect(ANIMATION_PURPLE_BUBBLES, 0x09C1, 0x0024, 0x0000, 0x0000, 0x0000, LOOP_ONCE);
				UI_play_sound_effect(0x0051);
				ANTI_IOLO->move_object([0x09C1, 0x0024, 0x0000]);
				var0004 = FACE_SOUTH;
			}
			if (var0003 == 0x0002) {
				UI_sprite_effect(ANIMATION_PURPLE_BUBBLES, 0x099F, 0x0035, 0x0000, 0x0000, 0x0000, LOOP_ONCE);
				UI_play_sound_effect(0x0051);
				ANTI_IOLO->move_object([0x099F, 0x0035, 0x0000]);
				var0004 = FACE_EAST;
			}
			if (var0003 == 0x0003) {
				UI_sprite_effect(ANIMATION_PURPLE_BUBBLES, 0x09C7, 0x0031, 0x0000, 0x0000, 0x0000, LOOP_ONCE);
				UI_play_sound_effect(0x0051);
				ANTI_IOLO->move_object([0x09C7, 0x0031, 0x0000]);
				var0004 = FACE_SOUTH;
			}
			// Bug: this comparison is always true. I'm not sure what it was
			// supposed to be. Maybe var0004?
			if (ANTI_IOLO) {
				var0005 = script ANTI_IOLO {
					nohalt;
					actor frame standing;
					face var0004;
				};
				var0005 = script ANTI_IOLO after 10 ticks {
					nohalt;
					call Func06EC;
				};
			}
		}
		gflags[AVATAR_IN_BEDROOM] = true;
		remove_item();
	}
	if (event == SCRIPTED) {
		BRAX->show_npc_face0(0x0000);
		say("\"Thou'rt not here to sleep, Avatar.\"");
		UI_remove_npc_face0();
		Func09B8();
	}
}

extern void Func0949 0x949 (var var0000);

void Func06ED object#(0x6ED) () {
	var var0000;

	var0000 = script item {
		nohalt;
		repeat 3 {
			sfx 30;
			wait 15;
		};
	};
	Func0949(["@An alarm bell!", "They know that we are here.@"]);
}

extern void Func0907 0x907 (var var0000, var var0001);
extern var Func090A 0x90A (var var0000);
extern var Func090B 0x90B (var var0000);

void Func06EE object#(0x6EE) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;

	var0000 = find_nearby(0x0106, 0x0002, MASK_NONE);
	event = DOUBLECLICK;
	if (var0000) {
		var0000 = find_nearby(0x033C, 0x0019, MASK_NONE);
		for (var0003 in var0000 with var0001 to var0002) {
			Func0907(var0003, 0x0000);
			var0004 = Func090A(var0003);
		}
		var0000 = find_nearby(0x034D, 0x0019, MASK_NONE);
		for (var0003 in var0000 with var0005 to var0006) {
			Func0907(var0003, 0x0000);
			var0004 = Func090B(var0003);
		}
	}
}

extern var Func097D 0x97D (var var0000, var var0001, var var0002, var var0003, var var0004);

void Func06EF object#(0x6EF) () {
	if (Func097D(PARTY, 0x0001, 0x0106, QUALITY_ANY, 0x0002)) {
		PARTY->move_object([0x01B2, 0x03AD, 0x0000]);
	}
}

extern var Func0906 0x906 (var var0000);
extern void Func010E shape#(0x10E) ();
extern void Func0178 shape#(0x178) ();
extern void Func01B1 shape#(0x1B1) ();
extern void Func01B0 shape#(0x1B0) ();
extern void Func0907 0x907 (var var0000, var var0001);

void Func06F0 object#(0x6F0) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;
	var var0008;
	var var0009;
	var var000A;
	var var000B;
	var var000C;
	var var000D;
	var var000E;
	var var000F;
	var var0010;
	var var0011;
	var var0012;
	var var0013;
	var var0014;
	var var0015;
	var var0016;

	var0000 = false;
	var0001 = find_nearby(0x02B0, 0x0002, MASK_NONE);
	if (var0001) {
		for (var0004 in var0001 with var0002 to var0003) {
			if (var0004->get_item_frame() == 0x0004) {
				var0000 = true;
			}
		}
	}
	if (!var0000) {
		event = DOUBLECLICK;
		var0004 = find_nearby(0x010E, 0x0014, MASK_NONE);
		for (var0007 in var0004 with var0005 to var0006) {
			if (Func0906(var0007) == 0x0001) {
				var0007->Func010E();
			}
		}
		var0004 = find_nearby(0x0178, 0x0014, MASK_NONE);
		for (var0007 in var0004 with var0008 to var0009) {
			if (Func0906(var0007) == 0x0001) {
				var0007->Func0178();
			}
		}
		var0004 = find_nearby(0x01B1, 0x0014, MASK_NONE);
		for (var0007 in var0004 with var000A to var000B) {
			if (Func0906(var0007) == 0x0001) {
				var0007->Func01B1();
			}
		}
		var0004 = find_nearby(0x01B0, 0x0014, MASK_NONE);
		for (var0007 in var0004 with var000C to var000D) {
			if (Func0906(var0007) == 0x0001) {
				var0007->Func01B0();
			}
		}
		var0004 = find_nearby(0x010E, 0x0014, MASK_NONE) & (find_nearby(0x0178, 0x0014, MASK_NONE) & (find_nearby(0x01B1, 0x0014, MASK_NONE) & find_nearby(0x01B0, 0x0014, MASK_NONE)));
		for (var0007 in var0004 with var000E to var000F) {
			Func0907(var0007, 0x0002);
		}
	} else {
		var0004 = find_nearby(0x010E, 0x0014, MASK_NONE) & (find_nearby(0x0178, 0x0014, MASK_NONE) & (find_nearby(0x01B1, 0x0014, MASK_NONE) & find_nearby(0x01B0, 0x0014, MASK_NONE)));
		for (var0007 in var0004 with var0010 to var0011) {
			if (Func0906(var0007) == 0x0002) {
				Func0907(var0007, 0x0000);
			}
		}
	}
	var0012 = find_nearby(0x00C8, 0x003C, MASK_ALL_UNSEEN);
	for (var0015 in var0012 with var0013 to var0014) {
		if (var0015->get_item_frame() == 0x0001) {
			if (!var0000) {
				var0016 = script var0015 {
					setegg avatar_near, 20;
				};
			} else {
				var0016 = script var0015 {
					setegg external_criteria, 0;
				};
			}
		}
	}
}

void Func06F1 object#(0x6F1) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;
	var var0008;
	var var0009;
	var var000A;
	var var000B;
	var var000C;

	var0000 = false;
	var0001 = find_nearby(0x02B0, 0x000A, MASK_NONE);
	if (var0001) {
		for (var0004 in var0001 with var0002 to var0003) {
			if (var0004->get_item_frame() == 0x0004) {
				var0005 = var0004->get_object_position();
				var0006 = get_object_position();
				if ((var0006[0x0002] == var0005[0x0002]) && ((var0006[0x0001] + 0x0008) == var0005[0x0001])) {
					var0000 = true;
				}
			}
		}
		if (var0000) {
			var0001 = find_nearby(0x02C3, 0x0003, MASK_NONE);
			for (var0004 in var0001 with var0007 to var0008) {
				if (var0004->get_item_quality() == 0x003D) {
					var0009 = UI_get_party_list();
					for (var000C in var0009 with var000A to var000B) {
						var000C->move_object([0x00D3, 0x036E, 0x0000]);
					}
				}
			}
		}
	}
}

void Func06F3 object#(0x6F3) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;
	var var0008;
	var var0009;
	var var000A;

	if (gflags[BANES_RELEASED]) {
		remove_item();
		abort;
	}
	var0000 = find_nearby(0x00E4, 0x001E, MASK_NONE);
	for (var0003 in var0000 with var0001 to var0002) {
		if (var0003->get_npc_id() == 0x0009) {
			abort;
		}
	}
	var0004 = get_object_position();
	var0005 = UI_create_new_object2(0x00E4, var0004);
	var0006 = var0005->get_cont_items(0x025B, QUALITY_ANY, FRAME_ANY);
	for (var0009 in var0006 with var0007 to var0008) {
		if (var0009->get_item_shape() == 0x025B) {
			var0009->remove_item();
		}
	}
	var000A = var0005->add_cont_items(0x0001, 0x0259, 0x0000, 0x0000, true);
	var000A = var0005->set_npc_prop(INTELLIGENCE, 10);
	var0005->set_npc_id(0x0009);
	var0005->set_schedule_type(IN_COMBAT);
	var0005->set_schedule_type(MAJOR_SIT);
}

extern var Func0992 0x992 (var var0000, var var0001, var var0002, var var0003);

void Func06F4 object#(0x6F4) () {
	var var0000;

	if (gflags[FOUND_BROWN_BOTTLE]) {
		remove_item();
	}
	if (gflags[KNOWS_GOBLINS_HIDEOUT]) {
		var0000 = Func0992(0x0001, "@Wait! A bottle!@", "@This bottle could be a clue...@", true);
	}
}

extern void Func097F 0x97F (var var0000, var var0001, var var0002);

void Func06F5 object#(0x6F5) () {
	var var0000;

	if ((!gflags[AVATAR_GOT_SHORT_STICK]) || (gflags[DUPRE_IS_TOAST] || (SHAMINO->npc_nearby() && (DUPRE->npc_nearby() && IOLO->npc_nearby())))) {
		abort;
	}
	var0000 = THOXA->approach_avatar(0x0050, 0x0028);
	UI_play_sound_effect(0x0051);
	Func097F(THOXA, "@Avatar!@", 0x0005);
	THOXA->set_schedule_type(TALK);
}

extern void Func09AD 0x9AD (var var0000);

void Func06F6 object#(0x6F6) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;

	var0000 = get_object_position();
	if (event == EGG) {
		var0001 = get_item_quality();
		UI_sprite_effect(ANIMATION_GREEN_BUBBLES, var0000[0x0001], var0000[0x0002], 0x0000, 0x0000, 0x0000, LOOP_ONCE);
		if (var0001 == 0x0000) {
			UI_error_message("Egg quality not set.");
		}
		if (var0001 == 0x0001) {
			var0002 = UI_create_new_object2(0x016B, var0000);
			if (var0002) {
				Func09AD(var0002);
			}
			var0002 = set_item_quality(0x0003);
			var0002 = script item after 10 ticks {
				call Func06F6;
			};
		}
		if (var0001 == 0x0002) {
			var0003 = UI_create_new_object2(0x01F5, var0000);
			if (var0003) {
				var0003->set_alignment(EVIL);
				var0003->set_schedule_type(IN_COMBAT);
				var0003->set_oppressor(AVATAR);
			}
		}
		if (var0001 == 0x0003) {
			var0000[0x0002] -= 0x000A;
			UI_sprite_effect(ANIMATION_GREEN_BUBBLES, var0000[0x0001], var0000[0x0002], 0x0000, 0x0000, 0x0000, LOOP_ONCE);
			var0002 = UI_create_new_object2(0x016B, var0000);
			if (var0002) {
				Func09AD(var0002);
			}
			remove_item();
		}
		var0002 = find_nearby(0x025F, 0x0014, MASK_EGG);
		if (var0002) {
			var0000 = var0002->get_object_position();
			UI_sprite_effect(ANIMATION_GREEN_BUBBLES, var0000[0x0001], var0000[0x0002], 0x0000, 0x0000, 0x0000, LOOP_ONCE);
			var0002 = script var0002 {
				nohalt;
				say "@Kal Xen!@";
			};
		}
	}
}

extern void Func097F 0x97F (var var0000, var var0001, var var0002);
extern var Func0955 0x955 ();
extern var Func099B 0x99B (var var0000, var var0001, var var0002, var var0003, var var0004, var var0005, var var0006);

void Func06F7 object#(0x6F7) () {
	var var0000;

	if ((event == EGG) && SHAMINO->get_item_flag(IN_PARTY)) {
		Func097F(SHAMINO, "@I know this place!@", 0x0002);
		remove_item();
		var0000 = script AVATAR after 12 ticks {
			nohalt;
			call Func06F7;
		};
	}
	if (event == SCRIPTED) {
		SHAMINO->clear_item_say();
		SHAMINO->show_npc_face0(0x0000);
		say("\"I never thought to see this again!\"");
		say("\"Avatar, this castle thou dost see before thee was once mine home. This was once my kingdom -- And once, so long ago that mine heart alone remembers, within these walls dwelt the fairest lady who ever lived... Oh, my poor Beatrix! Left alone so very long ago...\"");
		say("\"But such remorse doth do us no good now... She is long since dust, I fear, and our peril now is real. If thou wishest, I can draw thee a map of mine home, as once I knew it.\"");
		if (Func0955() == true) {
			say("\"I do not know what changes were made after I left, Avatar. But perhaps this will help.\"");
			var0000 = Func099B(AVATAR, 0x0001, 0x00B2, QUALITY_ANY, 0x0004, false, true);
		} else {
			say("\"'Tis just as well... I do not know what changes were made after I left. It probably would not help.\"");
		}
		say("\"I seem to recall that there was a secret entrance to the west...\"");
		say("\"But that was a long time ago. I doubt that the two great trees near the illusionary mountain entrance are still there. The secret entrance would be most difficult to find should its landmarks be gone.\"");
		say("\"'Tis a pity that so much hath changed without my being here...\"");
	}
}

extern var Func0992 0x992 (var var0000, var var0001, var var0002, var var0003);

void Func06FA object#(0x6FA) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;
	var var0008;
	var var0009;
	var var000A;
	var var000B;
	var var000C;
	var var000D;
	var var000E;
	var var000F;
	var var0010;
	var var0011;
	var var0012;
	var var0013;
	var var0014;
	var var0015;
	var var0016;

	if (event == EGG) {
		var0000 = AVATAR->find_nearby(0x010F, 0x0064, MASK_NONE) & AVATAR->find_nearby(0x0110, 0x0064, MASK_NONE);
		var0001 = false;
		for (var0004 in var0000 with var0002 to var0003) {
			var0005 = var0004->get_object_position();
			if (var0005[0x0003] != 0x0000) {
				var0001 = true;
			}
		}
		if (var0001) {
			var0006 = AVATAR->find_nearby(0x0114, 0x003C, MASK_NONE) & AVATAR->find_nearby(0x0115, 0x003C, MASK_NONE);
			var0007 = AVATAR->find_nearby(0x010F, 0x003C, MASK_NONE) & AVATAR->find_nearby(0x0110, 0x003C, MASK_NONE);
			for (var000A in var0007 with var0008 to var0009) {
				var000B = var000A->get_lift();
				if (var000B == 0x0001) {
					var000C = script var000A {
						nohalt;
						sfx 89;
						call Func0609;
					};
					for (var000F in var0006 with var000D to var000E) {
						var000C = script var000F {
							nohalt;
							frame 2;
							frame 3;
						};
					}
				}
				if (var000B == 0x0002) {
					var000C = script var000A {
						nohalt;
						repeat 2 {
							sfx 89;
							call Func0609;
						};
					};
					for (var000F in var0006 with var0010 to var0011) {
						var000C = script var000F {
							nohalt;
							frame 2;
							frame 3;
						};
					}
				}
				if (var000B == 0x0003) {
					var000C = script var000A {
						nohalt;
						repeat 3 {
							sfx 89;
							call Func0609;
						};
					};
					for (var000F in var0006 with var0012 to var0013) {
						var000C = script var000F {
							nohalt;
							frame 3;
						};
					}
				}
				if (var000B == 0x0004) {
					var000C = script var000A {
						nohalt;
						repeat 3 {
							sfx 89;
							call Func0609;
						};
					};
				}
				for (var000F in var0006 with var0014 to var0015) {
					var000C = script var000F {
						nohalt;
						frame 2;
						frame 1;
						frame 0;
					};
				}
			}
			var0000 = script item after 10 ticks {
				nohalt;
				call Func06FA;
			};
			var0016 = Func0992(0x0001, "@Look -- the gates!@", "@The gates are closing!@", true);
			AUTO1->set_alignment(EVIL);
			AUTO1->set_item_flag(SI_TOURNAMENT);
			AUTO1->move_object([0x0723, 0x0A65]);
			AUTO1->set_schedule_type(WAIT);
			AUTO2->set_alignment(EVIL);
			AUTO2->set_item_flag(SI_TOURNAMENT);
			AUTO2->move_object([0x074C, 0x0A67]);
			AUTO2->set_schedule_type(WAIT);
			AUTO3->set_alignment(EVIL);
			AUTO3->set_item_flag(SI_TOURNAMENT);
			AUTO3->move_object([0x071B, 0x0A66]);
			AUTO3->set_schedule_type(WAIT);
			AUTO4->set_alignment(EVIL);
			AUTO4->set_item_flag(SI_TOURNAMENT);
			AUTO4->move_object([0x0754, 0x0A64]);
			AUTO4->set_schedule_type(WAIT);
		}
		gflags[ARENA_BATTLE_STARTED] = true;
		remove_item();
	}
}

extern var Func09A0 0x9A0 (var var0000, var var0001);
extern void Func097F 0x97F (var var0000, var var0001, var var0002);
extern void Func04CB object#(0x4CB) ();

void Func06FB object#(0x6FB) () {
	var var0000;

	UI_play_music(0x0012, Func09A0(0x0005, 0x0001));
	HENCH2->move_object([0x0762, 0x03ED, 0x0000]);
	HENCH2->set_new_schedules(MIDNIGHT, WANDER, [0x0762, 0x03ED]);
	HENCH2->si_path_run_usecode([0x0762, 0x03F1, 0x0000], SI_PATH_SUCCESS, HENCH2->get_npc_object(), Func04CB, false);
	UI_set_path_failure(Func04CB, HENCH2->get_npc_object(), SI_PATH_FAILURE);
	var0000 = script HENCH2 after 8 ticks {
		nohalt;
		wait while far 10;
		say "@I will steal this!@";
		wait 14;
		face east;
		say "@'Tis the Avatar!@";
		wait 10;
		call Func04CB;
	};
	HENCH3->move_object([0x076C, 0x03E7, 0x0000]);
	HENCH3->set_new_schedules(MIDNIGHT, WANDER, [0x076C, 0x03E7]);
	HENCH3->run_schedule();
	Func097F(HENCH3, "@I be bored.@", 0x0003);
	DBEYER->move_object([0x0767, 0x03E4, 0x0001]);
	DBEYER->set_schedule_type(WAIT);
	var0000 = script DBEYER {
		nohalt;
		face south;
	};
}

extern var Func09A0 0x9A0 (var var0000, var var0001);

void Func06FC object#(0x6FC) () {
	var var0000;
	var var0001;
	var var0002;

	if (gflags[BEATRIX_FORGAVE_SHAMINO]) {
		remove_item();
		abort;
	}
	if (!SHAMINO->npc_nearby()) {
		abort;
	}
	UI_play_music(0x0038, Func09A0(0x0005, 0x0001));
	var0000 = UI_create_new_object2(0x01E2, get_object_position());
	var0000->set_alignment(GOOD);
	UI_play_sound_effect(0x0039);
	var0001 = var0000->add_cont_items(0x0001, 0x01A8, 0x0005, FRAME_ANY, 0x0012);
	var0001 = var0000->add_cont_items(0x0001, 0x0359, 0x0002, FRAME_ANY, 0x0012);
	var0001 = var0000->add_cont_items(0x0001, 0x02A4, 0x0005, FRAME_ANY, 0x0012);
	var0002 = get_item_quality();
	remove_item();
	BEATRIX->show_npc_face0(0x0000);
	if (var0002 == 0x0000) {
		say("\"So, thou didst finally think to return, King? It is too late! All are dead, the Goblins conquered all...\"");
		var0001 = script var0000 {
			nohalt;
			say "@Too late!@";
		};
	}
	if (var0002 == 0x0001) {
		say("\"Here is where my body did lie, until the Goblins pillaged the tomb...\"");
		say("\"I died of a broken heart, waiting for thy return...\"");
		var0001 = script var0000 {
			nohalt;
			say "@Betrayer!@";
		};
	}
	if (var0002 == 0x0002) {
		say("\"To think I loved thee once! I wrote thee notes of love, letters of trust -- but thou didst remember me no more, when Lord British summoned thee to his aid!\"");
		var0001 = script var0000 {
			nohalt;
			say "@Damn British!@";
		};
	}
	if (var0002 > 0x0002) {
		say("\"Welcome to the Castle of King Shamino, the Betrayer! Let me greet thee...\"");
		var0001 = script var0000 {
			nohalt;
			say "@Die, King!@";
		};
	}
	var0000->set_alignment(EVIL);
	var0000->set_schedule_type(IN_COMBAT);
	var0000->set_opponent(SHAMINO);
	var0000->set_oppressor(AVATAR);
	var0000->set_item_flag(SI_TOURNAMENT);
	var0000->set_item_flag(TEMPORARY);
	var0000 = script Func09A0(0x0005, 0x0001) after 20 ticks {
		nohalt;
		call Func01E2;
	};
	SHAMINO->set_item_flag(SI_TOURNAMENT);
	gflags[BEATRIX_PROTECTION] = true;
}

extern void Func09AC 0x9AC (var var0000, var var0001, var var0002, var var0003);

void Func06FD object#(0x6FD) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;

	if (event == SI_PATH_FAILURE) {
		set_schedule_type(WANDER);
	}
	if (event == SI_PATH_SUCCESS) {
		GUARD1->set_schedule_type(WAIT);
		var0000 = get_object_position();
		UI_sprite_effect(ANIMATION_TELEPORT, var0000[0x0001], var0000[0x0002], 0x0000, 0x0000, 0x0000, LOOP_ONCE);
		GUARD1->move_object([0x0722, 0x0273, 0x0000]);
		UI_sprite_effect(ANIMATION_TELEPORT, 0x0722, 0x0273, 0x0000, 0x0000, 0x000F, LOOP_ONCE2);
	}
	if (event == SCRIPTED) {
		var0000 = get_object_position();
		if ((get_schedule_type() == WAIT) || (get_schedule_type() == SPECIAL)) {
			abort;
		}
		GUARD1->set_schedule_type(WAIT);
		UI_sprite_effect(ANIMATION_TELEPORT, var0000[0x0001], var0000[0x0002], 0x0000, 0x0000, 0x0000, LOOP_ONCE);
		GUARD1->move_object([0x0722, 0x0273, 0x0000]);
		UI_sprite_effect(ANIMATION_TELEPORT, 0x0722, 0x0273, 0x0000, 0x0000, 0x000F, LOOP_ONCE2);
	}
	if (event == EGG) {
		var0001 = AVATAR->find_nearby(0x02EC, 0x000C, MASK_NONE);
		for (var0004 in var0001 with var0002 to var0003) {
			if (var0004->get_item_frame() == 0x000A) {
				break;
			}
		} nobreak {
			var0004 = false;
		}
		if (var0004) {
			var0004->remove_item();
			if (gflags[TRIED_TO_ENTER_ONCE]) {
				if (gflags[TRIED_TO_ENTER_TWICE]) {
					if ((GUARD1->get_schedule_type() != WAIT) || GUARD1->get_item_flag(SI_ZOMBIE)) {
						abort;
					}
					GUARD1->set_npc_id(0x000D);
					var0000 = GUARD1->get_object_position();
					UI_sprite_effect(ANIMATION_TELEPORT, var0000[0x0001], var0000[0x0002], 0x0000, 0x0000, 0x0000, LOOP_ONCE);
					var0000 = get_object_position();
					GUARD1->move_object([(var0000[0x0001] - 0x0004), var0000[0x0002], 0x0000]);
					UI_sprite_effect(ANIMATION_TELEPORT, (var0000[0x0001] - 0x0004), var0000[0x0002], 0x0000, 0x0000, 0x000F, LOOP_ONCE2);
					var0005 = script GUARD1 {
						nohalt;
						wait 60;
						call Func06FD;
					};
					GUARD1->set_alignment(CHAOTIC);
					GUARD1->set_npc_id(0x000D);
					Func09AC(GUARD1, (var0000[0x0001] - 0x0004), var0000[0x0002], WANDER);
					GUARD1->si_path_run_usecode([0x071E, 0x0277, 0x0000], SI_PATH_SUCCESS, GUARD1->get_npc_object(), Func06FD, false);
				} else {
					gflags[TRIED_TO_ENTER_TWICE] = true;
				}
			} else {
				gflags[TRIED_TO_ENTER_ONCE] = true;
			}
		}
	}
}

void Func06FE object#(0x6FE) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;
	var var0008;

	if (AVATAR->get_item_flag(ISPETRA)) {
		var0000 = UI_get_party_list();
		for (var0003 in var0000 with var0001 to var0002) {
			if ((var0003->get_item_shape() != 0x02EB) && (var0003 != AVATAR->get_npc_object())) {
				break;
			}
		} nobreak {
			abort;
		}
	}
	var0004 = AVATAR->find_nearby(0x02EC, 0x000C, MASK_NONE);
	for (var0007 in var0004 with var0005 to var0006) {
		if (var0007->get_item_frame() == 0x000A) {
			return;
		}
	}
	var0004 = UI_create_new_object(0x02EC);
	if (var0004) {
		var0004->set_item_frame(0x000A);
		var0008 = UI_update_last_created([0x071D, 0x0279, 0x0000]);
	}
}

extern var Func0992 0x992 (var var0000, var var0001, var var0002, var var0003);
extern void Func0924 0x924 (var var0000, var var0001);
extern void Func0455 object#(0x455) ();

void Func06FF object#(0x6FF) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;

	if (!gflags[ARENA_BATTLE_STARTED]) {
		abort;
	}
	var0000 = get_item_quality();
	if (var0000 == 0x0045) {
		if (!(gflags[AUTO1_IS_DEAD] && (gflags[AUTO2_IS_DEAD] && (gflags[AUTO3_IS_DEAD] && gflags[AUTO4_IS_DEAD])))) {
			abort;
		}
	}
	var0001 = "@Uh oh...@" & ("@Something is coming!@" & ("@I hear something...@" & ("@What was that?@" & ("@Oh, no!@" & "@Hark!@"))));
	var0002 = Func0992(0x0001, var0001[UI_get_random(UI_get_array_size(var0001))], var0001[UI_get_random(UI_get_array_size(var0001))], true);
	var0001 = find_nearby(0x036C, 0x0064, MASK_NONE);
	for (var0005 in var0001 with var0003 to var0004) {
		if (var0005->get_item_quality() == var0000) {
			Func0924(var0005, 0x0001);
		}
	}
	var0001 = false;
	if (var0000 == 0x0041) {
		var0001 = AUTO3;
	}
	if (var0000 == 0x0042) {
		var0001 = AUTO1;
	}
	if (var0000 == 0x0043) {
		var0001 = AUTO2;
	}
	if (var0000 == 0x0044) {
		var0001 = AUTO4;
	}
	if (var0001) {
		var0001->set_new_schedules(MIDNIGHT, IN_COMBAT, [0x0733, 0x0A79]);
		var0006 = var0001->get_object_position();
		var0001->si_path_run_usecode([var0006[0x0001], (var0006[0x0002] + 0x000F), 0x0000], SI_PATH_SUCCESS, var0001->get_npc_object(), Func0455, true);
		UI_set_path_failure(Func0455, var0001->get_npc_object(), SI_PATH_FAILURE);
	}
	remove_item();
}

extern void Func09AC 0x9AC (var var0000, var var0001, var var0002, var var0003);
extern void Func097F 0x97F (var var0000, var var0001, var var0002);

void Func0700 object#(0x700) () {
	if (gflags[KNOWS_ROTOLUNCIA_IS_KIDNAPPER] && (!gflags[AUTOMATON_SPOKE_ABOUT_KIDNAP])) {
		if (AUTO_MESSENGER->get_item_flag(DEAD)) {
			gflags[AUTOMATON_SPOKE_ABOUT_KIDNAP] = true;
		} else {
			Func09AC(AUTO_MESSENGER, -1, 0, TALK);
			Func097F(AUTO_MESSENGER, "@Who doth approach?!@", 0x0003);
		}
	}
}

extern void Func0922 0x922 (var var0000);

void Func0701 object#(0x701) () {
	var var0000;
	var var0001;

	if (event == SCRIPTED) {
		Func0922(0x0003);
	}
	if (event == EGG) {
		if (!gflags[BANES_RELEASED]) {
			abort;
		}
		var0000 = UI_create_new_object(0x0392);
		var0000->set_item_frame(0x0000);
		var0001 = var0000->set_item_quality(0x0049);
		if (UI_is_not_blocked([0x0333, 0x0A2E, 0x0001], 0x0392, 0x0000)) {
			var0001 = UI_update_last_created([0x0333, 0x0A2E, 0x0001]);
		} else if (UI_is_not_blocked([0x032D, 0x0A2F, 0x0002], 0x0392, 0x0000)) {
			var0001 = UI_update_last_created([0x032D, 0x0A2F, 0x0002]);
		} else if (UI_is_not_blocked([0x032B, 0x0A2F, 0x0002], 0x0392, 0x0000)) {
			var0001 = UI_update_last_created([0x032B, 0x0A2F, 0x0002]);
		} else if (UI_is_not_blocked([0x0339, 0x0A2F, 0x0002], 0x0392, 0x0000)) {
			var0001 = UI_update_last_created([0x0339, 0x0A2F, 0x0002]);
		} else {
			var0001 = UI_update_last_created([0x032D, 0x0A32, 0x0000]);
		}
		remove_item();
	}
}

extern void Func09AD 0x9AD (var var0000);
extern void Func097F 0x97F (var var0000, var var0001, var var0002);

void Func0702 object#(0x702) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;

	if (ROTOLUNCIA->get_item_flag(DEAD) && (event == EGG)) {
		remove_item();
		abort;
	}
	if (event == EGG) {
		var0000 = find_nearby(0x016B, 0x001E, MASK_NONE);
		var0001 = 0x0006 - UI_get_array_size(var0000);
		while (var0001 > 0x0000) {
			var0002 = UI_create_new_object2(0x016B, [(0x0865 + UI_get_random(0x0013)), 0x083B, 0x0000]);
			if (var0002) {
				if (gflags[FIGHT_ROTOLUNCIA]) {
					Func09AD(var0002);
				} else {
					var0002->set_schedule_type(TEND_SHOP);
					var0002->set_alignment(NEUTRAL);
				}
				var0001 -= 0x0001;
			}
		}
	}
	if (gflags[FIGHT_ROTOLUNCIA]) {
		Func097F(ROTOLUNCIA, "@Aha!@", 0x0000);
		ROTOLUNCIA->set_schedule_type(IN_COMBAT);
	}
	if ((ROTOLUNCIA->get_schedule_type() == IN_COMBAT) || (ROTOLUNCIA->get_schedule_type() == TALK)) {
		abort;
	}
	ROTOLUNCIA->clear_item_say();
	var0003 = UI_get_random(0x0006);
	if (var0003 == 0x0001) {
		Func097F(ROTOLUNCIA, "@Tell me!@", 0x0000);
	}
	if (var0003 == 0x0002) {
		Func097F(ROTOLUNCIA, "@Bring tongs!@", 0x0000);
	}
	if (var0003 == 0x0003) {
		Func097F(ROTOLUNCIA, "@Tell me the secret!@", 0x0003);
	}
	if (var0003 == 0x0004) {
		Func097F(ROTOLUNCIA, "@Bring the prisoner!@", 0x0000);
	}
	if (var0003 == 0x0005) {
		Func097F(ROTOLUNCIA, "@Make him bleed.@", 0x0000);
	}
	if (var0003 == 0x0006) {
		Func097F(ROTOLUNCIA, "@Torture him...@", 0x0000);
	}
	var0000 = find_nearby(0x016B, 0x001E, MASK_NONE);
	var0004 = false;
	if (var0000) {
		var0004 = var0000[UI_get_random(UI_get_array_size(var0000))];
		var0004->clear_item_say();
		if (var0003 == 0x0001) {
			var0002 = script var0004 after 5 ticks {
				nohalt;
				say "@Or die!@";
			};
		}
		if (var0003 == 0x0002) {
			var0002 = script var0004 after 5 ticks {
				nohalt;
				say "@Yes, Rotoluncia!@";
			};
		}
		if (var0003 == 0x0003) {
			var0002 = script var0004 after 5 ticks {
				nohalt;
				say "@Tell about Daemons!@";
			};
		}
		if (var0003 == 0x0004) {
			var0002 = script var0004 after 2 ticks {
				nohalt;
				say "@Let me do it!@";
			};
		}
		if (var0003 == 0x0005) {
			var0002 = script var0004 after 7 ticks {
				nohalt;
				say "@I'm thirsty...@";
			};
		}
		if (var0003 == 0x0006) {
			var0002 = script var0004 after 4 ticks {
				nohalt;
				say "@Then kill him!@";
			};
		}
	}
	var0002 = script item after (UI_get_random(0x000F) + 0x000A) ticks {
		nohalt;
		call Func0702;
	};
}

void Func0703 object#(0x703) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;

	var0000 = get_object_position();
	if (event == EGG) {
		var0001 = UI_create_new_object2(0x014E, var0000);
		if (var0001) {
			var0001->set_polymorph(0x014E);
			var0001->remove_item();
		}
		var0002 = UI_find_nearby_avatar(0x014E);
		for (var0005 in var0002 with var0003 to var0004) {
			var0005->clear_item_flag(POLYMORPH);
		}
	}
}

void Func0705 object#(0x705) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;
	var var0008;

	var0000 = 0x0000;
	var0001 = 0x0000;
	var0002 = find_nearby(0x0281, 0x0002, MASK_NONE);
	for (var0005 in var0002 with var0003 to var0004) {
		if (var0005->get_item_frame() == 0x0015) {
			var0000 = var0005;
		}
		if (var0005->get_item_frame() == 0x0016) {
			var0001 = var0005;
		}
	}
	if (var0000 && var0001) {
		var0006 = var0000->get_object_position();
		UI_play_sound_effect(0x0074);
		var0006[0x0001] -= var0006[0x0003] / 0x0002;
		var0006[0x0002] -= var0006[0x0003] / 0x0002;
		UI_sprite_effect(ANIMATION_LIGHTNING, (var0006[0x0001] - 0x0002), (var0006[0x0002] - 0x0002), 0x0000, 0x0000, 0x0000, LOOP_ONCE);
		UI_sprite_effect(ANIMATION_SMALL_RING_BLAST, (var0006[0x0001] - 0x0003), (var0006[0x0002] - 0x0003), 0x0000, 0x0000, 0x0000, LOOP_ONCE);
		var0006 = var0000->get_object_position();
		if (var0000) {
			var0000->remove_item();
		}
		if (var0001) {
			var0001->remove_item();
		}
		var0007 = UI_create_new_object(0x0281);
		if (var0007) {
			var0007->set_item_frame(0x0017);
			var0008 = var0007->set_item_quality(0x008B);
			var0008 = UI_update_last_created(var0006);
		}
	}
}

void Func0706 object#(0x706) () {
	var var0000;
	var var0001;

	var0000 = UI_get_party_list();
	if (MORTEGRO in var0000) {
		var0001 = MORTEGRO->get_object_position();
		var0001[0x0001] -= var0001[0x0003] / 0x0002;
		var0001[0x0002] -= var0001[0x0003] / 0x0002;
		MORTEGRO->remove_npc();
		UI_sprite_effect(ANIMATION_LIGHTNING, var0001[0x0001], var0001[0x0002], 0x0000, 0x0000, 0x0000, LOOP_ONCE);
	}
}

extern var Func0906 0x906 (var var0000);
extern void Func0907 0x907 (var var0000, var var0001);
extern void Func0204 shape#(0x204) ();
extern void Func00E1 shape#(0xE1) ();
extern void Func0178 shape#(0x178) ();
extern void Func010E shape#(0x10E) ();
extern void Func01B1 shape#(0x1B1) ();
extern void Func01B0 shape#(0x1B0) ();

void Func0707 object#(0x707) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;

	var0000 = AVATAR->find_nearby(0x010E, 0x000A, MASK_ALL_UNSEEN);
	var0000 &= AVATAR->find_nearby(0x0178, 0x000A, MASK_ALL_UNSEEN);
	var0000 &= AVATAR->find_nearby(0x01B1, 0x000A, MASK_ALL_UNSEEN);
	var0000 &= AVATAR->find_nearby(0x01B0, 0x000A, MASK_ALL_UNSEEN);
	var0000 &= AVATAR->find_nearby(0x0204, 0x000A, MASK_ALL_UNSEEN);
	var0000 &= AVATAR->find_nearby(0x00E1, 0x000A, MASK_ALL_UNSEEN);
	for (var0003 in var0000 with var0001 to var0002) {
		if (var0003->get_item_quality() == 0x00D9) {
			if (Func0906(var0003) == 0x0002) {
				Func0907(var0003, 0x0000);
				if (var0003->get_item_shape() == 0x0204) {
					var0003->Func0204();
				}
				if (var0003->get_item_shape() == 0x00E1) {
					var0003->Func00E1();
				}
				if (var0003->get_item_shape() == 0x0178) {
					var0003->Func0178();
				}
				if (var0003->get_item_shape() == 0x010E) {
					var0003->Func010E();
				}
				if (var0003->get_item_shape() == 0x01B1) {
					var0003->Func01B1();
				}
				if (var0003->get_item_shape() == 0x01B0) {
					var0003->Func01B0();
				}
			}
		}
	}
}

extern void Func0922 0x922 (var var0000);
extern var Func099B 0x99B (var var0000, var var0001, var var0002, var var0003, var var0004, var var0005, var var0006);

void Func0709 object#(0x709) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;

	var0000 = get_item_quality();
	if (var0000 == 0x0001) {
		var0001 = find_nearby(0x0106, 0x0002, MASK_NONE);
		if (var0001) {
			var0002 = var0001->get_item_frame();
			if (var0002 == 0x0003) {
				gflags[CHAOS_PLACED_BLACKROCK_SERPENT_CHAOS] = true;
			}
		} else {
			gflags[CHAOS_PLACED_BLACKROCK_SERPENT_CHAOS] = false;
		}
	} else {
		var0003 = find_nearby(0x0392, 0x0002, MASK_NONE);
		if (var0003) {
			var0000 = var0003->get_item_quality();
			if (var0000 == 0x0001) {
				gflags[PLACED_DUPRES_ASHES] = true;
			}
		}
		var0004 = find_nearby(0x01BD, 0x0002, MASK_NONE);
		if (var0004) {
			var0002 = var0004->get_item_frame();
			if (var0002 == 0x0005) {
				gflags[PLACED_SOUL_PRISM_MADNESS] = true;
			}
			if (var0002 == 0x0006) {
				gflags[PLACED_SOUL_PRISM_WANTONNESS] = true;
			}
			if (var0002 == 0x0007) {
				gflags[PLACED_SOUL_PRISM_ANARCHY] = true;
			}
		}
	}
	if (gflags[CHAOS_PLACED_BLACKROCK_SERPENT_CHAOS] && (gflags[PLACED_DUPRES_ASHES] && (gflags[PLACED_SOUL_PRISM_WANTONNESS] && (gflags[PLACED_SOUL_PRISM_MADNESS] && gflags[PLACED_SOUL_PRISM_ANARCHY])))) {
		Func0922(0x0019);
		XENKA->show_npc_face0(0x0000);
		say("\"I am Xenka. Thou must take this Serpent Sword and go to Sunrise Isle.\"");
		var0005 = Func099B(AVATAR, 0x0001, 0x02C6, 0x0000, 0x0000, false, true);
		UI_remove_npc_face0();
	}
}

void Func070A object#(0x70A) () {
	var var0000;
	var var0001;
	var var0002;

	if (AVATAR->get_item_flag(ISPETRA)) {
		if (gflags[AVATAR_WAS_MALE]) {
			var0000 = PETRA->set_npc_prop(SEX_FLAG, 1);
			var0000 = AVATAR->set_npc_prop(SEX_FLAG, 0);
		}
		PETRA->set_polymorph(0x0292);
		AVATAR->set_polymorph(0x02D1);
		var0001 = AVATAR->get_object_position();
		var0001[0x0001] -= var0001[0x0003] / 0x0002;
		var0001[0x0002] -= var0001[0x0003] / 0x0002;
		var0002 = UI_die_roll(0x0000, 0x0003);
		UI_lightning();
		UI_sprite_effect(ANIMATION_LIGHTNING_GREEN, var0001[0x0001], var0001[0x0002], 0x0000, 0x0000, var0002, 0x0001);
		if (PETRA->npc_nearby()) {
			var0001 = PETRA->get_object_position();
			var0001[0x0001] -= var0001[0x0003] / 0x0002;
			var0001[0x0002] -= var0001[0x0003] / 0x0002;
			var0002 = UI_die_roll(0x0000, 0x0003);
			UI_sprite_effect(ANIMATION_LIGHTNING_GREEN, var0001[0x0001], var0001[0x0002], 0x0000, 0x0000, var0002, 0x0001);
		}
		AVATAR->clear_item_flag(ISPETRA);
		PETRA->clear_item_flag(SI_TOURNAMENT);
	}
}

extern var Func0992 0x992 (var var0000, var var0001, var var0002, var var0003);

void Func070B object#(0x70B) () {
	var var0000;
	var var0001;
	var var0002;

	if (event == EGG) {
		var0000 = find_nearby(0x034D, 0x0014, MASK_NONE);
		if (var0000) {
			var0001 = Func0992(0x0001, "There hath not been a jail made yet that can hold me!", "I am glad to be out of there!", false);
			var0002 = script AVATAR {
				nohalt;
				call Func034D;
			};
		}
	}
}

extern var Func0908 0x908 (var var0000, var var0001, var var0002, var var0003, var var0004, var var0005);
extern void Func0909 0x909 (var var0000, var var0001, var var0002, var var0003, var var0004, var var0005, var var0006, var var0007, var var0008);
extern void Func0903 0x903 ();

void Func070D object#(0x70D) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;

	var0000 = find_nearby(0x00D1, 0x0001, MASK_NONE);
	if (var0000) {
		if (var0000->get_item_frame() == 0x0010) {
			var0001 = find_nearby(0x010E, 0x0014, MASK_NONE);
			for (var0004 in var0001 with var0002 to var0003) {
				if (var0004->get_item_quality() == 0x0056) {
					if (Func0908(var0004, 0x0178, 0x0001, 0, 0, 0x0007)) {
						Func0909(var0004, 0x01B0, 0x0000, 0x0002, 0x01B1, 0x0001, -3, 0, 0x0007);
						UI_play_sound_effect2(0x0020, var0004);
					} else {
						Func0903();
					}
				}
			}
		}
	}
}

void Func070E object#(0x70E) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;

	var0000 = find_nearby(0x00D1, 0x0001, MASK_NONE);
	if (var0000) {
		var0001 = var0000->set_last_created();
		var0002 = get_object_position();
		var0001 = UI_update_last_created(var0002);
		if (var0000->get_item_frame() == 0x000E) {
			var0003 = find_nearby(0x0113, 0x0004, MASK_EGG);
			for (var0006 in var0003 with var0004 to var0005) {
				if (var0006->get_item_quality() == 0x000D) {
					var0006->remove_item();
					break;
				}
			}
		}
	}
	return;
}

void Func070F object#(0x70F) () {
	var var0000;
	var var0001;

	var0000 = find_nearby(0x00C8, 0x000F, MASK_EGG);
	if (var0000) {
		var0001 = script var0000 after 3 ticks {
			hatch;
		};
	}
}

extern var Func0992 0x992 (var var0000, var var0001, var var0002, var var0003);

void Func0710 object#(0x710) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;
	var var0008;
	var var0009;

	var0000 = UI_get_party_list();
	var0001 = 0x001E;
	var0002 = AVATAR;
	for (var0005 in var0000 with var0003 to var0004) {
		var0006 = var0005->get_distance(item);
		if (var0006 < var0001) {
			if (AVATAR->get_item_flag(ISPETRA)) {
				if ((var0005 != AVATAR) && ((var0005 != AVATAR->get_npc_object()) && (var0005->get_item_shape() != 0x02EB))) {
					var0001 = var0006;
					var0002 = var0005;
				}
			} else if ((var0005 != PETRA) && ((var0005 != PETRA->get_npc_object()) && (var0005->get_item_shape() != 0x02EB))) {
				var0001 = var0006;
				var0002 = var0005;
			}
		}
	}
	if (var0002 != AVATAR) {
		var0002->reduce_health(0x0005, SONIC_DAMAGE);
	}
	gflags[KNOWS_ABOUT_ACID] = true;
	if (UI_die_roll(0x0001, 0x0003) == 0x0002) {
		var0007 = Func0992(PETRA, "@Acid!@", "@Acid!@", true);
	}
	var0008 = var0002->get_object_position();
	var0009 = UI_create_new_object(0x0390);
	if (var0009) {
		var0009->set_item_frame(0x0018);
		var0007 = UI_update_last_created(var0008);
	}
}

void Func0711 object#(0x711) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;
	var var0008;
	var var0009;

	var0000 = find_nearby(0x00D1, 0x0001, MASK_NONE);
	if (var0000) {
		var0001 = var0000->set_last_created();
		var0002 = get_object_position();
		var0001 = UI_update_last_created(var0002);
		if (var0000->get_item_frame() == 0x000F) {
			var0003 = find_nearby(0x00A0, 0x000F, MASK_NONE);
			var0004 = true;
			for (var0007 in var0003 with var0005 to var0006) {
				var0008 = var0007->get_object_position();
				if ((var0008[0x0001] == 0x0704) && (var0008[0x0002] == 0x0278)) {
					var0004 = false;
					break;
				}
			}
			if (var0004) {
				var0009 = UI_create_new_object(0x00A0);
				if (var0009) {
					var0009->clear_item_flag(TEMPORARY);
					var0009->set_item_frame(0x0008);
					UI_sprite_effect(ANIMATION_FROST_RING, 0x0702, 0x0276, 0x0000, 0x0000, 0x0000, LOOP_ONCE);
					UI_play_sound_effect(0x006C);
					var0001 = UI_update_last_created([0x0704, 0x0278, 0x0000]);
				}
			}
		}
	}
	obj_sprite_effect(ANIMATION_PURPLE_BUBBLES, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, LOOP_ONCE);
}

extern void Func01D1 shape#(0x1D1) ();

void Func0714 object#(0x714) () {
	var var0000;
	var var0001;

	var0000 = get_item_quality();
	if (var0000 != 0x00DE) {
		if (AVATAR->find_nearby(0x01D1, ON_SCREEN, MASK_ALL_UNSEEN)) {
			IOLO->get_npc_object()->Func01D1();
		}
	}
	if (var0000 == 0x00DE) {
		if (!gflags[BANES_RELEASED]) {
			var0001 = UI_create_new_object2(0x00E4, get_object_position());
			var0001->set_npc_id(0x001E);
			var0001->set_schedule_type(PACE_HORIZONTAL);
		}
	}
}

extern void Func060F object#(0x60F) ();

void Func0715 object#(0x715) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;

	var0000 = get_item_quality();
	if (var0000 != 0x00E0) {
		var0001 = AVATAR->find_nearby(0x01E9, ON_SCREEN, MASK_ALL_UNSEEN);
		for (var0004 in var0001 with var0002 to var0003) {
			var0004->Func060F();
		}
	}
	if (var0000 == 0x00E0) {
		var0005 = find_nearby(0x0215, ON_SCREEN, MASK_NONE);
		if (var0005) {
			var0006 = UI_create_new_object(0x0281);
			if (var0006) {
				var0007 = var0006->set_item_quality(0x004D);
				var0007 = var0005[0x0001]->give_last_created();
			}
		}
	}
}

extern void Func08A6 0x8A6 ();

void Func0716 object#(0x716) () {
	Func08A6();
}

void Func0717 object#(0x717) () {
	if (UI_get_weather() == SPARKLE) {
		UI_set_weather(CLEAR_WEATHER);
	} else {
		UI_set_weather(SPARKLE);
	}
}

extern var Func0992 0x992 (var var0000, var var0001, var var0002, var var0003);

void Func0718 object#(0x718) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;
	var var0008;

	if (event == SCRIPTED) {
		SETHYS->show_npc_face0(0x0000);
		say("\"I am undone -- I am outside the Temple, and now the years burden me...\"");
		say("\"Take the Chaos Stone from my dead body... it shall be the token that thou needest to summon the shade...\"");
		say("\"The body lies in the garden of the Temple of Enthusiasm, in the northeast by the Gate of the Serpent...\"");
		say("\"Now I go into the Void!\"");
		var0000 = SETHYS->get_object_position();
		var0000[0x0001] -= var0000[0x0003] / 0x0002;
		var0000[0x0002] -= var0000[0x0003] / 0x0002;
		UI_sprite_effect(ANIMATION_POOF, var0000[0x0001], var0000[0x0002], 0x0000, 0x0000, 0x0000, LOOP_ONCE);
		var0000 = SETHYS->get_object_position();
		SETHYS->remove_npc();
		var0001 = UI_create_new_object(0x019E);
		if (var0001) {
			var0001->set_item_frame(0x0018);
			var0002 = UI_update_last_created(var0000);
			if (!var0002) {
				var0002 = UI_update_last_created([(var0000[0x0001] - 0x0002), var0000[0x0002], var0000[0x0003]]);
			}
			if (!var0002) {
				var0002 = UI_update_last_created([var0000[0x0001], (var0000[0x0002] - 0x0002), var0000[0x0003]]);
			}
			if (!var0002) {
				var0002 = UI_update_last_created([(var0000[0x0001] + 0x0002), var0000[0x0002], var0000[0x0003]]);
			}
			if (!var0002) {
				var0002 = UI_update_last_created([var0000[0x0001], (var0000[0x0002] + 0x0002), var0000[0x0003]]);
			}
			if (var0002) {
				var0003 = SETHYS->get_cont_items(SHAPE_ANY, QUALITY_ANY, FRAME_ANY);
				for (var0006 in var0003 with var0004 to var0005) {
					var0007 = var0006->set_last_created();
					if (var0007) {
						var0006->set_item_flag(OKAY_TO_TAKE);
						var0007 = var0001->give_last_created();
					}
				}
				if (var0001->get_cont_items(SHAPE_ANY, QUALITY_ANY, FRAME_ANY)) {
					AVATAR->clear_item_say();
					var0007 = Func0992(IOLO, "@Something in the ashes?@", "@Something in the ashes?@", true);
				}
			} else {
				var0001->remove_item();
			}
		}
		AVATAR->clear_item_flag(DONT_MOVE);
	}
	if (event == EGG) {
		var0008 = UI_get_party_list2();
		if (SETHYS->get_npc_object() in var0008) {
			SETHYS->remove_from_party();
			SETHYS->set_schedule_type(WAIT);
			AVATAR->set_item_flag(DONT_MOVE);
			var0002 = script SETHYS {
				nohalt;
				say "@The weight of the years!@";
				actor frame bowing;
				wait 2;
				actor frame kneeling;
				wait 2;
				actor frame sleeping;
				wait 2;
				call Func0718;
			};
			remove_item();
		}
	}
}

extern void Func097F 0x97F (var var0000, var var0001, var var0002);

void Func0719 object#(0x719) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;

	var0000 = UI_get_party_list();
	var0001 = 0x0000;
	var0002 = ["Goblins!!!", "Arrgh, snakes!", "God in heaven! 'Tis Hook...", "Kill the wolves!", "Dragons!", "Pray by the virtues! 'Tis the Guardian!", "Mother Of Invention!", "Reapers by the score!", "...", "...", "...", "..."];
	for (var0005 in var0000 with var0003 to var0004) {
		var0001 += 0x0001;
		if (var0001 < 0x000C) {
			var0001 = 0x0001;
		}
		Func097F(var0005, var0002[var0001], var0001);
	}
}

extern void Func0907 0x907 (var var0000, var var0001);

void Func071A object#(0x71A) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;
	var var0008;
	var var0009;
	var var000A;
	var var000B;
	var var000C;
	var var000D;
	var var000E;
	var var000F;
	var var0010;
	var var0011;
	var var0012;
	var var0013;

	if (event == EGG) {
		var0000 = false;
		var0001 = false;
		var0002 = false;
		var0003 = false;
		var0004 = find_nearby(0x014A, 0x0008, MASK_NONE);
		for (var0007 in var0004 with var0005 to var0006) {
			var0008 = var0007->get_item_frame();
			var0009 = "I see f " + var0008;
			if (var0008 == 0x0019) {
				var0000 = var0007;
			}
			if (var0008 == 0x0015) {
				var0001 = var0007;
			}
			if (var0008 == 0x0017) {
				var0002 = var0007;
			}
			if (var0008 == 0x0018) {
				var0003 = var0007;
			}
		}
		if (var0000 && (var0001 && (var0002 && var0003))) {
			var000A = var0000->get_object_position();
			var000B = var0001->get_object_position();
			var000C = var0002->get_object_position();
			var000D = var0003->get_object_position();
			var0009 = ((((((" B=" + var000A[0x0001]) + " C=") + var000B[0x0001]) + " O=") + var000C[0x0001]) + " W=") + var000D[0x0001];
			var000E = var000A[0x0002];
			var000F = var000A[0x0002];
			if (var000B[0x0002] < var000F) {
				var000F = var000B[0x0002];
			}
			if (var000C[0x0002] < var000F) {
				var000F = var000C[0x0002];
			}
			if (var000D[0x0002] < var000F) {
				var000F = var000D[0x0002];
			}
			if (var000B[0x0002] > var000E) {
				var000E = var000B[0x0002];
			}
			if (var000C[0x0002] > var000E) {
				var000E = var000C[0x0002];
			}
			if (var000D[0x0002] > var000E) {
				var000E = var000D[0x0002];
			}
			var0010 = var000E - var000F;
			if ((var000A[0x0001] < var000B[0x0001]) && ((var000B[0x0001] < var000C[0x0001]) && ((var000C[0x0001] < var000D[0x0001]) && (var0010 < 0x0002)))) {
				var0011 = find_nearby(0x010E, 0x0008, MASK_NONE);
				if (var0011) {
					Func0907(var0011, 0x0000);
				}
				var0012 = find_nearby(0x01B0, 0x0008, MASK_NONE);
				if (var0012) {
					Func0907(var0012, 0x0000);
					var0013 = script var0012 {
						nohalt;
						call Func01B0;
					};
				}
			}
		}
	}
}

extern var Func09A9 0x9A9 (var var0000, var var0001, var var0002);
extern var Func09A7 0x9A7 (var var0000, var var0001);
extern void Func0971 0x971 (var var0000);

void Func071B object#(0x71B) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;
	var var0008;
	var var0009;
	var var000A;
	var var000B;

	if (event == EGG) {
		var0000 = find_nearby(0x014A, 0x0003, MASK_NONE);
		var0001 = get_object_position();
		var0002 = [ 0,  0, -2,  2,  0,  0];
		var0003 = [ 0,  0,  0,  0, -2,  2];
		for (var0006 in var0000 with var0004 to var0005) {
			var0007 = var0006->get_item_frame();
			if (var0007 == 0x0002) {
				var0008 = var0006->get_object_position();
				var0008[0x0001] -= var0001[0x0001];
				var0008[0x0002] -= var0001[0x0002];
				var0009 = Func09A9(var0008, var0002, var0003);
				if (var0009) {
					var0002 = Func09A7(var0009[0x0001], var0002);
					var0003 = Func09A7(var0009[0x0001], var0003);
				}
			}
		}
		var000A = UI_get_array_size(var0002);
		var000A += UI_get_array_size(var0003);
		if (var000A == 0x0000) {
			var000B = find_nearby(0x0300, 0x0004, MASK_NONE);
			if (var000B) {
				Func0971(var000B);
			}
		}
	}
}

extern void Func08E8 0x8E8 ();
extern void Func08E9 0x8E9 ();

void Func071C object#(0x71C) () {
	var var0000;

	if (event == EGG) {
		var0000 = get_item_quality();
		if (var0000 == 0x0000) {
			if ((!gflags[PUZZLE_PICKED_RED_FIRST]) && ((!gflags[PUZZLE_PICKED_YELLOW_SECOND]) && ((!gflags[PUZZLE_PICKED_BLUE_THIRD]) && ((!gflags[PUZZLE_PICKED_RED_FOURTH]) && (!gflags[PUZZLE_PICKED_WHITE_LAST]))))) {
				gflags[PUZZLE_PICKED_RED_FIRST] = true;
				AVATAR->obj_sprite_effect(ANIMATION_PURPLE_BUBBLES, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, LOOP_ONCE);
			} else if (gflags[PUZZLE_PICKED_RED_FIRST] && (gflags[PUZZLE_PICKED_YELLOW_SECOND] && (gflags[PUZZLE_PICKED_BLUE_THIRD] && ((!gflags[PUZZLE_PICKED_RED_FOURTH]) && (!gflags[PUZZLE_PICKED_WHITE_LAST]))))) {
				gflags[PUZZLE_PICKED_RED_FOURTH] = true;
				AVATAR->obj_sprite_effect(ANIMATION_PURPLE_BUBBLES, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, LOOP_ONCE);
			} else {
				Func08E8();
			}
		}
		if (var0000 == 0x0001) {
			if (gflags[PUZZLE_PICKED_RED_FIRST] && ((!gflags[PUZZLE_PICKED_YELLOW_SECOND]) && ((!gflags[PUZZLE_PICKED_BLUE_THIRD]) && ((!gflags[PUZZLE_PICKED_RED_FOURTH]) && (!gflags[PUZZLE_PICKED_WHITE_LAST]))))) {
				gflags[PUZZLE_PICKED_YELLOW_SECOND] = true;
				AVATAR->obj_sprite_effect(ANIMATION_PURPLE_BUBBLES, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, LOOP_ONCE);
			} else {
				Func08E8();
			}
		}
		if (var0000 == 0x0002) {
			if (gflags[PUZZLE_PICKED_RED_FIRST] && (gflags[PUZZLE_PICKED_YELLOW_SECOND] && ((!gflags[PUZZLE_PICKED_BLUE_THIRD]) && ((!gflags[PUZZLE_PICKED_RED_FOURTH]) && (!gflags[PUZZLE_PICKED_WHITE_LAST]))))) {
				gflags[PUZZLE_PICKED_BLUE_THIRD] = true;
				AVATAR->obj_sprite_effect(ANIMATION_PURPLE_BUBBLES, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, LOOP_ONCE);
			} else {
				Func08E8();
			}
		}
		if (var0000 == 0x0003) {
			if (gflags[PUZZLE_PICKED_RED_FIRST] && (gflags[PUZZLE_PICKED_YELLOW_SECOND] && (gflags[PUZZLE_PICKED_BLUE_THIRD] && (gflags[PUZZLE_PICKED_RED_FOURTH] && (!gflags[PUZZLE_PICKED_WHITE_LAST]))))) {
				gflags[PUZZLE_PICKED_WHITE_LAST] = true;
				Func08E9();
			} else {
				Func08E8();
			}
		}
	}
}

extern var Func09A0 0x9A0 (var var0000, var var0001);
extern void Func09AA 0x9AA ();
extern void Func097F 0x97F (var var0000, var var0001, var var0002);

void Func071D object#(0x71D) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;
	var var0008;
	var var0009;
	var var000A;
	var var000B;
	var var000C;
	var var000D;
	var var000E;
	var var000F;
	var var0010;
	var var0011;
	var var0012;
	var var0013;
	var var0014;
	var var0015;
	var var0016;
	var var0017;
	var var0018;
	var var0019;
	var var001A;
	var var001B;
	var var001C;
	var var001D;
	var var001E;
	var var001F;
	var var0020;
	var var0021;
	var var0022;
	var var0023;
	var var0024;
	var var0025;

	if (event == SI_PATH_FAILURE) {
		AVATAR->clear_item_flag(DONT_MOVE);
		var0000 = Func09A0(0x0000, 0x0001)->get_item_quality();
		if ((var0000 == 0x0000) || (var0000 == 0x0001)) {
			var0001 = [0x068E, 0x0100, 0x0000];
		}
		if ((var0000 == 0x0002) || (var0000 == 0x0003)) {
			var0001 = [0x068E, 0x011D, 0x0000];
		}
		AVATAR->move_object(var0001);
		UI_sprite_effect(ANIMATION_TELEPORT, var0001[0x0001], var0001[0x0002], 0x0000, 0x0000, 0x0000, LOOP_ONCE);
		abort;
	}
	if (((gflags[BOTTOM_SCALES_BALANCED] == true) && (gflags[TOP_SCALES_BALANCED] == true)) || (event == PATH_SUCCESS)) {
		Func09AA();
		abort;
	}
	if (event == SCRIPTED) {
		var0000 = get_item_quality();
		var0002 = find_nearby(0x02CE, 0x000A, MASK_NONE);
		if ((var0000 == 0x0000) || (var0000 == 0x0001)) {
			gflags[BOTTOM_SCALES_BALANCED] = true;
			var0003 = UI_create_new_object(0x00D1);
			if (var0003) {
				var0003->clear_item_flag(TEMPORARY);
				var0003->set_item_frame(0x0004);
			}
			var0003 = UI_create_new_object(0x00D1);
			if (var0003) {
				var0003->clear_item_flag(TEMPORARY);
				var0003->set_item_frame(0x0006);
			}
			var0003 = UI_create_new_object(0x00D1);
			if (var0003) {
				var0003->clear_item_flag(TEMPORARY);
				var0003->set_item_frame(0x0008);
			}
			for (var0006 in var0002 with var0004 to var0005) {
				var0001 = var0006->get_object_position();
				var0001[0x0003] = 0x0002;
				var0007 = UI_update_last_created(var0001);
				UI_play_sound_effect(0x0077);
				UI_sprite_effect(ANIMATION_TELEPORT, (var0001[0x0001] - 0x0002), (var0001[0x0002] - 0x0002), 0x0000, 0x0000, 0x0000, LOOP_ONCE);
			}
			var0002 = find_nearby(0x00F6, 0x0019, MASK_NONE);
			for (var0007 in var0002 with var0008 to var0009) {
				var0003 = var0007->get_item_frame();
				var0007->set_item_frame(var0003 - 0x0002);
				UI_sprite_effect(ANIMATION_PURPLE_BUBBLES, (var0001[0x0001] - 0x0002), (var0001[0x0002] - 0x0002), 0x0000, 0x0000, 0x0000, LOOP_ONCE);
			}
			var0002 = find_nearby(0x0204, 0x0019, MASK_NONE);
			for (var0007 in var0002 with var000A to var000B) {
				var0003 = var0007->get_item_frame();
				var0007->set_item_frame(var0003 - 0x0002);
				UI_sprite_effect(ANIMATION_PURPLE_BUBBLES, (var0001[0x0001] - 0x0002), (var0001[0x0002] - 0x0002), 0x0000, 0x0000, 0x0000, LOOP_ONCE);
			}
		} else {
			gflags[TOP_SCALES_BALANCED] = true;
			var0003 = UI_create_new_object(0x00D1);
			if (var0003) {
				var0003->clear_item_flag(TEMPORARY);
				var0003->set_item_frame(0x0003);
			}
			var0003 = UI_create_new_object(0x00D1);
			if (var0003) {
				var0003->clear_item_flag(TEMPORARY);
				var0003->set_item_frame(0x0007);
			}
			var0003 = UI_create_new_object(0x00D1);
			if (var0003) {
				var0003->clear_item_flag(TEMPORARY);
				var0003->set_item_frame(0x0012);
			}
			for (var0006 in var0002 with var000C to var000D) {
				var0001 = var0006->get_object_position();
				var0001[0x0003] = 0x0002;
				var0007 = UI_update_last_created(var0001);
				UI_play_sound_effect(0x0077);
				UI_sprite_effect(ANIMATION_TELEPORT2, var0001[0x0001], var0001[0x0002], 0x0000, 0x0000, 0x0000, LOOP_ONCE);
			}
			var0002 = find_nearby(0x00F6, 0x0019, MASK_NONE);
			for (var0007 in var0002 with var000E to var000F) {
				var0003 = var0007->get_item_frame();
				var0007->set_item_frame(var0003 - 0x0002);
				UI_sprite_effect(ANIMATION_PURPLE_BUBBLES, var0001[0x0001], var0001[0x0002], 0x0000, 0x0000, 0x0000, LOOP_ONCE);
			}
			var0002 = find_nearby(0x0204, 0x0019, MASK_NONE);
			for (var0007 in var0002 with var0010 to var0011) {
				var0003 = var0007->get_item_frame();
				var0007->set_item_frame(var0003 - 0x0002);
				UI_sprite_effect(ANIMATION_PURPLE_BUBBLES, var0001[0x0001], var0001[0x0002], 0x0000, 0x0000, 0x0000, LOOP_ONCE);
			}
		}
		abort;
	}
	var0012 = find_nearby(0x02AA, 0x0001, MASK_NONE);
	var0013 = false;
	var0014 = false;
	var0015 = false;
	var0016 = false;
	var0017 = find_nearby(0x0262, 0x000A, MASK_NONE);
	var0018 = get_object_position();
	for (var001B in var0017 with var0019 to var001A) {
		var001C = var001B->get_object_position();
		if (!((var0018[0x0001] == var001C[0x0001]) && (var0018[0x0002] == var001C[0x0002]))) {
			var001D = var001B->get_item_frame();
			if (var001D == 0x0000) {
				var001E = var001B;
			} else {
				var001F = var001B;
			}
		}
	}
	if ((!var0012) || (UI_get_array_size(var0012) > 0x0001)) {
		var0020 = var001F->get_item_frame();
		if ((var0020 == 0x0001) || (var0020 == 0x0002)) {
			UI_play_sound_effect(0x0069);
			var0007 = script var001F {
				nohalt;
				frame 2;
				wait 2;
				frame 3;
			};
		}
		if ((var0020 == 0x0004) || (var0020 == 0x0005)) {
			UI_play_sound_effect(0x0069);
			var0007 = script var001F {
				nohalt;
				frame 4;
				wait 2;
				frame 3;
			};
		}
		abort;
	}
	var0021 = var0012->get_item_frame();
	if ((var0021 == 0x000C) || (var0021 == 0x000D)) {
		var0013 = true;
	} else if ((var0021 == 0x0012) || (var0021 == 0x0013)) {
		var0014 = true;
	}
	if ((!var0013) && (!var0014)) {
		abort;
	}
	var0022 = var001E->find_nearby(0x02AA, 0x0001, MASK_NONE);
	if (var0022) {
		var0021 = var0022->get_item_frame();
		if ((var0021 == 0x000C) || (var0021 == 0x000D)) {
			var0015 = true;
		} else if ((var0021 == 0x0012) || (var0021 == 0x0013)) {
			var0016 = true;
		}
	}
	var0000 = get_item_quality();
	if ((var0013 && var0016) || (var0014 && var0015)) {
		if ((var0000 == 0x0000) || (var0000 == 0x0002)) {
			UI_play_sound_effect(0x0069);
			var0007 = script var001F {
				nohalt;
				frame 4;
				wait 1;
				frame 3;
			};
		}
		if ((var0000 == 0x0001) || (var0000 == 0x0003)) {
			UI_play_sound_effect(0x0069);
			var0007 = script var001F {
				nohalt;
				frame 2;
				wait 1;
				frame 3;
			};
		}
		if ((var0000 == 0x0000) || (var0000 == 0x0001)) {
			var0023 =  2;
		}
		if ((var0000 == 0x0002) || (var0000 == 0x0003)) {
			var0023 = -2;
		}
		var0024 = AVATAR->get_distance(var001F);
		Func097F(AVATAR, "@That should do it.@", 0x0002);
		AVATAR->set_item_flag(DONT_MOVE);
		var0001 = var001F->get_object_position();
		AVATAR->si_path_run_usecode([var0001[0x0001], (var0001[0x0002] + var0023), 0x0000], PATH_SUCCESS, item, Func071D, false);
		var0025 = Func09A0(0x0000, 0x0001);
		if (var0025) {
			var0007 = var0025->set_item_quality(var0000);
			var0007 = script var0025 after (var0024 + 0x0004) ticks {
				nohalt;
				call Func071D;
			};
		}
		abort;
	}
	if ((var0000 == 0x0000) || (var0000 == 0x0002)) {
		UI_play_sound_effect(0x0069);
		var0007 = script var001F {
			nohalt;
			frame 2;
			wait 1;
			frame 1;
		};
	}
	if ((var0000 == 0x0001) || (var0000 == 0x0003)) {
		UI_play_sound_effect(0x0069);
		var0007 = script var001F {
			nohalt;
			frame 4;
			wait 1;
			frame 5;
		};
	}
}

void Func071E object#(0x71E) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;
	var var0008;
	var var0009;
	var var000A;

	if ((gflags[PLACED_FIRE_GEM] == true) && (gflags[PLACED_ICE_DIAMOND] == true)) {
		abort;
	}
	var0000 = get_item_quality();
	var0001 = find_nearby(0x00D1, 0x0001, MASK_NONE);
	if (var0001) {
		var0002 = var0001->get_object_position();
		var0003 = var0001->get_item_frame();
	}
	if (var0000 == 0x0001) {
		if (var0003 == 0x0000) {
			UI_sprite_effect(ANIMATION_TELEPORT2, (var0002[0x0001] - 0x0002), (var0002[0x0002] - 0x0002), 0x0000, 0x0000, 0x0000, LOOP_ONCE);
			gflags[PLACED_FIRE_GEM] = true;
			UI_play_sound_effect(0x0082);
		}
	}
	if (var0000 == 0x0000) {
		if (var0003 == 0x0005) {
			UI_sprite_effect(ANIMATION_TELEPORT, (var0002[0x0001] - 0x0002), (var0002[0x0002] - 0x0002), 0x0000, 0x0000, 0x0000, LOOP_ONCE);
			gflags[PLACED_ICE_DIAMOND] = true;
			UI_play_sound_effect(0x0047);
		}
	}
	if ((gflags[PLACED_FIRE_GEM] == true) && (gflags[PLACED_ICE_DIAMOND] == true)) {
		var0004 = find_nearby(0x0204, 0x000F, MASK_NONE);
		var0004 &= find_nearby(0x00F6, 0x000F, MASK_NONE);
		for (var0007 in var0004 with var0005 to var0006) {
			var0003 = var0007->get_item_frame();
			if ((var0003 == 0x0002) || (var0003 == 0x0012)) {
				var0003 -= 0x0002;
				var0007->set_item_frame(var0003);
				var0008 = var0007;
				var0002 = var0007->get_object_position();
				UI_sprite_effect(ANIMATION_PURPLE_BUBBLES, var0002[0x0001], var0002[0x0002], 0x0000, 0x0000, 0x0000, LOOP_ONCE);
				UI_play_sound_effect(0x0051);
			}
		}
		var0009 = var0008->get_item_shape();
		if (var0009 == 0x00F6) {
			var000A = script var0008 {
				nohalt;
				call Func00F6;
			};
		} else {
			var000A = script var0008 {
				nohalt;
				call Func0204;
			};
		}
	}
}

extern void Func09AA 0x9AA ();
extern void Func08C0 0x8C0 (var var0000);
extern void Func0922 0x922 (var var0000);
extern void Func097F 0x97F (var var0000, var var0001, var var0002);

void Func071F object#(0x71F) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;
	var var0008;
	var var0009;
	var var000A;
	var var000B;
	var var000C;
	var var000D;
	var var000E;
	var var000F;
	var var0010;
	var var0011;
	var var0012;
	var var0013;
	var var0014;
	var var0015;
	var var0016;
	var var0017;
	var var0018;
	var var0019;

	var0000 = AVATAR->get_object_position();
	if (var0000[0x0003] == 0x0000) {
		AVATAR->show_npc_face0(0x0000);
		say("\"It seems that I cannot put the serpent in the slot. Perhaps I should step up a level...\"");
		UI_remove_npc_face0();
		abort;
	}
	if ((event == PATH_SUCCESS) || (event == SI_PATH_FAILURE)) {
		Func09AA();
		Func08C0(true);
		AVATAR->set_schedule_type(WAIT);
		var0001 = find_nearby(0x02E7, 0x002D, MASK_NONE);
		var0002 = script var0001 after 15 ticks {
			nohalt;
			call Func071F;
		};
		var0002 = script AVATAR {
			nohalt;
			actor frame kneeling;
			wait 5;
		};
		abort;
	}
	if (event == SCRIPTED) {
		AVATAR->clear_item_flag(DONT_MOVE);
		UI_init_conversation();
		Func0922(0x0008);
		gflags[TOLD_PLACE_EYES] = true;
		AVATAR->set_schedule_type(FOLLOW_AVATAR);
		abort;
	}
	if (gflags[PLACED_ALL_SERPENTS]) {
		abort;
	}
	var0003 = get_item_quality();
	var0004 = false;
	var0005 = find_nearby(0x0106, 0x0001, MASK_NONE);
	if (var0005) {
		var0006 = var0005->get_item_frame();
		if ((var0006 + 0x0001) != var0003) {
			var0007 = UI_get_party_list();
			var0008 = 0x0003;
			for (var000B in var0007 with var0009 to var000A) {
				var0002 = script var000B after var0008 ticks {
					nohalt;
					call Func060F;
				};
				Func097F(var000B, "@Ahhhh!@", var0008);
				var0008 += 0x0007;
				Func097F(AVATAR, "@That was wrong...@", var0008);
			}
			var0004 = true;
		} else {
			var0005->set_item_flag(TEMPORARY);
			var0005->remove_item();
			var000C = find_nearby(0x039F, 0x0001, MASK_NONE);
			if (var000C) {
				var000D = var000C->get_object_position();
				var000E = var000C->get_item_frame();
				var000C->remove_item();
				var000F = UI_create_new_object(0x039F);
				if (var000F) {
					var000F->set_item_frame(var000E + 0x0004);
					var0002 = UI_update_last_created(var000D);
					UI_play_sound_effect(0x0004);
					UI_sprite_effect(ANIMATION_PURPLE_BUBBLES, var000D[0x0001], (var000D[0x0002] - 0x0001), 0x0000, 0x0000, 0x0000, LOOP_ONCE);
				}
			}
			if (var0003 == 0x0002) {
				gflags[BALANCE_BLACKROCK_SERPENT_ORDER] = true;
			}
			if (var0003 == 0x0003) {
				gflags[BALANCE_BLACKROCK_SERPENT_BALANCE] = true;
			}
			if (var0003 == 0x0004) {
				gflags[BALANCE_BLACKROCK_SERPENT_CHAOS] = true;
			}
		}
	}
	if ((!var0005) || var0004) {
		if (var0003 == 0x0002) {
			var0010 = 0x0007;
			var0011 = UI_die_roll(0x0005, 0x000A) * -1;
			var0012 = 0x0000;
		}
		if (var0003 == 0x0003) {
			var0010 = 0x0007;
			var0011 = 0x0000;
			var0012 = UI_die_roll(0x0005, 0x000A);
		}
		if (var0003 == 0x0004) {
			var0010 = 0x001A;
			var0011 = UI_die_roll(0x0005, 0x000A);
			var0012 = 0x0000;
		}
		var0013 = [0x039F, 0x01CF, 0x0201];
		var0014 = find_nearby(SHAPE_ANY, 0x0001, MASK_NONE);
		for (var0017 in var0014 with var0015 to var0016) {
			if (!(var0017->get_item_shape() in var0013)) {
				var0018 = get_object_position();
				var0002 = var0017->set_last_created();
				if (var0002) {
					var0002 = UI_update_last_created([(var0018[0x0001] + var0011), (var0018[0x0002] + var0012), var0018[0x0003]]);
				}
				UI_play_sound_effect(0x0043);
				UI_sprite_effect(var0010, (var0018[0x0001] + var0011), (var0018[0x0002] + var0012), 0x0000, 0x0000, 0x0000, LOOP_ONCE);
			}
		}
	}
	if (gflags[BALANCE_BLACKROCK_SERPENT_ORDER] && (gflags[BALANCE_BLACKROCK_SERPENT_BALANCE] && gflags[BALANCE_BLACKROCK_SERPENT_CHAOS])) {
		UI_play_sound_effect(0x0077);
		AVATAR->set_item_flag(DONT_MOVE);
		gflags[PLACED_ALL_SERPENTS] = true;
		var0018 = [0x0687, 0x001C, 0x0000];
		UI_sprite_effect(ANIMATION_TELEPORT2, var0018[0x0001], var0018[0x0002],  5,  5, 0, LOOP_ONCE);
		UI_sprite_effect(ANIMATION_TELEPORT , var0018[0x0001], var0018[0x0002], -5, -5, 0, LOOP_ONCE);
		UI_sprite_effect(ANIMATION_TELEPORT , var0018[0x0001], var0018[0x0002], -5,  5, 0, LOOP_ONCE);
		UI_sprite_effect(ANIMATION_TELEPORT2, var0018[0x0001], var0018[0x0002],  5, -5, 0, LOOP_ONCE);
		var0019 = [0x068B, 0x0015, 0x0002];
		AVATAR->si_path_run_usecode(var0019, PATH_SUCCESS, item, Func071F, true);
		// BUG: This should use SI_PATH_FAILURE instead of PATH_SUCCESS.
		UI_set_path_failure(Func071F, item, PATH_SUCCESS);
	}
}

extern void Func09AA 0x9AA ();
extern var Func09A0 0x9A0 (var var0000, var var0001);
extern void Func097F 0x97F (var var0000, var var0001, var var0002);
extern void Func0798 object#(0x798) ();

void Func0720 object#(0x720) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;
	var var0008;
	var var0009;
	var var000A;
	var var000B;
	var var000C;
	var var000D;
	var var000E;
	var var000F;
	var var0010;
	var var0011;
	var var0012;
	var var0013;
	var var0014;
	var var0015;
	var var0016;
	var var0017;
	var var0018;

	if (!gflags[PLACED_ALL_SERPENTS]) {
		abort;
	}
	if (event == SCRIPTED) {
		var0000 = get_object_position();
		var0001 = UI_die_roll(-3, 3);
		var0002 = UI_die_roll(-3, 3);
		UI_sprite_effect(ANIMATION_LIGHTNING, (var0000[0x0001] + var0001), (var0000[0x0002] + var0002), 0x0000, 0x0000, 0x0000, LOOP_ONCE);
		UI_play_sound_effect(0x002A);
		UI_sprite_effect(ANIMATION_TELEPORT, (var0000[0x0001] - 0x0003), (var0000[0x0002] - 0x0003), 0x0000, 0x0000, 0x0000, LOOP_ONCE);
		UI_sprite_effect(ANIMATION_TELEPORT, (var0000[0x0001] - 0x0003), (var0000[0x0002] - 0x0003), 0x0000, 0x0000, 0x0000, LOOP_ONCE);
		UI_sprite_effect(ANIMATION_TELEPORT2, (var0000[0x0001] - 0x0003), (var0000[0x0002] - 0x0003), 0x0000, 0x0000, 0x0000, LOOP_ONCE);
		abort;
	}
	if ((event == PATH_SUCCESS) || (event == SI_PATH_FAILURE)) {
		Func09AA();
		var0003 = find_nearby(0x02E7, 0x002D, MASK_NONE);
		var0004 = 0x0000;
		while ((var0004 < 0x000A) && var0003) {
			var0005 = UI_die_roll(0x0002, 0x0004);
			event = SCRIPTED;
			var0006 = script var0003 after (var0004 * var0005) ticks {
				nohalt;
				call Func0720;
			};
			var0004 += 0x0001;
			UI_play_sound_effect(0x0074);
		}
		var0007 = Func09A0(0x0000, 0x0002);
		if (var0007) {
			var0006 = script var0007 after 70 ticks {
				nohalt;
				call Func02E7;
			};
		}
		var0003->set_item_frame(0x0006);
		AVATAR->clear_item_flag(DONT_MOVE);
		UI_init_conversation();
		AVATAR->set_schedule_type(FOLLOW_AVATAR);
		abort;
	}
	var0008 = find_nearby(SHAPE_ANY, 0x0001, MASK_NONE);
	var0009 = false;
	var000A = false;
	var000B = [0x0382, 0x033D, 0x039F, 0x01CF, 0x02D4, 0x02E7, 0x0184, 0x03F8, 0x03E0, 0x00D1, 0x03AD];
	var000C = false;
	for (var000F in var0008 with var000D to var000E) {
		var0010 = var000F->get_item_shape();
		if (!(var0010 in var000B)) {
			var0011 = var000F;
			var000C = true;
		}
		if (var0010 == 0x00D1) {
			var0012 = var000F->get_item_frame();
			if ((var0012 == 0x0013) || (var0012 == 0x0014)) {
				if (var0012 == 0x0013) {
					var0009 = true;
					var0000 = var000F->get_object_position();
					UI_sprite_effect(ANIMATION_TELEPORT, var0000[0x0001], (var0000[0x0002] - 0x0001), 0x0000, 0x0000, 0x0000, LOOP_ONCE);
					UI_play_sound_effect(0x004C);
				}
				if (var0012 == 0x0014) {
					var000A = true;
					var0000 = var000F->get_object_position();
					UI_sprite_effect(ANIMATION_TELEPORT2, var0000[0x0001], (var0000[0x0002] - 0x0001), 0x0000, 0x0000, 0x0000, LOOP_ONCE);
					UI_play_sound_effect(0x004C);
				}
			}
		}
	}
	if (var000C) {
		var0007 = Func09A0(0x0000, 0x0001);
		if (var0007) {
			var0006 = script var0007 {
				nohalt;
				call Func0798;
			};
		}
		var0001 = UI_die_roll(-15, 15);
		var0002 = UI_die_roll(8, 15);
		var0000 = get_object_position();
		var0006 = var0011->set_last_created();
		if (var0006) {
			var0006 = UI_update_last_created([(var0000[0x0001] + var0001), (var0000[0x0002] + var0002), var0000[0x0003]]);
			UI_sprite_effect(ANIMATION_LIGHTNING, var0000[0x0001], var0000[0x0002], 0x0000, 0x0000, 0x0000, LOOP_ONCE);
			UI_sprite_effect(ANIMATION_POOF, var0000[0x0001], var0000[0x0002], 0x0000, 0x0000, 0x0000, LOOP_ONCE);
			UI_play_sound_effect(0x0074);
			var0013 = UI_get_party_list();
			var0014 = 0x0003;
			for (var0017 in var0013 with var0015 to var0016) {
				var0006 = script var0017 after var0014 ticks {
					nohalt;
					call Func060F;
				};
				UI_play_sound_effect(0x0074);
				Func097F(var0017, "@Yowww!@", var0014);
				var0014 += 0x0007;
				Func097F(AVATAR, "@That was wrong...@", 0x0014);
			}
		}
		abort;
	}
	if (var0009 && var000A) {
		Func097F(AVATAR, "@That did it!@", 0x0000);
		AVATAR->set_item_flag(DONT_MOVE);
		var0018 = [0x068B, 0x0015, 0x0002];
		AVATAR->si_path_run_usecode(var0018, PATH_SUCCESS, item, Func0720, true);
		// BUG: This should use SI_PATH_FAILURE instead of PATH_SUCCESS.
		UI_set_path_failure(Func0720, item, PATH_SUCCESS);
	}
}

extern var Func09A0 0x9A0 (var var0000, var var0001);
extern void Func097F 0x97F (var var0000, var var0001, var var0002);
extern void Func0971 0x971 (var var0000);

void Func0721 object#(0x721) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;
	var var0008;
	var var0009;
	var var000A;
	var var000B;
	var var000C;
	var var000D;
	var var000E;
	var var000F;
	var var0010;
	var var0011;
	var var0012;
	var var0013;
	var var0014;
	var var0015;
	var var0016;

	if (event == SCRIPTED) {
		var0000 = [0x01FF, 0x0211, 0x0218, 0x02C2, 0x020C, 0x035D];
		for (var0003 in var0000 with var0001 to var0002) {
			var0004 = find_nearby(var0003, 0x0014, MASK_NONE);
			for (var0007 in var0004 with var0005 to var0006) {
				var0008 = var0007->get_object_position();
				UI_play_sound_effect(0x0074);
				UI_sprite_effect(ANIMATION_LIGHTNING, var0008[0x0001], var0008[0x0002], 0x0000, 0x0000, 0x0000, LOOP_ONCE);
			}
		}
		abort;
	}
	var0009 = get_item_quality();
	var000A = find_nearby(0x00D1, 0x0001, MASK_NONE);
	var000B = var000A->get_item_frame();
	var0003 = true;
	if (var0009 == 0x0000) {
		if (var000B == 0x0003) {
			gflags[PLACED_ARTIFACT_FLOWER] = true;
			var0003 = false;
		}
	}
	if (var0009 == 0x0001) {
		if (var000B == 0x0012) {
			gflags[PLACED_ARTIFACT_TORCH] = true;
			var0003 = false;
		}
	}
	if (var0009 == 0x0002) {
		if (var000B == 0x0004) {
			gflags[PLACED_ARTIFACT_GOLDEN_CHAIN] = true;
			var0003 = false;
		}
	}
	if (var0009 == 0x0003) {
		if (var000B == 0x0008) {
			gflags[PLACED_ARTIFACT_DAGGER] = true;
			var0003 = false;
		}
	}
	if (var0009 == 0x0004) {
		if (var000B == 0x0006) {
			gflags[PLACED_ARTIFACT_ABACUS] = true;
			var0003 = false;
		}
	}
	if (var0009 == 0x0005) {
		if (var000B == 0x0007) {
			gflags[PLACED_ARTIFACT_HEART] = true;
			var0003 = false;
		}
	}
	if (var0003) {
		var000C = find_nearby(0x0113, 0x0019, MASK_EGG);
		for (var000F in var000C with var000D to var000E) {
			var0010 = script var000F {
				hatch;
			};
			var0011 = Func09A0(0x0000, 0x0001);
			if (var0011) {
				var0010 = script var0011 after 5 ticks {
					nohalt;
					call Func0721;
				};
			}
		}
	} else {
		var0008 = get_object_position();
		UI_sprite_effect(ANIMATION_PURPLE_BUBBLES, var0008[0x0001], (var0008[0x0002] - 0x0001), 0x0000, 0x0000, 0x0000, LOOP_ONCE);
		Func097F(AVATAR, "@That did it!@", 0x0005);
		var0000 = [0x01FF, 0x0211, 0x0218, 0x02C2, 0x020C, 0x035D];
		for (var0003 in var0000 with var0012 to var0013) {
			var0004 = find_nearby(var0003, 0x0028, MASK_NONE);
			for (var0007 in var0004 with var0014 to var0015) {
				var0008 = var0007->get_object_position();
				UI_play_sound_effect(0x0074);
				UI_sprite_effect(ANIMATION_LIGHTNING, var0008[0x0001], var0008[0x0002], 0x0000, 0x0000, 0x0000, LOOP_ONCE);
				var0007->kill_npc();
			}
		}
		if (gflags[PLACED_ARTIFACT_FLOWER] && (gflags[PLACED_ARTIFACT_TORCH] && (gflags[PLACED_ARTIFACT_GOLDEN_CHAIN] && (gflags[PLACED_ARTIFACT_DAGGER] && (gflags[PLACED_ARTIFACT_ABACUS] && gflags[PLACED_ARTIFACT_HEART]))))) {
			UI_sprite_effect(ANIMATION_TELEPORT, var0008[0x0001], (var0008[0x0002] - 0x0001), 0x0000, 0x0000, 0x0000, LOOP_ONCE);
			var0016 = UI_create_new_object(0x02C1);
			if (var0016) {
				var0016->clear_item_flag(TEMPORARY);
				var0010 = var0016->set_item_quality(0x00F1);
				var000A = find_nearby(0x00D1, 0x0001, MASK_NONE);
				if (var000A) {
					var0008 = var000A->get_object_position();
					Func0971(var000A);
				}
				var0010 = UI_update_last_created(var0008);
			}
		}
	}
}

void Func0722 object#(0x722) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;
	var var0008;
	var var0009;

	if (event == SCRIPTED) {
		var0000 = get_item_quality();
		if ((var0000 == 0x0096) || (var0000 == 0x0097)) {
			var0001 = [0x069B, 0x069B, 0x069B];
			var0002 = [0x00E7, 0x00DF, 0x00D7];
			var0003 = 0x0001;
			var0004 = UI_get_array_size(var0001);
			while (var0003 <= var0004) {
				var0005 = UI_create_new_object(0x018A);
				if (var0005) {
					var0005->set_item_frame(0x0002);
					var0005->set_item_flag(TEMPORARY);
					var0006 = UI_update_last_created([var0001[var0003], var0002[var0003], 0x0000]);
				}
				var0003 += 0x0001;
			}
			var0007 = [0x0693, 0x00E7, 0x0000];
			var0003 = 0x0000;
			while (var0003 < 0x0008) {
				var0008 = 0x0000;
				while (var0008 > -24) {
					var0009 = UI_create_new_object(0x0121);
					if (var0009) {
						var0009->set_item_flag(TEMPORARY);
						var0009->set_item_frame(UI_die_roll(0x0006, 0x000B));
						UI_play_sound_effect(0x0029);
						var0006 = UI_update_last_created([(var0007[0x0001] + var0003), (var0007[0x0002] + var0008), 0x0001]);
					}
					var0008 -= 0x0002;
				}
				var0003 += 0x0002;
			}
		}
		if ((var0000 == 0x0098) || (var0000 == 0x0099)) {
			var0001 = [0x068B, 0x068B, 0x068B];
			var0002 = [0x00C7, 0x00BF, 0x00B7];
			var0003 = 0x0001;
			var0004 = UI_get_array_size(var0001);
			while (var0003 <= var0004) {
				var0005 = UI_create_new_object(0x018A);
				if (var0005) {
					var0005->set_item_frame(0x0002);
					var0005->set_item_flag(TEMPORARY);
					var0006 = UI_update_last_created([var0001[var0003], var0002[var0003], 0x0000]);
				}
				var0003 += 0x0001;
			}
			var0007 = [0x0683, 0x00C7, 0x0000];
			var0003 = 0x0000;
			while (var0003 < 0x0008) {
				var0008 = 0x0000;
				while (var0008 > -24) {
					var0009 = UI_create_new_object(0x0121);
					if (var0009) {
						var0009->set_item_flag(TEMPORARY);
						UI_play_sound_effect(0x0029);
						var0009->set_item_frame(UI_die_roll(0x0000, 0x0005));
						var0006 = UI_update_last_created([(var0007[0x0001] + var0003), (var0007[0x0002] + var0008), 0x0001]);
					}
					var0008 -= 0x0002;
				}
				var0003 += 0x0002;
			}
		}
	}
}

extern void Func097F 0x97F (var var0000, var var0001, var var0002);

void Func0723 object#(0x723) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;
	var var0008;
	var var0009;
	var var000A;
	var var000B;
	var var000C;
	var var000D;
	var var000E;
	var var000F;
	var var0010;
	var var0011;
	var var0012;

	var0000 = get_item_quality();
	if (gflags[TEMP_FLAG_1] && gflags[MELT_ICE_WALLS]) {
		var0001 = find_nearby(0x00E8, 0x0014, MASK_NONE);
		for (var0004 in var0001 with var0002 to var0003) {
			var0005 = var0004->get_object_position();
			var0004->remove_item();
			var0006 = UI_create_new_object(0x00E0);
			if (var0006) {
				var0006->set_item_frame(UI_die_roll(0x0008, 0x000B));
				var0006 = UI_update_last_created(var0005);
			}
		}
	}
	if ((var0000 == 0x0000) && (gflags[MELT_ICE_WALLS] == false)) {
		var0007 = find_nearby(0x00D1, 0x0002, MASK_NONE);
		if (var0007) {
			var0008 = var0007->get_item_frame();
			if (var0008 == 0x0016) {
				set_item_frame(0x0017);
				Func097F(AVATAR, "@'Tis working...@", 0x0004);
				obj_sprite_effect(ANIMATION_FIREWORKS, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, LOOP_ONCE);
				var0006 = script var0007 {
					nohalt;
					wait 20;
					frame 21;
				};
				UI_play_sound_effect(0x0068);
				var0008 = 0x0017;
			}
			if (var0008 != 0x0017) {
				Func097F(AVATAR, "@That did naught!@", 0x0004);
				UI_play_sound_effect(0x0030);
				abort;
			}
			gflags[MELT_ICE_WALLS] = true;
			gflags[TEMP_FLAG_1] = true;
			var0001 = find_nearby(0x00E8, 0x0014, MASK_NONE);
			if (var0001) {
				for (var0004 in var0001 with var0009 to var000A) {
					var0005 = var0004->get_object_position();
					var000B = 0x0004;
					while (var000B >= 0x0001) {
						var000C = UI_create_new_object(0x0289);
						if (var000C) {
							var000C->set_item_frame(0x0005);
							var000D = UI_die_roll(-4, 4);
							var000E = UI_die_roll(-4, 4);
							var0006 = UI_update_last_created([(var0005[0x0001] + var000D), (var0005[0x0002] + var000E), 0x0000]);
						}
						var000B -= 0x0001;
					}
				}
			}
			var0001 = find_nearby(0x00E8, 0x0014, MASK_NONE);
			for (var0004 in var0001 with var000F to var0010) {
				var0005 = var0004->get_object_position();
				UI_play_sound_effect(0x0077);
				UI_sprite_effect(ANIMATION_TELEPORT, var0005[0x0001], (var0005[0x0002] - 0x0002), 0x0000, 0x0000, 0x0000, LOOP_ONCE);
				var0006 = script var0004 {
					nohalt;
					frame 1;
					wait 1;
					frame 2;
					wait 1;
					frame 3;
					wait 1;
					frame 4;
				};
			}
			UI_play_sound_effect(0x005F);
			var0006 = script item after 12 ticks {
				nohalt;
				call Func0723;
			};
		}
	}
	if ((var0000 == 0x0001) && (gflags[BUILT_LAVA_BRIDGE] == false)) {
		var0001 = find_nearby(0x0289, 0x0001, MASK_NONE);
		if (var0001) {
			var0008 = var0001->get_item_frame();
			if (var0008 == 0x0005) {
				var0005 = [0x06D9, 0x007A, 0x0000];
				var0011 = 0x0000;
				while (var0011 < 0x0008) {
					var0012 = UI_create_new_object(0x0184);
					if (var0012) {
						var0012->set_item_frame(0x000A);
						var0006 = UI_update_last_created([var0005[0x0001], (var0005[0x0002] + var0011), var0005[0x0003]]);
						var0006 = UI_create_new_object(0x037F);
						if (var0006) {
							var0006 = UI_update_last_created([(var0005[0x0001] + 0x0002), (var0005[0x0002] + var0011), 0x0000]);
						}
						var0006 = UI_create_new_object(0x037F);
						if (var0006) {
							var0006 = UI_update_last_created([(var0005[0x0001] - 0x0004), (var0005[0x0002] + var0011), 0x0000]);
						}
						UI_play_sound_effect(0x0027);
					}
					var0011 += 0x0001;
				}
				gflags[BUILT_LAVA_BRIDGE] = true;
			}
		}
	}
}

extern void Func0971 0x971 (var var0000);

void Func0724 object#(0x724) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;
	var var0008;
	var var0009;
	var var000A;
	var var000B;
	var var000C;
	var var000D;
	var var000E;
	var var000F;

	if (event == SCRIPTED) {
		Func0971(item);
		abort;
	}
	var0000 = find_nearby(0x00D1, 0x0001, MASK_NONE);
	if (var0000) {
		var0001 = var0000->get_item_frame();
		if (!((var0001 == 0x0001) || (var0001 == 0x0002))) {
			var0002 = true;
		} else {
			var0003 = var0000->get_object_position();
			Func0971(var0000);
			var0004 = 0x0000;
			if (var0001 == 0x0001) {
				var0004 = 0x0231;
				if (gflags[PLACED_FIRST_ICE_CUBE] == true) {
					if (gflags[PLACED_SECOND_ICE_CUBE] == true) {
						UI_play_sound_effect(0x0052);
						UI_sprite_effect(ANIMATION_POOF, (var0003[0x0001] - 0x0002), (var0003[0x0002] - 0x0002), 0x0000, 0x0000, 0x0000, LOOP_ONCE);
						abort;
					}
					gflags[PLACED_SECOND_ICE_CUBE] = true;
				} else {
					gflags[PLACED_FIRST_ICE_CUBE] = true;
				}
			}
			if (var0001 == 0x0002) {
				var0004 = 0x037F;
				if (gflags[PLACED_FIRST_FIRE_CUBE] == true) {
					if (gflags[PLACED_SECOND_FIRE_CUBE] == true) {
						UI_play_sound_effect(0x0052);
						UI_sprite_effect(ANIMATION_POOF, (var0003[0x0001] - 0x0002), (var0003[0x0002] - 0x0002), 0x0000, 0x0000, 0x0000, LOOP_ONCE);
						abort;
					}
					gflags[PLACED_SECOND_FIRE_CUBE] = true;
				} else {
					gflags[PLACED_FIRST_FIRE_CUBE] = true;
				}
			}
			var0005 = UI_create_new_object(var0004);
			if (var0005) {
				var0005->clear_item_flag(TEMPORARY);
				var0006 = UI_update_last_created(var0003);
				var0006 = script var0005 after 12 ticks {
					nohalt;
					call Func0724;
				};
			}
			var0007 = get_item_quality();
			var0006 = set_item_quality(var0007 + 0x0001);
			var0007 += 0x0001;
			var0008 = 0x0000;
			if (var0007 == 0x0004) {
				var0009 = [0x0683, 0x0687, 0x068B, 0x068F, 0x0683, 0x0687, 0x068B, 0x068F];
				var000A = [0x0083, 0x0083, 0x0083, 0x0083, 0x0087, 0x0087, 0x0087, 0x0087];
				var000B = [0x0008, 0x0009, 0x0009, 0x0009, 0x000A, 0x000B, 0x000B, 0x000B];
				UI_play_sound_effect(0x0082);
				UI_sprite_effect(ANIMATION_TELEPORT2, 0x0686, 0x0082, 0x0000, 0x0000, 0x0000, LOOP_ONCE);
				while (var0008 < 0x0008) {
					var000C = UI_create_new_object(0x00A0);
					var0008 += 0x0001;
					if (var000C) {
						var000C->set_item_frame(var000B[var0008]);
						var000C->clear_item_flag(TEMPORARY);
						var0006 = UI_update_last_created([var0009[var0008], var000A[var0008], 0x0000]);
					}
				}
			}
			if (var0007 == 0x0003) {
				var0009 = [0x0685, 0x0689, 0x068D, 0x0685, 0x0689, 0x068D];
				var000A = [0x0083, 0x0083, 0x0083, 0x0087, 0x0087, 0x0087];
				var000B = [0x0008, 0x0009, 0x0009, 0x000A, 0x000B, 0x000B];
				UI_play_sound_effect(0x0082);
				UI_sprite_effect(ANIMATION_TELEPORT, 0x0686, 0x0082, 0x0000, 0x0000, 0x0000, LOOP_ONCE);
				while (var0008 < 0x0006) {
					var000C = UI_create_new_object(0x00A0);
					var0008 += 0x0001;
					if (var000C) {
						var000C->set_item_frame(var000B[var0008]);
						var000C->clear_item_flag(TEMPORARY);
						var0006 = UI_update_last_created([var0009[var0008], var000A[var0008], 0x0001]);
					}
				}
			}
			if (var0007 == 0x0002) {
				var0009 = [0x0687, 0x0687, 0x068B, 0x068B];
				var000A = [0x0083, 0x0087, 0x0083, 0x0087];
				var000B = [0x0008, 0x000A, 0x0009, 0x000B];
				UI_play_sound_effect(0x0082);
				UI_sprite_effect(ANIMATION_TELEPORT2, 0x0686, 0x0082, 0x0000, 0x0000, 0x0000, LOOP_ONCE);
				while (var0008 < 0x0004) {
					var000C = UI_create_new_object(0x00A0);
					var0008 += 0x0001;
					if (var000C) {
						var000C->set_item_frame(var000B[var0008]);
						var000C->clear_item_flag(TEMPORARY);
						var0006 = UI_update_last_created([var0009[var0008], var000A[var0008], 0x0002]);
					}
				}
			}
			if (var0007 == 0x0001) {
				var0009 = [0x0689, 0x0689];
				var000A = [0x0083, 0x0087];
				var000B = [0x0008, 0x000A];
				UI_play_sound_effect(0x0082);
				UI_sprite_effect(ANIMATION_TELEPORT, 0x0686, 0x0082, 0x0000, 0x0000, 0x0000, LOOP_ONCE);
				while (var0008 < 0x0002) {
					var000C = UI_create_new_object(0x00A0);
					var0008 += 0x0001;
					if (var000C) {
						var000C->set_item_frame(var000B[var0008]);
						var000C->clear_item_flag(TEMPORARY);
						var0006 = UI_update_last_created([var0009[var0008], var000A[var0008], 0x0003]);
					}
				}
			}
			if (var0007 == 0x0004) {
				UI_play_sound_effect(0x0077);
				UI_sprite_effect(ANIMATION_TELEPORT, 0x0686, 0x0082, 0x0000, 0x0000, 0x0000, LOOP_ONCE);
				var000D = UI_create_new_object(0x00E9);
				if (var000D) {
					var000D->set_item_frame(0x0007);
					var0006 = UI_update_last_created([0x0689, 0x0085, 0x0004]);
				}
				var000D = UI_create_new_object(0x02C3);
				if (var000D) {
					var000D->set_item_frame(0x0003);
					var0006 = var000D->set_item_quality(0x007B);
					var0006 = UI_update_last_created([0x0688, 0x0084, 0x0005]);
				}
			}
		}
	} else {
		var0002 = true;
	}
	if (var0002) {
		var0003 = get_object_position();
		var000E = UI_die_roll(0x0003, 0x000A);
		var000F = UI_die_roll(0x0000, 0x0001);
		if (var000F == 0x0000) {
			var000E *= -1;
		}
		var0006 = var0000->set_last_created();
		if (var0006) {
			var0006 = UI_update_last_created([(var0003[0x0001] + var000E), var0003[0x0002], 0x0000]);
		}
		UI_sprite_effect(ANIMATION_PURPLE_BUBBLES, (var0003[0x0001] + var000E), var0003[0x0002], 0x0000, 0x0000, 0x0000, LOOP_ONCE);
	}
}

extern var Func09A0 0x9A0 (var var0000, var var0001);
extern void Func0922 0x922 (var var0000);

void Func0725 object#(0x725) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;

	if (event == EGG) {
		var0000 = AVATAR->get_object_position();
		if (var0000[0x0003] != 0x0005) {
			abort;
		}
		var0000 = Func09A0(0x0000, 0x0001);
		var0001 = Func09A0(0x0000, 0x0002);
		if (var0000 && var0001) {
			var0002 = var0000->set_item_quality(0x0000);
			var0002 = var0001->set_item_quality(0x0001);
			var0002 = script var0000 {
				nohalt;
				call Func07D6;
			};
			AVATAR->set_item_flag(DONT_MOVE);
			var0003 = get_object_position();
			AVATAR->obj_sprite_effect(ANIMATION_TELEPORT2, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, LOOP_ONCE);
			AVATAR->obj_sprite_effect(ANIMATION_TELEPORT, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, LOOP_ONCE);
			AVATAR->obj_sprite_effect(ANIMATION_GREEN_BUBBLES, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, LOOP_ONCE);
			var0002 = script var0000 {
				nohalt;
				call Func0725;
			};
			var0002 = script var0000 after 2 ticks {
				nohalt;
				call Func0725;
			};
			var0002 = script var0000 after 4 ticks {
				nohalt;
				call Func0725;
			};
			var0002 = script var0001 after 20 ticks {
				nohalt;
				call Func0725;
			};
		}
		UI_play_sound_effect(0x0051);
		abort;
	}
	if ((event == SCRIPTED) && (gflags[TEMP_FLAG_3] == false)) {
		var0004 = get_item_quality();
		if (var0004 == 0x0000) {
			var0003 = AVATAR->get_object_position();
			var0003[0x0001] -= var0003[0x0003] / 0x0002;
			var0003[0x0002] -= var0003[0x0003] / 0x0002;
			UI_sprite_effect(ANIMATION_LIGHTNING, var0003[0x0001], var0003[0x0002], 0x0000, 0x0000, 0x0000, LOOP_ONCE);
			UI_play_sound_effect(0x0074);
		}
		if (var0004 == 0x0001) {
			UI_fade_palette(0x000C, 0x0001, 0x0000);
			AVATAR->move_object([0x093C, 0x0046, 0x0001]);
			AVATAR->clear_item_flag(DONT_MOVE);
			gflags[TEMP_FLAG_3] = true;
			var0002 = script item after 10 ticks {
				nohalt;
				call Func0636;
			};
			var0002 = script item after 18 ticks {
				nohalt;
				call Func0725;
			};
		}
		abort;
	}
	if ((event == SCRIPTED) && (gflags[TEMP_FLAG_3] == true)) {
		gflags[TEMP_FLAG_3] = false;
		if (!gflags[GOT_ORDER_SERPENT_EYE]) {
			Func0922(0x0004);
		}
		var0005 = true;
	}
}

extern void Func097F 0x97F (var var0000, var var0001, var var0002);
extern void Func0922 0x922 (var var0000);

void Func0726 object#(0x726) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;

	if ((event == SCRIPTED) && gflags[TEMP_FLAG_4]) {
		gflags[TEMP_FLAG_4] = false;
		UI_fade_palette(0x000C, 0x0001, 0x0000);
		Func097F(IOLO, "@Where didst thou go?@", 0x001B);
	}
	if (event == SCRIPTED) {
		AVATAR->move_object([0x0684, 0x007B, 0x0000]);
		var0000 = script AVATAR after 5 ticks {
			nohalt;
			call Func07D7;
		};
		var0000 = script AVATAR after 10 ticks {
			nohalt;
			call Func0636;
		};
	}
	if (event == EGG) {
		if (gflags[GOT_ORDER_SERPENT_EYE]) {
			Func0922(0x0004);
			abort;
		}
		var0001 = AVATAR->get_npc_object();
		var0002 = var0001->find_object(0x0280, QUALITY_ANY, FRAME_ANY);
		var0003 = var0001->find_object(0x027E, QUALITY_ANY, FRAME_ANY);
		var0004 = var0001->find_object(0x03EC, QUALITY_ANY, 0x0002);
		var0005 = var0001->find_object(0x0106, QUALITY_ANY, 0x0001);
		var0006 = var0001->find_object(0x0106, QUALITY_ANY, 0x0002);
		var0007 = var0001->find_object(0x0106, QUALITY_ANY, 0x0003);
		if (!(var0002 && (var0003 && var0004))) {
			Func0922(0x0005);
			gflags[MISSING_HIEROPHANT_ARTIFACTS] = true;
			gflags[TEMP_FLAG_4] = true;
			var0000 = script AVATAR after 10 ticks {
				nohalt;
				call Func0726;
			};
			AVATAR->obj_sprite_effect(ANIMATION_TELEPORT, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, LOOP_ONCE);
			UI_play_sound_effect(0x0051);
			abort;
		}
		if (!(var0006 && (var0005 && var0007))) {
			Func0922(0x0006);
			gflags[MISSING_BLACKROCK_SERPENTS] = true;
			gflags[TEMP_FLAG_4] = true;
			var0000 = script AVATAR after 8 ticks {
				nohalt;
				call Func0726;
			};
			AVATAR->obj_sprite_effect(ANIMATION_TELEPORT2, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, LOOP_ONCE);
			UI_play_sound_effect(0x0051);
			abort;
		}
		abort;
	}
}

void Func0727 object#(0x727) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;

	if ((event == EGG) && (gflags[BANES_RELEASED] == false)) {
		var0000 = get_item_quality();
		var0001 = get_object_position();
		var0002 = UI_create_new_object2(0x0103, var0001);
		var0002->set_alignment(NEUTRAL);
		var0003 = var0002->add_cont_items(0x0001, 0x0255, 0x0000, 0x0000, true);
		var0003 = var0002->add_cont_items(0x000C, 0x02D2, 0x0000, 0x0000, true);
		var0003 = var0002->add_cont_items(0x0001, 0x0239, 0x0000, 0x0000, true);
		var0002->set_schedule_type(LOITER);
		if (var0000 == 0x0001) {
			var0002->set_schedule_type(SLEEP);
		}
		if (var0000 == 0x0002) {
			var0002->set_schedule_type(EAT);
		}
		if (var0000 == 0x0003) {
			var0002->set_schedule_type(FARM);
		}
		if (var0000 > 0x0003) {
			var0002->set_schedule_type(IN_COMBAT);
		}
	}
}

void Func0728 object#(0x728) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;
	var var0008;
	var var0009;

	if (event == SCRIPTED) {
		remove_item();
	}
	if (event == EGG) {
		var0000 = get_object_position();
		var0001 = false;
		var0002 = get_item_quality();
		if (var0002 == 0x0000) {
			if (UI_die_roll(0x0001, 0x0006) > 0x0001) {
				var0003 = find_nearby(0x02D6, 0x0003, MASK_EGG);
				for (var0006 in var0003 with var0004 to var0005) {
					var0001 = true;
				}
				if (!var0001) {
					var0007 = UI_create_new_object(0x02D6);
					if (var0007) {
						var0007->clear_item_flag(TEMPORARY);
						var0007->set_item_frame(UI_die_roll(0x0000, 0x001A));
						var0008 = UI_update_last_created(var0000);
					}
				}
			}
		}
		if (var0002 == 0x0001) {
			var0007 = UI_create_new_object(0x014C);
			if (var0007) {
				var0007->clear_item_flag(TEMPORARY);
				UI_play_sound_effect(0x006A);
				if (UI_die_roll(0x0001, 0x0004) > 0x0002) {
					var0007->set_item_frame(0x0009);
					var0008 = UI_update_last_created(var0000);
					if (var0008) {
						var0009 = script var0007 {
							nohalt;
							wait 1;
							frame 10;
							wait 1;
							frame 11;
							wait 1;
							frame 12;
							wait 1;
							frame 13;
							wait 1;
							call Func0728;
						};
						abort;
					}
				}
			}
			var0007->set_item_frame(0x000E);
			var0008 = UI_update_last_created(var0000);
			if (var0008) {
				var0009 = script var0007 {
					nohalt;
					wait 1;
					frame 15;
					wait 1;
					frame 16;
					wait 1;
					frame 17;
					wait 1;
					frame 18;
					wait 1;
					call Func0728;
				};
				abort;
			}
		}
	}
}

void Func0729 object#(0x729) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;

	if ((event == EGG) && (gflags[BANES_RELEASED] == false)) {
		var0000 = get_item_quality();
		var0001 = get_object_position();
		var0002 = UI_create_new_object2(0x00E4, var0001);
		var0002->set_alignment(NEUTRAL);
		var0003 = var0002->add_cont_items(0x0001, 0x025B, 0x0000, 0x0000, true);
		var0003 = var0002->add_cont_items(0x0001, 0x023B, 0x0000, 0x0000, true);
		var0003 = var0002->add_cont_items(0x0001, 0x02D9, 0x0000, 0x0000, true);
		var0003 = var0002->add_cont_items(0x0001, 0x021B, 0x0000, 0x0000, true);
		var0002->set_schedule_type(LOITER);
		if (var0000 == 0x0001) {
			var0002->set_schedule_type(MAJOR_SIT);
		}
		if (var0000 == 0x0002) {
			var0002->set_schedule_type(PATROL);
		}
		if (var0000 == 0x0003) {
			var0002->set_schedule_type(PACE_HORIZONTAL);
		}
		if (var0000 == 0x0004) {
			var0002->set_schedule_type(PACE_VERTICAL);
		}
		if (var0000 == 0x0005) {
			var0002->set_schedule_type(SLEEP);
		}
		if (var0000 == 0x0006) {
			var0002->set_schedule_type(IN_COMBAT);
		}
		if (var0000 > 0x0006) {
			var0002->set_schedule_type(WANDER);
		}
	}
}

extern void Func0815 0x815 (var var0000);

void Func072A object#(0x72A) () {
	var var0000;
	var var0001;

	if (event == SCRIPTED) {
		var0000 = CLONE_SHAMINO->find_nearby(0x0314, 0x0004, MASK_NONE);
		if (var0000) {
			var0001 = var0000->get_item_quality();
			Func0815(var0001);
		}
	}
}

extern void Func0922 0x922 (var var0000);
extern void Func097F 0x97F (var var0000, var var0001, var var0002);
extern var Func099B 0x99B (var var0000, var var0001, var var0002, var var0003, var var0004, var var0005, var var0006);

void Func072B object#(0x72B) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;
	var var0008;
	var var0009;
	var var000A;
	var var000B;
	var var000C;
	var var000D;
	var var000E;
	var var000F;
	var var0010;
	var var0011;
	var var0012;
	var var0013;
	var var0014;
	var var0015;

	if ((event == SCRIPTED) && (gflags[TEMP_FLAG_1] == true)) {
		gflags[TEMP_FLAG_1] = false;
		Func0922(0x0007);
		gflags[AVATAR_IS_WORTHY] = true;
		var0000 = find_nearby(0x0280, 0x0019, MASK_NONE);
		var0001 = find_nearby(0x027E, 0x0019, MASK_NONE);
		var0002 = find_nearby(0x03EC, 0x0019, MASK_NONE);
		var0003 = var0000->get_object_position();
		UI_sprite_effect(ANIMATION_PURPLE_BUBBLES, (var0003[0x0001] - 3), (var0003[0x0002] - 3), -5,  0,  0, LOOP_ONCE);
		var0000->remove_item();
		var0003 = var0001->get_object_position();
		UI_sprite_effect(ANIMATION_GREEN_BUBBLES , (var0003[0x0001] - 3), (var0003[0x0002] - 3),  0, -5,  0, LOOP_ONCE);
		var0001->remove_item();
		var0003 = var0002->get_object_position();
		UI_sprite_effect(ANIMATION_PURPLE_BUBBLES, (var0003[0x0001] - 3), (var0003[0x0002] - 3),  5,  0,  0, LOOP_ONCE);
		UI_sprite_effect(ANIMATION_GREEN_BUBBLES , (var0003[0x0001] - 3), (var0003[0x0002] - 3),  0,  5,  0, LOOP_ONCE);
		var0002->remove_item();
		UI_play_sound_effect(0x0077);
		var0004 = script AVATAR after 27 ticks {
			nohalt;
			call Func072B;
		};
		var0005 = AVATAR->get_object_position();
		UI_sprite_effect(ANIMATION_TELEPORT, (var0005[0x0001] - 0x0004), (var0005[0x0002] - 0x0004), 0x0000, 0x0000, 0x0000, LOOP_ONCE);
		UI_sprite_effect(ANIMATION_TELEPORT2, (var0005[0x0001] - 0x0003), (var0005[0x0002] - 0x0003), 0x0000, 0x0000, 0x0000, LOOP_ONCE);
		var0006 = find_nearby(0x00D1, 0x000F, MASK_NONE);
		for (var0004 in var0006 with var0007 to var0008) {
			var0009 = var0004->get_item_frame();
			if (var0009 == 0x0014) {
				gflags[TEMP_FLAG_4] = true;
				var0003 = var0004->get_object_position();
				UI_sprite_effect(ANIMATION_PULSATING_DISC, (var0003[0x0001] - 0x0003), (var0003[0x0002] - 0x0003), 0x0005, 0x0000, 0x0000, LOOP_ONCE2);
				var0004->remove_item();
			}
			if (var0009 == 0x0013) {
				Func097F(AVATAR, "@I forgot the eye!@", 0x0041);
			}
		}
		abort;
	}
	if (event == SCRIPTED) {
		if (gflags[TEMP_FLAG_3] == true) {
			gflags[TEMP_FLAG_3] = false;
			var000A = find_nearby(0x0204, 0x000F, MASK_NONE);
			var000A &= find_nearby(0x00F6, 0x000F, MASK_NONE);
			for (var000D in var000A with var000B to var000C) {
				var0009 = var000D->get_item_frame();
				if ((var0009 == 0x000E) || (var0009 == 0x001E)) {
					var0009 -= 0x0002;
					var000D->set_item_frame(var0009);
					var000E = var000D;
					var000F = var000D->get_object_position();
					UI_play_sound_effect(0x0059);
					UI_sprite_effect(ANIMATION_GREEN_BUBBLES , (var000F[0x0001] - 2), (var000F[0x0002] - 2),  3,  3,  0, LOOP_ONCE);
					UI_sprite_effect(ANIMATION_GREEN_BUBBLES , (var000F[0x0001] - 3), (var000F[0x0002] - 3), -3,  3,  0, LOOP_ONCE);
					UI_sprite_effect(ANIMATION_PURPLE_BUBBLES, (var000F[0x0001] - 2), (var000F[0x0002] - 2), -3, -3,  0, LOOP_ONCE);
					UI_sprite_effect(ANIMATION_PURPLE_BUBBLES, (var000F[0x0001] - 3), (var000F[0x0002] - 3),  3, -3,  0, LOOP_ONCE);
				}
			}
			var0010 = var000E->get_item_shape();
			if (var0010 == 0x00F6) {
				var0004 = script var000E {
					nohalt;
					call Func00F6;
				};
			}
			if (var0010 == 0x0204) {
				var0004 = script var000E {
					nohalt;
					call Func0204;
				};
			}
			abort;
		}
		if (gflags[TEMP_FLAG_2] == false) {
			UI_fade_palette(0x000C, 0x0001, 0x0000);
			UI_play_sound_effect(0x0051);
			AVATAR->move_object([0x0687, 0x0072, 0x0000]);
			gflags[TEMP_FLAG_2] = true;
			var0004 = script AVATAR after 1 ticks {
				nohalt;
				call Func07D7;
			};
			var0004 = script AVATAR after 2 ticks {
				nohalt;
				call Func072B;
			};
			abort;
		}
		gflags[TEMP_FLAG_3] = true;
		gflags[TEMP_FLAG_2] = false;
		var0004 = Func099B(AVATAR, 0x0001, 0x0280, 0x0000, 0x0000, 0x0000, false);
		var0004 = Func099B(AVATAR, 0x0001, 0x027E, 0x0000, 0x0000, 0x0000, false);
		var0004 = Func099B(AVATAR, 0x0001, 0x03EC, 0x0000, 0x0002, 0x0000, false);
		AVATAR->clear_item_flag(DONT_MOVE);
		if (gflags[TEMP_FLAG_4]) {
			var0004 = Func099B(AVATAR, 0x0001, 0x00D1, 0x0000, 0x0014, 0x0000, false);
			gflags[TEMP_FLAG_4] = false;
		}
		var0004 = script AVATAR after 5 ticks {
			nohalt;
			call Func0636;
		};
		var0004 = script AVATAR after 17 ticks {
			nohalt;
			call Func072B;
		};
		abort;
	}
	if (event == EGG) {
		gflags[TEMP_FLAG_1] = 0x0000;
		gflags[TEMP_FLAG_2] = 0x0000;
		gflags[TEMP_FLAG_3] = 0x0000;
		gflags[TEMP_FLAG_4] = 0x0000;
		var0000 = find_nearby(0x0280, 0x0005, MASK_NONE);
		var0001 = find_nearby(0x027E, 0x0005, MASK_NONE);
		var0002 = find_nearby(0x03EC, 0x0005, MASK_NONE);
		if (var0002) {
			if (var0002->get_item_frame() != 0x0002) {
				var0002 = 0x0000;
			}
		}
		if (var0000) {
			var0000->obj_sprite_effect(ANIMATION_PURPLE_BUBBLES, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, LOOP_ONCE);
		}
		if (var0001) {
			var0001->obj_sprite_effect(ANIMATION_PURPLE_BUBBLES, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, LOOP_ONCE);
		}
		if (var0002) {
			var0002->obj_sprite_effect(ANIMATION_PURPLE_BUBBLES, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, LOOP_ONCE);
		}
		if (var0000 && (var0001 && var0002)) {
			AVATAR->set_item_frame(0x0000);
			AVATAR->set_item_flag(DONT_MOVE);
			if (!gflags[GOT_ORDER_SERPENT_EYE]) {
				var0011 = UI_create_new_object(0x00D1);
				if (var0011) {
					var0011->set_item_frame(0x0014);
					var0011->clear_item_flag(TEMPORARY);
					var0004 = find_nearby(0x02B0, 0x000A, MASK_ALL_UNSEEN);
					for (var0014 in var0004 with var0012 to var0013) {
						var0015 = var0014->get_object_position();
						var0014->remove_item();
					}
					var0004 = UI_update_last_created(var0015);
					if (var0004) {
						gflags[GOT_ORDER_SERPENT_EYE] = true;
					}
					UI_sprite_effect(ANIMATION_PULSATING_DISC, (var0015[0x0001] - 0x0003), (var0015[0x0002] - 0x0003), 0x0000, 0x0000, 0x0000, LOOP_ONCE);
					UI_sprite_effect(ANIMATION_TELEPORT2, (var0015[0x0001] - 0x0004), (var0015[0x0002] - 0x0003), 0x0000, 0x0000, 0x0000, LOOP_ONCE);
					UI_sprite_effect(ANIMATION_TELEPORT, (var0015[0x0001] - 0x0003), (var0015[0x0002] - 0x0004), 0x0000, 0x0000, 0x000A, LOOP_ONCE2);
					UI_play_sound_effect(0x0043);
					Func097F(AVATAR, "@The Eye of Order!@", 0x0005);
				}
			}
			gflags[TEMP_FLAG_1] = true;
			var0004 = script AVATAR after 20 ticks {
				nohalt;
				call Func072B;
			};
		}
	}
}

void Func072C object#(0x72C) () {
	var var0000;
	var var0001;

	if (event == SCRIPTED) {
		var0000 = AVATAR->get_object_position();
		UI_sprite_effect(ANIMATION_TELEPORT2, (var0000[0x0001] - 0x0003), (var0000[0x0002] - 0x0003), 0x0000, 0x0000, 0x0000, LOOP_ONCE);
		UI_sprite_effect(ANIMATION_TELEPORT, (var0000[0x0001] - 0x0003), (var0000[0x0002] - 0x0003), 0x0000, 0x0000, 0x0000, LOOP_ONCE);
	}
	if (event == EGG) {
		UI_fade_palette(0x000C, 0x0001, 0x0000);
		UI_play_sound_effect(0x0051);
		AVATAR->move_object([0x0687, 0x0072, 0x0000]);
		var0001 = script AVATAR after 1 ticks {
			nohalt;
			call Func07D7;
		};
		var0001 = script AVATAR after 5 ticks {
			nohalt;
			call Func0636;
		};
		var0001 = script AVATAR after 6 ticks {
			nohalt;
			call Func072C;
		};
		abort;
	}
}

void Func072D object#(0x72D) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;

	if ((event == EGG) && ((gflags[BANES_RELEASED] == false) && (gflags[CLEARED_FAWN_TOWER] == true))) {
		var0000 = get_item_quality();
		var0001 = get_object_position();
		var0002 = find_nearby(0x019F, 0x0032, MASK_NONE);
		for (var0005 in var0002 with var0003 to var0004) {
			var0005->remove_item();
		}
		var0006 = UI_create_new_object2(0x00E4, var0001);
		var0006->set_alignment(NEUTRAL);
		var0007 = var0006->add_cont_items(0x0001, 0x025B, 0x0000, 0x0000, true);
		var0007 = var0006->add_cont_items(0x0001, 0x023B, 0x0000, 0x0000, true);
		var0007 = var0006->add_cont_items(0x0001, 0x021B, 0x0000, 0x0000, true);
		var0007 = var0006->add_cont_items(0x0001, 0x02D9, 0x0000, 0x0000, true);
		var0006->set_schedule_type(LOITER);
		if (var0000 == 0x0001) {
			var0006->set_schedule_type(MAJOR_SIT);
		}
		if (var0000 == 0x0002) {
			var0006->set_schedule_type(PATROL);
		}
		if (var0000 == 0x0003) {
			var0006->set_schedule_type(PACE_HORIZONTAL);
		}
		if (var0000 == 0x0004) {
			var0006->set_schedule_type(PACE_VERTICAL);
		}
		if (var0000 == 0x0005) {
			var0006->set_schedule_type(SLEEP);
		}
		if (var0000 == 0x0006) {
			var0006->set_schedule_type(IN_COMBAT);
		}
		if (var0000 > 0x0006) {
			var0006->set_schedule_type(WANDER);
		}
	}
}

void Func072E object#(0x72E) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;

	if (event == EGG) {
		var0000 = get_object_position();
		var0001 = get_item_quality();
		if (gflags[KNOWS_HAZARD_KILLED_GWANI]) {
			var0002 = find_nearby(0x010E, 0x000F, MASK_NONE);
			for (var0005 in var0002 with var0003 to var0004) {
				var0005->set_item_frame(0x0008);
				var0006 = var0005->set_item_quality(0x0000);
				if (var0006 == false) {
					var0005->remove_item();
				}
			}
			remove_item();
		}
	}
}

extern var Func097D 0x97D (var var0000, var var0001, var var0002, var var0003, var var0004);

void Func072F object#(0x72F) () {
	var var0000;
	var var0001;
	var var0002;

	if (event == EGG) {
		if (gflags[PLACED_ARTIFACT_FLOWER] && (gflags[PLACED_ARTIFACT_TORCH] && (gflags[PLACED_ARTIFACT_GOLDEN_CHAIN] && (gflags[PLACED_ARTIFACT_DAGGER] && (gflags[PLACED_ARTIFACT_ABACUS] && gflags[PLACED_ARTIFACT_HEART]))))) {
			if (!Func097D(PARTY, 0x0001, 0x02C1, 0x00F1, FRAME_ANY)) {
				var0000 = UI_create_new_object(0x02C1);
				if (var0000) {
					var0001 = var0000->set_item_quality(0x00F1);
					var0002 = get_object_position();
					var0001 = UI_update_last_created(var0002);
				}
			}
		}
	}
}

void Func0730 object#(0x730) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;

	if ((event == EGG) && gflags[BANES_RELEASED]) {
		var0000 = UI_create_new_object(0x0320);
		var0000->clear_item_flag(TEMPORARY);
		UI_play_sound_effect(0x003E);
		if (var0000) {
			var0000->set_item_frame(0x0004);
			var0001 = UI_create_new_object(0x022F);
			if (var0001) {
				var0002 = get_item_quality();
				if (var0002 == 0x0001) {
					var0001->set_item_frame(0x0007);
				}
				if (var0002 == 0x0002) {
					var0001->set_item_frame(0x0008);
				}
				if (var0002 == 0x0003) {
					var0001->set_item_frame(0x000F);
				}
				if (var0002 == 0x0004) {
					var0001->set_item_frame(0x0010);
				}
				if (var0002 == 0x0005) {
					var0001->set_item_frame(0x0001);
					var0001->clear_item_flag(TEMPORARY);
					var0003 = var0000->give_last_created();
				}
				var0001->clear_item_flag(TEMPORARY);
				var0003 = var0000->give_last_created();
			}
			var0004 = get_object_position();
			var0003 = UI_update_last_created(var0004);
			if (var0003) {
				remove_item();
			}
		}
	}
}

extern void Func09AD 0x9AD (var var0000);

void Func0731 object#(0x731) () {
	var var0000;
	var var0001;
	var var0002;

	if (event == EGG) {
		var0000 = get_object_position();
		var0001 = UI_create_new_object2(0x0175, var0000);
		Func09AD(var0001);
		var0002 = var0001->add_cont_items(0x0001, 0x02C3, 0x003D, 0x0002, true);
	}
}

void Func0732 object#(0x732) () {
	var var0000;

	var0000 = [0x0125, 0x03B7, 0x0000];
	PARTY->move_object(var0000);
	UI_play_sound_effect(0x0082);
	AVATAR->obj_sprite_effect(ANIMATION_RED_SWIRL, 0x0000, 0x0000, 0x0000, 0x0000, 0x0001, LOOP_ONCE);
}

extern void Func0922 0x922 (var var0000);
extern void Func09AD 0x9AD (var var0000);

void Func0733 object#(0x733) () {
	var var0000;
	var var0001;
	var var0002;

	if (event == EGG) {
		var0000 = 0x0000;
		Func0922(0x001A);
		while (var0000 < 0x000A) {
			UI_play_sound_effect(0x0077);
			UI_sprite_effect(ANIMATION_TELEPORT, (0x0680 + (var0000 * 0x0002)), 0x003E, 0x0000, 0x0000, 0x0000, LOOP_ONCE);
			var0001 = UI_create_new_object2(0x03C8, [(0x0680 + (var0000 * 0x0002)), 0x003A, 0x0000]);
			UI_sprite_effect(ANIMATION_TELEPORT, (0x0681 + (var0000 * 0x0002)), 0x0052, 0x0000, 0x0000, 0x0000, LOOP_ONCE);
			var0002 = UI_create_new_object2(0x03C8, [(0x0681 + (var0000 * 0x0002)), 0x005A, 0x0000]);
			if (var0001) {
				Func09AD(var0001);
				Func09AD(var0002);
			}
			var0000 += 0x0003;
		}
	}
}

void Func0734 object#(0x734) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;

	if ((event == EGG) && (gflags[BANES_RELEASED] == false)) {
		var0000 = get_item_quality();
		var0001 = get_object_position();
		var0002 = UI_create_new_object2(0x017D, var0001);
		var0002->set_alignment(NEUTRAL);
		var0003 = var0002->add_cont_items(0x0001, 0x023E, 0x0000, 0x0000, true);
		var0003 = var0002->add_cont_items(0x0001, 0x0239, 0x0000, 0x0000, true);
		var0003 = var0002->add_cont_items(0x0001, 0x024B, 0x0000, 0x0000, true);
		if (UI_die_roll(0x0001, 0x000A) > 0x0005) {
			var0003 = var0002->add_cont_items(0x0001, 0x026E, 0x0000, 0x0000, true);
			var0003 = var0002->add_cont_items(UI_die_roll(0x0001, 0x0003), 0x0179, 0x0000, UI_die_roll(0x0000, 0x0008), true);
		} else {
			var0003 = var0002->add_cont_items(0x0001, 0x0257, 0x0000, 0x0000, true);
			var0003 = var0002->add_cont_items(UI_die_roll(0x0005, 0x000F), 0x03B4, 0x0000, 0x0005, true);
		}
		var0002->set_schedule_type(LOITER);
		if (var0000 == 0x0001) {
			var0002->set_schedule_type(LOITER);
		}
		if (var0000 == 0x0002) {
			var0002->set_schedule_type(PATROL);
		}
		if (var0000 == 0x0003) {
			var0002->set_schedule_type(PACE_HORIZONTAL);
		}
		if (var0000 == 0x0004) {
			var0002->set_schedule_type(PACE_VERTICAL);
		}
		if (var0000 == 0x0005) {
			var0002->set_schedule_type(SLEEP);
		}
		if (var0000 == 0x0006) {
			var0002->set_schedule_type(DUEL);
		}
		if (var0000 > 0x0006) {
			var0002->set_schedule_type(EAT);
		}
	}
}

void Func0737 object#(0x737) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;

	if (gflags[BANES_RELEASED]) {
		remove_item();
		abort;
	}
	var0000 = find_nearby(0x0110, 0x0014, MASK_NONE);
	for (var0003 in var0000 with var0001 to var0002) {
		var0004 = var0003->set_item_quality(0x004B);
		var0005 = var0003->get_object_position();
		if (var0005[0x0003] > 0x0000) {
			var0004 = var0003->set_last_created();
			if (var0004) {
				var0005[0x0003] = 0x0000;
				var0004 = UI_update_last_created(var0005);
				var0004 = var0003->set_item_quality(0x004B);
			}
		}
	}
}

extern void Func097F 0x97F (var var0000, var var0001, var var0002);

void Func0738 object#(0x738) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;

	if (event == EGG) {
		var0000 = SIRANUSH->get_item_flag(MET);
		if (var0000) {
			var0001 = find_nearby(0x010F, 0x0006, MASK_NONE);
			for (var0004 in var0001 with var0002 to var0003) {
				var0004->remove_item();
				remove_item();
				UI_play_sound_effect(0x0059);
			}
		} else {
			Func097F(AVATAR, "@What a strange place...@", 0x000A);
		}
	}
}

extern void Func097F 0x97F (var var0000, var var0001, var var0002);
extern var Func09AB 0x9AB (var var0000, var var0001, var var0002, var var0003, var var0004);

void Func0739 object#(0x739) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;
	var var0008;

	if (event == SI_PATH_FAILURE) {
		AVATAR->clear_item_flag(DONT_MOVE);
		UI_init_conversation();
		Func097F(AVATAR, "@I can do this...@", 0x0000);
		Func097F(AVATAR, "@I changed my mind...@", 0x0010);
		abort;
	}
	if (event == PROXIMITY) {
		SHMED->si_path_run_usecode([0x0339, 0x08C4, 0x0000], EGG, SHMED, Func0739, true);
		Func097F(AVATAR, "@To the test!@", 0x0000);
		abort;
	}
	if (event == DEATH) {
		AVATAR->si_path_run_usecode([0x0337, 0x08D7, 0x0000], PROXIMITY, AVATAR, Func0739, true);
		abort;
	}
	if (event == EGG) {
		AVATAR->si_path_run_usecode([0x0337, 0x08C1, 0x0000], PATH_SUCCESS, AVATAR, Func0739, true);
		var0000 = script AVATAR {
			face west;
		};
		SHMED->set_schedule_type(STANDTHERE);
		Func097F(SHMED, "@To the test!@", 0x0000);
		abort;
	}
	if (event == PATH_SUCCESS) {
		var0001 = AVATAR->find_nearby(0x010E, 0x000A, MASK_NONE);
		for (var0004 in var0001 with var0002 to var0003) {
			var0005 = var0004->get_object_position();
			var0004->remove_item();
			UI_play_sound_effect(0x0020);
			var0006 = Func09AB(0x0178, 0x000E, 0x0048, true, var0005);
		}
		Func097F(SHMED, "@heh, heh...@", 0x0000);
		var0006 = script item after 3 ticks {
			nohalt;
			call Func0739;
		};
		abort;
	}
	if (event == SCRIPTED) {
		AVATAR->si_path_run_usecode([0x0337, 0x08BA, 0x0000], PATH_FAILURE, AVATAR, Func0739, true);
	}
	if (event == PATH_FAILURE) {
		var0001 = AVATAR->find_nearby(0x0178, 0x000A, MASK_NONE);
		for (var0004 in var0001 with var0007 to var0008) {
			if (var0004->get_item_quality() == 0x0048) {
				var0005 = var0004->get_object_position();
				var0004->remove_item();
				UI_play_sound_effect(0x001F);
				var0006 = Func09AB(0x010E, 0x000E, 0x0048, false, var0005);
			}
			AVATAR->clear_item_flag(DONT_MOVE);
			UI_init_conversation();
			Func097F(AVATAR, "@I have a bad feeling...@", 0x0007);
		}
		AVATAR->si_path_run_usecode([0x0337, 0x08C1, 0x0000], PATH_FAILURE, AVATAR, Func0739, true);
	}
}

void Func073A object#(0x73A) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;

	if (event == EGG) {
		var0000 = get_object_position();
		if (!SELINA->get_item_flag(IN_PARTY)) {
			SELINA->move_object([0x0924, 0x01CF, 0x0000]);
			SELINA->set_npc_id(0x0001);
			UI_sprite_effect(ANIMATION_TELEPORT, 0x0924, 0x01CF, 0x0000, 0x0000, 0x0000, LOOP_ONCE);
		}
		SELINA->set_schedule_type(IN_COMBAT);
		SELINA->set_alignment(EVIL);
		SELINA->set_opponent(AVATAR);
		SELINA->set_attack_mode(STRONGEST);
		SELINA->set_oppressor(AVATAR);
		SELINA->set_item_flag(SI_TOURNAMENT);
		gflags[SELINA_FINAL_BATTLE] = true;
		SELINA->item_say("@This should stop thee!@");
		var0001 = UI_create_new_object(0x0300);
		if (var0001) {
			var0002 = UI_update_last_created([0x0928, 0x01DE, 0x0000]);
		}
		var0003 = 0x0915;
		var0004 = 0x01C9;
		while (var0003 < 0x093F) {
			var0001 = UI_create_new_object(0x0300);
			if (var0001) {
				var0002 = UI_update_last_created([var0003, var0004, 0x0000]);
			}
			var0003 += 0x0003;
		}
		PALOS->move_object([0x0926, 0x01CF, 0x0000]);
		UI_sprite_effect(ANIMATION_TELEPORT, 0x0926, 0x01CF, 0x0000, 0x0000, 0x0000, LOOP_ONCE);
		PALOS->set_schedule_type(IN_COMBAT);
		PALOS->set_alignment(EVIL);
		PALOS->set_opponent(AVATAR);
		PALOS->set_attack_mode(STRONGEST);
		PALOS->set_oppressor(AVATAR);
		PALOS->clear_item_flag(SI_TOURNAMENT);
		DEADEYE->move_object([0x0928, 0x01CF, 0x0000]);
		UI_sprite_effect(ANIMATION_TELEPORT, 0x0928, 0x01CF, 0x0000, 0x0000, 0x0000, LOOP_ONCE);
		DEADEYE->set_schedule_type(IN_COMBAT);
		DEADEYE->set_alignment(EVIL);
		DEADEYE->set_opponent(AVATAR);
		DEADEYE->set_attack_mode(STRONGEST);
		DEADEYE->set_oppressor(AVATAR);
		DEADEYE->clear_item_flag(SI_TOURNAMENT);
		BRUNT->move_object([0x092A, 0x01CF, 0x0000]);
		UI_sprite_effect(ANIMATION_TELEPORT, 0x092A, 0x01CF, 0x0000, 0x0000, 0x0000, LOOP_ONCE);
		BRUNT->set_schedule_type(IN_COMBAT);
		BRUNT->set_alignment(EVIL);
		BRUNT->set_opponent(AVATAR);
		BRUNT->set_attack_mode(STRONGEST);
		BRUNT->set_oppressor(AVATAR);
		BRUNT->clear_item_flag(SI_TOURNAMENT);
		var0005 = SELINA->get_npc_object();
		var0002 = script var0005 after 25 ticks {
			nohalt;
			call Func042C;
		};
	}
}

extern var Func0992 0x992 (var var0000, var var0001, var var0002, var var0003);
extern void Func097F 0x97F (var var0000, var var0001, var var0002);
extern var Func09A0 0x9A0 (var var0000, var var0001);
extern void Func08C0 0x8C0 (var var0000);
extern void Func0922 0x922 (var var0000);
extern void Func07D8 object#(0x7D8) ();
extern void Func09AC 0x9AC (var var0000, var var0001, var var0002, var var0003);

void Func073B object#(0x73B) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;
	var var0008;
	var var0009;
	var var000A;
	var var000B;
	var var000C;
	var var000D;
	var var000E;
	var var000F;
	var var0010;
	var var0011;
	var var0012;
	var var0013;
	var var0014;
	var var0015;
	var var0016;
	var var0017;
	var var0018;

	if ((get_item_quality() == 0x00FF) && (event == EGG)) {
		UI_set_weather(SPARKLE);
		UI_play_sound_effect(0x0082);
		var0000 = get_object_position();
		var0001 = UI_create_new_object2(0x013E, [var0000[0x0001], (var0000[0x0002] + 0x0001), var0000[0x0003]]);
		var0001->set_schedule_type(WAIT);
		var0001->set_alignment(GOOD);
		var0001->set_item_flag(SI_TOURNAMENT);
		var0002 = Func0992(0x0001, "@We must hurry!@", "@I must hurry!@", true);
		if (!IOLO->get_item_flag(IN_PARTY)) {
			IOLO->add_to_party();
			Func097F(IOLO, "@Wait, Avatar!@", 0x0000);
		}
		if (!SHAMINO->get_item_flag(IN_PARTY)) {
			SHAMINO->add_to_party();
			Func097F(SHAMINO, "@Hold, Avatar!@", 0x0000);
		}
		if (!DUPRE->get_item_flag(IN_PARTY)) {
			DUPRE->add_to_party();
			Func097F(DUPRE, "@Stop, Avatar!@", 0x0000);
		}
		abort;
	}
	var0003 = Func09A0(0x0002, 0x0001);
	if (event == EGG) {
		var0002 = var0003->set_item_quality(0x0000);
		var0001 = AVATAR->find_nearby(0x013E, 0x0028, MASK_NONE);
		var0002 = Func0992(0x0001, "@Batlin!@", "@Batlin!@", true);
		var0002 = script var0001 {
			nohalt;
			face north;
			wait 7;
			actor frame cast_up;
			wait 2;
			actor frame cast_out;
			wait 2;
			actor frame raise_1h;
			wait 2;
			actor frame raise_2h;
			actor frame raise_2h;
			wait 2;
			actor frame strike_2h;
			wait 2;
			actor frame standing;
			step north;
			wait 2;
			step north;
			wait 1;
			step north;
			wait 1;
			actor frame cast_up;
			wait 5;
		};
		Func08C0(true);
		var0002 = set_item_quality(0x0001);
		var0002 = script AVATAR after 30 ticks {
			nohalt;
			call Func061D;
		};
		AVATAR->set_item_flag(DONT_MOVE);
		UI_end_conversation();
		abort;
	}
	if (event == SCRIPTED) {
		var0004 = var0003->get_item_quality();
		if (var0004 == 0x0000) {
			var0001 = AVATAR->find_nearby(0x013E, 0x0014, MASK_NONE);
			CINDY->show_npc_face0(0x0001);
			say("\"Fool! Thou art too late. Now I shall enter the Wall of Lights and become immortal!\"");
			say("\"Then I shall return to destroy thy mortal soul!\"");
			UI_remove_npc_face0();
			var0002 = script var0001 {
				nohalt;
				actor frame kneeling;
				wait 4;
				actor frame standing;
				wait 3;
				actor frame cast_up;
				wait 3;
				actor frame cast_out;
				wait 4;
				actor frame raise_1h;
				actor frame raise_2h;
				wait 3;
				actor frame raise_2h;
				wait 3;
				actor frame strike_2h;
				wait 1;
				actor frame strike_1h;
				wait 1;
				actor frame strike_2h;
				wait 1;
				actor frame raise_1h;
				actor frame raise_2h;
				wait 3;
				actor frame raise_2h;
				wait 3;
				actor frame reach_2h;
				wait 3;
				call Func073B;
			};
			var0000 = var0001->get_object_position();
			UI_sprite_effect(ANIMATION_TELEPORT, var0000[0x0001], var0000[0x0002], var0000[0x0003], 0x0000, 0x0000, LOOP_ONCE);
			var0002 = var0003->set_item_quality(0x0001);
		}
		if (var0004 == 0x0001) {
			var0001 = AVATAR->find_nearby(0x013E, 0x0014, MASK_NONE);
			if (!var0001) {
				UI_error_message("No Batlin");
			}
			CINDY->show_npc_face0(0x0001);
			say("\"Wait... No! The wall is not opening for me! This cannot be!\"");
			say("\"No... The banes, they have... Oh, what have I done!\"");
			say("\"I have been tricked! Avatar! I beseech thee! Help me before...\"");
			UI_remove_npc_face0();
			var0001->clear_item_flag(SI_TOURNAMENT);
			Func08C0(false);
			var0001->obj_sprite_effect(ANIMATION_LIGHTNING_YELLOW, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, LOOP_ONCE);
			var0001->obj_sprite_effect(ANIMATION_SMALL_RING_BLAST, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, LOOP_ONCE);
			var0005 = UI_get_party_list();
			UI_play_sound_effect(0x002A);
			var0002 = var0003->set_item_quality(0x0002);
			var0002 = script var0003 {
				nohalt;
				wait 20;
				call Func073B;
			};
			UI_end_conversation();
			abort;
		}
		if (var0004 == 0x0002) {
			var0001 = AVATAR->find_nearby(0x013E, 0x0014, MASK_NONE);
			if (!var0001) {
				UI_error_message("No Batlin");
			}
			var0000 = var0001->get_object_position();
			var0006 = UI_create_new_object(0x0281);
			if (var0006) {
				var0006->set_item_frame(0x0001);
				var0002 = var0006->set_item_quality(0x0086);
				var0002 = var0001->give_last_created();
				if (!var0002) {
					var0002 = UI_update_last_created(var0000);
				}
			}
			var0006 = UI_create_new_object(0x0106);
			if (var0006) {
				var0006->set_item_frame(0x0003);
				var0002 = var0001->give_last_created();
				if (!var0002) {
					var0002 = UI_update_last_created(var0000);
				}
			}
			var0007 = UI_create_new_object(0x022B);
			if (var0007) {
				var0007->set_item_frame(0x0000);
				var0006 = UI_create_new_object(0x022F);
				if (var0006) {
					var0006->set_item_frame(0x0009);
					var0002 = var0007->give_last_created();
					if (!var0002) {
						var0002 = UI_update_last_created(var0000);
					}
				}
				var0006 = UI_create_new_object(0x022F);
				if (var0006) {
					var0006->set_item_frame(0x0004);
					var0002 = var0007->give_last_created();
					if (!var0002) {
						var0002 = UI_update_last_created(var0000);
					}
				}
				var0006 = UI_create_new_object(0x022F);
				if (var0006) {
					var0006->set_item_frame(0x0002);
					var0002 = var0007->give_last_created();
					if (!var0002) {
						var0002 = UI_update_last_created(var0000);
					}
				}
				var0006 = UI_create_new_object(0x022F);
				if (var0006) {
					var0006->set_item_frame(0x000D);
					var0002 = var0007->give_last_created();
					if (!var0002) {
						var0002 = UI_update_last_created(var0000);
					}
				}
				var0006 = UI_create_new_object(0x022F);
				if (var0006) {
					var0006->set_item_frame(0x0011);
					var0002 = var0007->give_last_created();
					if (!var0002) {
						var0002 = UI_update_last_created(var0000);
					}
				}
				var0006 = UI_create_new_object(0x022F);
				if (var0006) {
					var0006->set_item_frame(0x0003);
					var0002 = var0007->give_last_created();
					if (!var0002) {
						var0002 = UI_update_last_created(var0000);
					}
				}
				var0002 = var0001->give_last_created();
				if (!var0002) {
					var0002 = UI_update_last_created(var0000);
				}
			}
			var0001->clear_item_flag(SI_TOURNAMENT);
			var0001->kill_npc();
			var0002 = var0003->set_item_quality(0x0003);
			var0002 = script var0003 {
				nohalt;
				wait 15;
				call Func073B;
			};
			abort;
		}
		if (var0004 == 0x0003) {
			Func0922(0x0016);
			gflags[BANES_RELEASED] = true;
			0x0000->Func07D8();
			var0006 = Func09A0(0x0000, 0x0001);
			UI_play_music(0x0033, var0006);
			var0002 = var0003->set_item_quality(0x0004);
			var0002 = script var0003 {
				nohalt;
				wait 10;
				call Func073B;
			};
		}
		if ((var0004 > 0x0003) && (var0004 < 0x0007)) {
			var0005 = [SHAMINO, DUPRE, IOLO];
			var0008 = var0005[(var0004 - 0x0003)];
			UI_play_sound_effect(0x0077);
			if (var0004 > 0x0004) {
				var0000 = var0008->get_object_position();
				UI_sprite_effect(ANIMATION_TELEPORT, var0000[0x0001], var0000[0x0002], 0x0000, 0x0000, 0x0000, LOOP_ONCE);
			}
			var0009 = FIND_ON_SCREEN->find_object(0x019E, QUALITY_ANY, 0x0010);
			var000A = var0008->find_direction(var0009);
			var000B = [0, 0];
			if (var000A == NORTH) {
				var000B = [ 0, -1];
			}
			if (var000A == NORTHEAST) {
				var000B = [ 1, -1];
			}
			if (var000A == EAST) {
				var000B = [ 1,  0];
			}
			if (var000A == SOUTHEAST) {
				var000B = [ 1,  1];
			}
			if (var000A == SOUTH) {
				var000B = [ 0,  1];
			}
			if (var000A == SOUTHWEST) {
				var000B = [-1,  1];
			}
			if (var000A == WEST) {
				var000B = [-1,  0];
			}
			if (var000A == NORTHWEST) {
				var000B = [-1, -1];
			}
			var000C = var0008->get_distance(var0009);
			var000B[0x0001] *= var000C;
			var000B[0x0002] *= var000C;
			var0000 = var0008->get_object_position();
			var0000[0x0001] += var000B[0x0001];
			var0000[0x0002] += var000B[0x0002];
			var000B[0x0001] *= -1;
			var000B[0x0002] *= -1;
			UI_sprite_effect(ANIMATION_RED_SWIRL, var0000[0x0001], var0000[0x0002], var000B[0x0001], var000B[0x0002], 0x0000, var000C);
			var0002 = var0003->set_item_quality(var0004 + 0x0001);
			var0002 = script var0003 {
				nohalt;
				wait (var000C + 0x000A);
				call Func073B;
			};
		}
		if (var0004 == 0x0004) {
			if (SHAMINO->get_item_flag(IN_PARTY)) {
				var0000 = SHAMINO->get_object_position();
				var000D = SHAMINO->get_item_frame();
				SHAMINO->remove_from_party();
				SHAMINO->move_object([0x0065, 0x0036, 0x0000]);
				Func09AC(SHAMINO, 0x0065, 0x0036, WAIT);
				var000E = UI_create_new_object2(0x013D, var0000);
				var000E->set_item_frame(var000D);
				var000E->set_schedule_type(WAIT);
				UI_sprite_effect(ANIMATION_TELEPORT, var0000[0x0001], var0000[0x0002], 0x0000, 0x0000, 0x0000, LOOP_ONCE);
				SHAMINO->set_item_flag(DEAD);
			}
		}
		if (var0004 == 0x0005) {
			if (DUPRE->get_item_flag(IN_PARTY)) {
				var0000 = DUPRE->get_object_position();
				var000D = DUPRE->get_item_frame();
				DUPRE->remove_from_party();
				DUPRE->move_object([0x0068, 0x0036, 0x0000]);
				Func09AC(DUPRE, 0x0068, 0x0036, WAIT);
				var000E = UI_create_new_object2(0x038A, var0000);
				var000E->set_item_frame(var000D);
				var000E->set_schedule_type(WAIT);
				UI_sprite_effect(ANIMATION_TELEPORT, var0000[0x0001], var0000[0x0002], 0x0000, 0x0000, 0x0000, LOOP_ONCE);
				DUPRE->set_item_flag(DEAD);
			}
		}
		if (var0004 == 0x0006) {
			if (IOLO->get_item_flag(IN_PARTY)) {
				var0000 = IOLO->get_object_position();
				var000D = IOLO->get_item_frame();
				IOLO->remove_from_party();
				IOLO->move_object([0x0062, 0x0036, 0x0000]);
				Func09AC(IOLO, 0x0062, 0x0036, WAIT);
				var000E = UI_create_new_object2(0x0370, var0000);
				var000E->set_item_frame(var000D);
				var000E->set_schedule_type(WAIT);
				UI_sprite_effect(ANIMATION_TELEPORT, var0000[0x0001], var0000[0x0002], 0x0000, 0x0000, 0x0000, LOOP_ONCE);
				IOLO->set_item_flag(DEAD);
			}
		}
		if (var0004 == 0x0007) {
			ANARCHY->show_npc_face0(0x0000);
			say("\"I am Anarchy! Hahaha!\"");
			say("\"The world shall quail before me! Wrong shall become right! And right shall become lost! Nothing shall escape my touch!\"");
			UI_remove_npc_face0();
			WANTONNESS->show_npc_face0(0x0000);
			say("\"Hahaha! I am the Wantonness Bane!\"");
			say("\"Wherever I pass, people shall frolic and sate their wild desires! I shall drive thee to feed thy darkest hungers!\"");
			UI_remove_npc_face0();
			INSANITY->show_npc_face0(0x0000);
			say("\"I -- hahaha! -- am the Insanity Bane! Hahaha!\"");
			say("\"All those who fall within my shadow shall have their reason clouded and their wits addled! Their greatest love shall lie in the rubbish they once loathed! Hahaha!\"");
			UI_remove_npc_face0();
			var0000 = AVATAR->get_object_position();
			UI_sprite_effect(ANIMATION_TELEPORT, var0000[0x0001], var0000[0x0002], 0x0000, 0x0000, 0x0000, LOOP_ONCE);
			var000F = AVATAR->find_nearby(0x0370, 0x0028, MASK_NONE);
			if (var000F) {
				var0000 = var000F->get_object_position();
				var000F->remove_item();
				var0010 = IOLO->get_cont_items(SHAPE_ANY, QUALITY_ANY, FRAME_ANY);
				if (var0010) {
					for (var0013 in var0010 with var0011 to var0012) {
						var0014 = var0013->set_last_created();
						if (var0014) {
							var0014 = UI_update_last_created(var0000);
							if (!var0014) {
								var0014 = UI_update_last_created([0x0921, 0x017A, 0x0000]);
							}
							if (!var0014) {
								var0014 = UI_update_last_created([0x0923, 0x0178, 0x0000]);
							}
							if (!var0014) {
								var0014 = UI_update_last_created([0x0925, 0x017A, 0x0000]);
							}
							if (!var0014) {
								var0014 = UI_update_last_created([0x0923, 0x017C, 0x0000]);
							}
						}
					}
				}
			}
			UI_sprite_effect(ANIMATION_MEDIUM_RING_BLAST, var0000[0x0001], var0000[0x0002], 0x0000, 0x0000, 0x0000, LOOP_ONCE);
			var000F = AVATAR->find_nearby(0x038A, 0x0028, MASK_NONE);
			if (var000F) {
				var0000 = var000F->get_object_position();
				var000F->remove_item();
				var0010 = DUPRE->get_cont_items(SHAPE_ANY, QUALITY_ANY, FRAME_ANY);
				if (var0010) {
					for (var0013 in var0010 with var0015 to var0016) {
						var0014 = var0013->set_last_created();
						if (var0014) {
							var0014 = UI_update_last_created(var0000);
							if (!var0014) {
								var0014 = UI_update_last_created([0x092B, 0x0174, 0x0000]);
							}
							if (!var0014) {
								var0014 = UI_update_last_created([0x092D, 0x0172, 0x0000]);
							}
							if (!var0014) {
								var0014 = UI_update_last_created([0x092F, 0x0174, 0x0000]);
							}
							if (!var0014) {
								var0014 = UI_update_last_created([0x092D, 0x0176, 0x0000]);
							}
						}
					}
				}
			}
			UI_sprite_effect(ANIMATION_MEDIUM_RING_BLAST, var0000[0x0001], var0000[0x0002], 0x0000, 0x0000, 0x0000, LOOP_ONCE);
			var000F = AVATAR->find_nearby(0x013D, 0x0028, MASK_NONE);
			if (var000F) {
				var0000 = var000F->get_object_position();
				var000F->remove_item();
				var0010 = SHAMINO->get_cont_items(SHAPE_ANY, QUALITY_ANY, FRAME_ANY);
				if (var0010) {
					for (var0013 in var0010 with var0017 to var0018) {
						var0014 = var0013->set_last_created();
						if (var0014) {
							var0014 = UI_update_last_created(var0000);
							if (!var0014) {
								var0014 = UI_update_last_created([0x092A, 0x017A, 0x0000]);
							}
							if (!var0014) {
								var0014 = UI_update_last_created([0x092C, 0x0178, 0x0000]);
							}
							if (!var0014) {
								var0014 = UI_update_last_created([0x092E, 0x017A, 0x0000]);
							}
							if (!var0014) {
								var0014 = UI_update_last_created([0x092C, 0x017C, 0x0000]);
							}
						}
					}
				}
			}
			UI_sprite_effect(ANIMATION_MEDIUM_RING_BLAST, var0000[0x0001], var0000[0x0002], 0x0000, 0x0000, 0x0000, LOOP_ONCE);
			if (BOYDON->npc_nearby()) {
				var0000 = BOYDON->get_object_position();
				var0002 = script BOYDON {
					nohalt;
					wait 7;
					hit 55, normal_damage;
				};
			}
			UI_play_sound_effect(0x002A);
			gflags[SERPENT_GWANI_HORN_SPEECH] = true;
			var0002 = script Func09A0(0x0005, 0x0004) after 40 ticks {
				nohalt;
				call Func0377;
			};
			var0002 = var0003->set_item_quality(0x0000);
			AVATAR->clear_item_flag(DONT_MOVE);
			UI_init_conversation();
			UI_set_weather(CLEAR_WEATHER);
		}
	}
}

extern var Func0923 0x923 ();

void Func073C object#(0x73C) () {
	var var0000;
	var var0001;
	var var0002;

	if ((event == EGG) && (!Func0923())) {
		var0000 = AVATAR->get_object_position();
		var0001 = UI_die_roll(-3, 3);
		var0002 = UI_die_roll(-3, 3);
		var0000[0x0001] += var0001;
		var0000[0x0002] += var0002;
		THOXA->move_object(var0000);
		var0000[0x0001] -= var0000[0x0003] / 0x0002;
		var0000[0x0002] -= var0000[0x0003] / 0x0002;
		UI_sprite_effect(ANIMATION_TELEPORT, var0000[0x0001], var0000[0x0002], 0, 0, 0, LOOP_ONCE);
		THOXA->set_schedule_type(TALK);
		THOXA->set_alignment(NEUTRAL);
	}
}

void Func073D object#(0x73D) () {
	var var0000;
	var var0001;
	var var0002;

	if ((event == EGG) && gflags[BANES_RELEASED]) {
		var0000 = get_object_position();
		var0001 = UI_create_new_object(0x03BB);
		if (var0001) {
			UI_play_sound_effect(0x004D);
			var0001->set_item_frame(0x0005);
			var0002 = UI_update_last_created(var0000);
			if (var0002) {
				remove_item();
			}
		}
	}
}

extern var Func097D 0x97D (var var0000, var var0001, var var0002, var var0003, var var0004);
extern void Func097F 0x97F (var var0000, var var0001, var var0002);

void Func0742 object#(0x742) () {
	var var0000;

	UI_error_message(["WARNING: remove this egg at ", get_object_position()]);
	abort;
	// Dead code.
	if (event == EGG) {
		var0000 = Func097D(PARTY, 0x0001, 0x01DF, QUALITY_ANY, 0x0002);
		if (var0000) {
			gflags[RETURNED_GWANI_AMULET] = true;
			remove_item();
		} else {
			var0000 = Func097D(PARTY, 0x0001, 0x022F, QUALITY_ANY, 0x0001);
			if (var0000) {
				gflags[RETURNED_GWANI_AMULET] = true;
				remove_item();
				Func097F(AVATAR, "@Smell that clean air!@", 0x0003);
			}
		}
	}
}

extern var Func097D 0x97D (var var0000, var var0001, var var0002, var var0003, var var0004);
extern void Func095D 0x95D (var var0000);

void Func0743 object#(0x743) () {
	var var0000;

	if (event == EGG) {
		var0000 = Func097D(PARTY, 0x0001, 0x017F, QUALITY_ANY, 0x0001);
		if (var0000) {
			gflags[HAVE_HELM_OF_MONITOR] = true;
			Func095D(0x0258);
			remove_item();
		}
	}
}

void Func0744 object#(0x744) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;

	if (event == EGG) {
		var0000 = find_nearby(0x00C6, 0x000F, MASK_TRANSLUCENT);
		for (var0003 in var0000 with var0001 to var0002) {
			var0003->remove_item();
		}
	}
}

void Func0745 object#(0x745) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;

	if (event == EGG) {
		var0000 = UI_find_nearby_avatar(0x017D);
		var0001 = true;
		for (var0004 in var0000 with var0002 to var0003) {
			var0005 = var0004->get_npc_id();
			if (var0005 == 0x0001) {
				var0001 = false;
				var0004->set_schedule_type(TALK);
			}
		}
		var0000 = [];
		if (var0001) {
			var0006 = get_object_position();
			var0007 = UI_create_new_object2(0x017D, var0006);
			if (var0007) {
				var0007->set_npc_id(0x0001);
				var0007->set_schedule_type(TALK);
				var0007->clear_item_flag(ASLEEP);
			}
		}
	}
}

extern var Func0988 0x988 (var var0000, var var0001);
extern void Func07D1 object#(0x7D1) ();
extern void Func09AC 0x9AC (var var0000, var var0001, var var0002, var var0003);
extern void Func097F 0x97F (var var0000, var var0001, var var0002);
extern void Func092B 0x92B ();
extern void Func094F 0x94F (var var0000, var var0001);
extern var Func097D 0x97D (var var0000, var var0001, var var0002, var var0003, var var0004);
extern var Func092C 0x92C (var var0000);

void Func0759 object#(0x759) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;
	var var0008;
	var var0009;
	var var000A;
	var var000B;
	var var000C;
	var var000D;
	var var000E;
	var var000F;
	var var0010;
	var var0011;
	var var0012;
	var var0013;
	var var0014;
	var var0015;
	var var0016;
	var var0017;

	var0000 = [AVATAR, IOLO, SHAMINO, DUPRE];
	var0001 = AVATAR->find_nearby(ANY_SHAPE, 0x001E, MASK_NPC);
	if (UI_get_array_size(var0001) > 0x0001) {
		var0001 = Func0988(AVATAR->get_npc_object(), var0001);
		var0002 = var0001[UI_get_random(UI_get_array_size(var0001))];
		var0001 = Func0988(var0002, var0001);
		var0003 = var0002->get_object_position();
		UI_play_sound_effect(0x0074);
		var0002->Func07D1();
		var0004 = 0x0000;
		if (var0002->get_npc_number() < LAST_TRUE_NPC) {
			UI_sprite_effect(ANIMATION_LIGHTNING_BLUE, var0003[0x0001], var0003[0x0002], 0x0000, 0x0000, 0x0000, LOOP_ONCE);
			UI_sprite_effect(ANIMATION_POOF, var0003[0x0001], var0003[0x0002], 0x0000, 0x0000, 0x0000, LOOP_ONCE);
			var0002->move_object([(0x05F0 + var0004), 0x078D, 0x0000]);
			var0004 += 0x0002;
		} else {
			UI_sprite_effect(ANIMATION_LIGHTNING_RED, var0003[0x0001], var0003[0x0002], 0x0000, 0x0000, 0x0000, LOOP_ONCE);
			UI_sprite_effect(ANIMATION_TELEPORT2, var0003[0x0001], var0003[0x0002], 0x0000, 0x0000, 0x0000, LOOP_ONCE);
			if (var0002->get_item_flag(IN_PARTY)) {
				var0002->remove_from_party();
			}
			var0002->remove_npc();
			Func09AC(var0002, 0x0000, 0x0000, WAIT);
		}
		if (var0001) {
			var0005 = ["@He is gone!@", "@What hath happened?@", "@Is he dead?@", "@'Tis the storm!@", "@Help!@", "@Run!@"];
			Func097F(var0001[UI_get_random(UI_get_array_size(var0001))], var0005[UI_get_random(UI_get_array_size(var0005))], 0x0002);
		}
		var0006 = script AVATAR after (0x0007 + UI_get_random(0x000A)) ticks {
			nohalt;
			call Func0759;
		};
		abort;
	}
	if (!gflags[TEMP_FLAG_1]) {
		var0003 = AVATAR->get_object_position();
		AVATAR->obj_sprite_effect(ANIMATION_LIGHTNING_YELLOW, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, LOOP_ONCE);
		AVATAR->obj_sprite_effect(ANIMATION_GREEN_BUBBLES, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, LOOP_ONCE);
		gflags[TEMP_FLAG_1] = true;
		var0006 = script AVATAR after 5 ticks {
			nohalt;
			call Func0759;
		};
		abort;
	}
	gflags[TEMP_FLAG_1] = false;
	var0007 = UI_get_party_list();
	if (DUPRE->get_npc_object() in var0007) {
		DUPRE->remove_from_party();
	}
	if (SHAMINO->get_npc_object() in var0007) {
		SHAMINO->remove_from_party();
	}
	if (IOLO->get_npc_object() in var0007) {
		IOLO->remove_from_party();
	}
	DUPRE->set_schedule_type(WAIT);
	DUPRE->remove_npc();
	SHAMINO->set_new_schedules(MIDNIGHT, STANDTHERE, [0x025F, 0x0A33]);
	SHAMINO->run_schedule();
	IOLO->set_new_schedules(MIDNIGHT, PATROL, [0x0428, 0x09C7]);
	IOLO->move_object([0x0428, 0x09C7, 0x0000]);
	IOLO->run_schedule();
	Func092B();
	var0008 = AVATAR->get_object_position();
	var0009 = [(var0008[0x0001] + 0x00B0), var0008[0x0002], var0008[0x0003]];
	AVATAR->move_object(var0009);
	var000A = "@Yow!@" & ("" & ("@What happened?@" & ("@Where are my friends!@" & ("@Iolo?@" & ("@Shamino???@" & "@Dupre?!@")))));
	Func094F(AVATAR, var000A);
	UI_sprite_effect(ANIMATION_GREEN_BUBBLES, var0009[0x0001], var0009[0x0002], 0x0000, 0x0000, 0x0000, LOOP_ONCE);
	gflags[EQUIPMENT_EXCHANGED] = true;
	if (!Func097D(AVATAR, 0x0001, 0x0321, QUALITY_ANY, FRAME_ANY)) {
		var0006 = AVATAR->add_cont_items(0x0001, 0x0321, QUALITY_ANY, 0x0000, 0x0000);
	}
	var000B = [0x025C, 0x00E7, 0x0326, 0x0303, 0x02F9, 0x022A, 0x0343, 0x0106, 0x0253, 0x025E, 0x01EA, 0x00B2, 0x0256, 0x024B, 0x0179, 0x0252, 0x017F, 0x029A];
	var000C = [QUALITY_ANY, QUALITY_ANY, QUALITY_ANY, QUALITY_ANY, QUALITY_ANY, QUALITY_ANY, QUALITY_ANY, QUALITY_ANY, QUALITY_ANY, QUALITY_ANY, QUALITY_ANY, QUALITY_ANY, QUALITY_ANY, QUALITY_ANY, QUALITY_ANY, QUALITY_ANY, QUALITY_ANY, QUALITY_ANY];
	var000D = [FRAME_ANY, FRAME_ANY, FRAME_ANY, FRAME_ANY, FRAME_ANY, FRAME_ANY, FRAME_ANY, FRAME_ANY, FRAME_ANY, FRAME_ANY, FRAME_ANY, FRAME_ANY, FRAME_ANY, 0x0006, FRAME_ANY, FRAME_ANY, FRAME_ANY, FRAME_ANY];
	var000E = Func092C(0x0001);
	var000F = Func092C(0x0002);
	var0010 = Func092C(0x0003);
	var0011 = UI_get_array_size(var000B);
	while (var0011 > 0x0000) {
		for (var0014 in var0000 with var0012 to var0013) {
			var0015 = var0014->remove_cont_items(0x0001, var000B[var0011], var000C[var0011], var000D[var0011], 0x0000);
			var0016 = 0x0001;
			if (var000E[var0011] == 0x03B4) {
				var0016 = UI_get_random(0x0064);
			}
			if (var0015) {
				var0017 = var0014->count_objects(var000B[var0011], var000C[var0011], var000D[var0011]);
				var0006 = var0014->remove_cont_items(var0017, var000B[var0011], var000C[var0011], var000D[var0011], 0x0000);
				var0006 = var0014->add_cont_items(var0016, var000E[var0011], var000F[var0011], var0010[var0011], 0x0000);
				if (var0006 == 0x0000) {
					break;
				}
				var0015 = false;
				// I see no way other than this
				goto labelFunc0759_0523;
			}
		} nobreak {
			if (!var0015) {
labelFunc0759_0523:
				var0006 = AVATAR->add_cont_items(var0016, var000E[var0011], var000F[var0011], var0010[var0011], 0x0000);
				if (var0006) {
					var0006 = UI_add_party_items(var0016, var000E[var0011], var000F[var0011], var0010[var0011], 0x0000);
				}
			}
		}
		var0011 -= 0x0001;
	}
}

extern void Func097F 0x97F (var var0000, var var0001, var var0002);
extern void Func07D2 object#(0x7D2) ();
extern var Func09A0 0x9A0 (var var0000, var var0001);
extern void Func0998 0x998 (var var0000, var var0001);

void Func075A object#(0x75A) () {
	var var0000;
	var var0001;
	var var0002;

	if (event == EGG) {
		AVATAR->set_item_flag(DONT_MOVE);
		UI_end_conversation();
		AVATAR->clear_item_say();
		var0000 = AVATAR->get_object_position();
		var0000[0x0002] += 0x0007;
		THOXA->set_schedule_type(WAIT);
		THOXA->move_object(var0000);
		Func097F(THOXA, "@Thou hast arrived!@", 0x0000);
		Func097F(AVATAR, "@Who said that?@", 0x0003);
		THOXA->Func07D2();
		var0001 = script THOXA after 20 ticks {
			nohalt;
			call Func0363;
		};
		UI_sprite_effect(ANIMATION_TELEPORT, var0000[0x0001], var0000[0x0002], 0x0000, 0x0000, 0x0000, LOOP_ONCE);
		UI_play_sound_effect(0x0051);
		KARNAX->set_schedule_type(WAIT);
		var0001 = script KARNAX {
			face FACE_WEST;
		};
		var0002 = Func09A0(0x0000, 0x0001);
		UI_play_music(0x003F, var0002);
	}
	if ((event == SCRIPTED) && (gflags[TEMP_FLAG_4] == true)) {
		UI_init_conversation();
		THOXA->show_npc_face0(0x0000);
		say("\"This fire ring shall save thee from being destroyed during this battle, Hero. Neither of us means thee harm, but errors can occur in the heat of combat. Remain within the ring!\"");
		UI_end_conversation();
		var0002 = Func09A0(0x0007, 0x0001);
		if (var0002) {
			UI_play_music(0x0002, var0002);
		}
		Func0998(AVATAR->get_npc_object(), 0x037F);
		var0001 = script THOXA {
			nohalt;
			face east;
			actor frame ready;
		};
		gflags[TEMP_FLAG_4] = false;
		abort;
	}
	if (event == SCRIPTED) {
		UI_play_sound_effect(0x0047);
		THOXA->obj_sprite_effect(ANIMATION_LIGHTNING, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, LOOP_ONCE);
	}
}

void Func075B object#(0x75B) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;

	var0000 = find_nearby(0x032A, 0x0003, MASK_NONE);
	var0001 = var0000->get_item_frame();
	if ((var0001 == 0x0000) || (var0001 == 0x0001)) {
		var0002 = var0000->get_object_position();
		UI_play_sound_effect(0x0077);
		UI_sprite_effect(ANIMATION_BLUE_BEADS, (var0002[0x0001] - 0x0003), (var0002[0x0002] - 0x0003), 0x0000, 0x0000, 0x0000, LOOP_ONCE);
		var0000->set_item_frame(0x0001);
		var0003 = var0000->set_item_quality(0x000C);
		var0000->clear_item_flag(TEMPORARY);
		gflags[GOT_WATER_OF_TOLERANCE] = true;
	}
}

void Func075D object#(0x75D) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;

	var0000 = find_nearby(0x031F, 0x000A, MASK_NONE);
	for (var0003 in var0000 with var0001 to var0002) {
		if (var0003->get_item_frame() == 0x0012) {
			var0000 = script var0003 {
				nohalt;
				say "@Thou, stop!@";
				wait 15;
				say "@Wouldst thou talk with me?@";
				wait 20;
				say "@Please...@";
			};
		}
	}
}

void Func075E object#(0x75E) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;

	var0000 = [0x096B, 0x0B43, 0x0967, 0x0B43, 0x0967, 0x0B5F, 0x096B, 0x0B5F];
	var0001 = 0x0001;
	while (var0001 <= 0x0004) {
		UI_play_sound_effect(0x0077);
		var0002 = UI_create_new_object(0x02D8);
		if (var0002) {
			var0002->set_item_frame(0x0000);
			var0002->set_item_flag(TEMPORARY);
			var0003 = var0001 * 0x0002;
			var0004 = UI_update_last_created([var0000[(var0003 - 0x0001)], var0000[var0003], 0x0000]);
			UI_sprite_effect(ANIMATION_PURPLE_BUBBLES, var0000[(var0003 - 0x0001)], var0000[var0003], 0x0000, 0x0000, 0x0000, LOOP_ONCE);
			var0001 += 0x0001;
		}
	}
}

extern void Func0884 0x884 (var var0000);
extern void Func0885 0x885 (var var0000);

void Func075F object#(0x75F) () {
	var var0000;
	var var0001;
	var var0002;

	var0000 = find_nearby(0x0376, 0x0005, MASK_NONE);
	var0001 = var0000->get_item_frame();
	if ((var0001 % 0x0002) == 0x0000) {
		var0000->set_item_frame(var0001 + 0x0001);
	} else {
		var0000->set_item_frame(var0001 - 0x0001);
	}
	UI_play_sound_effect2(0x0046, var0000);
	var0002 = var0000->get_item_quality();
	if (var0002 == 0x0000) {
		Func0884(var0002);
	}
	if (var0002 == 0x0001) {
		if (!gflags[TRAP_MAGIC_LOCK_DOOR_1]) {
			Func0884(var0002);
		}
	}
	if (var0002 == 0x0002) {
		if (!gflags[TRAP_MAGIC_LOCK_DOOR_2]) {
			Func0884(var0002);
		}
	}
	if (var0002 == 0x0003) {
		if (!gflags[TRAP_MAGIC_LOCK_DOOR_3]) {
			Func0884(var0002);
		}
	}
	if ((var0002 >= 0x0004) && (var0002 <= 0x0006)) {
		Func0885(var0002);
	}
}

extern void Func095D 0x95D (var var0000);

void Func0760 object#(0x760) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;
	var var0008;
	var var0009;
	var var000A;
	var var000B;
	var var000C;
	var var000D;
	var var000E;
	var var000F;
	var var0010;
	var var0011;

	var0000 = [0x0225];
	var0001 = find_nearby(var0000, 0x0002, MASK_NONE);
	var0002 = var0001->get_object_position();
	if (var0001) {
		Func095D(0x0064);
		var0001->remove_item();
		UI_play_sound_effect(0x0074);
		UI_sprite_effect(ANIMATION_BLANK_25, var0002[0x0001], var0002[0x0002], 0x0001, 0x0000, 0x0000, LOOP_ONCE);
		var0003 = find_nearby(0x0121, 0x0006, MASK_NONE);
		for (var0006 in var0003 with var0004 to var0005) {
			var0006->remove_item();
		}
		var0007 = UI_create_new_object(0x0121);
		if (var0007) {
			var0008 = UI_update_last_created([0x09B8, 0x0B5C, 0x0001]);
			var0007->set_item_frame(0x0000);
		}
		var0009 = find_nearby(0x0300, 0x000C, MASK_NONE);
		for (var000C in var0009 with var000A to var000B) {
			UI_play_sound_effect(0x0021);
			var000C->remove_item();
			UI_sprite_effect(ANIMATION_RED_SWIRL, var0002[0x0001], var0002[0x0002], 0x0000, 0x0000, 0x0000, LOOP_ONCE);
		}
		var000D = AVATAR->find_nearby(0x0113, 0x0010, MASK_EGG);
		for (var0010 in var000D with var000E to var000F) {
			var0011 = var0010->get_item_frame();
			if (var0011 == 0x0000) {
				var0010->remove_item();
			}
		}
		remove_item();
	} else {
		var0002 = get_object_position();
		UI_sprite_effect(ANIMATION_POOF, var0002[0x0001], var0002[0x0002], 0x0001, 0x0000, 0x0000, LOOP_ONCE);
		UI_play_sound_effect(0x0021);
	}
}

extern var Func0941 0x941 (var var0000);

void Func0761 object#(0x761) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;
	var var0008;
	var var0009;

	UI_play_sound_effect(0x001E);
	var0000 = [0x038E, 0x0BB8, 0x0000];
	var0001 = 0x000F + Func0941(AVATAR);
	while (var0001 != 0x0000) {
		var0001 -= 0x0001;
		var0002 = var0000[0x0001] + UI_die_roll( -9, 10);
		var0003 = var0000[0x0002] + UI_die_roll(-18, 15);
		var0004 = var0000[0x0003];
		var0005 = [var0002, var0003, 0x0000];
		var0006 = UI_die_roll(0x0001, 0x0004);
		if ((var0006 == 0x0001) || (var0006 == 0x0002)) {
			var0007 = UI_create_new_object(0x037F);
		}
		if ((var0006 == 0x0003) || (var0006 == 0x0004)) {
			var0007 = UI_create_new_object(0x0231);
		}
		if (var0007) {
			var0008 = UI_die_roll(0x0005, 0x000F);
			var0006 = var0007->set_item_quality(var0008);
			var0009 = UI_update_last_created(var0005);
			var0007->set_item_flag(TEMPORARY);
			UI_play_sound_effect(0x0029);
		}
	}
}

void Func0762 object#(0x762) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;

	var0000 = get_item_quality();
	var0001 = get_object_position();
	var0002 = 0x0300;
	if (var0000 == 0x0002) {
		var0002 = 0x0231;
		var0003 = 0x0028;
	}
	if (var0000 == 0x0003) {
		var0002 = 0x037F;
		var0003 = 0x0029;
	}
	if (var0000 == 0x0004) {
		var0002 = 0x0384;
		var0003 = 0x0068;
	}
	if (var0000 == 0x0005) {
		var0002 = 0x0386;
		var0003 = 0x0045;
	}
	var0004 = UI_create_new_object(var0002);
	if (var0004) {
		var0005 = UI_update_last_created(var0001);
		UI_play_sound_effect(var0003);
		var0004->clear_item_flag(TEMPORARY);
	}
}

void Func0763 object#(0x763) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;
	var var0008;
	var var0009;

	if (event == EGG) {
		var0000 = get_item_quality();
		var0001 = find_nearby(0x00D1, 0x0001, MASK_NONE);
		var0002 = 0x0000;
		for (var0005 in var0001 with var0003 to var0004) {
			var0006 = var0005->get_item_frame();
			var0007 = get_object_position();
			var0008 = var0005->get_object_position();
			if ((var0000 > 0x0000) && ((var0006 > 0x0009) && ((var0006 < 0x000E) && (var0007[0x0003] == var0008[0x0003])))) {
				var0002 = var0005;
				break;
			}
		}
		if (var0002) {
			if (var0006 == 0x000A) {
				if (!gflags[PLACED_LODESTONE_OF_HATE]) {
					gflags[PLACED_LODESTONE_OF_HATE] = true;
				} else {
					return;
				}
			}
			if (var0006 == 0x000B) {
				if (!gflags[PLACED_LODESTONE_OF_HAPPINESS]) {
					gflags[PLACED_LODESTONE_OF_HAPPINESS] = true;
				} else {
					return;
				}
			}
			if (var0006 == 0x000C) {
				if (!gflags[PLACED_LODESTONE_OF_DESPAIR]) {
					gflags[PLACED_LODESTONE_OF_DESPAIR] = true;
				} else {
					return;
				}
			}
			if (var0006 == 0x000D) {
				if (!gflags[PLACED_LODESTONE_OF_LOVE]) {
					gflags[PLACED_LODESTONE_OF_LOVE] = true;
				} else {
					return;
				}
			}
			var0009 = get_object_position();
			var0009[0x0001] -= var0009[0x0003] / 0x0002;
			var0009[0x0002] -= var0009[0x0003] / 0x0002;
			UI_sprite_effect(ANIMATION_PURPLE_BUBBLES, var0009[0x0001], var0009[0x0002], 0x0000, 0x0000, 0x0000, LOOP_ONCE);
			UI_play_sound_effect(0x0039);
			var0002->remove_item();
			remove_item();
		}
	}
}

extern void Func0798 object#(0x798) ();

void Func0764 object#(0x764) () {
	var var0000;
	var var0001;
	var var0002;

	var0000 = [0x038B, 0x0B4F, 0x0000];
	var0001 = script item {
		nohalt;
		call Func0798;
	};
	var0001 = UI_create_new_object(0x00CA);
	if (var0001) {
		var0002 = UI_update_last_created(var0000);
		var0001->set_item_frame(0x0004);
		var0001->clear_item_flag(TEMPORARY);
	}
}

extern void Func095D 0x95D (var var0000);
extern void Func0888 0x888 ();

void Func0765 object#(0x765) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;

	var0000 = get_item_quality();
	var0001 = find_nearby(0x01C2, 0x0001, MASK_NONE);
	for (var0004 in var0001 with var0002 to var0003) {
		var0005 = var0004->get_item_frame();
		var0006 = var0004->get_object_position();
		if (var0000 == 0x0001) {
			if (var0005 == 0x0008) {
				UI_play_sound_effect(0x0074);
				UI_sprite_effect(ANIMATION_PURPLE_BUBBLES, var0006[0x0001], var0006[0x0002], 0x0002, 0x0000, 0x0000, LOOP_ONCE);
				var0004->remove_item();
				var0007 = UI_create_new_object(0x01C2);
				if (var0007) {
					var0004 = UI_update_last_created([var0006]);
					var0007->set_item_frame(0x000C);
				}
				gflags[RED_ORB_PLACED] = true;
				Func095D(0x00FA);
				Func0888();
				remove_item();
			} else {
				UI_sprite_effect(ANIMATION_POOF, var0006[0x0001], var0006[0x0002], 0x0002, 0x0000, 0x0000, LOOP_ONCE);
				UI_play_sound_effect(0x0021);
			}
		}
		if (var0000 == 0x0002) {
			if (var0005 == 0x0009) {
				UI_play_sound_effect(0x0074);
				UI_sprite_effect(ANIMATION_PURPLE_BUBBLES, var0006[0x0001], var0006[0x0002], 0x0002, 0x0000, 0x0000, LOOP_ONCE);
				var0004->remove_item();
				var0007 = UI_create_new_object(0x01C2);
				if (var0007) {
					var0004 = UI_update_last_created([var0006]);
					var0007->set_item_frame(0x000C);
				}
				gflags[PURPLE_ORB_PLACED] = true;
				Func095D(0x00FA);
				Func0888();
				remove_item();
			} else {
				UI_sprite_effect(ANIMATION_POOF, var0006[0x0001], var0006[0x0002], 0x0002, 0x0000, 0x0000, LOOP_ONCE);
				UI_play_sound_effect(0x0021);
			}
		}
		if (var0000 == 0x0003) {
			if (var0005 == 0x000A) {
				UI_play_sound_effect(0x0074);
				UI_sprite_effect(ANIMATION_PURPLE_BUBBLES, var0006[0x0001], var0006[0x0002], 0x0002, 0x0000, 0x0000, LOOP_ONCE);
				var0004->remove_item();
				var0007 = UI_create_new_object(0x01C2);
				if (var0007) {
					var0004 = UI_update_last_created([var0006]);
					var0007->set_item_frame(0x000C);
				}
				gflags[BLUE_ORB_PLACED] = true;
				Func095D(0x00FA);
				Func0888();
				remove_item();
			} else {
				UI_sprite_effect(ANIMATION_POOF, var0006[0x0001], var0006[0x0002], 0x0002, 0x0000, 0x0000, LOOP_ONCE);
				UI_play_sound_effect(0x0021);
			}
		}
		if (var0000 == 0x0004) {
			if (var0005 == 0x000B) {
				UI_play_sound_effect(0x0074);
				UI_sprite_effect(ANIMATION_PURPLE_BUBBLES, var0006[0x0001], var0006[0x0002], 0x0002, 0x0000, 0x0000, LOOP_ONCE);
				var0004->remove_item();
				var0007 = UI_create_new_object(0x01C2);
				if (var0007) {
					var0004 = UI_update_last_created([var0006]);
					var0007->set_item_frame(0x000C);
				}
				gflags[YELLOW_ORB_PLACED] = true;
				Func095D(0x00FA);
				Func0888();
				remove_item();
			} else {
				UI_sprite_effect(ANIMATION_POOF, var0006[0x0001], var0006[0x0002], 0x0002, 0x0000, 0x0000, LOOP_ONCE);
				UI_play_sound_effect(0x0021);
			}
		}
	}
}

extern void Func097F 0x97F (var var0000, var var0001, var var0002);
extern void Func09AC 0x9AC (var var0000, var var0001, var var0002, var var0003);
extern var Func09A6 0x9A6 (var var0000);

void Func0766 object#(0x766) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;
	var var0008;
	var var0009;
	var var000A;
	var var000B;
	var var000C;
	var var000D;
	var var000E;
	var var000F;
	var var0010;
	var var0011;

	if (event == SCRIPTED) {
		AVATAR->clear_item_flag(DONT_MOVE);
		abort;
	}
	if (event == EGG) {
		var0000 = UI_get_party_list2();
		var0001 = AVATAR->get_npc_object();
		var0002 = false;
		for (var0005 in var0000 with var0003 to var0004) {
			if (var0005 != var0001) {
				var0002 = true;
				var0006 = ["@I'm not going in there!@", "@I shall wait here...@", "@Thou must continue alone, Avatar.@", "@Good luck, Avatar!@", "@I will stay here, Avatar.@", "@Be brave, Avatar!@"];
				Func097F(var0005[UI_get_random(UI_get_array_size(var0005))], var0006[UI_get_random(UI_get_array_size(var0006))], 0x0002);
				var0005->remove_from_party();
				var0005->set_npc_id(0x001F);
				var0007 = var0005->get_object_position();
				var0005->set_schedule_type(PATROL);
				Func09AC(var0005, var0007[0x0001], var0007[0x0002], PATROL);
			}
		}
		if (var0002) {
			AVATAR->set_item_flag(DONT_MOVE);
			var0008 = script AVATAR after 50 ticks {
				nohalt;
				call Func0766;
			};
		}
		var0009 = false;
		var000A = find_nearby(0x0129, 0x0032, MASK_NONE);
		if (var000A != 0x0000) {
			for (var000D in var000A with var000B to var000C) {
				var0009 = var000D;
			}
		} else {
			var000E = UI_create_new_object(0x0320);
			var000E->clear_item_flag(TEMPORARY);
			var000E->set_item_frame(0x0004);
			var0008 = UI_update_last_created([0x0A0B, 0x0AB4, 0x0000]);
			var0009 = var000E;
		}
		if (var0009) {
			AVATAR->clear_item_flag(INVISIBLE);
			var000F = 0x0000;
			var000A = AVATAR->get_cont_items(SHAPE_ANY, QUALITY_ANY, FRAME_ANY);
			while (var000F < 0x0002) {
				for (var000D in var000A with var0010 to var0011) {
					if (Func09A6(var000D) || (var000F == 0x0001)) {
						var0008 = var000D->get_item_shape();
						if (!((var0008 == 0x01E6) || (var0008 == 0x025F))) {
							if (!var000D->set_last_created()) {
								UI_error_message("Tell Team Error 1");
							}
							if (!var0009->give_last_created()) {
								UI_error_message("Tell Team Error 2");
							}
						}
					}
				}
				var000F += 0x0001;
				var000A = AVATAR->get_cont_items(SHAPE_ANY, QUALITY_ANY, FRAME_ANY);
			}
		}
	}
}

extern var Func09A0 0x9A0 (var var0000, var var0001);
extern void Func095D 0x95D (var var0000);

void Func0767 object#(0x767) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;
	var var0008;
	var var0009;
	var var000A;
	var var000B;
	var var000C;
	var var000D;
	var var000E;
	var var000F;
	var var0010;
	var var0011;
	var var0012;

	var0000 = false;
	var0001 = false;
	var0002 = false;
	var0003 = false;
	var0004 = AVATAR->get_object_position();
	var0005 = var0004[0x0001];
	var0006 = var0004[0x0002];
	if ((var0005 > 0x098F) && ((var0005 < 0x09EF) && ((var0006 > 0x0A8F) && (var0006 < 0x0AEF)))) {
		var0000 = true;
		UI_play_music(0x0005, Func09A0(0x0005, 0x0001));
		Func095D(0x00C8);
	}
	if ((var0005 > 0x090F) && ((var0005 < 0x096F) && ((var0006 > 0x0A8F) && (var0006 < 0x0AEF)))) {
		var0001 = true;
		UI_play_music(0x0005, Func09A0(0x0005, 0x0001));
		Func095D(0x0190);
	}
	if ((var0005 > 0x090F) && ((var0005 < 0x096F) && ((var0006 > 0x0A0F) && (var0006 < 0x0A6F)))) {
		var0002 = true;
		UI_play_music(0x0005, Func09A0(0x0005, 0x0001));
		Func095D(0x0258);
	}
	if ((var0005 > 0x098F) && ((var0005 < 0x09EF) && ((var0006 > 0x0A0F) && (var0006 < 0x0A6F)))) {
		var0003 = true;
		UI_play_music(0x0005, Func09A0(0x0005, 0x0001));
		Func095D(0x0320);
	}
	if (var0000) {
		UI_remove_from_area(0x02D8, 0x0004, [0x098F, 0x0A8F], [0x09EF, 0x0AEF]);
		UI_remove_from_area(0x01DB, 0x000A, [0x098F, 0x0A8F], [0x09EF, 0x0AEF]);
		UI_remove_from_area(0x0216, 0x0000, [0x098F, 0x0A8F], [0x09EF, 0x0AEF]);
	}
	if (var0001) {
		UI_remove_from_area(0x02D8, 0x0004, [0x090F, 0x0A8F], [0x096F, 0x0AEF]);
		UI_remove_from_area(0x01DB, 0x000A, [0x090F, 0x0A8F], [0x096F, 0x0AEF]);
		UI_remove_from_area(0x0216, 0x0000, [0x090F, 0x0A8F], [0x096F, 0x0AEF]);
	}
	if (var0002) {
		UI_remove_from_area(0x02D8, 0x0004, [0x090F, 0x0A0F], [0x096F, 0x0A6F]);
		UI_remove_from_area(0x01DB, 0x000A, [0x090F, 0x0A0F], [0x096F, 0x0A6F]);
		UI_remove_from_area(0x0216, 0x0000, [0x090F, 0x0A0F], [0x096F, 0x0A6F]);
	}
	if (var0003) {
		UI_remove_from_area(0x02D8, 0x0004, [0x098F, 0x0A0F], [0x09EF, 0x0A6F]);
		UI_remove_from_area(0x01DB, 0x000A, [0x098F, 0x0A0F], [0x09EF, 0x0A6F]);
		UI_remove_from_area(0x0216, 0x0000, [0x098F, 0x0A0F], [0x09EF, 0x0A6F]);
		UI_remove_from_area(0x0097, 0x000B, [0x098F, 0x0A0F], [0x09EF, 0x0A6F]);
	}
	if (var0000 == true) {
		var0007 = [0x09E9, 0x09D9, 0x09C9, 0x09B9, 0x09A9, 0x0999, 0x09E9, 0x09D9, 0x09C9, 0x09B9, 0x09A9, 0x0999];
		var0008 = [0x0AEF, 0x0AEF, 0x0AEF, 0x0AEF, 0x0AEF, 0x0AEF, 0x0A8F, 0x0A8F, 0x0A8F, 0x0A8F, 0x0A8F, 0x0A8F];
	}
	if (var0001 == true) {
		var0007 = [0x0969, 0x0959, 0x0949, 0x0939, 0x0929, 0x0919, 0x0969, 0x0959, 0x0949, 0x0939, 0x0929, 0x0919];
		var0008 = [0x0AEF, 0x0AEF, 0x0AEF, 0x0AEF, 0x0AEF, 0x0AEF, 0x0A8F, 0x0A8F, 0x0A8F, 0x0A8F, 0x0A8F, 0x0A8F];
	}
	if (var0002 == true) {
		var0007 = [0x0969, 0x0959, 0x0949, 0x0939, 0x0929, 0x0919, 0x0969, 0x0959, 0x0949, 0x0939, 0x0929, 0x0919];
		var0008 = [0x0A6F, 0x0A6F, 0x0A6F, 0x0A6F, 0x0A6F, 0x0A6F, 0x0A0F, 0x0A0F, 0x0A0F, 0x0A0F, 0x0A0F, 0x0A0F];
	}
	if (var0003 == true) {
		var0007 = [0x09E9, 0x09D9, 0x09C9, 0x09B9, 0x09A9, 0x0999, 0x09E9, 0x09D9, 0x09C9, 0x09B9, 0x09A9, 0x0999];
		var0008 = [0x0A6F, 0x0A6F, 0x0A6F, 0x0A6F, 0x0A6F, 0x0A6F, 0x0A0F, 0x0A0F, 0x0A0F, 0x0A0F, 0x0A0F, 0x0A0F];
	}
	var0009 = 0x0000;
	for (var000C in var0007 with var000A to var000B) {
		var0009 += 0x0001;
		var000D = UI_create_new_object(0x02D8);
		var000D->set_item_frame(0x0004);
		var000E = UI_update_last_created([var0007[var0009], var0008[var0009], 0x0000]);
	}
	if (var0000 == true) {
		var0007 = [0x09EF, 0x09EF, 0x09EF, 0x09EF, 0x09EF, 0x098F, 0x098F, 0x098F, 0x098F, 0x098F, 0x098F];
		var0008 = [0x0AE9, 0x0AD9, 0x0AC9, 0x0AA9, 0x0A99, 0x0AE9, 0x0AD9, 0x0AC9, 0x0AB9, 0x0AA9, 0x0A99];
	}
	if (var0001 == true) {
		var0007 = [0x096F, 0x096F, 0x096F, 0x096F, 0x096F, 0x096F, 0x090F, 0x090F, 0x090F, 0x090F, 0x090F, 0x090F];
		var0008 = [0x0AE9, 0x0AD9, 0x0AC9, 0x0AB9, 0x0AA9, 0x0A99, 0x0AE9, 0x0AD9, 0x0AC9, 0x0AB9, 0x0AA9, 0x0A99];
	}
	if (var0002 == true) {
		var0007 = [0x096F, 0x096F, 0x096F, 0x096F, 0x096F, 0x096F, 0x090F, 0x090F, 0x090F, 0x090F, 0x090F, 0x090F];
		var0008 = [0x0A69, 0x0A59, 0x0A49, 0x0A39, 0x0A29, 0x0A19, 0x0A69, 0x0A59, 0x0A49, 0x0A39, 0x0A29, 0x0A19];
	}
	if (var0003 == true) {
		var0007 = [0x09EF, 0x09EF, 0x09EF, 0x09EF, 0x09EF, 0x09EF, 0x098F, 0x098F, 0x098F, 0x098F, 0x098F, 0x098F];
		var0008 = [0x0A69, 0x0A59, 0x0A49, 0x0A39, 0x0A29, 0x0A19, 0x0A69, 0x0A59, 0x0A49, 0x0A39, 0x0A29, 0x0A19];
	}
	var0009 = 0x0000;
	for (var000C in var0007 with var000F to var0010) {
		var0009 += 0x0001;
		var000D = UI_create_new_object(0x01DB);
		var000D->set_item_frame(0x000A);
		var000E = UI_update_last_created([var0007[var0009], var0008[var0009], 0x0000]);
	}
	if (var0000 == true) {
		var0007 = [0x09DF, 0x09CF, 0x09BF, 0x09AF, 0x099F, 0x09E9, 0x09D9, 0x09C9, 0x09B9, 0x09A9, 0x0999, 0x09DF, 0x09CF, 0x09BF, 0x09AF, 0x099F, 0x09E9, 0x09D9, 0x09C9, 0x09B9, 0x09A9, 0x0999, 0x09DF, 0x09CF, 0x09BF, 0x09AF, 0x099F];
		var0007 &= [0x09E9, 0x09D9, 0x09C9, 0x09B9, 0x09A9, 0x0999, 0x09EF, 0x09DF, 0x09CF, 0x09BF, 0x09AF, 0x099F, 0x09E9, 0x09D9, 0x09C9, 0x09B9, 0x09A9, 0x0999, 0x09DF, 0x09CF, 0x09BF, 0x09AF, 0x099F, 0x09E9, 0x09D9, 0x09C9, 0x09B9, 0x09A9, 0x0999, 0x09DF, 0x09CF, 0x09BF, 0x09AF, 0x099F];
		var0008 = [0x0AE9, 0x0AE9, 0x0AE9, 0x0AE9, 0x0AE9, 0x0ADF, 0x0ADF, 0x0ADF, 0x0ADF, 0x0ADF, 0x0ADF, 0x0AD9, 0x0AD9, 0x0AD9, 0x0AD9, 0x0AD9, 0x0ACF, 0x0ACF, 0x0ACF, 0x0ACF, 0x0ACF, 0x0ACF, 0x0AC9, 0x0AC9, 0x0AC9, 0x0AC9, 0x0AC9];
		var0008 &= [0x0ABF, 0x0ABF, 0x0ABF, 0x0ABF, 0x0ABF, 0x0ABF, 0x0AB9, 0x0AB9, 0x0AB9, 0x0AB9, 0x0AB9, 0x0AB9, 0x0AAF, 0x0AAF, 0x0AAF, 0x0AAF, 0x0AAF, 0x0AAF, 0x0AA9, 0x0AA9, 0x0AA9, 0x0AA9, 0x0AA9, 0x0A9F, 0x0A9F, 0x0A9F, 0x0A9F, 0x0A9F, 0x0A9F, 0x0A99, 0x0A99, 0x0A99, 0x0A99, 0x0A99];
	}
	if (var0001 == true) {
		var0007 = [0x095F, 0x094F, 0x093F, 0x092F, 0x091F, 0x0969, 0x0959, 0x0949, 0x0939, 0x0929, 0x0919, 0x095F, 0x094F, 0x093F, 0x092F, 0x091F, 0x0969, 0x0959, 0x0949, 0x0939, 0x0929, 0x0919, 0x095F, 0x094F, 0x093F, 0x092F, 0x091F];
		var0007 &= [0x0969, 0x0959, 0x0949, 0x0939, 0x0929, 0x0919, 0x095F, 0x094F, 0x093F, 0x092F, 0x091F, 0x0969, 0x0959, 0x0949, 0x0939, 0x0929, 0x0919, 0x095F, 0x094F, 0x093F, 0x092F, 0x091F, 0x0969, 0x0959, 0x0949, 0x0939, 0x0929, 0x0919, 0x095F, 0x094F, 0x093F, 0x092F, 0x091F];
		var0008 = [0x0AE9, 0x0AE9, 0x0AE9, 0x0AE9, 0x0AE9, 0x0ADF, 0x0ADF, 0x0ADF, 0x0ADF, 0x0ADF, 0x0ADF, 0x0AD9, 0x0AD9, 0x0AD9, 0x0AD9, 0x0AD9, 0x0ACF, 0x0ACF, 0x0ACF, 0x0ACF, 0x0ACF, 0x0ACF, 0x0AC9, 0x0AC9, 0x0AC9, 0x0AC9, 0x0AC9];
		var0008 &= [0x0ABF, 0x0ABF, 0x0ABF, 0x0ABF, 0x0ABF, 0x0ABF, 0x0AB9, 0x0AB9, 0x0AB9, 0x0AB9, 0x0AB9, 0x0AAF, 0x0AAF, 0x0AAF, 0x0AAF, 0x0AAF, 0x0AAF, 0x0AA9, 0x0AA9, 0x0AA9, 0x0AA9, 0x0AA9, 0x0A9F, 0x0A9F, 0x0A9F, 0x0A9F, 0x0A9F, 0x0A9F, 0x0A99, 0x0A99, 0x0A99, 0x0A99, 0x0A99];
	}
	if (var0002 == true) {
		var0007 = [0x095F, 0x094F, 0x093F, 0x092F, 0x091F, 0x0969, 0x0959, 0x0949, 0x0939, 0x0929, 0x0919, 0x095F, 0x094F, 0x093F, 0x092F, 0x091F, 0x0969, 0x0959, 0x0949, 0x0939, 0x0929, 0x0919, 0x095F, 0x094F, 0x093F, 0x092F, 0x091F];
		var0007 &= [0x0969, 0x0959, 0x0949, 0x0939, 0x0929, 0x0919, 0x095F, 0x094F, 0x093F, 0x092F, 0x091F, 0x0969, 0x0959, 0x0949, 0x0939, 0x0929, 0x0919, 0x095F, 0x094F, 0x093F, 0x092F, 0x091F, 0x0969, 0x0959, 0x0949, 0x0939, 0x0929, 0x0919, 0x095F, 0x094F, 0x093F, 0x092F, 0x091F];
		var0008 = [0x0A69, 0x0A69, 0x0A69, 0x0A69, 0x0A69, 0x0A5F, 0x0A5F, 0x0A5F, 0x0A5F, 0x0A5F, 0x0A5F, 0x0A59, 0x0A59, 0x0A59, 0x0A59, 0x0A59, 0x0A4F, 0x0A4F, 0x0A4F, 0x0A4F, 0x0A4F, 0x0A4F, 0x0A49, 0x0A49, 0x0A49, 0x0A49, 0x0A49];
		var0008 &= [0x0A3F, 0x0A3F, 0x0A3F, 0x0A3F, 0x0A3F, 0x0A3F, 0x0A39, 0x0A39, 0x0A39, 0x0A39, 0x0A39, 0x0A2F, 0x0A2F, 0x0A2F, 0x0A2F, 0x0A2F, 0x0A2F, 0x0A29, 0x0A29, 0x0A29, 0x0A29, 0x0A29, 0x0A1F, 0x0A1F, 0x0A1F, 0x0A1F, 0x0A1F, 0x0A1F, 0x0A19, 0x0A19, 0x0A19, 0x0A19, 0x0A19];
	}
	if (var0003 == true) {
		var0007 = [0x09DF, 0x09CF, 0x09BF, 0x09AF, 0x099F, 0x09E9, 0x09D9, 0x09C9, 0x09B9, 0x09A9, 0x0999, 0x09DF, 0x09CF, 0x09BF, 0x09AF, 0x099F, 0x09E9, 0x09D9, 0x09C9, 0x09B9, 0x09A9, 0x0999, 0x09DF, 0x09CF, 0x09BF, 0x09AF, 0x099F];
		var0007 &= [0x09E9, 0x09D9, 0x09C9, 0x09B9, 0x09A9, 0x0999, 0x09DF, 0x09CF, 0x09BF, 0x09AF, 0x099F, 0x09E9, 0x09D9, 0x09C9, 0x09B9, 0x09A9, 0x0999, 0x09DF, 0x09CF, 0x09BF, 0x09AF, 0x099F, 0x09E9, 0x09D9, 0x09C9, 0x09B9, 0x09A9, 0x0999, 0x09DF, 0x09CF, 0x09BF, 0x09AF, 0x099F];
		var0008 = [0x0A69, 0x0A69, 0x0A69, 0x0A69, 0x0A69, 0x0A5F, 0x0A5F, 0x0A5F, 0x0A5F, 0x0A5F, 0x0A5F, 0x0A59, 0x0A59, 0x0A59, 0x0A59, 0x0A59, 0x0A4F, 0x0A4F, 0x0A4F, 0x0A4F, 0x0A4F, 0x0A4F, 0x0A49, 0x0A49, 0x0A49, 0x0A49, 0x0A49];
		var0008 &= [0x0A3F, 0x0A3F, 0x0A3F, 0x0A3F, 0x0A3F, 0x0A3F, 0x0A39, 0x0A39, 0x0A39, 0x0A39, 0x0A39, 0x0A2F, 0x0A2F, 0x0A2F, 0x0A2F, 0x0A2F, 0x0A2F, 0x0A29, 0x0A29, 0x0A29, 0x0A29, 0x0A29, 0x0A1F, 0x0A1F, 0x0A1F, 0x0A1F, 0x0A1F, 0x0A1F, 0x0A19, 0x0A19, 0x0A19, 0x0A19, 0x0A19];
	}
	var0009 = 0x0000;
	for (var000C in var0007 with var0011 to var0012) {
		var0009 += 0x0001;
		var000D = UI_create_new_object(0x0216);
		var000D->set_item_frame(0x0000);
		var000E = UI_update_last_created([var0007[var0009], var0008[var0009], 0x0000]);
	}
	if (var0000 == true) {
		UI_remove_from_area(0x0113, 0x0007, [0x098F, 0x0A8F], [0x09EF, 0x0AEF]);
	}
	if (var0001 == true) {
		UI_remove_from_area(0x0113, 0x0007, [0x090F, 0x0A8F], [0x096F, 0x0AEF]);
	}
	if (var0002 == true) {
		UI_remove_from_area(0x0113, 0x0007, [0x090F, 0x0A0F], [0x096F, 0x0A6F]);
	}
	if (var0003 == true) {
		UI_remove_from_area(0x0113, 0x0007, [0x098F, 0x0A0F], [0x09EF, 0x0A6F]);
	}
}

extern void Func07D2 object#(0x7D2) ();
extern void Func07D1 object#(0x7D1) ();
extern var Func09A0 0x9A0 (var var0000, var var0001);
extern void Func097F 0x97F (var var0000, var var0001, var var0002);

void Func0768 object#(0x768) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;
	var var0008;
	var var0009;
	var var000A;
	var var000B;
	var var000C;
	var var000D;
	var var000E;
	var var000F;
	var var0010;
	var var0011;
	var var0012;

	if (event == EGG) {
		gflags[HAVE_SILVER_SEED] = true;
		var0000 = [0x0A45, 0x0A27, 0x0A45, 0x0A24, 0x0A47, 0x0A22];
		var0001 = [0x00F0, 0x00EF, 0x00EE];
		var0002 = 0x0001;
		while (var0002 <= 0x0003) {
			var0003 = var0002 * 0x0002;
			var0004 = UI_create_new_object2(0x0299, [var0000[(var0003 - 0x0001)], var0000[var0003], 0x0000]);
			if (var0004) {
				var0004->set_schedule_type(WAIT);
				var0005 = var0004->add_cont_items(0x0001, 0x0281, var0001[var0002], var0003, false);
				var0002 += 0x0001;
				UI_sprite_effect(ANIMATION_TELEPORT2, var0000[(var0003 - 0x0001)], var0000[var0003], 0x0000, 0x0000, 0x0000, LOOP_ONCE);
				UI_play_sound_effect(0x0051);
				var0004->Func07D2();
				var0004->set_npc_id(var0002);
				var0004->set_alignment(EVIL);
				var0004->clear_item_flag(TEMPORARY);
				var0004->clear_item_flag(SI_TOURNAMENT);
				var0004->set_npc_id(var0002 + 0x000A);
				var0006 = var0004->get_npc_prop(STRENGTH);
				var0007 = 11 - var0006;
				var0005 = var0004->set_npc_prop(STRENGTH, var0007);
				var0006 = var0004->get_npc_prop(DEXTERITY);
				var0007 = 13 - var0006;
				var0005 = var0004->set_npc_prop(DEXTERITY, var0007);
				var0006 = var0004->get_npc_prop(INTELLIGENCE);
				var0007 = 20 - var0006;
				var0005 = var0004->set_npc_prop(INTELLIGENCE, var0007);
				var0006 = var0004->get_npc_prop(COMBAT);
				var0007 = 12 - var0006;
				var0005 = var0004->set_npc_prop(COMBAT, var0007);
				var0006 = var0004->get_npc_prop(HEALTH);
				var0007 = 11 - var0006;
				var0005 = var0004->set_npc_prop(HEALTH, var0007);
				if (var0002 == 0x0003) {
					var0004->Func07D1();
				}
			}
		}
		var0008 = Func09A0(0x0000, 0x0001);
		var0005 = script var0008 after 14 ticks {
			nohalt;
			call Func0768;
		};
		abort;
	}
	if (event == SCRIPTED) {
		var0009 = UI_is_pc_female();
		var000A = "he";
		var000B = "him";
		var000C = "his";
		if (var0009) {
			var000A = "she";
			var000B = "her";
			var000C = "her";
		}
		DRUSILLA->show_npc_face0(0x0000);
		say("\"Not so fast, deary! Ye don't think that ye kin just dance outta here with that little seed so easy, now do ye?\"");
		AVATAR->show_npc_face1(0x0000);
		say("\"And who will stop me, hag? Thou?\"");
		0x0000->set_conversation_slot();
		say("\"Hag, now is it?! Well, we shall see about that, deary!\"");
		RIEYA->show_npc_face0(0x0000);
		say("\"I don't know about thee, Drusilla, but I think that lout would do well as a candlestick. What thinkest thou?\"");
		UI_remove_npc_face1();
		DRUSILLA->show_npc_face1(0x0000);
		say("\"With such a bright wit, I think it would be fitting indeed!\"");
		0x0000->set_conversation_slot();
		say("\"Bright wit?! I would have said half-wit, trying to keep this flawed world alive!");
		say("\"One would think that a pawn of prophecy would be... I don't know, more intelligent!\"");
		UI_remove_npc_face1();
		SOLARIA->show_npc_face1(0x0000);
		say("\"Oh, don't be so hard on ",
			var000B,
			"! It's not ",
			var000C,
			" fault that ",
			var000A,
			" doesn't have the wisdom of the Guardian to guide ",
			var000B,
			"...");
		say("\"Besides, I think ",
			var000A,
			" is rather cute...\"");
		0x0000->set_conversation_slot();
		say("\"Hsssst! Solaria! Thou shouldst not speak of the Guide to outsiders! Now thou hast sealed ",
			var000C,
			" fate! Wilt thou never learn to think beyond thy bed?!\"");
		UI_remove_npc_face0();
		UI_remove_npc_face1();
		var000D = AVATAR->find_nearby(0x0299, 0x001E, MASK_NONE);
		var000E = ["@Oh dear...@", "@Fool!@", "@Take that!@"];
		var000F = 0x0001;
		for (var0012 in var000D with var0010 to var0011) {
			Func097F(var0012, var000E[var000F], (var000F * 0x0004));
			if (var000F == 0x0003) {
				var0005 = script var0012 after 10 ticks {
					nohalt;
					// Bug: this should likely have been 'call Func07D2'
					raw(0x07D2);
					wait 2;
					actor frame cast_up;
					sfx 67;
				};
			}
			var000F += 0x0001;
		}
		var0005 = script item after 20 ticks {
			nohalt;
			call Func0632;
		};
		gflags[TEMP_FLAG_1] = false;
	}
}

extern var Func099B 0x99B (var var0000, var var0001, var var0002, var var0003, var var0004, var var0005, var var0006);
extern void Func0998 0x998 (var var0000, var var0001);

void Func0769 object#(0x769) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;

	if (event == EGG) {
		var0000 = UI_create_new_object2(0x03D5, [0x0BC7, 0x0A0C, 0x0001]);
		if (var0000) {
			var0000->clear_item_flag(TEMPORARY);
			var0001 = Func099B(var0000, 0x0001, 0x0281, 0x00E6, 0x0007, 0x0000, false);
			var0001 = Func099B(var0000, 0x0001, 0x0281, 0x00DF, 0x0009, 0x0000, false);
			var0000->set_alignment(EVIL);
			var0000->set_schedule_type(IN_COMBAT);
			var0002 = var0000->get_npc_prop(STRENGTH);
			var0003 = 25 - var0002;
			var0001 = var0000->set_npc_prop(STRENGTH, var0003);
			var0002 = var0000->get_npc_prop(DEXTERITY);
			var0003 = 21 - var0002;
			var0001 = var0000->set_npc_prop(DEXTERITY, var0003);
			var0002 = var0000->get_npc_prop(INTELLIGENCE);
			var0003 = 30 - var0002;
			var0001 = var0000->set_npc_prop(INTELLIGENCE, var0003);
			var0002 = var0000->get_npc_prop(COMBAT);
			var0003 = 30 - var0002;
			var0001 = var0000->set_npc_prop(COMBAT, var0003);
			var0002 = var0000->get_npc_prop(HEALTH);
			var0003 = 30 - var0002;
			var0001 = var0000->set_npc_prop(HEALTH, var0003);
			Func0998(AVATAR->get_npc_object(), 0x037F);
			UI_play_sound_effect(0x002A);
		}
	}
}

extern void Func07D2 object#(0x7D2) ();
extern void Func07D1 object#(0x7D1) ();

void Func076A object#(0x76A) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;

	if (event == EGG) {
		if (gflags[HAVE_SILVER_SEED]) {
			abort;
		}
		var0000 = get_item_quality();
		var0001 = get_object_position();
		var0002 = UI_create_new_object2(0x0299, var0001);
		if (var0002) {
			UI_sprite_effect(ANIMATION_TELEPORT2, var0001[0x0001], var0001[0x0002], 0x0000, 0x0000, 0x0000, LOOP_ONCE);
			UI_play_sound_effect(0x0051);
			var0002->Func07D2();
			var0002->Func07D1();
			var0002->set_alignment(NEUTRAL);
			var0002->set_schedule_type(WAIT);
			var0002->set_npc_id(var0000);
			var0002->set_item_flag(TEMPORARY);
			var0002->set_item_flag(SI_TOURNAMENT);
			var0003 = var0002->get_npc_prop(STRENGTH);
			var0004 = 11 - var0003;
			var0005 = var0002->set_npc_prop(STRENGTH, var0004);
			var0003 = var0002->get_npc_prop(DEXTERITY);
			var0004 = 18 - var0003;
			var0005 = var0002->set_npc_prop(DEXTERITY, var0004);
			var0003 = var0002->get_npc_prop(INTELLIGENCE);
			var0004 = 24 - var0003;
			var0005 = var0002->set_npc_prop(INTELLIGENCE, var0004);
			var0003 = var0002->get_npc_prop(COMBAT);
			var0004 = 16 - var0003;
			var0005 = var0002->set_npc_prop(COMBAT, var0004);
			var0003 = var0002->get_npc_prop(HEALTH);
			var0004 = 16 - var0003;
			var0005 = var0002->set_npc_prop(HEALTH, var0004);
		}
	}
}

extern var Func097D 0x97D (var var0000, var var0001, var var0002, var var0003, var var0004);
extern void Func09AC 0x9AC (var var0000, var var0001, var var0002, var var0003);
extern var Func09A0 0x9A0 (var var0000, var var0001);
extern void Func097F 0x97F (var var0000, var var0001, var var0002);

void Func076B object#(0x76B) () {
	var var0000;
	var var0001;
	var var0002;

	if (event == EGG) {
		if (gflags[PLANTED_SILVER_SEED]) {
			remove_item();
			abort;
		}
		if (Func097D(PARTY, 0x0001, 0x0289, QUALITY_ANY, 0x000C)) {
			var0000 = get_object_position();
			KARNAX->move_object(var0000);
			Func09AC(KARNAX, var0000[0x0001], var0000[0x0002], WAIT);
			UI_sprite_effect(ANIMATION_TELEPORT2, var0000[0x0001], var0000[0x0002], 0x0000, 0x0000, 0x0000, LOOP_ONCE);
			UI_play_sound_effect(0x0051);
			var0001 = Func09A0(0x0000, 0x0001);
			UI_play_music(0x003F, var0001);
			var0002 = script KARNAX after 2 ticks {
				nohalt;
				call Func07D2;
			};
			Func097F(KARNAX, "@Avatar...@", 0x0003);
			var0002 = script AVATAR after 6 ticks {
				nohalt;
				call Func07D1;
			};
			var0002 = script KARNAX after 13 ticks {
				nohalt;
				call Func04CF;
			};
		}
	}
}

extern var Func08EB 0x8EB (var var0000, var var0001);

void Func077E object#(0x77E) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;
	var var0008;
	var var0009;

	if (event == SCRIPTED) {
		var0000 = get_object_position();
		var0001 = find_nearby(0x0315, 0x0028, MASK_NONE);
		if (var0001) {
			var0000 = var0001->get_object_position();
			BOYDON->move_object([(var0000[0x0001] - 0x0001), (var0000[0x0002] + 0x0001), 0x0000]);
			BOYDON->get_npc_object()->set_item_frame(0x0010);
			gflags[BOYDON_LIVES] = true;
			BOYDON->set_new_schedules([MIDNIGHT, MORNING, NOON, AFTERNOON, EVENING, NIGHT], [SLEEP, EAT, WANDER, EAT, LOITER, EAT], [0x0813, 0x0525, 0x0817, 0x0540, 0x0802, 0x0550, 0x0817, 0x0540, 0x081A, 0x0534, 0x0817, 0x0540]);
			BOYDON->run_schedule();
			UI_play_sound_effect(0x0077);
			var0002 = script ERSTAM after 1 ticks {
				nohalt;
				say "It worked!";
			};
			var0002 = script AVATAR after 16 ticks {
				nohalt;
				say "Amazing!";
			};
			var0002 = script BOYDON after 5 ticks {
				nohalt;
				say "I live!";
			};
			if (!ERSTAM->get_item_flag(DEAD)) {
				gflags[TEMP_FLAG_1] = true;
				ERSTAM->move_object([0x0813, 0x053A, 0x0000]);
				UI_sprite_effect(ANIMATION_TELEPORT, (var0000[0x0001] - 0x0002), (var0000[0x0002] - 0x0002), 0x0000, 0x0000, 0x0000, LOOP_ONCE);
				ERSTAM->si_path_run_usecode([0x081A, 0x052A, 0x0000], SCRIPTED, ERSTAM, Func0423, true);
				abort;
			}
		}
	} else {
		var0003 = get_item_quality();
		var0000 = get_object_position();
		var0004 = find_nearby(SHAPE_ANY, 0x0002, MASK_NONE);
		for (var0007 in var0004 with var0005 to var0006) {
			if (var0007->get_lift() == var0000[0x0003]) {
				var0008 = 0x0000;
				if (var0007->get_item_shape() == 0x031F) {
					var0009 = var0007->get_item_frame();
					if ((var0009 == 0x0012) || (var0009 == 0x000A)) {
						if (Func08EB(var0003, 0x0006)) {
							if (!Func08EB(var0003, 0x0007)) {
								var0008 = 0x0001;
								var0003 += 0x0080;
							}
						} else {
							var0008 = 0x0001;
							var0003 += 0x0040;
						}
					}
					if ((var0009 == 0x0006) || (var0009 == 0x0011)) {
						if (Func08EB(var0003, 0x0004)) {
							if (!Func08EB(var0003, 0x0005)) {
								var0008 = 0x0001;
								var0003 += 0x0020;
							}
						} else {
							var0008 = 0x0001;
							var0003 += 0x0010;
						}
					}
					if ((var0009 == 0x0007) || (var0009 == 0x0008)) {
						if (Func08EB(var0003, 0x0002)) {
							if (!Func08EB(var0003, 0x0003)) {
								var0008 = 0x0001;
								var0003 += 0x0008;
							}
						} else {
							var0008 = 0x0001;
							var0003 += 0x0004;
						}
					}
				}
				if ((var0007->get_item_shape() == 0x0289) && (var0007->get_item_frame() == 0x0001)) {
					if (!Func08EB(var0003, 0x0000)) {
						var0008 = 0x0001;
						var0003 += 0x0001;
					}
				}
				if (var0008) {
					var0007->remove_item();
					UI_sprite_effect(ANIMATION_RED_SWIRL, (var0000[0x0001] - 0x0002), (var0000[0x0002] - 0x0002), 0x0000, 0x0000, 0x0000, LOOP_ONCE);
					var0001 = find_nearby(0x0316, 0x0012, MASK_NONE);
					if (var0001) {
						var0002 = script var0001 after 1 ticks {
							frame 1;
							sfx 13;
							wait 1;
							frame 2;
							sfx 13;
							wait 1;
							frame 3;
							sfx 13;
							wait 1;
							frame 4;
							sfx 13;
							wait 1;
							frame 5;
							sfx 13;
							wait 1;
							frame 0;
						};
					}
				} else {
					UI_play_sound_effect(0x003E);
					if (var0007->set_last_created()) {
						var0002 = UI_update_last_created([var0000[0x0001], (var0000[0x0002] + 0x0005), 0x0000]);
					}
				}
			}
		}
		var0002 = set_item_quality(var0003);
		if ((!gflags[BOYDON_LIVES]) && (var0003 == 0x00FD)) {
			var0001 = find_nearby(0x0315, 0x0008, MASK_NONE);
			if (var0001) {
				UI_play_sound_effect(0x0077);
				var0002 = script var0001 after 2 ticks {
					frame 1;
					sfx 14;
					wait 2;
					frame 2;
					sfx 14;
					wait 2;
					frame 3;
					sfx 14;
					wait 2;
					frame 4;
					sfx 14;
					wait 2;
					frame 5;
					sfx 14;
					wait 2;
					frame 0;
				};
			}
			var0002 = script AVATAR after 20 ticks {
				call Func077E;
			};
		}
	}
}

extern void Func07D2 object#(0x7D2) ();
extern void Func097F 0x97F (var var0000, var var0001, var var0002);

void Func0780 object#(0x780) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;

	if (event == SCRIPTED) {
		var0000 = find_nearby(0x037C, 0x0019, MASK_NONE);
		var0001 = var0000->get_item_quality();
		var0002 = var0000->set_item_quality(var0001 + 0x0001);
		if (var0000) {
			if (var0001 > 0x0014) {
				var0003 = var0000->get_object_position();
				UI_sprite_effect(ANIMATION_SMALL_RING_BLAST, (var0003[0x0001] - 0x0001), (var0003[0x0002] - 0x0002), 0x0000, 0x0000, 0x0000, LOOP_ONCE);
				UI_play_sound_effect(0x002A);
				var0000->remove_item();
				var0003[0x0001] -= 0x0002;
				var0003[0x0002] -= 0x0002;
				var0002 = UI_create_new_object2(0x02BE, var0003);
				if (var0002) {
					var0002->set_schedule_type(STANDTHERE);
					var0002->Func07D2();
					Func097F(AVATAR, "@By the Virtues!@", 0x0005);
					UI_play_sound_effect(0x000F);
					var0002 = script var0002 after 20 ticks {
						nohalt;
						call Func02BE;
					};
				}
				AVATAR->clear_item_flag(DONT_MOVE);
				UI_init_conversation();
				abort;
			}
			if (var0001 > 0x0000) {
				var0004 = [0x0863, 0x0863, 0x0863, 0x0863, 0x0862, 0x085F, 0x0866, 0x0869, 0x0867, 0x085F, 0x0867, 0x085E, 0x0867, 0x085E, 0x0860, 0x085E, 0x0863, 0x0866, 0x0862, 0x0869, 0x085E];
				var0005 = [0x04A4, 0x04A6, 0x04A8, 0x04AA, 0x04AB, 0x04AB, 0x04AB, 0x04AC, 0x04AD, 0x04AD, 0x04AF, 0x04AF, 0x04B1, 0x04B1, 0x04B1, 0x04B4, 0x04B2, 0x04B3, 0x04B5, 0x04B4, 0x04B4];
				UI_play_sound_effect(0x0029);
				var0006 = UI_create_new_object(0x037F);
				if (var0006) {
					var0006->clear_item_flag(TEMPORARY);
					var0006->set_item_frame(UI_die_roll(0x0001, 0x0002));
					var0002 = UI_update_last_created([var0004[var0001], var0005[var0001], 0x0001]);
				}
				if (var0001 > 0x000A) {
					if (UI_die_roll(0x0001, 0x0009) > 0x0002) {
						var0003 = var0000->get_object_position();
						UI_sprite_effect(ANIMATION_POOF, (var0003[0x0001] - 0x0002), (var0003[0x0002] - 0x0002), 0x0000, 0x0000, 0x0000, LOOP_ONCE);
						UI_play_sound_effect(0x0027);
					}
				}
				var0007 = script AVATAR after UI_die_roll(0x0003, 0x0006) ticks {
					nohalt;
					call Func0780;
				};
			}
		}
	}
}

void Func0781 object#(0x781) () {
	var var0000;

	var0000 = script item after get_item_quality() ticks {
		call Func02C0;
	};
}

extern void Func0620 object#(0x620) ();
extern var Func0983 0x983 (var var0000);
extern void Func094F 0x94F (var var0000, var var0001);

void Func0795 object#(0x795) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;
	var var0008;
	var var0009;
	var var000A;
	var var000B;
	var var000C;

	if (event == EGG) {
		var0000 = UI_get_party_list();
		for (var0003 in var0000 with var0001 to var0002) {
			if (!UI_roll_to_win(var0003->get_npc_prop(STRENGTH), get_item_quality())) {
				var0004 = var0003->get_npc_object();
				var0004->halt_scheduled();
				var0004->Func0620();
				var0005 = script var0004 after 25 ticks {
					nohalt;
					call Func061F;
				};
				var0005 = script var0004 {
					nohalt;
					wait 5;
					actor frame bowing;
					wait 4;
					actor frame kneeling;
					wait 4;
					actor frame sleeping;
					wait 4;
					actor frame standing;
				};
				if (Func0983(var0004)) {
					Func094F(var0004, ["@Ohh!@", "@Eeehhh!@", "@Bleh!@", "@Gak!@"]);
				}
				var0005 = script var0004 after 17 ticks {
					nohalt;
					call Func0795;
				};
			}
		}
	}
	if (event == SCRIPTED) {
		var0006 = 0x0000;
		var0007 = 0x0000;
		while (var0006 < 0x0010) {
			var0008 = UI_die_roll(0x0000, 0x0003);
			if (var0007 == 0x0000) {
				var0007 = var0006 + var0008;
			} else {
				var0007 &= var0006 + var0008;
			}
			var0006 += 0x0004;
		}
		for (var000B in var0007 with var0009 to var000A) {
			var0005 = UI_create_new_object(0x0390);
			if (var0005) {
				var0005->set_item_flag(TEMPORARY);
				var0005->set_item_frame(var000B);
				var000C = UI_update_last_created(get_object_position());
			}
		}
	}
}

void Func0796 object#(0x796) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;

	if (event == EGG) {
		var0000 = get_item_quality();
		var0001 = UI_get_party_list();
		for (var0004 in var0001 with var0002 to var0003) {
			if (var0004 != AVATAR->get_npc_object()) {
				if (!UI_roll_to_win(var0004->get_npc_prop(INTELLIGENCE), 15)) {
					var0004->halt_scheduled();
					var0004->set_schedule_type(IN_COMBAT);
					var0004->set_attack_mode(FLEE);
					var0004->set_oppressor(AVATAR);
					var0005 = script var0004 after var0000 ticks {
						nohalt;
						call Func0796;
					};
				}
			}
		}
	}
	if (event == SCRIPTED) {
		set_schedule_type(FOLLOW_AVATAR);
	}
}

extern var Func098D 0x98D ();
extern var Func095F 0x95F (var var0000, var var0001);
extern void Func09AD 0x9AD (var var0000);

void Func0797 object#(0x797) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;

	if (event == EGG) {
		var0000 = find_nearby(SHAPE_ANY, 0x0028, MASK_NPC2);
		var0001 = Func098D();
		for (var0004 in var0000 with var0002 to var0003) {
			if (!var0004->get_item_flag(IN_PARTY)) {
				if (!Func095F(var0004->get_npc_number(), var0001)) {
					var0004->clear_item_flag(ASLEEP);
					Func09AD(var0004);
				}
			}
		}
	}
}

void Func0798 object#(0x798) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;
	var var0008;
	var var0009;
	var var000A;
	var var000B;
	var var000C;
	var var000D;

	if ((event == EGG) || (event == SCRIPTED)) {
		var0000 = find_nearby(SHAPE_ANY, 0x0028, MASK_NPC2);
		var0001 = UI_get_party_list();
		var0002 = get_item_quality();
		if (var0002 == 0x0000) {
			var0002 = 0x001E;
		}
		var0003 = get_item_flag(IN_PARTY);
		for (var0006 in var0000 with var0004 to var0005) {
			if ((!var0003) || (!(var0006 in var0001))) {
				var0007 = 0x0000;
				var0008 = "";
				while (var0007 < var0002) {
					var0009 = UI_die_roll(0x0000, 0x0008);
					if (var0009 == 0x0000) {
						var000A = new script {
							actor frame kneeling;
							actor frame bowing;
							actor frame standing;
						};
						var0008 = [var0008, var000A];
					}
					if (var0009 == 0x0001) {
						var000A = new script {
							actor frame kneeling;
							actor frame standing;
							actor frame standing;
						};
						var0008 = [var0008, var000A];
					}
					if (var0009 == 0x0002) {
						var000A = new script {
							actor frame bowing;
							actor frame sleeping;
							actor frame standing;
						};
						var0008 = [var0008, var000A];
					}
					if (var0009 == 0x0003) {
						var000A = new script {
							actor frame standing;
							actor frame standing;
							actor frame standing;
						};
						var0008 = [var0008, var000A];
					}
					if (var0009 == 0x0004) {
						var000A = new script {
							actor frame kneeling;
							actor frame ready;
							actor frame standing;
						};
						var0008 = [var0008, var000A];
					}
					if (var0009 == 0x0005) {
						var000A = new script {
							actor frame ready;
							actor frame kneeling;
							actor frame standing;
						};
						var0008 = [var0008, var000A];
					}
					if (var0009 == 0x0006) {
						var000B = FACE_NORTH + (UI_die_roll(0x0000, 0x0003) * 0x0002);
						var000A = new script {
							face var000B;
							actor frame bowing;
							actor frame standing;
						};
						var0008 = [var0008, var000A];
					}
					if (var0009 == 0x0007) {
						var000B = FACE_NORTH + (UI_die_roll(0x0000, 0x0003) * 0x0002);
						var000A = new script {
							face var000B;
							actor frame kneeling;
							actor frame standing;
						};
						var0008 = [var0008, var000A];
					}
					if (var0009 == 0x0008) {
						var000B = FACE_NORTH + (UI_die_roll(0x0000, 0x0003) * 0x0002);
						var000A = new script {
							face var000B;
							actor frame ready;
							actor frame standing;
						};
						var0008 = [var0008, var000A];
					}
					var0007 += 0x0003;
				}
				var0006->halt_scheduled();
				var000C = UI_die_roll(0x0001, 0x0005);
				if (var000C == 0x0001) {
					var0008 = new script {
						say "Aaahhh!";
						var0008;
					};
				}
				var000D = var0006->run_script(var0008);
			}
		}
		UI_earthquake(var0002);
	}
}

void Func0799 object#(0x799) () {
	if (event == EGG) {
		UI_stop_time(get_item_quality());
	}
}

extern void Func0982 0x982 (var var0000, var var0001);

void Func079A object#(0x79A) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;

	if (event == EGG) {
		var0000 = UI_get_party_list();
		var0001 = get_item_quality();
		for (var0004 in var0000 with var0002 to var0003) {
			var0005 = UI_die_roll(0x0001, var0001);
			Func0982(var0004, var0005);
		}
	}
}

extern void Func0620 object#(0x620) ();

void Func079B object#(0x79B) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;

	if (event == EGG) {
		UI_play_sound_effect(0x0046);
		var0000 = UI_get_party_list();
		for (var0003 in var0000 with var0001 to var0002) {
			if (!UI_roll_to_win(var0003->get_npc_prop(STRENGTH), get_item_quality())) {
				var0004 = var0003->get_npc_object();
				var0004->Func0620();
				var0004->set_item_flag(ASLEEP);
				var0005 = script var0004 after 100 ticks {
					nohalt;
					call Func061F;
				};
			}
		}
	}
}

void Func079C object#(0x79C) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;

	if (event == EGG) {
		UI_play_sound_effect(0x0046);
		var0000 = UI_get_party_list();
		for (var0003 in var0000 with var0001 to var0002) {
			if (!UI_roll_to_win(var0003->get_npc_prop(STRENGTH), get_item_quality())) {
				var0003->get_npc_object()->set_item_flag(POISONED);
			}
		}
	}
}

extern void Func0620 object#(0x620) ();

void Func079D object#(0x79D) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;

	if (event == EGG) {
		UI_play_sound_effect(0x0046);
		var0000 = UI_get_party_list();
		for (var0003 in var0000 with var0001 to var0002) {
			if (!UI_roll_to_win(var0003->get_npc_prop(STRENGTH), get_item_quality())) {
				var0003->get_npc_object()->set_item_flag(PARALYZED);
				var0004 = var0003->get_npc_object();
				var0004->Func0620();
				var0005 = script var0004 after 100 ticks {
					nohalt;
					call Func061F;
				};
			}
		}
	}
}

extern var Func0977 0x977 (var var0000);
extern void Func0982 0x982 (var var0000, var var0001);

void Func079E object#(0x79E) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;

	if (event == EGG) {
		UI_play_sound_effect(0x0046);
		var0000 = UI_get_party_list();
		var0001 = Func0977(var0000);
		var0002 = UI_die_roll(0x0001, var0001);
		var0003 = UI_die_roll(0x0001, get_item_quality());
		Func0982(var0000[var0002]->get_npc_object(), var0003);
	}
}

extern var Func0977 0x977 (var var0000);
extern void Func060F object#(0x60F) ();

void Func079F object#(0x79F) () {
	var var0000;
	var var0001;

	if (event == EGG) {
		UI_play_sound_effect(0x0046);
		var0000 = UI_get_party_list();
		var0001 = UI_die_roll(0x0001, Func0977(var0000));
		var0000[var0001]->Func060F();
	}
}

extern void Func02C0 shape#(0x2C0) ();

void Func07A0 object#(0x7A0) () {
	if (event == EGG) {
		item->Func02C0();
	}
}

void Func07A1 object#(0x7A1) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;

	if (event == EGG) {
		var0000 = find_nearby(0x0356, 0x0005, MASK_NONE);
		for (var0003 in var0000 with var0001 to var0002) {
			var0004 = var0003->get_item_frame();
			if (var0004 == 0x0000) {
				var0005 = var0003->get_object_position();
				var0003->remove_item();
				var0006 = UI_create_new_object2(0x02F1, var0005);
				var0006->set_alignment(EVIL);
				var0006->set_schedule_type(IN_COMBAT);
			}
		}
	}
}

extern void Func0150 shape#(0x150) ();
extern void Func0253 shape#(0x253) ();
extern void Func0379 shape#(0x379) ();

void Func07A2 object#(0x7A2) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;
	var var0008;

	if (event == EGG) {
		event = DOUBLECLICK;
		UI_play_sound_effect(0x0046);
		var0000 = get_item_quality();
		var0001 = find_nearby(0x0150, var0000, MASK_NONE);
		for (var0004 in var0001 with var0002 to var0003) {
			var0004->Func0150();
		}
		var0001 = find_nearby(0x0253, var0000, MASK_NONE);
		for (var0004 in var0001 with var0005 to var0006) {
			var0004->Func0253();
		}
		var0001 = find_nearby(0x0379, var0000, MASK_NONE);
		for (var0004 in var0001 with var0007 to var0008) {
			var0004->Func0379();
		}
	}
}

extern void Func0152 shape#(0x152) ();
extern void Func02BD shape#(0x2BD) ();
extern void Func020E shape#(0x20E) ();

void Func07A3 object#(0x7A3) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;
	var var0008;

	if (event == EGG) {
		UI_play_sound_effect(0x0046);
		event = DOUBLECLICK;
		var0000 = get_item_quality();
		var0001 = find_nearby(0x0152, var0000, MASK_NONE);
		for (var0004 in var0001 with var0002 to var0003) {
			var0004->Func0152();
		}
		var0001 = find_nearby(0x02BD, var0000, MASK_NONE);
		for (var0004 in var0001 with var0005 to var0006) {
			var0004->Func02BD();
		}
		var0001 = find_nearby(0x020E, var0000, MASK_NONE);
		for (var0004 in var0001 with var0007 to var0008) {
			var0004->Func020E();
		}
	}
}

extern var Func0989 0x989 (var var0000, var var0001);
extern var Func0906 0x906 (var var0000);
extern void Func010E shape#(0x10E) ();
extern void Func0178 shape#(0x178) ();

void Func07A4 object#(0x7A4) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;

	if (event == EGG) {
		event = DOUBLECLICK;
		var0000 = find_nearby(0x010E, 0x0028, MASK_NONE);
		var0000 &= find_nearby(0x0178, 0x0028, MASK_NONE);
		var0001 = [];
		for (var0004 in var0000 with var0002 to var0003) {
			var0001 &= get_distance(var0004);
		}
		var0000 = Func0989(var0000, var0001);
		var0005 = 0x0001;
		do {
			var0004 = var0000[var0005];
			if (!var0004) {
				// Need to make UCC optimize this
				goto labelFunc07A4_00BE;
			}
			if (Func0906(var0004) != 0x0002) {
				break;
			}
			var0005 += 0x0001;
		} while (true);
		var0006 = var0004->get_item_shape();
		if (var0006 == 0x010E) {
			var0004->Func010E();
		}
		if (var0006 == 0x0178) {
			var0004->Func0178();
		}
	}
labelFunc07A4_00BE:
	return;
}

extern var Func0989 0x989 (var var0000, var var0001);

void Func07A5 object#(0x7A5) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;

	if (event == EGG) {
		UI_play_sound_effect(0x0046);
		event = DOUBLECLICK;
		var0000 = find_nearby(0x0369, 0x0014, MASK_NONE);
		var0001 = [];
		for (var0004 in var0000 with var0002 to var0003) {
			var0001 &= var0004->get_distance(item);
		}
		var0000 = Func0989(var0000, var0001);
		var0004 = var0000[0x0001];
		if (var0004) {
			var0005 = var0004->get_item_frame();
			var0006 = var0005 % 0x0004;
			if (var0006 < 0x0003) {
				var0007 = script var0004 {
					next frame cycle;
				};
			} else {
				var0005 -= var0006;
				var0007 = script var0004 {
					frame var0005;
				};
			}
		}
	}
}

extern void Func0924 0x924 (var var0000, var var0001);

void Func07A6 object#(0x7A6) () {
	if (event == EGG) {
		Func0924(item, SHAPE_ANY);
	}
}

extern void Func0924 0x924 (var var0000, var var0001);

void Func07A7 object#(0x7A7) () {
	if (event == EGG) {
		Func0924(item, 0x0001);
	}
}

extern void Func0924 0x924 (var var0000, var var0001);

void Func07A8 object#(0x7A8) () {
	if (event == EGG) {
		Func0924(item, 0x0000);
	}
}

extern var Func09A7 0x9A7 (var var0000, var var0001);
extern void Func098B 0x98B (var var0000);
extern var Func09A0 0x9A0 (var var0000, var var0001);

void Func07AA object#(0x7AA) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;

	if (event == EGG) {
		var0000 = find_nearby(0x02F7, 0x0019, MASK_NONE);
		var0001 = UI_get_array_size(var0000);
		var0000 = Func09A7(var0001, var0000);
		for (var0004 in var0000 with var0002 to var0003) {
			UI_play_sound_effect(0x0010);
			Func098B(var0004);
		}
		var0005 = Func09A0(0x0005, 0x0001);
		var0006 = script var0005 {
			wait 100;
			call Func00FA;
		};
	}
}

extern var Func09A0 0x9A0 (var var0000, var var0001);
extern var Func084E 0x84E (var var0000, var var0001);
extern void Func09AC 0x9AC (var var0000, var var0001, var var0002, var var0003);

void Func07AB object#(0x7AB) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;
	var var0008;

	if (event == EGG) {
		if (!gflags[SHOW_PETRA_VISION]) {
			abort;
		}
		var0000 = [KARNAX, THOXA, MIGGIM, BRACCUS, SILENT1, SILENT2, SILENT3];
		if (XENKA->get_item_flag(MET)) {
			var0000 &= XENKA;
		}
		var0001 = 0x0005;
		var0002 = Func09A0(0x0005, 0x0001);
		var0003 = var0002->set_item_quality(var0001);
		for (var0006 in var0000 with var0004 to var0005) {
			var0007 = Func084E(var0006, var0001);
			var0006->move_object(var0007);
			var0006->set_new_schedules(MIDNIGHT, MAJOR_SIT, var0007);
			var0006->run_schedule();
		}
		var0008 = get_object_position();
		DRAXTA->move_object(var0008);
		DRAXTA->set_schedule_type(WAIT);
		var0003 = script DRAXTA {
			nohalt;
			face south;
			wait while far 10;
			say "@Now is the Time of Visions!@";
		};
		Func09AC(DRAXTA, var0008[0x0001], var0008[0x0002], WAIT);
		UI_play_music(0x003F, var0002);
	}
}

extern var Func0992 0x992 (var var0000, var var0001, var var0002, var var0003);
extern void Func07D1 object#(0x7D1) ();
extern var Func0940 0x940 (var var0000, var var0001);
extern void Func093E 0x93E (var var0000);
extern var Func093D 0x93D (var var0000, var var0001);
extern void Func093F 0x93F (var var0000);

void Func07AC object#(0x7AC) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;

	var0000 = get_object_position();
	var0001 = get_item_quality();
	var0002 = get_item_quantity(0x0000);
	if (UI_get_random(0x0002) == 0x0001) {
		var0003 = "@Yikes!@" & ("@Look!@" & ("@That was close!@" & ("@Run!@" & ("@Teleport storm!@" & "@Whoa!@"))));
		var0004 = Func0992(0x0001, var0003[UI_get_random(UI_get_array_size(var0003))], 0x0000, true);
		item->Func07D1();
	}
	if (var0001 == 0x0001) {
		var0000 = Func0940(var0000, var0002);
		UI_sprite_effect(ANIMATION_PURPLE_BUBBLES, var0000[0x0001], var0000[0x0002], 0x0000, 0x0000, 0x0000, LOOP_ONCE);
		Func093E(var0000);
	}
	if (var0001 == 0x0002) {
		var0005 = Func093D(var0000, (var0002 + 0x0001));
		if (var0005) {
			var0000 = var0005->get_object_position();
			UI_sprite_effect(ANIMATION_POOF, var0000[0x0001], var0000[0x0002], 0x0000, 0x0000, 0x0000, LOOP_ONCE);
			var0005->remove_item();
		}
	}
	if ((var0001 == 0x0003) || (var0001 == 0x0004)) {
		var0005 = Func093D(var0000, (var0002 + 0x0001));
		if (var0005) {
			var0000 = var0005->get_object_position();
			if (var0001 == 0x0003) {
				UI_sprite_effect(ANIMATION_POOF, var0000[0x0001], var0000[0x0002], 0x0000, 0x0000, 0x0000, LOOP_ONCE);
			} else {
				UI_sprite_effect(ANIMATION_PURPLE_BUBBLES, var0000[0x0001], var0000[0x0002], 0x0000, 0x0000, 0x0000, LOOP_ONCE);
			}
			var0005->remove_item();
			Func093F(var0000);
		}
	}
}

extern var Func093D 0x93D (var var0000, var var0001);
extern var Func0940 0x940 (var var0000, var var0001);
extern void Func093E 0x93E (var var0000);

void Func07AD object#(0x7AD) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;

	var0000 = get_object_position();
	var0001 = get_item_quality();
	var0002 = get_item_quantity(0x0000);
	if (var0001 == 0x0000) {
		UI_set_weather(RAIN);
		if (!Func093D(var0000, (var0002 + 0x0001))) {
			var0000 = Func0940(var0000, var0002);
			Func093E(var0000);
		}
	}
	if (var0001 == 0x0001) {
		UI_play_sound_effect(0x0074);
		obj_sprite_effect(ANIMATION_LIGHTNING_BLUE, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, LOOP_ONCE);
	}
	if (var0001 == 0x0002) {
		UI_play_sound_effect(0x0074);
		obj_sprite_effect(ANIMATION_LIGHTNING_RED, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, LOOP_ONCE);
	}
	if (var0001 == 0x0003) {
		UI_play_sound_effect(0x0074);
		obj_sprite_effect(ANIMATION_LIGHTNING_YELLOW, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, LOOP_ONCE);
	}
	if (var0001 == 0x0004) {
		UI_play_sound_effect(0x0074);
		obj_sprite_effect(ANIMATION_LIGHTNING_GREEN, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, LOOP_ONCE);
	}
	if (var0001 > 0x0000) {
		UI_play_sound_effect(0x0074);
		UI_lightning();
		var0003 = script item after 3 ticks {
			call Func07AC;
		};
		UI_set_weather(CLEAR_WEATHER);
	}
}

extern var Func09A0 0x9A0 (var var0000, var var0001);
extern var Func0953 0x953 ();
extern var Func0954 0x954 ();
extern var Func0942 0x942 (var var0000);
extern var Func097D 0x97D (var var0000, var var0001, var var0002, var var0003, var var0004);

void Func07AE object#(0x7AE) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;
	var var0008;

	var0000 = get_item_quality();
	if (event == EGG) {
		if (var0000 == 0x0007) {
			gflags[SHAMINO_GAVE_HINTS] = true;
		} else if (var0000 == 0x0005) {
			var0001 = script Func09A0(0x0000, 0x0001) after UI_die_roll(0x0064, 0x00C8) ticks {
				call Func07AE;
			};
		} else {
			var0002 = ("@" + Func0953()) + "...@";
			var0003 = ("@" + Func0954()) + "...@";
			var0004 = ["@Avatar...@", var0002, var0003, "@Pardon thou me...@", "@If I may...@", "@See!@"];
			SHAMINO->item_say(var0004[UI_get_random(UI_get_array_size(var0004))]);
			var0005 = 0x0004;
			var0006 = false;
			while (var0005 > 0x0000) {
				if (Func09A0(0x0005, var0005)->get_item_quality() == 0x0000) {
					var0006 = Func09A0(0x0005, var0005);
				}
				var0005 -= 0x0001;
			}
			if (var0006) {
				var0001 = var0006->set_item_quality(var0000);
				var0001 = script var0006 after 4 ticks {
					nohalt;
					call Func07AE;
				};
			}
		}
		remove_item();
	}
	if (event == SCRIPTED) {
		if (item == Func09A0(0x0000, 0x0001)) {
			if (Func0942(SHAMINO) && (!gflags[SHAMINO_GAVE_HINTS])) {
				SHAMINO->show_npc_face0(0x0000);
				var0007 = AVATAR->get_object_position();
				if ((var0007[0x0001] > 0x0291) && ((var0007[0x0001] < 0x02AB) && ((var0007[0x0002] > 0x0A51) && (var0007[0x0002] < 0x0A5E)))) {
					say("\"We did pass through an illusionary wall to enter. Might there be another leading from this place to somewhere else?\"");
				} else {
					say("\"We did pass through an illusionary wall to enter that cave. Might there be another leading deeper inside the mountain?\"");
				}
			}
		} else {
			var0001 = set_item_quality(0x0000);
			if (Func0942(SHAMINO)) {
				SHAMINO->clear_item_say();
				SHAMINO->show_npc_face0(0x0000);
				if ((var0000 < 0x0000) || ((var0000 > 0x0006) || (var0000 == 0x0005))) {
					UI_error_message("Tell Bill Qual is " + var0000);
				}
				if (var0000 == 0x0001) {
					if (Func097D(PARTY, 0x0001, 0x0247, QUALITY_ANY, FRAME_ANY)) {
						say("\"Thou wert wise to pick up that bedroll. Now we can sleep well anywhere.\"");
					} else {
						say("\"A bedroll! With this, thou wilt sleep well anywhere.\"");
					}
				}
				if (var0000 == 0x0002) {
					var0001 = AVATAR->find_nearby(0x020A, 0x0014, MASK_NONE);
					if (var0001) {
						if (Func097D(PARTY, 0x0001, 0x0273, QUALITY_ANY, FRAME_ANY)) {
							say("\"I'll wager that chest is locked. Thou shouldst try thy lockpicks on it.\"");
							say("\"Lockpicks work on locked doors, too. Of course, we only use them for virtuous reasons -- the Avatar is no common thief!\"");
						} else {
							say("\"I'll wager that chest is locked. If we had lockpicks, however, we could open it!\"");
							say("\"They work on locked doors, too. Of course, we only use them for virtuous reasons -- the Avatar is no common thief!\"");
						}
					} else {
						say("\"Nice day we're having, isn't it.\"");
					}
				}
				if (var0000 == 0x0003) {
					var0001 = AVATAR->find_nearby(0x031D, 0x0014, MASK_NONE);
					if (var0001) {
						say("\"I see a scroll. Perhaps it contains clues about this place, or counsel for our future adventurings.\"");
					} else {
						say("\"Thou wert wise to collect that scroll, Avatar. It probably contains clues which will be useful to us later.\"");
					}
				}
				if (var0000 == 0x0004) {
					if (!AVATAR->find_nearby(0x0253, 0x000A, MASK_NONE)) {
						say("\"Thou wert wise to pick up that torch! We need all that we can find, for they do not burn for long.\"");
						say("\"No doubt we shall be in many strange dungeons before our adventure is over...\"");
					} else {
						say("\"Let us take that torch! We need all that we can find, for they do not burn for long.\"");
						say("\"No doubt we shall be in many strange dungeons before our adventure is over...\"");
					}
				}
				if (var0000 == 0x0006) {
					var0001 = AVATAR->find_nearby(0x025E, 0x001E, MASK_NONE);
					if (var0001) {
						var0008 = Func0953();
						say("\"That seems alike to the bow I did lose to the magical storm!\"");
						say("\"And we are carrying an animal's skull, given to us by the strange storm -- it must have changed places with my bow!\"");
						say("\"",
							var0008,
							", it is a clue! If we find where the other strange items came from, we shall find our lost possessions!\"");
					} else {
						say("\"Look at the size of that skeleton! Perhaps that skull thou hast doth match to these bones.\"");
					}
				}
			}
		}
	}
}

extern var Func09A0 0x9A0 (var var0000, var var0001);

void Func07AF object#(0x7AF) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;

	if (MORTEGRO->get_npc_object() in UI_get_party_list()) {
		if (event == SCRIPTED) {
			var0000 = MORTEGRO->get_object_position();
			var0000[0x0001] -= var0000[0x0003] / 0x0002;
			var0000[0x0002] -= var0000[0x0003] / 0x0002;
			UI_play_sound_effect(0x0074);
			UI_lightning();
			UI_sprite_effect(ANIMATION_LIGHTNING_RED, var0000[0x0001], var0000[0x0002], 0x0000, 0x0000, 0x0000, LOOP_ONCE);
			UI_sprite_effect(ANIMATION_POOF, var0000[0x0001], var0000[0x0002], 0x0000, 0x0000, 0x0000, LOOP_ONCE);
			var0000 = MORTEGRO->get_object_position();
			MORTEGRO->remove_from_party();
			var0001 = MORTEGRO->get_cont_items(SHAPE_ANY, QUALITY_ANY, FRAME_ANY);
			for (var0004 in var0001 with var0002 to var0003) {
				var0005 = var0004->get_item_shape();
				if ((var0005 == 0x0118) || ((var0005 == 0x0119) || ((var0005 == 0x011F) || ((var0005 == 0x0198) || ((var0005 == 0x01A8) || ((var0005 == 0x020F) || (var0005 == 0x0327))))))) {
					var0004->remove_item();
				} else if (var0004->set_last_created()) {
					var0004->set_item_flag(OKAY_TO_TAKE);
					var0006 = UI_update_last_created(var0000);
					if (!var0006) {
						var0006 = UI_update_last_created([(var0000[0x0001] - 0x0002), var0000[0x0002], var0000[0x0003]]);
					}
					if (!var0006) {
						var0006 = UI_update_last_created([var0000[0x0001], (var0000[0x0002] - 0x0002), var0000[0x0003]]);
					}
					if (!var0006) {
						var0006 = UI_update_last_created([(var0000[0x0001] + 0x0002), var0000[0x0002], var0000[0x0003]]);
					}
					if (!var0006) {
						var0006 = UI_update_last_created([var0000[0x0001], (var0000[0x0002] + 0x0002), var0000[0x0003]]);
					}
				}
			}
			MORTEGRO->remove_npc();
		} else {
			var0007 = script Func09A0(0x0000, 0x0001) after 10 ticks {
				call Func07AF;
			};
		}
	}
}

void Func07B0 object#(0x7B0) () {
	var var0000;
	var var0001;

	if (gflags[CAUGHT_WITH_FRIGIDAZZI]) {
		var0000 = UI_create_new_object(0x034F);
		if (var0000) {
			var0000->set_item_frame(0x001F);
			var0001 = UI_update_last_created(get_object_position());
			if (var0001) {
				remove_item();
			}
		}
	}
}

extern var Func097E 0x97E (var var0000);
extern void Func0982 0x982 (var var0000, var var0001);

void Func07B1 object#(0x7B1) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;
	var var0008;
	var var0009;
	var var000A;
	var var000B;

	var0000 = AVATAR->get_object_position();
	var0001 = get_object_position();
	if ((event == EGG) && (Func097E(var0000[0x0003] - var0001[0x0003]) < 0x0003)) {
		var0002 = get_item_quality();
		if (var0002 == 0x0000) {
			UI_error_message("Error: Quality not set for usecode egg. (uegg_269)");
		}
		if ((var0002 == 0x0001) || (var0002 == 0x000B)) {
			if (var0002 == 0x0001) {
				var0003 = 0x0003;
			} else {
				var0003 = 0x0010;
			}
			var0004 = find_nearby(0x009F, var0003, MASK_NONE);
			var0005 = get_item_quantity(0x0000);
			if (var0004) {
				var0006 = script var0004 after var0005 ticks {
					nohalt;
					repeat 17 {
						next frame;
						sfx 53;
						call Func07B1;
					};
					frame 0;
				};
			}
		}
		if ((var0002 == 0x0002) || (var0002 == 0x000C)) {
			if (var0002 == 0x0002) {
				var0003 = 0x0003;
			} else {
				var0003 = 0x0010;
			}
			var0007 = find_nearby(0x00F2, var0003, MASK_NONE);
			var0005 = get_item_quantity(0x0000);
			if (var0007) {
				var0006 = script var0007 after var0005 ticks {
					nohalt;
					repeat 8 {
						next frame cycle;
						sfx 5;
						call Func07B1;
					};
					frame 0;
				};
			}
		}
		if ((var0002 == 0x0003) || (var0002 == 0x000D)) {
			if (var0002 == 0x0003) {
				var0003 = 0x0003;
			} else {
				var0003 = 0x0010;
			}
			var0007 = find_nearby(0x019A, var0003, MASK_NONE);
			var0005 = get_item_quantity(0x0000);
			if (var0007) {
				var0006 = script var0007 after var0005 ticks {
					nohalt;
					repeat 10 {
						next frame cycle;
						sfx 5;
						call Func07B1;
					};
					frame 0;
				};
			}
		}
	}
	if (event == SCRIPTED) {
		var0008 = find_nearby(SHAPE_ANY, 0x0003, MASK_NONE);
		for (var000B in var0008 with var0009 to var000A) {
			if (!((var000B->get_item_shape() == 0x00F2) || ((var000B->get_item_shape() == 0x009F) || (var000B->get_item_shape() == 0x019A)))) {
				if (var000B->is_npc()) {
					if (var000B->get_npc_prop(HEALTH) >= 6) {
						Func0982(var000B, 0x0005);
					}
				}
			}
		}
	}
}

void Func07B2 object#(0x7B2) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;
	var var0008;
	var var0009;
	var var000A;
	var var000B;

	if (event == EGG) {
		var0000 = get_item_quality();
		var0001 = get_object_position();
		var0002 = 0x0300;
		if ((var0000 == 0x0000) || (var0000 > 0x0006)) {
			UI_error_message("Quality 0 for egg 270");
		}
		if (var0000 == 0x0006) {
			var0000 = UI_die_roll(0x0001, 0x0005);
			var0003 = 0x0082;
		}
		if (var0000 == 0x0001) {
			var0002 = 0x0300;
			var0004 = false;
			var0005 = find_nearby(var0002, 0x0003, MASK_NONE);
			for (var0008 in var0005 with var0006 to var0007) {
				var0004 = true;
			}
			if (!var0004) {
				var0009 = UI_create_new_object(var0002);
				if (var0009) {
					var0009 = UI_update_last_created(var0001);
					UI_play_sound_effect(0x0077);
				}
			}
			abort;
		}
		if (var0000 == 0x0002) {
			var0002 = 0x0231;
			var0003 = 0x0028;
		}
		if (var0000 == 0x0003) {
			var0002 = 0x037F;
			var0003 = 0x0029;
		}
		if (var0000 == 0x0004) {
			var0002 = 0x0384;
			var0003 = 0x0068;
		}
		if (var0000 == 0x0005) {
			var0002 = 0x0386;
			var0003 = 0x0045;
		}
		var0004 = false;
		var0005 = find_nearby(var0002, 0x0003, MASK_EGG);
		for (var0008 in var0005 with var000A to var000B) {
			var0004 = true;
		}
		if (!var0004) {
			var0009 = UI_create_new_object(var0002);
			if (var0009) {
				var0009 = UI_update_last_created(var0001);
				UI_play_sound_effect(var0003);
			}
		}
	}
}

extern var Func0992 0x992 (var var0000, var var0001, var var0002, var var0003);
extern var Func08E7 0x8E7 (var var0000);

void Func07B3 object#(0x7B3) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;
	var var0008;
	var var0009;

	var0000 = HAWK->get_npc_id();
	var0001 = 0x0019;
	var0002 = find_nearby(0x03C1, 0x0064, MASK_EGG);
	if (var0000 == 0x0002) {
		if (var0002) {
			AVATAR->set_item_flag(DONT_MOVE);
			var0003 = Func0992(0x0001, "@We should find a seat.@", "@I should sit.@", true);
			var0003 = Func08E7(var0002);
			if (var0003) {
				gflags[BOATING_TO_MOONSHADE] = true;
				HAWK->set_npc_id(0x0003);
				var0000 = 0x0003;
				var0003 = script item after var0001 ticks {
					nohalt;
					call Func07B3;
				};
				abort;
			}
		}
	}
	if (var0000 == 0x0003) {
		var0003 = Func08E7(var0002);
		if (UI_on_barge()) {
			var0004 = UI_create_new_object(0x025F);
			if (var0004) {
				var0004->set_item_frame(0x0000);
				var0003 = var0004->set_item_quality(0x0000);
				var0004->clear_item_flag(TEMPORARY);
				var0003 = UI_update_last_created([0x0552, 0x08A7, 0x0002]);
			}
			var0004 = UI_create_new_object(0x025F);
			if (var0004) {
				var0004->clear_item_flag(TEMPORARY);
				var0003 = var0004->set_item_quality(0x0000);
				var0004->set_item_frame(0x0001);
				var0003 = UI_update_last_created([0x0564, 0x08A7, 0x0002]);
			}
			var0004 = UI_create_new_object(0x025F);
			if (var0004) {
				var0004->clear_item_flag(TEMPORARY);
				var0003 = var0004->set_item_quality(0x000F);
				var0004->set_item_frame(0x0002);
				var0003 = UI_update_last_created([0x056E, 0x08A4, 0x0001]);
			}
			var0005 = [0x0551, 0x08A7, 0x0002];
			var0006 = [HAWK, FLINDO, ALE, KANE];
			for (var0009 in var0006 with var0007 to var0008) {
				var0009->move_object(var0005);
				var0009->set_new_schedules([MIDNIGHT], [PATROL], [0x055B, 0x08A7]);
				var0009->set_schedule_type(PATROL);
			}
			ALE->clear_item_flag(CAN_FLY);
			HAWK->set_npc_id(0x0004);
			var0000 = 0x0004;
			var0003 = script item after var0001 ticks {
				nohalt;
				call Func07B3;
			};
			abort;
		}
		var0003 = script item after var0001 ticks {
			nohalt;
			call Func07B3;
		};
		abort;
	}
	if ((var0000 > 0x0003) && (var0000 < 0x0008)) {
		var0003 = script item after var0001 ticks {
			nohalt;
			call Func07B3;
		};
		abort;
	}
	if (var0000 == 0x0008) {
		if (UI_on_barge()) {
			halt_scheduled();
			var0003 = script HAWK {
				nohalt;
				call Func0428;
			};
		} else {
			var0003 = script item after var0001 ticks {
				nohalt;
				call Func07B3;
			};
		}
		abort;
	}
}

extern void Func090E 0x90E (var var0000, var var0001, var var0002, var var0003, var var0004, var var0005, var var0006, var var0007, var var0008);

void Func07D0 object#(0x7D0) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;
	var var0008;

	if (item in UI_get_party_list()) {
		abort;
	}
	if (event == SCRIPTED) {
		var0000 = direction_from(AVATAR);
		var0001 = script item {
			face var0000;
		};
		var0002 = [ 0,  2,  2,  2,  0, -2, -2, -2];
		var0003 = [-2, -2,  0,  2,  2,  2,  0, -2];
		var0004 = var0002 & var0002;
		var0005 = var0003 & var0003;
		var0000 = AVATAR->find_direction(item) + 0x0001;
		var0006 = 0x0001;
		var0007 = var0004[var0000];
		var0008 = var0005[var0000];
		while (var0006 < 0x0008) {
			var0007 &= var0004[(var0000 + var0006)];
			var0008 &= var0005[(var0000 + var0006)];
			var0006 += 0x0001;
		}
		Func090E(item, AVATAR, var0007, var0008, -1, Func07D0, item, PATH_SUCCESS, true);
	}
}

extern var Func098E 0x98E ();

void Func07D1 object#(0x7D1) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;

	var0000 = Func098E();
	for (var0003 in var0000 with var0001 to var0002) {
		if (var0003->npc_nearby()) {
			var0004 = var0003->direction_from(item);
			var0005 = script var0003 {
				nohalt;
				actor frame standing;
				face var0004;
			};
		}
	}
}

void Func07D2 object#(0x7D2) () {
	var var0000;
	var var0001;

	var0000 = direction_from(AVATAR);
	var0001 = script item {
		nohalt;
		actor frame standing;
		face var0000;
	};
}

extern var Func09A0 0x9A0 (var var0000, var var0001);
extern void Func097F 0x97F (var var0000, var var0001, var var0002);
extern void Func07D4 object#(0x7D4) ();

void Func07D3 object#(0x7D3) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;
	var var0008;
	var var0009;
	var var000A;
	var var000B;

	if ((event == SCRIPTED) && (gflags[TEMP_FLAG_1] == false)) {
		var0000 = Func09A0(0x0000, 0x0001);
		var0001 = var0000->set_item_quality(0x0028);
		var0001 = script var0000 after 10 ticks {
			nohalt;
			call Func0798;
		};
		UI_play_sound_effect(0x0027);
		UI_set_weather(SPARKLE);
		Func097F(AVATAR, "@Oh...@", 0x0002);
		Func097F(AVATAR, "@AAAAHHHH!!!!!@", 0x002D);
		Func097F(AVATAR, "@NOOOO!!!!!@", 0x003C);
		var0002 = AVATAR->find_nearby(0x00A0, 0x0005, MASK_NONE);
		for (var0005 in var0002 with var0003 to var0004) {
			var0006 = var0005->get_object_position();
			UI_sprite_effect(ANIMATION_TELEPORT, (var0006[0x0001] - 0x0002), (var0006[0x0002] - 0x0002), 0x0000, 0x0000, 0x0000, LOOP_ONCE);
		}
		UI_play_sound_effect(0x0077);
		var0001 = script AVATAR after 35 ticks {
			nohalt;
			sfx 39;
			music 49;
			actor frame standing;
			face south;
			wait 2;
			actor frame bowing;
			wait 2;
			actor frame kneeling;
			wait 6;
			actor frame standing;
			wait 2;
			actor frame cast_out;
			wait 2;
			actor frame cast_up;
			wait 8;
			call Func07D3;
			wait 4;
			wait 2;
			actor frame bowing;
			wait 2;
			actor frame standing;
			wait 2;
			actor frame cast_out;
			wait 2;
			actor frame cast_up;
			wait 8;
			call Func07D3;
			wait 4;
			wait 2;
			actor frame bowing;
			wait 2;
			actor frame kneeling;
			wait 2;
			call Func07D4;
		};
		gflags[TEMP_FLAG_1] = true;
		abort;
	}
	if ((event == SCRIPTED) && (gflags[TEMP_FLAG_1] == true)) {
		var0007 = find_nearby(0x00A0, 0x0014, MASK_NONE);
		var0008 = 0x0000;
		for (var000B in var0007 with var0009 to var000A) {
			var0006 = var000B->get_object_position();
			UI_sprite_effect(ANIMATION_LIGHTNING_BLUE + var0008, var0006[0x0001], var0006[0x0002], 0x0000, 0x0000, 0x0000, LOOP_ONCE);
			UI_sprite_effect(ANIMATION_SMALL_RING_BLAST, (var0006[0x0001] - 0x0002), (var0006[0x0002] - 0x0002), 0x0000, 0x0000, 0x0000, LOOP_ONCE);
			UI_play_sound_effect(0x002A);
			var0008 += 0x0001;
		}
	}
}

extern var Func09A0 0x9A0 (var var0000, var var0001);
extern void Func08B9 0x8B9 (var var0000, var var0001);
extern void Func07D5 object#(0x7D5) ();

void Func07D4 object#(0x7D4) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;

	if ((event == SCRIPTED) && (gflags[TEMP_FLAG_4] == false)) {
		UI_play_sound_effect(0x005B);
		var0000 = Func09A0(0x0000, 0x0001);
		UI_play_music(0x0040, var0000);
		var0001 = Func09A0(0x0000, 0x0002);
		var0002 = var0001->set_item_quality(0x0000);
		var0002 = var0000->set_item_quality(0x0001);
		var0002 = script var0000 after 2 ticks {
			nohalt;
			call Func07D4;
		};
		var0002 = script var0000 after 20 ticks {
			nohalt;
			call Func07D4;
		};
		var0002 = script var0000 after 40 ticks {
			nohalt;
			call Func07D4;
		};
		var0002 = script var0000 after 60 ticks {
			nohalt;
			call Func07D4;
		};
		var0002 = script var0000 after 80 ticks {
			nohalt;
			call Func07D4;
		};
		var0002 = script var0000 after 95 ticks {
			nohalt;
			call Func07D4;
		};
		var0002 = script var0000 after 110 ticks {
			nohalt;
			call Func07D4;
		};
		var0002 = script var0000 after 125 ticks {
			nohalt;
			call Func07D4;
		};
		var0002 = script var0000 after 140 ticks {
			nohalt;
			call Func07D4;
		};
		var0002 = script var0000 after 150 ticks {
			nohalt;
			call Func07D4;
		};
		var0002 = script var0000 after 158 ticks {
			nohalt;
			call Func07D4;
		};
		var0002 = script var0000 after 164 ticks {
			nohalt;
			call Func07D4;
		};
		var0002 = script var0000 after 170 ticks {
			nohalt;
			call Func07D4;
		};
		var0002 = script var0000 after 176 ticks {
			nohalt;
			call Func07D4;
		};
		var0002 = script var0000 after 180 ticks {
			nohalt;
			call Func07D4;
		};
		var0002 = script var0000 after 186 ticks {
			nohalt;
			call Func07D4;
		};
		var0002 = script var0000 after 192 ticks {
			nohalt;
			call Func07D4;
		};
		gflags[TEMP_FLAG_4] = true;
		gflags[TEMP_FLAG_1] = false;
		var0002 = script var0000 after 210 ticks {
			nohalt;
			call Func07D5;
		};
		abort;
	}
	if ((event == SCRIPTED) && (gflags[TEMP_FLAG_4] == true)) {
		var0003 = false;
		var0001 = Func09A0(0x0000, 0x0002);
		var0004 = var0001->get_item_quality();
		if (var0004 >= 0x0004) {
			var0003 = true;
		}
		var0002 = var0001->set_item_quality(var0004 + 0x0001);
		var0004 = get_item_quality();
		if (var0004 == 0x0001) {
			Func08B9(0x0001, var0003);
			var0002 = set_item_quality(0x0000);
		} else {
			Func08B9(0x0000, var0003);
			var0002 = set_item_quality(0x0001);
		}
	}
}

extern var Func09A0 0x9A0 (var var0000, var var0001);
extern var Func0992 0x992 (var var0000, var var0001, var var0002, var var0003);
extern void Func097F 0x97F (var var0000, var var0001, var var0002);

void Func07D5 object#(0x7D5) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;
	var var0008;
	var var0009;
	var var000A;
	var var000B;
	var var000C;
	var var000D;

	if ((event == SCRIPTED) && (gflags[TEMP_FLAG_1] == false)) {
		PARTY->move_object([0x0A87, 0x0B02, 0x0002]);
		var0000 = AVATAR->find_nearby(0x00A0, 0x000A, MASK_NONE);
		for (var0003 in var0000 with var0001 to var0002) {
			var0004 = var0003->get_item_frame();
			if (var0004 < 0x0005) {
				var0005 = var0003->get_object_position();
				UI_sprite_effect(ANIMATION_TELEPORT, (var0005[0x0001] - 0x0002), (var0005[0x0002] - 0x0002), 0x0000, 0x0000, 0x0000, LOOP_ONCE);
			}
		}
		UI_play_sound_effect(0x0077);
		var0006 = Func09A0(0x0000, 0x0001);
		var0007 = script var0006 after 25 ticks {
			nohalt;
			call Func07D5;
		};
		gflags[TEMP_FLAG_1] = true;
		abort;
	}
	if ((event == SCRIPTED) && (gflags[TEMP_FLAG_1] == true)) {
		var0008 = UI_get_party_list();
		for (var000B in var0008 with var0009 to var000A) {
			var000C = var000B->get_item_shape();
			var000B->set_polymorph(var000C);
		}
		var000D = Func0992(IOLO, "@By Lord British's throne...@", "@By Lord British's throne...@", true);
		if (var000D == AVATAR->get_npc_number()) {
			Func097F(var000D, "@...where am I?@", 0x000F);
		} else {
			Func097F(var000D, "@...where are we?@", 0x000F);
		}
		var000D->get_npc_number()->show_npc_face0(0x0000);
		if (var000D == AVATAR->get_npc_number()) {
			say("\"This is the architecture I have seen throughout Serpent Isle, but where are the signs of destruction? These are not ruins, they are new!\"");
		} else {
			say("\"Avatar! This is the architecture we have seen throughout Serpent Isle, but where are the signs of destruction? These are not ruins, they are new!\"");
		}
		UI_remove_npc_face0();
		UI_play_sound_effect(0x0082);
		AVATAR->clear_item_flag(DONT_MOVE);
		UI_set_weather(CLEAR_WEATHER);
		gflags[TEMP_FLAG_1] = false;
		gflags[TEMP_FLAG_2] = false;
		gflags[TEMP_FLAG_3] = false;
		gflags[TEMP_FLAG_4] = false;
	}
}

void Func07D6 object#(0x7D6) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;

	var0000 = UI_get_party_list2();
	var0001 = AVATAR->get_npc_object();
	for (var0004 in var0000 with var0002 to var0003) {
		if (var0004 != var0001) {
			var0004->remove_from_party();
			var0004->set_npc_id(0x001F);
			var0004->set_schedule_type(WAIT);
		}
	}
}

extern var Func098D 0x98D ();

void Func07D7 object#(0x7D7) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;

	var0000 = Func098D();
	for (var0003 in var0000 with var0001 to var0002) {
		var0004 = var0003->get_npc_id();
		if (var0004 == 0x001F) {
			var0003->add_to_party();
			var0003->set_npc_id(0x0000);
		}
	}
}

extern void Func09AC 0x9AC (var var0000, var var0001, var var0002, var var0003);
extern void Func068C object#(0x68C) ();

void Func07D8 object#(0x7D8) () {
	var var0000;
	var var0001;

	if (gflags[BANES_RELEASED]) {
		var0000 = AVATAR->find_nearby(0x019E, 0x000A, MASK_NONE);
		if (var0000) {
			if (var0000->get_item_frame() == 0x0010) {
				var0000->clear_item_flag(TEMPORARY);
			}
		}
		FEDABIBLIO->remove_npc();
		RENFRY->remove_npc();
		RENFRY->set_item_flag(DEAD);
		Func09AC(ANDRAL, 0x0366, 0x0AA9, WAIT);
		Func09AC(BRENDANN, 0x03B6, 0x0A54, WAIT);
		Func09AC(FLICKEN, 0x0323, 0x0ABC, WAIT);
		Func09AC(CALADIN, 0x03B4, 0x0A17, WAIT);
		Func09AC(CELLIA, 0x03D3, 0x0A09, WAIT);
		Func09AC(SHAZZANA, 0x03B8, 0x0A53, WAIT);
		Func09AC(KRAYG, 0x0404, 0x0A23, WAIT);
		Func09AC(LUTHER, 0x0412, 0x0A27, WAIT);
		Func09AC(LYDIA, 0x0415, 0x0A2B, WAIT);
		Func09AC(SHMED, 0x0433, 0x0A77, WAIT);
		Func09AC(STANDARR, 0x0402, 0x0A82, WAIT);
		Func09AC(TEMPLAR, 0x0407, 0x0A47, WAIT);
		Func09AC(MARSTEN, 0x0427, 0x09C7, WAIT);
		Func09AC(SPEKTOR, 0x0442, 0x09CA, WAIT);
		Func09AC(LUCILLA, 0x03F6, 0x0A45, WAIT);
		HARNNA->set_new_schedules([DAWN, NOON, AFTERNOON, NIGHT], [0x000B, LOITER, WANDER, SLEEP], [0x034A, 0x0AB4, 0x0409, 0x0A24, 0x03A9, 0x0A1B, 0x035B, 0x0A8A]);
		HARNNA->run_schedule();
		SUPER_GOBLIN->set_alignment(EVIL);
		SUPER_GOBLIN->move_object([0x040C, 0x0A26]);
		SUPER_GOBLIN->set_schedule_type(IN_COMBAT);
		Func09AC(BUCIA, 0x0963, 0x0815, WAIT);
		Func09AC(HAWK, 0x08C2, 0x0715, WAIT);
		Func09AC(GUSTACIO, 0x0978, 0x0819, WAIT);
		Func09AC(MELINO, 0x09B7, 0x07E5, WAIT);
		Func09AC(JULIA, 0x096B, 0x07C2, WAIT);
		Func09AC(ROCCO, 0x098B, 0x07A6, WAIT);
		Func09AC(TOPO, 0x0999, 0x07A2, WAIT);
		Func09AC(POTHOS, 0x0958, 0x0793, WAIT);
		Func09AC(MOSH, 0x0948, 0x0784, WAIT);
		Func09AC(FILBERCIO, 0x0972, 0x0744, WAIT);
		Func09AC(FRIGIDAZZI, 0x0977, 0x0743, WAIT);
		Func09AC(FLINDO, 0x0994, 0x0754, WAIT);
		Func09AC(KANE, 0x0902, 0x0746, WAIT);
		Func09AC(GOBLIN_MESSENGER, 0x08B6, 0x0736, WAIT);
		Func09AC(EDRIN, 0x08C2, 0x0705, WAIT);
		Func09AC(COLUMNA, 0x0953, 0x07B5, WAIT);
		TORRISSIO->set_new_schedules([MIDNIGHT, MORNING, NOON, AFTERNOON, EVENING], [SLEEP, EAT, MAJOR_SIT, WANDER, EAT], [0x08F8, 0x071C, 0x090A, 0x0718, 0x08F7, 0x0737, 0x0915, 0x0722, 0x090A, 0x0718]);
		DUCIO->set_new_schedules([MIDNIGHT, DAWN, MORNING], [SLEEP, EAT, TEND_SHOP], [0x0914, 0x06E7, 0x0919, 0x06E7, 0x093C, 0x0782]);
		FRELI->set_new_schedules([MIDNIGHT, DAWN, AFTERNOON, EVENING], [SLEEP, WANDER, WANDER, WANDER], [0x0937, 0x07C5, 0x08E3, 0x0743, 0x0983, 0x07A6, 0x09A3, 0x0823]);
		ANDRIO->set_new_schedules([MIDNIGHT, DAWN, AFTERNOON, EVENING], [SLEEP, WANDER, WANDER, WANDER], [0x0937, 0x07C5, 0x08E3, 0x0743, 0x0983, 0x07A6, 0x09A3, 0x0823]);
		TORRISSIO->run_schedule();
		DUCIO->run_schedule();
		FRELI->run_schedule();
		ANDRIO->run_schedule();
		if (STEFANO->get_item_flag(DEAD)) {
			STEFANO->resurrect_npc();
			gflags[THOXA_REVIVED_STEFANO] = true;
		}
		Func09AC(ALYSSAND, 0x03E6, 0x0756, WAIT);
		Func09AC(DELIN, 0x0409, 0x06EE, WAIT);
		Func09AC(GARTH, 0x0409, 0x0737, WAIT);
		Func09AC(JOTH, 0x03C8, 0x070D, WAIT);
		Func09AC(VOLDIN, 0x0447, 0x0722, WAIT);
		Func09AC(JENDON, 0x0415, 0x0718, WAIT);
		Func09AC(JORVIN, 0x03F2, 0x06D8, WAIT);
		Func09AC(KYLISTA, 0x0406, 0x0795, WAIT);
		Func09AC(DELPHYNIA, 0x0460, 0x06F6, WAIT);
		Func09AC(LEON, 0x03B5, 0x0697, WAIT);
		Func09AC(KALEN, 0x0407, 0x066E, WAIT);
		Func09AC(OLON, 0x0467, 0x06C9, WAIT);
		Func09AC(SCOTS, 0x0407, 0x0780, WAIT);
		Func09AC(ZULITH, 0x03F7, 0x0796, WAIT);
		RUGGS->set_new_schedules([DAWN, MORNING, NOON, AFTERNOON, EVENING, NIGHT], [LOITER, WANDER, WANDER, LOITER, EAT_AT_INN, SLEEP], [0x0406, 0x0777, 0x0409, 0x074E, 0x0406, 0x0718, 0x0466, 0x06ED, 0x03AF, 0x06E0, 0x03D6, 0x06C6]);
		RUGGS->run_schedule();
		var0001 = LEON->add_cont_items(0x0001, 0x031D, 0x000A, 0x0000, 0x0000);
		var0001 = ZULITH->add_cont_items(0x0001, 0x031D, 0x0007, 0x0000, 0x0000);
		YELINDA->set_polymorph(0x0294);
		YELINDA->move_object([0x0619, 0x05B9]);
		Func09AC(YELINDA, 0x0619, 0x05B9, WANDER);
		if (OLON->get_item_flag(MET)) {
			var0001 = OLON->add_cont_items(0x0001, 0x0268, 0x0005, 0x0009, 0x0000);
			var0001 = OLON->add_cont_items(0x0001, 0x0268, 0x0005, 0x0009, 0x0000);
			var0001 = OLON->add_cont_items(0x0001, 0x0282, 0x007C, 0x0004, 0x0000);
			var0001 = OLON->add_cont_items(0x0001, 0x0282, 0x007D, 0x0013, 0x0000);
		}
		Func09AC(ENSORCIO, 0x0521, 0x08B8, WAIT);
		Func09AC(ARGUS, 0x04E8, 0x08B9, WAIT);
		Func09AC(BYRIN, 0x0517, 0x0893, WAIT);
		Func09AC(DEVRA, 0x04F8, 0x08A6, WAIT);
		WILFRED->set_new_schedules([MIDNIGHT, MORNING, NOON, AFTERNOON, NIGHT], [SLEEP, EAT, TALK, LOITER, EAT], [0x0516, 0x08F7, 0x04F7, 0x08CC, 0x050D, 0x08B6, 0x0516, 0x08A2, 0x04F7, 0x08CC]);
		WILFRED->run_schedule();
		Func09AC(BAIYANDA, 0x0436, 0x036B, WAIT);
		Func09AC(BWUNDAI, 0x0440, 0x0348, WAIT);
		Func09AC(MWAERNO, 0x0479, 0x0354, WAIT);
		Func09AC(GILWOYAI, 0x0404, 0x039B, WAIT);
		Func09AC(KAPYUNDI, 0x0438, 0x0353, WAIT);
		0x0000->Func068C();
	}
}

extern var Func09A0 0x9A0 (var var0000, var var0001);
extern void Func07DA object#(0x7DA) ();

void Func07D9 object#(0x7D9) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;

	if (!gflags[TEST_SAVED_MAN_ON_FIRE]) {
		var0000 = AVATAR->find_nearby(0x0331, 0x0014, MASK_NONE);
		if (var0000) {
			var0001 = var0000->get_object_position();
			var0002 = UI_create_new_object(0x0121);
			if (var0002) {
				var0002->set_item_flag(TEMPORARY);
				var0003 = UI_update_last_created(var0001);
				if (var0003) {
					var0003 = script var0002 after 1 ticks {
						nohalt;
						say "@Aaahhh!@";
					};
				}
			}
			MAN_ON_FIRE->set_npc_id(0x0005);
			MAN_ON_FIRE->remove_npc();
		}
		var0004 = Func09A0(0x0000, 0x0001);
		var0003 = script var0004 after 15 ticks {
			call Func07DA;
		};
		var0005 = AVATAR->find_nearby(0x037F, 0x0014, MASK_NONE);
		for (var0002 in var0005 with var0006 to var0007) {
			var0002->set_item_flag(TEMPORARY);
		}
	} else {
		var0004 = Func09A0(0x0000, 0x0001);
		var0003 = script var0004 after 7 ticks {
			nohalt;
			call Func07DA;
		};
	}
}

void Func07DA object#(0x7DA) () {
	var var0000;

	gflags[TEMP_FLAG_1] = true;
	var0000 = script AVATAR {
		nohalt;
		actor frame standing;
		continue;
		face FACE_NORTH;
	};
	UI_fade_palette(0x000C, 0x0001, 0x0000);
	AVATAR->move_object([0x0A25, 0x0379, 0x0000]);
}

void Func07DB object#(0x7DB) () {
	var var0000;
	var var0001;
	var var0002;

	var0000 = CALADIN->get_object_position();
	if (gflags[TEMP_FLAG_1]) {
		UI_lightning();
		CALADIN->obj_sprite_effect(ANIMATION_LIGHTNING, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0001);
		UI_play_sound_effect(0x0074);
		gflags[TEMP_FLAG_1] = false;
		gflags[TEMP_FLAG_2] = true;
		var0001 = script AVATAR {
			call Func07DB;
		};
		abort;
	}
	if (gflags[TEMP_FLAG_2]) {
		UI_lightning();
		CALADIN->obj_sprite_effect(ANIMATION_LIGHTNING, 0x0000, 0x0000, 0x0000, 0x0000, 0x0003, 0x0001);
		UI_play_sound_effect(0x0074);
		gflags[TEMP_FLAG_2] = false;
		gflags[TEMP_FLAG_3] = true;
		var0001 = script AVATAR {
			call Func07DB;
		};
		abort;
	}
	if (gflags[TEMP_FLAG_3]) {
		UI_lightning();
		CALADIN->obj_sprite_effect(ANIMATION_LIGHTNING, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0001);
		CALADIN->obj_sprite_effect(ANIMATION_LIGHTNING, 0x0000, 0x0000, 0x0000, 0x0000, 0x0001, 0x0001);
		CALADIN->obj_sprite_effect(ANIMATION_LIGHTNING, 0x0000, 0x0000, 0x0000, 0x0000, 0x0002, 0x0001);
		UI_play_sound_effect(0x0074);
		gflags[TEMP_FLAG_3] = false;
		gflags[TEMP_FLAG_4] = true;
		var0001 = script AVATAR {
			call Func07DB;
		};
		abort;
	}
	if (gflags[TEMP_FLAG_4]) {
		UI_lightning();
		gflags[TEMP_FLAG_4] = false;
		var0000 = CALADIN->get_object_position();
		CALADIN->remove_npc();
		var0002 = UI_create_new_object2(0x012E, var0000);
		var0002->set_npc_id(0x000F);
		var0002->set_item_flag(SI_TOURNAMENT);
		var0002->set_schedule_type(WANDER);
	}
}

extern var Func09A0 0x9A0 (var var0000, var var0001);
extern var Func0992 0x992 (var var0000, var var0001, var var0002, var var0003);
extern void Func097F 0x97F (var var0000, var var0001, var var0002);

void Func07DC object#(0x7DC) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;
	var var0008;
	var var0009;
	var var000A;
	var var000B;
	var var000C;
	var var000D;
	var var000E;
	var var000F;

	if (item == Func09A0(0x0001, 0x0003)) {
		var0000 = UI_get_party_list();
		AVATAR->set_item_flag(DONT_MOVE);
		AVATAR->clear_item_flag(FREEZE);
		UI_end_conversation();
		UI_play_sound_effect(0x0082);
		for (var0003 in var0000 with var0001 to var0002) {
			var0003->obj_sprite_effect(ANIMATION_TELEPORT, 0x0000, 0x0000, 0x0000, 0x0000, 0x000F, LOOP_ONCE2);
		}
		abort;
	}
	if (gflags[FILBERCIO_BANQUET_WILL_HAPPEN]) {
		UI_fade_palette(0x000C, 0x0001, 0x0000);
		var0004 = UI_get_party_list();
		var0005 = [0x090F, 0x0912, 0x0918, 0x0915, 0x0915, 0x0918, 0x091B, 0x091B];
		var0006 = [0x071A, 0x0714, 0x0714, 0x071A, 0x0714, 0x071A, 0x0714, 0x071A];
		var0007 = [0x0000, 0x0004, 0x0004, 0x0000, 0x0004, 0x0000, 0x0004, 0x0000];
		var0008 = [0x0910, 0x071C, 0x0000];
		var0009 = 0x0001;
		for (var0003 in var0004 with var000A to var000B) {
			var0003->move_object([var0005[var0009], var0006[var0009], 0x0000]);
			UI_sprite_effect(ANIMATION_TELEPORT, var0005[var0009], var0006[var0009], 0x0000, 0x0000, 0x0000, LOOP_ONCE);
			if (var0003->get_object_position() != AVATAR->get_object_position()) {
				var0003->set_npc_id(0x000B);
				var0003->remove_from_party();
			}
			var000C = script var0003 {
				face var0007[var0009];
				continue;
				actor frame sitting;
			};
			var0003->set_schedule_type(WAIT);
			var0009 += 0x0001;
		}
		FILBERCIO->move_object([0x090A, 0x0717, 0x0000]);
		FRIGIDAZZI->move_object([0x090C, 0x071A, 0x0000]);
		ROTOLUNCIA->move_object([0x090C, 0x0714, 0x0000]);
		GUSTACIO->move_object([0x090F, 0x0714, 0x0000]);
		POTHOS->move_object([0x0916, 0x072E, 0x0000]);
		var0004 = [FILBERCIO, FRIGIDAZZI, ROTOLUNCIA, GUSTACIO, POTHOS];
		var0007 = [0x0002, 0x0000, 0x0004, 0x0004, 0x0000];
		var0009 = 0x0001;
		for (var0003 in var0004 with var000D to var000E) {
			var0003->set_schedule_type(WAIT);
			var000C = script var0003 {
				face var0007[var0009];
				continue;
				actor frame sitting;
			};
			var0009 += 0x0001;
		}
		var000C = script FILBERCIO after 15 ticks {
			nohalt;
			call Func0636;
			actor frame standing;
			actor frame raise_2h;
			call Func032E;
		};
		abort;
	}
	if (gflags[GOT_FAWN_TRIAL_SUMMONS]) {
		if (gflags[FAWN_TRIAL_DONE] || (gflags[FAWN_TRIAL_RECESS] || AVATAR->get_item_flag(DONT_MOVE))) {
			abort;
		}
		var000C = script Func09A0(0x0001, 0x0004) after UI_get_random(0x02EE) ticks {
			call Func07DC;
		};
		var000F = Func0992(0x0001, 0x0000, 0x0000, false);
		var000F->clear_item_say();
		if (var000F == AVATAR) {
			Func097F(AVATAR, "@About time for the trial...@", 0x0000);
			abort;
		}
		Func097F(var000F, "@Do not forget the trial!@", 0x0000);
		abort;
	}
}

void Func07DD object#(0x7DD) () {
	var var0000;

	var0000 = get_item_shape();
}

extern var Func0994 0x994 ();
extern var Func09A0 0x9A0 (var var0000, var var0001);
extern var Func084E 0x84E (var var0000, var var0001);
extern var Func084D 0x84D (var var0000, var var0001);

void Func07DE object#(0x7DE) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;
	var var0008;

	if ((get_item_shape() == 0x02D1) || (get_item_shape() == 0x03DD)) {
		UI_play_sound_effect(0x0066);
		UI_fade_palette(0x000C, 0x0001, 0x0000);
	} else {
		if (Func0994() == 0x0002) {
			var0000 = [0x0974, 0x0470, 0x0000];
			var0001 = [KARNAX, THOXA, MIGGIM, BRACCUS, DRAXTA, SILENT1, SILENT2, SILENT3];
			if (XENKA->get_item_flag(MET)) {
				var0001 &= XENKA;
			}
			var0002 = UI_get_random(0x0008);
			var0003 = Func09A0(0x0005, 0x0001);
			var0004 = var0003->set_item_quality(var0002);
			var0004 = script var0003 after 30 ticks {
				nohalt;
				call Func00FA;
			};
			for (var0007 in var0001 with var0005 to var0006) {
				var0007->move_object(Func084E(var0007, var0002));
				var0007->set_new_schedules(MIDNIGHT, Func084D(var0007, var0002), Func084E(var0007, var0002));
				var0007->run_schedule();
			}
		}
		var0008 = script AVATAR {
			nohalt;
			actor frame kneeling;
			wait 2;
			actor frame bowing;
			wait 2;
			actor frame standing;
			wait 2;
		};
		UI_fade_palette(0x000C, 0x0001, 0x0001);
	}
}

extern void Func09AA 0x9AA ();
extern void Func08C9 0x8C9 ();
extern void Func08CA 0x8CA ();
extern void Func08CB 0x8CB ();
extern void Func08CC 0x8CC ();
extern void Func08CD 0x8CD ();
extern void Func08CE 0x8CE ();
extern void Func08CF 0x8CF (var var0000);
extern void Func08D0 0x8D0 ();
extern void Func08D1 0x8D1 ();
extern void Func08D2 0x8D2 ();
extern void Func08D3 0x8D3 ();
extern void Func08D4 0x8D4 ();
extern var Func08D5 0x8D5 ();
extern var Func08D6 0x8D6 ();
extern void Func08D7 0x8D7 ();
extern void Func08D8 0x8D8 ();

void Func07DF object#(0x7DF) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;
	var var0008;
	var var0009;
	var var000A;
	var var000B;
	var var000C;
	var var000D;
	var var000E;
	var var000F;
	var var0010;

	if (event == SI_PATH_FAILURE) {
		Func09AA();
		event = PATH_SUCCESS;
		if (get_item_shape() == 0x0103) {
			var0000 = [0x0A09, 0x055A, 0x0000];
			move_object(var0000);
		}
	}
	do {
		if (event == EGG) {
			if (!get_item_quality()) {
				Func08C9();
			} else {
				var0001 = AVATAR->get_object_position();
				if (var0001[0x0003] >= 0x0006) {
					abort;
				}
				if (get_item_quality() == 0x0001) {
					Func08CA();
				}
				if (get_item_quality() == 0x0002) {
					Func08CB();
				}
				if (get_item_quality() == 0x0003) {
					Func08CC();
				}
				if (get_item_quality() == 0x0004) {
					Func08CD();
				}
				if (get_item_quality() == 0x0005) {
					Func08CE();
				}
				if (get_item_quality() == 0x0006) {
					Func08CF(0x0000);
				}
				if (get_item_quality() == 0x0007) {
					Func08CF(0x0001);
				}
				if (get_item_quality() == 0x0008) {
					Func08D0();
				}
				if (get_item_quality() == 0x0009) {
					Func08D1();
					var0000 = [0x0A18, 0x0546, 0x0000];
					break;
				}
				if (get_item_quality() == 0x000A) {
					Func08D2();
				}
				if (get_item_quality() == 0x000B) {
					Func08D3();
				}
				if (get_item_quality() == 0x000C) {
					Func08D4();
				}
				if (get_item_quality() == 0x000D) {
					Func08CA();
				}
				if (get_item_quality() == 0x000E) {
					if (Func08D5()) {
						var0000 = [0x09F6, 0x0569, 0x0000];
						break;
					}
				}
				if (get_item_quality() == 0x000F) {
					if (Func08D6()) {
						var0000 = [0x0A08, 0x053E, 0x0000];
						break;
					}
				}
				if (get_item_quality() == 0x0010) {
					Func08D7();
				}
				if (get_item_quality() == 0x0011) {
					Func08CA();
				}
				if (get_item_quality() == 0x0012) {
					Func08D8();
				}
				var0000 = false;
				if (get_item_quality() == 0x00C8) {
					var0002 = find_nearest(0x00E9, 0x0003);
					if (var0002->get_item_frame() == 0x0001) {
						var0000 = AVATAR->get_object_position();
						var0003 = UI_create_new_object2(0x017D, var0000);
						var0004 = var0003->set_last_created();
						var0003->set_polymorph(0x017D);
						var0003->clear_item_flag(SI_TOURNAMENT);
						var0000 = [0x0976, 0x0567, 0x0000];
					}
				}
				if (get_item_quality() == 0x00C9) {
					var0000 = [0x08DE, 0x05CF, 0x0000];
				}
				if (get_item_quality() == 0x00CA) {
					var0002 = find_nearest(0x00E9, 0x0003);
					if (var0002->get_item_frame() == 0x0001) {
						var0000 = [0x088E, 0x057F, 0x0000];
					}
				}
				if (get_item_quality() == 0x00CB) {
					Func08CC();
					abort;
				}
				if (get_item_quality() == 0x00CC) {
					var0000 = [0x0926, 0x0564, 0x0001];
				}
				if (get_item_quality() == 0x00CD) {
					var0000 = [0x0988, 0x05F7, 0x0001];
				}
				if (get_item_quality() == 0x00CE) {
					var0000 = [0x0A18, 0x0606, 0x0000];
				}
				if (get_item_quality() == 0x00CF) {
					var0000 = [0x0937, 0x0732, 0x0001];
				}
				if (get_item_quality() == 0x00D0) {
					var0000 = [0x086B, 0x05FE, 0x0001];
				}
				if (get_item_quality() == 0x00D1) {
					if (var0001[0x0003] > 0x0001) {
						var0000 = [0x0A2F, 0x0698, 0x0000];
					}
				}
				if (get_item_quality() == 0x00D2) {
					var0000 = [0x0A36, 0x0647, 0x0000];
				}
				if (get_item_quality() == 0x00D3) {
					var0000 = [0x0A28, 0x06C7, 0x0001];
				}
				if (get_item_quality() == 0x00D4) {
					var0005 = UI_get_party_list();
					for (var0008 in var0005 with var0006 to var0007) {
						var0004 = script var0008 {
							wait 3;
						};
						var0000 = [0x0BB8, 0x02CA, 0x0001];
						var0009 = var0008->get_object_position();
						var000A = get_object_position();
						if (var0009[0x0001] > var000A[0x0001]) {
							var0000[0x0001] += var0009[0x0001] - var000A[0x0001];
						} else {
							var0000[0x0001] -= var000A[0x0001] - var0009[0x0001];
						}
						if (var0009[0x0002] > var000A[0x0002]) {
							var0000[0x0002] += var0009[0x0002] - var000A[0x0002];
						} else {
							var0000[0x0002] -= var000A[0x0002] - var0009[0x0002];
						}
						var0000[0x0003] = var0009[0x0003];
						var0008->move_object(var0000);
					}
					abort;
				}
				if (get_item_quality() == 0x00D5) {
					var0000 = [0x0A15, 0x0557, 0x0000];
				}
				if (var0000) {
					if ((get_item_quality() == 0x00CF) && ((gflags[AVATAR_ESCAPED_FREEDOM] == false) && STEFANO->get_item_flag(IN_PARTY))) {
						PARTY->move_object(var0000);
						UI_sprite_effect(ANIMATION_TELEPORT, (var0000[0x0001] - 0x0001), (var0000[0x0002] - 0x0001), 0x0000, 0x0000, 0x0000, LOOP_ONCE);
						UI_play_sound_effect(0x0053);
						gflags[AVATAR_ESCAPED_FREEDOM] = true;
						STEFANO->clear_item_flag(SI_TOURNAMENT);
						gflags[TEMP_FLAG_1] = true;
						var000B = script AVATAR after 15 ticks {
							nohalt;
							call Func04A8;
						};
					} else {
						PARTY->move_object(var0000);
						UI_sprite_effect(ANIMATION_TELEPORT, (var0000[0x0001] - 0x0001), (var0000[0x0002] - 0x0001), 0x0000, 0x0000, 0x0000, LOOP_ONCE);
						UI_play_sound_effect(0x0082);
						abort;
					}
				}
			}
		}
		if (event == SCRIPTED) {
			if ((get_item_shape() == 0x037F) || (get_item_shape() == 0x00E0)) {
				Func08CC();
			}
			if (get_item_shape() == 0x0331) {
				Func08CD();
			}
			if (get_item_shape() == 0x017D) {
				Func08CD();
			}
			if ((get_item_shape() == 0x02D1) || (get_item_shape() == 0x03DD)) {
				Func08CD();
			}
			if (get_item_shape() == 0x0103) {
				Func08CA();
			}
			if (get_item_shape() == 0x0190) {
				Func08CA();
			}
			if (get_item_shape() == 0x0313) {
				Func08CA();
			}
			if (get_item_shape() == 0x0210) {
				Func08CA();
			}
			if (get_item_shape() == 0x0375) {
				Func08D4();
			}
			if (get_item_shape() == 0x0179) {
				Func08D4();
			}
			if (get_item_shape() == 0x032B) {
				Func08D7();
			}
		}
		if (event == PATH_SUCCESS) {
			if (get_item_shape() == SABRINA->get_item_shape()) {
				Func08D4();
			}
			if (get_item_shape() == 0x0103) {
				Func08CA();
			}
			if (get_item_shape() == 0x0190) {
				Func08CA();
			}
		}
		abort;
	} while (false);
	if (var0000) {
		var000C = var0000 & [QUALITY_ANY, 0x0000];
		var000D = var000C->find_nearby(0x0113, 0x0005, MASK_EGG);
		for (var0010 in var000D with var000E to var000F) {
			var0010->remove_item();
		}
		remove_item();
	}
}

void Func07E0 object#(0x7E0) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;

	var0000 = find_nearby(0x0113, 0x0008, MASK_EGG);
	var0001 = 0x0000;
	for (var0004 in var0000 with var0002 to var0003) {
		if (var0004->get_item_frame() == 0x0006) {
			var0001 = var0004->get_item_quality();
		}
	}
	if (var0001) {
		var0005 = false;
		if (var0001 <= 0x0012) {
			if (var0001 == 0x0001) {
				var0005 = [0x068F, 0x010F, 0x0006];
				AVATAR->set_item_flag(FREEZE);
			}
			if (var0001 == 0x0002) {
				var0005 = [0x0597, 0x03BF, 0x0001];
				AVATAR->set_item_flag(FREEZE);
			}
			if (var0001 == 0x0003) {
				var0005 = [0x04CB, 0x038B, 0x0001];
				AVATAR->set_item_flag(FREEZE);
			}
			if (var0001 == 0x0004) {
				var0005 = [0x0850, 0x0298, 0x0003];
				AVATAR->set_item_flag(FREEZE);
			}
			if (var0001 == 0x0005) {
				AVATAR->set_item_flag(FREEZE);
				var0005 = [0x06F8, 0x0288, 0x0001];
			}
			if (var0001 == 0x0006) {
				AVATAR->clear_item_flag(FREEZE);
				var0005 = [0x0AB7, 0x0477, 0x0001];
			}
			if (var0001 == 0x0007) {
				AVATAR->set_item_flag(FREEZE);
				var0005 = [0x00E3, 0x0348, 0x0001];
			}
			if (var0001 == 0x0008) {
				AVATAR->clear_item_flag(FREEZE);
				var0005 = [0x0437, 0x0617, 0x0001];
			}
			if (var0001 == 0x0009) {
				AVATAR->clear_item_flag(FREEZE);
				var0005 = [0x06B0, 0x0498, 0x0001];
			}
			if (var0001 == 0x000A) {
				AVATAR->clear_item_flag(FREEZE);
				var0005 = [0x018F, 0x060F, 0x0001];
			}
			if (var0001 == 0x000B) {
				AVATAR->clear_item_flag(FREEZE);
				var0005 = [0x0B56, 0x0664, 0x0001];
			}
			if (var0001 == 0x000C) {
				AVATAR->clear_item_flag(FREEZE);
				var0005 = [0x07F5, 0x0568, 0x0001];
			}
			if (var0001 == 0x000D) {
				AVATAR->clear_item_flag(FREEZE);
				var0005 = [0x0998, 0x0827, 0x0001];
			}
			if (var0001 == 0x000E) {
				AVATAR->set_item_flag(FREEZE);
				var0005 = [0x0928, 0x0137, 0x0001];
			}
			if (var0001 == 0x000F) {
				AVATAR->set_item_flag(FREEZE);
				var0005 = [0x0627, 0x01F5, 0x0001];
			}
			if (var0001 == 0x0010) {
				AVATAR->clear_item_flag(FREEZE);
				var0005 = [0x02CF, 0x0A31, 0x0001];
			}
			if (var0001 == 0x0011) {
				AVATAR->clear_item_flag(FREEZE);
				var0005 = [0x0A4F, 0x03BB, 0x0001];
			}
			if (var0001 == 0x0012) {
				AVATAR->set_item_flag(FREEZE);
				var0005 = [0x0632, 0x0349, 0x0001];
			}
		} else {
			AVATAR->set_item_flag(FREEZE);
			var0005 = [0x0AF8, 0x01F8, 0x0001];
		}
		PARTY->move_object(var0005);
		gflags[AVATAR_IS_DEAD] = false;
		var0006 = script item {
			wait 4;
			call Func07DE;
		};
	}
}

extern void Func0982 0x982 (var var0000, var var0001);
extern void Func097F 0x97F (var var0000, var var0001, var var0002);
extern void Func09AD 0x9AD (var var0000);
extern void Func094F 0x94F (var var0000, var var0001);

void Func07E1 object#(0x7E1) () {
	var var0000;
	var var0001;
	var var0002;

	if (event == WEAPON) {
		var0000 = UI_click_on_item();
		if (!var0000->is_npc()) {
			abort;
		}
		UI_play_sound_effect(0x005B);
		var0001 = var0000->get_npc_number();
		if (var0001 == DRAYGAN) {
			gflags[DRAYGAN_IS_IMMORTAL] = true;
			DRAYGAN->set_item_flag(SI_TOURNAMENT);
			DRAYGAN->set_alignment(CHAOTIC);
			DRAYGAN->set_item_frame(0x000D);
			DRAYGAN->set_schedule_type(WAIT);
			var0002 = DRAYGAN->get_npc_prop(HEALTH);
			Func0982(DRAYGAN, var0002 - 0x0001);
			Func097F(DRAYGAN, "@zzzzzz....@", 0x0002);
			if (HURD->npc_nearby()) {
				Func09AD(HURD);
				Func097F(HURD, "@I obey, Master!@", 0x0002);
			}
			if (IVOR->npc_nearby()) {
				Func09AD(IVOR);
				Func097F(IVOR, "@Hold on, Master!@", 0x0007);
			}
			if (BERYL->get_item_flag(DEAD)) {
				abort;
			}
			if (!find_nearby(0x02E6, ON_SCREEN, MASK_ALL_UNSEEN)) {
				var0002 = BERYL->approach_avatar(0x008C, 0x0028);
				var0002 = script var0000 {
					actor frame standing;
					actor frame bowing;
					actor frame kneeling;
					actor frame sleeping;
				};
			}
			BERYL->clear_item_flag(ASLEEP);
			BERYL->set_schedule_type(IN_COMBAT);
			BERYL->set_opponent(DRAYGAN);
			BERYL->set_oppressor(DRAYGAN);
			BERYL->set_alignment(GOOD);
			BERYL->clear_item_say();
			Func094F(BERYL, ["Die, Draygan!", "I shall kill thee!", "Whoreson!"]);
		} else {
			var0000->set_item_flag(ASLEEP);
			var0000->set_schedule_type(SLEEP);
		}
	}
}

extern var Func0906 0x906 (var var0000);
extern void Func0178 shape#(0x178) ();
extern void Func010E shape#(0x10E) ();
extern void Func01B1 shape#(0x1B1) ();
extern void Func01B0 shape#(0x1B0) ();
extern void Func0907 0x907 (var var0000, var var0001);
extern void Func097F 0x97F (var var0000, var var0001, var var0002);
extern void Func09AC 0x9AC (var var0000, var var0001, var var0002, var var0003);
extern var Func09A1 0x9A1 (var var0000);
extern void Func09AD 0x9AD (var var0000);
extern void Func09A2 0x9A2 (var var0000, var var0001);

void Func07E2 object#(0x7E2) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;
	var var0008;
	var var0009;
	var var000A;
	var var000B;

	var0000 = get_item_quality();
	if (var0000 == 0x0000) {
		UI_error_message("egg quality not set");
	}
	if ((var0000 == 0x0001) || (var0000 == 0x0048)) {
		var0001 = AVATAR->find_nearby(0x010E, 0x000A, MASK_ALL_UNSEEN);
		var0001 &= AVATAR->find_nearby(0x0178, 0x000A, MASK_ALL_UNSEEN);
		var0001 &= AVATAR->find_nearby(0x01B1, 0x000A, MASK_ALL_UNSEEN);
		var0001 &= AVATAR->find_nearby(0x01B0, 0x000A, MASK_ALL_UNSEEN);
		for (var0004 in var0001 with var0002 to var0003) {
			if (var0004->get_item_quality() == 0x0048) {
				if (Func0906(var0004) == 0x0001) {
					var0005 = script var0004 after 2 ticks {
						call Func07E2;
					};
					if (var0004->get_item_shape() == 0x0178) {
						var0004->Func0178();
					}
					if (var0004->get_item_shape() == 0x010E) {
						var0004->Func010E();
					}
					if (var0004->get_item_shape() == 0x01B1) {
						var0004->Func01B1();
					}
					if (var0004->get_item_shape() == 0x01B0) {
						var0004->Func01B0();
					}
				}
			}
		}
		if (event == SCRIPTED) {
			Func0907(item, 0x0002);
		}
	}
	if (var0000 == 0x0002) {
		gflags[SLAIN_WOLF] = true;
		var0001 = find_nearby(0x0178, 0x0014, MASK_NONE);
		for (var0004 in var0001 with var0006 to var0007) {
			if (var0004->get_item_quality() == 0x003D) {
				var0004->set_item_frame(0x000C);
				UI_play_sound_effect(0x0004);
			}
		}
		var0001 = find_nearby(0x010E, 0x0014, MASK_NONE);
		for (var0004 in var0001 with var0008 to var0009) {
			if (var0004->get_item_quality() == 0x0048) {
				var0004->set_item_frame(0x000C);
				UI_play_sound_effect(0x0004);
			}
		}
		Func097F(AVATAR, "@I made it!@", 0x0002);
		Func097F(SHMED, "@Thou didst survive?@", 0x000A);
		SHMED->set_schedule_type(TALK);
		Func09AC(SHMED, 0x0337, 0x08C8, TALK);
	}
	if (var0000 == 0x0003) {
		var000A = Func09A1(0x0212);
		if (var000A) {
			var000B = get_object_position();
			Func09AD(var000A);
			var0005 = var000A->set_last_created();
			if (var0005) {
				var0005 = UI_update_last_created(var000B);
				if (!var0005) {
					Func09A2(var000A, item);
				}
			}
		}
	}
	if (var0000 == 0x0004) {
		UI_play_sound_effect(0x0077);
		var000B = get_object_position();
		UI_sprite_effect(ANIMATION_TELEPORT, var000B[0x0001], var000B[0x0002], 0x0000, 0x0000, 0x0000, LOOP_ONCE);
		PIBB->move_object(var000B);
		PIBB->set_item_flag(SI_TOURNAMENT);
		PIBB->set_item_flag(INVISIBLE);
		PIBB->set_npc_id(0x000E);
		Func09AD(PIBB);
		Func097F(PIBB, "@Accept thy death, Avatar!@", 0x0002);
		var0005 = script PIBB after 6 ticks {
			nohalt;
			call Func00E4;
		};
	}
}

void Func07E3 object#(0x7E3) () {
	if (is_npc()) {
		UI_fade_palette(0x000C, 0x0001, 0x0001);
	} else {
		UI_fade_palette(0x000C, 0x0001, 0x0000);
	}
}

extern var Func09A0 0x9A0 (var var0000, var var0001);
extern void Func07E5 object#(0x7E5) ();
extern void Func07E6 object#(0x7E6) ();

void Func07E4 object#(0x7E4) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;

	var0000 = Func09A0(0x0002, 0x0001);
	var0001 = var0000->get_item_quality();
	var0002 = AVATAR->find_nearby(0x03C1, 0x0064, MASK_EGG);
	if (var0001 == 0x0000) {
		UI_play_music(0x0010, var0000);
		HAWK->set_schedule_type(WANDER);
		KANE->set_schedule_type(WANDER);
		ALE->set_schedule_type(WANDER);
		FLINDO->set_schedule_type(WANDER);
		var0002->set_barge_dir(EAST);
		var0003 = new script {
			finish;
			repeat 8 {
				step east;
				nop;
			};
			call Func07E4;
		};
		var0004 = var0002->run_script(var0003);
		var0004 = var0000->set_item_quality(0x0001);
	}
	if (var0001 == 0x0001) {
		var0002->set_barge_dir(SOUTH);
		var0003 = new script {
			finish;
			repeat 17 {
				step south;
				nop;
			};
			call Func07E4;
		};
		var0004 = var0002->run_script(var0003);
		var0004 = var0000->set_item_quality(0x0002);
	}
	if (var0001 == 0x0002) {
		var0002->set_barge_dir(EAST);
		var0003 = new script {
			finish;
			repeat 9 {
				step east;
				nop;
			};
			call Func07E4;
		};
		var0004 = var0002->run_script(var0003);
		var0004 = var0000->set_item_quality(0x0003);
	}
	if (var0001 == 0x0003) {
		var0002->set_barge_dir(SOUTH);
		var0003 = new script {
			finish;
			repeat 9 {
				step south;
				nop;
			};
			call Func07E4;
		};
		var0004 = var0002->run_script(var0003);
		var0004 = var0000->set_item_quality(0x0004);
	}
	if (var0001 == 0x0004) {
		var0002->set_barge_dir(EAST);
		var0003 = new script {
			finish;
			repeat 56 {
				step east;
				nop;
			};
			call Func07E4;
		};
		var0004 = var0002->run_script(var0003);
		var0004 = var0000->set_item_quality(0x0005);
	}
	if (var0001 == 0x0005) {
		var0002->set_barge_dir(SOUTH);
		var0003 = new script {
			finish;
			repeat 6 {
				step south;
				nop;
			};
			call Func07E4;
		};
		var0004 = var0002->run_script(var0003);
		var0004 = var0000->set_item_quality(0x0006);
	}
	if (var0001 == 0x0006) {
		var0002->set_barge_dir(EAST);
		HAWK->show_npc_face0(0x0000);
		say("\"Reef the sails an' hang on! There be one of those damned storms a bearin' down on us! Heavens help us!\"");
		UI_remove_npc_face0();
		UI_play_music(0x0016, var0000);
		var0002->set_barge_dir(EAST);
		var0003 = new script {
			finish;
			repeat 90 {
				step east;
				call Func07E5;
				nop;
			};
			call Func07E6;
		};
		UI_set_weather(RAIN);
		var0004 = var0002->run_script(var0003);
		var0004 = var0000->set_item_quality(0x0000);
	}
}

void Func07E5 object#(0x7E5) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;
	var var0008;
	var var0009;
	var var000A;
	var var000B;
	var var000C;
	var var000D;

	var0000 = UI_die_roll(0x0001, 0x0003);
	if (var0000 == 0x0001) {
		var0001 = [0x0000, 0x0003, 0x000C, 0x0028, 0x002B];
		var0002 = UI_die_roll(0x0001, UI_get_array_size(var0001));
		var0003 = var0001[var0002];
		var0004 = 0x0004 * UI_die_roll(-15, 15);
		var0005 = 0x0004 * UI_die_roll(-15, 15);
		AVATAR->obj_sprite_effect(var0003, var0004, var0005, 0x0000, 0x0001, 0x0000, LOOP_ONCE);
	}
	if (var0000 == 0x0002) {
		var0006 = [0x0009, 0x000F, 0x0030, 0x004C, 0x006D];
		var0007 = UI_die_roll(0x0001, UI_get_array_size(var0006));
		UI_play_sound_effect(var0007);
	}
	if (var0000 == 0x0003) {
		var0008 = ["@Oh!@", "@Whee!@", "@Ouch!@", "@Whoa!@"];
		var0009 = UI_die_roll(0x0001, UI_get_array_size(var0008));
		var000A = var0008[var0009];
		var000B = [KANE, ALE, HAWK, FLINDO];
		var000C = UI_die_roll(0x0001, UI_get_array_size(var000B));
		var000D = var000B[var000C];
		var000D->item_say(var000A);
	}
}

extern void Func0917 0x917 (var var0000, var var0001);
extern var Func0910 0x910 (var var0000);
extern void Func097F 0x97F (var var0000, var var0001, var var0002);

void Func07E6 object#(0x7E6) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;
	var var0008;
	var var0009;
	var var000A;
	var var000B;
	var var000C;
	var var000D;
	var var000E;
	var var000F;
	var var0010;
	var var0011;
	var var0012;
	var var0013;

	AVATAR->clear_item_flag(DONT_MOVE);
	var0000 = find_nearby(0x00FB, 0x0019, MASK_NONE);
	Func0917(var0000, 0x0000);
	var0001 = find_nearby(0x030D, 0x0019, MASK_NONE);
	if (!Func0910(var0001)) {
		UI_error_message("Cannot lower Plank's constant");
	}
	HAWK->show_npc_face0(0x0000);
	var0002 = UI_is_pc_female();
	if (var0002 == true) {
		var0003 = "lass";
	} else {
		var0003 = "lad";
	}
	say("\"Here ye be, ",
		var0003,
		"...\" ~\"I never thought we'd make it, but Moonshade lies over yon.\"");
	say("\"I'll not even attempt to make the Arabella seaworthy until these blasted storms are over!\"");
	say("\"If ye be wantin' Captain Hawk, I'll be at the bottom of a mug at the Blue Boar Inn.\"");
	UI_remove_npc_face0();
	UI_set_weather(CLEAR_WEATHER);
	AVATAR->clear_item_flag(UNKNOWN_FLAG_17);
	HAWK->clear_item_flag(DONT_MOVE);
	ALE->set_item_flag(CAN_FLY);
	AUTO_MESSENGER->set_item_flag(SI_TOURNAMENT);
	var0004 = [HAWK, FLINDO, ALE, KANE];
	var0005 = [0x08AC, 0x0718];
	var0006 = [0x07BA, 0x08D3];
	var0007 = [0x08C8, 0x0716];
	HAWK->set_new_schedules([MIDNIGHT, MORNING, NOON], [SLEEP, TEND_SHOP, EAT_AT_INN], [var0005, var0006, var0007]);
	var0008 = [0x0935, 0x06E3];
	var0009 = [0x08B9, 0x070B];
	var000A = [0x08CB, 0x074A];
	var000B = [0x087E, 0x0747];
	var000C = [0x0942, 0x077E];
	FLINDO->set_new_schedules([MIDNIGHT, MORNING, AFTERNOON, EVENING, NIGHT], [SLEEP, EAT_AT_INN, TEND_SHOP, TEND_SHOP, TEND_SHOP], [var0008, var0009, var000A, var000B, var000C]);
	var000D = [0x08BD, 0x0713];
	var000E = [0x0893, 0x0718];
	ALE->set_new_schedules([DAWN, MORNING, NIGHT], [WANDER, HOUND, STANDTHERE], [var000D, var000D, var000E]);
	var000F = [0x08B9, 0x0710];
	var0010 = [0x0895, 0x0719];
	KANE->set_new_schedules([DAWN, MORNING, NIGHT], [EAT_AT_INN, TEND_SHOP, SLEEP], [var000F, var000F, var0010]);
	for (var0013 in var0004 with var0011 to var0012) {
		var0013->run_schedule();
	}
	gflags[BOATING_TO_MOONSHADE] = false;
	gflags[HAWK_IN_MOONSHADE] = true;
	Func097F(HAWK, "@Never again!@", 0x023E);
}

extern void Func08BB 0x8BB ();
extern void Func08BC 0x8BC ();
extern void Func08BD 0x8BD ();
extern void Func08BF 0x8BF ();

void Func07E7 object#(0x7E7) () {
	var var0000;

	if (event == EGG) {
		var0000 = get_item_quality();
		if (!var0000) {
			UI_error_message("Invalid Egg!");
		}
		if (var0000 == 0x0001) {
			Func08BB();
		}
		if (var0000 == 0x0002) {
			Func08BB();
		}
		if (var0000 == 0x0003) {
			Func08BC();
		}
		if (var0000 == 0x0004) {
			Func08BD();
		}
		if (var0000 == 0x0005) {
			Func08BC();
		}
		if (var0000 == 0x0006) {
			Func08BC();
		}
		if (var0000 == 0x0007) {
			Func08BF();
		}
		if (var0000 == 0x0008) {
			Func08BF();
		}
		if (var0000 == 0x0009) {
			Func08BF();
		}
		if (var0000 == 0x000A) {
			Func08BF();
		}
		if (var0000 == 0x000B) {
			Func08BF();
		}
	}
	if (event == SCRIPTED) {
		if (get_item_shape() == 0x0210) {
			Func08BB();
		}
		if (get_item_shape() == 0x00F3) {
			Func08BC();
		}
		if (get_item_shape() == 0x0106) {
			Func08BF();
		}
		if (get_item_shape() == 0x017C) {
			Func08BF();
		}
	}
}

extern void Func08BA 0x8BA ();

void Func07E8 object#(0x7E8) () {
	var var0000;
	var var0001;

	var0000 = get_container();
	if (!(var0000 == 0x0000)) {
		var0001 = var0000->get_npc_number();
		if (var0001 == DRAYGAN) {
			Func08BA();
		}
	}
}

extern var Func0979 0x979 (var var0000);
extern void Func07EA object#(0x7EA) ();

void Func07E9 object#(0x7E9) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;
	var var0008;
	var var0009;

	var0000 = 0x0000;
	if (event == SCRIPTED) {
		var0001 = UI_click_on_item();
		var0002 = var0001->get_item_shape();
		var0003 = false;
		var0004 = AVATAR->get_object_position();
		if ((var0002 == 0x02D1) || (var0002 == 0x03DD)) {
			var0005 = var0004[0x0003] + 0x0001;
			var0005 /= 0x0002;
			AVATAR->obj_sprite_effect(ANIMATION_POOF, var0005, var0005, 0x0000, 0x0000, 0x0000, LOOP_ONCE);
			UI_play_sound_effect(0x0021);
			return;
		}
		if (var0001->is_npc()) {
			var0001->halt_scheduled();
			var0003 = var0001->get_object_position();
		} else if (var0001 == 0x0000) {
			var0003[0x0001] = var0001[0x0002];
			var0003[0x0002] = var0001[0x0003];
			var0003[0x0003] = var0001[0x0004];
		} else {
			var0003 = var0001->get_object_position();
		}
		var0006 = UI_create_new_object(0x025F);
		if (var0006) {
			var0006->set_item_frame(0x001F);
			var0006->set_item_flag(TEMPORARY);
			var0007 = var0006->set_item_quality(0x0096);
			var0007 = UI_update_last_created(var0003);
			var0008 = Func0979(var0006);
		}
		var0007 = script AVATAR->get_npc_object() {
			face var0008;
		};
		if (var0003[0x0001] < var0004[0x0001]) {
			var0004[0x0001] -= 0x0002;
		}
		if (var0003[0x0001] > var0004[0x0001]) {
			var0004[0x0001] += 0x0002;
		}
		if (var0003[0x0002] < var0004[0x0002]) {
			var0004[0x0002] -= 0x0002;
		}
		if (var0003[0x0001] > var0004[0x0001]) {
			var0004[0x0002] += 0x0002;
		}
		var0009 = UI_create_new_object(0x037F);
		if (var0009) {
			var0009->set_item_frame(0x0000);
			var0009->set_item_flag(TEMPORARY);
			if (UI_is_not_blocked(var0004, 0x0284, 0x0000)) {
				var0007 = UI_update_last_created(var0004);
			} else {
				var0004[0x0003] += 0x0001;
				if (UI_is_not_blocked(var0004, 0x0284, 0x0000)) {
					var0007 = UI_update_last_created(var0004);
				} else {
					var0004[0x0003] -= 0x0002;
					if (UI_is_not_blocked(var0004, 0x02D1, 0x0000)) {
						var0007 = UI_update_last_created(var0004);
					} else {
						var0005 = var0004[0x0003] + 0x0001;
						var0005 /= 0x0002;
						AVATAR->obj_sprite_effect(ANIMATION_POOF, var0005, var0005, 0x0000, 0x0000, 0x0000, LOOP_ONCE);
						UI_play_sound_effect(0x0021);
						var0006->remove_item();
						return;
					}
				}
			}
			var0007 = script var0009 after 9 ticks {
				nohalt;
				remove;
			};
			var0007 = script var0009 {
				nohalt;
				call Func07EA;
			};
		}
	}
}

extern var Func0831 0x831 (var var0000, var var0001);
extern void Func07EB object#(0x7EB) ();

void Func07EA object#(0x7EA) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;
	var var0008;
	var var0009;
	var var000A;

	if (event == SCRIPTED) {
		var0000 = false;
		var0001 = false;
		var0002 = AVATAR->get_object_position() & (0x0096 & 0x001F);
		var0003 = var0002->find_nearby(0x025F, 0x0050, MASK_EGG);
		for (var0006 in var0003 with var0004 to var0005) {
			if ((var0006->get_item_quality() == 0x0096) && (var0006->get_item_frame() == 0x001F)) {
				var0000 = var0006;
				var0001 = var0006->get_object_position();
			}
		}
		if (!var0000) {
			return;
		}
		var0007 = get_object_position();
		var0008 = Func0831(var0007, var0001);
		if (!var0008) {
			var0009 = script var0000 {
				call Func07EB;
				remove;
			};
			return;
		}
		var0008 = Func0831(var0007, var0001);
		if (!UI_is_not_blocked(var0008, 0x02D1, 0x0000)) {
			var0008 = Func0831(var0007, var0001);
		}
		if (!UI_is_not_blocked(var0008, 0x02D1, 0x0000)) {
			var0008 = Func0831(var0007, var0001);
		}
		if (!UI_is_not_blocked(var0008, 0x02D1, 0x0000)) {
			var0008 = Func0831(var0007, var0001);
		}
		if (!UI_is_not_blocked(var0008, 0x02D1, 0x0000)) {
			var0009 = script var0000 {
				call Func07EB;
				remove;
			};
			return;
		}
		var000A = UI_create_new_object(0x037F);
		if (var000A) {
			var000A->set_item_frame(0x0000);
			var000A->set_item_flag(TEMPORARY);
			if (UI_update_last_created(var0008)) {
				var0009 = script var000A after 9 ticks {
					nohalt;
					remove;
				};
				var0009 = script var000A {
					nohalt;
					call Func07EA;
				};
			}
		}
	}
}

void Func07EB object#(0x7EB) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;
	var var0008;
	var var0009;

	var0000 = get_object_position();
	var0001 = var0000[0x0003] + 0x0001;
	var0001 /= 0x0002;
	UI_sprite_effect(ANIMATION_BIG_BLAST, (var0000[0x0001] + var0001), (var0000[0x0002] + var0001), 0x0000, 0x0000, 0x0000, LOOP_ONCE);
	UI_play_sound_effect(0x002A);
	var0002 = UI_get_party_list2();
	var0003 = find_nearby(SHAPE_ANY, 0x0005, MASK_NPC2);
	for (var0006 in var0003 with var0004 to var0005) {
		if (!(var0006 in var0002)) {
			var0007 = UI_die_roll(0x0005, 0x000A);
			var0008 = UI_apply_damage(var0006->get_npc_prop(STRENGTH), var0007, FIRE_DAMAGE, var0006);
			var0007 = UI_die_roll(0x0005, 0x000A);
			var0008 = UI_apply_damage(var0006->get_npc_prop(STRENGTH), var0007, MAGIC_DAMAGE, var0006);
			var0009 = var0006->get_alignment();
			if ((var0009 == EVIL) || (var0009 == CHAOTIC)) {
				var0006->set_schedule_type(IN_COMBAT);
			}
			if (var0009 == NEUTRAL) {
				var0006->set_alignment(EVIL);
				var0006->set_schedule_type(IN_COMBAT);
			}
		}
	}
}

extern void Func097F 0x97F (var var0000, var var0001, var var0002);
extern void Func094F 0x94F (var var0000, var var0001);
extern void Func07ED object#(0x7ED) ();
extern void Func07EE object#(0x7EE) ();

void Func07EC object#(0x7EC) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;
	var var0008;
	var var0009;
	var var000A;

	if ((event == SCRIPTED) && ((gflags[TEMP_FLAG_1] == false) && (gflags[TEMP_FLAG_2] == false))) {
		var0000 = KARNAX->get_object_position();
		UI_sprite_effect(ANIMATION_PURPLE_BUBBLES, (var0000[0x0001] - 0x0002), (var0000[0x0002] - 0x0002), 0x0000, 0x0000, 0x0000, LOOP_ONCE);
		UI_play_sound_effect(0x0082);
		var0001 = THOXA->get_npc_object()->find_nearby(0x0113, 0x0002, MASK_EGG);
		var0002 = KARNAX->set_to_attack(var0001, 0x0118);
		var0003 = script KARNAX {
			nohalt;
			actor frame cast_up;
			actor frame strike_1h;
			continue;
			attack;
		};
		var0004 = THOXA->get_distance(KARNAX);
		var0005 = var0004 / 0x0002;
		while (var0005 < 0x002D) {
			var0003 = script THOXA after var0005 ticks {
				nohalt;
				call Func075A;
			};
			var0003 = script THOXA after (var0005 + 0x0001) ticks {
				nohalt;
				call Func075A;
			};
			var0003 = script KARNAX after var0005 ticks {
				nohalt;
				actor frame cast_up;
				actor frame cast_out;
				wait 1;
				actor frame standing;
			};
			var0005 += 0x000A;
		}
		Func097F(THOXA, "@Damn thee!@", 0x000A);
		Func097F(THOXA, "@Oh...@", 0x0011);
		var0003 = script THOXA after 1 ticks {
			nohalt;
			wait 6;
			actor frame bowing;
			wait 6;
			actor frame kneeling;
			wait 10;
			actor frame sleeping;
			wait 20;
			actor frame kneeling;
			wait 5;
			actor frame bowing;
			wait 3;
			actor frame standing;
			wait 2;
			face FACE_EAST;
			wait 2;
			call Func07EC;
		};
		gflags[TEMP_FLAG_1] = true;
		abort;
	}
	if ((event == SCRIPTED) && (gflags[TEMP_FLAG_1] == true)) {
		UI_init_conversation();
		THOXA->show_npc_face0(0x0000);
		say("\"I'm not so easily defeated, friend monk...\"");
		UI_end_conversation();
		var0003 = "@In Frio Grav!@" & ("@Mas Frio!@" & "@Take that!@");
		Func094F(THOXA, var0003);
		var0003 = "" & "@Ah!@";
		Func094F(KARNAX, var0003);
		var0003 = UI_create_new_object(0x0390);
		if (var0003) {
			var0003->set_item_flag(TEMPORARY);
			var0003 = UI_update_last_created(THOXA->get_object_position());
		}
		var0006 = THOXA->get_npc_object()->find_nearby(0x025F, 0x0019, MASK_EGG);
		var0007 = 0x0001;
		for (var000A in var0006 with var0008 to var0009) {
			var0003 = script var000A after var0007 ticks {
				nohalt;
				call Func07EE;
			};
			var0007 += 0x0003;
			var0004 = THOXA->get_distance(var000A);
			var0003 = script var000A after (var0007 + (var0004 / 0x0002)) ticks {
				call Func07EC;
			};
		}
		var0003 = script KARNAX after ((var0007 + (var0004 / 0x0002)) + 0x0002) ticks {
			nohalt;
			call Func07ED;
		};
		gflags[TEMP_FLAG_1] = false;
		gflags[TEMP_FLAG_2] = true;
		abort;
	}
	if ((event == SCRIPTED) && (gflags[TEMP_FLAG_2] == true)) {
		UI_play_sound_effect(0x0029);
		obj_sprite_effect(ANIMATION_MEDIUM_RING_BLAST, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, LOOP_ONCE);
		abort;
	}
}

extern void Func097F 0x97F (var var0000, var var0001, var var0002);
extern void Func090E 0x90E (var var0000, var var0001, var var0002, var var0003, var var0004, var var0005, var var0006, var var0007, var var0008);
extern void Func07EE object#(0x7EE) ();

void Func07ED object#(0x7ED) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;

	if ((event == SCRIPTED) && (gflags[TEMP_FLAG_2] == true)) {
		UI_set_weather(CLEAR_WEATHER);
		gflags[TEMP_FLAG_2] = false;
		UI_init_conversation();
		KARNAX->show_npc_face0(0x0000);
		say("\"Hero, listen to me before the fires consume me! Beware of thy friends -- they shall only bring destruction upon thee!\"");
		UI_end_conversation();
		Func097F(KARNAX, "@Vile witch!@", 0x0007);
		var0000 = get_object_position();
		UI_sprite_effect(ANIMATION_SMALL_RING_BLAST, (var0000[0x0001] - 0x0002), (var0000[0x0002] - 0x0002), 0x0000, 0x0000, 0x0000, LOOP_ONCE);
		UI_play_sound_effect(0x002A);
		var0001 = script KARNAX after 6 ticks {
			nohalt;
			actor frame bowing;
			wait 2;
			actor frame sleeping;
			wait 12;
			say "@Thou wilt pay!@";
			actor frame bowing;
			actor frame standing;
			face FACE_EAST;
			call Func07ED;
		};
		var0002 = 0x0000;
		while (var0002 < 0x0008) {
			var0003 = UI_die_roll(-4, 4);
			var0004 = UI_die_roll(-4, 4);
			var0005 = UI_create_new_object(0x0121);
			if (var0005) {
				var0006 = UI_die_roll(0x0000, 0x0005);
				var0005->set_item_frame(var0006);
				var0005->clear_item_flag(TEMPORARY);
				var0001 = UI_update_last_created([(var0000[0x0001] + var0003), (var0000[0x0002] + var0004), 0x0000]);
			}
			var0002 += 0x0001;
		}
		gflags[TEMP_FLAG_2] = false;
		gflags[TEMP_FLAG_3] = true;
		abort;
	}
	if ((event == SCRIPTED) && (gflags[TEMP_FLAG_3] == true)) {
		var0005 = UI_create_new_object(0x025F);
		if (var0005) {
			var0005->clear_item_flag(TEMPORARY);
			var0000 = THOXA->get_object_position();
			var0000[0x0001] += 0x0008;
			var0000[0x0002] += 0x0003;
			var0001 = UI_update_last_created(var0000);
			var0007 = THOXA->get_distance(var0005);
			// Note: these generate si_path_run_usecode calls to Func0000, which
			// does not exist. Maybe they are just for making the NPCs move to
			// where var0005 is?
			Func090E(THOXA, var0005, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, PROXIMITY, true);
			Func090E(KARNAX, var0005, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, PROXIMITY, true);
			var0001 = script var0005 after (var0007 - 0x0002) ticks {
				call Func07ED;
			};
			gflags[TEMP_FLAG_3] = false;
			gflags[TEMP_FLAG_4] = true;
			abort;
		}
	}
	if ((event == SCRIPTED) && (gflags[TEMP_FLAG_4] == true)) {
		var0000 = get_object_position();
		UI_sprite_effect(ANIMATION_MEDIUM_RING_BLAST, var0000[0x0001], var0000[0x0002], 0x0000, 0x0000, 0x0000, LOOP_ONCE);
		UI_play_sound_effect(0x002A);
		KARNAX->set_schedule_type(WAIT);
		var0001 = script KARNAX {
			say "@Aaahhh!@";
			actor frame bowing;
			wait 2;
			actor frame kneeling;
			wait 2;
			actor frame sleeping;
		};
		var0001 = script THOXA {
			wait 8;
			face FACE_WEST;
			// Bug: the next line is interpreted as a 'step FACE_WEST, 0x53',
			// (step west and up by 0x53 tiles), which fails.
			// This likely should have been just 'step west'.
			raw((byte)0x53); step west; raw((byte)0x53);
			step west;
			// Bug: the next line is interpreted as a 'step FACE_WEST, 0x53',
			// (step west and up by 0x53 tiles), which fails.
			// This likely should have been just 'step west'.
			raw((byte)0x53); step west; raw((byte)0x53);
			step west;
			// Bug: the next line is interpreted as a 'step FACE_WEST, 0x53',
			// (step west and up by 0x53 tiles), which fails.
			// This likely should have been just 'step west'.
			raw((byte)0x53); step west; raw((byte)0x53);
			step west;
			// Bug: the next line is interpreted as a 'step FACE_WEST, 0x53',
			// (step west and up by 0x53 tiles), which fails.
			// This likely should have been just 'step west'.
			raw((byte)0x53); step west; raw((byte)0x53);
			step west;
			actor frame bowing;
			actor frame kneeling;
			actor frame standing;
			call Func07EE;
		};
		abort;
	}
}

extern void Func09AC 0x9AC (var var0000, var var0001, var var0002, var var0003);
extern void Func097F 0x97F (var var0000, var var0001, var var0002);
extern var Func09A0 0x9A0 (var var0000, var var0001);

void Func07EE object#(0x7EE) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;
	var var0008;
	var var0009;

	if ((event == SCRIPTED) && (item == SHAMINO->get_npc_object())) {
		Func09AC(SHAMINO, -1, 0, TALK);
		abort;
	}
	if ((event == SCRIPTED) && (gflags[TEMP_FLAG_2] == true)) {
		var0000 = THOXA->set_to_attack(item, 0x0118);
		var0001 = script THOXA {
			nohalt;
			actor frame reach_1h;
			actor frame reach_2h;
			continue;
			attack;
			actor frame standing;
		};
		abort;
	}
	if ((event == SCRIPTED) && (gflags[TEMP_FLAG_4] == true)) {
		THOXA->set_schedule_type(WAIT);
		var0002 = KARNAX->get_object_position();
		UI_play_sound_effect(0x0051);
		UI_sprite_effect(ANIMATION_TELEPORT2, var0002[0x0001], var0002[0x0002], 0x0000, 0x0000, 0x0000, LOOP_ONCE);
		KARNAX->remove_npc();
		var0001 = UI_create_new_object(0x0390);
		if (var0001) {
			var0001->set_item_flag(TEMPORARY);
			var0001 = UI_update_last_created(KARNAX->get_object_position());
		}
		Func097F(THOXA, "@Goodbye...@", 0x0002);
		Func097F(THOXA, "@Hero...@", 0x0016);
		var0001 = script THOXA after 25 ticks {
			nohalt;
			actor frame bowing;
			wait 2;
			actor frame kneeling;
			wait 2;
			call Func07EE;
		};
		gflags[TEMP_FLAG_4] = false;
		gflags[TEMP_FLAG_1] = true;
		abort;
	}
	if ((event == SCRIPTED) && (gflags[TEMP_FLAG_1] == true)) {
		UI_init_conversation();
		THOXA->show_npc_face0(0x0000);
		AVATAR->clear_item_flag(DONT_MOVE);
		say("\"Karnax is defeated, for now... I am weak, and must leave...\"");
		if (gflags[THOXA_SPOKE_COMPANIONS]) {
			say("\"Remember to seek out the Three Companions -- they must be at thy side!\"");
		} else {
			say("\"The writings of Xenka speak of the Three which shall travel with thee. Without them, thou canst not succeed.\"");
			say("\"Thou must find them, Hero! And then never let them leave thy side...\"");
			gflags[THOXA_SPOKE_COMPANIONS] = true;
		}
		if (gflags[THOXA_SPOKE_POWER]) {
			say("\"And watch for the Ring, Necklace and Earring -- for by these, the Power shall guide thee.\"");
		} else {
			say("\"Thou must also seek three artifacts -- a Ring, a Necklace, and an Earring.\"");
			say("\"Through these ancient items, a Power shall communicate with thee. More than this, I know not.\"");
		}
		say("\"Seek out thy black sword with the caged demon that thou didst bring with thee from the other land. Thou must have it to complete thy quest.\"");
		UI_remove_npc_face0();
		var0003 = THOXA->get_object_position();
		UI_sprite_effect(ANIMATION_TELEPORT, var0003[0x0001], var0003[0x0002], 0x0000, 0x0000, 0x0000, LOOP_ONCE);
		var0004 = Func09A0(0x0007, 0x0001);
		if (var0004) {
			UI_play_music(0x0031, var0004);
		}
		UI_play_sound_effect(0x0051);
		THOXA->remove_npc();
		var0001 = UI_create_new_object(0x0390);
		if (var0001) {
			var0001->set_item_flag(TEMPORARY);
			var0001 = UI_update_last_created(THOXA->get_object_position());
		}
		var0005 = AVATAR->find_nearby(0x037F, 0x000A, MASK_NONE);
		for (var0008 in var0005 with var0006 to var0007) {
			var0009 = UI_die_roll(0x0001, 0x000A);
			if (var0009 < 0x000A) {
				var0008->remove_item();
			}
		}
		gflags[TEMP_FLAG_1] = false;
		gflags[TEMP_FLAG_3] = true;
		var0001 = script AVATAR after 50 ticks {
			nohalt;
			call Func07EE;
		};
		abort;
	}
	if ((event == SCRIPTED) && (gflags[TEMP_FLAG_3] == true)) {
		SHAMINO->set_schedule_type(TALK);
		var0001 = script SHAMINO after 2 ticks {
			nohalt;
			say "@The Avatar!@";
		};
		var0001 = SHAMINO->add_cont_items(0x0002, 0x0253, 0x0000, 0x0000, 0x0000);
		gflags[TEMP_FLAG_3] = false;
		var0001 = script SHAMINO {
			nohalt;
			call Func07EE;
		};
		abort;
	}
}

extern var Func0992 0x992 (var var0000, var var0001, var var0002, var var0003);
extern void Func07F0 object#(0x7F0) ();

void Func07EF object#(0x7EF) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;

	var0000 = get_object_position();
	var0000[0x0001] -= var0000[0x0003] / 0x0002;
	var0000[0x0002] -= var0000[0x0003] / 0x0002;
	UI_sprite_effect(ANIMATION_LIGHTNING_YELLOW, var0000[0x0001], var0000[0x0002], 0x0000, 0x0000, 0x0000, LOOP_ONCE);
	UI_sprite_effect(ANIMATION_POOF, var0000[0x0001], var0000[0x0002], 0x0000, 0x0000, 0x0000, LOOP_ONCE);
	AVATAR->obj_sprite_effect(ANIMATION_LIGHTNING_YELLOW, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, LOOP_ONCE);
	UI_play_sound_effect(0x0074);
	UI_lightning();
	AVATAR->set_schedule_type(WAIT);
	var0001 = Func0992(0x0001, "@Oh, no!@", 0x0000, true);
	AVATAR->set_item_flag(DONT_MOVE);
	var0002 = script AVATAR {
		nohalt;
		say "@Arggh!@";
		actor frame bowing;
		actor frame kneeling;
		actor frame sleeping;
	};
	var0003 = script AVATAR after 10 ticks {
		nohalt;
		call Func07F0;
	};
}

extern var Func09A0 0x9A0 (var var0000, var var0001);
extern void Func094F 0x94F (var var0000, var var0001);

void Func07F0 object#(0x7F0) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;

	UI_set_weather(CLEAR_WEATHER);
	var0000 = UI_get_party_list2();
	var0001 = 0x0935;
	for (var0004 in var0000 with var0002 to var0003) {
		if (var0004 != AVATAR->get_npc_object()) {
			var0004->remove_from_party();
			var0004->set_new_schedules(MIDNIGHT, WANDER, [var0001, 0x05E2]);
			var0004->move_object([var0001, 0x05E2]);
			var0004->run_schedule();
			var0001 += 0x0002;
		}
	}
	UI_fade_palette(0x000C, 0x0001, 0x0000);
	AVATAR->move_object([0x091D, 0x063C]);
	AVATAR->set_schedule_type(FOLLOW_AVATAR);
	AVATAR->clear_item_flag(DONT_MOVE);
	var0005 = script Func09A0(0x0005, 0x0001) after 30 ticks {
		nohalt;
		call Func0636;
	};
	var0005 = "" & ("@Oh...@" & ("@Mine head doth ache!@" & "@Where am I?@"));
	Func094F(AVATAR, var0005);
}

extern var Func0992 0x992 (var var0000, var var0001, var var0002, var var0003);

void Func07F1 object#(0x7F1) () {
	var var0000;

	var0000 = Func0992(0x0001, "@Blue lightning? Gustacio said nothing about blue lightning!@", "@The lightning was blue. Blue?@", false);
}

extern var Func0992 0x992 (var var0000, var var0001, var var0002, var var0003);
extern void Func08E3 0x8E3 ();

void Func07F2 object#(0x7F2) () {
	var var0000;
	var var0001;
	var var0002;

	var0000 = Func0992(0x0001, 0x0000, 0x0000, false);
	if (gflags[FINISHED_LIGHTNING_EXPERIMENT]) {
		var0000 = Func0992(0x0001, "@The lightning was red!@", "@The lightning was red.@", true);
	} else if (gflags[SEEN_GREEN_LIGHTNING] && (gflags[SEEN_YELLOW_LIGHTNING] && (!gflags[SEEN_RED_LIGHTNING]))) {
		Func08E3();
	} else if (var0000 != AVATAR) {
		var0000->show_npc_face0(0x0000);
		if (gflags[SEEN_RED_LIGHTNING]) {
			var0001 = ["@That one came too close!@", "@It destroyed that object!@", "@Where did it go?@"];
			var0002 = var0001[UI_get_random(UI_get_array_size(var0001))];
			say(var0002,
				"");
		} else {
			say("\"I saw that! A red bolt of energy, it was!\"");
		}
	} else {
		AVATAR->item_say("@Red lightning!@");
	}
	gflags[SEEN_RED_LIGHTNING] = true;
}

extern var Func0992 0x992 (var var0000, var var0001, var var0002, var var0003);
extern void Func08E3 0x8E3 ();

void Func07F3 object#(0x7F3) () {
	var var0000;
	var var0001;
	var var0002;

	var0000 = Func0992(0x0001, 0x0000, 0x0000, false);
	if (gflags[FINISHED_LIGHTNING_EXPERIMENT]) {
		var0000 = Func0992(0x0001, "@That strike was yellow!@", "@Yellow lightning!@", true);
	} else if (gflags[SEEN_RED_LIGHTNING] && (gflags[SEEN_GREEN_LIGHTNING] && (!gflags[SEEN_YELLOW_LIGHTNING]))) {
		Func08E3();
	} else if (var0000 != AVATAR) {
		var0000->show_npc_face0(0x0000);
		if (gflags[SEEN_YELLOW_LIGHTNING]) {
			var0001 = ["@It is not safe here!@", "@Something new hath appeared!@", "@From where did that come?@"];
			var0002 = var0001[UI_get_random(UI_get_array_size(var0001))];
			say(var0002,
				"");
		} else {
			say("\"Did anyone see that color? To be honest, I did not. The flash near blinded me!\"");
		}
	} else {
		AVATAR->item_say("@Yellow lightning!@");
	}
	gflags[SEEN_YELLOW_LIGHTNING] = true;
}

extern var Func0992 0x992 (var var0000, var var0001, var var0002, var var0003);
extern void Func08E3 0x8E3 ();

void Func07F4 object#(0x7F4) () {
	var var0000;
	var var0001;
	var var0002;

	var0000 = Func0992(0x0001, 0x0000, 0x0000, false);
	if (gflags[FINISHED_LIGHTNING_EXPERIMENT]) {
		var0000 = Func0992(0x0001, "@'Twas green!@", "@That was green.@", true);
	} else if (gflags[SEEN_RED_LIGHTNING] && (gflags[SEEN_YELLOW_LIGHTNING] && (!gflags[SEEN_GREEN_LIGHTNING]))) {
		Func08E3();
	} else if (var0000 != AVATAR) {
		var0000->show_npc_face0(0x0000);
		if (gflags[SEEN_GREEN_LIGHTNING]) {
			var0001 = ["@It took one item, but left another!@", "@The object hath been turned into something else!@", "@Look! A metamorphosis!@"];
			var0002 = var0001[UI_get_random(UI_get_array_size(var0001))];
			say(var0002,
				"");
		} else {
			say("\"What a strange color -- a greenish bolt, I'd say.\"");
		}
	} else {
		AVATAR->item_say("@Green lightning!@");
	}
	gflags[SEEN_GREEN_LIGHTNING] = true;
}

extern var Func09A0 0x9A0 (var var0000, var var0001);
extern void Func09C0 0x9C0 (var var0000);
extern void Func09BF 0x9BF ();

void Func07F5 object#(0x7F5) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;

	if (event == WEAPON) {
		var0000 = UI_click_on_item();
		var0001 = Func09A0(0x0004, 0x0002);
		if (var0000->get_item_shape() == 0x0200) {
			var0002 = var0001->get_item_quality();
			if (var0002 < 0x0003) {
				var0003 = var0002 + 0x0001;
				if (!var0001->set_item_quality(var0003)) {
					abort;
				}
			} else {
				var0001 = Func09A0(0x0004, 0x0001);
				var0004 = var0001->get_item_quality();
				var0004 += 0x0001;
				var0005 = var0001->set_item_quality(var0004);
				var0000->remove_item();
				UI_sprite_effect(ANIMATION_BIG_RING_BLAST, var0000[0x0002], var0000[0x0003], 0x0000, 0x0000, 0x0000, LOOP_ONCE);
				UI_play_sound_effect(0x0029);
				Func09C0(var0004);
				if (var0004 < 0x000A) {
					var0005 = script var0001 after 15 ticks {
						call Func07F5;
					};
				}
			}
		}
	}
	if (event == SCRIPTED) {
		Func09BF();
	}
}

void Func07F6 object#(0x7F6) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;

	if ((event == SCRIPTED) && (gflags[TEMP_FLAG_1] == false)) {
		var0000 = get_item_quality();
		var0001 = find_nearby(0x025F, 0x001E, MASK_EGG);
		if (var0001) {
			AVATAR->set_item_flag(DONT_MOVE);
			var0002 = get_distance(var0001);
			var0003 = var0001->get_object_position();
			AVATAR->si_path_run_usecode(var0003, PATH_SUCCESS, var0001, Func07F6, false);
			if (var0000 == 0x0005) {
				var0004 = script CLONE_IOLO after (var0002 + 0x000A) ticks {
					call Func07F6;
				};
				gflags[TRIED_CLONE_IOLO_TEST] = true;
			}
			if (var0000 == 0x0006) {
				var0004 = script CLONE_SHAMINO after (var0002 + 0x000A) ticks {
					call Func07F6;
				};
				gflags[TRIED_CLONE_SHAMINO_TEST] = true;
			}
			if (var0000 == 0x0007) {
				var0004 = script CLONE_DUPRE after (var0002 + 0x000A) ticks {
					call Func07F6;
				};
				gflags[TRIED_CLONE_DUPRE_TEST] = true;
			}
		}
		gflags[TEMP_FLAG_1] = true;
		abort;
	}
	if ((event == SCRIPTED) && (gflags[TEMP_FLAG_1] == true)) {
		gflags[TEMP_FLAG_1] = false;
		set_schedule_type(TALK);
		if (get_npc_number() == CLONE_IOLO) {
			CLONE_IOLO->item_say("@Avatar! Avatar!@");
			abort;
		}
		if (get_npc_number() == CLONE_SHAMINO) {
			CLONE_SHAMINO->item_say("@Avatar, thou hast returned!@");
			abort;
		}
		if (get_npc_number() == CLONE_DUPRE) {
			CLONE_DUPRE->item_say("@Art thou ready, Avatar?@");
			abort;
		}
	}
	if (event == SI_PATH_FAILURE) {
		var0003 = get_object_position();
		UI_sprite_effect(ANIMATION_TELEPORT, var0003[0x0001], var0003[0x0002], 0x0000, 0x0000, 0x0000, LOOP_ONCE);
		AVATAR->move_object(var0003);
		UI_play_sound_effect(0x0082);
	}
}

extern var Func09A0 0x9A0 (var var0000, var var0001);
extern var Func09A6 0x9A6 (var var0000);
extern void Func092F 0x92F (var var0000, var var0001);
extern void Func07D7 object#(0x7D7) ();

void Func07F7 object#(0x7F7) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;
	var var0008;
	var var0009;
	var var000A;

	AVATAR->set_polymorph(0x02D1);
	if (gflags[TRIED_CLONE_IOLO_TEST] && (gflags[TRIED_CLONE_SHAMINO_TEST] && gflags[TRIED_CLONE_DUPRE_TEST])) {
		if (item == Func09A0(0x0005, 0x0002)) {
			var0000 = script AVATAR {
				face FACE_SOUTH;
			};
			var0001 = find_nearby(0x0320, 0x002D, MASK_NONE);
			var0002 = false;
			for (var0005 in var0001 with var0003 to var0004) {
				if (var0005->get_item_quality() == 0x003D) {
					var0002 = var0005;
				}
			}
			if (var0002) {
				var0001 = var0002->get_cont_items(SHAPE_ANY, QUALITY_ANY, FRAME_ANY);
				if (var0001) {
					var0001 = AVATAR->get_cont_items(SHAPE_ANY, QUALITY_ANY, FRAME_ANY);
					for (var0005 in var0001 with var0006 to var0007) {
						if (!((var0005->get_item_shape() == 0x01E6) || (var0005->get_item_shape() == 0x025F))) {
							var0005->remove_item();
						}
					}
				}
				var0008 = 0x0000;
				var0001 = var0002->get_cont_items(SHAPE_ANY, QUALITY_ANY, FRAME_ANY);
				while (var0008 < 0x0002) {
					for (var0005 in var0001 with var0009 to var000A) {
						if (Func09A6(var0005) || (var0008 == 0x0001)) {
							if (!var0005->set_last_created()) {
								Func092F(AVATAR, 0x000D);
							}
							if (!AVATAR->give_last_created()) {
								Func092F(AVATAR, 0x000E);
							}
						}
					}
					var0008 += 0x0001;
					var0001 = var0002->get_cont_items(SHAPE_ANY, QUALITY_ANY, FRAME_ANY);
				}
			}
			UI_fade_palette(0x000C, 0x0001, 0x0001);
		} else {
			AVATAR->set_camera();
			UI_play_music(0x0027, Func09A0(0x0005, 0x0001));
			UI_fade_palette(0x000C, 0x0001, 0x0000);
			UI_play_sound_effect(0x0082);
			ZHELKAS->move_object([0x074A, 0x0A03, 0x0000]);
			ZHELKAS->set_schedule_type(TALK);
			var0000 = script Func09A0(0x0005, 0x0002) {
				nohalt;
				call Func07F7;
			};
			AVATAR->move_object([0x0747, 0x09ED, 0x0000]);
			0x0000->Func07D7();
		}
	} else {
		var0000 = script AVATAR {
			call Func02AF;
		};
	}
}

extern void Func08C4 0x8C4 ();
extern void Func08C3 0x8C3 ();
extern void Func09AC 0x9AC (var var0000, var var0001, var var0002, var var0003);
extern var Func09A0 0x9A0 (var var0000, var var0001);
extern var Func0992 0x992 (var var0000, var var0001, var var0002, var var0003);
extern void Func097F 0x97F (var var0000, var var0001, var var0002);
extern void Func0907 0x907 (var var0000, var var0001);
extern void Func08C2 0x8C2 ();
extern void Func094F 0x94F (var var0000, var var0001);
extern void Func0939 0x939 (var var0000);
extern void Func093B 0x93B (var var0000);
extern void Func093A 0x93A (var var0000);

void Func07F8 object#(0x7F8) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;
	var var0008;
	var var0009;
	var var000A;
	var var000B;
	var var000C;
	var var000D;

	var0000 = get_item_quality();
	if (event == EGG) {
		if (var0000 == 0x0001) {
			abort;
		}
		if (var0000 == 0x0004) {
			Func08C4();
		}
		if (var0000 == 0x0005) {
			Func08C3();
		}
	}
	if ((event == SI_PATH_SUCCESS) && (get_npc_number() == AVATAR)) {
		if (!gflags[FAWN_TRIAL_RECESS]) {
			AVATAR->set_schedule_type(WAIT);
			var0001 = script ZULITH {
				actor frame bowing;
				wait 2;
				actor frame standing;
				wait 3;
				say "@Bring in the defendant.@";
			};
			var0001 = script item after 15 ticks {
				call Func07F8;
			};
		} else {
			var0001 = script AVATAR after 20 ticks {
				nohalt;
				call Func07F8;
			};
			var0001 = [YELINDA, KYLISTA, VOLDIN, ZULITH, JOTH, GARTH, KALEN, LEON, JENDON, DELPHYNIA, DELIN, JORVIN, SCOTS, RUGGS, ALYSSAND, OLON];
			for (var0004 in var0001 with var0002 to var0003) {
				var0004->remove_npc();
				var0004->run_schedule();
			}
			Func09AC(VOLDIN, 0x03F4, 0x0663, WAIT);
			KYLISTA->remove_npc();
			UI_set_timer(0x0000);
		}
		abort;
	}
	if ((event == SCRIPTED) && (item == Func09A0(0x0001, 0x0002))) {
		var0001 = UI_get_party_list2();
		var0004 = false;
		for (var0007 in var0001 with var0005 to var0006) {
			if (var0007->get_schedule_type() == WAIT) {
				var0004 = var0007;
			}
		}
		if (var0004) {
			if (gflags[FAWN_TRIAL_RECESS]) {
				var0001 = 0x0689;
			} else {
				var0001 = 0x066A;
			}
			var0007 = 0x0404 + Func09A0(0x0001, 0x0002)->get_item_quality();
			var0004->si_path_run_usecode([var0007, var0001, 0x0000], SI_PATH_SUCCESS, Func09A0(0x0001, 0x0002), Func07F8, true);
			var0001 = Func09A0(0x0001, 0x0002)->get_item_quality() + 0x0002;
			var0001 = Func09A0(0x0001, 0x0002)->set_item_quality(var0001);
			var0001 = script Func09A0(0x0001, 0x0002) {
				nohalt;
				call Func07F8;
			};
		}
		abort;
	}
	if ((event == SCRIPTED) && (var0000 == 0x00B3)) {
		var0001 = UI_part_of_day();
		if ((var0001 < MORNING) || (var0001 > EVENING)) {
			var0001 = Func0992(0x0001, 0x0000, 0x0000, true);
			if (var0001 == AVATAR) {
				Func097F(AVATAR, "@I should come back later...@", 0x0000);
			} else {
				Func097F(var0001, "@Let's come back later...@", 0x0000);
			}
			abort;
		}
		if (gflags[FAWN_TRIAL_DONE] && (UI_get_timer(0x0000) < 0x000C)) {
			var0001 = Func0992(0x0001, 0x0000, 0x0000, true);
			if (var0001 == AVATAR) {
				Func097F(AVATAR, "@It isn't time yet...@", 0x0000);
			} else {
				Func097F(var0001, "@We've come too early...@", 0x0000);
			}
			abort;
		}
		UI_play_music(0x0013, Func09A0(0x0005, 0x0001));
		gflags[FAWN_TRIAL_RECESS] = false;
		AVATAR->set_item_flag(DONT_MOVE);
		UI_end_conversation();
		UI_close_gumps();
		var0001 = Func09A0(0x0001, 0x0001)->set_item_quality(0x00F8);
		var0001 = find_nearby(0x01B0, 0x000A, MASK_NONE) & find_nearby(0x010E, 0x000A, MASK_NONE);
		for (var0007 in var0001 with var0008 to var0009) {
			if (var0007->get_item_quality() == 0x00B3) {
				Func0907(var0007, 0x0000);
			}
		}
		var0001 = UI_get_party_list2();
		for (var0007 in var0001 with var000A to var000B) {
			var0007->set_schedule_type(WAIT);
		}
		var0001 = Func09A0(0x0001, 0x0002)->set_item_quality(0x0000);
		var0001 = script Func09A0(0x0001, 0x0002) {
			nohalt;
			call Func07F8;
		};
		AVATAR->si_path_run_usecode([0x0407, 0x0668, 0x0000], SI_PATH_SUCCESS, AVATAR->get_npc_object(), Func07F8, false);
		Func08C2();
		if (gflags[FAWN_TRIAL_DONE_FIRST_DAY]) {
			var000C = Func0992(0x0001, "@The trial awaits!@", "@The trial awaits our presence.@", true);
			Func097F(DELIN, "@It's the stranger...@", 0x0016);
			Func097F(LEON, "@Now the trial begins!@", 0x001C);
			Func097F(ALYSSAND, "@Hush!@", 0x0023);
		} else {
			var0001 = "@Let justice be swift!@";
			var000C = Func0992(0x0001, 0x0000, 0x0000, true);
			Func094F(var000C, var0001);
		}
		abort;
	}
	if ((event == SI_PATH_SUCCESS) && (item == Func09A0(0x0001, 0x0002))) {
		abort;
	}
	if ((event == SCRIPTED) || (event == SI_PATH_SUCCESS)) {
		var000D = Func09A0(0x0001, 0x0001)->get_item_quality();
		if (var000D == 0x00FD) {
			var0001 = Func09A0(0x0001, 0x0001)->set_item_quality(0x0014);
		} else {
			var0001 = Func09A0(0x0001, 0x0001)->set_item_quality(var000D + 0x0001);
		}
		if (var000D > 0x00F7) {
			Func0939(var000D);
			abort;
		}
		if ((var000D > 0x0013) && (var000D < 0x001E)) {
			Func093B(var000D);
			abort;
		}
		Func093A(var000D);
	}
}

extern var Func0930 0x930 (var var0000, var var0001, var var0002);
extern void Func092F 0x92F (var var0000, var var0001);
extern var Func0908 0x908 (var var0000, var var0001, var var0002, var var0003, var var0004, var var0005);
extern void Func0909 0x909 (var var0000, var var0001, var var0002, var var0003, var var0004, var var0005, var var0006, var var0007, var var0008);
extern void Func0903 0x903 ();
extern void Func0907 0x907 (var var0000, var var0001);
extern void Func0931 0x931 (var var0000);
extern var Func0932 0x932 (var var0000);
extern void Func0937 0x937 (var var0000, var var0001, var var0002, var var0003, var var0004, var var0005, var var0006, var var0007);
extern void Func09AA 0x9AA ();
extern void Func07FD object#(0x7FD) ();

void Func07F9 object#(0x7F9) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;
	var var0008;
	var var0009;
	var var000A;
	var var000B;
	var var000C;
	var var000D;
	var var000E;
	var var000F;
	var var0010;
	var var0011;
	var var0012;
	var var0013;
	var var0014;
	var var0015;
	var var0016;

	if (event == BG_PATH_FAILURE) {
		gflags[MONITOR_TRAINING] = false;
		gflags[TEMP_FLAG_1] = false;
		var0000 = Func0930(item, 0x0178, 0x000F);
		if (!var0000) {
			Func092F(item, 0x0004);
		}
		var0001 = UI_create_new_object(0x025F);
		if (var0001) {
			var0001->set_item_frame(0x0006);
			var0002 = var0000->get_object_position();
			if (!UI_update_last_created([(var0002[0x0001] + 0x0003), (var0002[0x0002] - 0x0001), var0002[0x0003]])) {
				Func092F(item, 0x0005);
			}
			if (Func0908(var0000, 0x010E, 0x0001, 0, 0, 0x0007)) {
				Func0909(var0000, 0x01B1, 0x0000, 0x0001, 0x01B0, 0x0001, 0, -3, 0x0007);
				UI_play_sound_effect2(0x0020, var0000);
			} else {
				Func0903();
			}
			gflags[TEMP_FLAG_1] = true;
		}
		var0003 = script item after 1 ticks {
			call Func07F9;
		};
		return;
	}
	if (event == STARTED_TALKING) {
		var0001 = find_nearest(0x025F, 0x000F);
		if (var0001) {
			var0001->remove_item();
		}
		var0000 = Func0930(item, 0x010E, 0x000F);
		if (!var0000) {
			Func092F(item, 0x0006);
		}
		if (Func0908(var0000, 0x0178, 0x0000, 0x0000, 0x0000, 0x0007)) {
			Func0909(var0000, 0x01B0, 0x0001, 0x0001, 0x01B1, 0x0000, 0x0000, 0x0003, 0x0005);
			UI_play_sound_effect2(0x001F, var0000);
			Func0907(var0000, 0x0002);
		} else {
			Func0903();
		}
		Func0931(item);
		abort;
	}
	if (event == SI_PATH_FAILURE) {
		Func092F(item, 0x0007);
	}
	if (event == PATH_SUCCESS) {
		var0004 = AVATAR->find_nearby(0x00E4, 0x0023, MASK_NONE);
		for (var0007 in var0004 with var0005 to var0006) {
			if (var0007->get_npc_id() == 0x0009) {
				break;
			}
		} nobreak {
			Func092F(item, 0x0008);
		}
		var0007->clear_item_say();
		gflags[TEMP_FLAG_1] = true;
		var0003 = script item after 1 ticks {
			call Func07FD;
		};
	}
	if (event == PATH_FAILURE) {
		var0000 = Func0930(item, 0x0178, 0x0023);
		if (!var0000) {
			Func092F(item, 0x0009);
		}
		if (Func0908(var0000, 0x010E, 0x0001, 0, 0, 0x0007)) {
			Func0909(var0000, 0x01B1, 0x0000, 0x0001, 0x01B0, 0x0001, 0, -3, 0x0007);
			UI_play_sound_effect2(0x0020, var0000);
		} else {
			Func0903();
		}
		var0001 = UI_create_new_object(0x025F);
		if (var0001) {
			var0001->set_item_frame(0x0006);
			var0002 = get_object_position();
			var0003 = UI_update_last_created([(var0002[0x0001] - 0x0009), (var0002[0x0002] - 0x0002), var0002[0x0003]]);
			if (!var0003) {
				Func092F(item, 0x000A);
			}
		}
		var0003 = script item after 1 ticks {
			call Func07F9;
		};
	}
	if (event == SCRIPTED) {
		if (gflags[TEMP_FLAG_1]) {
			gflags[TEMP_FLAG_1] = false;
			var0001 = find_nearest(0x025F, 0x000F);
			var0008 = [0x0000, 0x0001, 0x0001, 0x0000];
			var0009 = [0x0000, 0x0001, 0x0000, 0x0001];
			var000A = [CALADIN, TEMPLAR, SHAZZANA, LUTHER, BRENDANN];
			for (var000D in var000A with var000B to var000C) {
				if (Func0932(var000D)) {
					var000D->set_alignment(NEUTRAL);
					var0003 = var000D->get_npc_prop(HEALTH);
					var0003 = var000D->set_npc_prop(HEALTH, var000D->get_npc_prop(STRENGTH) - var0003);
					var000D->run_schedule();
				}
			}
			Func0937(item, var0001, var0008, var0009, 0x0000, Func07F9, item, STARTED_TALKING);
			return;
		}
		var000E = find_nearby(0x00E4, 0x001E, MASK_NONE);
		for (var0011 in var000E with var000F to var0010) {
			if (var0011->get_npc_id() == 0x0009) {
				break;
			}
		} nobreak {
			Func092F(item, 0x000B);
		}
		var0012 = UI_die_roll(0x0001, 0x0004);
		if (var0012 == 0x0001) {
			var0011->item_say("@Have at 'em, men!@");
		}
		if (var0012 == 0x0002) {
			var0011->item_say("@Best of luck!@");
		}
		if (var0012 == 0x0003) {
			var0011->item_say("@In ya go!@");
		}
		if (var0012 == 0x0004) {
			var0011->item_say("@Pray for mercy!@");
		}
		var0008 = [ 0, -1, -1, -1, -1, -1,  1,  1,  1,  1,  1];
		var0009 = [ 0,  1,  0, -1, -2,  2,  2,  1,  0, -1, -2];
		var0013 = -1;
		var0001 = find_nearest(0x025F, 0x000F);
		Func0937(item, var0001, var0008, var0009, var0013, Func07F9, item, SI_PATH_SUCCESS);
	}
	if (event == SI_PATH_SUCCESS) {
		var000A = [CALADIN, TEMPLAR, SHAZZANA, LUTHER, BRENDANN];
		for (var000D in var000A with var0014 to var0015) {
			if (Func0932(var000D)) {
				var0016 = var000D->get_npc_prop(HEALTH);
				var0003 = var000D->set_npc_prop(HEALTH, var000D->get_npc_prop(STRENGTH) - var0016);
				if (gflags[TRAINING_FLAG_SET]) {
					if (var000D->get_npc_id()) {
						var000D->set_alignment(EVIL);
						var000D->set_schedule_type(IN_COMBAT);
						var000D->set_attack_mode(NEAREST);
						var000D->set_opponent(item);
						if (item == AVATAR->get_npc_object()) {
							set_attack_mode(NEAREST);
							set_opponent(var000D);
							set_oppressor(var000D);
							set_schedule_type(FOLLOW_AVATAR);
						} else {
							set_schedule_type(IN_COMBAT);
							set_opponent(var000D);
						}
					} else {
						var000D->set_alignment(CHAOTIC);
						if (item == AVATAR->get_npc_object()) {
							var000D->set_opponent(item);
							var000D->set_oppressor(item);
						}
						var000D->set_attack_mode(NEAREST);
						var000D->set_schedule_type(TEND_SHOP);
					}
				} else {
					var000D->set_alignment(CHAOTIC);
					var000D->set_schedule_type(IN_COMBAT);
					var000D->set_attack_mode(NEAREST);
				}
			}
		}
		var0000 = Func0930(item, 0x010E, 0x000F);
		if (!var0000) {
			Func092F(item, 0x000C);
		}
		if (Func0908(var0000, 0x0178, 0x0000, 0x0000, 0x0000, 0x0007)) {
			Func0909(var0000, 0x01B0, 0x0001, 0x0001, 0x01B1, 0x0000, 0x0000, 0x0003, 0x0005);
			UI_play_sound_effect2(0x001F, var0000);
			Func0907(var0000, 0x0002);
		} else {
			Func0903();
		}
		var0001 = find_nearest(0x025F, 0x000A);
		if (var0001) {
			var0001->remove_item();
		}
		if (item == AVATAR->get_npc_object()) {
			Func09AA();
			return;
		}
		if (!gflags[TRAINING_FLAG_SET]) {
			set_schedule_type(IN_COMBAT);
		}
		set_item_flag(SI_TOURNAMENT);
	}
}

extern void Func08A2 0x8A2 ();
extern void Func08A3 0x8A3 ();
extern void Func08A4 0x8A4 ();
extern void Func08A5 0x8A5 ();
extern var Func08A0 0x8A0 (var var0000);

void Func07FA object#(0x7FA) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;
	var var0008;
	var var0009;
	var var000A;

	if (get_item_quality() == 0x00C8) {
		var0000 = find_nearby(0x0314, 0x000F, MASK_ALL_UNSEEN);
		var0001 = script item after 2 ticks {
			frame 8;
			finish;
		};
		for (var0004 in var0000 with var0002 to var0003) {
			if (var0004->get_item_quality() == 0x00D1) {
				var0005 = var0004->get_item_frame() % 0x0002;
			}
			if (var0004->get_item_quality() == 0x00D0) {
				var0006 = var0004->get_item_frame() % 0x0002;
			}
			if (var0004->get_item_quality() == 0x00CE) {
				var0007 = var0004->get_item_frame() % 0x0002;
			}
		}
		if ((!var0005) && ((!var0006) && ((!var0007) && (!gflags[INN_FLIPPED_FIRST_SWITCH])))) {
			var0000 = find_nearby(0x0382, 0x0019, MASK_NONE);
			var0008 = var0000->get_object_position();
			UI_sprite_effect(ANIMATION_BLUE_BEADS, var0008[0x0001], var0008[0x0002], 0x0000, 0x0000, 0x0000, LOOP_ONCE);
			UI_play_sound_effect(0x0055);
			var0001 = set_item_quality(0x00C9);
			var0001 = script item after 5 ticks {
				nohalt;
				call Func07FA;
			};
			gflags[INN_FLIPPED_FIRST_SWITCH] = true;
		}
		if (var0005 && ((!var0006) && ((!var0007) && (!gflags[INN_FLIPPED_SECOND_SWITCH])))) {
			var0000 = find_nearby(0x0382, 0x000F, MASK_NONE);
			var0004 = UI_create_new_object(0x032A);
			if (var0004) {
				var0004->set_item_frame(0x0003);
				var0008 = var0000->get_object_position();
				var0008[0x0003] = 0x0001;
				var0001 = UI_update_last_created(var0008);
				if (var0001) {
					UI_sprite_effect(ANIMATION_BLUE_BEADS, var0008[0x0001], var0008[0x0002], 0x0000, 0x0000, 0x0000, LOOP_ONCE);
					UI_play_sound_effect(0x0039);
					var0001 = set_item_quality(0x00CA);
					var0001 = script item after 5 ticks {
						nohalt;
						call Func07FA;
					};
					gflags[INN_FLIPPED_SECOND_SWITCH] = true;
				}
			}
		}
		if ((!var0005) && (var0006 && ((!var0007) && (!gflags[INN_FLIPPED_THIRD_SWITCH])))) {
			var0000 = find_nearby(0x0382, 0x000F, MASK_NONE);
			var0004 = UI_create_new_object(0x02F8);
			if (var0004) {
				var0008 = var0000->get_object_position();
				var0008[0x0003] = 0x0001;
				var0001 = UI_update_last_created(var0008);
				if (var0001) {
					UI_sprite_effect(ANIMATION_BLUE_BEADS, var0008[0x0001], var0008[0x0002], 0x0000, 0x0000, 0x0000, LOOP_ONCE);
					UI_play_sound_effect(0x0039);
					var0001 = set_item_quality(0x00CB);
					var0001 = script item after 5 ticks {
						nohalt;
						call Func07FA;
					};
					gflags[INN_FLIPPED_THIRD_SWITCH] = true;
				}
			}
		}
		if (var0005 && (var0006 && ((!var0007) && (!gflags[INN_FLIPPED_FOURTH_SWITCH])))) {
			var0000 = find_nearby(0x0382, 0x000F, MASK_NONE);
			var0004 = UI_create_new_object(0x0179);
			if (var0004) {
				var0008 = var0000->get_object_position();
				var0008[0x0003] = 0x0001;
				var0001 = UI_update_last_created(var0008);
				if (var0001) {
					UI_sprite_effect(ANIMATION_BLUE_BEADS, var0008[0x0001], var0008[0x0002], 0x0000, 0x0000, 0x0000, LOOP_ONCE);
					UI_play_sound_effect(0x0039);
					var0001 = set_item_quality(0x00CC);
					var0001 = script item after 5 ticks {
						nohalt;
						call Func07FA;
					};
					gflags[INN_FLIPPED_FOURTH_SWITCH] = true;
				}
			}
		}
		if ((!var0005) && ((!var0006) && (var0007 && (!gflags[INN_HEALED_PARTY])))) {
			Func08A2();
		} else if (var0005 && ((!var0006) && var0007)) {
			Func08A3();
		} else if ((!var0005) && (var0006 && (var0007 && (!gflags[INN_PARTY_FEELS_GREAT])))) {
			Func08A4();
		} else if (var0005 && (var0006 && (var0007 && (!gflags[INN_PARTY_FEELS_JOY])))) {
			Func08A5();
		} else {
			Func08A3();
		}
	}
	if (event == SCRIPTED) {
		var0009 = get_item_quality();
		var000A = Func08A0(0x0003);
		if (var000A != 0x0045) {
			if (var0009 == 0x00C9) {
				var000A->show_npc_face0(0x0000);
				say("\"What pleasant music! 'Tis strangely soothing... I could stand here for hours and listen to it...\"");
				say("\"Surely it would not hurt to tarry for a bit...\"");
				UI_remove_npc_face0();
			}
			if (var0009 == 0x00CA) {
				var000A->show_npc_face0(0x0000);
				say("\"Wine! Praise the Virtues! I could use a drink right now...\"");
				say("\"Come, let us toast our friendship and hope for a speedy end to this journey!\"");
				UI_remove_npc_face0();
			}
			if (var0009 == 0x00CB) {
				var000A->show_npc_face0(0x0000);
				say("\"Look! A wondrous gem! This would easily buy enough provisions to last the entire quest!\"");
				say("\"Or think what a fine gift this would be for Lord British! He would be impressed, to be sure.\"");
				UI_remove_npc_face0();
			}
			if (var0009 == 0x00CC) {
				var000A->show_npc_face0(0x0000);
				say("\"I have not seen food this rich in a long time! The aroma is marvelous!\"");
				say("\"'Twould be a shame for all this to go to waste...\"");
				UI_remove_npc_face0();
			}
			if (var0009 == 0x00CD) {
				var000A->show_npc_face0(0x0000);
				say("\"Perhaps something more needs to be done.\"");
				UI_remove_npc_face0();
			}
		}
		var0001 = set_item_quality(0x00C8);
	}
}

extern var Func09A0 0x9A0 (var var0000, var var0001);
extern var Func0954 0x954 ();
extern var Func0953 0x953 ();
extern var Func08AC 0x8AC (var var0000);
extern void Func097F 0x97F (var var0000, var var0001, var var0002);
extern void Func08C6 0x8C6 ();
extern void Func08C5 0x8C5 ();
extern var Func0956 0x956 (var var0000);
extern var Func0992 0x992 (var var0000, var var0001, var var0002, var var0003);
extern void Func094F 0x94F (var var0000, var var0001);

void Func07FB object#(0x7FB) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;
	var var0008;

	var0000 = Func09A0(0x0001, 0x0001)->get_item_quality();
	var0001 = Func0954();
	var0002 = Func0953();
	var0003 = Func08AC(false);
	if (var0000 == 0x001E) {
		gflags[FAWN_TRIAL_ALYSSAND_SPOKE] = true;
		UI_init_conversation();
		gflags[TRIAL_ASK_ALYSSAND_RING] = true;
		VOLDIN->show_npc_face0(0x0000);
		say("\"Alyssand, we are told that thou hast often been seen in the company of the accused traitor. What things hath he asked of thee?\"");
		ALYSSAND->show_npc_face1(0x0000);
		say("\"I remember that we spoke of the strange storms, and other such things...\"");
		UI_remove_npc_face1();
		0x0000->set_conversation_slot();
		say("\"Thou art holding back something...\"");
		KYLISTA->show_npc_face1(0x0000);
		say("\"Alyssand, beware! The Oracle is the instrument of divine Truth, and it shall not be mocked!\"");
		UI_remove_npc_face1();
		0x0000->set_conversation_slot();
		say("\"What did the strangers ask of thee, Alyssand? There was a particular item...\"");
		ALYSSAND->show_npc_face1(0x0000);
		say("\"Well, yes... mine engagement ring, which was lost...\"");
		0x0000->set_conversation_slot();
		UI_remove_npc_face1();
		say("\"In fact, the traitor had thy missing jewelry! So the Beast hath taught him to steal... using Daemonic powers, I suspect...\"");
		say("\"I have no further questions. I thank thee.\"");
		Func097F(ALYSSAND, "@Don't twist my words...@", 0x0000);
		UI_end_conversation();
		var0004 = Func09A0(0x0001, 0x0001)->set_item_quality(0x001D);
		var0005 = ALYSSAND->get_object_position() & (0x000F & 0x0006);
		var0006 = var0005->find_nearby(0x0113, 0x0028, MASK_EGG);
		if (var0006) {
			var0007 = var0006->get_object_position();
			si_path_run_usecode(var0007, SI_PATH_SUCCESS, item, Func07F8, false);
		}
		abort;
	}
	if (var0000 == 0x001F) {
		gflags[FAWN_TRIAL_DELIN_SPOKE] = true;
		var0004 = Func09A0(0x0001, 0x0001)->set_item_quality(var0000 + 0x0001);
		UI_init_conversation();
		VOLDIN->show_npc_face0(0x0000);
		say("\"Good day, Delin... Ah, the Oracle is the other way.\"");
		DELIN->show_npc_face1(0x0000);
		say("\"What... Oh! Forgive me, milords and ladies.\"");
		UI_end_conversation();
		var0004 = script DELIN {
			wait 2;
			actor frame bowing;
			wait 2;
			actor frame standing;
			wait 2;
			face west;
			continue;
			actor frame step_left;
			wait 2;
			face north;
			continue;
			actor frame standing;
			wait 2;
			actor frame bowing;
			wait 2;
			actor frame kneeling;
			wait 2;
			call Func07FB;
		};
		Func08C6();
		abort;
	}
	if (var0000 == 0x0020) {
		var0004 = Func09A0(0x0001, 0x0001)->set_item_quality(var0000 + 0x0001);
		UI_init_conversation();
		VOLDIN->show_npc_face0(0x0000);
		say("\"Tell me, Delin, hast thou ever met the accused?\"");
		DELIN->show_npc_face1(0x0000);
		say("\"Good day, uh... Voldin. Met who?\"");
		UI_remove_npc_face1();
		0x0000->set_conversation_slot();
		say("\"The man standing in that box, right in front of thee. Hast thou ever met him?\"");
		DELIN->show_npc_face1(0x0000);
		say("\"Handsome lad... I do not recall him. Dost thou think he would be a worthy suitor for mine Alyssand?\"");
		UI_remove_npc_face1();
		0x0000->set_conversation_slot();
		say("\"Uh... I do not think so, Delin.\"");
		say("\"I renounce any further questions! I thank thee, Delin. Thou mayest go.\"");
		UI_end_conversation();
		var0004 = script DELIN {
			wait 2;
			actor frame bowing;
			wait 2;
			actor frame standing;
		};
		var0004 = script VOLDIN {
			wait 3;
			face west;
		};
		var0004 = script item after 12 ticks {
			nohalt;
			call Func07FB;
		};
		abort;
	}
	if (var0000 == 0x0021) {
		UI_init_conversation();
		VOLDIN->show_npc_face0(0x0000);
		say("\"And now I would like to call...\"");
		say("\"Delin, go to thy seat please.\"");
		DELIN->show_npc_face1(0x0000);
		say("\"Yes, of course... Captain.\"");
		UI_end_conversation();
		var0004 = script VOLDIN {
			wait 2;
			face south;
		};
		var0004 = Func09A0(0x0001, 0x0001)->set_item_quality(0x001D);
		var0005 = DELIN->get_object_position() & (0x000E & 0x0006);
		var0006 = var0005->find_nearby(0x0113, 0x0014, MASK_EGG);
		if (var0006) {
			var0007 = var0006->get_object_position();
			Func08C5();
			Func097F(DELIN, "@What is going on?@", 0x0004);
			si_path_run_usecode(var0007, SI_PATH_SUCCESS, item, Func07F8, false);
		}
		abort;
	}
	if (var0000 == 0x0022) {
		gflags[FAWN_TRIAL_VOLDIN_SPOKE] = true;
		YELINDA->show_npc_face0(0x0000);
		say("\"Given that the weight of evidence seems overwhelming, perhaps we should spare the defendant from further embarrassment.\"");
		VOLDIN->show_npc_face1(0x0000);
		say("\"If the Lady doth wish it, I would forebear calling for further testimony. The traitor will surely be convicted based on the facts already presented.\"");
		UI_remove_npc_face1();
		UI_remove_npc_face0();
		Func08AC(true)->show_npc_face0(0x0000);
		say("\"Avatar, what dost thou recommend?\"");
		var0004 = Func0956(["continue the testimony", "no more witnesses"]);
		if (var0004 == "continue the testimony") {
			0x0000->set_conversation_slot();
			say("\"I would hear the full weight of the testimony against me, Lady Yelinda.\"");
			YELINDA->show_npc_face1(0x0000);
			say("\"Very well. Thou mayest resume, Captain Voldin.\"");
		} else {
			0x0000->set_conversation_slot();
			say("\"I believe no purpose would be served by continuing this charade, Lady Yelinda.\"");
			YELINDA->show_npc_face1(0x0000);
			say("\"Do not mock the Oracle, stranger.\"");
			say("\"Captain Voldin, let us bring this session of the trial to an end.\"");
			gflags[FAWN_TRIAL_ALYSSAND_SPOKE] = true;
			gflags[FAWN_TRIAL_DELIN_SPOKE] = true;
			gflags[FAWN_TRIAL_DELPHYNIA_SPOKE] = true;
			gflags[FAWN_TRIAL_JENDON_SPOKE] = true;
			gflags[FAWN_TRIAL_JORVIN_SPOKE] = true;
			gflags[FAWN_TRIAL_KYLISTA_SPOKE] = true;
			gflags[FAWN_TRIAL_LEON_JOTH_SPOKE] = true;
			gflags[FAWN_TRIAL_OLON_SPOKE] = true;
			gflags[FAWN_TRIAL_RUGGS_GARTH_SPOKE] = true;
			gflags[FAWN_TRIAL_SCOTS_SPOKE] = true;
			gflags[FAWN_TRIAL_YELINDA_SPOKE] = true;
			gflags[FAWN_TRIAL_ZULITH_SPOKE] = true;
		}
		var0004 = Func09A0(0x0001, 0x0001)->set_item_quality(0x0019);
		var0004 = script YELINDA {
			nohalt;
			actor frame bowing;
			wait 1;
			actor frame sitting;
		};
		var0004 = script VOLDIN {
			nohalt;
			call Func07F8;
		};
		abort;
	}
	if (var0000 == 0x0026) {
		gflags[FAWN_TRIAL_DELPHYNIA_SPOKE] = true;
		UI_init_conversation();
		VOLDIN->show_npc_face0(0x0000);
		say("\"Delphynia, did the accused meet with thee?\"");
		DELPHYNIA->show_npc_face1(0x0000);
		say("\"Yes, Captain. He came with his accomplice, who was seeking a certain magical leaf...\"");
		UI_remove_npc_face1();
		0x0000->set_conversation_slot();
		say("\"Aha! And what didst thou conclude from this?\"");
		DELPHYNIA->show_npc_face1(0x0000);
		say("\"The leaf is known to counteract certain poisons and curses, milord. So I must conclude that the defendant suffers from some sort of malady.\"");
		UI_remove_npc_face1();
		0x0000->set_conversation_slot();
		say("\"Perhaps from his association with the Beast! How sinister...\"");
		say("\"I have no more questions. Many thanks for thy service, Delphynia. Return to thy seat, if thou wilt.\"");
		UI_end_conversation();
		var0004 = Func09A0(0x0001, 0x0001)->set_item_quality(0x001D);
		var0005 = get_object_position() & (0x0012 & 0x0006);
		var0006 = var0005->find_nearby(0x0113, 0x0014, MASK_EGG);
		if (var0006) {
			var0007 = var0006->get_object_position();
			si_path_run_usecode(var0007, SI_PATH_SUCCESS, item, Func07F8, false);
		}
		abort;
	}
	if (var0000 == 0x0027) {
		gflags[FAWN_TRIAL_JENDON_SPOKE] = true;
		UI_init_conversation();
		VOLDIN->show_npc_face0(0x0000);
		say("\"Dost thou recall having met ",
			var0003,
			" before?\"");
		JENDON->show_npc_face1(0x0000);
		say("\"Yes, indeed. He came into the Broken Oar -- most people do, thou knowest. Asked me a great number of questions.\"");
		UI_remove_npc_face1();
		0x0000->set_conversation_slot();
		say("\"About the usual sorts of things -- the weather, the goblin threat, and so forth?\"");
		JENDON->show_npc_face1(0x0000);
		say("\"Not at all, Captain! He had so many questions.\"");
		if (gflags[JENDON_SPOKE_STRANGE_OBJECTS]) {
			say("\"He did ask me about strange objects, such as I had never heard of. They weren't normal items, sir!\"");
			gflags[TRIAL_ASK_JENDON_STRANGE_OBJECTS] = true;
		}
		if (gflags[ASK_ONLON_GWANI]) {
			say("\"He asked me about the bloodthirsty savages that live in the far north -- had a grisly interest in the tale, I might add.\"");
			gflags[TRIAL_ASK_JENDON_SAVAGES] = true;
		}
		if (gflags[ASK_DELIN_ABOUT_BATLIN]) {
			say("\"",
				var0003,
				" had a powerful curiosity about the ancient ruins of this land! I could not tell him enough. He was quite angry with me...\"");
			UI_remove_npc_face1();
			0x0000->set_conversation_slot();
			say("\"The ruins left by the Daemons who once dwelt in this land?\"");
			JENDON->show_npc_face1(0x0000);
			say("\"Yes, captain. The Serpent Ruins.\"");
			gflags[TRIAL_ASK_DELIN_FUR_CAP] = true;
		}
		UI_remove_npc_face1();
		0x0000->set_conversation_slot();
		say("\"And so we can plainly see that the accused doth have a most perverted sense of curiosity. Perhaps a weakness gained from associating with the Beast!\"");
		say("\"Thou mayest go, Jendon...\"");
		UI_end_conversation();
		var0004 = Func09A0(0x0001, 0x0001)->set_item_quality(0x001D);
		var0005 = JENDON->get_object_position() & (0x0010 & 0x0006);
		var0006 = var0005->find_nearby(0x0113, 0x0014, MASK_EGG);
		if (var0006) {
			var0007 = var0006->get_object_position();
			Func08C5();
			si_path_run_usecode(var0007, SI_PATH_SUCCESS, item, Func07F8, false);
		}
		abort;
	}
	if (var0000 == 0x0028) {
		gflags[FAWN_TRIAL_JORVIN_SPOKE] = true;
		UI_init_conversation();
		JORVIN->show_npc_face0(0x0000);
		say("\"How can I help thee, Great Captain?\"");
		VOLDIN->show_npc_face1(0x0000);
		say("\"I will not detain thee from thy duty overlong, commander.\"");
		say("\"Thou didst meet ",
			var0003,
			" and ",
			var0002,
			" before thou didst apprehend the accused, didst thou not?\"");
		UI_remove_npc_face1();
		0x0000->set_conversation_slot();
		say("\"I did see them, Captain, even if they did not see me. It is my business to watch strangers.\"");
		say("\"The traitor was a most curious man, and did often enter into buildings where he did not belong. He did open many drawers and barrels without permission.\"");
		VOLDIN->show_npc_face1(0x0000);
		say("\"How wouldst thou characterize such behavior?\"");
		UI_remove_npc_face1();
		0x0000->set_conversation_slot();
		say("\"Peculiar, lord. Almost as if the man were hunting for something.\"");
		VOLDIN->show_npc_face1(0x0000);
		say("\"According to legend, there have been men who have sold their souls to Beast British. Such men then scour the world, hoping to find their lost spirits once again.\"");
		say("\"No more questions...\"");
		UI_end_conversation();
		Func097F(YELINDA, "@Makes me shudder...@", 0x0002);
		Func097F(DELPHYNIA, "@How awful!@", 0x0003);
		var0004 = Func09A0(0x0001, 0x0001)->set_item_quality(0x001D);
		var0005 = JORVIN->get_object_position() & (0x0007 & 0x0006);
		var0006 = var0005->find_nearby(0x0113, 0x0014, MASK_EGG);
		if (var0006) {
			var0007 = var0006->get_object_position();
			Func08C5();
			si_path_run_usecode(var0007, SI_PATH_SUCCESS, item, Func07F8, false);
		}
		abort;
	}
	if (var0000 == 0x0029) {
		gflags[FAWN_TRIAL_KYLISTA_SPOKE] = true;
		UI_init_conversation();
		VOLDIN->show_npc_face0(0x0000);
		say("\"Forgive my presumption, Kylista. As the Priestess of Beauty, thy powers are absolute within this Temple.\"");
		say("\"However, thy certain knowledge concerning this traitor is vital if the Oracle is to hear a complete accounting.\"");
		KYLISTA->show_npc_face1(0x0000);
		say("\"I understand. Let me state that I have met ",
			var0003,
			", as well as ",
			var0002,
			", his companion. I found their lack of understanding of Beauty appalling!\"");
		UI_remove_npc_face1();
		0x0000->set_conversation_slot();
		say("\"So they did not seem to have a true appreciation of Beauty?\"");
		var0008 = Func0992(IOLO, "@Beauty lies in the eye of the beholder...@", 0x0000, false);
		if (var0008 == AVATAR) {
			ALYSSAND->show_npc_face1(0x0000);
			say("\"Beauty lies in the eye of the beholder...\"");
		}
		UI_end_conversation();
		var0004 = Func09A0(0x0001, 0x0001)->set_item_quality(var0000 + 0x0001);
		var0004 = script JORVIN {
			nohalt;
			actor frame bowing;
			actor frame standing;
			say "@Silence!@";
		};
		var0004 = script item after 7 ticks {
			nohalt;
			call Func07FB;
		};
		abort;
	}
	if (var0000 == 0x002A) {
		UI_init_conversation();
		JORVIN->show_npc_face0(0x0000);
		say("\"Quiet in the Temple! Thou wilt not speak unless questioned.\"");
		say("\"Forgive the interruption, Captain Voldin.\"");
		VOLDIN->show_npc_face1(0x0000);
		say("\"No forgiveness necessary. I thank thee for performing thy duty.\"");
		UI_end_conversation();
		var0004 = Func09A0(0x0001, 0x0001)->set_item_quality(var0000 + 0x0001);
		var0004 = script JORVIN {
			nohalt;
			actor frame bowing;
			actor frame sitting;
		};
		var0004 = script item after 7 ticks {
			nohalt;
			call Func07FB;
		};
		abort;
	}
	if (var0000 == 0x002B) {
		UI_init_conversation();
		VOLDIN->show_npc_face0(0x0000);
		say("\"And now, Priestess, please continue thy witness.\"");
		KYLISTA->show_npc_face1(0x0000);
		say("\"As the Priestess of Beauty, I must warn all of thee to remain wary of these strangers! They preach doctrines which deny the primacy of Beauty. The Fellowship is an insidious philosophy which threatens to undermine our common society.\"");
		say("\"I believe that The Fellowship is an invention of Beast British, by which he means to destroy us!\"");
		UI_remove_npc_face1();
		0x0000->set_conversation_slot();
		say("\"Thy vigilance will be our salvation, Priestess. Many thanks for responding to mine unusual summons.\"");
		UI_end_conversation();
		var0004 = Func09A0(0x0001, 0x0001)->set_item_quality(0x001D);
		var0005 = KYLISTA->get_object_position() & (0x000D & 0x0006);
		var0006 = var0005->find_nearby(0x0113, 0x001E, MASK_EGG);
		if (var0006) {
			var0007 = var0006->get_object_position();
			si_path_run_usecode(var0007, SI_PATH_SUCCESS, item, Func07F8, false);
		}
		abort;
	}
	if (var0000 == 0x002C) {
		gflags[FAWN_TRIAL_LEON_JOTH_SPOKE] = true;
		UI_init_conversation();
		VOLDIN->show_npc_face0(0x0000);
		say("\"Thou knowest that thy presence here is for testifying only. Thou shalt be returned to thy camp immediately after thou hast answered our questions.\"");
		LEON->show_npc_face1(0x0000);
		say("\"I have no wish to cause disunity in thy city, Captain. I only wish that thou wouldst come to trust me.\"");
		UI_remove_npc_face1();
		0x0000->set_conversation_slot();
		say("\"Confine thyself to my questions only, please.\"");
		say("\"What contact hath ",
			var0003,
			" had with thee?\"");
		LEON->show_npc_face1(0x0000);
		say("\"He came to the Fellowship camp. We spoke privately.\"");
		UI_remove_npc_face1();
		0x0000->set_conversation_slot();
		say("\"And no doubt the two of you did compare notes concerning The Fellowship blasphemy. Indeed, is not the traitor secretly a confederate of thyself?\"");
		LEON->show_npc_face1(0x0000);
		say("\"I deny the charge of blasphemy. The Fellowship is not an evil doctrine, but is a system of beliefs which bring enlightenment to those who obey...\"");
		UI_remove_npc_face1();
		0x0000->set_conversation_slot();
		say("\"Enough! Leave our fair city now.\"");
		UI_end_conversation();
		var0004 = Func09A0(0x0001, 0x0001)->set_item_quality(var0000 + 0x0001);
		Func097F(VOLDIN, "@Exile the blasphemer!@", 0x0000);
		Func097F(KYLISTA, "@Stone him!@", 0x0001);
		Func097F(ZULITH, "@Beware of Leon!@", 0x0003);
		Func097F(ALYSSAND, "@Shame on us...@", 0x0007);
		Func097F(LEON, "@I forgive thee...@", 0x0003);
		si_path_run_usecode([0x0407, 0x0679, 0x0000], SI_PATH_SUCCESS, item, Func07FB, false);
		abort;
	}
	if (var0000 == 0x002D) {
		remove_npc();
		set_schedule_type(DANCE);
		Func08C6();
		var0004 = script VOLDIN {
			nohalt;
			call Func07F8;
		};
		var0004 = Func09A0(0x0001, 0x0001)->set_item_quality(0x0019);
		abort;
	}
	if (var0000 == 0x002E) {
		gflags[FAWN_TRIAL_OLON_SPOKE] = true;
		var0004 = script VOLDIN {
			nohalt;
			actor frame standing;
		};
		Func097F(KYLISTA, "@How rude!@", 0x0000);
		Func097F(ZULITH, "@Get back here!@", 0x0002);
		Func097F(VOLDIN, "@Let him go...@", 0x0005);
		Func08C5();
		si_path_run_usecode([0x0407, 0x0679, 0x0000], SI_PATH_SUCCESS, item, Func07FB, false);
		var0004 = Func09A0(0x0001, 0x0001)->set_item_quality(0x002D);
		abort;
	}
	if (var0000 == 0x002F) {
		gflags[FAWN_TRIAL_RUGGS_GARTH_SPOKE] = true;
		UI_init_conversation();
		VOLDIN->show_npc_face0(0x0000);
		say("\"Take no hope that thou wilt remain any longer than necessary for thee to speak before the Oracle.\"");
		RUGGS->show_npc_face1(0x0000);
		say("\"I have hope for only one thing, Captain. And that dwells deep within mine heart, as Delphynia knows...\"");
		UI_remove_npc_face1();
		0x0000->set_conversation_slot();
		say("\"Do not digress! Now, I am told that thou hast been seen speaking with the accused traitor...\"");
		RUGGS->show_npc_face1(0x0000);
		say("\"Yes, Captain. I asked a favor of him, to deliver a document for me.\"");
		UI_remove_npc_face1();
		0x0000->set_conversation_slot();
		say("\"No doubt a document containing instructions from Leon, to his secret ally, ",
			var0003,
			"! No further questions...\"");
		RUGGS->show_npc_face1(0x0000);
		say("\"No! 'Twas a letter to my beloved Delphynia...\"");
		UI_remove_npc_face1();
		0x0000->set_conversation_slot();
		say("\"Return to thy camp.\"");
		UI_end_conversation();
		Func097F(RUGGS, "@I love thee, Delphynia!@", 0x0000);
		Func097F(DELPHYNIA, "@I cannot...@", 0x0002);
		Func097F(ZULITH, "@Ruggs, be silent!@", 0x0003);
		si_path_run_usecode([0x0407, 0x0679, 0x0000], SI_PATH_SUCCESS, item, Func07FB, false);
		var0004 = Func09A0(0x0001, 0x0001)->set_item_quality(0x002D);
		abort;
	}
	if (var0000 == 0x0030) {
		gflags[FAWN_TRIAL_SCOTS_SPOKE] = true;
		UI_init_conversation();
		VOLDIN->show_npc_face0(0x0000);
		say("\"Art thou a follower of this Fellowship, Scots?\"");
		SCOTS->show_npc_face1(0x0000);
		say("\"I'm a geographer, sir. And a sailor. Though I was brought here by The Fellowship to study this land, I do not practice their beliefs.\"");
		say("\"However, I see nothing wrong with The Fellowship. If anything, it seems that Leon speaks more of the truth than thine own Priestess.\"");
		UI_remove_npc_face1();
		0x0000->set_conversation_slot();
		say("\"Heresy! Leave this Temple and never return to our fair city, upon pain of death!\"");
		SCOTS->show_npc_face1(0x0000);
		say("\"And Lord British is no Daemon! He's a good man, and hath often commissioned me to create new maps for him...\"");
		UI_remove_npc_face1();
		0x0000->set_conversation_slot();
		say("\"Jorvin, if that man speaks another word, blast him with thy wand!\"");
		UI_end_conversation();
		Func097F(SCOTS, "@Not the wand!@", 0x0000);
		Func097F(VOLDIN, "@Jorvin...@", 0x0003);
		si_path_run_usecode([0x0407, 0x0679, 0x0000], SI_PATH_SUCCESS, item, Func07FB, false);
		var0004 = script JORVIN after 4 ticks {
			nohalt;
			actor frame bowing;
			actor frame standing;
		};
		var0004 = Func09A0(0x0001, 0x0001)->set_item_quality(var0000 + 0x0001);
		abort;
	}
	if (var0000 == 0x0031) {
		var0004 = Func09A0(0x0001, 0x0001)->set_item_quality(var0000 + 0x0001);
		var0004 = JORVIN->set_to_attack(SCOTS, 0x0118);
		var0004 = script JORVIN {
			actor frame strike_1h;
			attack;
			continue;
			sfx 53;
			actor frame standing;
		};
		var0004 = script item after 5 ticks {
			nohalt;
			call Func07FB;
		};
		abort;
	}
	if (var0000 == 0x0032) {
		UI_play_sound_effect(0x0039);
		Func097F(JORVIN, "@Damn, I missed...@", 0x0000);
		var0004 = script JORVIN {
			nohalt;
			actor frame bowing;
			actor frame sitting;
		};
		SCOTS->move_object([0x05F0, 0x078F, 0x0000]);
		SCOTS->run_schedule();
		Func08C6();
		var0004 = script VOLDIN after 3 ticks {
			nohalt;
			call Func07F8;
		};
		var0004 = Func09A0(0x0001, 0x0001)->set_item_quality(0x0019);
		abort;
	}
	if (var0000 == 0x0033) {
		gflags[TRIAL_ZULITH_SPOKE_BEFORE] = true;
		gflags[FAWN_TRIAL_ZULITH_SPOKE] = true;
		UI_init_conversation();
		ZULITH->show_npc_face0(0x0000);
		say("\"I had not expected to be called to witness, Captain Voldin. After all, I serve Lady Yelinda. Much of what I know is confidential.\"");
		VOLDIN->show_npc_face1(0x0000);
		say("\"Yet the course of this trial could affect state security, chancellor. This man is accused of aiding a Daemon to overthrow our city!\"");
		UI_remove_npc_face1();
		0x0000->set_conversation_slot();
		say("\"I must defer to the Lady...\"");
		YELINDA->show_npc_face1(0x0000);
		say("\"I don't see why thou couldst not speak freely, Zulith.\"");
		say("\"I know! If thou art about to reveal some important secret, I shall signal thee by clapping sharply. Then thou shouldst be silent.\"");
		UI_remove_npc_face1();
		0x0000->set_conversation_slot();
		say("\"Very well, Lady Yelinda.\"");
		say("\"Let it be known, therefore, that I have spent much of my recent time following ",
			var0003,
			" and his companions about town.\"");
		VOLDIN->show_npc_face1(0x0000);
		say("\"And what didst thou learn?\"");
		UI_remove_npc_face1();
		0x0000->set_conversation_slot();
		say("\"Nothing -- ",
			var0003,
			" was too sharp for me, and spotted me before I could learn much. However, I did see him conferring with Delin's daughter, and she is a known sympathizer with The Fellowship!\"");
		DELIN->show_npc_face1(0x0000);
		say("\"Watch thy words, Zulith! Or thou shalt have to reckon with me. I may be old, but I'm mean...\"");
		UI_remove_npc_face1();
		0x0000->set_conversation_slot();
		say("\"I meant no disrespect. Only everyone knows that The Fellowship is a Daemonic heresy, and that Alyssand hath become infatuated with Leon the Preacher.\"");
		VOLDIN->show_npc_face1(0x0000);
		say("\"And so Beast British, who is the force behind The Fellowship heresy, uses Alyssand to communicate with agents such as ",
			var0003,
			"! No further questions.\"");
		UI_end_conversation();
		Func097F(DELIN, "@Take that back!@", 0x0000);
		Func097F(ALYSSAND, "@Daemons? Bah!@", 0x0004);
		var0004 = "@Alyssand?@" & "@I never knew...@";
		Func094F(LEON, var0004);
		var0004 = Func09A0(0x0001, 0x0001)->set_item_quality(0x001D);
		var0005 = ZULITH->get_object_position() & (0x000A & 0x0006);
		var0006 = var0005->find_nearby(0x0113, 0x0028, MASK_EGG);
		if (var0006) {
			var0007 = var0006->get_object_position();
			si_path_run_usecode(var0007, SI_PATH_SUCCESS, item, Func07F8, false);
		}
		abort;
	}
	if (var0000 == 0x0034) {
		gflags[FAWN_TRIAL_YELINDA_SPOKE] = true;
		UI_init_conversation();
		ZULITH->show_npc_face0(0x0000);
		say("\"Voldin, thou dost extend thyself too far!\"");
		VOLDIN->show_npc_face1(0x0000);
		say("\"Please bear with me, Zulith. This is for the good of Fawn.\"");
		UI_remove_npc_face1();
		0x0000->set_conversation_slot();
		say("\"Very well, but there is no reason for the Lady to take the stand. She may speak from where she is.\"");
		UI_end_conversation();
		var0004 = Func09A0(0x0001, 0x0001)->set_item_quality(0x0035);
		var0004 = script ZULITH {
			say "@Milady, speak if thou wilt.@";
			wait 4;
			actor frame bowing;
			wait 2;
			actor frame sitting;
		};
		Func097F(YELINDA, "@I will speak.@", 0x0002);
		var0004 = script YELINDA after 4 ticks {
			actor frame bowing;
			wait 2;
			actor frame standing;
			wait 9;
			call Func07FB;
		};
		abort;
	}
	if (var0000 == 0x0035) {
		UI_init_conversation();
		VOLDIN->show_npc_face0(0x0000);
		say("\"Thou art most gracious, Lady. I shall make this brief...\"");
		say("\"For the benefit of the Oracle, couldst thou recount the scene at which ",
			var0003,
			" didst invoke the name of the Daemon British?\"");
		YELINDA->show_npc_face1(0x0000);
		say("\"I seem to recall that we were having a civil conversation. And then, without forewarning, ",
			var0003,
			" suddenly burst out with a vile and blasphemous oath!\"");
		UI_remove_npc_face1();
		0x0000->set_conversation_slot();
		say("\"Dost thou remember his precise words?\"");
		YELINDA->show_npc_face1(0x0000);
		say("\"To be truthful, the discussion was so distasteful that I quickly put it from my mind.\"");
		say("\"I believe he said -- Curse you all, and Beast British shall drink thy blood...\"");
		UI_remove_npc_face1();
		0x0000->set_conversation_slot();
		say("\"I thank thee for thy time, Lady Yelinda. Thou hast spoken fairly, as always.\"");
		UI_end_conversation();
		Func097F(Func08AC(true), "@I didn't say that!", 0x0000);
		var0004 = script YELINDA {
			nohalt;
			wait 2;
			actor frame bowing;
			wait 2;
			actor frame sitting;
		};
		var0004 = script VOLDIN after 10 ticks {
			nohalt;
			call Func07F8;
		};
		var0004 = Func09A0(0x0001, 0x0001)->set_item_quality(0x0019);
		abort;
	}
}

extern var Func09A0 0x9A0 (var var0000, var var0001);
extern var Func0953 0x953 ();
extern var Func08AC 0x8AC (var var0000);
extern void Func097F 0x97F (var var0000, var var0001, var var0002);
extern var Func0992 0x992 (var var0000, var var0001, var var0002, var var0003);
extern var Func0956 0x956 (var var0000);

void Func07FC object#(0x7FC) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;
	var var0008;

	var0000 = Func09A0(0x0001, 0x0001)->get_item_quality();
	var0001 = Func0953();
	var0002 = Func08AC(false);
	if (var0000 == 0x002C) {
		UI_init_conversation();
		JOTH->show_npc_face0(0x0000);
		if (JOTH->get_item_flag(MET)) {
			say("\"I am prepared for thy questions, ",
				var0001,
				". What dost thou care to question me about?\"");
		} else {
			say("\"What hast thou to do with me? I did not even set eyes upon ",
				var0002,
				" until this trial.\"");
		}
		converse (["the character of the accused", "Daemonism", "no questions"]) {
			case "the character of the accused":
				remove(["the character of the accused", "no questions"]);
				add("no further questions");
				if (JOTH->get_item_flag(MET)) {
					var0003 = Func08AC(false);
					if (gflags[IOLO_ACCUSED]) {
						say("\"To be honest, he did not strike me as an honest man. Never cared much for bards. Louts, every one of them!\"");
					}
					if (gflags[DUPRE_ACCUSED]) {
						say("\"Well, I must say that I find him likable. He does his duty without blabbering all the time.\"");
						say("\"Hard to believe a good man like Dupre would be in league with Daemon British...\"");
					}
					if (gflags[SHAMINO_ACCUSED]) {
						say("\"Hard to say. He doth not talk much, and always seems to be in a hurry...\"");
						say("\"Couldn't say more than that. Merely an ordinary knave.\"");
					}
				} else {
					say("\"Art thou daft? I said that I have never met the man. I can form no opinion.\"");
				}
				fallthrough;

			case "Daemonism":
				remove(["Daemonism", "no questions"]);
				add("no further questions");
				say("\"Look here, ",
					var0001,
					". I'm a captain, not a theologian. I find it hard to believe in something I can't touch or smell.\"");
				say("\"Yet all of our legends tell of this Beast British, and his crimes against our ancestors.\"");
				say("\"I suppose I don't know what to believe -- pardon me, Kylista...\"");
				fallthrough;

			case "no questions":
				AVATAR->show_npc_face1(0x0000);
				say("\"Forgive me. I have no questions for thee.\"");
				Func097F(item, "@Waste of time...@", 0x0000);
				// This could be a break instead; the original
				// skips the endconv from a break, which is why
				// I did it this way
				goto labelFunc07FC_0135;

			case "no further questions":
				Func097F(AVATAR, "@No further questions...@", 0x0000);
				// This could be a break instead; the original
				// skips the endconv from a break, which is why
				// I did it this way
				goto labelFunc07FC_0135;
		}
labelFunc07FC_0135:
		gflags[FAWN_TRIAL_LEON_JOTH_SPOKE] = true;
		var0003 = Func09A0(0x0001, 0x0001)->set_item_quality(0x001D);
		var0004 = JOTH->get_object_position() & (0x0004 & 0x0006);
		var0005 = var0004->find_nearby(0x0113, 0x0028, MASK_EGG);
		if (var0005) {
			var0006 = var0005->get_object_position();
			si_path_run_usecode(var0006, SI_PATH_SUCCESS, item, Func07F8, false);
		}
		UI_end_conversation();
		abort;
	}
	if (var0000 == 0x002F) {
		UI_init_conversation();
		GARTH->show_npc_face0(0x0000);
		say("\"Question me! I am ready. On what subject dost thou desire information?\"");
		converse (["the character of the accused", "Daemonism", "no questions"]) {
			case "the character of the accused":
				remove(["the character of the accused", "no questions"]);
				add("no further questions");
				var0003 = Func0992(0x0001, 0x0000, 0x0000, true);
				var0003 = var0003->get_npc_name();
				say("\"I have met him face to face, and I find ",
					var0003,
					" to be the most surly, disrespectful man I have ever seen.\"");
				say("\"He offends with every breath that comes out of his ugly face!\"");
				var0007 = Func08AC(false);
				if (var0003 != var0007) {
					OLON->show_npc_face1(0x0000);
					say("\"Captain, thou art confused. It is ",
						var0007,
						" on trial, not ",
						var0003,
						".\"");
					UI_remove_npc_face1();
					0x0000->set_conversation_slot();
					say("\"Why, thou art right, sailor. Nevertheless, I stand by my sworn testimony!\"");
					OLON->show_npc_face1(0x0000);
					say("\"I may be drunk, but I'm not stupid...\"");
					UI_remove_npc_face1();
					0x0000->set_conversation_slot();
				}
				fallthrough;

			case "Daemonism":
				remove(["Daemonism", "no questions"]);
				add("no further questions");
				say("\"Lest anyone be confused, let me state unequivocably that Daemons exist. Evil is real!\"");
				say("\"The tales of our forefathers -- about the Daemon King named British, and the lands he stole in the name of Virtue -- are literally true.\"");
				say("\"Lastly, I have absolute faith in the Priestess of Beauty... wherever she may be. She is too beautiful to be wrong!\"");
				fallthrough;

			case "no questions":
				AVATAR->show_npc_face1(0x0000);
				say("\"Forgive me. I have no questions for thee.\"");
				Func097F(item, "@Damned traitor...@", 0x0000);
				// This could be a break instead; the original
				// skips the endconv from a break, which is why
				// I did it this way
				goto labelFunc07FC_02C2;

			case "no further questions":
				Func097F(AVATAR, "@No further questions...@", 0x0000);
				// This could be a break instead; the original
				// skips the endconv from a break, which is why
				// I did it this way
				goto labelFunc07FC_02C2;
		}
labelFunc07FC_02C2:
		gflags[FAWN_TRIAL_RUGGS_GARTH_SPOKE] = true;
		var0003 = Func09A0(0x0001, 0x0001)->set_item_quality(0x001D);
		var0004 = GARTH->get_object_position() & (0x0005 & 0x0006);
		var0005 = var0004->find_nearby(0x0113, 0x0028, MASK_EGG);
		if (var0005) {
			var0006 = var0005->get_object_position();
			si_path_run_usecode(var0006, SI_PATH_SUCCESS, item, Func07F8, false);
		}
		UI_end_conversation();
		abort;
	}
	if (var0000 == 0x0027) {
		UI_init_conversation();
		JENDON->show_npc_face0(0x0000);
		say("\"Why hast thou brought me before the Oracle, Avatar? Ask me thy questions.\"");
		add(["the character of the accused", "Daemonism"]);
		if (gflags[TRIAL_ASK_JENDON_STRANGE_OBJECTS]) {
			add("strange objects");
		}
		if (gflags[TRIAL_ASK_DELIN_FUR_CAP]) {
			add("ancient ruins");
		}
		if (gflags[TRIAL_ASK_JENDON_SAVAGES]) {
			add("savages");
		}
		if (gflags[KNOWS_JENDON_MET_GWENNO]) {
			add("Gwenno");
		}
		converse ("no questions") {
			case "strange objects":
				remove(["strange objects", "no questions"]);
				add("no further questions");
				say("\"That is what I said in my testimony -- ",
					var0002,
					" brought me strange items, and asked me to identify them.\"");
				var0008 = Func0992(0x0001, "@But thou art an innkeeper! Surely, many folks bring thee mysteries...@", 0x0000, false);
				0x0000->set_conversation_slot();
				say("\"Mayhaps, stranger. But nothing half so strange...\"");
				fallthrough;

			case "ancient ruins":
				remove(["ancient ruins", "no questions"]);
				add("no further questions");
				say("\"",
					var0002,
					" did ask me about the ancient ruins, indeed. Very suspicious.\"");
				var0008 = Func0992(0x0001, "@Surely, others ask of these same things?@", 0x0000, false);
				0x0000->set_conversation_slot();
				say("\"Indeed, the sage Batlin was also curious about the ruins.\"");
				GARTH->show_npc_face1(0x0000);
				say("\"See how the evidence convicts him! I tell thee, this ",
					var0002,
					" works for Batlin, and both are tools of Beast British!\"");
				UI_remove_npc_face1();
				0x0000->set_conversation_slot();
				fallthrough;

			case "savages":
				remove(["savages", "no questions"]);
				add("no further questions");
				say("\"We did speak of the northern barbarians, ",
					var0002,
					" and I. He seemed to relish the most grisly parts of the tale.\"");
				OLON->show_npc_face1(0x0000);
				say("\"Ah, but thou dost tell that tale to everyone, Jendon. Thou canst not convict a man for listening to thy tales...\"");
				UI_remove_npc_face1();
				0x0000->set_conversation_slot();
				fallthrough;

			case "Gwenno":
				remove(["Gwenno", "no questions"]);
				add("no further questions");
				say("\"Yes, I did meet the scholar when she was here. A fine lady, of good temperament.\"");
				if (gflags[IOLO_ACCUSED]) {
					say("\"I find it hard to believe that Iolo could be guilty of Daemonism, yet be wed to such a wonderful lady.\"");
				} else {
					say("\"But I fail to see any connection between that good lady, and this trial.\"");
				}
				fallthrough;

			case "the character of the accused":
				remove(["the character of the accused", "no questions"]);
				add("no further questions");
				if (JENDON->get_item_flag(MET)) {
					if (gflags[IOLO_ACCUSED]) {
						say("\"A prince of a man! Why, when he breaks into song, I can hardly keep the crowds out of mine inn!\"");
						YELINDA->show_npc_face1(0x0000);
						say("\"Such a man hardly sounds like the servant of Daemons, innkeeper.\"");
						UI_remove_npc_face1();
						0x0000->set_conversation_slot();
						say("\"Aye. But then again, doth legend not claim that Daemons have silver tongues? This Iolo doth certainly have charm...\"");
					}
					if (gflags[SHAMINO_ACCUSED]) {
						say("\"Can't say as I like him much, ",
							var0001,
							". He doth not drink much, nor doth he seem to enjoy the entertainments of the inn.\"");
						ZULITH->show_npc_face1(0x0000);
						say("\"Doth Shamino not have the passions of a normal man, Jendon?\"");
						UI_remove_npc_face1();
						0x0000->set_conversation_slot();
						say("\"Perhaps. Or he may merely be driven by his cause. Shamino is far too serious.\"");
					}
					if (gflags[DUPRE_ACCUSED]) {
						say("\"He can out-drink any man in this town, and I think he could out-fight nearly everyone except Jorvin!\"");
						say("\"I must admit, Dupre is a likable man. Hard to believe he's a tool of Beast British.\"");
					}
				} else {
					say("\"Not having met the man, I have little to say about him. He needs a shave.\"");
				}
				fallthrough;

			case "Daemonism":
				remove(["Daemonism", "no questions"]);
				add("no further questions");
				say("\"Do I believe in Daemonism? Of course. My mother told me the legends when I was a mere child.\"");
				say("\"And even if I didn't -- why, I'm an innkeeper, ",
					var0001,
					". For the sake of my business, friend, I dare not disagree with the Priestess of Beauty.\"");
				fallthrough;

			case "no questions":
				AVATAR->show_npc_face1(0x0000);
				say("\"Forgive me. I have no questions for thee.\"");
				Func097F(item, "@Strange kind of person...@", 0x0000);
				// This could be a break instead; the original
				// skips the endconv from a break, which is why
				// I did it this way
				goto labelFunc07FC_0595;

			case "no further questions":
				Func097F(AVATAR, "@No further questions...@", 0x0000);
				// This could be a break instead; the original
				// skips the endconv from a break, which is why
				// I did it this way
				goto labelFunc07FC_0595;
		}
labelFunc07FC_0595:
		gflags[FAWN_TRIAL_JENDON_SPOKE] = true;
		var0003 = Func09A0(0x0001, 0x0001)->set_item_quality(0x001D);
		var0004 = JENDON->get_object_position() & (0x0010 & 0x0006);
		var0005 = var0004->find_nearby(0x0113, 0x0028, MASK_EGG);
		if (var0005) {
			var0006 = var0005->get_object_position();
			si_path_run_usecode(var0006, SI_PATH_SUCCESS, item, Func07F8, false);
		}
		UI_end_conversation();
		abort;
	}
	if (var0000 == 0x0026) {
		UI_init_conversation();
		DELPHYNIA->show_npc_face0(0x0000);
		say("\"Hail to Beauty, and the omnipotence of the Oracle!\"");
		say("\"I shall answer thy questions truthfully, Avatar. Of what can I tell thee?\"");
		add(["the character of the accused", "Daemonism"]);
		if (gflags[TRIAL_ASK_DELPHYNIA_VARO_LEAVES]) {
			add("Varo Leaves");
		}
		converse ("no questions") {
			case "Varo Leaves":
				remove(["Varo Leaves", "no questions"]);
				add("no further questions");
				say("\"I did provide Varo Leaves for ",
					var0002,
					", as I did testify before. And such leaves are used to treat poisons and curses.\"");
				AVATAR->show_npc_face1(0x0000);
				say("\"It was not ",
					var0002,
					" who was cursed, Delphynia. 'Twas I, poisoned by a treacherous woman in the city of Monitor.\"");
				UI_remove_npc_face1();
				0x0000->set_conversation_slot();
				say("\"Mine apologies, ",
					var0001,
					". I did not know...\"");
				GARTH->show_npc_face1(0x0000);
				say("\"How do we know this to be true? I say that he lies!\"");
				UI_remove_npc_face1();
				0x0000->set_conversation_slot();
				fallthrough;

			case "the character of the accused":
				remove(["the character of the accused", "no questions"]);
				add("no further questions");
				if (gflags[IOLO_ACCUSED]) {
					say("\"He did strike me as a kindly man, of affable temperament. Good with children. Not the kind to consort with Daemons.\"");
				}
				if (gflags[SHAMINO_ACCUSED]) {
					say("\"He doth have honest eyes. He is a hard man to like, but I do not think he is a bad sort.\"");
				}
				if (gflags[DUPRE_ACCUSED]) {
					say("\"This man drinks far too much, and his health will surely suffer for this some day! He is also a bit of a braggart, and he doth think himself a ladies' man --\"");
					say("\"He did try to steal a kiss from me!\"");
					say("\"Dupre doth have an evil heart. I'd not be surprised if he were in the service of Daemons.\"");
				}
				fallthrough;

			case "Daemonism":
				remove(["Daemonism", "no questions"]);
				add("no further questions");
				say("\"I do believe in Daemons. There is much evil in this world, and I do not believe that we cause it of ourselves.\"");
				say("\"Our ancestors did beat the British by escaping to this land. Is it so incredible that the Daemon would want revenge?\"");
				say("\"We should be very afraid, all of us...\"");
				fallthrough;

			case "no questions":
				AVATAR->show_npc_face1(0x0000);
				say("\"Forgive me. I have no questions for thee.\"");
				Func097F(item, "@Never mind...@", 0x0000);
				// This could be a break instead; the original
				// skips the endconv from a break, which is why
				// I did it this way
				goto labelFunc07FC_074A;

			case "no further questions":
				Func097F(AVATAR, "@No further questions...@", 0x0000);
				// This could be a break instead; the original
				// skips the endconv from a break, which is why
				// I did it this way
				goto labelFunc07FC_074A;
		}
labelFunc07FC_074A:
		gflags[FAWN_TRIAL_DELPHYNIA_SPOKE] = true;
		var0003 = Func09A0(0x0001, 0x0001)->set_item_quality(0x001D);
		var0004 = DELPHYNIA->get_object_position() & (0x0012 & 0x0006);
		var0005 = var0004->find_nearby(0x0113, 0x0028, MASK_EGG);
		if (var0005) {
			var0006 = var0005->get_object_position();
			si_path_run_usecode(var0006, SI_PATH_SUCCESS, item, Func07F8, false);
		}
		UI_end_conversation();
		abort;
	}
	if (var0000 == 0x001F) {
		UI_init_conversation();
		DELIN->show_npc_face0(0x0000);
		say("\"Oh... I'm not used to standing in public like this... crowds make me nervous...\"");
		say("\"Let this be swift. Ask thy questions.\"");
		add(["the character of the accused", "Daemonism"]);
		if (gflags[TRIAL_ASK_ALYSSAND_RING]) {
			add("engagement ring");
		}
		converse ("no questions") {
			case "engagement ring":
				remove(["engagement ring", "no questions"]);
				add("no further questions");
				say("\"That is what Alyssand said in her testimony -- that thy friend did return her engagement ring to her.\"");
				say("\"Mighty nice of him, I say. He looks to be a good lad. Doth he need a wife?\"");
				if (gflags[IOLO_ACCUSED]) {
					IOLO->show_npc_face1(0x0000);
					say("\"I already have a wife, thank thee!\"");
				}
				if (gflags[DUPRE_ACCUSED]) {
					DUPRE->show_npc_face1(0x0000);
					say("\"I'm afraid thy daughter is not lively enough for me, old man.\"");
				}
				if (gflags[SHAMINO_ACCUSED]) {
					SHAMINO->show_npc_face1(0x0000);
					say("\"This is not the time for idle chat, good man. My life is at stake!\"");
				}
				UI_remove_npc_face1();
				0x0000->set_conversation_slot();
				say("\"I know that the Priestess fears that the ring was stolen by magical means. But what about the storms! They steal things every day. Could not a storm have taken my daughter's ring?\"");
				fallthrough;

			case "the character of the accused":
				remove(["the character of the accused", "no questions"]);
				add("no further questions");
				if (gflags[IOLO_ACCUSED]) {
					say("\"He looks to be too old for my daughter, now that I see him clearly.\"");
					say("\"When a man ages, he starts to lose his mind. Wouldn't want mine Alyssand to have to deal with someone like that...\"");
				}
				if (gflags[SHAMINO_ACCUSED]) {
					say("\"Doth he not ever smile? He doth have the look of a convict, that's what I say.\"");
				}
				if (gflags[DUPRE_ACCUSED]) {
					say("\"He looks like a fine lad, he doth.\"");
					say("\"",
						var0002,
						"! Come by the shop afterwards, and I'll introduce ye to my daughter!\"");
				}
				fallthrough;

			case "Daemonism":
				remove(["Daemonism", "no questions"]);
				add("no further questions");
				say("\"Very frightening. Don't care much for Daemons.\"");
				fallthrough;

			case "no questions":
				AVATAR->show_npc_face1(0x0000);
				say("\"Forgive me. I have no questions for thee.\"");
				Func097F(item, "@Nor I for thee...@", 0x0000);
				// This could be a break instead; the original
				// skips the endconv from a break, which is why
				// I did it this way
				goto labelFunc07FC_0904;

			case "no further questions":
				Func097F(AVATAR, "@No further questions...@", 0x0000);
				// This could be a break instead; the original
				// skips the endconv from a break, which is why
				// I did it this way
				goto labelFunc07FC_0904;
		}
labelFunc07FC_0904:
		gflags[FAWN_TRIAL_DELIN_SPOKE] = true;
		var0003 = Func09A0(0x0001, 0x0001)->set_item_quality(0x001D);
		var0004 = DELIN->get_object_position() & (0x000E & 0x0006);
		var0005 = var0004->find_nearby(0x0113, 0x0028, MASK_EGG);
		if (var0005) {
			var0006 = var0005->get_object_position();
			si_path_run_usecode(var0006, SI_PATH_SUCCESS, item, Func07F8, false);
		}
		UI_end_conversation();
		abort;
	}
	if (var0000 == 0x002E) {
		UI_init_conversation();
		OLON->show_npc_face0(0x0000);
		say("\"Hail to Lady Yelinda, Hail to the Oracle, hail to... hail to everyone!\"");
		JENDON->show_npc_face1(0x0000);
		say("\"I'm afraid he hath been drinking...\"");
		UI_remove_npc_face1();
		0x0000->set_conversation_slot();
		say("\"I drinks ta forget my pain, innkeeper. Go ahead, Avatar. Ask me thy questions.\"");
		converse (["the character of the accused", "Daemonism", "drinking", "no questions"]) {
			case "the character of the accused":
				remove(["the character of the accused", "no questions"]);
				add("no further questions");
				if (OLON->get_item_flag(MET)) {
					if (gflags[IOLO_ACCUSED]) {
						say("\"He looks like he hath had one too many tips of the bottle, if ya know what I mean.\"");
					}
					if (gflags[SHAMINO_ACCUSED]) {
						say("\"What a sourpuss! Wouldn't even share a glass of ale with me...\"");
					}
					if (gflags[DUPRE_ACCUSED]) {
						say("\"I love that man! Dupre, sing that drinking song thou didst teach me, the one about all the young ladies?\"");
						ZULITH->show_npc_face1(0x0000);
						say("\"I don't think that would be advisable.\"");
						UI_remove_npc_face1();
						0x0000->set_conversation_slot();
						say("\"I have my lute with me...\"");
						UI_play_music(0x003B, Func09A0(0x0005, 0x0001));
						say("\"If all the young ladies were bricks in a pile,\"");
						UI_play_music(0x003C, Func09A0(0x0005, 0x0001));
						say("\"I'd be a mason and lay them in style!\"");
						UI_play_music(0x003D, Func09A0(0x0005, 0x0001));
						say("\"Roll thy leg over, roll thy leg over...\"");
						ZULITH->show_npc_face1(0x0000);
						say("\"Zounds, man! In the earshot of Lady Yelinda? Hast thou no decency!\"");
						Func097F(OLON, "@Leave me alone...@", 0x0000);
						// This could be a break instead; the original
						// skips the endconv from a break, which is why
						// I did it this way
						goto labelFunc07FC_0B2E;
					}
				} else {
					say("\"Don't believe I've met the man before.\"");
				}
				fallthrough;

			case "Daemonism":
				remove(["Daemonism", "no questions"]);
				add("no further questions");
				say("\"I used ta believe in that stuff. But what Beauty is there in the world for a sailor who cannot sail?\"");
				say("\"If the Oracle is so powerful, why did it not save us from the storms? Why did it let so many good men die?\"");
				GARTH->show_npc_face1(0x0000);
				say("\"Foul blasphemy! Hold thy tongue, rogue, or face the wrath of the Oracle.\"");
				UI_remove_npc_face1();
				0x0000->set_conversation_slot();
				say("\"I may be a drunk, but I be an honest drunk. I shall follow no hypocrite ta a watery grave.\"");
				Func097F(OLON, "@That's all I have to say...@", 0x0000);
				// This could be a break instead; the original
				// skips the endconv from a break, which is why
				// I did it this way
				goto labelFunc07FC_0B2E;

			case "drinking":
				remove(["drinking", "no questions"]);
				add("no further questions");
				say("\"Why do I drink so much? That's rather a personal question...\"");
				say("\"I be a sailor stranded on the shore, mate. 'Tis no worse fate. With my very own eyes, I have seen our fleet blasted to wreckage by the storms. I saw sailors die!\"");
				say("\"Why would a man who hath cheated death not drink, Avatar? Perhaps I should have died with my brothers...\"");
				fallthrough;

			case "no questions":
				AVATAR->show_npc_face1(0x0000);
				say("\"Forgive me. I have no questions for thee.\"");
				Func097F(item, "@Drunkard...@", 0x0000);
				// This could be a break instead; the original
				// skips the endconv from a break, which is why
				// I did it this way
				goto labelFunc07FC_0B2E;

			case "no further questions":
				Func097F(AVATAR, "@No further questions...@", 0x0000);
				// This could be a break instead; the original
				// skips the endconv from a break, which is why
				// I did it this way
				goto labelFunc07FC_0B2E;
		}
labelFunc07FC_0B2E:
		gflags[FAWN_TRIAL_OLON_SPOKE] = true;
		var0003 = Func09A0(0x0001, 0x0001)->set_item_quality(0x001D);
		var0004 = OLON->get_object_position() & (0x0011 & 0x0006);
		var0005 = var0004->find_nearby(0x0113, 0x0028, MASK_EGG);
		if (var0005) {
			var0006 = var0005->get_object_position();
			si_path_run_usecode(var0006, SI_PATH_SUCCESS, item, Func07F8, false);
		}
		UI_end_conversation();
		abort;
	}
	if (var0000 == 0x0034) {
		UI_init_conversation();
		YELINDA->show_npc_face0(0x0000);
		say("\"I shall answer thy questions, ",
			var0001,
			", for the sake of the Oracle. But do not try my patience.\"");
		converse (["the character of the accused", "Daemonism", "Dupre's words", "no questions"]) {
			case "Dupre's words":
				remove(["Dupre's words", "no questions"]);
				add("no further questions");
				say("\"I do not remember every word uttered in my presence, ",
					var0001,
					".\"");
				Func08AC(true)->show_npc_face1(0x0000);
				say("\"These were mine exact words, Lady -- All hail Lord British and the glory that is Britannia!\"");
				UI_remove_npc_face1();
				0x0000->set_conversation_slot();
				say("\"Beauty forbid! Thou hast spouted the blasphemy again!\"");
				Func097F(YELINDA, "@I cannot bear this!@", 0x0000);
				// This could be a break instead; the original
				// skips the endconv from a break, which is why
				// I did it this way
				goto labelFunc07FC_0CC8;

			case "the character of the accused":
				remove(["the character of the accused", "no questions"]);
				add("no further questions");
				if (gflags[IOLO_ACCUSED]) {
					say("\"He seems to be an unstable man. Sociable at one moment, and deranged in the next!\"");
				}
				if (gflags[SHAMINO_ACCUSED]) {
					say("\"He frightens me. Look into those cold, hard eyes! Aren't those the eyes of a murderer?\"");
				}
				if (gflags[DUPRE_ACCUSED]) {
					say("\"This is a wild man, full of passions and lusts! I can feel his eyes on me now...\"");
				}
				fallthrough;

			case "Daemonism":
				remove(["Daemonism", "no questions"]);
				add("no further questions");
				say("\"There is no doubt that Daemon British exists. I have seen the records left by previous generations.\"");
				say("\"The Beast did conquer all of Sosaria, and did force the Fawnese to flee into the sea. How cruel!\"");
				say("\"I have always hated the Beast, and I always shall!\"");
				fallthrough;

			case "no questions":
				AVATAR->show_npc_face1(0x0000);
				say("\"Forgive me. I have no questions for thee.\"");
				Func097F(ZULITH, "@Such impudence!@", 0x0002);
				Func097F(JOTH, "@For shame!@", 0x0000);
				// This could be a break instead; the original
				// skips the endconv from a break, which is why
				// I did it this way
				goto labelFunc07FC_0CC8;

			case "no further questions":
				Func097F(AVATAR, "@No further questions...@", 0x0000);
				// This could be a break instead; the original
				// skips the endconv from a break, which is why
				// I did it this way
				goto labelFunc07FC_0CC8;
		}
labelFunc07FC_0CC8:
		gflags[FAWN_TRIAL_YELINDA_SPOKE] = true;
		var0003 = Func09A0(0x0001, 0x0001)->set_item_quality(0x001D);
		var0004 = YELINDA->get_object_position() & (0x0002 & 0x0006);
		var0005 = var0004->find_nearby(0x0113, 0x0028, MASK_EGG);
		if (var0005) {
			var0006 = var0005->get_object_position();
			si_path_run_usecode(var0006, SI_PATH_SUCCESS, item, Func07F8, false);
		}
		UI_end_conversation();
		abort;
	}
	if (var0000 == 0x0033) {
		UI_init_conversation();
		ZULITH->show_npc_face0(0x0000);
		say("\"Ask thy questions, Avatar. However, I shall reserve the right to silence. After all, I am the custodian of Lady Yelinda's confidential matters.\"");
		converse (["the character of the accused", "Daemonism", "following me", "no questions"]) {
			case "following me":
				remove(["following me", "no questions"]);
				add("no further questions");
				do {
					if (gflags[TRIAL_ZULITH_SPOKE_BEFORE]) {
						say("\"As I stated in the earlier session of these proceedings, ",
							var0002,
							" was too sharp for me. However, I did see him conferring with Delin's daughter, and she is a known sympathizer with The Fellowship!\"");
					} else {
						say("\"I do not have to answer that question. This is a matter of state security.\"");
						var0003 = Func0956(["protest", "accept"]);
						if (var0003 == "protest") {
							say("\"I don't have to answer thy questions, traitor!\"");
							YELINDA->show_npc_face1(0x0000);
							say("\"The Oracle must hear all of the facts, if it is to decide fairly. Chancellor, I give my permission to speak of thy secrets.\"");
							UI_remove_npc_face1();
							0x0000->set_conversation_slot();
						} else {
							say("\"Ask me something else...\"");
							break;
						}
						say("\"I followed ",
							var0002,
							" about this town, until he spotted me. No doubt I prevented him from great evil!\"");
						DELPHYNIA->show_npc_face1(0x0000);
						say("\"But thou didst not see him actually perform any vile acts?\"");
						UI_remove_npc_face1();
						0x0000->set_conversation_slot();
						say("\"He contacted Alyssand, madam! I saw them speaking together, and casting many sly glances in my direction.\"");
					}
					DELIN->show_npc_face1(0x0000);
					say("\"My daughter is not on trial here, chancellor...\"");
					UI_remove_npc_face1();
					0x0000->set_conversation_slot();
					say("\"Well... I suppose not...\"");
				} while (false);
				var0003 = 0x0001;
				fallthrough;

			case "the character of the accused":
				remove(["the character of the accused", "no questions"]);
				add("no further questions");
				if (gflags[IOLO_ACCUSED]) {
					say("\"Isn't it obvious? The bard is a light-minded man, disrespectful of proper authority! Iolo is not a man to be trusted.\"");
				}
				if (gflags[SHAMINO_ACCUSED]) {
					say("\"He possesses the grim silence of the professional executioner. Shamino never laughs. I find him to be disquieting...\"");
				}
				if (gflags[DUPRE_ACCUSED]) {
					say("\"Why, the man is a known drunkard, and a companion of thieves and cut-throats. Look at those he consorts with!\"");
				}
				fallthrough;

			case "Daemonism":
				remove(["Daemonism", "no questions"]);
				add("no further questions");
				say("\"Dost thou not feel the sudden chill in this Temple, at the very mention of Beast British?\"");
				say("\"I tell thee, the Daemon exists, and his schemes to destroy Fawn can only be averted by the justice of the Oracle!\"");
				fallthrough;

			case "no questions":
				AVATAR->show_npc_face1(0x0000);
				say("\"Forgive me. I have no questions for thee.\"");
				Func097F(item, "@Idiot...@", 0x0000);
				// This could be a break instead; the original
				// skips the endconv from a break, which is why
				// I did it this way
				goto labelFunc07FC_0EB4;

			case "no further questions":
				Func097F(AVATAR, "@No further questions...@", 0x0000);
				// This could be a break instead; the original
				// skips the endconv from a break, which is why
				// I did it this way
				goto labelFunc07FC_0EB4;
		}
labelFunc07FC_0EB4:
		gflags[FAWN_TRIAL_ZULITH_SPOKE] = true;
		var0003 = Func09A0(0x0001, 0x0001)->set_item_quality(0x001D);
		var0004 = ZULITH->get_object_position() & (0x000A & 0x0006);
		var0005 = var0004->find_nearby(0x0113, 0x0028, MASK_EGG);
		if (var0005) {
			var0006 = var0005->get_object_position();
			si_path_run_usecode(var0006, SI_PATH_SUCCESS, item, Func07F8, false);
		}
		UI_end_conversation();
		abort;
	}
}

extern void Func092F 0x92F (var var0000, var var0001);
extern void Func0937 0x937 (var var0000, var var0001, var var0002, var var0003, var var0004, var var0005, var var0006, var var0007);
extern var Func0930 0x930 (var var0000, var var0001, var var0002);
extern void Func092E 0x92E (var var0000);
extern void Func07F9 object#(0x7F9) ();

void Func07FD object#(0x7FD) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;
	var var0008;
	var var0009;
	var var000A;
	var var000B;
	var var000C;

	if (event == BG_PATH_FAILURE) {
		gflags[TEMP_FLAG_1] = true;
		var0000 = script item after 1 ticks {
			call Func07FD;
		};
	}
	if (event == PATH_SUCCESS) {
		gflags[TEMP_FLAG_2] = true;
		var0000 = script item after 1 ticks {
			call Func07FD;
		};
	}
	if (event == PATH_FAILURE) {
		gflags[TEMP_FLAG_4] = true;
		var0000 = script item after 1 ticks {
			call Func07FD;
		};
	}
	if (event == SCRIPTED) {
		if (gflags[TEMP_FLAG_1] && (!gflags[TEMP_FLAG_3])) {
			gflags[TEMP_FLAG_1] = false;
			set_camera();
			var0001 = find_nearby(0x036F, 0x001E, MASK_NONE);
			for (var0004 in var0001 with var0002 to var0003) {
				var0005 = var0004->get_object_position();
				if ((var0005[0x0001] == 0x03F4) && ((var0005[0x0002] == 0x0A7F) && (var0005[0x0003] == 0x0006))) {
					break;
				}
			} nobreak {
				Func092F(item, 0x0002);
			}
			var0006 = [-2, -3, -1];
			var0007 = [ 0,  0,  0];
			Func0937(item, var0004, var0006, var0007, 0x0000, Func07FD, item, PATH_SUCCESS);
		}
		if (gflags[TEMP_FLAG_2]) {
			gflags[TEMP_FLAG_2] = false;
			var0008 = Func0930(item, 0x0178, 0x0023);
			if (!var0008) {
				Func092F(item, 0x0003);
			}
			var0006 = [ 3,  3,  3];
			var0007 = [-1, -2,  0];
			Func0937(item, var0008, var0006, var0007, 0x0000, Func07F9, item, PATH_FAILURE);
		}
		if (gflags[TEMP_FLAG_3]) {
			gflags[TEMP_FLAG_4] = true;
			Func092E(item);
			return;
		}
		if (gflags[TEMP_FLAG_4]) {
			gflags[TEMP_FLAG_4] = false;
			var0008 = Func0930(item, 0x0178, 0x001E);
			if (!var0008) {
				Func092F(item, 0x0013);
			}
			var0009 = AVATAR->find_nearby(0x00E4, 0x0023, MASK_NONE);
			for (var000C in var0009 with var000A to var000B) {
				if (var000C->get_npc_id() == 0x0009) {
					break;
				}
			} nobreak {
				Func092F(item, 0x0016);
			}
			var0005 = var0008->get_object_position();
			var000C->si_path_run_usecode([(var0005[0x0001] + 0x0002), (var0005[0x0002] - 0x0004), var0005[0x0003]], PATH_SUCCESS, item, Func07F9, true);
		}
	}
	if (event == SI_PATH_FAILURE) {
		Func092F(item, 0x0015);
	}
}

extern var Func0930 0x930 (var var0000, var var0001, var var0002);
extern var Func0908 0x908 (var var0000, var var0001, var var0002, var var0003, var var0004, var var0005);
extern void Func0909 0x909 (var var0000, var var0001, var var0002, var var0003, var var0004, var var0005, var var0006, var var0007, var var0008);
extern void Func0907 0x907 (var var0000, var var0001);
extern void Func0903 0x903 ();
extern var Func0932 0x932 (var var0000);
extern void Func09AA 0x9AA ();

void Func07FF object#(0x7FF) () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;
	var var0008;
	var var0009;
	var var000A;
	var var000B;
	var var000C;
	var var000D;
	var var000E;
	var var000F;
	var var0010;
	var var0011;
	var var0012;
	var var0013;
	var var0014;
	var var0015;
	var var0016;
	var var0017;

	var0000 = Func0930(item, 0x010E, 0x002D);
	if (var0000) {
		if (Func0908(var0000, 0x0178, 0x0000, 0x0000, 0x0000, 0x0007)) {
			Func0909(var0000, 0x01B0, 0x0001, 0x0001, 0x01B1, 0x0000, 0x0000, 0x0003, 0x0005);
			UI_play_sound_effect2(0x001F, var0000);
			Func0907(var0000, 0x0002);
		} else {
			Func0903();
		}
	}
	var0001 = find_nearby(0x0320, 0x003C, MASK_NONE);
	for (var0004 in var0001 with var0002 to var0003) {
		if (var0004->get_item_quality() == 0x00EB) {
			var0004->set_item_shape(0x020A);
		}
	}
	var0005 = AVATAR->find_nearby(ANY_SHAPE, 0x002D, MASK_NPC);
	for (var0000 in var0005 with var0006 to var0007) {
		if (var0000->get_npc_id() == 0x000D) {
			var0000->add_to_party();
			var0000->set_npc_id(0x0000);
		}
	}
	var0005 = [CALADIN, TEMPLAR, SHAZZANA, LUTHER, BRENDANN];
	for (var0000 in var0005 with var0008 to var0009) {
		if (Func0932(var0000)) {
			var0000->clear_item_flag(DEAD);
			var0000->set_npc_id(0x0000);
			var0000->run_schedule();
		}
	}
	if (item != AVATAR->get_npc_object()) {
		set_npc_id(0x0000);
	}
	set_alignment(GOOD);
	if (!(item == AVATAR->get_npc_object())) {
		AVATAR->get_npc_object()->set_camera();
		set_schedule_type(FOLLOW_AVATAR);
	}
	var0005 = find_nearby(0x00E4, 0x0023, MASK_NONE);
	do {
		for (var0000 in var0005 with var000A to var000B) {
			if (var0000->get_npc_id() == 0x0009) {
				break;
			}
		} nobreak {
			break;
		}
		var0000->clear_item_say();
		var0000->si_path_run_usecode([0x03FB, 0x0A77, 0x0006], SI_PATH_SUCCESS, var0000, Func00E4, true);
		break;
	} while (false);
	var0005 = find_nearby(0x020A, 0x002D, MASK_NONE);
	do {
		for (var0000 in var0005 with var000C to var000D) {
			if (var0000->get_item_quality() == 0x00EB) {
				var000E = var0000;
				break;
			}
		} nobreak {
			break;
		}
		var0005 = var000E->get_cont_items(SHAPE_ANY, QUALITY_ANY, FRAME_ANY);
		if (var0005) {
			var0005 = get_cont_items(SHAPE_ANY, QUALITY_ANY, FRAME_ANY);
			for (var0000 in var0005 with var000F to var0010) {
				if (!((var0000->get_item_shape() == 0x01E6) || (var0000->get_item_shape() == 0x025F))) {
					var0000->remove_item();
				}
			}
		}
		var0005 = var000E->get_cont_items(SHAPE_ANY, QUALITY_ANY, FRAME_ANY);
		for (var0000 in var0005 with var0011 to var0012) {
			if (var0000->set_last_created()) {
				var0001 = give_last_created();
			}
		}
	} while (false);
	Func09AA();
	HAZARD->show_npc_face0(0x0000);
	var0013 = get_object_position();
	var0014 = var0013[0x0001];
	var0015 = var0013[0x0003];
	var0013 = var0013[0x0002];
	var0016 = 0x0000 - get_npc_number();
	var0017 = UI_game_hour();
	say("\"Failed out of tournament code at hour ",
		var0017,
		" gametime. Npc #",
		var0016,
		" was training, and he was at coord (",
		var0014,
		",",
		var0013,
		",",
		var0015,
		").\"");
	if (gflags[TEMP_FLAG_1]) {
		say("\"$Temp1Flag was set to true.\"");
	}
	if (gflags[TEMP_FLAG_2]) {
		say("\"$Temp2Flag was set to true.\"");
	}
	if (gflags[TEMP_FLAG_3]) {
		say("\"$Temp3Flag was set to true.\"");
	}
	if (gflags[TEMP_FLAG_4]) {
		say("\"$Temp4Flag was set to true.\"");
	}
	if (gflags[LEAVING_LIST_FIELD]) {
		say("\"We had just finished the tournament and were on our way to the list field door.\"");
	}
	if (gflags[TRAINING_FLAG_SET]) {
		say("\"The training flag was set.\"");
	}
	if (gflags[MONITOR_TRAINING]) {
		say("\"And, of course, the tournament flag was set.\"");
	}
	if (Func0932(item)) {
		say("\"Moreover, the student was in the list fields.\"");
	}
	if (Func0932(item)) {
		move_object([0x03F8, 0x0A7D, 0x0006]);
		say("\"All right, thy time is over!\"");
	} else {
		say("\"Ummm.... I cannot seem to find my keys. Thou mightest return later.\"");
	}
	UI_remove_npc_face0();
	gflags[TEMP_FLAG_1] = false;
	gflags[TEMP_FLAG_2] = false;
	gflags[TEMP_FLAG_3] = false;
	gflags[TEMP_FLAG_4] = false;
	gflags[LEAVING_LIST_FIELD] = false;
	gflags[TRAINING_FLAG_SET] = false;
	gflags[MONITOR_TRAINING] = false;
}

void Func0800 0x800 () {
	var var0000;

	var0000 = 0x0001;
}

void Func0801 0x801 () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;

	var0000 = false;
	var0001 = [ZULITH, JORVIN, GARTH, VOLDIN, JOTH];
	for (var0004 in var0001 with var0002 to var0003) {
		if (var0004->npc_nearby()) {
			var0000 = true;
		}
	}
	if (var0000 && (!(gflags[ORACLE_SET_TO_CORRUPT] && gflags[FAWN_TRIAL_DONE]))) {
		var0005 = "@Lower thy voice, lest our enemies hear...@" & ("@We must whisper, or they shall hear us.@" & ("@Come closer, so none can hear what we say.@" & "@Our enemies are near -- keep thy voice down.@"));
		var0005 = var0005[UI_get_random(UI_get_array_size(var0005))];
		say(var0005,
			"");
	}
}

void Func0802 0x802 () {
	gflags[AVATAR_JOINED_REBELS] = true;
	ALYSSAND->revert_schedule();
	ALYSSAND->run_schedule();
}

extern var Func0954 0x954 ();
extern var Func0942 0x942 (var var0000);
extern var Func0957 0x957 (var var0000);
extern var Func0955 0x955 ();
extern var Func0804 0x804 (var var0000, var var0001);
extern var Func0943 0x943 (var var0000, var var0001, var var0002, var var0003, var var0004, var var0005, var var0006, var var0007);
extern var Func0992 0x992 (var var0000, var var0001, var var0002, var var0003);

void Func0803 0x803 () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;
	var var0008;
	var var0009;
	var var000A;
	var var000B;
	var var000C;
	var var000D;
	var var000E;
	var var000F;
	var var0010;
	var var0011;
	var var0012;
	var var0013;

	var0000 = Func0954();
	var0001 = Func0942(ALYSSAND);
	UI_push_answers();
	var0002 = true;
	var0003 = ["nothing", "bag", "bucket", "fishing pole", "candle", "torch", "bedroll", "fur boots", "backpack", "stockings", "great helm", "crossbow", "bolts", "sextant", "mirror"];
	var0004 = [0x0000, 0x0322, 0x032A, 0x0296, 0x0150, 0x0253, 0x0247, 0x024B, 0x0321, 0x02A5, 0x021D, 0x0256, 0x02D3, 0x028A, 0x02A3];
	var0005 = [FRAME_ANY, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0003, 0x0000, 0x0001, 0x0000, 0x0000, 0x0007, 0x0000, 0x0010];
	var0006 = 0x03B4;
	var0007 = [0x0000, 0x0001, 0x0001, 0x0001, 0x0001, 0x0001, 0x0001, 0x0001, 0x0001, 0x0001, 0x0001, 0x0001, 0x0014, 0x0001, 0x0001];
	var0008 = [0x0000, 0x0001, 0x0000, 0x0000, 0x0001, 0x0001, 0x0000, 0x0001, 0x0001, 0x0001, 0x0000, 0x0000, 0x0001, 0x0000, 0x0000];
	var0009 = [0x0000, 0x001E, 0x0023, 0x0019, 0x0004, 0x0008, 0x0096, 0x0064, 0x00C8, 0x0019, 0x012C, 0x0226, 0x004B, 0x0064, 0x0078];
	var000A = [0x0000, 0x0011, 0x0013, 0x000D, 0x0002, 0x0004, 0x005A, 0x003C, 0x0073, 0x000F, 0x00BE, 0x015E, 0x002D, 0x0032, 0x0046];
	if (UI_is_pc_female()) {
		var000B = "Milady";
	} else {
		var000B = "Milord";
	}
	while (var0002) {
		var000C = Func0957(var0003);
		if (var000C == 0x0001) {
			say("\"Some other time, then.\"");
			var0002 = false;
			continue;
		}
		var000D = var0009[var000C];
		var000E = 0x0000;
		var000F = UI_die_roll(0x0001, 0x0004);
		if (var000F == 0x0001) {
			var0010 = "Dost thou accept?";
		}
		if (var000F == 0x0002) {
			var0010 = "Wilt thou accept the price?";
		}
		if (var000F == 0x0003) {
			var0010 = "Wilt thou agree to this price?";
		}
		if (var000F == 0x0004) {
			var0010 = var000B + ", dost thou agree?";
		}
		if (var000C == 0x0002) {
			say("\"That will be ",
				var000D,
				" filari. ",
				var0010,
				"\"");
			var0011 = "bags";
		}
		if (var000C == 0x0003) {
			say("\"Father stocks finely crafted buckets. He sells them for ",
				var000D,
				" filari each.\"");
			say("\"",
				var0010,
				"\"");
		}
		if (var000C == 0x0004) {
			say("\"I will sell one to thee for ",
				var000D,
				" filari.\"");
			say("\"",
				var0010,
				"\"");
		}
		if (var000C == 0x0005) {
			say("\"That will be ",
				var000D,
				" filari. ",
				var0010,
				"\"");
			var0011 = "candles";
		}
		if (var000C == 0x0006) {
			say("\"I can sell one to thee for ",
				var000D,
				" filari.\"");
			say("\"",
				var0010,
				"\"");
			var0011 = "torches";
		}
		if (var000C == 0x0007) {
			say("\"I can sell this to thee for ",
				var000D,
				" filari.\"");
			say("\"",
				var0010,
				"\"");
		}
		if (var000C == 0x0008) {
			say("\"I can sell a pair of fine fur-lined boots to thee for ",
				var000D,
				" filari.\"");
			say("\"",
				var0010,
				"\"");
			var0011 = "pairs of fur-lined boots";
		}
		if (var000C == 0x0009) {
			say("\"These backpacks are made by the women of Fawn, ",
				var0000,
				". For ",
				var000D,
				"\tfilari, one can be thine.\"");
			say("\"",
				var0010,
				"\"");
			var0011 = "backpacks";
		}
		if (var000C == 0x000A) {
			say("\"I make these stockings, ",
				var0000,
				". Thou canst not find any finer! For ",
				var000D,
				" filari I can sell thee a pair.\"");
			say("\"",
				var0010,
				"\"");
			var0011 = "stockings";
		}
		if (var000C == 0x000B) {
			say("\"For ",
				var000D,
				" filari I can sell thee a great helm.\"");
			say("\"",
				var0010,
				"\"");
			var0011 = "great helms";
		}
		if (var000C == 0x000C) {
			say("\"The crossbows father stocks are well-kept, ",
				var0000,
				", and will do thee good against the vile goblins. ",
				var000D,
				" filari is what father charges for one.\"");
			say("\"",
				var0010,
				"\"");
			var0011 = "crossbows";
		}
		if (var000C == 0x000D) {
			say("\"Crossbow bolts sell for ",
				var000D,
				" filari for a bundle of twenty.\"");
			say("\"",
				var0010,
				"\"");
			var0011 = "crossbow bolts, in bundles of twenty,";
		}
		if (var000C == 0x000E) {
			say("\"I am not certain if thou wishest to own a sextant, ",
				var0000,
				", seeing that there now is no sea travel. Father sells them for the low cost of ",
				var000D,
				" filari each.\"");
			say("\"",
				var0010,
				"\"");
			var0011 = "sextants";
		}
		if (var000C == 0x000F) {
			if (UI_is_pc_female()) {
				say("\"I suppose I can sell thee one, though I have no idea why thou wouldst want one. We sell hand mirrors at ",
					var000D,
					" filari each.\"");
			} else {
				say("\"What dost thou need a hand mirror for? Surely, thou dost not believe in the virtue of @Beauty@? Well, 'tis not my place to say either way. We sell them for ",
					var000D,
					" filari each.\"");
			}
			say("\"",
				var0010,
				"\"");
			var0011 = "hand mirror";
		}
		if (var000D == var000A[var000C]) {
			if (Func0955()) {
				var0012 = var000D;
			} else {
				var0012 = 0x0000;
			}
		} else {
			var0012 = Func0804(var0009[var000C], var000A[var000C]);
		}
		if (var0012 > 0x0000) {
			if (var0008[var000C] == 0x0001) {
				say("\"How many ",
					var0011,
					" wouldst thou like?\"");
				var000E = Func0943(var0004[var000C], var0005[var000C], var0007[var000C], var0006, var0012, 0x0005, 0x0001, false);
			} else {
				var000E = Func0943(var0004[var000C], var0005[var000C], 0x0001, var0006, var0012, 0x0000, 0x0001, false);
			}
		}
		if (var000E == 0x0001) {
			say("\"I am sure that thou wilt enjoy thy purchase, ",
				var0000,
				".\"");
		} else if (var000E == 0x0002) {
			say("\"Thine hands are full, ",
				var0000,
				"!\"");
		} else if (var000E == 0x0003) {
			var0013 = Func0992(0x0001, (("@But " + var0000) + ", we haven't the coins to purchase this.@"), 0x0000, false);
			if (var0013 != AVATAR) {
				ALYSSAND->show_npc_face0(0x0000);
				say("\"It doth appear that thy purse is empty, ",
					var0000,
					".\"");
			} else {
				say("\"If thou canst not pay for our goods, please say so...\"");
			}
			if (0x001F < (ALYSSAND->get_npc_id() + 0x0006)) {
				ALYSSAND->set_npc_id(0x001F);
			} else {
				ALYSSAND->set_npc_id(ALYSSAND->get_npc_id() + 0x0006);
			}
		}
		say("\"Perhaps another purchase, ",
			var0000,
			"?\"");
		var0002 = Func0955();
	}
	UI_pop_answers();
}

extern var Func0954 0x954 ();
extern var Func0956 0x956 (var var0000);
extern var Func0999 0x999 (var var0000, var var0001, var var0002, var var0003, var var0004, var var0005, var var0006);
extern var Func0955 0x955 ();

var Func0804 0x804 (var var0000, var var0001) {
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;
	var var0008;
	var var0009;
	var var000A;
	var var000B;
	var var000C;
	var var000D;
	var var000E;
	var var000F;
	var var0010;
	var var0011;

	var0002 = Func0954();
	var0003 = UI_is_pc_female();
	if (UI_is_pc_female()) {
		var0004 = "Milady";
	} else {
		var0004 = "Milord";
	}
	var0005 = var0000;
	var0006 = (var0001 / 0x0003) * 0x0002;
	var0007 = 0x000F - (ALYSSAND->get_npc_id() / 0x0002);
	var0008 = 0x0000;
	var0009 = 0x0001;
	var000A = 0x0000;
	var000B = 0x0001;
	var000C = ALYSSAND->get_npc_id();
	while (var0009) {
		var000D = Func0956(["yes", "no", "haggle"]);
		if (var000D == "no") {
			return 0x0000;
		}
		if (var000D == "yes") {
			var000E = 0x0000;
		} else {
			var000F = Func0999(var0005, var0001, var000B, var0006, var000A, var0007, var0008);
			var000A += 0x0001;
			var0008 = var000F[0x0004];
			var000E = var000F[0x0003];
			var0010 = var0005;
			var0005 = var000F[0x0002];
			var0006 = var000F[0x0001];
		}
		var0011 = UI_get_random(0x0003);
		if (var000E < 0x0002) {
			if (var0005 < (var0001 + ((var0000 - var0001) / 0x0004))) {
				if (var0011 == 0x0001) {
					say("\"Thou art a shrewd bargainer, ",
						var0002,
						".\"");
				}
				if (var0011 == 0x0002) {
					say("\"",
						var0004,
						", Father would blush if he learned I had sold our goods to thee at such a price...\"");
				}
				if (var0011 == 0x0003) {
					say("\"Thou hast a quick tongue, ",
						var0002,
						", to bring me to this price.\"");
				}
			} else if (var0005 < (var0001 + ((var0000 - var0001) / 0x0003))) {
				if (var0011 == 0x0001) {
					say("\"Our prices are fair here.\"");
				}
				if (var0011 == 0x0002) {
					say("\"",
						var0004,
						", Father would not believe I had sold goods at this price!\"");
				}
				if (var0011 == 0x0003) {
					say("\"Father must make some profit!\"");
				}
			} else if (var0005 < (var0001 + ((var0000 - var0001) / 0x0002))) {
				if (var0011 == 0x0001) {
					say("\"Thou couldst not obtain a better deal from Father, ",
						var0002,
						".\"");
				}
				if (var0011 == 0x0002) {
					say("\"Father enjoys bargaining much more than I, ",
						var0002,
						".\"");
				}
				if (var0011 == 0x0003) {
					say("\"I am sure Father would be pleased with this price.\"");
				}
			} else {
				if (var0011 == 0x0001) {
					say("\"This is a good price ",
						var0002,
						". I am sure Father will be pleased.\"");
				}
				if (var0011 == 0x0002) {
					say("\"",
						var0004,
						", I am sure Father will be happy with this price.\"");
				}
				if (var0011 == 0x0003) {
					say("\"Father must charge reasonably high prices or we will be made paupers!\"");
				}
			}
			say("\"Thou dost agree to a price of ",
				var0005,
				" filari, ",
				var0002,
				"?\"");
			if (Func0955()) {
				if (var000C > 0x0001) {
					ALYSSAND->set_npc_id(var000C - 0x0002);
				}
				return var0005;
			}
			if (var0011 == 0x0001) {
				say("\"",
					var0004,
					", thou hast broken our agreement!\"");
			}
			if (var0011 == 0x0002) {
				say("\"I am disappointed. What of our bargain?\"");
			}
			if (var0011 == 0x0003) {
				say("\"Father will be most upset to learn of this...\"");
			}
			if (0x001F < (var000C + 0x000A)) {
				ALYSSAND->set_npc_id(0x001F);
			} else {
				ALYSSAND->set_npc_id(var000C + 0x000A);
			}
			return 0x0000;
		}
		if (var0008 == 0x0001) {
			if (var000E == 0x0005) {
				say("\"",
					var0005,
					" is my final offer. Dost thou accept?\"");
				if (var000C < 0x001C) {
					ALYSSAND->set_npc_id(var000C + 0x0004);
				}
				if (Func0955()) {
					return var0005;
				}
				var0009 = 0x0000;
			} else {
				say("\"So be it. ",
					var0005,
					" filari is my final offer.\"");
				if (var000C < 0x001E) {
					ALYSSAND->set_npc_id(var000C + 0x0002);
				}
			}
		} else {
			if (var000E == 0x0002) {
				if (var0011 == 0x0001) {
					say("\"Father would be pleased to bargain with thee, ",
						var0002,
						". How doth ",
						var0005,
						" filari sound?\"");
				}
				if (var0011 == 0x0002) {
					say("\"",
						var0004,
						", have we agreed on ",
						var0005,
						" filari?\"");
				}
				if (var0011 == 0x0003) {
					say("\"My price is ",
						var0005,
						" filari. Dost thou accept?\"");
				}
			}
			if (var000E == 0x0003) {
				if (var0011 == 0x0001) {
					say("\"Father would say that these are trying times, and goods are scarce... Wouldst thou consider ",
						var0005,
						" filari?\"");
				}
				if (var0011 == 0x0002) {
					say("\"I am not sure... Wouldst thou consider ",
						var0005,
						" filari?\"");
				}
				if (var0011 == 0x0003) {
					say("\"Father would not accept such a price! Wouldst thou consider ",
						var0005,
						" filari?\"");
				}
			}
			if (var000E == 0x0004) {
				if (var0011 == 0x0001) {
					say("\"I cannot possibly accept less than ",
						var0005,
						" filari!\"");
					say("\"What dost thou say to this?\"");
				}
				if (var0011 == 0x0002) {
					say("\"Father's costs are soaring! I\tcan go no lower than ",
						var0005,
						" filari.\"");
				}
				if (var0011 == 0x0003) {
					say("\"",
						var0004,
						", thou art sweet, but Father deserves no less than ",
						var0005,
						" filari.\"");
				}
			}
			if (var000E == 0x0005) {
				var0005 = var0010;
				if (var0011 == 0x0001) {
					say("\"Father would be stricken if he learned I had accepted such a pitiful offer! My previous price stands, at ",
						var0005,
						" filari.\"");
				}
				if (var0011 == 0x0002) {
					say("\"I may be new to trading, ",
						var0002,
						", but this offer is shameful! ",
						var0005,
						" filari, and no less!\"");
				}
				if (var0011 == 0x0003) {
					say("\"I am certain Father would not approve of such a deal.\"");
					say("\"",
						var0005,
						" filari is where I stand.\"");
				}
				if (var000C < 0x001F) {
					ALYSSAND->set_npc_id(var000C + 0x0001);
				}
			}
		}
	}
	return 0;
}

extern var Func0954 0x954 ();
extern var Func0957 0x957 (var var0000);
extern var Func0955 0x955 ();
extern var Func0807 0x807 (var var0000, var var0001);
extern var Func0943 0x943 (var var0000, var var0001, var var0002, var var0003, var var0004, var var0005, var var0006, var var0007);
extern var Func0992 0x992 (var var0000, var var0001, var var0002, var var0003);

void Func0805 0x805 () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;
	var var0008;
	var var0009;
	var var000A;
	var var000B;
	var var000C;
	var var000D;
	var var000E;
	var var000F;

	var0000 = Func0954();
	UI_push_answers();
	var0001 = true;
	var0002 = ["nothing", "ham", "mutton", "trout", "cheese", "pastry"];
	var0003 = [0x0000, 0x0179, 0x0179, 0x0179, 0x0179, 0x0179];
	var0004 = [FRAME_ANY, 0x000B, 0x0008, 0x000C, 0x001B, 0x0006];
	var0005 = [0x0000, 0x0014, 0x0016, 0x000A, 0x000C, 0x0008];
	var0006 = [0x0000, 0x000C, 0x000E, 0x0006, 0x0007, 0x0004];
	var0007 = 0x0284;
	var0008 = [0x0000, 0x0001, 0x0001, 0x0001, 0x0001, 0x0001];
	var0009 = [0x0000, 0x0001, 0x0001, 0x0001, 0x0001, 0x0001];
	say("\"What wouldst thou like, ",
		var0000,
		"?\"");
	while (var0001) {
		var000A = Func0957(var0002);
		if (var000A == 0x0001) {
			say("\"Perhaps another time, then.\"");
			var0001 = false;
			continue;
		}
		var000B = var0005[var000A];
		var000C = 0x0000;
		if (var000A == 0x0002) {
			say("\"",
				var000B,
				" gold coins is the price. Dost thou accept?\"");
			var000D = "haunches of ham";
		}
		if (var000A == 0x0003) {
			say("\"That will be ",
				var000B,
				" gold coins. Dost thou find this acceptable?\"");
			var000D = "joints of mutton";
		}
		if (var000A == 0x0004) {
			say("\"We serve the best fish around! ",
				var000B,
				" gold coins is the price. Dost thou agree?\"");
			var000D = "trout";
		}
		if (var000A == 0x0005) {
			say("\"That will be ",
				var000B,
				" gold coins. Dost thou accept?\"");
			var000D = "wedges of cheese";
		}
		if (var000A == 0x0006) {
			say("\"Ah, Devra makes a fine pastry that will melt in thy mouth! For ",
				var000B,
				" gold coins I will sell thee one. Dost thou agree?\"");
			var000D = "pastries";
		}
		if (var000B == var0006[var000A]) {
			if (Func0955() == true) {
				var000E = var000B;
			} else {
				var000E = 0x0000;
			}
		} else {
			var000E = Func0807(var0005[var000A], var0006[var000A]);
		}
		if (var000E > 0x0000) {
			if (var0009[var000A] == 0x0001) {
				say("\"How many ",
					var000D,
					" wouldst thou like?\"");
				var000C = Func0943(var0003[var000A], var0004[var000A], var0008[var000A], var0007, var000E, 0x0014, 0x0001, false);
			} else {
				var000C = Func0943(var0003[var000A], var0004[var000A], var0008[var000A], var0007, var000E, 0x0000, 0x0001, false);
			}
		}
		if (var000C == 0x0001) {
			say("\"Enjoy thy meal, ",
				var0000,
				".\"");
		} else if (var000C == 0x0002) {
			say("\"Thou canst not carry so much, ",
				var0000,
				".\"");
		} else if (var000C == 0x0003) {
			var000F = Func0992(0x0001, (("@But " + var0000) + ", we have not the coins to pay for this.@"), 0x0000, false);
			if (0x001F < (ARGUS->get_npc_id() + 0x0006)) {
				ARGUS->set_npc_id(0x001F);
			} else {
				ARGUS->set_npc_id(ARGUS->get_npc_id() + 0x0006);
			}
		}
		say("\"Wouldst thou care for more?\"");
		var0001 = Func0955();
	}
	UI_pop_answers();
}

extern var Func0954 0x954 ();
extern var Func0953 0x953 ();
extern var Func0957 0x957 (var var0000);
extern var Func0955 0x955 ();
extern var Func0807 0x807 (var var0000, var var0001);
extern var Func0943 0x943 (var var0000, var var0001, var var0002, var var0003, var var0004, var var0005, var var0006, var var0007);

void Func0806 0x806 () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;
	var var0008;
	var var0009;
	var var000A;
	var var000B;
	var var000C;
	var var000D;
	var var000E;
	var var000F;

	var0000 = Func0954();
	var0001 = Func0953();
	UI_push_answers();
	var0002 = true;
	var0003 = ["nothing", "wine", "mead", "ale"];
	var0004 = [0x0000, 0x0268, 0x0268, 0x0268];
	var0005 = [FRAME_ANY, 0x0005, 0x0001, 0x0003];
	var0006 = [0x0000, 0x0008, 0x000F, 0x0005];
	var0007 = [0x0000, 0x0005, 0x0009, 0x0002];
	var0008 = 0x0284;
	var0009 = [0x0000, 0x0001, 0x0001, 0x0001];
	var000A = [0x0000, 0x0001, 0x0001, 0x0001];
	say("\"What wouldst thou like to quench thy thirst, ",
		var0000,
		"?\"");
	while (var0002) {
		var000B = Func0957(var0003);
		if (var000B == 0x0001) {
			say("\"Our cellars are full, if thou dost change thy mind!\"");
			var0002 = false;
		} else {
			var000C = var0006[var000B];
			var000D = 0x0000;
			if (var000B == 0x0002) {
				say("\"Ah, that will be ",
					var000C,
					" gold coins. We have very little left.\" ~\"Dost thou accept?\"");
				var000E = "bottles of wine";
			}
			if (var000B == 0x0003) {
				say("\"At ",
					var000C,
					", wilt thou try some?\"");
				var000E = "bottles of mead";
			}
			if (var000B == 0x0004) {
				say("\"",
					var000C,
					" is the price. Dost thou find that acceptable?\"");
				var000E = "mugs of ale";
			}
			if (var000C == var0007[var000B]) {
				if (Func0955()) {
					var000F = var000C;
				} else {
					var000F = 0x0000;
				}
			} else {
				var000F = Func0807(var0006[var000B], var0007[var000B]);
			}
			if (var000F > 0x0000) {
				if (var000A[var000B] == 0x0001) {
					say("\"How many ",
						var000E,
						" wouldst thou like?\"");
					var000D = Func0943(var0004[var000B], var0005[var000B], var0009[var000B], var0008, var000F, 0x0014, 0x0001, false);
				} else {
					var000D = Func0943(var0004[var000B], var0005[var000B], var0009[var000B], var0008, var000F, 0x0000, 0x0001, false);
				}
			}
			if (var000D == 0x0001) {
				say("\"Drink in health, ",
					var0000,
					"!\"");
			} else if (var000D == 0x0002) {
				say("\"Thou canst not carry so many bottles, ",
					var0000,
					"!\"");
			} else if (var000D == 0x0003) {
				say("\"I am afraid thou dost not have the money to pay, ",
					var0000,
					".\"");
				if (0x001F < (ARGUS->get_npc_id() + 0x0006)) {
					ARGUS->set_npc_id(0x001F);
				} else {
					ARGUS->set_npc_id(ARGUS->get_npc_id() + 0x0006);
				}
				abort;
			}
			say("\"Wouldst thou care for more?\"");
			var0002 = Func0955();
		}
	}
	UI_pop_answers();
}

extern var Func0954 0x954 ();
extern var Func0956 0x956 (var var0000);
extern var Func0999 0x999 (var var0000, var var0001, var var0002, var var0003, var var0004, var var0005, var var0006);
extern var Func0942 0x942 (var var0000);
extern var Func0955 0x955 ();
extern void Func094E 0x94E (var var0000, var var0001);

var Func0807 0x807 (var var0000, var var0001) {
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;
	var var0008;
	var var0009;
	var var000A;
	var var000B;
	var var000C;
	var var000D;
	var var000E;
	var var000F;
	var var0010;

	var0002 = Func0954();
	var0003 = UI_is_pc_female();
	var0004 = var0000;
	var0005 = (var0001 / 0x0003) * 0x0002;
	var0006 = 0x000F - (ARGUS->get_npc_id() / 0x0002);
	var0007 = 0x0000;
	var0008 = 0x0001;
	var0009 = 0x0000;
	var000A = 0x0002;
	var000B = ARGUS->get_npc_id();
	while (var0008) {
		var000C = Func0956(["yes", "no", "haggle"]);
		if (var000C == "no") {
			return 0x0000;
		}
		if (var000C == "yes") {
			var000D = 0x0000;
		} else {
			var000E = Func0999(var0004, var0001, var000A, var0005, var0009, var0006, var0007);
			var0009 += 0x0001;
			var0007 = var000E[0x0004];
			var000D = var000E[0x0003];
			var000F = var0004;
			var0004 = var000E[0x0002];
			var0005 = var000E[0x0001];
		}
		var0010 = UI_get_random(0x0003);
		if (var000D < 0x0002) {
			if (var0004 < (var0001 + ((var0000 - var0001) / 0x0004))) {
				if (var0010 == 0x0001) {
					say("\"Do not tell Devra... She will think her son hath gone soft in the head for giving thee a price like this.\"");
					if (Func0942(DEVRA)) {
						DEVRA->show_npc_face1(0x0000);
						say("\"Thou woolly-headed wolf! Thine head is fine. 'Tis thine heart that is soft...\"");
						UI_remove_npc_face1();
						0x0000->set_conversation_slot();
					}
				}
				if (var0010 == 0x0002) {
					say("\"Thou dost drive a hard bargain, ",
						var0002,
						"!\"");
				}
				if (var0010 == 0x0003) {
					say("\"Thou hast a shrewd tongue, ",
						var0002,
						"! It hath been some time since I was beaten at this game!\"");
				}
			} else if (var0004 < (var0001 + ((var0000 - var0001) / 0x0003))) {
				if (var0010 == 0x0001) {
					say("\"Our prices are honest here at the Sleeping Bull!\"");
				}
				if (var0010 == 0x0002) {
					say("\"Thou hast found me in a generous mood, ",
						var0002,
						"! 'Tis not every day I sell goods at these prices!\"");
				}
				if (var0010 == 0x0003) {
					say("\"Thou art a shrewd bargainer, ",
						var0002,
						"!\"");
				}
			} else if (var0004 < (var0001 + ((var0000 - var0001) / 0x0002))) {
				if (var0010 == 0x0001) {
					say("\"Fair enough, if I do say so myself.\"");
				}
				if (var0010 == 0x0002) {
					say("\"With customers such as thou, I shall never make a profit...\"");
				}
				if (var0010 == 0x0003) {
					say("\"With these troubled times, I must charge higher prices...\"");
				}
			} else {
				if (var0010 == 0x0001) {
					say("\"'Tis a pleasure to bargain with thee, ",
						var0002,
						"!\"");
				}
				if (var0010 == 0x0002) {
					say("\"Thou art most generous with thy money, ",
						var0002,
						"!\"");
				}
				if (var0010 == 0x0003) {
					say("\"'Tis a shame I must charge high prices like this.\"");
				}
			}
			say("\"Dost thou agree on a price of ",
				var0004,
				",\t",
				var0002,
				"?\"");
			if (Func0955()) {
				if (var000B > 0x0001) {
					ARGUS->set_npc_id(var000B - 0x0002);
				}
				return var0004;
			}
			if (var0010 == 0x0001) {
				say("\"I thought we had an agreement!\"");
			}
			if (var0010 == 0x0002) {
				say("\"I have no time for this!\"");
			}
			if (var0010 == 0x0003) {
				say("\"Dost thou take me for a fool?\" ~\"I do not have all day to stand and argue!\"");
			}
			if (0x001F < (var000B + 0x000A)) {
				ARGUS->set_npc_id(0x001F);
			} else {
				ARGUS->set_npc_id(var000B + 0x000A);
			}
			return 0x0000;
		}
		if (var0007 == 0x0001) {
			if (var000D == 0x0005) {
				say("\"",
					var0004,
					" is my final offer.\" ~\"Dost thou accept?\"");
				if (var000B < 0x001C) {
					ARGUS->set_npc_id(var000B + 0x0004);
				}
				if (Func0955()) {
					return var0004;
				}
				var0008 = 0x0000;
			} else {
				say("\"Very well. ",
					var0004,
					" is my final offer.\"");
				if (var000B < 0x001E) {
					ARGUS->set_npc_id(var000B + 0x0002);
				}
			}
		} else {
			if (var000D == 0x0002) {
				if (var0010 == 0x0001) {
					say("\"'Tis a good offer. How doth ",
						var0004,
						" sound?\"");
				}
				if (var0010 == 0x0002) {
					say("\"Thou art a shrewd bargainer, ",
						var0002,
						". Have we agreed on ",
						var0004,
						" gold coins?\"");
				}
				if (var0010 == 0x0003) {
					say("\"My price is ",
						var0004,
						". Dost thou accept?\"");
				}
			}
			if (var000D == 0x0003) {
				if (var0010 == 0x0001) {
					say("\"These are perilous times and supplies are low. Wilt thou accept ",
						var0004,
						"?\"");
				}
				if (var0010 == 0x0002) {
					say("\"I do not know...\" ~\"Wouldst thou consider ",
						var0004,
						"?\"");
				}
				if (var0010 == 0x0003) {
					say("\"I am not certain... What sayest thou to ",
						var0004,
						"?\"");
				}
			}
			if (var000D == 0x0004) {
				if (var0010 == 0x0001) {
					say("\"",
						var0004,
						" is as low as I can go. What sayest thou?\"");
				}
				if (var0010 == 0x0002) {
					say("\"Surely thou canst see that I can accept no less than ",
						var0004,
						".\"");
				}
				if (var0010 == 0x0003) {
					say("\"I deserve no less than ",
						var0004,
						" gold coins, ",
						var0002,
						"!\"");
				}
			}
			if (var000D == 0x0005) {
				var0004 = var000F;
				if (var0010 == 0x0001) {
					say("\"Mother, come and hear this! The customer jests with me!\"");
					if (Func0942(DEVRA)) {
						Func094E(DEVRA, (((("@" + var0002) + " we cannot possibly accept less than ") + var0004) + " gold coins.@"));
						ARGUS->show_npc_face0(0x0000);
					} else {
						say("\"",
							var0004,
							"  gold coins is as low as I can go.\"");
					}
					say("\"What dost thou say to this?\"");
				}
				if (var0010 == 0x0002) {
					say("\"Thou art not bargaining with a fool, ",
						var0002,
						"! ",
						var0004,
						", and no less!\"");
				}
				if (var0010 == 0x0003) {
					say("\"If I accepted such a price as this, I could not call myself an innkeeper! ",
						var0004,
						" is where I stand!\"");
				}
				if (var000B < 0x001F) {
					ARGUS->set_npc_id(var000B + 0x0001);
				}
			}
		}
	}
	return 0;
}

extern void Func0809 0x809 ();
extern var Func0954 0x954 ();
extern void Func097F 0x97F (var var0000, var var0001, var var0002);
extern void Func07D1 object#(0x7D1) ();
extern void Func07D2 object#(0x7D2) ();
extern var Func0992 0x992 (var var0000, var var0001, var var0002, var var0003);

void Func0808 0x808 (var var0000, var var0001) {
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;
	var var0008;

	if (get_item_flag(SI_ZOMBIE)) {
		Func0809();
		abort;
	}
	var0002 = "";
	var0003 = Func0954();
	var0004 = UI_is_pc_female();
	if ((event == PROXIMITY) && (get_schedule_type() == HOUND)) {
		if (UI_get_random(0x000A) < 0x0006) {
			abort;
		}
		var0005 = ["@Leave this place!@", "@Intrude not!@", "@Call the Rangers!@", "@Anger not the Mages...@", "@Take nothing!@", "@Thief! Thief!@"];
		Func097F(item, var0005[UI_get_random(0x0006)], 0x0000);
	}
	if ((event == DOUBLECLICK) && (get_schedule_type() != STANDTHERE)) {
		AVATAR->item_say("Hold!");
		item->Func07D1();
		Func097F(item, "@Yes?@", 0x0002);
		var0006 = get_npc_number();
		if ((var0006 == MUSIC01) || ((var0006 == MUSIC02) || (var0006 == MUSIC03))) {
			set_schedule_type(STANDTHERE);
			item->Func07D2();
			var0006 = 0x0400 - var0006;
			var0006 = script item {
				nohalt;
				wait 7;
				call var0006;
			};
			abort;
		}
		set_schedule_type(TALK);
	}
	if ((event == STARTED_TALKING) || (event == SCRIPTED)) {
		run_schedule();
		clear_item_say();
		AUTOMATON_FACE->show_npc_face0(0x0000);
		if ((var0000 == "Canton") || (var0000 == "Seminarium")) {
			say("\"I am the servant and protector here at the ",
				var0000,
				". If thou wishest to conduct any business, thou must speak to my master. If thou dost not have any concern here, ",
				var0003,
				", I must ask thee to please depart.\"");
		} else {
			say("\"I am the servant and protector of ",
				var0000,
				". If thou dost not belong here, ",
				var0003,
				", I must ask thee to please depart. I cannot help thee with matters of importance. My duty is only to protect my master and my master's possessions.\"");
		}
		converse (["servant", "bye"]) {
			case "servant" (remove):
				if (var0001 == 0x0002) {
					say("\"As I have said, I serve and protect my master's household.\"");
				}
				if (var0001 == 0x0003) {
					say("\"As I have said, I serve and protect my master's household. I must work...\"");
					Func097F(item, "@Where be the pan?@", 0x0000);
					abort;
				}
				if (var0001 == 0x0004) {
					say("\"As I have said, I serve and protect my master's household. I do not have time for talk.\"");
					Func097F(item, "@Back to work!@", 0x0000);
					abort;
				}
				if (var0001 == 0x0005) {
					say("\"As I have said, I serve and protect my master's household. This have I done for a great many years.\"");
					var0007 = Func0992(IOLO, "@Why, this being doth move so silently!@", 0x0000, false);
					if (var0007 != AVATAR) {
						0x0000->set_conversation_slot();
						say("\"Master Filbercio hath enchanted my feet to prevent them from clattering as I walk. He was greatly disturbed by the noise.\"");
					}
					add(["many years"]);
				}
				if (var0001 == 0x0006) {
					var0008 = UI_part_of_day();
					if ((var0008 == NIGHT) || ((var0008 == MIDNIGHT) || (var0008 == EARLY))) {
						var0002 = ", especially at this time of night";
					}
					say("\"As I have said, I serve and protect my master's possessions from the many thieves who would take them",
						var0002,
						".\"");
				}
				if (var0001 == 0x0007) {
					if (!gflags[POTHOS_RETURNED]) {
						var0002 = ", especially when Master Pothos is away";
					}
					say("\"As I have said, I serve and protect my master's household. The apothecary's shop is a prime target for thievery",
						var0002,
						".\"");
				}
				if (var0001 == 0x000B) {
					say("\"As I have said, I serve and protect my master's household.\"");
					Func097F(item, "@I must go...@", 0x0000);
					abort;
				}
				if (var0001 == 0x0008) {
					say("\"I serve by playing melodies for the patrons. I prefer to play the songs I memorized long ago, but the residents here do not seem to like them.\"");
				}
				if (var0001 == 0x0009) {
					say("\"I perform music for those who would listen. Music is a difficult art.\"");
					if (ROCCO->npc_nearby()) {
						ROCCO->show_npc_face1(0x0000);
						say("\"And thou art indeed a master, musician automaton.\"");
						UI_remove_npc_face1();
						0x0000->set_conversation_slot();
					} else if (PETRA->npc_nearby()) {
						PETRA->show_npc_face1(0x0000);
						say("\"There are some who say that when it comes to music, we automatons have a tin ear.\"");
						UI_remove_npc_face1();
						0x0000->set_conversation_slot();
						say("\"That is patently untrue.\"");
						PETRA->show_npc_face1(0x0000);
						say("\"I was making a humorous remark, musician.\"");
						UI_remove_npc_face1();
						0x0000->set_conversation_slot();
						say("\"I do not understand humor, milady.\"");
					}
				}
				if (var0001 == 0x000A) {
					say("\"I am both a musician and a dancer, ",
						var0003,
						". Ofttimes I will accompany my fellows, other times I will rise and perform a jig for the patrons. Some who drink here even join in the dancing.\"");
				}
				fallthrough;

			case "many years" (remove):
				say("\"There is much I have witnessed in these halls, but I am forbidden to speak of it.\"");
				fallthrough;

			case "bye":
				Func097F(AVATAR, "@Goodbye.@", 0x0000);
				if ((var0000 == "Canton") || ((var0000 == "Filbercio") || (var0000 == "Rocco"))) {
					set_schedule_type(PACE_HORIZONTAL);
					Func097F(item, "@Goodbye@", 0x0005);
					abort;
				}
				set_schedule_type(HOUND);
				Func097F(item, "@Move along...@", 0x000A);
				abort;

		}
	}
}

extern void Func07D1 object#(0x7D1) ();
extern void Func097F 0x97F (var var0000, var var0001, var var0002);
extern var Func0992 0x992 (var var0000, var var0001, var var0002, var var0003);
extern var Func09B3 0x9B3 (var var0000);
extern void Func09AC 0x9AC (var var0000, var var0001, var var0002, var var0003);

void Func0809 0x809 () {
	var var0000;
	var var0001;

	if (event == DOUBLECLICK) {
		AVATAR->item_say("Hold!");
		item->Func07D1();
		Func097F(item, "@What was that?@", 0x0002);
		set_schedule_type(TALK);
	}
	if (event == STARTED_TALKING) {
		AUTOMATON_FACE->show_npc_face0(0x0000);
		clear_item_say();
		run_schedule();
		say("\"What dost thou wish?\"");
		if (get_item_flag(IN_PARTY)) {
			set_schedule_type(FOLLOW_AVATAR);
			add("leave");
		} else {
			run_schedule();
			add("join");
		}
		converse (["bye"]) {
			case "join" (remove):
				if (UI_get_array_size(UI_get_party_list()) < 0x0005) {
					add("leave");
					say("\"Yes, master. I shall be thy servant.\"");
					add_to_party();
				} else {
					say("\"But I cannot, master.\"");
					var0000 = Func0992(0x0001, "@Our travelling group would be too large, Avatar.@", 0x0000, false);
					0x0000->set_conversation_slot();
				}
				fallthrough;

			case "leave" (remove):
				add("join");
				say("\"Yes, master.\"");
				remove_from_party();
				if (get_cont_items(SHAPE_ANY, QUALITY_ANY, FRAME_ANY)) {
					say("\"I have possessions which belong to thee.\"");
					var0001 = Func09B3(item);
					if (var0001[0x0001] != 0x0000) {
						say("\"Thy companions are helping thee with this burden.\"");
					}
					if (var0001[0x0002] > 0x0000) {
						var0001 = var0001[0x0002];
						if (var0001 > 0x0001) {
							say("\"Of thy belongings, ",
								var0001,
								" are now on the ground.\"");
						} else {
							say("\"One of thy belongings is now on the ground.\"");
						}
					}
					say("\"They are thine once again.\"");
				}
				Func09AC(item, -1, 0, WANDER);
				fallthrough;

			case "bye":
				Func097F(item, "@I obey@", 0x0005);
				abort;
		}
	}
}

extern var Func0955 0x955 ();
extern var Func09B3 0x9B3 (var var0000);

void Func080A 0x80A () {
	var var0000;

	if (BOYDON->get_cont_items(SHAPE_ANY, QUALITY_ANY, FRAME_ANY)) {
		say("\"I have some of thy belongings in my possession. Wouldst thou like them returned?\"");
		if (Func0955()) {
			say("\"Here they are.\"");
			gflags[BOYDON_HAS_BELONGINGS] = false;
			var0000 = Func09B3(BOYDON);
			if (var0000[0x0001] != 0x0000) {
				say("\"Thy companions will have to help thee carry some of these things.\"");
			}
			if (var0000[0x0002] > 0x0000) {
				var0000 = var0000[0x0002];
				if (var0000 > 0x0001) {
					say("\"Since thou canst not carry these remaining ",
						var0000,
						" items, they shall go at thy feet.\"");
				} else {
					say("\"Since thou dost not have enough room for this last item, it shall go at thy feet.\"");
				}
			}
		} else {
			gflags[BOYDON_HAS_BELONGINGS] = true;
			say("\"If that is what thou dost want, I will keep them for thee. Return when thou wantest them.\"");
		}
	}
}

extern var Func0954 0x954 ();
extern var Func0955 0x955 ();
extern var Func0956 0x956 (var var0000);
extern var Func097D 0x97D (var var0000, var var0001, var var0002, var var0003, var var0004);
extern var Func099B 0x99B (var var0000, var var0001, var var0002, var var0003, var var0004, var var0005, var var0006);

void Func080B 0x80B () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;
	var var0008;
	var var0009;
	var var000A;
	var var000B;
	var var000C;
	var var000D;
	var var000E;
	var var000F;
	var var0010;

	var0000 = Func0954();
	var0001 = true;
	say("\"To exchange coins, I ask for a small percentage of the money bartered. Dost thou agree to this charge?\"");
	if (Func0955()) {
		while (var0001) {
			say("\"What coinage dost thou desire?\"");
			var0002 = Func0956(["Monetari", "Guilders", "Filari", "Gold Coins"]);
			do {
				if (var0002 == "Monetari") {
					say("\"Which coin dost thou care to exchange for monetari?\"");
					var0003 = 0x03B7;
					var0004 = ["Nothing"];
					if (Func097D(PARTY, 0x0001, 0x03B8, QUALITY_ANY, FRAME_ANY)) {
						var0004 &= "Guilders";
					}
					if (Func097D(PARTY, 0x0001, 0x03B4, QUALITY_ANY, FRAME_ANY)) {
						var0004 &= "Filari";
					}
					if (Func097D(PARTY, 0x0001, 0x0284, QUALITY_ANY, FRAME_ANY)) {
						var0004 &= "Gold Coins";
					}
					if (Func097D(PARTY, 0x0001, 0x0285, QUALITY_ANY, FRAME_ANY)) {
						var0004 &= "Gold Nuggets";
					}
					if (Func097D(PARTY, 0x0001, 0x03A9, QUALITY_ANY, FRAME_ANY)) {
						var0004 &= "Jewelry";
					}
					if (Func097D(PARTY, 0x0001, 0x0286, QUALITY_ANY, FRAME_ANY)) {
						var0004 &= "Gold Bars";
					}
					var0005 = Func0956(var0004);
					if (var0005 == "Nothing") {
						say("\"Perhaps another time, ",
							var0000,
							".\"");
						var0001 = false;
						return;
					}
					if (var0005 == "Guilders") {
						say("\"I can give thee 1 monetari for every 3 guilders thou hast.\"");
						var0006 = 0x03B8;
					}
					if (var0005 == "Filari") {
						say("\"I can give thee 1 monetari for every 4 filari thou hast.\"");
						var0006 = 0x03B4;
					}
					if (var0005 == "Gold Coins") {
						say("\"I can give thee 1 monetari for every 2 gold coins thou hast.\"");
						var0006 = 0x0284;
					}
					if (var0005 == "Gold Nuggets") {
						say("\"I can give thee 10 monetari for every 1 gold nugget thou hast.\"");
						var0006 = 0x0285;
					}
					if (var0005 == "Jewelry") {
						say("\"I can give thee 100 monetari for any piece of jewelry thou hast.\"");
						var0006 = 0x03A9;
						var0005 = "pieces of jewelry";
					}
					if (var0005 == "Gold Bars") {
						say("\"I can give thee 200 monetari for every gold bar thou hast.\"");
						var0006 = 0x0286;
						var0005 = "Gold Bars";
					}
					say("\"Wilt thou agree to my rate?\"");
					if (Func0955() == true) {
						var0007 = PARTY->count_objects(var0006, QUALITY_ANY, FRAME_ANY);
						if (var0007 > 0x01F4) {
							var0007 = 0x01F4;
						}
						if (var0007 != 0x0000) {
							say("\"How many ",
								var0005,
								" wouldst thou like to exchange?\"");
							var0008 = UI_input_numeric_value(0x0000, var0007, 0x0001, 0x0000);
							if (var0008 == 0x0000) {
								say("\"Perhaps another time, ",
									var0000,
									"...\"");
								break;
							}
							if (var0005 == "Guilders") {
								var0009 = var0008 / 0x0003;
								var000A = 0x0006;
							}
							if (var0005 == "Filari") {
								var0009 = var0008 / 0x0004;
								var000A = 0x0008;
							}
							if (var0005 == "Gold Coins") {
								var0009 = var0008 / 0x0002;
								var000A = 0x0004;
							}
							if (var0005 == "Gold Nuggets") {
								var0009 = var0008 * 0x000A;
								if (var0008 == 0x0001) {
									var0005 = "Gold Nugget";
								}
							}
							if (var0005 == "pieces of jewelry") {
								var0009 = var0008 * 0x0064;
								var0005 = "pieces of jewelry";
								if (var0008 == 0x0001) {
									var0005 = "piece of jewelry";
								}
							}
							if (var0005 == "Gold Bars") {
								var0009 = var0008 * 0x00C8;
								if (var0008 == 0x0001) {
									var0005 = "Gold Bar";
								}
							}
							var000B = var0009 / 0x0028;
							var000C = var0009 - var000B;
							if (var0009 == 0x0000) {
								say("\"Thou must offer at least ",
									var000A,
									" ",
									var0005,
									" to exchange for ",
									var0002,
									"!\"");
								break;
							}
							if (var0009 == 0x0001) {
								say("\"My fee will leave thee with nothing!\"");
								break;
							}
							if (var0009 <= 0x0028) {
								var000B = 0x0001;
								var000C = var0009 - var000B;
							}
							if (var0008 >= 0x0001) {
								var000D = UI_remove_party_items(var0008, var0006, QUALITY_ANY, FRAME_ANY, false);
								say("\"Let me think...\"~\"I will take thy ",
									var0008,
									" ",
									var0005,
									" and in exchange give thee ",
									var0009,
									" Monetari, subtracting my charge of ",
									var000B,
									" Monetari, for a final sum of ",
									var000C,
									" Monetari given to thee.\"");
								var000E = Func099B(AVATAR, var000C, var0003, QUALITY_ANY, FRAME_ANY, false, true);
								say("\"'Tis done, ",
									var0000,
									"!\"");
							} else {
								say("\"Perhaps another time, ",
									var0000,
									"...\"");
							}
						} else {
							say("\"Thou dost not have any ",
								var0005,
								" to exchange for ",
								var0002,
								"!\"");
						}
					} else {
						say("\"Perhaps another time then...\"");
					}
				}
				if (var0002 == "Guilders") {
					say("\"Which coin dost thou care to exchange for guilders?\"");
					var0003 = 0x03B8;
					var0004 = ["Nothing"];
					if (Func097D(PARTY, 0x0001, 0x03B7, QUALITY_ANY, FRAME_ANY)) {
						var0004 &= "Monetari";
					}
					if (Func097D(PARTY, 0x0001, 0x03B4, QUALITY_ANY, FRAME_ANY)) {
						var0004 &= "Filari";
					}
					if (Func097D(PARTY, 0x0001, 0x0284, QUALITY_ANY, FRAME_ANY)) {
						var0004 &= "Gold Coins";
					}
					if (Func097D(PARTY, 0x0001, 0x0285, QUALITY_ANY, FRAME_ANY)) {
						var0004 &= "Gold Nuggets";
					}
					if (Func097D(PARTY, 0x0001, 0x03A9, QUALITY_ANY, FRAME_ANY)) {
						var0004 &= "Jewelry";
					}
					if (Func097D(PARTY, 0x0001, 0x0286, QUALITY_ANY, FRAME_ANY)) {
						var0004 &= "Gold Bars";
					}
					var0005 = Func0956(var0004);
					if (var0005 == "Nothing") {
						say("\"Perhaps another time, ",
							var0000,
							".\"");
						var0001 = false;
						return;
					}
					if (var0005 == "Monetari") {
						say("\"I can give thee 3 guilders for every 1 monetari thou hast.\"");
						var0006 = 0x03B7;
					}
					if (var0005 == "Filari") {
						say("\"I can give thee 3 guilders for every 4 filari thou hast.\"");
						var0006 = 0x03B4;
					}
					if (var0005 == "Gold Coins") {
						say("\"I can give thee 3 guilders for every 2 gold coins thou hast.\"");
						var0006 = 0x0284;
					}
					if (var0005 == "Gold Nuggets") {
						say("\"I can give thee 30 guilders for every 1 gold nugget thou hast.\"");
						var0006 = 0x0285;
					}
					if (var0005 == "Jewelry") {
						say("\"I can give thee 300 guilders for any piece of jewelry thou hast.\"");
						var0006 = 0x03A9;
						var0005 = "pieces of jewelry";
					}
					if (var0005 == "Gold Bars") {
						say("\"I can give thee 600 guilders for every gold bar thou hast.\"");
						var0006 = 0x0286;
						var0005 = "Gold Bars";
					}
					say("\"Wilt thou agree to my rate?\"");
					if (Func0955() == true) {
						var0007 = PARTY->count_objects(var0006, QUALITY_ANY, FRAME_ANY);
						if (var0007 > 0x01F4) {
							var0007 = 0x01F4;
						}
						if (var0007 != 0x0000) {
							say("\"How many ",
								var0005,
								" wouldst thou like to exchange?\"");
							var0008 = UI_input_numeric_value(0x0000, var0007, 0x0001, 0x0000);
							if (var0008 == 0x0000) {
								say("\"Perhaps another time, ",
									var0000,
									"...\"");
								break;
							}
							if (var0005 == "Monetari") {
								var0009 = var0008 * 0x0003;
							}
							if (var0005 == "Filari") {
								var0009 = (var0008 * 0x0003) / 0x0004;
								var000A = 0x0003;
							}
							if (var0005 == "Gold Coins") {
								var0009 = (var0008 * 0x0003) / 0x0002;
								var000A = 0x0002;
							}
							if (var0005 == "Gold Nuggets") {
								var0009 = var0008 * 0x001E;
								if (var0008 == 0x0001) {
									var0005 = "Gold Nugget";
								}
							}
							if (var0005 == "pieces of jewelry") {
								var0009 = var0008 * 0x012C;
								var0005 = "pieces of jewelry";
								if (var0008 == 0x0001) {
									var0005 = "piece of jewelry";
								}
							}
							if (var0005 == "Gold Bars") {
								var0009 = var0008 * 0x0258;
								if (var0008 == 0x0001) {
									var0005 = "Gold Bar";
								}
							}
							var000B = var0009 / 0x0028;
							var000C = var0009 - var000B;
							var000F = "Guilders";
							var0010 = "Guilders";
							if (var0009 == 0x0000) {
								say("\"Thou must offer at least ",
									var000A,
									" ",
									var0005,
									" to exchange for ",
									var0002,
									"!\"");
								break;
							}
							if (var0009 == 0x0001) {
								say("\"My fee will leave thee with nothing!\"");
								break;
							}
							if (var0009 <= 0x0028) {
								var000B = 0x0001;
								var000C = var0009 - var000B;
							}
							if (var000C == 0x0001) {
								var000F = "Guilder";
							}
							if (var000B == 0x0001) {
								var0010 = "Guilder";
							}
							if (var0008 >= 0x0001) {
								var000D = UI_remove_party_items(var0008, var0006, QUALITY_ANY, FRAME_ANY, false);
								say("\"Let me think...\"~\"I will take thy ",
									var0008,
									" ",
									var0005,
									" and in exchange give thee ",
									var0009,
									" Guilders, subtracting my charge of ",
									var000B,
									" ",
									var0010,
									", for a final sum of ",
									var000C,
									" ",
									var000F,
									" given to thee.\"");
								var000E = Func099B(AVATAR, var000C, var0003, QUALITY_ANY, FRAME_ANY, false, true);
								say("\"'Tis done, ",
									var0000,
									"!\"");
							} else {
								say("\"Perhaps another time, ",
									var0000,
									"...\"");
							}
						} else {
							say("\"Thou dost not have any ",
								var0005,
								" to exchange for ",
								var0002,
								"!\"");
						}
					} else {
						say("\"Perhaps another time then...\"");
					}
				}
				if (var0002 == "Filari") {
					say("\"Which coin dost thou care to exchange for filari?\"");
					var0003 = 0x03B4;
					var0004 = ["Nothing"];
					if (Func097D(PARTY, 0x0001, 0x03B7, QUALITY_ANY, FRAME_ANY)) {
						var0004 &= "Monetari";
					}
					if (Func097D(PARTY, 0x0001, 0x03B8, QUALITY_ANY, FRAME_ANY)) {
						var0004 &= "Guilders";
					}
					if (Func097D(PARTY, 0x0001, 0x0284, QUALITY_ANY, FRAME_ANY)) {
						var0004 &= "Gold Coins";
					}
					if (Func097D(PARTY, 0x0001, 0x0285, QUALITY_ANY, FRAME_ANY)) {
						var0004 &= "Gold Nuggets";
					}
					if (Func097D(PARTY, 0x0001, 0x03A9, QUALITY_ANY, FRAME_ANY)) {
						var0004 &= "Jewelry";
					}
					if (Func097D(PARTY, 0x0001, 0x0286, QUALITY_ANY, FRAME_ANY)) {
						var0004 &= "Gold Bars";
					}
					var0005 = Func0956(var0004);
					if (var0005 == "Nothing") {
						say("\"Perhaps another time, ",
							var0000,
							".\"");
						var0001 = false;
						return;
					}
					if (var0005 == "Monetari") {
						say("\"I can give thee 4 filari for every 1 monetari thou hast.\"");
						var0006 = 0x03B7;
					}
					if (var0005 == "Guilders") {
						say("\"I can give thee 4 filari for every 3 guilders thou hast.\"");
						var0006 = 0x03B8;
					}
					if (var0005 == "Gold Coins") {
						say("\"I can give thee 2 filari for every 1 gold coin thou hast.\"");
						var0006 = 0x0284;
					}
					if (var0005 == "Gold Nuggets") {
						say("\"I can give thee 40 filari for every 1 gold nugget thou hast.\"");
						var0006 = 0x0285;
					}
					if (var0005 == "Jewelry") {
						say("\"I can give thee 400 filari for any piece of jewelry thou hast.\"");
						var0006 = 0x03A9;
						var0005 = "pieces of jewelry";
					}
					if (var0005 == "Gold Bars") {
						say("\"I can give thee 800 filari for every gold bar thou hast.\"");
						var0006 = 0x0286;
						var0005 = "Gold Bars";
					}
					say("\"Wilt thou agree to my rate?\"");
					if (Func0955() == true) {
						var0007 = PARTY->count_objects(var0006, QUALITY_ANY, FRAME_ANY);
						if (var0007 > 0x01F4) {
							var0007 = 0x01F4;
						}
						if (var0007 != 0x0000) {
							say("\"How many ",
								var0005,
								" wouldst thou like to exchange?\"");
							var0008 = UI_input_numeric_value(0x0000, var0007, 0x0001, 0x0000);
							if (var0008 == 0x0000) {
								say("\"Perhaps another time, ",
									var0000,
									"...\"");
								break;
							}
							if (var0005 == "Monetari") {
								var0009 = var0008 * 0x0004;
							}
							if (var0005 == "Guilders") {
								var0009 = (var0008 * 0x0004) / 0x0003;
								var000A = 0x0002;
							}
							if (var0005 == "Gold Coins") {
								var0009 = var0008 * 0x0002;
								if (var0008 == 0x0001) {
									var0005 = "Gold Coin";
								}
							}
							if (var0005 == "Gold Nuggets") {
								var0009 = var0008 * 0x0028;
								if (var0008 == 0x0001) {
									var0005 = "Gold Nugget";
								}
							}
							if (var0005 == "pieces of jewelry") {
								var0009 = var0008 * 0x0190;
								var0005 = "pieces of jewelry";
								if (var0008 == 0x0001) {
									var0005 = "piece of jewelry";
								}
							}
							if (var0005 == "Gold Bars") {
								var0009 = var0008 * 0x0320;
								if (var0008 == 0x0001) {
									var0005 = "Gold Bar";
								}
							}
							var000B = var0009 / 0x0028;
							var000C = var0009 - var000B;
							if (var0009 == 0x0000) {
								say("\"Thou must offer at least ",
									var000A,
									" ",
									var0005,
									" to exchange for ",
									var0002,
									"!\"");
								break;
							}
							if (var0009 == 0x0001) {
								say("\"My fee will leave thee with nothing!\"");
								break;
							}
							if (var0009 <= 0x0028) {
								var000B = 0x0001;
								var000C = var0009 - var000B;
							}
							if (var0008 >= 0x0001) {
								var000D = UI_remove_party_items(var0008, var0006, QUALITY_ANY, FRAME_ANY, false);
								say("\"Let me think...\"~\"I will take thy ",
									var0008,
									" ",
									var0005,
									" and in exchange give thee ",
									var0009,
									" Filari, subtracting my charge of ",
									var000B,
									" Filari, for a final sum of ",
									var000C,
									" Filari given to thee.\"");
								var000E = Func099B(AVATAR, var000C, var0003, QUALITY_ANY, FRAME_ANY, false, true);
								say("\"'Tis done, ",
									var0000,
									"!\"");
							} else {
								say("\"Perhaps another time, ",
									var0000,
									"...\"");
							}
						} else {
							say("\"Thou dost not have any ",
								var0005,
								" to exchange for ",
								var0002,
								"!\"");
						}
					} else {
						say("\"Perhaps another time then...\"");
					}
				}
				if (var0002 == "Gold Coins") {
					say("\"Which coin dost thou care to exchange for gold?\"");
					var0003 = 0x0284;
					var0004 = ["Nothing"];
					if (Func097D(PARTY, 0x0001, 0x03B7, QUALITY_ANY, FRAME_ANY)) {
						var0004 &= "Monetari";
					}
					if (Func097D(PARTY, 0x0001, 0x03B4, QUALITY_ANY, FRAME_ANY)) {
						var0004 &= "Filari";
					}
					if (Func097D(PARTY, 0x0001, 0x03B8, QUALITY_ANY, FRAME_ANY)) {
						var0004 &= "Guilders";
					}
					if (Func097D(PARTY, 0x0001, 0x0285, QUALITY_ANY, FRAME_ANY)) {
						var0004 &= "Gold Nuggets";
					}
					if (Func097D(PARTY, 0x0001, 0x03A9, QUALITY_ANY, FRAME_ANY)) {
						var0004 &= "Jewelry";
					}
					if (Func097D(PARTY, 0x0001, 0x0286, QUALITY_ANY, FRAME_ANY)) {
						var0004 &= "Gold Bars";
					}
					var0005 = Func0956(var0004);
					if (var0005 == "Nothing") {
						say("\"Perhaps another time, ",
							var0000,
							".\"");
						var0001 = false;
						return;
					}
					if (var0005 == "Monetari") {
						say("\"I can give thee 2 gold coins for every 1 monetari thou hast.\"");
						var0006 = 0x03B7;
					}
					if (var0005 == "Guilders") {
						say("\"I can give thee 2 gold coins for every 3 guilders thou hast.\"");
						var0006 = 0x03B8;
					}
					if (var0005 == "Filari") {
						say("\"I can give thee 1 gold coin for every 2 filari thou hast.\"");
						var0006 = 0x03B4;
					}
					if (var0005 == "Gold Nuggets") {
						say("\"I can give thee 20 gold coins for every 1 gold nugget thou hast.\"");
						var0006 = 0x0285;
					}
					if (var0005 == "Jewelry") {
						say("\"I can give thee 200 gold coins for any piece of jewelry thou hast.\"");
						var0006 = 0x03A9;
						var0005 = "pieces of jewelry";
					}
					if (var0005 == "Gold Bars") {
						say("\"I can give thee 400 gold coins for every gold bar thou hast.\"");
						var0006 = 0x0286;
						var0005 = "Gold Bars";
					}
					say("\"Wilt thou agree to my rate?\"");
					if (Func0955() == true) {
						var0007 = PARTY->count_objects(var0006, QUALITY_ANY, FRAME_ANY);
						if (var0007 > 0x01F4) {
							var0007 = 0x01F4;
						}
						if (var0007 != 0x0000) {
							say("\"How many ",
								var0005,
								" wouldst thou like to exchange?\"");
							var0008 = UI_input_numeric_value(0x0000, var0007, 0x0001, 0x0000);
							if (var0008 == 0x0000) {
								say("\"Perhaps another time, ",
									var0000,
									"...\"");
								break;
							}
							if (var0005 == "Monetari") {
								var0009 = var0008 * 0x0002;
							}
							if (var0005 == "Guilders") {
								var0009 = (var0008 * 0x0002) / 0x0003;
								var000A = 0x0003;
							}
							if (var0005 == "Filari") {
								var0009 = var0008 / 0x0002;
								var000A = 0x0004;
							}
							if (var0005 == "Gold Nuggets") {
								var0009 = var0008 * 0x0014;
								if (var0008 == 0x0001) {
									var0005 = "Gold Nugget";
								}
							}
							if (var0005 == "pieces of jewelry") {
								var0009 = var0008 * 0x00C8;
								var0005 = "pieces of jewelry";
								if (var0008 == 0x0001) {
									var0005 = "piece of jewelry";
								}
							}
							if (var0005 == "Gold Bars") {
								var0009 = var0008 * 0x0190;
								if (var0008 == 0x0001) {
									var0005 = "Gold Bar";
								}
							}
							var000B = var0009 / 0x0028;
							var000C = var0009 - var000B;
							var000F = "Gold Coins";
							var0010 = "Gold Coins";
							if (var0009 == 0x0000) {
								say("\"Thou must offer at least ",
									var000A,
									" ",
									var0005,
									" to exchange for ",
									var0002,
									"!\"");
								break;
							}
							if (var0009 == 0x0001) {
								say("\"My fee will leave thee with nothing!\"");
								break;
							}
							if (var0009 <= 0x0028) {
								var000B = 0x0001;
								var000C = var0009 - var000B;
							}
							if (var000C == 0x0001) {
								var000F = "Gold Coin";
							}
							if (var000B == 0x0001) {
								var0010 = "Gold Coin";
							}
							if (var0008 >= 0x0001) {
								var000D = UI_remove_party_items(var0008, var0006, QUALITY_ANY, FRAME_ANY, false);
								say("\"Let me think...\"~\"I will take thy ",
									var0008,
									" ",
									var0005,
									" and in exchange give thee ",
									var0009,
									" Gold Coins, subtracting my charge of ",
									var000B,
									" ",
									var0010,
									", for a final sum of ",
									var000C,
									" ",
									var000F,
									" given to thee.\"");
								var000E = Func099B(AVATAR, var000C, var0003, QUALITY_ANY, FRAME_ANY, false, true);
								say("\"'Tis done, ",
									var0000,
									"!\"");
							} else {
								say("\"Perhaps another time, ",
									var0000,
									"...\"");
							}
						} else {
							say("\"Thou dost not have any ",
								var0005,
								" to exchange for ",
								var0002,
								"!\"");
						}
					} else {
						say("\"Perhaps another time then...\"");
					}
				}
			} while (false);
			say("\"Dost thou care to exchange more coins?\"");
			var0001 = Func0955();
		}
	} else {
		say("\"If that is what thou dost desire...\"");
	}
}

extern var Func0954 0x954 ();
extern var Func0957 0x957 (var var0000);
extern var Func0955 0x955 ();
extern var Func080D 0x80D (var var0000, var var0001);
extern var Func0943 0x943 (var var0000, var var0001, var var0002, var var0003, var var0004, var var0005, var var0006, var var0007);
extern var Func0992 0x992 (var var0000, var var0001, var var0002, var var0003);

void Func080C 0x80C () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;
	var var0008;
	var var0009;
	var var000A;
	var var000B;
	var var000C;
	var var000D;
	var var000E;
	var var000F;
	var var0010;
	var var0011;

	var0000 = Func0954();
	var0001 = UI_die_roll(0x0000, 0x0002);
	UI_push_answers();
	var0002 = true;
	var0003 = ["nothing", "torches", "backpack", "dagger", "abacus", "sextant", "boots", "leather leggings", "bedroll", "sleeping powder", "bandages", "fur cloak"];
	var0004 = [0x0000, 0x0253, 0x0321, 0x0252, 0x02A3, 0x028A, 0x024B, 0x023E, 0x0247, 0x0288, 0x033B, 0x00E3];
	var0005 = [FRAME_ANY, 0x0000, 0x0000, 0x0000, 0x000B, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, var0001, 0x0001];
	var0006 = [0x0000, 0x0014, 0x0078, 0x0008, 0x0078, 0x0096, 0x0032, 0x006E, 0x00AF, 0x004B, 0x0032, 0x00FA];
	var0007 = [0x0000, 0x000C, 0x0041, 0x0005, 0x004B, 0x004B, 0x001C, 0x003C, 0x005A, 0x002D, 0x0019, 0x0087];
	var0008 = 0x03B8;
	var0009 = [0x0000, 0x0003, 0x0001, 0x0001, 0x0001, 0x0001, 0x0001, 0x0001, 0x0001, 0x0001, 0x0001, 0x0001];
	var000A = [0x0000, 0x0001, 0x0001, 0x0001, 0x0000, 0x0000, 0x0001, 0x0001, 0x0000, 0x0001, 0x0001, 0x0001];
	say("\"What dost thou require, ",
		var0000,
		"?\"");
	while (var0002) {
		var000B = Func0957(var0003);
		if (var000B == 0x0001) {
			var000C = UI_get_random(0x0003);
			if (var000C == 0x0001) {
				say("\"Thou art correct -- these prices are entirely too high!\"");
			}
			if (var000C == 0x0002) {
				say("\"Oh, well. But I have so enjoyed our conversation!\"");
			}
			if ((var000C != 0x0001) && (var000C != 0x0002)) {
				say("\"But please come again sometime!\"");
			}
			var0002 = false;
			continue;
		}
		var000D = var0006[var000B];
		var000E = 0x0000;
		var000C = UI_die_roll(0x0001, 0x0005);
		if (var000C == 0x0001) {
			var000F = "Dost thou accept?";
		}
		if (var000C == 0x0002) {
			var000F = "Will this be fine with thee?";
		}
		if (var000C == 0x0003) {
			var000F = "Dost thou find the price agreeable?";
		}
		if (var000C == 0x0004) {
			var000F = "Dost thou agree?";
		}
		if (var000C == 0x0005) {
			var000F = "Is the price acceptable?";
		}
		if (var000B == 0x0002) {
			say("\"The price for a bundle of 3 torches is ",
				var000D,
				" guilders.\"");
			say("\"",
				var000F,
				"\"");
			var0010 = "torches, in bundles of 3,";
		}
		if (var000B == 0x0003) {
			say("\"These are imported from Fawn, where the womenfolk are skilled at making strong cloth.\"");
			say("\"Each backpack costs ",
				var000D,
				" guilders, which I think is a fair price.\"");
			say("\"",
				var000F,
				"\"");
			var0010 = "backpacks";
		}
		if (var000B == 0x0004) {
			say("\"For the low price of ",
				var000D,
				" guilders, I can sell thee a fine dagger.\"");
			say("\"",
				var000F,
				"\"");
			var0010 = "daggers";
		}
		if (var000B == 0x0005) {
			say("\"Only ",
				var000D,
				" guilders will buy thee an excellent abacus. Thou canst use it to add thy coinage.\"");
			say("\"",
				var000F,
				"\"");
		}
		if (var000B == 0x0006) {
			say("\"If thou dost wish to navigate upon the seas, thou shalt surely need a sextant!\" *\"I will sell thee one for ",
				var000D,
				" guilders.\"");
			say("\"",
				var000F,
				"\"");
		}
		if (var000B == 0x0007) {
			say("\"To protect thy feet, a sturdy pair of Moonshadian leather boots would do thee well, ",
				var0000,
				". For only ",
				var000D,
				" guilders it is thine!\"");
			say("\"",
				var000F,
				"\"");
			var0010 = "pairs of Moonshadian leather boots";
		}
		if (var000B == 0x0008) {
			say("\"",
				var000D,
				" guilders is not much to pay if thou dost need to protect thy legs, ",
				var0000,
				".\"");
			say("\"",
				var000F,
				"\"");
			var0010 = "pairs of leather leggings";
		}
		if (var000B == 0x0009) {
			say("\"Ah, this is one item that we have stocked in plenty, ",
				var0000,
				"! I can sell thee a bedroll for ",
				var000D,
				" guilders.\"");
			say("\"",
				var000F,
				"\"");
			var0010 = "bedrolls";
		}
		if (var000B == 0x000A) {
			say("\"This... powder... is most effective if thou dost suffer from sleepless nights, ",
				var0000,
				". I charge a small fee of ",
				var000D,
				" guilders for a jar.\"");
			say("\"",
				var000F,
				"\"");
			var0010 = "vials of sleeping powder";
		}
		if (var000B == 0x000B) {
			say("\"If thou art in need of healing minor wounds I can offer thee clean bandages for ",
				var000D,
				" guilders apiece.\"");
			say("\"",
				var000F,
				"\"");
			var0010 = "bandages";
		}
		if (var000B == 0x000C) {
			say("\"For the sum of ",
				var000D,
				" guilders I can sell thee a bear cloak. 'Twill keep thee warm on a frosty night.\"");
			say("\"",
				var000F,
				"\"");
			var0010 = "bear cloaks";
		}
		if (var000D == var0007[var000B]) {
			if (Func0955()) {
				var0011 = var000D;
			} else {
				var0011 = 0x0000;
			}
		} else {
			var0011 = Func080D(var0006[var000B], var0007[var000B]);
		}
		if (var0011 > 0x0000) {
			if (var000A[var000B] == 0x0001) {
				say("\"How many ",
					var0010,
					" wouldst thou like?\"");
				var000E = Func0943(var0004[var000B], var0005[var000B], var0009[var000B], var0008, var0011, 0x000A, 0x0001, false);
			} else {
				var000E = Func0943(var0004[var000B], var0005[var000B], var0009[var000B], var0008, var0011, 0x0000, 0x0001, false);
			}
		}
		if (var000E == 0x0001) {
			say("\"Please come again, ",
				var0000,
				"!\"");
		} else if (var000E == 0x0002) {
			say("\"Perhaps thou canst return with more companions, for thou hast not room to carry what thou desirest to purchase!\"");
		} else if (var000E == 0x0003) {
			var000C = Func0992(0x0001, "@But we are short of funds!@", 0x0000, false);
			var000C = Func0992(0x0001, "@How embarrassing...@", 0x0000, false);
			if (var000C != AVATAR) {
				BUCIA->show_npc_face0(0x0000);
				say("\"I would let thee have the goods for free, as I am sure that thou art a trustworthy person.\"");
				say("\"But the shop's owner is a stern man, and very strict.\"");
			} else {
				say("\"But thou dost not have the coins to pay for thy purchase! Next time, thou shouldst count thy coins first.\"");
			}
			if (0x001F < (BUCIA->get_npc_id() + 0x0004)) {
				BUCIA->set_npc_id(0x001F);
			} else {
				BUCIA->set_npc_id(BUCIA->get_npc_id() + 0x0004);
			}
		}
		say("\"Dost thou wish to purchase anything else?\"");
		var0002 = Func0955();
	}
	UI_pop_answers();
}

extern var Func0954 0x954 ();
extern var Func0956 0x956 (var var0000);
extern var Func0999 0x999 (var var0000, var var0001, var var0002, var var0003, var var0004, var var0005, var var0006);
extern var Func0955 0x955 ();

var Func080D 0x80D (var var0000, var var0001) {
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;
	var var0008;
	var var0009;
	var var000A;
	var var000B;
	var var000C;
	var var000D;
	var var000E;
	var var000F;
	var var0010;

	var0002 = Func0954();
	var0003 = UI_is_pc_female();
	var0004 = var0000;
	var0005 = (var0001 / 0x0003) * 0x0002;
	var0006 = 0x000F - (BUCIA->get_npc_id() / 0x0002);
	var0007 = 0x0000;
	var0008 = 0x0001;
	var0009 = 0x0000;
	var000A = 0x0002;
	var000B = BUCIA->get_npc_id();
	while (var0008) {
		var000C = Func0956(["yes", "no", "haggle"]);
		if (var000C == "no") {
			return 0x0000;
		}
		if (var000C == "yes") {
			var000D = 0x0000;
		} else {
			var000E = Func0999(var0004, var0001, var000A, var0005, var0009, var0006, var0007);
			var0009 += 0x0001;
			var0007 = var000E[0x0004];
			var000D = var000E[0x0003];
			var000F = var0004;
			var0004 = var000E[0x0002];
			var0005 = var000E[0x0001];
		}
		var0010 = UI_get_random(0x0003);
		if (var000D < 0x0002) {
			if (var0004 < (var0001 + ((var0000 - var0001) / 0x0004))) {
				if (var0010 == 0x0001) {
					say("\"Thou hast better not visit this shop too often, or we shall lose all our money!\"");
				}
				if (var0010 == 0x0002) {
					say("\"Thou hast bargained me to a bitter price, but then, I do not own this store!\"");
				}
				if (var0010 == 0x0003) {
					say("\"Well, no one else in town is spending coins, so I must reluctantly accept thine offer.\"");
				}
			} else if (var0004 < (var0001 + ((var0000 - var0001) / 0x0003))) {
				if (var0010 == 0x0001) {
					say("\"Believe me, I am allowing thee a fantastic price. Please do not tell anyone!\"");
				}
				if (var0010 == 0x0002) {
					say("\"Thou must be poor, if thou must bargain me down so low. Very well, I shall have pity on thee.\"");
				}
				if (var0010 == 0x0003) {
					say("\"I think thou hast talked me into a price that is too low...\"");
					say("\"But I do not care. Hast thou noticed how beautiful the sunsets have been lately?\"");
				}
			} else if (var0004 < (var0001 + ((var0000 - var0001) / 0x0002))) {
				if (var0010 == 0x0001) {
					say("\"'Tis a good price, and a great value.\"");
				}
				if (var0010 == 0x0002) {
					say("\"So that will be ",
						var0004,
						" guilders -- and I will say again that it hath been nice chatting with thee today.\"");
				}
				if (var0010 == 0x0003) {
					say("\"'Tis a fair deal -- only ",
						var0004,
						" guilders. Be certain to tell all thy friends!\"");
				}
			} else {
				if (var0010 == 0x0001) {
					say("\"",
						var0004,
						" guilders! Thank thee, ",
						var0002,
						".\"");
				}
				if (var0010 == 0x0002) {
					say("\"That is wonderful! ",
						var0004,
						" whole guilders... why, the owner shall be so proud of me for this sale!\"");
				}
				if (var0010 == 0x0003) {
					say("\"As I always say, one must pay high prices to obtain high quality.\"");
				}
			}
			say("\"",
				var0004,
				" guilders is the agreed price, ",
				var0002,
				"?\"");
			if (Func0955()) {
				if (var000B > 0x0001) {
					BUCIA->set_npc_id(var000B - 0x0002);
				}
				return var0004;
			}
			if (var0010 == 0x0001) {
				say("\"Thou shouldst not jest with me. Simply because I'm only a Mundane doth not mean that thou canst waste my time.\"");
			}
			if (var0010 == 0x0002) {
				say("\"But we had an agreement!\"");
			}
			if (var0010 == 0x0003) {
				say("\"Canst thou not make up thy mind, ",
					var0002,
					"?\"");
			}
			if (0x001F < (var000B + 0x000A)) {
				BUCIA->set_npc_id(0x001F);
			} else {
				BUCIA->set_npc_id(var000B + 0x000A);
			}
			return 0x0000;
		}
		if (var0007 == 0x0001) {
			if (var000D == 0x0005) {
				say("\"I have gone as low as I can, ",
					var0002,
					". ",
					var0004,
					" guilders. Dost thou accept?\"");
				if (var000B < 0x001C) {
					BUCIA->set_npc_id(var000B + 0x0004);
				}
				if (Func0955()) {
					return var0004;
				}
				var0008 = 0x0000;
			} else {
				say("\"",
					var0004,
					" guilders is my final offer. Is this acceptable to thee?\"");
				if (var000B < 0x001E) {
					BUCIA->set_npc_id(var000B + 0x0002);
				}
			}
		} else {
			if (var000D == 0x0002) {
				if (var0010 == 0x0001) {
					say("\"I see that thou dost appreciate quality goods! Wouldst thou pay ",
						var0004,
						" guilders?\"");
				}
				if (var0010 == 0x0002) {
					say("\"Thou art a most perceptive person. But wouldst thou pay ",
						var0004,
						" guilders?\"");
				}
				if (var0010 == 0x0003) {
					say("\"I can tell that we shall be doing business regularly. Thy price is fair, but I would prefer to receive ",
						var0004,
						" guilders. Is this acceptable?\"");
				}
			}
			if (var000D == 0x0003) {
				if (var0010 == 0x0001) {
					say("\"Hmmm... perhaps ",
						var0004,
						" guilders?\"");
				}
				if (var0010 == 0x0002) {
					say("\"I would be more easy if thou wouldst pay at least ",
						var0004,
						" guilders.\"");
				}
				if (var0010 == 0x0003) {
					say("\"Surely, thou hast more funds than this! I think that thou couldst afford ",
						var0004,
						" guilders. Is this acceptable?\"");
				}
			}
			if (var000D == 0x0004) {
				if (var0010 == 0x0001) {
					say("\"But I would lose mine employment if I sold at such a price! Wouldst thou consider ",
						var0004,
						" guilders?\"");
				}
				if (var0010 == 0x0002) {
					say("\"Thou art not serious! Surely, thou canst tell that ",
						var0004,
						" guilders is a more fair price.\"");
				}
				if (var0010 == 0x0003) {
					say("\"Dost thou think me a simpleton! I must accept no less than ",
						var0004,
						" guilders, or I should be ashamed of myself. Dost thou accept?\"");
				}
			}
			if (var000D == 0x0005) {
				var0004 = var000F;
				if (var0010 == 0x0001) {
					say("\"Of course not. ",
						var0004,
						" guilders.\"");
				}
				if (var0010 == 0x0002) {
					say("\"",
						var0004,
						" guilders, and no less!\"");
				}
				if (var0010 == 0x0003) {
					say("\"I should be a fool if I sold at such a price. ",
						var0004,
						" guilders is where I must stand.\"");
				}
				if (var000B < 0x001F) {
					BUCIA->set_npc_id(var000B + 0x0001);
				}
			}
		}
	}
	return 0;
}

void Func080E 0x80E () {
	var var0000;
	var var0001;

	var0000 = CANTRA->find_nearby(0x013E, 0x001E, MASK_NONE);
	UI_init_conversation();
	CANTRA->show_npc_face0(0x0000);
	say("\"Leave me alone, mage. I am but a little girl.\"");
	CINDY->show_npc_face1(0x0000);
	say("\"I know what thou art, Bane of Chaos. That body is but a shell that thou dost wear.\"");
	UI_remove_npc_face1();
	0x0000->set_conversation_slot();
	say("\"I can escape thee! My powers dwarf thine...\"");
	CINDY->show_npc_face1(0x0000);
	say("\"Thy powers have dwindled due to thine imprisonment. Thou art no match for me, now...\"");
	UI_remove_npc_face1();
	UI_remove_npc_face0();
	var0001 = script CANTRA after 60 ticks {
		nohalt;
		call Func0440;
	};
	if (var0000) {
		var0000->set_item_flag(SI_TOURNAMENT);
		var0000->set_alignment(EVIL);
		var0001 = var0000->add_cont_items(0x0001, 0x0358, 0x0003, FRAME_ANY, 0x0012);
		var0001 = var0000->add_cont_items(0x0001, 0x0327, 0x0003, FRAME_ANY, 0x0012);
		var0001 = var0000->add_cont_items(0x0001, 0x011F, 0x0001, FRAME_ANY, 0x0012);
		var0001 = var0000->add_cont_items(0x0001, 0x02DB, 0x0006, FRAME_ANY, 0x0012);
		var0000->set_schedule_type(IN_COMBAT);
		var0000->set_oppressor(CANTRA);
		var0000->set_opponent(CANTRA);
	}
	CANTRA->set_alignment(GOOD);
	var0001 = CANTRA->add_cont_items(0x0001, 0x01A8, 0x0005, FRAME_ANY, 0x0012);
	var0001 = CANTRA->add_cont_items(0x0001, 0x0359, 0x0002, FRAME_ANY, 0x0012);
	var0001 = CANTRA->add_cont_items(0x0001, 0x02A4, 0x0005, FRAME_ANY, 0x0012);
	var0001 = CANTRA->add_cont_items(0x0001, 0x020F, 0x0001, FRAME_ANY, 0x0012);
	CANTRA->set_schedule_type(IN_COMBAT);
	CANTRA->set_oppressor(var0000);
	CANTRA->set_opponent(var0000);
	UI_end_conversation();
	abort;
}

extern var Func0957 0x957 (var var0000);
extern var Func0955 0x955 ();
extern var Func0943 0x943 (var var0000, var var0001, var var0002, var var0003, var var0004, var var0005, var var0006, var var0007);

void Func080F 0x80F () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;
	var var0008;
	var var0009;
	var var000A;
	var var000B;

	var0000 = true;
	var0001 = ["nothing", "bread", "water"];
	var0002 = [0x0000, 0x0179, 0x0268];
	var0003 = [FRAME_ANY, 0x0000, 0x0006];
	var0004 = [0x0000, 0x0014, 0x000A];
	var0005 = 0x03B8;
	var0006 = [0x0000, 0x0001, 0x0001];
	var0007 = [0x0000, 0x0001, 0x0001];
	say("\"What dost thou wish, felon?\"");
	while (var0000) {
		var0008 = Func0957(var0001);
		if (var0008 == 0x0001) {
			say("\"Perhaps another time, then.\"");
			var0000 = false;
		} else {
			var0009 = var0004[var0008];
			var000A = 0x0000;
			if (var0008 == 0x0002) {
				say("\"The price is ",
					var0009,
					" guilders... I have a very limited supply. Dost thou accept?\"");
			}
			if (var0008 == 0x0003) {
				say("\"For a jug of water, my price is ",
					var0009,
					" guilders. Dost thou find this acceptable?\"");
			}
			if (var0009 == var0004[var0008]) {
				if (Func0955() == true) {
					var000B = var0009;
				} else {
					var000B = 0x0000;
				}
			} else {
				say("\"This is not Moonshade, felon. My prices are fixed... Take them or leave.\"");
			}
			if (var000B > 0x0000) {
				if (var0007[var0008] == 0x0001) {
					say("\"How many wouldst thou like?\"");
					var000A = Func0943(var0002[var0008], var0003[var0008], var0006[var0008], var0005, var000B, 0x0014, 0x0001, false);
				} else {
					var000A = Func0943(var0002[var0008], var0003[var0008], var0006[var0008], var0005, var000B, 0x0000, 0x0001, false);
				}
			}
			if (var000A == 0x0001) {
				say("\"May it nourish thee, felon.\"");
			} else if (var000A == 0x0002) {
				say("\"Thou canst not handle so much, felon.\"");
			} else if (var000A == 0x0003) {
				say("\"As thou dost not have the guilders to pay me, I am afraid thou shalt go hungry, felon.\"");
			}
			say("\"Wouldst thou care for more?\"");
			var0000 = Func0955();
		}
	}
}

extern var Func0957 0x957 (var var0000);
extern var Func0955 0x955 ();
extern var Func0943 0x943 (var var0000, var var0001, var var0002, var var0003, var var0004, var var0005, var var0006, var var0007);

void Func0810 0x810 () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;
	var var0008;
	var var0009;
	var var000A;
	var var000B;

	var0000 = true;
	var0001 = ["nothing", "potion", "bandages"];
	var0002 = [0x0000, 0x0154, 0x033B];
	var0003 = [FRAME_ANY, 0x0001, 0x0001];
	var0004 = [0x0000, 0x0050, 0x001E];
	var0005 = 0x03B8;
	var0006 = [0x0000, 0x0001, 0x0001];
	var0007 = [0x0000, 0x0001, 0x0001];
	say("\"What dost thou care to buy, felon?\"");
	while (var0000) {
		var0008 = Func0957(var0001);
		if (var0008 == 0x0001) {
			say("\"Perhaps another time, then.\"");
			var0000 = false;
		} else {
			var0009 = var0004[var0008];
			var000A = 0x0000;
			if (var0008 == 0x0002) {
				say("\"The price is ",
					var0009,
					" guilders... There is not much to spare for felons. Dost thou accept?\"");
			}
			if (var0008 == 0x0003) {
				say("\"For ",
					var0009,
					" guilders I can sell thee a bandage. What dost thou say?\"");
			}
			if (var0009 == var0004[var0008]) {
				if (Func0955() == true) {
					var000B = var0009;
				} else {
					var000B = 0x0000;
				}
			} else {
				say("\"Pay or leave.\"");
			}
			if (var000B > 0x0000) {
				if (var0007[var0008] == 0x0001) {
					say("\"How many wouldst thou like?\"");
					var000A = Func0943(var0002[var0008], var0003[var0008], var0006[var0008], var0005, var000B, 0x0014, 0x0001, false);
				} else {
					var000A = Func0943(var0002[var0008], var0003[var0008], var0006[var0008], var0005, var000B, 0x0000, 0x0001, false);
				}
			}
			if (var000A == 0x0001) {
				say("\"Enjoy thy purchase, felon.\"");
			} else if (var000A == 0x0002) {
				say("\"Thou canst not handle so much, felon.\"");
			} else if (var000A == 0x0003) {
				say("\"Since thou dost not have the guilders to pay me, I am afraid thou wilt have to suffer, felon.\"");
			}
			say("\"Dost thou wish another purchase?\"");
			var0000 = Func0955();
		}
	}
}

extern var Func0954 0x954 ();
extern var Func0953 0x953 ();
extern var Func0957 0x957 (var var0000);
extern var Func0955 0x955 ();
extern var Func0812 0x812 (var var0000, var var0001);
extern var Func0943 0x943 (var var0000, var var0001, var var0002, var var0003, var var0004, var var0005, var var0006, var var0007);
extern var Func0992 0x992 (var var0000, var var0001, var var0002, var var0003);

void Func0811 0x811 () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;
	var var0008;
	var var0009;
	var var000A;
	var var000B;
	var var000C;
	var var000D;
	var var000E;
	var var000F;
	var var0010;
	var var0011;
	var var0012;
	var var0013;

	var0000 = Func0954();
	var0001 = Func0953();
	UI_push_answers();
	var0002 = true;
	var0003 = ["nothing", "bear pelt", "beaver pelt", "muskrat pelt", "snow leopard pelt", "gwani pelt", "bear cloak", "leopard cloak", "gwani cloak", "fur cap", "fur boots"];
	var0004 = [0x0000, 0x03D1, 0x03D1, 0x03D1, 0x03D1, 0x03D1, 0x00E3, 0x00E3, 0x00E3, 0x03EC, 0x024B];
	var0005 = [FRAME_ANY, 0x0001, 0x0002, 0x0004, 0x0008, 0x0009, 0x0001, 0x0002, 0x0004, 0x0001, 0x0003];
	var0006 = [0x0000, 0x0050, 0x003C, 0x002D, 0x005A, 0x0064, 0x0078, 0x0096, 0x00AF, 0x0016, 0x001E];
	var0007 = [0x0000, 0x002D, 0x001E, 0x001B, 0x0032, 0x0032, 0x004B, 0x0055, 0x0050, 0x000D, 0x0011];
	var0008 = 0x03B7;
	var0009 = [0x0000, 0x0001, 0x0001, 0x0001, 0x0001, 0x0001, 0x0001, 0x0001, 0x0001, 0x0001, 0x0001];
	var000A = [0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0001, 0x0001];
	if (UI_is_pc_female()) {
		var000B = "menfolk";
		var000C = "Milady";
	} else {
		var000B = "ladies";
		var000C = "Milord";
	}
	say("\"What wouldst thou care to purchase, ",
		var0000,
		"?\"");
	while (var0002) {
		var000D = Func0957(var0003);
		if (var000D == 0x0001) {
			say("\"Some other time then.\"");
			var0002 = false;
			continue;
		}
		var000E = var0006[var000D];
		var000F = 0x0000;
		var0010 = UI_die_roll(0x0001, 0x0005);
		if (var0010 == 0x0001) {
			var0011 = "Dost thou accept?";
		}
		if (var0010 == 0x0002) {
			var0011 = "Will this be fine with thee?";
		}
		if (var0010 == 0x0003) {
			var0011 = "What dost thou say?";
		}
		if (var0010 == 0x0004) {
			var0011 = var000C + ", dost thou agree?";
		}
		if (var0010 == 0x0005) {
			var0011 = var000C + ", is the price acceptable?";
		}
		if (var000D == 0x0002) {
			say("\"I can let thee have it for ",
				var000E,
				" monetari. It will keep thy toes warm on a frosty night, ",
				var0000,
				".\"");
			say("\"",
				var0011,
				"\"");
		}
		if (var000D == 0x0003) {
			say("\"",
				var000E,
				" monetari for a nice beaver rug is not much.\"");
			say("\"",
				var0011,
				"\"");
		}
		if (var000D == 0x0004) {
			say("\"My muskrat pelts are cheap if thou dost care about saving thy money. ",
				var000E,
				" monetari is what I charge.\"");
			say("\"",
				var0011,
				"\"");
		}
		if (var000D == 0x0005) {
			say("\"Ah, the ",
				var000B,
				" enjoy a good romp on snow leopard skin! ",
				var000E,
				" monetari is my price.\"");
			say("\"",
				var0011,
				"\"");
		}
		if (var000D == 0x0006) {
			say("\"There is something very exotic about Gwani pelts, ",
				var0000,
				". For ",
				var000E,
				" monetari I will sell thee one.\"");
			say("\"",
				var0011,
				"\"");
		}
		if (var000D == 0x0007) {
			say("\"If thou dost want something to keep thee warm on cold winter days, thou shouldst buy one of my bear cloaks. I can sell it to thee for ",
				var000E,
				" monetari.\"");
			say("\"",
				var0011,
				"\"");
		}
		if (var000D == 0x0008) {
			say("\"There is nothing finer than the feel of snow leopard skin upon thine own! For ",
				var000E,
				" monetari it is thine.\"");
			say("\"",
				var0011,
				"\"");
		}
		if (var000D == 0x0009) {
			say("\"A Gwani cloak will protect thee from the cold better than any other type of fur! For ",
				var000E,
				" monetari I can sell thee one.\"");
			say("\"",
				var0011,
				"\"");
		}
		if (var000D == 0x000A) {
			say("\"I will sell thee a nice warm fur cap for ",
				var000E,
				" monetari.\"");
			say("\"",
				var0011,
				"\"");
		}
		if (var000D == 0x000B) {
			say("\"For ",
				var000E,
				" monetari, thou canst purchase fur-lined boots, ",
				var0000,
				". A pair will keep thee warm even in the frozen north.\"");
			say("\"",
				var0011,
				"\"");
		}
		if (var000E == var0007[var000D]) {
			if (Func0955()) {
				var0012 = var000E;
			} else {
				var0012 = 0x0000;
			}
		} else {
			var0012 = Func0812(var0006[var000D], var0007[var000D]);
		}
		if (var0012 > 0x0000) {
			if (var000A[var000D] == 0x0001) {
				say("\"How many wouldst thou like?\"");
				var000F = Func0943(var0004[var000D], var0005[var000D], 0x0001, var0008, var0012, 0x0005, 0x0001, false);
			} else {
				var000F = Func0943(var0004[var000D], var0005[var000D], var0009[var000D], var0008, var0012, 0x0000, 0x0001, false);
			}
		}
		if (var000F == 0x0001) {
			say("\"Enjoy thy purchase, ",
				var0000,
				"!\"");
		} else if (var000F == 0x0002) {
			say("\"Thou canst not carry thy purchase, ",
				var0000,
				"!\"");
		} else if (var000F == 0x0003) {
			var0013 = Func0992(0x0001, (("@But " + var0001) + ", we lack adequate funds!@"), 0x0000, false);
			if (var0013 != AVATAR) {
				CELLIA->show_npc_face0(0x0000);
				say("\"I am sorry, but I must make a living.\"");
			} else {
				say("\"Thou dost not have the monetari to pay me.\"");
			}
			if (0x001F < (CELLIA->get_npc_id() + 0x0006)) {
				CELLIA->set_npc_id(0x001F);
			} else {
				CELLIA->set_npc_id(CELLIA->get_npc_id() + 0x0006);
			}
		}
		say("\"Wouldst thou care for more?\"");
		var0002 = Func0955();
	}
	UI_pop_answers();
}

extern var Func0954 0x954 ();
extern var Func0956 0x956 (var var0000);
extern var Func0999 0x999 (var var0000, var var0001, var var0002, var var0003, var var0004, var var0005, var var0006);
extern var Func0955 0x955 ();

var Func0812 0x812 (var var0000, var var0001) {
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;
	var var0008;
	var var0009;
	var var000A;
	var var000B;
	var var000C;
	var var000D;
	var var000E;
	var var000F;
	var var0010;
	var var0011;

	var0002 = Func0954();
	var0003 = UI_is_pc_female();
	if (UI_is_pc_female()) {
		var0004 = "Milady";
	} else {
		var0004 = "Milord";
	}
	var0005 = var0000;
	var0006 = (var0001 / 0x0003) * 0x0002;
	var0007 = 0x000F - (CELLIA->get_npc_id() / 0x0002);
	var0008 = 0x0000;
	var0009 = 0x0001;
	var000A = 0x0000;
	var000B = 0x0002;
	var000C = CELLIA->get_npc_id();
	while (var0009) {
		var000D = Func0956(["yes", "no", "haggle"]);
		if (var000D == "no") {
			return 0x0000;
		}
		if (var000D == "yes") {
			var000E = 0x0000;
		} else {
			var000F = Func0999(var0005, var0001, var000B, var0006, var000A, var0007, var0008);
			var000A += 0x0001;
			var0008 = var000F[0x0004];
			var000E = var000F[0x0003];
			var0010 = var0005;
			var0005 = var000F[0x0002];
			var0006 = var000F[0x0001];
		}
		var0011 = UI_get_random(0x0003);
		if (var000E < 0x0002) {
			if (var0005 < (var0001 + ((var0000 - var0001) / 0x0004))) {
				if (var0011 == 0x0001) {
					say("\"Thou dost not know what a good bargain thou hast made, ",
						var0002,
						".\"");
				}
				if (var0011 == 0x0002) {
					say("\"",
						var0004,
						", I have not lost money on a deal since I was a young girl.\"");
				}
				if (var0011 == 0x0003) {
					say("\"Thou art shrewd indeed, ",
						var0002,
						".\"");
				}
			} else if (var0005 < (var0001 + ((var0000 - var0001) / 0x0003))) {
				if (var0011 == 0x0001) {
					say("\"I must be taken with thee, ",
						var0002,
						"! To offer such a price...\"");
				}
				if (var0011 == 0x0002) {
					say("\"",
						var0004,
						", thou wilt put me out of business if thou dost stay much longer!\"");
				}
				if (var0011 == 0x0003) {
					say("\"I have met my match in thee, ",
						var0002,
						"!\"");
				}
			} else if (var0005 < (var0001 + ((var0000 - var0001) / 0x0002))) {
				if (var0011 == 0x0001) {
					say("\"No one else is willing to put such care into their work as I do, ",
						var0002,
						".\"");
				}
				if (var0011 == 0x0002) {
					say("\"Thou art a worthy opponent, ",
						var0002,
						".\"");
				}
				if (var0011 == 0x0003) {
					say("\"Remember me, if thou dost ever need any more furs!\"");
				}
			} else {
				if (var0011 == 0x0001) {
					say("\"Thou art always welcome in my shop, ",
						var0002,
						"!\"");
				}
				if (var0011 == 0x0002) {
					say("\"May it give thee great pleasure, ",
						var0002,
						"!\"");
				}
				if (var0011 == 0x0003) {
					say("\"'Tis hard to offer lower prices these days. The Goblins have hurt everyone's business.\"");
				}
			}
			say("\"Thou hast agreed to a price of ",
				var0005,
				" monetari, ",
				var0002,
				"?\"");
			if (Func0955()) {
				if (var000C > 0x0001) {
					CELLIA->set_npc_id(var000C - 0x0002);
				}
				return var0005;
			}
			if (var0011 == 0x0001) {
				say("\"Take care that thou dost not seek to play me for the fool!\"");
			}
			if (var0011 == 0x0002) {
				say("\"What of our bargain? Thou art rash, ",
					var0002,
					".\"");
			}
			if (var0011 == 0x0003) {
				say("\"I will not deal with dishonorable people! Be gone!\"");
				abort;
			}
			if (0x001F < (var000C + 0x000A)) {
				CELLIA->set_npc_id(0x001F);
			} else {
				CELLIA->set_npc_id(var000C + 0x000A);
			}
			return 0x0000;
		}
		if (var0008 == 0x0001) {
			if (var000E == 0x0005) {
				say("\"I said that ",
					var0005,
					" was my final offer. Dost thou accept?\"");
				if (var000C < 0x001C) {
					CELLIA->set_npc_id(var000C + 0x0004);
				}
				if (Func0955()) {
					return var0005;
				}
				var0009 = 0x0000;
			} else {
				say("\"",
					var0005,
					" monetari is my final offer.\"");
				if (var000C < 0x001E) {
					CELLIA->set_npc_id(var000C + 0x0002);
				}
			}
		} else {
			if (var000E == 0x0002) {
				if (var0011 == 0x0001) {
					say("\"Thou knowest fine wares when thou dost see them, ",
						var0002,
						". How does ",
						var0005,
						" monetari sound?\"");
				}
				if (var0011 == 0x0002) {
					say("\"",
						var0004,
						", for a person of thy fine taste I will offer a special price. How does ",
						var0005,
						" monetari sound to thee?\"");
				}
				if (var0011 == 0x0003) {
					say("\"My price is ",
						var0005,
						" monetari, ",
						var0002,
						". Dost thou accept?\"");
				}
			}
			if (var000E == 0x0003) {
				if (var0011 == 0x0001) {
					say("\"I must think about my business. Wouldst thou consider ",
						var0005,
						" monetari?\"");
				}
				if (var0011 == 0x0002) {
					say("\"I don't know... ",
						var0005,
						" monetari?\"");
				}
				if (var0011 == 0x0003) {
					say("\"Perhaps ",
						var0005,
						" monetari? Such furs are rare...\"");
				}
			}
			if (var000E == 0x0004) {
				if (var0011 == 0x0001) {
					say("\"",
						var0005,
						" monetari is as low as I can go.\"");
					say("\"What dost thou say to this?\"");
				}
				if (var0011 == 0x0002) {
					say("\"I still cannot accept less than ",
						var0005,
						" monetari. I must pay for my shop...\"");
				}
				if (var0011 == 0x0003) {
					say("\"I can accept no less than ",
						var0005,
						" monetari... No matter how well I like thee.\"");
				}
			}
			if (var000E == 0x0005) {
				var0005 = var0010;
				if (var0011 == 0x0001) {
					say("\"My previous price stands, at ",
						var0005,
						" monetari. I would be a fool to take less.\"");
				}
				if (var0011 == 0x0002) {
					say("\"Better I should simply throw the furs into the street! ",
						var0005,
						" monetari, and no less!\"");
				}
				if (var0011 == 0x0003) {
					say("\"What dost thou take me for, a bear?! I am not that witless!\"");
					say("\"",
						var0005,
						" monetari is as low as I will go!\"");
				}
				if (var000C < 0x001F) {
					CELLIA->set_npc_id(var000C + 0x0001);
				}
			}
		}
	}
	return 0;
}

extern var Func0977 0x977 (var var0000);

var Func0813 0x813 () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;

	var0000 = UI_get_party_list();
	var0000 = AVATAR->get_npc_object() & var0000;
	var0001 = Func0977(var0000);
	var0002 = false;
	var0003 = 0x0001;
	while ((var0002 == false) && (var0003 <= var0001)) {
		var0004 = var0000[var0003]->give_last_created();
		if (var0004) {
			var0002 = var0000[var0003];
		} else {
			var0003 += 0x0001;
		}
	}
	if (var0002 == false) {
		var0004 = UI_update_last_created(AVATAR->get_object_position());
		if (var0004) {
			var0002 = true;
		} else {
			var0004 = UI_update_last_created(get_object_position());
			if (var0004) {
				var0002 = true + 0x0001;
			}
		}
	}
	return var0002;
}

void Func0814 0x814 () {
	var var0000;
	var var0001;
	var var0002;

	CLONE_IOLO->item_say("@Thy loss, Avatar.@");
	var0000 = CLONE_IOLO->find_nearby(0x0360, 0x0019, MASK_NONE);
	if (var0000) {
		var0001 = CLONE_IOLO->get_distance(var0000);
		var0002 = var0000->get_object_position();
		var0002[0x0001] -= 0x0002;
		CLONE_IOLO->si_path_run_usecode(var0002, SI_PATH_SUCCESS, CLONE_IOLO->get_npc_object(), Func04B2, true);
	}
}

extern var Func097D 0x97D (var var0000, var var0001, var var0002, var var0003, var var0004);
extern void Func0925 0x925 ();
extern void Func0926 0x926 (var var0000);
extern void Func0928 0x928 (var var0000);
extern void Func07FA object#(0x7FA) ();

void Func0815 0x815 (var var0000) {
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;
	var var0008;
	var var0009;
	var var000A;
	var var000B;
	var var000C;
	var var000D;
	var var000E;
	var var000F;
	var var0010;

	if (var0000 == 0x0001) {
		var0001 = find_nearby(0x0331, 0x0014, MASK_NONE);
		var0001->halt_scheduled();
		var0001->clear_item_say();
		var0002 = find_nearby(0x037F, 0x001E, MASK_NONE);
		for (var0005 in var0002 with var0003 to var0004) {
			var0006 = script var0005 {
				nohalt;
				remove;
			};
		}
		gflags[TEST_SAVED_MAN_ON_FIRE] = true;
		if (var0001) {
			var0007 = get_object_position();
			// BUG: This should use PATH_SUCCESS instead of BG_PATH_SUCCESS.
			MAN_ON_FIRE->si_path_run_usecode(var0007, BG_PATH_SUCCESS, item, Func0314, false);
			var0006 = script var0001 after 10 ticks {
				nohalt;
				say "@Thou art truly ethical!@";
			};
			MAN_ON_FIRE->set_npc_id(0x0005);
		}
		abort;
	}
	if (var0000 == 0x0002) {
		var0008 = false;
		var0009 = [0x03B4, 0x03B8, 0x03B7, 0x0284, 0x0285, 0x0286];
		for (var000C in var0009 with var000A to var000B) {
			if (Func097D(AVATAR, 0x0001, var000C, QUALITY_ANY, FRAME_ANY)) {
				var0008 = true;
			}
		}
		if (var0008 == false) {
			gflags[TEST_LEFT_MONEY] = true;
		}
		var0006 = script AVATAR {
			call Func07DA;
		};
		var000D = find_nearby(0x00C8, 0x00A0, MASK_EGG);
		for (var0010 in var000D with var000E to var000F) {
			var0006 = script var0010 {
				setegg external_criteria, 5;
			};
		}
		abort;
	}
	if (var0000 == 0x000A) {
		Func0925();
	}
	if ((var0000 > 0x0014) && (var0000 <= 0x0064)) {
		Func0926(var0000);
	}
	if ((var0000 > 0x0064) && (var0000 < 0x00C8)) {
		Func0928(var0000);
	}
	if (var0000 == 0x00C8) {
		item->Func07FA();
	}
}

extern var Func0956 0x956 (var var0000);
extern var Func0957 0x957 (var var0000);
extern var Func0955 0x955 ();
extern var Func096F 0x96F (var var0000, var var0001, var var0002);
extern var Func0817 0x817 (var var0000, var var0001);

void Func0816 0x816 () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;
	var var0008;
	var var0009;
	var var000A;
	var var000B;
	var var000C;
	var var000D;
	var var000E;
	var var000F;

	UI_push_answers();
	var0000 = true;
	say("\"What coin wilt thou pay with?\"");
	var0001 = Func0956(["Guilders", "Gold Coins"]);
	if (var0001 == "Guilders") {
		var0002 = 0x03B8;
	}
	if (var0001 == "Gold Coins") {
		var0002 = 0x0284;
		var0003 = 0x0001;
	}
	while (var0000) {
		say("\"In which circle of magic art thou interested?\"");
		var0004 = Func0957(["nothing", "First", "Second", "Third", "Fourth", "Fifth", "Sixth", "Seventh"]);
		var0004 -= 0x0001;
		if (var0004 == 0x0000) {
			break;
		}
		if (var0004 == 0x0001) {
			var0005 = ["nothing", "Great Ignite", "Locate"];
			var0006 = [SPELL_NONE, SPELL_GREAT_IGNITE, SPELL_LOCATE];
			var0007 = [0x0000, 0x001E, 0x0023];
			var0008 = [0x0000, 0x0012, 0x0014];
		} else if (var0004 == 0x0002) {
			var0005 = ["nothing", "Destroy Trap", "Great Light", "Protection"];
			var0006 = [SPELL_NONE, SPELL_DESTROY_TRAP, SPELL_GREAT_LIGHT, SPELL_PROTECTION];
			var0007 = [0x0000, 0x0032, 0x003C, 0x0050];
			var0008 = [0x0000, 0x001E, 0x001E, 0x0032];
		} else if (var0004 == 0x0003) {
			var0005 = ["nothing", "Curse", "Columna's Intuition", "Mass Protect"];
			var0006 = [SPELL_NONE, SPELL_CURSE, SPELL_COLUMNAS_INTUITION, SPELL_PROTECT_ALL];
			var0007 = [0x0000, 0x004B, 0x0078, 0x0064];
			var0008 = [0x0000, 0x0028, 0x0050, 0x003C];
		} else if (var0004 == 0x0004) {
			var0005 = ["nothing", "Mass Curse", "Unlock Magic"];
			var0006 = [SPELL_NONE, SPELL_MASS_CURSE, SPELL_UNLOCK_MAGIC];
			var0007 = [0x0000, 0x006E, 0x0078];
			var0008 = [0x0000, 0x003C, 0x0046];
		} else if (var0004 == 0x0005) {
			var0005 = ["nothing", "Invisibility"];
			var0006 = [SPELL_NONE, SPELL_INVISIBILITY];
			var0007 = [0x0000, 0x009B];
			var0008 = [0x0000, 0x005A];
		} else if (var0004 == 0x0006) {
			var0005 = ["nothing", "Dispel Illusion", "Create Ammunition"];
			var0006 = [SPELL_NONE, SPELL_DISPEL_ILLUSION, SPELL_CREATE_AMMO];
			var0007 = [0x0000, 0x00A5, 0x00AF];
			var0008 = [0x0000, 0x006E, 0x0078];
		} else if (var0004 == 0x0007) {
			var0005 = ["nothing", "Energy Mist", "Poison Mist"];
			var0006 = [SPELL_NONE, SPELL_ENERGY_MIST, SPELL_POISON_MIST];
			var0007 = [0x0000, 0x00FA, 0x0118];
			var0008 = [0x0000, 0x00B4, 0x00BE];
		}
		say("\"What spell art thou interested in buying?\"");
		var0009 = Func0957(var0005);
		if (var0009 == 0x0001) {
			say("\"If that is what thou dost wish...\"");
		} else {
			var000A = var0006[var0009];
			var000B = var0007[var0009] * var0003;
			var000C = var0008[var0009] * var0003;
			var000D = var0005[var0009];
			if (var0001 == "Guilders") {
				var000B = (var0007[var0009] * 0x0003) / 0x0002;
				var000C = (var0008[var0009] * 0x0003) / 0x0002;
			}
			if (var000B == var000C) {
				say("\"",
					var000D,
					" will cost ",
					var000B,
					" ",
					var0001,
					". Wilt thou pay my price?\"");
				var000E = 0x0000;
				if (Func0955() == true) {
					var000E = Func096F(var000A, var0002, var000B);
				}
			} else {
				say("\"",
					var000D,
					" will cost thee ",
					var000B,
					" ",
					var0001,
					". Dost thou find this acceptable?\"");
				var000F = Func0817(var000B, var000C);
				var000E = 0x0000;
				if (var000F > 0x0000) {
					var000E = Func096F(var000A, var0002, var000F);
				}
			}
			if (var000E == 0x0001) {
				say("\"The spell is thine.\"");
			} else if (var000E == 0x0002) {
				say("\"Thou dost not have a spellbook.\"");
				var0000 = false;
				break;
			} else if (var000E == 0x0003) {
				say("\"Thou dost not have enough ",
					var0001,
					" for that!\"");
			} else if (var000E == 0x0004) {
				say("\"I believe thou dost already have that spell.\"");
			}
		}
		say("\"Another spell perhaps?\"");
		var0000 = Func0955();
	}
	UI_pop_answers();
}

extern var Func0956 0x956 (var var0000);
extern var Func0999 0x999 (var var0000, var var0001, var var0002, var var0003, var var0004, var var0005, var var0006);
extern var Func0955 0x955 ();

var Func0817 0x817 (var var0000, var var0001) {
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;
	var var0008;
	var var0009;
	var var000A;
	var var000B;
	var var000C;
	var var000D;
	var var000E;

	var0002 = var0000;
	var0003 = (var0001 / 0x0003) * 0x0002;
	var0004 = 0x000F - (COLUMNA->get_npc_id() / 0x0002);
	var0005 = 0x0000;
	var0006 = 0x0001;
	var0007 = 0x0000;
	var0008 = 0x0002;
	var0009 = COLUMNA->get_npc_id();
	while (var0006) {
		var000A = Func0956(["yes", "no", "haggle"]);
		if (var000A == "no") {
			return 0x0000;
		}
		if (var000A == "yes") {
			var000B = 0x0000;
		} else {
			var000C = Func0999(var0002, var0001, var0008, var0003, var0007, var0004, var0005);
			var0007 += 0x0001;
			var0005 = var000C[0x0004];
			var000B = var000C[0x0003];
			var000D = var0002;
			var0002 = var000C[0x0002];
			var0003 = var000C[0x0001];
		}
		var000E = UI_get_random(0x0003);
		if (var000B < 0x0002) {
			if (var0002 < (var0001 + ((var0000 - var0001) / 0x0004))) {
				if (var000E == 0x0001) {
					say("\"Thou art a shrewd and crafty bargainer, to convince me to accept this price...\"");
				}
				if (var000E == 0x0002) {
					say("\"Art thou certain thou hast not cast a dweomer upon me? I usually do not lower my prices so.\"");
				}
				if (var000E == 0x0003) {
					say("\"'Tis truly amazing... thou hast a facile tongue to convince me to lower my price by so much.\"");
				}
			} else if (var0002 < (var0001 + ((var0000 - var0001) / 0x0003))) {
				if (var000E == 0x0001) {
					say("\"'Tis lower than I expected... but I shall agree to this price.\"");
				}
				if (var000E == 0x0002) {
					say("\"Thou art very good at bargaining. I will accept this price.\"");
				}
				if (var000E == 0x0003) {
					say("\"I see.\" *\"Very well, I will agree to this price even though 'tis lower than I did expect.\"");
				}
			} else if (var0002 < (var0001 + ((var0000 - var0001) / 0x0002))) {
				if (var000E == 0x0001) {
					say("\"Hmm...\" ~\"I suppose one must accept such a price -- though it could have been higher.\"");
				}
				if (var000E == 0x0002) {
					say("\"'Tis not such an indecent offer.\" ~\"I accept.\"");
				}
				if (var000E == 0x0003) {
					say("\"I will accept\tthis price.\" ~\"I can always use the extra funds for research.\"");
				}
			} else {
				if (var000E == 0x0001) {
					say("\"Very well.\" *\"I accept thine offer!\"");
				}
				if (var000E == 0x0002) {
					say("\"It hath been a pleasure!\" *\"I will accept thine offer.\"");
				}
				if (var000E == 0x0003) {
					say("\"Yes...\"*\"'Tis a very good price.\"");
				}
			}
			say("\"So, have we agreed on the price of ",
				var0002,
				"?\"");
			if (Func0955() == true) {
				if (var0009 > 0x0001) {
					COLUMNA->set_npc_id(var0009 - 0x0002);
				}
				return var0002;
			}
			if (var000E == 0x0001) {
				say("\"Pray, resolve thy mind!\"");
			}
			if (var000E == 0x0002) {
				say("\"Dost thou waste the time of other mages as well?\"");
			}
			if (var000E == 0x0003) {
				say("\"Thou art most rude to renege on an offer!\"");
			}
			if (0x001F < (var0009 + 0x000A)) {
				COLUMNA->set_npc_id(0x001F);
			} else {
				COLUMNA->set_npc_id(var0009 + 0x000A);
			}
			return 0x0000;
		}
		if (var0005 == 0x0001) {
			if (var000B == 0x0005) {
				say("\"",
					var0002,
					" is my final offer. Dost thou want it at this price?\"");
				if (var0009 < 0x001C) {
					COLUMNA->set_npc_id(var0009 + 0x0004);
				}
				if (Func0955() == true) {
					return var0002;
				}
				var0006 = 0x0000;
			} else {
				say("\"",
					var0002,
					" is my final offer.  I will go no lower.\"");
				if (var0009 < 0x001E) {
					COLUMNA->set_npc_id(var0009 + 0x0002);
				}
			}
		} else {
			if (var000B == 0x0002) {
				if (var000E == 0x0001) {
					say("\"'Tis pleasant to find thee amenable. Wouldst thou consider ",
						var0002,
						"?\"");
				}
				if (var000E == 0x0002) {
					say("\"Thou seemest to appreciate the finer spells and what they are truly worth. How does ",
						var0002,
						" sound?\"");
				}
				if (var000E == 0x0003) {
					say("\"What a pleasure it is to deal with thee. I offer thee ",
						var0002,
						".\"");
				}
			}
			if (var000B == 0x0003) {
				if (var000E == 0x0001) {
					say("\"I am not totally certain.... How about ",
						var0002,
						"?\"");
				}
				if (var000E == 0x0002) {
					say("\"Thou wilt not obtain the spell so cheaply. I will give thee ",
						var0002,
						"?\"");
				}
				if (var000E == 0x0003) {
					say("\"I suppose I must needs take thy money,...\" *\"but not at that price. ",
						var0002,
						"?\"");
				}
			}
			if (var000B == 0x0004) {
				if (var000E == 0x0001) {
					say("\"This is not a price that inspires me to appreciate thy finer qualities. For ",
						var0002,
						" I will like thee better.\"");
				}
				if (var000E == 0x0002) {
					say("\"For such a pitiful sum I could not even gain a tenth of what this spell cost me to learn! I can go no lower than ",
						var0002,
						".\"");
				}
				if (var000E == 0x0003) {
					say("\"I am not certain who is the more foolish...\"*\"Thou for offering such a wretched amount, or myself for continuing to bargain with thee. I will offer thee ",
						var0002,
						".\"");
				}
			}
			if (var000B == 0x0005) {
				var0002 = var000D;
				if (var000E == 0x0001) {
					say("\"Art thou jesting? My previous offer stands, at ",
						var0002,
						".\"");
				}
				if (var000E == 0x0002) {
					say("\"Art thou deaf, or merely an imbecile? I offer ",
						var0002,
						", and no less!\"");
				}
				if (var000E == 0x0003) {
					say("\"Thine offer is an insult to any mage! My offer doth stand at ",
						var0002,
						".\"");
				}
				if (var0009 < 0x001F) {
					COLUMNA->set_npc_id(var0009 + 0x0001);
				}
			}
		}
	}
	return 0;
}

extern var Func0954 0x954 ();
extern var Func0957 0x957 (var var0000);
extern var Func0942 0x942 (var var0000);
extern var Func0955 0x955 ();
extern var Func0819 0x819 (var var0000, var var0001);
extern var Func0943 0x943 (var var0000, var var0001, var var0002, var var0003, var var0004, var var0005, var var0006, var var0007);
extern var Func0992 0x992 (var var0000, var var0001, var var0002, var var0003);

void Func0818 0x818 () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;
	var var0008;
	var var0009;
	var var000A;
	var var000B;
	var var000C;
	var var000D;
	var var000E;
	var var000F;
	var var0010;
	var var0011;
	var var0012;

	var0000 = Func0954();
	UI_push_answers();
	var0001 = true;
	var0002 = ["nothing", "bag", "bucket", "fishing pole", "candle", "torch", "bedroll", "fur boots", "backpack", "stockings", "great helm", "crossbow", "bolts", "sextant", "mirror"];
	var0003 = [0x0000, 0x0322, 0x032A, 0x0296, 0x0150, 0x0253, 0x0247, 0x024B, 0x0321, 0x02A5, 0x021D, 0x0256, 0x02D3, 0x028A, 0x02A3];
	var0004 = [FRAME_ANY, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0003, 0x0000, 0x0001, 0x0000, 0x0000, 0x0007, 0x0000, 0x0010];
	var0005 = 0x03B4;
	var0006 = [0x0000, 0x0001, 0x0001, 0x0001, 0x0001, 0x0001, 0x0001, 0x0001, 0x0001, 0x0001, 0x0001, 0x0001, 0x0014, 0x0001, 0x0001];
	var0007 = [0x0000, 0x0001, 0x0000, 0x0000, 0x0001, 0x0001, 0x0000, 0x0001, 0x0001, 0x0001, 0x0000, 0x0000, 0x0001, 0x0000, 0x0000];
	if ((gflags[DELIN_WILL_GIVE_DISCOUNT] == true) && (gflags[DELIN_GAVE_DISCOUNT] == false)) {
		var0008 = [0x0000, 0x000F, 0x0012, 0x000C, 0x0002, 0x0004, 0x004B, 0x0032, 0x0064, 0x0019, 0x0096, 0x0113, 0x0026, 0x0032, 0x003C];
		var0009 = [0x0000, 0x000F, 0x0012, 0x000C, 0x0002, 0x0004, 0x004B, 0x0032, 0x0064, 0x0019, 0x0096, 0x0113, 0x0026, 0x0032, 0x003C];
		gflags[DELIN_GAVE_DISCOUNT] = true;
	} else {
		var0008 = [0x0000, 0x001E, 0x0023, 0x0019, 0x0004, 0x0008, 0x0096, 0x0064, 0x00C8, 0x0019, 0x012C, 0x0226, 0x004B, 0x0064, 0x0078];
		var0009 = [0x0000, 0x0011, 0x0013, 0x000D, 0x0002, 0x0004, 0x005A, 0x003C, 0x0073, 0x000F, 0x00BE, 0x015E, 0x002D, 0x0032, 0x0046];
	}
	while (var0001) {
		if ((gflags[DELIN_WILL_GIVE_DISCOUNT] == true) && (gflags[DELIN_GAVE_DISCOUNT] == false)) {
			say("\"Remember, ",
				var0000,
				", I have lowered all of my prices by half just this one time!\"");
		}
		var000A = Func0957(var0002);
		if (var000A == 0x0001) {
			var000B = UI_die_roll(0x0001, 0x0003);
			if (var000B == 0x0001) {
				var000C = "Hmmm... ah,";
			}
			if (var000B == 0x0002) {
				var000C = "Ah... er,";
			}
			if (var000B == 0x0003) {
				var000C = "Hmmm... I see,";
			}
			var000B = UI_die_roll(0x0001, 0x0003);
			if (var000B == 0x0001) {
				var000D = "perhaps later,";
			}
			if (var000B == 0x0002) {
				var000D = "another time then,";
			}
			if (var000B == 0x0003) {
				var000D = "come again,";
			}
			say("\"",
				var000C,
				" ",
				var000D,
				" ",
				var0000,
				".\"");
			var0001 = false;
			continue;
		}
		var000E = var0008[var000A];
		var000F = 0x0000;
		var000B = UI_die_roll(0x0001, 0x0006);
		if (var000B == 0x0001) {
			var0010 = "Dost thou accept?";
		}
		if (var000B == 0x0002) {
			var0010 = "Dost thou find this price acceptable?";
		}
		if (var000B == 0x0003) {
			var0010 = "Let me see... ah, yes! Dost thou find the price agreeable?";
		}
		if (var000B == 0x0004) {
			var0010 = "Dost thou agree?";
		}
		if (var000B == 0x0005) {
			var0010 = "Is the price acceptable?";
		}
		if (var000B == 0x0006) {
			var0010 = "Ah, hmmm... Is the price acceptable?";
		}
		if (var000A == 0x0002) {
			say("\"Let me think... ah, that will be 300 filari.\"");
			if (Func0942(ALYSSAND)) {
				ALYSSAND->show_npc_face1(0x0000);
				say("\"Father! Leather bags sell for ",
					var000E,
					" filari!\"");
				UI_remove_npc_face1();
				0x0000->set_conversation_slot();
				say("\"Ah, er... thou art right, my dear!\"");
			} else {
				say("\"Er, that's not right... oh, I am sorry, ",
					var0000,
					", I sell my bags for ",
					var000E,
					" filari!\"");
			}
			say("\"",
				var0010,
				"\"");
			var0011 = "bags";
		}
		if (var000A == 0x0003) {
			say("\"I stock the finest buckets in Fawn! Hmmm... I sell them for ",
				var000E,
				" filari each.\"");
			say("\"",
				var0010,
				"\"");
		}
		if (var000A == 0x0004) {
			say("\"Thou wilt surely require one if thou dost remain in Fawn, ",
				var0000,
				". Ah... hmmm, I will sell one to thee for the fair price of ",
				var000E,
				" filari.\"");
			say("\"",
				var0010,
				"\"");
		}
		if (var000A == 0x0005) {
			say("\"That will be ",
				var000E,
				" filari each for a fine wax candle. ",
				var0010,
				"\"");
			var0011 = "candles";
		}
		if (var000A == 0x0006) {
			say("\"A torch?  Ah, yes... My torches are of the finest quality! I can sell one to thee for ",
				var000E,
				" filari.\"");
			say("\"",
				var0010,
				"\"");
			var0011 = "torches";
		}
		if (var000A == 0x0007) {
			say("\"Ah, I can sell this to thee for ",
				var000E,
				" filari.\"");
			say("\"",
				var0010,
				"\"");
		}
		if (var000A == 0x0008) {
			say("\"I have a few fur boots left, ",
				var0000,
				". I can sell a pair to thee for ",
				var000E,
				" filari.\"");
			say("\"",
				var0010,
				"\"");
			var0011 = "pairs of fur boots";
		}
		if (var000A == 0x0009) {
			say("\"These are the finest packs made, ",
				var0000,
				"! For one of these backpacks I ask 15 filari.\"");
			if (Func0942(ALYSSAND)) {
				ALYSSAND->show_npc_face1(0x0000);
				say("\"Father! We sell those packs for ",
					var000E,
					" filari!\"");
				UI_remove_npc_face1();
				0x0000->set_conversation_slot();
				say("\"Ah, thou art correct, daughter...\"");
			} else {
				say("\"Uh, hmmm... I do believe I made a mistake, ",
					var0000,
					". I sell my backpacks for ",
					var000E,
					" filari.\"");
			}
			say("\"",
				var0010,
				"\"");
			var0011 = "backpacks";
		}
		if (var000A == 0x000A) {
			say("\"Ah, Alyssand makes these stockings, ",
				var0000,
				".\"");
			if (UI_is_pc_female()) {
				say("\"Ahem... I am sure that thou wouldst enjoy wearing a pair, ",
					var0000,
					".  I am assured that they are most comfortable.\"");
			} else {
				say("\"If thou dost wish a pair for a loved one or a mistress, I am certain they would appreciate the fine quality, ",
					var0000,
					"!\"");
				if (Func0942(ALYSSAND)) {
					ALYSSAND->show_npc_face1(0x0000);
					say("\"Father! Watch thy tongue!\"");
					UI_remove_npc_face1();
					0x0000->set_conversation_slot();
					say("\"But, dear... he is a customer...\"");
					ALYSSAND->show_npc_face1(0x0000);
					say("\"'Tis rude of thee, father, to discuss such matters in public!\"");
					UI_remove_npc_face1();
					0x0000->set_conversation_slot();
					say("\"Ah, hmmm... she is very shrewish today, ",
						var0000,
						". I... er, apologize to thee for her behavior.\"");
					ALYSSAND->show_npc_face1(0x0000);
					say("\"FATHER!!!\"");
					UI_remove_npc_face1();
					0x0000->set_conversation_slot();
				}
			}
			say("\"Ah, where was I? Oh, yes... For a pair of these fine stockings I ask ",
				var000E,
				" filari.\"");
			say("\"",
				var0010,
				"\"");
			var0011 = "stockings";
		}
		if (var000A == 0x000B) {
			say("\"I can sell a great helm to thee for ",
				var000E,
				" filari.\"");
			say("\"",
				var0010,
				"\"");
			var0011 = "great helms";
		}
		if (var000A == 0x000C) {
			say("\"If thou wishest to fend off the Goblins, ",
				var0000,
				", thou couldst not do better than to own one of my crossbows! For ",
				var000E,
				" filari it is thine.\"");
			say("\"",
				var0010,
				"\"");
			var0011 = "crossbows";
		}
		if (var000A == 0x000D) {
			say("\"Ah, thou wilt need bolts for thy crossbow. Let me think... oh, that will be ",
				var000E,
				" filari for twenty bolts.\"");
			say("\"",
				var0010,
				"\"");
			var0011 = "crossbow bolts, in bundles of twenty,";
		}
		if (var000A == 0x000E) {
			say("\"Hmmm... er, even though there are no sailing ships available, ",
				var0000,
				", I can give thee a good deal on a reliable sextant! For ",
				var000E,
				" filari one can be thine.\"");
			say("\"",
				var0010,
				"\"");
			var0011 = "sextants";
		}
		if (var000A == 0x000F) {
			if (UI_is_pc_female()) {
				say("\"Oh, ",
					var0000,
					", thou shouldst purchase a hand mirror if thou dost not already own one. A lady of thy beauty doubtless needs one. For a mere ",
					var000E,
					" filari I can sell thee one.\"");
			} else {
				say("\"Perhaps a gift for a sweetheart? Ah, no, that would not be prudent of me to ask... For ",
					var000E,
					" filari I can sell thee a finely crafted hand mirror.\"");
			}
			say("\"",
				var0010,
				"\"");
			var0011 = "hand mirror";
		}
		if (var000E == var0009[var000A]) {
			if (Func0955()) {
				var0012 = var000E;
			} else {
				var0012 = 0x0000;
			}
		} else {
			var0012 = Func0819(var0008[var000A], var0009[var000A]);
		}
		if (var0012 > 0x0000) {
			if (var0007[var000A] == 0x0001) {
				say("\"How many ",
					var0011,
					" wouldst thou like?\"");
				var000F = Func0943(var0003[var000A], var0004[var000A], var0006[var000A], var0005, var0012, 0x0005, 0x0001, false);
			} else {
				var000F = Func0943(var0003[var000A], var0004[var000A], 0x0001, var0005, var0012, 0x0000, 0x0001, false);
			}
		}
		if (var000F == 0x0001) {
			say("\"I am certain that thou wilt enjoy thy purchase, ",
				var0000,
				".\"");
		} else if (var000F == 0x0002) {
			say("\"Ah, er...\" ~\"I believe that thine hands are full, ",
				var0000,
				"!\"");
		} else if (var000F == 0x0003) {
			var000B = Func0992(0x0001, (("@But " + var0000) + ", we haven't the coins to purchase this.@"), 0x0000, false);
			if (var000B != AVATAR) {
				DELIN->show_npc_face0(0x0000);
				say("\"Ah... it doth appear that thy purse is empty, ",
					var0000,
					".\"");
			} else {
				say("\"'Twould appear thou dost not have enough money for that...\"");
			}
			if (0x001F < (DELIN->get_npc_id() + 0x0006)) {
				DELIN->set_npc_id(0x001F);
			} else {
				DELIN->set_npc_id(DELIN->get_npc_id() + 0x0006);
			}
		}
		say("\"Dost thou desire another purchase?\"");
		var0001 = Func0955();
	}
	UI_pop_answers();
}

extern var Func0954 0x954 ();
extern var Func0956 0x956 (var var0000);
extern var Func0999 0x999 (var var0000, var var0001, var var0002, var var0003, var var0004, var var0005, var var0006);
extern var Func0992 0x992 (var var0000, var var0001, var var0002, var var0003);
extern var Func0955 0x955 ();

var Func0819 0x819 (var var0000, var var0001) {
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;
	var var0008;
	var var0009;
	var var000A;
	var var000B;
	var var000C;
	var var000D;
	var var000E;
	var var000F;

	var0002 = Func0954();
	var0003 = var0000;
	var0004 = (var0001 / 0x0003) * 0x0002;
	var0005 = 0x000F - (DELIN->get_npc_id() / 0x0002);
	var0006 = 0x0000;
	var0007 = 0x0001;
	var0008 = 0x0000;
	var0009 = 0x0002;
	var000A = DELIN->get_npc_id();
	while (var0007) {
		var000B = Func0956(["yes", "no", "haggle"]);
		if (var000B == "no") {
			return 0x0000;
		}
		if (var000B == "yes") {
			var000C = 0x0000;
		} else {
			var000D = Func0999(var0003, var0001, var0009, var0004, var0008, var0005, var0006);
			var0008 += 0x0001;
			var0006 = var000D[0x0004];
			var000C = var000D[0x0003];
			var000E = var0003;
			var0003 = var000D[0x0002];
			var0004 = var000D[0x0001];
		}
		var000F = UI_get_random(0x0003);
		if (var000C < 0x0002) {
			if (var0003 < (var0001 + ((var0000 - var0001) / 0x0004))) {
				if (var000F == 0x0001) {
					say("\"Thou art a shrewd bargainer, ",
						var0002,
						". Please do not tell anyone in town of this!\"");
				}
				if (var000F == 0x0002) {
					say("\"Thy skill at trading is unsurpassed, ",
						var0002,
						"...\"");
				}
				if (var000F == 0x0003) {
					say("\"Troublesome are the times that force me to agree to such bargains!\"");
				}
			} else if (var0003 < (var0001 + ((var0000 - var0001) / 0x0003))) {
				if (var000F == 0x0001) {
					say("\"Ah... My prices are fair here. Fair indeed.\"");
				}
				if (var000F == 0x0002) {
					say("\"Thou art a rogue! I would not believe mine ears if I were told I had sold goods at this price!\"");
				}
				if (var000F == 0x0003) {
					say("\"Let me see... Ah, I do believe thou wouldst make a good shopkeeper, ",
						var0002,
						"! 'Tis not often I make such unwise bargains!\"");
					var000B = Func0992(0x0001, "@A shopkeeper? Surely thou art jesting?\r\n\t\t\t\t\t\t The Avatar is embarked on a Quest!@", 0x0000, false);
				}
			} else if (var0003 < (var0001 + ((var0000 - var0001) / 0x0002))) {
				if (var000F == 0x0001) {
					say("\"Most fair, if I do say so myself.\"");
				}
				if (var000F == 0x0002) {
					say("\"'Tis a pleasure to bargain with thee, ",
						var0002,
						".\"");
				}
				if (var000F == 0x0003) {
					say("\"What were we discussing? Ah, yes... 'Tis a fairer price than most would give, ",
						var0002,
						".\"");
				}
			} else {
				if (var000F == 0x0001) {
					say("\"Thou hast made me a happy man, ",
						var0002,
						"! Walk with Beauty!\"");
				}
				if (var000F == 0x0002) {
					say("\"Ah... A blessing upon thee, ",
						var0002,
						".\"");
				}
				if (var000F == 0x0003) {
					say("\"Hmmm... In these trying times, I must charge steep prices or become a pauper.\"");
				}
			}
			say("\"We have agreed on a price of ",
				var0003,
				" filari, ",
				var0002,
				"?\"");
			if (Func0955()) {
				if (var000A > 0x0001) {
					DELIN->set_npc_id(var000A - 0x0002);
				}
				return var0003;
			}
			if (var000F == 0x0001) {
				say("\"What? I thought we had an agreement.\"");
			}
			if (var000F == 0x0002) {
				say("\"Thou hast sorely disappointed me. What of our bargain?\"");
			}
			if (var000F == 0x0003) {
				say("\"Is this honorable? What of our agreement?\"");
			}
			if (0x001F < (var000A + 0x000A)) {
				DELIN->set_npc_id(0x001F);
			} else {
				DELIN->set_npc_id(var000A + 0x000A);
			}
			return 0x0000;
		}
		if (var0006 == 0x0001) {
			if (var000C == 0x0005) {
				say("\"",
					var0002,
					", I said that ",
					var0003,
					" was my final offer. Dost thou accept?\"");
				if (var000A < 0x001C) {
					DELIN->set_npc_id(var000A + 0x0004);
				}
				if (Func0955()) {
					return var0003;
				}
				var0007 = 0x0000;
			} else {
				say("\"Very well. ",
					var0003,
					" filari is my final offer.\"");
				if (var000A < 0x001E) {
					DELIN->set_npc_id(var000A + 0x0002);
				}
			}
		} else {
			if (var000C == 0x0002) {
				if (var000F == 0x0001) {
					say("\"Ah, hmmm... It pleases me to bargain with such a worthy soul. How doth ",
						var0003,
						" filari sound?\"");
				}
				if (var000F == 0x0002) {
					say("\"May the Truth of Beauty guide thee, ",
						var0002,
						". So, have we agreed on ",
						var0003,
						" filari?\"");
				}
				if (var000F == 0x0003) {
					say("\"My price is ",
						var0003,
						" filari. Dost thou accept?\"");
				}
			}
			if (var000C == 0x0003) {
				if (var000F == 0x0001) {
					say("\"These are trying times, and goods are scarce... Wouldst thou consider ",
						var0003,
						" filari?\"");
				}
				if (var000F == 0x0002) {
					say("\"Hmmm... I am not certain... Dost thou like the sound of ",
						var0003,
						" filari?\"");
				}
				if (var000F == 0x0003) {
					say("\"But I must earn enough to pay my debts! ",
						var0003,
						" filari?\"");
				}
			}
			if (var000C == 0x0004) {
				if (var000F == 0x0001) {
					say("\"I cannot possibly accept less than ",
						var0003,
						" filari!\"");
					say("\"What dost thou say to this?\"");
				}
				if (var000F == 0x0002) {
					say("\"My costs are soaring! Surely thou canst see that I can go no lower than ",
						var0003,
						" filari.\"");
				}
				if (var000F == 0x0003) {
					say("\"Ah, hmmm... ",
						var0002,
						", thou art not talking to a fool. I deserve no less than ",
						var0003,
						" filari.\"");
				}
			}
			if (var000C == 0x0005) {
				var0003 = var000E;
				if (var000F == 0x0001) {
					say("\"I would rather be thrown into the canals than accept such a pitiful offer! My previous price stands, at ",
						var0003,
						" filari.\"");
				}
				if (var000F == 0x0002) {
					say("\"Thou must think that I am an imbecile to accept such a bargain. ",
						var0003,
						" filari, and no less!\"");
				}
				if (var000F == 0x0003) {
					say("\"Why, if I accepted such a price, I would have to close my shop and move away!\"");
					say("\"",
						var0003,
						" filari is where I stand.\"");
				}
				if (var000A < 0x001F) {
					DELIN->set_npc_id(var000A + 0x0001);
				}
			}
		}
	}
	return 0;
}

extern var Func0954 0x954 ();
extern var Func0953 0x953 ();
extern var Func097D 0x97D (var var0000, var var0001, var var0002, var var0003, var var0004);
extern var Func0955 0x955 ();
extern var Func099B 0x99B (var var0000, var var0001, var var0002, var var0003, var var0004, var var0005, var var0006);
extern var Func098E 0x98E ();
extern var Func0957 0x957 (var var0000);
extern var Func095C 0x95C (var var0000, var var0001);
extern void Func095E 0x95E (var var0000, var var0001, var var0002);

void Func081A 0x81A () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;
	var var0008;
	var var0009;
	var var000A;
	var var000B;
	var var000C;
	var var000D;
	var var000E;
	var var000F;
	var var0010;
	var var0011;
	var var0012;
	var var0013;
	var var0014;

	var0000 = Func0954();
	var0001 = Func0953();
	var0002 = 0x03B4;
	var0003 = PARTY->count_objects(var0002, QUALITY_ANY, FRAME_ANY);
	var0004 = false;
	var0005 = false;
	if (gflags[POISONED_BY_LYDIA] && (!gflags[CURED_LYDIA_POISON])) {
		if (gflags[DELPHYNIA_SPOKE_VARO_LEAVES] == false) {
			say("\"I cannot heal this infection! Thou must go to Harnna with the Varo leaves!\"");
			add("Varo Leaves");
		} else if (Func097D(PARTY, 0x0005, 0x01D3, QUALITY_ANY, 0x0003)) {
			say("\"I did already give thee all the Varo leaves that I have! Thou must go to Harnna to heal thine infection!\"");
		} else {
			say("\"Didst thou lose the leaves I did give thee?\"");
			if (Func0955()) {
				say("\"Very well, take five more of the Varo leaves and go thou quickly to Harnna!\"");
				var0006 = Func099B(AVATAR, 0x0005, 0x01D3, QUALITY_ANY, 0x0003, false, true);
			} else {
				say("\"Good. Go to Harnna! Quickly now!\"");
			}
		}
	} else if (gflags[CARRY_DELPHYNIAS_LETTER] == false) {
		say("\"I charge 50 filari to use my knowledge of herbs to attempt to heal. Dost thou agree to pay?\"");
		if (Func0955()) {
			if (var0003 < 0x0032) {
				say("\"Thou dost not have the filari to pay me!\"");
			} else {
				say("\"Who is in need of healing? I will do what I can.\"");
labelFunc081A_00C0:
				var0007 = 0x0032;
				if (var0004 == true) {
					var0007 = 0x000A;
				}
				var0008 = Func098E();
				var0008 = 0x0000 & var0008;
				var0009 = ["nobody"];
				for (var000C in var0008 with var000A to var000B) {
					if (!(var000C == 0x0000)) {
						var0009 &= var000C->get_npc_name();
					}
				}
				var000D = Func0957(var0009);
				var000D = var0008[var000D];
				if (var000D == 0x0000) {
					say("\"As thou dost wish.\"");
				} else {
					var000E = var000D->get_npc_number();
					var000F = var000D->get_item_flag(POISONED);
					var0010 = Func095C(var000D, STRENGTH);
					var0011 = Func095C(var000D, HEALTH);
					var0012 = var000D->get_npc_name();
					if (var0010 > var0011) {
						var0013 = var0010 - var0011;
						var0013 /= 2;
						Func095E(var000E, HEALTH, var0013);
						var0014 = UI_remove_party_items(var0007, var0002, QUALITY_ANY, FRAME_ANY, true);
						var0005 = true;
						say("\"I have done all that I can.\"");
					} else if (var000F == false) {
						if (var000E == AVATAR) {
							say("\"Thou art unwounded!\"");
						} else {
							say("\"",
								var0012,
								" is not wounded!\"");
						}
					} else if (var000E == AVATAR) {
						say("\"Thou art poisoned! I believe that I can cure such a simple venom.\"");
					} else {
						say("\"",
							var0012,
							" is poisoned! Fortunately, 'tis a simple venom to cure.\"");
					}
					if (var000F == true) {
						if (var0005 == false) {
							var0014 = UI_remove_party_items(var0007, var0002, QUALITY_ANY, FRAME_ANY, true);
						}
						var000D->clear_item_flag(POISONED);
						say("\"'Tis done, ",
							var0000,
							"! The poison hath been removed.\"");
					}
				}
			}
		} else {
			say("\"Perhaps another time, ",
				var0000,
				".\"");
		}
	} else {
		say("\"Since thou didst agree to take my letter, I will help thee, ",
			var0001,
			". I will perform mine healing for only 10 filari.\"");
		say("\"Whom dost thou wish to heal?\"");
		var0004 = true;
		// I see no way other than this
		goto labelFunc081A_00C0;
	}
}

extern var Func0954 0x954 ();
extern var Func0957 0x957 (var var0000);
extern var Func0955 0x955 ();
extern var Func081C 0x81C (var var0000, var var0001);
extern var Func0943 0x943 (var var0000, var var0001, var var0002, var var0003, var var0004, var var0005, var var0006, var var0007);
extern var Func0992 0x992 (var var0000, var var0001, var var0002, var var0003);

void Func081B 0x81B () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;
	var var0008;
	var var0009;
	var var000A;
	var var000B;
	var var000C;
	var var000D;
	var var000E;
	var var000F;
	var var0010;
	var var0011;
	var var0012;

	var0000 = Func0954();
	UI_push_answers();
	var0001 = true;
	var0002 = ["nothing", "black pearls", "nightshade", "garlic", "ginseng", "mandrake", "onions", "apples", "carrots", "pumpkins"];
	var0003 = [0x0000, 0x034A, 0x034A, 0x034A, 0x034A, 0x034A, 0x0179, 0x0179, 0x0179, 0x0179];
	var0004 = [FRAME_ANY, 0x0000, 0x0002, 0x0004, 0x0005, 0x0003, 0x0016, 0x0010, 0x0012, 0x0015];
	var0005 = [0x0000, 0x0046, 0x0019, 0x000F, 0x0014, 0x0041, 0x0005, 0x0006, 0x0007, 0x0012];
	var0006 = [0x0000, 0x0023, 0x000D, 0x0009, 0x000B, 0x0023, 0x0002, 0x0003, 0x0004, 0x0009];
	var0007 = 0x03B4;
	var0008 = [0x0000, 0x0001, 0x0001, 0x0001, 0x0001, 0x0001, 0x0001, 0x0001, 0x0001, 0x0001];
	var0009 = [0x0000, 0x0001, 0x0001, 0x0001, 0x0001, 0x0001, 0x0001, 0x0001, 0x0001, 0x0001];
	while (var0001) {
		var000A = Func0957(var0002);
		if (var000A == 0x0001) {
			var000B = UI_die_roll(0x0001, 0x0003);
			if (var000B == 0x0001) {
				var000C = "Perhaps later,";
			}
			if (var000B == 0x0002) {
				var000C = "Another time then,";
			}
			if (var000B == 0x0003) {
				var000C = "Come again,";
			}
			say("\"",
				var000C,
				" ",
				var0000,
				".\"");
			var0001 = false;
			continue;
		}
		var000D = var0005[var000A];
		var000E = 0x0000;
		var000B = UI_die_roll(0x0001, 0x0005);
		if (var000B == 0x0001) {
			var000F = "Dost thou accept?";
		}
		if (var000B == 0x0002) {
			var000F = "Wilt thou pay my price?";
		}
		if (var000B == 0x0003) {
			var000F = "Dost thou agree?";
		}
		if (var000B == 0x0004) {
			var000F = "Is the price acceptable?";
		}
		if (var000B == 0x0005) {
			var000F = "Is that agreeable with thee?";
		}
		if (var000A == 0x0002) {
			say("\"These were bequeathed to me by my father. They are beautiful, are they not? I will sell one to thee for ",
				var000D,
				" filari.\"");
			say(var000F,
				"\"");
			var0010 = "black pearls";
		}
		if (var000A == 0x0003) {
			say("\"",
				var000D,
				" filari is what I ask for nightshade.\"");
			say("\"",
				var000F,
				"\"");
			var0010 = "nightshade mushrooms";
		}
		if (var000A == 0x0004) {
			say("\"I can sell thee sweet cloves of garlic for the pittance of ",
				var000D,
				" filari.\"");
			say("\"",
				var000F,
				"\"");
			var0010 = "cloves of garlic";
		}
		if (var000A == 0x0005) {
			say("\"",
				var000D,
				" filari is a fair price for my ginseng, ",
				var0000,
				".\"");
			say(var000F,
				"\"");
			var0010 = "ginseng roots";
		}
		if (var000A == 0x0006) {
			say("\"The mandrake root is very potent, ",
				var0000,
				". I charge ",
				var000D,
				" filari for one.\"");
			say("\"",
				var000F,
				"\"");
			var0010 = "mandrake roots";
		}
		if (var000A == 0x0007) {
			say("\"Mine onions are very sweet! ",
				var000D,
				" filari is what I ask.\"");
			say("\"",
				var000F,
				"\"");
			var0010 = "onions";
		}
		if (var000A == 0x0008) {
			say("\"Thou shouldst try mine apples! I can give them to thee for ",
				var000D,
				" filari.\"");
			say(var000F,
				"\"");
			var0010 = "apples";
		}
		if (var000A == 0x0009) {
			say("\"I can sell thee carrots for ",
				var000D,
				" filari.\"");
			say(var000F,
				"\"");
			var0010 = "carrots";
		}
		if (var000A == 0x000A) {
			say("\"Not many in Fawn care for pumpkin, but I think it makes an excellent pie. I can sell thee one for ",
				var000D,
				" filari.\"");
			say(var000F,
				"\"");
			var0010 = "pumpkins";
		}
		if (var000D == var0006[var000A]) {
			if (Func0955()) {
				var0011 = var000D;
			} else {
				var0011 = 0x0000;
			}
		} else {
			var0011 = Func081C(var0005[var000A], var0006[var000A]);
		}
		if (var0011 > 0x0000) {
			if (var0009[var000A] == 0x0001) {
				say("\"How many ",
					var0010,
					" dost thou desire?\"");
				var000E = Func0943(var0003[var000A], var0004[var000A], var0008[var000A], var0007, var0011, 0x0014, 0x0001, false);
			} else {
				var000E = Func0943(var0003[var000A], var0004[var000A], 0x0001, var0007, var0011, 0x0000, 0x0001, false);
			}
		}
		if (var000E == 0x0001) {
			say("\"I hope thou dost enjoy thy purchase, ",
				var0000,
				"!\"");
		} else if (var000E == 0x0002) {
			say("\"I believe that thine hands are full, ",
				var0000,
				"!\"");
		} else if (var000E == 0x0003) {
			var0012 = Func0992(0x0001, (("@But " + var0000) + ", we haven't the filari to purchase this.@"), 0x0000, false);
			if (var0012 != AVATAR) {
				DELPHYNIA->show_npc_face0(0x0000);
				say("\"Then I am afraid thou canst not purchase any of my goods, ",
					var0000,
					".\"");
			} else {
				say("\"I am afraid thou dost not have enough to pay for this...\"");
			}
			if (0x001F < (DELPHYNIA->get_npc_id() + 0x0006)) {
				DELPHYNIA->set_npc_id(0x001F);
			} else {
				DELPHYNIA->set_npc_id(DELPHYNIA->get_npc_id() + 0x0006);
			}
		}
		say("\"Dost thou desire another purchase?\"");
		var0001 = Func0955();
	}
	UI_pop_answers();
}

extern var Func0954 0x954 ();
extern var Func0956 0x956 (var var0000);
extern var Func0999 0x999 (var var0000, var var0001, var var0002, var var0003, var var0004, var var0005, var var0006);
extern var Func0955 0x955 ();

var Func081C 0x81C (var var0000, var var0001) {
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;
	var var0008;
	var var0009;
	var var000A;
	var var000B;
	var var000C;
	var var000D;
	var var000E;
	var var000F;

	var0002 = Func0954();
	var0003 = var0000;
	var0004 = (var0001 / 0x0003) * 0x0002;
	var0005 = 0x000F - (DELPHYNIA->get_npc_id() / 0x0002);
	var0006 = 0x0000;
	var0007 = 0x0001;
	var0008 = 0x0000;
	var0009 = 0x0002;
	var000A = DELPHYNIA->get_npc_id();
	while (var0007) {
		var000B = Func0956(["yes", "no", "haggle"]);
		if (var000B == "no") {
			return 0x0000;
		}
		if (var000B == "yes") {
			var000C = 0x0000;
		} else {
			var000D = Func0999(var0003, var0001, var0009, var0004, var0008, var0005, var0006);
			var0008 += 0x0001;
			var0006 = var000D[0x0004];
			var000C = var000D[0x0003];
			var000E = var0003;
			var0003 = var000D[0x0002];
			var0004 = var000D[0x0001];
		}
		var000F = UI_get_random(0x0003);
		if (var000C < 0x0002) {
			if (var0003 < (var0001 + ((var0000 - var0001) / 0x0004))) {
				if (var000F == 0x0001) {
					say("\"Thou dost drive a hard bargain, ",
						var0002,
						". Do not tell anyone about this... They think little enough of me already!\"");
				}
				if (var000F == 0x0002) {
					say("\"Thou hast a good eye for a bargain...\"");
				}
				if (var000F == 0x0003) {
					say("\"I would never agree to such a price, if times were not so bad!\"");
				}
			} else if (var0003 < (var0001 + ((var0000 - var0001) / 0x0003))) {
				if (var000F == 0x0001) {
					say("\"My prices are reasonable, given my limited supply.\"");
				}
				if (var000F == 0x0002) {
					say("\"Thou couldst talk a beggar out of his begging bowl! I cannot believe I have agreed to such a price!\"");
				}
				if (var000F == 0x0003) {
					say("\"Thou shouldst have been a shopkeeper, ",
						var0002,
						"...\"");
				}
			} else if (var0003 < (var0001 + ((var0000 - var0001) / 0x0002))) {
				if (var000F == 0x0001) {
					say("\"A fair deal...\"");
				}
				if (var000F == 0x0002) {
					say("\"'Tis a pleasure to deal with thee, ",
						var0002,
						".\"");
				}
				if (var000F == 0x0003) {
					say("\"There are few people left who specialize in herbs, ",
						var0002,
						". Thou wilt find no better price, I assure thee.\"");
				}
			} else {
				if (var000F == 0x0001) {
					say("\"Thou hast made me a happy woman, ",
						var0002,
						"! Walk with Beauty!\"");
				}
				if (var000F == 0x0002) {
					say("\"May Beauty follow thee ever, ",
						var0002,
						".\"");
				}
				if (var000F == 0x0003) {
					say("\"I fear that the storms have driven my prices up. I have no choice unless I wish to starve.\"");
				}
			}
			say("\"We have agreed on a price of ",
				var0003,
				" filari, ",
				var0002,
				"?\"");
			if (Func0955()) {
				if (var000A > 0x0001) {
					DELPHYNIA->set_npc_id(var000A - 0x0002);
				}
				return var0003;
			}
			if (var000F == 0x0001) {
				say("\"Thou canst not change thy mind! Thou didst agree!\"");
			}
			if (var000F == 0x0002) {
				say("\"What of our bargain? I thought better of thee...\"");
			}
			if (var000F == 0x0003) {
				say("\"Where is thine honor?  What of our agreement?\"");
			}
			if (0x001F < (var000A + 0x000A)) {
				DELPHYNIA->set_npc_id(0x001F);
			} else {
				DELPHYNIA->set_npc_id(var000A + 0x000A);
			}
			return 0x0000;
		}
		if (var0006 == 0x0001) {
			if (var000C == 0x0005) {
				say("\"I said that ",
					var0003,
					" was my final offer. Dost thou accept or not?\"");
				if (var000A < 0x001C) {
					DELPHYNIA->set_npc_id(var000A + 0x0004);
				}
				if (Func0955()) {
					return var0003;
				}
				var0007 = 0x0000;
			} else {
				say("\"Very well. ",
					var0003,
					" filari is my final offer.\"");
				if (var000A < 0x001E) {
					DELPHYNIA->set_npc_id(var000A + 0x0002);
				}
			}
		} else {
			if (var000C == 0x0002) {
				if (var000F == 0x0001) {
					say("\"How doth ",
						var0003,
						" filari sound? Thou dost bargain well...\"");
				}
				if (var000F == 0x0002) {
					say("\"So, have we agreed on ",
						var0003,
						" filari? Thou wilt no doubt see the Beauty of such an offer.\"");
				}
				if (var000F == 0x0003) {
					say("\"My price is ",
						var0003,
						" filari. Dost thou accept?\"");
				}
			}
			if (var000C == 0x0003) {
				if (var000F == 0x0001) {
					say("\"Wouldst thou consider ",
						var0003,
						" filari? I have such a limited stock...\"");
				}
				if (var000F == 0x0002) {
					say("\"I am not sure... Wouldst thou give ",
						var0003,
						" filari?\"");
				}
				if (var000F == 0x0003) {
					say("\"",
						var0003,
						" filari? I must have enough to tithe to the Temple.\"");
				}
			}
			if (var000C == 0x0004) {
				if (var000F == 0x0001) {
					say("\"I cannot possibly accept less than ",
						var0003,
						" filari!\"");
					say("\"What dost thou say to this?\"");
				}
				if (var000F == 0x0002) {
					say("\"Surely thou canst see that I can go no lower than ",
						var0003,
						" filari.\"");
				}
				if (var000F == 0x0003) {
					say("\"I deserve no less than ",
						var0003,
						" filari. It doth take much work to prepare these things!\"");
				}
			}
			if (var000C == 0x0005) {
				var0003 = var000E;
				if (var000F == 0x0001) {
					say("\"I would rather walk into the Goblin camp than accept such a paltry sum! My previous price stands, at ",
						var0003,
						" filari.\"");
				}
				if (var000F == 0x0002) {
					say("\"",
						var0003,
						" filari, and no less! I may be a woman, but I am no fool!\"");
				}
				if (var000F == 0x0003) {
					say("\"",
						var0003,
						" filari is where I stand. I know the value of my wares.\"");
				}
				if (var000A < 0x001F) {
					DELPHYNIA->set_npc_id(var000A + 0x0001);
				}
			}
		}
	}
	return 0;
}

extern var Func0955 0x955 ();
extern var Func0956 0x956 (var var0000);
extern var Func097D 0x97D (var var0000, var var0001, var var0002, var var0003, var var0004);
extern var Func099B 0x99B (var var0000, var var0001, var var0002, var var0003, var var0004, var var0005, var var0006);

void Func081D 0x81D () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;
	var var0008;
	var var0009;
	var var000A;
	var var000B;
	var var000C;
	var var000D;
	var var000E;
	var var000F;

	var0000 = true;
	say("\"To barter coins, I ask for a small fee of the money exchanged. Dost thou accept?\"");
	if (Func0955()) {
		while (var0000) {
			say("\"What coinage dost thou desire?\"");
			var0001 = Func0956(["Monetari", "Guilders", "Filari", "Gold Coins"]);
			do {
				if (var0001 == "Monetari") {
					say("\"What dost thou care to exchange for monetari?\"");
					var0002 = 0x03B7;
					var0003 = ["Nothing"];
					if (Func097D(PARTY, 0x0001, 0x03B8, QUALITY_ANY, FRAME_ANY)) {
						var0003 &= "Guilders";
					}
					if (Func097D(PARTY, 0x0001, 0x03B4, QUALITY_ANY, FRAME_ANY)) {
						var0003 &= "Filari";
					}
					if (Func097D(PARTY, 0x0001, 0x0284, QUALITY_ANY, FRAME_ANY)) {
						var0003 &= "Gold Coins";
					}
					if (Func097D(PARTY, 0x0001, 0x0285, QUALITY_ANY, FRAME_ANY)) {
						var0003 &= "Gold Nuggets";
					}
					if (Func097D(PARTY, 0x0001, 0x02F8, QUALITY_ANY, FRAME_ANY)) {
						var0003 &= "Gems";
					}
					if (Func097D(PARTY, 0x0001, 0x03A9, QUALITY_ANY, FRAME_ANY)) {
						var0003 &= "Jewelry";
					}
					var0004 = Func0956(var0003);
					if (var0004 == "Nothing") {
						say("\"Very well... perhaps another time.\"");
						var0000 = false;
						return;
					}
					if (var0004 == "Guilders") {
						say("\"I can give thee 1 monetari for every 3 guilders thou hast.\"");
						var0005 = 0x03B8;
					}
					if (var0004 == "Filari") {
						say("\"I can give thee 1 monetari for every 4 filari thou hast.\"");
						var0005 = 0x03B4;
					}
					if (var0004 == "Gold Coins") {
						say("\"I can give thee 1 monetari for every 2 gold coins thou hast.\"");
						var0005 = 0x0284;
					}
					if (var0004 == "Gold Nuggets") {
						say("\"I can give thee 10 monetari for every 1 gold nugget thou hast.\"");
						var0005 = 0x0285;
					}
					if (var0004 == "Gems") {
						say("\"I can give thee 25 monetari for every gem thou dost have.\"");
						var0005 = 0x02F8;
					}
					if (var0004 == "Jewelry") {
						say("\"I can give thee 100 monetari for any piece of jewelry thou hast.\"");
						var0005 = 0x03A9;
						var0004 = "pieces of jewelry";
					}
					say("\"Dost thou find the rate acceptable?\"");
					if (Func0955() == true) {
						var0006 = PARTY->count_objects(var0005, QUALITY_ANY, FRAME_ANY);
						if (var0006 > 0x01F4) {
							var0006 = 0x01F4;
						}
						if (var0006 != 0x0000) {
							say("\"How many ",
								var0004,
								" wouldst thou like to exchange?\"");
							var0007 = UI_input_numeric_value(0x0000, var0006, 0x0001, 0x0000);
							if (var0007 == 0x0000) {
								say("\"Perhaps another time then...\"");
								break;
							}
							if (var0004 == "Guilders") {
								var0008 = var0007 / 0x0003;
								var0009 = 0x0006;
							}
							if (var0004 == "Filari") {
								var0008 = var0007 / 0x0004;
								var0009 = 0x0008;
							}
							if (var0004 == "Gold Coins") {
								var0008 = var0007 / 0x0002;
								var0009 = 0x0004;
							}
							if (var0004 == "Gold Nuggets") {
								var0008 = var0007 * 0x000A;
								if (var0007 == 0x0001) {
									var0004 = "Gold Nugget";
								}
							}
							if (var0004 == "Gems") {
								var0008 = var0007 * 0x0019;
								if (var0007 == 0x0001) {
									var0004 = "Gem";
								}
							}
							if (var0004 == "pieces of jewelry") {
								var0008 = var0007 * 0x0064;
								var0004 = "pieces of jewelry";
								if (var0007 == 0x0001) {
									var0004 = "piece of jewelry";
								}
							}
							var000A = var0008 / 0x0032;
							var000B = var0008 - var000A;
							if (var0008 == 0x0000) {
								say("\"Thou must offer at least ",
									var0009,
									" ",
									var0004,
									" to exchange for ",
									var0001,
									"!\"");
								break;
							}
							if (var0008 == 0x0001) {
								say("\"My fee will leave thee with nothing!\"");
								break;
							}
							if (var0008 <= 0x0032) {
								var000A = 0x0001;
								var000B = var0008 - var000A;
							}
							if (var0007 >= 0x0001) {
								var000C = UI_remove_party_items(var0007, var0005, QUALITY_ANY, FRAME_ANY, false);
								say("\"Very well...\" ~\"I will take thy ",
									var0007,
									" ",
									var0004,
									" and give thee ",
									var0008,
									" Monetari, subtracting my charge of ",
									var000A,
									" Monetari, for a final sum of ",
									var000B,
									" Monetari given to thee.\"");
								var000D = Func099B(AVATAR, var000B, var0002, QUALITY_ANY, FRAME_ANY, false, true);
								say("\"'Tis done!\"");
							} else {
								say("\"Perhaps another time then...\"");
							}
						} else {
							say("\"Thou dost not have any ",
								var0004,
								" to exchange for ",
								var0001,
								"!\"");
						}
					} else {
						say("\"Perhaps another time then...\"");
					}
				}
				if (var0001 == "Guilders") {
					say("\"What dost thou care to exchange for guilders?\"");
					var0002 = 0x03B8;
					var0003 = ["Nothing"];
					if (Func097D(PARTY, 0x0001, 0x03B7, QUALITY_ANY, FRAME_ANY)) {
						var0003 &= "Monetari";
					}
					if (Func097D(PARTY, 0x0001, 0x03B4, QUALITY_ANY, FRAME_ANY)) {
						var0003 &= "Filari";
					}
					if (Func097D(PARTY, 0x0001, 0x0284, QUALITY_ANY, FRAME_ANY)) {
						var0003 &= "Gold Coins";
					}
					if (Func097D(PARTY, 0x0001, 0x0285, QUALITY_ANY, FRAME_ANY)) {
						var0003 &= "Gold Nuggets";
					}
					if (Func097D(PARTY, 0x0001, 0x02F8, QUALITY_ANY, FRAME_ANY)) {
						var0003 &= "Gems";
					}
					if (Func097D(PARTY, 0x0001, 0x03A9, QUALITY_ANY, FRAME_ANY)) {
						var0003 &= "Jewelry";
					}
					var0004 = Func0956(var0003);
					if (var0004 == "Nothing") {
						say("\"Very well... perhaps another time.\"");
						var0000 = false;
						return;
					}
					if (var0004 == "Monetari") {
						say("\"I can give thee 3 guilders for every 1 monetari thou hast.\"");
						var0005 = 0x03B7;
					}
					if (var0004 == "Filari") {
						say("\"I can give thee 3 guilders for every 4 filari thou hast.\"");
						var0005 = 0x03B4;
					}
					if (var0004 == "Gold Coins") {
						say("\"I can give thee 3 guilders for every 2 gold coins thou hast.\"");
						var0005 = 0x0284;
					}
					if (var0004 == "Gold Nuggets") {
						say("\"I can give thee 30 guilders for every 1 gold nugget thou hast.\"");
						var0005 = 0x0285;
					}
					if (var0004 == "Gems") {
						say("\"I can give thee 75 guilders for every gem thou dost have.\"");
						var0005 = 0x02F8;
					}
					if (var0004 == "Jewelry") {
						say("\"I can give thee 300 guilders for any piece of jewelry thou hast.\"");
						var0005 = 0x03A9;
						var0004 = "pieces of jewelry";
					}
					say("\"Dost thou find the rate acceptable?\"");
					if (Func0955() == true) {
						var0006 = PARTY->count_objects(var0005, QUALITY_ANY, FRAME_ANY);
						if (var0006 > 0x01F4) {
							var0006 = 0x01F4;
						}
						if (var0006 != 0x0000) {
							say("\"How many ",
								var0004,
								" wouldst thou like to exchange?\"");
							var0007 = UI_input_numeric_value(0x0000, var0006, 0x0001, 0x0000);
							if (var0007 == 0x0000) {
								say("\"Perhaps another time then...\"");
								break;
							}
							if (var0004 == "Monetari") {
								var0008 = var0007 * 0x0003;
							}
							if (var0004 == "Filari") {
								var0008 = (var0007 * 0x0003) / 0x0004;
								var0009 = 0x0003;
							}
							if (var0004 == "Gold Coins") {
								var0008 = (var0007 * 0x0003) / 0x0002;
								var0009 = 0x0002;
							}
							if (var0004 == "Gold Nuggets") {
								var0008 = var0007 * 0x001E;
								if (var0007 == 0x0001) {
									var0004 = "Gold Nugget";
								}
							}
							if (var0004 == "Gems") {
								var0008 = var0007 * 0x004B;
								if (var0007 == 0x0001) {
									var0004 = "Gem";
								}
							}
							if (var0004 == "pieces of jewelry") {
								var0008 = var0007 * 0x012C;
								var0004 = "pieces of jewelry";
								if (var0007 == 0x0001) {
									var0004 = "piece of jewelry";
								}
							}
							var000A = var0008 / 0x0032;
							var000B = var0008 - var000A;
							var000E = "Guilders";
							var000F = "Guilders";
							if (var0008 == 0x0000) {
								say("\"Thou must offer at least ",
									var0009,
									" ",
									var0004,
									" to exchange for ",
									var0001,
									"!\"");
								break;
							}
							if (var0008 == 0x0001) {
								say("\"My fee will leave thee with nothing!\"");
								break;
							}
							if (var0008 <= 0x0019) {
								var000A = 0x0001;
								var000B = var0008 - var000A;
							}
							if (var000B == 0x0001) {
								var000E = "Guilder";
							}
							if (var000A == 0x0001) {
								var000F = "Guilder";
							}
							if (var0007 >= 0x0001) {
								var000C = UI_remove_party_items(var0007, var0005, QUALITY_ANY, FRAME_ANY, false);
								say("\"Very well...\" ~\"I will take thy ",
									var0007,
									" ",
									var0004,
									" and give thee ",
									var0008,
									" Guilders, subtracting my charge of ",
									var000A,
									" ",
									var000F,
									", for a final sum of ",
									var000B,
									" ",
									var000E,
									" given to thee.\"");
								var000D = Func099B(AVATAR, var000B, var0002, QUALITY_ANY, FRAME_ANY, false, true);
								say("\"'Tis done!\"");
							} else {
								say("\"Perhaps another time then...\"");
							}
						} else {
							say("\"Thou dost not have any ",
								var0004,
								" to exchange for ",
								var0001,
								"!\"");
						}
					} else {
						say("\"Perhaps another time then...\"");
					}
				}
				if (var0001 == "Filari") {
					say("\"What dost thou care to exchange for filari?\"");
					var0002 = 0x03B4;
					var0003 = ["Nothing"];
					if (Func097D(PARTY, 0x0001, 0x03B7, QUALITY_ANY, FRAME_ANY)) {
						var0003 &= "Monetari";
					}
					if (Func097D(PARTY, 0x0001, 0x03B8, QUALITY_ANY, FRAME_ANY)) {
						var0003 &= "Guilders";
					}
					if (Func097D(PARTY, 0x0001, 0x0284, QUALITY_ANY, FRAME_ANY)) {
						var0003 &= "Gold Coins";
					}
					if (Func097D(PARTY, 0x0001, 0x0285, QUALITY_ANY, FRAME_ANY)) {
						var0003 &= "Gold Nuggets";
					}
					if (Func097D(PARTY, 0x0001, 0x02F8, QUALITY_ANY, FRAME_ANY)) {
						var0003 &= "Gems";
					}
					if (Func097D(PARTY, 0x0001, 0x03A9, QUALITY_ANY, FRAME_ANY)) {
						var0003 &= "Jewelry";
					}
					var0004 = Func0956(var0003);
					if (var0004 == "Nothing") {
						say("\"Very well... perhaps another time.\"");
						var0000 = false;
						return;
					}
					if (var0004 == "Monetari") {
						say("\"I can give thee 4 filari for every 1 monetari thou hast.\"");
						var0005 = 0x03B7;
					}
					if (var0004 == "Guilders") {
						say("\"I can give thee 4 filari for every 3 guilders thou hast.\"");
						var0005 = 0x03B8;
					}
					if (var0004 == "Gold Coins") {
						say("\"I can give thee 2 filari for every 1 gold coin thou hast.\"");
						var0005 = 0x0284;
					}
					if (var0004 == "Gold Nuggets") {
						say("\"I can give thee 40 filari for every 1 gold nugget thou hast.\"");
						var0005 = 0x0285;
					}
					if (var0004 == "Gems") {
						say("\"I can give thee 100 filari for every gem thou dost have.\"");
						var0005 = 0x02F8;
					}
					if (var0004 == "Jewelry") {
						say("\"I can give thee 400 filari for any piece of jewelry thou hast.\"");
						var0005 = 0x03A9;
						var0004 = "pieces of jewelry";
					}
					say("\"Dost thou find the rate acceptable?\"");
					if (Func0955() == true) {
						var0006 = PARTY->count_objects(var0005, QUALITY_ANY, FRAME_ANY);
						if (var0006 > 0x01F4) {
							var0006 = 0x01F4;
						}
						if (var0006 != 0x0000) {
							say("\"How many ",
								var0004,
								" wouldst thou like to exchange?\"");
							var0007 = UI_input_numeric_value(0x0000, var0006, 0x0001, 0x0000);
							if (var0007 == 0x0000) {
								say("\"Perhaps another time then...\"");
								break;
							}
							if (var0004 == "Monetari") {
								var0008 = var0007 * 0x0004;
							}
							if (var0004 == "Guilders") {
								var0008 = (var0007 * 0x0004) / 0x0003;
								var0009 = 0x0002;
							}
							if (var0004 == "Gold Coins") {
								var0008 = var0007 * 0x0002;
								if (var0007 == 0x0001) {
									var0004 = "Gold Coin";
								}
							}
							if (var0004 == "Gold Nuggets") {
								var0008 = var0007 * 0x0028;
								if (var0007 == 0x0001) {
									var0004 = "Gold Nugget";
								}
							}
							if (var0004 == "Gems") {
								var0008 = var0007 * 0x0064;
								if (var0007 == 0x0001) {
									var0004 = "Gem";
								}
							}
							if (var0004 == "pieces of jewelry") {
								var0008 = var0007 * 0x0190;
								var0004 = "pieces of jewelry";
								if (var0007 == 0x0001) {
									var0004 = "piece of jewelry";
								}
							}
							var000A = var0008 / 0x0032;
							var000B = var0008 - var000A;
							if (var0008 == 0x0000) {
								say("\"Thou must offer at least ",
									var0009,
									" ",
									var0004,
									" to exchange for ",
									var0001,
									"!\"");
								break;
							}
							if (var0008 == 0x0001) {
								say("\"My fee will leave thee with nothing!\"");
								break;
							}
							if (var0008 <= 0x0032) {
								var000A = 0x0001;
								var000B = var0008 - var000A;
							}
							if (var0007 >= 0x0001) {
								var000C = UI_remove_party_items(var0007, var0005, QUALITY_ANY, FRAME_ANY, false);
								say("\"Very well...\" ~\"I will take thy ",
									var0007,
									" ",
									var0004,
									" and give thee ",
									var0008,
									" Filari, subtracting my charge of ",
									var000A,
									" Filari, for a final sum of ",
									var000B,
									" Filari given to thee.\"");
								var000D = Func099B(AVATAR, var000B, var0002, QUALITY_ANY, FRAME_ANY, false, true);
								say("\"'Tis done!\"");
							} else {
								say("\"Perhaps another time then...\"");
							}
						} else {
							say("\"Thou dost not have any ",
								var0004,
								" to exchange for ",
								var0001,
								"!\"");
						}
					} else {
						say("\"Perhaps another time then...\"");
					}
				}
				if (var0001 == "Gold Coins") {
					say("\"What dost thou care to exchange for gold?\"");
					var0002 = 0x0284;
					var0003 = ["Nothing"];
					if (Func097D(PARTY, 0x0001, 0x03B7, QUALITY_ANY, FRAME_ANY)) {
						var0003 &= "Monetari";
					}
					if (Func097D(PARTY, 0x0001, 0x03B4, QUALITY_ANY, FRAME_ANY)) {
						var0003 &= "Filari";
					}
					if (Func097D(PARTY, 0x0001, 0x03B8, QUALITY_ANY, FRAME_ANY)) {
						var0003 &= "Guilders";
					}
					if (Func097D(PARTY, 0x0001, 0x0285, QUALITY_ANY, FRAME_ANY)) {
						var0003 &= "Gold Nuggets";
					}
					if (Func097D(PARTY, 0x0001, 0x02F8, QUALITY_ANY, FRAME_ANY)) {
						var0003 &= "Gems";
					}
					if (Func097D(PARTY, 0x0001, 0x03A9, QUALITY_ANY, FRAME_ANY)) {
						var0003 &= "Jewelry";
					}
					var0004 = Func0956(var0003);
					if (var0004 == "Nothing") {
						say("\"Very well... perhaps another time.\"");
						var0000 = false;
						return;
					}
					if (var0004 == "Monetari") {
						say("\"I can give thee 2 gold coins for every 1 monetari thou hast.\"");
						var0005 = 0x03B7;
					}
					if (var0004 == "Guilders") {
						say("\"I can give thee 2 gold coins for every 3 guilders thou hast.\"");
						var0005 = 0x03B8;
					}
					if (var0004 == "Filari") {
						say("\"I can give thee 1 gold coin for every 2 filari thou hast.\"");
						var0005 = 0x03B4;
					}
					if (var0004 == "Gold Nuggets") {
						say("\"I can give thee 20 gold coins for every 1 gold nugget thou hast.\"");
						var0005 = 0x0285;
					}
					if (var0004 == "Gems") {
						say("\"I can give thee 50 gold coins for every gem thou dost have.\"");
						var0005 = 0x02F8;
					}
					if (var0004 == "Jewelry") {
						say("\"I can give thee 200 gold coins for any piece of jewelry thou hast.\"");
						var0005 = 0x03A9;
						var0004 = "pieces of jewelry";
					}
					say("\"Dost thou find the rate acceptable?\"");
					if (Func0955() == true) {
						var0006 = PARTY->count_objects(var0005, QUALITY_ANY, FRAME_ANY);
						if (var0006 > 0x01F4) {
							var0006 = 0x01F4;
						}
						if (var0006 != 0x0000) {
							say("\"How many ",
								var0004,
								" wouldst thou like to exchange?\"");
							var0007 = UI_input_numeric_value(0x0000, var0006, 0x0001, 0x0000);
							if (var0007 == 0x0000) {
								say("\"Perhaps another time then...\"");
								break;
							}
							if (var0004 == "Monetari") {
								var0008 = var0007 * 0x0002;
							}
							if (var0004 == "Guilders") {
								var0008 = (var0007 * 0x0002) / 0x0003;
								var0009 = 0x0003;
							}
							if (var0004 == "Filari") {
								var0008 = var0007 / 0x0002;
								var0009 = 0x0004;
							}
							if (var0004 == "Gold Nuggets") {
								var0008 = var0007 * 0x0014;
								if (var0007 == 0x0001) {
									var0004 = "Gold Nugget";
								}
							}
							if (var0004 == "Gems") {
								var0008 = var0007 * 0x0032;
								if (var0007 == 0x0001) {
									var0004 = "Gem";
								}
							}
							if (var0004 == "pieces of jewelry") {
								var0008 = var0007 * 0x00C8;
								var0004 = "pieces of jewelry";
								if (var0007 == 0x0001) {
									var0004 = "piece of jewelry";
								}
							}
							var000A = var0008 / 0x0032;
							var000B = var0008 - var000A;
							var000E = "Gold Coins";
							var000F = "Gold Coins";
							if (var0008 == 0x0000) {
								say("\"Thou must offer at least ",
									var0009,
									" ",
									var0004,
									" to exchange for ",
									var0001,
									"!\"");
								break;
							}
							if (var0008 == 0x0001) {
								say("\"My fee will leave thee with nothing!\"");
								break;
							}
							if (var0008 <= 0x0032) {
								var000A = 0x0001;
								var000B = var0008 - var000A;
							}
							if (var000B == 0x0001) {
								var000E = "Gold Coin";
							}
							if (var000A == 0x0001) {
								var000F = "Gold Coin";
							}
							if (var0007 >= 0x0001) {
								var000C = UI_remove_party_items(var0007, var0005, QUALITY_ANY, FRAME_ANY, false);
								say("\"Very well...\" ~\"I will take thy ",
									var0007,
									" ",
									var0004,
									" and give thee ",
									var0008,
									" Gold Coins, subtracting my charge of ",
									var000A,
									" ",
									var000F,
									", for a final sum of ",
									var000B,
									" ",
									var000E,
									" given to thee.\"");
								var000D = Func099B(AVATAR, var000B, var0002, QUALITY_ANY, FRAME_ANY, false, true);
								say("\"'Tis done!\"");
							} else {
								say("\"Perhaps another time then...\"");
							}
						} else {
							say("\"Thou dost not have any ",
								var0004,
								" to exchange for ",
								var0001,
								"!\"");
						}
					} else {
						say("\"Perhaps another time then...\"");
					}
				}
			} while (false);
			say("\"Dost thou care to exchange more coins?\"");
			var0000 = Func0955();
		}
	} else {
		say("\"If that is what thou dost desire...\"");
	}
}

extern var Func0954 0x954 ();
extern var Func0957 0x957 (var var0000);
extern var Func0955 0x955 ();
extern var Func0820 0x820 (var var0000, var var0001);
extern var Func0943 0x943 (var var0000, var var0001, var var0002, var var0003, var var0004, var var0005, var var0006, var var0007);
extern var Func0992 0x992 (var var0000, var var0001, var var0002, var var0003);

void Func081E 0x81E () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;
	var var0008;
	var var0009;
	var var000A;
	var var000B;
	var var000C;
	var var000D;
	var var000E;
	var var000F;

	var0000 = Func0954();
	UI_push_answers();
	var0001 = true;
	var0002 = ["nothing", "ham", "mutton", "trout", "cheese", "pastry"];
	var0003 = [0x0000, 0x0179, 0x0179, 0x0179, 0x0179, 0x0179];
	var0004 = [FRAME_ANY, 0x000B, 0x0008, 0x000C, 0x001B, 0x0006];
	var0005 = [0x0000, 0x0014, 0x0016, 0x000A, 0x000C, 0x0008];
	var0006 = [0x0000, 0x000C, 0x000E, 0x0006, 0x0007, 0x0004];
	var0007 = 0x0284;
	var0008 = [0x0000, 0x0001, 0x0001, 0x0001, 0x0001, 0x0001];
	var0009 = [0x0000, 0x0001, 0x0001, 0x0001, 0x0001, 0x0001];
	say("\"What sounds good to thee, ",
		var0000,
		"?\"");
	while (var0001) {
		var000A = Func0957(var0002);
		if (var000A == 0x0001) {
			say("\"Perhaps another time, then.\"");
			var0001 = false;
		} else {
			var000B = var0005[var000A];
			var000C = 0x0000;
			if (var000A == 0x0002) {
				say("\"I'm afraid that the price is ",
					var000B,
					" gold coins... Our supplies are getting low. Dost thou accept?\"");
				var000D = "haunches of ham";
			}
			if (var000A == 0x0003) {
				say("\"The dinner costs ",
					var000B,
					" gold coins. Others would charge thee twice as much for as much as I serve. Dost thou find this acceptable?\"");
				var000D = "joints of mutton";
			}
			if (var000A == 0x0004) {
				say("\"Our fish is very tasty. ",
					var000B,
					" gold coins is the price. Dost thou agree?\"");
				var000D = "trout";
			}
			if (var000A == 0x0005) {
				say("\"",
					var000B,
					" gold coins for a wedge of fine cheese. Dost thou accept?\"");
				var000D = "wedges of cheese";
			}
			if (var000A == 0x0006) {
				say("\"Well, if thou dost like fine desserts that will melt in thy mouth and make thee smile in appreciation, then thou shouldst try my pastry, ",
					var0000,
					". They sell for ",
					var000B,
					" gold coins each. Dost thou agree?\"");
				var000D = "pastries";
			}
			if (var000B == var0006[var000A]) {
				if (Func0955() == true) {
					var000E = var000B;
				} else {
					var000E = 0x0000;
				}
			} else {
				var000E = Func0820(var0005[var000A], var0006[var000A]);
			}
			if (var000E > 0x0000) {
				if (var0009[var000A] == 0x0001) {
					say("\"How many ",
						var000D,
						" wouldst thou like?\"");
					var000C = Func0943(var0003[var000A], var0004[var000A], var0008[var000A], var0007, var000E, 0x0014, 0x0001, false);
				} else {
					var000C = Func0943(var0003[var000A], var0004[var000A], var0008[var000A], var0007, var000E, 0x0000, 0x0001, false);
				}
			}
			if (var000C == 0x0001) {
				say("\"Enjoy thy meal, ",
					var0000,
					".\"");
			} else if (var000C == 0x0002) {
				say("\"Thou canst not carry so much, ",
					var0000,
					".\"");
			} else if (var000C == 0x0003) {
				var000F = Func0992(0x0001, (("@But " + var0000) + ", we haven't the coins to pay for this.@"), 0x0000, false);
				if (var000F != AVATAR) {
					DEVRA->show_npc_face0(0x0000);
					say("\"I'd hate to see any of thee go hungry, ",
						var0000,
						".\" *\"I would feed thee for free, if I did not have a business to worry about.\"");
					say("\"I fear thou shalt go hungry, ",
						var0000,
						".\"");
					break;
				}
				say("\"Thou dost not have enough for that, ",
					var0000,
					".\" *\"I would feed thee for free, if I did not have a business to worry about.\"");
				say("\"I'm afraid thou shalt go hungry, ",
					var0000,
					".\"");
				break;
				// Dead code
				if (0x001F < (DEVRA->get_npc_id() + 0x0006)) {
					DEVRA->set_npc_id(0x001F);
				} else {
					DEVRA->set_npc_id(DEVRA->get_npc_id() + 0x0006);
				}
			}
			say("\"Wouldst thou care for more?\"");
			var0001 = Func0955();
		}
	}
	UI_pop_answers();
}

extern var Func0954 0x954 ();
extern var Func0953 0x953 ();
extern var Func0957 0x957 (var var0000);
extern var Func0955 0x955 ();
extern var Func0820 0x820 (var var0000, var var0001);
extern var Func0943 0x943 (var var0000, var var0001, var var0002, var var0003, var var0004, var var0005, var var0006, var var0007);
extern var Func0992 0x992 (var var0000, var var0001, var var0002, var var0003);

void Func081F 0x81F () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;
	var var0008;
	var var0009;
	var var000A;
	var var000B;
	var var000C;
	var var000D;
	var var000E;
	var var000F;
	var var0010;

	var0000 = Func0954();
	var0001 = Func0953();
	UI_push_answers();
	var0002 = true;
	var0003 = ["nothing", "wine", "mead", "ale"];
	var0004 = [0x0000, 0x0268, 0x0268, 0x0268];
	var0005 = [FRAME_ANY, 0x0005, 0x0001, 0x0003];
	var0006 = [0x0000, 0x0008, 0x000F, 0x0005];
	var0007 = [0x0000, 0x0005, 0x0009, 0x0002];
	var0008 = 0x0284;
	var0009 = [0x0000, 0x0001, 0x0001, 0x0001];
	var000A = [0x0000, 0x0001, 0x0001, 0x0001];
	say("\"What wouldst thou like to ease thy thirst, ",
		var0000,
		"?\"");
	while (var0002) {
		var000B = Func0957(var0003);
		if (var000B == 0x0001) {
			say("\"We have plenty, if thou dost change thy mind!\"");
			var0002 = false;
		} else {
			var000C = var0006[var000B];
			var000D = 0x0000;
			if (var000B == 0x0002) {
				say("\"For that, I must ask ",
					var000C,
					" gold coins... The last batch was below standard so I sent it back.\" *\"We have very little left. Is this a price that thou canst pay?\"");
				var000E = "wine bottles";
			}
			if (var000B == 0x0003) {
				say("\"Thou wilt find the light spice in this brew quite refreshing. At ",
					var000C,
					" gold coins, wilt thou try some?\"");
				var000E = "bottles of mead";
			}
			if (var000B == 0x0004) {
				say("\"This batch went a bit flat on us, ",
					var0000,
					". So I'll not ask more than ",
					var000C,
					" gold coins for it. Dost thou find that acceptable?\"");
				var000E = "mugs of ale";
			}
			if (var000C == var0007[var000B]) {
				if (Func0955()) {
					var000F = var000C;
				} else {
					var000F = 0x0000;
				}
			} else {
				var000F = Func0820(var0006[var000B], var0007[var000B]);
			}
			if (var000F > 0x0000) {
				if (var000A[var000B] == 0x0001) {
					say("\"How many ",
						var000E,
						" wouldst thou like?\"");
					var000D = Func0943(var0004[var000B], var0005[var000B], var0009[var000B], var0008, var000F, 0x0014, 0x0001, false);
				} else {
					var000D = Func0943(var0004[var000B], var0005[var000B], var0009[var000B], var0008, var000F, 0x0000, 0x0001, false);
				}
			}
			if (var000D == 0x0001) {
				say("\"Here's to thine health, ",
					var0000,
					"!\"");
			} else if (var000D == 0x0002) {
				say("\"I'm afraid thou canst not carry so many bottles, ",
					var0000,
					"!\"");
			} else if (var000D == 0x0003) {
				var0010 = Func0992(0x0001, (("@But " + var0001) + ", we lack adequate funds!@"), 0x0000, false);
				if (var0010 != AVATAR) {
					DEVRA->show_npc_face0(0x0000);
					say("\"I like a cup or two myself, from time to time.\" *\"I would let thee drink for free, but I have little enough for the paying customers these days.\"");
					say("\"I fear thou shalt have to do with water, ",
						var0000,
						". That I have in plenty.\"");
					break;
				}
				say("\"I'm sorry, ",
					var0000,
					", thou dost not have enough for that.\" *\"I would let thee drink for free, but I have little enough for the paying customers these days.\"");
				say("\"I fear thou shalt have to do with water, ",
					var0000,
					". That I have in plenty.\"");
				break;
				// Dead code
				if (0x001F < (DEVRA->get_npc_id() + 0x0006)) {
					DEVRA->set_npc_id(0x001F);
				} else {
					DEVRA->set_npc_id(DEVRA->get_npc_id() + 0x0006);
				}
			}
			say("\"Wouldst thou care for more?\"");
			var0002 = Func0955();
		}
	}
	UI_pop_answers();
}

extern var Func0954 0x954 ();
extern var Func0956 0x956 (var var0000);
extern var Func0999 0x999 (var var0000, var var0001, var var0002, var var0003, var var0004, var var0005, var var0006);
extern var Func0942 0x942 (var var0000);
extern var Func0955 0x955 ();

var Func0820 0x820 (var var0000, var var0001) {
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;
	var var0008;
	var var0009;
	var var000A;
	var var000B;
	var var000C;
	var var000D;
	var var000E;
	var var000F;
	var var0010;

	var0002 = Func0954();
	var0003 = UI_is_pc_female();
	var0004 = var0000;
	var0005 = (var0001 / 0x0003) * 0x0002;
	var0006 = 0x000F - (DEVRA->get_npc_id() / 0x0002);
	var0007 = 0x0000;
	var0008 = 0x0001;
	var0009 = 0x0000;
	var000A = 0x0002;
	var000B = DEVRA->get_npc_id();
	while (var0008) {
		var000C = Func0956(["yes", "no", "haggle"]);
		if (var000C == "no") {
			return 0x0000;
		}
		if (var000C == "yes") {
			var000D = 0x0000;
		} else {
			var000E = Func0999(var0004, var0001, var000A, var0005, var0009, var0006, var0007);
			var0009 += 0x0001;
			var0007 = var000E[0x0004];
			var000D = var000E[0x0003];
			var000F = var0004;
			var0004 = var000E[0x0002];
			var0005 = var000E[0x0001];
		}
		var0010 = UI_get_random(0x0003);
		if (var000D < 0x0002) {
			if (var0004 < (var0001 + ((var0000 - var0001) / 0x0004))) {
				if (var0010 == 0x0001) {
					say("\"Do not tell Argus... He'll think his mother hath gone soft in the head for giving thee a price like this.\"");
				}
				if (var0010 == 0x0002) {
					say("\"Thou dost drive a hard bargain, ",
						var0002,
						". I should sit by the fire and knit!\"");
				}
				if (var0010 == 0x0003) {
					say("\"It hath been quite a while since I was so defeated!\"");
					if (Func0942(ARGUS)) {
						ARGUS->show_npc_face1(0x0000);
						say("\"To hear thee tell it, thou hast never been defeated, mother!\"");
						UI_remove_npc_face1();
						0x0000->set_conversation_slot();
					}
				}
			} else if (var0004 < (var0001 + ((var0000 - var0001) / 0x0003))) {
				if (var0010 == 0x0001) {
					say("\"We offer honest prices here at the Sleeping Bull!\"");
				}
				if (var0010 == 0x0002) {
					say("\"I would quickly have to beg if I offered such prices every day!\"");
				}
				if (var0010 == 0x0003) {
					say("\"Thou hast a shrewd head on thy shoulders, ",
						var0002,
						". Thou dost bargain like a innkeeper!\"");
				}
			} else if (var0004 < (var0001 + ((var0000 - var0001) / 0x0002))) {
				if (var0010 == 0x0001) {
					say("\"Fair enough, if I do say so myself.\"");
				}
				if (var0010 == 0x0002) {
					say("\"I shall never make a profit with customers like thee...\"");
				}
				if (var0010 == 0x0003) {
					say("\"We try only to please! Tell thy friends about the Sleeping Bull!\"");
				}
			} else {
				if (var0010 == 0x0001) {
					say("\"I am content, ",
						var0002,
						".\"");
				}
				if (var0010 == 0x0002) {
					say("\"Blessing thee and thy companions, ",
						var0002,
						"!\"");
				}
				if (var0010 == 0x0003) {
					say("\"If the suppliers ever come, I won't have to charge such high prices.\"");
				}
			}
			say("\"Dost thou agree on a price of ",
				var0004,
				", ",
				var0002,
				"?\"");
			if (Func0955()) {
				if (var000B > 0x0001) {
					DEVRA->set_npc_id(var000B - 0x0002);
				}
				return var0004;
			}
			if (var0010 == 0x0001) {
				say("\"I must have misunderstood. I thought we had an agreement.\"");
			}
			if (var0010 == 0x0002) {
				say("\"I have no time for this!\"");
			}
			if (var0010 == 0x0003) {
				say("\"Then take thy business elsewhere, ",
					var0002,
					"! I do not have all day to stand and argue!\"");
			}
			if (0x001F < (var000B + 0x000A)) {
				DEVRA->set_npc_id(0x001F);
			} else {
				DEVRA->set_npc_id(var000B + 0x000A);
			}
			return 0x0000;
		}
		if (var0007 == 0x0001) {
			if (var000D == 0x0005) {
				say("\"",
					var0004,
					" is my final offer. Dost thou accept?\"");
				if (var000B < 0x001C) {
					DEVRA->set_npc_id(var000B + 0x0004);
				}
				if (Func0955()) {
					return var0004;
				}
				var0008 = 0x0000;
			} else {
				say("\"Very well. ",
					var0004,
					" is my final offer.\"");
				if (var000B < 0x001E) {
					DEVRA->set_npc_id(var000B + 0x0002);
				}
			}
		} else {
			if (var000D == 0x0002) {
				if (var0010 == 0x0001) {
					say("\"Thou dost bargain well. How doth ",
						var0004,
						" sound?\"");
				}
				if (var0010 == 0x0002) {
					say("\"Thou wouldst make a fine innkeeper... Have we agreed on ",
						var0004,
						" gold coins?\"");
				}
				if (var0010 == 0x0003) {
					say("\"My price is ",
						var0004,
						"... Just for thee. Dost thou accept?\"");
				}
			}
			if (var000D == 0x0003) {
				if (var0010 == 0x0001) {
					say("\"These are hard times, and goods are scarce... Wouldst thou give ",
						var0004,
						"?\"");
				}
				if (var0010 == 0x0002) {
					say("\"I don't know... ",
						var0004,
						"?\"");
				}
				if (var0010 == 0x0003) {
					say("\"I need to hire more help... Perhaps ",
						var0004,
						"?\"");
				}
			}
			if (var000D == 0x0004) {
				if (var0010 == 0x0001) {
					say("\"Surely thou dost jest! ",
						var0004,
						" is as low as I can go. What sayest thou?\"");
				}
				if (var0010 == 0x0002) {
					say("\"With these storms driving our customers away, surely thou canst see that I can accept no less than ",
						var0004,
						".\"");
				}
				if (var0010 == 0x0003) {
					say("\"I have bargained with better folk than thee and gotten a better deal than that! Not less than ",
						var0004,
						"!\"");
				}
			}
			if (var000D == 0x0005) {
				var0004 = var000F;
				if (var0010 == 0x0001) {
					say("\"I would rather sell myself to a mage than to accept such a pitiful offer! I insist on ",
						var0004,
						"!\"");
				}
				if (var0010 == 0x0002) {
					say("\"I am not in my dotage to accept such an offer! ",
						var0004,
						", and no less!\"");
				}
				if (var0010 == 0x0003) {
					say("\"May I go to my grave now! ",
						var0004,
						" is where I stand!\"");
				}
				if (var000B < 0x001F) {
					DEVRA->set_npc_id(var000B + 0x0001);
				}
			}
		}
	}
	return 0;
}

extern void Func095D 0x95D (var var0000);

void Func0821 0x821 () {
	var var0000;

	say("\"Rhys Fletcher, a master bowman on an urgent mission for his king, desperately needed to find a hidden mountain pass.\"");
	say("\"While searching for the pass he came upon three mystics who were standing alongside the trail.\"");
	say("\"One mystic wore a black sash while the other two had brown sashes.\"");
	say("\"Rhys knew that some mystics were truth-tellers and some were not.\"");
	say("\"Rhys thought that if he could figure out if one of the mystics was a truth-teller, he could learn the whereabouts of the hidden pass.\"");
	say("\"So he rode up to the mystics and asked, 'Art thou truth-tellers?'\"");
	say("\"The mystic wearing the black sash answered the bowyer by nodding his head up and down. The second mystic, who had only one arm, told Rhys that the mystic with the black sash indicated that he was a truth-teller. However, the other mystic, who was fat, said that the mystic with the black sash was lying.\"");
	say("\"How many of these mystics were liars?\"");
	var0000 = UI_input_numeric_value(0x0000, 0x0003, 0x0001, 0x0000);
	if (var0000 == 0x0001) {
		if (!gflags[WAS_ASKED_LIARS_RIDDLE]) {
			say("\"That is correct!\"");
			gflags[SOLVED_LIARS_RIDDLE] = true;
			Func095D(0x0064);
			gflags[WAS_ASKED_LIARS_RIDDLE] = true;
		} else {
			say("\"That is correct!\"");
			gflags[SOLVED_LIARS_RIDDLE] = true;
		}
	} else {
		say("\"I'm sorry, but that is not the correct answer.\"");
	}
}

extern void Func095D 0x95D (var var0000);

void Func0822 0x822 () {
	var var0000;

	say("\"A young noblewoman is getting ready for the Royal Ball. She has several types of earrings in her jewelry box (two made of gold, three of silver, and four made of copper).\"");
	say("\"The earrings, however, are all scattered about in the jewelry box.\"");
	say("\"Without looking into the jewelry box, how many earrings would the noblewoman have to take\tout of the jewelry box to insure a matched pair?\"");
	var0000 = UI_input_numeric_value(0x0000, 0x000A, 0x0001, 0x0000);
	if (var0000 == 0x0004) {
		if (!gflags[WAS_ASKED_EARRINGS_RIDDLE]) {
			say("\"Thou art corrcet!\"");
			gflags[SOLVED_EARRINGS_RIDDLE] = true;
			Func095D(0x0096);
			gflags[WAS_ASKED_EARRINGS_RIDDLE] = true;
		} else {
			say("\"Thou art correct!\"");
			gflags[SOLVED_EARRINGS_RIDDLE] = true;
		}
	} else {
		say("\"I'm sorry, but that is not the correct answer.\"");
	}
}

extern void Func095D 0x95D (var var0000);

void Func0823 0x823 () {
	var var0000;

	say("\"My cousin Longtooth has claimed to have stumped over 100 creatures with his riddles. My aunt says that he's blowing smoke, and that the number is probably less than 100. I say that he has probably stumped at least one creature with his riddles.\"");
	say("\"If only one of us is correct, how many creatures has Longtooth stumped with his riddles?\"");
	var0000 = UI_input_numeric_value(0x0000, 0x00C8, 0x0001, 0x0000);
	if (var0000 == 0x0000) {
		if (!gflags[WAS_ASKED_LONGTOOTH_RIDDLE]) {
			say("\"Thou art correct! Longtooth is a great dragon, but he's lousy at riddling!\"");
			gflags[SOLVED_LONGTOOTH_RIDDLE] = true;
			Func095D(0x00C8);
			gflags[WAS_ASKED_LONGTOOTH_RIDDLE] = true;
		} else {
			say("\"Thou art correct! Longtooth is a great dragon, but he's lousy at riddling!\"");
			gflags[SOLVED_LONGTOOTH_RIDDLE] = true;
		}
	} else {
		say("\"I am sorry, but that is not the correct answer.\"");
	}
}

extern void Func095D 0x95D (var var0000);

void Func0824 0x824 () {
	var var0000;
	var var0001;

	say("\"A clothier named Sedrick has received an order to make five dresses, all with the same pattern. Sedrick has three designs of embroidered cloth laying on a table in his workroom.\"");
	say("\"Sedrick tells his apprentice to fetch five pieces of cloth with the same embroidered pattern. The lazy apprentice doesn't bother looking through the piles of cloth, he just\ttakes an armful.\"");
	say("\"Discounting pure luck, how many pieces of cloth would the apprentice have to grab to insure that Sedrick could make five dresses with the same embroidery pattern?\"");
	var0000 = UI_input_numeric_value(0x0000, 0x001E, 0x0001, 0x0000);
	if (var0000 == 0x000E) {
		if (!gflags[WAS_ASKED_CLOTH_RIDDLE]) {
			say("\"Verily, thou hath a good head upon thy shoulders!\"");
			gflags[SOLVED_CLOTH_RIDDLE] = true;
			var0001 = true;
			Func095D(0x012C);
		} else {
			say("\"Verily, thou hath a good head upon thy shoulders!\"");
			gflags[SOLVED_CLOTH_RIDDLE] = true;
		}
	} else {
		say("\"I'm sorry, but that is not the correct answer.\"");
	}
}

var Func0825 0x825 () {
	var var0000;

	var0000 = DRAXTA->get_object_position();
	if ((var0000[0x0001] > 0x090C) && ((var0000[0x0001] < 0x0920) && ((var0000[0x0002] > 0x0412) && (var0000[0x0002] < 0x0426)))) {
		return true;
	}
	return false;
}

extern var Func090C 0x90C (var var0000, var var0001);
extern var Func099B 0x99B (var var0000, var var0001, var var0002, var var0003, var var0004, var var0005, var var0006);
extern void Func040F object#(0x40F) ();

void Func0826 0x826 (var var0000) {
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;

	var0001 = DUCIO->find_nearby(0x02E3, 0x0032, MASK_NONE);
	var0002 = var0001->get_object_position();
	if (var0000 == 0x0009) {
		if (var0001) {
			DUCIO->si_path_run_usecode(var0002, PATH_SUCCESS, DUCIO->get_npc_object(), Func040F, true);
			UI_set_path_failure([Func040F], item, SI_PATH_FAILURE);
		}
	}
	if (var0000 == 0x000A) {
		var0003 = Func090C(DUCIO, var0002);
		var0004 = script DUCIO {
			nohalt;
			face var0003;
			continue;
			actor frame bowing;
			wait 2;
			repeat 2 {
				actor frame raise_1h;
				wait 1;
				actor frame reach_1h;
				wait 1;
			};
		};
		DUCIO->obj_sprite_effect(ANIMATION_PURPLE_BUBBLES, -4, -4, 0, 0, 0, LOOP_ONCE);
		var0005 = AVATAR->get_object_position();
		DUCIO->show_npc_face0(0x0000);
		say("\"Take thy gem!\"");
		var0004 = UI_remove_party_items(0x0003, 0x034A, QUALITY_ANY, 0x000A, 0x0000);
		var0006 = Func099B(AVATAR, 0x0001, 0x01BD, QUALITY_ANY, 0x0000, 0x0000, true);
		UI_remove_npc_face0();
		DUCIO->run_schedule();
	}
}

extern var Func0954 0x954 ();
extern var Func0957 0x957 (var var0000);
extern var Func0955 0x955 ();
extern var Func0828 0x828 (var var0000, var var0001);
extern var Func0943 0x943 (var var0000, var var0001, var var0002, var var0003, var var0004, var var0005, var var0006, var var0007);
extern var Func0992 0x992 (var var0000, var var0001, var var0002, var var0003);

void Func0827 0x827 () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;
	var var0008;
	var var0009;
	var var000A;
	var var000B;
	var var000C;
	var var000D;
	var var000E;
	var var000F;
	var var0010;
	var var0011;
	var var0012;
	var var0013;

	var0000 = Func0954();
	var0001 = UI_die_roll(0x0001, 0x0004);
	UI_push_answers();
	var0002 = true;
	var0003 = ["nothing", "cloak", "sword", "shovel", "torch", "pick", "bucket", "pitcher", "lamp", "cloth", "bread", "rolls", "cake"];
	var0004 = [0x0000, 0x00E3, 0x0257, 0x0271, 0x0253, 0x0270, 0x032A, 0x0338, 0x0150, 0x0353, 0x0179, 0x0179, 0x0179];
	var0005 = [FRAME_ANY, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0002, 0x0002, var0001, 0x0001, 0x0002, 0x0004];
	var0006 = [0x0000, 0x00C8, 0x015E, 0x0064, 0x000A, 0x008C, 0x001C, 0x001E, 0x000C, 0x0014, 0x0008, 0x0005, 0x000A];
	var0007 = [0x0000, 0x0050, 0x00A0, 0x0032, 0x0005, 0x004B, 0x000E, 0x000F, 0x0006, 0x000A, 0x0004, 0x0003, 0x0005];
	var0008 = 0x03B8;
	var0009 = [0x0000, 0x0001, 0x0001, 0x0001, 0x0001, 0x0001, 0x0001, 0x0001, 0x0001, 0x0001, 0x0001, 0x0001, 0x0001];
	var000A = [0x0000, 0x0001, 0x0000, 0x0000, 0x0001, 0x0000, 0x0001, 0x0001, 0x0001, 0x0001, 0x0001, 0x0001, 0x0001];
	if (UI_is_pc_female()) {
		var000B = "Milady";
	} else {
		var000B = "Milord";
	}
	say("\"What dost thou care to buy?\"");
	while (var0002) {
		var000C = Func0957(var0003);
		if (var000C == 0x0001) {
			say("\"Perhaps another time, ",
				var0000,
				".\"");
			var0002 = false;
			continue;
		}
		var000D = var0006[var000C];
		var000E = 0x0000;
		var000F = UI_die_roll(0x0001, 0x0005);
		if (var000F == 0x0001) {
			var0010 = "Dost thou accept?";
		}
		if (var000F == 0x0002) {
			var0010 = "Dost thou find this price acceptable?";
		}
		if (var000F == 0x0003) {
			var0010 = "Wilt thou pay my price?";
		}
		if (var000F == 0x0004) {
			var0010 = var000B + ", dost thou agree?";
		}
		if (var000F == 0x0005) {
			var0010 = var000B + ", is the price acceptable?";
		}
		if (var000C == 0x0002) {
			say("\"That will be ",
				var000D,
				" guilders for a nice warm cloak.\"");
			say(var0010,
				"\"");
			var0011 = "cloaks";
		}
		if (var000C == 0x0003) {
			say("\"For ",
				var000D,
				" guilders I can sell thee a very sharp sword.\"");
			say("\"",
				var0010,
				"\"");
			var0011 = "swords";
		}
		if (var000C == 0x0004) {
			say("\"",
				var000D,
				" guilders will buy thee a finely crafted shovel.\"");
			say("\"",
				var0010,
				"\"");
			var0011 = "shovels";
		}
		if (var000C == 0x0005) {
			say("\"I will sell thee a torch for ",
				var000D,
				" guilders.\"");
			say("\"",
				var0010,
				"\"");
			var0011 = "torches";
		}
		if (var000C == 0x0006) {
			say("\"Mine automaton smith makes them. For ",
				var000D,
				" guilders I can sell thee one.\"");
			say("\"",
				var0010,
				"\"");
			var0011 = "picks";
		}
		if (var000C == 0x0007) {
			say("\"My buckets sell for ",
				var000D,
				" guilders.\"");
			say("\"",
				var0010,
				"\"");
			var0011 = "buckets";
		}
		if (var000C == 0x0008) {
			say("\"I can sell thee a pitcher for ",
				var000D,
				" guilders.\"");
			say("\"",
				var0010,
				"\"");
			var0011 = "pitchers";
		}
		if (var000C == 0x0009) {
			say("\"I will sell thee a nice oil lamp for ",
				var000D,
				" guilders.\"");
			say("\"",
				var0010,
				"\"");
			var0011 = "oil lamps";
		}
		if (var000C == 0x000A) {
			say("\"I can sell thee a bolt of dyed cloth for ",
				var000D,
				" guilders.\"");
			say("\"",
				var0010,
				"\"");
			var0011 = "bolts of cloth";
		}
		if (var000C == 0x000B) {
			say("\"Hmmm... the bread baked by mine automaton baker is very good and filling. I will sell a loaf to thee for ",
				var000D,
				" guilders.\"");
			say("\"",
				var0010,
				"\"");
			var0011 = "loaves of bread";
		}
		if (var000C == 0x000C) {
			say("\"The rolls are baked fresh daily. For ",
				var000D,
				" guilders I will sell thee one.\"");
			say("\"",
				var0010,
				"\"");
			var0011 = "rolls";
		}
		if (var000C == 0x000D) {
			say("\"The cake is actually very good. Nice and sweet. For ",
				var000D,
				" guilders thou canst have one.\"");
			say("\"",
				var0010,
				"\"");
			var0011 = "cakes";
		}
		if (var000D == var0007[var000C]) {
			if (Func0955()) {
				var0012 = var000D;
			} else {
				var0012 = 0x0000;
			}
		} else {
			var0012 = Func0828(var0006[var000C], var0007[var000C]);
		}
		if (var0012 > 0x0000) {
			if (var000A[var000C] == 0x0001) {
				say("\"How many ",
					var0011,
					" wouldst thou like?\"");
				var000E = Func0943(var0004[var000C], var0005[var000C], 0x0001, var0008, var0012, 0x000A, 0x0001, false);
			} else {
				var000E = Func0943(var0004[var000C], var0005[var000C], 0x0001, var0008, var0012, 0x0000, 0x0001, false);
			}
		}
		if (var000E == 0x0001) {
			say("\"Enjoy thy purchase!\"");
		} else if (var000E == 0x0002) {
			say("\"Thine hands are full!\"");
		} else if (var000E == 0x0003) {
			var0013 = Func0992(0x0001, (("@But " + var0000) + ", we do not have the guilders to purchase this.@"), 0x0000, false);
			if (var0013 != AVATAR) {
				DUCIO->show_npc_face0(0x0000);
				say("\"Please leave if thou canst not pay.\"");
			} else {
				say("\"Thou dost not have enough guilders to purchase this...\"");
			}
			if (0x001F < (DUCIO->get_npc_id() + 0x0006)) {
				DUCIO->set_npc_id(0x001F);
			} else {
				DUCIO->set_npc_id(DUCIO->get_npc_id() + 0x0006);
			}
		}
		say("\"Dost thou care for something else?\"");
		var0002 = Func0955();
	}
	UI_pop_answers();
}

extern var Func0954 0x954 ();
extern var Func0956 0x956 (var var0000);
extern var Func0999 0x999 (var var0000, var var0001, var var0002, var var0003, var var0004, var var0005, var var0006);
extern var Func0955 0x955 ();

var Func0828 0x828 (var var0000, var var0001) {
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;
	var var0008;
	var var0009;
	var var000A;
	var var000B;
	var var000C;
	var var000D;
	var var000E;
	var var000F;
	var var0010;
	var var0011;

	var0002 = Func0954();
	var0003 = UI_is_pc_female();
	if (UI_is_pc_female()) {
		var0004 = "Milady";
	} else {
		var0004 = "Milord";
	}
	var0005 = var0000;
	var0006 = (var0001 / 0x0003) * 0x0002;
	var0007 = 0x000F - (DUCIO->get_npc_id() / 0x0002);
	var0008 = 0x0000;
	var0009 = 0x0001;
	var000A = 0x0000;
	var000B = 0x0002;
	var000C = DUCIO->get_npc_id();
	while (var0009) {
		var000D = Func0956(["yes", "no", "haggle"]);
		if (var000D == "no") {
			return 0x0000;
		}
		if (var000D == "yes") {
			var000E = 0x0000;
		} else {
			var000F = Func0999(var0005, var0001, var000B, var0006, var000A, var0007, var0008);
			var000A += 0x0001;
			var0008 = var000F[0x0004];
			var000E = var000F[0x0003];
			var0010 = var0005;
			var0005 = var000F[0x0002];
			var0006 = var000F[0x0001];
		}
		var0011 = UI_get_random(0x0003);
		if (var000E < 0x0002) {
			if (var0005 < (var0001 + ((var0000 - var0001) / 0x0004))) {
				if (var0011 == 0x0001) {
					say("\"Thou art shrewd indeed, ",
						var0002,
						". Thou wouldst make a fine Master.\"");
				}
				if (var0011 == 0x0002) {
					say("\"",
						var0004,
						", this is the fist time in years that I have actually lost money in a deal.\"");
				}
				if (var0011 == 0x0003) {
					say("\"Thou dost trade well, ",
						var0002,
						".\"");
				}
			} else if (var0005 < (var0001 + ((var0000 - var0001) / 0x0003))) {
				if (var0011 == 0x0001) {
					say("\"Do not allow Topo to hear of this, ",
						var0002,
						"! 'Tis not often I lower my prices such...\"");
				}
				if (var0011 == 0x0002) {
					say("\"",
						var0004,
						", I must be addled! I do not normally offer such a price...\"");
				}
				if (var0011 == 0x0003) {
					say("\"Thou art honorable, ",
						var0002,
						", I can tell. For thee only will I offer such a price!\"");
				}
			} else if (var0005 < (var0001 + ((var0000 - var0001) / 0x0002))) {
				if (var0011 == 0x0001) {
					say("\"Thou wilt find that my prices are more than fair, ",
						var0002,
						", once thou hast travelled a bit.\"");
				}
				if (var0011 == 0x0002) {
					say("\"'Tis a pleasure to trade with thee, ",
						var0002,
						".\"");
				}
				if (var0011 == 0x0003) {
					say("\"Please come to see me whenever thou art in Moonshade again.\"");
				}
			} else {
				if (var0011 == 0x0001) {
					say("\"",
						var0004,
						", thou art a fine customer!\"");
				}
				if (var0011 == 0x0002) {
					say("\"Many thanks, ",
						var0002,
						"!\"");
				}
				if (var0011 == 0x0003) {
					say("\"I fear that I must charge more, now that my raw materials are so limited.\"");
				}
			}
			say("\"Hast thou agreed to a price of ",
				var0005,
				" guilders, ",
				var0002,
				"?\"");
			if (Func0955()) {
				if (var000C > 0x0001) {
					DUCIO->set_npc_id(var000C - 0x0002);
				}
				return var0005;
			}
			if (var0011 == 0x0001) {
				say("\"'Tis poor form to argue once thou hast agreed on a price!\"");
			}
			if (var0011 == 0x0002) {
				say("\"What of our bargain? I had expected better of thee...\"");
			}
			if (var0011 == 0x0003) {
				say("\"Leave immediately! Thou dost not treat a Master so in Moonshade!\"");
				abort;
			}
			if (0x001F < (var000C + 0x000A)) {
				DUCIO->set_npc_id(0x001F);
			} else {
				DUCIO->set_npc_id(var000C + 0x000A);
			}
			return 0x0000;
		}
		if (var0008 == 0x0001) {
			if (var000E == 0x0005) {
				say("\"I said that ",
					var0005,
					" was my final offer. Dost thou accept?\"");
				if (var000C < 0x001C) {
					DUCIO->set_npc_id(var000C + 0x0004);
				}
				if (Func0955()) {
					return var0005;
				}
				var0009 = 0x0000;
			} else {
				say("\"",
					var0005,
					" guilders is my final offer.\"");
				if (var000C < 0x001E) {
					DUCIO->set_npc_id(var000C + 0x0002);
				}
			}
		} else {
			if (var000E == 0x0002) {
				if (var0011 == 0x0001) {
					say("\"Thou art a worthy opponent, ",
						var0002,
						". How does ",
						var0005,
						" guilders sound?\"");
				}
				if (var0011 == 0x0002) {
					say("\"",
						var0004,
						", I like thine honest face. How does ",
						var0005,
						" guilders sound to thee?\"");
				}
				if (var0011 == 0x0003) {
					say("\"My price is ",
						var0005,
						" guilders, ",
						var0002,
						". Dost thou accept?\"");
				}
			}
			if (var000E == 0x0003) {
				if (var0011 == 0x0001) {
					say("\"I am not sure. Wouldst thou pay ",
						var0005,
						" guilders?\"");
				}
				if (var0011 == 0x0002) {
					say("\"Not likely... ",
						var0005,
						" guilders?\"");
				}
				if (var0011 == 0x0003) {
					say("\"I have so little raw material... Perhaps ",
						var0005,
						" guilders?\"");
				}
			}
			if (var000E == 0x0004) {
				if (var0011 == 0x0001) {
					say("\"",
						var0005,
						" guilders is as low as I can go.\"");
					say("\"What dost thou say to this?\"");
				}
				if (var0011 == 0x0002) {
					say("\"I cannot accept less than ",
						var0005,
						" guilders. Thou must understand my position.\"");
				}
				if (var0011 == 0x0003) {
					say("\"",
						var0005,
						" guilders. I am not a charity.\"");
				}
			}
			if (var000E == 0x0005) {
				var0005 = var0010;
				if (var0011 == 0x0001) {
					say("\"My previous price stands, at ",
						var0005,
						" guilders. I will not have it said that Master Ducio is so easily taken!\"");
				}
				if (var0011 == 0x0002) {
					say("\"",
						var0005,
						" guilders, and no less! I have to feed that worthless Topo somehow!\"");
				}
				if (var0011 == 0x0003) {
					say("\"I would rather become a Ranger than accept such an offer!\"");
					say("\"",
						var0005,
						" guilders is as low as I will go!\"");
				}
				if (var000C < 0x001F) {
					DUCIO->set_npc_id(var000C + 0x0001);
				}
			}
		}
	}
	return 0;
}

extern var Func0955 0x955 ();
extern var Func09B3 0x9B3 (var var0000);

void Func0829 0x829 () {
	var var0000;

	if (DUPRE->get_cont_items(SHAPE_ANY, QUALITY_ANY, FRAME_ANY)) {
		say("\"I am carrying many items, some of which may be of use to thee. Wouldst thou care to have these back?\"");
		if (Func0955()) {
			say("\"Here they are.\"");
			gflags[DUPRE_HAS_BELONGINGS] = false;
			var0000 = Func09B3(DUPRE);
			if (var0000[0x0001] != 0x0000) {
				say("\"Thy friends will have to help carry these things.\"");
			}
			if (var0000[0x0002] > 0x0000) {
				var0000 = var0000[0x0002];
				if (var0000 > 0x0001) {
					say("\"Since thou canst not carry these remaining ",
						var0000,
						" items, I will place them at thy feet.\"");
				} else {
					say("\"Since thou dost not have enough room for this last item, I will place it at thy feet.\"");
				}
			}
		} else {
			gflags[DUPRE_HAS_BELONGINGS] = true;
			say("\"If thou changest thy mind, thou hast but to return and ask again.\"");
		}
	}
}

extern var Func0957 0x957 (var var0000);
extern var Func082B 0x82B (var var0000, var var0001);
extern var Func096F 0x96F (var var0000, var var0001, var var0002);
extern var Func0955 0x955 ();

void Func082A 0x82A () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;
	var var0008;
	var var0009;
	var var000A;
	var var000B;
	var var000C;
	var var000D;

	UI_push_answers();
	var0000 = true;
	var0001 = 0x0284;
	say("\"I can only accept gold coins. I hope that is acceptable with thee.\"");
	while (var0000) {
		say("\"In which circle art thou interested?\"");
		var0002 = Func0957(["nothing", "Fifth", "Sixth", "Seventh", "Eighth", "Ninth"]);
		var0002 -= 0x0001;
		if (var0002 == 0x0000) {
			break;
		}
		if (var0002 == 0x0001) {
			var0003 = ["nothing", "Mass Sleep"];
			var0004 = [SPELL_NONE, SPELL_MASS_SLEEP];
			var0005 = [0x0000, 0x00FA];
			var0006 = [0x0000, 0x0082];
		} else if (var0002 == 0x0002) {
			var0003 = ["nothing", "Create Ammunition"];
			var0004 = [SPELL_NONE, SPELL_CREATE_AMMO];
			var0005 = [0x0000, 0x012C];
			var0006 = [0x0000, 0x00B4];
		} else if (var0002 == 0x0003) {
			var0003 = ["nothing", "Vibrate"];
			var0004 = [SPELL_NONE, SPELL_VIBRATE];
			var0005 = [0x0000, 0x015E];
			var0006 = [0x0000, 0x00FA];
		} else if (var0002 == 0x0004) {
			var0003 = ["nothing", "Invoke Serpent", "Serpent Bond"];
			var0004 = [SPELL_NONE, SPELL_INVOKE_SNOW_SERPENT, SPELL_SERPENT_BOND];
			var0005 = [0x0000, 0x017C, 0x01C2];
			var0006 = [0x0000, 0x00A0, 0x0113];
		} else if (var0002 == 0x0005) {
			var0003 = ["nothing", "Imbalance"];
			var0004 = [SPELL_NONE, SPELL_IMBALANCE];
			var0005 = [0x0000, 0x0320];
			var0006 = [0x0000, 0x0320];
		}
		say("\"What spell dost thou wish to buy?\"");
		var0007 = Func0957(var0003);
		if (var0007 == 0x0001) {
			say("\"So be it...\"");
		} else {
			var0008 = var0004[var0007];
			var0009 = var0005[var0007];
			var000A = var0006[var0007];
			var000B = var0003[var0007];
			say("\"I will sell thee ",
				var000B,
				" for ",
				var0009,
				" gold. Dost thou accept?\"");
			var000C = Func082B(var0009, var000A);
			var000D = 0x0000;
			if (var000C > 0x0000) {
				var000D = Func096F(var0008, var0001, var000C);
			}
			if (var000D == 0x0001) {
				say("\"'Tis thine!\"");
			} else if (var000D == 0x0002) {
				say("\"Ask me again when thou dost have a spellbook!\"");
				var0000 = false;
				break;
			} else if (var000D == 0x0003) {
				say("\"Thou dost not have enough gold to buy that spell!\"");
			} else if (var000D == 0x0004) {
				say("\"Thou dost already have that spell!\"");
			}
		}
		say("\"Wouldst thou care for another spell?\"");
		var0000 = Func0955();
	}
	UI_pop_answers();
}

extern var Func0954 0x954 ();
extern var Func0956 0x956 (var var0000);
extern var Func0999 0x999 (var var0000, var var0001, var var0002, var var0003, var var0004, var var0005, var var0006);
extern var Func0955 0x955 ();

var Func082B 0x82B (var var0000, var var0001) {
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;
	var var0008;
	var var0009;
	var var000A;
	var var000B;
	var var000C;
	var var000D;
	var var000E;
	var var000F;

	var0002 = var0000;
	var0003 = (var0001 / 0x0003) * 0x0002;
	var0004 = Func0954();
	var0005 = 0x000F - (0x03F7->get_npc_id() / 0x0002);
	var0006 = 0x0000;
	var0007 = 0x0001;
	var0008 = 0x0000;
	var0009 = 0x0002;
	var000A = 0x03F7->get_npc_id();
	while (var0007) {
		var000B = Func0956(["yes", "no", "haggle"]);
		if (var000B == "no") {
			return 0x0000;
		}
		if (var000B == "yes") {
			var000C = 0x0000;
		} else {
			var000D = Func0999(var0002, var0001, var0009, var0003, var0008, var0005, var0006);
			var0008 += 0x0001;
			var0006 = var000D[0x0004];
			var000C = var000D[0x0003];
			var000E = var0002;
			var0002 = var000D[0x0002];
			var0003 = var000D[0x0001];
		}
		var000F = UI_get_random(0x0003);
		if (var000C < 0x0002) {
			if (var0002 < (var0001 + ((var0000 - var0001) / 0x0004))) {
				if (var000F == 0x0001) {
					say("\"Normally I would never accept such an offer, but who do I have to train here? I hope this war ends soon...\"");
				}
				if (var000F == 0x0002) {
					say("\"I have no choice but to accept it at thy price. Assuredly, I have no other offers.\"");
				}
				if (var000F == 0x0003) {
					say("\"I will accept\tthine offer. But I shall deny it to my dying day... I have a reputation to uphold, thou knowest.\"");
				}
			} else if (var0002 < (var0001 + ((var0000 - var0001) / 0x0003))) {
				if (var000F == 0x0001) {
					say("\"Times are strange, ",
						var0004,
						". But thou hast the spell, and I have a bit more gold.\"");
				}
				if (var000F == 0x0002) {
					say("\"Thou dost bargain well, ",
						var0004,
						". I will accept this price.\"");
				}
				if (var000F == 0x0003) {
					say("\"I hope thou dost realize that thou art getting a bargain with this price.\"");
				}
			} else if (var0002 < (var0001 + ((var0000 - var0001) / 0x0002))) {
				if (var000F == 0x0001) {
					say("\"Only ",
						var0002,
						"??! All right, all right... I will accept this price.\"");
				}
				if (var000F == 0x0002) {
					say("\"A decent price.\"");
				}
				if (var000F == 0x0003) {
					say("\"How else shall I make money, eh? I will accept this price.\"");
				}
			} else {
				if (var000F == 0x0001) {
					say("\"I accept thine offer!\"");
				}
				if (var000F == 0x0002) {
					say("\"I accept thine offer. Thou hast a fine eye for a bargain!\"");
				}
				if (var000F == 0x0003) {
					say("\"Yes, a good price that is!\"");
				}
			}
			say("\"So, dost thou agree to a price of ",
				var0002,
				"?\"");
			if (Func0955() == true) {
				if (var000A > 0x0001) {
					0x03F7->set_npc_id(var000A - 0x0002);
				}
				return var0002;
			}
			if (var000F == 0x0001) {
				say("\"I am bored, 'tis true. But I do not take kindly to wasting my time!\"");
			}
			if (var000F == 0x0002) {
				say("\"Now thou hast taken all sport out of the deal!\"");
			}
			if (var000F == 0x0003) {
				say("\"Where are thy manners\"?!\"");
			}
			if (0x001F < (var000A + 0x000A)) {
				0x03F7->set_npc_id(0x001F);
			} else {
				0x03F7->set_npc_id(var000A + 0x000A);
			}
			return 0x0000;
		}
		if (var0006 == 0x0001) {
			if (var000C == 0x0005) {
				say("\"",
					var0002,
					" is my final offer. Dost thou want it at this price?\"");
				if (var000A < 0x001C) {
					0x03F7->set_npc_id(var000A + 0x0004);
				}
				if (Func0955() == true) {
					return var0002;
				}
				var0007 = 0x0000;
			} else {
				say("\"",
					var0002,
					".  I will go no lower.\"");
				if (var000A < 0x001E) {
					0x03F7->set_npc_id(var000A + 0x0002);
				}
			}
		} else {
			if (var000C == 0x0002) {
				if (var000F == 0x0001) {
					say("\"Thou dost barter well. How does ",
						var0002,
						" sound?\"");
				}
				if (var000F == 0x0002) {
					say("\"I see thou dost understand the value of this fine spell. How does ",
						var0002,
						" sound?\"");
				}
				if (var000F == 0x0003) {
					say("\"I shall make thee a deal. For thee only I offer it for ",
						var0002,
						".\"");
				}
			}
			if (var000C == 0x0003) {
				if (var000F == 0x0001) {
					say("\"Hmmm.... Wouldst thou pay ",
						var0002,
						"?\"");
				}
				if (var000F == 0x0002) {
					say("\"Thou dost drive a hard bargain. ",
						var0002,
						"?\"");
				}
				if (var000F == 0x0003) {
					say("\"What dost thou say to ",
						var0002,
						"?\"");
				}
			}
			if (var000C == 0x0004) {
				if (var000F == 0x0001) {
					say("\"Better I should fling my spells to the Chaos hordes! ",
						var0002,
						".\"");
				}
				if (var000F == 0x0002) {
					say("\"Thou dost mock my years of training with such an offer! I can go no lower than ",
						var0002,
						".\"");
				}
				if (var000F == 0x0003) {
					say("\"I am no fool! This fine spell is worth at least ",
						var0002,
						".\"");
				}
			}
			if (var000C == 0x0005) {
				var0002 = var000E;
				if (var000F == 0x0001) {
					say("\"My previous offer stands, at ",
						var0002,
						". This spell is not some paltry bauble that thou mayest find anywhere.\"");
				}
				if (var000F == 0x0002) {
					say("\"Do not be insulting! ",
						var0002,
						"!\"");
				}
				if (var000F == 0x0003) {
					say("\"My offer stands at ",
						var0002,
						". Thou art a stranger, after all. I know not what use thou wilt make of this.\"");
				}
				if (var000A < 0x001F) {
					0x03F7->set_npc_id(var000A + 0x0001);
				}
			}
		}
	}
	return 0;
}

extern var Func0954 0x954 ();
extern var Func0956 0x956 (var var0000);
extern var Func096E 0x96E (var var0000, var var0001, var var0002, var var0003, var var0004);
extern var Func095C 0x95C (var var0000, var var0001);
extern void Func0964 0x964 (var var0000, var var0001);
extern void Func0962 0x962 (var var0000, var var0001);

void Func082C 0x82C () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;

	var0000 = Func0954();
	var0001 = 0x0284;
	var0002 = [0x0002, 0x0006];
	var0003 = 0x0096;
	say("\"I charge 150 gold to train thee in the use of magic. Dost thou agree?\"");
	var0004 = Func0956(["Yes", "No"]);
	if (var0004 == "No") {
		say("\"Suit thyself... It is thy loss.\"");
		abort;
	}
	if (var0004 == "Yes") {
		var0005 = Func096E(var0002, var0001, var0003, AVATAR, 0x0002);
		if (var0005 == 0x0000) {
			say("\"Thou art not ready to learn yet!\"");
		}
		if (var0005 == 0x0001) {
			say("\"Thou dost not have 150 gold! Speak with me when thou dost have the money.\"");
			abort;
		}
		do {
			if (var0005 == 0x0002) {
				if (Func095C(AVATAR, MAX_MANA) < 30) {
					continue;
				}
				say("\"Thou dost already possess more skill than I could teach thee!\"");
			}
			if (!(var0005 == 0x0003)) {
				break;
			}
		} while (false)
		nobreak {
			say("\"Let me see how thou dost handle the reagents...");
			say("\"No, no! This is not chicken feed that thou dost handle!\"");
			say("\"All right, now speak the words of power...");
			say("\"Slowly, slowly! If thou dost mis-pronounce them, the spell will go awry and thou wilt have wasted the reagents.\"");
			say("\"Unleash the spell... NOW!\"");
			var0006 = AVATAR->get_object_position();
			UI_sprite_effect(ANIMATION_TELEPORT2, var0006[0x0001], var0006[0x0002], 0x0000, 0x0000, 0x0000, LOOP_ONCE);
			say("\"Thou hast potential but thou must pratice, or thou wilt be undone when haste is called for.\"");
			var0007 = UI_remove_party_items(var0003, var0001, QUALITY_ANY, FRAME_ANY, true);
			if (Func095C(AVATAR, MAX_MANA) < 30) {
				Func0964(AVATAR, 1);
			}
			if (Func095C(AVATAR, INTELLIGENCE) < 30) {
				Func0962(AVATAR, 1);
			}
		}
	}
}

extern var Func0956 0x956 (var var0000);
extern var Func0957 0x957 (var var0000);
extern var Func0955 0x955 ();
extern var Func096F 0x96F (var var0000, var var0001, var var0002);
extern var Func082E 0x82E (var var0000, var var0001);

void Func082D 0x82D () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;
	var var0008;
	var var0009;
	var var000A;
	var var000B;
	var var000C;
	var var000D;
	var var000E;
	var var000F;

	UI_push_answers();
	var0000 = true;
	say("\"With what coinage dost thou wish to pay?\"");
	var0001 = Func0956(["Guilders", "Gold Coins"]);
	if (var0001 == "Guilders") {
		var0002 = 0x03B8;
	}
	if (var0001 == "Gold Coins") {
		var0002 = 0x0284;
		var0003 = 0x0001;
	}
	while (var0000) {
		say("\"In which circle art thou interested?\"");
		var0004 = Func0957(["nothing", "First", "Second", "Third", "Fourth", "Fifth", "Sixth", "Seventh", "Eighth", "Ninth"]);
		var0004 -= 0x0001;
		if (var0004 == 0x0000) {
			break;
		}
		if (var0004 == 0x0001) {
			var0005 = ["nothing", "Create Food", "Great Douse", "Locate"];
			var0006 = [SPELL_NONE, SPELL_CREATE_FOOD, SPELL_GREAT_DOUSE, SPELL_LOCATE];
			var0007 = [0x0000, 0x0014, 0x0012, 0x001A];
			var0008 = [0x0000, 0x000C, 0x0009, 0x000D];
		} else if (var0004 == 0x0002) {
			var0005 = ["nothing", "False Coin"];
			var0006 = [SPELL_NONE, SPELL_FALSE_COIN];
			var0007 = [0x0000, 0x0050];
			var0008 = [0x0000, 0x0032];
		} else if (var0004 == 0x0003) {
			var0005 = ["nothing", "Paralyze", "Sleep"];
			var0006 = [SPELL_NONE, SPELL_PARALYZE, SPELL_SLEEP];
			var0007 = [0x0000, 0x0046, 0x003C];
			var0008 = [0x0000, 0x0023, 0x0022];
		} else if (var0004 == 0x0004) {
			var0005 = ["nothing", "Deter"];
			var0006 = [SPELL_NONE, SPELL_DETER];
			var0007 = [0x0000, 0x005A];
			var0008 = [0x0000, 0x0032];
		} else if (var0004 == 0x0005) {
			var0005 = ["nothing", "Mass Sleep", "Erstam's Surprise"];
			var0006 = [SPELL_NONE, SPELL_MASS_SLEEP, SPELL_ERSTAMS_SURPRISE];
			var0007 = [0x0000, 0x0091, 0x00A0];
			var0008 = [0x0000, 0x0050, 0x0064];
		} else if (var0004 == 0x0006) {
			var0005 = ["nothing", "Fire Ring"];
			var0006 = [SPELL_NONE, SPELL_FIRE_RING];
			var0007 = [0x0000, 0x00B4];
			var0008 = [0x0000, 0x006E];
		} else if (var0004 == 0x0007) {
			var0005 = ["nothing", "Vibrate"];
			var0006 = [SPELL_NONE, SPELL_VIBRATE];
			var0007 = [0x0000, 0x00DC];
			var0008 = [0x0000, 0x006E];
		} else if (var0004 == 0x0008) {
			var0005 = ["nothing", "Mind Blast", "Swordstrike"];
			var0006 = [SPELL_NONE, SPELL_MIND_BLAST, SPELL_SWORD_STRIKE];
			var0007 = [0x0000, 0x012C, 0x011D];
			var0008 = [0x0000, 0x00B9, 0x00A5];
		} else if (var0004 == 0x0009) {
			var0005 = ["nothing", "Death Vortex", "Mass Death", "Spiral Missiles"];
			var0006 = [SPELL_NONE, SPELL_DEATH_VORTEX, SPELL_MASS_DEATH, SPELL_SPIRAL_MISSILE];
			var0007 = [0x0000, 0x015E, 0x0190, 0x01A9];
			var0008 = [0x0000, 0x00DC, 0x00FA, 0x0104];
		}
		say("\"What spell dost thou wish to buy?\"");
		var0009 = Func0957(var0005);
		if (var0009 == 0x0001) {
			say("\"So be it...\"");
		} else {
			var000A = var0006[var0009];
			var000B = var0007[var0009] * var0003;
			var000C = var0008[var0009] * var0003;
			var000D = var0005[var0009];
			if (var0001 == "Guilders") {
				var000B = (var0007[var0009] * 0x0003) / 0x0002;
				var000C = (var0008[var0009] * 0x0003) / 0x0002;
			}
			if (var000B == var000C) {
				say("\"I will sell thee ",
					var000D,
					" for ",
					var000B,
					" ",
					var0001,
					". Dost thou accept?\"");
				var000E = 0x0000;
				if (Func0955() == true) {
					var000E = Func096F(var000A, var0002, var000B);
				}
			} else {
				say("\"I will sell thee ",
					var000D,
					" for ",
					var000B,
					" ",
					var0001,
					". Dost thou accept?\"");
				var000F = Func082E(var000B, var000C);
				var000E = 0x0000;
				if (var000F > 0x0000) {
					var000E = Func096F(var000A, var0002, var000F);
				}
			}
			if (var000E == 0x0001) {
				say("\"'Tis thine!\"");
			} else if (var000E == 0x0002) {
				say("\"Find thyself a spellbook before thou dost seek to buy from me again!\"");
				var0000 = false;
				break;
			} else if (var000E == 0x0003) {
				say("\"Thou dost not have enough ",
					var0001,
					" to buy that spell!\"");
			} else if (var000E == 0x0004) {
				say("\"If thou wilt look, thou wilt find thou dost already have that spell!\"");
			}
		}
		say("\"Wouldst thou care for another spell?\"");
		var0000 = Func0955();
	}
	UI_pop_answers();
}

extern var Func0956 0x956 (var var0000);
extern var Func0999 0x999 (var var0000, var var0001, var var0002, var var0003, var var0004, var var0005, var var0006);
extern var Func0955 0x955 ();

var Func082E 0x82E (var var0000, var var0001) {
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;
	var var0008;
	var var0009;
	var var000A;
	var var000B;
	var var000C;
	var var000D;
	var var000E;

	var0002 = var0000;
	var0003 = (var0001 / 0x0003) * 0x0002;
	var0004 = 0x000F - (ENSORCIO->get_npc_id() / 0x0002);
	var0005 = 0x0000;
	var0006 = 0x0001;
	var0007 = 0x0000;
	var0008 = 0x0002;
	var0009 = ENSORCIO->get_npc_id();
	while (var0006) {
		var000A = Func0956(["yes", "no", "haggle"]);
		if (var000A == "no") {
			return 0x0000;
		}
		if (var000A == "yes") {
			var000B = 0x0000;
		} else {
			var000C = Func0999(var0002, var0001, var0008, var0003, var0007, var0004, var0005);
			var0007 += 0x0001;
			var0005 = var000C[0x0004];
			var000B = var000C[0x0003];
			var000D = var0002;
			var0002 = var000C[0x0002];
			var0003 = var000C[0x0001];
		}
		var000E = UI_get_random(0x0003);
		if (var000B < 0x0002) {
			if (var0002 < (var0001 + ((var0000 - var0001) / 0x0004))) {
				if (var000E == 0x0001) {
					say("\"Thou dost drive a hard bargain, indeed. But I must accept in order to be able to continue drinking...\"");
				}
				if (var000E == 0x0002) {
					say("\"'Twill hurt, but I have no choice but to accept it at this price.\"");
				}
				if (var000E == 0x0003) {
					say("\"I must be a fool for doing this, but I will accept thine offer. Please, do not tell anyone about this...\"");
				}
			} else if (var0002 < (var0001 + ((var0000 - var0001) / 0x0003))) {
				if (var000E == 0x0001) {
					say("\"One must have money to drink, eh? I will accept this price.\"");
				}
				if (var000E == 0x0002) {
					say("\"Thou dost bargain well, hero. I will accept this price.\"");
				}
				if (var000E == 0x0003) {
					say("\"Ummph. Thou art getting a good bargain with this price.\"");
				}
			} else if (var0002 < (var0001 + ((var0000 - var0001) / 0x0002))) {
				if (var000E == 0x0001) {
					say("\"Only ",
						var0002,
						"??! All right, all right... I will accept this price.\"");
				}
				if (var000E == 0x0002) {
					say("\"A decent price.\"");
				}
				if (var000E == 0x0003) {
					say("\"One must make a living, must one not? I will accept this price.\"");
				}
			} else {
				if (var000E == 0x0001) {
					say("\"I accept thine offer!\"");
				}
				if (var000E == 0x0002) {
					say("\"I accept thine offer. And did I say how much of a pleasure it is doing business with thee?\"");
				}
				if (var000E == 0x0003) {
					say("\"Yes, a good price that is!\"");
				}
			}
			say("\"So, have we agreed on the price of ",
				var0002,
				"?\"");
			if (Func0955() == true) {
				if (var0009 > 0x0001) {
					ENSORCIO->set_npc_id(var0009 - 0x0002);
				}
				return var0002;
			}
			if (var000E == 0x0001) {
				say("\"Thou didst do this for jest?!\"");
			}
			if (var000E == 0x0002) {
				say("\"I did not enjoy this waste of my time!\"");
			}
			if (var000E == 0x0003) {
				say("\"Do not expect me to be so courteous to thee next time!\"");
			}
			if (0x001F < (var0009 + 0x000A)) {
				ENSORCIO->set_npc_id(0x001F);
			} else {
				ENSORCIO->set_npc_id(var0009 + 0x000A);
			}
			return 0x0000;
		}
		if (var0005 == 0x0001) {
			if (var000B == 0x0005) {
				say("\"I said that ",
					var0002,
					" is my final offer. Dost thou want it at this price?\"");
				if (var0009 < 0x001C) {
					ENSORCIO->set_npc_id(var0009 + 0x0004);
				}
				if (Func0955() == true) {
					return var0002;
				}
				var0006 = 0x0000;
			} else {
				say("\"",
					var0002,
					" is my final offer.  I will go no lower.\"");
				if (var0009 < 0x001E) {
					ENSORCIO->set_npc_id(var0009 + 0x0002);
				}
			}
		} else {
			if (var000B == 0x0002) {
				if (var000E == 0x0001) {
					say("\"Ahhh, I see thou hast a fine understanding of bartering. How does ",
						var0002,
						" sound?\"");
				}
				if (var000E == 0x0002) {
					say("\"I see thou dost understand the value of this fine spell. How does ",
						var0002,
						" sound?\"");
				}
				if (var000E == 0x0003) {
					say("\"What a pleasure it is to deal with thee. I offer thee ",
						var0002,
						".\"");
				}
			}
			if (var000B == 0x0003) {
				if (var000E == 0x0001) {
					say("\"Hmmm.... Wouldst thou pay ",
						var0002,
						"?\"");
				}
				if (var000E == 0x0002) {
					say("\"Thou dost drive a hard bargain. ",
						var0002,
						"?\"");
				}
				if (var000E == 0x0003) {
					say("\"I must make a living, thou knowest. What dost thou say to ",
						var0002,
						"?\"");
				}
			}
			if (var000B == 0x0004) {
				if (var000E == 0x0001) {
					say("\"I spit upon thy pittance! Does ",
						var0002,
						" better please thy miserly nature?\"");
				}
				if (var000E == 0x0002) {
					say("\"I worked for more years than thou hast lived to acquire this knowledge! I can go no lower than ",
						var0002,
						".\"");
				}
				if (var000E == 0x0003) {
					say("\"Dost thou take me for a fool? This fine spell is worth at least ",
						var0002,
						".\"");
				}
			}
			if (var000B == 0x0005) {
				var0002 = var000D;
				if (var000E == 0x0001) {
					say("\"Thou must not be serious about this... My previous offer stands, at ",
						var0002,
						".\"");
				}
				if (var000E == 0x0002) {
					say("\"I will not be insulted! I can go no lower than ",
						var0002,
						".\"");
				}
				if (var000E == 0x0003) {
					say("\"Dog! I could not even afford a decent glass of ale for what thou hast offered! I will not lower my prices for such a fiend as thou. My offer stands at ",
						var0002,
						".\"");
				}
				if (var0009 < 0x001F) {
					ENSORCIO->set_npc_id(var0009 + 0x0001);
				}
			}
		}
	}
	return 0;
}

void Func082F 0x82F () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;

	var0000 = [0x03B4, 0x03B8, 0x03B7, 0x0284, 0x0285, 0x0286, 0x02F8];
	for (var0003 in var0000 with var0001 to var0002) {
		var0004 = AVATAR->find_nearby(var0003, 0x0014, MASK_NONE);
		if (var0004) {
			var0005 = var0004->set_last_created();
			var0006 = AVATAR->get_npc_object();
			var0005 = var0006->give_last_created();
		}
	}
}

extern var Func0953 0x953 ();

void Func0830 0x830 () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;

	if ((UI_get_random(0x0003) == 0x0001) && SERV_06->npc_nearby()) {
		AUTOMATON_FACE->show_npc_face1(0x0000);
		var0000 = ["MageLord, the documents are ready for thy signature.", "The sorceress Frigidazzi hath arrived, honor.", "Thou art needed in the treasury, MageLord.", "It is time for thine appointment, MageLord.", "MageLord, thou art needed to handle a tax matter.", "Thou art urgently needed, MageLord."];
		var0001 = var0000[UI_get_random(UI_get_array_size(var0000))];
		say("\"",
			var0001,
			"\"");
		0x0000->set_conversation_slot();
		var0001 = UI_get_random(0x0003);
		if (var0001 == 0x0001) {
			var0002 = Func0953();
			say("\"Then I must go immediately. Please excuse me, ",
				var0002,
				".\"");
			var0003 = FILBERCIO->get_object_position();
			UI_sprite_effect(ANIMATION_TELEPORT, var0003[0x0001], var0003[0x0002], 0x0000, 0x0000, 0x0000, LOOP_ONCE);
			FILBERCIO->move_object([0x05F4, 0x078F, 0x0000]);
			var0003 = SERV_06->get_object_position();
			UI_sprite_effect(ANIMATION_TELEPORT, var0003[0x0001], var0003[0x0002], 0x0000, 0x0000, 0x0000, LOOP_ONCE);
			SERV_06->move_object([0x05F6, 0x078F, 0x0000]);
			abort;
		}
		if (var0001 == 0x0002) {
			say("\"Surely that can wait! ",
				var0002,
				", as thou canst see, the strain of ruling this great city hath left me little more than skin and bones...\"");
		}
		if (var0001 > 0x0002) {
			say("\"In a moment, automaton.\"");
		}
	}
}

var Func0831 0x831 (var var0000, var var0001) {
	var var0002;
	var var0003;
	var var0004;

	var0002 = var0000;
	var0003 = 0x0000;
	var0004 = 0x0000;
	var0003 = var0000[0x0001] - var0001[0x0001];
	if (var0003 < 0x0000) {
		var0003 *= -1;
	}
	var0004 = var0000[0x0002] - var0001[0x0002];
	if (var0003 < 0x0000) {
		var0003 *= -1;
	}
	if ((var0003 < 0x0002) && (var0004 < 0x0002)) {
		return 0x0000;
	}
	var0003 = 0x0000;
	var0004 = 0x0000;
	if (var0001[0x0001] < var0000[0x0001]) {
		var0003 = UI_die_roll(-2,  0);
	}
	if (var0001[0x0001] == var0000[0x0001]) {
		var0003 = UI_die_roll(-1,  1);
	}
	if (var0001[0x0001] > var0000[0x0001]) {
		var0003 = UI_die_roll( 0,  2);
	}
	if (var0001[0x0002] < var0000[0x0002]) {
		var0004 = UI_die_roll(-2,  0);
	}
	if (var0001[0x0002] == var0000[0x0002]) {
		var0004 = UI_die_roll(-1,  1);
	}
	if (var0001[0x0002] > var0000[0x0002]) {
		var0004 = UI_die_roll( 0,  2);
	}
	var0000[0x0001] += var0003;
	var0000[0x0002] += var0004;
	if (var0000[0x0003] > 0x0000) {
		var0002 = var0000;
		var0002[0x0003] -= 0x0001;
		if ((!UI_is_not_blocked(var0000, 0x037F, 0x0001)) && UI_is_not_blocked(var0002, 0x037F, 0x0001)) {
			var0000[0x0003] -= 0x0001;
		}
	}
	var0002 = var0000;
	var0002[0x0003] += 0x0001;
	if ((!UI_is_not_blocked(var0000, 0x037F, 0x0001)) && UI_is_not_blocked(var0002, 0x037F, 0x0001)) {
		var0000[0x0003] += 0x0001;
	}
	return var0000;
}

var Func0832 0x832 (var var0000) {
	if ((var0000 == 0x0000) || (var0000 == 0x0001)) {
		return 0x0000;
	}
	if ((var0000 == 0x0002) || (var0000 == 0x0003)) {
		return -1;
	}
	if ((var0000 == 0x0004) || (var0000 == 0x0005)) {
		return -2;
	}
	if ((var0000 == 0x0006) || (var0000 == 0x0007)) {
		return -3;
	}
	if ((var0000 == 0x0008) || (var0000 == 0x0009)) {
		return -5;
	}
	if ((var0000 == 0x000A) || (var0000 == 0x000B)) {
		return -6;
	}
	if ((var0000 == 0x000C) || (var0000 == 0x000D)) {
		return -7;
	}
	if ((var0000 == 0x000E) || (var0000 == 0x000F)) {
		return -9;
	}
	return 0;
}

extern var Func0920 0x920 ();

void Func0833 0x833 (var var0000) {
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;
	var var0008;
	var var0009;
	var var000A;

	var0001 = FLICKEN->find_nearby(0x03B5, 0x0014, MASK_NONE);
	if (var0000 == 0x0001) {
		if (var0001) {
			var0002 = var0001->get_object_position();
			FLICKEN->si_path_run_usecode(var0002, PATH_SUCCESS, FLICKEN->get_npc_object(), Func0450, true);
		}
	}
	if (var0000 == 0x000A) {
		FLICKEN->set_schedule_type(WAIT);
		var0003 = UI_find_nearby_avatar(0x010F) & UI_find_nearby_avatar(0x0110);
		var0004 = false;
		for (var0007 in var0003 with var0005 to var0006) {
			var0008 = Func0920();
			var0008 = script var0001 {
				frame 1;
				repeat 6 {
					next frame cycle;
				};
			};
			var0004 = true;
		}
		var0008 = script FLICKEN {
			face west;
			continue;
			repeat 4 {
				actor frame bowing;
				actor frame standing;
			};
		};
		var0008 = script var0003 after 20 ticks {
			nohalt;
			call Func0450;
		};
	}
	if (var0000 == 0x0002) {
		FLICKEN->run_schedule();
		AVATAR->clear_item_flag(DONT_MOVE);
		var0009 = FLICKEN->find_nearby(0x010F, 0x0014, MASK_NONE);
		if (var0009) {
			if (var0009->npc_nearby()) {
				var0008 = script var0009 after 20 ticks {
					nohalt;
					call Func0450;
				};
			} else {
				var000A = var0009->get_object_position();
				var0008 = var0009->set_last_created();
				if (var0008) {
					var000A[0x0003] = 0x0000;
					var0008 = UI_update_last_created(var000A);
				}
			}
		}
	}
}

extern var Func0957 0x957 (var var0000);
extern var Func0955 0x955 ();

void Func0834 0x834 () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;
	var var0008;

	say("\"As thou hast aided me in mine experiments, I shall teach thee spells free of charge.\"");
	UI_push_answers();
	var0000 = true;
	while (var0000) {
		say("\"In which circle of magic art thou interested?\"");
		var0001 = Func0957(["nothing", "First", "Second", "Third", "Fourth", "Fifth", "Sixth", "Seventh", "Eighth", "Ninth"]);
		var0001 -= 0x0001;
		if (var0001 == 0x0000) {
			break;
		}
		if (var0001 == 0x0001) {
			var0002 = ["nothing", "Detect Trap", "Create Food"];
			var0003 = [SPELL_NONE, SPELL_DETECT_TRAP, SPELL_CREATE_FOOD];
		} else if (var0001 == 0x0002) {
			var0002 = ["nothing", "Cold Blast", "Mass Cure"];
			var0003 = [SPELL_NONE, SPELL_COLD_BLAST, SPELL_MASS_CURE];
		} else if (var0001 == 0x0003) {
			var0002 = ["nothing", "Enchant Missiles"];
			var0003 = [SPELL_NONE, SPELL_ENCHANT_MISSILES];
		} else if (var0001 == 0x0004) {
			var0002 = ["nothing", "Unlock Magic"];
			var0003 = [SPELL_NONE, SPELL_UNLOCK_MAGIC];
		} else if (var0001 == 0x0005) {
			var0002 = ["nothing", "Conjure", "Great Heal"];
			var0003 = [SPELL_NONE, SPELL_CONJURE, SPELL_GREAT_HEAL];
		} else if (var0001 == 0x0006) {
			var0002 = ["nothing", "Fire Field"];
			var0003 = [SPELL_NONE, SPELL_FIRE_FIELD];
		} else if (var0001 == 0x0007) {
			var0002 = ["nothing", "Restoration"];
			var0003 = [SPELL_NONE, SPELL_RESTORATION];
		} else if (var0001 == 0x0008) {
			var0002 = ["nothing", "Delayed Blast"];
			var0003 = [SPELL_NONE, SPELL_DELAYED_BLAST];
		} else if (var0001 == 0x0009) {
			var0002 = ["nothing", "Spiral Missiles", "Stop Storm"];
			var0003 = [SPELL_NONE, SPELL_SPIRAL_MISSILE, SPELL_STOP_STORM];
		}
		say("\"What spell dost thou wish to learn?\"");
		var0004 = Func0957(var0002);
		if (var0004 == 0x0001) {
			say("\"As thou dost wish...\"");
		} else {
			var0005 = var0003[var0004];
			var0006 = var0002[var0004];
			var0007 = PARTY->find_object(0x02F9, QUALITY_ANY, FRAME_ANY);
			if (var0007) {
				if (UI_add_spell(var0005, 0x0000, var0007)) {
					var0008 = 0x0001;
				} else {
					var0008 = 0x0003;
				}
			} else {
				var0008 = 0x0002;
			}
			if (var0008 == 0x0001) {
				say("\"The spell ",
					var0006,
					" is thine.\"");
			} else if (var0008 == 0x0002) {
				say("\"Thou dost not have a spellbook! Return to me when thou dost have one.\"");
				var0000 = false;
				break;
			} else if (var0008 == 0x0003) {
				say("\"I believe thou dost already have that spell.\"");
			}
		}
		say("\"Perhaps thou wouldst care to learn another spell?\"");
		var0000 = Func0955();
	}
	UI_pop_answers();
}

extern var Func0955 0x955 ();
extern var Func09B3 0x9B3 (var var0000);

void Func0835 0x835 () {
	var var0000;

	if (GWENNO->get_cont_items(SHAPE_ANY, QUALITY_ANY, FRAME_ANY)) {
		say("\"I have many items in my possession which may aid thee in thy journeys. Wouldst thou like them?\"");
		if (Func0955()) {
			say("\"Here they are.\"");
			gflags[GWENNO_HAS_BELONGINGS] = false;
			var0000 = Func09B3(GWENNO);
			if (var0000[0x0001] != 0x0000) {
				say("\"Thy companions will have to help thee with this burden.\"");
			}
			if (var0000[0x0002] > 0x0000) {
				var0000 = var0000[0x0002];
				if (var0000 > 0x0001) {
					say("\"Since thou canst not carry these remaining ",
						var0000,
						" items, I will place them at thy feet.\"");
				} else {
					say("\"Since thou dost not have enough room for this last item, I will place it at thy feet.\"");
				}
			}
		} else {
			gflags[GWENNO_HAS_BELONGINGS] = true;
			say("\"If thou changest thy mind, thou hast but to return and ask.\"");
		}
	}
}

extern var Func0953 0x953 ();
extern var Func0955 0x955 ();
extern var Func098E 0x98E ();
extern var Func0957 0x957 (var var0000);
extern var Func095C 0x95C (var var0000, var var0001);
extern void Func095E 0x95E (var var0000, var var0001, var var0002);

void Func0836 0x836 () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;
	var var0008;
	var var0009;
	var var000A;
	var var000B;
	var var000C;
	var var000D;
	var var000E;
	var var000F;
	var var0010;
	var var0011;
	var var0012;
	var var0013;

	var0000 = Func0953();
	var0001 = 0x03B7;
	var0002 = PARTY->count_objects(var0001, QUALITY_ANY, FRAME_ANY);
	var0003 = false;
	var0004 = false;
	var0005 = true;
	if (!gflags[WILL_FIND_CANTRA]) {
		say("\"I charge 30 monetari, and no less, to perform mine healing. Is this acceptable?\"");
		if (Func0955()) {
			if (var0002 < 0x001E) {
				say("\"Thou dost not have the monetari to pay me!\"");
				abort;
			}
			say("\"Whom dost thou wish to heal?\"");
			while (var0005) {
labelFunc0836_0055:
				var0006 = 0x001E;
				if (var0003 == true) {
					var0006 = 0x0000;
				}
				var0007 = Func098E();
				var0007 = 0x0000 & var0007;
				var0008 = ["nobody"];
				for (var000B in var0007 with var0009 to var000A) {
					if (!(var000B == 0x0000)) {
						var0008 &= var000B->get_npc_name();
					}
				}
				var000C = Func0957(var0008);
				var000C = var0007[var000C];
				if (var000C == 0x0000) {
					break;
				}
				var000D = var000C->get_npc_number();
				var000E = var000C->get_item_flag(POISONED);
				var000F = Func095C(var000C, STRENGTH);
				var0010 = Func095C(var000C, HEALTH);
				var0011 = var000C->get_npc_name();
				if (var000F > var0010) {
					var0012 = var000F - var0010;
					Func095E(var000D, HEALTH, var0012);
					var0013 = UI_remove_party_items(var0006, var0001, QUALITY_ANY, FRAME_ANY, true);
					var0004 = true;
					say("\"The bodily wounds have been healed.\"");
				} else if (var000E == false) {
					if (var000D == AVATAR) {
						say("\"Thou seemest quite healthy!\"");
					} else {
						say("\"",
							var0011,
							" is already healthy!\"");
					}
				} else if (var000D == AVATAR) {
					if (gflags[POISONED_BY_LYDIA] && (!gflags[CURED_LYDIA_POISON])) {
						say("\"Before I can cure this affliction, thou must needs bring me five Varo leaves from Delphynia, the horticulturist in Fawn!\"");
						break;
					}
					say("\"Thou art poisoned! Fortunately, the poison can easily be removed from thy body.\"");
				} else {
					say("\"",
						var0011,
						" is poisoned! At least it is a simple venom to cure.\"");
				}
				if ((var000D == AVATAR) && ((gflags[POISONED_BY_LYDIA] == true) && (gflags[CURED_LYDIA_POISON] == false))) {
					say("\"I have healed thy body of the ravages of the poison, but the effects shall keep occurring until thou art dead. Thou must bring me five Varo leaves from Delphynia, the horticulturist in Fawn, before I can permanently cure thee of this affliction!\"");
					break;
				}
				if (var000E == true) {
					if (var0004 == false) {
						var0013 = UI_remove_party_items(var0006, var0001, QUALITY_ANY, FRAME_ANY, true);
					}
					var000C->clear_item_flag(POISONED);
					say("\"The poisoning hath been healed.\"");
				}
			}
		} else {
			say("\"Some other time, then.\"");
		}
	} else {
		say("\"As thou hast aided me so shall I help thee, ",
			var0000,
			". I will perform mine healing free of charge.\"");
		say("\"Whom dost thou wish to heal?\"");
		var0003 = true;
		// I see no way other than this
		goto labelFunc0836_0055;
	}
}

extern var Func0954 0x954 ();
extern var Func0957 0x957 (var var0000);
extern var Func0955 0x955 ();
extern var Func0838 0x838 (var var0000, var var0001);
extern var Func0943 0x943 (var var0000, var var0001, var var0002, var var0003, var var0004, var var0005, var var0006, var var0007);
extern var Func0992 0x992 (var var0000, var var0001, var var0002, var var0003);

void Func0837 0x837 () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;
	var var0008;
	var var0009;
	var var000A;
	var var000B;
	var var000C;
	var var000D;
	var var000E;
	var var000F;
	var var0010;
	var var0011;
	var var0012;
	var var0013;
	var var0014;

	var0000 = Func0954();
	UI_push_answers();
	var0001 = true;
	var0002 = ["nothing", "garlic", "ginseng", "onion", "apple", "carrot", "banana", "grapes"];
	var0003 = [0x0000, 0x034A, 0x034A, 0x0179, 0x0179, 0x0179, 0x0179, 0x0179];
	var0004 = [FRAME_ANY, 0x0004, 0x0005, 0x0016, 0x0010, 0x0012, 0x0011, 0x0013];
	var0005 = [0x0000, 0x0008, 0x0009, 0x0001, 0x0006, 0x0002, 0x0006, 0x0002];
	var0006 = [0x0000, 0x0004, 0x0005, 0x0001, 0x0003, 0x0002, 0x0003, 0x0002];
	var0007 = 0x03B7;
	var0008 = [0x0000, 0x0003, 0x0002, 0x0001, 0x0003, 0x0001, 0x0002, 0x0001];
	var0009 = [0x0000, 0x0001, 0x0001, 0x0001, 0x0001, 0x0001, 0x0001, 0x0001];
	if (UI_is_pc_female()) {
		var000A = "Milady";
	} else {
		var000A = "Milord";
	}
	while (var0001) {
		var000B = Func0957(var0002);
		if (var000B == 0x0001) {
			var000C = UI_die_roll(0x0001, 0x0003);
			if (var000C == 0x0001) {
				var000D = "Perhaps later,";
			}
			if (var000C == 0x0002) {
				var000D = "Another time, then,";
			}
			if (var000C == 0x0003) {
				var000D = "Come again,";
			}
			say("\"",
				var000D,
				" ",
				var0000,
				".\"");
			var0001 = false;
			continue;
		}
		var000E = var0005[var000B];
		var000F = 0x0000;
		var0010 = UI_die_roll(0x0001, 0x0004);
		if (var0010 == 0x0001) {
			var0011 = "Dost thou accept?";
		}
		if (var0010 == 0x0002) {
			var0011 = "Wilt thou pay my price?";
		}
		if (var0010 == 0x0003) {
			var0011 = "Dost thou agree?";
		}
		if (var0010 == 0x0004) {
			var0011 = "Is the price acceptable?";
		}
		if (var000B == 0x0002) {
			say("\"I can sell thee three cloves for ",
				var000E,
				" monetari.\"");
			say(var0011,
				"\"");
			var0012 = "cloves of garlic, in bunches of three,";
		}
		if (var000B == 0x0003) {
			say("\"",
				var000E,
				" monetari is what I ask for two bunches of ginseng roots.\"");
			say("\"",
				var0011,
				"\"");
			var0012 = "ginseng roots, in bunches of two,";
		}
		if (var000B == 0x0004) {
			say("\"For an onion, I ask ",
				var000E,
				" monetari.\"");
			say("\"",
				var0011,
				"\"");
			var0012 = "onions";
		}
		if (var000B == 0x0005) {
			say("\"",
				var000E,
				" monetari will buy thee three apples, ",
				var0000,
				".\"");
			say(var0011,
				"\"");
			var0012 = "apples, in bunches of three,";
		}
		if (var000B == 0x0006) {
			say("\"My carrots are exceptionally good this season! ",
				var000E,
				" monetari is the price.\"");
			say("\"",
				var0011,
				"\"");
			var0012 = "carrots";
		}
		if (var000B == 0x0007) {
			say("\"",
				var000A,
				", thou shouldst try my bananas! I can sell thee two for ",
				var000E,
				" monetari.\"");
			say(var0011,
				"\"");
			var0012 = "bananas, in bunches of two,";
		}
		if (var000B == 0x0008) {
			say("\"I can sell thee one bunch of grapes for ",
				var000E,
				" monetari.\"");
			say(var0011,
				"\"");
			var0012 = "bunches of grapes";
		}
		if (var000E == var0006[var000B]) {
			if (Func0955()) {
				var0013 = var000E;
			} else {
				var0013 = 0x0000;
			}
		} else {
			var0013 = Func0838(var0005[var000B], var0006[var000B]);
		}
		if (var0013 > 0x0000) {
			if (var0009[var000B] == 0x0001) {
				say("\"How many ",
					var0012,
					" wouldst thou like?\"");
				var000F = Func0943(var0003[var000B], var0004[var000B], var0008[var000B], var0007, var0013, 0x000A, 0x0001, false);
			} else {
				var000F = Func0943(var0003[var000B], var0004[var000B], 0x0001, var0007, var0013, 0x0000, 0x0001, false);
			}
		}
		if (var000F == 0x0001) {
			say("\"",
				var000A,
				", I hope thou dost enjoy thy purchase!\"");
		} else if (var000F == 0x0002) {
			say("\"I believe that thine hands are full, ",
				var0000,
				"!\"");
		} else if (var000F == 0x0003) {
			var0014 = Func0992(0x0001, (("@But " + var0000) + ", we have not the monetari to purchase this.@"), 0x0000, false);
			if (var0014 != AVATAR) {
				HARNNA->show_npc_face0(0x0000);
				say("\"Then I am afraid thou canst not purchase any of my goods, ",
					var0000,
					".\"");
			} else {
				say("\"I am afraid thou dost not have enough to pay for this...\"");
			}
			if (0x001F < (HARNNA->get_npc_id() + 0x0006)) {
				HARNNA->set_npc_id(0x001F);
			} else {
				HARNNA->set_npc_id(HARNNA->get_npc_id() + 0x0006);
			}
			break;
		}
		say("\"Dost thou desire another purchase?\"");
		var0001 = Func0955();
	}
	UI_pop_answers();
}

extern var Func0954 0x954 ();
extern var Func0956 0x956 (var var0000);
extern var Func0999 0x999 (var var0000, var var0001, var var0002, var var0003, var var0004, var var0005, var var0006);
extern var Func0955 0x955 ();

var Func0838 0x838 (var var0000, var var0001) {
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;
	var var0008;
	var var0009;
	var var000A;
	var var000B;
	var var000C;
	var var000D;
	var var000E;
	var var000F;
	var var0010;

	var0002 = Func0954();
	if (UI_is_pc_female()) {
		var0003 = "Milady";
	} else {
		var0003 = "Milord";
	}
	var0004 = var0000;
	var0005 = (var0001 / 0x0003) * 0x0002;
	var0006 = 0x000F - (HARNNA->get_npc_id() / 0x0002);
	var0007 = 0x0000;
	var0008 = 0x0001;
	var0009 = 0x0000;
	var000A = 0x0002;
	var000B = HARNNA->get_npc_id();
	while (var0008) {
		var000C = Func0956(["yes", "no", "haggle"]);
		if (var000C == "no") {
			return 0x0000;
		}
		if (var000C == "yes") {
			var000D = 0x0000;
		} else {
			var000E = Func0999(var0004, var0001, var000A, var0005, var0009, var0006, var0007);
			var0009 += 0x0001;
			var0007 = var000E[0x0004];
			var000D = var000E[0x0003];
			var000F = var0004;
			var0004 = var000E[0x0002];
			var0005 = var000E[0x0001];
		}
		var0010 = UI_get_random(0x0003);
		if (var000D < 0x0002) {
			if (var0004 < (var0001 + ((var0000 - var0001) / 0x0004))) {
				if (var0010 == 0x0001) {
					say("\"Please do not tell anyone in town of this, ",
						var0002,
						"! Else I will no longer be able to make a living...\"");
				}
				if (var0010 == 0x0002) {
					say("\"",
						var0003,
						", thou hast the heart of a true trader...\"");
				}
				if (var0010 == 0x0003) {
					say("\"I must be losing my mind to agree to such a price!\"");
				}
			} else if (var0004 < (var0001 + ((var0000 - var0001) / 0x0003))) {
				if (var0010 == 0x0001) {
					say("\"Thou canst see that my prices are fair...\"");
				}
				if (var0010 == 0x0002) {
					say("\"",
						var0003,
						", thou hast charmed me, I am certain! I would never offer prices this low!\"");
				}
				if (var0010 == 0x0003) {
					say("\"Who would have thought I would lose my mind so young! To accept such a price...\"");
				}
			} else if (var0004 < (var0001 + ((var0000 - var0001) / 0x0002))) {
				if (var0010 == 0x0001) {
					say("\"A good deal, if I do say so myself.\"");
				}
				if (var0010 == 0x0002) {
					say("\"Thou art a worthy customer, ",
						var0002,
						".\"");
				}
				if (var0010 == 0x0003) {
					say("\"'Tis a pleasure doing business with thee, ",
						var0002,
						".\"");
				}
			} else {
				if (var0010 == 0x0001) {
					say("\"Thou hast made me a happy woman, ",
						var0002,
						"!\"");
				}
				if (var0010 == 0x0002) {
					say("\"I appreciate thy business, ",
						var0002,
						".");
				}
				if (var0010 == 0x0003) {
					say("\"I hate charging such prices, but times are hard...\"");
				}
			}
			say("\"Wilt thou agree to a price of ",
				var0004,
				" monetari, ",
				var0002,
				"?\"");
			if (Func0955()) {
				if (var000B > 0x0001) {
					HARNNA->set_npc_id(var000B - 0x0002);
				}
				return var0004;
			}
			if (var0010 == 0x0001) {
				say("\"But what of our agreement?\"");
			}
			if (var0010 == 0x0002) {
				say("\"Why hast thou changed thy mind?\"");
			}
			if (var0010 == 0x0003) {
				say("\"I thought thou wert in need of my produce!\"");
			}
			if (0x001F < (var000B + 0x000A)) {
				HARNNA->set_npc_id(0x001F);
			} else {
				HARNNA->set_npc_id(var000B + 0x000A);
			}
			return 0x0000;
		}
		if (var0007 == 0x0001) {
			if (var000D == 0x0005) {
				say("\"Wert thou not listening, ",
					var0002,
					", I said that ",
					var0004,
					" was my final offer. Dost thou accept?\"");
				if (var000B < 0x001C) {
					HARNNA->set_npc_id(var000B + 0x0004);
				}
				if (Func0955()) {
					return var0004;
				}
				var0008 = 0x0000;
			} else {
				say("\"Very well. ",
					var0004,
					" monetari is my final offer.\"");
				if (var000B < 0x001E) {
					HARNNA->set_npc_id(var000B + 0x0002);
				}
			}
		} else {
			if (var000D == 0x0002) {
				if (var0010 == 0x0001) {
					say("\"Thou art a challenge to deal with... How does ",
						var0004,
						" monetari sound?\"");
				}
				if (var0010 == 0x0002) {
					say("\"So, have we agreed on ",
						var0004,
						" monetari?\"");
				}
				if (var0010 == 0x0003) {
					say("\"I offer thee ",
						var0004,
						" monetari. Dost thou accept?\"");
				}
			}
			if (var000D == 0x0003) {
				if (var0010 == 0x0001) {
					say("\"I must make a living... Wouldst thou pay ",
						var0004,
						" monetari?\"");
				}
				if (var0010 == 0x0002) {
					say("\"Let me consider... ",
						var0004,
						" monetari?\"");
				}
				if (var0010 == 0x0003) {
					say("\"",
						var0004,
						" monetari, then? I must show some profit or become a beggar.\"");
				}
			}
			if (var000D == 0x0004) {
				if (var0010 == 0x0001) {
					say("\"I cannot accept less than ",
						var0004,
						" monetari!\"");
					say("\"Wilt thou agree?\"");
				}
				if (var0010 == 0x0002) {
					say("\"Surely thou canst see that I can go no lower than ",
						var0004,
						" monetari. It is difficult to garden because of the Goblin raids...\"");
				}
				if (var0010 == 0x0003) {
					say("\"My produce is worth no less than ",
						var0004,
						" monetari.\"");
				}
			}
			if (var000D == 0x0005) {
				var0004 = var000F;
				if (var0010 == 0x0001) {
					say("\"My previous price stands, at ",
						var0004,
						" monetari. I am at risk from the Goblins while gardening!\"");
				}
				if (var0010 == 0x0002) {
					say("\"",
						var0004,
						" monetari, and no less! Thou shalt find no one with a better price, I will warrant.\"");
				}
				if (var0010 == 0x0003) {
					say("\"",
						var0004,
						" monetari is where I stand. I must pay someone to stand watch while I garden.\"");
				}
				if (var000B < 0x001F) {
					HARNNA->set_npc_id(var000B + 0x0001);
				}
			}
		}
	}
	return 0;
}

extern var Func0944 0x944 (var var0000, var var0001, var var0002);

var Func0839 0x839 () {
	var var0000;

	var0000 = HAWK->get_object_position();
	return Func0944(var0000, [0x04F1, 0x08B0, 0x0000], [0x051E, 0x08CE, 0x0000]);
}

extern var Func09A0 0x9A0 (var var0000, var var0001);

void Func083A 0x83A (var var0000) {
	var var0001;
	var var0002;
	var var0003;

	var0001 = Func09A0(0x0002, 0x0001);
	HAWK->show_npc_face0(0x0000);
	say("\"I'd advise ye ta hold fast an' keep a weather eye on that there horizon! We'll be runnin' afore the wind hard enough to splinter the mast as it is.\"");
	UI_remove_npc_face0();
	AVATAR->set_item_flag(UNKNOWN_FLAG_17);
	var0000->set_item_flag(ACTIVE_BARGE);
	if (!var0000->in_usecode()) {
		var0002 = new script {
			finish;
			repeat 5 {
				step east;
				nop;
			};
			call Func07E4;
		};
		var0003 = var0000->run_script(var0002);
		var0003 = var0001->set_item_quality(0x0000);
	}
}

extern var Func0992 0x992 (var var0000, var var0001, var var0002, var var0003);
extern void Func097F 0x97F (var var0000, var var0001, var var0002);
extern var Func09A0 0x9A0 (var var0000, var var0001);

void Func083B 0x83B (var var0000) {
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;
	var var0008;
	var var0009;

	if (var0000[0x0001] == -1) {
		var0001 = script item {
			nohalt;
			say "@Woof woof! Rrruff!@";
		};
		set_schedule_type(DANCE);
		var0002 = Func0992(0x0001, 0x0000, 0x0000, false);
		var0002->clear_item_say();
		Func097F(var0002, "@We must be close!@", 0x0004);
		var0001 = script Func09A0(0x0005, 0x0001) after 20 ticks {
			nohalt;
			call Func036A;
		};
		abort;
	}
	var0001 = script item {
		nohalt;
		say "@Woof woof! Woof!@";
	};
	var0003 = get_object_position();
	var0004 = var0000[0x0002] - var0003[0x0002];
	var0005 = var0000[0x0001] - var0003[0x0001];
	var0006 = var0004;
	if (var0004 < 0x0000) {
		var0006 *= -1;
	}
	var0007 = var0005;
	if (var0005 < 0x0000) {
		var0007 *= -1;
	}
	if (var0007 > var0006) {
		if (var0005 > 0x0000) {
			var0008 = 0x0002;
			var0009 = "east";
			var0003[0x0001] += 0x0014;
		} else {
			var0008 = 0x0006;
			var0009 = "west";
			var0003[0x0001] -= 0x0014;
		}
	} else if (var0004 > 0x0000) {
		var0008 = 0x0004;
		var0009 = "south";
		var0003[0x0002] += 0x0014;
	} else {
		var0008 = 0x0000;
		var0009 = "north";
		var0003[0x0002] -= 0x0014;
	}
	var0001 = script item {
		nohalt;
		face var0008;
	};
	var0001 = Func0992(0x0001, (("@The dog points " + var0009) + "!@"), (("@" + var0009) + "!@"), true);
	si_path_run_usecode(var0003, SI_PATH_SUCCESS, item, Func036A, true);
	abort;
}

extern var Func0955 0x955 ();
extern var Func09B3 0x9B3 (var var0000);

void Func083C 0x83C () {
	var var0000;

	if (IOLO->get_cont_items(SHAPE_ANY, QUALITY_ANY, FRAME_ANY)) {
		say("\"I am carrying many items, some of which may be of use to thee. Wouldst thou care to have these before I depart?\"");
		if (Func0955()) {
			say("\"Here they are.\"");
			gflags[IOLO_HAS_BELONGINGS] = false;
			var0000 = Func09B3(IOLO);
			if (var0000[0x0001] != 0x0000) {
				say("\"Thy friends will have to help carry these things.\"");
			}
			if (var0000[0x0002] > 0x0000) {
				var0000 = var0000[0x0002];
				if (var0000 > 0x0001) {
					say("\"Since thou canst not carry these remaining ",
						var0000,
						" items, I will place them at thy feet.\"");
				} else {
					say("\"Since thou dost not have enough room for this last item, I will place it at thy feet.\"");
				}
			}
		} else {
			gflags[IOLO_HAS_BELONGINGS] = true;
			say("\"If thou changest thy mind, thou hast but to return and ask again.\"");
		}
	}
}

extern var Func0954 0x954 ();
extern var Func0957 0x957 (var var0000);
extern var Func0955 0x955 ();
extern var Func083F 0x83F (var var0000, var var0001);
extern var Func0943 0x943 (var var0000, var var0001, var var0002, var var0003, var var0004, var var0005, var var0006, var var0007);
extern var Func0992 0x992 (var var0000, var var0001, var var0002, var var0003);

void Func083D 0x83D () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;
	var var0008;
	var var0009;
	var var000A;
	var var000B;
	var var000C;
	var var000D;
	var var000E;
	var var000F;
	var var0010;

	var0000 = Func0954();
	UI_push_answers();
	var0001 = true;
	var0002 = ["nothing", "mutton", "ham", "rolls", "seabass", "tarpin"];
	var0003 = [0x0000, 0x0179, 0x0179, 0x0179, 0x0179, 0x0179];
	var0004 = [FRAME_ANY, 0x0008, 0x000B, 0x0002, 0x000C, 0x000D];
	var0005 = [0x0000, 0x002A, 0x0032, 0x0008, 0x0023, 0x0028];
	var0006 = [0x0000, 0x0016, 0x001C, 0x0006, 0x0014, 0x0018];
	var0007 = 0x03B4;
	var0008 = [0x0000, 0x0001, 0x0001, 0x0001, 0x0001, 0x0001, 0x0001, 0x0001];
	var0009 = [0x0000, 0x0001, 0x0001, 0x0001, 0x0001, 0x0001, 0x0001, 0x0001];
	say("\"What dost thou care for, ",
		var0000,
		"?\"");
	while (var0001) {
		var000A = Func0957(var0002);
		if (var000A == 0x0001) {
			say("\"Let me know if thou dost change thy mind, ",
				var0000,
				".\"");
			var0001 = false;
			continue;
		}
		var000B = var0005[var000A];
		var000C = 0x0000;
		var000D = UI_die_roll(0x0001, 0x0006);
		if (var000D == 0x0001) {
			var000E = "Dost thou accept?";
		}
		if (var000D == 0x0002) {
			var000E = "Wilt thou pay this price?";
		}
		if (var000D == 0x0003) {
			var000E = "Dost thou find the price agreeable?";
		}
		if (var000D == 0x0004) {
			var000E = "Dost thou agree?";
		}
		if (var000D == 0x0005) {
			var000E = "Is the price acceptable?";
		}
		if (var000D == 0x0006) {
			var000E = "Is the price acceptable?";
		}
		if (var000A == 0x0002) {
			say("\"We do not see much meat here in Fawn, so the price is a bit steep. I sell mutton for ",
				var000B,
				" filari.\"");
			say("\"",
				var000E,
				"\"");
			var000F = "joints of mutton";
		}
		if (var000A == 0x0003) {
			say("\"The ham dinner costs ",
				var000B,
				" filari. 'Tis not too bad...\"");
			say("\"",
				var000E,
				"\"");
			var000F = "ham dinners";
		}
		if (var000A == 0x0004) {
			say("\"The rolls are hard, but nourishing. They cost ",
				var000B,
				" filari.\"");
			say("\"",
				var000E,
				"\"");
			var000F = "rolls";
		}
		if (var000A == 0x0005) {
			say("\"Caught fresh every day, ",
				var0000,
				". ",
				var000B,
				" filari is my price.\"");
			say("\"",
				var000E,
				"\"");
			var000F = "seabass";
		}
		if (var000A == 0x0006) {
			say("\"The tarpin costs ",
				var000B,
				" filari. 'Tis caught from the shore now that the fleet is gone.\"");
			say("\"",
				var000E,
				"\"");
			var000F = "tarpin";
		}
		if (var000B == var0006[var000A]) {
			if (Func0955()) {
				var0010 = var000B;
			} else {
				var0010 = 0x0000;
			}
		} else {
			var0010 = Func083F(var0005[var000A], var0006[var000A]);
		}
		if (var0010 > 0x0000) {
			if (var0009[var000A] == 0x0001) {
				say("\"How many ",
					var000F,
					" wouldst thou like?\"");
				var000A = Func0943(var0003[var000A], var0004[var000A], 0x0001, var0007, var0010, 0x0014, 0x0001, false);
			} else {
				var000A = Func0943(var0003[var000A], var0004[var000A], var0008[var000A], var0007, var0010, 0x0000, 0x0001, false);
			}
		}
		if (var000A == 0x0001) {
			say("\"Eat hearty, ",
				var0000,
				"!\"");
		} else if (var000A == 0x0002) {
			say("\"Thine hands are full, ",
				var0000,
				"!\"");
		} else if (var000A == 0x0003) {
			var000D = Func0992(0x0001, (("@But " + var0000) + ", we haven't the filari to pay for this.@"), 0x0000, false);
			if (var000D != AVATAR) {
				JENDON->show_npc_face0(0x0000);
				say("\"I do not allow beggars in here!\"");
				abort;
			}
			say("\"If thou canst not pay, then thou canst leave!\"");
			abort;
			// Dead code
			if (0x001F < (JENDON->get_npc_id() + 0x0006)) {
				JENDON->set_npc_id(0x001F);
			} else {
				JENDON->set_npc_id(JENDON->get_npc_id() + 0x0006);
			}
			break;
		}
		say("\"Wouldst thou care for more?\"");
		var0001 = Func0955();
	}
	UI_pop_answers();
}

extern var Func0954 0x954 ();
extern var Func0953 0x953 ();
extern var Func0957 0x957 (var var0000);
extern var Func0955 0x955 ();
extern var Func083F 0x83F (var var0000, var var0001);
extern var Func0943 0x943 (var var0000, var var0001, var var0002, var var0003, var var0004, var var0005, var var0006, var var0007);
extern var Func0992 0x992 (var var0000, var var0001, var var0002, var var0003);

void Func083E 0x83E () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;
	var var0008;
	var var0009;
	var var000A;
	var var000B;
	var var000C;
	var var000D;
	var var000E;
	var var000F;

	var0000 = Func0954();
	var0001 = Func0953();
	UI_push_answers();
	var0002 = true;
	var0003 = ["nothing", "ale"];
	var0004 = [0x0000, 0x0268];
	var0005 = [FRAME_ANY, 0x0009];
	var0006 = [0x0000, 0x000C];
	var0007 = [0x0000, 0x0006];
	var0008 = 0x03B4;
	var0009 = [0x0000, 0x0001];
	var000A = [0x0000, 0x0001];
	say("\"What can I get ye?\"");
	while (var0002) {
		var000B = Func0957(var0003);
		if (var000B == 0x0001) {
			say("\"Then why'dst thou ask in the first place?\"");
			var0002 = false;
			continue;
		}
		var000C = var0006[var000B];
		var000D = 0x0000;
		if (var000B == 0x0002) {
			say("\"That'll be ",
				var000C,
				" filari for a bottle of fine Fawn ale. Wouldst thou care for any?\"");
		}
		if (var000C == var0007[var000B]) {
			if (Func0955()) {
				var000E = var000C;
			} else {
				var000E = 0x0000;
			}
		} else {
			var000E = Func083F(var0006[var000B], var0007[var000B]);
		}
		if (var000E > 0x0000) {
			if (var000A[var000B] == 0x0001) {
				say("\"How many bottles wouldst thou like?\"");
				var000D = Func0943(var0004[var000B], var0005[var000B], 0x0001, var0008, var000E, 0x0014, 0x0001, false);
			} else {
				var000D = Func0943(var0004[var000B], var0005[var000B], var0009[var000B], var0008, var000E, 0x0000, 0x0001, false);
			}
		}
		if (var000D == 0x0001) {
			say("\"Cheers, ",
				var0000,
				"!\"");
		} else if (var000D == 0x0002) {
			say("\"Thou shouldst not travel so heavily burdened -- I do not think that thou canst bear the bottles that thou desirest!\"");
		} else if (var000D == 0x0003) {
			var000F = Func0992(0x0001, (("@But " + var0000) + ", we do not have the filari to pay for this.@"), 0x0000, false);
			if (var000F != AVATAR) {
				JENDON->show_npc_face0(0x0000);
				say("\"I don't allow no beggars in here!\"");
				abort;
			}
			say("\"If thou canst not pay, then thou canst leave!\"");
			abort;
			// Dead code
			if (0x001F < (JENDON->get_npc_id() + 0x0006)) {
				JENDON->set_npc_id(0x001F);
			} else {
				JENDON->set_npc_id(JENDON->get_npc_id() + 0x0006);
			}
		}
		say("\"Wouldst thou care for more?\"");
		var0002 = Func0955();
	}
	UI_pop_answers();
}

extern var Func0954 0x954 ();
extern var Func0956 0x956 (var var0000);
extern var Func0999 0x999 (var var0000, var var0001, var var0002, var var0003, var var0004, var var0005, var var0006);
extern var Func0955 0x955 ();
extern var Func0942 0x942 (var var0000);

var Func083F 0x83F (var var0000, var var0001) {
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;
	var var0008;
	var var0009;
	var var000A;
	var var000B;
	var var000C;
	var var000D;
	var var000E;
	var var000F;

	var0002 = Func0954();
	var0003 = var0000;
	var0004 = (var0001 / 0x0003) * 0x0002;
	var0005 = 0x000F - (JENDON->get_npc_id() / 0x0002);
	var0006 = 0x0000;
	var0007 = 0x0001;
	var0008 = 0x0000;
	var0009 = 0x0002;
	var000A = JENDON->get_npc_id();
	while (var0007) {
		var000B = Func0956(["yes", "no", "haggle"]);
		if (var000B == "no") {
			return 0x0000;
		}
		if (var000B == "yes") {
			var000C = 0x0000;
		} else {
			var000D = Func0999(var0003, var0001, var0009, var0004, var0008, var0005, var0006);
			var0008 += 0x0001;
			var0006 = var000D[0x0004];
			var000C = var000D[0x0003];
			var000E = var0003;
			var0003 = var000D[0x0002];
			var0004 = var000D[0x0001];
		}
		var000F = UI_get_random(0x0003);
		if (var000C < 0x0002) {
			if (var0003 < (var0001 + ((var0000 - var0001) / 0x0004))) {
				if (var000F == 0x0001) {
					say("\"Shh! Don't let Olon hear what price thou didst pay. He would never let me hear the last of it!\"");
				}
				if (var000F == 0x0002) {
					say("\"Thou dost drive a hard bargain, ",
						var0002,
						". I should sell the inn an' become one o' them monks!\"");
				}
				if (var000F == 0x0003) {
					say("\"Out-bargained by a stranger! What be next, a goblin?\"");
				}
			} else if (var0003 < (var0001 + ((var0000 - var0001) / 0x0003))) {
				if (var000F == 0x0001) {
					say("\"Fairest prices thou wilt find hereabouts...\"");
				}
				if (var000F == 0x0002) {
					say("\"I must be going slack-witted, ta offer thee a price like this!\"");
				}
				if (var000F == 0x0003) {
					say("\"Art thou sure thou art not a wizard... Ta talk me into a price such as this?\"");
				}
			} else if (var0003 < (var0001 + ((var0000 - var0001) / 0x0002))) {
				if (var000F == 0x0001) {
					say("\"Not bad... Not bad at all.\"");
				}
				if (var000F == 0x0002) {
					say("\"If this is the best I can get, I had best take it.\"");
				}
				if (var000F == 0x0003) {
					say("\"Remember me, if thou dost need anythin' more, ",
						var0002,
						".\"");
				}
			} else {
				if (var000F == 0x0001) {
					say("\"Not a bad piece of business, ",
						var0002,
						".\"");
				}
				if (var000F == 0x0002) {
					say("\"Thou art tough... like an ol' sailor!\"");
				}
				if (var000F == 0x0003) {
					say("\"I wish things were better, ",
						var0002,
						". Thou wouldst find me prices fairer, ta be sure.\"");
				}
			}
			say("\"Dost thou agree ta a price of ",
				var0003,
				" filari, ",
				var0002,
				"?\"");
			if (Func0955()) {
				if (var000A > 0x0001) {
					JENDON->set_npc_id(var000A - 0x0002);
				}
				return var0003;
			}
			if (var000F == 0x0001) {
				say("\"Hast thou forgotten already? We had an agreement!\"");
			}
			if (var000F == 0x0002) {
				say("\"Then be gone with thee -- I have no time ta play games.\"");
			}
			if (var000F == 0x0003) {
				say("\"Dost thou think me a fool, ta argue with me only ta change thy mind? I shall spread the word about thee in this town, wait and see!\"");
			}
			if (0x001F < (var000A + 0x000A)) {
				JENDON->set_npc_id(0x001F);
			} else {
				JENDON->set_npc_id(var000A + 0x000A);
			}
			return 0x0000;
		}
		if (var0006 == 0x0001) {
			if (var000C == 0x0005) {
				say("\"Look, ",
					var0002,
					", I said that ",
					var0003,
					" was my final offer. Dost thou accept?\"");
				if (var000A < 0x001C) {
					JENDON->set_npc_id(var000A + 0x0004);
				}
				if (Func0955()) {
					return var0003;
				}
				var0007 = 0x0000;
			} else {
				say("\"Well... ",
					var0003,
					" filari is my final offer.\"");
				if (var000A < 0x001E) {
					JENDON->set_npc_id(var000A + 0x0002);
				}
			}
		} else {
			if (var000C == 0x0002) {
				if (var000F == 0x0001) {
					say("\"It pleases me ta do business with such a worthy soul. How does ",
						var0003,
						" filari sound?\"");
				}
				if (var000F == 0x0002) {
					say("\"May the Beauty bless thee, friend. So, have we agreed on ",
						var0003,
						" filari?\"");
				}
				if (var000F == 0x0003) {
					say("\"My price is ",
						var0003,
						" filari -- A price I would never offer strangers. Dost thou accept?\"");
				}
			}
			if (var000C == 0x0003) {
				if (var000F == 0x0001) {
					say("\"I have few customers left these days... ",
						var0003,
						" filari?\"");
				}
				if (var000F == 0x0002) {
					say("\"Wouldst thou pay ",
						var0003,
						"?\"");
				}
				if (var000F == 0x0003) {
					say("\"Perhaps ",
						var0003,
						" filari? Thou wilt find no better...\"");
				}
			}
			if (var000C == 0x0004) {
				if (var000F == 0x0001) {
					say("\"I will take no less than ",
						var0003,
						". How doth that suit thee?\"");
				}
				if (var000F == 0x0002) {
					say("I have no supplies coming, with these storms. ",
						var0003,
						" filari, no less.\"");
				}
				if (var000F == 0x0003) {
					say("\"Sharper folks than thee have tried ta cheat me! ",
						var0003,
						" filari.\"");
				}
			}
			if (var000C == 0x0005) {
				var0003 = var000E;
				if (var000F == 0x0001) {
					say("\"I would rather be eaten by rats than accept such a pitiful offer. My previous price stands, at ",
						var0003,
						" filari.\"");
				}
				if (var000F == 0x0002) {
					say("\"What dost thou take me for? ",
						var0003,
						" filari, and no less!\"");
				}
				if (var000F == 0x0003) {
					say("\"Why, if I accepted such a price as this, I may as well sell the inn ta Olon!\"");
					if (Func0942(OLON)) {
						OLON->show_npc_face1(0x0000);
						say("\"Sounds good ta me!\"");
						UI_remove_npc_face1();
						JENDON->show_npc_face0(0x0000);
					}
					say("\"",
						var0003,
						" filari is where I stand.\"");
				}
				if (var000A < 0x001F) {
					JENDON->set_npc_id(var000A + 0x0001);
				}
			}
		}
	}
	return 0;
}

extern var Func0954 0x954 ();
extern var Func0953 0x953 ();
extern var Func0957 0x957 (var var0000);
extern var Func0955 0x955 ();
extern var Func0841 0x841 (var var0000, var var0001);
extern var Func0943 0x943 (var var0000, var var0001, var var0002, var var0003, var var0004, var var0005, var var0006, var var0007);
extern var Func0992 0x992 (var var0000, var var0001, var var0002, var var0003);

void Func0840 0x840 () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;
	var var0008;
	var var0009;
	var var000A;
	var var000B;
	var var000C;
	var var000D;
	var var000E;
	var var000F;
	var var0010;

	var0000 = Func0954();
	var0001 = Func0953();
	UI_push_answers();
	var0002 = true;
	var0003 = ["nothing", "wine", "ice wine", "vintage wine"];
	var0004 = [0x0000, 0x0268, 0x0268, 0x0268];
	var0005 = [FRAME_ANY, 0x0001, 0x0010, 0x0011];
	var0006 = [0x0000, 0x000F, 0x0019, 0x0032];
	var0007 = [0x0000, 0x0009, 0x000F, 0x001E];
	var0008 = 0x03B8;
	var0009 = [0x0000, 0x0001, 0x0001, 0x0001];
	var000A = [0x0000, 0x0001, 0x0001, 0x0001];
	say("\"What wouldst thou care to try, ",
		var0000,
		"?\"");
	while (var0002) {
		var000B = Func0957(var0003);
		if (var000B == 0x0001) {
			say("\"If thou art thirsty again, return, ",
				var0000,
				"!\"");
			var0002 = false;
			continue;
		}
		var000C = var0006[var000B];
		var000D = 0x0000;
		if (var000B == 0x0002) {
			say("\"Our wine is the finest in all of Serpent Isle! l can sell thee a bottle for ",
				var000C,
				" guilders.\"");
			say("\"Dost thou accept?\"");
			var000E = "wine bottles";
		}
		if (var000B == 0x0003) {
			say("\"The ice wine is special indeed! I will not tell thee the secret of how it is made, but be assured that it is most flavorful!\"");
			say("\"I charge ",
				var000C,
				" guilders for a bottle.\"");
			say("\"Dost thou agree?\"");
			var000E = "bottles of ice wine";
		}
		if (var000B == 0x0004) {
			say("\"The vintage stock hath been aged for over ten years, and is quite delicious. For ",
				var000C,
				" guilders, I can sell thee a bottle.\"");
			say("\"Is the price acceptable?\"");
			var000E = "bottles of vintage wine";
		}
		if (var000C == var0007[var000B]) {
			if (Func0955()) {
				var000F = var000C;
			} else {
				var000F = 0x0000;
			}
		} else {
			var000F = Func0841(var0006[var000B], var0007[var000B]);
		}
		if (var000F > 0x0000) {
			if (var000A[var000B] == 0x0001) {
				say("\"How many ",
					var000E,
					" wouldst thou like?\"");
				var000D = Func0943(var0004[var000B], var0005[var000B], 0x0001, var0008, var000F, 0x000A, 0x0001, false);
			} else {
				var000D = Func0943(var0004[var000B], var0005[var000B], var0009[var000B], var0008, var000F, 0x0000, 0x0001, false);
			}
		}
		if (var000D == 0x0001) {
			say("\"To thine health, ",
				var0000,
				"!\"");
		} else if (var000D == 0x0002) {
			say("\"Thou canst not carry thy purchase, ",
				var0000,
				"!\"");
		} else if (var000D == 0x0003) {
			var0010 = Func0992(0x0001, (("@But " + var0001) + ", we lack adequate funds!@"), 0x0000, false);
			if (var0010 != AVATAR) {
				JULIA->show_npc_face0(0x0000);
				say("\"Thou dost not have the guilders to buy that!\"");
			} else {
				say("\"Thou dost not have the guilders to buy that!\"");
			}
			if (0x001F < (JULIA->get_npc_id() + 0x0006)) {
				JULIA->set_npc_id(0x001F);
			} else {
				JULIA->set_npc_id(JULIA->get_npc_id() + 0x0006);
			}
		}
		say("\"Wouldst thou care for more?\"");
		var0002 = Func0955();
	}
	UI_pop_answers();
}

extern var Func0954 0x954 ();
extern var Func0956 0x956 (var var0000);
extern var Func0999 0x999 (var var0000, var var0001, var var0002, var var0003, var var0004, var var0005, var var0006);
extern var Func0955 0x955 ();

var Func0841 0x841 (var var0000, var var0001) {
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;
	var var0008;
	var var0009;
	var var000A;
	var var000B;
	var var000C;
	var var000D;
	var var000E;
	var var000F;
	var var0010;

	var0002 = Func0954();
	var0003 = UI_is_pc_female();
	var0004 = var0000;
	var0005 = (var0001 / 0x0003) * 0x0002;
	var0006 = 0x000F - (JULIA->get_npc_id() / 0x0002);
	var0007 = 0x0000;
	var0008 = 0x0001;
	var0009 = 0x0000;
	var000A = 0x0002;
	var000B = JULIA->get_npc_id();
	while (var0008) {
		var000C = Func0956(["yes", "no", "haggle"]);
		if (var000C == "no") {
			return 0x0000;
		}
		if (var000C == "yes") {
			var000D = 0x0000;
		} else {
			var000E = Func0999(var0004, var0001, var000A, var0005, var0009, var0006, var0007);
			var0009 += 0x0001;
			var0007 = var000E[0x0004];
			var000D = var000E[0x0003];
			var000F = var0004;
			var0004 = var000E[0x0002];
			var0005 = var000E[0x0001];
		}
		var0010 = UI_get_random(0x0003);
		if (var000D < 0x0002) {
			if (var0004 < (var0001 + ((var0000 - var0001) / 0x0004))) {
				if (var0010 == 0x0001) {
					say("\"If thou sayest a word about this price to anyone, I will deny it!\"");
				}
				if (var0010 == 0x0002) {
					say("\"Perhaps I should give this away in the streets, after agreeing to this price!\"");
				}
				if (var0010 == 0x0003) {
					say("\"Thou art certainly a fast talker. I will have to watch thee carefully...\"");
				}
			} else if (var0004 < (var0001 + ((var0000 - var0001) / 0x0003))) {
				if (var0010 == 0x0001) {
					say("\"A good price for such fine wine, eh?\"");
				}
				if (var0010 == 0x0002) {
					say("\"I am feeling generous today... Thou art lucky!\"");
				}
				if (var0010 == 0x0003) {
					say("\"I shall have to count my fingers after thou dost leave. Thou art a slick bargainer, indeed!\"");
				}
			} else if (var0004 < (var0001 + ((var0000 - var0001) / 0x0002))) {
				if (var0010 == 0x0001) {
					say("\"Good price. Good wine.\"");
				}
				if (var0010 == 0x0002) {
					say("\"I shall have no profit today, it seems.\"");
				}
				if (var0010 == 0x0003) {
					say("\"Tell everyone thou dost meet about our wine, ",
						var0002,
						"... and about our fair prices!\"");
				}
			} else {
				if (var0010 == 0x0001) {
					say("\"A well-made bargain, ",
						var0002,
						".\"");
				}
				if (var0010 == 0x0002) {
					say("\"Enjoy thy stay here in Moonshade, ",
						var0002,
						". I am certain that I shall not have any trouble from thee.\"");
				}
				if (var0010 == 0x0003) {
					say("\"Our wine is in great demand during these hard times, ",
						var0002,
						". So our prices are higher than they once were.\"");
				}
			}
			say("\"Wilt thou agree to ",
				var0004,
				" guilders, ",
				var0002,
				"?\"");
			if (Func0955()) {
				if (var000B > 0x0001) {
					JULIA->set_npc_id(var000B - 0x0002);
				}
				return var0004;
			}
			if (var0010 == 0x0001) {
				say("\"Thou art a fine one! I thought we had an agreement.\"");
			}
			if (var0010 == 0x0002) {
				say("\"Thou art about to make me angry, ",
					var0002,
					". 'Tis a dangerous thing to break a deal...\"");
			}
			if (var0010 == 0x0003) {
				say("\"I am a busy woman, ",
					var0002,
					". I do not take it kindly when someone wastes my time. Thou hadst best walk carefully here in Moonshade from now on.\"");
				abort;
			}
			if (0x001F < (var000B + 0x000A)) {
				JULIA->set_npc_id(0x001F);
			} else {
				JULIA->set_npc_id(var000B + 0x000A);
			}
			return 0x0000;
		}
		if (var0007 == 0x0001) {
			if (var000D == 0x0005) {
				say("\"That ",
					var0004,
					" was my final offer. I have no more time to deal with thee. Dost thou accept?\"");
				if (var000B < 0x001C) {
					JULIA->set_npc_id(var000B + 0x0004);
				}
				if (Func0955()) {
					return var0004;
				}
				var0008 = 0x0000;
			} else {
				say("\"",
					var0004,
					" guilders... Or take thy business elsewhere.\"");
				if (var000B < 0x001E) {
					JULIA->set_npc_id(var000B + 0x0002);
				}
			}
		} else {
			if (var000D == 0x0002) {
				if (var0010 == 0x0001) {
					say("\"I like thee... How does ",
						var0004,
						" guilders sound?\"");
				}
				if (var0010 == 0x0002) {
					say("\"Thou art a fine sort. How about ",
						var0004,
						" guilders?\"");
				}
				if (var0010 == 0x0003) {
					say("\"I will make thee a special deal -- How does ",
						var0004,
						" guilders sound?\"");
				}
			}
			if (var000D == 0x0003) {
				if (var0010 == 0x0001) {
					say("\"Wilt thou consider ",
						var0004,
						" guilders? I must pay the MageLord, after all.\"");
				}
				if (var0010 == 0x0002) {
					say("\"",
						var0004,
						"? Any less and I shall have to face the Council.\"");
				}
				if (var0010 == 0x0003) {
					say("\"Perhaps ",
						var0004,
						" guilders? 'Tis not a great amount.\"");
				}
			}
			if (var000D == 0x0004) {
				if (var0010 == 0x0001) {
					say("\"",
						var0004,
						" guilders is as low as I can go. I dare not take any less, if I am to pay the taxes.\"");
				}
				if (var0010 == 0x0002) {
					say("\"This is the only magical wine thou wilt ever find, ",
						var0002,
						". Surely thou canst see that I can go no lower than ",
						var0004,
						" guilders.\"");
				}
				if (var0010 == 0x0003) {
					say("\"Even the MageLord pays ",
						var0004,
						" guilders. I can go no lower than that.\"");
				}
			}
			if (var000D == 0x0005) {
				var0004 = var000F;
				if (var0010 == 0x0001) {
					say("\"My previous price stands, at ",
						var0004,
						" guilders. I am no fool, ",
						var0002,
						"!\"");
				}
				if (var0010 == 0x0002) {
					say("\"",
						var0004,
						" guilders, and no less! Thou wilt not take advantage of my good nature so!\"");
				}
				if (var0010 == 0x0003) {
					say("\"I have a reputation to consider... ",
						var0004,
						" guilders is where I stand.\"");
				}
				if (var000B < 0x001F) {
					JULIA->set_npc_id(var000B + 0x0001);
				}
			}
		}
	}
	return 0;
}

extern var Func0954 0x954 ();
extern var Func0956 0x956 (var var0000);
extern var Func0957 0x957 (var var0000);
extern var Func0955 0x955 ();
extern var Func0844 0x844 (var var0000, var var0001);
extern var Func0943 0x943 (var var0000, var var0001, var var0002, var var0003, var var0004, var var0005, var var0006, var var0007);
extern var Func0992 0x992 (var var0000, var var0001, var var0002, var var0003);

void Func0842 0x842 () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;
	var var0008;
	var var0009;
	var var000A;
	var var000B;
	var var000C;
	var var000D;
	var var000E;
	var var000F;
	var var0010;
	var var0011;
	var var0012;
	var var0013;

	var0000 = Func0954();
	UI_push_answers();
	var0001 = true;
	if (UI_is_pc_female()) {
		var0002 = "Milady";
	} else {
		var0002 = "Milord";
	}
	while (var0001) {
		var0003 = Func0956(["nothing", "leather goods", "supplies"]);
		if (var0003 == "nothing") {
			say("\"Perhaps another time, ",
				var0000,
				".\"");
			break;
		}
		if (var0003 == "leather goods") {
			var0004 = ["nothing", "leather armour", "leather gloves", "leather boots", "leather helm", "leather leggings"];
			var0005 = [0x0000, 0x0239, 0x0243, 0x024B, 0x03EC, 0x023E];
			var0006 = [FRAME_ANY, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000];
			var0007 = [0x0000, 0x004B, 0x000F, 0x0019, 0x0014, 0x002D];
			var0008 = [0x0000, 0x0032, 0x0008, 0x000F, 0x000C, 0x0019];
			var0009 = 0x03B7;
			var000A = [0x0000, 0x0001, 0x0001, 0x0001, 0x0001, 0x0001];
			var000B = [0x0000, 0x0001, 0x0001, 0x0001, 0x0001, 0x0001];
		}
		if (var0003 == "supplies") {
			var0004 = ["nothing", "kidney belt", "backpack", "shovel", "torch", "bedroll", "pick", "jerky", "hard-tack"];
			var0005 = [0x0000, 0x0248, 0x0321, 0x0271, 0x0253, 0x0247, 0x0270, 0x0179, 0x0179];
			var0006 = [FRAME_ANY, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x000F, 0x0002];
			var0007 = [0x0000, 0x000C, 0x004B, 0x0028, 0x0008, 0x0032, 0x003C, 0x0006, 0x0004];
			var0008 = [0x0000, 0x0005, 0x002D, 0x0012, 0x0002, 0x001E, 0x0028, 0x0004, 0x0002];
			var0009 = 0x03B7;
			var000A = [0x0000, 0x0001, 0x0001, 0x0001, 0x0001, 0x0001, 0x0001, 0x0002, 0x0002];
			var000B = [0x0000, 0x0001, 0x0001, 0x0001, 0x0001, 0x0001, 0x0000, 0x0001, 0x0001];
		}
		var000C = Func0957(var0004);
		if (var000C != 0x0001) {
			var000D = var0007[var000C];
			var000E = 0x0000;
			var000F = UI_die_roll(0x0001, 0x0005);
			if (var000F == 0x0001) {
				var0010 = "Dost thou accept?";
			}
			if (var000F == 0x0002) {
				var0010 = "Dost thou find this price acceptable?";
			}
			if (var000F == 0x0003) {
				var0010 = "Dost thou find the price agreeable?";
			}
			if (var000F == 0x0004) {
				var0010 = var0002 + ", dost thou agree?";
			}
			if (var000F == 0x0005) {
				var0010 = var0002 + ", is the price acceptable?";
			}
			if (var0003 == "leather goods") {
				if (var000C == 0x0002) {
					say("\"That will be ",
						var000D,
						" monetari for the finest leather armour in town!\"");
					say(var0010,
						"\"");
					var0011 = "suits of leather armour";
				}
				if (var000C == 0x0003) {
					say("\"I sell my gloves for ",
						var000D,
						" monetari each.\"");
					say("\"",
						var0010,
						"\"");
					var0011 = "pairs of leather gloves";
				}
				if (var000C == 0x0004) {
					say("\"Thou wilt surely require boots if thou dost desire to adventure, ",
						var0000,
						". I will sell a pair to thee for the fair price of ",
						var000D,
						" monetari.\"");
					say("\"",
						var0010,
						"\"");
					var0011 = "pairs of leather boots";
				}
				if (var000C == 0x0005) {
					say("\"My leather helms are sturdy and will last thee for a long time, ",
						var0000,
						". I can sell thee a helm for ",
						var000D,
						" monetari.\"");
					say("\"",
						var0010,
						"\"");
					var0011 = "leather helms";
				}
				if (var000C == 0x0006) {
					say("\"Ah, if thou dost wish affordable protection for thy legs, then thou shouldst buy my leather leggings, ",
						var0000,
						"! I can sell thee a pair for only ",
						var000D,
						" monetari.\"");
					say("\"",
						var0010,
						"\"");
					var0011 = "pairs of leather leggings";
				}
			}
			if (var0003 == "supplies") {
				if (var000C == 0x0002) {
					say("\"",
						var000D,
						" monetari for the finest kidney belts found in Monitor is a small amount to pay!\"");
					say("\"",
						var0010,
						"\"");
					var0011 = "kidney belts";
				}
				if (var000C == 0x0003) {
					say("\"The backpacks I stock are made from the finest materials! I can sell one to thee for ",
						var000D,
						" monetari.\"");
					say("\"",
						var0010,
						"\"");
					var0011 = "backpacks";
				}
				if (var000C == 0x0004) {
					say("\"Ah, for the low price of ",
						var000D,
						" monetari, I can sell a fine shovel.\"");
					say("\"",
						var0010,
						"\"");
					var0011 = "shovels";
				}
				if (var000C == 0x0005) {
					say("\"",
						var000D,
						" monetari is a small price to pay for one of my torches.\"");
					say("\"",
						var0010,
						"\"");
					var0011 = "torches";
				}
				if (var000C == 0x0006) {
					say("\"Thou wilt sleep most comfortably on one of my bedrolls.\" ~\"I swear!\" *\"I will sell thee one for ",
						var000D,
						" monetari.\"");
					say("\"",
						var0010,
						"\"");
					var0011 = "bedrolls";
				}
				if (var000C == 0x0007) {
					say("\"I can sell thee a fine pick for ",
						var000D,
						" monetari that will not break even upon the hardest stone!\"");
					say("\"",
						var0010,
						"\"");
					var0011 = "picks";
				}
				if (var000C == 0x0008) {
					say("\"My jerky is well preserved and will last for many months, ",
						var0000,
						". ",
						var000D,
						" monetari is my price for two strips.\"");
					say("\"",
						var0010,
						"\"");
					var0011 = "strips of jerky, in bundles of two,";
				}
				if (var000C == 0x0009) {
					say("\"I can sell thee two rolls of hard-tack for ",
						var000D,
						" monetari.\"");
					say("\"",
						var0010,
						"\"");
					var0011 = "rolls, in bundles of two,";
				}
			}
			if (var000D == var0008[var000C]) {
				if (Func0955()) {
					var0012 = var000D;
				} else {
					var0012 = 0x0000;
				}
			} else {
				var0012 = Func0844(var0007[var000C], var0008[var000C]);
			}
			if (var0012 > 0x0000) {
				if (var000B[var000C] == 0x0001) {
					say("\"How many ",
						var0011,
						" wouldst thou like?\"");
					var000E = Func0943(var0005[var000C], var0006[var000C], var000A[var000C], var0009, var0012, 0x0005, 0x0001, false);
				} else {
					var000E = Func0943(var0005[var000C], var0006[var000C], 0x0001, var0009, var0012, 0x0000, 0x0001, false);
				}
			}
			if (var000E == 0x0001) {
				say("\"It hath been a pleasure, ",
					var0000,
					"! Enjoy thy purchase!\"");
			} else if (var000E == 0x0002) {
				say("\"",
					var0002,
					", thine hands are full!\"");
			} else if (var000E == 0x0003) {
				var0013 = Func0992(0x0001, (("@But " + var0000) + ", we haven't the coins to purchase this.@"), 0x0000, false);
				if (var0013 != AVATAR) {
					KRAYG->show_npc_face0(0x0000);
					say("\"If thou canst not pay, please leave!\"");
				} else {
					say("\"Thou dost not have enough monetari to purchase this...\"");
				}
				if (0x001F < (KRAYG->get_npc_id() + 0x0006)) {
					KRAYG->set_npc_id(0x001F);
				} else {
					KRAYG->set_npc_id(KRAYG->get_npc_id() + 0x0006);
				}
			}
		}
		say("\"Dost thou desire another purchase?\"");
		var0001 = Func0955();
	}
	UI_pop_answers();
}

extern var Func0954 0x954 ();
extern var Func0956 0x956 (var var0000);
extern var Func0955 0x955 ();
extern var Func099B 0x99B (var var0000, var var0001, var var0002, var var0003, var var0004, var var0005, var var0006);

void Func0843 0x843 () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;
	var var0008;
	var var0009;
	var var000A;
	var var000B;
	var var000C;
	var var000D;
	var var000E;
	var var000F;
	var var0010;
	var var0011;
	var var0012;
	var var0013;
	var var0014;
	var var0015;

	var0000 = Func0954();
	var0001 = "Milord";
	if (UI_is_pc_female()) {
		var0001 = "Milady";
	}
	UI_push_answers();
	var0002 = true;
	var0003 = 0x03B7;
	say("\"I will buy leather goods from thee, if thou dost have any.\"");
	while (var0002) {
		var0004 = PARTY->count_objects(0x0239, QUALITY_ANY, FRAME_ANY);
		var0005 = PARTY->count_objects(0x0243, QUALITY_ANY, 0x0000);
		var0006 = PARTY->count_objects(0x024B, QUALITY_ANY, 0x0000);
		var0007 = PARTY->count_objects(0x03EC, QUALITY_ANY, 0x0000);
		var0008 = PARTY->count_objects(0x023E, QUALITY_ANY, 0x0000);
		var0009 = ["nothing"];
		var000A = false;
		var000B = FRAME_ANY;
		if (var0004) {
			var0009 &= "leather armour";
			var000A = true;
		}
		if (var0005) {
			var0009 &= "leather gloves";
			var000A = true;
		}
		if (var0006) {
			var0009 &= "leather boots";
			var000A = true;
		}
		if (var0007) {
			var0009 &= "leather helm";
			var000A = true;
		}
		if (var0008) {
			var0009 &= "leather leggings";
			var000A = true;
		}
		if (var000A == true) {
			say("\"What dost thou care to sell, ",
				var0000,
				"?\"");
			var000C = Func0956(var0009);
			if (var000C == "nothing") {
				say("\"Perhaps later.\"");
				var0002 = false;
				continue;	// Could have been 'break'
			}
			var000D = UI_die_roll(0x0001, 0x0005);
			if (var000D == 0x0001) {
				var000E = "Take it or leave it!";
			}
			if (var000D == 0x0002) {
				var000E = "Wilt thou sell at my price?";
			}
			if (var000D == 0x0003) {
				var000E = "Dost thou find my price agreeable?";
			}
			if (var000D == 0x0004) {
				var000E = "What dost thou think?";
			}
			if (var000D == 0x0005) {
				var000E = var0001 + ", is the price acceptable?";
			}
			var000F = UI_die_roll(0x0001, 0x0005);
			if (var000F == 0x0001) {
				var0010 = "I am not certain...";
				var0011 = "Hmmm... they are certainly shoddy!";
			}
			if (var000F == 0x0002) {
				var0010 = "It doth have mold on it!";
				var0011 = "They are moldy! Where didst thou dig these up?!";
			}
			if (var000F == 0x0003) {
				var0010 = "'Tis falling apart!";
				var0011 = "Harrumph! They are falling to pieces!";
			}
			if (var000F == 0x0004) {
				var0010 = var0001 + (", is this what thou wishest to sell?" * "'Tis not in very good shape!");
				var0011 = var0001 + ", these goods are in horrible condition!";
			}
			if (var000F == 0x0005) {
				var0010 = "Didst thou take this from the body of a Goblin?";
				var0011 = "I would wager thou didst find these on dead Goblins?";
			}
			if (var000C == "leather armour") {
				do {
					var0012 = 0x0239;
					var0013 = 0x000F;
					if (var0004 > 0x0001) {
						say("\"How many suits of leather armour wouldst thou care to part with?\"");
						var0014 = UI_input_numeric_value(0x0000, var0004, 0x0001, 0x0000);
						if (var0014 != 0x0001) {
							var0013 = 0x000F * var0014;
							if (var0014 == 0x0000) {
								say("\"Perhaps another time, ",
									var0000,
									"...\"");
								goto labelFunc0843_05DB;
							}
							say("\"",
								var0011,
								"\"");
							say("\"For thee, ",
								var0000,
								", I can give ",
								var0013,
								" monetari for the ",
								var0014,
								" suits of leather armour.\"");
							say("\"",
								var000E,
								"\"");
							break;
						}
					}
				} while (false)
				nobreak {
					say("\"",
						var0010,
						"\"");
					say("\"Very well, I will buy thy leather armour from thee for ",
						var0013,
						" monetari.\"");
					say("\"",
						var000E,
						"\"");
					var0014 = 0x0001;
				}
			}
			if (var000C == "leather gloves") {
				do {
					var0012 = 0x0243;
					var0013 = 0x0002;
					if (var0005 > 0x0001) {
						say("\"How many pairs of leather gloves wouldst thou care to sell?\"");
						var0014 = UI_input_numeric_value(0x0000, var0005, 0x0001, 0x0000);
						if (var0014 != 0x0001) {
							var0013 = 0x0002 * var0014;
							if (var0014 == 0x0000) {
								say("\"Perhaps another time, ",
									var0000,
									"...\"");
								goto labelFunc0843_05DB;
							}
							say("\"",
								var0011,
								"\"");
							say("\"Hmmm... for thy ",
								var0014,
								" pairs of leather gloves I can offer thee ",
								var0013,
								" monetari.\"");
							say("\"",
								var000E,
								"\"");
							break;
						}
					}
				} while (false)
				nobreak {
					say("\"",
						var0010,
						"\"");
					say("\"I can pay thee ",
						var0013,
						" monetari for a pair of leather gloves.\"");
					say("\"",
						var000E,
						"\"");
					var0014 = 0x0001;
				}
			}
			if (var000C == "leather boots") {
				do {
					var0012 = 0x024B;
					var0013 = 0x0004;
					if (var0006 > 0x0001) {
						say("\"So, how many pairs of leather boots wouldst thou like to sell?\"");
						var0014 = UI_input_numeric_value(0x0000, var0006, 0x0001, 0x0000);
						if (var0014 != 0x0001) {
							var0013 = 0x0004 * var0014;
							if (var0014 == 0x0000) {
								say("\"Perhaps another time, ",
									var0000,
									"...\"");
								// I see no way other than this
								goto labelFunc0843_05DB;
							}
							say("\"",
								var0011,
								"\"");
							say("\"I can give ",
								var0013,
								" monetari for thy ",
								var0014,
								" pairs of leather boots.\"");
							say("\"",
								var000E,
								"\"");
							break;
						}
					}
				} while (false)
				nobreak {
					say("\"",
						var0010,
						"\"");
					say("\"For this pair of leather boots I can offer ",
						var0013,
						" monetari.\"");
					say("\"",
						var000E,
						"\"");
					var0014 = 0x0001;
				}
				var000B = 0x0000;
			}
			if (var000C == "leather helm") {
				do {
					var0012 = 0x03EC;
					var0013 = 0x0005;
					if (var0007 > 0x0001) {
						say("\"Well, how many leather helms wouldst thou care to sell?\"");
						var0014 = UI_input_numeric_value(0x0000, var0007, 0x0001, 0x0000);
						if (var0014 != 0x0001) {
							var0013 = 0x0005 * var0014;
							if (var0014 == 0x0000) {
								say("\"Perhaps another time, ",
									var0000,
									"...\"");
								// I see no way other than this
								goto labelFunc0843_05DB;
							}
							say("\"",
								var0011,
								"\"");
							say("\"Thy ",
								var0014,
								" leather helms will give thee ",
								var0013,
								" monetari.\"");
							say("\"",
								var000E,
								"\"");
							break;
						}
					}
				} while (false)
				nobreak {
					say("\"",
						var0010,
						"\"");
					say("\"I can offer ",
						var0013,
						" monetari for this leather helm.\"");
					say("\"",
						var000E,
						"\"");
					var0014 = 0x0001;
				}
				var000B = 0x0000;
			}
			if (var000C == "leather leggings") {
				do {
					var0012 = 0x023E;
					var0013 = 0x000A;
					if (var0008 > 0x0001) {
						say("\"How many pairs of leather leggings wouldst thou like to sell?\"");
						var0014 = UI_input_numeric_value(0x0000, var0008, 0x0001, 0x0000);
						if (var0014 != 0x0001) {
							var0013 = 0x000A * var0014;
							if (var0014 == 0x0000) {
								say("\"Perhaps another time, ",
									var0000,
									"...\"");
								// I see no way other than this
								goto labelFunc0843_05DB;
							}
							say("\"",
								var0011,
								"\"");
							say("\"Thy ",
								var0014,
								" pairs of leather leggings will give thee ",
								var0013,
								" monetari.\"");
							say("\"",
								var000E,
								"\"");
							break;
						}
					}
				} while (false)
				nobreak {
					say("\"",
						var0010,
						"\"");
					say("\"So be it, I will buy thy pair of leather leggings from thee for ",
						var0013,
						" monetari.\"");
					say("\"",
						var000E,
						"\"");
					var0014 = 0x0001;
				}
			}
			if (Func0955()) {
				var0015 = UI_remove_party_items(var0014, var0012, QUALITY_ANY, var000B, true);
				var0015 = Func099B(AVATAR, var0013, var0003, QUALITY_ANY, FRAME_ANY, 0x0000, true);
			} else {
				say("\"If thou dost not want to sell, 'tis fine by me.\"");
			}
labelFunc0843_05DB:
			say("\"Dost thou wish to sell more items?\"");
			var0002 = Func0955();
		} else {
			say("\"Thou dost not have anything that I want to buy!\"");
			var0002 = false;
		}
	}
	UI_pop_answers();
}

extern var Func0954 0x954 ();
extern var Func0956 0x956 (var var0000);
extern var Func0999 0x999 (var var0000, var var0001, var var0002, var var0003, var var0004, var var0005, var var0006);
extern var Func0955 0x955 ();

var Func0844 0x844 (var var0000, var var0001) {
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;
	var var0008;
	var var0009;
	var var000A;
	var var000B;
	var var000C;
	var var000D;
	var var000E;
	var var000F;
	var var0010;
	var var0011;

	var0002 = Func0954();
	var0003 = UI_is_pc_female();
	if (UI_is_pc_female()) {
		var0004 = "Milady";
	} else {
		var0004 = "Milord";
	}
	var0005 = var0000;
	var0006 = (var0001 / 0x0003) * 0x0002;
	var0007 = 0x000F - (KRAYG->get_npc_id() / 0x0002);
	var0008 = 0x0000;
	var0009 = 0x0001;
	var000A = 0x0000;
	var000B = 0x0002;
	var000C = KRAYG->get_npc_id();
	while (var0009) {
		var000D = Func0956(["yes", "no", "haggle"]);
		if (var000D == "no") {
			return 0x0000;
		}
		if (var000D == "yes") {
			var000E = 0x0000;
		} else {
			var000F = Func0999(var0005, var0001, var000B, var0006, var000A, var0007, var0008);
			var000A += 0x0001;
			var0008 = var000F[0x0004];
			var000E = var000F[0x0003];
			var0010 = var0005;
			var0005 = var000F[0x0002];
			var0006 = var000F[0x0001];
		}
		var0011 = UI_get_random(0x0003);
		if (var000E < 0x0002) {
			if (var0005 < (var0001 + ((var0000 - var0001) / 0x0004))) {
				if (var0011 == 0x0001) {
					say("\"Thou art a shrewd bargainer, ",
						var0002,
						". I would be hard pressed to make a profit with such a price.\"");
				}
				if (var0011 == 0x0002) {
					say("\"",
						var0004,
						", thy skill at bargaining is excellent. I believe I have actually lost money in this deal.\"");
				}
				if (var0011 == 0x0003) {
					say("\"Thy trading skills are very sharp, ",
						var0002,
						".\"");
				}
			} else if (var0005 < (var0001 + ((var0000 - var0001) / 0x0003))) {
				if (var0011 == 0x0001) {
					say("\"Thou art lucky I am in such a good mood today, ",
						var0002,
						"! 'Tis not often I lower my prices such...\"");
				}
				if (var0011 == 0x0002) {
					say("\"",
						var0004,
						", thou art a scoundrel! I would be penniless very soon if I bargained such a price more than a few times!\"");
				}
				if (var0011 == 0x0003) {
					say("\"'Tis not often I practically give my goods away! Thou art a skilled trader, ",
						var0002,
						"!\"");
				}
			} else if (var0005 < (var0001 + ((var0000 - var0001) / 0x0002))) {
				if (var0011 == 0x0001) {
					say("\"My prices are just, ",
						var0002,
						".  Thou shouldst travel to Fawn if thou dost believe mine steep.\"");
				}
				if (var0011 == 0x0002) {
					say("\"'Tis a pleasure to trade with thee, ",
						var0002,
						".\"");
				}
				if (var0011 == 0x0003) {
					say("\"",
						var0004,
						", I shall remember thee!  Please come to my shop whenever thou art in Monitor!\"");
				}
			} else {
				if (var0011 == 0x0001) {
					say("\"",
						var0004,
						", thou hast my gratitude!\"");
				}
				if (var0011 == 0x0002) {
					say("\"A blessing upon thee, ",
						var0002,
						"!\"");
				}
				if (var0011 == 0x0003) {
					say("\"My prices are steep, ",
						var0002,
						", for supplies are very scarce due to the Goblin raids.\"");
				}
			}
			say("\"Thou hast agreed to a price of ",
				var0005,
				" monetari, ",
				var0002,
				"?\"");
			if (Func0955()) {
				if (var000C > 0x0001) {
					KRAYG->set_npc_id(var000C - 0x0002);
				}
				return var0005;
			}
			if (var0011 == 0x0001) {
				say("\"Thou shouldst not argue with me only to change thy mind when we have agreed to a firm price!\"");
			}
			if (var0011 == 0x0002) {
				say("\"What of our bargain? Thou hast disappointed me, ",
					var0002,
					".\"");
			}
			if (var0011 == 0x0003) {
				say("\"This is not honorable! I do not have time to play games with thee! Begone!\"");
				abort;
			}
			if (0x001F < (var000C + 0x000A)) {
				KRAYG->set_npc_id(0x001F);
			} else {
				KRAYG->set_npc_id(var000C + 0x000A);
			}
			return 0x0000;
		}
		if (var0008 == 0x0001) {
			if (var000E == 0x0005) {
				say("\"I said that ",
					var0005,
					" was my final offer. Dost thou accept?\"");
				if (var000C < 0x001C) {
					KRAYG->set_npc_id(var000C + 0x0004);
				}
				if (Func0955()) {
					return var0005;
				}
				var0009 = 0x0000;
			} else {
				say("\"",
					var0005,
					" monetari is my final offer.\"");
				if (var000C < 0x001E) {
					KRAYG->set_npc_id(var000C + 0x0002);
				}
			}
		} else {
			if (var000E == 0x0002) {
				if (var0011 == 0x0001) {
					say("\"'Tis a pleasure to trade with thee, ",
						var0002,
						". How doth ",
						var0005,
						" monetari sound?\"");
				}
				if (var0011 == 0x0002) {
					say("\"",
						var0004,
						", only for thee I will give a special price. How doth ",
						var0005,
						" monetari sound to thee?\"");
				}
				if (var0011 == 0x0003) {
					say("\"My price is ",
						var0005,
						" monetari, ",
						var0002,
						". Dost thou accept?\"");
				}
			}
			if (var000E == 0x0003) {
				if (var0011 == 0x0001) {
					say("\"I am not sure. Wouldst thou consider ",
						var0005,
						" monetari?\"");
				}
				if (var0011 == 0x0002) {
					say("\"Hmmm... I am not certain... ",
						var0005,
						" monetari?\"");
				}
				if (var0011 == 0x0003) {
					say("\"The cost of my goods hath increased. Perhaps ",
						var0005,
						" monetari?\"");
				}
			}
			if (var000E == 0x0004) {
				if (var0011 == 0x0001) {
					say("\"If I did not know better, I would believe thou dost jest with me. ",
						var0005,
						" monetari is as low as I can go.\"");
					say("\"What dost thou say to this?\"");
				}
				if (var0011 == 0x0002) {
					say("\"Even if the storms are driving away my customers, I still cannot accept less than ",
						var0005,
						" monetari.\"");
				}
				if (var0011 == 0x0003) {
					say("\"Thou dost think too highly of thyself, my friend. I can accept no less than ",
						var0005,
						" monetari.\"");
				}
			}
			if (var000E == 0x0005) {
				var0005 = var0010;
				if (var0011 == 0x0001) {
					say("\"Thou art touched by the storms if thou dost think I would accept such a ridiculous offer! My previous price stands, at ",
						var0005,
						" monetari.\"");
				}
				if (var0011 == 0x0002) {
					say("\"I do not give my goods away! ",
						var0005,
						" monetari, and no less!\"");
				}
				if (var0011 == 0x0003) {
					say("\"I would rather belong to the Bear Command than accept such an offer!\"");
					say("\"",
						var0005,
						" monetari is as low as I will go!\"");
				}
				if (var000C < 0x001F) {
					KRAYG->set_npc_id(var000C + 0x0001);
				}
			}
		}
	}
	return 0;
}

extern var Func0954 0x954 ();
extern var Func0957 0x957 (var var0000);
extern var Func0955 0x955 ();
extern var Func0847 0x847 (var var0000, var var0001);
extern var Func0943 0x943 (var var0000, var var0001, var var0002, var var0003, var var0004, var var0005, var var0006, var var0007);
extern var Func0992 0x992 (var var0000, var var0001, var var0002, var var0003);

void Func0845 0x845 () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;
	var var0008;
	var var0009;
	var var000A;
	var var000B;
	var var000C;
	var var000D;
	var var000E;
	var var000F;
	var var0010;
	var var0011;
	var var0012;

	var0000 = Func0954();
	var0001 = UI_is_pc_female();
	UI_push_answers();
	var0002 = true;
	var0003 = ["nothing", "poultry", "beef", "ribs", "bread", "fish", "sausage", "cake"];
	var0004 = [0x0000, 0x0179, 0x0179, 0x0179, 0x0179, 0x0179, 0x0179, 0x0179];
	var0005 = [FRAME_ANY, 0x000A, 0x0009, 0x0017, 0x0000, 0x000C, 0x0007, 0x0004];
	var0006 = [0x0000, 0x0008, 0x000C, 0x000D, 0x0004, 0x0006, 0x0009, 0x0004];
	var0007 = [0x0000, 0x0005, 0x0008, 0x0008, 0x0002, 0x0004, 0x0006, 0x0002];
	var0008 = [0x0000, 0x0001, 0x0001, 0x0001, 0x0001, 0x0001, 0x0001, 0x0001];
	var0009 = [0x0000, 0x0001, 0x0001, 0x0001, 0x0001, 0x0001, 0x0001, 0x0001];
	var000A = 0x03B7;
	say("\"Name thine appetites, ",
		var0000,
		".\"");
	while (var0002) {
		var000B = Func0957(var0003);
		if (var000B == 0x0001) {
			if (var0001) {
				say("\"As thou dost wish.\"");
			} else {
				say("\"As thou dost wish, love.\"");
			}
			var0002 = false;
			continue;
		}
		var000C = var0006[var000B];
		var000D = 0x0000;
		var000E = UI_die_roll(0x0001, 0x0006);
		if (var000E == 0x0001) {
			var000F = "Doth that sound good?";
		}
		if (var000E == 0x0002) {
			var000F = "Dost thou take this price?";
		}
		if (var000E == 0x0003) {
			var000F = "Dost thou find the price agreeable?";
		}
		if (var000E == 0x0004) {
			var000F = "Dost thou agree?";
		}
		if (var000E == 0x0005) {
			var000F = "How doth that sound?";
		}
		if (var000E == 0x0006) {
			var000F = "Wilt thou agree to my price?";
		}
		if (var000B == 0x0002) {
			say("\"",
				var000C,
				" monetari for the most delectable fowl thou hast ever tasted.\"");
			say("\"",
				var000F,
				"\"");
			var0010 = "fowl";
		}
		if (var000B == 0x0003) {
			say("\"The beef dinner costs ",
				var000C,
				" monetari, a bargain at twice the price.\"");
			say("\"",
				var000F,
				"\"");
			var0010 = "beef dinners";
		}
		if (var000B == 0x0004) {
			say("\"The ribs are a specialty of mine. Special spices, thou seest... They cost ",
				var000C,
				" monetari.\"");
			say("\"",
				var000F,
				"\"");
			var0010 = "ribs";
		}
		if (var000B == 0x0005) {
			say("\"My bread is baked fresh every day. ",
				var000C,
				" monetari is my price.\"");
			say("\"",
				var000F,
				"\"");
			var0010 = "loaves of bread";
		}
		if (var000B == 0x0006) {
			say("\"The fish dinner costs ",
				var000C,
				" monetari. 'Tis grilled trout with a nice butter sauce to top it. Very delicious, ",
				var0000,
				".\"");
			say("\"",
				var000F,
				"\"");
			var0010 = "fish dinners";
		}
		if (var000B == 0x0007) {
			say("\"",
				var000C,
				" monetari for my fine sausage dinner, ",
				var0000,
				".\"");
			say("\"",
				var000F,
				"\"");
			var0010 = "sausages";
		}
		if (var000B == 0x0008) {
			say("\"",
				var000C,
				" monetari is a low price to pay for my cake, ",
				var0000,
				", if thou dost like things that are sweet...\"");
			say("\"",
				var000F,
				"\"");
			var0010 = "cakes";
		}
		if (var000C == var0007[var000B]) {
			if (Func0955()) {
				var0011 = var000C;
			} else {
				var0011 = 0x0000;
			}
		} else {
			var0011 = Func0847(var0006[var000B], var0007[var000B]);
		}
		if (var0011 > 0x0000) {
			if (var0009[var000B] == 0x0001) {
				say("\"How many ",
					var0010,
					" wouldst thou like?\"");
				var000D = Func0943(var0004[var000B], var0005[var000B], var0008[var000B], var000A, var0011, 0x000A, 0x0001, false);
			} else {
				var000D = Func0943(var0004[var000B], var0005[var000B], 0x0001, var000A, var0011, 0x0000, 0x0001, false);
			}
		}
		if (var000D == 0x0001) {
			say("\"Enjoy thy meal!\"");
		} else if (var000D == 0x0002) {
			say("\"I believe thou canst not carry so much food, ",
				var0000,
				".\"");
		} else if (var000D == 0x0003) {
			var0012 = Func0992(0x0001, (("@But " + var0000) + ", we have not the monetari to pay for this.@"), 0x0000, false);
			if (var0012 != AVATAR) {
				LUCILLA->show_npc_face0(0x0000);
				say("\"I am truly sorry, but thou dost not have enough money to pay for that, ",
					var0000,
					".\"");
			} else {
				say("\"It would appear thou dost not have enough monetari for that...\"");
			}
			if (0x001F < (LUCILLA->get_npc_id() + 0x0006)) {
				LUCILLA->set_npc_id(0x001F);
			} else {
				LUCILLA->set_npc_id(LUCILLA->get_npc_id() + 0x0006);
			}
		}
		say("\"Wouldst thou care for more?\"");
		var0002 = Func0955();
	}
	UI_pop_answers();
}

extern var Func0954 0x954 ();
extern var Func0953 0x953 ();
extern var Func0957 0x957 (var var0000);
extern var Func0955 0x955 ();
extern var Func0847 0x847 (var var0000, var var0001);
extern var Func0943 0x943 (var var0000, var var0001, var var0002, var var0003, var var0004, var var0005, var var0006, var var0007);
extern var Func0992 0x992 (var var0000, var var0001, var var0002, var var0003);

void Func0846 0x846 () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;
	var var0008;
	var var0009;
	var var000A;
	var var000B;
	var var000C;
	var var000D;
	var var000E;
	var var000F;
	var var0010;
	var var0011;

	var0000 = Func0954();
	var0001 = Func0953();
	var0002 = UI_is_pc_female();
	UI_push_answers();
	var0003 = true;
	var0004 = ["nothing", "wine", "mead", "ale"];
	var0005 = [0x0000, 0x0268, 0x0268, 0x0268];
	var0006 = [FRAME_ANY, 0x0000, 0x0005, 0x0003];
	var0007 = [0x0000, 0x0005, 0x0006, 0x0003];
	var0008 = [0x0000, 0x0002, 0x0004, 0x0001];
	var0009 = [0x0000, 0x0001, 0x0001, 0x0001];
	var000A = [0x0000, 0x0001, 0x0001, 0x0001];
	var000B = 0x03B7;
	say("\"So what hast thou a thirst for, ",
		var0000,
		"?\"");
	while (var0003) {
		var000C = Func0957(var0004);
		if (var000C == 0x0001) {
			if (var0002) {
				say("\"If thou dost become thirsty, ask me again, ",
					var0000,
					"!\"");
			} else {
				say("\"Ask me again, handsome, if thou dost become... thirsty.\"");
			}
			var0003 = false;
			continue;
		}
		var000D = var0007[var000C];
		var000E = 0x0000;
		if (var000C == 0x0002) {
			say("\"The wine is a bit dry and a little sweet. I will sell thee a bottle for ",
				var000D,
				" monetari.\"");
			say("\"Dost thou accept?\"");
			var000F = "wine bottles";
		}
		if (var000C == 0x0003) {
			say("\"Our mead is flavorful and very filling, ",
				var0000,
				".\"");
			say("\"For the price of ",
				var000D,
				" monetari, thou wilt accept some?\"");
			var000F = "bottles of mead";
		}
		if (var000C == 0x0004) {
			say("\"",
				var000D,
				" monetari for a mug of ale. All the men seem to enjoy it! Dost thou want any?\"");
			var000F = "mugs of ale";
		}
		if (var000D == var0008[var000C]) {
			if (Func0955()) {
				var0010 = var000D;
			} else {
				var0010 = 0x0000;
			}
		} else {
			var0010 = Func0847(var0007[var000C], var0008[var000C]);
		}
		if (var0010 > 0x0000) {
			if (var000A[var000C] == 0x0001) {
				say("\"How many ",
					var000F,
					" wouldst thou like?\"");
				var000E = Func0943(var0005[var000C], var0006[var000C], var0009[var000C], var000B, var0010, 0x000A, 0x0001, false);
			} else {
				var000E = Func0943(var0005[var000C], var0006[var000C], 0x0001, var000B, var0010, 0x0000, 0x0001, false);
			}
		}
		if (var000E == 0x0001) {
			say("\"To thine health, ",
				var0000,
				"!\"");
		} else if (var000E == 0x0002) {
			say("\"Thou shouldst not travel so heavily burdened -- I do not think that thou canst bear the bottles that thou desirest!\"");
		} else if (var000E == 0x0003) {
			var0011 = Func0992(0x0001, (("@But " + var0001) + ", we lack adequate funds!@"), 0x0000, false);
			if (var0011 != AVATAR) {
				LUCILLA->show_npc_face0(0x0000);
				say("\"Then thy thirst will not be quenched here.\"");
			} else {
				say("\"It seems thou dost not have the funds to pay me...\"");
			}
			if (0x001F < (LUCILLA->get_npc_id() + 0x0006)) {
				LUCILLA->set_npc_id(0x001F);
			} else {
				LUCILLA->set_npc_id(LUCILLA->get_npc_id() + 0x0006);
			}
		}
		say("\"Wouldst thou care for more?\"");
		var0003 = Func0955();
	}
	UI_pop_answers();
}

extern var Func0954 0x954 ();
extern var Func0956 0x956 (var var0000);
extern var Func0999 0x999 (var var0000, var var0001, var var0002, var var0003, var var0004, var var0005, var var0006);
extern var Func0955 0x955 ();

var Func0847 0x847 (var var0000, var var0001) {
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;
	var var0008;
	var var0009;
	var var000A;
	var var000B;
	var var000C;
	var var000D;
	var var000E;
	var var000F;
	var var0010;
	var var0011;
	var var0012;

	var0002 = Func0954();
	var0003 = UI_is_pc_female();
	if (var0003) {
		var0004 = "Milady";
	} else {
		var0004 = "Milord";
	}
	if (gflags[AVATAR_IS_KNIGHT] == true) {
		if (var0003) {
			var0004 = "Milady Knight";
		} else {
			var0005 = UI_die_roll(0x0001, 0x0003);
			if (var0005 == 0x0001) {
				var0004 = "My brave knight";
			}
			if (var0005 == 0x0002) {
				var0004 = "My valiant knight";
			}
			if (var0005 == 0x0003) {
				var0004 = "My sweet knight";
			}
		}
	}
	var0006 = var0000;
	var0007 = (var0001 / 0x0003) * 0x0002;
	var0008 = 0x000F - (LUCILLA->get_npc_id() / 0x0002);
	var0009 = 0x0000;
	var000A = 0x0001;
	var000B = 0x0000;
	var000C = 0x0002;
	var000D = LUCILLA->get_npc_id();
	while (var000A) {
		var000E = Func0956(["yes", "no", "haggle"]);
		if (var000E == "no") {
			return 0x0000;
		}
		if (var000E == "yes") {
			var000F = 0x0000;
		} else {
			var0010 = Func0999(var0006, var0001, var000C, var0007, var000B, var0008, var0009);
			var000B += 0x0001;
			var0009 = var0010[0x0004];
			var000F = var0010[0x0003];
			var0011 = var0006;
			var0006 = var0010[0x0002];
			var0007 = var0010[0x0001];
		}
		var0012 = UI_get_random(0x0003);
		if (var000F < 0x0002) {
			if (var0006 < (var0001 + ((var0000 - var0001) / 0x0004))) {
				if (var0003) {
					if (var0012 == 0x0001) {
						say("\"",
							var0004,
							", thou art very good at this... If I listened to thee much more, I would be penniless.\"");
					}
					if (var0012 == 0x0002) {
						say("\"Thou dost bargain as well as any, ",
							var0002,
							". 'Tis truly a very low price I have agreed to!\"");
					}
					if (var0012 == 0x0003) {
						say("\"Oh, if I were better at this, perhaps I could make more monetari.\"");
					}
				} else {
					if (var0012 == 0x0001) {
						say("\"If thou dost bargain so well as to bring my price this low, perhaps thou art better at other things as well...\"");
					}
					if (var0012 == 0x0002) {
						say("\"",
							var0004,
							", thy words are very powerful... Perhaps thou dost wish to wrestle somewhat differently?\"");
					}
					if (var0012 == 0x0003) {
						say("\"Ah, my sweet... Thou hast a very quick wit to bargain me so low. Are other parts of thee as well-equipped as thy tongue?\"");
					}
				}
			} else if (var0006 < (var0001 + ((var0000 - var0001) / 0x0003))) {
				if (var0003) {
					if (var0012 == 0x0001) {
						say("\"A low price, but thou hast bargained well, dost thou not think?\"");
					}
					if (var0012 == 0x0002) {
						say("\"",
							var0004,
							", thou hast bargained fairly, but this is a very low price.\"");
					}
					if (var0012 == 0x0003) {
						say("\"A bit lower than I had hoped, ",
							var0002,
							", but 'twill do.\"");
					}
				} else {
					if (var0012 == 0x0001) {
						say("\"",
							var0004,
							", thou art getting a very good value for thy monetari, even if thy clever tongue did lower my price...\"");
					}
					if (var0012 == 0x0002) {
						say("\"'Tis not often a man gets the better of me! Thou shouldst enjoy thyself, ",
							var0002,
							", taking advantage of a poor girl so...\"");
					}
					if (var0012 == 0x0003) {
						say("\"Oooh...\"");
						say("\"Thou didst certainly haggle a good price from me! Thou art naughty...\"");
					}
				}
			} else if (var0006 < (var0001 + ((var0000 - var0001) / 0x0002))) {
				if (var0003) {
					if (var0012 == 0x0001) {
						say("\"A fair enough price, ",
							var0002,
							".\"");
					}
					if (var0012 == 0x0002) {
						say("\"It hath a been pleasure to trade with thee, ",
							var0002,
							".\"");
					}
					if (var0012 == 0x0003) {
						say("\"Thou hast made a good bargain, ",
							var0002,
							".\"");
					}
				} else {
					if (var0012 == 0x0001) {
						say("\"Oooh...\"");
						say("\"Thou hast given me goose bumps, ",
							var0002,
							". Perhaps thou wilt spend more?\"");
					}
					if (var0012 == 0x0002) {
						say("\"It hath been a pleasure trading with thee! Most men would try to take advantage of my sweet nature and lower my price even further!\"");
					}
					if (var0012 == 0x0003) {
						say("\"Ah, my sweet, thou dost know how to make a girl feel well-liked!\"");
					}
				}
			} else if (var0003) {
				if (var0012 == 0x0001) {
					say("\"",
						var0004,
						", thou mayest buy from me anytime!\"");
				}
				if (var0012 == 0x0002) {
					say("\"Thou art most generous to offer such a price, ",
						var0002,
						"!\"");
				}
				if (var0012 == 0x0003) {
					say("\"Enjoy thy stay in Monitor, ",
						var0002,
						". Thou art most welcome at The Slashing Blade!\"");
				}
			} else {
				if (var0012 == 0x0001) {
					say("\"",
						var0004,
						", thou hast made me cry! 'Tis most generous of thee!\"");
				}
				if (var0012 == 0x0002) {
					say("\"Dost thou give all of thy money to other girls too, ",
						var0002,
						", or only to me?\"");
				}
				if (var0012 == 0x0003) {
					say("\"'Tis sweet of thee to agree to this price, love...\"");
				}
			}
			if (var0003) {
				say("\"Thou hast agreed to a price of ",
					var0006,
					" monetari, ",
					var0002,
					"?\"");
			} else {
				say("\"So, handsome, thou hast agreed to ",
					var0006,
					" monetari?\"");
			}
			if (Func0955()) {
				if (var000D > 0x0001) {
					LUCILLA->set_npc_id(var000D - 0x0002);
				}
				return var0006;
			}
			if (var0003) {
				if (var0012 == 0x0001) {
					say("\"Thou art a vindictive woman to argue with me and then change thy mind out of spite!\"");
				}
				if (var0012 == 0x0002) {
					say("\"We in Monitor do not forget those who cross us!\"");
					say("\"I do not think I shall be thy friend unless thou dost acquire better manners!\"");
					abort;
				}
				if (var0012 == 0x0003) {
					say("\"Art thou jealous of me to change thy mind so? If so, I am not amused!\"");
					abort;
				}
			} else {
				if (var0012 == 0x0001) {
					say("\"Oooh! Thou dost infuriate me! Just like a man to lead a poor girl on so!\"");
					abort;
				}
				if (var0012 == 0x0002) {
					say("\"Do not think that I am fooled by thine handsome features! Thou art merely a mean- spirited man, the same as any other!\"");
					abort;
				}
				if (var0012 == 0x0003) {
					say("\"",
						var0004,
						", what of our bargain?! Dost thou think to take advantage of me?\"");
				}
			}
			if (0x001F < (var000D + 0x000A)) {
				LUCILLA->set_npc_id(0x001F);
			} else {
				LUCILLA->set_npc_id(var000D + 0x000A);
			}
			return 0x0000;
		}
		if (var0009 == 0x0001) {
			if (var000F == 0x0005) {
				say("\"I said that ",
					var0006,
					" was my final offer. Dost thou accept?\"");
				if (var000D < 0x001C) {
					LUCILLA->set_npc_id(var000D + 0x0004);
				}
				if (Func0955()) {
					return var0006;
				}
				var000A = 0x0000;
			} else {
				say("\"",
					var0006,
					" monetari is my final offer.\"");
				if (var000D < 0x001E) {
					LUCILLA->set_npc_id(var000D + 0x0002);
				}
			}
		} else {
			if (var000F == 0x0002) {
				if (var0003) {
					if (var0012 == 0x0001) {
						say("\"'Tis a pleasure to barter with thee, ",
							var0002,
							". ",
							var0006,
							" monetari?\"");
					}
					if (var0012 == 0x0002) {
						say("\"",
							var0004,
							", we are both women and know good prices when we see them. How doth ",
							var0006,
							" monetari sound to thee?\"");
					}
					if (var0012 == 0x0003) {
						say("\"As one woman to another, wouldst thou consider ",
							var0006,
							" monetari?\"");
					}
				} else {
					if (var0012 == 0x0001) {
						say("\"Sweetie, thou art a pleasure to trade with... How doth ",
							var0006,
							" monetari sound?\"");
					}
					if (var0012 == 0x0002) {
						say("\"Well, handsome, how doth ",
							var0006,
							" monetari sound to thee?\"");
					}
					if (var0012 == 0x0003) {
						say("\"",
							var0004,
							", thou hast offered a goodly price... Wouldst thou pay ",
							var0006,
							" monetari instead?\"");
					}
				}
			}
			if (var000F == 0x0003) {
				if (var0003) {
					if (var0012 == 0x0001) {
						say("\"I am not quite certain, though 'tis not a bad offer. I would ask ",
							var0006,
							" monetari?\"");
					}
					if (var0012 == 0x0002) {
						say("\"I need to make some profit... How doth ",
							var0006,
							" monetari sound to thee?\"");
					}
					if (var0012 == 0x0003) {
						say("\"Thou dost understand better than men how we women make less in our dealings... Perhaps ",
							var0006,
							" monetari?\"");
					}
				} else {
					if (var0012 == 0x0001) {
						say("\"Well, my sweet, 'tis not the highest amount thou couldst offer a girl. Perhaps ",
							var0006,
							" monetari?\"");
					}
					if (var0012 == 0x0002) {
						say("\"Certainly mine handsome warrior could offer a better price than that! How doth ",
							var0006,
							" monetari sound to thee?\"");
					}
					if (var0012 == 0x0003) {
						say("\"",
							var0004,
							", how thy muscles do bulge! Thou art certainly the stongest man in Monitor...\"");
						say("\"Perhaps thou wilt agree to ",
							var0006,
							" monetari?\"");
					}
				}
			}
			if (var000F == 0x0004) {
				if (var0003) {
					if (var0012 == 0x0001) {
						say("\"What sort of offer is this?! How doth ",
							var0006,
							" monetari sound to thy shrewish ears?\"");
					}
					if (var0012 == 0x0002) {
						say("\"Thou dost not offer more than a selfish man would! ",
							var0006,
							" monetari?\"");
					}
					if (var0012 == 0x0003) {
						say("\"Thou art a very deceptive female! And I thought thou wert better than most! I can offer no less than ",
							var0006,
							" monetari.\"");
					}
				} else {
					if (var0012 == 0x0001) {
						say("\"Certainly, thou wouldst not offer such a low price to me... How doth ",
							var0006,
							" monetari sound to thee?\"");
					}
					if (var0012 == 0x0002) {
						say("\"And I thought thou wert different than the other men in Monitor! This is not an acceptable price. ",
							var0006,
							" monetari is what I offer thee.\"");
						say("\"What dost thou say?\"");
					}
					if (var0012 == 0x0003) {
						say("\"Didst thou think thou couldst sweet-talk me like any simple country girl and convince me to lower my price?\"");
						say("\"I want no fewer than ",
							var0006,
							" monetari. What dost thou think?\"");
					}
				}
			}
			if (var000F == 0x0005) {
				var0006 = var0011;
				if (var0003) {
					if (var0012 == 0x0001) {
						say("\"Thou art most ungenerous! My previous price stands, at ",
							var0006,
							" monetari.\"");
					}
					if (var0012 == 0x0002) {
						say("\"Spiteful wench! I offer ",
							var0006,
							" monetari, and no less!\"");
					}
					if (var0012 == 0x0003) {
						say("\"I cannot accept such an offer!\"");
						say("\"I stand at my price of ",
							var0006,
							" monetari, and no lower!\"");
					}
				} else {
					if (var0012 == 0x0001) {
						say("\"Hmmpf! Just like a man to offer a ridiculous price! Well, I am no simpleton to accept such! My previous price stands, at ",
							var0006,
							" monetari.\"");
					}
					if (var0012 == 0x0002) {
						say("\"I would not accept such a price even if thou wert the most handsome man in Monitor! I want ",
							var0006,
							" monetari, and no less!\"");
					}
					if (var0012 == 0x0003) {
						say("\"Ugh! Thou hast the manners of a man -- if not a goblin, to offer a girl such a pitiful sum!\"");
						say("\"I will make this very clear -- ",
							var0006,
							" monetari is as low as I will go!\"");
					}
				}
				if (var000D < 0x001F) {
					LUCILLA->set_npc_id(var000D + 0x0001);
				}
			}
		}
	}
	return 0;
}

extern var Func099B 0x99B (var var0000, var var0001, var var0002, var var0003, var var0004, var var0005, var var0006);
extern var Func097D 0x97D (var var0000, var var0001, var var0002, var var0003, var var0004);
extern var Func0992 0x992 (var var0000, var var0001, var var0002, var var0003);

void Func0848 0x848 () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;

	say("\"I shall certainly be sad to part with it, but if thou dost claim it, then I must give it to thee.\"");
	var0000 = LUTHER->remove_cont_items(0x0001, 0x01EA, QUALITY_ANY, 0x0000, 0x0000);
	var0000 = Func099B(AVATAR, 0x0001, 0x01EA, QUALITY_ANY, FRAME_ANY, 0x0000, true);
	gflags[HAS_DUPRE_SHIELD] = true;
	say("\"Now I shall have to find myself another shield...\"");
	if (gflags[STORM_MONITOR_SHIELD] && Func097D(PARTY, 0x0001, 0x02D9, QUALITY_ANY, 0x0000)) {
		var0001 = Func0992(0x0001, "@But thou canst have this shield which we found!@", 0x0000, false);
		0x0000->set_conversation_slot();
		say("\"That is most gracious of thee! Yes, this is my shield which so strangely disappeared during that storm!\"");
		var0000 = LUTHER->add_cont_items(0x0001, 0x02D9, QUALITY_ANY, 0x0000, 0x0012);
		if (var0000) {
			var0000 = UI_create_new_object(0x02D9);
			if (var0000) {
				var0000->set_item_flag(TEMPORARY);
				var0002 = LUTHER->get_object_position();
				var0003 = UI_update_last_created(var0002);
			}
		}
	}
}

void Func0849 0x849 () {
	var var0000;

	if (!(gflags[CALLED_LUTHER_BULLY] || (gflags[CALLED_LUTHER_BRAGGART] || gflags[CALLED_LUTHER_REPULSIVE]))) {
		return;
	}
	say("\"That is it, goat! Meet me at the List Field! There I shall ram thy words down thy throat!\"");
	if (gflags[LUTHER_CHALLENGED]) {
		return;
	}
	LUTHER->set_new_schedules([EVENING, MIDNIGHT], [SLEEP, DUEL], [0x0388, 0x0A46, 0x03DA, 0x0A86]);
	gflags[LUTHER_CHALLENGED] = true;
	var0000 = LUTHER->set_npc_prop(STRENGTH, -18);
	var0000 = LUTHER->set_npc_prop(COMBAT, -9);
	var0000 = LUTHER->set_npc_prop(DEXTERITY, -8);
}

extern var Func0955 0x955 ();

void Func084A 0x84A () {
	say("\"None can take the Test of Knighthood without the permission of the Lord of Monitor. Dost thou seek my permission?\"");
	gflags[KNOWS_MARSTEN_GIVES_PERMISSION] = true;
	if (Func0955()) {
		say("\"Very well. Shmed will ask thee the password. Tell him this --\"");
		say("\"'Courage is the Soul of Life.'\"");
		gflags[LORD_MARSTEN_GAVE_PERMISSION] = true;
	} else {
		say("\"Do not take the Test before thou art ready, strange warrior. But do not let fear shake thy resolve.\"");
	}
}

extern var Func0956 0x956 (var var0000);
extern var Func0957 0x957 (var var0000);
extern var Func0955 0x955 ();
extern var Func096F 0x96F (var var0000, var var0001, var var0002);
extern var Func084C 0x84C (var var0000, var var0001);

void Func084B 0x84B () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;
	var var0008;
	var var0009;
	var var000A;
	var var000B;
	var var000C;
	var var000D;
	var var000E;
	var var000F;

	UI_push_answers();
	var0000 = true;
	say("\"What coins wilt thou pay me with?\"");
	var0001 = Func0956(["Guilders", "Gold Coins"]);
	if (var0001 == "Guilders") {
		var0002 = 0x03B8;
	}
	if (var0001 == "Gold Coins") {
		var0002 = 0x0284;
		var0003 = 0x0001;
	}
	while (var0000) {
		say("\"In which circle art thou interested?\"");
		var0004 = Func0957(["nothing", "First", "Second", "Third", "Fourth", "Fifth", "Sixth", "Seventh", "Eighth"]);
		var0004 -= 0x0001;
		if (var0004 == 0x0000) {
			break;
		}
		if (var0004 == 0x0001) {
			var0005 = ["nothing", "Telekinesis", "Cure"];
			var0006 = [SPELL_NONE, SPELL_TELEKINESIS, SPELL_CURE];
			var0007 = [0x0000, 0x001E, 0x0016];
			var0008 = [0x0000, 0x0012, 0x000E];
		} else if (var0004 == 0x0002) {
			var0005 = ["nothing", "Great Light", "Mass Cure"];
			var0006 = [SPELL_NONE, SPELL_GREAT_LIGHT, SPELL_MASS_CURE];
			var0007 = [0x0000, 0x003C, 0x004B];
			var0008 = [0x0000, 0x0028, 0x0032];
		} else if (var0004 == 0x0003) {
			var0005 = ["nothing", "Enchant Missiles"];
			var0006 = [SPELL_NONE, SPELL_ENCHANT_MISSILES];
			var0007 = [0x0000, 0x0046];
			var0008 = [0x0000, 0x0023];
		} else if (var0004 == 0x0004) {
			var0005 = ["nothing", "Reveal", "Flash"];
			var0006 = [SPELL_NONE, SPELL_REVEAL, SPELL_FLASH];
			var0007 = [0x0000, 0x0064, 0x005A];
			var0008 = [0x0000, 0x003C, 0x0032];
		} else if (var0004 == 0x0005) {
			var0005 = ["nothing", "Explosion"];
			var0006 = [SPELL_NONE, SPELL_EXPLOSION];
			var0007 = [0x0000, 0x0087];
			var0008 = [0x0000, 0x0050];
		} else if (var0004 == 0x0006) {
			var0005 = ["nothing", "Dispel Illusion", "Betray"];
			var0006 = [SPELL_NONE, SPELL_DISPEL_ILLUSION, SPELL_BETRAY];
			var0007 = [0x0000, 0x00A0, 0x0091];
			var0008 = [0x0000, 0x006E, 0x0050];
		} else if (var0004 == 0x0007) {
			var0005 = ["nothing", "Energy Field", "Mass Awaken"];
			var0006 = [SPELL_NONE, SPELL_ENERGY_FIELD, SPELL_MASS_AWAKEN];
			var0007 = [0x0000, 0x00E6, 0x00FA];
			var0008 = [0x0000, 0x006E, 0x008C];
		} else if (var0004 == 0x0008) {
			var0005 = ["nothing", "Fetch"];
			var0006 = [SPELL_NONE, SPELL_FETCH];
			var0007 = [0x0000, 0x011D];
			var0008 = [0x0000, 0x00A5];
		}
		say("\"What spell dost thou wish to buy?\"");
		var0009 = Func0957(var0005);
		if (var0009 == 0x0001) {
			say("\"As thou wishest...\"");
		} else {
			var000A = var0006[var0009];
			var000B = var0007[var0009] * var0003;
			var000C = var0008[var0009] * var0003;
			var000D = var0005[var0009];
			if (var0001 == "Guilders") {
				var000B = (var0007[var0009] * 0x0003) / 0x0002;
				var000C = (var0008[var0009] * 0x0003) / 0x0002;
			}
			if (var000B == var000C) {
				say("\"The ",
					var000D,
					" spell will cost ",
					var000B,
					" ",
					var0001,
					". Is this acceptable?\"");
				var000E = 0x0000;
				if (Func0955() == true) {
					var000E = Func096F(var000A, var0002, var000B);
				}
			} else {
				say("\"The price to purchase ",
					var000D,
					" is ",
					var000B,
					" ",
					var0001,
					". Dost thou agree?\"");
				var000F = Func084C(var000B, var000C);
				var000E = 0x0000;
				if (var000F > 0x0000) {
					var000E = Func096F(var000A, var0002, var000F);
				}
			}
			if (var000E == 0x0001) {
				say("\"Thou now hast ",
					var000D,
					" in thy spellbook!\"");
			} else if (var000E == 0x0002) {
				say("\"Thou dost not have a spellbook.\"");
				var0000 = false;
				break;
			} else if (var000E == 0x0003) {
				say("\"Thou dost not have enough ",
					var0001,
					" for that!\"");
			} else if (var000E == 0x0004) {
				say("\"Thou dost already have that spell!\"");
			}
		}
		say("\"Wouldst thou like another spell?\"");
		var0000 = Func0955();
	}
	UI_pop_answers();
}

extern var Func0956 0x956 (var var0000);
extern var Func0999 0x999 (var var0000, var var0001, var var0002, var var0003, var var0004, var var0005, var var0006);
extern var Func0955 0x955 ();

var Func084C 0x84C (var var0000, var var0001) {
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;
	var var0008;
	var var0009;
	var var000A;
	var var000B;
	var var000C;
	var var000D;
	var var000E;

	var0002 = var0000;
	var0003 = (var0001 / 0x0003) * 0x0002;
	var0004 = 0x000F - (MELINO->get_npc_id() / 0x0002);
	var0005 = 0x0000;
	var0006 = 0x0001;
	var0007 = 0x0000;
	var0008 = 0x0002;
	var0009 = MELINO->get_npc_id();
	while (var0006) {
		var000A = Func0956(["yes", "no", "haggle"]);
		if (var000A == "no") {
			return 0x0000;
		}
		if (var000A == "yes") {
			var000B = 0x0000;
		} else {
			var000C = Func0999(var0002, var0001, var0008, var0003, var0007, var0004, var0005);
			var0007 += 0x0001;
			var0005 = var000C[0x0004];
			var000B = var000C[0x0003];
			var000D = var0002;
			var0002 = var000C[0x0002];
			var0003 = var000C[0x0001];
		}
		var000E = UI_get_random(0x0003);
		if (var000B < 0x0002) {
			if (var0002 < (var0001 + ((var0000 - var0001) / 0x0004))) {
				if (var000E == 0x0001) {
					say("\"Thou art a shrewd and crafty bargainer, to convince me to accept this price...\"");
				}
				if (var000E == 0x0002) {
					say("\"Art thou certain thou hast not cast a dweomer upon me? I usually do not lower my prices so.\"");
				}
				if (var000E == 0x0003) {
					say("\"'Tis truly amazing... thou hast a facile tongue to make me lower my price by so much.\"");
				}
			} else if (var0002 < (var0001 + ((var0000 - var0001) / 0x0003))) {
				if (var000E == 0x0001) {
					say("\"'Tis lower than I expected... but I shall agree to this price.\"");
				}
				if (var000E == 0x0002) {
					say("\"Thou art very good at bargaining. I will accept this price.\"");
				}
				if (var000E == 0x0003) {
					say("\"I see.\" *\"Very well, I will agree to this price even though 'tis lower than I did wish.\"");
				}
			} else if (var0002 < (var0001 + ((var0000 - var0001) / 0x0002))) {
				if (var000E == 0x0001) {
					say("\"Hmm...\" ~\"I suppose one must accept such a price -- though it could have been higher.\"");
				}
				if (var000E == 0x0002) {
					say("\"'Tis not such an indecent offer.\" ~\"I accept.\"");
				}
				if (var000E == 0x0003) {
					say("\"I will accept\tthis price.\" ~\"I can always use the extra funds for research.\"");
				}
			} else {
				if (var000E == 0x0001) {
					say("\"Very well.\" *\"I accept thine offer!\"");
				}
				if (var000E == 0x0002) {
					say("\"It hath been a pleasure!\" *\"I will accept thine offer.\"");
				}
				if (var000E == 0x0003) {
					say("\"Yes...\"*\"'Tis a very good price.\"");
				}
			}
			say("\"So, have we agreed on the price of ",
				var0002,
				"?\"");
			if (Func0955() == true) {
				if (var0009 > 0x0001) {
					MELINO->set_npc_id(var0009 - 0x0002);
				}
				return var0002;
			}
			if (var000E == 0x0001) {
				say("\"Pray, settle thy mind!\"");
			}
			if (var000E == 0x0002) {
				say("\"Dost thou waste the time of other mages as well?\"");
			}
			if (var000E == 0x0003) {
				say("\"Thou art most rude to renege on an offer!\"");
			}
			if (0x001F < (var0009 + 0x000A)) {
				MELINO->set_npc_id(0x001F);
			} else {
				MELINO->set_npc_id(var0009 + 0x000A);
			}
			return 0x0000;
		}
		if (var0005 == 0x0001) {
			if (var000B == 0x0005) {
				say("\"",
					var0002,
					" is my final offer. Dost thou want it at this price?\"");
				if (var0009 < 0x001C) {
					MELINO->set_npc_id(var0009 + 0x0004);
				}
				if (Func0955() == true) {
					return var0002;
				}
				var0006 = 0x0000;
			} else {
				say("\"",
					var0002,
					" is my final offer.  I will go no lower.\"");
				if (var0009 < 0x001E) {
					MELINO->set_npc_id(var0009 + 0x0002);
				}
			}
		} else {
			if (var000B == 0x0002) {
				if (var000E == 0x0001) {
					say("\"'Tis pleasant to find thee amenable. ",
						var0002,
						"?\"");
				}
				if (var000E == 0x0002) {
					say("\"Thou seemest to appreciate the finer spells and what they are truly worth. How doth ",
						var0002,
						" sound?\"");
				}
				if (var000E == 0x0003) {
					say("\"What a pleasure it is to deal with thee. I offer thee ",
						var0002,
						".\"");
				}
			}
			if (var000B == 0x0003) {
				if (var000E == 0x0001) {
					say("\"I am not totally certain.... Perhaps ",
						var0002,
						"?\"");
				}
				if (var000E == 0x0002) {
					say("\"Thou wilt not obtain the spell so cheaply. I will give thee ",
						var0002,
						"?\"");
				}
				if (var000E == 0x0003) {
					say("\"I suppose I must needs take thy money...\" *\"but not at that price. What about ",
						var0002,
						"?\"");
				}
			}
			if (var000B == 0x0004) {
				if (var000E == 0x0001) {
					say("\"This is not a price that inspires me to like thee. For ",
						var0002,
						" I will like thee better.\"");
				}
				if (var000E == 0x0002) {
					say("\"For such a pitiful sum I could not even gain a tenth of what this spell cost me to learn! I can go no lower than ",
						var0002,
						".\"");
				}
				if (var000E == 0x0003) {
					say("\"I am not certain who is the more foolish...\"*\"Thou for offering such a wretched amount, or myself for continuing to bargain with thee. I will offer thee ",
						var0002,
						".\"");
				}
			}
			if (var000B == 0x0005) {
				var0002 = var000D;
				if (var000E == 0x0001) {
					say("\"Art thou joking? My previous offer stands, at ",
						var0002,
						".\"");
				}
				if (var000E == 0x0002) {
					say("\"Art thou deaf, or merely an imbecile? I offer ",
						var0002,
						", and no less!\"");
				}
				if (var000E == 0x0003) {
					say("\"Thine offer is an insult to any mage! Mine offer stands at ",
						var0002,
						".\"");
				}
				if (var0009 < 0x001F) {
					MELINO->set_npc_id(var0009 + 0x0001);
				}
			}
		}
	}
	return 0;
}

var Func084D 0x84D (var var0000, var var0001) {
	if (var0001 == 0x0001) {
		if (var0000 == SILENT1) {
			return BAKE;
		}
		if ((var0000 == SILENT2) || (var0000 == SILENT3)) {
			return WAITER;
		}
		return EAT_AT_INN;
	}
	if (var0001 == 0x0002) {
		if ((var0000 == THOXA) || ((var0000 == MIGGIM) || (var0000 == BRACCUS))) {
			return TEND_SHOP;
		}
		return FARM;
	}
	if ((var0001 == 0x0003) || (var0001 == 0x000A)) {
		if ((var0000 == KARNAX) || (var0000 == XENKA)) {
			return TEND_SHOP;
		}
		return MAJOR_SIT;
	}
	if (var0001 == 0x0004) {
		if ((var0000 == SILENT2) || (var0000 == SILENT3)) {
			return WANDER;
		}
		if (var0000 == SILENT1) {
			return PACE_VERTICAL;
		}
		return DESK_WORK;
	}
	if (var0001 == 0x0005) {
		if ((var0000 == DRAXTA) || (var0000 == XENKA)) {
			return TEND_SHOP;
		}
		return MAJOR_SIT;
	}
	if (var0001 == 0x0006) {
		return TEND_SHOP;
	}
	if (var0001 == 0x0007) {
		if ((var0000 == XENKA) || ((var0000 == MIGGIM) || (var0000 == KARNAX))) {
			return DESK_WORK;
		}
		if ((var0000 == THOXA) || (var0000 == DRAXTA)) {
			return WANDER;
		}
		if (var0000 == BRACCUS) {
			return FARM;
		}
		if (var0000 == SILENT3) {
			return PACE_VERTICAL;
		}
		return BAKE;
	}
	if (var0001 == 0x0008) {
		return SLEEP;
	}
	if (var0001 == 0x0009) {
		if (var0000 == DRAXTA) {
			return TEND_SHOP;
		}
		return DANCE;
	}
	return IN_COMBAT;
}

var Func084E 0x84E (var var0000, var var0001) {
	if (var0000 > 0x0000) {
		var0000 = var0000->get_npc_number();
	}
	if (var0000 == KARNAX) {
		if (var0001 == 0x0001) {
			return [0x096D, 0x0464, 0x0000];
		}
		if (var0001 == 0x0002) {
			return [0x0909, 0x0497, 0x0000];
		}
		if ((var0001 == 0x000A) || (var0001 == 0x0003)) {
			return [0x0968, 0x0478, 0x0000];
		}
		if (var0001 == 0x0004) {
			return [0x0977, 0x048C, 0x0000];
		}
		if (var0001 == 0x0005) {
			return [0x091E, 0x0425, 0x0000];
		}
		if (var0001 == 0x0006) {
			return [0x0993, 0x0434, 0x0000];
		}
		if (var0001 == 0x0007) {
			return [0x0977, 0x048C, 0x0000];
		}
		if (var0001 == 0x0008) {
			return [0x0916, 0x04D8, 0x0000];
		}
		return [0x095C, 0x04B1, 0x0000];
	}
	if (var0000 == THOXA) {
		if (var0001 == 0x0001) {
			return [0x096D, 0x046A, 0x0000];
		}
		if (var0001 == 0x0002) {
			return [0x09C4, 0x047E, 0x0000];
		}
		if ((var0001 == 0x000A) || (var0001 == 0x0003)) {
			return [0x0960, 0x047C, 0x0000];
		}
		if (var0001 == 0x0004) {
			return [0x0977, 0x049A, 0x0000];
		}
		if (var0001 == 0x0005) {
			return [0x0912, 0x0425, 0x0000];
		}
		if (var0001 == 0x0006) {
			return [0x099C, 0x0434, 0x0000];
		}
		if (var0001 == 0x0007) {
			return [0x09A6, 0x046F, 0x0000];
		}
		if (var0001 == 0x0008) {
			return [0x09C6, 0x0427, 0x0000];
		}
		return [0x0980, 0x04B1, 0x0000];
	}
	if (var0000 == MIGGIM) {
		if (var0001 == 0x0001) {
			return [0x0967, 0x046A, 0x0000];
		}
		if (var0001 == 0x0002) {
			return [0x09C9, 0x0492, 0x0000];
		}
		if ((var0001 == 0x000A) || (var0001 == 0x0003)) {
			return [0x0962, 0x047C, 0x0000];
		}
		if (var0001 == 0x0004) {
			return [0x097A, 0x0498, 0x0000];
		}
		if (var0001 == 0x0005) {
			return [0x0914, 0x0425, 0x0000];
		}
		if (var0001 == 0x0006) {
			return [0x099C, 0x0437, 0x0000];
		}
		if (var0001 == 0x0007) {
			return [0x097A, 0x0498, 0x0000];
		}
		if (var0001 == 0x0008) {
			return [0x09A5, 0x04D6, 0x0000];
		}
		return [0x096F, 0x04B1, 0x0000];
	}
	if (var0000 == BRACCUS) {
		if (var0001 == 0x0001) {
			return [0x0973, 0x046A, 0x0000];
		}
		if (var0001 == 0x0002) {
			return [0x09BA, 0x0487, 0x0000];
		}
		if ((var0001 == 0x000A) || (var0001 == 0x0003)) {
			return [0x096D, 0x047C, 0x0000];
		}
		if (var0001 == 0x0004) {
			return [0x0974, 0x048E, 0x0000];
		}
		if (var0001 == 0x0005) {
			return [0x091C, 0x0425, 0x0000];
		}
		if (var0001 == 0x0006) {
			return [0x0997, 0x0437, 0x0000];
		}
		if (var0001 == 0x0007) {
			return [0x09BA, 0x0487, 0x0000];
		}
		if (var0001 == 0x0008) {
			return [0x08E9, 0x0468, 0x0000];
		}
		return [0x096A, 0x04B1, 0x0000];
	}
	if (var0000 == DRAXTA) {
		if (var0001 == 0x0001) {
			return [0x0973, 0x0464, 0x0000];
		}
		if (var0001 == 0x0002) {
			return [0x0909, 0x0469, 0x0000];
		}
		if ((var0001 == 0x000A) || (var0001 == 0x0003)) {
			return [0x096F, 0x047C, 0x0000];
		}
		if (var0001 == 0x0004) {
			return [0x097A, 0x048E, 0x0000];
		}
		if (var0001 == 0x0005) {
			return [0x0918, 0x0422, 0x0000];
		}
		if (var0001 == 0x0006) {
			return [0x0993, 0x0437, 0x0000];
		}
		if (var0001 == 0x0007) {
			return [0x0918, 0x0422, 0x0000];
		}
		if (var0001 == 0x0008) {
			return [0x095B, 0x048C, 0x0000];
		}
		return [0x0968, 0x04BA, 0x0000];
	}
	if (var0000 == SILENT1) {
		if (var0001 == 0x0001) {
			return [0x0963, 0x0463, 0x0000];
		}
		if (var0001 == 0x0002) {
			return [0x0923, 0x0469, 0x0000];
		}
		if ((var0001 == 0x000A) || (var0001 == 0x0003)) {
			return [0x096D, 0x047F, 0x0000];
		}
		if (var0001 == 0x0004) {
			return [0x0967, 0x048E, 0x0000];
		}
		if (var0001 == 0x0005) {
			return [0x091B, 0x0429, 0x0000];
		}
		if (var0001 == 0x0006) {
			return [0x0993, 0x043A, 0x0000];
		}
		if (var0001 == 0x0007) {
			return [0x0987, 0x0465, 0x0000];
		}
		if (var0001 == 0x0008) {
			return [0x0958, 0x049C, 0x0000];
		}
		return [0x0960, 0x04B1, 0x0000];
	}
	if (var0000 == SILENT2) {
		if (var0001 == 0x0001) {
			return [0x097A, 0x0469, 0x0000];
		}
		if (var0001 == 0x0002) {
			return [0x0913, 0x0469, 0x0000];
		}
		if ((var0001 == 0x000A) || (var0001 == 0x0003)) {
			return [0x096F, 0x047F, 0x0000];
		}
		if (var0001 == 0x0004) {
			return [0x0966, 0x0479, 0x0000];
		}
		if (var0001 == 0x0005) {
			return [0x091E, 0x0429, 0x0000];
		}
		if (var0001 == 0x0006) {
			return [0x0997, 0x043A, 0x0000];
		}
		if (var0001 == 0x0007) {
			return [0x097A, 0x0469, 0x0000];
		}
		if (var0001 == 0x0008) {
			return [0x0958, 0x0499, 0x0000];
		}
		return [0x0972, 0x04B1, 0x0000];
	}
	if (var0000 == SILENT3) {
		if (var0001 == 0x0001) {
			return [0x0987, 0x0465, 0x0000];
		}
		if (var0001 == 0x0002) {
			return [0x0915, 0x047C, 0x0000];
		}
		if ((var0001 == 0x000A) || (var0001 == 0x0003)) {
			return [0x0960, 0x047F, 0x0000];
		}
		if (var0001 == 0x0004) {
			return [0x0A3E, 0x04B2, 0x0000];
		}
		if (var0001 == 0x0005) {
			return [0x0912, 0x0429, 0x0000];
		}
		if (var0001 == 0x0006) {
			return [0x099B, 0x043A, 0x0000];
		}
		if (var0001 == 0x0007) {
			return [0x0967, 0x048E, 0x0000];
		}
		if (var0001 == 0x0008) {
			return [0x0958, 0x0496, 0x0000];
		}
		return [0x0968, 0x04B1, 0x0000];
	}
	if (var0000 == XENKA) {
		if (var0001 == 0x0001) {
			return [0x0965, 0x0467, 0x0000];
		}
		if (var0001 == 0x0002) {
			return [0x0910, 0x0480, 0x0000];
		}
		if ((var0001 == 0x000A) || (var0001 == 0x0003)) {
			return [0x0968, 0x0473, 0x0000];
		}
		if (var0001 == 0x0004) {
			return [0x0958, 0x048E, 0x0000];
		}
		if (var0001 == 0x0005) {
			return [0x091C, 0x0422, 0x0000];
		}
		if (var0001 == 0x0006) {
			return [0x0998, 0x0434, 0x0000];
		}
		if (var0001 == 0x0007) {
			return [0x0958, 0x048E, 0x0000];
		}
		if (var0001 == 0x0009) {
			return [0x0956, 0x0463, 0x0000];
		}
		return [0x0965, 0x04B1, 0x0000];
	}
	return 0;
}

extern var Func0957 0x957 (var var0000);
extern var Func0955 0x955 ();
extern var Func096F 0x96F (var var0000, var var0001, var var0002);
extern var Func0850 0x850 (var var0000, var var0001);

void Func084F 0x84F () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;
	var var0008;
	var var0009;
	var var000A;
	var var000B;
	var var000C;
	var var000D;

	UI_push_answers();
	var0000 = true;
	say("\"I will accept only guilders in exchange for teaching thee spells.\"");
	while (var0000) {
		say("\"In which circle art thou interested?\"");
		var0001 = Func0957(["nothing", "First", "Second", "Third", "Fourth", "Fifth", "Sixth", "Seventh", "Eighth", "Ninth"]);
		var0001 -= 0x0001;
		if (var0001 == 0x0000) {
			break;
		}
		if (var0001 == 0x0001) {
			var0002 = ["nothing", "Telekinesis"];
			var0003 = [SPELL_NONE, SPELL_TELEKINESIS];
			var0004 = [0x0000, 0x0028];
			var0005 = [0x0000, 0x0019];
		} else if (var0001 == 0x0002) {
			var0002 = ["nothing", "Cold Blast"];
			var0003 = [SPELL_NONE, SPELL_COLD_BLAST];
			var0004 = [0x0000, 0x0096];
			var0005 = [0x0000, 0x0064];
		} else if (var0001 == 0x0003) {
			var0002 = ["nothing", "Curse", "Paralyze"];
			var0003 = [SPELL_NONE, SPELL_CURSE, SPELL_PARALYZE];
			var0004 = [0x0000, 0x0078, 0x008C];
			var0005 = [0x0000, 0x0046, 0x0055];
		} else if (var0001 == 0x0004) {
			var0002 = ["nothing", "Blink", "Mass Curse"];
			var0003 = [SPELL_NONE, SPELL_BLINK, SPELL_MASS_CURSE];
			var0004 = [0x0000, 0x00C8, 0x00AF];
			var0005 = [0x0000, 0x0082, 0x0064];
		} else if (var0001 == 0x0005) {
			var0002 = ["nothing", "Erstam's Surprise"];
			var0003 = [SPELL_NONE, SPELL_ERSTAMS_SURPRISE];
			var0004 = [0x0000, 0x00F0];
			var0005 = [0x0000, 0x00AA];
		} else if (var0001 == 0x0006) {
			var0002 = ["nothing", "Cause Fear"];
			var0003 = [SPELL_NONE, SPELL_CAUSE_FEAR];
			var0004 = [0x0000, 0x012C];
			var0005 = [0x0000, 0x00D2];
		} else if (var0001 == 0x0007) {
			var0002 = ["nothing", "Mass Might"];
			var0003 = [SPELL_NONE, SPELL_MASS_MIGHT];
			var0004 = [0x0000, 0x015E];
			var0005 = [0x0000, 0x00F0];
		} else if (var0001 == 0x0008) {
			var0002 = ["nothing", "Mind Blast", "Invoke Serpent", "Serpent Bond"];
			var0003 = [SPELL_NONE, SPELL_MIND_BLAST, SPELL_INVOKE_SNOW_SERPENT, SPELL_SERPENT_BOND];
			var0004 = [0x0000, 0x0190, 0x01A9, 0x01C2];
			var0005 = [0x0000, 0x011D, 0x0145, 0x015E];
		} else if (var0001 == 0x0009) {
			var0002 = ["nothing", "Death Vortex", "Mass Death", "Imbalance"];
			var0003 = [SPELL_NONE, SPELL_DEATH_VORTEX, SPELL_MASS_DEATH, SPELL_IMBALANCE];
			var0004 = [0x0000, 0x01F4, 0x0258, 0x04B0];
			var0005 = [0x0000, 0x01F4, 0x0258, 0x04B0];
		}
		say("\"What spell dost thou wish to purchase?\"");
		var0006 = Func0957(var0002);
		if (var0006 == 0x0001) {
			say("\"As thou wishest...\"");
		} else {
			var0007 = var0003[var0006];
			var0008 = var0004[var0006];
			var0009 = var0005[var0006];
			var000A = var0002[var0006];
			var000B = 0x03B8;
			if (gflags[AVATAR_FREED_MORTEGRO] == true) {
				var0008 = var0004[var0006] / 0x0002;
				var0009 = var0005[var0006] / 0x0002;
			}
			if (var0008 == var0009) {
				say("\"I will sell thee ",
					var000A,
					" for ",
					var0008,
					" guilders. Dost thou accept?\"");
				var000C = 0x0000;
				if (Func0955() == true) {
					var000C = Func096F(var0007, var000B, var0008);
				}
			} else {
				say("\"I will sell thee ",
					var000A,
					" for ",
					var0008,
					" guilders. Dost thou accept?\"");
				var000D = Func0850(var0008, var0009);
				var000C = 0x0000;
				if (var000D > 0x0000) {
					var000C = Func096F(var0007, var000B, var000D);
				}
			}
			if (var000C == 0x0001) {
				say("\"The spell ",
					var000A,
					" is thine!\"");
			} else if (var000C == 0x0002) {
				say("\"Thou dost need a spellbook!\"");
				var0000 = false;
				break;
			} else if (var000C == 0x0003) {
				say("\"Thou dost not have enough guilders to buy ",
					var000A,
					"!\"");
			} else if (var000C == 0x0004) {
				say("\"Thou dost already have that spell!\"");
			}
		}
		say("\"Perhaps another spell?\"");
		var0000 = Func0955();
	}
	UI_pop_answers();
}

extern var Func0956 0x956 (var var0000);
extern var Func0999 0x999 (var var0000, var var0001, var var0002, var var0003, var var0004, var var0005, var var0006);
extern var Func0955 0x955 ();

var Func0850 0x850 (var var0000, var var0001) {
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;
	var var0008;
	var var0009;
	var var000A;
	var var000B;
	var var000C;
	var var000D;

	var0002 = var0000;
	var0003 = (var0001 / 0x0003) * 0x0002;
	var0004 = 0x0005;
	var0005 = 0x0000;
	var0006 = 0x0001;
	var0007 = 0x0000;
	var0008 = 0x0002;
	while (var0006) {
		var0009 = Func0956(["yes", "no", "haggle"]);
		if (var0009 == "no") {
			return 0x0000;
		}
		if (var0009 == "yes") {
			var000A = 0x0000;
		} else {
			var000B = Func0999(var0002, var0001, var0008, var0003, var0007, var0004, var0005);
			var0007 += 0x0001;
			var0005 = var000B[0x0004];
			var000A = var000B[0x0003];
			var000C = var0002;
			var0002 = var000B[0x0002];
			var0003 = var000B[0x0001];
		}
		var000D = UI_get_random(0x0003);
		if (var000A < 0x0002) {
			if (var0002 < (var0001 + ((var0000 - var0001) / 0x0004))) {
				if (var000D == 0x0001) {
					say("\"Thou dost bargain well, my friend.\"");
				}
				if (var000D == 0x0002) {
					say("\"It pains me to agree... But what else can I do?\"");
				}
				if (var000D == 0x0003) {
					say("\"I must be spending too much time speaking with the dead. I cannot believe that I am agreeing to this!\"");
				}
			} else if (var0002 < (var0001 + ((var0000 - var0001) / 0x0003))) {
				if (var000D == 0x0001) {
					say("\"I have little enough business these days. I shall have to accept.\"");
				}
				if (var000D == 0x0002) {
					say("\"Thou hast a talent for bargaining. I will accept this price.\"");
				}
				if (var000D == 0x0003) {
					say("\"I should retire from magery. I am losing mine edge.\"");
				}
			} else if (var0002 < (var0001 + ((var0000 - var0001) / 0x0002))) {
				if (var000D == 0x0001) {
					say("\"Only ",
						var0002,
						"??! I suppose it is the best I can hope for.\"");
				}
				if (var000D == 0x0002) {
					say("\"A modest amount. Not bad...\"");
				}
				if (var000D == 0x0003) {
					say("\"There is simply no profit in selling spells...\"");
				}
			} else {
				if (var000D == 0x0001) {
					say("\"I accept thine offer!\"");
				}
				if (var000D == 0x0002) {
					say("\"It is a pleasure doing business with thee!\"");
				}
				if (var000D == 0x0003) {
					say("\"Thou art most generous! I accept.\"");
				}
			}
			say("\"So, have we agreed on the price of ",
				var0002,
				"?\"");
			if (Func0955() == true) {
				return var0002;
			}
			if (var000D == 0x0001) {
				say("\"Then why didst thou go to such trouble?!\"");
			}
			if (var000D == 0x0002) {
				say("\"I shall remember this outrage!\"");
			}
			if (var000D == 0x0003) {
				say("\"All this time spent for nothing?! Thou art mad!\"");
			}
			return 0x0000;
		}
		if (var0005 == 0x0001) {
			if (var000A == 0x0005) {
				say("\"I said that ",
					var0002,
					" is my final offer. Dost thou agree?\"");
				if (Func0955() == true) {
					return var0002;
				}
				var0006 = 0x0000;
			} else {
				say("\"",
					var0002,
					" is my final offer. I could make more profit from a shade...\"");
			}
		} else {
			if (var000A == 0x0002) {
				if (var000D == 0x0001) {
					say("\"How doth ",
						var0002,
						" sound? I like thee...\"");
				}
				if (var000D == 0x0002) {
					say("\"I can trust thee with my spells, surely. How doth ",
						var0002,
						" sound?\"");
				}
				if (var000D == 0x0003) {
					say("\"Thou art worthy of my knowledge. I offer thee ",
						var0002,
						".\"");
				}
			}
			if (var000A == 0x0003) {
				if (var000D == 0x0001) {
					say("\"Hmmm.... Possibly ",
						var0002,
						"?\"");
				}
				if (var000D == 0x0002) {
					say("\"I must consider this... ",
						var0002,
						"?\"");
				}
				if (var000D == 0x0003) {
					say("\"What wouldst thou say to ",
						var0002,
						"? I must be able to buy reagents...\"");
				}
			}
			if (var000A == 0x0004) {
				if (var000D == 0x0001) {
					say("\"Thief! Better that thou shouldst steal it from me! ",
						var0002,
						", no less.\"");
				}
				if (var000D == 0x0002) {
					say("\"My knowledge is worth more than that! I can go no lower than ",
						var0002,
						".\"");
				}
				if (var000D == 0x0003) {
					say("\"This spell is worth at least ",
						var0002,
						".\"");
				}
			}
			if (var000A == 0x0005) {
				var0002 = var000C;
				if (var000D == 0x0001) {
					say("\"Thou must not want this spell... My previous offer stands, at ",
						var0002,
						".\"");
				}
				if (var000D == 0x0002) {
					say("\"Dost thou dare to insult me?! ",
						var0002,
						", no less.\"");
				}
				if (var000D == 0x0003) {
					say("\"Mine offer stands at ",
						var0002,
						". Thou art a fool if thou dost not agree.\"");
				}
			}
		}
	}
	return 0;
}

extern var Func0955 0x955 ();
extern var Func099B 0x99B (var var0000, var var0001, var var0002, var var0003, var var0004, var var0005, var var0006);
extern var Func0992 0x992 (var var0000, var var0001, var var0002, var var0003);

void Func0851 0x851 () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;

	say("\"The cost is 12 guilders per person. Wouldst thou like a room for the night?\"");
	if (Func0955()) {
		var0000 = UI_get_array_size(UI_get_party_list()) * 0x000C;
		var0001 = PARTY->count_objects(0x03B8, QUALITY_ANY, FRAME_ANY);
		if (var0001 >= var0000) {
			say("\"Here is thy key.\"");
			var0002 = UI_remove_party_items(var0000, 0x03B8, QUALITY_ANY, FRAME_ANY, 0x0000);
			var0003 = Func099B(AVATAR, 0x0001, 0x0281, 0x00B8, 0x000B, 0x0000, true);
			say("\"'Tis the northwest corner room.\"");
		} else {
			var0004 = Func0992(0x0001, "@But Avatar, we do not have the guilders!@", 0x0000, false);
			if (var0004 != AVATAR) {
				ROCCO->show_npc_face0(0x0000);
				say("\"Then thou canst not stay at the inn. In these hard times, I cannot afford to keep thee and thy companions for free.\"");
			} else {
				say("\"Thou hast not enough guilders for my rooms.\"");
			}
		}
	} else {
		say("\"Another time...\"");
	}
}

extern var Func0954 0x954 ();
extern var Func0957 0x957 (var var0000);
extern var Func0955 0x955 ();
extern var Func0854 0x854 (var var0000, var var0001);
extern var Func0943 0x943 (var var0000, var var0001, var var0002, var var0003, var var0004, var var0005, var var0006, var var0007);
extern var Func0992 0x992 (var var0000, var var0001, var var0002, var var0003);

void Func0852 0x852 () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;
	var var0008;
	var var0009;
	var var000A;
	var var000B;
	var var000C;
	var var000D;
	var var000E;
	var var000F;
	var var0010;
	var var0011;
	var var0012;

	var0000 = Func0954();
	UI_push_answers();
	var0001 = true;
	var0002 = ["nothing", "jerky", "fish", "sausage", "roast lamb", "honey cake"];
	var0003 = [0x0000, 0x0179, 0x0179, 0x0179, 0x0179, 0x0179];
	var0004 = [FRAME_ANY, 0x000F, 0x000D, 0x0007, 0x000E, 0x0006];
	var0005 = [0x0000, 0x0014, 0x0016, 0x0019, 0x0023, 0x000A];
	var0006 = [0x0000, 0x000C, 0x000D, 0x000A, 0x0013, 0x0006];
	var0007 = 0x03B8;
	var0008 = [0x0000, 0x0002, 0x0001, 0x0001, 0x0001, 0x0001];
	var0009 = [0x0000, 0x0001, 0x0001, 0x0001, 0x0001, 0x0001];
	if (UI_is_pc_female()) {
		var000A = "Milady";
	} else {
		var000A = "Milord";
	}
	say("\"What art thou hungry for, ",
		var0000,
		"?\"");
	while (var0001) {
		var000B = Func0957(var0002);
		if (var000B == 0x0001) {
			say("\"Thou dost not know what thou art missing...\"");
			var0001 = false;
			continue;
		}
		var000C = var0005[var000B];
		var000D = 0x0000;
		var000E = UI_die_roll(0x0001, 0x0005);
		if (var000E == 0x0001) {
			var000F = "Wilt thou have some?";
		}
		if (var000E == 0x0002) {
			var000F = "Will this be fine with thee?";
		}
		if (var000E == 0x0003) {
			var000F = "Dost thou find the price agreeable?";
		}
		if (var000E == 0x0004) {
			var000F = var000A + ", dost thou agree?";
		}
		if (var000E == 0x0005) {
			var000F = var000A + ", is the price acceptable?";
		}
		if (var000B == 0x0002) {
			say("\"",
				var000C,
				" guilders will buy thee two strips of jerky.\"");
			say("\"",
				var000F,
				"\"");
			var0010 = "strips of jerky, in bunches of two,";
		}
		if (var000B == 0x0003) {
			say("\"Most people in Moonshade think that my fish is excellent. But have a care! When last I prepared a meal of fish it was stolen away by Mosh, the rat catcher! So I daresay she enjoys it greatly.\"");
			say("\"The dinner costs ",
				var000C,
				" guilders.\"");
			say("\"",
				var000F,
				"\"");
			var0010 = "fish dinners";
		}
		if (var000B == 0x0004) {
			say("\"My sausage is very good. ",
				var000C,
				" guilders is my price.\"");
			say("\"",
				var000F,
				"\"");
			var0010 = "sausages";
		}
		if (var000B == 0x0005) {
			say("\"I believe thou wilt find the taste to thy liking. I charge ",
				var000C,
				" guilders for my lamb roast.\"");
			say("\"",
				var000F,
				"\"");
			var0010 = "lamb roasts";
		}
		if (var000B == 0x0006) {
			say("\"If thou dost crave something sweet, ",
				var0000,
				", thou shouldst try mine honey cake. ",
				var000C,
				" guilders will buy thee a treat.\"");
			say("\"",
				var000F,
				"\"");
			var0010 = "honey cakes";
		}
		if (var000C == var0006[var000B]) {
			if (Func0955()) {
				var0011 = var000C;
			} else {
				var0011 = 0x0000;
			}
		} else {
			var0011 = Func0854(var0005[var000B], var0006[var000B]);
		}
		if (var0011 > 0x0000) {
			if (var0009[var000B] == 0x0001) {
				say("\"How many ",
					var0010,
					" wouldst thou like?\"");
				var000D = Func0943(var0003[var000B], var0004[var000B], var0008[var000B], var0007, var0011, 0x0014, 0x0001, false);
			} else {
				var000D = Func0943(var0003[var000B], var0004[var000B], var0008[var000B], var0007, var0011, 0x0000, 0x0001, false);
			}
		}
		if (var000D == 0x0001) {
			say("\"Enjoy thy meal, ",
				var0000,
				"!\"");
		} else if (var000D == 0x0002) {
			say("\"Thou canst not carry so much food, ",
				var0000,
				"!\"");
		} else if (var000D == 0x0003) {
			var0012 = Func0992(0x0001, (("@But " + var0000) + ", we have not the guilders to pay for this.@"), 0x0000, false);
			if (var0012 != AVATAR) {
				PETRA->show_npc_face0(0x0000);
				say("\"I am sorry, but Rocco cannot afford to feed thee for free, ",
					var0000,
					".\"");
			} else {
				say("\"Thou dost not have enough money for that...\"");
			}
		}
		say("\"Wouldst thou care for more?\"");
		var0001 = Func0955();
	}
	UI_pop_answers();
}

extern var Func0954 0x954 ();
extern var Func0953 0x953 ();
extern var Func0957 0x957 (var var0000);
extern var Func0955 0x955 ();
extern var Func0854 0x854 (var var0000, var var0001);
extern var Func0943 0x943 (var var0000, var var0001, var var0002, var var0003, var var0004, var var0005, var var0006, var var0007);
extern var Func0992 0x992 (var var0000, var var0001, var var0002, var var0003);

void Func0853 0x853 () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;
	var var0008;
	var var0009;
	var var000A;
	var var000B;
	var var000C;
	var var000D;
	var var000E;
	var var000F;
	var var0010;

	var0000 = Func0954();
	var0001 = Func0953();
	UI_push_answers();
	var0002 = true;
	var0003 = ["nothing", "wine", "mead", "ale"];
	var0004 = [0x0000, 0x0268, 0x0268, 0x0268];
	var0005 = [FRAME_ANY, 0x0000, 0x0005, 0x0003];
	var0006 = [0x0000, 0x000F, 0x0014, 0x0007];
	var0007 = [0x0000, 0x0008, 0x000B, 0x0004];
	var0008 = 0x03B8;
	var0009 = [0x0000, 0x0001, 0x0001, 0x0001];
	var000A = [0x0000, 0x0001, 0x0001, 0x0001];
	say("\"What dost thou want to drink, ",
		var0000,
		"?\"");
	while (var0002) {
		var000B = Func0957(var0003);
		if (var000B == 0x0001) {
			say("\"If thou dost change thy mind, ask me again!\"");
			var0002 = false;
			continue;
		}
		var000C = var0006[var000B];
		var000D = 0x0000;
		if (var000B == 0x0002) {
			say("\"",
				var000C,
				" guilders is what Rocco charges for wine, though it is very good. Dost thou accept?\"");
			var000E = "wine bottles";
		}
		if (var000B == 0x0003) {
			say("\"The mead Rocco imports is sweetly flavored with the honey of bees raised in the mountain highlands.\"");
			say("\"For the price of ",
				var000C,
				" guilders, thou wilt accept some?\"");
			var000E = "bottles of mead";
		}
		if (var000B == 0x0004) {
			say("\"Our ale is weak, as it is imported from the mainland, but Rocco must still charge ",
				var000C,
				" guilders for it. Dost thou find the price acceptable?\"");
			var000E = "flasks of ale";
		}
		if (var000C == var0007[var000B]) {
			if (Func0955()) {
				var000F = var000C;
			} else {
				var000F = 0x0000;
			}
		} else {
			var000F = Func0854(var0006[var000B], var0007[var000B]);
		}
		if (var000F > 0x0000) {
			if (var000A[var000B] == 0x0001) {
				say("\"How many ",
					var000E,
					" wouldst thou like?\"");
				var000D = Func0943(var0004[var000B], var0005[var000B], var0009[var000B], var0008, var000F, 0x0014, 0x0001, false);
			} else {
				var000D = Func0943(var0004[var000B], var0005[var000B], var0009[var000B], var0008, var000F, 0x0000, 0x0001, false);
			}
		}
		if (var000D == 0x0001) {
			say("\"Enjoy thy drink, ",
				var0000,
				"!\"");
		} else if (var000D == 0x0002) {
			say("\"Thou canst not carry thy drink!\"");
		} else if (var000D == 0x0003) {
			var0010 = Func0992(0x0001, (("@But " + var0001) + ", we lack adequate funds!@"), 0x0000, false);
			if (var0010 != AVATAR) {
				PETRA->show_npc_face0(0x0000);
				say("\"Then thy thirst must be quenched by well water, I'm afraid.\"");
			} else {
				say("\"It seems thou dost not have the funds to pay me... Hast thou considered drinking from the public well?\"");
			}
		}
		say("\"Wouldst thou care for more?\"");
		var0002 = Func0955();
	}
	UI_pop_answers();
}

extern var Func0954 0x954 ();
extern var Func0956 0x956 (var var0000);
extern var Func0999 0x999 (var var0000, var var0001, var var0002, var var0003, var var0004, var var0005, var var0006);
extern var Func0955 0x955 ();
extern var Func0942 0x942 (var var0000);

var Func0854 0x854 (var var0000, var var0001) {
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;
	var var0008;
	var var0009;
	var var000A;
	var var000B;
	var var000C;
	var var000D;
	var var000E;
	var var000F;
	var var0010;

	var0002 = Func0954();
	var0003 = UI_is_pc_female();
	var0004 = var0000;
	var0005 = (var0001 / 0x0003) * 0x0002;
	var0006 = 0x0005;
	var0007 = 0x0000;
	var0008 = 0x0001;
	var0009 = 0x0000;
	var000A = 0x0002;
	while (var0008) {
		var000B = Func0956(["yes", "no", "haggle"]);
		if (var000B == "no") {
			return 0x0000;
		}
		if (var000B == "yes") {
			var000C = 0x0000;
		} else {
			var000D = Func0999(var0004, var0001, var000A, var0005, var0009, var0006, var0007);
			var0009 += 0x0001;
			var0007 = var000D[0x0004];
			var000C = var000D[0x0003];
			var000E = var0004;
			var0004 = var000D[0x0002];
			var0005 = var000D[0x0001];
		}
		var000F = UI_get_random(0x0003);
		if (var000C < 0x0002) {
			if (var0004 < (var0001 + ((var0000 - var0001) / 0x0004))) {
				if (var000F == 0x0001) {
					say("\"Rocco would have me scrapped for lowering my prices like this. Please do not tell him...\"");
				}
				if (var000F == 0x0002) {
					say("\"Thou art most forceful, ",
						var0002,
						"! We will not be in business long at this rate!\"");
				}
				if (var000F == 0x0003) {
					say("\"Rocco would never have been out-bargained so!\"");
				}
			} else if (var0004 < (var0001 + ((var0000 - var0001) / 0x0003))) {
				if (var000F == 0x0001) {
					say("\"The Blue Boar doth have the finest prices, eh?\"");
				}
				if (var000F == 0x0002) {
					say("\"Today hath gone well, so I will be generous. On another day thou mayest not be so lucky!\"");
				}
				if (var000F == 0x0003) {
					say("\"Perhaps it is a human trait... To bargain so well.\"");
				}
			} else if (var0004 < (var0001 + ((var0000 - var0001) / 0x0002))) {
				if (var000F == 0x0001) {
					say("\"Even Rocco would consider this a fair deal...\"");
				}
				if (var000F == 0x0002) {
					say("\"We shall not profit this way...\"");
				}
				if (var000F == 0x0003) {
					say("\"Good service and fair prices is what hath made the Blue Boar famous!\"");
				}
			} else {
				if (var000F == 0x0001) {
					say("\"I am pleased, ",
						var0002,
						".\"");
				}
				if (var000F == 0x0002) {
					say("\"Thou art a fine person!\"");
				}
				if (var000F == 0x0003) {
					say("\"If times were not so bad, our prices would be far lower...\"");
				}
			}
			say("\"Dost thou agree to ",
				var0004,
				" guilders, ",
				var0002,
				"?\"");
			if (Func0955()) {
				return var0004;
			}
			if (var000F == 0x0001) {
				say("\"I thought thou didst agree to that price!\"");
			}
			if (var000F == 0x0002) {
				say("\"Take thy slick ways elsewhere then! I have more important things to do!\"");
			}
			if (var000F == 0x0003) {
				say("\"Be gone... Before I fetch Rocco to break thy thick head for thee!\"");
			}
			return 0x0000;
		}
		if (var0007 == 0x0001) {
			if (var000C == 0x0005) {
				say("\"",
					var0004,
					" is my final offer. Dost thou accept?\"");
				if (Func0955()) {
					return var0004;
				}
				var0008 = 0x0000;
			} else {
				say("\"Fine... ",
					var0004,
					" guilders is my final offer.\"");
			}
		} else {
			if (var000C == 0x0002) {
				if (var000F == 0x0001) {
					say("\"It is so interesting bargaining with thee. How doth ",
						var0004,
						" guilders sound?\"");
				}
				if (var000F == 0x0002) {
					say("\"Thou art a gem among customers. Have we agreed on ",
						var0004,
						" guilders?\"");
				}
				if (var000F == 0x0003) {
					say("\"I offer thee a price of ",
						var0004,
						" guilders -- a special deal for those I consider good customers. Dost thou accept?\"");
				}
			}
			if (var000C == 0x0003) {
				if (var000F == 0x0001) {
					say("\"We have so little in stock... Perhaps ",
						var0004,
						" guilders?\"");
				}
				if (var000F == 0x0002) {
					say("\"",
						var0004,
						"? I should charge more, though...\"");
				}
				if (var000F == 0x0003) {
					say("\"I must consider what Rocco will say. Perhaps ",
						var0004,
						" guilders?\"");
				}
			}
			if (var000C == 0x0004) {
				if (var000F == 0x0001) {
					say("\"",
						var0004,
						" guilders is as low as I can go. Wilt thou agree?\"");
				}
				if (var000F == 0x0002) {
					say("\"Surely thou canst see that I can go no lower than ",
						var0004,
						" guilders. We must pay for the upkeep on the inn.\"");
				}
				if (var000F == 0x0003) {
					say("\"I may be an automaton, but I am no fool! I will accept no less than ",
						var0004,
						" guilders.\"");
				}
			}
			if (var000C == 0x0005) {
				var0004 = var000E;
				if (var000F == 0x0001) {
					say("\"I would rather Rocco sell me for scrap! My previous price stands, at ",
						var0004,
						" guilders.\"");
				}
				if (var000F == 0x0002) {
					say("\"",
						var0004,
						" guilders! I shall not be tricked into accepting less!\"");
				}
				if (var000F == 0x0003) {
					say("\"Thou must think me witless!\"");
					if (Func0942(ROCCO)) {
						var0010 = "his";
						if (var0003) {
							var0010 = "her";
						}
						ROCCO->show_npc_face1(0x0000);
						say("\"If this person is bothering thee, Petra, I shall be happy to soften ",
							var0010,
							" skull for thee.\"");
						UI_remove_npc_face1();
						PETRA->show_npc_face0(0x0000);
					}
					say("\"",
						var0004,
						" guilders is where I stand.\"");
				}
			}
		}
	}
	return 0;
}

extern void Func097F 0x97F (var var0000, var var0001, var var0002);
extern var Func0920 0x920 ();

void Func0855 0x855 (var var0000) {
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;
	var var0008;
	var var0009;
	var var000A;
	var var000B;
	var var000C;

	var0001 = find_nearby(0x03B5, 0x0014, MASK_NONE);
	if (var0000 == 0x0009) {
		Func097F(item, "@Stand back...@", 0x0000);
		if (var0001) {
			var0002 = [0x0465, 0x099C, 0x0000];
			si_path_run_usecode(var0002, PATH_SUCCESS, item, Func00E4, true);
		}
	}
	if (var0000 == 0x000A) {
		var0003 = UI_find_nearby_avatar(0x010F) & UI_find_nearby_avatar(0x0110);
		var0004 = false;
		for (var0007 in var0003 with var0005 to var0006) {
			var0008 = Func0920();
			var0008 = script var0001 {
				frame 1;
				repeat 6 {
					next frame cycle;
				};
			};
			var0004 = true;
		}
		var0008 = script item {
			face west;
			continue;
			repeat 4 {
				actor frame bowing;
				actor frame standing;
			};
		};
		var0008 = script var0003 after 20 ticks {
			nohalt;
			call Func00E4;
		};
	}
	if (var0000 == 0x0002) {
		Func097F(item, "@Oooh, my back...@", 0x000C);
		var0009 = find_nearby(0x010F, 0x0014, MASK_NONE);
		if (var0009) {
			if (var0009->npc_nearby()) {
				var0008 = script var0009 after 20 ticks {
					nohalt;
					call Func00E4;
				};
			} else {
				var000A = var0009->get_object_position();
				var0008 = var0009->set_last_created();
				if (var0008) {
					var000A[0x0003] = 0x0000;
					var0008 = UI_update_last_created(var000A);
				}
			}
		}
	}
	var0009 = find_nearby(0x010F, 0x0014, MASK_NONE);
	for (var0008 in var0009 with var000B to var000C) {
		var000A = var0009->get_object_position();
		if ((var000A[0x0001] == 0x0469) && (var000A[0x0002] == 0x0998)) {
			var0008 = var0009->set_item_quality(0x004B);
		}
	}
}

extern void Func097F 0x97F (var var0000, var var0001, var var0002);

void Func0856 0x856 () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;

	Func097F(item, "@Attack him!@", 0x0000);
	if (UI_part_of_day() < DAWN) {
		var0000 = 0x0003;
	} else {
		var0000 = 0x0006;
	}
	while (var0000 > 0x0000) {
		var0001 = UI_create_new_object2(0x02B3, [0x0000, 0x0000, 0x0000]);
		if (var0001) {
			var0001->set_schedule_type(IN_COMBAT);
			var0001->set_alignment(EVIL);
			AVATAR->set_oppressor(var0001);
			var0002 = var0001->approach_avatar(0x0050, 0x0028);
			var0003 = UI_get_random(0x0006);
			if (var0003 == 0x0001) {
				Func097F(var0001, "@Lor glak!@", UI_get_random(0x0014));
			}
			if (var0003 == 0x0002) {
				Func097F(var0001, "@Ska ska krak!@", UI_get_random(0x0014));
			}
			if (var0003 == 0x0003) {
				Func097F(var0001, "@Grik!@", UI_get_random(0x0014));
			}
		}
		var0000 -= 0x0001;
	}
	var0002 = set_npc_prop(HEALTH, 27);
	abort;
}

extern var Func099B 0x99B (var var0000, var var0001, var var0002, var var0003, var var0004, var var0005, var var0006);

void Func0857 0x857 () {
	var var0000;
	var var0001;
	var var0002;

	var0000 = PARTY->count_objects(0x034A, QUALITY_ANY, 0x000F);
	if (var0000 > 0x0001) {
		say("\"Thou dost have more than one! How many art thou willing to sell?\"");
		var0001 = UI_input_numeric_value(0x0000, var0000, 0x0001, 0x0000);
		if (var0001 != 0x0000) {
			var0000 = UI_remove_party_items(var0001, 0x034A, QUALITY_ANY, 0x000F, 0x0000);
			var0002 = 0x0078 * var0001;
			var0000 = Func099B(AVATAR, var0002, 0x03B8, QUALITY_ANY, FRAME_ANY, 0x0000, true);
			if (var0001 == 0x0001) {
				say("\"I will take thy Stoneheart and give thee ",
					var0002,
					" guilders for it...\"");
				say("\"There. 'Tis done!\"");
			} else {
				say("\"I will take thy ",
					var0001,
					" Stonehearts and give thee ",
					var0002,
					" guilders for them...\"");
				say("\"There. 'Tis done!\"");
			}
		} else {
			say("\"But thou said thou wouldst sell the Stoneheart!\"");
		}
	} else {
		say("\"There. 'Tis done!\"");
		var0000 = UI_remove_party_items(0x0001, 0x034A, QUALITY_ANY, 0x000F, 0x0000);
		var0000 = Func099B(AVATAR, 0x0078, 0x03B8, QUALITY_ANY, FRAME_ANY, 0x0000, true);
	}
}

extern var Func0954 0x954 ();
extern var Func0957 0x957 (var var0000);
extern var Func0955 0x955 ();
extern var Func085B 0x85B (var var0000, var var0001);
extern var Func0943 0x943 (var var0000, var var0001, var var0002, var var0003, var var0004, var var0005, var var0006, var var0007);
extern var Func0992 0x992 (var var0000, var var0001, var var0002, var var0003);

void Func0858 0x858 () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;
	var var0008;
	var var0009;
	var var000A;
	var var000B;
	var var000C;
	var var000D;

	var0000 = Func0954();
	UI_push_answers();
	var0001 = true;
	var0002 = ["nothing", "sleeping", "healing", "light", "curing", "awakening", "protection", "invisibility"];
	var0003 = [0x0000, 0x0154, 0x0154, 0x0154, 0x0154, 0x0154, 0x0154, 0x0154];
	var0004 = [FRAME_ANY, 0x0000, 0x0001, 0x0006, 0x0002, 0x0004, 0x0005, 0x0007];
	var0005 = [0x0000, 0x0055, 0x0064, 0x0032, 0x004B, 0x0041, 0x0096, 0x00F0];
	var0006 = [0x0000, 0x0028, 0x0032, 0x0019, 0x002D, 0x001E, 0x004B, 0x0087];
	var0007 = 0x03B8;
	var0008 = [0x0000, 0x0001, 0x0001, 0x0001, 0x0001, 0x0001, 0x0001, 0x0001];
	var0009 = [0x0000, 0x0001, 0x0001, 0x0001, 0x0001, 0x0001, 0x0001, 0x0001];
	while (var0001) {
		var000A = Func0957(var0002);
		if (var000A == 0x0001) {
			say("\"Later then, ",
				var0000,
				".\"");
			var0001 = false;
			continue;
		}
		var000B = var0005[var000A];
		var000C = 0x0000;
		if (var000A == 0x0002) {
			say("\"That will be ",
				var000B,
				" guilders. If thou dost sleep poorly, this is the perfect solution, ",
				var0000,
				".\"");
			say("\"Wilt thou accept?\"");
		}
		if (var000A == 0x0003) {
			say("\"I sell mine healing potions for ",
				var000B,
				" guilders each.\"");
			say("\"How doth that sound?\"");
		}
		if (var000A == 0x0004) {
			say("\"I will sell a potion of illumination to thee for the fair price of ",
				var000B,
				" guilders.\"");
			say("\"Dost thou agree?\"");
		}
		if (var000A == 0x0005) {
			say("\"",
				var000B,
				" guilders is a small price to pay if thou art in need of removing poisons from thy body, ",
				var0000,
				".\"");
			say("\"Is the price acceptable?\"");
		}
		if (var000A == 0x0006) {
			say("\"This potion, of course, will awaken anyone... or anything... from the deepest slumber. ",
				var000B,
				" guilders is the price.\"");
			say("\"Is the price acceptable to thee, ",
				var0000,
				"?\"");
		}
		if (var000A == 0x0007) {
			say("\"I can sell this to thee for ",
				var000B,
				" guilders. The efficacy of this potion is guaranteed, ",
				var0000,
				"!\"");
			say("\"Dost thou agree, ",
				var0000,
				"?\"");
		}
		if (var000A == 0x0008) {
			say("\"Needless to say, this is a very useful potion, ",
				var0000,
				". ",
				var000B,
				" guilders is an excellent price, if I do say so myself.\"");
			say("\"What dost thou say?\"");
		}
		if (var000B == var0006[var000A]) {
			if (Func0955()) {
				var000D = var000B;
			} else {
				var000D = 0x0000;
			}
		} else {
			var000D = Func085B(var0005[var000A], var0006[var000A]);
		}
		if (var000D > 0x0000) {
			if (var0009[var000A] == 0x0001) {
				say("\"How many wouldst thou like?\"");
				var000C = Func0943(var0003[var000A], var0004[var000A], 0x0001, var0007, var000D, 0x000A, 0x0001, false);
			} else {
				var000C = Func0943(var0003[var000A], var0004[var000A], 0x0001, var0007, var000D, 0x0000, 0x0001, false);
			}
		}
		if (var000C == 0x0001) {
			say("\"Good luck with thy purchase, ",
				var0000,
				".\"");
		} else if (var000C == 0x0002) {
			say("\"Thine hands are full, ",
				var0000,
				"!\"");
		} else if (var000C == 0x0003) {
			var000A = Func0992(0x0001, (("@But " + var0000) + ", we have not the guilders to purchase this.@"), 0x0000, false);
			if (var000A != AVATAR) {
				POTHOS->show_npc_face0(0x0000);
				say("\"I do not give my merchandise away!\"");
			} else {
				say("\"I am sorry, but thou dost not have enough guilders to purchase this!\"");
			}
			if (0x001F < (POTHOS->get_npc_id() + 0x0006)) {
				POTHOS->set_npc_id(0x001F);
			} else {
				POTHOS->set_npc_id(POTHOS->get_npc_id() + 0x0006);
			}
		}
		say("\"Dost thou desire another purchase?\"");
		var0001 = Func0955();
	}
	UI_pop_answers();
}

extern var Func0954 0x954 ();
extern var Func0957 0x957 (var var0000);
extern var Func0955 0x955 ();
extern var Func085B 0x85B (var var0000, var var0001);
extern var Func0943 0x943 (var var0000, var var0001, var var0002, var var0003, var var0004, var var0005, var var0006, var var0007);
extern var Func0992 0x992 (var var0000, var var0001, var var0002, var var0003);

void Func0859 0x859 () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;
	var var0008;
	var var0009;
	var var000A;
	var var000B;
	var var000C;
	var var000D;

	var0000 = Func0954();
	UI_push_answers();
	var0001 = true;
	var0002 = ["nothing", "black pearls", "mandrake", "garlic", "spider silk", "ash", "worm heart"];
	var0003 = [0x0000, 0x034A, 0x034A, 0x034A, 0x034A, 0x034A, 0x034A];
	var0004 = [FRAME_ANY, 0x0000, 0x0003, 0x0004, 0x0006, 0x0007, 0x000A];
	var0005 = [0x0000, 0x0032, 0x004B, 0x0008, 0x0023, 0x0024, 0x0064];
	var0006 = [0x0000, 0x0019, 0x002D, 0x0005, 0x0013, 0x0014, 0x003C];
	var0007 = 0x03B8;
	var0008 = [0x0000, 0x0001, 0x0001, 0x0001, 0x0001, 0x0001, 0x0001];
	var0009 = [0x0000, 0x0001, 0x0001, 0x0001, 0x0001, 0x0001, 0x0001];
	while (var0001) {
		var000A = Func0957(var0002);
		if (var000A == 0x0001) {
			say("\"As thou dost wish, ",
				var0000,
				".\"");
			var0001 = false;
			continue;
		}
		var000B = var0005[var000A];
		var000C = 0x0000;
		if (var000A == 0x0002) {
			say("\"My black pearls are sought after from across Serpent Isle for their potency. Surely ",
				var000B,
				" guilders is an equitable price?\"");
			say("\"Dost thou accept?\"");
		}
		if (var000A == 0x0003) {
			say("\"",
				var000B,
				" guilders each for a mandrake root, which is a most excellent reagent for powerful spells.\"");
			say("\"Dost thou find this price acceptable?\"");
		}
		if (var000A == 0x0004) {
			say("\"For the fair price of ",
				var000B,
				" guilders, I can sell thee garlic that is most efficacious for spellcasting.\"");
			say("\"Dost thou agree?\"");
		}
		if (var000A == 0x0005) {
			say("\"",
				var000B,
				" guilders for the finest spun silk thou canst find, ",
				var0000,
				".\"");
			say("\"Is the price acceptable?\"");
		}
		if (var000A == 0x0006) {
			say("\"I went to great lengths to acquire the ash from Furnace itself! ",
				var000B,
				" guilders is the asking price.\"");
			say("\"Wilt thou accept this price?\"");
		}
		if (var000A == 0x0007) {
			say("\"Ah, these worm hearts are most precious, ",
				var0000,
				", and needless to say, they are very difficult to procure! I am asking ",
				var000B,
				" guilders each for these fine jewels.\"");
			say("\"What dost thou think, ",
				var0000,
				"?\"");
		}
		if (var000B == var0006[var000A]) {
			if (Func0955()) {
				var000D = var000B;
			} else {
				var000D = 0x0000;
			}
		} else {
			var000D = Func085B(var0005[var000A], var0006[var000A]);
		}
		if (var000D > 0x0000) {
			if (var0009[var000A] == 0x0001) {
				say("\"How many wouldst thou like?\"");
				var000C = Func0943(var0003[var000A], var0004[var000A], 0x0001, var0007, var000D, 0x0014, 0x0001, false);
			} else {
				var000C = Func0943(var0003[var000A], var0004[var000A], 0x0001, var0007, var000D, 0x0000, 0x0001, false);
			}
		}
		if (var000C == 0x0001) {
			say("\"Best of luck with thy purchase, ",
				var0000,
				".\"");
		} else if (var000C == 0x0002) {
			say("\"I believe that thine hands are full, ",
				var0000,
				"!\"");
		} else if (var000C == 0x0003) {
			var000A = Func0992(0x0001, (("@But " + var0000) + ", we have not the guilders to purchase this.@"), 0x0000, false);
			if (var000A != AVATAR) {
				POTHOS->show_npc_face0(0x0000);
				say("\"Ah... it dost appear that thy purse is empty, ",
					var0000,
					".\"");
			} else {
				say("\"I do not give my merchandise away! Thou dost not have the guilders to purchase this!\"");
			}
			if (0x001F < (POTHOS->get_npc_id() + 0x0006)) {
				POTHOS->set_npc_id(0x001F);
			} else {
				POTHOS->set_npc_id(POTHOS->get_npc_id() + 0x0006);
			}
		}
		say("\"Dost thou desire another purchase?\"");
		var0001 = Func0955();
	}
	UI_pop_answers();
}

extern var Func0954 0x954 ();
extern var Func0957 0x957 (var var0000);
extern var Func0955 0x955 ();
extern var Func085B 0x85B (var var0000, var var0001);
extern var Func0943 0x943 (var var0000, var var0001, var var0002, var var0003, var var0004, var var0005, var var0006, var var0007);
extern var Func0992 0x992 (var var0000, var var0001, var var0002, var var0003);

void Func085A 0x85A () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;
	var var0008;
	var var0009;
	var var000A;
	var var000B;
	var var000C;
	var var000D;
	var var000E;

	var0000 = Func0954();
	UI_push_answers();
	var0001 = true;
	var0002 = ["nothing", "Magic Leggings", "Magic Boots", "Magic Axe", "Sword of Defense", "Magic Bolts", "Glass Sword"];
	var0003 = [0x0000, 0x02AE, 0x024B, 0x0228, 0x0237, 0x01A1, 0x025C];
	var0004 = [FRAME_ANY, 0x0000, 0x0001, 0x0000, 0x0000, 0x0000, 0x0000];
	var0005 = [0x0000, 0x0226, 0x0064, 0x0258, 0x04B0, 0x00C8, 0x05DC];
	var0006 = [0x0000, 0x0226, 0x0064, 0x0258, 0x04B0, 0x00C8, 0x05DC];
	var0007 = 0x03B8;
	var0008 = [0x0000, 0x0001, 0x0001, 0x0001, 0x0001, 0x000A, 0x0001];
	var0009 = [0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0001, 0x0000];
	while (var0001) {
		var000A = Func0957(var0002);
		if (var000A == 0x0001) {
			say("\"Drop by again, ",
				var0000,
				".\"");
			var0001 = false;
			continue;
		}
		var000B = var0005[var000A];
		var000C = 0x0000;
		if (var000A == 0x0002) {
			say("\"Well, for a warrior such as thou art, I suppose that magic leggings will prove useful. I will sell a pair to thee for ",
				var000B,
				" guilders.\"");
			say("\"Wilt thou buy?\"");
		}
		if (var000A == 0x0003) {
			say("\"Hmmm... a pair of magic boots will protect thee quite well. I offer a pair for ",
				var000B,
				" guilders.\"");
			say("\"Wilt thou take it?\"");
		}
		if (var000A == 0x0004) {
			say("\"I do not recall who enchanted my magic axes, but let me assure thee, they are well constructed! I can sell thee one for ",
				var000B,
				" guilders.\"");
			say("\"Dost thou agree?\"");
		}
		if (var000A == 0x0005) {
			say("\"Ah, thou hast chosen what I consider to be the ultimate weapon for a warrior born! The Sword of Defense will protect thee just as well as plate armour, but without the encumbrance and weight. I can sell thee one for ",
				var000B,
				" guilders.\"");
			say("\"Dost thou accept the price?\"");
		}
		if (var000A == 0x0006) {
			say("\"For the low cost of ",
				var000B,
				" guilders I can sell thee ten magic bolts. They are more accurate and far more deadly than the mundane variety.\"");
			say("\"Is the price acceptable?\"");
			var000D = "magic bolts, in bundles of ten,";
		}
		if (var000A == 0x0007) {
			say("\"Some say that the Glass Sword is the deadliest weapon one can aspire to wield. I do not know for certain, but rest assured that it is most lethal. For ",
				var000B,
				" guilders it is thine.\"");
			say("\"Wilt thou agree to this price?\"");
		}
		if (var000B == var0006[var000A]) {
			if (Func0955()) {
				var000E = var000B;
			} else {
				say("\"Perhaps another time, ",
					var0000,
					".\"");
				var000E = 0x0000;
			}
		} else {
			var000E = Func085B(var0005[var000A], var0006[var000A]);
		}
		if (var000E > 0x0000) {
			if (var0009[var000A] == 0x0001) {
				say("\"How many ",
					var000D,
					" wouldst thou like?\"");
				var000C = Func0943(var0003[var000A], var0004[var000A], var0008[var000A], var0007, var000E, 0x0005, 0x0001, false);
			} else {
				var000C = Func0943(var0003[var000A], var0004[var000A], 0x0001, var0007, var000E, 0x0000, 0x0001, false);
			}
		}
		if (var000C == 0x0001) {
			say("\"Good luck with thy purchase, ",
				var0000,
				".\"");
		} else if (var000C == 0x0002) {
			say("\"Thine hands are full, ",
				var0000,
				"!\"");
		} else if (var000C == 0x0003) {
			var000A = Func0992(0x0001, (("@But " + var0000) + ", we have not the guilders to purchase this.@"), 0x0000, false);
			if (var000A != AVATAR) {
				POTHOS->show_npc_face0(0x0000);
				say("\"I do not give my merchandise away!\"");
			} else {
				say("\"I am sorry, but thou dost not have enough guilders to purchase this!\"");
			}
			if (0x001F < (POTHOS->get_npc_id() + 0x0006)) {
				POTHOS->set_npc_id(0x001F);
			} else {
				POTHOS->set_npc_id(POTHOS->get_npc_id() + 0x0006);
			}
		}
		say("\"Dost thou wish something else?\"");
		var0001 = Func0955();
	}
	UI_pop_answers();
}

extern var Func0954 0x954 ();
extern var Func0956 0x956 (var var0000);
extern var Func0999 0x999 (var var0000, var var0001, var var0002, var var0003, var var0004, var var0005, var var0006);
extern var Func0955 0x955 ();

var Func085B 0x85B (var var0000, var var0001) {
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;
	var var0008;
	var var0009;
	var var000A;
	var var000B;
	var var000C;
	var var000D;
	var var000E;
	var var000F;

	var0002 = Func0954();
	var0003 = var0000;
	var0004 = (var0001 / 0x0003) * 0x0002;
	var0005 = 0x000F - (POTHOS->get_npc_id() / 0x0002);
	var0006 = 0x0000;
	var0007 = 0x0001;
	var0008 = 0x0000;
	var0009 = 0x0002;
	var000A = POTHOS->get_npc_id();
	while (var0007) {
		var000B = Func0956(["yes", "no", "haggle"]);
		if (var000B == "no") {
			return 0x0000;
		}
		if (var000B == "yes") {
			var000C = 0x0000;
		} else {
			var000D = Func0999(var0003, var0001, var0009, var0004, var0008, var0005, var0006);
			var0008 += 0x0001;
			var0006 = var000D[0x0004];
			var000C = var000D[0x0003];
			var000E = var0003;
			var0003 = var000D[0x0002];
			var0004 = var000D[0x0001];
		}
		var000F = UI_get_random(0x0003);
		if (var000C < 0x0002) {
			if (var0003 < (var0001 + ((var0000 - var0001) / 0x0004))) {
				if (var000F == 0x0001) {
					say("\"I shall never live this down, if thou dost tell anyone...\"");
				}
				if (var000F == 0x0002) {
					say("\"It is rare to find one who trades as well as thee...\"");
				}
				if (var000F == 0x0003) {
					say("\"Would that I had more stock, that I might make a better deal!\"");
				}
			} else if (var0003 < (var0001 + ((var0000 - var0001) / 0x0003))) {
				if (var000F == 0x0001) {
					say("\"I offer only the finest merchandise at the fairest prices!\"");
				}
				if (var000F == 0x0002) {
					say("\"It would do me better to tell everyone that thou hadst stolen this from me!\"");
				}
				if (var000F == 0x0003) {
					say("\"I could almost suspect thee of charming me...\"");
				}
			} else if (var0003 < (var0001 + ((var0000 - var0001) / 0x0002))) {
				if (var000F == 0x0001) {
					say("\"I think we have both made a good deal, ",
						var0002,
						".\"");
				}
				if (var000F == 0x0002) {
					say("\"Trading with thee is most challenging, ",
						var0002,
						".\"");
				}
				if (var000F == 0x0003) {
					say("\"There are not many others who sell such things, ",
						var0002,
						".\"");
				}
			} else {
				if (var000F == 0x0001) {
					say("\"Thou art a fine customer... Return any time!\"");
				}
				if (var000F == 0x0002) {
					say("\"May fortune favor thee, ",
						var0002,
						"!\"");
				}
				if (var000F == 0x0003) {
					say("\"If I had more stock, ",
						var0002,
						", I could offer thee a better price. \"");
				}
			}
			say("\"Wilt thou agree on a price of ",
				var0003,
				" guilders, ",
				var0002,
				"?\"");
			if (Func0955()) {
				if (var000A > 0x0001) {
					POTHOS->set_npc_id(var000A - 0x0002);
				}
				return var0003;
			}
			if (var000F == 0x0001) {
				say("\"Thou didst agree! I had not thought that thou wouldst go back on thy word!\"");
			}
			if (var000F == 0x0002) {
				say("\"Is this the way the Avatar deals?\"");
			}
			if (var000F == 0x0003) {
				say("\"I shall be sure to let the Council know of thine underhanded dealing, ",
					var0002,
					"!\"");
			}
			if (0x001F < (var000A + 0x000A)) {
				POTHOS->set_npc_id(0x001F);
			} else {
				POTHOS->set_npc_id(var000A + 0x000A);
			}
			return 0x0000;
		}
		if (var0006 == 0x0001) {
			if (var000C == 0x0005) {
				say("\"I said that ",
					var0003,
					" was my final offer. Dost thou accept?\"");
				if (var000A < 0x001C) {
					POTHOS->set_npc_id(var000A + 0x0004);
				}
				if (Func0955()) {
					return var0003;
				}
				var0007 = 0x0000;
			} else {
				say("\"",
					var0003,
					" guilders is my final offer. Take it or leave it...\"");
				if (var000A < 0x001E) {
					POTHOS->set_npc_id(var000A + 0x0002);
				}
			}
		} else {
			if (var000C == 0x0002) {
				if (var000F == 0x0001) {
					say("\"None of the Mages care to bargain as thou dost... How doth ",
						var0003,
						" guilders sound?\"");
				}
				if (var000F == 0x0002) {
					say("\"Thou art a worthy opponent! Wilt thou agree on ",
						var0003,
						" guilders?\"");
				}
				if (var000F == 0x0003) {
					say("\"I offer thee ",
						var0003,
						" guilders. Dost thou accept?\"");
				}
			}
			if (var000C == 0x0003) {
				if (var000F == 0x0001) {
					say("\"I have so little to sell now... Perhaps ",
						var0003,
						" guilders?\"");
				}
				if (var000F == 0x0002) {
					say("\"Let me think... ",
						var0003,
						" guilders?\"");
				}
				if (var000F == 0x0003) {
					say("\"How shall I live! ",
						var0003,
						" guilders?\"");
				}
			}
			if (var000C == 0x0004) {
				if (var000F == 0x0001) {
					say("\"I cannot possibly accept less than ",
						var0003,
						"\tguilders!\"");
					say("\"What dost thou say to this?\"");
				}
				if (var000F == 0x0002) {
					say("\"Supply and demand... ",
						var0003,
						" guilders, no less.\"");
				}
				if (var000F == 0x0003) {
					say("\"I am not the fool everyone thinks me. I will not accept less than ",
						var0003,
						" guilders.\"");
				}
			}
			if (var000C == 0x0005) {
				var0003 = var000E;
				if (var000F == 0x0001) {
					say("\"I would rather endure the Mountains of Freedom! ",
						var0003,
						" guilders is what I offer.\"");
				}
				if (var000F == 0x0002) {
					say("\"I am not a child to be so misled! ",
						var0003,
						" guilders, and no less!\"");
				}
				if (var000F == 0x0003) {
					say("\"If I accepted such a price, I would have to close my shop and begin begging!\"");
					say("\"",
						var0003,
						" guilders is where I stand.\"");
				}
				if (var000A < 0x001F) {
					POTHOS->set_npc_id(var000A + 0x0001);
				}
			}
		}
	}
	return 0;
}

extern var Func09A0 0x9A0 (var var0000, var var0001);

void Func085C 0x85C () {
	var var0000;
	var var0001;

	var0000 = RABINDRINATH->find_direction(AVATAR);
	var0001 = script RABINDRINATH {
		face var0000;
		actor frame raise_2h;
		actor frame raise_1h;
		actor frame reach_1h;
		actor frame cast_up;
		actor frame cast_out;
		actor frame strike_2h;
		actor frame standing;
	};
	var0001 = script Func09A0(0x0000, 0x0001) after 10 ticks {
		call Func04B5;
	};
}

void Func085D 0x85D (var var0000, var var0001) {
	var var0002;

	var0002 = RABINDRINATH->get_object_position();
	UI_sprite_effect(ANIMATION_LIGHTNING, var0002[0x0001], var0002[0x0002], 0x0000, 0x0000, 0x0000, LOOP_ONCE);
	UI_sprite_effect(ANIMATION_PURPLE_BUBBLES, var0002[0x0001], var0002[0x0002], 0x0000, 0x0000, 0x0000, LOOP_ONCE);
	RABINDRINATH->move_object([var0000, var0001, 0x0000]);
	RABINDRINATH->set_new_schedules(MIDNIGHT, TEND_SHOP, [var0000, var0001]);
	RABINDRINATH->run_schedule();
}

extern var Func0954 0x954 ();
extern var Func0957 0x957 (var var0000);
extern var Func0955 0x955 ();
extern var Func0860 0x860 (var var0000, var var0001);
extern var Func0943 0x943 (var var0000, var var0001, var var0002, var var0003, var var0004, var var0005, var var0006, var var0007);
extern var Func0992 0x992 (var var0000, var var0001, var var0002, var var0003);

void Func085E 0x85E () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;
	var var0008;
	var var0009;
	var var000A;
	var var000B;
	var var000C;
	var var000D;
	var var000E;
	var var000F;
	var var0010;
	var var0011;
	var var0012;

	var0000 = Func0954();
	UI_push_answers();
	var0001 = true;
	var0002 = ["nothing", "jerky", "fish", "sausage", "roast lamb", "honey cake"];
	var0003 = [0x0000, 0x0179, 0x0179, 0x0179, 0x0179, 0x0179];
	var0004 = [FRAME_ANY, 0x000F, 0x000D, 0x0007, 0x000E, 0x0006];
	var0005 = [0x0000, 0x0014, 0x0016, 0x0019, 0x0023, 0x000A];
	var0006 = [0x0000, 0x000C, 0x000D, 0x000A, 0x0013, 0x0006];
	var0007 = 0x03B8;
	var0008 = [0x0000, 0x0002, 0x0001, 0x0001, 0x0001, 0x0001];
	var0009 = [0x0000, 0x0001, 0x0001, 0x0001, 0x0001, 0x0001];
	if (UI_is_pc_female()) {
		var000A = "Milady";
	} else {
		var000A = "Milord";
	}
	say("\"So what hast thou an appetite for, ",
		var0000,
		"?\"");
	while (var0001) {
		var000B = Func0957(var0002);
		if (var000B == 0x0001) {
			say("\"Perhaps another time, then.\"");
			var0001 = false;
			continue;
		}
		var000C = var0005[var000B];
		var000D = 0x0000;
		var000E = UI_die_roll(0x0001, 0x0005);
		if (var000E == 0x0001) {
			var000F = "Dost thou accept?";
		}
		if (var000E == 0x0002) {
			var000F = "Wilt thou have some?";
		}
		if (var000E == 0x0003) {
			var000F = "Wilt thou pay such a charge?";
		}
		if (var000E == 0x0004) {
			var000F = var000A + ", dost thou agree?";
		}
		if (var000E == 0x0005) {
			var000F = var000A + ", is this a price that thou canst pay?";
		}
		if (var000B == 0x0002) {
			say("\"I am afraid that the price is ",
				var000C,
				" guilders for two strips of jerky... these being terrible times and all.\"");
			say("\"",
				var000F,
				"\"");
			var0010 = "strips of jerky, in bunches of two,";
		}
		if (var000B == 0x0003) {
			say("\"No one prepares fish better than my Petra!\"");
			say("\"The dinner costs ",
				var000C,
				" guilders, but if I were not such an honest innkeeper I would charge more and make a fortune!\"");
			say("\"",
				var000F,
				"\"");
			var0010 = "fish dinners";
		}
		if (var000B == 0x0004) {
			say("\"Petra's sausage is very good. ",
				var000C,
				" guilders is my price.\"");
			say("\"",
				var000F,
				"\"");
			var0010 = "sausages";
		}
		if (var000B == 0x0005) {
			say("\"Personally, ",
				var0000,
				", this is my favorite meal that Petra prepares! ",
				var000C,
				" guilders is what I charge.\"");
			say("\"",
				var000F,
				"\"");
			var0010 = "lamb roasts";
		}
		if (var000B == 0x0006) {
			say("\"",
				var000C,
				" guilders will buy thee the sweetest honey cake thou hast ever tasted.\"");
			say("\"",
				var000F,
				"\"");
			var0010 = "honey cakes";
		}
		if (var000C == var0006[var000B]) {
			if (Func0955()) {
				var0011 = var000C;
			} else {
				var0011 = 0x0000;
			}
		} else {
			var0011 = Func0860(var0005[var000B], var0006[var000B]);
		}
		if (var0011 > 0x0000) {
			if (var0009[var000B] == 0x0001) {
				say("\"How many ",
					var0010,
					" wouldst thou like?\"");
				var000D = Func0943(var0003[var000B], var0004[var000B], var0008[var000B], var0007, var0011, 0x0014, 0x0001, false);
			} else {
				var000D = Func0943(var0003[var000B], var0004[var000B], var0008[var000B], var0007, var0011, 0x0000, 0x0001, false);
			}
		}
		if (var000D == 0x0001) {
			say("\"I'm certain that thou wilt enjoy thy meal, ",
				var0000,
				".\"");
		} else if (var000D == 0x0002) {
			say("\"I believe thou canst not carry so much food, ",
				var0000,
				".\"");
		} else if (var000D == 0x0003) {
			var0012 = Func0992(0x0001, (("@But " + var0000) + ", we have not the guilders to pay for this.@"), 0x0000, false);
			if (var0012 != AVATAR) {
				ROCCO->show_npc_face0(0x0000);
				say("\"Well, I hate to see thee go hungry, but Petra and I can not afford to feed thee for free. I am sorry, ",
					var0000,
					".\"");
			} else {
				say("\"Thou dost not have enough guilders for that!\"");
			}
			if (0x001F < (ROCCO->get_npc_id() + 0x0006)) {
				ROCCO->set_npc_id(0x001F);
			} else {
				ROCCO->set_npc_id(ROCCO->get_npc_id() + 0x0006);
			}
		}
		say("\"Wouldst thou care for more?\"");
		var0001 = Func0955();
	}
	UI_pop_answers();
}

extern var Func0954 0x954 ();
extern var Func0953 0x953 ();
extern var Func0957 0x957 (var var0000);
extern var Func0955 0x955 ();
extern var Func0860 0x860 (var var0000, var var0001);
extern var Func0943 0x943 (var var0000, var var0001, var var0002, var var0003, var var0004, var var0005, var var0006, var var0007);
extern var Func0992 0x992 (var var0000, var var0001, var var0002, var var0003);

void Func085F 0x85F () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;
	var var0008;
	var var0009;
	var var000A;
	var var000B;
	var var000C;
	var var000D;
	var var000E;
	var var000F;
	var var0010;

	var0000 = Func0954();
	var0001 = Func0953();
	UI_push_answers();
	var0002 = true;
	var0003 = ["nothing", "wine", "mead", "ale"];
	var0004 = [0x0000, 0x0268, 0x0268, 0x0268];
	var0005 = [FRAME_ANY, 0x0000, 0x0005, 0x0003];
	var0006 = [0x0000, 0x000F, 0x0014, 0x0007];
	var0007 = [0x0000, 0x0008, 0x000B, 0x0004];
	var0008 = 0x03B8;
	var0009 = [0x0000, 0x0001, 0x0001, 0x0001];
	var000A = [0x0000, 0x0001, 0x0001, 0x0001];
	say("\"So what hast thou a thirst for, ",
		var0000,
		"?\"");
	while (var0002) {
		var000B = Func0957(var0003);
		if (var000B == 0x0001) {
			say("\"Remember, these wares shall be here when thou dost return!\"");
			var0002 = false;
			continue;
		}
		var000C = var0006[var000B];
		var000D = 0x0000;
		if (var000B == 0x0002) {
			say("\"I must charge the steep fee of ",
				var000C,
				" guilders, considering the terrible state of trade with the mainland. Is this a price that thou canst pay?\"");
			var000E = "wine bottles";
		}
		if (var000B == 0x0003) {
			say("\"We have a most delectable brew for thee, sweetly flavored with the honey of bees raised in the mountain highlands.\"");
			say("\"Surely at a price of ",
				var000C,
				" guilders, thou wilt accept some?\"");
			var000E = "bottles of mead";
		}
		if (var000B == 0x0004) {
			say("\"This ale is weak, imported from the mainland, but I must still charge ",
				var000C,
				" guilders for it. Wilt thou pay such a charge?\"");
			var000E = "flasks of ale";
		}
		if (var000C == var0007[var000B]) {
			if (Func0955()) {
				var000F = var000C;
			} else {
				var000F = 0x0000;
			}
		} else {
			var000F = Func0860(var0006[var000B], var0007[var000B]);
		}
		if (var000F > 0x0000) {
			if (var000A[var000B] == 0x0001) {
				say("\"How many ",
					var000E,
					" wouldst thou like?\"");
				var000D = Func0943(var0004[var000B], var0005[var000B], var0009[var000B], var0008, var000F, 0x0014, 0x0001, false);
			} else {
				var000D = Func0943(var0004[var000B], var0005[var000B], var0009[var000B], var0008, var000F, 0x0000, 0x0001, false);
			}
		}
		if (var000D == 0x0001) {
			say("\"Cheers, ",
				var0000,
				"!\"");
		} else if (var000D == 0x0002) {
			say("\"Thou shouldst not travel so heavily burdened -- I do not think that thou canst bear the bottles that thou desirest!\"");
		} else if (var000D == 0x0003) {
			var0010 = Func0992(0x0001, (("@But " + var0001) + ", we lack adequate funds!@"), 0x0000, false);
			if (var0010 != AVATAR) {
				ROCCO->show_npc_face0(0x0000);
				say("\"Then thou'rt not drinking here!\"");
			} else {
				say("\"Thou dost not have the guilders to pay me!\"");
			}
			if (0x001F < (ROCCO->get_npc_id() + 0x0006)) {
				ROCCO->set_npc_id(0x001F);
			} else {
				ROCCO->set_npc_id(ROCCO->get_npc_id() + 0x0006);
			}
		}
		say("\"Wouldst thou care for more?\"");
		var0002 = Func0955();
	}
	UI_pop_answers();
}

extern var Func0954 0x954 ();
extern var Func0956 0x956 (var var0000);
extern var Func0999 0x999 (var var0000, var var0001, var var0002, var var0003, var var0004, var var0005, var var0006);
extern var Func0942 0x942 (var var0000);
extern var Func0992 0x992 (var var0000, var var0001, var var0002, var var0003);
extern var Func0955 0x955 ();
extern void Func094E 0x94E (var var0000, var var0001);

var Func0860 0x860 (var var0000, var var0001) {
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;
	var var0008;
	var var0009;
	var var000A;
	var var000B;
	var var000C;
	var var000D;
	var var000E;
	var var000F;
	var var0010;
	var var0011;
	var var0012;
	var var0013;

	var0002 = Func0954();
	var0003 = UI_is_pc_female();
	var0004 = var0000;
	var0005 = (var0001 / 0x0003) * 0x0002;
	var0006 = 0x000F - (ROCCO->get_npc_id() / 0x0002);
	var0007 = 0x0000;
	var0008 = 0x0001;
	var0009 = 0x0000;
	var000A = 0x0002;
	var000B = ROCCO->get_npc_id();
	while (var0008) {
		var000C = Func0956(["yes", "no", "haggle"]);
		if (var000C == "no") {
			return 0x0000;
		}
		if (var000C == "yes") {
			var000D = 0x0000;
		} else {
			var000E = Func0999(var0004, var0001, var000A, var0005, var0009, var0006, var0007);
			var0009 += 0x0001;
			var0007 = var000E[0x0004];
			var000D = var000E[0x0003];
			var000F = var0004;
			var0004 = var000E[0x0002];
			var0005 = var000E[0x0001];
		}
		var0010 = UI_get_random(0x0003);
		if (var000D < 0x0002) {
			if (var0004 < (var0001 + ((var0000 - var0001) / 0x0004))) {
				if (var0010 == 0x0001) {
					say("\"Please do not mention this to Petra -- she would never forgive me for lowering my prices like this.\"");
				}
				if (var0010 == 0x0002) {
					say("\"At this price, I might as well sell the inn and go live in a hut! Thou dost drive a hard bargain, ",
						var0002,
						".\"");
				}
				if (var0010 == 0x0003) {
					say("\"I cannot believe that thou hast out-bargained me so...\"");
					if (Func0942(PETRA)) {
						PETRA->show_npc_face1(0x0000);
						say("\"Thou art too old to be an innkeeper, Rocco! Thy mind grows soft, like an over-ripe fruit.\"");
						UI_remove_npc_face1();
						ROCCO->show_npc_face0(0x0000);
						say("\"Isn't that the truth...\"");
					}
				}
			} else if (var0004 < (var0001 + ((var0000 - var0001) / 0x0003))) {
				if (var0010 == 0x0001) {
					say("\"Our prices are fair here at the Blue Boar, eh?\"");
				}
				if (var0010 == 0x0002) {
					say("\"Yesterday, thou wouldst not have found me in such a generous mood as this. I should starve, if I sold goods at this price every day!\"");
				}
				if (var0010 == 0x0003) {
					say("\"Thou hast a bargaining tongue, my friend. It reminds me of when I was thine age...\"");
					if (var0003) {
						var0011 = "lass";
					} else {
						var0011 = "lad";
					}
					say("\"Hast thou ever considered a change of employment? I'll be retiring someday, and perhaps a young ",
						var0011,
						" such as thyself might be interested in running an inn...\"");
					if (var0003) {
						var0012 = "her";
					} else {
						var0012 = "his";
					}
					var0013 = Func0992(0x0001, (("@I think not, innkeeper. The Avatar is not one to let grass grow under " + var0012) + " feet.@"), 0x0000, false);
				}
			} else if (var0004 < (var0001 + ((var0000 - var0001) / 0x0002))) {
				if (var0010 == 0x0001) {
					say("\"Most fair, if I do say so myself.\"");
				}
				if (var0010 == 0x0002) {
					say("\"I shall not become a rich man from customers like thee...\"");
				}
				if (var0010 == 0x0003) {
					say("\"And let me remind thee that we give service with a smile around here. 'Tis why the Blue Boar Inn is famous throughout these parts.\"");
				}
			} else {
				if (var0010 == 0x0001) {
					say("\"Thou hast made me a happy man, ",
						var0002,
						".\"");
				}
				if (var0010 == 0x0002) {
					say("\"Thou art a blessing to this inn, thee and thy companions!\"");
				}
				if (var0010 == 0x0003) {
					say("\"In times like these, I must charge high prices or close...\"");
				}
			}
			say("\"We have agreed on a price of ",
				var0004,
				" guilders, ",
				var0002,
				"?\"");
			if (Func0955()) {
				if (var000B > 0x0001) {
					ROCCO->set_npc_id(var000B - 0x0002);
				}
				return var0004;
			}
			if (var0010 == 0x0001) {
				say("\"What? I thought we had an agreement.\"");
			}
			if (var0010 == 0x0002) {
				say("\"Then be gone with thee -- I have no time to play games.\"");
			}
			if (var0010 == 0x0003) {
				say("\"Dost thou think me a fool, to argue with me only to change thy mind? I shall spread the word about thee in this town, wait and see!\"");
			}
			if (0x001F < (var000B + 0x000A)) {
				ROCCO->set_npc_id(0x001F);
			} else {
				ROCCO->set_npc_id(var000B + 0x000A);
			}
			return 0x0000;
		}
		if (var0007 == 0x0001) {
			if (var000D == 0x0005) {
				say("\"Look, ",
					var0002,
					", I said that ",
					var0004,
					" was my final offer. Dost thou accept?\"");
				if (var000B < 0x001C) {
					ROCCO->set_npc_id(var000B + 0x0004);
				}
				if (Func0955()) {
					return var0004;
				}
				var0008 = 0x0000;
			} else {
				say("\"Very well. ",
					var0004,
					" guilders is my final offer.\"");
				if (var000B < 0x001E) {
					ROCCO->set_npc_id(var000B + 0x0002);
				}
			}
		} else {
			if (var000D == 0x0002) {
				if (var0010 == 0x0001) {
					say("\"It pleases me to do business with such a worthy soul. How doth ",
						var0004,
						" guilders sound?\"");
				}
				if (var0010 == 0x0002) {
					say("\"May the Spirit of Truth light thy way, dear friend. So, have we agreed on ",
						var0004,
						" guilders?\"");
				}
				if (var0010 == 0x0003) {
					say("\"My price is ",
						var0004,
						" guilders -- a special price for my good friend, if I may call thee friend. Dost thou accept?\"");
				}
			}
			if (var000D == 0x0003) {
				if (var0010 == 0x0001) {
					say("\"These are hard times, and goods are scarce... ",
						var0004,
						" guilders?\"");
				}
				if (var0010 == 0x0002) {
					say("\"I'm not certain... Perhaps ",
						var0004,
						"?\"");
				}
				if (var0010 == 0x0003) {
					say("\"But I must make enough to pay for repairs on this inn, which is drafty in the winter... Perhaps ",
						var0004,
						" guilders?\"");
				}
			}
			if (var000D == 0x0004) {
				if (var0010 == 0x0001) {
					say("\"Petra, come and hear this! The customer jests with me!\"");
					if (Func0942(PETRA)) {
						Func094E(PETRA, (("@We cannot possibly accept less than " + var0004) + " guilders.@"));
						ROCCO->show_npc_face0(0x0000);
					} else {
						say("\"",
							var0004,
							" guilders is as low as I can go.\"");
					}
					say("\"What dost thou say to this?\"");
				}
				if (var0010 == 0x0002) {
					say("\"But the storms have severed contact with the mainland, and my costs are soaring! Surely thou canst see that I can go no lower than ",
						var0004,
						" guilders.\"");
				}
				if (var0010 == 0x0003) {
					say("\"Thou art not talking to a fool, ",
						var0002,
						". I deserve no less than ",
						var0004,
						" guilders.\"");
				}
			}
			if (var000D == 0x0005) {
				var0004 = var000F;
				if (var0010 == 0x0001) {
					say("\"I would rather be eaten by rats than accept such a pitiful offer. My previous price stands, at ",
						var0004,
						" guilders.\"");
				}
				if (var0010 == 0x0002) {
					say("\"Thou must think that I am deaf, blind and stupid, to accept such a deal. ",
						var0004,
						" guilders, and no less!\"");
				}
				if (var0010 == 0x0003) {
					say("\"Why, if I accepted such a price as this, I should have to break Petra into scrap metal and sell her to make ends meet!\"");
					if (Func0942(PETRA)) {
						PETRA->show_npc_face1(0x0000);
						say("\"This person is a lout, my dear. Cast the fool out the door.\"");
						UI_remove_npc_face1();
						ROCCO->show_npc_face0(0x0000);
					}
					say("\"",
						var0004,
						" guilders is where I stand.\"");
				}
				if (var000B < 0x001F) {
					ROCCO->set_npc_id(var000B + 0x0001);
				}
			}
		}
	}
	return 0;
}

extern var Func0955 0x955 ();
extern var Func09B3 0x9B3 (var var0000);

void Func0861 0x861 () {
	var var0000;

	if (SELINA->get_cont_items(SHAPE_ANY, QUALITY_ANY, FRAME_ANY)) {
		say("\"I have many items in my possession which may aid thee. Wouldst thou like to have them?\"");
		if (Func0955()) {
			say("\"Here they are.\"");
			gflags[SELINA_HAS_BELONGINGS] = false;
			var0000 = Func09B3(SELINA);
			if (var0000[0x0001] != 0x0000) {
				say("\"Thy companions will have to help thee carry some of these things.\"");
			}
			if (var0000[0x0002] > 0x0000) {
				var0000 = var0000[0x0002];
				say("\"Thou art encumbered like a pack mule!\"");
				if (var0000 > 0x0001) {
					say("\"Since thou canst not carry these remaining ",
						var0000,
						" items, they shall go at thy feet.\"");
				} else {
					say("\"Since thou dost not have enough room for this last item, it shall go at thy feet.\"");
				}
			}
		} else {
			gflags[SELINA_HAS_BELONGINGS] = true;
			say("\"If that is what thou dost want, so be it.\"");
		}
	}
}

void Func0862 0x862 () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;

	var0000 = SELINA->get_cont_items(SHAPE_ANY, QUALITY_ANY, FRAME_ANY);
	var0001 = SELINA->get_object_position();
	for (var0004 in var0000 with var0002 to var0003) {
		if (!((var0004->get_item_shape() == 0x0128) && (var0004->get_item_frame() == 0x0002))) {
			var0004 = var0004->set_last_created();
			if (var0004) {
				var0004->set_item_flag(OKAY_TO_TAKE);
				var0004 = UI_update_last_created(var0001);
				if (!var0004) {
					var0004 = UI_update_last_created([(var0001[0x0001] - 0x0002), var0001[0x0002], var0001[0x0003]]);
				}
				if (!var0004) {
					var0004 = UI_update_last_created([var0001[0x0001], (var0001[0x0002] - 0x0002), var0001[0x0003]]);
				}
				if (!var0004) {
					var0004 = UI_update_last_created([(var0001[0x0001] + 0x0002), var0001[0x0002], var0001[0x0003]]);
				}
				if (!var0004) {
					var0004 = UI_update_last_created([var0001[0x0001], (var0001[0x0002] + 0x0002), var0001[0x0003]]);
				}
			}
		}
	}
}

extern var Func0955 0x955 ();
extern var Func09B3 0x9B3 (var var0000);

void Func0863 0x863 () {
	var var0000;

	if (SHAMINO->get_cont_items(SHAPE_ANY, QUALITY_ANY, FRAME_ANY)) {
		say("\"I am carrying many items, some of which may be of use to thee. Wouldst thou care to have these back?\"");
		if (Func0955()) {
			say("\"Here they are.\"");
			gflags[SHAMINO_HAS_BELONGINGS] = false;
			var0000 = Func09B3(SHAMINO);
			if (var0000[0x0001] != 0x0000) {
				say("\"Thy friends will have to help carry these things.\"");
			}
			if (var0000[0x0002] > 0x0000) {
				var0000 = var0000[0x0002];
				if (var0000 > 0x0001) {
					say("\"Since thou canst not carry these remaining ",
						var0000,
						" items, I will place them at thy feet.\"");
				} else {
					say("\"Since thou dost not have enough room for this last item, I will place it at thy feet.\"");
				}
			}
		} else {
			gflags[SHAMINO_HAS_BELONGINGS] = true;
			say("\"If thou changest thy mind, thou hast but to return and ask again.\"");
		}
	}
}

extern var Func099B 0x99B (var var0000, var var0001, var var0002, var var0003, var var0004, var var0005, var var0006);
extern void Func097F 0x97F (var var0000, var var0001, var var0002);
extern var Func09A0 0x9A0 (var var0000, var var0001);

void Func0864 0x864 () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;

	var0000 = UI_remove_party_items(0x0001, 0x0289, 0x0000, 0x0000, true);
	clear_item_flag(SI_ZOMBIE);
	say("\"Thank thee, Avatar! Thank thee for returning to me the Comb of Beauty. Take this key...\"");
	var0001 = Func099B(AVATAR, 0x0001, 0x0281, 0x000F, 0x0002, 0x0000, true);
	say("\"...And go to the southeast corner of the Throne Room. Seek the illusionary wall -- it will reveal the path to the treasure thou dost seek.\"");
	say("\"The key will allow thee to open the gate to the Treasury Room. The armour that I did promise thee is stored there.\"");
	gflags[RETURNED_COMB_OF_BEAUTY] = false;
	UI_remove_npc_face0();
	Func097F(item, "@A thousand thanks!@", 0x0000);
	var0002 = get_object_position();
	var0002[0x0001] -= var0002[0x0003] / 0x0002;
	var0002[0x0002] -= var0002[0x0003] / 0x0002;
	UI_sprite_effect(ANIMATION_PURPLE_BUBBLES, var0002[0x0001], var0002[0x0002], 0x0000, 0x0000, 0x0000, LOOP_ONCE);
	var0003 = YELINDA->get_npc_object()->get_item_shape();
	YELINDA->set_polymorph(var0003);
	YELINDA->set_new_schedules([MIDNIGHT, MORNING, NOON], [SLEEP, EAT, WANDER], [0x0436, 0x06C9, 0x03AD, 0x06DD, 0x0407, 0x075B]);
	UI_sprite_effect(ANIMATION_GREEN_BUBBLES, (var0002[0x0001] + 0x0002), (var0002[0x0002] + 0x0002), 0x0000, 0x0000, 0x0000, LOOP_ONCE);
	BRACCUS->move_object([(var0002[0x0001] + 0x0002), (var0002[0x0002] + 0x0002), 0x0000]);
	BRACCUS->set_schedule_type(WAIT);
	YELINDA->set_schedule_type(WAIT);
	AVATAR->set_item_flag(DONT_MOVE);
	UI_end_conversation();
	var0001 = script BRACCUS after 10 ticks {
		nohalt;
		actor frame standing;
		call Func04D4;
	};
	gflags[RETURNED_COMB_OF_BEAUTY] = true;
	UI_remove_npc_face0();
	Func097F(YELINDA, "@I am restored!@", 0x0002);
	UI_play_sound_effect(0x0051);
	UI_play_music(0x003F, Func09A0(0x0005, 0x0001));
	abort;
}

extern var Func0955 0x955 ();
extern var Func0956 0x956 (var var0000);
extern var Func097D 0x97D (var var0000, var var0001, var var0002, var var0003, var var0004);
extern var Func099B 0x99B (var var0000, var var0001, var var0002, var var0003, var var0004, var var0005, var var0006);

void Func0865 0x865 () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;
	var var0008;
	var var0009;
	var var000A;
	var var000B;
	var var000C;
	var var000D;
	var var000E;
	var var000F;

	var0000 = true;
	say("\"To barter coins, I charge a small fee of the money exchanged. Dost thou agree?\"");
	if (Func0955()) {
		while (var0000) {
			say("\"What coinage dost thou desire?\"");
			var0001 = Func0956(["Monetari", "Guilders", "Filari", "Gold Coins"]);
			do {
				if (var0001 == "Monetari") {
					say("\"What dost thou care to exchange for monetari?\"");
					var0002 = 0x03B7;
					var0003 = ["Nothing"];
					if (Func097D(PARTY, 0x0001, 0x03B8, QUALITY_ANY, FRAME_ANY)) {
						var0003 &= "Guilders";
					}
					if (Func097D(PARTY, 0x0001, 0x03B4, QUALITY_ANY, FRAME_ANY)) {
						var0003 &= "Filari";
					}
					if (Func097D(PARTY, 0x0001, 0x0284, QUALITY_ANY, FRAME_ANY)) {
						var0003 &= "Gold Coins";
					}
					var0004 = Func0956(var0003);
					if (var0004 == "Nothing") {
						say("\"Thou shouldst not waste my time so! I am a busy man!\"");
						abort;
					}
					if (var0004 == "Guilders") {
						say("\"I can give thee 1 monetari for every 3 guilders thou hast.\"");
						var0005 = 0x03B8;
					}
					if (var0004 == "Filari") {
						say("\"I can give thee 1 monetari for every 4 filari thou hast.\"");
						var0005 = 0x03B4;
					}
					if (var0004 == "Gold Coins") {
						say("\"I can give thee 1 monetari for every 2 gold coins thou hast.\"");
						var0005 = 0x0284;
					}
					say("\"Dost thou agree to my rate?\"");
					if (Func0955() == true) {
						var0006 = PARTY->count_objects(var0005, QUALITY_ANY, FRAME_ANY);
						if (var0006 > 0x01F4) {
							var0006 = 0x01F4;
						}
						if (var0006 != 0x0000) {
							say("\"How many ",
								var0004,
								" wouldst thou like to exchange?\"");
							var0007 = UI_input_numeric_value(0x0000, var0006, 0x0001, 0x0000);
							if (var0007 == 0x0000) {
								say("\"Please make up thy mind!\"");
								break;
							}
							if (var0004 == "Guilders") {
								var0008 = var0007 / 0x0003;
								var0009 = 0x0006;
							}
							if (var0004 == "Filari") {
								var0008 = var0007 / 0x0004;
								var0009 = 0x0008;
							}
							if (var0004 == "Gold Coins") {
								var0008 = var0007 / 0x0002;
								var0009 = 0x0004;
							}
							var000A = var0008 / 0x0019;
							var000B = var0008 - var000A;
							if (var0008 == 0x0000) {
								say("\"Thou must offer at least ",
									var0009,
									" ",
									var0004,
									" to exchange for ",
									var0001,
									"!\"");
								break;
							}
							if (var0008 == 0x0001) {
								say("\"My fee will leave thee with nothing!\"");
								break;
							}
							if (var0008 <= 0x0019) {
								var000A = 0x0001;
								var000B = var0008 - var000A;
							}
							if (var0007 >= 0x0001) {
								var000C = UI_remove_party_items(var0007, var0005, QUALITY_ANY, FRAME_ANY, false);
								say("\"I will take thy ",
									var0007,
									" ",
									var0004,
									" and give thee ",
									var0008,
									" Monetari, subtracting my charge of ",
									var000A,
									" Monetari, for a final sum of ",
									var000B,
									" Monetari given to thee.\"");
								var000D = Func099B(AVATAR, var000B, var0002, QUALITY_ANY, FRAME_ANY, false, true);
								say("\"The coins are thine!\"");
							} else {
								say("\"Please make up thy mind!\"");
							}
						} else {
							say("\"Thou dost not have any ",
								var0004,
								" to exchange for ",
								var0001,
								"!\"");
						}
					} else {
						say("\"Thou wilt find no better rates...\"");
					}
				}
				if (var0001 == "Guilders") {
					say("\"Which coin dost thou care to exchange for guilders?\"");
					var0002 = 0x03B8;
					var0003 = ["Nothing"];
					if (Func097D(PARTY, 0x0001, 0x03B7, QUALITY_ANY, FRAME_ANY)) {
						var0003 &= "Monetari";
					}
					if (Func097D(PARTY, 0x0001, 0x03B4, QUALITY_ANY, FRAME_ANY)) {
						var0003 &= "Filari";
					}
					if (Func097D(PARTY, 0x0001, 0x0284, QUALITY_ANY, FRAME_ANY)) {
						var0003 &= "Gold Coins";
					}
					var0004 = Func0956(var0003);
					if (var0004 == "Nothing") {
						say("\"Thou shouldst not waste my time so! I am a busy man!\"");
						abort;
					}
					if (var0004 == "Monetari") {
						say("\"I can give thee 3 guilders for every 1 monetari thou hast.\"");
						var0005 = 0x03B7;
					}
					if (var0004 == "Filari") {
						say("\"I can give thee 3 guilders for every 4 filari thou hast.\"");
						var0005 = 0x03B4;
					}
					if (var0004 == "Gold Coins") {
						say("\"I can give thee 3 guilders for every 2 gold coins thou hast.\"");
						var0005 = 0x0284;
					}
					say("\"Dost thou agree to my rate?\"");
					if (Func0955() == true) {
						var0006 = PARTY->count_objects(var0005, QUALITY_ANY, FRAME_ANY);
						if (var0006 > 0x01F4) {
							var0006 = 0x01F4;
						}
						if (var0006 != 0x0000) {
							say("\"How many ",
								var0004,
								" wouldst thou like to exchange?\"");
							var0007 = UI_input_numeric_value(0x0000, var0006, 0x0001, 0x0000);
							if (var0007 == 0x0000) {
								say("\"Please make up thy mind!\"");
								break;
							}
							if (var0004 == "Monetari") {
								var0008 = var0007 * 0x0003;
							}
							if (var0004 == "Filari") {
								var0008 = (var0007 * 0x0003) / 0x0004;
								var0009 = 0x0003;
							}
							if (var0004 == "Gold Coins") {
								var0008 = (var0007 * 0x0003) / 0x0002;
								var0009 = 0x0002;
							}
							var000A = var0008 / 0x0019;
							var000B = var0008 - var000A;
							var000E = "Guilders";
							var000F = "Guilders";
							if (var0008 == 0x0000) {
								say("\"Thou must offer at least ",
									var0009,
									" ",
									var0004,
									" to exchange for ",
									var0001,
									"!\"");
								break;
							}
							if (var0008 == 0x0001) {
								say("\"My fee will leave thee with nothing!\"");
								break;
							}
							if (var0008 <= 0x0019) {
								var000A = 0x0001;
								var000B = var0008 - var000A;
							}
							if (var000B == 0x0001) {
								var000E = "Guilder";
							}
							if (var000A == 0x0001) {
								var000F = "Guilder";
							}
							if (var0007 >= 0x0001) {
								var000C = UI_remove_party_items(var0007, var0005, QUALITY_ANY, FRAME_ANY, false);
								say("\"I will take thy ",
									var0007,
									" ",
									var0004,
									" and give thee ",
									var0008,
									" Guilders, subtracting my charge of ",
									var000A,
									" ",
									var000F,
									", for a final sum of ",
									var000B,
									" ",
									var000E,
									" given to thee.\"");
								var000D = Func099B(AVATAR, var000B, var0002, QUALITY_ANY, FRAME_ANY, false, true);
								say("\"The coins are thine!\"");
							} else {
								say("\"Please make up thy mind!\"");
							}
						} else {
							say("\"Thou dost not have any ",
								var0004,
								" to exchange for ",
								var0001,
								"!\"");
						}
					} else {
						say("\"Thou wilt find no better rates...\"");
					}
				}
				if (var0001 == "Filari") {
					say("\"Which coin dost thou care to exchange for filari?\"");
					var0002 = 0x03B4;
					var0003 = ["Nothing"];
					if (Func097D(PARTY, 0x0001, 0x03B7, QUALITY_ANY, FRAME_ANY)) {
						var0003 &= "Monetari";
					}
					if (Func097D(PARTY, 0x0001, 0x03B8, QUALITY_ANY, FRAME_ANY)) {
						var0003 &= "Guilders";
					}
					if (Func097D(PARTY, 0x0001, 0x0284, QUALITY_ANY, FRAME_ANY)) {
						var0003 &= "Gold Coins";
					}
					var0004 = Func0956(var0003);
					if (var0004 == "Nothing") {
						say("\"Thou shouldst not waste my time so! I am a busy man!\"");
						abort;
					}
					if (var0004 == "Monetari") {
						say("\"I can give thee 4 filari for every 1 monetari thou hast.\"");
						var0005 = 0x03B7;
					}
					if (var0004 == "Guilders") {
						say("\"I can give thee 4 filari for every 3 guilders thou hast.\"");
						var0005 = 0x03B8;
					}
					if (var0004 == "Gold Coins") {
						say("\"I can give thee 2 filari for every 1 gold coin thou hast.\"");
						var0005 = 0x0284;
					}
					say("\"Dost thou agree to my rate?\"");
					if (Func0955() == true) {
						var0006 = PARTY->count_objects(var0005, QUALITY_ANY, FRAME_ANY);
						if (var0006 > 0x01F4) {
							var0006 = 0x01F4;
						}
						if (var0006 != 0x0000) {
							say("\"How many ",
								var0004,
								" wouldst thou like to exchange?\"");
							var0007 = UI_input_numeric_value(0x0000, var0006, 0x0001, 0x0000);
							if (var0007 == 0x0000) {
								say("\"Please make up thy mind!\"");
								break;
							}
							if (var0004 == "Monetari") {
								var0008 = var0007 * 0x0004;
							}
							if (var0004 == "Guilders") {
								var0008 = (var0007 * 0x0004) / 0x0003;
								var0009 = 0x0002;
							}
							if (var0004 == "Gold Coins") {
								var0008 = var0007 * 0x0002;
								if (var0007 == 0x0001) {
									var0004 = "Gold Coin";
								}
							}
							var000A = var0008 / 0x0019;
							var000B = var0008 - var000A;
							if (var0008 == 0x0000) {
								say("\"Thou must offer at least ",
									var0009,
									" ",
									var0004,
									" to exchange for ",
									var0001,
									"!\"");
								break;
							}
							if (var0008 == 0x0001) {
								say("\"My fee will leave thee with nothing!\"");
								break;
							}
							if (var0008 <= 0x0019) {
								var000A = 0x0001;
								var000B = var0008 - var000A;
							}
							if (var0007 >= 0x0001) {
								var000C = UI_remove_party_items(var0007, var0005, QUALITY_ANY, FRAME_ANY, false);
								say("\"I will take thy ",
									var0007,
									" ",
									var0004,
									" and give thee ",
									var0008,
									" Filari, subtracting my charge of ",
									var000A,
									" Filari, for a final sum of ",
									var000B,
									" Filari given to thee.\"");
								var000D = Func099B(AVATAR, var000B, var0002, QUALITY_ANY, FRAME_ANY, false, true);
								say("\"The coins are thine!\"");
							} else {
								say("\"Please make up thy mind!\"");
							}
						} else {
							say("\"Thou dost not have any ",
								var0004,
								" to exchange for ",
								var0001,
								"!\"");
						}
					} else {
						say("\"Thou wilt find no better rates...\"");
					}
				}
				if (var0001 == "Gold Coins") {
					say("\"Which coin dost thou care to exchange for gold?\"");
					var0002 = 0x0284;
					var0003 = ["Nothing"];
					if (Func097D(PARTY, 0x0001, 0x03B7, QUALITY_ANY, FRAME_ANY)) {
						var0003 &= "Monetari";
					}
					if (Func097D(PARTY, 0x0001, 0x03B4, QUALITY_ANY, FRAME_ANY)) {
						var0003 &= "Filari";
					}
					if (Func097D(PARTY, 0x0001, 0x03B8, QUALITY_ANY, FRAME_ANY)) {
						var0003 &= "Guilders";
					}
					var0004 = Func0956(var0003);
					if (var0004 == "Nothing") {
						say("\"Thou shouldst not waste my time so! I am a busy man!\"");
						abort;
					}
					if (var0004 == "Monetari") {
						say("\"I can give thee 2 gold coins for every 1 monetari thou hast.\"");
						var0005 = 0x03B7;
					}
					if (var0004 == "Guilders") {
						say("\"I can give thee 2 gold coins for every 3 guilders thou hast.\"");
						var0005 = 0x03B8;
					}
					if (var0004 == "Filari") {
						say("\"I can give thee 1 gold coin for every 2 filari thou hast.\"");
						var0005 = 0x03B4;
					}
					if (var0004 == "Gold Nuggets") {
						say("\"I can give thee 20 gold coins for every 1 gold nugget thou hast.\"");
						var0005 = 0x0285;
					}
					say("\"Dost thou agree to my rate?\"");
					if (Func0955() == true) {
						var0006 = PARTY->count_objects(var0005, QUALITY_ANY, FRAME_ANY);
						if (var0006 > 0x01F4) {
							var0006 = 0x01F4;
						}
						if (var0006 != 0x0000) {
							say("\"How many ",
								var0004,
								" wouldst thou like to exchange?\"");
							var0007 = UI_input_numeric_value(0x0000, var0006, 0x0001, 0x0000);
							if (var0007 == 0x0000) {
								say("\"Please make up thy mind!\"");
								break;
							}
							if (var0004 == "Monetari") {
								var0008 = var0007 * 0x0002;
							}
							if (var0004 == "Guilders") {
								var0008 = (var0007 * 0x0002) / 0x0003;
								var0009 = 0x0003;
							}
							if (var0004 == "Filari") {
								var0008 = var0007 / 0x0002;
								var0009 = 0x0004;
							}
							var000A = var0008 / 0x0019;
							var000B = var0008 - var000A;
							var000E = "Gold Coins";
							var000F = "Gold Coins";
							if (var0008 == 0x0000) {
								say("\"Thou must offer at least ",
									var0009,
									" ",
									var0004,
									" to exchange for ",
									var0001,
									"!\"");
								break;
							}
							if (var0008 == 0x0001) {
								say("\"My fee will leave thee with nothing!\"");
								break;
							}
							if (var0008 <= 0x0019) {
								var000A = 0x0001;
								var000B = var0008 - var000A;
							}
							if (var000B == 0x0001) {
								var000E = "Gold Coin";
							}
							if (var000A == 0x0001) {
								var000F = "Gold Coin";
							}
							if (var0007 >= 0x0001) {
								var000C = UI_remove_party_items(var0007, var0005, QUALITY_ANY, FRAME_ANY, false);
								say("\"I will take thy ",
									var0007,
									" ",
									var0004,
									" and give thee ",
									var0008,
									" Gold Coins, subtracting my charge of ",
									var000A,
									" ",
									var000F,
									", for a final sum of ",
									var000B,
									" ",
									var000E,
									" given to thee.\"");
								var000D = Func099B(AVATAR, var000B, var0002, QUALITY_ANY, FRAME_ANY, false, true);
								say("\"The coins are thine!\"");
							} else {
								say("\"Please make up thy mind!\"");
								break;
							}
						} else {
							say("\"Thou dost not have any ",
								var0004,
								" to exchange for ",
								var0001,
								"!\"");
						}
					} else {
						say("\"Thou wilt find no better rates...\"");
					}
				}
			} while (false);
			say("\"Dost thou wish to exchange more coins?\"");
			var0000 = Func0955();
		}
	} else {
		say("\"Thou wilt find no other moneychangers with such a low fee as mine!\"");
	}
}

extern var Func0957 0x957 (var var0000);
extern var Func0955 0x955 ();
extern var Func0869 0x869 (var var0000, var var0001);
extern var Func0943 0x943 (var var0000, var var0001, var var0002, var var0003, var var0004, var var0005, var var0006, var var0007);
extern var Func0992 0x992 (var var0000, var var0001, var var0002, var var0003);

void Func0866 0x866 () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;
	var var0008;
	var var0009;
	var var000A;
	var var000B;
	var var000C;
	var var000D;
	var var000E;
	var var000F;
	var var0010;
	var var0011;
	var var0012;
	var var0013;

	var0000 = "friend";
	var0001 = STANDARR->get_item_flag(MET);
	if (!var0001) {
		var0000 = "stranger";
	}
	UI_push_answers();
	var0002 = true;
	var0003 = ["nothing", "scale mail", "chain armour", "plate mail", "chain leggings", "plate leggings", "gauntlets", "spiked shield", "great helm", "crested helm"];
	var0004 = [0x0000, 0x023A, 0x023B, 0x023D, 0x023F, 0x0240, 0x0244, 0x0242, 0x021D, 0x021E];
	var0005 = [FRAME_ANY, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0001];
	var0006 = [0x0000, 0x0096, 0x00C8, 0x015E, 0x0064, 0x0096, 0x003C, 0x005A, 0x004B, 0x002D];
	var0007 = [0x0000, 0x0055, 0x0064, 0x00AF, 0x0032, 0x005A, 0x0023, 0x0032, 0x0028, 0x0019];
	var0008 = 0x03B7;
	var0009 = [0x0000, 0x0001, 0x0001, 0x0001, 0x0001, 0x0001, 0x0001, 0x0001, 0x0001, 0x0001];
	var000A = [0x0000, 0x0001, 0x0001, 0x0001, 0x0001, 0x0001, 0x0001, 0x0001, 0x0001, 0x0001];
	if (UI_is_pc_female()) {
		var000B = "Milady";
	} else {
		var000B = "Friend";
	}
	while (var0002) {
		say("\"What dost thou care to buy, ",
			var0000,
			"?\"");
		var000C = Func0957(var0003);
		if (var000C == 0x0001) {
			say("\"Perhaps another time, ",
				var0000,
				".\"");
			var0002 = false;
			continue;
		}
		var000D = var0006[var000C];
		var000E = 0x0000;
		var000F = UI_die_roll(0x0001, 0x0005);
		if (var000F == 0x0001) {
			var0010 = "Dost thou accept?";
		}
		if (var000F == 0x0002) {
			var0010 = "Wilt thou pay my price?";
		}
		if (var000F == 0x0003) {
			var0010 = "Dost thou find the price agreeable?";
		}
		if (var000F == 0x0004) {
			var0010 = var000B + ", dost thou agree?";
		}
		if (var000F == 0x0005) {
			var0010 = var000B + ", is the price acceptable?";
		}
		if (var000C == 0x0002) {
			say("\"",
				var000D,
				" monetari is a low price for durable scale armour, my friend.\"");
			say(var0010,
				"\"");
			var0011 = "suits of scale armour";
		}
		if (var000C == 0x0003) {
			say("\"If thou art serious about fighting, then thou shouldst purchase the best chain armour found in Monitor. I charge ",
				var000D,
				" monetari for a chain byrnie.\"");
			say("\"",
				var0010,
				"\"");
			var0011 = "chain byrnies";
		}
		if (var000C == 0x0004) {
			say("\"Ah, plate mail is the best armour a knight could ask for, ",
				var0000,
				". I will sell thee a suit for ",
				var000D,
				" monetari.\"");
			say("\"",
				var0010,
				"\"");
			var0011 = "suits of plate armour";
		}
		if (var000C == 0x0005) {
			say("\"I can sell thee chain leggings for ",
				var000D,
				" monetari.\"");
			say("\"",
				var0010,
				"\"");
			var0011 = "pairs of chain leggings";
		}
		if (var000C == 0x0006) {
			say("\"Plate leggings will protect thy legs very well indeed, ",
				var0000,
				". I will sell thee a pair for ",
				var000D,
				" monetari.\"");
			say("\"",
				var0010,
				"\"");
			var0011 = "pairs of plate leggings";
		}
		if (var000C == 0x0007) {
			say("\"A pair of gauntlets sell for ",
				var000D,
				" monetari.\"");
			say("\"",
				var0010,
				"\"");
			var0011 = "pairs of gauntlets";
		}
		if (var000C == 0x0008) {
			say("\"An excellent choice, friend! The spiked shield can be used in close quarters to surprise thy foe. ",
				var000D,
				" monetari is a small price to pay for one of these shields.\"");
			say("\"",
				var0010,
				"\"");
			var0011 = "spiked shields";
		}
		if (var000C == 0x0009) {
			say("\"'Tis nothing fancy, but it serves its purpose well. I can sell thee a great helm for ",
				var000D,
				" monetari.\"");
			say("\"",
				var0010,
				"\"");
			var0011 = "great helms";
		}
		if (var000C == 0x000A) {
			say("\"Most Knights of Monitor prefer the great helm, but the crested helm doth not obstruct thy view as much. I charge ",
				var000D,
				" monetari for one.\"");
			say("\"",
				var0010,
				"\"");
			var0011 = "crested helms";
		}
		if (var000D == var0007[var000C]) {
			if (Func0955()) {
				var0012 = var000D;
			} else {
				var0012 = 0x0000;
			}
		} else {
			var0012 = Func0869(var0006[var000C], var0007[var000C]);
		}
		if (var0012 > 0x0000) {
			if (var000A[var000C] == 0x0001) {
				say("\"How many ",
					var0011,
					" wouldst thou like?\"");
				var000E = Func0943(var0004[var000C], var0005[var000C], var0009[var000C], var0008, var0012, 0x0005, 0x0001, false);
			} else {
				var000E = Func0943(var0004[var000C], var0005[var000C], 0x0001, var0008, var0012, 0x0000, 0x0001, false);
			}
		}
		if (var000E == 0x0001) {
			say("\"It hath been a pleasure, ",
				var0000,
				"! Enjoy thy purchase!\"");
		} else if (var000E == 0x0002) {
			say("\"",
				var000B,
				", thine hands are full!\"");
		} else if (var000E == 0x0003) {
			var0013 = Func0992(0x0001, (("@But " + var0000) + ", we do not have the monetari to purchase this.@"), 0x0000, false);
			if (var0013 != AVATAR) {
				STANDARR->show_npc_face0(0x0000);
				say("\"If thou canst not pay, please leave!\"");
			} else {
				say("\"Thou dost not have enough monetari to purchase this...\"");
			}
			if (0x001F < (STANDARR->get_npc_id() + 0x0006)) {
				STANDARR->set_npc_id(0x001F);
			} else {
				STANDARR->set_npc_id(STANDARR->get_npc_id() + 0x0006);
			}
		}
		say("\"Dost thou want to buy more armour?\"");
		var0002 = Func0955();
	}
	UI_pop_answers();
}

extern var Func0957 0x957 (var var0000);
extern var Func0955 0x955 ();
extern var Func0869 0x869 (var var0000, var var0001);
extern var Func0943 0x943 (var var0000, var var0001, var var0002, var var0003, var var0004, var var0005, var var0006, var var0007);
extern var Func0992 0x992 (var var0000, var var0001, var var0002, var var0003);

void Func0867 0x867 () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;
	var var0008;
	var var0009;
	var var000A;
	var var000B;
	var var000C;
	var var000D;
	var var000E;
	var var000F;
	var var0010;
	var var0011;
	var var0012;
	var var0013;

	var0000 = "friend";
	var0001 = STANDARR->get_item_flag(MET);
	if (!var0001) {
		var0000 = "stranger";
	}
	UI_push_answers();
	var0002 = true;
	var0003 = ["nothing", "spear", "morning star", "bow", "arrows", "sword", "two-handed sword", "two-handed axe", "halberd", "crossbow", "quarrels"];
	var0004 = [0x0000, 0x0250, 0x0254, 0x0255, 0x02D2, 0x0257, 0x025A, 0x0259, 0x025B, 0x0256, 0x02D3];
	var0005 = [FRAME_ANY, 0x0000, 0x0000, 0x0000, 0x0007, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0007];
	var0006 = [0x0000, 0x0014, 0x0028, 0x0078, 0x0014, 0x007D, 0x00C8, 0x0096, 0x0064, 0x0091, 0x0012];
	var0007 = [0x0000, 0x000C, 0x0014, 0x003C, 0x000A, 0x0041, 0x0078, 0x005A, 0x0037, 0x004B, 0x000A];
	var0008 = 0x03B7;
	var0009 = [0x0000, 0x0001, 0x0001, 0x0001, 0x0014, 0x0001, 0x0001, 0x0001, 0x0001, 0x0001, 0x0014];
	var000A = [0x0000, 0x0001, 0x0001, 0x0001, 0x0001, 0x0001, 0x0001, 0x0001, 0x0001, 0x0001, 0x0001];
	if (UI_is_pc_female()) {
		var000B = "Milady";
	} else {
		var000B = "Milord";
	}
	while (var0002) {
		say("\"What weapon wouldst thou care to purchase?\"");
		var000C = Func0957(var0003);
		if (var000C == 0x0001) {
			say("\"Perhaps another time, ",
				var0000,
				".\"");
			var0002 = false;
			continue;
		}
		var000D = var0006[var000C];
		var000E = 0x0000;
		var000F = UI_die_roll(0x0001, 0x0005);
		if (var000F == 0x0001) {
			var0010 = "Dost thou accept?";
		}
		if (var000F == 0x0002) {
			var0010 = "Wilt thou pay my price?";
		}
		if (var000F == 0x0003) {
			var0010 = "Dost thou find the price agreeable?";
		}
		if (var000F == 0x0004) {
			var0010 = "Dost thou agree?";
		}
		if (var000F == 0x0005) {
			var0010 = "Is the price acceptable?";
		}
		if (var000C == 0x0002) {
			say("\"My spears can gut a goblin even as well as a sword can. I charge ",
				var000D,
				" monetari for one.\"");
			say(var0010,
				"\"");
			var0011 = "spears";
		}
		if (var000C == 0x0003) {
			say("\"A true Knight doth have a selection of weapons to choose from. This is an excellent weapon. The morning star sells for ",
				var000D,
				" monetari.\"");
			say("\"",
				var0010,
				"\"");
			var0011 = "morning stars";
		}
		if (var000C == 0x0004) {
			say("\"I will sell thee a bow for ",
				var000D,
				" monetari. Though most Knights do not carry these weapons, I think one should always be prepared, eh?\"");
			say("\"",
				var0010,
				"\"");
			var0011 = "bows";
		}
		if (var000C == 0x0005) {
			say("\"I can sell thee 20 arrows for ",
				var000D,
				" monetari.\"");
			say("\"",
				var0010,
				"\"");
			var0011 = "arrows, in bundles of 20,";
		}
		if (var000C == 0x0006) {
			say("\"",
				var000D,
				" monetari for the sharpest swords in all of Serpent Isle! Many of my blades have been blooded in goblin flesh, my friend.\"");
			say("\"",
				var0010,
				"\"");
			var0011 = "swords";
		}
		if (var000C == 0x0007) {
			say("\"An excellent choice, my friend! Thou wilt have a decisive edge in combat with this blade! ",
				var000D,
				" monetari is what I charge.\"");
			say("\"",
				var0010,
				"\"");
			var0011 = "two-handed swords";
		}
		if (var000C == 0x0008) {
			say("\"Not very subtle, but a goblin doth understand thine argument anyway, eh? I can sell thee a fine two-handed axe for ",
				var000D,
				" monetari.\"");
			say("\"",
				var0010,
				"\"");
			var0011 = "two-handed axes";
		}
		if (var000C == 0x0009) {
			say("\"Mine halberds are nothing fancy, but they are inexpensive and they do the job well. I can sell thee one for ",
				var000D,
				" monetari.\"");
			say("\"",
				var0010,
				"\"");
			var0011 = "halberds";
		}
		if (var000C == 0x000A) {
			say("\"Crossbows are not the most Knightly of weapons, but they are useful indeed. For ",
				var000D,
				" monetari I will sell thee one.\"");
			say("\"",
				var0010,
				"\"");
			var0011 = "crossbows";
		}
		if (var000C == 0x000B) {
			say("\"For the cost of ",
				var000D,
				" monetari I can sell thee 20 quarrels.\"");
			say("\"",
				var0010,
				"\"");
			var0011 = "quarrels, in bundles of 20,";
		}
		if (var000D == var0007[var000C]) {
			if (Func0955()) {
				var0012 = var000D;
			} else {
				var0012 = 0x0000;
			}
		} else {
			var0012 = Func0869(var0006[var000C], var0007[var000C]);
		}
		if (var0012 > 0x0000) {
			if (var000A[var000C] == 0x0001) {
				say("\"How many ",
					var0011,
					" wouldst thou like?\"");
				var000E = Func0943(var0004[var000C], var0005[var000C], var0009[var000C], var0008, var0012, 0x0005, 0x0001, false);
			} else {
				var000E = Func0943(var0004[var000C], var0005[var000C], 0x0001, var0008, var0012, 0x0000, 0x0001, false);
			}
		}
		if (var000E == 0x0001) {
			say("\"It hath been a pleasure, friend! Enjoy thy purchase!\"");
		} else if (var000E == 0x0002) {
			say("\"",
				var000B,
				", thine hands are full!\"");
		} else if (var000E == 0x0003) {
			var0013 = Func0992(0x0001, (("@But " + var0000) + ", we do not have the monetari to purchase this.@"), 0x0000, false);
			if (var0013 != AVATAR) {
				STANDARR->show_npc_face0(0x0000);
				say("\"If thou canst not pay, please leave!\"");
			} else {
				say("\"Thou dost not have enough monetari to purchase this!\"");
			}
			if (0x001F < (STANDARR->get_npc_id() + 0x0006)) {
				STANDARR->set_npc_id(0x001F);
			} else {
				STANDARR->set_npc_id(STANDARR->get_npc_id() + 0x0006);
			}
		}
		say("\"Dost thou wish to purchase more weapons?\"");
		var0002 = Func0955();
	}
	UI_pop_answers();
}

extern var Func0956 0x956 (var var0000);
extern var Func0955 0x955 ();
extern var Func099B 0x99B (var var0000, var var0001, var var0002, var var0003, var var0004, var var0005, var var0006);

void Func0868 0x868 () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;
	var var0008;
	var var0009;
	var var000A;
	var var000B;
	var var000C;
	var var000D;
	var var000E;
	var var000F;
	var var0010;
	var var0011;
	var var0012;
	var var0013;
	var var0014;
	var var0015;
	var var0016;
	var var0017;

	var0000 = "friend";
	var0001 = STANDARR->get_item_flag(MET);
	if (!var0001) {
		var0000 = "stranger";
	}
	var0002 = "Friend";
	if (UI_is_pc_female()) {
		var0002 = "Milady";
	}
	UI_push_answers();
	var0003 = true;
	var0004 = 0x03B7;
	say("\"I am interested only in buying plate, chain, or scale armour, plate or chain leggings, and great or crested helms.\"");
	while (var0003) {
		var0005 = PARTY->count_objects(0x023A, QUALITY_ANY, FRAME_ANY);
		var0006 = PARTY->count_objects(0x023B, QUALITY_ANY, FRAME_ANY);
		var0007 = PARTY->count_objects(0x023D, QUALITY_ANY, FRAME_ANY);
		var0008 = PARTY->count_objects(0x023F, QUALITY_ANY, FRAME_ANY);
		var0009 = PARTY->count_objects(0x0240, QUALITY_ANY, FRAME_ANY);
		var000A = PARTY->count_objects(0x021D, QUALITY_ANY, FRAME_ANY);
		var000B = PARTY->count_objects(0x021E, QUALITY_ANY, FRAME_ANY);
		var000C = ["nothing"];
		var000D = false;
		if (var0005) {
			var000C &= "scale armour";
			var000D = true;
		}
		if (var0006) {
			var000C &= "chain armour";
			var000D = true;
		}
		if (var0007) {
			var000C &= "plate armour";
			var000D = true;
		}
		if (var0008) {
			var000C &= "chain leggings";
			var000D = true;
		}
		if (var0009) {
			var000C &= "plate leggings";
			var000D = true;
		}
		if (var000A) {
			var000C &= "great helm";
			var000D = true;
		}
		if (var000B) {
			var000C &= "crested helm";
			var000D = true;
		}
		if (var000D == true) {
			say("\"What dost thou care to sell, friend?\"");
			var000E = Func0956(var000C);
			if (var000E == "nothing") {
				say("\"As thou dost wish.\"");
				var0003 = false;
				continue;	// Could have been 'break'
			}
			var000F = UI_die_roll(0x0001, 0x0005);
			if (var000F == 0x0001) {
				var0010 = "Dost thou accept?";
			}
			if (var000F == 0x0002) {
				var0010 = "Wilt thou sell at my price?";
			}
			if (var000F == 0x0003) {
				var0010 = "Dost thou find the price agreeable?";
			}
			if (var000F == 0x0004) {
				var0010 = var0002 + ", dost thou agree?";
			}
			if (var000F == 0x0005) {
				var0010 = var0002 + ", is the price acceptable?";
			}
			var0011 = UI_die_roll(0x0001, 0x0005);
			if (var0011 == 0x0001) {
				var0012 = "Hmmm... I am not sure.";
				var0013 = "Well... these are not the best of wares.";
			}
			if (var0011 == 0x0002) {
				var0012 = "It doth have rust on it!";
				var0013 = "They are rusted!";
			}
			if (var0011 == 0x0003) {
				var0012 = "It is not in very good condition.";
				var0013 = "They are not in very good condition.";
			}
			if (var0011 == 0x0004) {
				var0012 = var0002 + ", this will take weeks to repair!";
				var0013 = var0002 + ", these will take weeks to repair!";
			}
			if (var0011 == 0x0005) {
				var0012 = "Where didst thou find this -- buried under the ground?";
				var0013 = "Where didst thou find these -- moldering under the ground?";
			}
			if (var000E == "scale armour") {
				do {
					var0014 = 0x023A;
					var0015 = 0x001E;
					if (var0005 > 0x0001) {
						say("\"How many suits of scale armour wouldst thou care to sell?\"");
						var0016 = UI_input_numeric_value(0x0000, var0005, 0x0001, 0x0000);
						if (var0016 != 0x0001) {
							var0015 = 0x001E * var0016;
							if (var0016 == 0x0000) {
								say("\"Perhaps another time, ",
									var0000,
									"...\"");
								// I see no way other than this
								goto labelFunc0868_0785;
							}
							say("\"",
								var0013,
								"\"");
							say("\"Very well, I will buy thy ",
								var0016,
								" suits of scale armour from thee for ",
								var0015,
								" monetari.\"");
							say("\"",
								var0010,
								"\"");
							break;
						}
					}
				} while (false)
				nobreak {
					say("\"",
						var0012,
						"\"");
					say("\"Very well, I will buy this scale armour from thee for ",
						var0015,
						" monetari.\"");
					say("\"",
						var0010,
						"\"");
					var0016 = 0x0001;
				}
			}
			if (var000E == "chain armour") {
				do {
					var0014 = 0x023B;
					var0015 = 0x0032;
					if (var0006 > 0x0001) {
						say("\"How many suits of chain armour wouldst thou care to sell?\"");
						var0016 = UI_input_numeric_value(0x0000, var0006, 0x0001, 0x0000);
						if (var0016 != 0x0001) {
							var0015 = 0x0032 * var0016;
							if (var0016 == 0x0000) {
								say("\"Perhaps another time, ",
									var0000,
									"...\"");
								// I see no way other than this
								goto labelFunc0868_0785;
							}
							say("\"",
								var0013,
								"\"");
							say("\"Hmmm... I suppose I could buy thy ",
								var0016,
								" suits of chain armour from thee for ",
								var0015,
								" monetari.\"");
							say("\"",
								var0010,
								"\"");
							break;
						}
					}
				} while (false)
				nobreak {
					say("\"",
						var0012,
						"\"");
					say("\"I suppose I could pay thee ",
						var0015,
						" monetari for a suit of chain armour.\"");
					say("\"",
						var0010,
						"\"");
					var0016 = 0x0001;
				}
			}
			if (var000E == "plate armour") {
				do {
					var0014 = 0x023D;
					var0015 = 0x004B;
					if (var0007 > 0x0001) {
						say("\"How many suits of plate armour wouldst thou care to sell?\"");
						var0016 = UI_input_numeric_value(0x0000, var0007, 0x0001, 0x0000);
						if (var0016 != 0x0001) {
							var0015 = 0x004B * var0016;
							if (var0016 == 0x0000) {
								say("\"Perhaps another time, ",
									var0000,
									"...\"");
								// I see no way other than this
								goto labelFunc0868_0785;
							}
							say("\"",
								var0013,
								"\"");
							say("\"I will give thee ",
								var0015,
								" monetari for thy ",
								var0016,
								" suits of plate armour.\"");
							say("\"",
								var0010,
								"\"");
							break;
						}
					}
				} while (false)
				nobreak {
					say("\"",
						var0012,
						"\"");
					say("\"For this plate armour, I can offer ",
						var0015,
						" monetari.\"");
					say("\"",
						var0010,
						"\"");
					var0016 = 0x0001;
				}
			}
			if (var000E == "chain leggings") {
				do {
					var0014 = 0x023F;
					var0015 = 0x0019;
					if (var0008 > 0x0001) {
						say("\"How many pairs of chain leggings wouldst thou care to sell?\"");
						var0016 = UI_input_numeric_value(0x0000, var0008, 0x0001, 0x0000);
						if (var0016 != 0x0001) {
							var0015 = 0x0019 * var0016;
							if (var0016 == 0x0000) {
								say("\"Perhaps another time, ",
									var0000,
									"...\"");
								// I see no way other than this
								goto labelFunc0868_0785;
							}
							say("\"",
								var0013,
								"\"");
							say("\"Hmmm... perhaps I can give thee ",
								var0015,
								" monetari for thy ",
								var0016,
								" pairs of chain leggings.\"");
							say("\"",
								var0010,
								"\"");
							break;
						}
					}
				} while (false)
				nobreak {
					say("\"",
						var0012,
						"\"");
					say("\"So be it, I will offer ",
						var0015,
						" monetari for the chain leggings.\"");
					say("\"",
						var0010,
						"\"");
					var0016 = 0x0001;
				}
			}
			if (var000E == "plate leggings") {
				do {
					var0014 = 0x0240;
					var0015 = 0x002D;
					if (var0009 > 0x0001) {
						say("\"And how many pairs of plate leggings wouldst thou care to sell?\"");
						var0016 = UI_input_numeric_value(0x0000, var0009, 0x0001, 0x0000);
						if (var0016 != 0x0001) {
							var0015 = 0x002D * var0016;
							if (var0016 == 0x0000) {
								say("\"Perhaps another time, ",
									var0000,
									"...\"");
								// I see no way other than this
								goto labelFunc0868_0785;
							}
							say("\"",
								var0013,
								"\"");
							say("\"For thy ",
								var0016,
								" pairs of plate leggings, I can give thee ",
								var0015,
								" monetari.\"");
							say("\"",
								var0010,
								"\"");
							break;
						}
					}
				} while (false)
				nobreak {
					say("\"",
						var0012,
						"\"");
					say("\"",
						var0015,
						" monetari is what I can give thee for the pair of plate leggings.\"");
					say("\"",
						var0010,
						"\"");
					var0016 = 0x0001;
				}
			}
			if (var000E == "great helm") {
				do {
					var0014 = 0x021D;
					var0015 = 0x0014;
					if (var000A > 0x0001) {
						say("\"How many great helms wouldst thou care to sell?\"");
						var0016 = UI_input_numeric_value(0x0000, var000A, 0x0001, 0x0000);
						if (var0016 != 0x0001) {
							var0015 = 0x0014 * var0016;
							if (var0016 == 0x0000) {
								say("\"Perhaps another time, ",
									var0000,
									"...\"");
								// I see no way other than this
								goto labelFunc0868_0785;
							}
							say("\"",
								var0013,
								"\"");
							say("\"Very well...\" ~\"I can offer thee ",
								var0015,
								" monetari for thy ",
								var0016,
								" great helms.\"");
							say("\"",
								var0010,
								"\"");
							break;
						}
					}
				} while (false)
				nobreak {
					say("\"",
						var0012,
						"\"");
					say("\"Very well, I will buy thy great helm for ",
						var0015,
						" monetari.\"");
					say("\"",
						var0010,
						"\"");
					var0016 = 0x0001;
				}
			}
			if (var000E == "crested helm") {
				do {
					var0014 = 0x021E;
					var0015 = 0x000A;
					if (var000B > 0x0001) {
						say("\"How many crested helms wouldst thou care to sell?\"");
						var0016 = UI_input_numeric_value(0x0000, var000B, 0x0001, 0x0000);
						if (var0016 != 0x0001) {
							var0015 = 0x000A * var0016;
							if (var0016 == 0x0000) {
								say("\"Perhaps another time, ",
									var0000,
									"...\"");
								// I see no way other than this
								goto labelFunc0868_0785;
							}
							say("\"",
								var0013,
								"\"");
							say("\"I suppose I can give thee ",
								var0015,
								" monetari for thy ",
								var0016,
								" crested helms.\"");
							say("\"",
								var0010,
								"\"");
							break;
						}
					}
				} while (false)
				nobreak {
					say("\"",
						var0012,
						"\"");
					say("\"For this crested helm, I can give thee ",
						var0015,
						" monetari.\"");
					say("\"",
						var0010,
						"\"");
					var0016 = 0x0001;
				}
			}
			if (Func0955()) {
				var0017 = UI_remove_party_items(var0016, var0014, QUALITY_ANY, FRAME_ANY, true);
				var0017 = Func099B(AVATAR, var0015, var0004, QUALITY_ANY, FRAME_ANY, 0x0000, true);
			} else {
				say("\"Thy loss, then.\"");
			}
labelFunc0868_0785:
			say("\"Dost thou wish to sell more armour?\"");
			var0003 = Func0955();
		} else {
			say("\"Thou dost not have anything that I care to purchase!\"");
			var0003 = false;
		}
	}
	UI_pop_answers();
}

extern var Func0956 0x956 (var var0000);
extern var Func0999 0x999 (var var0000, var var0001, var var0002, var var0003, var var0004, var var0005, var var0006);
extern var Func0955 0x955 ();

var Func0869 0x869 (var var0000, var var0001) {
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;
	var var0008;
	var var0009;
	var var000A;
	var var000B;
	var var000C;
	var var000D;
	var var000E;
	var var000F;
	var var0010;
	var var0011;
	var var0012;

	var0002 = "friend";
	var0003 = STANDARR->get_item_flag(MET);
	if (!var0003) {
		var0002 = "stranger";
	}
	var0004 = UI_is_pc_female();
	if (UI_is_pc_female()) {
		var0005 = "Milady";
	} else {
		var0005 = "Milord";
	}
	var0006 = var0000;
	var0007 = (var0001 / 0x0003) * 0x0002;
	var0008 = 0x000F - (STANDARR->get_npc_id() / 0x0002);
	var0009 = 0x0000;
	var000A = 0x0001;
	var000B = 0x0000;
	var000C = 0x0002;
	var000D = STANDARR->get_npc_id();
	while (var000A) {
		var000E = Func0956(["yes", "no", "haggle"]);
		if (var000E == "no") {
			return 0x0000;
		}
		if (var000E == "yes") {
			var000F = 0x0000;
		} else {
			var0010 = Func0999(var0006, var0001, var000C, var0007, var000B, var0008, var0009);
			var000B += 0x0001;
			var0009 = var0010[0x0004];
			var000F = var0010[0x0003];
			var0011 = var0006;
			var0006 = var0010[0x0002];
			var0007 = var0010[0x0001];
		}
		var0012 = UI_get_random(0x0003);
		if (var000F < 0x0002) {
			if (var0006 < (var0001 + ((var0000 - var0001) / 0x0004))) {
				if (var0012 == 0x0001) {
					say("\"Thou hast a good eye for a bargain, ",
						var0002,
						". I am thankful that more of my customers are not like thee.\"");
				}
				if (var0012 == 0x0002) {
					say("\"",
						var0005,
						", thou hast good bargaining sense. I fear I have actually lost money in this deal.\"");
				}
				if (var0012 == 0x0003) {
					say("\"Thy trading skills are as sharp as one of my blades, ",
						var0002,
						".\"");
				}
			} else if (var0006 < (var0001 + ((var0000 - var0001) / 0x0003))) {
				if (var0012 == 0x0001) {
					say("\"Thou shouldst be glad that I like thee, ",
						var0002,
						"! 'Tis not often I lower my prices...\"");
				}
				if (var0012 == 0x0002) {
					say("\"",
						var0005,
						", I hope thou dost leave town soon! If thou stayest much longer I will be penniless!\"");
				}
				if (var0012 == 0x0003) {
					say("\"I hope thou art as fine a warrior as thou art as a trader, ",
						var0002,
						"! Thou wilt do my products honor.\"");
				}
			} else if (var0006 < (var0001 + ((var0000 - var0001) / 0x0002))) {
				if (var0012 == 0x0001) {
					say("\"Thou art paying for quality work, ",
						var0002,
						". If thou dost not agree, then thou shouldst leave.\"");
				}
				if (var0012 == 0x0002) {
					say("\"'Tis not often I have such a challenge in bargaining, ",
						var0002,
						". Please come again!\"");
				}
				if (var0012 == 0x0003) {
					say("\"",
						var0005,
						", remember that we take great pride in our work!\"");
				}
			} else {
				if (var0012 == 0x0001) {
					say("\"Many thanks, ",
						var0005,
						"!\"");
				}
				if (var0012 == 0x0002) {
					say("\"May it serve thee well, ",
						var0002,
						"!\"");
				}
				if (var0012 == 0x0003) {
					say("\"I fear the Goblin raids have raised my prices, ",
						var0002,
						". It takes time to produce quality goods, and demand hath been great.\"");
				}
			}
			say("\"Thou hast agreed to a price of ",
				var0006,
				" monetari, ",
				var0002,
				"?\"");
			if (Func0955()) {
				if (var000D > 0x0001) {
					STANDARR->set_npc_id(var000D - 0x0002);
				}
				return var0006;
			}
			if (var0012 == 0x0001) {
				say("\"'Tis unwise to change thy mind after agreeing to a firm price!\"");
			}
			if (var0012 == 0x0002) {
				say("\"Take care, ",
					var0002,
					". I am as skilled a warrior as I am a weaponsmith.\"");
			}
			if (var0012 == 0x0003) {
				say("\"Thou hast no honor! Leave, before I take thine head from thy shoulders!\"");
				abort;
			}
			if (0x001F < (var000D + 0x000A)) {
				STANDARR->set_npc_id(0x001F);
			} else {
				STANDARR->set_npc_id(var000D + 0x000A);
			}
			return 0x0000;
		}
		if (var0009 == 0x0001) {
			if (var000F == 0x0005) {
				say("\"I said that ",
					var0006,
					" was my final offer. Dost thou accept?\"");
				if (var000D < 0x001C) {
					STANDARR->set_npc_id(var000D + 0x0004);
				}
				if (Func0955()) {
					return var0006;
				}
				var000A = 0x0000;
			} else {
				say("\"",
					var0006,
					" monetari is my final offer.\"");
				if (var000D < 0x001E) {
					STANDARR->set_npc_id(var000D + 0x0002);
				}
			}
		} else {
			if (var000F == 0x0002) {
				if (var0012 == 0x0001) {
					say("\"'Tis a pleasure to trade with such an honorable person, ",
						var0002,
						". How doth ",
						var0006,
						" monetari sound?\"");
				}
				if (var0012 == 0x0002) {
					say("\"",
						var0005,
						", I shall offer thee a special price. How doth ",
						var0006,
						" monetari sound to thee?\"");
				}
				if (var0012 == 0x0003) {
					say("\"My price is ",
						var0006,
						" monetari, ",
						var0002,
						". Wilt thou accept?\"");
				}
			}
			if (var000F == 0x0003) {
				if (var0012 == 0x0001) {
					say("\"Let me think... Perhaps ",
						var0006,
						" monetari?\"");
				}
				if (var0012 == 0x0002) {
					say("\"I must reconsider... ",
						var0006,
						" monetari?\"");
				}
				if (var0012 == 0x0003) {
					say("\"Thou dost realize that I make only quality products. Perhaps ",
						var0006,
						" monetari?\"");
				}
			}
			if (var000F == 0x0004) {
				if (var0012 == 0x0001) {
					say("\"",
						var0006,
						" monetari is as low as I can go. I must keep some honor for myself.\"");
					say("\"What dost thou say to this?\"");
				}
				if (var0012 == 0x0002) {
					say("\"I cannot accept less than ",
						var0006,
						" monetari. I have a business to run.\"");
				}
				if (var0012 == 0x0003) {
					say("\"I can accept no less than ",
						var0006,
						" monetari. What would the townsfolk say?\"");
				}
			}
			if (var000F == 0x0005) {
				var0006 = var0011;
				if (var0012 == 0x0001) {
					say("\"My previous price stands, at ",
						var0006,
						" monetari. I am no fool!\"");
				}
				if (var0012 == 0x0002) {
					say("\"I am not a charity! ",
						var0006,
						" monetari, and no less!\"");
				}
				if (var0012 == 0x0003) {
					say("\"\"",
						var0006,
						" monetari is as low as I will go! I must eat and pay for my supplies...\"");
				}
				if (var000D < 0x001F) {
					STANDARR->set_npc_id(var000D + 0x0001);
				}
			}
		}
	}
	return 0;
}

extern var Func0955 0x955 ();
extern var Func09B3 0x9B3 (var var0000);

void Func086A 0x86A () {
	var var0000;

	if (STEFANO->get_cont_items(SHAPE_ANY, QUALITY_ANY, FRAME_ANY)) {
		say("\"I have many of thy belongings in my possession. Dost thou want them returned?\"");
		if (Func0955()) {
			say("\"Here they are.\"");
			gflags[STEFANO_HAS_BELONGINGS] = false;
			var0000 = Func09B3(STEFANO);
			if (var0000[0x0001] != 0x0000) {
				say("\"Thy companions will have to help thee with this burden.\"");
			}
			if (var0000[0x0002] > 0x0000) {
				var0000 = var0000[0x0002];
				if (var0000 > 0x0001) {
					say("\"Since thou canst not carry these remaining ",
						var0000,
						" items, I will place them on the ground.\"");
				} else {
					say("\"Since thou dost not have enough room for this last item, I will place it on the ground.\"");
				}
			}
		} else {
			gflags[STEFANO_HAS_BELONGINGS] = true;
			say("\"Then I will continue to keep thy belongings for thee. Thou hast but to return and ask for them again.\"");
		}
	}
}

extern var Func0953 0x953 ();
extern var Func098E 0x98E ();
extern var Func0957 0x957 (var var0000);
extern var Func095C 0x95C (var var0000, var var0001);
extern void Func095E 0x95E (var var0000, var var0001, var var0002);

void Func086B 0x86B () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;
	var var0008;
	var var0009;
	var var000A;
	var var000B;
	var var000C;
	var var000D;
	var var000E;

	var0000 = Func0953();
	var0001 = true;
	say("\"Whom dost thou wish to heal?\"");
	while (var0001) {
		var0002 = Func098E();
		var0002 = 0x0000 & var0002;
		var0003 = ["nobody"];
		for (var0006 in var0002 with var0004 to var0005) {
			if (!(var0006 == 0x0000)) {
				var0003 &= var0006->get_npc_name();
			}
		}
		var0007 = Func0957(var0003);
		var0007 = var0002[var0007];
		if (var0007 == 0x0000) {
			say("\"So be it.\"");
			break;
		}
		var0008 = var0007->get_npc_number();
		var0009 = var0007->get_item_flag(POISONED);
		var000A = Func095C(var0007, STRENGTH);
		var000B = Func095C(var0007, HEALTH);
		var000C = var0007->get_npc_name();
		var000D = "his";
		if (var000C == "Petra") {
			var000D = "her";
		}
		if (var000A > var000B) {
			var000E = var000A - var000B;
			Func095E(var0008, HEALTH, var000E);
			if (var0008 == AVATAR) {
				say("\"I have healed thee of thy wounds. Rest easy, my friend.\"");
			} else {
				say("\"I have healed thy companion ",
					var000C,
					" of ",
					var000D,
					" wounds.\"");
			}
		} else if (var0009 == false) {
			if (var0008 == AVATAR) {
				say("\"Thou seemest quite healthy!\"");
			} else {
				say("\"",
					var000C,
					" is already healthy!\"");
			}
		} else if (var0008 == AVATAR) {
			if (gflags[POISONED_BY_LYDIA] && (!gflags[CURED_LYDIA_POISON])) {
				say("\"What is this?! I have never seen the like of such a poison! I am afraid I cannot heal this, ",
					var0000,
					".\"");
				break;
			}
			say("\"Ah, this poison I can remedy. A moment... *There, 'tis done. Thou art whole once more.\"");
			AVATAR->clear_item_flag(POISONED);
		} else {
			say("\"Your companion ",
				var000C,
				" is badly poisoned. I shall remove it. *There. 'Tis done.\"");
			var0007->clear_item_flag(POISONED);
		}
	}
}

extern var Func0942 0x942 (var var0000);
extern var Func095C 0x95C (var var0000, var var0001);
extern void Func095E 0x95E (var var0000, var var0001, var var0002);

void Func086C 0x86C (var var0000) {
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;

	if (var0000->get_item_flag(DEAD)) {
		var0000->resurrect_npc();
	}
	var0000->clear_item_flag(ASLEEP);
	var0000->clear_item_flag(CHARMED);
	var0000->clear_item_flag(CURSED);
	var0000->clear_item_flag(PARALYZED);
	var0000->clear_item_flag(POISONED);
	var0000->clear_item_flag(DONT_MOVE);
	var0000->clear_item_flag(DEAD);
	if (!Func0942(var0000)) {
		var0001 = get_object_position();
		var0002 = UI_die_roll(-2, 2);
		var0003 = UI_die_roll(-2, 2);
		var0001[0x0001] += var0002;
		var0001[0x0002] += var0003;
		var0000->move_object([var0001[0x0001], var0001[0x0002], var0001[0x0003]]);
		UI_sprite_effect(ANIMATION_PURPLE_BUBBLES, var0001[0x0001], var0001[0x0002], 0x0000, 0x0000, 0x0000, LOOP_ONCE);
	}
	var0004 = Func095C(var0000, STRENGTH);
	var0005 = Func095C(var0000, HEALTH);
	var0006 = var0004 - var0005;
	Func095E(var0000, HEALTH, var0006);
	if (!var0000->get_item_flag(IN_PARTY)) {
		var0000->add_to_party();
	}
	var0000->set_schedule_type(FOLLOW_AVATAR);
	var0007 = script var0000 {
		actor frame standing;
	};
}

extern var Func08FB 0x8FB ();
extern void Func086C 0x86C (var var0000);

void Func086D 0x86D () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;

	var0000 = Func08FB();
	for (var0003 in var0000 with var0001 to var0002) {
		if (var0003 != AVATAR->get_npc_object()) {
			var0004 = var0003->get_body_npc();
			if ((var0004 == IOLO) || ((var0004 == SHAMINO) || (var0004 == DUPRE))) {
				var0005 = var0003->resurrect();
				var0004->add_to_party();
			}
		}
	}
	Func086C(DUPRE);
	Func086C(SHAMINO);
	Func086C(IOLO);
}

extern var Func099B 0x99B (var var0000, var var0001, var var0002, var var0003, var var0004, var var0005, var var0006);

void Func086E 0x86E () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;

	var0000 = PARTY->count_objects(0x02F8, QUALITY_ANY, FRAME_ANY);
	say("\"Ah, thou dost wish to sell me gems? But, of course I will buy all that thou dost have! Master Ducio has a constant need for gems in his most important works! I will buy gems from thee for 100 guilders each.\"");
	say("\"How many gems wouldst thou like to sell?\"");
	if (var0000 != 0x0000) {
		var0001 = UI_input_numeric_value(0x0000, var0000, 0x0001, 0x0000);
		if (var0001 != 0x0000) {
			var0002 = var0001 * 0x0064;
			var0003 = 0x03B8;
			var0004 = "gems";
			if (var0001 == 0x0001) {
				var0004 = "gem";
			}
			var0005 = UI_remove_party_items(var0001, 0x02F8, QUALITY_ANY, FRAME_ANY, false);
			say("\"Very well...~Here, take thy ",
				var0002,
				" guilders, and I wilt take thy ",
				var0001,
				" ",
				var0004,
				" in exchange.\"");
			var0006 = Func099B(AVATAR, var0002, var0003, QUALITY_ANY, FRAME_ANY, false, true);
		} else {
			say("\"Perhaps another time, then...\"");
		}
	} else {
		say("\"Thou dost not have any gems to sell!\"");
	}
}

extern var Func0954 0x954 ();
extern var Func0942 0x942 (var var0000);
extern void Func094E 0x94E (var var0000, var var0001);
extern var Func0957 0x957 (var var0000);
extern var Func0955 0x955 ();
extern var Func0870 0x870 (var var0000, var var0001);
extern var Func0943 0x943 (var var0000, var var0001, var var0002, var var0003, var var0004, var var0005, var var0006, var var0007);
extern var Func0992 0x992 (var var0000, var var0001, var var0002, var var0003);

void Func086F 0x86F () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;
	var var0008;
	var var0009;
	var var000A;
	var var000B;
	var var000C;
	var var000D;
	var var000E;
	var var000F;
	var var0010;
	var var0011;
	var var0012;
	var var0013;
	var var0014;

	var0000 = Func0954();
	var0001 = false;
	var0002 = UI_die_roll(0x0001, 0x0004);
	UI_push_answers();
	var0003 = true;
	var0004 = ["nothing", "cloak", "sword", "shovel", "torch", "pick", "bucket", "pitcher", "lamp", "cloth", "bread", "rolls", "cake"];
	var0005 = [0x0000, 0x00E3, 0x0257, 0x0271, 0x0253, 0x0270, 0x032A, 0x0338, 0x0150, 0x0353, 0x0179, 0x0179, 0x0179];
	var0006 = [FRAME_ANY, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0002, 0x0002, var0002, 0x0001, 0x0002, 0x0004];
	var0007 = [0x0000, 0x00C8, 0x015E, 0x0064, 0x000A, 0x008C, 0x001C, 0x001E, 0x000C, 0x0014, 0x0008, 0x0005, 0x000A];
	var0008 = [0x0000, 0x0050, 0x00A0, 0x0032, 0x0005, 0x004B, 0x000E, 0x000F, 0x0006, 0x000A, 0x0004, 0x0003, 0x0005];
	var0009 = 0x03B8;
	var000A = [0x0000, 0x0001, 0x0001, 0x0001, 0x0001, 0x0001, 0x0001, 0x0001, 0x0001, 0x0001, 0x0001, 0x0001, 0x0001];
	var000B = [0x0000, 0x0001, 0x0000, 0x0000, 0x0001, 0x0000, 0x0001, 0x0001, 0x0001, 0x0001, 0x0001, 0x0001, 0x0001];
	if (UI_is_pc_female()) {
		var000C = "Milady";
	} else {
		var000C = "Milord";
	}
	if (var0001 == false) {
		if (Func0942(DUCIO)) {
			say("\"Oh, we sell all manner of things. Cloaks, swords...\"");
			Func094E(DUCIO, "@Shovels, too...@");
			UI_remove_npc_face1();
			0x0000->set_conversation_slot();
			say("\"Yes, Master, shovels too. Pitchers and other containers. Cloth and a few weapons. We also sell baked goods.\"");
		} else {
			say("\"Oh, we sell all manner of things. Cloaks, swords, and shovels, too. Pitchers and other containers. Cloth and a few weapons. We also sell baked goods.\"");
		}
		var0001 = true;
	}
	say("\"So, ",
		var0000,
		", what dost thou wish to buy?\"");
	while (var0003) {
		var000D = Func0957(var0004);
		if (var000D == 0x0001) {
			say("\"Perhaps another time, ",
				var0000,
				".\"");
			var0003 = false;
			continue;
		}
		var000E = var0007[var000D];
		var000F = 0x0000;
		var0010 = UI_die_roll(0x0001, 0x0005);
		if (var0010 == 0x0001) {
			var0011 = ("Dost thou accept, " + var0000) + "?";
		}
		if (var0010 == 0x0002) {
			var0011 = "What dost thou think?";
		}
		if (var0010 == 0x0003) {
			var0011 = "Wilt thou pay my master's price?";
		}
		if (var0010 == 0x0004) {
			var0011 = var000C + ", dost thou agree?";
		}
		if (var0010 == 0x0005) {
			var0011 = var000C + ", is the price acceptable?";
		}
		if (var000D == 0x0002) {
			say("\"Well, our cloaks are not fancy, but they are warm.\" *\"If thou dost want one, it will cost thee ",
				var000E,
				" guilders.\"");
			say(var0011,
				"\"");
			var0012 = "cloaks";
		}
		if (var000D == 0x0003) {
			say("\"[\"Oh, we sell swords that the blacksmith automaton makes. They are very durable blades...\" *\"For ",
				var000E,
				" guilders I can sell thee one of our fine swords.\"");
			say("\"",
				var0011,
				"\"");
			var0012 = "swords";
		}
		if (var000D == 0x0004) {
			say("\"Our shovels are very well made. I believe that even Mortegro hath bought a couple of them. I can sell thee one for ",
				var000E,
				" guilders.\"");
			say("\"",
				var0011,
				"\"");
			var0012 = "shovels";
		}
		if (var000D == 0x0005) {
			say("\"The torches we sell are soaked in pitch, so they burn for a very long time.\" *\"I will sell a torch to thee for ",
				var000E,
				" guilders.\"");
			say("\"",
				var0011,
				"\"");
			var0012 = "torches";
		}
		if (var000D == 0x0006) {
			say("\"I believe our picks have been used in the Mountains of Freedom. Only ",
				var000E,
				" guilders will buy thee one.\"");
			say("\"",
				var0011,
				"\"");
			var0012 = "picks";
		}
		if (var000D == 0x0007) {
			say("\"",
				var000E,
				" guilders and one of our finely crafted buckets can be thine, ",
				var0000,
				".\"");
			say("\"",
				var0011,
				"\"");
			var0012 = "buckets";
		}
		if (var000D == 0x0008) {
			say("\"Even Petra uses our pitchers! I can sell thee a fine piece of crockery for ",
				var000E,
				" guilders.\"");
			say("\"",
				var0011,
				"\"");
			var0012 = "pitchers";
		}
		if (var000D == 0x0009) {
			say("\"One of our oil lamps will last a long time, ",
				var0000,
				". I can sell thee one for ",
				var000E,
				" guilders.\"");
			say("\"",
				var0011,
				"\"");
			var0012 = "oil lamps";
		}
		if (var000D == 0x000A) {
			say("\"I can sell thee a bolt of dyed cloth for ",
				var000E,
				" guilders.\"");
			say("\"",
				var0011,
				"\"");
			var0012 = "bolts of cloth";
		}
		if (var000D == 0x000B) {
			say("\"The bread baked by the automaton baker is quite filling, ",
				var0000,
				". For ",
				var000E,
				" guilders I will sell thee a fresh loaf.\"");
			say("\"",
				var0011,
				"\"");
			var0012 = "loaves of bread";
		}
		if (var000D == 0x000C) {
			say("\"",
				var000E,
				" guilders will buy thee a delicious roll.\"");
			say("\"",
				var0011,
				"\"");
			var0012 = "rolls";
		}
		if (var000D == 0x000D) {
			say("\"The baker automaton makes a very sweet cake, ",
				var0000,
				". For ",
				var000E,
				" guilders thou canst have one.\"");
			say("\"",
				var0011,
				"\"");
			var0012 = "cakes";
		}
		if (var000E == var0008[var000D]) {
			if (Func0955()) {
				var0013 = var000E;
			} else {
				var0013 = 0x0000;
			}
		} else {
			var0013 = Func0870(var0007[var000D], var0008[var000D]);
		}
		if (var0013 > 0x0000) {
			if (var000B[var000D] == 0x0001) {
				say("\"How many ",
					var0012,
					" wouldst thou like?\"");
				var000F = Func0943(var0005[var000D], var0006[var000D], 0x0001, var0009, var0013, 0x000A, 0x0001, false);
			} else {
				var000F = Func0943(var0005[var000D], var0006[var000D], 0x0001, var0009, var0013, 0x0000, 0x0001, false);
			}
		}
		if (var000F == 0x0001) {
			say("\"Enjoy thy purchase!\"");
		} else if (var000F == 0x0002) {
			say("\"Thine hands are full!\"");
		} else if (var000F == 0x0003) {
			var0014 = Func0992(0x0001, (("@But " + var0000) + ", we do not have the guilders to purchase this.@"), 0x0000, false);
			if (var0014 != AVATAR) {
				TOPO->show_npc_face0(0x0000);
				say("\"Please leave if thou canst not pay.\"");
			} else {
				say("\"Thou dost not have enough guilders to purchase this...\"");
			}
			if (0x001F < (TOPO->get_npc_id() + 0x0006)) {
				TOPO->set_npc_id(0x001F);
			} else {
				TOPO->set_npc_id(TOPO->get_npc_id() + 0x0006);
			}
		}
		say("\"Dost thou care for something else?\"");
		var0003 = Func0955();
	}
	UI_pop_answers();
}

extern var Func0954 0x954 ();
extern var Func0956 0x956 (var var0000);
extern var Func0999 0x999 (var var0000, var var0001, var var0002, var var0003, var var0004, var var0005, var var0006);
extern var Func0955 0x955 ();

var Func0870 0x870 (var var0000, var var0001) {
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;
	var var0008;
	var var0009;
	var var000A;
	var var000B;
	var var000C;
	var var000D;
	var var000E;
	var var000F;
	var var0010;
	var var0011;

	var0002 = Func0954();
	var0003 = UI_is_pc_female();
	if (UI_is_pc_female()) {
		var0004 = "Milady";
	} else {
		var0004 = "Milord";
	}
	var0005 = var0000;
	var0006 = (var0001 / 0x0003) * 0x0002;
	var0007 = 0x000F - (TOPO->get_npc_id() / 0x0002);
	var0008 = 0x0000;
	var0009 = 0x0001;
	var000A = 0x0000;
	var000B = 0x0002;
	var000C = TOPO->get_npc_id();
	while (var0009) {
		var000D = Func0956(["yes", "no", "haggle"]);
		if (var000D == "no") {
			return 0x0000;
		}
		if (var000D == "yes") {
			var000E = 0x0000;
		} else {
			var000F = Func0999(var0005, var0001, var000B, var0006, var000A, var0007, var0008);
			var000A += 0x0001;
			var0008 = var000F[0x0004];
			var000E = var000F[0x0003];
			var0010 = var0005;
			var0005 = var000F[0x0002];
			var0006 = var000F[0x0001];
		}
		var0011 = UI_get_random(0x0003);
		if (var000E < 0x0002) {
			if (var0005 < (var0001 + ((var0000 - var0001) / 0x0004))) {
				if (var0011 == 0x0001) {
					say("\"Thou art a shrewd bargainer, ",
						var0002,
						". I would be hard pressed to make a profit with such a price.\"");
				}
				if (var0011 == 0x0002) {
					say("\"",
						var0004,
						", thy skill at bargaining is excellent. I believe I have actually lost money in this deal.\"");
				}
				if (var0011 == 0x0003) {
					say("\"Thy trading skills are very sharp, ",
						var0002,
						".\"");
				}
			} else if (var0005 < (var0001 + ((var0000 - var0001) / 0x0003))) {
				if (var0011 == 0x0001) {
					say("\"Thou art lucky I am in such a good mood today, ",
						var0002,
						"! 'Tis not often I lower my prices such...\"");
				}
				if (var0011 == 0x0002) {
					say("\"",
						var0004,
						", thou art a scoundrel! I would be penniless very soon if I bargained such a price more than a few times!\"");
				}
				if (var0011 == 0x0003) {
					say("\"'Tis not often I practically give my goods away! Thou art a skilled trader, ",
						var0002,
						"!\"");
				}
			} else if (var0005 < (var0001 + ((var0000 - var0001) / 0x0002))) {
				if (var0011 == 0x0001) {
					say("\"My prices are just, ",
						var0002,
						". Thou shouldst travel to Fawn if thou dost believe mine steep.\"");
				}
				if (var0011 == 0x0002) {
					say("\"'Tis a pleasure to trade with thee, ",
						var0002,
						".\"");
				}
				if (var0011 == 0x0003) {
					say("\"",
						var0004,
						", I shall remember thee! Please come to my shop whenever thou art in Monitor!\"");
				}
			} else {
				if (var0011 == 0x0001) {
					say("\"",
						var0004,
						", thou hast my gratitude!\"");
				}
				if (var0011 == 0x0002) {
					say("\"A blessing upon thee, ",
						var0002,
						"!\"");
				}
				if (var0011 == 0x0003) {
					say("\"My prices are steep, ",
						var0002,
						", for supplies are very scarce due to the Goblin raids.\"");
				}
			}
			say("\"Thou hast agreed to a price of ",
				var0005,
				" guilders, ",
				var0002,
				"?\"");
			if (Func0955()) {
				if (var000C > 0x0001) {
					TOPO->set_npc_id(var000C - 0x0002);
				}
				return var0005;
			}
			if (var0011 == 0x0001) {
				say("\"Thou shouldst not argue with me only to change thy mind when we have agreed to a firm price!\"");
			}
			if (var0011 == 0x0002) {
				say("\"What of our bargain? Thou hast disappointed me, ",
					var0002,
					".\"");
			}
			if (var0011 == 0x0003) {
				say("\"This is not honorable! I do not have time to play games with thee! Begone!\"");
				abort;
			}
			if (0x001F < (var000C + 0x000A)) {
				TOPO->set_npc_id(0x001F);
			} else {
				TOPO->set_npc_id(var000C + 0x000A);
			}
			return 0x0000;
		}
		if (var0008 == 0x0001) {
			if (var000E == 0x0005) {
				say("\"I said that ",
					var0005,
					" was my final offer. Dost thou accept?\"");
				if (var000C < 0x001C) {
					TOPO->set_npc_id(var000C + 0x0004);
				}
				if (Func0955()) {
					return var0005;
				}
				var0009 = 0x0000;
			} else {
				say("\"",
					var0005,
					" guilders is my final offer.\"");
				if (var000C < 0x001E) {
					TOPO->set_npc_id(var000C + 0x0002);
				}
			}
		} else {
			if (var000E == 0x0002) {
				if (var0011 == 0x0001) {
					say("\"'Tis a pleasure to trade with thee, ",
						var0002,
						". How doth ",
						var0005,
						" guilders sound?\"");
				}
				if (var0011 == 0x0002) {
					say("\"",
						var0004,
						", only for thee I will give a special price. How doth ",
						var0005,
						" guilders sound to thee?\"");
				}
				if (var0011 == 0x0003) {
					say("\"My price is ",
						var0005,
						" guilders, ",
						var0002,
						". Dost thou accept?\"");
				}
			}
			if (var000E == 0x0003) {
				if (var0011 == 0x0001) {
					say("\"I am not sure. Wouldst thou consider ",
						var0005,
						" guilders?\"");
				}
				if (var0011 == 0x0002) {
					say("\"Hmmm... I am not certain... ",
						var0005,
						" guilders?\"");
				}
				if (var0011 == 0x0003) {
					say("\"The cost of my goods hath increased. Perhaps ",
						var0005,
						" guilders?\"");
				}
			}
			if (var000E == 0x0004) {
				if (var0011 == 0x0001) {
					say("\"If I did not know better, I would believe thou dost jest with me. ",
						var0005,
						" guilders is as low as I can go.\"");
					say("\"What dost thou say to this?\"");
				}
				if (var0011 == 0x0002) {
					say("\"Even if the storms are driving away my customers, I still cannot accept less than ",
						var0005,
						" guilders.\"");
				}
				if (var0011 == 0x0003) {
					say("\"Thou dost think too highly of thyself, my friend. I can accept no less than ",
						var0005,
						" guilders.\"");
				}
			}
			if (var000E == 0x0005) {
				var0005 = var0010;
				if (var0011 == 0x0001) {
					say("\"Thou art touched by the storms if thou dost think I would accept such a ridiculous offer! My previous price stands, at ",
						var0005,
						" guilders.\"");
				}
				if (var0011 == 0x0002) {
					say("\"I do not give my goods away! ",
						var0005,
						" guilders, and no less!\"");
				}
				if (var0011 == 0x0003) {
					say("\"I would rather belong to the Bear Command than accept such an offer!\"");
					say("\"",
						var0005,
						" guilders is as low as I will go!\"");
				}
				if (var000C < 0x001F) {
					TOPO->set_npc_id(var000C + 0x0001);
				}
			}
		}
	}
	return 0;
}

extern var Func0957 0x957 (var var0000);
extern var Func0955 0x955 ();
extern var Func096F 0x96F (var var0000, var var0001, var var0002);
extern var Func0872 0x872 (var var0000, var var0001);

void Func0871 0x871 () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;
	var var0008;
	var var0009;
	var var000A;
	var var000B;
	var var000C;
	var var000D;
	var var000E;

	UI_push_answers();
	var0000 = true;
	say("\"I accept guilders only!\"");
	var0001 = "Guilders";
	var0002 = 0x03B8;
	while (var0000) {
		say("\"In which circle art thou interested?\"");
		var0003 = Func0957(["nothing", "First", "Second", "Third", "Fourth", "Fifth", "Sixth", "Seventh"]);
		var0003 -= 0x0001;
		if (var0003 == 0x0000) {
			break;
		}
		if (var0003 == 0x0001) {
			var0004 = ["nothing", "Detect Trap", "Light"];
			var0005 = [SPELL_NONE, SPELL_DETECT_TRAP, SPELL_LIGHT];
			var0006 = [0x0000, 0x0028, 0x0023];
			var0007 = [0x0000, 0x0014, 0x0014];
		} else if (var0003 == 0x0002) {
			var0004 = ["nothing", "Awaken", "Heal"];
			var0005 = [SPELL_NONE, SPELL_AWAKEN, SPELL_HEAL];
			var0006 = [0x0000, 0x0041, 0x004B];
			var0007 = [0x0000, 0x001E, 0x0026];
		} else if (var0003 == 0x0003) {
			var0004 = ["nothing", "Enchant Missiles", "Translate"];
			var0005 = [SPELL_NONE, SPELL_ENCHANT_MISSILES, SPELL_TRANSLATION];
			var0006 = [0x0000, 0x0096, 0x00AF];
			var0007 = [0x0000, 0x0050, 0x0055];
		} else if (var0003 == 0x0004) {
			if (gflags[KNOWS_OF_SOUL_GEMS]) {
				var0004 = ["nothing", "Create Soul Prism", "Transcribe"];
				var0005 = [SPELL_NONE, SPELL_CREATE_SOUL_PRISM, SPELL_TRANSCRIBE];
				var0006 = [0x0000, 0x012C, 0x00DC];
				var0007 = [0x0000, 0x00C8, 0x0082];
			} else {
				var0004 = ["nothing", "Transcribe"];
				var0005 = [SPELL_NONE, SPELL_TRANSCRIBE];
				var0006 = [0x0000, 0x00DC];
				var0007 = [0x0000, 0x0082];
			}
		} else if (var0003 == 0x0005) {
			var0004 = ["nothing", "Great Heal"];
			var0005 = [SPELL_NONE, SPELL_GREAT_HEAL];
			var0006 = [0x0000, 0x00FA];
			var0007 = [0x0000, 0x0082];
		} else if (var0003 == 0x0006) {
			var0004 = ["nothing", "Betray", "Cause Fear", "Create Automata"];
			var0005 = [SPELL_NONE, SPELL_BETRAY, SPELL_CAUSE_FEAR, SPELL_CREATE_AUTOMATON];
			var0006 = [0x0000, 0x011D, 0x012C, 0x02EE];
			var0007 = [0x0000, 0x0096, 0x00AF, 0x0226];
		} else if (var0003 == 0x0007) {
			var0004 = ["nothing", "Mass Might", "Lightning"];
			var0005 = [SPELL_NONE, SPELL_MASS_MIGHT, SPELL_LIGHTNING];
			var0006 = [0x0000, 0x0190, 0x015E];
			var0007 = [0x0000, 0x00C8, 0x00C8];
		}
		say("\"What spell art thou interested in?\"");
		var0008 = Func0957(var0004);
		if (var0008 == 0x0001) {
			say("\"Very well...\"");
		} else {
			var0009 = var0005[var0008];
			var000A = var0006[var0008];
			var000B = var0007[var0008];
			var000C = var0004[var0008];
			if (var000A == var000B) {
				say("\"The ",
					var000C,
					" spell will cost ",
					var000A,
					" ",
					var0001,
					". Is this acceptable?\"");
				var000D = 0x0000;
				if (Func0955() == true) {
					var000D = Func096F(var0009, var0002, var000A);
				}
			} else {
				say("\"The price for the ",
					var000C,
					" spell is ",
					var000A,
					" ",
					var0001,
					". Dost thou find this acceptable?\"");
				var000E = Func0872(var000A, var000B);
				var000D = 0x0000;
				if (var000E > 0x0000) {
					var000D = Func096F(var0009, var0002, var000E);
				}
			}
			if (var000D == 0x0001) {
				say("\"Done!\"");
			} else if (var000D == 0x0002) {
				say("\"Thou dost not have a spellbook.\"");
				var0000 = false;
				break;
			} else if (var000D == 0x0003) {
				say("\"Thou dost not have enough ",
					var0001,
					" for that!\"");
			} else if (var000D == 0x0004) {
				say("\"Thou dost already have that spell!\"");
			}
		}
		say("\"Wouldst thou like another spell?\"");
		var0000 = Func0955();
	}
	UI_pop_answers();
}

extern var Func0956 0x956 (var var0000);
extern var Func0999 0x999 (var var0000, var var0001, var var0002, var var0003, var var0004, var var0005, var var0006);
extern var Func0955 0x955 ();

var Func0872 0x872 (var var0000, var var0001) {
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;
	var var0008;
	var var0009;
	var var000A;
	var var000B;
	var var000C;
	var var000D;
	var var000E;

	var0002 = var0000;
	var0003 = (var0001 / 0x0003) * 0x0002;
	var0004 = 0x000F - (TORRISSIO->get_npc_id() / 0x0002);
	var0005 = 0x0000;
	var0006 = 0x0001;
	var0007 = 0x0000;
	var0008 = 0x0002;
	var0009 = TORRISSIO->get_npc_id();
	while (var0006) {
		var000A = Func0956(["yes", "no", "haggle"]);
		if (var000A == "no") {
			return 0x0000;
		}
		if (var000A == "yes") {
			var000B = 0x0000;
		} else {
			var000C = Func0999(var0002, var0001, var0008, var0003, var0007, var0004, var0005);
			var0007 += 0x0001;
			var0005 = var000C[0x0004];
			var000B = var000C[0x0003];
			var000D = var0002;
			var0002 = var000C[0x0002];
			var0003 = var000C[0x0001];
		}
		var000E = UI_get_random(0x0003);
		if (var000B < 0x0002) {
			if (var0002 < (var0001 + ((var0000 - var0001) / 0x0004))) {
				if (var000E == 0x0001) {
					say("\"I do not know why, but I accept thine offer. Thou dost bargain well, friend.\"");
				}
				if (var000E == 0x0002) {
					say("\"'Twill not do my reputation any good, but I accept thine offer.\"");
				}
				if (var000E == 0x0003) {
					say("\"If thou dost tell anyone that I accepted such an offer, I will say that thou art a liar.\"");
				}
			} else if (var0002 < (var0001 + ((var0000 - var0001) / 0x0003))) {
				if (var000E == 0x0001) {
					say("\"I have not had much business of late. I will accept thine offer.\"");
				}
				if (var000E == 0x0002) {
					say("\"Thou dost bargain well. I will accept this price.\"");
				}
				if (var000E == 0x0003) {
					say("\"I hope thou dost know that thou art getting a good bargain at this price.\"");
				}
			} else if (var0002 < (var0001 + ((var0000 - var0001) / 0x0002))) {
				if (var000E == 0x0001) {
					say("\"Only ",
						var0002,
						"??! I may as well give this away...\"");
				}
				if (var000E == 0x0002) {
					say("\"Not bad...\"");
				}
				if (var000E == 0x0003) {
					say("\"Thou canst not fault me for trying to make a profit. I will accept this price.\"");
				}
			} else {
				if (var000E == 0x0001) {
					say("\"I accept thine offer!\"");
				}
				if (var000E == 0x0002) {
					say("\"Thou art a fine customer. Please stop by any time.\"");
				}
				if (var000E == 0x0003) {
					say("\"'Tis a fine price by me!\"");
				}
			}
			say("\"So, dost thou agree to a price of ",
				var0002,
				"?\"");
			if (Func0955() == true) {
				if (var0009 > 0x0001) {
					TORRISSIO->set_npc_id(var0009 - 0x0002);
				}
				return var0002;
			}
			if (var000E == 0x0001) {
				say("\"Then why didst thou come here?!\"");
			}
			if (var000E == 0x0002) {
				say("\"Thou art an ill-mannered buffoon!\"");
			}
			if (var000E == 0x0003) {
				say("\"I shall remember thy poor manners in the future! Mark my words!\"");
			}
			if (0x001F < (var0009 + 0x000A)) {
				TORRISSIO->set_npc_id(0x001F);
			} else {
				TORRISSIO->set_npc_id(var0009 + 0x000A);
			}
			return 0x0000;
		}
		if (var0005 == 0x0001) {
			if (var000B == 0x0005) {
				say("\"",
					var0002,
					" is my final offer. Dost thou agree or not?\"");
				if (var0009 < 0x001C) {
					TORRISSIO->set_npc_id(var0009 + 0x0004);
				}
				if (Func0955() == true) {
					return var0002;
				}
				var0006 = 0x0000;
			} else {
				say("\"I can offer no lower than ",
					var0002,
					".\"");
				if (var0009 < 0x001E) {
					TORRISSIO->set_npc_id(var0009 + 0x0002);
				}
			}
		} else {
			if (var000B == 0x0002) {
				if (var000E == 0x0001) {
					say("\"I am minded to give thee a good deal. How doth ",
						var0002,
						" sound?\"");
				}
				if (var000E == 0x0002) {
					say("\"I like the way thou dost barter. How doth ",
						var0002,
						" sound?\"");
				}
				if (var000E == 0x0003) {
					say("\"For thee only I offer ",
						var0002,
						".\"");
				}
			}
			if (var000B == 0x0003) {
				if (var000E == 0x0001) {
					say("\"Hmmm.... Perhaps ",
						var0002,
						"?\"");
				}
				if (var000E == 0x0002) {
					say("\"",
						var0002,
						"? I have many expenses.\"");
				}
				if (var000E == 0x0003) {
					say("\"",
						var0002,
						"? I cannot afford to be overly generous these days.\"");
				}
			}
			if (var000B == 0x0004) {
				if (var000E == 0x0001) {
					say("\"Who dost thou think thou art dealing with -- a Mundane?! ",
						var0002,
						" and no less!\"");
				}
				if (var000E == 0x0002) {
					say("\"I will go no lower than ",
						var0002,
						". Thou dost not appreciate the work involved.\"");
				}
				if (var000E == 0x0003) {
					say("\"This is worth at least ",
						var0002,
						". I think that thou shouldst reconsider.\"");
				}
			}
			if (var000B == 0x0005) {
				var0002 = var000D;
				if (var000E == 0x0001) {
					say("\"Thou must not want this very badly... My previous offer stands, at ",
						var0002,
						".\"");
				}
				if (var000E == 0x0002) {
					say("\"Thou art a fool if thou dost think that I will go lower than ",
						var0002,
						".\"");
				}
				if (var000E == 0x0003) {
					say("\"I would sooner starve! Mine offer stands at ",
						var0002,
						".\"");
				}
				if (var0009 < 0x001F) {
					TORRISSIO->set_npc_id(var0009 + 0x0001);
				}
			}
		}
	}
	return 0;
}

extern var Func0953 0x953 ();
extern var Func0956 0x956 (var var0000);
extern var Func098E 0x98E ();
extern var Func0957 0x957 (var var0000);
extern var Func096E 0x96E (var var0000, var var0001, var var0002, var var0003, var var0004);
extern var Func095C 0x95C (var var0000, var var0001);
extern void Func0963 0x963 (var var0000, var var0001);
extern void Func0960 0x960 (var var0000, var var0001);

void Func0873 0x873 () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;
	var var0008;
	var var0009;
	var var000A;
	var var000B;
	var var000C;
	var var000D;
	var var000E;

	var0000 = Func0953();
	var0001 = 0x0284;
	var0002 = [0x0000, 0x0004];
	var0003 = 0x00C8;
	say("\"I charge 200 gold coins to instruct students in the ways of war. Dost thou agree?\"");
	var0004 = Func0956(["Yes", "No"]);
	if (var0004 == "No") {
		say("\"I knew thou didst lack Discipline!\"");
		abort;
	}
	if (var0004 == "Yes") {
		say("\"Whom dost thou wish to train?\"");
		var0005 = Func098E();
		var0005 = 0x0000 & var0005;
		var0006 = ["Nobody"];
		for (var0009 in var0005 with var0007 to var0008) {
			if (!(var0009 == 0x0000)) {
				var0006 &= var0009->get_npc_name();
			}
		}
		var000A = Func0957(var0006);
		var000A = var0005[var000A];
		var000B = var000A->get_npc_number();
		var000C = var000A->get_npc_name();
		if (var000A == 0x0000) {
			say("\"Thou wilt never be warrior with such weak resolve!\"");
		} else {
			var000D = Func096E(var0002, var0001, var0003, var000B, 0x0002);
			if (Func095C(var000A, TRAINING) < 2) {
				var000D = 0x0000;
			}
			if (var000D == 0x0000) {
				if (var000B == AVATAR) {
					say("\"Thou art not ready to learn yet!\"");
				} else {
					say("\"",
						var000C,
						" is not ready to learn yet!\"");
				}
			}
			if (var000D == 0x0001) {
				say("\"Thou dost not have 200 gold coins! I am not so easily cheated!");
				say("\"Speak with me again when thou art serious about learning the secrets of combat.\"");
				abort;
			}
			do {
				if (var000D == 0x0002) {
					if (Func095C(var000A, COMBAT) < 30) {
						continue;
					}
					if (Func095C(var000A, STRENGTH) < 30) {
						continue;
					}
					if (var000B == AVATAR) {
						say("\"Thou dost already possess more skill than I could teach thee!\"");
					} else {
						say("\"",
							var000C,
							" doth already possess more skill than I could ever teach!\"");
					}
				}
				if (!(var000D == 0x0003)) {
					break;
				}
			} while (false)
			nobreak {
				say("\"Hold thy weapon at ready... Now swing... Again.");
				say("\"I think I can see thy problem, ",
					var000C,
					". Thou dost hold thy weapon too tightly.");
				say("\"If thou dost clutch it so thou shalt never have the proper fluidness to meet a foe's attack.");
				say("\"Here, hold it like so. Seest thou? Thou hast sacrificed nothing of control, and have gained much in speed.");
				say("\"I know this feels awkward. Practice with this and thou wilt see no loss of accuracy.\"");
				var000E = UI_remove_party_items(var0003, var0001, QUALITY_ANY, FRAME_ANY, true);
				if (Func095C(var000A, COMBAT) < 30) {
					Func0963(var000A, 1);
				}
				if (Func095C(var000A, STRENGTH) < 30) {
					Func0960(var000A, 1);
				}
			}
		}
	}
}

extern var Func0955 0x955 ();
extern var Func09B3 0x9B3 (var var0000);

void Func0874 0x874 () {
	var var0000;

	if (WILFRED->get_cont_items(SHAPE_ANY, QUALITY_ANY, FRAME_ANY)) {
		say("\"I still have some of thy worthless belongings. If thou wantest them, thou hadst best take them now.\"");
		say("\"Dost thou want such items returned?\"");
		if (Func0955()) {
			say("\"Here they are.\"");
			gflags[WILFRED_HAS_BELONGINGS] = false;
			var0000 = Func09B3(WILFRED);
			if (var0000[0x0001] != 0x0000) {
				say("\"Thy companions will have to carry some of these useless things.\"");
			}
			if (var0000[0x0002] > 0x0000) {
				var0000 = var0000[0x0002];
				if (var0000 > 0x0001) {
					say("\"Since thou canst not carry these remaining ",
						var0000,
						" items, they will go on the floor.\"");
				} else {
					say("\"Since thou dost not have enough room for this last item, it will go on the floor.\"");
				}
			}
		} else {
			gflags[WILFRED_HAS_BELONGINGS] = true;
			say("\"If that is what thou wantest, so be it.\"");
		}
	}
}

extern var Func0956 0x956 (var var0000);
extern var Func098E 0x98E ();
extern var Func0957 0x957 (var var0000);
extern var Func096E 0x96E (var var0000, var var0001, var var0002, var var0003, var var0004);
extern var Func095C 0x95C (var var0000, var var0001);
extern void Func0963 0x963 (var var0000, var var0001);
extern void Func0960 0x960 (var var0000, var var0001);

void Func0875 0x875 () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;
	var var0008;
	var var0009;
	var var000A;
	var var000B;
	var var000C;
	var var000D;

	do {
		var0000 = 0x03B7;
		var0001 = [0x0000, 0x0004];
		var0002 = 0x001E;
		do {
			if ((gflags[WILFRED_HAS_JOINED] == false) || ((gflags[WILFRED_KICKED_OUT] == true) || (gflags[BRAVE_SIR_WILFRED_RAN_AWAY] == true))) {
				say("\"I charge 30 monetari to instruct students in my knowledge of combat. Dost thou agree?\"");
				var0003 = Func0956(["Yes", "No"]);
			} else {
				say("\"Since I have joined thee, I will not ask for mine usual fee!\"");
				var0002 = 0x0000;
				break;
			}
		} while (false)
		nobreak {
			if (var0003 == "No") {
				say("\"Thou art a lout not to pay me!\"");
				abort;
			}
			if (!(var0003 == "Yes")) {
				break;
			}
		}
		say("\"Whom dost thou wish to train?\"");
		var0004 = Func098E();
		var0004 = 0x0000 & var0004;
		var0005 = ["Nobody"];
		for (var0008 in var0004 with var0006 to var0007) {
			if (!(var0008 == 0x0000)) {
				var0005 &= var0008->get_npc_name();
			}
		}
		var0009 = Func0957(var0005);
		var0009 = var0004[var0009];
		var000A = var0009->get_npc_number();
		var000B = var0009->get_npc_name();
		if (var0009 == 0x0000) {
			say("\"Very well, but thou shouldst make up thy mind!\"");
		} else if (var000A == WILFRED) {
			say("\"I do not train myself!\"");
		} else {
			var000C = Func096E(var0001, var0000, var0002, var000A, 0x0002);
			if (Func095C(var0009, TRAINING) < 2) {
				var000C = 0x0000;
			}
			if (var000C == 0x0000) {
				if (var000A == AVATAR) {
					say("\"Thou art not ready to learn yet!\"");
				} else {
					say("\"",
						var000B,
						" is not ready to learn yet!\"");
				}
			}
			if (var000C == 0x0001) {
				if ((gflags[WILFRED_HAS_JOINED] == false) || ((gflags[WILFRED_KICKED_OUT] == true) || (gflags[BRAVE_SIR_WILFRED_RAN_AWAY] == true))) {
					say("\"Thou dost not have 30 monetari! Talk to me again when thou canst pay me!\"");
					abort;
				}
			} else {
				do {
					if (var000C == 0x0002) {
						if (Func095C(var0009, COMBAT) < 30) {
							break;
						}
						if (Func095C(var0009, STRENGTH) < 30) {
							break;
						}
						if (var000A == AVATAR) {
							say("\"Thou dost already possess more skill than I could teach thee!\"");
						} else {
							say("\"",
								var000B,
								" doth already possess more skill than I could ever teach!\"");
						}
					}
				} while (false)
				nobreak {
					if (var000C != 0x0003) {
						break;
					}
				}
			}
			say("\"First, let me see thy stance.\"");
			say("\"Hmmm... If thou dost hold thy weapon higher, thou wilt have better leverage with which to smash thy foes.\"");
			say("\"Secondly, thou shouldst always carry through with thy swing, as it will improve thy chances of recovering to land succeeding blows.\"");
			say("\"I do see some improvement in thee!\"");
			var000D = UI_remove_party_items(var0002, var0000, QUALITY_ANY, FRAME_ANY, true);
			if (Func095C(var0009, COMBAT) < 30) {
				Func0963(var0009, 1);
			}
			if (Func095C(var0009, STRENGTH) < 30) {
				Func0960(var0009, 1);
			}
		}
	} while (false);
	return;
}

extern var Func0953 0x953 ();
extern var Func09A0 0x9A0 (var var0000, var var0001);

void Func0876 0x876 () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;

	var0000 = Func0953();
	var0001 = ("I am " + var0000) + ".";
	if (!gflags[ZHELKAS_OPENED_ENTRANCE]) {
		var0002 = ZHELKAS->get_item_flag(MET);
		if (var0002) {
			say("\"To be asking what you want with Zhelkas, ruler of Gargoyles! To be thinking how sad and sorry you look as you cower over to speak. To be telling you to be brave!  To be telling you to have pride.  To be telling you announce yourself.\"");
		} else {
			say("\"To be called ruler of gargoyles. To respond to Zhelkas. To mean `Iron Helm.'\"");
			say("\"To ask who you are and why you are here.\"");
			ZHELKAS->set_item_flag(MET);
		}
		add([var0001, "I am the Avatar.", "I am lost..."]);
		if (!gflags[BALANCE_SAY_MET_BEFORE]) {
			gflags[BALANCE_SAY_MET_BEFORE] = true;
			var0003 = script Func09A0(0x0005, 0x0004) after 100 ticks {
				nohalt;
				call Func0377;
			};
		}
	} else {
		say("\"To be glad to see you again, ",
			var0000,
			". To inquire what you seek from the Gargoyles this day.\"");
		add(["information", "aid"]);
		if (gflags[CLUE_SERPENT_STAFF_FURNACE] == true) {
			add("Serpent Staff");
		}
		if (gflags[STARTED_TEST_OF_PURITY] && (!gflags[ZHELKAS_EXPLAINED_TEST])) {
			add("explain test");
		}
		if (gflags[BROUGHT_GOBLET_TO_ZHELKAS] || (gflags[PASSED_CLONE_IOLO_TEST] && (gflags[PASSED_CLONE_SHAMINO_TEST] && gflags[PASSED_CLONE_DUPRE_TEST]))) {
			add("leave Furnace");
			if (gflags[ZHELKAS_OPENED_EXIT]) {
				remove("leave Furnace");
			}
		}
	}
}

extern var Func0953 0x953 ();
extern var Func099B 0x99B (var var0000, var var0001, var var0002, var var0003, var var0004, var var0005, var var0006);

void Func0877 0x877 () {
	var var0000;
	var var0001;

	var0000 = Func0953();
	if (gflags[SAID_AVATAR_TO_ZHELKAS] == true) {
		say("\"To be honored to see you, Avatar of Virtue! To be certain that you are the Hero we have dreamed about.\"");
	} else {
		say("\"To be certain that you are the Hero we have dreamed about, ",
			var0000,
			".\"");
	}
	say("\"To be relieved that you came before the dreaming sickness spread. To have feared that none would remain awake to give you the ring. Now it is yours.\"");
	var0001 = Func099B(AVATAR, 0x0001, 0x0377, QUALITY_ANY, 0x0001, false, true);
	gflags[GOT_SERPENT_RING] = true;
	add(["information", "aid", "dreaming sickness"]);
}

void Func0878 0x878 () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;

	var0000 = [0x0673, 0x09CF];
	var0001 = [0x0683, 0x0A15];
	var0002 = [0x06CB, 0x0A27];
	var0003 = [0x06FB, 0x0A37];
	var0004 = [0x06EB, 0x0A37];
	var0005 = [0x063B, 0x0A37];
	var0006 = [0x06AB, 0x0A38];
	ZHELKAS->set_new_schedules([MIDNIGHT, EARLY, DAWN, MORNING, NOON, AFTERNOON, EVENING], [LOITER, WANDER, WANDER, PACE_VERTICAL, PACE_HORIZONTAL, WANDER, WANDER], [var0000, var0001, var0002, var0003, var0004, var0005, var0006]);
	ZHELKAS->run_schedule();
}

extern void Func097F 0x97F (var var0000, var var0001, var var0002);

void Func0879 0x879 () {
	say("\"To be pleased... To bid you to go to the Pillars of Purity.\"");
	say("\"To ask you to prepare yourself in virtue. Then to grasp the Pillar of Fire and let the Test begin...\"");
	say("\"To admit you to the Underground City.\"");
	Func097F(ZHELKAS, "@A moment!@", 0x0000);
	ZHELKAS->set_new_schedules(MIDNIGHT, PATROL, ZHELKAS->get_object_position());
	ZHELKAS->run_schedule();
	abort;
}

extern var Func09AB 0x9AB (var var0000, var var0001, var var0002, var var0003, var var0004);

void Func087A 0x87A () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;

	var0000 = ZHELKAS->find_nearby(0x0203, 0x000A, MASK_NONE);
	if (var0000) {
		var0001 = var0000->get_item_frame();
		if (var0001 == 0x0005) {
			var0000->set_item_frame(0x0007);
			var0002 = script var0000 after 2 ticks {
				nohalt;
				call Func04AA;
			};
		}
		if (var0001 == 0x0007) {
			var0003 = var0000->get_object_position();
			var0000->remove_item();
			var0004 = Func09AB(0x0366, 0x0004, QUALITY_ANY, 0x0000, var0003);
		}
	}
}

extern var Func0955 0x955 ();
extern var Func0956 0x956 (var var0000);
extern var Func097D 0x97D (var var0000, var var0001, var var0002, var var0003, var var0004);
extern var Func099B 0x99B (var var0000, var var0001, var var0002, var var0003, var var0004, var var0005, var var0006);

void Func087B 0x87B () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;
	var var0008;
	var var0009;
	var var000A;
	var var000B;
	var var000C;
	var var000D;
	var var000E;
	var var000F;

	var0000 = true;
	say("\"I charge a small amount of the money exchanged. Dost thou accept?\"");
	if (Func0955()) {
		while (var0000) {
			say("\"What coinage dost thou want?\"");
			var0001 = Func0956(["Monetari", "Guilders", "Filari", "Gold Coins"]);
			do {
				if (var0001 == "Monetari") {
					say("\"What dost thou care to exchange for monetari?\"");
					var0002 = 0x03B7;
					var0003 = ["Nothing"];
					if (Func097D(PARTY, 0x0001, 0x03B8, QUALITY_ANY, FRAME_ANY)) {
						var0003 &= "Guilders";
					}
					if (Func097D(PARTY, 0x0001, 0x03B4, QUALITY_ANY, FRAME_ANY)) {
						var0003 &= "Filari";
					}
					if (Func097D(PARTY, 0x0001, 0x0284, QUALITY_ANY, FRAME_ANY)) {
						var0003 &= "Gold Coins";
					}
					var0004 = Func0956(var0003);
					if (var0004 == "Nothing") {
						say("\"Thou shouldst do well not to waste my time so in the future! I am an important man!\"");
						abort;
					}
					if (var0004 == "Guilders") {
						say("\"I can give thee 1 monetari for every 3 guilders thou hast.\"");
						var0005 = 0x03B8;
					}
					if (var0004 == "Filari") {
						say("\"I can give thee 1 monetari for every 4 filari thou hast.\"");
						var0005 = 0x03B4;
					}
					if (var0004 == "Gold Coins") {
						say("\"I can give thee 1 monetari for every 2 gold coins thou hast.\"");
						var0005 = 0x0284;
					}
					say("\"Wilt thou agree to my rate?\"");
					if (Func0955() == true) {
						var0006 = PARTY->count_objects(var0005, QUALITY_ANY, FRAME_ANY);
						if (var0006 > 0x01F4) {
							var0006 = 0x01F4;
						}
						if (var0006 != 0x0000) {
							say("\"How many ",
								var0004,
								" wouldst thou like to exchange?\"");
							var0007 = UI_input_numeric_value(0x0000, var0006, 0x0001, 0x0000);
							if (var0007 == 0x0000) {
								say("\"Couldst thou please decide!?\"");
								break;
							}
							if (var0004 == "Guilders") {
								var0008 = var0007 / 0x0003;
								var0009 = 0x0006;
							}
							if (var0004 == "Filari") {
								var0008 = var0007 / 0x0004;
								var0009 = 0x0008;
							}
							if (var0004 == "Gold Coins") {
								var0008 = var0007 / 0x0002;
								var0009 = 0x0004;
							}
							var000A = var0008 / 0x0021;
							var000B = var0008 - var000A;
							if (var0008 == 0x0000) {
								say("\"Thou must offer at least ",
									var0009,
									" ",
									var0004,
									" to exchange for ",
									var0001,
									"!\"");
								break;
							}
							if (var0008 == 0x0001) {
								say("\"My fee will leave thee with nothing!\"");
								break;
							}
							if (var0008 <= 0x0021) {
								var000A = 0x0001;
								var000B = var0008 - var000A;
							}
							if (var0007 >= 0x0001) {
								var000C = UI_remove_party_items(var0007, var0005, QUALITY_ANY, FRAME_ANY, false);
								say("\"Hmmm...\"~\"Very well, I will take thy ",
									var0007,
									" ",
									var0004,
									" and in exchange give thee ",
									var0008,
									" Monetari, subtracting my fee of ",
									var000A,
									" Monetari, for a final sum of ",
									var000B,
									" Monetari given to thee.\"");
								var000D = Func099B(AVATAR, var000B, var0002, QUALITY_ANY, FRAME_ANY, false, true);
								say("\"The transaction is done!\"");
							} else {
								say("\"Couldst thou please make up thy mind!?\"");
							}
						} else {
							say("\"Thou dost not have any ",
								var0004,
								" to exchange for ",
								var0001,
								"!\"");
						}
					} else {
						say("\"My rates are the same as every other moneychanger...\"");
					}
				}
				if (var0001 == "Guilders") {
					say("\"Which coin dost thou care to exchange for guilders?\"");
					var0002 = 0x03B8;
					var0003 = ["Nothing"];
					if (Func097D(PARTY, 0x0001, 0x03B7, QUALITY_ANY, FRAME_ANY)) {
						var0003 &= "Monetari";
					}
					if (Func097D(PARTY, 0x0001, 0x03B4, QUALITY_ANY, FRAME_ANY)) {
						var0003 &= "Filari";
					}
					if (Func097D(PARTY, 0x0001, 0x0284, QUALITY_ANY, FRAME_ANY)) {
						var0003 &= "Gold Coins";
					}
					var0004 = Func0956(var0003);
					if (var0004 == "Nothing") {
						say("\"Thou shouldst do well not to waste my time so in the future! I am an important man!\"");
						abort;
					}
					if (var0004 == "Monetari") {
						say("\"I can give thee 3 guilders for every 1 monetari thou hast.\"");
						var0005 = 0x03B7;
					}
					if (var0004 == "Filari") {
						say("\"I can give thee 3 guilders for every 4 filari thou hast.\"");
						var0005 = 0x03B4;
					}
					if (var0004 == "Gold Coins") {
						say("\"I can give thee 3 guilders for every 2 gold coins thou hast.\"");
						var0005 = 0x0284;
					}
					say("\"Dost thou agree to my rate?\"");
					if (Func0955() == true) {
						var0006 = PARTY->count_objects(var0005, QUALITY_ANY, FRAME_ANY);
						if (var0006 > 0x01F4) {
							var0006 = 0x01F4;
						}
						if (var0006 != 0x0000) {
							say("\"How many ",
								var0004,
								" wouldst thou like to exchange?\"");
							var0007 = UI_input_numeric_value(0x0000, var0006, 0x0001, 0x0000);
							if (var0007 == 0x0000) {
								say("\"Couldst thou please make a decision!?\"");
								break;
							}
							if (var0004 == "Monetari") {
								var0008 = var0007 * 0x0003;
							}
							if (var0004 == "Filari") {
								var0008 = (var0007 * 0x0003) / 0x0004;
								var0009 = 0x0003;
							}
							if (var0004 == "Gold Coins") {
								var0008 = (var0007 * 0x0003) / 0x0002;
								var0009 = 0x0002;
							}
							var000A = var0008 / 0x0021;
							var000B = var0008 - var000A;
							var000E = "Guilders";
							var000F = "Guilders";
							if (var0008 == 0x0000) {
								say("\"Thou must offer at least ",
									var0009,
									" ",
									var0004,
									" to exchange for ",
									var0001,
									"!\"");
								break;
							}
							if (var0008 == 0x0001) {
								say("\"My fee will leave thee with nothing!\"");
								break;
							}
							if (var0008 <= 0x0021) {
								var000A = 0x0001;
								var000B = var0008 - var000A;
							}
							if (var000B == 0x0001) {
								var000E = "Guilder";
							}
							if (var000A == 0x0001) {
								var000F = "Guilder";
							}
							if (var0007 >= 0x0001) {
								var000C = UI_remove_party_items(var0007, var0005, QUALITY_ANY, FRAME_ANY, false);
								say("\"Hmmm...\"~\"Very well, I will take thy ",
									var0007,
									" ",
									var0004,
									" and in exchange give thee ",
									var0008,
									" Guilders, subtracting my fee of ",
									var000A,
									" ",
									var000F,
									", for a final sum of ",
									var000B,
									" ",
									var000E,
									" given to thee.\"");
								var000D = Func099B(AVATAR, var000B, var0002, QUALITY_ANY, FRAME_ANY, false, true);
								say("\"The transaction is done!\"");
							} else {
								say("\"Couldst thou please make up thy mind!?\"");
							}
						} else {
							say("\"Thou dost not have any ",
								var0004,
								" to exchange for ",
								var0001,
								"!\"");
						}
					} else {
						say("\"My rates are the same as every other moneychanger...\"");
					}
				}
				if (var0001 == "Filari") {
					say("\"Which coin dost thou care to exchange for filari?\"");
					var0002 = 0x03B4;
					var0003 = ["Nothing"];
					if (Func097D(PARTY, 0x0001, 0x03B7, QUALITY_ANY, FRAME_ANY)) {
						var0003 &= "Monetari";
					}
					if (Func097D(PARTY, 0x0001, 0x03B8, QUALITY_ANY, FRAME_ANY)) {
						var0003 &= "Guilders";
					}
					if (Func097D(PARTY, 0x0001, 0x0284, QUALITY_ANY, FRAME_ANY)) {
						var0003 &= "Gold Coins";
					}
					var0004 = Func0956(var0003);
					if (var0004 == "Nothing") {
						say("\"Thou shouldst do well not to waste my time so in the future! I am an important man!\"");
						abort;
					}
					if (var0004 == "Monetari") {
						say("\"I can give thee 4 filari for every 1 monetari thou hast.\"");
						var0005 = 0x03B7;
					}
					if (var0004 == "Guilders") {
						say("\"I can give thee 4 filari for for every 3 guilders thou hast.\"");
						var0005 = 0x03B8;
					}
					if (var0004 == "Gold Coins") {
						say("\"I can give thee 2 filari for every 1 gold coin thou hast.\"");
						var0005 = 0x0284;
					}
					say("\"Dost thou agree to my rate?\"");
					if (Func0955() == true) {
						var0006 = PARTY->count_objects(var0005, QUALITY_ANY, FRAME_ANY);
						if (var0006 > 0x01F4) {
							var0006 = 0x01F4;
						}
						if (var0006 != 0x0000) {
							say("\"How many ",
								var0004,
								" wouldst thou like to exchange?\"");
							var0007 = UI_input_numeric_value(0x0000, var0006, 0x0001, 0x0000);
							if (var0007 == 0x0000) {
								say("\"Couldst thou please make up thy mind!?\"");
								break;
							}
							if (var0004 == "Monetari") {
								var0008 = var0007 * 0x0004;
							}
							if (var0004 == "Guilders") {
								var0008 = (var0007 * 0x0004) / 0x0003;
								var0009 = 0x0002;
							}
							if (var0004 == "Gold Coins") {
								var0008 = var0007 * 0x0002;
								if (var0007 == 0x0001) {
									var0004 = "Gold Coin";
								}
							}
							var000A = var0008 / 0x0021;
							var000B = var0008 - var000A;
							if (var0008 == 0x0000) {
								say("\"Thou must offer at least ",
									var0009,
									" ",
									var0004,
									" to exchange for ",
									var0001,
									"!\"");
								break;
							}
							if (var0008 == 0x0001) {
								say("\"My fee will leave thee with nothing!\"");
								break;
							}
							if (var0008 <= 0x0021) {
								var000A = 0x0001;
								var000B = var0008 - var000A;
							}
							if (var0007 >= 0x0001) {
								var000C = UI_remove_party_items(var0007, var0005, QUALITY_ANY, FRAME_ANY, false);
								say("\"Hmmm...\"~\"Very well, I will take thy ",
									var0007,
									" ",
									var0004,
									" and in exchange give thee ",
									var0008,
									" Filari, subtracting my fee of ",
									var000A,
									" Filari, for a final sum of ",
									var000B,
									" Filari given to thee.\"");
								var000D = Func099B(AVATAR, var000B, var0002, QUALITY_ANY, FRAME_ANY, false, true);
								say("\"The transaction is done!\"");
							} else {
								say("\"Couldst thou please make up thy mind!?\"");
							}
						} else {
							say("\"Thou dost not have any ",
								var0004,
								" to exchange for ",
								var0001,
								"!\"");
						}
					} else {
						say("\"My rates are the same as every other moneychanger...\"");
					}
				}
				if (var0001 == "Gold Coins") {
					say("\"Which coin dost thou care to exchange for gold?\"");
					var0002 = 0x0284;
					var0003 = ["Nothing"];
					if (Func097D(PARTY, 0x0001, 0x03B7, QUALITY_ANY, FRAME_ANY)) {
						var0003 &= "Monetari";
					}
					if (Func097D(PARTY, 0x0001, 0x03B4, QUALITY_ANY, FRAME_ANY)) {
						var0003 &= "Filari";
					}
					if (Func097D(PARTY, 0x0001, 0x03B8, QUALITY_ANY, FRAME_ANY)) {
						var0003 &= "Guilders";
					}
					var0004 = Func0956(var0003);
					if (var0004 == "Nothing") {
						say("\"Thou shouldst do well not to waste my time so in the future! I am an important man!\"");
						abort;
					}
					if (var0004 == "Monetari") {
						say("\"I can give thee 2 gold coins for every 1 monetari thou hast.\"");
						var0005 = 0x03B7;
					}
					if (var0004 == "Guilders") {
						say("\"I can give thee 2 gold coins for every 3 guilders thou hast.\"");
						var0005 = 0x03B8;
					}
					if (var0004 == "Filari") {
						say("\"I can give thee 1 gold coin for every 2 filari thou hast.\"");
						var0005 = 0x03B4;
					}
					if (var0004 == "Gold Nuggets") {
						say("\"I can give thee 20 gold coins for every 1 gold nugget thou hast.\"");
						var0005 = 0x0285;
					}
					say("\"Dost thou agree to my rate?\"");
					if (Func0955() == true) {
						var0006 = PARTY->count_objects(var0005, QUALITY_ANY, FRAME_ANY);
						if (var0006 > 0x01F4) {
							var0006 = 0x01F4;
						}
						if (var0006 != 0x0000) {
							say("\"How many ",
								var0004,
								" wouldst thou like to exchange?\"");
							var0007 = UI_input_numeric_value(0x0000, var0006, 0x0001, 0x0000);
							if (var0007 == 0x0000) {
								say("\"Couldst thou please decide!?\"");
								break;
							}
							if (var0004 == "Monetari") {
								var0008 = var0007 * 0x0002;
							}
							if (var0004 == "Guilders") {
								var0008 = (var0007 * 0x0002) / 0x0003;
								var0009 = 0x0003;
							}
							if (var0004 == "Filari") {
								var0008 = var0007 / 0x0002;
								var0009 = 0x0004;
							}
							var000A = var0008 / 0x0021;
							var000B = var0008 - var000A;
							var000E = "Gold Coins";
							var000F = "Gold Coins";
							if (var0008 == 0x0000) {
								say("\"Thou must offer at least ",
									var0009,
									" ",
									var0004,
									" to exchange for ",
									var0001,
									"!\"");
								break;
							}
							if (var0008 == 0x0001) {
								say("\"My fee will leave thee with nothing!\"");
								break;
							}
							if (var0008 <= 0x0021) {
								var000A = 0x0001;
								var000B = var0008 - var000A;
							}
							if (var000B == 0x0001) {
								var000E = "Gold Coin";
							}
							if (var000A == 0x0001) {
								var000F = "Gold Coin";
							}
							if (var0007 >= 0x0001) {
								var000C = UI_remove_party_items(var0007, var0005, QUALITY_ANY, FRAME_ANY, false);
								say("\"Hmmm...\"~\"Very well, I will take thy ",
									var0007,
									" ",
									var0004,
									" and in exchange give thee ",
									var0008,
									" Gold Coins, subtracting my fee of ",
									var000A,
									" ",
									var000F,
									", for a final sum of ",
									var000B,
									" ",
									var000E,
									" given to thee.\"");
								var000D = Func099B(AVATAR, var000B, var0002, QUALITY_ANY, FRAME_ANY, false, true);
								say("\"The transaction is done!\"");
							} else {
								say("\"Couldst thou please make up thy mind!?\"");
							}
						} else {
							say("\"Thou dost not have any ",
								var0004,
								" to exchange for ",
								var0001,
								"!\"");
						}
					} else {
						say("\"My rates are the same as every other moneychanger...\"");
					}
				}
			} while (false);
			say("\"Dost thou wish to exchange more coins?\"");
			var0000 = Func0955();
		}
	} else {
		say("\"Thou wilt find no other moneychangers with such a low fee as mine!\"");
	}
}

extern var Func09A0 0x9A0 (var var0000, var var0001);
extern void Func090D 0x90D (var var0000, var var0001, var var0002, var var0003, var var0004, var var0005, var var0006);
extern void Func03BB shape#(0x3BB) ();

void Func087C 0x87C () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;
	var var0008;
	var var0009;
	var var000A;
	var var000B;
	var var000C;
	var var000D;
	var var000E;
	var var000F;
	var var0010;

	var0000 = find_nearby(0x00A0, 0x000F, MASK_NONE);
	var0001 = false;
	for (var0004 in var0000 with var0002 to var0003) {
		var0005 = var0004->get_item_frame();
		if (var0005 < 0x0008) {
			var0001 = true;
		}
	}
	if (!var0001) {
		AVATAR->show_npc_face0(0x0000);
		say("\"I must be near a Serpent Gate for the Amulet of Balance to work.\"");
		UI_remove_npc_face0();
		abort;
	}
	var0006 = UI_get_timer(0x0007);
	if ((!gflags[USED_AMULET_OF_BALANCE]) || gflags[PLANTED_SILVER_SEED]) {
		var0006 = 0x00A8;
	}
	if (var0006 < 0x00A8) {
		var0007 = 0x0007 - (var0006 / 0x0018);
		var0008 = 0x0018 - (var0006 % 0x0018);
		if ((var0006 >= 0x0090) && (var0006 < 0x00A8)) {
			var0007 = 0x0000;
		}
		AVATAR->show_npc_face0(0x0000);
		say("\"It has not yet been a full week. The Amulet of Balance has not fully recharged.\"");
		if (var0007 > 0x0000) {
			say("\"I cannot use it for another ",
				var0007,
				" days yet.\"");
		}
		if (var0007 == 0x0000) {
			if (var0008 > 0x0001) {
				say("\"I must wait another ",
					var0008,
					" hours.\"");
			} else {
				say("\"I must wait another hour.\"");
			}
		}
		UI_remove_npc_face0();
		abort;
	}
	UI_set_timer(0x0007);
	var0009 = find_nearby(0x0113, 0x0014, MASK_EGG);
	for (var000C in var0009 with var000A to var000B) {
		if (var000C->get_item_frame() == 0x0006) {
			UI_close_gumps();
			AVATAR->clear_item_flag(FREEZE);
			gflags[TEMP_FLAG_1] = false;
			gflags[TEMP_FLAG_2] = false;
			gflags[TEMP_FLAG_3] = false;
			gflags[TEMP_FLAG_4] = false;
			var000D = AVATAR->get_npc_prop(MANA);
			var000D = 0x0000 - var000D;
			var000E = AVATAR->set_npc_prop(MANA, var000D);
			var000F = Func09A0(0x0000, 0x0002);
			UI_play_music(0x001D, var000F);
			var0010 = var000C->get_object_position();
			Func090D(var000C, -1, -1, -1, Func03BB, var000C, PATH_SUCCESS);
		}
	}
}

extern var Func0994 0x994 ();

void Func087D 0x87D () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;
	var var0008;
	var var0009;
	var var000A;
	var var000B;
	var var000C;
	var var000D;
	var var000E;

	if (Func0994() == 0x000D) {
		var0000 = [0x0433, 0x09C3, 0x0002];
	} else if (Func0994() == 0x000E) {
		var0000 = [0x090A, 0x0726, 0x0000];
	} else {
		var0000 = [0x03F9, 0x0617, 0x0002];
	}
	var0001 = AVATAR->find_nearby(0x0320, 0x0041, MASK_NONE);
	for (var0004 in var0001 with var0002 to var0003) {
		if (var0004->get_item_quality() == 0x00EC) {
			var0005 = true;
			break;
		}
	} nobreak {
		var0004 = UI_create_new_object(0x0320);
		if (var0004) {
			var0006 = var0004->set_item_quality(0x00EC);
			var0005 = UI_update_last_created(var0000);
		}
	}
	var0007 = UI_get_party_list();
	for (var000A in var0007 with var0008 to var0009) {
		var000B = var000A->get_cont_items(SHAPE_ANY, QUALITY_ANY, FRAME_ANY);
		for (var000E in var000B with var000C to var000D) {
			if (!((var000E->get_item_shape() == 0x01E6) || (var000E->get_item_shape() == 0x025F))) {
				var0006 = var000E->set_last_created();
				if (var0006) {
					if (var0005) {
						if (!var0004->give_last_created()) {
							var0006 = var000A->give_last_created();
						}
					} else if (!UI_update_last_created(var0000)) {
						var0006 = var000A->give_last_created();
					}
				}
			}
		}
	}
}

var Func087E 0x87E (var var0000, var var0001) {
	var var0002;
	var var0003;

	var0002 = UI_input_numeric_value(0x0000, var0000, 0x0001, (var0000 / 0x0002));
	if ((var0002 >= 0x0032) && (var0002 >= (var0000 / 0x0002))) {
		var0003 = UI_remove_party_items(var0002, var0001, QUALITY_ANY, FRAME_ANY, true);
		return true;
	}
	return false;
}

extern var Func0994 0x994 ();
extern void Func094A 0x94A (var var0000);
extern var Func0880 0x880 (var var0000);
extern void Func0624 object#(0x624) ();
extern var Func0988 0x988 (var var0000, var var0001);

void Func087F 0x87F (var var0000) {
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;
	var var0008;
	var var0009;
	var var000A;
	var var000B;

	UI_close_gumps();
	gflags[INSIDE_PUT_THE_AVATAR_TO_BED] = false;
	var0001 = Func0994();
	if (var0001 == 0x001F) {
		Func094A("I am weary, but I cannot fall asleep. It must be because I am already in the realm of dreams.");
		if (Func0880(var0000)) {
			var0000->Func0624();
		}
		abort;
	}
	if (UI_in_combat()) {
		Func094A("This is no time to sleep! Rouse thy bones!");
		if (Func0880(var0000)) {
			var0000->Func0624();
		}
	} else {
		var0002 = var0000->get_item_frame();
		var0003 = var0000->get_item_shape();
		if ((var0002 > 0x0003) && (!Func0880(var0000))) {
			var0004 = var0000->get_object_position();
			var0005 = var0000->find_nearby(var0003, 0x0002, MASK_NONE);
			for (var0008 in var0005 with var0006 to var0007) {
				if (var0008->get_item_frame() <= 0x0002) {
					var0009 = var0008->get_object_position();
					if ((var0009[0x0001] == var0004[0x0001]) && ((var0009[0x0002] == var0004[0x0002]) && ((var0009[0x0003] + 0x0001) == var0004[0x0003]))) {
						var0000 = var0008;
					}
				}
			}
		}
		if (Func0880(item)) {
			var000A = script AVATAR {
				nohalt;
				music 21;
			};
		}
		var000B = Func0988(AVATAR->get_npc_object(), UI_get_party_list());
		AVATAR->set_schedule_type(SLEEP);
		var0000->nap_time();
	}
}

var Func0880 0x880 (var var0000) {
	var var0001;
	var var0002;

	var0001 = var0000->get_item_frame();
	var0002 = var0000->get_item_shape();
	if ((var0001 == 0x0015) && (var0002 == 0x03F3)) {
		return true;
	}
	return false;
}

void Func0881 0x881 () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;

	var0000 = AVATAR->find_nearby(0x010E, 0x000C, MASK_ALL_UNSEEN);
	var0000 &= AVATAR->find_nearby(0x0178, 0x000C, MASK_ALL_UNSEEN);
	for (var0003 in var0000 with var0001 to var0002) {
		var0004 = var0003->get_item_quality();
		if ((var0004 == 0x0001) || ((var0004 == 0x0002) || ((var0004 == 0x0003) || ((var0004 == 0x0004) || ((var0004 == 0x0005) || ((var0004 == 0x0006) || ((var0004 == 0x0007) || ((var0004 == 0x000B) || ((var0004 == 0x004A) || (var0004 == 0x00B8)))))))))) {
			var0005 = 0x0002;
			while (var0005 < 0x001F) {
				if (var0003->get_item_frame() == var0005) {
					var0003->set_item_frame(var0005 - 0x0002);
				}
				var0005 += 0x0004;
			}
		}
	}
}

void Func0882 0x882 () {
	var var0000;
	var var0001;

	var0000 = AVATAR->get_object_position();
	gflags[TRAP_SWITCH_1_DONE] = false;
	gflags[TRAP_SWITCH_2_DONE] = false;
	gflags[TRAP_SWITCH_3_DONE] = false;
	var0001 = UI_create_new_object(0x037F);
	if (var0001) {
		// BUG: This overwrites the object in var0001 with a boolean value,
		// which is then used bellow as an object. This should probably have
		// been var0000 instead of var0001.
		var0001 = UI_update_last_created(var0000);
		UI_play_sound_effect(0x0029);
		var0001->set_item_flag(TEMPORARY);
	}
}

void Func0883 0x883 () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;

	var0000 = find_nearby(0x0113, 0x0028, MASK_EGG);
	for (var0003 in var0000 with var0001 to var0002) {
		if (var0003->get_item_frame() == 0x0007) {
			var0003->remove_item();
		}
	}
	var0004 = find_nearby(0x02D8, 0x0032, MASK_NONE);
	for (var0003 in var0004 with var0005 to var0006) {
		var0007 = var0003->get_object_position();
		UI_play_sound_effect(0x0021);
		UI_sprite_effect(ANIMATION_BIG_RING_BLAST, var0007[0x0001], var0007[0x0002], 0x0000, 0x0000, 0x0000, LOOP_ONCE);
		var0003->remove_item();
	}
}

void Func0884 0x884 (var var0000) {
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;

	if (var0000 == 0x0001) {
		var0001 = [0x09E9, 0x0B90, 0x0000];
	}
	if (var0000 == 0x0002) {
		var0001 = [0x09E9, 0x0B70, 0x0000];
	}
	if (var0000 == 0x0003) {
		var0001 = [0x0B79, 0x0ADE, 0x0000];
	}
	var0002 = find_nearby(0x010E, 0x000A, MASK_NONE) & find_nearby(0x0178, 0x000A, MASK_NONE);
	for (var0005 in var0002 with var0003 to var0004) {
		var0001 = var0005->get_object_position();
		var0006 = var0005->get_item_shape();
		var0005->remove_item();
		if (var0006 == 0x010E) {
			var0006 = 0x0178;
		} else {
			var0006 = 0x010E;
		}
		var0007 = UI_create_new_object(var0006);
		if (var0007) {
			var0005 = UI_update_last_created([var0001]);
			UI_play_sound_effect(0x0069);
			var0007->set_item_frame(0x0007);
			if (var0000 == 0x0001) {
				gflags[TRAP_MAGIC_LOCK_DOOR_1] = true;
			}
			if (var0000 == 0x0002) {
				gflags[TRAP_MAGIC_LOCK_DOOR_2] = true;
			}
			if (var0000 == 0x0003) {
				gflags[TRAP_MAGIC_LOCK_DOOR_3] = true;
			}
		}
	}
}

extern void Func095D 0x95D (var var0000);
extern void Func0886 0x886 ();

void Func0885 0x885 (var var0000) {
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;

	var0001 = find_nearby(0x0376, 0x0005, MASK_NONE);
	var0002 = var0001->get_item_frame();
	if (var0000 == 0x0004) {
		if (var0002 == 0x0001) {
			if ((!gflags[PRESSURE_PLATE_2_DONE]) && (!gflags[PRESSURE_PLATE_3_DONE])) {
				gflags[PRESSURE_PLATE_1_DONE] = true;
				Func095D(0x0032);
			} else {
				Func0886();
			}
		}
	}
	if (var0000 == 0x0005) {
		if (var0002 == 0x0000) {
			if (gflags[PRESSURE_PLATE_1_DONE] && (!gflags[PRESSURE_PLATE_3_DONE])) {
				gflags[PRESSURE_PLATE_2_DONE] = true;
				Func095D(0x0032);
			} else {
				Func0886();
			}
		}
	}
	if (var0000 == 0x0006) {
		if (var0002 == 0x0001) {
			if (gflags[PRESSURE_PLATE_1_DONE] && gflags[PRESSURE_PLATE_2_DONE]) {
				gflags[PRESSURE_PLATE_3_DONE] = true;
				Func095D(0x0032);
			} else {
				Func0886();
			}
		}
	}
	if (gflags[PRESSURE_PLATE_1_DONE] && (gflags[PRESSURE_PLATE_2_DONE] && gflags[PRESSURE_PLATE_3_DONE])) {
		var0003 = find_nearby(0x0386, 0x0078, MASK_NONE);
		for (var0006 in var0003 with var0004 to var0005) {
			var0006->remove_item();
		}
	}
}

void Func0886 0x886 () {
	gflags[PRESSURE_PLATE_1_DONE] = false;
	gflags[PRESSURE_PLATE_2_DONE] = false;
	gflags[PRESSURE_PLATE_3_DONE] = false;
}

extern var Func0992 0x992 (var var0000, var var0001, var var0002, var var0003);
extern var Func0956 0x956 (var var0000);

void Func0887 0x887 (var var0000) {
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;

	if (var0000->get_item_frame() == 0x0000) {
		var0001 = var0000->get_object_position();
		var0000->remove_item();
		var0002 = UI_create_new_object(0x03BE);
		if (var0002) {
			var0003 = UI_remove_party_items(0x0001, 0x0289, QUALITY_ANY, 0x000D, true);
			var0002->set_item_frame(0x0003);
			var0004 = UI_update_last_created(var0001);
			gflags[ROPE_ON_WELL] = true;
		}
		var0005 = [0x091F, 0x0BA1, 0x0000];
	}
	if (var0000->get_item_frame() == 0x0001) {
		var0006 = Func0992(0x0001, 0x0000, 0x0000, false);
		var0006->show_npc_face0(0x0000);
		say("\"Up or down?\"");
		if (Func0956(["Up", "Down"]) == "Up") {
			var0005 = [0x092D, 0x0B71, 0x0000];
		} else {
			var0005 = [0x094D, 0x0BC1, 0x0000];
		}
		UI_remove_npc_face0();
	}
	if (var0000->get_item_frame() == 0x0002) {
		var0005 = [0x091F, 0x0BA1, 0x0000];
	}
	if (var0000->get_item_frame() == 0x0003) {
		var0005 = [0x091F, 0x0BA1, 0x0000];
	}
	UI_fade_palette(0x000C, 0x0001, 0x0000);
	PARTY->move_object(var0005);
	var0002 = script AVATAR after 3 ticks {
		nohalt;
		call Func060D;
	};
}

void Func0888 0x888 () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;

	if (gflags[RED_ORB_PLACED] && (gflags[PURPLE_ORB_PLACED] && (gflags[BLUE_ORB_PLACED] && gflags[YELLOW_ORB_PLACED]))) {
		var0000 = find_nearby(0x010E, 0x0014, MASK_NONE);
		for (var0003 in var0000 with var0001 to var0002) {
			if (var0003->get_item_quality() == 0x00F1) {
				var0004 = var0003->get_object_position();
				var0003->remove_item();
				var0005 = UI_create_new_object(0x010E);
				if (var0005) {
					var0003 = UI_update_last_created([var0004]);
					UI_play_sound_effect2(0x0046, var0005);
					var0005->set_item_frame(0x0014);
				}
			}
		}
	}
}

extern void Func090D 0x90D (var var0000, var var0001, var var0002, var var0003, var var0004, var var0005, var var0006);
extern void Func025F shape#(0x25F) ();

void Func0889 0x889 (var var0000) {
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;
	var var0008;
	var var0009;
	var var000A;
	var var000B;
	var var000C;
	var var000D;
	var var000E;
	var var000F;
	var var0010;

	var0001 = UI_click_on_item();
	var0002 = var0001[0x0002];
	var0003 = var0001[0x0003];
	if (((var0002 > 0x05B3) && ((var0002 < 0x05BC) && ((var0003 > 0x03D2) && (var0003 < 0x03E1)))) || (((var0002 == 0x05B4) && ((var0003 > 0x03E0) && (var0003 < 0x03E3))) || (((var0002 == 0x05BB) && ((var0003 > 0x03E0) && (var0003 < 0x03E3))) || (((var0002 > 0x05B3) && ((var0002 < 0x05B6) && ((var0003 > 0x03E2) && (var0003 < 0x03E6)))) || (((var0002 > 0x05B9) && ((var0002 < 0x05BC) && ((var0003 > 0x03E2) && (var0003 < 0x03EC)))) || (((var0002 > 0x05A7) && ((var0002 < 0x05BA) && ((var0003 > 0x03E9) && (var0003 < 0x03EC)))) || ((var0002 > 0x05A7) && ((var0002 < 0x05B4) && ((var0003 > 0x03E3) && (var0003 < 0x03E6)))))))))) {
		var0004 = AVATAR->find_nearest(0x025F, 0x001E);
		var0005 = [0x0000];
		var0006 = [0x0000];
		var0007 = -1;
		Func090D(var0004, var0005, var0006, var0007, Func025F, var0000, PATH_FAILURE);
		return;
	}
	if (!var0001) {
		return;
	}
	var0008 = false;
	if (var0001 == AVATAR->get_npc_object()) {
		return;
	}
	var0009 = var0001->get_item_shape();
	var000A = var0001->get_item_frame();
	if (var0009 == 0x02E5) {
		var0005 = [ 0,  1,  1,  0, -1, -2, -3, -4, -4, -3, -2, -1];
		var0006 = [ 1,  0, -1, -2, -2, -2, -2, -1,  0,  1,  1,  1];
		var0007 = -1;
		var0008 = true;
	}
	if (var0009 == 0x02CF) {
		var0005 = [ 1,  0,  1,  1,  1,  0, -1, -2, -2, -2, -2, -1];
		var0006 = [ 0, -1, -1, -2, -3, -4, -5, -3, -2, -1,  0, -1];
		var0007 = -1;
		var0008 = true;
	}
	if (var0009 == 0x019C) {
		var000B = var0001->find_nearest(0x02CA, 0x0008);
		if (var000B) {
			if (var000B->get_item_frame() != 0x0006) {
				var0005 = [ 1, -3,  1, -3];
				var0006 = [ 1,  1,  2,  2];
				var0007 = -1;
				var0008 = true;
			}
		}
	}
	if (var0009 == 0x02CA) {
		if (var000A != 0x0006) {
			var0005 = [ 1, -3, -1, -2,  1, -3,  1, -3];
			var0006 = [-1, -1,  1,  1, -6, -6, -3, -3];
			var0007 = -1;
			var0008 = true;
		}
	}
	if (((var0009 == 0x030A) && (var000A == 0x0006)) || ((var0009 == 0x0192) && (var000A == 0x0010))) {
		if (var0000->get_item_frame() == 0x0000) {
			var0000->set_item_frame(0x0002);
			var000C = var0000->set_item_quality(0x0009);
		} else if (var0000->get_item_frame() != 0x0006) {
			var0000->set_item_frame(0x0000);
			var000C = var0000->set_item_quality(0x0000);
		}
		abort;
	}
	if (var0009 == 0x0269) {
		if (var000A == 0x0000) {
			var0005 = [-5, -5];
			var0006 = [-2, -1];
			var0007 = -1;
			var0008 = true;
		}
	}
	if (var0009 == 0x0102) {
		var0005 = [ 0, -1, -2, -3];
		var0006 = [ 2,  2,  2,  2];
		var0007 = -1;
		var0008 = true;
	}
	if (var0009 == 0x01B2) {
		var0005 = [ 2,  2,  2,  2];
		var0006 = [ 0, -1, -2, -3];
		var0007 = -1;
		var0008 = true;
	}
	if (var0009 == 0x01D6) {
		if (var0001->get_item_frame() != 0x0000) {
			var000D = var0001->find_nearby(0x01D6, 0x0002, MASK_NONE);
			for (var0010 in var000D with var000E to var000F) {
				if (var0010->get_item_frame() == 0x0000) {
					var0001 = var0010;
					break;
				}
			}
		}
		var0005 = [-4, -4];
		var0006 = [-2, -2];
		var0007 = -1;
		var0008 = true;
	}
	if (var0008) {
		Func090D(var0001, var0005, var0006, var0007, var0009, var0000, PATH_FAILURE);
	}
}

extern void Func08F4 0x8F4 ();
extern var Func090C 0x90C (var var0000, var var0001);
extern void Func097F 0x97F (var var0000, var var0001, var var0002);
extern void Func062B object#(0x62B) ();
extern void Func090D 0x90D (var var0000, var var0001, var var0002, var var0003, var var0004, var var0005, var var0006);

void Func088A 0x88A (var var0000) {
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;
	var var0008;
	var var0009;
	var var000A;

	var0001 = UI_click_on_item();
	if (var0001 == AVATAR->get_npc_object()) {
		return;
	}
	if (var0001[0x0001] != 0x0000) {
		if (var0001[0x0001]->is_npc() && (var0001[0x0001]->get_npc_number() != AVATAR)) {
			var0002 = var0000->get_item_quality();
			var0003 = var0001->get_npc_number();
			if (var0000->get_item_frame() < 0x0006) {
				var0000->set_item_frame(0x0000);
				var0004 = var0000->set_item_quality(0x0000);
			}
			if (var0002) {
				if ((var0002 == 0x000D) && (var0003 == IOLO)) {
					IOLO->clear_item_flag(SI_ZOMBIE);
					if (!IOLO->get_item_flag(IN_PARTY)) {
						IOLO->set_schedule_type(TALK);
					}
					Func08F4();
				}
				if ((var0002 == 0x000E) && (var0003 == SHAMINO)) {
					SHAMINO->clear_item_flag(SI_ZOMBIE);
					if (!SHAMINO->get_item_flag(IN_PARTY)) {
						SHAMINO->set_schedule_type(TALK);
					}
					Func08F4();
				}
				if ((var0002 == 0x000F) && (var0003 == DUPRE)) {
					DUPRE->clear_item_flag(SI_ZOMBIE);
					if (!DUPRE->get_item_flag(IN_PARTY)) {
						DUPRE->set_schedule_type(TALK);
					}
					Func08F4();
				}
				if ((var0002 == 0x000F) && (var0003 == GWENNO)) {
					GWENNO->clear_item_flag(SI_ZOMBIE);
					if (!GWENNO->get_item_flag(IN_PARTY)) {
						GWENNO->set_schedule_type(TALK);
					}
					Func08F4();
				}
				return;
			}
			var0005 = Func090C(AVATAR, var0001);
			var0004 = script AVATAR {
				face var0005;
				continue;
				actor frame strike_2h;
			};
			Func097F(var0001, "@Cease and desist!@", 0x0000);
			return;
		}
		var0006 = var0001[0x0001]->get_item_shape();
		if (var0006 == 0x01BD) {
			if ((var0001->get_item_frame() == 0x0001) && (var0000->get_item_frame() == 0x0001)) {
				var0002 = var0000->get_item_quality();
				if (var0002 == 0x000A) {
					var0001->set_item_frame(0x0002);
				}
				if (var0002 == 0x000B) {
					var0001->set_item_frame(0x0003);
				}
				if (var0002 == 0x000C) {
					var0001->set_item_frame(0x0004);
				}
				var0004 = var0000->set_item_quality(0x0000);
				var0000->set_item_frame(0x0000);
			}
			return;
		}
		if (var0000->get_item_quality() > 0x0000) {
			event = PATH_SUCCESS;
			var0000->Func062B();
		}
		var0007 = false;
		if ((var0006 == 0x0152) || ((var0006 == 0x02BD) || (var0006 == 0x01B3))) {
			var0008 = [ 2, -2,  0,  2, -2, -2,  0, -2];
			var0009 = [ 0, -2, -2, -2,  0,  2,  2,  2];
			var000A = -2;
			var0007 = true;
		}
		if ((var0006 == 0x02E3) || (var0006 == 0x0339)) {
			var0008 = [ 1,  1,  1,  1,  0, -1, -2, -3, -4, -4, -4, -4, -3, -2, -1, -1,  0];
			var0009 = [ 0, -1, -2, -3, -4, -4, -4, -4, -3, -2, -1,  0, -1, -1, -1, -1, -1];
			var000A = -1;
			var0007 = true;
		}
		if (var0006 == 0x02E5) {
			if (var0000->get_item_frame() > 0x0000) {
				abort;
			}
			var0008 = [ 0,  1,  1,  0, -1, -2, -3, -4, -4, -3, -2, -1];
			var0009 = [ 1,  0, -1, -2, -2, -2, -2, -1,  0,  1,  1,  1];
			var000A = -1;
			var0007 = true;
		}
		if (var0006 == 0x02CF) {
			if (var0000->get_item_frame() > 0x0000) {
				abort;
			}
			var0008 = [ 1,  0,  1,  1,  1,  0, -1, -2, -2, -2, -2, -1];
			var0009 = [ 0, -1, -1, -2, -3, -4, -5, -3, -2, -1,  0, -1];
			var000A = -1;
			var0007 = true;
		}
		if (var0006 == 0x035F) {
			if (var0001->get_item_frame() == 0x0010) {
				var0001->set_item_frame(0x0012);
			}
			return;
		}
		if (var0007) {
			Func090D(var0001, var0008, var0009, var000A, var0006, var0001, PATH_SUCCESS);
		} else if (var0000->get_item_frame() < 0x0006) {
			var0000->set_item_frame(0x0000);
		}
	} else {
		var0004 = UI_path_run_usecode([var0001[0x0002], var0001[0x0003], var0001[0x0004]], Func062B, var0000, PATH_SUCCESS);
		if (!var0004) {
			event = PATH_SUCCESS;
			var0000->Func062B();
		}
	}
}

extern var Func090C 0x90C (var var0000, var var0001);

void Func088B 0x88B (var var0000, var var0001) {
	var var0002;
	var var0003;

	var0002 = Func090C(AVATAR, var0000);
	var0003 = script AVATAR {
		face var0002;
		continue;
		actor frame bowing;
		actor frame standing;
	};
	var0003 = script var0000 after 2 ticks {
		nohalt;
		call var0001;
	};
}

void Func088C 0x88C () {
	var var0000;
	var var0001;
	var var0002;

	var0000 = AVATAR->find_nearby(0x032A, 0x0001, MASK_NONE);
	if (var0000) {
		var0001 = var0000->get_object_position();
		var0002 = var0000->set_last_created();
		if (var0002) {
			var0002 = AVATAR->give_last_created();
			if (!var0002) {
				var0002 = UI_update_last_created(var0001);
				UI_flash_mouse(CURSOR_WONT_FIT);
				abort;
			}
		} else {
			abort;
		}
	} else {
		abort;
	}
}

void Func088D 0x88D (var var0000, var var0001) {
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;
	var var0008;
	var var0009;
	var var000A;
	var var000B;
	var var000C;
	var var000D;
	var var000E;
	var var000F;
	var var0010;
	var var0011;
	var var0012;
	var var0013;

	var0002 = [];
	var0003 = AVATAR->find_nearby(var0001, 0x000F, MASK_NONE);
	for (var0006 in var0003 with var0004 to var0005) {
		var0007 = 0x0000;
		var0008 = 0x270F;
		for (var000B in var0003 with var0009 to var000A) {
			var0007 += 0x0001;
			if ((var000B != 0x0000) && (var000B != var0000)) {
				var000C = var0000->get_distance(var000B);
				if (var000C < var0008) {
					var0008 = var000C;
					var000D = var0007;
				}
			}
		}
		var0002 &= var0003[var000D];
		var0003[var000D] = 0x0000;
	}
	AVATAR->sit_down(var0000);
	var000E = UI_get_array_size(var0002);
	var000F = UI_get_party_list();
	var0007 = 0x0002;
	for (var0012 in var000F with var0010 to var0011) {
		if ((var0007 - 0x0001) > var000E) {
			break;
		}
		if (!(var0012->get_schedule_type() == MAJOR_SIT)) {
			var0013 = var0007 - 0x0001;
			var0012->sit_down(var0002[var0013]);
		}
		var0007 += 0x0001;
	}
}

var Func088E 0x88E (var var0000) {
	if (var0000 < 0x0005) {
		var0000 += 0x0002;
		return var0000;
	}
	if (var0000 == 0x0005) {
		if (gflags[SATIN_GOOD]) {
			var0000 = 0x0007;
		} else {
			var0000 = 0x0001;
		}
		return var0000;
	}
	if (var0000 > 0x0005) {
		var0000 = 0x0001;
		return var0000;
	}
	return 0;
}

var Func088F 0x88F (var var0000) {
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;

	var0001 = var0000->find_nearby(SHAPE_ANY, 0x000A, MASK_NONE);
	var0002 = [0x0316];
	for (var0005 in var0001 with var0003 to var0004) {
		var0006 = var0005->get_item_shape();
		if (var0006 in var0002) {
			return 0x0316;
		}
	}
	return 0x00C7;
}

var Func0890 0x890 () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;

	var0000 = UI_get_party_list();
	for (var0003 in var0000 with var0001 to var0002) {
		var0004 = var0003->get_item_frame();
		if ((!(var0004 == 0x000A)) && (!(var0004 == 0x001A))) {
			return false;
		}
	}
	return true;
}

var Func0891 0x891 () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;

	var0000 = "soup" & ("*" & ("eruption" & ("*" & ("quagmire" & ("*" & ("bureaucracy" & ("bureaucracies" & ("hoe" & "*"))))))));
	var0000 &= "tyranny" & ("tyrannies" & ("monarchy" & ("monarchies" & ("hammer" & ("*" & ("sickle" & ("*" & ("imperialism" & "*"))))))));
	var0000 &= "axle" & ("*" & ("wheel" & ("*" & ("Gump" & ("*" & ("lenticular cloud" & ("*" & ("clock" & ("*" & ("sloop" & ("*" & ("barge" & "*"))))))))))));
	var0001 = UI_die_roll(0x0001, (UI_get_array_size(var0000) / 0x0002));
	var0002 = var0000[((var0001 * 0x0002) - 0x0001)];
	var0003 = var0000[(var0001 * 0x0002)];
	if (var0003 == "*") {
		var0003 = var0002 + "s";
	}
	return [var0002, var0003];
}

var Func0892 0x892 () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;

	var0000 = "cage" & ("*" & ("flagpole" & ("*" & ("digit" & ("*" & ("nail" & ("*" & ("epaphite" & ("*" & ("sycophant" & ("*" & ("demagogue" & "*"))))))))))));
	var0000 &= "prophet" & ("*" & ("profit" & ("*" & ("pus" & ("pus" & ("mulch" & ("mulch" & ("Garden Gnome" & "*"))))))));
	var0000 &= "personal crisis" & ("personal crises" & ("wit" & ("*" & ("bathysphere" & ("*" & ("pudding" & ("*" & ("origami ball" & ("*" & ("communion wafer" & ("*" & ("armageddon" & ("*" & ("balloon" & "*"))))))))))))));
	var0001 = UI_die_roll(0x0001, (UI_get_array_size(var0000) / 0x0002));
	var0002 = var0000[((var0001 * 0x0002) - 0x0001)];
	var0003 = var0000[(var0001 * 0x0002)];
	if (var0003 == "*") {
		var0003 = var0002 + "s";
	}
	return [var0002, var0003];
}

var Func0893 0x893 () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;

	var0000 = "constipated" & ("fractured" & ("dysfunctional" & ("dyslexic" & ("diuretic" & ("glandular" & ("hormonal" & ("obtuse" & ("obese" & ("partisan" & "bilateral")))))))));
	var0000 &= "symmetrical" & ("frontal" & ("superfluous" & ("saturated" & ("molar" & ("low-pressure" & ("diagnostic" & ("acidic" & ("empirical" & ("basic" & ("suicidal" & ("comforting" & "passive")))))))))));
	var0000 &= "hedonistic" & ("pagan" & ("philanthropic" & ("operatic" & ("staged" & ("affected" & ("grotesque" & ("orgasmic" & ("organic" & ("pedantic" & ("imperialist" & ("Gumpy" & "dependent")))))))))));
	var0001 = UI_die_roll(0x0001, UI_get_array_size(var0000));
	var0002 = var0000[var0001];
	var0001 = UI_die_roll(0x0001, UI_get_array_size(var0000));
	var0003 = var0000[var0001];
	return [var0002, var0003];
}

var Func0894 0x894 () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;

	var0000 = "lactate" & ("lactated" & ("lactating" & ("grovel" & ("grovelled" & ("grovelling" & ("brew" & ("*" & ("*" & ("digest" & ("*" & ("*" & ("complain" & ("*" & "*")))))))))))));
	var0000 &= "gump" & ("*" & ("*" & ("guffaw" & ("*" & ("*" & ("loiter" & ("*" & ("*" & ("solicit" & ("*" & "*"))))))))));
	var0000 &= "represent" & ("*" & ("*" & ("conjugate" & ("conjugated" & ("conjugating" & ("sink" & ("sank" & ("*" & ("harvest" & ("*" & ("*" & ("gossip" & ("*" & ("*" & ("falsify" & ("falsified" & ("*" & ("sue" & ("sued" & "suing")))))))))))))))))));
	var0000 &= "gyrate" & ("gyrated" & ("gyrating" & ("outstretch" & ("*" & ("*" & ("deflower" & ("*" & "*")))))));
	var0001 = UI_die_roll(0x0001, (UI_get_array_size(var0000) / 0x0003));
	var0002 = var0000[((var0001 * 0x0003) - 0x0002)];
	var0003 = var0000[((var0001 * 0x0003) - 0x0001)];
	var0004 = var0000[(var0001 * 0x0003)];
	if (var0003 == "*") {
		var0003 = var0002 + "ed";
	}
	if (var0004 == "*") {
		var0004 = var0002 + "ing";
	}
	return [var0002, var0003, var0004];
}

var Func0895 0x895 () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;

	var0000 = "collate" & ("collated" & ("collating" & ("sear" & ("*" & ("*" & ("croak" & ("*" & ("*" & ("nap" & ("napped" & ("napping" & ("work" & ("*" & ("*" & ("conjure" & ("conjured" & "conjuring"))))))))))))))));
	var0000 &= "campaign" & ("*" & ("*" & ("protest" & ("*" & ("*" & ("spew" & ("*" & ("*" & ("inhabit" & ("*" & ("*" & ("censor" & ("*" & "*")))))))))))));
	var0000 &= "lay off" & ("laid off" & ("laying off" & ("spray" & ("*" & ("*" & ("tan" & ("tanned" & "tanning")))))));
	var0001 = UI_die_roll(0x0001, (UI_get_array_size(var0000) / 0x0003));
	var0002 = var0000[((var0001 * 0x0003) - 0x0002)];
	var0003 = var0000[((var0001 * 0x0003) - 0x0001)];
	var0004 = var0000[(var0001 * 0x0003)];
	if (var0003 == "*") {
		var0003 = var0002 + "ed";
	}
	if (var0004 == "*") {
		var0004 = var0002 + "ing";
	}
	return [var0002, var0003, var0004];
}

var Func0896 0x896 () {
	var var0000;
	var var0001;
	var var0002;

	var0000 = "between the sheets" & ("with a melon" & ("assuredly" & ("above thine house" & "below the ground")));
	var0000 &= "with much consternation" & ("Gumpily" & ("fiscally" & ("similarly" & "throughout the universe")));
	var0001 = UI_die_roll(0x0001, UI_get_array_size(var0000));
	var0002 = var0000[var0001];
	return var0002;
}

var Func0897 0x897 () {
	var var0000;
	var var0001;
	var var0002;

	var0000 = "without my knowledge" & ("without the proper permit" & ("through the ages" & "against all odds"));
	var0000 &= "with thy mother" & ("in a roundabout manner" & ("implicitly" & ("explicitly" & "anxiously")));
	var0001 = UI_die_roll(0x0001, UI_get_array_size(var0000));
	var0002 = var0000[var0001];
	return var0002;
}

var Func0898 0x898 () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;

	var0000 = "armadillo" & ("*" & ("octopus" & ("octopi" & ("ungulate" & ("*" & ("cockatoo" & ("*" & ("ferret" & ("*" & ("weasel" & ("*" & ("bassalope" & "*"))))))))))));
	var0000 &= "platypus" & ("platypuses" & ("no-see-um" & ("*" & ("alpaca" & ("*" & ("mooncow" & ("*" & ("thundermoose" & ("*" & ("llama" & "*"))))))))));
	var0000 &= "iguana" & ("*" & ("reptile" & ("*" & ("amphibian" & ("*" & ("mammal" & ("*" & ("invertebrate" & "*"))))))));
	var0001 = UI_die_roll(0x0001, (UI_get_array_size(var0000) / 0x0002));
	var0002 = var0000[((var0001 * 0x0002) - 0x0001)];
	var0003 = var0000[(var0001 * 0x0002)];
	if (var0003 == "*") {
		var0003 = var0002 + "s";
	}
	return [var0002, var0003];
}

var Func0899 0x899 () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;

	var0000 = "dicot" & ("*" & ("conifer" & ("*" & ("slug" & ("*" & ("sloth" & ("*" & ("mole-person" & ("mole-people" & ("pod-person" & ("pod-people" & ("Saxon" & ("*" & ("Dominican" & ("*" & ("Basque" & "*"))))))))))))))));
	var0000 &= "Gypsy" & ("Gypsies" & ("Jute" & ("*" & ("Norman" & ("*" & ("Mongol" & ("*" & ("Slav" & ("*" & ("Hindu" & ("*" & ("Christian" & ("*" & ("Albigensian" & ("*" & ("cephalopod" & ("*" & ("rock critic" & "*"))))))))))))))))));
	var0001 = UI_die_roll(0x0001, (UI_get_array_size(var0000) / 0x0002));
	var0002 = var0000[((var0001 * 0x0002) - 0x0001)];
	var0003 = var0000[(var0001 * 0x0002)];
	if (var0003 == "*") {
		var0003 = var0002 + "s";
	}
	return [var0002, var0003];
}

var Func089A 0x89A () {
	var var0000;
	var var0001;
	var var0002;

	var0000 = "studmuffin" & ("creampuff" & ("sot" & ("guttersnipe" & ("yellowback" & ("four-eyes" & ("goofball" & ("wretch" & ("shmuck" & ("pox" & ("twig" & ("comrade" & ("babycakes" & ("smart-guy" & ("dumpling" & ("smartypants" & "Spankamiah")))))))))))))));
	var0001 = UI_die_roll(0x0001, UI_get_array_size(var0000));
	var0002 = var0000[var0001];
	return var0002;
}

extern var Func0891 0x891 ();
extern var Func0892 0x892 ();
extern var Func0898 0x898 ();
extern var Func0899 0x899 ();
extern var Func0893 0x893 ();
extern var Func0894 0x894 ();
extern var Func0895 0x895 ();
extern var Func0896 0x896 ();
extern var Func0897 0x897 ();
extern var Func089A 0x89A ();

var Func089B 0x89B () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;
	var var0008;
	var var0009;
	var var000A;
	var var000B;
	var var000C;
	var var000D;
	var var000E;
	var var000F;
	var var0010;
	var var0011;
	var var0012;
	var var0013;

	if (UI_die_roll(0x0000, 0x0003)) {
		if (UI_die_roll(0x0000, 0x0001)) {
			var0000 = Func0891();
		} else {
			var0000 = Func0892();
		}
	} else if (UI_die_roll(0x0000, 0x0001)) {
		var0000 = Func0898();
	} else {
		var0000 = Func0899();
	}
	var0001 = var0000[0x0001];
	var0002 = var0000[0x0002];
	if (UI_die_roll(0x0000, 0x0001)) {
		var0003 = Func0891();
	} else {
		var0003 = Func0892();
	}
	if (UI_die_roll(0x0000, 0x0001)) {
		var0004 = Func0891();
	} else {
		var0004 = Func0892();
	}
	if (UI_die_roll(0x0000, 0x0001)) {
		var0005 = Func0891();
	} else {
		var0005 = Func0892();
	}
	var0005 = var0005[0x0002];
	var0000 = Func0893();
	var0006 = var0000[0x0001];
	var0007 = var0000[0x0002];
	if (UI_die_roll(0x0000, 0x0001)) {
		var0000 = Func0894();
	} else {
		var0000 = Func0895();
	}
	var0008 = var0000[0x0001];
	var0009 = var0000[0x0002];
	var000A = var0000[0x0003];
	if (UI_die_roll(0x0000, 0x0001)) {
		var000B = Func0896();
	} else {
		var000B = Func0897();
	}
	if (UI_die_roll(0x0000, 0x0001)) {
		var0000 = Func0898();
	} else {
		var0000 = Func0899();
	}
	var000C = var0000[0x0001];
	var000D = var0000[0x0002];
	var000E = Func089A();
	var0000 = UI_die_roll(0x0000, 0x0024);
	if (var0000 == 0x0000) {
		var000F = ((("I will show thee my " + var0006) + " ") + var0001) + " if thou wilt show me thine.";
	}
	var0000 -= 0x0001;
	if (var0000 == 0x0000) {
		var000F = ((((((("All of my " + var0006) + " ") + var0002) + " are ") + var000A) + " ") + var000B) + ".";
	}
	var0000 -= 0x0001;
	if (var0000 == 0x0000) {
		var000F = ((((("Stop " + var000A) + " my ") + var0006) + " ") + var0001) + ", please.";
	}
	var0000 -= 0x0001;
	if (var0000 == 0x0000) {
		var000F = ((((("Hast thou seen my " + var0001) + "? 'Tis ") + var000A) + " ") + var000B) + ".";
	}
	var0000 -= 0x0001;
	if (var0000 == 0x0000) {
		var000F = ((("There is no " + var0001) + " for thee today, little ") + var000C) + ", only death.";
	}
	var0000 -= 0x0001;
	if (var0000 == 0x0000) {
		var0010 = UI_a_or_an(var0006);
		var000F = ((((("Am I having " + var0010) + " ") + var0006) + " ") + var0001) + " yet?";
	}
	var0000 -= 0x0001;
	if (var0000 == 0x0000) {
		var0010 = UI_a_or_an(var0006);
		var000F = ((((("Where is mine advisor? I need " + var0010) + " ") + var0006) + " ") + var0001) + " immediately.";
	}
	var0000 -= 0x0001;
	if (var0000 == 0x0000) {
		var000F = ((((((("Thou hast saved my " + var0006) + " ") + var000C) + " from ") + var0001) + ", ") + var000E) + ". How can I ever repay thee?";
	}
	var0000 -= 0x0001;
	if (var0000 == 0x0000) {
		var0010 = UI_a_or_an(var0001);
		var000F = ((((((((((("^" + var0010) + " ") + var0001) + ", ") + var0010) + " ") + var0001) + ", my kingdom for ") + var0010) + " ") + var0001) + "!";
	}
	var0000 -= 0x0001;
	if (var0000 == 0x0000) {
		var0010 = UI_a_or_an(var0001);
		var000F = ((("Frankly, my dear, I don't give " + var0010) + " ") + var0001) + ".";
	}
	var0000 -= 0x0001;
	if (var0000 == 0x0000) {
		var000F = ((("As " + var0002) + " are my witness, I'll never go ") + var0006) + " again.";
	}
	var0000 -= 0x0001;
	if (var0000 == 0x0000) {
		var000F = ("Oh, my, " + var000E) + ", I don't think we're in Britannia anymore.";
	}
	var0000 -= 0x0001;
	if (var0000 == 0x0000) {
		var000F = ((((("May I borrow thy " + var0001) + "? Mine seems to be ") + var0006) + " ") + var000B) + ".";
	}
	var0000 -= 0x0001;
	if (var0000 == 0x0000) {
		var000F = ((((("My " + var000D) + " are ") + var000A) + " ") + var000B) + ".";
	}
	var0000 -= 0x0001;
	if (var0000 == 0x0000) {
		var000F = ((((("Thou shalt know the " + var0001) + " and the ") + var0001) + " shall make thee ") + var0006) + ".";
	}
	var0000 -= 0x0001;
	if (var0000 == 0x0000) {
		var0010 = UI_a_or_an(var000C);
		var000F = ((((((("Thou shalt not " + var0008) + " to ") + var0010) + " ") + var000C) + ", ") + var000E) + ".";
	}
	var0000 -= 0x0001;
	if (var0000 == 0x0000) {
		var000F = ((("Honor thy father and thy " + var0001) + ", ") + var000E) + ".";
	}
	var0000 -= 0x0001;
	if (var0000 == 0x0000) {
		var000F = ((("Thou shalt not covet thy neighbor's " + var0001) + ", ") + var000E) + ".";
	}
	var0000 -= 0x0001;
	if (var0000 == 0x0000) {
		var0010 = UI_a_or_an(var0001);
		var000F = ((("Neither a borrower nor " + var0010) + " ") + var0001) + " be.";
	}
	var0000 -= 0x0001;
	if (var0000 == 0x0000) {
		var000F = ((((("Never " + var0008) + " a gift ") + var000C) + " in the ") + var0001) + ".";
	}
	var0000 -= 0x0001;
	if (var0000 == 0x0000) {
		var000F = ((("A fool and his " + var0001) + " are soon ") + var0006) + ".";
	}
	var0000 -= 0x0001;
	if (var0000 == 0x0000) {
		var000F = ((("Workers of the world, " + var0008) + "! You have nothing to lose but your ") + var0002) + "!";
	}
	var0000 -= 0x0001;
	if (var0000 == 0x0000) {
		var000F = ("Ich bin ein " + var0001) + "er.";
	}
	var0000 -= 0x0001;
	if (var0000 == 0x0000) {
		var000F = ((("Damn the " + var0002) + "! ^") + var0006) + " speed ahead!";
	}
	var0000 -= 0x0001;
	if (var0000 == 0x0000) {
		var000F = ((((((("Ask not what thy " + var0006) + " ") + var0001) + " can do for thee, but what thou canst do for thy ") + var0006) + " ") + var0001) + ".";
	}
	var0000 -= 0x0001;
	if (var0000 == 0x0000) {
		var000F = ((((("^" + var000E) + "! ") + var000E) + "! Thou damned ") + var000C) + ".";
	}
	var0000 -= 0x0001;
	if (var0000 == 0x0000) {
		var000F = ((((("Let me remind thee that the " + var0002) + " of ") + var0003) + " may be more ") + var0006) + " than they appear.";
	}
	var0000 -= 0x0001;
	if (var0000 == 0x0000) {
		var000F = ((((("Destroy thy " + var0006) + " and ") + var0007) + " life before it is too late, ") + var000E) + ".";
	}
	var0000 -= 0x0001;
	if (var0000 == 0x0000) {
		var0010 = UI_a_or_an(var0006);
		var0011 = UI_a_or_an(var0001);
		var000F = ((((((("Mine head feels like " + var0010) + " ") + var0006) + " with ") + var0011) + " ") + var0001) + " pointed at it.";
	}
	var0000 -= 0x0001;
	if (var0000 == 0x0000) {
		var000F = ((((("Beautiful, " + var000E) + ", I shall have my ") + var0001) + " call thy ") + var0001) + ".";
	}
	var0000 -= 0x0001;
	if (var0000 == 0x0000) {
		var000F = ("No, thank thee, I'm watching my " + var0001) + " intake.";
	}
	var0000 -= 0x0001;
	if (var0000 >= 0x0000) {
		var0010 = UI_a_or_an(var0006);
		var0012 = ((((("Ode to " + var0010) + " ") + var0006) + " ") + var0001) + ". ";
		if (var0000 == 0x0000) {
			var000F = ((((((((((("O how the " + var000D) + " of ") + var0001) + " ") + var0008) + " ") + var000B) + " amidst the ") + var0006) + " ") + var0003) + ".";
		}
		var0000 -= 0x0001;
		if (var0000 == 0x0000) {
			var0010 = UI_a_or_an(var0006);
			var000F = ((((((("Shall I compare thee to " + var0010) + " ") + var0006) + " ") + var0001) + "? Thou art far more ") + var0007) + ".";
		}
		var0000 -= 0x0001;
		if (var0000 == 0x0000) {
			var0013 = UI_a_or_an(var0001);
			var000F = ((((((((((((((((("To be " + var0010) + " ") + var0001) + " or not to be. That is the ") + var0003) + ". Whether 'tis nobler in the ") + var0004) + " to ") + var0008) + " the ") + var0002) + " and ") + var0005) + " of ") + var0006) + " ") + var0003) + " or...";
		}
		var0000 -= 0x0001;
		if (var0000 == 0x0000) {
			var000F = (((((((((("This morning I saw a small " + var0001) + " ") + var000A) + " ") + var000B) + ". How the seasons of ") + var0006) + " ") + var0003) + " come and go.") + " Death falls upon us all.";
		}
		var0000 -= 0x0001;
		if (var0000 == 0x0000) {
			var000F = ((("Rage, rage against the " + var000A) + " of the ") + var0001) + ".";
		}
		var0000 -= 0x0001;
		if (var0000 == 0x0000) {
			var000F = ((((((((((((((("Love in the turning " + var0001) + ". The small ") + var000D) + " ") + var0008) + " ") + var000B) + ".  The ") + var0006) + " ") + var0005) + " whisper their ") + var0007) + " muses. Oh, the turning ") + var0001) + ".";
		}
		var0000 -= 0x0001;
	}
	return (var0012 + var000F);
}

var Func089C 0x89C (var var0000, var var0001) {
	return ((0x0406 + var0001) + ((BLONDE_AVATAR - var0000) * 0x0002));
}

extern void Func094A 0x94A (var var0000);

var Func089D 0x89D (var var0000) {
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;
	var var0008;
	var var0009;
	var var000A;
	var var000B;
	var var000C;
	var var000D;
	var var000E;

	for (var0003 in var0000 with var0001 to var0002) {
		if (var0003->get_item_shape() == 0x0366) {
			var0004 = var0003->get_object_position();
			var0005 = var0004[0x0001];
			var0006 = var0004[0x0002];
			var0007 = var0004[0x0003];
			var0008 = var0003->find_nearby(SHAPE_ANY, 0x000A, MASK_NONE);
			for (var000B in var0008 with var0009 to var000A) {
				var0004 = var000B->get_object_position();
				if (var0004[0x0003] > var0007) {
					if ((var0004[0x0001] <= var0005) && (var0004[0x0001] >= (var0005 - 0x0003))) {
						if ((var0004[0x0002] <= var0006) && (var0004[0x0002] >= (var0006 - 0x0006))) {
							Func094A("I believe the bridge is blocked.");
							return false;
						}
					}
				}
			}
		}
	}
	for (var0003 in var0000 with var000C to var000D) {
		if (var0003->get_item_shape() == 0x0366) {
			var000E = script var0003 {
				frame 0;
				continue;
				sfx 34;
				frame 1;
				continue;
				sfx 34;
				call Func0611;
				continue;
				frame 0;
				continue;
				sfx 34;
			};
		} else {
			var000E = script var0003 {
				frame 0;
				continue;
				sfx 34;
				call Func0611;
				continue;
				frame 1;
				continue;
				sfx 34;
				frame 0;
				continue;
				sfx 34;
			};
		}
	}
	if (UI_get_array_size(var0000) == 0x0000) {
		return false;
	}
	return true;
}

extern void Func094A 0x94A (var var0000);

void Func089E 0x89E () {
	var var0000;
	var var0001;

	var0000 = AVATAR->get_barge();
	if (UI_on_barge()) {
		var0001 = var0000->get_object_position();
		var0001 = var0001[0x0003];
		var0001 = script var0000 {
			repeat (0x0004 - var0001) {
				rise;
				nop;
			};
		};
	} else {
		Func094A("@I think that the floor is trying to rise. I suggest that everyone board.@");
	}
}

extern void Func094A 0x94A (var var0000);

void Func089F 0x89F () {
	var var0000;
	var var0001;

	var0000 = AVATAR->get_barge();
	if (!UI_on_barge()) {
		Func094A("@I think that the floor is trying to lower. I suggest that everyone board.@");
		return;
	}
	if (var0000->get_item_flag(OKAY_TO_LAND)) {
		var0001 = var0000->get_object_position();
		var0001 = var0001[0x0003];
		var0001 = script var0000 {
			repeat (var0001 - 0x0001) {
				descent;
				nop;
			};
		};
	} else {
		Func094A("@I think that something is blocking the elevator.@");
	}
}

extern var Func098D 0x98D ();

var Func08A0 0x8A0 (var var0000) {
	var var0001;
	var var0002;
	var var0003;
	var var0004;

	var0001 = 0x0001;
	var0002 = 0x0001;
	var0003 = UI_get_party_list();
	var0004 = AVATAR & Func098D();
	if (var0000 < 0x0002) {
		var0001 = UI_get_random(UI_get_array_size(var0003));
		if (var0000 == 0x0000) {
			return var0003[var0001];
		}
		while (var0004[var0002]->get_npc_object() != var0003[var0001]) {
			var0002 += 0x0001;
		}
		return var0004[var0002];
	}
	if (UI_get_array_size(var0003) < 0x0002) {
		return 0x0045;
	}
	var0001 = UI_get_random(UI_get_array_size(var0003));
	while (var0003[var0001] == AVATAR->get_npc_object()) {
		var0001 = UI_get_random(UI_get_array_size(var0003));
	}
	if (var0000 == 0x0002) {
		return var0003[var0001];
	}
	while (var0004[var0002]->get_npc_object() != var0003[var0001]) {
		var0002 += 0x0001;
		if (var0002 > UI_get_array_size(var0004)) {
			return 0x0045;
		}
	}
	return var0004[var0002];
}

void Func08A1 0x8A1 () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;
	var var0008;
	var var0009;

	var0000 = get_object_position();
	var0001 = find_nearby(0x02D8, 0x000D, MASK_ALL_UNSEEN);
	var0002 = find_nearby(SHAPE_ANY, 0x0008, MASK_NPC);
	UI_sprite_effect(ANIMATION_MEDIUM_BLAST, var0000[0x0001], var0000[0x0002], 0x0000, 0x0000, 0x0000, LOOP_ONCE);
	var0003 = UI_create_new_object(0x00D1) & (UI_create_new_object(0x00C9) & (UI_create_new_object(0x00C9) & (UI_create_new_object(0x00C9) & (UI_create_new_object(0x00C9) & UI_create_new_object(0x00C9)))));
	var0003[0x0001]->set_item_frame(0x000D);
	var0003[0x0002]->set_item_frame(0x000D);
	var0003[0x0003]->set_item_frame(0x000E);
	var0003[0x0004]->set_item_frame(0x000E);
	var0003[0x0005]->set_item_frame(0x000F);
	var0003[0x0006]->set_item_frame(0x000F);
	var0004 = [(var0000[0x0001] - 0x0003), (var0000[0x0002] + 0x0001), 0x0000];
	var0005 = UI_update_last_created(var0004);
	var0004 = [(var0000[0x0001] + 0x0002), (var0000[0x0002] - 0x0002), 0x0000];
	var0005 = UI_update_last_created(var0004);
	var0004 = [(var0000[0x0001] + 0x0001), (var0000[0x0002] + 0x0002), 0x0000];
	var0005 = UI_update_last_created(var0004);
	var0004 = [(var0000[0x0001] - 0x0001), (var0000[0x0002] - 0x0003), 0x0000];
	var0005 = UI_update_last_created(var0004);
	var0004 = [(var0000[0x0001] + 0x0003), var0000[0x0002], 0x0000];
	var0005 = UI_update_last_created(var0004);
	var0005 = UI_update_last_created(var0000);
	for (var0008 in var0002 with var0006 to var0007) {
		var0009 = var0008->get_npc_prop(HEALTH);
		var0005 = UI_apply_damage(var0008->get_npc_prop(STRENGTH), (var0009 / 3) * 2, FIRE_DAMAGE, var0008);
	}
	if (var0001->get_item_frame() == 0x0001) {
		var0001->set_item_frame(0x0002);
		var0005 = script var0001 after 5 ticks {
			nohalt;
			say "@Thank thee.@";
		};
	}
}

extern void Func097F 0x97F (var var0000, var var0001, var var0002);

void Func08A2 0x8A2 () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;
	var var0008;
	var var0009;

	var0000 = 0x0001;
	var0001 = ["I feel well!", "I feel younger!", "Amazing!", "I'm not tired now!", "I am rejuvenated!", "What was that?!", "That was nice..."];
	var0002 = UI_get_party_list();
	for (var0005 in var0002 with var0003 to var0004) {
		var0006 = var0005->get_object_position();
		var0007 = var0005->get_npc_prop(STRENGTH);
		var0008 = var0005->get_npc_prop(HEALTH);
		var0009 = var0005->set_npc_prop(HEALTH, var0007 - var0008);
		UI_sprite_effect(ANIMATION_GREEN_BUBBLES, var0006[0x0001], var0006[0x0002], 0x0000, 0x0000, 0x0000, LOOP_ONCE);
		UI_play_sound_effect(0x0040);
		if (var0000 < 0x0008) {
			Func097F(var0005, var0001[var0000], var0000);
			var0000 += 0x0001;
		}
	}
	gflags[INN_HEALED_PARTY] = true;
}

void Func08A3 0x8A3 () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;

	if (gflags[INN_FLIPPED_FIRST_SWITCH] && (gflags[INN_FLIPPED_SECOND_SWITCH] && (gflags[INN_FLIPPED_THIRD_SWITCH] && (gflags[INN_FLIPPED_FOURTH_SWITCH] && (gflags[INN_HEALED_PARTY] && (gflags[INN_PARTY_FEELS_GREAT] && (gflags[INN_PARTY_FEELS_JOY] && (!gflags[CREATED_LODESTONE_OF_HAPPINESS])))))))) {
		var0000 = find_nearby(0x0382, 0x0019, MASK_NONE);
		var0001 = var0000->get_object_position();
		var0001[0x0003] = 0x0001;
		var0002 = UI_create_new_object(0x00D1);
		if (var0002) {
			var0002->set_item_frame(0x000B);
			if (UI_update_last_created(var0001)) {
				gflags[CREATED_LODESTONE_OF_HAPPINESS] = true;
			}
			UI_sprite_effect(ANIMATION_BLUE_BEADS, var0001[0x0001], var0001[0x0002], 0x0000, 0x0000, 0x0000, LOOP_ONCE);
			UI_play_sound_effect(0x006C);
		}
	} else {
		var0000 = find_nearby(0x0382, 0x0019, MASK_NONE);
		var0001 = var0000->get_object_position();
		UI_sprite_effect(ANIMATION_POOF, var0001[0x0001], var0001[0x0002], 0x0000, 0x0000, 0x0000, LOOP_ONCE);
		UI_play_sound_effect(0x002B);
		if (!gflags[DONE_INN_SWITCHES]) {
			var0003 = set_item_quality(0x00CD);
			var0003 = script item after 5 ticks {
				nohalt;
				call Func07FA;
			};
		}
		gflags[DONE_INN_SWITCHES] = true;
	}
}

extern void Func097F 0x97F (var var0000, var var0001, var var0002);

void Func08A4 0x8A4 () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;

	var0000 = 0x0001;
	var0001 = UI_get_party_list();
	var0002 = ["Ohh, ahh!", "That feels wonderful!", "Do thou that again!", "'Tis a marvel!", "More! More!", "Wondrous!", "What a sensation!"];
	for (var0005 in var0001 with var0003 to var0004) {
		var0006 = var0005->get_object_position();
		UI_sprite_effect(ANIMATION_PURPLE_BUBBLES, var0006[0x0001], var0006[0x0002], 0x0000, 0x0000, 0x0000, LOOP_ONCE);
		Func097F(var0005, var0002[var0000], var0000);
		var0000 += 0x0001;
	}
	gflags[INN_PARTY_FEELS_GREAT] = true;
}

extern var Func08A0 0x8A0 (var var0000);
extern void Func097F 0x97F (var var0000, var var0001, var var0002);

void Func08A5 0x8A5 () {
	var var0000;

	var0000 = Func08A0(0x0001);
	var0000->item_say("@Happy happy!@");
	var0000 = Func08A0(0x0001);
	Func097F(var0000, "@Joy joy!@", 0x0003);
	gflags[INN_PARTY_FEELS_JOY] = true;
}

extern var Func0906 0x906 (var var0000);
extern void Func0907 0x907 (var var0000, var var0001);

void Func08A6 0x8A6 () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;
	var var0008;

	var0000 = AVATAR->find_nearby(0x01E9, 0x0002, MASK_ALL_UNSEEN);
	var0001 = AVATAR->find_nearby(0x010E, 0x000A, MASK_ALL_UNSEEN);
	var0001 &= AVATAR->find_nearby(0x0178, 0x000A, MASK_ALL_UNSEEN);
	if (var0000) {
		for (var0004 in var0001 with var0002 to var0003) {
			var0005 = var0004->get_item_quality();
			if (var0005 == 0x00DA) {
				if (Func0906(var0004) == 0x0000) {
					Func0907(var0004, 0x0002);
				}
				var0006 = var0004->set_item_quality(0x00DC);
			}
		}
	} else {
		for (var0004 in var0001 with var0007 to var0008) {
			var0005 = var0004->get_item_quality();
			if (var0005 == 0x00DC) {
				if (Func0906(var0004) == 0x0002) {
					Func0907(var0004, 0x0000);
				}
				var0006 = var0004->set_item_quality(0x00DA);
			}
		}
	}
}

var Func08A7 0x8A7 (var var0000) {
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;

	var0001 = [0x0002, 0x0003, 0x0004, 0x0005, 0x0008, 0x0009, 0x000A, 0x000B];
	var0002 = [0x0001, 0x0004, 0x0005, 0x0007, 0x0002, 0x0004, 0x0006, 0x0008];
	var0003 = var0000->get_item_frame();
	if (var0003 in var0001) {
		var0004 = 0x0001;
		for (var0007 in var0001 with var0005 to var0006) {
			if (var0003 == var0007) {
				return var0002[var0004];
				// Dead code
				abort;
			}
		}
	} else {
		return false;
	}
	return 0;
}

var Func08A8 0x8A8 (var var0000) {
	var var0001;
	var var0002;

	var0001 = [0, 0, 0, -1, 1, -1, 1, 0, 1, 1, 0, 1, -1, 1, -1, 0, -1, -1];
	var0002 = var0001[((0x0002 * var0000) & var0001[(((0x0002 * var0000) + 0x0001) & 0x0000)])];
	return var0001;
}

void Func08A9 0x8A9 () {
	if (!gflags[HAS_CLUE_RING]) {
		gflags[HAS_CLUE_RING] = true;
		ALYSSAND->set_new_schedules([DAWN, MORNING, NOON, AFTERNOON, EVENING, NIGHT], [TALK, TALK, TALK, TALK, TALK, SLEEP], [0x03A8, 0x0728, 0x03A8, 0x06C8, 0x0448, 0x06C4, 0x0408, 0x0788, 0x03A8, 0x0728, 0x03D7, 0x075B]);
	}
}

extern var Func09A0 0x9A0 (var var0000, var var0001);

void Func08AA 0x8AA () {
	var var0000;

	if (gflags[JORVIN_SUMMONS_AVATAR]) {
		abort;
	}
	if (gflags[ZULITH_CAUGHT_TAILING] && (gflags[KALEN_IS_DEAD] && (gflags[IOLO_HAS_SUNG_FAWN] && ((((((((((((ALYSSAND->get_item_flag(MET) + DELIN->get_item_flag(MET)) + DELPHYNIA->get_item_flag(MET)) + VOLDIN->get_item_flag(MET)) + JENDON->get_item_flag(MET)) + JORVIN->get_item_flag(MET)) + KYLISTA->get_item_flag(MET)) + OLON->get_item_flag(MET)) + GARTH->get_item_flag(MET)) + JOTH->get_item_flag(MET)) + ZULITH->get_item_flag(MET)) > 0x0004) && IOLO->npc_nearby())))) {
		var0000 = script Func09A0(0x0005, 0x0001) after 200 ticks {
			nohalt;
			call Func0435;
		};
		gflags[JORVIN_SUMMONS_AVATAR] = true;
	}
}

extern var Func0994 0x994 ();
extern void Func09AD 0x9AD (var var0000);
extern var Func09A0 0x9A0 (var var0000, var var0001);

void Func08AB 0x8AB () {
	var var0000;

	if ((Func0994() == 0x0003) && ((!KALEN->get_item_flag(DEAD)) && (gflags[IOLO_HAS_SUNG_FAWN] && JENDON->get_item_flag(MET)))) {
		var0000 = KALEN->approach_avatar(0x0078, 0x0028);
		if (var0000) {
			Func09AD(KALEN);
			gflags[KALEN_IS_DEAD] = true;
			var0000 = script Func09A0(0x0005, 0x0001) after 50 ticks {
				nohalt;
				call Func0439;
			};
			abort;
		}
	}
	if (gflags[ZULITH_CAUGHT_TAILING] && (gflags[KALEN_IS_DEAD] && (gflags[IOLO_HAS_SUNG_FAWN] && ((((((((((((ALYSSAND->get_item_flag(MET) + DELIN->get_item_flag(MET)) + DELPHYNIA->get_item_flag(MET)) + GARTH->get_item_flag(MET)) + JOTH->get_item_flag(MET)) + VOLDIN->get_item_flag(MET)) + JENDON->get_item_flag(MET)) + JORVIN->get_item_flag(MET)) + KALEN->get_item_flag(MET)) + KYLISTA->get_item_flag(MET)) + OLON->get_item_flag(MET)) + ZULITH->get_item_flag(MET)) > 0x0004)))) {
		JORVIN->modify_schedule(NOON, STANDTHERE, [0x040E, 0x06BF]);
		JORVIN->modify_schedule(AFTERNOON, STANDTHERE, [0x040E, 0x06BF]);
	}
}

var Func08AC 0x8AC (var var0000) {
	if (gflags[DUPRE_ACCUSED] == true) {
		if (var0000) {
			return -1;
		}
		return "Dupre";
	}
	if (gflags[IOLO_ACCUSED] == true) {
		if (var0000) {
			return IOLO;
		}
		return "Iolo";
	}
	if (gflags[SHAMINO_ACCUSED] == true) {
		if (var0000) {
			return SHAMINO;
		}
		return "Shamino";
	}
	return false;
}

extern void Func0620 object#(0x620) ();
extern void Func094F 0x94F (var var0000, var var0001);
extern void Func0971 0x971 (var var0000);
extern void Func0945 0x945 (var var0000);
extern var Func0983 0x983 (var var0000);

void Func08AD 0x8AD (var var0000, var var0001, var var0002, var var0003) {
	var var0004;
	var var0005;
	var var0006;
	var var0007;
	var var0008;
	var var0009;
	var var000A;
	var var000B;
	var var000C;
	var var000D;

	var0004 = UI_get_party_list();
	var0005 = var0000->get_item_shape();
	var0006 = var0000->get_item_frame();
	var0007 = var0003->get_item_shape();
	if ((var0003 in var0004) && ((var0007 == 0x02EB) || (var0007 == 0x0292))) {
		var0003->item_say("@I do not require food.@");
		abort;
	}
	if ((var0003 in var0004) && ((!var0003->get_item_flag(ASLEEP)) && ((!var0003->get_item_flag(PARALYZED)) && (!var0003->get_item_flag(DEAD))))) {
		if ((var0005 == 0x0268) && (var0006 == 0x0009)) {
			var0003->halt_scheduled();
			var0003->Func0620();
			var0008 = script var0003 {
				nohalt;
				wait 5;
				actor frame bowing;
				wait 4;
				actor frame kneeling;
				wait 4;
				actor frame standing;
			};
			Func094F(var0003, ["@Ohh!@", "@Eeehhh!@", "@Bleh!@", "@Gak!@"]);
			var0008 = script var0003 after 13 ticks {
				nohalt;
				call Func0795;
			};
			Func0971(var0000);
			return;
		}
		if ((var0005 == 0x0194) && (var0006 == 0x0003)) {
			var0009 = "@I should eat that?@" & ("@Raw?@" & "@Not likely!@");
			Func094F(var0003, var0009);
			abort;
		}
		var000A = var0003->get_npc_prop(FOODLEVEL);
		var000B = var000A + var0001;
		if (var000A > 24) {
			var000C = "@No, thank thee.@";
		} else {
			Func0945(var0000);
			if ((var0000->get_item_shape() == 0x0268) && (var0000->get_item_frame() == 0x0014)) {
				UI_play_sound_effect2(var0002, var0000);
			} else {
				UI_play_sound_effect2(var0002, var0000);
				Func0971(var0000);
			}
			var000D = UI_get_random(0x000A);
			if (var000A <= 0x0004) {
				if (var000B <= 0x0004) {
					var000C = "@More!@";
					if (var000D < 0x0006) {
						var000C &= "@I must have more!@";
					}
				} else if (var000B < 0x000A) {
					var000C = "@I am still hungry.@";
					if (var000D < 0x0006) {
						if (!(var0003 == AVATAR->get_npc_object())) {
							var000C &= "@May I have some more?@";
						}
					}
				} else if (var000B < 0x0014) {
					if (var0005 == 0x034A) {
						var000C = "@Yum, garlic!@";
					} else {
						var000C = "@Ah yes, much better.@";
					}
				} else {
					var000C = "@That did satisfy me!@";
					if (var000D < 0x0006) {
						var000C &= "@Burp@";
					}
				}
			} else if (var000A < 0x0014) {
				if (var0005 == 0x034A) {
					var000C = "@Yum, garlic!@";
				} else {
					var000C = "@Ahh, very tasty.@";
				}
				if ((var000B > 0x0018) && (var000D < 0x0003)) {
					var000C &= "@Belch@";
				}
			} else if (var000D < 0x0005) {
				var000C = "@I shall soon be plump.@";
			}
		}
		if ((var0005 == 0x0179) && ((var0006 == 0x001F) && (var000A < 0x0019))) {
			var000C &= "@It is very crunchy...@" & ("@Strange taste...@" & ("" & "@How very filling!@"));
		}
		if (!(var000C == "")) {
			if (Func0983(var0003)) {
				if ((event != BG_PATH_FAILURE) || (var000A < 25)) {
					var0003->clear_item_say();
					Func094F(var0003, var000C);
				}
			}
		}
		if (var000A < 25) {
			var0008 = var0003->set_npc_prop(FOODLEVEL, var0001);
		}
		if (var000A > 24) {
			abort;
		}
	}
}

extern void Func090E 0x90E (var var0000, var var0001, var var0002, var var0003, var var0004, var var0005, var var0006, var var0007, var var0008);
extern void Func04A9 object#(0x4A9) ();

void Func08AE 0x8AE () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;
	var var0008;
	var var0009;
	var var000A;

	var0000 = -1;
	var0001 = -1;
	var0002 = -3;
	var0003 = TELDRONO->get_object_position() & (QUALITY_ANY & 0x0006);
	var0004 = var0003->find_nearby(0x0113, 0x0028, MASK_EGG);
	for (var0007 in var0004 with var0005 to var0006) {
		if (var0007->get_item_quality() == 0x0064) {
			var0008 = var0007->get_object_position();
			Func090E(TELDRONO, var0007, var0000, var0001, var0002, Func04A9, TELDRONO->get_npc_object(), PATH_SUCCESS, true);
			// BUG: This should use SI_PATH_FAILURE instead of PATH_SUCCESS.
			UI_set_path_failure(Func04A9, item, PATH_SUCCESS);
			return;
		}
	}
	for (var0007 in var0004 with var0009 to var000A) {
		if (var0007->get_item_quality() == 0x0000) {
			var0008 = var0007->get_object_position();
			Func090E(TELDRONO, var0007, var0000, var0001, var0002, Func04A9, TELDRONO->get_npc_object(), PATH_SUCCESS, true);
			// BUG: This should use SI_PATH_FAILURE instead of PATH_SUCCESS.
			UI_set_path_failure(Func04A9, item, PATH_SUCCESS);
			// Need to make UCC optimize this
			goto labelFunc08AE_00DD;
		}
	}
labelFunc08AE_00DD:
	return;
}

extern var Func08B0 0x8B0 (var var0000, var var0001, var var0002);
extern void Func08B1 0x8B1 (var var0000, var var0001, var var0002, var var0003);

void Func08AF 0x8AF (var var0000, var var0001) {
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;

	if (gflags[ARCADION_IN_SWORD] == false) {
		abort;
	}
	AVATAR->obj_sprite_effect(ANIMATION_PURPLE_BUBBLES, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, LOOP_ONCE);
	UI_play_sound_effect(0x004C);
	var0002 = 0x0001;
	var0003 = var0000->get_container();
	if (!var0003) {
		var0002 = 0x0000;
		var0003 = var0000->get_object_position();
	}
	do {
		if (var0001) {
			var0004 = AVATAR->get_readied(SI_WEAPON_HAND);
			var0005 = AVATAR->get_readied(SI_SHIELD_HAND);
			if (var0004 || var0005) {
				var0006 = Func08B0(var0004, var0005, 0x0001);
				var0006 = var0000->set_last_created();
				if (!AVATAR->give_last_created()) {
					if (var0002) {
						var0006 = var0003->give_last_created();
					} else {
						var0006 = UI_update_last_created(var0003);
					}
					Func08B1(AVATAR, var0000, 0x0001, PRISON2);
					if (Func08B0(var0004, var0005, 0x0000)) {
						break;
					}
					var0007 = AVATAR->get_object_position();
					if (var0004) {
						var0006 = UI_update_last_created(var0007);
					}
					if (!var0005) {
						break;
					}
					var0006 = UI_update_last_created(var0007);
					return;
				}
				if (Func08B0(var0004, var0005, 0x0000)) {
					break;
				}
				var0007 = AVATAR->get_object_position();
				if (var0004) {
					var0006 = UI_update_last_created(var0007);
				}
				if (!var0005) {
					break;
				}
				var0006 = UI_update_last_created(var0007);
				return;
			}
		}
		var0006 = var0000->set_last_created();
		if (!AVATAR->give_last_created()) {
			if (var0002) {
				var0006 = var0003->give_last_created();
			} else {
				var0006 = UI_update_last_created(var0003);
			}
			Func08B1(AVATAR, var0000, var0002, var0003);
		}
	} while (false);
	return;
}

var Func08B0 0x8B0 (var var0000, var var0001, var var0002) {
	var var0003;

	if (var0002) {
		var0003 = 0x0000;
		if (var0000) {
			var0003 = var0000->set_last_created();
		}
		if (var0001) {
			var0003 = var0001->set_last_created();
		}
		return var0003;
	}
	var0003 = false;
	if (var0000) {
		var0003 = AVATAR->give_last_created();
	}
	if (var0001) {
		var0003 = AVATAR->give_last_created();
	}
	return var0003;
}

void Func08B1 0x8B1 (var var0000, var var0001, var var0002, var var0003) {
	var var0004;
	var var0005;
	var var0006;
	var var0007;
	var var0008;

	var0004 = 0x0000;
	var0005 = SI_SHIELD_HAND;
	while (true) {
		var0006 = var0000->get_readied(var0005);
		if (var0006) {
			var0007 = var0006->set_last_created();
			if (var0007) {
				var0007 = var0001->set_last_created();
			}
			var0004 += 0x0001;
			if (var0000->give_last_created()) {
				break;
			}
			if (var0002) {
				var0007 = var0003->give_last_created();
			} else {
				var0007 = UI_update_last_created(var0003);
			}
		}
		if (var0005 == SI_SHIELD_HAND) {
			var0005 = SI_GLOVES;
			continue;
		}
		if (var0005 == SI_GLOVES) {
			var0005 = SI_BACK_SHIELD;
			continue;
		}
		if (var0005 == SI_BACK_SHIELD) {
			var0005 = SI_BACK_2H;
			continue;
		}
		if (var0005 == SI_BACK_2H) {
			var0005 = SI_BACKPACK;
			continue;
		}
		if (var0005 == SI_BACKPACK) {
			var0005 = SI_BELT;
			continue;
		}
		if (var0005 == SI_BELT) {
			var0005 = SI_WEAPON_HAND;
			continue;
		}
		if (var0005 == SI_WEAPON_HAND) {
			var0005 = SI_TORSO;
			continue;
		}
		if (var0005 == SI_TORSO) {
			var0005 = SI_HEAD;
			continue;
		}
		if (var0005 == SI_HEAD) {
			var0005 = SI_LEGS;
			continue;
		}
		if (var0005 == SI_LEGS) {
			var0005 = SI_FEET;
			continue;
		}
		if (var0005 == SI_FEET) {
			var0005 = SI_CLOAK;
			continue;
		}
		if (var0005 == SI_CLOAK) {
			var0005 = SI_AMULET;
			continue;
		}
		if (var0005 == SI_AMULET) {
			var0007 = var0001->set_last_created();
			if (var0007) {
				var0008 = var0000->get_object_position();
				var0007 = UI_update_last_created(var0008);
			}
		}
		break;
	}
	do {
		var0008 = var0000->get_object_position();
		var0007 = UI_update_last_created(var0008);
		var0004 -= 0x0001;
	} while (!(var0004 == 0x0000));
}

extern void Func09AD 0x9AD (var var0000);
extern void Func0809 0x809 ();

void Func08B2 0x8B2 () {
	if ((event == SI_PATH_SUCCESS) || (event == SI_PATH_FAILURE)) {
		Func09AD(item);
	}
	if (get_item_flag(SI_ZOMBIE)) {
		Func0809();
		abort;
	}
}

extern var Func09A6 0x9A6 (var var0000);

void Func08B3 0x8B3 (var var0000) {
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;
	var var0008;
	var var0009;
	var var000A;
	var var000B;
	var var000C;
	var var000D;

	abort;
	// Dead code
	var0001 = SHMED->find_nearby(0x0320, 0x0064, MASK_NONE);
	var0002 = 0x0000;
	for (var0005 in var0001 with var0003 to var0004) {
		if (var0005->get_item_quality() == 0x0000) {
			var0002 = var0005;
		}
	}
	if (var0002 == 0x0000) {
		var0006 = UI_create_new_object(0x0320);
		if (var0006) {
			var0007 = var0006->set_item_quality(0x0000);
			var0007 = UI_update_last_created(AVATAR->get_object_position());
			var0002 = var0006;
		} else {
			UI_error_message("backup chest creation failed.");
		}
	}
	var0008 = 0x0000;
	var0009 = AVATAR->get_cont_items(SHAPE_ANY, QUALITY_ANY, FRAME_ANY);
	while (var0008 < 0x0002) {
		for (var000C in var0009 with var000A to var000B) {
			if (Func09A6(var000C) || (var0008 == 0x0001)) {
				var000D = var000C->get_item_shape();
				if (!((var000D == 0x01E6) || ((var000D == 0x025F) || (var000D in var0000)))) {
					if (!var000C->set_last_created()) {
						UI_error_message(" failed the push!");
						abort;
					}
					if (!var0002->give_last_created()) {
						UI_error_message(" failed the pop!");
						abort;
					}
				}
			}
		}
		var0008 += 0x0001;
		var0009 = AVATAR->get_cont_items(SHAPE_ANY, QUALITY_ANY, FRAME_ANY);
	}
}

extern var Func0988 0x988 (var var0000, var var0001);

void Func08B4 0x8B4 () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;

	var0000 = Func0988(AVATAR->get_npc_object(), UI_get_party_list());
	for (var0003 in var0000 with var0001 to var0002) {
		var0003->set_schedule_type(WAIT);
	}
}

extern var Func0988 0x988 (var var0000, var var0001);

var Func08B5 0x8B5 () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;

	var0000 = UI_get_party_list();
	var0001 = AVATAR->get_npc_object();
	var0002 = Func0988(var0001, var0000);
	if (var0002) {
		for (var0005 in var0002 with var0003 to var0004) {
			var0006 = false;
			var0006 = var0005->get_item_flag(ASLEEP);
			if (!var0006) {
				return var0005;
			}
		}
		return [];
	}
	return [];
}

var Func08B6 0x8B6 () {
	var var0000;

	var0000 = UI_get_party_list2();
	return var0000;
}

void Func08B7 0x8B7 () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;

	var0000 = [0x03A5, 0x035B, 0x03B4, 0x0357, 0x0380, 0x0457];
	var0001 = [0x0425, 0x034B, 0x0441, 0x0347, 0x038E, 0x04A7];
	// BUG: 8 is not a valid time. Maybe it was meant to be MIDNIGHT?
	var0002 = [MORNING, EVENING, 8];
	var0003 = [SLEEP, WANDER, WANDER];
	KAPYUNDI->get_npc_object()->set_new_schedules(var0002, var0003, var0000);
	GILWOYAI->get_npc_object()->set_new_schedules(var0002, var0003, var0001);
}

void Func08B8 0x8B8 () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;
	var var0008;
	var var0009;
	var var000A;
	var var000B;
	var var000C;
	var var000D;
	var var000E;
	var var000F;
	var var0010;
	var var0011;
	var var0012;

	var0000 = false;
	var0001 = false;
	var0002 = false;
	var0003 = false;
	var0004 = AVATAR->get_object_position();
	var0005 = var0004[0x0001];
	var0006 = var0004[0x0002];
	if ((var0005 > 0x098F) && ((var0005 < 0x09EF) && ((var0006 > 0x0A8F) && (var0006 < 0x0AEF)))) {
		var0000 = true;
		AVATAR->move_object([0x09F7, 0x0AB6, 0x0000]);
		AVATAR->obj_sprite_effect(ANIMATION_BLUE_BEADS, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, LOOP_ONCE);
	}
	if ((var0005 > 0x090F) && ((var0005 < 0x096F) && ((var0006 > 0x0A8F) && (var0006 < 0x0AEF)))) {
		var0001 = true;
		AVATAR->move_object([0x09C6, 0x0AB3, 0x0000]);
		AVATAR->obj_sprite_effect(ANIMATION_BLUE_BEADS, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, LOOP_ONCE);
	}
	if ((var0005 > 0x090F) && ((var0005 < 0x096F) && ((var0006 > 0x0A0F) && (var0006 < 0x0A6F)))) {
		var0002 = true;
		AVATAR->move_object([0x0935, 0x0AA2, 0x0000]);
		AVATAR->obj_sprite_effect(ANIMATION_BLUE_BEADS, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, LOOP_ONCE);
	}
	if ((var0005 > 0x098F) && ((var0005 < 0x09EF) && ((var0006 > 0x0A0F) && (var0006 < 0x0A6F)))) {
		var0003 = true;
		AVATAR->move_object([0x0956, 0x0A53, 0x0000]);
		AVATAR->obj_sprite_effect(ANIMATION_BLUE_BEADS, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, LOOP_ONCE);
	}
	if (var0000) {
		UI_remove_from_area(0x02D8, 0x0004, [0x098F, 0x0A8F], [0x09EF, 0x0AEF]);
		UI_remove_from_area(0x01DB, 0x000A, [0x098F, 0x0A8F], [0x09EF, 0x0AEF]);
		UI_remove_from_area(0x0216, 0x0000, [0x098F, 0x0A8F], [0x09EF, 0x0AEF]);
	}
	if (var0001) {
		UI_remove_from_area(0x02D8, 0x0004, [0x090F, 0x0A8F], [0x096F, 0x0AEF]);
		UI_remove_from_area(0x01DB, 0x000A, [0x090F, 0x0A8F], [0x096F, 0x0AEF]);
		UI_remove_from_area(0x0216, 0x0000, [0x090F, 0x0A8F], [0x096F, 0x0AEF]);
	}
	if (var0002) {
		UI_remove_from_area(0x02D8, 0x0004, [0x090F, 0x0A0F], [0x096F, 0x0A6F]);
		UI_remove_from_area(0x01DB, 0x000A, [0x090F, 0x0A0F], [0x096F, 0x0A6F]);
		UI_remove_from_area(0x0216, 0x0000, [0x090F, 0x0A0F], [0x096F, 0x0A6F]);
	}
	if (var0003) {
		UI_remove_from_area(0x02D8, 0x0004, [0x098F, 0x0A0F], [0x09EF, 0x0A6F]);
		UI_remove_from_area(0x01DB, 0x000A, [0x098F, 0x0A0F], [0x09EF, 0x0A6F]);
		UI_remove_from_area(0x0216, 0x0000, [0x098F, 0x0A0F], [0x09EF, 0x0A6F]);
		UI_remove_from_area(0x0097, 0x000B, [0x098F, 0x0A0F], [0x09EF, 0x0A6F]);
	}
	if (var0000 == true) {
		var0007 = [0x09E9, 0x09D9, 0x09C9, 0x09B9, 0x09A9, 0x0999, 0x09E9, 0x09D9, 0x09C9, 0x09B9, 0x09A9, 0x0999, 0x09E9, 0x09D9, 0x09C9, 0x09B9, 0x09A9, 0x0999];
		var0007 &= [0x09E9, 0x09D9, 0x09C9, 0x09B9, 0x09A9, 0x0999, 0x09E9, 0x09D9, 0x09C9, 0x09B9, 0x09A9, 0x0999, 0x09E9, 0x09D9, 0x09C9, 0x09B9, 0x09A9, 0x0999, 0x09E9, 0x09D9, 0x09C9, 0x09B9, 0x09A9, 0x0999];
		var0008 = [0x0AEF, 0x0AEF, 0x0AEF, 0x0AEF, 0x0AEF, 0x0AEF, 0x0ADF, 0x0ADF, 0x0ADF, 0x0ADF, 0x0ADF, 0x0ADF, 0x0ACF, 0x0ACF, 0x0ACF, 0x0ACF, 0x0ACF, 0x0ACF];
		var0008 &= [0x0ABF, 0x0ABF, 0x0ABF, 0x0ABF, 0x0ABF, 0x0ABF, 0x0AAF, 0x0AAF, 0x0AAF, 0x0AAF, 0x0AAF, 0x0AAF, 0x0A9F, 0x0A9F, 0x0A9F, 0x0A9F, 0x0A9F, 0x0A9F, 0x0A8F, 0x0A8F, 0x0A8F, 0x0A8F, 0x0A8F, 0x0A8F];
	}
	if (var0001 == true) {
		var0007 = [0x0969, 0x0959, 0x0949, 0x0939, 0x0929, 0x0919, 0x0969, 0x0959, 0x0929, 0x0919, 0x0969, 0x0959, 0x0949, 0x0939, 0x0929, 0x0919];
		var0007 &= [0x0969, 0x0959, 0x0949, 0x0939, 0x0929, 0x0919, 0x0969, 0x0949, 0x0939, 0x0929, 0x0919, 0x0959, 0x0949, 0x0939, 0x0919, 0x0969, 0x0959, 0x0949, 0x0939, 0x0929, 0x0919];
		var0008 = [0x0AEF, 0x0AEF, 0x0AEF, 0x0AEF, 0x0AEF, 0x0AEF, 0x0ADF, 0x0ADF, 0x0ADF, 0x0ADF, 0x0ACF, 0x0ACF, 0x0ACF, 0x0ACF, 0x0ACF, 0x0ACF];
		var0008 &= [0x0ABF, 0x0ABF, 0x0ABF, 0x0ABF, 0x0ABF, 0x0ABF, 0x0AAF, 0x0AAF, 0x0AAF, 0x0AAF, 0x0AAF, 0x0A9F, 0x0A9F, 0x0A9F, 0x0A9F, 0x0A8F, 0x0A8F, 0x0A8F, 0x0A8F, 0x0A8F, 0x0A8F];
	}
	if (var0002 == true) {
		var0007 = [0x0969, 0x0959, 0x0949, 0x0939, 0x0929, 0x0919, 0x0969, 0x0959, 0x0949, 0x0939, 0x0929, 0x0969, 0x0959, 0x0949, 0x0939, 0x0919];
		var0007 &= [0x0969, 0x0959, 0x0949, 0x0939, 0x0919, 0x0969, 0x0959, 0x0949, 0x0939, 0x0919, 0x0969, 0x0959, 0x0949, 0x0939, 0x0929, 0x0969, 0x0959, 0x0949, 0x0939, 0x0929, 0x0919];
		var0008 = [0x0A6F, 0x0A6F, 0x0A6F, 0x0A6F, 0x0A6F, 0x0A6F, 0x0A5F, 0x0A5F, 0x0A5F, 0x0A5F, 0x0A5F, 0x0A4F, 0x0A4F, 0x0A4F, 0x0A4F, 0x0A4F];
		var0008 &= [0x0A3F, 0x0A3F, 0x0A3F, 0x0A3F, 0x0A3F, 0x0A2F, 0x0A2F, 0x0A2F, 0x0A2F, 0x0A2F, 0x0A1F, 0x0A1F, 0x0A1F, 0x0A1F, 0x0A1F, 0x0A0F, 0x0A0F, 0x0A0F, 0x0A0F, 0x0A0F, 0x0A0F];
	}
	if (var0003 == true) {
		var0007 = [0x09E9, 0x09D9, 0x09C9, 0x09B9, 0x09A9, 0x0999, 0x09E9, 0x09C9, 0x09B9, 0x09A9, 0x0999, 0x09E9, 0x09A9, 0x0999];
		var0007 &= [0x09E9, 0x09D9, 0x09C9, 0x09A9, 0x0999, 0x09E9, 0x09D9, 0x09C9, 0x09B9, 0x09A9, 0x09E9, 0x09D9, 0x09B9, 0x09A9, 0x09E9, 0x09D9, 0x09C9, 0x09B9, 0x09A9, 0x0999];
		var0008 = [0x0A6F, 0x0A6F, 0x0A6F, 0x0A6F, 0x0A6F, 0x0A6F, 0x0A5F, 0x0A5F, 0x0A5F, 0x0A5F, 0x0A5F, 0x0A4F, 0x0A4F, 0x0A4F];
		var0008 &= [0x0A3F, 0x0A3F, 0x0A3F, 0x0A3F, 0x0A3F, 0x0A2F, 0x0A2F, 0x0A2F, 0x0A2F, 0x0A2F, 0x0A1F, 0x0A1F, 0x0A1F, 0x0A1F, 0x0A0F, 0x0A0F, 0x0A0F, 0x0A0F, 0x0A0F, 0x0A0F];
	}
	var0009 = 0x0000;
	for (var000C in var0007 with var000A to var000B) {
		var0009 += 0x0001;
		var000D = UI_create_new_object(0x02D8);
		var000D->set_item_frame(0x0004);
		var000E = UI_update_last_created([var0007[var0009], var0008[var0009], 0x0000]);
	}
	if (var0000 == true) {
		var0007 = [0x09EF, 0x09DF, 0x09CF, 0x09BF, 0x09AF, 0x099F, 0x098F, 0x09EF, 0x09DF, 0x09CF, 0x09BF, 0x09AF, 0x099F, 0x098F, 0x09EF, 0x09DF, 0x09CF, 0x09BF, 0x09AF, 0x099F, 0x098F];
		var0007 &= [0x09CF, 0x09BF, 0x09AF, 0x099F, 0x098F, 0x09EF, 0x09DF, 0x09CF, 0x09BF, 0x09AF, 0x099F, 0x098F, 0x09EF, 0x09DF, 0x09CF, 0x09BF, 0x09AF, 0x099F, 0x098F];
		var0008 = [0x0AE9, 0x0AE9, 0x0AE9, 0x0AE9, 0x0AE9, 0x0AE9, 0x0AE9, 0x0AD9, 0x0AD9, 0x0AD9, 0x0AD9, 0x0AD9, 0x0AD9, 0x0AD9, 0x0AC9, 0x0AC9, 0x0AC9, 0x0AC9, 0x0AC9, 0x0AC9, 0x0AC9];
		var0008 &= [0x0AB9, 0x0AB9, 0x0AB9, 0x0AB9, 0x0AB9, 0x0AA9, 0x0AA9, 0x0AA9, 0x0AA9, 0x0AA9, 0x0AA9, 0x0AA9, 0x0A99, 0x0A99, 0x0A99, 0x0A99, 0x0A99, 0x0A99, 0x0A99];
	}
	if (var0001 == true) {
		var0007 = [0x096F, 0x095F, 0x094F, 0x093F, 0x091F, 0x090F, 0x096F, 0x095F, 0x094F, 0x093F, 0x092F, 0x091F, 0x090F, 0x096F, 0x095F, 0x094F, 0x093F, 0x091F, 0x090F];
		var0007 &= [0x096F, 0x095F, 0x094F, 0x092F, 0x090F, 0x096F, 0x095F, 0x094F, 0x093F, 0x092F, 0x091F, 0x090F, 0x096F, 0x095F, 0x094F, 0x093F, 0x092F, 0x091F, 0x090F];
		var0008 = [0x0AE9, 0x0AE9, 0x0AE9, 0x0AE9, 0x0AE9, 0x0AE9, 0x0AD9, 0x0AD9, 0x0AD9, 0x0AD9, 0x0AD9, 0x0AD9, 0x0AD9, 0x0AC9, 0x0AC9, 0x0AC9, 0x0AC9, 0x0AC9, 0x0AC9];
		var0008 &= [0x0AB9, 0x0AB9, 0x0AB9, 0x0AB9, 0x0AB9, 0x0AA9, 0x0AA9, 0x0AA9, 0x0AA9, 0x0AA9, 0x0AA9, 0x0AA9, 0x0A99, 0x0A99, 0x0A99, 0x0A99, 0x0A99, 0x0A99, 0x0A99];
	}
	if (var0002 == true) {
		var0007 = [0x096F, 0x095F, 0x093F, 0x092F, 0x090F, 0x096F, 0x095F, 0x090F, 0x096F, 0x095F, 0x092F, 0x091F, 0x090F];
		var0007 &= [0x096F, 0x095F, 0x094F, 0x093F, 0x090F, 0x096F, 0x095F, 0x094F, 0x093F, 0x092F, 0x091F, 0x090F, 0x096F, 0x095F, 0x094F, 0x093F, 0x092F, 0x090F];
		var0008 = [0x0A69, 0x0A69, 0x0A69, 0x0A69, 0x0A69, 0x0A59, 0x0A59, 0x0A59, 0x0A49, 0x0A49, 0x0A49, 0x0A49, 0x0A49];
		var0008 &= [0x0A39, 0x0A39, 0x0A39, 0x0A39, 0x0A39, 0x0A29, 0x0A29, 0x0A29, 0x0A29, 0x0A29, 0x0A29, 0x0A29, 0x0A19, 0x0A19, 0x0A19, 0x0A19, 0x0A19, 0x0A19];
	}
	if (var0003 == true) {
		var0007 = [0x09EF, 0x09DF, 0x09CF, 0x09BF, 0x09AF, 0x099F, 0x098F, 0x09EF, 0x09DF, 0x099F, 0x098F, 0x09EF, 0x099F, 0x098F];
		var0007 &= [0x09EF, 0x09DF, 0x09CF, 0x099F, 0x098F, 0x09EF, 0x09DF, 0x09CF, 0x09BF, 0x09AF, 0x098F, 0x09EF, 0x09BF, 0x09AF, 0x098F];
		var0008 = [0x0A69, 0x0A69, 0x0A69, 0x0A69, 0x0A69, 0x0A69, 0x0A69, 0x0A59, 0x0A59, 0x0A59, 0x0A59, 0x0A49, 0x0A49, 0x0A49];
		var0008 &= [0x0A39, 0x0A39, 0x0A39, 0x0A39, 0x0A39, 0x0A29, 0x0A29, 0x0A29, 0x0A29, 0x0A29, 0x0A29, 0x0A19, 0x0A19, 0x0A19, 0x0A19];
	}
	var0009 = 0x0000;
	for (var000C in var0007 with var000F to var0010) {
		var0009 += 0x0001;
		var000D = UI_create_new_object(0x01DB);
		var000D->set_item_frame(0x000A);
		var000E = UI_update_last_created([var0007[var0009], var0008[var0009], 0x0000]);
	}
	if (var0000 == true) {
		var0007 = [0x09EF, 0x09DF];
		var0008 = [0x0AB9, 0x0AB9];
	}
	if (var0001 == true) {
		var0007 = [0x092F, 0x0949, 0x0939, 0x092F, 0x093F, 0x091F, 0x0959, 0x0969, 0x0929];
		var0008 = [0x0AE9, 0x0ADF, 0x0ADF, 0x0AC9, 0x0AB9, 0x0AB9, 0x0AAF, 0x0A9F, 0x0A9F];
	}
	if (var0002 == true) {
		var0007 = [0x094F, 0x091F, 0x0919, 0x094F, 0x093F, 0x092F, 0x091F, 0x0929, 0x094F, 0x093F, 0x0929, 0x092F, 0x091F, 0x0929, 0x0919, 0x091F];
		var0008 = [0x0A69, 0x0A69, 0x0A5F, 0x0A59, 0x0A59, 0x0A59, 0x0A59, 0x0A4F, 0x0A49, 0x0A49, 0x0A3F, 0x0A39, 0x0A39, 0x0A2F, 0x0A1F, 0x0A19];
	}
	if (var0003 == true) {
		var0007 = [0x09D9, 0x09CF, 0x09BF, 0x09AF, 0x09D9, 0x09C9, 0x09B9, 0x09DF, 0x09CF, 0x09BF, 0x09AF, 0x09B9, 0x09BF, 0x09AF, 0x0999, 0x099F, 0x09C9, 0x0999, 0x09CF, 0x099F];
		var0008 = [0x0A5F, 0x0A59, 0x0A59, 0x0A59, 0x0A4F, 0x0A4F, 0x0A4F, 0x0A49, 0x0A49, 0x0A49, 0x0A49, 0x0A3F, 0x0A39, 0x0A39, 0x0A2F, 0x0A29, 0x0A1F, 0x0A1F, 0x0A19, 0x0A19];
	}
	var0009 = 0x0000;
	for (var000C in var0007 with var0011 to var0012) {
		var0009 += 0x0001;
		var000D = UI_create_new_object(0x0216);
		var000D->set_item_frame(0x0000);
		var000E = UI_update_last_created([var0007[var0009], var0008[var0009], 0x0000]);
	}
	if (var0003 == true) {
		var000D = UI_create_new_object(0x0097);
		var000D->set_item_frame(0x000B);
		var000E = UI_update_last_created([0x09DF, 0x0A19, 0x0000]);
	}
}

void Func08B9 0x8B9 (var var0000, var var0001) {
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;
	var var0008;
	var var0009;

	var0002 = [0x02D1, 0x01D1, 0x01E7, 0x0294, 0x038A, 0x0292, 0x0319, 0x035E];
	var0003 = UI_get_party_list2();
	if (var0000) {
		for (var0006 in var0003 with var0004 to var0005) {
			var0006->obj_sprite_effect(ANIMATION_ORB_BURST, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, LOOP_ONCE);
			var0006->set_polymorph(0x00EF);
		}
	} else {
		for (var0006 in var0003 with var0007 to var0008) {
			var0006->obj_sprite_effect(ANIMATION_ORB_BURST, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, LOOP_ONCE);
			if (var0001) {
				var0009 = UI_die_roll(0x0001, 0x0008);
				var0006->set_polymorph(var0002[var0009]);
			} else {
				var0009 = var0006->get_item_shape();
				var0006->set_polymorph(var0009);
			}
		}
	}
	UI_play_sound_effect(0x0082);
}

extern var Func097E 0x97E (var var0000);
extern var Func09A1 0x9A1 (var var0000);

void Func08BA 0x8BA () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;

	if (event == DOUBLECLICK) {
		var0000 = DRAYGAN->get_object_position();
		DRAYGAN->obj_sprite_effect(ANIMATION_FIREWORKS, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, LOOP_ONCE);
		var0001 = script item {
			call Func0334;
		};
	}
	if (event == SCRIPTED) {
		var0002 = UI_die_roll(0x0001, 0x0005);
		var0003 = [0x0361, 0x0219, 0x012E, 0x0149, 0x036D];
		var0004 = ["Spiders", "Wolves", "Bears", "Boars", "Doom"];
		DRAYGAN->item_say(("Morghrim, send me " + var0004[var0002]) + ".");
		var0005 = UI_die_roll(0x0001, Func097E(var0002 - 0x0005));
		while (var0005 > 0x0000) {
			var0001 = Func09A1(var0003[var0002]);
			if (!(var0001 == 0x0000)) {
				var0005 -= 0x0001;
			} else if (UI_die_roll(0x0001, 0x000A)) {
				var0005 = 0x0000;
			}
		}
	}
}

void Func08BB 0x8BB () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;

	if (event == EGG) {
		if (get_item_quality() == 0x0001) {
			var0000 = get_object_position();
			var0001 = find_nearest(0x0210, 0x0000);
			if (!var0001) {
				var0001 = UI_create_new_object2(0x0210, var0000);
			}
			if (var0001) {
				var0001->set_schedule_type(WAIT);
				var0002 = script var0001 {
					nohalt;
					face south;
					call Func07E7;
				};
			}
		}
		if (get_item_quality() == 0x0002) {
			var0001 = 0x0000;
		}
	}
	if (event == SCRIPTED) {
		var0001 = false;
		if (get_item_shape() == 0x0210) {
			var0001 = item;
		}
		if (var0001) {
			if (var0001->get_distance(AVATAR) <= 0x0008) {
				var0003 = UI_die_roll(0x0001, 0x0005);
				if (var0003 == 0x0001) {
					var0004 = "@Avatar, please assist me.@";
				}
				if (var0003 == 0x0002) {
					var0004 = "@Will no one help me?@";
				}
				if (var0003 == 0x0003) {
					var0004 = "@Please... help me.@";
				}
				if (var0003 == 0x0004) {
					var0004 = "@I beg of thee, aid me.@";
				}
				if (var0003 == 0x0005) {
					var0004 = "@Will I never be free?@";
				}
				var0003 = UI_die_roll(0x0000, 0x000F);
				var0002 = script var0001 after (0x0014 + var0003) ticks {
					say var0004;
					wait 15;
					call Func07E7;
				};
			} else {
				var0002 = script var0001 {
					wait 3;
					call Func07E7;
				};
			}
		}
	}
}

extern void Func0178 shape#(0x178) ();

void Func08BC 0x8BC () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;

	if (event == EGG) {
		if (get_item_quality() == 0x0003) {
			var0000 = AVATAR->find_nearby(0x00F3, 0x0028, MASK_NONE);
			if (var0000) {
				if (!gflags[VASCULIO_AWAKENS]) {
					var0001 = script var0000 {
						nohalt;
						call Func07E7;
					};
				}
			}
		}
		if (get_item_quality() == 0x0005) {
			var0002 = get_object_position() & (0x0049 & 0x0016);
			var0003 = var0002->find_nearby(0x0178, 0x0005, MASK_NONE);
			var0002[0x0005] = 0x000E;
			var0004 = var0002->find_nearby(0x01B1, 0x0005, MASK_NONE);
			if (var0003 && var0004) {
				var0003->set_item_frame(0x0014);
				var0004->set_item_frame(0x000C);
				event = DOUBLECLICK;
				var0003->Func0178();
				var0002 = AVATAR->get_object_position() & (0x00DE & 0x0000);
				var0000 = var0002->find_nearby(0x00F3, 0x0028, MASK_NONE);
				if (var0000) {
					var0001 = script var0000 {
						wait 5;
						call Func0526;
					};
				}
			}
		}
		if (get_item_quality() == 0x0006) {
			if (!gflags[VASCULIO_AWAKENS]) {
				gflags[VASCULIO_AWAKENS] = true;
				var0001 = script AVATAR {
					nohalt;
					wait 15;
					call Func0526;
				};
				remove_item();
			}
		}
	}
	if (event == SCRIPTED) {
		if ((get_item_shape() == 0x00F3) && (!gflags[VASCULIO_AWAKENS])) {
			var0001 = script item after 10 ticks {
				nohalt;
				say "Scratch... scratch.";
				wait 15;
				call Func07E7;
			};
		}
	}
}

void Func08BD 0x8BD () {
	gflags[PLACED_RUNE_FIRST_I] = false;
	gflags[PLACED_RUNE_SECOND_S] = false;
	gflags[PLACED_RUNE_THIRD_C] = false;
	gflags[PLACED_RUNE_FOURTH_G] = false;
	gflags[PLACED_RUNE_FIFTH_I] = false;
}

var Func08BE 0x8BE (var var0000) {
	if (var0000 == 0x0001) {
		if (gflags[PLACED_RUNE_FIRST_I]) {
			return false;
		}
	}
	if (var0000 == 0x0002) {
		if ((!gflags[PLACED_RUNE_FIRST_I]) || gflags[PLACED_RUNE_SECOND_S]) {
			return false;
		}
	}
	if (var0000 == 0x0003) {
		if ((!gflags[PLACED_RUNE_SECOND_S]) || gflags[PLACED_RUNE_THIRD_C]) {
			return false;
		}
	}
	if (var0000 == 0x0004) {
		if ((!gflags[PLACED_RUNE_THIRD_C]) || gflags[PLACED_RUNE_FOURTH_G]) {
			return false;
		}
	}
	if (var0000 == 0x0005) {
		if ((!gflags[PLACED_RUNE_FOURTH_G]) || gflags[PLACED_RUNE_FIFTH_I]) {
			return false;
		}
	}
	return true;
}

extern void Func097F 0x97F (var var0000, var var0001, var var0002);
extern var Func08C1 0x8C1 ();
extern void Func08C0 0x8C0 (var var0000);
extern void Func0922 0x922 (var var0000);

void Func08BF 0x8BF () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;
	var var0008;
	var var0009;
	var var000A;
	var var000B;
	var var000C;
	var var000D;
	var var000E;
	var var000F;
	var var0010;
	var var0011;
	var var0012;
	var var0013;
	var var0014;
	var var0015;
	var var0016;
	var var0017;
	var var0018;
	var var0019;
	var var001A;
	var var001B;
	var var001C;
	var var001D;

	if (event == EGG) {
		if ((get_item_quality() == 0x0007) && (gflags[CHAOS_PLACED_BLACKROCK_SERPENT_CHAOS] && (gflags[PLACED_SOUL_PRISM_MADNESS] && (gflags[PLACED_SOUL_PRISM_WANTONNESS] && gflags[PLACED_SOUL_PRISM_ANARCHY])))) {
			gflags[PLACED_DUPRES_ASHES] = false;
			var0000 = find_nearby(0x0392, 0x0001, MASK_NONE);
			for (var0003 in var0000 with var0001 to var0002) {
				var0004 = var0003->get_object_position();
				var0005 = get_object_position();
				if ((var0003->get_item_quality() == 0x0001) && ((var0003->get_item_frame() == 0x0000) && (var0004[0x0003] == 0x0002))) {
					AVATAR->clear_item_say();
					Func097F(AVATAR, "@In pri kli ort ailem!@", 0x0000);
					Func097F(AVATAR, "@Priin ort inten mani!@", 0x0007);
					UI_sprite_effect(ANIMATION_REVIVING_SNAKE, var0005[0x0001], var0005[0x0002], 0x0000, 0x0000, 0x0000, LOOP_ONCE);
					UI_play_sound_effect(0x0008);
					gflags[PLACED_DUPRES_ASHES] = true;
					var0003->remove_item();
					var0006 = find_nearby(0x037F, 0x0032, MASK_NONE) & find_nearby(0x0113, 0x001E, MASK_EGG);
					for (var0009 in var0006 with var0007 to var0008) {
						var000A = var0009->get_object_position();
						UI_sprite_effect(ANIMATION_MEDIUM_BLAST, var000A[0x0001], var000A[0x0002], 0x0000, 0x0000, 0x0000, LOOP_ONCE);
						var0009->remove_item();
					}
					if (Func08C1()) {
						var000B = AVATAR->find_nearest(0x017C, 0x0014);
						if (var000B) {
							var000C = script var000B after 27 ticks {
								call Func07E7;
							};
						}
					}
				}
				abort;
			}
		}
		if (get_item_quality() == 0x0008) {
			gflags[CHAOS_PLACED_BLACKROCK_SERPENT_CHAOS] = false;
			var000D = find_nearby(0x0106, 0x0002, MASK_NONE);
			for (var0010 in var000D with var000E to var000F) {
				var0011 = var0010->get_object_position();
				var0005 = get_object_position();
				if ((var0011[0x0001] <= var0005[0x0001]) && ((var0011[0x0003] == 0x0002) && (var0010->get_item_frame() == 0x0003))) {
					var000C = var0010->set_last_created();
					if (var000C) {
						var0005[0x0002] += 0x0002;
						var000C = UI_update_last_created(var0005);
					}
					gflags[CHAOS_PLACED_BLACKROCK_SERPENT_CHAOS] = true;
					Func08C0(true);
					var000C = script var0010 after 20 ticks {
						call Func07E7;
					};
					abort;
				}
			}
			Func08C0(false);
		}
		if ((get_item_quality() == 0x0009) && gflags[CHAOS_PLACED_BLACKROCK_SERPENT_CHAOS]) {
			gflags[PLACED_SOUL_PRISM_MADNESS] = false;
			var0012 = find_nearby(0x01BD, 0x0001, MASK_NONE);
			for (var0015 in var0012 with var0013 to var0014) {
				if (var0015->get_item_frame() == 0x0005) {
					gflags[PLACED_SOUL_PRISM_MADNESS] = true;
					var0005 = get_object_position();
					var0015->remove_item();
					remove_item();
					var0016 = UI_create_new_object(0x037F);
					if (var0016) {
						UI_play_sound_effect(0x0061);
						var0016 = UI_update_last_created(var0005);
						UI_sprite_effect(ANIMATION_SERPENT_OVERLAY, var0005[0x0001], var0005[0x0002], 0x0000, 0x0000, 0x0000, LOOP_ONCE);
					}
				}
			}
		}
		if ((get_item_quality() == 0x000A) && gflags[CHAOS_PLACED_BLACKROCK_SERPENT_CHAOS]) {
			gflags[PLACED_SOUL_PRISM_WANTONNESS] = false;
			var0012 = find_nearby(0x01BD, 0x0001, MASK_NONE);
			for (var0015 in var0012 with var0017 to var0018) {
				if (var0015->get_item_frame() == 0x0006) {
					gflags[PLACED_SOUL_PRISM_WANTONNESS] = true;
					var0005 = get_object_position();
					remove_item();
					var0015->remove_item();
					var0016 = UI_create_new_object(0x037F);
					if (var0016) {
						UI_play_sound_effect(0x0061);
						var0016 = UI_update_last_created(var0005);
						UI_sprite_effect(ANIMATION_SERPENT_OVERLAY, var0005[0x0001], var0005[0x0002], 0x0000, 0x0000, 0x0000, LOOP_ONCE);
					}
				}
			}
		}
		if ((get_item_quality() == 0x000B) && gflags[CHAOS_PLACED_BLACKROCK_SERPENT_CHAOS]) {
			gflags[PLACED_SOUL_PRISM_ANARCHY] = false;
			var0012 = find_nearby(0x01BD, 0x0001, MASK_NONE);
			for (var0015 in var0012 with var0019 to var001A) {
				if (var0015->get_item_frame() == 0x0007) {
					gflags[PLACED_SOUL_PRISM_ANARCHY] = true;
					var0005 = get_object_position();
					remove_item();
					var0015->remove_item();
					var0016 = UI_create_new_object(0x037F);
					if (var0016) {
						UI_play_sound_effect(0x0061);
						var0016 = UI_update_last_created(var0005);
						UI_sprite_effect(ANIMATION_SERPENT_OVERLAY, var0005[0x0001], var0005[0x0002], 0x0000, 0x0000, 0x0000, LOOP_ONCE);
					}
				}
			}
		}
	}
	if (event == SCRIPTED) {
		if (get_item_shape() == 0x0106) {
			if (Func08C1()) {
				var000B = AVATAR->find_nearest(0x017C, 0x0028);
				var000C = script var000B after 2 ticks {
					call Func07E7;
				};
			}
		}
		if (get_item_shape() == 0x017C) {
			if (gflags[XENKA_WILL_COME]) {
				var001B = false;
				var001C = AVATAR->get_object_position();
				if (var001C[0x0002] <= 0x04A6) {
					var001C[0x0001] = 0x03FF;
					var001C[0x0002] = 0x04AA;
					var001C[0x0003] = 0x0000;
					var001B = 0x0000;
					XENKA->set_item_frame(0x000C);
				} else {
					var001C[0x0001] = 0x03FF;
					var001C[0x0002] = 0x04A2;
					var001C[0x0003] = 0x0000;
					var001B = 0x0004;
					XENKA->set_item_frame(0x001C);
				}
				var001D = UI_part_of_day();
				XENKA->move_object(var001C);
				Func097F(XENKA, "@Wait!@", 0x0000);
				XENKA->set_schedule_type(TALK);
				XENKA->set_new_schedules(MIDNIGHT, TALK, var001C);
				var000C = script XENKA {
					actor frame kneeling;
					wait 3;
					actor frame bowing;
					wait 2;
					actor frame standing;
					wait 3;
				};
				XENKA->obj_sprite_effect(ANIMATION_TELEPORT, 0x0001, 0x0001, 0x0000, 0x0000, 0x0000, LOOP_ONCE);
				UI_play_sound_effect(0x0051);
			} else {
				gflags[XENKA_WILL_COME] = true;
				Func0922(0x0019);
				Func08C0(false);
				var000B = AVATAR->find_nearest(0x017C, 0x0028);
				var000C = script var000B after 30 ticks {
					call Func07E7;
				};
			}
		}
	}
}

extern var Func09A0 0x9A0 (var var0000, var var0001);

void Func08C0 0x8C0 (var var0000) {
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;
	var var0008;

	var0001 = AVATAR->find_nearby(0x0267, 0x0028, MASK_NONE);
	var0001 &= AVATAR->find_nearby(0x017C, 0x0028, MASK_NONE);
	var0001 &= AVATAR->find_nearby(0x01D9, 0x0028, MASK_NONE);
	if (var0000) {
		var0002 = Func09A0(0x0007, 0x0001);
		if (var0002) {
			UI_play_music(0x0041, var0002);
		}
		for (var0005 in var0001 with var0003 to var0004) {
			var0006 = script var0005 {
				finish;
				nohalt;
				repeat 8 {
					next frame;
					wait 1;
				};
			};
		}
	} else {
		for (var0005 in var0001 with var0007 to var0008) {
			var0006 = script var0005 {
				finish;
				nohalt;
				repeat 8 {
					previous frame;
					wait 1;
				};
			};
		}
	}
}

var Func08C1 0x8C1 () {
	if (gflags[PLACED_SOUL_PRISM_MADNESS] && (gflags[PLACED_SOUL_PRISM_WANTONNESS] && (gflags[PLACED_SOUL_PRISM_ANARCHY] && (gflags[PLACED_DUPRES_ASHES] && (gflags[CHAOS_PLACED_BLACKROCK_SERPENT_CHAOS] && (!gflags[XENKA_WILL_COME])))))) {
		return true;
	}
	return false;
}

void Func08C2 0x8C2 () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;
	var var0008;
	var var0009;

	var0000 = AVATAR->get_object_position() & (QUALITY_ANY & 0x0006);
	var0001 = var0000->find_nearby(0x0113, 0x0050, MASK_EGG);
	for (var0004 in var0001 with var0002 to var0003) {
		var0005 = var0004->get_object_position();
		var0006 = var0004->get_item_quality();
		var0007 = false;
		if (var0006 == 0x0002) {
			var0007 = YELINDA;
			var0008 = 0x0002;
		}
		if (var0006 == 0x0004) {
			var0007 = JOTH;
			var0008 = 0x0006;
		}
		if (var0006 == 0x0005) {
			var0007 = GARTH;
			var0008 = 0x0006;
		}
		if (var0006 == 0x0006) {
			if (gflags[FAWN_TRIAL_DONE_FIRST_DAY]) {
				var0007 = VOLDIN;
				var0008 = 0x0006;
			} else {
				VOLDIN->remove_npc();
			}
		}
		if (var0006 == 0x0007) {
			if (gflags[FAWN_TRIAL_DONE_FIRST_DAY] == true) {
				var0007 = JORVIN;
				var0008 = 0x0002;
			} else {
				JORVIN->remove_npc();
			}
		}
		if (var0006 == 0x0008) {
			if (gflags[FAWN_TRIAL_DONE_FIRST_DAY]) {
				var0007 = SCOTS;
				var0008 = 0x0002;
			} else {
				SCOTS->remove_npc();
			}
		}
		if (var0006 == 0x000A) {
			var0007 = ZULITH;
			var0008 = 0x0002;
		}
		if (var0006 == 0x000B) {
			if (gflags[FAWN_TRIAL_DONE_FIRST_DAY]) {
				var0007 = LEON;
				var0008 = 0x0002;
			}
		}
		if (var0006 == 0x000C) {
			if (gflags[FAWN_TRIAL_DONE_FIRST_DAY] == true) {
				var0007 = RUGGS;
				var0008 = 0x0002;
			}
		}
		if (var0006 == 0x000D) {
			if (gflags[FAWN_TRIAL_DONE_FIRST_DAY] == true) {
				var0007 = KYLISTA;
				var0008 = 0x0006;
			} else {
				KYLISTA->remove_npc();
			}
		}
		if (var0006 == 0x000E) {
			var0007 = DELIN;
			var0008 = 0x0006;
		}
		if (var0006 == 0x000F) {
			if (gflags[FAWN_TRIAL_DONE_FIRST_DAY]) {
				var0007 = ALYSSAND;
				var0008 = 0x0006;
			} else {
				ALYSSAND->remove_npc();
			}
		}
		if (var0006 == 0x0010) {
			var0007 = JENDON;
			var0008 = 0x0006;
		}
		if (var0006 == 0x0011) {
			var0007 = OLON;
			var0008 = 0x0006;
		}
		if (var0006 == 0x0012) {
			var0007 = DELPHYNIA;
			var0008 = 0x0006;
		}
		if (var0007) {
			var0007->get_npc_object()->move_object(var0005);
			var0007->set_schedule_type(WAIT);
			var0009 = script var0007 {
				face var0008;
				continue;
				actor frame sitting;
			};
		}
	}
}

void Func08C3 0x8C3 () {
	var var0000;
	var var0001;
	var var0002;

	if ((gflags[FAWN_TRIAL_DONE_FIRST_DAY] || (gflags[FAWN_TRIAL_DONE] && (!gflags[FAWN_TRIAL_RECESS]))) && (!(gflags[FAWN_TRIAL_DONE_FIRST_DAY] && gflags[FAWN_TRIAL_DONE]))) {
		var0000 = find_nearby(0x017D, 0x0001, MASK_NPC2);
		if (!var0000) {
			var0001 = get_object_position();
			var0000 = UI_create_new_object2(0x017D, var0001);
			var0000->set_schedule_type(WAIT);
			var0002 = script var0000 {
				face south;
				continue;
				actor frame standing;
			};
			var0000->set_item_flag(TEMPORARY);
		}
	}
}

extern var Func08AC 0x8AC (var var0000);
extern void Func09AC 0x9AC (var var0000, var var0001, var var0002, var var0003);

void Func08C4 0x8C4 () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;

	var0000 = Func08AC(true);
	if (var0000) {
		var0001 = script var0000 {
			face south;
			continue;
			actor frame sitting;
		};
		var0002 = get_object_position();
		var0000->move_object(var0002);
		Func09AC(var0000, var0002[0x0001], var0002[0x0002], TEND_SHOP);
		var0003 = UI_part_of_day();
		if ((var0003 == MIDNIGHT) || (var0003 == EARLY)) {
			var0004 = get_object_position() & (0x0032 & 0x0004);
			var0005 = var0004->find_nearby(0x036C, 0x0014, MASK_NONE);
			if (var0005) {
				var0002 = var0005->get_object_position();
				var0005->remove_item();
				var0006 = UI_create_new_object(0x03A7);
				if (var0006) {
					var0001 = var0006->set_item_quality(0x00B3);
					var0006->set_item_frame(0x0000);
					var0001 = UI_update_last_created(var0002);
				}
			}
		}
	}
}

void Func08C5 0x8C5 () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;

	var0000 = UI_get_party_list();
	for (var0003 in var0000 with var0001 to var0002) {
		var0004 = UI_die_roll(0x0001, 0x0005);
		var0005 = 0x0000;
		var0006 = UI_die_roll(0x0000, 0x0001);
		if (var0006) {
			var0005 = 0x0002;
		} else {
			var0005 = 0x0004;
		}
		var0007 = script var0003 {
			wait var0004;
			face var0005;
		};
	}
}

void Func08C6 0x8C6 () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;

	var0000 = UI_get_party_list();
	for (var0003 in var0000 with var0001 to var0002) {
		var0004 = UI_die_roll(0x0001, 0x0005);
		var0005 = 0x0000;
		var0006 = UI_die_roll(0x0000, 0x0001);
		if (var0006) {
			var0005 = 0x0000;
		} else {
			var0005 = 0x0002;
		}
		var0007 = script var0003 {
			wait var0004;
			face var0005;
		};
	}
}

void Func08C7 0x8C7 () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;

	var0000 = UI_get_party_list();
	for (var0003 in var0000 with var0001 to var0002) {
		var0004 = UI_die_roll(0x0001, 0x0005);
		var0005 = 0x0000;
		var0006 = UI_die_roll(0x0000, 0x0001);
		if (var0006) {
			var0005 = 0x0000;
		} else {
			var0005 = 0x0006;
		}
		var0007 = script var0003 {
			wait var0004;
			face var0005;
		};
	}
}

void Func08C8 0x8C8 () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;

	var0000 = UI_get_party_list();
	for (var0003 in var0000 with var0001 to var0002) {
		var0004 = UI_die_roll(0x0001, 0x0005);
		var0005 = var0003->direction_from(AVATAR);
		var0006 = script var0003 {
			wait var0004;
			face var0005;
		};
	}
}

extern void Func03A8 shape#(0x3A8) ();
extern void Func03A7 shape#(0x3A7) ();

void Func08C9 0x8C9 () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;
	var var0008;
	var var0009;
	var var000A;
	var var000B;
	var var000C;
	var var000D;
	var var000E;
	var var000F;

	var0000 = find_nearest(0x012F, 0x0002);
	if (!var0000) {
		var0000 = find_nearest(0x036C, 0x0002);
		if (!var0000) {
			var0000 = find_nearest(0x03A8, 0x0002);
			if (!var0000) {
				var0000 = find_nearest(0x03A7, 0x0002);
				if (!var0000) {
					abort;
				}
			}
		}
	}
	var0001 = var0000->get_item_shape();
	var0002 = var0000->get_item_quality();
	do {
		if (var0002 <= 0x001A) {
			var0003 = AVATAR->get_cont_items(0x022B, QUALITY_ANY, FRAME_ANY);
			var0004 = var0003->get_cont_items(0x022F, QUALITY_ANY, FRAME_ANY);
			if (var0003) {
				var0005 = UI_get_array_size(var0004);
				var0006 = 0x0000;
				if (var0004) {
					for (var0009 in var0004 with var0007 to var0008) {
						var000A = var0009->get_item_frame() + 0x0001;
						var0006 += 0x0001;
						do {
							if ((var0002 == 0x0013) && ((var000A == 0x0002) || (var000A == 0x0003))) {
								continue;
							}
							if ((var0002 == 0x0014) && ((var000A == 0x0004) || (var000A == 0x0005))) {
								continue;
							}
							if ((var0002 == 0x0015) && ((var000A == 0x000A) || ((var000A == 0x000B) || ((var000A == 0x000C) || (var000A == 0x000D))))) {
								continue;
							}
							if ((var0002 == 0x0016) && ((var000A == 0x0006) || ((var000A == 0x0007) || ((var000A == 0x0008) || (var000A == 0x0009))))) {
								continue;
							}
							if ((var0002 == 0x0017) && ((var000A == 0x000E) || (var000A == 0x000F))) {
								continue;
							}
							if ((var0002 == 0x0018) && ((var000A == 0x0011) || (var000A == 0x0012))) {
								continue;
							}
							if (var000A != var0002) {
								break;
							}
						} while (false)
						nobreak {
							var000B = false;
							if (var0001 == 0x012F) {
								var000C = Func03A8;
								var000B = true;
							}
							if (var0001 == 0x036C) {
								var000C = Func03A7;
								var000B = true;
							}
							if (var000B) {
								var000D = script var0000 {
									wait 1;
									frame 13;
									wait 1;
									frame 12;
									wait 1;
									frame 11;
									wait 1;
									frame 10;
									wait 1;
									call var000C;
								};
								UI_play_sound_effect(0x0059);
							}
							abort;
						}
						if (var0006 == var0005) {
							break;
						}
					} nobreak {
						break;
					}
				}
				var000B = false;
				if (var0001 == 0x03A8) {
					var000B = true;
					var000E = UI_create_new_object(0x012F);
				}
				if (var0001 == 0x03A7) {
					var000B = true;
					var000E = UI_create_new_object(0x036C);
				}
				if (var000B) {
					var000F = var0000->get_object_position();
					var000E->set_item_frame(0x000A);
					var000D = var000E->set_item_quality(var0002);
					var0000->remove_item();
					var000D = UI_update_last_created(var000F);
					var000D = script var000E {
						wait 1;
						frame 11;
						wait 1;
						frame 12;
						wait 1;
						frame 13;
						wait 1;
						frame 14;
					};
					UI_play_sound_effect(0x0058);
				}
				abort;
			}
		}
	} while (false);
	return;
}

extern void Func09A3 0x9A3 (var var0000);
extern void Func09AA 0x9AA ();
extern void Func090D 0x90D (var var0000, var var0001, var var0002, var var0003, var var0004, var var0005, var var0006);
extern void Func07DF object#(0x7DF) ();

void Func08CA 0x8CA () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;
	var var0008;
	var var0009;
	var var000A;
	var var000B;
	var var000C;
	var var000D;
	var var000E;
	var var000F;

	if (event == EGG) {
		if (get_item_quality() == 0x0001) {
			var0000 = find_nearby(0x0103, 0x0003, MASK_NPC2);
			if (var0000) {
				var0000->set_schedule_type(WAIT);
				var0000->set_alignment(NEUTRAL);
				var0000->set_npc_id(0x0002);
				var0001 = script var0000 {
					face west;
					actor frame kneeling;
					call Func07DF;
				};
			}
		}
		if (get_item_quality() == 0x000D) {
			var0000 = find_nearby(0x0103, 0x0005, MASK_NPC2);
			if (var0000) {
				remove_item();
				var0002 = var0000->get_object_position() & [QUALITY_ANY, 0x0015];
				var0003 = var0002->find_nearby(0x0190, 0x0005, MASK_NONE);
				if (var0003) {
					var0000->clear_item_say();
					var0000->item_say("@She loved flowers so...@");
				} else {
					var0000->item_say("@If I had flowers...@");
					var0000->set_alignment(NEUTRAL);
				}
			}
		}
		if (get_item_quality() == 0x0011) {
			var0000 = find_nearby(0x0103, 0x0014, MASK_NPC2);
			if (var0000) {
				var0003 = find_nearby(0x0190, 0x000A, MASK_NONE);
				if (var0003) {
					var0004 = find_nearby(0x03E7, 0x000A, MASK_NONE);
					if (var0004) {
						var0000->clear_item_say();
						var0000->halt_scheduled();
						var0005 = var0000->direction_from(AVATAR);
						var0001 = script var0000 {
							wait 2;
							actor frame bowing;
							wait 2;
							actor frame standing;
							say "@I shall repay thy kindness.@";
							face var0005;
						};
						var0001 = script var0003 {
							wait 18;
							call Func07DF;
						};
					}
				} else {
					var0000->item_say("@If I had flowers...@");
					var0000->set_alignment(NEUTRAL);
				}
			}
		}
	}
	if (event == SCRIPTED) {
		if (get_item_shape() == 0x0103) {
			var0006 = UI_die_roll(0x0001, 0x0005);
			if (var0006 == 0x0001) {
				var0007 = "@Oh, my love.@";
			}
			if (var0006 == 0x0002) {
				var0007 = "@What have they done?@";
			}
			if (var0006 == 0x0003) {
				var0007 = "@They shall pay!@";
			}
			if (var0006 == 0x0004) {
				var0007 = "@I'll never forget thee.@";
			}
			if (var0006 == 0x0005) {
				var0007 = "@Thy life was my life.@";
			}
			var0006 = UI_die_roll(0x0000, 0x000F);
			var0001 = script item after (0x0014 + var0006) ticks {
				nohalt;
				say var0007;
				wait 15;
				call Func07DF;
			};
		}
		if (get_item_shape() == 0x0190) {
			var0000 = find_nearby(0x0103, 0x0014, MASK_NPC2);
			if (var0000) {
				var0005 = AVATAR->direction_from(var0000);
				var0001 = script AVATAR {
					face var0005;
				};
				var0000->set_schedule_type(WAIT);
				var0008 = [0x0A09, 0x055A, 0x0000];
				var0000->si_path_run_usecode(var0008, PATH_SUCCESS, var0000, Func07DF, true);
				abort;
			}
		}
		if (get_item_shape() == 0x0313) {
			if (get_item_quality() == 0x00A3) {
				var0000 = find_nearby(0x0103, 0x0005, MASK_NPC2);
				if (var0000) {
					UI_play_sound_effect(0x0046);
					var0001 = set_item_quality(0x009D);
					var0001 = script var0000 {
						wait 5;
						actor frame bowing;
						wait 3;
						actor frame standing;
						wait 3;
						actor frame ready;
					};
					var0000->item_say("@Now I can rest!@");
					var0001 = script item {
						wait 15;
						call Func07DF;
					};
				}
			} else {
				var0000 = find_nearby(0x0103, 0x000F, MASK_NPC2);
				if (var0000) {
					var0008 = var0000->get_object_position();
					var0009 = var0000->get_item_frame_rot();
					Func09A3(var0000);
					var000A = UI_create_new_object2(0x0210, var0008);
					var000A->set_schedule_type(WAIT);
					var000A->set_item_frame_rot(var0009);
					var0001 = script var000A {
						actor frame ready;
						wait 2;
						actor frame bowing;
						wait 2;
						actor frame kneeling;
						wait 2;
						actor frame sleeping;
						wait 10;
						call Func07DF;
					};
				}
			}
		}
		if (get_item_shape() == 0x0210) {
			Func09AA();
			var0008 = get_object_position();
			UI_sprite_effect(ANIMATION_POOF, (var0008[0x0001] - 0x0001), (var0008[0x0002] - 0x0001), 0x0000, 0x0000, 0x0000, LOOP_ONCE);
			UI_play_sound_effect(0x0021);
			Func09A3(item);
			abort;
		}
	}
	if (event == PATH_SUCCESS) {
		if (get_item_shape() == 0x0103) {
			var0000 = find_nearby(0x0103, 0x001E, MASK_NPC2);
			var0002 = get_object_position() & (0x00A3 & FRAME_ANY);
			var000B = var0002->find_nearby(0x0313, 0x001E, MASK_NONE);
			var0002 = get_object_position() & (0x0098 & FRAME_ANY);
			var000C = var0002->find_nearby(0x0313, 0x001E, MASK_NONE);
			if (var0000 && (var000B && var000C)) {
				var0000->clear_item_say();
				var0005 = var0000->direction_from(var000B);
				var0001 = script var0000 {
					wait 7;
					say "@I will fix this lever.@";
					face var0005;
					wait 2;
					actor frame bowing;
					wait 2;
					actor frame kneeling;
				};
				var0001 = script var000B {
					wait 20;
					call Func07DF;
				};
				var000D =  1;
				var000E = -3;
				var000F =  0;
				Func090D(var000C, var000D, var000E, var000F, Func07DF, var0000, PATH_FAILURE);
				UI_set_path_failure(Func07DF, var0000, PATH_FAILURE);
			}
		}
	}
}

void Func08CB 0x8CB () {
	var var0000;
	var var0001;

	gflags[TEMP_FLAG_1] = false;
	gflags[TEMP_FLAG_2] = false;
	gflags[TEMP_FLAG_3] = false;
	gflags[TEMP_FLAG_4] = false;
	PRISON2->set_item_flag(SI_TOURNAMENT);
	LORTHONDO->set_item_flag(SI_TOURNAMENT);
	TELDRONO->set_item_flag(SI_TOURNAMENT);
	TELDRONO->set_schedule_type(WAIT);
	var0000 = find_nearest(0x02EB, 0x0014);
	if (var0000) {
		var0000->item_say("@Good morning.@");
		var0001 = script var0000 {
			wait 12;
			call Func04A0;
		};
	}
}

void Func08CC 0x8CC () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;

	if (event == EGG) {
		if (get_item_quality() == 0x0003) {
			var0000 = find_nearby(0x037F, 0x000A, MASK_NONE);
			for (var0003 in var0000 with var0001 to var0002) {
				var0004 = script var0003 after UI_die_roll(0x0005, 0x000A) ticks {
					nohalt;
					finish;
					sfx 33;
					remove;
				};
			}
		}
		if (get_item_quality() == 0x00CB) {
			var0000 = find_nearby(0x037F, 0x000A, MASK_NONE);
			if (!var0000) {
				var0005 = find_nearest(0x00E0, 0x000A);
				if (var0005) {
					var0006 = AVATAR->get_object_position();
					UI_sprite_effect(ANIMATION_MEDIUM_RING_BLAST, (var0006[0x0001] - 0x0001), (var0006[0x0002] - 0x0001), 0x0000, 0x0000, 0x0000, LOOP_ONCE);
					UI_play_sound_effect(0x002A);
					var0004 = script var0005 {
						wait 6;
						call Func07E3;
						wait 6;
						call Func07DF;
					};
					var0004 = script AVATAR {
						wait 14;
					};
					abort;
				}
			}
		}
	}
	if (event == SCRIPTED) {
		if (get_item_shape() == 0x037F) {
			var0006 = get_object_position();
			remove_item();
			UI_sprite_effect(ANIMATION_POOF, (var0006[0x0001] - 0x0001), (var0006[0x0002] - 0x0001), 0x0000, 0x0000, 0x0000, LOOP_ONCE);
			UI_play_sound_effect(0x0021);
			abort;
		}
		if (get_item_shape() == 0x00E0) {
			var0006 = [0x0987, 0x05F7, 0x0000];
			PARTY->move_object(var0006);
			var0004 = script AVATAR {
				call Func07E3;
			};
			UI_sprite_effect(ANIMATION_TELEPORT, (var0006[0x0001] - 0x0001), (var0006[0x0002] - 0x0001), 0x0000, 0x0000, 0x0000, LOOP_ONCE);
			UI_play_sound_effect(0x0082);
			abort;
		}
	}
}

extern void Func090D 0x90D (var var0000, var var0001, var var0002, var var0003, var var0004, var var0005, var var0006);
extern void Func07DF object#(0x7DF) ();

void Func08CD 0x8CD () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;
	var var0008;
	var var0009;
	var var000A;

	if (event == EGG) {
		var0000 = [0x08FA, 0x055F, 0x0001];
		LORTHONDO->move_object(var0000);
		LORTHONDO->set_schedule_type(WAIT);
		set_schedule_type(WAIT);
		var0001 = find_nearby(0x017D, 0x0000, MASK_NPC2);
		var0002 = var0001->get_object_position() & (QUALITY_ANY & 0x0000);
		var0003 = var0002->find_nearby(0x0113, 0x0000, MASK_NONE);
		if (var0001) {
			var0004 = script var0001 {
				face west;
				wait 3;
				say "@Forgive me, master Lorthondo.@";
				wait 2;
				actor frame bowing;
				wait 2;
				actor frame kneeling;
			};
			var0004 = script LORTHONDO {
				face east;
				actor frame sitting;
				wait 2;
				wait 1;
				wait 2;
				wait 3;
				wait 10;
				call Func07DF;
			};
		}
	}
	if (event == SCRIPTED) {
		if ((get_item_shape() == 0x02D1) || (get_item_shape() == 0x03DD)) {
			var0002 = AVATAR->get_object_position() & (0x0004 & 0x0007);
			var0005 = var0002->find_nearby(0x0113, 0x0028, MASK_EGG);
			if (var0005) {
				AVATAR->set_item_flag(DONT_MOVE);
				var0006 = 0x0006;
				var0007 = 0x0000;
				var0008 = 0x0000;
				Func090D(var0005, var0006, var0007, var0008, Func07DF, item, PATH_SUCCESS);
				UI_set_path_failure(Func07DF, item, PATH_SUCCESS);
			}
		}
		if (get_item_shape() == 0x0331) {
			var0001 = find_nearby(0x017D, 0x000A, MASK_NPC2);
			var0004 = script var0001 {
				wait 1;
				wait 4;
				wait 4;
				actor frame bowing;
				wait 2;
				actor frame standing;
				wait 3;
				call Func07DF;
			};
			var0004 = script item {
				say "@Thou hast failed me for the last time.@";
				wait 3;
				actor frame bowing;
				wait 3;
				actor frame standing;
				wait 3;
				actor frame cast_out;
				wait 3;
				actor frame cast_up;
				wait 5;
				actor frame cast_out;
				wait 3;
				actor frame standing;
			};
		}
		if (get_item_shape() == 0x017D) {
			var0000 = get_object_position();
			UI_sprite_effect(ANIMATION_LIGHTNING, (var0000[0x0001] - 0x0001), (var0000[0x0002] - 0x0001), 0x0000, 0x0000, 0x0000, LOOP_ONCE);
			UI_sprite_effect(ANIMATION_BIG_RING_BLAST, (var0000[0x0001] - 0x0001), (var0000[0x0002] - 0x0001), 0x0000, 0x0000, 0x0000, LOOP_ONCE);
			UI_play_sound_effect(0x0074);
			remove_item();
			var0009 = UI_create_new_object(0x037F);
			if (var0009) {
				var0009->set_item_frame(0x0000);
			}
			var000A = UI_create_new_object(0x01FB);
			if (var000A) {
				var000A->set_item_frame(0x0000);
				var0004 = UI_update_last_created(var0000);
				var0004 = script var000A {
					say "@NOOOooooo!!!@";
					wait 21;
					call Func04A3;
				};
			}
			if (var0009) {
				var0000[0x0003] += 0x0001;
				var0004 = UI_update_last_created(var0000);
				var0004 = script var0009 {
					wait 22;
					remove;
				};
			}
		}
	}
}

void Func08CE 0x8CE () {
	var var0000;
	var var0001;
	var var0002;

	SABRINA->set_schedule_type(WAIT);
	var0000 = [0x0A18, 0x054F, 0x0001];
	SABRINA->move_object(var0000);
	var0001 = script SABRINA {
		face west;
		continue;
		actor frame sleeping;
	};
	var0002 = find_nearby(0x0375, 0x0019, MASK_NONE);
	if (var0002) {
		var0002->set_item_flag(SI_TOURNAMENT);
	}
	remove_item();
}

void Func08CF 0x8CF (var var0000) {
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;

	var0001 = UI_get_party_list();
	for (var0004 in var0001 with var0002 to var0003) {
		var0005 = var0004->get_object_position();
		if (!var0000) {
			var0005[0x0002] -= 0x0010;
		} else {
			var0005[0x0002] += 0x0010;
		}
		var0004->move_object(var0005);
	}
	abort;
}

void Func08D0 0x8D0 () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;
	var var0008;
	var var0009;

	var0000 = get_object_position();
	if (!((var0000[0x0001] == 0x09BF) && ((var0000[0x0002] == 0x06EA) && (var0000[0x0003] == 0x0000)))) {
		abort;
	}
	var0001 = get_object_position() & [QUALITY_ANY, 0x0006];
	var0002 = var0001->find_nearby(0x0113, 0x001E, MASK_EGG);
	for (var0005 in var0002 with var0003 to var0004) {
		var0000 = var0005->get_object_position();
		var0006 = false;
		if (var0005->get_item_quality() == 0x0000) {
			LORTHONDO->clear_item_flag(DEAD);
			LORTHONDO->set_schedule_type(WAIT);
			LORTHONDO->move_object(var0000);
			UI_sprite_effect(ANIMATION_TELEPORT, (var0000[0x0001] - 0x0001), (var0000[0x0002] - 0x0001), 0x0000, 0x0000, 0x0000, LOOP_ONCE);
			UI_play_sound_effect(0x0082);
			var0007 = LORTHONDO->direction_from(AVATAR);
			var0008 = script LORTHONDO {
				say "@Prepare to die...@";
				face var0007;
				actor frame cast_up;
				wait 4;
				actor frame cast_out;
				wait 3;
				actor frame standing;
				call Func04A3;
			};
		}
		if (var0005->get_item_quality() == 0x0064) {
			var0005->remove_item();
			var0006 = UI_create_new_object(0x00A3);
			var0006->set_item_frame(0x0009);
		}
		if (var0005->get_item_quality() == 0x0096) {
			var0005->remove_item();
			var0006 = UI_create_new_object(0x00A3);
			var0006->set_item_frame(0x0003);
		}
		if (var0005->get_item_quality() == 0x00C8) {
			var0005->remove_item();
			var0006 = UI_create_new_object(0x00A3);
			var0006->set_item_frame(0x0003);
		}
		if (var0006) {
			var0008 = UI_update_last_created(var0000);
			if (var0008) {
				var0009 = UI_die_roll(0x0001, 0x0003);
				var0008 = script var0006 {
					wait var0009;
					repeat 4 {
						next frame cycle;
						wait var0009;
					};
				};
			}
		}
	}
	UI_earthquake(0x0001);
	var0008 = script AVATAR after 57 ticks {
		nohalt;
		call Func0326;
	};
}

extern void Func09AD 0x9AD (var var0000);

void Func08D1 0x8D1 () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;

	var0000 = find_nearby(0x020B, 0x000A, MASK_NPC2);
	var0001 = 0x0000;
	for (var0004 in var0000 with var0002 to var0003) {
		var0001 += 0x0009;
		var0005 = var0004->get_object_position();
		var0004->remove_item();
		UI_play_sound_effect(0x0041);
		UI_sprite_effect(ANIMATION_CLOUDS2, (var0005[0x0001] - 0x0001), (var0005[0x0002] - 0x0001), 0x0000, 0x0000, 0x0000, LOOP_ONCE);
		var0006 = UI_create_new_object2(0x017E, var0005);
		Func09AD(var0006);
		var0007 = script var0004 after var0001 ticks {
			nohalt;
			say "@Fresh flesh!@";
		};
	}
	UI_play_sound_effect(0x0061);
}

void Func08D2 0x8D2 () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;

	var0000 = SABRINA->get_object_position() & (QUALITY_ANY & 0x0007);
	var0001 = var0000->find_nearby(0x0113, 0x0005, MASK_EGG);
	var0001 &= SABRINA->find_nearby(0x01B8, 0x0005, MASK_TRANSLUCENT);
	for (var0004 in var0001 with var0002 to var0003) {
		var0004->remove_item();
	}
	var0005[0x0001] = var0000[0x0001] + 0x0001;
	var0005[0x0002] = var0000[0x0002] + 0x0001;
	var0005[0x0003] = 0x0000;
	SABRINA->move_object(var0005);
	var0006 = SABRINA->direction_from(AVATAR);
	var0007 = script SABRINA {
		actor frame step_right;
		face var0006;
		wait 2;
		say "@Please... Help me...@";
		wait 15;
		say "@Lead me to my nightmare.@";
	};
	var0007 = script AVATAR {
		wait 3;
	};
	SABRINA->set_alignment(NEUTRAL);
	SABRINA->set_schedule_type(HOUND);
}

void Func08D3 0x8D3 () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;

	var0000 = AVATAR->get_object_position();
	var0000[0x0001] -= var0000[0x0003] / 0x0002;
	var0000[0x0002] -= var0000[0x0003] / 0x0002;
	UI_sprite_effect(ANIMATION_LIGHTNING, (var0000[0x0001] - 0x0001), (var0000[0x0002] - 0x0001), 0x0000, 0x0000, 0x0000, LOOP_ONCE);
	UI_sprite_effect(ANIMATION_BIG_BLAST, (var0000[0x0001] - 0x0001), (var0000[0x0002] - 0x0001), 0x0000, 0x0000, 0x0000, LOOP_ONCE);
	UI_lightning();
	UI_play_sound_effect(0x002A);
	var0001 = UI_get_party_list();
	for (var0004 in var0001 with var0002 to var0003) {
		var0005 = UI_apply_damage(var0004->get_npc_prop(STRENGTH), 0x001E, LIGHTNING_DAMAGE, var0004);
	}
}

extern void Func090E 0x90E (var var0000, var var0001, var var0002, var var0003, var var0004, var var0005, var var0006, var var0007, var var0008);
extern void Func07DF object#(0x7DF) ();

void Func08D4 0x8D4 () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;

	if (event == EGG) {
		var0000 = find_nearby(0x0375, 0x000C, MASK_NONE);
		if (var0000) {
			SABRINA->set_schedule_type(WAIT);
			var0001 = -1;
			var0002 = -1;
			var0003 = -3;
			Func090E(SABRINA, item, var0001, var0002, var0003, Func07DF, SABRINA->get_npc_object(), PATH_SUCCESS, true);
			// BUG: This should use SI_PATH_FAILURE instead of PATH_SUCCESS.
			UI_set_path_failure(Func07DF, SABRINA->get_npc_object(), PATH_SUCCESS);
		}
	}
	if (event == PATH_SUCCESS) {
		set_schedule_type(STANDTHERE);
		var0000 = find_nearby(0x0375, 0x000A, MASK_NONE);
		if (var0000) {
			AVATAR->set_item_flag(DONT_MOVE);
			var0004 = direction_from(var0000);
			var0005 = script item {
				say "@Wake up, girl!@";
				face var0004;
				wait 15;
				say "@Dost thou crave a carrot?@";
			};
			var0006 = var0000->direction_from(item);
			var0005 = script var0000 {
				wait 10;
				actor frame standing;
				wait 6;
				face var0006;
				wait 12;
				call Func07DF;
			};
		}
	}
	if (event == SCRIPTED) {
		if (get_item_shape() == 0x0375) {
			var0007 = SABRINA->get_cont_items(0x0179, QUALITY_ANY, 0x0012);
			if (var0007) {
				var0005 = script item {
					wait 5;
					actor frame ready;
					wait 1;
					actor frame raise_1h;
					wait 1;
					actor frame reach_1h;
					wait 1;
					actor frame strike_1h;
					wait 1;
					actor frame standing;
				};
				var0005 = script var0007 {
					wait 12;
					call Func07DF;
				};
			}
		}
		if (get_item_shape() == 0x0179) {
			var0000 = find_nearby(0x0375, 0x000A, MASK_NONE);
			if (var0000) {
				SABRINA->kill_npc();
				var0000->clear_item_flag(DEAD);
				var0005 = script var0000 {
					wait 5;
					call Func0375;
				};
			}
		}
	}
}

extern void Func09AD 0x9AD (var var0000);

var Func08D5 0x8D5 () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;
	var var0008;

	var0000 = get_object_position() & [0x009B, 0x0000];
	if (var0000->find_nearby(0x03A8, 0x000A, MASK_NONE)) {
		var0001 = find_nearby(0x0210, 0x001E, MASK_NPC2);
		var0002 = 0x0000;
		for (var0005 in var0001 with var0003 to var0004) {
			var0002 += 0x0006;
			var0006 = var0005->get_object_position();
			var0005->remove_item();
			UI_play_sound_effect(0x0041);
			UI_sprite_effect(ANIMATION_BLUE_BEADS, (var0006[0x0001] - 0x0001), (var0006[0x0002] - 0x0001), 0x0000, 0x0000, 0x0000, LOOP_ONCE);
			var0007 = UI_create_new_object2(0x00E4, var0006);
			Func09AD(var0007);
			var0008 = script var0005 after var0002 ticks {
				nohalt;
				say "@I obey, master!@";
			};
		}
		return true;
	}
	return false;
}

var Func08D6 0x8D6 () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;

	var0000 = 0x0000;
	var0001 = get_object_position() & [0x009F, 0x0000];
	if (var0001->find_nearby(0x03A7, 0x000A, MASK_NONE)) {
		var0002 = find_nearby(0x0174, 0x001E, MASK_NPC2);
		for (var0005 in var0002 with var0003 to var0004) {
			var0000 += 0x0007;
			var0005->set_alignment(EVIL);
			var0005->set_schedule_type(IN_COMBAT);
			var0006 = script var0005 after var0000 ticks {
				nohalt;
				say "@I kill thee!@";
			};
		}
		return true;
	}
	return false;
}

extern void Func09AA 0x9AA ();

void Func08D7 0x8D7 () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;

	if (event == EGG) {
		var0000 = get_object_position() & (QUALITY_ANY & 0x0012);
		var0001 = var0000->find_nearby(0x0179, 0x0006, MASK_NONE);
		if (var0001) {
			var0002 = find_nearby(0x032B, 0x000A, MASK_NPC2);
			if (var0002) {
				remove_item();
				var0003 = var0001->get_object_position();
				var0001->remove_item();
				UI_sprite_effect(ANIMATION_GREEN_BUBBLES, var0003[0x0001], var0003[0x0002], 0x0000, 0x0000, 0x0000, LOOP_ONCE);
				UI_play_sound_effect(0x0082);
				var0003 = var0002->get_object_position();
				var0002->set_polymorph(0x02E6);
				UI_sprite_effect(ANIMATION_POOF, var0003[0x0001], var0003[0x0002], 0x0000, 0x0000, 0x0000, LOOP_ONCE);
				var0002->set_item_frame(0x0012);
				var0004 = script var0002 after 30 ticks {
					nohalt;
					call Func07DF;
				};
				var0005 = UI_create_new_object(0x0349);
				if (var0005) {
					var0005->set_item_frame(0x0005);
					var0004 = UI_update_last_created(var0003);
					var0004 = script var0005 {
						say "@I thank thee...@";
						wait 15;
						say "@...and here is thy reward.@";
					};
				}
				var0006 = var0002->find_nearby(0x0113, 0x0000, MASK_EGG);
				if (var0006) {
					var0006->remove_item();
				}
			}
		}
	}
	if (event == SCRIPTED) {
		var0003 = get_object_position();
		UI_sprite_effect(ANIMATION_POOF, (var0003[0x0001] - 0x0001), (var0003[0x0002] - 0x0001), 0x0000, 0x0000, 0x0000, LOOP_ONCE);
		set_polymorph(0x032B);
		set_schedule_type(GRAZE);
		var0007 = UI_create_new_object(0x03E7);
		if (var0007) {
			var0007->set_item_frame(0x0004);
			var0003[0x0001] += 0x0001;
			var0003[0x0002] += 0x0001;
			var0004 = UI_update_last_created(var0003);
		}
		UI_sprite_effect(ANIMATION_GREEN_BUBBLES, var0003[0x0001], var0003[0x0002], 0x0000, 0x0000, 0x0000, LOOP_ONCE);
		UI_play_sound_effect(0x0082);
		var0005 = find_nearby(0x0349, 0x000A, MASK_NONE);
		if (var0005) {
			var0005->remove_item();
		}
		Func09AA();
	}
}

void Func08D8 0x8D8 () {
	TELDRONO->set_schedule_type(TALK);
}

extern var Func0906 0x906 (var var0000);
extern void Func094A 0x94A (var var0000);
extern void Func0907 0x907 (var var0000, var var0001);

void Func08D9 0x8D9 (var var0000) {
	var var0001;
	var var0002;
	var var0003;
	var var0004;

	var0001 = Func0906(var0000);
	var0002 = get_item_quality();
	var0003 = -1;
	if (var0001 == 0x0000) {
		var0003 = 0x0002;
	}
	if (var0001 == 0x0001) {
		var0004 = "@Pardon, but the door is already open. " + "Is it not rather futile to lock it now?@";
		Func094A(var0004);
	}
	if (var0001 == 0x0002) {
		var0003 = 0x0000;
	}
	if (var0001 == 0x0003) {
		if (UI_die_roll(0x0001, 0x000A) == 0x0001) {
			var0004 = "@Pardon, but the door appears magically locked. " + "Is it not rather difficult to unlock it with a key?@";
			Func094A(var0004);
		}
	}
	if (var0003 != -1) {
		Func0907(var0000, var0003);
	}
}

extern void Func08DB 0x8DB (var var0000);
extern void Func097F 0x97F (var var0000, var var0001, var var0002);
extern void Func0924 0x924 (var var0000, var var0001);
extern void Func094F 0x94F (var var0000, var var0001);
extern var Func08E2 0x8E2 (var var0000);
extern void Func08E4 0x8E4 (var var0000);
extern var Func090B 0x90B (var var0000);
extern var Func090A 0x90A (var var0000);

void Func08DA 0x8DA (var var0000) {
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;
	var var0008;
	var var0009;
	var var000A;
	var var000B;
	var var000C;
	var var000D;
	var var000E;
	var var000F;
	var var0010;
	var var0011;
	var var0012;
	var var0013;
	var var0014;
	var var0015;
	var var0016;
	var var0017;
	var var0018;
	var var0019;
	var var001A;
	var var001B;
	var var001C;

	var0001 = false;
	var0002 = var0000->get_item_quality();
	if (var0002 == 0x0000) {
		var0003 = UI_find_nearby_avatar(0x020E);
		for (var0006 in var0003 with var0004 to var0005) {
			var0006->set_item_shape(0x0379);
			var0007 = var0006->find_nearby(0x01B8, 0x000A, MASK_TRANSLUCENT);
			var0008 = var0006->get_object_position();
			var0008 = [(var0008[0x0001] + 0x0003), (var0008[0x0002] + 0x0003), var0008[0x0003]];
			for (var000B in var0007 with var0009 to var000A) {
				var000C = var000B->get_object_position();
				if (var0008[0x0001] == var000C[0x0001]) {
					if (var0008[0x0002] == var000C[0x0002]) {
						var000B->remove_item();
					}
				}
			}
		}
		var0003 = UI_find_nearby_avatar(0x0379);
		for (var0006 in var0003 with var000D to var000E) {
			var0006->set_item_shape(0x020E);
			var000B = UI_create_new_object(0x01B8);
			if (var000B) {
				var0008 = var0006->get_object_position();
				var0001 = UI_update_last_created([(var0008[0x0001] + 0x0003), (var0008[0x0002] + 0x0003), var0008[0x0003]]);
			}
		}
		var0001 = true;
	}
	if (var0002 == 0x000A) {
		var0001 = script item after 1 ticks {
			nohalt;
			call Func0601;
		};
		var0001 = true;
	}
	if (var0002 == 0x0046) {
		Func08DB(item);
		var0001 = true;
	}
	if ((var0002 == 0x0094) || (var0002 == 0x0095)) {
		var0001 = true;
	}
	do {
		if ((var0002 >= 0x0096) && (var0002 <= 0x00A3)) {
			var0001 = true;
			if (var0002 == 0x00A0) {
				if (!gflags[PRESSED_BOTH_SWITCHES]) {
					break;
				}
			}
			if (var0002 == 0x00A1) {
				Func097F(AVATAR, "@That did something.@", 0x0002);
				Func097F(STEFANO, "@I hope nothing bad...@", 0x0012);
				UI_play_sound_effect(0x0058);
				if (get_item_frame() == 0x0000) {
					set_item_frame(0x0001);
				} else {
					set_item_frame(0x0000);
				}
				var000F = find_nearby(0x0313, 0x0014, MASK_NONE);
				for (var0012 in var000F with var0010 to var0011) {
					var0002 = var0012->get_item_quality();
					if (var0002 == 0x009F) {
						var0008 = var0012->get_object_position();
						var0001 = script var0012 {
							nohalt;
							say "@click@";
						};
						var0013 = var0012->set_item_quality(0x00A0);
					}
					if (var0002 == 0x00A0) {
						var0008 = var0012->get_object_position();
						var0001 = script var0012 {
							nohalt;
							say "@click@";
						};
						var0013 = var0012->set_item_quality(0x009F);
					}
					abort;
				}
				abort;
			}
			if (var0002 == 0x00A2) {
				gflags[PRESSED_BOTH_SWITCHES] = true;
				break;
			}
			if (var0002 == 0x00A3) {
				AVATAR->item_say("@'Tis jammed.@");
				abort;
			}
			Func0924(item, SHAPE_ANY);
		}
		if ((var0002 == 0x0047) || ((var0002 == 0x0048) || (var0002 == 0x0049))) {
			var0001 = "@It's stuck...@" & "@I cannot budge it!@";
			Func094F(AVATAR, var0001);
			var0001 = false;
			abort;
		}
		if (var0002 == 0x00CC) {
			if (gflags[DOING_ERSTAM_EXPERIMENT]) {
				var0008 = AVATAR->get_object_position();
				var0014 = true;
				BOYDON->move_object([(var0008[0x0001] + 0x0003), (var0008[0x0002] - 0x0002), var0008[0x0003]]);
			}
		}
		if ((var0002 > 0x00DC) && (var0002 < 0x00EC)) {
			var0001 = true;
		}
		if (var0002 == 0x00ED) {
			var0001 = script item after 1 ticks {
				nohalt;
				call Func060E;
			};
		}
		if ((var0002 > 0x000A) && (var0002 < 0x0010)) {
			var0001 = script item {
				nohalt;
				call Func0357;
			};
			abort;
		}
		if (var0002 == 0x0014) {
			var0001 = Func08E2(item);
		}
		if (var0002 == 0x0015) {
			var0015 = var0000->set_item_quality(0x0014);
			var0001 = true;
		}
		if ((var0002 > 0x005A) && (var0002 < 0x0065)) {
			Func08E4(var0002);
			var0001 = true;
		}
		if (((var0002 >= 0x0001) && (var0002 <= 0x0005)) || (var0002 == 0x0012)) {
			var0016 = var0000->find_nearby(0x034D, 0x0050, MASK_NONE) & var0000->find_nearby(0x033C, 0x0050, MASK_NONE);
			for (var0019 in var0016 with var0017 to var0018) {
				if (var0002 == var0019->get_item_quality()) {
					if (var0019->get_item_shape() == 0x034D) {
						var0001 = Func090B(var0019);
					} else {
						var0001 = Func090A(var0019);
					}
				}
			}
		}
		if ((var0002 >= 0x00F0) && (var0002 <= 0x00FA)) {
			var0016 = var0000->find_nearby(0x034D, 0x0064, MASK_NONE) & var0000->find_nearby(0x033C, 0x0064, MASK_NONE);
			for (var0019 in var0016 with var001A to var001B) {
				if (var0002 == var0019->get_item_quality()) {
					if (var0019->get_item_shape() == 0x034D) {
						var0001 = Func090B(var0019);
					} else {
						var0001 = Func090A(var0019);
					}
				}
			}
		}
	} while (false);
	if (var0001) {
		var001C = var0000->get_item_frame();
		if ((var001C % 0x0002) == 0x0000) {
			var0000->set_item_frame(var001C + 0x0001);
		} else {
			var0000->set_item_frame(var001C - 0x0001);
		}
		UI_play_sound_effect2(0x0046, item);
	} else {
		UI_flash_mouse(CURSOR_HAND);
	}
}

extern void Func097F 0x97F (var var0000, var var0001, var var0002);
extern void Func08E5 0x8E5 ();
extern var Func09A0 0x9A0 (var var0000, var var0001);

void Func08DB 0x8DB (var var0000) {
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;
	var var0008;
	var var0009;
	var var000A;
	var var000B;
	var var000C;
	var var000D;
	var var000E;
	var var000F;
	var var0010;

	gflags[TEMP_FLAG_1] = false;
	if (gflags[AVATAR_GOT_SHORT_STICK] && (!gflags[DUPRE_IS_TOAST])) {
		var0001 = DUPRE->get_object_position();
		var0002 = AVATAR->get_object_position();
		if ((AVATAR->get_distance(DUPRE) < 0x0008) && (var0001[0x0003] == var0002[0x0003])) {
			Func097F(DUPRE, "@Stand back, Avatar!@", 0x0000);
			DUPRE->show_npc_face0(0x0000);
			say("\"I cannot allow thee to throw away thy life! Thou must live to ensure Britannia's safety!\"");
			say("\"I cannot live with the shame of the deaths I have caused... If I can redeem myself by becoming the required martyr, so be it!\"");
			say("\"Let it be said that Sir Dupre died bravely!\"");
			UI_remove_npc_face0();
			var0001 = DUPRE->get_object_position();
			var0001[0x0001] -= 0x0003;
			var0001[0x0002] -= 0x0003;
			UI_sprite_effect(ANIMATION_POOF, var0001[0x0001], var0001[0x0002], 0x0000, 0x0000, 0x0000, LOOP_ONCE);
			gflags[TEMP_FLAG_1] = true;
			gflags[DUPRE_IS_TOAST] = true;
			if (DUPRE->get_item_flag(IN_PARTY)) {
				DUPRE->remove_from_party();
			}
			DUPRE->set_item_flag(DEAD);
			Func08E5();
			DUPRE->remove_npc();
			UI_play_music(0x0036, 0x0000);
		}
	}
	var0003 = var0000->find_nearby(0x03ED, 0x000F, MASK_NONE);
	for (var0006 in var0003 with var0004 to var0005) {
		var0002 = var0006->get_item_frame();
		if (var0002 < 0x0003) {
			var0001 = script var0006 {
				repeat 20 {
					frame 0;
					frame 1;
					frame 0;
					frame 2;
				};
			};
		} else {
			var0001 = script var0006 {
				repeat 20 {
					frame 5;
					frame 3;
					frame 5;
					frame 4;
				};
			};
		}
	}
	var0003 = var0000->find_nearby(0x03F2, 0x000F, MASK_NONE);
	for (var0009 in var0003 with var0007 to var0008) {
		var0002 = var0009->get_item_frame();
		if (var0002 < 0x0007) {
			var0001 = Func09A0(0x0001, 0x0002)->set_item_quality(0x0000);
			var0001 = script var0009 {
				frame 0;
				repeat 5 {
					next frame cycle;
				};
				wait 2;
				frame 5;
				repeat 4 {
					previous frame cycle;
				};
			};
			if (!gflags[TEMP_FLAG_1]) {
				var000A = [];
				var000B = [0x03ED, 0x03EF, 0x03F2, 0x02D1, 0x0313];
				var000C = var0009->find_nearby(SHAPE_ANY, 0x0003, MASK_NONE);
				for (var000F in var000C with var000D to var000E) {
					var0001 = var000F->get_object_position();
					if (var0001[0x0003] < 0x000B) {
						var0010 = var000F->get_item_shape();
						var0001 = var000F->get_item_frame();
						if (!(var0010 in var000B)) {
							if (((var0010 == 0x0192) && (var0001 == 0x000B)) || (((var0010 == 0x0190) && (var0001 == 0x0005)) || ((var0010 == 0x0190) && (var0001 == 0x0006)))) {
								gflags[CREMATED_PIKEMAN] = true;
							}
							var0001 = var000F->get_object_position();
							var0001[0x0001] -= 0x0003;
							var0001[0x0002] -= 0x0003;
							if (!var000F->is_npc()) {
								UI_sprite_effect(ANIMATION_POOF, var0001[0x0001], var0001[0x0002], 0x0000, 0x0000, 0x0000, LOOP_ONCE);
								var000A &= var000F;
								var000F->remove_item();
							}
						}
					}
				}
			}
		}
		if (var000A || gflags[TEMP_FLAG_1]) {
			var0001 = script var0009 after 40 ticks {
				nohalt;
				call Func03F2;
			};
		}
	}
}

void Func08DC 0x8DC (var var0000) {
	var var0001;

	var0001 = var0000->get_object_position();
	UI_sprite_effect(ANIMATION_POOF, (var0001[0x0001] - 0x0006), (var0001[0x0002] - 0x0006), 0x0000, 0x0000, 0x0000, LOOP_ONCE);
	var0000->remove_item();
}

void Func08DD 0x8DD (var var0000, var var0001, var var0002) {
	var var0003;
	var var0004;
	var var0005;

	var0003 = var0000->get_object_position();
	UI_sprite_effect(ANIMATION_POOF, (var0003[0x0001] - 0x0006), (var0003[0x0002] - 0x0006), 0x0000, 0x0000, 0x0000, LOOP_ONCE);
	var0000->remove_item();
	var0004 = UI_create_new_object(var0001);
	if (var0004) {
		var0004->set_item_flag(TEMPORARY);
		var0004->set_item_frame(var0002);
		var0005 = UI_update_last_created(var0003);
	}
}

void Func08DE 0x8DE (var var0000, var var0001) {
	var var0002;

	var0002 = script var0000 after 10 ticks {
		face east;
		actor frame raise_2h;
		actor frame strike_2h;
		actor frame standing;
	};
	var0002 = script var0001 after 15 ticks {
		remove;
	};
}

extern void Func08DE 0x8DE (var var0000, var var0001);

void Func08DF 0x8DF (var var0000, var var0001) {
	var var0002;
	var var0003;

	var0002 = var0000->get_object_position();
	UI_sprite_effect(ANIMATION_PURPLE_BUBBLES, (var0002[0x0001] - 0x0006), (var0002[0x0002] - 0x0006), 0x0000, 0x0000, 0x0000, LOOP_ONCE);
	var0000->remove_item();
	if (var0001 == 0x01EF) {
		var0003 = UI_create_new_object2(var0001, var0002);
		if (var0003) {
			var0003->set_item_flag(TEMPORARY);
			var0003->set_schedule_type(GRAZE);
			var0003->set_item_frame(0x0000);
			var0001 = var0003->find_nearest(0x0179, 0x0001);
			if (var0001 && (var0001->get_item_frame() == 0x000C)) {
				Func08DE(var0003, var0001);
			}
		}
	} else {
		var0003 = UI_create_new_object(var0001);
		if (var0003) {
			var0003->set_item_flag(TEMPORARY);
			var0003->set_item_frame(0x0000);
			var0001 = UI_update_last_created(var0002);
		}
	}
}

var Func08E0 0x8E0 (var var0000) {
	var var0001;
	var var0002;
	var var0003;
	var var0004;

	var0001 = var0000->find_nearby(0x03B5, 0x0014, MASK_NONE);
	for (var0004 in var0001 with var0002 to var0003) {
		return var0004->get_item_quality();
	}
	return 0x0000;
}

var Func08E1 0x8E1 (var var0000) {
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;

	var0001 = var0000->find_nearby(0x01B9, 0x0004, MASK_NONE);
	var0002 = 0x0000;
	var0003 = var0000->get_object_position();
	for (var0006 in var0001 with var0004 to var0005) {
		var0007 = var0006->get_object_position();
		if (((var0007[0x0002] - var0003[0x0002]) < 2) && ((var0007[0x0002] - var0003[0x0002]) > -2)) {
			return var0006;
		}
	}
	return 0x0000;
}

extern var Func08E0 0x8E0 (var var0000);
extern var Func08E1 0x8E1 (var var0000);
extern void Func08DC 0x8DC (var var0000);
extern void Func08DD 0x8DD (var var0000, var var0001, var var0002);
extern void Func08DF 0x8DF (var var0000, var var0001);
extern void Func08DE 0x8DE (var var0000, var var0001);
extern void Func07F1 object#(0x7F1) ();
extern void Func07F2 object#(0x7F2) ();
extern void Func07F3 object#(0x7F3) ();
extern void Func07F4 object#(0x7F4) ();

var Func08E2 0x8E2 (var var0000) {
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;
	var var0008;
	var var0009;
	var var000A;
	var var000B;
	var var000C;
	var var000D;
	var var000E;
	var var000F;
	var var0010;
	var var0011;

	var0001 = Func08E0(var0000);
	if ((var0001 != 0x00CA) && (var0001 != 0x00CC)) {
		var0002 = var0000->set_item_quality(0x0015);
		var0002 = script var0000 after 5 ticks {
			call Func0313;
		};
		return true;
	}
	var0003 = Func08E1(var0000);
	if (var0003) {
		var0004 = var0003->get_object_position();
		var0005 = 0x0000;
		var0006 = 0x0000;
		var0007 = var0003->find_nearby(SHAPE_ANY, 0x0001, MASK_NONE);
		if (var0007) {
			for (var000A in var0007 with var0008 to var0009) {
				var000B = false;
				var000C = var000A->get_item_shape();
				if (var000C == 0x0179) {
					var000D = var000A->get_item_frame();
					if ((var000D != 0x000C) && (var000D != 0x0014)) {
						var0006 = Func07F2;
						var0005 = 0x0029;
						if (var0001 == 0x00CA) {
							Func08DC(var000A);
						}
					}
					if (var000D == 0x000C) {
						var0006 = Func07F3;
						var0005 = 0x002A;
						if (var0001 == 0x00CA) {
							var000E = var000A->find_nearest(0x01EF, 0x0014);
							if (var000E) {
								var000B = true;
							} else {
								var000E = var000A->find_nearest(0x021E, 0x0014);
							}
							if (var000E) {
								var000F = UI_create_new_object(0x0179);
								if (var000F) {
									var000F->set_item_frame(0x000C);
									var000F->set_item_flag(TEMPORARY);
									var0010 = var000E->get_object_position();
									var0002 = UI_update_last_created(var0010);
								} else {
									var000B = false;
								}
							}
							var000A->remove_item();
						}
					}
					if (var000D == 0x0014) {
						var0006 = Func07F4;
						var0005 = 0x002B;
						Func08DD(var000A, 0x0369, 0x0000);
					}
				}
				if (var000C == 0x0274) {
					var0006 = Func07F2;
					var0005 = 0x0029;
					if (var0001 == 0x00CA) {
						Func08DC(var000A);
					}
				}
				if (var000C == 0x02CD) {
					var0006 = Func07F3;
					var0005 = 0x002A;
					if (var0001 == 0x00CA) {
						Func08DF(var000A, 0x0108);
					}
				}
				if (var000C == 0x021E) {
					var0006 = Func07F3;
					var0005 = 0x002A;
					if (var0001 == 0x00CA) {
						Func08DF(var000A, 0x01EF);
					}
				}
				if (var000C == 0x023C) {
					var0006 = Func07F2;
					var0005 = 0x0029;
					if (var0001 == 0x00CA) {
						Func08DC(var000A);
					}
				}
				if (var000C == 0x0272) {
					var0006 = Func07F3;
					var0005 = 0x002A;
					if (var0001 == 0x00CA) {
						Func08DF(var000A, 0x00CB);
					}
				}
				if (var000C == 0x0369) {
					var0006 = Func07F4;
					var0005 = 0x002B;
					Func08DD(var000A, 0x0179, 0x0014);
				}
				if ((var000C == 0x0108) || ((var000C == 0x01EF) || (var000C == 0x00CB))) {
					var0006 = Func07F2;
					var0005 = 0x0029;
					if (var0001 == 0x00CA) {
						Func08DC(var000A);
					}
				}
				if (var000C == 0x0346) {
					if (var0001 == 0x00CC) {
						var000D = var000A->get_item_frame();
						if (var000D == 0x0001) {
							var0006 = Func07F4;
							var0005 = 0x002B;
							var0010 = var000A->get_object_position();
							UI_sprite_effect(ANIMATION_POOF, (var0010[0x0001] - 0x0006), (var0010[0x0002] - 0x0006), 0x0000, 0x0000, 0x0000, LOOP_ONCE);
							var000A->remove_item();
							EDRIN->move_object(var0010);
							EDRIN->set_schedule_type(TALK);
							EDRIN->set_new_schedules(MIDNIGHT, WANDER, [var0010[0x0001], var0010[0x0002]]);
							gflags[RESTORED_EDRIN] = true;
						}
					}
				}
				if (var000B) {
					Func08DE(var000E, var000F);
				}
				if ((var0001 == 0x00CC) && ((var0006 != 0x0000) && (var0005 != 0x002B))) {
					var0005 = 0x002B;
					Func08DD(var000A, 0x0179, UI_die_roll(0x0000, 0x0014));
				}
			}
		}
		if (var0006 == 0x0000) {
			var0006 = Func07F1;
			var0005 = 0x0028;
			var0010 = var0004;
			var0010[0x0003] += 0x0001;
			UI_sprite_effect(ANIMATION_PURPLE_BUBBLES, (var0010[0x0001] - 0x0006), (var0010[0x0002] - 0x0006), 0x0000, 0x0000, 0x0000, LOOP_ONCE);
			var0011 = [0x0108, 0x0179, 0x0274, 0x023C];
			var000A = UI_create_new_object(var0011[UI_get_random(0x0004)]);
			if (var000A) {
				var000A->set_item_flag(TEMPORARY);
				var0002 = UI_update_last_created(var0010);
			}
		}
		if (var0001 == 0x00CA) {
			var0002 = script AVATAR after 10 ticks {
				nohalt;
				call var0006;
			};
		}
		UI_sprite_effect(var0005, (var0004[0x0001] - 0x0006), (var0004[0x0002] - 0x0006), 0x0000, 0x0000, 0x0000, LOOP_ONCE);
		UI_play_sound_effect(0x0074);
		UI_lightning();
		var0002 = var0000->set_item_quality(0x0015);
		var0002 = script var0000 after 5 ticks {
			call Func0313;
		};
		return true;
	}
	return false;
}

extern var Func0992 0x992 (var var0000, var var0001, var var0002, var var0003);

void Func08E3 0x8E3 () {
	var var0000;

	gflags[FINISHED_LIGHTNING_EXPERIMENT] = true;
	var0000 = Func0992(0x0001, 0x0000, 0x0000, false);
	if (var0000 == AVATAR) {
		AVATAR->item_say("@Now I know the secret!@");
	} else {
		var0000->show_npc_face0(0x0000);
		say("\"Dost thou not see? Red, green and yellow -- and we have observed their properties. Now we can report to Gustacio.\"");
	}
}

extern var Func0906 0x906 (var var0000);
extern void Func0907 0x907 (var var0000, var var0001);

void Func08E4 0x8E4 (var var0000) {
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;
	var var0008;
	var var0009;
	var var000A;

	var0001 = [0x0178, 0x010E, 0x01B0, 0x01B1];
	var0002 = [];
	for (var0005 in var0001 with var0003 to var0004) {
		var0002 &= find_nearby(var0005, 0x006E, MASK_NONE);
	}
	var0006 = false;
	for (var0005 in var0002 with var0007 to var0008) {
		if (var0005->get_item_quality() == var0000) {
			var0006 = var0005;
		}
	}
	if (var0006) {
		var0009 = 0x0002;
		if (Func0906(var0006) == 0x0002) {
			var0009 = 0x0001;
		}
		Func0907(var0006, var0009);
	} else {
		var000A = script item {
			nohalt;
			say "@No door!@";
		};
	}
}

void Func08E5 0x8E5 () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;

	var0000 = DUPRE->get_cont_items(SHAPE_ANY, QUALITY_ANY, FRAME_ANY);
	for (var0003 in var0000 with var0001 to var0002) {
		if (var0003->set_last_created()) {
			var0004 = UI_update_last_created([0x0337, 0x0A25, 0x0005]);
			if (!var0004) {
				var0004 = UI_update_last_created([0x0335, 0x0A25, 0x0005]);
			}
			if (!var0004) {
				var0004 = UI_update_last_created([0x0333, 0x0A25, 0x0005]);
			}
			if (!var0004) {
				var0004 = UI_update_last_created([0x0331, 0x0A25, 0x0005]);
			}
			if (!var0004) {
				var0004 = UI_update_last_created([0x0337, 0x0A27, 0x0005]);
			}
			if (!var0004) {
				var0004 = UI_update_last_created([0x0335, 0x0A27, 0x0005]);
			}
			if (!var0004) {
				var0004 = UI_update_last_created([0x0333, 0x0A27, 0x0005]);
			}
			if (!var0004) {
				var0004 = UI_update_last_created([0x0331, 0x0A27, 0x0005]);
			}
			if (!var0004) {
				var0004 = UI_update_last_created([0x0336, 0x0A29, 0x0005]);
			}
			if (!var0004) {
				var0004 = UI_update_last_created([0x0333, 0x0A29, 0x0005]);
			}
			if (!var0004) {
				var0004 = UI_update_last_created([0x032B, 0x0A27, 0x0000]);
			}
			if (!var0004) {
				var0004 = AVATAR->give_last_created();
			}
		}
	}
}

extern void Func0982 0x982 (var var0000, var var0001);

void Func08E6 0x8E6 () {
	var var0000;

	var0000 = AVATAR->get_object_position();
	UI_play_sound_effect(0x002A);
	AVATAR->obj_sprite_effect(ANIMATION_LIGHTNING, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, LOOP_ONCE);
	Func0982(AVATAR, 0x007E);
}

extern var Func0988 0x988 (var var0000, var var0001);
extern var Func0989 0x989 (var var0000, var var0001);

var Func08E7 0x8E7 (var var0000) {
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;
	var var0008;
	var var0009;
	var var000A;
	var var000B;
	var var000C;
	var var000D;
	var var000E;

	var0001 = 0x0001;
	var0002 = 0x0000;
	var0003 = false;
	var0004 = UI_get_party_list();
	var0005 = var0000->get_barge();
	var0006 = var0000->find_nearby(0x0124, 0x001E, MASK_NONE);
	var0007 = [];
	var0008 = [];
	for (var000B in var0006 with var0009 to var000A) {
		if (var000B->get_barge() == var0005) {
			if ((!var0003) && (var000B->get_item_quality() == 0x00FF)) {
				AVATAR->sit_down(var000B);
				var0004 = Func0988(AVATAR->get_npc_object(), var0004);
				var0003 = true;
			} else {
				var0008 &= var000B->get_distance(AVATAR);
				var0007 &= var000B;
			}
		}
	}
	var000C = UI_get_array_size(var0004);
	var0007 = Func0989(var0007, var0008);
	for (var000B in var0007 with var000D to var000E) {
		if (var000C >= var0001) {
			var0004[var0001]->sit_down(var000B);
			var0001 += 0x0001;
		} else {
			return true;
		}
	}
	return false;
}

void Func08E8 0x8E8 () {
	gflags[PUZZLE_PICKED_RED_FIRST] = false;
	gflags[PUZZLE_PICKED_RED_FOURTH] = false;
	gflags[PUZZLE_PICKED_YELLOW_SECOND] = false;
	gflags[PUZZLE_PICKED_BLUE_THIRD] = false;
	gflags[PUZZLE_PICKED_WHITE_LAST] = false;
	AVATAR->obj_sprite_effect(ANIMATION_LIGHTNING, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, LOOP_ONCE);
}

void Func08E9 0x8E9 () {
	gflags[PUZZLE_PICKED_RED_FIRST] = false;
	gflags[PUZZLE_PICKED_RED_FOURTH] = false;
	gflags[PUZZLE_PICKED_YELLOW_SECOND] = false;
	gflags[PUZZLE_PICKED_BLUE_THIRD] = false;
	gflags[PUZZLE_PICKED_WHITE_LAST] = false;
	PARTY->move_object([0x0AB7, 0x0094, 0x0000]);
}

var Func08EA 0x8EA (var var0000) {
	var var0001;

	var0001 = var0000;
	var0001 /= 0x0002;
	var0001 *= 0x0002;
	if (var0001 == var0000) {
		return false;
	}
	return true;
}

extern var Func08EA 0x8EA (var var0000);

var Func08EB 0x8EB (var var0000, var var0001) {
	var var0002;
	var var0003;
	var var0004;

	var0002 = 0x0000;
	var0003 = 0x0001;
	var0004 = var0000;
	while (var0002 < var0001) {
		var0004 /= 0x0002;
		var0002 += 0x0001;
	}
	return Func08EA(var0004);
}

extern var Func09A0 0x9A0 (var var0000, var var0001);
extern void Func09AC 0x9AC (var var0000, var var0001, var var0002, var var0003);
extern void Func097F 0x97F (var var0000, var var0001, var var0002);
extern void Func07D1 object#(0x7D1) ();

void Func08EC 0x8EC () {
	var var0000;
	var var0001;

	UI_play_sound_effect(0x0082);
	var0000 = Func09A0(0x0000, 0x0001);
	if (var0000) {
		UI_play_music(0x001B, var0000);
	}
	Func09AC(FILBERCIO, -1, 0, WAIT);
	FILBERCIO->move_object([0x097A, 0x074C, 0x0000]);
	UI_sprite_effect(ANIMATION_TELEPORT, 0x097A, 0x074C, 0x0000, 0x0000, 0x0000, LOOP_ONCE);
	Func097F(FILBERCIO, "@Darling, I'm here...!@", 0x0002);
	FILBERCIO->Func07D1();
	gflags[CAUGHT_WITH_FRIGIDAZZI] = true;
	var0001 = script FILBERCIO after 15 ticks {
		nohalt;
		call Func01C7;
	};
	abort;
}

extern var Func0953 0x953 ();

var Func08ED 0x8ED (var var0000) {
	var var0001;

	var0001 = Func0953();
	var0000 += 0x0001;
	if (var0000 == 0x0001) {
		say("\"",
			var0001,
			", we are all warriors here. It is not necessary for thee to attempt to impress us with exaggerated tales...\"");
		say("\"What else didst thou see in the Knight's Test?\"");
		return var0000;
	}
	if (var0000 == 0x0002) {
		say("\"Art thou certain of thy facts?\"");
		LUTHER->show_npc_face1(0x0000);
		if (UI_is_pc_female()) {
			say("\"Didst thou fight a dragon as well? She is full of jests.\"");
		} else {
			say("\"Listen to his tales -- I think that he is attracted to thee, Shazzana.\"");
		}
		UI_remove_npc_face1();
		0x0000->set_conversation_slot();
		say("\"Be still, Luther -- I think something strange is happening. Tell me more of what thou didst see...\"");
		return var0000;
	}
	if (var0000 == 0x0003) {
		say("\"Knights, have you been listening? Our new warrior hath had a terrible experience...\"");
		SPEKTOR->show_npc_face1(0x0000);
		say("\"I'm sure there is an explanation for everything.\"");
		UI_remove_npc_face1();
		0x0000->set_conversation_slot();
		say("\"This time, I think thou art wrong, Spektor! What else didst thou see in the dungeon?\"");
		return var0000;
	}
	if (var0000 == 0x0004) {
		say("\"There must be something wrong...\"");
		MARSTEN->show_npc_face1(0x0000);
		say("\"I shall have a talk with Shmed tomorrow. If half of what this Knight says is true, then the dungeonkeeper hath been seriously delinquent in his duties.\"");
		UI_remove_npc_face1();
		0x0000->set_conversation_slot();
		say("\"",
			var0001,
			", I apologize for what hath been done to thee in the Knight's Test. 'Tis an outrage!\"");
		return var0000;
	}
	return 0;
}

extern var Func0994 0x994 ();

void Func08EE 0x8EE (var var0000) {
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;

	var0001 = Func0994();
	if (var0001 == 0x000E) {
		var0002 = 0x0190;
		var0003 = UI_die_roll(0x0012, 0x0013);
	} else if (var0001 == 0x000D) {
		if (UI_die_roll(0x0001, 0x0004) == 0x0001) {
			var0002 = 0x019E;
			var0003 = 0x0004;
		} else {
			var0002 = 0x0192;
			var0003 = 0x000B;
		}
	} else if (var0001 == 0x0003) {
		var0002 = 0x019E;
		var0003 = 0x0011;
	} else if (var0001 == 0x0009) {
		var0002 = 0x0190;
		var0003 = 0x0006;
	} else {
		return;
	}
	var0004 = UI_create_new_object(var0002);
	if (var0004) {
		var0004->set_item_frame(var0003);
		var0005 = UI_update_last_created(var0000);
	}
}

void Func08EF 0x8EF () {
	var var0000;
	var var0001;

	gflags[TEMP_FLAG_1] = true;
	if (gflags[CALADIN_IS_DEAD]) {
		say("\"Caladin is already deceased!\"");
		abort;
	}
	var0000 = script AVATAR after 8 ticks {
		call Func07DB;
	};
	var0001 = ANTI_DUPRE->direction_from(CALADIN);
	var0000 = script ANTI_DUPRE {
		face var0001;
		actor frame cast_out;
		actor frame cast_up;
		actor frame cast_out;
		sfx 64;
		actor frame strike_2h;
		wait 2;
		actor frame standing;
	};
	var0000 = script CALADIN {
		nohalt;
		wait 10;
	};
	abort;
}

extern void Func097F 0x97F (var var0000, var var0001, var var0002);

void Func08F0 0x8F0 () {
	var var0000;

	if ((gflags[HAVE_WOLF_TATTOO] && (gflags[HAVE_WOLF_CLOAK] && gflags[GAVE_WOLF_TO_LUCILLA])) && ((!gflags[AVATAR_IS_KNIGHT]) && (gflags[RENOUNCED_BRITISH] || (!gflags[TOLD_MARSTEN_SERVES_LORD_BRITISH])))) {
		var0000 = UI_get_random(0x0003);
		if (var0000 == 0x0001) {
			say("\"'Tis time for thy banquet, Avatar. Thou shouldst make haste.\"");
		}
		if (var0000 == 0x0002) {
			say("\"I shall see thee at the Banquet Hall, Avatar. It is in the south part of town.\"");
		}
		if (var0000 == 0x0003) {
			say("\"Forgive me, Avatar. I must prepare for thy banquet.\"");
		}
		Func097F(item, "@The banquet!@", 0x0000);
		set_schedule_type(SHY);
		set_new_schedules(MIDNIGHT, WANDER, [0x0000, 0x0000]);
		abort;
	}
}

var Func08F1 0x8F1 () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;

	var0000 = [0x03A3, 0x0A46, 0x0000];
	var0001 = BRENDANN->get_object_position();
	var0002 = var0000[0x0001] - var0001[0x0001];
	if (var0002 < 0x0000) {
		var0002 *= -1;
	}
	var0003 = var0000[0x0002] - var0001[0x0002];
	if (var0003 < 0x0000) {
		var0003 *= -1;
	}
	var0004 = var0002 + var0003;
	return var0004;
}

void Func08F2 0x8F2 (var var0000) {
	var var0001;
	var var0002;
	var var0003;

	var0000[0x0002] -= 0x0003;
	var0001 = [THOXA, BRACCUS, DRAXTA, KARNAX, MIGGIM, SILENT1, SILENT2, SILENT3];
	var0002 = 0x0000;
	while (var0002 < 0x0007) {
		if (var0002 > 0x0003) {
			var0003 = var0002 - 0x0003;
			var0001[var0002]->move_object([(var0000[0x0001] - var0003), (var0000[0x0002] + var0003), var0000[0x0003]]);
		} else {
			var0001[var0002]->move_object([(var0000[0x0001] + var0002), (var0000[0x0002] + var0002), var0000[0x0003]]);
		}
		var0001[var0002]->set_schedule_type(WAIT);
		var0001[var0002]->set_npc_id(var0002);
		var0002 += 0x0001;
	}
}

var Func08F3 0x8F3 () {
	if ((gflags[ANARCHY_BANE_DEAD] && (!SHAMINO->get_item_flag(SI_ZOMBIE))) && ((gflags[WANTONNESS_BANE_DEAD] && (!DUPRE->get_item_flag(SI_ZOMBIE))) && (gflags[INSANITY_BANE_DEAD] && (!IOLO->get_item_flag(SI_ZOMBIE))))) {
		return true;
	}
	return false;
}

extern var Func08F3 0x8F3 ();

void Func08F4 0x8F4 () {
	var var0000;

	if (Func08F3() && (!XENKA->get_item_flag(MET))) {
		var0000 = AVATAR->get_object_position();
		var0000[0x0002] -= 0x0002;
		KARNAX->move_object(var0000);
		UI_play_sound_effect(0x0051);
		KARNAX->set_npc_id(0x001F);
		KARNAX->set_schedule_type(TALK);
	}
}

extern var Func095C 0x95C (var var0000, var var0001);
extern void Func095E 0x95E (var var0000, var var0001, var var0002);
extern var Func08B6 0x8B6 ();

void Func08F5 0x8F5 (var var0000) {
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;
	var var0008;
	var var0009;
	var var000A;
	var var000B;
	var var000C;
	var var000D;

	var0000->show_npc_face0(0x0000);
	say("\"Enough, arrogant fool! Thou canst not kill a Xenkan Monk!\"");
	say("\"Stand thou in awe of my true power... Let there be PEACE!\"");
	UI_remove_npc_face0();
	var0001 = var0000->get_object_position();
	var0001[0x0001] -= var0001[0x0003] / 0x0002;
	var0001[0x0002] -= var0001[0x0003] / 0x0002;
	UI_sprite_effect(ANIMATION_TELEPORT2, var0001[0x0001], var0001[0x0002], 0x0000, 0x0000, 0x0000, LOOP_ONCE);
	UI_sprite_effect(ANIMATION_TELEPORT, var0001[0x0001], var0001[0x0002], 0x0000, 0x0000, 0x0000, LOOP_ONCE);
	UI_sprite_effect(ANIMATION_TELEPORT, var0001[0x0001], var0001[0x0002], 0x0000, 0x0000, 0x0000, LOOP_ONCE);
	var0002 = [THOXA, BRACCUS, DRAXTA, KARNAX, MIGGIM, SILENT1, SILENT2, SILENT3];
	for (var0005 in var0002 with var0003 to var0004) {
		var0005->halt_scheduled();
		var0006 = var0005->get_npc_object();
		var0006->set_schedule_type(STANDTHERE);
		var0006->set_alignment(NEUTRAL);
		var0006->set_oppressor(0x0000);
		var0007 = Func095C(var0006, STRENGTH);
		var0008 = Func095C(var0006, HEALTH);
		var0009 = var0007 - var0008;
		Func095E(var0006, HEALTH, var0009);
	}
	var000A = Func08B6();
	var000A = [AVATAR, var000A];
	for (var0005 in var000A with var000B to var000C) {
		var0005->halt_scheduled();
		var000D = script var0005 {
			nohalt;
			actor frame standing;
		};
		var0005->set_schedule_type(FOLLOW_AVATAR);
		var0005->set_oppressor(0x0000);
		var0007 = Func095C(var0005, STRENGTH);
		var0008 = Func095C(var0005, HEALTH);
		var0009 = var0007 - var0008;
		Func095E(var0005, HEALTH, var0009);
	}
}

extern var Func09A0 0x9A0 (var var0000, var var0001);

void Func08F6 0x8F6 () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;
	var var0008;

	var0000 = Func09A0(0x0002, 0x0001);
	var0001 = Func09A0(0x0002, 0x0002);
	var0002 = Func09A0(0x0002, 0x0003);
	var0003 = Func09A0(0x0002, 0x0004);
	var0004 = Func09A0(0x0000, 0x0004);
	var0005 = AVATAR->get_object_position();
	var0006 = var0005[0x0001] / 0x0100;
	var0007 = var0005[0x0001] - (var0006 * 0x0100);
	var0008 = var0000->set_item_quality(var0006);
	var0008 = var0001->set_item_quality(var0007);
	var0006 = var0005[0x0002] / 0x0100;
	var0007 = var0005[0x0002] - (var0006 * 0x0100);
	var0008 = var0002->set_item_quality(var0006);
	var0008 = var0003->set_item_quality(var0007);
	var0008 = var0004->set_item_quality(var0005[0x0003]);
}

extern var Func09A0 0x9A0 (var var0000, var var0001);

var Func08F7 0x8F7 () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;

	var0000 = [0x0000, 0x0000, 0x0000];
	var0001 = Func09A0(0x0002, 0x0001);
	var0002 = Func09A0(0x0002, 0x0002);
	var0003 = Func09A0(0x0002, 0x0003);
	var0004 = Func09A0(0x0002, 0x0004);
	var0005 = Func09A0(0x0000, 0x0004);
	var0006 = var0001->get_item_quality();
	var0007 = var0002->get_item_quality();
	var0000[0x0001] = (var0006 * 0x0100) + var0007;
	var0006 = var0003->get_item_quality();
	var0007 = var0004->get_item_quality();
	var0000[0x0002] = (var0006 * 0x0100) + var0007;
	var0000[0x0003] = var0005->get_item_quality();
	return var0000;
}

var Func08F8 0x8F8 (var var0000, var var0001, var var0002) {
	if ((var0000[0x0001] > var0001[0x0001]) && ((var0000[0x0001] < var0002[0x0001]) && ((var0000[0x0002] > var0001[0x0002]) && (var0000[0x0002] < var0002[0x0002])))) {
		return true;
	}
	return false;
}

extern var Func08F7 0x8F7 ();
extern var Func0993 0x993 (var var0000);
extern var Func08F8 0x8F8 (var var0000, var var0001, var var0002);

var Func08F9 0x8F9 () {
	var var0000;
	var var0001;

	var0000 = Func08F7();
	var0001 = Func0993(var0000);
	if (var0001 == 0x0004) {
		return true;
	}
	if (var0001 == 0x000B) {
		return true;
	}
	if (var0001 == 0x000F) {
		return true;
	}
	if (var0001 == 0x000C) {
		return true;
	}
	if (!FLICKEN->get_item_flag(MET)) {
		return true;
	}
	if (Func08F8(var0000, [0x08A3, 0x07B1], [0x08CE, 0x07DF]) || Func08F8(var0000, [0x0853, 0x0821], [0x087E, 0x083D])) {
		return true;
	}
	if (Func08F8(var0000, [0x0324, 0x0A6C], [0x03BF, 0x0ADC])) {
		return true;
	}
	if (Func08F8(var0000, [0x0444, 0x06D5], [0x047A, 0x072A])) {
		return true;
	}
	if (Func08F8(var0000, [0x0423, 0x0343], [0x0452, 0x039B])) {
		return true;
	}
	if (Func08F8(var0000, [0x0000, 0x0000], [0x04F7, 0x0246])) {
		return true;
	}
	if (Func08F8(var0000, [0x0000, 0x0000], [0x03E0, 0x02FE])) {
		return true;
	}
	if (Func08F8(var0000, [0x0000, 0x0000], [0x0366, 0x0402])) {
		return true;
	}
	if (Func08F8(var0000, [0x0133, 0x0373], [0x0331, 0x0480])) {
		return true;
	}
	if (Func08F8(var0000, [0x0913, 0x01BA], [0x093A, 0x01DC])) {
		return true;
	}
	if (Func08F8(var0000, [0x0A70, 0x016F], [0x0B80, 0x0280])) {
		return true;
	}
	return false;
}

extern var Func08F7 0x8F7 ();
extern var Func0993 0x993 (var var0000);
extern var Func08F9 0x8F9 ();
extern var Func08B6 0x8B6 ();
extern var Func0995 0x995 ();
extern var Func09A0 0x9A0 (var var0000, var var0001);

void Func08FA 0x8FA () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;
	var var0008;
	var var0009;
	var var000A;
	var var000B;
	var var000C;
	var var000D;

	say("\"We have restored life to thy flesh, as promised, Hero from Another World. Now thou must continue thy quest.\"");
	say("\"We know not for certain from where thou wilt continue...\"");
	var0000 = [0x0408, 0x07CE];
	var0001 = [0x036B, 0x0ABB];
	var0002 = [0x0804, 0x0740];
	var0003 = [0x03FC, 0x03AC];
	var0004 = var0000;
	if (gflags[HAWK_IN_MOONSHADE]) {
		if (gflags[ZHELKAS_OPENED_ENTRANCE]) {
			var0005 = UI_die_roll(0x0001, 0x0003);
			if (var0005 == 0x0001) {
				var0004 = var0000;
			}
			if (var0005 == 0x0002) {
				var0004 = var0001;
			}
			if (var0005 == 0x0003) {
				var0004 = var0002;
			}
		} else {
			var0004 = var0002;
		}
	} else if (UI_die_roll(0x0001, 0x0002) == 0x0001) {
		var0004 = var0000;
	} else {
		var0004 = var0001;
	}
	var0006 = Func08F7();
	var0007 = Func0993(var0006);
	if ((var0007 == 0x0005) || ((var0007 == 0x0008) || ((var0007 == 0x000A) || ((var0007 == 0x0011) || ((var0007 == 0x0012) || ((var0007 == 0x0014) || ((var0007 == 0x0015) || ((var0007 == 0x0016) || ((var0007 == 0x0017) || ((var0007 == 0x0018) || ((var0007 == 0x0019) || (var0007 == 0x001D)))))))))))) {
		var0004 = var0003;
	}
	if (Func08F9()) {
		var0004 = Func08F7();
	}
	var0008 = Func08B6();
	var0008 = [AVATAR, var0008];
	for (var000B in var0008 with var0009 to var000A) {
		var000B->clear_item_flag(ASLEEP);
		var000B->move_object(var0004);
	}
	UI_sprite_effect(ANIMATION_TELEPORT, var0004[0x0001], var0004[0x0002], 0x0000, 0x0000, 0x0000, LOOP_ONCE);
	UI_play_sound_effect(0x0051);
	gflags[AVATAR_IS_DEAD] = false;
	if (Func0995()) {
		AVATAR->set_item_flag(FREEZE);
	}
	var000C = Func09A0(0x0005, 0x0001);
	var000D = Func09A0(0x0005, 0x0002);
	var000C->halt_scheduled();
	var000D->halt_scheduled();
	abort;
}

extern var Func099F 0x99F (var var0000, var var0001, var var0002);
extern var Func098D 0x98D ();
extern var Func09A8 0x9A8 (var var0000, var var0001);

var Func08FB 0x8FB () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;
	var var0008;
	var var0009;
	var var000A;
	var var000B;

	var0000 = [];
	var0001 = Func099F(0x0190, QUALITY_ANY, FRAME_ANY);
	var0000 &= var0001;
	var0001 = Func099F(0x019E, QUALITY_ANY, FRAME_ANY);
	var0000 &= var0001;
	var0001 = AVATAR->find_nearby(0x0190, 0x0050, MASK_NONE);
	var0000 &= var0001;
	var0001 = AVATAR->find_nearby(0x019E, 0x0050, MASK_NONE);
	var0000 &= var0001;
	var0001 = [];
	var0002 = Func098D();
	var0002 &= CANTRA;
	for (var0005 in var0000 with var0003 to var0004) {
		var0006 = var0005->get_item_quality();
		var0007 = var0005->get_item_quantity(0x0000);
		var0008 = var0005->get_object_position();
		var0009 = var0005->get_body_npc();
		if (Func09A8(var0009, var0002)) {
			if (var0009 == DUPRE) {
				var000A = var0005->get_item_frame();
				var000B = var0005->get_item_shape();
				if ((var000B == 0x019E) && (var000A == 0x0014)) {
					var0001 &= var0005;
				}
			} else {
				var0001 &= var0005;
				if ((var0009 == SHAMINO) && gflags[BEATRIX_PROTECTION]) {
					SHAMINO->set_item_flag(SI_TOURNAMENT);
				}
			}
		}
	}
	return var0001;
}

extern var Func08FB 0x8FB ();
extern var Func0994 0x994 ();

var Func08FC 0x8FC () {
	var var0000;

	var0000 = Func08FB();
	if ((UI_get_array_size(var0000) > 0x0000) && (Func0994() != 0x0020)) {
		return true;
	}
	return false;
}

var Func08FD 0x8FD () {
	var var0000;

	var0000 = ["Dupre", "Shamino", "Iolo", "Gwenno", "Petra", "Mortegro", "Wilfred", "Boydon", "Selina", "Sethys", "Stefano"];
	return var0000;
}

extern var Func08FB 0x8FB ();
extern var Func098D 0x98D ();
extern var Func08FD 0x8FD ();
extern var Func09A8 0x9A8 (var var0000, var var0001);
extern var Func095C 0x95C (var var0000, var var0001);
extern void Func095E 0x95E (var var0000, var var0001, var var0002);

void Func08FE 0x8FE () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;
	var var0008;
	var var0009;
	var var000A;
	var var000B;
	var var000C;

	var0000 = Func08FB();
	var0001 = Func098D();
	var0001 &= CANTRA;
	var0002 = Func08FD();
	var0002 &= "Cantra";
	for (var0005 in var0000 with var0003 to var0004) {
		if (var0005 != AVATAR->get_npc_object()) {
			var0006 = var0005->get_body_npc();
			var0007 = Func09A8(var0006, var0001);
			var0008 = var0002[var0007];
			var0009 = var0005->get_object_position();
			var000A = var0005->resurrect();
			if (var000A) {
				say("\"Now thy friend ",
					var0008,
					" doth live again.\"");
				if (var0006->get_item_flag(IN_PARTY) && var0006->get_item_flag(SI_ZOMBIE)) {
					var0006->remove_from_party();
				}
				var0006->set_new_schedules(MIDNIGHT, WAIT, [var0009[0x0001], var0009[0x0002]]);
				var0006->run_schedule();
				var0006->set_schedule_type(WAIT);
				var000B = Func095C(var0006, FOODLEVEL);
				var000C = 31 - var000B;
				Func095E(var0006, FOODLEVEL, var000C);
				if (var0006 == CANTRA) {
					gflags[CURED_CANTRA] = true;
				}
				if (var0006 == GWENNO) {
					GWENNO->set_schedule_type(TALK);
					gflags[GWENNO_IS_DEAD] = false;
					var000A = script AVATAR->get_npc_object() after 5 ticks {
						call Func0495;
					};
				}
			} else {
				say("\"Thy friend ",
					var0008,
					" hath been lost forever.\"");
			}
		}
	}
}

extern var Func0954 0x954 ();
extern void Func097F 0x97F (var var0000, var var0001, var var0002);

void Func08FF 0x8FF () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;

	if (gflags[GOT_MAGELORD_SUMMONS]) {
		abort;
	}
	if (gflags[POTHOS_RETURNED]) {
		FILBERCIO->set_schedule_type(DANCE);
		gflags[GOT_MAGELORD_SUMMONS] = true;
	}
	if (gflags[HAVE_TALKING_SCROLL]) {
		abort;
	}
	var0000 = ((((((((((((((GUSTACIO->get_item_flag(MET) + MORTEGRO->get_item_flag(MET)) + FEDABIBLIO->get_item_flag(MET)) + TORRISSIO->get_item_flag(MET)) + COLUMNA->get_item_flag(MET)) + MELINO->get_item_flag(MET)) + DUCIO->get_item_flag(MET)) + TOPO->get_item_flag(MET)) + JULIA->get_item_flag(MET)) + ROCCO->get_item_flag(MET)) + PETRA->get_item_flag(MET)) + BUCIA->get_item_flag(MET)) + MOSH->get_item_flag(MET)) + ANDRIO->get_item_flag(MET)) + FRELI->get_item_flag(MET)) + gflags[MET_ERNESTO];
	if ((var0000 >= 0x0003) && (!gflags[HAVE_TALKING_SCROLL])) {
		var0001 = AUTO_MESSENGER->approach_avatar(0x005A, 0x0028);
		if (var0001) {
			AUTO_MESSENGER->set_schedule_type(TALK);
			var0002 = AVATAR->get_object_position();
			var0003 = Func0954();
			Func097F(AUTO_MESSENGER, (("@One moment, " + var0003) + " .@"), 0x0002);
		}
	}
}

extern var Func0992 0x992 (var var0000, var var0001, var var0002, var var0003);

var Func0900 0x900 (var var0000) {
	var var0001;
	var var0002;
	var var0003;

	var0001 = UI_get_array_size(UI_get_party_list());
	if ((var0001 <= var0000) || (var0001 < 0x0002)) {
		return false;
	}
	var0002 = [];
	while (UI_get_array_size(var0002) != var0000) {
		var0003 = Func0992(0x0001, 0x0000, 0x0000, false);
		if (!(var0003 in var0002)) {
			if (UI_get_array_size(var0002) == 0x0000) {
				var0002 = [var0003];
			} else {
				var0002 &= var0003;
			}
		}
	}
	return var0002;
}

extern var Func09A6 0x9A6 (var var0000);
extern void Func092F 0x92F (var var0000, var var0001);
extern void Func09AC 0x9AC (var var0000, var var0001, var var0002, var var0003);

void Func0901 0x901 () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;
	var var0008;
	var var0009;
	var var000A;
	var var000B;
	var var000C;
	var var000D;
	var var000E;

	AVATAR->clear_item_flag(INVISIBLE);
	var0000 = UI_create_new_object(0x0320);
	if (var0000) {
		var0000->set_item_frame(0x0000);
		var0001 = var0000->set_item_quality(0x003D);
		var0000->clear_item_flag(TEMPORARY);
		var0001 = UI_update_last_created([0x0937, 0x0738, 0x0000]);
		if (var0001) {
			UI_sprite_effect(ANIMATION_PURPLE_BUBBLES, 0x0939, 0x0732, 0x0000, 0x0000, 0x0000, LOOP_ONCE);
			var0002 = 0x0000;
			var0003 = AVATAR->get_cont_items(SHAPE_ANY, QUALITY_ANY, FRAME_ANY);
			while (var0002 < 0x0002) {
				for (var0006 in var0003 with var0004 to var0005) {
					if (Func09A6(var0006) || (var0002 == 0x0001)) {
						var0001 = var0006->get_item_shape();
						if (!((var0001 == 0x01E6) || (var0001 == 0x025F))) {
							if (!var0006->set_last_created()) {
								Func092F(AVATAR, 0x0011);
							}
							if (!var0000->give_last_created()) {
								Func092F(AVATAR, 0x0012);
							}
						}
					}
				}
				var0002 += 0x0001;
				var0003 = AVATAR->get_cont_items(SHAPE_ANY, QUALITY_ANY, FRAME_ANY);
			}
			var0001 = AVATAR->add_cont_items(0x0001, 0x0321, QUALITY_ANY, 0x0000, 0x0000);
			var0007 = 0x0000;
			var0002 = 0x0000;
			var0003 = var0000->get_cont_items(SHAPE_ANY, QUALITY_ANY, FRAME_ANY);
			while (var0002 < 0x0002) {
				for (var0006 in var0003 with var0008 to var0009) {
					if (Func09A6(var0006) || (var0002 == 0x0001)) {
						var0001 = var0006->get_item_shape();
						if ((var0001 == 0x02F9) || ((var0001 == 0x034A) || ((var0001 == 0x0347) || ((var0001 == 0x01E5) || ((var0001 == 0x0128) && (var0006->get_item_frame() == 0x0003)))))) {
							if (!var0006->set_last_created()) {
								Func092F(AVATAR, 0x0011);
							}
							if (!AVATAR->give_last_created()) {
								Func092F(AVATAR, 0x0012);
							}
						}
					}
				}
				var0002 += 0x0001;
				var0003 = var0000->get_cont_items(SHAPE_ANY, QUALITY_ANY, FRAME_ANY);
			}
			var0001 = AVATAR->add_cont_items(0x0001, 0x00F1, QUALITY_ANY, 0x0000, 0x0000);
			var0001 = AVATAR->add_cont_items(0x0001, 0x023A, QUALITY_ANY, 0x0000, 0x0000);
		}
	}
	AVATAR->clear_item_flag(DONT_MOVE);
	if (SHAMINO->get_item_flag(DEAD)) {
		SHAMINO->resurrect_npc();
		SHAMINO->remove_from_party();
		SHAMINO->set_npc_id(0x001E);
		gflags[SHAMINO_RESURRECTED_BY_MONKS] = true;
		var0001 = AVATAR->remove_cont_items(QUANTITY_ANY, 0x019E, QUALITY_ANY, 0x0013, 0x0012);
		var0001 = DUPRE->remove_cont_items(QUANTITY_ANY, 0x019E, QUALITY_ANY, 0x0013, 0x0012);
		var0001 = IOLO->remove_cont_items(QUANTITY_ANY, 0x019E, QUALITY_ANY, 0x0013, 0x0012);
		var0001 = BOYDON->remove_cont_items(QUANTITY_ANY, 0x019E, QUALITY_ANY, 0x0013, 0x0012);
	}
	UI_init_conversation();
	FILBERCIO->remove_npc();
	FRIGIDAZZI->remove_npc();
	BUCIA->revert_schedule();
	BUCIA->set_schedule_type(MAJOR_SIT);
	GUSTACIO->revert_schedule();
	GUSTACIO->set_schedule_type(MAJOR_SIT);
	var000A = [0x0935, 0x06E3];
	var000B = [0x08B9, 0x070B];
	var000C = [0x08CB, 0x074A];
	var000D = [0x087E, 0x0747];
	var000E = [0x0942, 0x077E];
	FLINDO->set_new_schedules([MIDNIGHT, MORNING, AFTERNOON, EVENING, NIGHT], [SLEEP, EAT_AT_INN, TEND_SHOP, TEND_SHOP, TEND_SHOP], [var000A, var000B, var000C, var000D, var000E]);
	FLINDO->set_schedule_type(MAJOR_SIT);
	KANE->set_new_schedules(MIDNIGHT, MAJOR_SIT, [0x09A6, 0x07F8]);
	KANE->run_schedule();
	ALE->set_new_schedules(MIDNIGHT, WANDER, [0x09A7, 0x07F7]);
	ALE->run_schedule();
	Func09AC(MORTEGRO, 0x060E, 0x020F, TEND_SHOP);
	if (DUPRE->get_npc_id() == 0x001E) {
		Func09AC(DUPRE, 0x08BC, 0x0705, EAT_AT_INN);
	}
	if (IOLO->get_npc_id() == 0x001E) {
		Func09AC(IOLO, 0x099E, 0x07F9, MAJOR_SIT);
	}
	if (SHAMINO->get_npc_id() == 0x001E) {
		Func09AC(SHAMINO, 0x07F8, 0x0799, WANDER);
	}
	if (BOYDON->get_npc_id() == 0x001E) {
		BOYDON->set_new_schedules([MIDNIGHT, MORNING, NIGHT], [STANDTHERE, WANDER, MAJOR_SIT], [0x0912, 0x06D1, 0x08D5, 0x0754, 0x08C4, 0x070B]);
		BOYDON->run_schedule();
	}
	abort;
}

extern void Func00F6 shape#(0xF6) ();
extern void Func01D7 shape#(0x1D7) ();
extern void Func0204 shape#(0x204) ();
extern void Func00E1 shape#(0xE1) ();

void Func0902 0x902 (var var0000, var var0001) {
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;

	var0002 = var0000->find_nearby(var0001, 0x0005, MASK_NONE);
	var0003 = var0000->get_item_frame();
	for (var0006 in var0002 with var0004 to var0005) {
		var0007 = var0006->get_item_frame();
		if (!(((var0007 > 0x000F) && (var0003 <= 0x000F)) || ((var0007 <= 0x000F) && (var0003 > 0x000F)))) {
			continue;
		}
		if (var0001 == 0x00F6) {
			var0006->Func00F6();
			return;
		}
		if (var0001 == 0x01D7) {
			var0006->Func01D7();
			return;
		}
		if (var0001 == 0x0204) {
			var0006->Func0204();
			return;
		}
		if (var0001 != 0x00E1) {
			continue;
		}
		var0006->Func00E1();
		break;
	}
}

extern void Func094A 0x94A (var var0000);

void Func0903 0x903 () {
	Func094A("@The door appears blocked.@");
}

void Func0904 0x904 (var var0000) {
	var0000->item_say("Locked");
}

void Func0905 0x905 (var var0000) {
	var0000->item_say("Magically Locked");
}

var Func0906 0x906 (var var0000) {
	return (var0000->get_item_frame() % 0x0004);
}

void Func0907 0x907 (var var0000, var var0001) {
	var var0002;
	var var0003;

	var0002 = var0000->get_item_frame();
	var0003 = var0002 % 0x0004;
	var0000->set_item_frame((var0002 - var0003) + var0001);
	if (var0001 == 0x0002) {
		var0000->item_say("Click");
	}
}

extern void Func0907 0x907 (var var0000, var var0001);

var Func0908 0x908 (var var0000, var var0001, var var0002, var var0003, var var0004, var var0005) {
	var var0006;
	var var0007;

	Func0907(var0000, var0002);
	var0000->set_item_shape(var0001);
	var0006 = var0000->get_object_position();
	var0006[0x0001] += var0003;
	var0006[0x0002] += var0004;
	if (var0000->set_last_created()) {
		var0007 = UI_update_last_created(var0006);
	}
	return true;
}

extern var Func0906 0x906 (var var0000);
extern var Func0908 0x908 (var var0000, var var0001, var var0002, var var0003, var var0004, var var0005);

void Func0909 0x909 (var var0000, var var0001, var var0002, var var0003, var var0004, var var0005, var var0006, var var0007, var var0008) {
	var var0009;
	var var000A;
	var var000B;
	var var000C;
	var var000D;
	var var000E;
	var var000F;
	var var0010;

	var0009 = var0000->get_object_position();
	var000A = var0009[var0003];
	var000B = var0000->find_nearby(var0001, 0x0007, MASK_NONE);
	var000C = false;
	for (var000F in var000B with var000D to var000E) {
		var0010 = var000F->get_object_position();
		var0010 = var0010[0x0003];
		if ((Func0906(var000F) == var0002) && ((var0009[var0003] == var000A) && (var0009[0x0003] == var0010))) {
			var000C = true;
			break;
		}
	}
	if (var000C) {
		var000C = Func0908(var000F, var0004, var0005, var0006, var0007, var0008);
	}
}

extern var Func0906 0x906 (var var0000);
extern var Func0908 0x908 (var var0000, var var0001, var var0002, var var0003, var var0004, var var0005);
extern void Func0903 0x903 ();

var Func090A 0x90A (var var0000) {
	var var0001;

	var0001 = Func0906(var0000);
	if (var0001 == 0x0001) {
		if (Func0908(var0000, 0x034D, 0x0000, 0x0000, 0x0000, 0x0007)) {
			UI_play_sound_effect2(0x0069, item);
		} else {
			Func0903();
			return false;
		}
	}
	if (var0001 == 0x0000) {
		if (Func0908(var0000, 0x034D, 0x0001, 0x0000, 0x0000, 0x0007)) {
			UI_play_sound_effect2(0x006A, item);
		} else {
			Func0903();
			return false;
		}
	}
	return true;
}

extern var Func0906 0x906 (var var0000);
extern var Func0908 0x908 (var var0000, var var0001, var var0002, var var0003, var var0004, var var0005);
extern void Func0903 0x903 ();

var Func090B 0x90B (var var0000) {
	var var0001;

	var0001 = Func0906(var0000);
	if (var0001 == 0x0001) {
		if (Func0908(var0000, 0x033C, 0x0000, 0x0000, 0x0000, 0x0007)) {
			UI_play_sound_effect2(0x0069, item);
		} else {
			Func0903();
			return false;
		}
	}
	if (var0001 == 0x0000) {
		if (Func0908(var0000, 0x033C, 0x0001, 0x0000, 0x0000, 0x0007)) {
			UI_play_sound_effect2(0x006A, item);
		} else {
			Func0903();
			return false;
		}
	}
	return true;
}

var Func090C 0x90C (var var0000, var var0001) {
	return var0000->find_direction(var0001);
}

void Func090D 0x90D (var var0000, var var0001, var var0002, var var0003, var var0004, var var0005, var var0006) {
	var var0007;
	var var0008;
	var var0009;
	var var000A;
	var var000B;
	var var000C;
	var var000D;
	var var000E;

	if (var0000->get_container()) {
		UI_flash_mouse(CURSOR_HAND);
		abort;
	}
	AVATAR->halt_scheduled();
	var0007 = var0000->get_object_position();
	if ((var0001 < 0x0000) && (UI_get_array_size(var0001) == 0x0001)) {
		var0008 = var0003;
		while (var0008 <= var0007[0x0003]) {
			var0009[0x0003] = var0007[0x0003] + var0008;
			var000A = -1 * var0001;
			while (var000A >= var0001) {
				var0009[0x0001] = var0007[0x0001] + var000A;
				var000B = -1 * var0002;
				while (var000B >= var0002) {
					var0009[0x0002] = var0007[0x0002] + var000B;
					if (UI_path_run_usecode(var0009, var0004, var0005, var0006)) {
						return;
					}
					var000B -= 0x0001;
				}
				var000A -= 0x0001;
			}
			var0008 += 0x0001;
		}
	} else {
		var000C = 0x0000;
		for (var000A in var0001 with var000D to var000E) {
			var000C += 0x0001;
			var000B = var0002[var000C];
			var0008 = var0003[var000C];
			var0009[0x0001] = var0007[0x0001] + var000A;
			var0009[0x0002] = var0007[0x0002] + var000B;
			if (var0003 < -1) {
				var0008 = 0x0000;
				while (var0008 >= var0003) {
					var0009[0x0003] = var0007[0x0003] + var0008;
					if (UI_path_run_usecode(var0009, var0004, var0005, var0006)) {
						return;
					}
					var0008 -= 0x0001;
				}
			} else {
				if (var0003 == -1) {
					var0009[0x0003] = var0007[0x0003];
				} else {
					var0009[0x0003] = var0007[0x0003] + var0008;
				}
				if (UI_path_run_usecode(var0009, var0004, var0005, var0006)) {
					return;
				}
			}
		}
		UI_flash_mouse(CURSOR_HAND);
		abort;
	}
}

void Func090E 0x90E (var var0000, var var0001, var var0002, var var0003, var var0004, var var0005, var var0006, var var0007, var var0008) {
	var var0009;

	var0009 = var0001->get_object_position();
	var0000->si_path_run_usecode(var0009, var0007, var0006, var0005, var0008);
}

var Func090F 0x90F (var var0000, var var0001, var var0002, var var0003) {
	var var0004;
	var var0005;
	var var0006;
	var var0007;
	var var0008;
	var var0009;
	var var000A;
	var var000B;

	var0004 = var0000->get_object_position();
	if ((var0001 < 0x0000) && (UI_get_array_size(var0001) == 0x0001)) {
		var0005 = var0003;
		while (var0005 <= var0004[0x0003]) {
			var0006[0x0003] = var0004[0x0003] + var0005;
			var0007 = -1 * var0001;
			while (var0007 >= var0001) {
				var0006[0x0001] = var0004[0x0001] + var0007;
				var0008 = -1 * var0002;
				while (var0008 >= var0002) {
					var0006[0x0002] = var0004[0x0002] + var0008;
					if (UI_can_avatar_reach_pos(var0006)) {
						return var0006;
					}
					var0008 -= 0x0001;
				}
				var0007 -= 0x0001;
			}
			var0005 += 0x0001;
		}
	} else {
		var0009 = 0x0000;
		for (var0007 in var0001 with var000A to var000B) {
			var0009 += 0x0001;
			var0008 = var0002[var0009];
			var0005 = var0003[var0009];
			var0006[0x0001] = var0004[0x0001] + var0007;
			var0006[0x0002] = var0004[0x0002] + var0008;
			if (var0003 < -1) {
				var0005 = 0x0000;
				while (var0005 >= var0003) {
					var0006[0x0003] = var0004[0x0003] + var0005;
					if (UI_can_avatar_reach_pos(var0006)) {
						return var0006;
					}
					var0005 -= 0x0001;
				}
			} else {
				if (var0003 == -1) {
					var0006[0x0003] = var0004[0x0003];
				} else {
					var0006[0x0003] = var0004[0x0003] + var0005;
				}
				if (UI_can_avatar_reach_pos(var0006)) {
					return var0006;
				}
			}
		}
		return false;
		// Dead code
		abort;
	}
	return 0;
}

extern var Func0913 0x913 (var var0000, var var0001, var var0002, var var0003);
extern var Func0914 0x914 (var var0000, var var0001, var var0002);

var Func0910 0x910 (var var0000) {
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;
	var var0008;
	var var0009;
	var var000A;

	var0001 = [-3,  0,  1,  0];
	var0002 = [ 0, -3,  0,  1];
	var0003 = [0x0096, 0x0096, 0x030D, 0x030D];
	var0004 = [0x02A8];
	var0005 = var0000->get_item_shape();
	var0006 = var0000->get_item_frame();
	var0007 = var0000->get_object_position();
	var0008 = var0003[(var0006 + 0x0001)];
	var0009[0x0001] = var0001[(var0006 + 0x0001)];
	var0009[0x0002] = var0002[(var0006 + 0x0001)];
	var0009[0x0003] = 0x0001;
	if (var0005 == var0008) {
		if (Func0913(var0000, var0007, -3, var0004)) {
			return false;
		}
		var0007 = Func0914(var0007, var0009, var0005);
	} else {
		var0007 = Func0914(var0007, var0009, var0005);
		if (Func0913(var0000, var0007, -3, var0004)) {
			return false;
		}
	}
	if (var0005 == 0x0096) {
		var0000->set_item_shape(0x030D);
	} else {
		var0000->set_item_shape(0x0096);
	}
	var000A = var0000->set_last_created();
	if (var000A) {
		var000A = UI_update_last_created(var0007);
		return true;
	}
	return false;
}

var Func0911 0x911 (var var0000, var var0001, var var0002) {
	var var0003;

	var0003 = 0x0000;
	do {
		var0003 += 0x0001;
		var0000[var0003] += var0001[var0003];
	} while (!(var0003 == var0002));
	return var0000;
}

var Func0912 0x912 (var var0000, var var0001) {
	var var0002;

	var0002 = 0x0000;
	do {
		var0002 += 0x0001;
		var0000[var0002] *= -1;
	} while (!(var0002 == var0001));
	return var0000;
}

extern var Func097E 0x97E (var var0000);

var Func0913 0x913 (var var0000, var var0001, var var0002, var var0003) {
	var var0004;
	var var0005;
	var var0006;
	var var0007;
	var var0008;

	var0004 = var0000->find_nearby(SHAPE_ANY, Func097E(var0002), MASK_INVISIBLE);
	for (var0007 in var0004 with var0005 to var0006) {
		var0008 = var0007->get_object_position();
		if ((var0008[0x0001] <= var0001[0x0001]) && ((var0008[0x0001] >= (var0001[0x0001] + var0002)) && ((var0008[0x0002] <= var0001[0x0002]) && ((var0008[0x0002] >= (var0001[0x0002] + var0002)) && ((var0008[0x0003] <= 0x0002) && ((!(var0007 == var0000)) && ((!(var0007->get_item_shape() in var0003)) && var0000->get_item_flag(IS_SOLID)))))))) {
			return true;
		}
	}
	return false;
}

extern var Func0912 0x912 (var var0000, var var0001);
extern var Func0911 0x911 (var var0000, var var0001, var var0002);

var Func0914 0x914 (var var0000, var var0001, var var0002) {
	if (var0002 == 0x030D) {
		var0001 = Func0912(var0001, 0x0003);
		var0000 = Func0911(var0000, var0001, 0x0003);
	}
	if (var0002 == 0x0096) {
		var0000 = Func0911(var0000, var0001, 0x0003);
	}
	return var0000;
}

void Func0915 0x915 (var var0000) {
	remove_item();
}

extern void Func0922 0x922 (var var0000);
extern var Func0994 0x994 ();

void Func0916 0x916 () {
	if (GWENNO->get_item_flag(SI_ZOMBIE) && gflags[FREED_GWENNOS_BODY]) {
		Func0922(0x000F);
		abort;
	}
	if ((Func0994() == 0x0017) && (!VASCULIO->get_item_flag(DEAD))) {
		Func0922(0x000D);
		abort;
	}
	if ((Func0994() == 0x001F) && (!gflags[BATLIN_FLED_SHAMINOS_KEEP])) {
		Func0922(0x0002);
		abort;
	}
	if ((Func0994() == 0x0018) && gflags[SERPENT_GWANI_HORN_SPEECH]) {
		Func0922(0x0014);
		abort;
	}
	if (!gflags[BALANCE_ASKS_WHO_AVATAR_IS]) {
		Func0922(0x0010);
		abort;
	}
	if (gflags[BALANCE_ASKS_WHO_AVATAR_IS] && (!gflags[BALANCE_SAY_MET_BEFORE])) {
		Func0922(0x0011);
		abort;
	}
	if (gflags[BALANCE_SAY_MET_BEFORE] && (!gflags[DREAM_REALM_COMPLETE])) {
		Func0922(0x0012);
		abort;
	}
	if (gflags[DREAM_REALM_COMPLETE] && ((!gflags[BATLIN_FLED_SHAMINOS_KEEP]) && (!gflags[BANES_RELEASED]))) {
		if (UI_get_random(0x0003) == 0x0001) {
			Func0922(0x0013);
			abort;
		}
		if (UI_get_random(0x0002) == 0x0001) {
			Func0922(0x0000);
			abort;
		}
		Func0922(0x000C);
		abort;
	}
	if (gflags[BATLIN_FLED_SHAMINOS_KEEP] && (!gflags[DID_SPINEBREAKER_VISION])) {
		Func0922(0x000A);
		abort;
	}
	if (gflags[BANES_RELEASED] && (!gflags[TOLD_TO_FREE_GWENNO])) {
		Func0922(0x0014);
		abort;
	}
	if (gflags[TOLD_TO_FREE_GWENNO] && (!gflags[FREED_GWENNOS_BODY])) {
		Func0922(0x000B);
		abort;
	}
	if (gflags[TOLD_TO_PLACE_ASHES] && (!gflags[XENKA_WILL_COME])) {
		Func0922(0x000E);
		abort;
	}
	if (gflags[MISSING_BLACKROCK_SERPENTS] && (!gflags[AVATAR_IS_WORTHY])) {
		Func0922(0x0006);
		abort;
	}
	if (gflags[MISSING_HIEROPHANT_ARTIFACTS] && (!gflags[AVATAR_IS_WORTHY])) {
		Func0922(0x0005);
		abort;
	}
	if (gflags[TOLD_PLACE_EYES] && (!gflags[TOLD_TO_SLAY_STATUE])) {
		Func0922(0x0008);
		abort;
	}
	if (gflags[TOLD_TO_SLAY_STATUE]) {
		Func0922(0x0009);
		abort;
	}
	if (UI_get_random(0x0002) == 0x0001) {
		Func0922(0x0000);
		abort;
	}
	Func0922(0x000C);
	abort;
}

void Func0917 0x917 (var var0000, var var0001) {
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;
	var var0008;
	var var0009;

	if (var0001 == 0x0001) {
		var0002 = -4;
		var0003 = 0x007C;
		var0004 = var0000[0x0001]->find_nearby(0x00C7, 0x0019, MASK_NONE);
		var0005 = script var0004 {
			music 12;
		};
	}
	if (var0001 == 0x0000) {
		var0002 =  4;
		var0003 = 0x0034;
	}
	for (var0008 in var0000 with var0006 to var0007) {
		var0009 = var0008->get_item_frame_rot();
		var0008->set_item_frame_rot(var0009 + var0002);
	}
	UI_play_sound_effect(var0003);
}

extern var Func0910 0x910 (var var0000);
extern void Func094A 0x94A (var var0000);
extern void Func0917 0x917 (var var0000, var var0001);

void Func0918 0x918 (var var0000) {
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;

	gflags[CAN_SAIL_SHIPS] = false;
	var0001 = var0000->get_object_position();
	var0001 &= var0000->get_item_quality();
	var0001 &= FRAME_ANY;
	var0002 = var0001->find_nearby(0x0096, 0x000C, MASK_NONE);
	for (var0005 in var0002 with var0003 to var0004) {
		if (!Func0910(var0005)) {
			Func094A("@One of the gangplanks seems to be blocked. It must be lowered to sail.@");
			return;
		}
	}
	var0006 = var0001->find_nearby(0x00FB, 0x0012, MASK_NONE);
	Func0917(var0006, 0x0001);
	AVATAR->clear_item_flag(ACTIVE_SAILOR);
	var0000->set_item_flag(ON_MOVING_BARGE);
	AVATAR->get_barge()->set_item_flag(ACTIVE_BARGE);
}

extern void Func09AD 0x9AD (var var0000);
extern void Func097F 0x97F (var var0000, var var0001, var var0002);

void Func0919 0x919 (var var0000) {
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;

	var0001 = [DBEYER, HENCH1, HENCH2, HENCH3];
	if (HENCH3->get_npc_id() == 0x0000) {
		for (var0004 in var0001 with var0002 to var0003) {
			var0004->clear_item_say();
			Func09AD(var0004);
		}
		HENCH3->set_npc_id(0x0001);
	} else if (HENCH3->get_npc_id() == 0x0001) {
		Func097F(DBEYER, "@Master!@", 0x0000);
		Func097F(DBEYER, "@Come quickly!@", 0x0007);
		var0005 = [0x0752, 0x03E5, 0x0006];
		var0006 = UI_create_new_object2(0x013E, var0005);
		if (var0006) {
			var0006->set_alignment(NEUTRAL);
			var0006->set_schedule_type(PATROL);
			var0006->set_item_flag(SI_TOURNAMENT);
			HENCH3->set_npc_id(0x0002);
			var0007 = var0006->add_cont_items(0x0001, 0x0321, QUALITY_ANY, 0x0000, 0x0012);
			var0007 = var0006->add_cont_items(0x0001, 0x0358, 0x0003, FRAME_ANY, 0x0012);
			var0007 = var0006->add_cont_items(0x0001, 0x0327, 0x0003, FRAME_ANY, 0x0012);
			var0007 = var0006->add_cont_items(0x0001, 0x011F, 0x0001, FRAME_ANY, 0x0012);
			var0007 = var0006->add_cont_items(0x0001, 0x02DB, 0x0006, FRAME_ANY, 0x0012);
		}
	}
}

void Func091A 0x91A (var var0000) {
	var var0001;
	var var0002;
	var var0003;

	if ((UI_die_roll(0x0001, 0x0007) == 0x0007) && ((UI_game_hour() < 0x0007) && (gflags[BANES_RELEASED] == true))) {
		var0001 = UI_click_on_item();
	} else {
		abort;
	}
	if (var0001->is_npc()) {
		UI_play_sound_effect(0x0077);
		var0002 = var0001->get_npc_number();
		if (var0002->get_item_flag(IN_PARTY)) {
			var0002->show_npc_face0(0x0000);
			say("\"I am the Lizard King. I can do anything.\"");
			UI_remove_npc_face0();
			if (var0002 == AVATAR) {
				var0002->set_item_flag(CONFUSED);
			}
			var0002->set_item_flag(CAN_FLY);
			var0003 = script var0002 after 20 ticks {
				nohalt;
				call Func03C0;
			};
		}
	}
}

void Func091B 0x91B () {
	if (event == DOUBLECLICK) {
		BRENDANN->show_npc_face0(0x0000);
		say("\"Avatar! Release thou me from this vile cell!\"");
		say("\"Some fell sorcery brought me here and nothing I do can unlock the door. Release me and together we shall find the key to this mystery!\"");
		UI_remove_npc_face0();
	}
}

void Func091C 0x91C () {
	if (event == DOUBLECLICK) {
		LUCILLA->show_npc_face0(0x0000);
		say("\"Avatar! Save me!\"");
		say("\"Some fell sorcery brought me here and nothing I do can unlock the door. Release me, I beg thee! -- Before the fiend that did this comes for me!\"");
		UI_remove_npc_face0();
	}
}

extern void Func010E shape#(0x10E) ();

void Func091D 0x91D () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;

	var0000 = AVATAR->find_nearby(0x0210, 0x0028, MASK_NPC2);
	if (var0000) {
		var0001 = var0000->get_object_position();
		if ((var0001[0x0001] >= 0x0432) && ((var0001[0x0001] <= 0x0439) && ((var0001[0x0002] >= 0x03E4) && ((var0001[0x0002] <= 0x03EB) && (var0001[0x0003] == 0x0000))))) {
			var0000->set_alignment(EVIL);
			var0000->set_schedule_type(IN_COMBAT);
			AVATAR->set_oppressor(var0000);
			UI_sprite_effect(ANIMATION_GREEN_BUBBLES, (var0001[0x0001] - 0x0002), (var0001[0x0002] - 0x0002), 0x0000, 0x0000, 0x0000, LOOP_ONCE);
			UI_play_sound_effect(0x0082);
			var0000->clear_item_say();
			var0000->halt_scheduled();
			var0002 = script var0000 after 0 ticks {
				nohalt;
				say "@Thank thee!@";
				wait 10;
				say "@Now I feed!!@";
			};
			var0002 = var0000->find_nearby(0x0113, 0x0000, MASK_EGG);
			if (var0002) {
				var0002->remove_item();
			}
			var0003 = var0000->find_nearest(0x010E, 0x0005);
			if (var0003) {
				var0003->set_item_frame(0x0004);
				event = DOUBLECLICK;
				var0003->Func010E();
			}
		}
	}
}

extern void Func0921 0x921 (var var0000);

void Func091E 0x91E (var var0000, var var0001) {
	var var0002;
	var var0003;

	Func0921(var0000);
	var0002 = var0000->get_item_frame();
	if (var0002 <= 0x0004) {
		var0002 = 0x0004;
	} else if (var0002 >= 0x000A) {
		var0002 = 0x000E;
	} else {
		var0002 = 0x0009;
	}
	var0003 = script var0000 {
		frame var0002;
		repeat 3 {
			previous frame cycle;
			sfx 89;
		};
		call var0001;
		sfx 88;
	};
}

void Func091F 0x91F (var var0000, var var0001) {
	var var0002;

	var0002 = script var0000 {
		call var0001;
	};
}

var Func0920 0x920 () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;
	var var0008;
	var var0009;
	var var000A;
	var var000B;
	var var000C;
	var var000D;
	var var000E;
	var var000F;
	var var0010;
	var var0011;

	var0000 = AVATAR->find_nearby(0x0114, 0x0019, MASK_NONE) & AVATAR->find_nearby(0x0115, 0x0019, MASK_NONE);
	var0001 = AVATAR->find_nearby(0x010F, 0x0019, MASK_NONE) & AVATAR->find_nearby(0x0110, 0x0019, MASK_NONE);
	for (var0004 in var0001 with var0002 to var0003) {
		var0005 = var0004->get_lift();
		if (var0005 == 0x0000) {
			var0006 = script var0004 {
				repeat 3 {
					sfx 89;
					call Func0607;
				};
			};
			for (var0009 in var0000 with var0007 to var0008) {
				var0006 = script var0009 {
					frame 1;
					frame 2;
					frame 3;
				};
			}
		}
		if (var0005 == 0x0001) {
			var0006 = script var0004 {
				nohalt;
				repeat 2 {
					sfx 89;
					call Func0607;
				};
			};
			for (var0009 in var0000 with var000A to var000B) {
				var0006 = script var0009 {
					frame 2;
					frame 3;
				};
			}
		}
		if (var0005 == 0x0002) {
			var0006 = script var0004 {
				repeat 1 {
					sfx 89;
					call Func0607;
				};
			};
			for (var0009 in var0000 with var000C to var000D) {
				var0006 = script var0009 {
					frame 3;
				};
			}
		}
		if (var0005 == 0x0003) {
			var0006 = script var0004 {
				sfx 89;
				call Func0607;
			};
			for (var0009 in var0000 with var000E to var000F) {
				var0006 = script var0009 {
					frame 3;
				};
			}
		}
		if (var0005 == 0x0004) {
			var0006 = script var0004 {
				repeat 3 {
					sfx 89;
					call Func0609;
				};
			};
		}
		for (var0009 in var0000 with var0010 to var0011) {
			var0006 = script var0009 {
				frame 2;
				frame 1;
				frame 0;
			};
		}
	}
	return true;
}

void Func0921 0x921 (var var0000) {
	var var0001;
	var var0002;

	var0001 = var0000->get_item_quality();
	if (var0001 == 0x005B) {
		if (!gflags[KNOW_SKULLCRUSHER_PASSWORD]) {
			var0000->obj_sprite_effect(ANIMATION_POOF, 0x0002, 0x0004, 0x0000, 0x0000, 0x0000, LOOP_ONCE);
			var0002 = script var0000 after 8 ticks {
				nohalt;
				call Func0701;
			};
			UI_play_sound_effect(0x0027);
			abort;
		}
		AVATAR->item_say("@Isal Sal Cra Gaas Iskar!@");
		var0000->obj_sprite_effect(ANIMATION_PURPLE_BUBBLES, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, LOOP_ONCE);
		UI_play_music(0x0035, var0000);
	}
}

extern void Func0614 object#(0x614) ();

void Func0922 0x922 (var var0000) {
	if (!UI_start_speech(var0000)) {
		0x0000->Func0614();
	} else {
		UI_close_gumps();
	}
}

extern var Func0942 0x942 (var var0000);

var Func0923 0x923 () {
	if (!Func0942(IOLO)) {
		return false;
	}
	if (!Func0942(SHAMINO)) {
		return false;
	}
	if (!Func0942(DUPRE)) {
		return false;
	}
	if (!IOLO->get_item_flag(IN_PARTY)) {
		return false;
	}
	if (!SHAMINO->get_item_flag(IN_PARTY)) {
		return false;
	}
	if (!DUPRE->get_item_flag(IN_PARTY)) {
		return false;
	}
	if (IOLO->get_item_flag(DEAD)) {
		return false;
	}
	if (SHAMINO->get_item_flag(DEAD)) {
		return false;
	}
	if (DUPRE->get_item_flag(DEAD)) {
		return false;
	}
	return true;
}

extern void Func091E 0x91E (var var0000, var var0001);
extern void Func091F 0x91F (var var0000, var var0001);
extern void Func012F shape#(0x12F) ();
extern void Func036C shape#(0x36C) ();
extern void Func03A7 shape#(0x3A7) ();
extern void Func03A8 shape#(0x3A8) ();

void Func0924 0x924 (var var0000, var var0001) {
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;
	var var0008;
	var var0009;
	var var000A;

	var0002 = var0000->get_item_quality();
	var0003 = [];
	if ((var0001 == 0x0001) || (var0001 == SHAPE_ANY)) {
		var0003 &= UI_find_nearby_avatar(0x012F);
		var0003 &= UI_find_nearby_avatar(0x036C);
	}
	if ((var0001 == 0x0000) || (var0001 == SHAPE_ANY)) {
		var0003 &= UI_find_nearby_avatar(0x03A8);
		var0003 &= UI_find_nearby_avatar(0x03A7);
	}
	if (var0003) {
		for (var0006 in var0003 with var0004 to var0005) {
			if (var0006->get_item_quality() == var0002) {
				var0007 = var0006->get_item_frame();
				var0008 = var0006->get_item_shape();
				if (var0008 == 0x012F) {
					var0008 = Func03A8;
					Func091E(var0006, var0008);
				} else if (var0008 == 0x036C) {
					var0008 = Func03A7;
					Func091E(var0006, var0008);
				} else if (var0008 == 0x03A8) {
					var0008 = Func012F;
					Func091F(var0006, var0008);
				} else if (var0008 == 0x03A7) {
					var0008 = Func036C;
					Func091F(var0006, var0008);
				}
			}
		}
		if (var0002 == 0x007B) {
			var0009 = AVATAR->find_nearby(0x037C, 0x0019, MASK_NONE);
			if (var0009) {
				AVATAR->set_item_flag(DONT_MOVE);
				var000A = var0009->set_item_quality(0x0001);
				var000A = script var0009 after 10 ticks {
					nohalt;
					call Func0780;
				};
			}
		}
	}
}

void Func0925 0x925 () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;
	var var0008;
	var var0009;
	var var000A;
	var var000B;
	var var000C;
	var var000D;

	var0000 = find_nearby(0x02CE, 0x000A, MASK_NONE);
	var0001 = var0000->find_nearby(0x034A, 0x0003, MASK_NONE);
	var0002 = [0x0000, 0x0000, 0x0000];
	for (var0005 in var0001 with var0003 to var0004) {
		if (var0005->get_item_frame() == 0x000B) {
			var0002[0x0001] += var0005->get_item_quantity(0x0000);
			var0006 = true;
		}
		if (var0005->get_item_frame() == 0x000C) {
			var0002[0x0002] += var0005->get_item_quantity(0x0000);
			var0007 = true;
		}
		if (var0005->get_item_frame() == 0x000D) {
			var0002[0x0003] += var0005->get_item_quantity(0x0000);
			var0008 = true;
		}
		var0005->remove_item();
	}
	if (var0006 && (var0007 && var0008)) {
		var0009 = var0002[0x0001];
		if (var0002[0x0002] < var0009) {
			var0009 = var0002[0x0002];
		}
		if (var0002[0x0003] < var0009) {
			var0009 = var0002[0x0003];
		}
		var000A = var0000->get_object_position();
		var000A[0x0003] = 0x0002;
		var000B = UI_create_new_object(0x034A);
		if (var000B) {
			var000B->set_item_frame(0x000E);
			var000C = var000B->set_item_quantity(var0009);
			var000C = UI_update_last_created(var000A);
		}
		var000D = UI_create_new_object(0x0231);
		if (var000D) {
			var000D->set_item_frame(0x0000);
			var000C = UI_update_last_created(var000A);
		}
		var000C = script var000D after 25 ticks {
			nohalt;
			remove;
		};
	}
	var0006 = false;
	var0007 = false;
	var0008 = false;
	abort;
}

extern void Func0927 0x927 ();
extern void Func097F 0x97F (var var0000, var var0001, var var0002);
extern void Func09AC 0x9AC (var var0000, var var0001, var var0002, var var0003);
extern var Func0908 0x908 (var var0000, var var0001, var var0002, var var0003, var var0004, var var0005);
extern void Func0909 0x909 (var var0000, var var0001, var var0002, var var0003, var var0004, var var0005, var var0006, var var0007, var var0008);
extern void Func0903 0x903 ();

void Func0926 0x926 (var var0000) {
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;
	var var0008;
	var var0009;
	var var000A;
	var var000B;

	if (var0000 == 0x0017) {
		Func0927();
	}
	if (var0000 == 0x0018) {
		var0001 = [SEX_01, SEX_02, SEX_03, SEX_04, SEX_05];
		var0002 = "@Thank thee!@" & ("@Bless thee!@" & ("@We are saved!@" & "@Praise the Hero!@"));
		for (var0005 in var0001 with var0003 to var0004) {
			var0005->clear_item_say();
			Func097F(var0005, var0002[UI_get_random(UI_get_array_size(var0002))], UI_get_random(0x000A));
			Func09AC(var0005, -1, 0, DANCE);
		}
		gflags[PASSED_CLONE_SHAMINO_TEST] = true;
		var0006 = script AVATAR after 15 ticks {
			nohalt;
			call Func07F7;
		};
		abort;
	}
	if ((var0000 == 0x003D) && (gflags[READ_BODY_TRANSFERENCE_BOOK] && (!AVATAR->get_item_flag(POLYMORPH)))) {
		var0006 = PETRA->get_object_position();
		if ((var0006[0x0001] == 0x06E3) && ((var0006[0x0002] == 0x0273) && (var0006[0x0003] == 0x0001))) {
			var0007 = UI_create_new_object(0x025F);
			if (var0007) {
				var0007->set_item_frame(0x0006);
				var0006 = UI_update_last_created([0x06EC, 0x0273, 0x0001]);
				var0006 = script var0007 {
					call Func033D;
				};
			}
		}
	}
	if ((var0000 == 0x0055) || (var0000 == 0x0059)) {
		var0008 = find_nearby(0x0178, 0x001E, MASK_NONE);
		for (var000B in var0008 with var0009 to var000A) {
			if (var000B->get_item_quality() == var0000) {
				if (Func0908(var000B, 0x010E, 0x0001, 0, 0, 0x0007)) {
					Func0909(var000B, 0x01B1, 0x0000, 0x0002, 0x01B0, 0x0001, -3, 0, 0x0007);
					UI_play_sound_effect2(0x0020, var000B);
				} else {
					Func0903();
				}
			}
		}
	}
}

extern var Func09A0 0x9A0 (var var0000, var var0001);
extern void Func097F 0x97F (var var0000, var var0001, var var0002);

void Func0927 0x927 () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;
	var var0008;

	UI_play_music(0x001C, Func09A0(0x0005, 0x0001));
	var0000 = [SEX_01, SEX_02, SEX_03, SEX_04, SEX_05];
	var0001 = ["@Ohh! Yes!@", "@Most pleasant!@", "@Oh, my!@", "@Do thou that again!@", "@Oh, baby...@"];
	for (var0004 in var0000 with var0002 to var0003) {
		var0005 = UI_die_roll(0x0001, 0x0005);
		Func097F(var0004, var0001[var0005], UI_get_random(0x000A));
	}
	if (gflags[CLONE_SHAMINO_PRESSED_SEX_BUTTON] == true) {
		var0006 = script CLONE_SHAMINO after 25 ticks {
			call Func04B3;
		};
	} else if (UI_is_pc_female()) {
		SEX_05->clear_item_say();
		Func097F(SEX_05, "@I can't resist...@", 0x0000);
		var0007 = find_nearby(0x0178, 0x000A, MASK_NONE);
		if (var0007) {
			var0008 = var0007->get_object_position();
			// BUG: This should use PATH_SUCCESS instead of BG_PATH_SUCCESS.
			SEX_05->si_path_run_usecode([(var0008[0x0001] + 0x0001), var0008[0x0002], var0008[0x0003]], BG_PATH_SUCCESS, SEX_05->get_npc_object(), Func04B3, true);
		}
	} else {
		SEX_03->clear_item_say();
		Func097F(SEX_03, "@I can't resist...@", 0x0000);
		var0007 = find_nearby(0x0178, 0x000A, MASK_NONE);
		if (var0007) {
			var0008 = var0007->get_object_position();
			// BUG: This should use PATH_SUCCESS instead of BG_PATH_SUCCESS.
			SEX_03->si_path_run_usecode([(var0008[0x0001] + 0x0001), var0008[0x0002], var0008[0x0003]], BG_PATH_SUCCESS, SEX_03->get_npc_object(), Func04B3, true);
		}
	}
	abort;
}

extern void Func0907 0x907 (var var0000, var var0001);
extern var Func090B 0x90B (var var0000);
extern void Func0929 0x929 ();
extern var Func0906 0x906 (var var0000);

void Func0928 0x928 (var var0000) {
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;
	var var0008;
	var var0009;
	var var000A;

	if (var0000 == 0x0065) {
		var0001 = find_nearby(0x034D, 0x000A, MASK_NONE);
		if (var0001) {
			Func0907(var0001[0x0001], 0x0000);
			var0001 = Func090B(var0001[0x0001]);
		}
	}
	if ((var0000 > 0x0077) && (var0000 < 0x0097)) {
		Func0929();
	}
	if (var0000 == 0x006F) {
		var0002 = find_nearby(0x0300, 0x001E, MASK_NONE);
		for (var0005 in var0002 with var0003 to var0004) {
			var0006 = var0005->get_object_position();
			UI_sprite_effect(ANIMATION_FIREWORKS, var0006[0x0001], var0006[0x0002], 0x0000, 0x0000, 0x0000, LOOP_ONCE);
			var0005->remove_item();
		}
	}
	if (var0000 == 0x0070) {
		var0002 = AVATAR->find_nearby(0x010E, 0x000A, MASK_ALL_UNSEEN);
		var0002 &= AVATAR->find_nearby(0x0178, 0x000A, MASK_ALL_UNSEEN);
		var0002 &= AVATAR->find_nearby(0x01B1, 0x000A, MASK_ALL_UNSEEN);
		var0002 &= AVATAR->find_nearby(0x01B0, 0x000A, MASK_ALL_UNSEEN);
		var0002 &= AVATAR->find_nearby(0x033C, 0x000A, MASK_ALL_UNSEEN);
		var0002 &= AVATAR->find_nearby(0x034D, 0x000A, MASK_ALL_UNSEEN);
		var0007 = var0002[0x0001];
		for (var0005 in var0002 with var0008 to var0009) {
			if (get_distance(var0005) < get_distance(var0007)) {
				var0007 = var0005;
			}
		}
		var000A = Func0906(var0007);
		if (var000A == 0x0002) {
			Func0907(var0007, 0x0000);
		}
		if (var000A == 0x0000) {
			Func0907(var0007, 0x0002);
		}
	}
}

extern var Func089D 0x89D (var var0000);
extern void Func0924 0x924 (var var0000, var var0001);

void Func0929 0x929 () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;

	var0000 = find_nearby(0x0366, 0x000F, MASK_NONE);
	var0001 = find_nearby(0x0203, 0x000F, MASK_NONE);
	var0000 &= var0001;
	var0001 = [];
	var0002 = get_item_quality();
	for (var0005 in var0000 with var0003 to var0004) {
		if (var0005->get_item_quality() == var0002) {
			var0001 &= var0005;
		}
	}
	var0006 = Func089D(var0001);
	Func0924(item, SHAPE_ANY);
}

void Func092A 0x92A (var var0000) {
	var var0001;
	var var0002;

	if (var0000 == 0x00C9) {
		var0001 = [0x007B, 0x06BB, 0x0000];
	}
	if (var0000 == 0x00CA) {
		var0001 = [0x0087, 0x06BB, 0x0000];
	}
	if (var0000 == 0x00CB) {
		var0001 = [0x0093, 0x06BB, 0x0000];
	}
	if (var0000 == 0x00CC) {
		var0001 = [0x007B, 0x06D4, 0x0000];
	}
	if (var0000 == 0x00CD) {
		var0001 = [0x0087, 0x06D4, 0x0000];
	}
	if (var0000 == 0x00CE) {
		var0001 = [0x0093, 0x06D4, 0x0000];
	}
	if (var0000 == 0x00CF) {
		var0001 = [0x0095, 0x06C7, 0x0000];
	}
	if (var0000 == 0x00D3) {
		var0001 = [0x0512, 0x08A0, 0x0006];
	}
	if (var0000 == 0x00D4) {
		var0001 = [0x0501, 0x0892, 0x0006];
	}
	if (var0000 == 0x00D5) {
		var0001 = [0x0504, 0x08A2, 0x0006];
	}
	if (var0000 == 0x00D6) {
		var0001 = [0x04F4, 0x08B7, 0x0006];
	}
	if (var0000 == 0x00D7) {
		var0001 = [0x04F2, 0x08C7, 0x0006];
	}
	if (var0000 == 0x00D8) {
		var0001 = [0x0502, 0x08C7, 0x0006];
	}
	if (var0000 == 0x00D9) {
		var0001 = [0x0512, 0x08C7, 0x0006];
	}
	UI_fade_palette(0x000C, 0x0001, 0x0000);
	PARTY->move_object(var0001);
	var0002 = script AVATAR after 3 ticks {
		nohalt;
		call Func0636;
	};
}

extern var Func092C 0x92C (var var0000);
extern var Func097D 0x97D (var var0000, var var0001, var var0002, var var0003, var var0004);

void Func092B 0x92B () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;

	var0000 = Func092C(0x0001);
	var0001 = Func092C(0x0002);
	var0002 = Func092C(0x0003);
	var0003 = 0x0001;
	var0004 = UI_get_array_size(var0000) + 0x0001;
	while (var0003 < var0004) {
		if (Func097D(PARTY, 0x0001, var0000[var0003], var0001[var0003], var0002[var0003])) {
			if (var0000[var0003] == 0x0108) {
				gflags[STORM_PINECONE] = true;
			}
			if (var0000[var0003] == 0x0241) {
				gflags[STORM_BLUE_EGG] = true;
			}
			if (var0000[var0003] == 0x034A) {
				gflags[STORM_RUDDY_ROCK] = true;
			}
			if (var0000[var0003] == 0x02ED) {
				gflags[STORM_LAB_APPARATUS] = true;
			}
			if (var0000[var0003] == 0x010B) {
				gflags[STORM_PUMICE] = true;
			}
			if (var0000[var0003] == 0x011D) {
				gflags[STORM_GOBLIN_BRUSH] = true;
			}
			if (var0000[var0003] == 0x0377) {
				gflags[STORM_WEDDING_RING] = true;
			}
			if (var0000[var0003] == 0x02A5) {
				gflags[STORM_PINECONE] = true;
			}
			if (var0000[var0003] == 0x00F4) {
				gflags[STORM_BEAR_SKULL] = true;
			}
			if (var0000[var0003] == 0x02D9) {
				gflags[STORM_MONITOR_SHIELD] = true;
			}
			if (var0000[var0003] == 0x0268) {
				gflags[STORM_ICEWINE] = true;
			}
			if (var0000[var0003] == 0x0392) {
				gflags[STORM_URN] = true;
			}
			if (var0000[var0003] == 0x024B) {
				gflags[STORM_SLIPPERS] = true;
			}
			if (var0000[var0003] == 0x03B4) {
				gflags[STORM_FILARI] = true;
			}
			if (var0000[var0003] == 0x031A) {
				gflags[STORM_SEVERED_HAND] = true;
			}
			if (var0000[var0003] == 0x03EC) {
				gflags[STORM_FUR_CAP] = true;
			}
			if (var0000[var0003] == 0x01A3) {
				gflags[STORM_BREAST_PLATE] = true;
			}
		}
		var0003 += 0x0001;
	}
}

var Func092C 0x92C (var var0000) {
	var var0001;
	var var0002;
	var var0003;

	if (var0000 == 0x0001) {
		var0001 = [0x0108, 0x0241, 0x034A, 0x02ED, 0x010B, 0x011D, 0x0377, 0x02A5, 0x0179, 0x00F4, 0x02D9, 0x0268, 0x0392, 0x024B, 0x03B4, 0x031A, 0x03EC, 0x01A3];
		return var0001;
	}
	if (var0000 == 0x0002) {
		var0002 = [false, false, false, false, false, false, false, false, false, false, false, false, 0x00FF, false, 0x0014, false, false, false];
		return var0002;
	}
	if (var0000 == 0x0003) {
		var0003 = [0x0000, 0x0003, 0x000F, 0x0001, 0x0000, 0x0006, 0x0000, 0x0000, 0x0015, 0x0000, 0x0000, 0x0010, 0x0000, 0x0005, 0x0000, 0x0000, 0x0004, 0x0000];
		return var0003;
	}
	return 0;
}

void Func092D 0x92D (var var0000, var var0001, var var0002) {
	if ((var0002 == 0x0001) || (var0002 == 0x0002)) {
		var0000->set_item_shape(var0001);
		var0000->halt_scheduled();
		UI_play_sound_effect(0x0021);
		set_light(true);
	}
	if (var0002 == 0x000A) {
		var0000->set_item_shape(var0001);
		var0000->halt_scheduled();
		UI_play_sound_effect(0x0021);
		set_light(true);
	}
	if (var0002 == 0x0005) {
		set_light(true);
	}
	if (var0002 == 0x0006) {
		set_light(false);
	}
}

extern var Func0932 0x932 (var var0000);
extern var Func0930 0x930 (var var0000, var var0001, var var0002);
extern void Func092F 0x92F (var var0000, var var0001);
extern void Func090D 0x90D (var var0000, var var0001, var var0002, var var0003, var var0004, var var0005, var var0006);
extern void Func07F9 object#(0x7F9) ();

void Func092E 0x92E (var var0000) {
	var var0001;
	var var0002;
	var var0003;
	var var0004;

	var0001 = [CALADIN, TEMPLAR, SHAZZANA, LUTHER, BRENDANN];
	var0001 &= var0000;
	UI_end_conversation();
	AVATAR->set_item_flag(DONT_MOVE);
	for (var0004 in var0001 with var0002 to var0003) {
		if (Func0932(var0004)) {
			var0004->set_opponent(DUPRE);
			var0004->set_attack_mode(FLEE);
			var0004->set_oppressor(DUPRE);
			var0004->set_item_flag(DEAD);
			gflags[TEMP_FLAG_3] = true;
			if (var0004 == var0000) {
				if (!gflags[TEMP_FLAG_4]) {
					if (!gflags[LEAVING_LIST_FIELD]) {
						gflags[LEAVING_LIST_FIELD] = true;
						var0000->set_item_flag(DEAD);
						var0004 = script var0000 after 12 ticks {
							call Func07FD;
						};
					}
				} else {
					var0000->clear_item_flag(DEAD);
					var0004 = Func0930(var0000, 0x0178, 0x003C);
					if (!var0004) {
						Func092F(var0000, 0x0001);
					}
					if ((var0000 == AVATAR->get_npc_object()) || (var0000 == AVATAR)) {
						AVATAR->set_schedule_type(FOLLOW_AVATAR);
						UI_end_conversation();
						Func090D(var0004, [-4, -4, -4, -4, -4], [-1, -2, 0, -3, -1], 0, Func07F9, var0000, BG_PATH_FAILURE);
						UI_set_path_failure(Func07F9, var0000, SI_PATH_FAILURE);
					} else {
						var0000->set_schedule_type(WAIT);
						var0004 = var0004->get_object_position();
						var0000->si_path_run_usecode([(var0004[0x0001] - 0x0004), (var0004[0x0002] - 0x0001), var0004[0x0003]], BG_PATH_FAILURE, var0000, Func07F9, true);
					}
				}
			}
		}
	}
}

void Func092F 0x92F (var var0000, var var0001) {
	var var0002;

	UI_init_conversation();
	HAZARD->show_npc_face0(0x0000);
	if (var0001 == 0x0001) {
		say("\"Failure in NowSettleDownBoys() because we could not find the tournament door.\"");
	}
	if (var0001 == 0x0002) {
		say("\"Failure in Brendan2Usable(_Action, $Temp1Flag) because we\t//$ couldn't find the wall at the top of the stairs.\"");
	}
	if (var0001 == 0x0003) {
		say("\"Failure in Brendan2Usable(_Action, $Temp2Flag) because we\t//$ couldn't find the door.\"");
	}
	if (var0001 == 0x0004) {
		say("\"Failure in BrendanUsable(_Polymorph) because we couldn't find the door.\"");
	}
	if (var0001 == 0x0005) {
		say("\"Failure in BrendanUsable(_Polymorph) because we couldn't pop a path egg next to the door.\"");
	}
	if (var0001 == 0x0006) {
		say("\"Failure in BrendanUsable(_Talking) because we couldn't find the door.\"");
	}
	if (var0001 == 0x0007) {
		say("\"Failure in BrendanUsable(_Path_Failure) because we failed in our pathfind.\"");
	}
	if (var0001 == 0x0008) {
		say("\"Failure in BrendanUsable(_Pathfind1) because we couldn't find the guard of the list fields.\"");
	}
	if (var0001 == 0x0009) {
		say("\"Failure in BrendanUsable(_Pathfind2) because we couldn't find the door.\"");
	}
	if (var0001 == 0x000A) {
		say("\"Failure in BrendanUsable(_Pathfind2) because we failed in our pop of a path egg.\"");
	}
	if (var0001 == 0x000B) {
		say("\"Failure in BrendanUsable(_Action, not $Temp1Flag) because\t//$ we were unable to find the guard.\"");
	}
	if (var0001 == 0x000C) {
		say("\"Failure in BrendanUsable(_Path_Success) because we couldn't find the door.\"");
	}
	if (var0001 == 0x000D) {
		say("\"Failure in CleanUpTournament() because we couldn't push an item into the ethereal void. We were doing this during the transfer of inventory from the chest into the student.\"");
	}
	if (var0001 == 0x000E) {
		say("\"Failure in CleanUpTournament() because we couldn't pop an item into the student's inventory.\"");
	}
	if (var0001 == 0x000F) {
		say("\"Failure in CleanUpTournament() because we couldn't find the guard.\"");
	}
	if (var0001 == 0x0010) {
		say("\"Failure in StartTournament() because we couldn't find the chest.\"");
	}
	if (var0001 == 0x0011) {
		say("\"Failure in StartTournament() because we couldn't push an item into the ethereal void.\"");
	}
	if (var0001 == 0x0012) {
		say("\"Failure in StartTournament() because we couldn't pop an item into the chest.\"");
	}
	if (var0001 == 0x0013) {
		say("\"Failure in ContStartOfTournament() because we couldn't find the door.\"");
	}
	if (var0001 == 0x0014) {
		say("\"Failure in ContStartOfTournament() because we couldn't find the guard.\"");
	}
	if (var0001 == 0x0015) {
		say("\"Failure in Brendan2Usable(_Path_Failure) because we failed in our pathfind.\"");
	}
	if (var0001 == 0x0016) {
		say("\"Failure in Brendan2Usable(_Action) because we couldn't find the guard that is supposedly pathfinding to the door.\"");
	}
	UI_remove_npc_face0();
	AVATAR->clear_item_flag(DONT_MOVE);
	var0002 = script var0000 after 1 ticks {
		call Func07FF;
	};
	abort;
}

var Func0930 0x930 (var var0000, var var0001, var var0002) {
	var var0003;
	var var0004;
	var var0005;
	var var0006;

	var0003 = var0000->find_nearby(var0001, var0002, MASK_NONE);
	for (var0006 in var0003 with var0004 to var0005) {
		if (var0006->get_item_quality() == 0x006C) {
			return var0006;
		}
	}
	return false;
}

extern void Func09AA 0x9AA ();
extern var Func095C 0x95C (var var0000, var var0001);
extern void Func0961 0x961 (var var0000, var var0001);
extern void Func0963 0x963 (var var0000, var var0001);
extern void Func0960 0x960 (var var0000, var var0001);
extern var Func0932 0x932 (var var0000);
extern var Func09A6 0x9A6 (var var0000);
extern void Func092F 0x92F (var var0000, var var0001);
extern var Func09A0 0x9A0 (var var0000, var var0001);

void Func0931 0x931 (var var0000) {
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;
	var var0008;
	var var0009;
	var var000A;
	var var000B;
	var var000C;
	var var000D;
	var var000E;
	var var000F;
	var var0010;
	var var0011;
	var var0012;
	var var0013;
	var var0014;
	var var0015;
	var var0016;
	var var0017;
	var var0018;
	var var0019;
	var var001A;

	Func09AA();
	var0001 = var0000->set_npc_prop(EXPERIENCE, UI_die_roll(0x0001, 0x0032));
	gflags[TEMP_FLAG_1] = false;
	gflags[TEMP_FLAG_2] = false;
	gflags[TEMP_FLAG_3] = false;
	gflags[TEMP_FLAG_4] = false;
	gflags[LEAVING_LIST_FIELD] = false;
	if (BRENDANN->get_npc_id() && gflags[TRAINING_FLAG_SET]) {
		if (Func095C(var0000, DEXTERITY) < 30) {
			Func0961(var0000, 1);
		}
		if (Func095C(var0000, COMBAT) < 30) {
			Func0963(var0000, 1);
		}
		if (Func095C(var0000, COMBAT) < 30) {
			Func0963(var0000, 1);
		}
	}
	if (CALADIN->get_npc_id() && gflags[TRAINING_FLAG_SET]) {
		if (Func095C(var0000, STRENGTH) < 30) {
			Func0960(var0000, 1);
		}
		if (Func095C(var0000, STRENGTH) < 30) {
			Func0960(var0000, 1);
		}
		if (Func095C(var0000, COMBAT) < 30) {
			Func0963(var0000, 1);
		}
	}
	if (SHAZZANA->get_npc_id() && gflags[TRAINING_FLAG_SET]) {
		if (Func095C(var0000, DEXTERITY) < 30) {
			Func0961(var0000, 1);
		}
		if (Func095C(var0000, DEXTERITY) < 30) {
			Func0961(var0000, 1);
		}
		if (Func095C(var0000, COMBAT) < 30) {
			Func0963(var0000, 1);
		}
	}
	if (LUTHER->get_npc_id() && gflags[TRAINING_FLAG_SET]) {
		if (Func095C(var0000, STRENGTH) < 30) {
			Func0960(var0000, 1);
		}
		if (Func095C(var0000, STRENGTH) < 30) {
			Func0960(var0000, 1);
		}
		if (Func095C(var0000, STRENGTH) < 30) {
			Func0960(var0000, 1);
		}
	}
	var0002 = [CALADIN, TEMPLAR, SHAZZANA, LUTHER, BRENDANN];
	for (var0005 in var0002 with var0003 to var0004) {
		if (Func0932(var0005)) {
			var0005->clear_item_flag(DEAD);
			var0005->run_schedule();
			var0005->set_npc_id(0x0000);
		}
	}
	gflags[TRAINING_FLAG_SET] = false;
	if (!(AVATAR->get_npc_object() == var0000)) {
		var0000->clear_item_flag(SI_TOURNAMENT);
	}
	HAZARD->show_npc_face0(0x0000);
	say("\"Very good, very good,\" he says as he returns your equipment.");
	var0000->set_alignment(GOOD);
	var0006 = var0000->find_nearby(0x020A, 0x002D, MASK_NONE);
	do {
		for (var0009 in var0006 with var0007 to var0008) {
			if (var0009->get_item_quality() == 0x00EB) {
				var000A = var0009;
				break;
			}
		} nobreak {
			say("\"Well, I seem to have misplaced thy belongings. Mine apologies. As a favor to thee, I shall let thee keep what thou dost have right now.\"");
			break;
		}
		var000B = var0000->get_cont_items(SHAPE_ANY, QUALITY_ANY, FRAME_ANY);
		for (var000E in var000B with var000C to var000D) {
			if (!((var000E->get_item_shape() == 0x01E6) || (var000E->get_item_shape() == 0x025F))) {
				var000E->remove_item();
			}
		}
		var000F = 0x0000;
		var000B = var000A->get_cont_items(SHAPE_ANY, QUALITY_ANY, FRAME_ANY);
		while (var000F < 0x0002) {
			for (var000E in var000B with var0010 to var0011) {
				if ((Func09A6(var000E) || (var000F == 0x0001))) {
					if (!var000E->set_last_created()) {
						Func092F(var0000, 0x000D);
					}
					if (!var0000->give_last_created()) {
						Func092F(var0000, 0x000E);
					}
				}
			}
			var000F += 0x0001;
			var000B = var000A->get_cont_items(SHAPE_ANY, QUALITY_ANY, FRAME_ANY);
		}
	} while (false);
	var0012 = Func09A0(0x0001, 0x0002);
	var0013 = var0012->get_item_quality();
	if (var0013) {
		var0014 = var0012->get_item_quality() - AVATAR->get_npc_prop(HEALTH);
		var0001 = AVATAR->set_npc_prop(HEALTH, var0014);
		var0001 = var0012->set_item_quality(0x0000);
		var0002 = AVATAR->find_nearby(ANY_SHAPE, 0x002D, MASK_NPC);
		for (var0005 in var0002 with var0015 to var0016) {
			if (var0005->get_npc_id() == 0x000D) {
				var0005->add_to_party();
				var0005->set_npc_id(0x0000);
			}
		}
	} else {
		var0014 = var0000->get_npc_id() - var0000->get_npc_prop(HEALTH);
		var0001 = var0000->set_npc_prop(HEALTH, var0014);
		var0000->set_npc_id(0x0000);
		var0000->add_to_party();
	}
	if (!(var0000 == AVATAR->get_npc_object())) {
		AVATAR->get_npc_object()->set_camera();
		var0000->set_schedule_type(FOLLOW_AVATAR);
	}
	var0017 = var0000->find_nearby(0x00E4, 0x0023, MASK_NONE);
	for (var001A in var0017 with var0018 to var0019) {
		if (var001A->get_npc_id() == 0x0009) {
			break;
		}
	} nobreak {
		Func092F(var0000, 0x000F);
	}
	var001A->si_path_run_usecode([0x03FB, 0x0A77, 0x0006], SI_PATH_SUCCESS, var001A, Func00E4, true);
}

var Func0932 0x932 (var var0000) {
	var var0001;

	var0001 = var0000->get_object_position();
	if (((var0001[0x0001] > 0x03C3) && ((var0001[0x0001] < 0x03EC) && ((var0001[0x0002] > 0x0A73) && (var0001[0x0002] < 0x0A9C)))) || ((var0001[0x0001] == 0x03EC) && ((var0001[0x0002] > 0x0A83) && ((var0001[0x0002] < 0x0A8C) && (var0001[0x0003] == 0x0000))))) {
		return true;
	}
	return false;
}

extern var Func096E 0x96E (var var0000, var var0001, var var0002, var var0003, var var0004);
extern void Func0934 0x934 (var var0000);

void Func0933 0x933 (var var0000, var var0001) {
	var0000->show_npc_face0(0x0000);
	SHAZZANA->set_npc_id(0x0000);
	LUTHER->set_npc_id(0x0000);
	CALADIN->set_npc_id(0x0000);
	TEMPLAR->set_npc_id(0x0000);
	BRENDANN->set_npc_id(0x0000);
	var0000->set_npc_id(0x0009);
	if (var0000 == BRENDANN) {
		var0000 = Func096E([0x0001, 0x0004, 0x0004], 0x03B7, 0x0032, var0001, 0x0003);
		if (var0000 == 0x0000) {
			say("\"Thou dost not have enough experience. Come back when thou art more knowledgeable of the world!\"");
			return;
		}
		if (var0000 == 0x0001) {
			say("\"Thou dost not have enough money.\"");
			return;
		}
		if (var0000 == 0x0002) {
			say("\"Thou art already as proficient as I. Thou mightest consider consulting one of the other trainers that specialize in other areas.\"");
			return;
		}
		say("\"I will train thee now.\"");
	}
	if (var0000 == SHAZZANA) {
		var0000 = Func096E([0x0001, 0x0001, 0x0004], 0x03B7, 0x0032, var0001, 0x0003);
		if (var0000 == 0x0000) {
			say("\"Thou dost not have enough experience. Come back when thou art more knowledgeable of the world!\"");
			return;
		}
		if (var0000 == 0x0001) {
			say("\"Thou dost not have enough money.\"");
			return;
		}
		if (var0000 == 0x0002) {
			say("\"Thou art already as proficient as I. Thou mightest consider consulting one of the other trainers that specialize in other areas.\"");
			return;
		}
		say("\"I will train thee now.\"");
	}
	if (var0000 == LUTHER) {
		var0000 = Func096E([0x0000, 0x0000, 0x0000], 0x03B7, 0x0032, var0001, 0x0003);
		if (var0000 == 0x0000) {
			say("\"Thou dost not have enough experience. Come back when thou art more knowledgeable of the world!\"");
			return;
		}
		if (var0000 == 0x0001) {
			say("\"Thou dost not have enough money.\"");
			return;
		}
		if (var0000 == 0x0002) {
			say("\"Thou art already as proficient as I. Thou mightest consider consulting one of the other trainers that specialize in other areas.\"");
			return;
		}
		say("\"I will train thee now.\"");
	}
	if (var0000 == CALADIN) {
		var0000 = Func096E([0x0000, 0x0000, 0x0004], 0x03B7, 0x0032, var0001, 0x0003);
		if (var0000 == 0x0000) {
			say("\"Thou dost not have enough experience. Come back when thou art more knowledgeable of the world!\"");
			return;
		}
		if (var0000 == 0x0001) {
			say("\"Thou dost not have enough money.\"");
			return;
		}
		if (var0000 == 0x0002) {
			say("\"Thou art already as proficient as I. Thou mightest consider consulting one of the other trainers that specialize in other areas.\"");
			return;
		}
		say("\"I will train thee now.\"");
	}
	var0000 = UI_remove_party_items(0x0032, 0x03B7, QUALITY_ANY, FRAME_ANY, false);
	gflags[TRAINING_FLAG_SET] = true;
	Func0934(var0001);
	abort;
}

extern var Func09A0 0x9A0 (var var0000, var var0001);
extern void Func092F 0x92F (var var0000, var var0001);
extern var Func09A6 0x9A6 (var var0000);
extern void Func0935 0x935 (var var0000);

void Func0934 0x934 (var var0000) {
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;
	var var0008;
	var var0009;
	var var000A;
	var var000B;
	var var000C;

	var0001 = var0000->get_npc_prop(HEALTH);
	if (var0000 == AVATAR->get_npc_object()) {
		var0002 = Func09A0(0x0001, 0x0002);
		var0003 = var0002->set_item_quality(var0001);
	} else {
		var0000->set_npc_id(var0001);
		var0002 = Func09A0(0x0001, 0x0002);
		var0003 = var0002->set_item_quality(0x0000);
	}
	var0003 = var0000->set_npc_prop(HEALTH, var0000->get_npc_prop(STRENGTH) - var0001);
	gflags[MONITOR_TRAINING] = true;
	if (var0000 == AVATAR->get_npc_object()) {
		var0003 = UI_get_party_list2();
		for (var0002 in var0003 with var0004 to var0005) {
			if (!(var0002 == var0000)) {
				var0002->set_npc_id(0x000D);
				var0002->remove_from_party();
				var0002->set_schedule_type(WAIT);
			}
		}
	} else {
		var0000->remove_from_party();
		var0000->set_schedule_type(WAIT);
		var0000->set_alignment(GOOD);
	}
	var0000->set_item_flag(SI_TOURNAMENT);
	var0003 = var0000->find_nearby(0x020A, 0x000F, MASK_NONE);
	for (var0002 in var0003 with var0006 to var0007) {
		if (var0002->get_item_quality() == 0x00EB) {
			var0008 = var0002;
			var0008->set_item_shape(0x0320);
			break;
		}
	} nobreak {
		Func092F(var0000, 0x0010);
	}
	var0009 = 0x0000;
	var000A = var0000->get_cont_items(SHAPE_ANY, QUALITY_ANY, FRAME_ANY);
	while (var0009 < 0x0002) {
		for (var0002 in var000A with var000B to var000C) {
			if (Func09A6(var0002) || (var0009 == 0x0001)) {
				var0003 = var0002->get_item_shape();
				if (!((var0003 == 0x01E6) || (var0003 == 0x025F))) {
					if (!var0002->set_last_created()) {
						Func092F(var0000, 0x0011);
					}
					if (!var0008->give_last_created()) {
						Func092F(var0000, 0x0012);
					}
				}
			}
		}
		var0009 += 0x0001;
		var000A = var0000->get_cont_items(SHAPE_ANY, QUALITY_ANY, FRAME_ANY);
	}
	var0008->set_item_shape(0x020A);
	Func0935(var0000);
}

extern var Func0957 0x957 (var var0000);
extern void Func092F 0x92F (var var0000, var var0001);
extern void Func097F 0x97F (var var0000, var var0001, var var0002);

void Func0935 0x935 (var var0000) {
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;
	var var0008;
	var var0009;
	var var000A;
	var var000B;
	var var000C;
	var var000D;
	var var000E;

	HAZARD->show_npc_face0(0x0000);
	say("\"What weapon dost thou favor?\"");
	var0001 = ["nothing", "sword", "spear", "hammer", "morning star", "mace", "halberd", "battle axe"];
	var0002 = Func0957(var0001);
	if (var0002 == 0x0001) {
		say("\"Indeed. If that's what thou wantest.... Best of luck to ya.\"");
	}
	if (var0002 == 0x0002) {
		if (UI_is_pc_female()) {
			say("\"Take care with that blade. 'Tis sharp.\"");
		} else {
			say("\"Be thou careful with that blade.\"");
		}
		var0003 = UI_create_new_object(0x0257);
		var0001 = var0000->give_last_created();
	}
	if (var0002 == 0x0003) {
		say("\"Only a coward fights from a distance, not that I be referring to thee or nothing.\"");
		var0003 = UI_create_new_object(0x0250);
		var0001 = var0000->give_last_created();
	}
	if (var0002 == 0x0004) {
		say("\"Aaahh, a fine weapon a war hammer is. There's nothing quite like the feeling of whacking someone with a mallet.\"");
		var0003 = UI_create_new_object(0x0258);
		var0001 = var0000->give_last_created();
	}
	if (var0002 == 0x0005) {
		say("\"A respectable weapon that is. Leaves quite a mess, though.\"");
		var0003 = UI_create_new_object(0x0254);
		var0001 = var0000->give_last_created();
	}
	if (var0002 == 0x0006) {
		say("\"Squeamish at the sight of blood, are ya? The morning star is the true warrior's mace.\"");
		var0003 = UI_create_new_object(0x0293);
		var0001 = var0000->give_last_created();
	}
	if (var0002 == 0x0007) {
		say("\"A fine enough weapon for a coward. I never did care for that fightin' at a distance and all. I thinks that the only way to victory is to close and hack, and I should know, seeing that I've seen many a battle in my time.\"");
		var0003 = UI_create_new_object(0x025B);
		var0001 = var0000->give_last_created();
	}
	if (var0002 == 0x0008) {
		say("\"Thou knowest thy weapons well.\"");
		say("\"Sweet is the sight of a battle axe swinging in the pitch of battle.\"");
		say("\"Lovely is the sound of bone crunching under its mighty arc.\"");
		var0003 = UI_create_new_object(0x0259);
		if (var0003) {
			var0001 = var0000->give_last_created();
		}
	}
	var0003 = UI_create_new_object(0x0239);
	if (var0003) {
		var0001 = var0000->give_last_created();
	}
	var0003 = UI_create_new_object(0x024B);
	if (var0003) {
		var0001 = var0000->give_last_created();
	}
	var0003 = UI_create_new_object(0x03EC);
	if (var0003) {
		var0001 = var0000->give_last_created();
	}
	var0003 = UI_create_new_object(0x0243);
	if (var0003) {
		var0001 = var0000->give_last_created();
	}
	say("\"All right. If thou'lt follow me, then.\"");
	UI_remove_npc_face0();
	UI_play_music(0x0022, 0x0000);
	AVATAR->set_item_flag(DONT_MOVE);
	UI_end_conversation();
	var0004 = AVATAR->find_nearby(0x00E4, 0x0023, MASK_NONE);
	for (var0007 in var0004 with var0005 to var0006) {
		if (var0007->get_npc_id() == 0x0009) {
			break;
		}
	} nobreak {
		Func092F(var0000, 0x0014);
	}
	var0007->clear_item_say();
	Func097F(var0007, "@Follow me...@", 0x000F);
	var0008 = var0000->find_nearby(0x036F, 0x001E, MASK_NONE);
	for (var000B in var0008 with var0009 to var000A) {
		var000C = var000B->get_object_position();
		if ((var000C[0x0001] == 0x03F4) && ((var000C[0x0002] == 0x0A7F) && (var000C[0x0003] == 0x0006))) {
			break;
		}
	} nobreak {
		Func092F(var0000, 0x0002);
	}
	var000D = [SHAMINO, IOLO, DUPRE];
	var000E = [0, 0, 0];
	var0007->si_path_run_usecode([(var000C[0x0001] - 0x0002), (var000C[0x0002] - 0x0000), var000C[0x0003]], PATH_FAILURE, var0000, Func07FD, true);
}

extern var Func098D 0x98D ();
extern var Func0932 0x932 (var var0000);
extern void Func092E 0x92E (var var0000);
extern var Func0953 0x953 ();
extern void Func097F 0x97F (var var0000, var var0001, var var0002);
extern var Func0988 0x988 (var var0000, var var0001);

void Func0936 0x936 (var var0000, var var0001) {
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;
	var var0008;
	var var0009;
	var var000A;
	var var000B;

	var0002 = Func098D();
	var0002 &= AVATAR;
	var0003 = [];
	for (var0006 in var0002 with var0004 to var0005) {
		var0003 &= var0006->get_npc_object();
	}
	if (!((var0000 in var0003) || (var0001 in var0003))) {
		return;
	}
	UI_init_conversation();
	do {
		if (var0000 in var0003) {
			var0001->set_attack_mode(FLEE);
			if (!gflags[TRAINING_FLAG_SET]) {
				if (gflags[LUTHER_CHALLENGED] && ((var0001 == LUTHER->get_npc_object()) && ((!gflags[DEFEATED_LUTHER]) && (var0000 == AVATAR->get_npc_object())))) {
					break;
				}
				var0001->clear_item_say();
				var0001->item_say("@Thou hast beaten me!@");
				if (((!Func0932(BRENDANN)) || (Func0932(BRENDANN) && (BRENDANN->get_attack_mode() == FLEE))) && (((!Func0932(LUTHER)) || (Func0932(LUTHER) && (LUTHER->get_attack_mode() == FLEE))) && (((!Func0932(SHAZZANA)) || (Func0932(SHAZZANA) && (SHAZZANA->get_attack_mode() == FLEE))) && (((!Func0932(CALADIN)) || (Func0932(CALADIN) && (CALADIN->get_attack_mode() == FLEE))) && ((!Func0932(TEMPLAR)) || (Func0932(TEMPLAR) && (TEMPLAR->get_attack_mode() == FLEE))))))) {
					HAZARD->show_npc_face0(0x0000);
					var0002 = var0000->get_npc_name();
					say("\"Nice show, ",
						var0002,
						", thou hast beaten us all! Where didst thou learn to fight like that?\"");
					var0002 = ("@Hail, " + var0002) + "!@";
					var0007 = var0000->find_nearby(ANY_SHAPE, 0x001E, MASK_NPC2);
					for (var0001 in var0007 with var0008 to var0009) {
						var0001->clear_item_say();
						var0001->item_say(var0002);
					}
					Func092E(var0000);
					return;
				}
				gflags[TEMP_FLAG_1] = false;
				return;
			}
			if (var0001 == LUTHER->get_npc_object()) {
				if ((gflags[LUTHER_CHALLENGED] && (!gflags[DEFEATED_LUTHER])) && (var0000 == AVATAR->get_npc_object())) {
					break;
				}
				if (LUTHER->get_npc_id() == 0x0009) {
					LUTHER->show_npc_face0(0x0000);
					say("\"Thou hast beaten me. I am impressed.\"");
					UI_remove_npc_face0();
					Func092E(var0000);
					return;
				}
				var0001->clear_item_say();
				var0001->item_say("@Thou hast beaten me!@");
				gflags[TEMP_FLAG_1] = false;
				return;
			}
			if (var0001 == SHAZZANA->get_npc_object()) {
				if (SHAZZANA->get_npc_id() == 0x0009) {
					SHAZZANA->show_npc_face0(0x0000);
					say("\"Quite amazing. I have been beaten by thee! Perhaps it is time for the teacher to learn from the student.\"");
					UI_remove_npc_face0();
					Func092E(var0000);
					return;
				}
				var0001->item_say("@Thou hast bested me!@");
				return;
			}
			if (var0001 == BRENDANN->get_npc_object()) {
				if (BRENDANN->get_npc_id() == 0x0009) {
					BRENDANN->show_npc_face0(0x0000);
					say("\"A good showing! Thou hast gotten lucky and bested me! Perhaps it is time for the master to learn from his student!!!\"");
					UI_remove_npc_face0();
					Func092E(var0000);
					return;
				}
				BRENDANN->clear_item_say();
				var0001->item_say("@Thou hast bested me again!@");
				gflags[TEMP_FLAG_1] = false;
				return;
			}
			if (var0001 == CALADIN->get_npc_object()) {
				if (CALADIN->get_npc_id() == 0x0009) {
					CALADIN->show_npc_face0(0x0000);
					say("\"Thou hast gotten lucky and bested me! Do not consider this the image of the wilds. The goblins are fierce.\"");
					UI_remove_npc_face0();
					Func092E(var0000);
					return;
				}
				var0001->clear_item_say();
				var0001->item_say("@I surrender to thee!@");
				gflags[TEMP_FLAG_1] = false;
				return;
			}
			var0001->clear_item_say();
			var0001->item_say("@I can take it no longer!@");
			gflags[TEMP_FLAG_1] = false;
			return;
		}
		if (gflags[TRAINING_FLAG_SET]) {
			if (SHAZZANA->get_npc_id() == 0x0009) {
				SHAZZANA->show_npc_face0(0x0000);
				say("\"Thou hast been beaten by my blade. Remember this day, and learn.\"");
				UI_remove_npc_face0();
				Func092E(var0001);
				return;
			}
			if (LUTHER->get_npc_id() == 0x0009) {
				LUTHER->show_npc_face0(0x0000);
				say("\"Thou hast been beaten, as was expected. Though thou art insignificant, try to remember the lessons I have taught thee this day.\"");
				UI_remove_npc_face0();
				Func092E(var0001);
				return;
			}
			if (BRENDANN->get_npc_id() == 0x0009) {
				BRENDANN->show_npc_face0(0x0000);
				say("\"Thou made a good showing, but fell to my superior skill in the end. With more experience, thou wilt make a fine warrior.\"");
				UI_remove_npc_face0();
				Func092E(var0001);
				return;
			}
			if (!(CALADIN->get_npc_id() == 0x0009)) {
				// I see no way other than this
				goto labelFunc0936_0460;
			}
			CALADIN->show_npc_face0(0x0000);
			say("\"I have overwhelmed thee with sheer strength. Learn from this lesson, my friend.\"");
			UI_remove_npc_face0();
			Func092E(var0001);
			return;
		}
		if (var0000 == SHAZZANA->get_npc_object()) {
			SHAZZANA->show_npc_face0(0x0000);
			say("\"Thou hast lost this match.\"");
			UI_remove_npc_face0();
			Func092E(var0001);
			return;
		}
		if (var0000 == LUTHER->get_npc_object()) {
			LUTHER->show_npc_face0(0x0000);
			say("\"Hah, I have bested thee. Away with thee!\"");
			UI_remove_npc_face0();
			Func092E(var0001);
			return;
		}
		if (var0000 == BRENDANN->get_npc_object()) {
			BRENDANN->show_npc_face0(0x0000);
			say("\"Thou hast been beaten in a fair spar. Perhaps now thou wilt be more humble.\"");
			UI_remove_npc_face0();
			Func092E(var0001);
			return;
		}
		if (var0000 == CALADIN->get_npc_object()) {
			CALADIN->show_npc_face0(0x0000);
			say("\"Thou hast lost to my prowess.\"");
			UI_remove_npc_face0();
			Func092E(var0001);
			return;
		}
		if (var0000 == TEMPLAR->get_npc_object()) {
			TEMPLAR->show_npc_face0(0x0000);
			say("\"I have beaten thee!\"");
			UI_remove_npc_face0();
			Func092E(var0001);
			return;
		}
labelFunc0936_0460:
		return;
	} while (false);
	LUTHER->show_npc_face0(0x0000);
	say("\"I wouldn't have believed it... thou didst beat me... in a fair fight...\"");
	var0002 = Func0953();
	if (UI_is_pc_female()) {
		say("\"Thou art one hell of a warrior, ",
			var0002,
			"!\"");
	} else {
		say("\"Thou art a better man than I am, ",
			var0002,
			".\"");
	}
	LUTHER->revert_schedule();
	gflags[DEFEATED_LUTHER] = true;
	var0002 = LUTHER->set_npc_prop(STRENGTH, 18);
	var0002 = LUTHER->set_npc_prop(COMBAT, 9);
	var0002 = LUTHER->set_npc_prop(DEXTERITY, 8);
	LUTHER->clear_item_say();
	Func097F(LUTHER, "@Hail the Avatar!@", 0x0000);
	var0001 = AVATAR->find_nearby(ANY_SHAPE, 0x0032, MASK_NPC2);
	var0001 = Func0988(LUTHER->get_npc_object(), var0001);
	for (var0002 in var0001 with var000A to var000B) {
		var0002->clear_item_say();
		Func097F(var0002, "@Hail the Avatar!@", UI_die_roll(0x0000, 0x0001));
	}
	Func092E(var0000);
}

extern void Func090D 0x90D (var var0000, var var0001, var var0002, var var0003, var var0004, var var0005, var var0006);

void Func0937 0x937 (var var0000, var var0001, var var0002, var var0003, var var0004, var var0005, var var0006, var var0007) {
	var var0008;

	if (var0000 == AVATAR->get_npc_object()) {
		Func090D(var0001, var0002, var0003, var0004, var0005, var0006, var0007);
		UI_set_path_failure(var0005, var0006, SI_PATH_FAILURE);
	} else {
		var0008 = var0001->get_object_position();
		var0008 = [(var0008[0x0001] + var0002[0x0001]), (var0008[0x0002] + var0003[0x0001]), var0008[0x0003]];
		var0000->si_path_run_usecode(var0008, var0007, var0006, var0005, true);
	}
}

void Func0938 0x938 (var var0000) {
	UI_error_message("Obsolete routine TRIAL in conversation");
}

// Note: patched to fix underflows
extern var Func08AC 0x8AC (var var0000);
extern void Func08C5 0x8C5 ();
extern void Func097F 0x97F (var var0000, var var0001, var var0002);
extern var Func0954 0x954 ();

void Func0939 0x939 (var var0000) {
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;

	if (var0000 == 0x00F8) {
		var0001 = Func08AC(true);
		var0001->move_object([0x0407, 0x0679]);
		var0001->si_path_run_usecode([0x0407, 0x066B], SI_PATH_SUCCESS, var0001->get_npc_object(), Func07F8, false);
		Func08C5();
		Func097F(var0001, (("@" + Func0954()) + "...@"), 0x000A);
		var0005 = Func0954();
		var0001 = Func08AC(false);
		Func097F(AVATAR, (("@" + var0001) + "!@"), 0x0005);
		abort;
	}
	if (var0000 == 0x00F9) {
		Func08AC(true)->add_to_party();
		var0001 = UI_get_party_list2();
		for (var0004 in var0001 with var0002 to var0003) {
			var0004->set_schedule_type(WAIT);
		}
		var0001 = UI_create_new_object2(0x017D, [0x0407, 0x0679]);
		var0001->si_path_run_usecode([0x0408, 0x066F], SI_PATH_SUCCESS, var0001, Func07F8, false);
		abort;
	}
	if (var0000 == 0x00FA) {
		set_schedule_type(WAIT);
		var0001 = script item {
			nohalt;
			wait 2;
			actor frame bowing;
		};
		var0001 = script item after 5 ticks {
			call Func07F8;
		};
		abort;
	}
	if (var0000 == 0x00FB) {
		var0001 = UI_create_new_object(0x017A);
		if (var0001) {
			var0001->set_item_frame(0x0005);
			UI_play_sound_effect(0x0075);
			var0001 = UI_update_last_created([0x0408, 0x066E, 0x0000]);
		}
		var0001 = script item {
			nohalt;
			wait 2;
			actor frame standing;
			wait 2;
			call Func07F8;
		};
		var0001 = script ZULITH {
			say "@This trial will now come to order.@";
			wait 5;
			actor frame bowing;
			wait 2;
			actor frame sitting;
		};
		abort;
	}
	if (var0000 == 0x00FC) {
		var0001 = get_object_position();
		var0001[0x0001] += 0x0003;
		si_path_run_usecode(var0001, SI_PATH_SUCCESS, item, Func07F8, false);
		abort;
	}
	if (var0000 == 0x00FD) {
		var0001 = script item {
			nohalt;
			wait 2;
			face south;
			continue;
			actor frame standing;
		};
		if (gflags[FAWN_TRIAL_DONE_FIRST_DAY]) {
			var0001 = script KYLISTA {
				nohalt;
				actor frame bowing;
				wait 3;
				say "@Hear ye!@";
				actor frame standing;
				wait 3;
				actor frame cast_up;
				sfx 30;
				wait 3;
				actor frame cast_out;
				sfx 30;
				wait 3;
				actor frame standing;
				sfx 30;
				wait 3;
				call Func07F8;
			};
		} else {
			Func097F(YELINDA, "@Zulith...@", 0x000F);
			var0001 = script YELINDA after 10 ticks {
				nohalt;
				actor frame bowing;
				wait 3;
				actor frame standing;
				wait 2;
				face south;
				wait 2;
				call Func07F8;
			};
		}
		abort;
	}
}

extern var Func0953 0x953 ();
extern var Func08AC 0x8AC (var var0000);
extern void Func097F 0x97F (var var0000, var var0001, var var0002);
extern void Func094F 0x94F (var var0000, var var0001);
extern var Func09A0 0x9A0 (var var0000, var var0001);
extern void Func0907 0x907 (var var0000, var var0001);
extern void Func09AC 0x9AC (var var0000, var var0001, var var0002, var var0003);
extern var Func099B 0x99B (var var0000, var var0001, var var0002, var var0003, var var0004, var var0005, var var0006);
extern void Func095D 0x95D (var var0000);

void Func093A 0x93A (var var0000) {
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;
	var var0008;
	var var0009;
	var var000A;
	var var000B;
	var var000C;
	var var000D;
	var var000E;
	var var000F;
	var var0010;
	var var0011;
	var var0012;
	var var0013;
	var var0014;
	var var0015;
	var var0016;
	var var0017;
	var var0018;
	var var0019;
	var var001A;
	var var001B;
	var var001C;
	var var001D;
	var var001E;
	var var001F;
	var var0020;
	var var0021;
	var var0022;
	var var0023;
	var var0024;
	var var0025;
	var var0026;
	var var0027;
	var var0028;
	var var0029;
	var var002A;

	var0001 = Func0953();
	var0002 = "his";
	if (UI_is_pc_female()) {
		var0002 = "her";
	}
	if (gflags[FAWN_TRIAL_DONE_FIRST_DAY]) {
		if (var0000 == 0x0057) {
			var0003 = script VOLDIN {
				face west;
				wait 2;
				actor frame bowing;
				wait 2;
				actor frame sitting;
			};
			UI_init_conversation();
			KYLISTA->show_npc_face0(0x0000);
			say("\"I thank thee, Captain Voldin.\"");
			var0003 = Func08AC(false);
			say("\"We shall recess until tomorrow, and then return to hear ",
				var0003,
				"'s defense. Dost thou agree with this course of action, Lady Yelinda?\"");
			YELINDA->show_npc_face1(0x0000);
			say("\"Oh... why, yes... of course. Make it so.\"");
			UI_remove_npc_face1();
			0x0000->set_conversation_slot();
			say("\"",
				var0003,
				", know that thou mayest defend thyself or appoint any willing person to speak on thy behalf. Dost thou have a preference?\"");
			Func08AC(true)->show_npc_face1(0x0000);
			say("\"Yes, I wish my friend -- ",
				var0001,
				", the Avatar -- to present my case. I have faith that I will be acquitted.\"");
			UI_remove_npc_face1();
			0x0000->set_conversation_slot();
			say("\"Very well, ",
				var0001,
				" shall be thy champion. Guard, please take the defendant to his cell.\"");
			UI_end_conversation();
			var0004 = AVATAR->find_nearby(0x017D, 0x000A, MASK_NPC2);
			if (var0004) {
				var0003 = script var0004 {
					nohalt;
					say "@Yes, Priestess.@";
				};
				var0005 = var0004->get_object_position();
				var0005[0x0001] -= 0x0003;
				var0004->si_path_run_usecode(var0005, SI_PATH_SUCCESS, var0004, Func07F8, false);
			}
			abort;
		}
		if (var0000 == 0x0058) {
			var0003 = script item {
				face north;
				wait 2;
				actor frame bowing;
				call Func07F8;
			};
			abort;
		}
		if (var0000 == 0x0059) {
			var0003 = find_nearby(0x017A, 0x0005, MASK_NONE);
			if (var0003) {
				var0003->remove_item();
				UI_play_sound_effect(0x0075);
				var0003 = script item {
					nohalt;
					wait 2;
					actor frame standing;
					call Func07F8;
				};
			}
			abort;
		}
		if (var0000 == 0x005A) {
			var0003 = script item {
				nohalt;
				say "@Come with me, prisoner.@";
			};
			si_path_run_usecode([0x0407, 0x0679, 0x0000], SI_PATH_SUCCESS, item, Func07F8, false);
			abort;
		}
		if (var0000 == 0x005B) {
			remove_item();
			var0003 = Func08AC(true);
			var0003->remove_from_party();
			var0003->si_path_run_usecode([0x0408, 0x067A, 0x0000], SI_PATH_SUCCESS, var0003->get_npc_object(), Func07F8, false);
			Func097F(var0003, "@Goodbye...@", 0x0000);
			abort;
		}
		if (var0000 == 0x005C) {
			gflags[FAWN_TRIAL_RECESS] = true;
			var0003 = script ZULITH {
				actor frame bowing;
				wait 2;
				actor frame standing;
				wait 3;
				say "@This trial is now in recess!@";
			};
			var0004 = "" & ("@What a farce!@" & ("@What shall I do?@" & "@Woe is me...@"));
			Func094F(AVATAR, var0004);
			Func08AC(true)->remove_npc();
			AVATAR->si_path_run_usecode([0x0407, 0x068D, 0x0000], SI_PATH_SUCCESS, AVATAR->get_npc_object(), Func07F8, false);
			var0003 = Func09A0(0x0001, 0x0002)->set_item_quality(0x0000);
			var0003 = script Func09A0(0x0001, 0x0002) after 500 ticks {
				nohalt;
				call Func042E;
			};
			var0003 = script Func09A0(0x0001, 0x0002) {
				nohalt;
				call Func07F8;
			};
			abort;
		}
		if (var0000 == 0x005D) {
			gflags[FAWN_TRIAL_DONE_FIRST_DAY] = false;
			gflags[FAWN_TRIAL_DONE] = true;
			var0003 = UI_get_party_list2();
			for (var0008 in var0003 with var0006 to var0007) {
				var0008->set_schedule_type(FOLLOW_AVATAR);
			}
			AVATAR->clear_item_flag(DONT_MOVE);
			UI_init_conversation();
			var0003 = find_nearby(0x01B0, 0x000A, MASK_NONE) & find_nearby(0x010E, 0x000A, MASK_NONE);
			for (var0008 in var0003 with var0009 to var000A) {
				if (var0008->get_item_quality() == 0x00B3) {
					Func0907(var0008, 0x0002);
				}
			}
			abort;
		}
	} else {
		if (var0000 == 0x0057) {
			UI_init_conversation();
			YELINDA->show_npc_face0(0x0000);
			say("\"Both sides have stated their facts, and called their witnesses. Let it not be said that there is no justice in Fawn!\"");
			var0003 = Func08AC(false);
			say("\"Now, before the face of Beauty, I call for a verdict upon ",
				var0003,
				"!\"");
			UI_end_conversation();
			var0003 = script ZULITH {
				wait 1;
				actor frame bowing;
				wait 2;
				actor frame standing;
				say "@All rise and face the Oracle!";
				wait 1;
				face north;
			};
			var0008 = UI_get_party_list2();
			for (var0004 in var0008 with var000B to var000C) {
				var0003 = 0x0007 + UI_get_random(0x0003);
				var0003 = script var0004 after var0003 ticks {
					nohalt;
					face north;
				};
			}
			var0008 = [OLON, DELIN, DELPHYNIA, JENDON];
			for (var0004 in var0008 with var000D to var000E) {
				var0003 = script var0004 after (0x0007 + UI_get_random(0x0005)) ticks {
					actor frame bowing;
					wait 2;
					actor frame standing;
					wait 1;
					face north;
				};
			}
			var0008 = [GARTH, JOTH];
			for (var0004 in var0008 with var000F to var0010) {
				var0003 = script var0004 after (0x0007 + UI_get_random(0x0005)) ticks {
					actor frame bowing;
					wait 2;
					actor frame standing;
					wait 1;
					face west;
				};
			}
			var0003 = script YELINDA after 5 ticks {
				nohalt;
				face east;
				actor frame standing;
			};
			var0003 = script ZULITH after 7 ticks {
				nohalt;
				face north;
				actor frame standing;
			};
			var0003 = script item after 20 ticks {
				call Func07F8;
			};
			abort;
		}
		if (var0000 == 0x0058) {
			UI_init_conversation();
			SMUDGE->show_npc_face0(0x0000);
			var0003 = Func08AC(false);
			if (gflags[ORACLE_SET_TO_INNOCENT]) {
				say("\"",
					var0003,
					" is innocent! ",
					var0001,
					" and ",
					var0002,
					" companions have no wish to destroy Beauty!\"");
				say("\"Free them at once!\"");
			}
			if (gflags[ORACLE_SET_TO_CORRUPT]) {
				say("\"",
					var0003,
					" is innocent! Set him and his companions free!\"");
				say("\"The true criminals are Priestess Kylista and Great Captain Voldin, who have conspired to convict this innocent man!\"");
			}
			if ((!gflags[ORACLE_SET_TO_CORRUPT]) && (!gflags[ORACLE_SET_TO_INNOCENT])) {
				say("\"",
					var0003,
					" is guilty of associating with Daemons to destroy our Beauty! The fiend, ",
					var0001,
					", is also guilty!\"");
				say("\"Such offense to Beauty cannot go unpunished... The stain of their presence must be washed away with their blood.\"");
				Func097F(ZULITH, "@It cries for their blood...@", 0x0000);
				Func097F(GARTH, "@Stone them!@", 0x0003);
				Func097F(JENDON, "@Behead the fiends!@", 0x0005);
				Func097F(Func08AC(true), "@What shall we do?@", 0x0001);
				Func097F(YELINDA, "@Oh, my...@", 0x0005);
				UI_end_conversation();
				var0003 = AVATAR->get_object_position() & (0x0001 & 0x0006);
				var0003 = var0003->find_nearby(0x0113, 0x000A, MASK_EGG);
				if (var0003) {
					var0005 = var0003->get_object_position();
					var0005[0x0002] += 0x000A;
					UI_play_music(0x0014, Func09A0(0x0005, 0x0001));
					ALYSSAND->move_object(var0005);
					ALYSSAND->si_path_run_usecode([0x0408, 0x0670, 0x0000], SI_PATH_SUCCESS, ALYSSAND->get_npc_object(), Func07F8, false);
				}
			} else {
				UI_end_conversation();
				var0003 = Func09A0(0x0001, 0x0001)->set_item_quality(0x0062);
				var0003 = script YELINDA {
					nohalt;
					call Func07F8;
				};
			}
			abort;
		}
		if (var0000 == 0x0059) {
			ALYSSAND->clear_item_say();
			Func097F(ALYSSAND, "@Stop the proceedings!@", 0x0000);
			ALYSSAND->set_schedule_type(WAIT);
			var0003 = script ALYSSAND {
				nohalt;
				actor frame cast_out;
				wait 2;
				actor frame cast_up;
				wait 2;
				actor frame standing;
			};
			var0008 = UI_get_party_list2();
			for (var0004 in var0008 with var0011 to var0012) {
				var0003 = script var0004 after (0x0002 + UI_get_random(0x0003)) ticks {
					face south;
				};
			}
			var0008 = [OLON, DELIN, DELPHYNIA, GARTH, JOTH, JENDON];
			for (var0004 in var0008 with var0013 to var0014) {
				var0003 = script var0004 after (0x0004 + UI_get_random(0x0004)) ticks {
					actor frame bowing;
					actor frame standing;
					face west;
				};
			}
			var0008 = [YELINDA, ZULITH];
			for (var0004 in var0008 with var0015 to var0016) {
				var0003 = script var0004 after (0x0003 + UI_get_random(0x0003)) ticks {
					face east;
				};
			}
			var0003 = AVATAR->get_object_position() & (0x0001 & 0x0006);
			var0003 = var0003->find_nearby(0x0113, 0x000A, MASK_EGG);
			if (var0003) {
				var0005 = var0003->get_object_position();
				var0005[0x0002] += 0x000A;
				JORVIN->move_object(var0005);
				JORVIN->si_path_run_usecode([0x0406, 0x0670, 0x0000], SI_PATH_SUCCESS, JORVIN->get_npc_object(), Func07F8, false);
			}
			abort;
		}
		if (var0000 == 0x005A) {
			UI_init_conversation();
			ALYSSAND->show_npc_face0(0x0000);
			say("\"We have found the real traitors!\"");
			YELINDA->show_npc_face1(0x0000);
			say("\"What is this all about, Captain Jorvin?\"");
			UI_remove_npc_face1();
			0x0000->set_conversation_slot();
			say("\"Now we know the truth about this town...\"");
			JORVIN->show_npc_face1(0x0000);
			say("\"I have grave news, dearest Lady. There have been foul deeds done in this Temple!\"");
			JORVIN->clear_item_say();
			if (VOLDIN->get_item_flag(DEAD)) {
				say("\"Acting upon information supplied by Alyssand, I did enter a secret room within this building. Here, I discovered Priestess Kylista manipulating some form of machine.\"");
				Func097F(JORVIN, "@Guards, send in the traitor!@", 0x0000);
			} else {
				say("\"Acting upon information supplied by Alyssand, I did enter a secret room within this building. Here, I discovered Priestess Kylista and Great Captain Voldin manipulating some form of machine.\"");
				Func097F(JORVIN, "@Guards, send in the traitors!@", 0x0000);
			}
			UI_end_conversation();
			var0003 = script JORVIN {
				wait 1;
				face east;
			};
			var0003 = script ALYSSAND {
				wait 3;
				face north;
			};
			var0003 = AVATAR->get_object_position() & (0x0001 & 0x0006);
			var0003 = var0003->find_nearby(0x0113, 0x000A, MASK_EGG);
			if (var0003) {
				var0005 = var0003->get_object_position();
				var0005[0x0002] += 0x000A;
				KYLISTA->move_object(var0005);
				KYLISTA->si_path_run_usecode([0x0408, 0x0672, 0x0000], SI_PATH_SUCCESS, KYLISTA->get_npc_object(), Func07F8, false);
				Func097F(KYLISTA, "@Don't shove me!@", 0x0007);
			}
			if (VOLDIN->get_item_flag(DEAD)) {
				var0003 = Func09A0(0x0001, 0x0001)->set_item_quality(0x005C);
			}
			abort;
		}
		if (var0000 == 0x005B) {
			var0003 = AVATAR->get_object_position() & (0x0001 & 0x0006);
			var0003 = var0003->find_nearby(0x0113, 0x000A, MASK_EGG);
			if (var0003) {
				var0005 = var0003->get_object_position();
				var0005[0x0002] += 0x000A;
				VOLDIN->move_object(var0005);
				VOLDIN->si_path_run_usecode([0x0406, 0x0672, 0x0000], SI_PATH_SUCCESS, VOLDIN->get_npc_object(), Func07F8, false);
				Func097F(VOLDIN, "@Save us, Lady Yelinda!@", 0x0002);
			}
			abort;
		}
		if (var0000 == 0x005C) {
			UI_init_conversation();
			ALYSSAND->show_npc_face0(0x0000);
			say("\"Voldin and Kylista have played us all for fools! And we have followed blindly along...\"");
			if (VOLDIN->get_item_flag(DEAD)) {
				KYLISTA->show_npc_face1(0x0000);
			} else {
				VOLDIN->show_npc_face1(0x0000);
			}
			say("\"Silence, chit! What dost thou know of these matters?\"");
			UI_remove_npc_face1();
			0x0000->set_conversation_slot();
			say("\"I am certain that heaven built the levers in the secret room! Kylista, hath it been a great boon to thee, being a mouthpiece of the heavens?\"");
			KYLISTA->show_npc_face1(0x0000);
			say("\"Delin, take thy daughter in hand! She speaks out of turn.\"");
			say("\"As for the levers -- why, they are prayer levers, by which I commune with Beauty! They are sacred, not to be profaned by doubters such as Alyssand.\"");
			UI_remove_npc_face1();
			ALYSSAND->show_npc_face0(0x0000);
			say("\"Then the outcome of the trial would not change, say, if I moved those prayer levers...?\"");
			say("\"Lady Yelinda, wouldst thou please call once again upon the Oracle, for its decision?\"");
			UI_end_conversation();
			KYLISTA->clear_item_say();
			Func097F(KYLISTA, "@It hath already spoken!@", 0x0000);
			Func097F(ALYSSAND, "@See what it says now!@", 0x0002);
			var0003 = script YELINDA after 10 ticks {
				nohalt;
				call Func07F8;
			};
			abort;
		}
		if (var0000 == 0x005D) {
			UI_init_conversation();
			YELINDA->show_npc_face0(0x0000);
			say("\"What can it hurt, Kylista, to speak again to the great Oracle?\"");
			var0003 = Func08AC(false);
			say("\"Again, before the face of Beauty, I call for a verdict upon ",
				var0003,
				"!\"");
			UI_end_conversation();
			var0003 = script ZULITH {
				say "@All rise and face the Oracle!";
				wait 1;
				face north;
			};
			var0008 = UI_get_party_list2();
			for (var0004 in var0008 with var0017 to var0018) {
				var0003 = 0x0007 + UI_get_random(0x0003);
				var0003 = script var0004 after var0003 ticks {
					nohalt;
					face north;
				};
			}
			var0008 = [OLON, DELIN, DELPHYNIA, JENDON, VOLDIN, KYLISTA, ALYSSAND, JORVIN];
			for (var0004 in var0008 with var0019 to var001A) {
				var0003 = script var0004 after (0x0007 + UI_get_random(0x0005)) ticks {
					face north;
				};
			}
			var0008 = [GARTH, JOTH];
			for (var0004 in var0008 with var001B to var001C) {
				var0003 = script var0004 after (0x0007 + UI_get_random(0x0005)) ticks {
					face west;
				};
			}
			var0003 = script YELINDA after 5 ticks {
				nohalt;
				face east;
				actor frame standing;
			};
			var0003 = script ZULITH after 7 ticks {
				nohalt;
				face north;
				actor frame standing;
			};
			var0003 = script item after 20 ticks {
				call Func07F8;
			};
			abort;
		}
		if (var0000 == 0x005E) {
			UI_init_conversation();
			SMUDGE->show_npc_face0(0x0000);
			say("\"Kylista and Voldin have defiled these proceedings! False evidence hath been offered! This trial is a farce!\"");
			var0003 = Func08AC(false);
			say("\"",
				var0003,
				" is innocent! Set ",
				var0003,
				" and his companions free!\"");
			YELINDA->show_npc_face1(0x0000);
			say("\"What doth this mean? The verdict hath changed...\"");
			UI_remove_npc_face0();
			UI_remove_npc_face1();
			JORVIN->show_npc_face0(0x0000);
			say("\"This means, dearest Lady, that the Oracle will proclaim any result which the secret levers request. I saw Alyssand instruct the Oracle to give this verdict, with my very own eyes!\"");
			YELINDA->show_npc_face1(0x0000);
			if (VOLDIN->get_item_flag(DEAD)) {
				say("\"We are betrayed! Take Kylista from my sight! I shall deal with her perfidy later...\"");
			} else {
				say("\"We are betrayed! Take them from my sight! I shall deal with their perfidy later...\"");
			}
			UI_end_conversation();
			Func097F(JORVIN, "@Come with me...@", 0x0000);
			var0003 = AVATAR->get_object_position() & (0x0001 & 0x0006);
			var0003 = var0003->find_nearby(0x0113, 0x000A, MASK_EGG);
			if (var0003) {
				var0005 = var0003->get_object_position();
				var0005[0x0002] += 0x000A;
				JORVIN->si_path_run_usecode(var0005, SI_PATH_SUCCESS, JORVIN->get_npc_object(), Func07F8, false);
			}
			abort;
		}
		if (var0000 == 0x005F) {
			JORVIN->move_object([0x0000, 0x0000, 0x0000]);
			JORVIN->set_schedule_type(WAIT);
			var0003 = AVATAR->get_object_position() & (0x0001 & 0x0006);
			var0003 = var0003->find_nearby(0x0113, 0x000A, MASK_EGG);
			if (var0003) {
				var0005 = var0003->get_object_position();
				var0005[0x0002] += 0x000B;
				KYLISTA->si_path_run_usecode(var0005, SI_PATH_SUCCESS, KYLISTA->get_npc_object(), Func07F8, false);
				Func097F(KYLISTA, "@Vengeance shall be mine!@", 0x0000);
				Func097F(ALYSSAND, "@Truth shall prevail!@", 0x0004);
			}
			abort;
		}
		if (var0000 == 0x0060) {
			Func09AC(KYLISTA, 0x03DC, 0x0616, TEND_SHOP);
			if (VOLDIN->get_item_flag(DEAD)) {
				var0003 = Func09A0(0x0001, 0x0001)->set_item_quality(0x0062);
				var0003 = script AVATAR {
					nohalt;
					call Func07F8;
				};
			} else {
				var0003 = AVATAR->get_object_position() & (0x0001 & 0x0006);
				var0003 = var0003->find_nearby(0x0113, 0x000A, MASK_EGG);
				if (var0003) {
					var0005 = var0003->get_object_position();
					var0005[0x0002] += 0x000A;
					VOLDIN->si_path_run_usecode(var0005, SI_PATH_SUCCESS, VOLDIN->get_npc_object(), Func07F8, false);
					Func097F(VOLDIN, "@She lied to me...@", 0x0000);
				}
			}
			abort;
		}
		if (var0000 == 0x0061) {
			Func09AC(VOLDIN, 0x03DC, 0x0617, TEND_SHOP);
			var0003 = script AVATAR {
				nohalt;
				call Func07F8;
			};
		}
		if (var0000 == 0x0062) {
			UI_init_conversation();
			YELINDA->show_npc_face0(0x0000);
			var0003 = Func08AC(false);
			say("\"",
				var0003,
				", we have wronged thee. There is nothing I can do to erase our shame, but I would be pleased if thou wouldst accept a token of our regret.\"");
			say("\"Here is the Crystal Rose of Love...\"");
			var0003 = Func08AC(true);
			var0003 = Func099B(var0003, 0x0001, 0x0289, QUALITY_ANY, 0x0003, 0x0000, true);
			Func095D(0x0190);
			if (gflags[ORACLE_SET_TO_CORRUPT]) {
				var0003 = AVATAR->get_object_position() & (0x0001 & 0x0006);
				var0003 = var0003->find_nearby(0x0113, 0x000A, MASK_EGG);
				if (var0003) {
					var0005 = var0003->get_object_position();
					var0005[0x0002] += 0x000A;
					UI_play_music(0x0014, Func09A0(0x0005, 0x0001));
					ALYSSAND->move_object(var0005);
					var0005[0x0002] -= 0x0008;
					ALYSSAND->si_path_run_usecode(var0005, SI_PATH_SUCCESS, ALYSSAND->get_npc_object(), Func07F8, false);
				}
				UI_end_conversation();
				abort;
			}
			var0003 = Func09A0(0x0001, 0x0001)->set_item_quality(0x0066);
			var0000 = 0x0065;
		}
		if (var0000 == 0x0063) {
			ALYSSAND->clear_item_say();
			Func097F(ALYSSAND, "@Good news!@", 0x0000);
			ALYSSAND->set_schedule_type(WAIT);
			var0003 = script ALYSSAND {
				nohalt;
				actor frame cast_out;
				wait 2;
				actor frame cast_up;
				wait 2;
				actor frame standing;
			};
			var0008 = UI_get_party_list2();
			for (var0004 in var0008 with var001D to var001E) {
				var0003 = script var0004 after (0x0002 + UI_get_random(0x0003)) ticks {
					face south;
				};
			}
			var0008 = [OLON, DELIN, DELPHYNIA, GARTH, JOTH, JENDON];
			for (var0004 in var0008 with var001F to var0020) {
				var0003 = script var0004 after (0x0004 + UI_get_random(0x0004)) ticks {
					actor frame bowing;
					actor frame standing;
					face west;
				};
			}
			var0008 = [YELINDA, ZULITH];
			for (var0004 in var0008 with var0021 to var0022) {
				var0003 = script var0004 after (0x0003 + UI_get_random(0x0003)) ticks {
					face east;
				};
			}
			var0003 = AVATAR->get_object_position() & (0x0001 & 0x0006);
			var0003 = var0003->find_nearby(0x0113, 0x000A, MASK_EGG);
			if (var0003) {
				var0005 = var0003->get_object_position();
				var0005[0x0002] += 0x000A;
				JORVIN->move_object(var0005);
				JORVIN->si_path_run_usecode([0x0406, 0x0670, 0x0000], SI_PATH_SUCCESS, JORVIN->get_npc_object(), Func07F8, false);
			}
			abort;
		}
		if (var0000 == 0x0064) {
			JORVIN->set_schedule_type(WAIT);
			UI_init_conversation();
			JORVIN->show_npc_face0(0x0000);
			if (VOLDIN->get_item_flag(DEAD)) {
				say("\"We have captured the falsehearted traitor, Lady Yelinda! Kylista is in chains, and Great Captain Voldin hath been found dead...\"");
			} else {
				say("\"We have captured the falsehearted traitors, Lady Yelinda! Kylista and Voldin are in chains.\"");
			}
			YELINDA->show_npc_face1(0x0000);
			say("\"Thou hast acted correctly, Jorvin -- the Oracle hath just denounced them...\"");
			UI_remove_npc_face1();
			0x0000->set_conversation_slot();
			say("\"The Priestess of Beauty hath confessed to me that she and Great Captain Voldin were united in an evil conspiracy.\"");
			say("\"By use of secret levers, they dared to control the utterings of the sacred Oracle! Only by the actions of the brave ",
				var0001,
				" hath the Oracle been freed to utter the truth!\"");
			ALYSSAND->show_npc_face1(0x0000);
			say("\"Who knows how long this deception hath been practiced! Have the citizens of Fawn always been the victims of the Great Captains and the Priestess?\"");
			UI_remove_npc_face1();
			0x0000->set_conversation_slot();
			say("\"I did mistrust thy words previously, Alyssand, but now that Kylista hath confessed... I know not what to believe.\"");
			YELINDA->show_npc_face1(0x0000);
			if (VOLDIN->get_item_flag(DEAD)) {
				say("\"Such perfidy makes my blood run cold. Have the Priestess jailed until I decide what fate she deserves!\"");
				say("\"As for Voldin's death -- that saves me the trouble of having him executed. Praise the deed!\"");
			} else {
				say("\"Such perfidy makes my blood run cold. Have the traitors jailed until I decide what fate they deserve!\"");
				Func09AC(VOLDIN, 0x03DC, 0x0617, TEND_SHOP);
			}
			var0003 = script YELINDA {
				nohalt;
				call Func07F8;
			};
			UI_end_conversation();
			Func09AC(KYLISTA, 0x03DC, 0x0616, TEND_SHOP);
			abort;
		}
		if (var0000 == 0x0065) {
			UI_init_conversation();
			YELINDA->show_npc_face0(0x0000);
			var0003 = Func08AC(false);
			say("\"I am sorry that we have delayed thee in thy quest, ",
				var0003,
				". Please forgive us.\"");
			say("\"Thou mayest leave Fawn freely, and be assured of a warm welcome if thou shouldst return. Thou hast shown me that I have much to learn about being a ruler... And I thank thee.\"");
			say("\"Guards, release ",
				var0003,
				".\"");
			UI_end_conversation();
			var0003 = AVATAR->get_object_position() & (0x0001 & 0x0006);
			var0003 = var0003->find_nearby(0x0113, 0x000A, MASK_EGG);
			if (var0003) {
				var0004 = var0003->find_nearby(0x017D, 0x0003, MASK_NPC2);
				if (var0004) {
					var0005 = var0003->get_object_position();
					var0005[0x0002] += 0x0001;
					var0004->si_path_run_usecode(var0005, SI_PATH_SUCCESS, var0004, Func07F8, false);
				}
			}
			abort;
		}
		if (var0000 == 0x0066) {
			var0003 = script item {
				face north;
				wait 2;
				actor frame bowing;
				call Func07F8;
			};
			abort;
		}
		if (var0000 == 0x0067) {
			var0003 = find_nearby(0x017A, 0x0005, MASK_NONE);
			for (var0008 in var0003 with var0023 to var0024) {
				if (var0008->get_item_frame() == 0x0005) {
					UI_play_sound_effect(0x0075);
					var0008->remove_item();
				}
			}
			var0003 = find_nearby(0x017A, 0x0032, MASK_NONE);
			for (var0008 in var0003 with var0025 to var0026) {
				if (var0008->get_item_frame() == 0x0006) {
					var0008->remove_item();
				}
			}
			var0003 = find_nearby(0x01B1, 0x0032, MASK_NONE) & find_nearby(0x0178, 0x0032, MASK_NONE);
			for (var0008 in var0003 with var0027 to var0028) {
				if (var0008->get_item_quality() == 0x0028) {
					Func0907(var0008, 0x0000);
				}
			}
			var0003 = script item {
				actor frame bowing;
				wait 2;
				actor frame standing;
				call Func07F8;
			};
			abort;
		}
		if (var0000 == 0x0068) {
			var0003 = AVATAR->get_object_position() & (0x0001 & 0x0006);
			var0003 = var0003->find_nearby(0x0113, 0x000A, MASK_EGG);
			if (var0003) {
				var0005 = var0003->get_object_position();
				var0005[0x0001] += 0x0003;
				var0005[0x0002] += 0x0001;
				si_path_run_usecode(var0005, SI_PATH_SUCCESS, item, Func07F8, false);
			}
			abort;
		}
		if (var0000 == 0x0069) {
			AVATAR->clear_item_flag(DONT_MOVE);
			UI_init_conversation();
			set_schedule_type(STANDTHERE);
			var0003 = script ZULITH {
				say "@This trial is now dismissed!@";
			};
			var0003 = [OLON, DELIN, DELPHYNIA, JENDON, GARTH, JOTH, YELINDA, ZULITH, JORVIN, ALYSSAND];
			for (var0004 in var0003 with var0029 to var002A) {
				var0004->run_schedule();
				var0008 = UI_get_random(0x0008);
				var0005 = new script {
					nohalt;
				};
				while (var0008 > 0x0000) {
					var0005 = var0005 & new script actor frame standing;;
					var0008 -= 0x0001;
				}
				var0008 = var0004->run_script(var0005);
			}
			gflags[DUPRE_ACCUSED] = false;
			gflags[IOLO_ACCUSED] = false;
			gflags[SHAMINO_ACCUSED] = false;
			gflags[FAWN_TRIAL_DONE_FIRST_DAY] = true;
			if (gflags[ORACLE_SET_TO_INNOCENT]) {
				KYLISTA->run_schedule();
				VOLDIN->run_schedule();
			}
		}
	}
}

extern var Func0953 0x953 ();
extern var Func08AC 0x8AC (var var0000);
extern void Func097F 0x97F (var var0000, var var0001, var var0002);
extern void Func08C6 0x8C6 ();
extern void Func08C7 0x8C7 ();
extern var Func09A0 0x9A0 (var var0000, var var0001);
extern void Func094F 0x94F (var var0000, var var0001);
extern var Func095B 0x95B (var var0000);
extern void Func093C 0x93C (var var0000);
extern var Func0957 0x957 (var var0000);
extern void Func08C5 0x8C5 ();

void Func093B 0x93B (var var0000) {
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;
	var var0008;
	var var0009;
	var var000A;
	var var000B;
	var var000C;

	var0001 = Func0953();
	var0002 = Func08AC(false);
	if (var0000 == 0x0014) {
		if (gflags[FAWN_TRIAL_DONE_FIRST_DAY]) {
			UI_init_conversation();
			KYLISTA->show_npc_face0(0x0000);
			say("\"Let it be known that ",
				var0002,
				", companion of ",
				var0001,
				", doth stand accused of treason!\"");
			say("\"In blatant disregard for the law, ",
				var0002,
				" hath sought to incite rebellion against Lady Yelinda.\"");
			say("\"Worse yet, he doth admit allegiance to that archfiend, Beast British!\"");
			UI_end_conversation();
			var0003 = script KYLISTA {
				wait 2;
				face west;
			};
			var0003 = script item after 15 ticks {
				call Func07F8;
			};
			Func097F(DELIN, "@Not the Beast!@", 0x0000);
			Func097F(OLON, "@Execute him!@", 0x0003);
			Func097F(VOLDIN, "@Blasphemy!@", 0x0005);
			Func097F(LEON, "@The lord of Britannia?@", 0x0002);
			Func097F(ZULITH, "@Cleanse the Temple!@", 0x0004);
		} else {
			UI_init_conversation();
			YELINDA->show_npc_face0(0x0000);
			say("\"Where is the Priestess of Beauty? And where is Great Captain Voldin?\"");
			ZULITH->show_npc_face1(0x0000);
			say("\"Um... I am not sure, thy Ladyship. Nor is Jorvin to be found.\"");
			UI_remove_npc_face1();
			0x0000->set_conversation_slot();
			say("\"It is most improper that neither Voldin nor Kylista are here... But I shall not have justice detained.\"");
			say("\"I shall continue in Kylista's place...\"");
			UI_end_conversation();
			YELINDA->si_path_run_usecode([0x03FE, 0x0666, 0x0006], SI_PATH_SUCCESS, YELINDA->get_npc_object(), Func07F8, false);
		}
		abort;
	}
	if (var0000 == 0x0015) {
		if (gflags[FAWN_TRIAL_DONE_FIRST_DAY]) {
			UI_init_conversation();
			KYLISTA->show_npc_face0(0x0000);
			say("\"Lady Yelinda, as thou dost rule this city, dost thou wish to conduct the questioning?\"");
			UI_end_conversation();
			var0003 = script YELINDA after 2 ticks {
				nohalt;
				actor frame bowing;
				wait 2;
				actor frame standing;
				say "@No...@";
				wait 7;
				call Func07F8;
			};
		} else {
			set_schedule_type(WAIT);
			var0003 = script ZULITH {
				nohalt;
				say "@Hail the Lady!@";
				actor frame bowing;
				wait 2;
				actor frame standing;
				wait 3;
				call Func07F8;
			};
		}
		abort;
	}
	if (var0000 == 0x0016) {
		if (gflags[FAWN_TRIAL_DONE_FIRST_DAY]) {
			UI_init_conversation();
			YELINDA->show_npc_face0(0x0000);
			say("\"I fear that the witnesses might be tempted to spare my sensibilities, instead of reciting the bare facts.\"");
			KYLISTA->show_npc_face1(0x0000);
			say("\"Wouldst thou wish one of thy Councillors to act in thy stead?\"");
			UI_remove_npc_face1();
			0x0000->set_conversation_slot();
			say("\"Let it be so! As most senior of my Councillors, Voldin always doth have my best interests at heart.\"");
			UI_end_conversation();
			var0003 = script YELINDA {
				nohalt;
				actor frame bowing;
				actor frame sitting;
			};
			var0003 = script KYLISTA {
				wait 2;
				face north;
				continue;
				actor frame step_right;
				wait 2;
				continue;
				actor frame standing;
			};
			Func08C6();
			Func097F(KYLISTA, "@Dost thou accept?@", 0x0000);
			var0003 = script VOLDIN after 10 ticks {
				nohalt;
				actor frame bowing;
				actor frame standing;
				say "@Yes.@";
				wait 1;
				actor frame bowing;
				wait 1;
				actor frame kneeling;
				wait 1;
				actor frame bowing;
				actor frame standing;
				call Func07F8;
			};
		} else {
			UI_init_conversation();
			ZULITH->show_npc_face0(0x0000);
			say("\"All hail the Lady Yelinda, who hath condescended to conduct this portion of the trial in person.\"");
			UI_end_conversation();
			Func08C6();
			Func097F(GARTH, "@To the Lady!@", 0x0002);
			Func097F(JENDON, "@All hail!@", 0x0000);
			Func097F(DELIN, "@Hail the Lady!@", 0x0005);
			Func097F(DELPHYNIA, "@Oh great Lady!@", 0x0009);
			Func097F(OLON, "@Whatever...!@", 0x000F);
			var0003 = script YELINDA after 20 ticks {
				nohalt;
				repeat 2 {
					actor frame cast_up;
					wait 2;
					actor frame cast_out;
					wait 2;
				};
				actor frame standing;
				call Func07F8;
			};
		}
		abort;
	}
	if (var0000 == 0x0017) {
		if (gflags[FAWN_TRIAL_DONE_FIRST_DAY]) {
			UI_init_conversation();
			VOLDIN->show_npc_face0(0x0000);
			say("\"It would be my pleasure to act on the Lady's behalf.\"");
			KYLISTA->show_npc_face1(0x0000);
			say("\"We shall now hear the evidence against the traitor.\"");
			UI_end_conversation();
			var0003 = script KYLISTA {
				wait 2;
				face west;
				wait 2;
				actor frame bowing;
				wait 2;
				actor frame sitting;
			};
			Func08C7();
			var0003 = script JORVIN {
				say "@A moment...@";
				wait 2;
				actor frame bowing;
				wait 2;
				actor frame standing;
				wait 2;
				call Func07F8;
			};
		} else {
			UI_init_conversation();
			YELINDA->show_npc_face0(0x0000);
			say("\"",
				var0002,
				"'s representative, ",
				var0001,
				", shall now present the facts to defend his friend.\"");
			say("\"",
				var0001,
				", thou mayest call upon any citizen present in the Temple, and mayest ask any questions pertinent to this case.\"");
			UI_end_conversation();
			Func08C7();
			var0003 = script ZULITH {
				say "@Pardon, Lady...@";
				wait 2;
				actor frame bowing;
				wait 2;
				actor frame standing;
				wait 2;
				call Func07F8;
			};
		}
		abort;
	}
	if (var0000 == 0x0018) {
		if (gflags[FAWN_TRIAL_DONE_FIRST_DAY]) {
			UI_init_conversation();
			JORVIN->show_npc_face0(0x0000);
			say("\"For the purpose of this trial, it hath been necessary to admit certain disreputable characters into the city --\"");
			say("\"Namely, those who belong to the organization called The Fellowship, which doth dare to preach contrary to Beauty.\"");
			say("\"I would remind our Fellowship guests that they are here on sufferance, and that they should mind their manners.\"");
			UI_play_music(0x001A, Func09A0(0x0005, 0x0001));
			LEON->show_npc_face1(0x0000);
			say("\"We shall behave ourselves, milord. The Fellowship is an enlightened brotherhood, not a group to be feared.\"");
			UI_remove_npc_face1();
			0x0000->set_conversation_slot();
			say("\"We shall see...\"");
			UI_end_conversation();
			var0003 = script JORVIN after 4 ticks {
				nohalt;
				actor frame bowing;
				wait 2;
				actor frame sitting;
			};
			var0004 = VOLDIN->get_object_position() & (0x0003 & 0x0006);
			var0005 = var0004->find_nearby(0x0113, 0x001E, MASK_EGG);
			if (var0005) {
				var0006 = var0005->get_object_position();
				VOLDIN->si_path_run_usecode(var0006, SI_PATH_SUCCESS, VOLDIN->get_npc_object(), Func07F8, false);
			}
			Func08C6();
		} else {
			UI_init_conversation();
			ZULITH->show_npc_face0(0x0000);
			say("\"Excuse me, Great Lady, but I must address a point of order.\"");
			say("\"Since The Fellowship troublemakers were so disagreeable in our earlier meeting, they have been excluded from this session of the trial.\"");
			UI_end_conversation();
			Func097F(ZULITH, "@Avatar...@", 0x0002);
			var0003 = script YELINDA after 7 ticks {
				nohalt;
				call Func07F8;
			};
			gflags[FAWN_TRIAL_ALYSSAND_SPOKE] = false;
			gflags[FAWN_TRIAL_DELIN_SPOKE] = false;
			gflags[FAWN_TRIAL_DELPHYNIA_SPOKE] = false;
			gflags[FAWN_TRIAL_JENDON_SPOKE] = false;
			gflags[FAWN_TRIAL_JORVIN_SPOKE] = false;
			gflags[FAWN_TRIAL_VOLDIN_SPOKE] = false;
			gflags[FAWN_TRIAL_KYLISTA_SPOKE] = false;
			gflags[FAWN_TRIAL_LEON_JOTH_SPOKE] = false;
			gflags[FAWN_TRIAL_OLON_SPOKE] = false;
			gflags[FAWN_TRIAL_RUGGS_GARTH_SPOKE] = false;
			gflags[FAWN_TRIAL_SCOTS_SPOKE] = false;
			gflags[FAWN_TRIAL_YELINDA_SPOKE] = false;
			gflags[FAWN_TRIAL_ZULITH_SPOKE] = false;
		}
		abort;
	}
	if (var0000 == 0x0019) {
		if (gflags[FAWN_TRIAL_DONE_FIRST_DAY]) {
			var0003 = script VOLDIN {
				nohalt;
				actor frame ready;
				face south;
			};
		} else {
			var0003 = script ZULITH {
				nohalt;
				say "@Avatar...@";
				actor frame ready;
			};
		}
		var0003 = script item after 6 ticks {
			call Func07F8;
		};
		abort;
	}
	if (var0000 == 0x001A) {
		if (gflags[FAWN_TRIAL_DONE_FIRST_DAY]) {
			var0007 = false;
		} else {
			var0007 = [];
		}
		if (!gflags[FAWN_TRIAL_YELINDA_SPOKE]) {
			if (gflags[FAWN_TRIAL_DONE_FIRST_DAY] && (((((((((((gflags[FAWN_TRIAL_ALYSSAND_SPOKE] + gflags[FAWN_TRIAL_DELIN_SPOKE]) + gflags[FAWN_TRIAL_DELPHYNIA_SPOKE]) + gflags[FAWN_TRIAL_JENDON_SPOKE]) + gflags[FAWN_TRIAL_JORVIN_SPOKE]) + gflags[FAWN_TRIAL_KYLISTA_SPOKE]) + gflags[FAWN_TRIAL_LEON_JOTH_SPOKE]) + gflags[FAWN_TRIAL_OLON_SPOKE]) + gflags[FAWN_TRIAL_RUGGS_GARTH_SPOKE]) + gflags[FAWN_TRIAL_SCOTS_SPOKE]) + gflags[FAWN_TRIAL_ZULITH_SPOKE]) > 0x0003)) {
				UI_init_conversation();
				VOLDIN->show_npc_face0(0x0000);
				say("\"I call the Lady Yelinda to witness before the Oracle.\"");
				UI_end_conversation();
				var0003 = script ZULITH {
					say "@Now wait, Voldin!@";
					actor frame bowing;
					wait 2;
					actor frame standing;
					wait 3;
					call Func07FB;
				};
				var0003 = Func09A0(0x0001, 0x0001)->set_item_quality(0x0034);
				abort;
			}
			if (gflags[FAWN_TRIAL_DONE]) {
				var0007 &= YELINDA;
			}
		}
		if (!gflags[FAWN_TRIAL_OLON_SPOKE]) {
			if (gflags[FAWN_TRIAL_DONE_FIRST_DAY] && ((((((((((((gflags[FAWN_TRIAL_ALYSSAND_SPOKE] + gflags[FAWN_TRIAL_DELIN_SPOKE]) + gflags[FAWN_TRIAL_DELPHYNIA_SPOKE]) + gflags[FAWN_TRIAL_JENDON_SPOKE]) + gflags[FAWN_TRIAL_JORVIN_SPOKE]) + gflags[FAWN_TRIAL_KYLISTA_SPOKE]) + gflags[FAWN_TRIAL_LEON_JOTH_SPOKE]) + gflags[FAWN_TRIAL_OLON_SPOKE]) + gflags[FAWN_TRIAL_RUGGS_GARTH_SPOKE]) + gflags[FAWN_TRIAL_SCOTS_SPOKE]) + gflags[FAWN_TRIAL_YELINDA_SPOKE]) + gflags[FAWN_TRIAL_ZULITH_SPOKE]) > 0x0001)) {
				var0008 = ["@I have had enough!@", "@I'm off fer a drink.@"];
				Func094F(OLON, var0008);
				var0003 = Func09A0(0x0001, 0x0001)->set_item_quality(0x002E);
				var0003 = script OLON {
					nohalt;
					actor frame bowing;
					actor frame standing;
					call Func07FB;
				};
				abort;
			}
			if (gflags[FAWN_TRIAL_DONE]) {
				var0007 &= OLON;
			}
		}
		if (!gflags[FAWN_TRIAL_ZULITH_SPOKE]) {
			if (gflags[FAWN_TRIAL_DONE_FIRST_DAY] && ZULITH->get_item_flag(MET)) {
				var0007 = ZULITH;
			}
			if (gflags[FAWN_TRIAL_DONE]) {
				var0007 &= ZULITH;
			}
		}
		if ((!gflags[FAWN_TRIAL_SCOTS_SPOKE]) && (SCOTS->get_item_flag(MET) && ((!SCOTS->get_item_flag(DEAD)) && gflags[FAWN_TRIAL_DONE_FIRST_DAY]))) {
			var0007 = SCOTS;
		}
		if ((!gflags[FAWN_TRIAL_ALYSSAND_SPOKE]) && ALYSSAND->get_item_flag(MET)) {
			if (gflags[FAWN_TRIAL_DONE_FIRST_DAY]) {
				var0007 = ALYSSAND;
			}
		}
		if (!gflags[FAWN_TRIAL_JENDON_SPOKE]) {
			if (gflags[FAWN_TRIAL_DONE_FIRST_DAY] && JENDON->get_item_flag(MET)) {
				var0007 = JENDON;
			}
			if (gflags[FAWN_TRIAL_DONE]) {
				var0007 &= JENDON;
			}
		}
		if ((!gflags[FAWN_TRIAL_JORVIN_SPOKE]) && (gflags[FAWN_TRIAL_DONE_FIRST_DAY] && JORVIN->get_item_flag(MET))) {
			var0007 = JORVIN;
		}
		if ((!gflags[FAWN_TRIAL_KYLISTA_SPOKE]) && (KYLISTA->get_item_flag(MET) && gflags[FAWN_TRIAL_DONE_FIRST_DAY])) {
			var0007 = KYLISTA;
		}
		if (!gflags[FAWN_TRIAL_RUGGS_GARTH_SPOKE]) {
			if (gflags[FAWN_TRIAL_DONE_FIRST_DAY] && (RUGGS->get_item_flag(MET) && (!RUGGS->get_item_flag(DEAD)))) {
				var0007 = RUGGS;
			}
			if (gflags[FAWN_TRIAL_DONE]) {
				var0007 &= GARTH;
			}
		}
		if (!gflags[FAWN_TRIAL_DELIN_SPOKE]) {
			if (gflags[FAWN_TRIAL_DONE_FIRST_DAY] && DELIN->get_item_flag(MET)) {
				var0007 = DELIN;
			}
			if (gflags[FAWN_TRIAL_DONE]) {
				var0007 &= DELIN;
			}
		}
		if (!gflags[FAWN_TRIAL_LEON_JOTH_SPOKE]) {
			if (gflags[FAWN_TRIAL_DONE_FIRST_DAY] && (LEON->get_item_flag(MET) && (!LEON->get_item_flag(DEAD)))) {
				var0007 = LEON;
			}
			if (gflags[FAWN_TRIAL_DONE]) {
				var0007 &= JOTH;
			}
		}
		if (!gflags[FAWN_TRIAL_DELPHYNIA_SPOKE]) {
			if (gflags[FAWN_TRIAL_DONE_FIRST_DAY] && DELPHYNIA->get_item_flag(MET)) {
				var0007 = DELPHYNIA;
			}
			if (gflags[FAWN_TRIAL_DONE]) {
				var0007 &= DELPHYNIA;
			}
		}
		if ((!gflags[FAWN_TRIAL_VOLDIN_SPOKE]) && var0007) {
			if (gflags[FAWN_TRIAL_DONE_FIRST_DAY] && ((((((((((((gflags[FAWN_TRIAL_ALYSSAND_SPOKE] + gflags[FAWN_TRIAL_DELIN_SPOKE]) + gflags[FAWN_TRIAL_DELPHYNIA_SPOKE]) + gflags[FAWN_TRIAL_JENDON_SPOKE]) + gflags[FAWN_TRIAL_JORVIN_SPOKE]) + gflags[FAWN_TRIAL_KYLISTA_SPOKE]) + gflags[FAWN_TRIAL_LEON_JOTH_SPOKE]) + gflags[FAWN_TRIAL_OLON_SPOKE]) + gflags[FAWN_TRIAL_RUGGS_GARTH_SPOKE]) + gflags[FAWN_TRIAL_SCOTS_SPOKE]) + gflags[FAWN_TRIAL_YELINDA_SPOKE]) + gflags[FAWN_TRIAL_ZULITH_SPOKE]) > 0x0004)) {
				var0003 = Func09A0(0x0001, 0x0001)->set_item_quality(0x0022);
				var0003 = script VOLDIN {
					nohalt;
					actor frame standing;
				};
				var0003 = script YELINDA {
					nohalt;
					say "@If I may...@";
					actor frame bowing;
					wait 1;
					actor frame standing;
					call Func07FB;
				};
				abort;
			}
		}
		if (var0007 && gflags[FAWN_TRIAL_DONE_FIRST_DAY]) {
			UI_init_conversation();
			VOLDIN->show_npc_face0(0x0000);
			var0009 = Func095B(var0007);
			say("\"I call ",
				var0009,
				" to witness before the Oracle.\"");
			UI_end_conversation();
			Func093C(var0007);
			var0003 = script VOLDIN after 5 ticks {
				nohalt;
				actor frame standing;
			};
			if (var0007 == ALYSSAND) {
				UI_play_music(0x0014, Func09A0(0x0005, 0x0001));
			}
			if (var0007 == DELIN) {
				UI_play_music(0x000C, Func09A0(0x0005, 0x0001));
			}
			if (var0007 == JORVIN) {
				Func097F(JORVIN, "@Yes, yes...@", 0x000A);
			}
			if (var0007 == KYLISTA) {
				Func097F(KYLISTA, "@Really, Voldin!@", 0x000E);
			}
			if (var0007 == RUGGS) {
				Func097F(YELINDA, "@He is so ugly...@", 0x000A);
				Func097F(ALYSSAND, "@Oh, my...@", 0x000E);
				UI_play_music(0x000A, Func09A0(0x0005, 0x0001));
			}
			if (var0007 == ZULITH) {
				Func097F(ZULITH, "@What!@", 0x000A);
			}
			abort;
		}
		if (gflags[FAWN_TRIAL_DONE_FIRST_DAY] && (!var0007)) {
			UI_play_music(0x0013, Func09A0(0x0005, 0x0001));
			UI_init_conversation();
			VOLDIN->show_npc_face0(0x0000);
			say("\"I have called my last witness, and have presented proof that ",
				var0002,
				" is guilty of the crimes with which he is charged.\"");
			say("\"I yield the floor to Priestess Kylista...\"");
			UI_end_conversation();
			var0003 = script KYLISTA {
				nohalt;
				say "@Hear ye!@";
				actor frame bowing;
				actor frame standing;
				actor frame cast_out;
				continue;
				sfx 30;
				actor frame cast_up;
				continue;
				sfx 30;
				actor frame standing;
				continue;
				sfx 30;
			};
			var0003 = Func09A0(0x0001, 0x0001)->set_item_quality(0x0057);
			var0004 = VOLDIN->get_object_position() & (0x0006 & 0x0006);
			var0005 = var0004->find_nearby(0x0113, 0x0028, MASK_EGG);
			if (var0005) {
				var0006 = var0005->get_object_position();
				VOLDIN->si_path_run_usecode(var0006, SI_PATH_SUCCESS, VOLDIN->get_npc_object(), Func07F8, false);
			}
			abort;
		}
		UI_init_conversation();
		ZULITH->show_npc_face0(0x0000);
		if (gflags[FAWN_TRIAL_DONE] && var0007) {
			say("\"Whom wouldst thou care to call before the Oracle?\"");
			var0009 = Func0957(var0007->get_npc_name() & "no one");
			var000A = UI_get_array_size(var0007);
			if (var0009 > UI_get_array_size(var0007)) {
				var0007 = [];
			} else {
				var0003 = var0007[var0009]->get_npc_name();
				say("\"I call ",
					var0003,
					" to witness before the Oracle.\"");
				Func093C(var0007[var0009]);
				UI_end_conversation();
				abort;
			}
		}
		if (gflags[FAWN_TRIAL_DONE] && (!var0007)) {
			UI_play_music(0x0013, Func09A0(0x0005, 0x0001));
			var000B = ((((((((((gflags[FAWN_TRIAL_ALYSSAND_SPOKE] + gflags[FAWN_TRIAL_DELIN_SPOKE]) + gflags[FAWN_TRIAL_DELPHYNIA_SPOKE]) + gflags[FAWN_TRIAL_JENDON_SPOKE]) + gflags[FAWN_TRIAL_JORVIN_SPOKE]) + gflags[FAWN_TRIAL_KYLISTA_SPOKE]) + gflags[FAWN_TRIAL_LEON_JOTH_SPOKE]) + gflags[FAWN_TRIAL_OLON_SPOKE]) + gflags[FAWN_TRIAL_RUGGS_GARTH_SPOKE]) + gflags[FAWN_TRIAL_SCOTS_SPOKE]) + gflags[FAWN_TRIAL_YELINDA_SPOKE]) + gflags[FAWN_TRIAL_ZULITH_SPOKE];
			if (var000B == 0x0000) {
				say("\"Thou hast not even called one person... No doubt thy trust in the Oracle's perception will be rewarded.\"");
			}
			if (var000B == 0x0001) {
				say("\"Thou hast called but one person... No doubt thy trust in the Oracle's perception will be rewarded.\"");
			}
			if ((var000B == 0x0002) || (var000B == 0x0003)) {
				say("\"So few hast thou called... No doubt thy trust in the Oracle's perception will be rewarded.\"");
			}
			say("\"I yield the floor to Her Graciousness, the Lady Yelinda...\"");
			UI_end_conversation();
			var0003 = Func09A0(0x0001, 0x0001)->set_item_quality(0x0057);
			var0003 = script ZULITH {
				nohalt;
				actor frame bowing;
				actor frame sitting;
			};
			Func097F(YELINDA, "@Hear ye!@", 0x0003);
			var0003 = script YELINDA after 10 ticks {
				nohalt;
				call Func07F8;
			};
			abort;
		}
	}
	if (var0000 == 0x001B) {
		var0004 = get_object_position() & (0x0001 & 0x0006);
		var0005 = var0004->find_nearby(0x0113, 0x0014, MASK_EGG);
		if (var0005) {
			var0006 = var0005->get_object_position();
			var0006[0x0002] += 0x0005;
			si_path_run_usecode(var0006, SI_PATH_SUCCESS, item, Func07F8, false);
		}
		abort;
	}
	if (var0000 == 0x001C) {
		if (item == ALYSSAND->get_npc_object()) {
			var0003 = Func09A0(0x0001, 0x0001)->set_item_quality(0x001E);
		}
		if (item == DELIN->get_npc_object()) {
			var0003 = Func09A0(0x0001, 0x0001)->set_item_quality(0x001F);
			if (gflags[FAWN_TRIAL_DONE_FIRST_DAY]) {
				var0003 = script item {
					nohalt;
					face south;
					actor frame standing;
				};
				Func08C5();
				var0003 = script item after 5 ticks {
					call Func07FB;
				};
				abort;
			}
		}
		if (item == DELPHYNIA->get_npc_object()) {
			var0003 = Func09A0(0x0001, 0x0001)->set_item_quality(0x0026);
		}
		if (item == JENDON->get_npc_object()) {
			var0003 = Func09A0(0x0001, 0x0001)->set_item_quality(0x0027);
		}
		if (item == JORVIN->get_npc_object()) {
			var0003 = Func09A0(0x0001, 0x0001)->set_item_quality(0x0028);
		}
		if (item == KYLISTA->get_npc_object()) {
			var0003 = Func09A0(0x0001, 0x0001)->set_item_quality(0x0029);
		}
		if ((item == LEON->get_npc_object()) || (item == JOTH->get_npc_object())) {
			var0003 = Func09A0(0x0001, 0x0001)->set_item_quality(0x002C);
		}
		if ((item == RUGGS->get_npc_object()) || (item == GARTH->get_npc_object())) {
			var0003 = Func09A0(0x0001, 0x0001)->set_item_quality(0x002F);
		}
		if (item == SCOTS->get_npc_object()) {
			var0003 = Func09A0(0x0001, 0x0001)->set_item_quality(0x0030);
		}
		if (item == OLON->get_npc_object()) {
			var0003 = Func09A0(0x0001, 0x0001)->set_item_quality(0x002E);
		}
		if (item == YELINDA->get_npc_object()) {
			var0003 = Func09A0(0x0001, 0x0001)->set_item_quality(0x0034);
		}
		if (item == ZULITH->get_npc_object()) {
			var0003 = Func09A0(0x0001, 0x0001)->set_item_quality(0x0033);
		}
		var0003 = script item {
			nohalt;
			face north;
			actor frame standing;
		};
		Func08C5();
		if (gflags[FAWN_TRIAL_DONE_FIRST_DAY]) {
			var0003 = script item after 5 ticks {
				call Func07FB;
			};
		} else {
			var0003 = script item after 5 ticks {
				call Func07FC;
			};
		}
		abort;
	}
	if (var0000 == 0x001D) {
		var0006 = get_object_position();
		if (var0006[0x0001] < 0x0407) {
			var000C = 0x0002;
		} else {
			var000C = 0x0006;
		}
		var0003 = script item {
			face var000C;
			wait 3;
			actor frame bowing;
			wait 2;
			actor frame sitting;
		};
		Func08C6();
		set_schedule_type(WAIT);
		var0003 = Func09A0(0x0001, 0x0001)->set_item_quality(0x0019);
		var0003 = script VOLDIN after 5 ticks {
			call Func07F8;
		};
		abort;
	}
}

void Func093C 0x93C (var var0000) {
	var var0001;
	var var0002;
	var var0003;

	var0001 = [", come forward!@", ", stand before the Oracle!@", ", step forward!@", ", please come forward.@", ", come on down!@", "...@"];
	var0002 = ("@" + var0000->get_npc_name()) + var0001[UI_get_random(UI_get_array_size(var0001))];
	var0003 = script ZULITH {
		actor frame bowing;
		wait 2;
		actor frame standing;
		wait 3;
		say var0002;
		wait 7;
		actor frame bowing;
		wait 2;
		actor frame sitting;
	};
	var0003 = script var0000 {
		wait 10;
		actor frame bowing;
		wait 3;
		actor frame standing;
	};
	var0003 = script var0000 after 18 ticks {
		nohalt;
		call Func07F8;
	};
}

var Func093D 0x93D (var var0000, var var0001) {
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;
	var var0008;
	var var0009;
	var var000A;
	var var000B;

	var0002 = [0x0108, 0x0116, 0x029F, 0x00C9, 0x00CB, 0x019F];
	var0003 = [0x0004, 0x0006, 0x0012, 0x0013, 0x0015, 0x0020];
	var0004 = find_nearby(SHAPE_ANY, var0001, MASK_NONE);
	for (var0007 in var0004 with var0005 to var0006) {
		var0008 = var0007->get_item_shape();
		for (var000B in var0002 with var0009 to var000A) {
			if (var000B == var0008) {
				return var0007;
			}
		}
	}
	return 0x0000;
}

void Func093E 0x93E (var var0000) {
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;

	var0001 = [0x0108, 0x0116, 0x029F, 0x00C9, 0x00CB, 0x019F];
	var0002 = [0x0004, 0x0006, 0x0012, 0x0013, 0x0015, 0x0020];
	var0003 = UI_get_array_size(var0001);
	var0004 = UI_get_random(var0003);
	var0005 = UI_create_new_object(var0001[var0004]);
	if (var0005) {
		var0005->set_item_flag(TEMPORARY);
		var0005->set_item_frame(UI_get_random(var0002[var0004]) - 0x0001);
		var0006 = UI_update_last_created(var0000);
	}
}

void Func093F 0x93F (var var0000) {
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;

	var0001 = [0x0322, 0x0323, 0x010B, 0x03A9, 0x02B7, 0x0247, 0x02AA, 0x024B, 0x03E7, 0x0150, 0x03E5, 0x02E9, 0x03DF, 0x0353, 0x0179, 0x035F, 0x012C, 0x0222, 0x0179, 0x03B0, 0x0336, 0x033B];
	var0002 = [0x0002, 0x0002, 0x0004, 0x0005, 0x0001, 0x0001, 0x0013, 0x0005, 0x000A, 0x000F, 0x0011, 0x0001, 0x0001, 0x000B, 0x001C, 0x0013, 0x0020, 0x000C, 0x0014, 0x0008, 0x0002, 0x0005];
	var0003 = UI_get_array_size(var0001);
	var0004 = UI_get_random(var0003);
	var0005 = UI_create_new_object(var0001[var0004]);
	if (var0005) {
		var0005->set_item_flag(TEMPORARY);
		var0005->set_item_frame(UI_get_random(var0002[var0004]) - 0x0001);
		var0006 = UI_update_last_created(var0000);
	}
}

var Func0940 0x940 (var var0000, var var0001) {
	var var0002;

	if (var0001 > 0x0000) {
		var0002 = (var0001 * 0x0002) + 0x0001;
		var0000[0x0001] += (UI_get_random(var0002) - 0x0001) - var0001;
		var0000[0x0002] += (UI_get_random(var0002) - 0x0001) - var0001;
	}
	return var0000;
}

var Func0941 0x941 (var var0000) {
	var var0001;
	var var0002;
	var var0003;

	var0001 = var0000->get_npc_object();
	var0002 = var0001->get_npc_prop(EXPERIENCE) / 100;
	var0003 = 1;
	while (var0002 > 0) {
		var0003 += 1;
		var0002 /= 2;
	}
	return var0003;
}

var Func0942 0x942 (var var0000) {
	var var0001;
	var var0002;

	var0001 = var0000->get_npc_object();
	var0002 = var0001->npc_nearby();
	if (var0001->get_item_flag(INVISIBLE)) {
		var0002 = false;
	}
	return var0002;
}

extern var Func099B 0x99B (var var0000, var var0001, var var0002, var var0003, var var0004, var var0005, var var0006);

var Func0943 0x943 (var var0000, var var0001, var var0002, var var0003, var var0004, var var0005, var var0006, var var0007) {
	var var0008;
	var var0009;
	var var000A;
	var var000B;
	var var000C;
	var var000D;

	var0008 = PARTY->count_objects(var0003, QUALITY_ANY, FRAME_ANY);
	if (var0005 == 0x0000) {
		var0009 = 0x0001;
	} else {
		var0009 = UI_input_numeric_value(var0006, var0005, 0x0001, 0x0001);
	}
	if (var0002 > 0x0001) {
		var000A = var0002 * var0009;
	} else {
		var000A = var0009;
	}
	if (var0009 == 0x0000) {
		var000B = 0x0000;
	} else if (var0008 >= (var0004 * var0009)) {
		var000C = UI_remove_party_items(var0004 * var0009, var0003, QUALITY_ANY, FRAME_ANY, true);
		var000D = Func099B(AVATAR, var000A, var0000, QUALITY_ANY, var0001, var0007, true);
		var000B = 0x0001;
	} else {
		var000B = 0x0003;
	}
	return var000B;
}

var Func0944 0x944 (var var0000, var var0001, var var0002) {
	var var0003;
	var var0004;
	var var0005;
	var var0006;

	var0003 = [0x0001, 0x0002, 0x0003];
	for (var0006 in var0003 with var0004 to var0005) {
		if ((!(var0000[var0006] >= var0001[var0006])) || (!(var0000[var0006] <= var0002[var0006]))) {
			return false;
		}
	}
	return true;
}

extern var Func09A0 0x9A0 (var var0000, var var0001);

void Func0945 0x945 (var var0000) {
	var var0001;

	if ((!var0000->get_item_flag(OKAY_TO_TAKE)) && (!var0000->get_item_flag(IN_DUNGEON))) {
		gflags[CALL_GUARDS_THIEVING] = true;
		UI_close_gumps();
		var0001 = script Func09A0(0x0001, 0x0001) after 3 ticks {
			call Func0633;
		};
	}
}

extern var Func098E 0x98E ();

var Func0946 0x946 () {
	return Func098E()->get_npc_name();
}

var Func0947 0x947 (var var0000, var var0001) {
	var var0002;

	var0002 = var0000->get_distance(var0001);
	if (var0002 < 0x0014) {
		return true;
	}
	return false;
}

void Func0948 0x948 (var var0000) {
	UI_play_sound_effect(0x002B);
	if (var0000 > 0x0006) {
		var0000 = 0x0001;
	}
	UI_flash_mouse(var0000);
}

extern var Func0992 0x992 (var var0000, var var0001, var var0002, var var0003);

void Func0949 0x949 (var var0000) {
	var var0001;

	var0001 = Func0992(0x0001, var0000, var0000, true);
}

extern var Func0992 0x992 (var var0000, var var0001, var var0002, var var0003);

void Func094A 0x94A (var var0000) {
	var var0001;

	var0001 = Func0992(0x0001, var0000, var0000, false);
}

extern var Func0992 0x992 (var var0000, var var0001, var var0002, var var0003);

var Func094B 0x94B () {
	var var0000;

	var0000 = Func0992(0x0001, 0x0000, 0x0000, false);
	return var0000;
}

extern var Func0992 0x992 (var var0000, var var0001, var var0002, var var0003);

var Func094C 0x94C () {
	var var0000;

	var0000 = Func0992(0x0001, 0x0000, 0x0000, false);
	return var0000;
}

extern var Func0992 0x992 (var var0000, var var0001, var var0002, var var0003);

var Func094D 0x94D () {
	var var0000;

	var0000 = Func0992(0x0001, 0x0000, 0x0000, false);
	return var0000;
}

void Func094E 0x94E (var var0000, var var0001) {
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;

	if (var0000 == BOYDON_HEAD) {
		var0000->show_npc_face1(0x0000);
		if (var0000->get_item_flag(CONFUSED)) {
			say("\"Slurp\"");
		} else {
			for (var0004 in var0001 with var0002 to var0003) {
				say(var0004,
					"");
			}
		}
		UI_remove_npc_face1();
		return;
	}
	if (var0000->npc_nearby()) {
		if (var0000->get_item_shape() == 0x02EB) {
			var0000 = AUTOMATON_FACE;
		}
		var0000->show_npc_face1(0x0000);
		if (var0000->get_item_flag(CONFUSED)) {
			say("\"Slurp\"");
		} else {
			for (var0004 in var0001 with var0005 to var0006) {
				say(var0004,
					"");
			}
		}
		UI_remove_npc_face1();
	}
}

extern void Func097F 0x97F (var var0000, var var0001, var var0002);

void Func094F 0x94F (var var0000, var var0001) {
	var var0002;
	var var0003;
	var var0004;
	var var0005;

	if (var0000->npc_nearby()) {
		if (var0000->get_item_flag(CONFUSED)) {
			var0000->item_say("@Slurp@");
		} else {
			var0002 = 0x0000;
			for (var0005 in var0001 with var0003 to var0004) {
				Func097F(var0000, var0005, var0002);
				var0002 += 0x0011;
			}
		}
	}
}

void Func0950 0x950 (var var0000) {
	var var0001;

	var0000->halt_scheduled();
	var0000->set_light(true);
	UI_set_time_palette();
	var0001 = script var0000 after 50 ticks {
		nohalt;
		call Func0600;
	};
}

var Func0951 0x951 () {
	if (UI_get_weather() == SPARKLE) {
		return false;
	}
	return true;
}

var Func0952 0x952 (var var0000) {
	return var0000->get_npc_object()->give_last_created();
}

var Func0953 0x953 () {
	return UI_get_avatar_ref()->get_npc_name();
}

var Func0954 0x954 () {
	if (UI_is_pc_female() == 0x0000) {
		return "milord";
	}
	return "milady";
}

var Func0955 0x955 () {
	UI_push_answers();
	converse (["Yes", "No"]) {
		case "Yes":
			UI_pop_answers();
			return true;

		case "No":
			UI_pop_answers();
			return false;
	}
	return 0;
}

var Func0956 0x956 (var var0000) {
	var var0001;

	UI_push_answers();
	add(var0000);
	var0001 = UI_select_from_menu();
	UI_pop_answers();
	return var0001;
}

var Func0957 0x957 (var var0000) {
	var var0001;

	UI_push_answers();
	add(var0000);
	var0001 = UI_select_from_menu2();
	UI_pop_answers();
	return var0001;
}

extern var Func098E 0x98E ();
extern var Func0957 0x957 (var var0000);

var Func0958 0x958 () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;

	var0000 = Func098E() & 0x0000;
	var0001 = var0000->get_npc_name() & "Nobody";
	var0002 = Func0957([var0001]);
	var0003 = var0000[var0002];
	if (var0003 == 0x0000) {
		return 0x0000;
	}
	return var0003->get_npc_number();
}

extern var Func0957 0x957 (var var0000);

var Func0959 0x959 () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;

	var0000 = UI_get_party_list() & 0x0000;
	var0001 = var0000->get_npc_name() & "Nobody";
	var0002 = Func0957([var0001]);
	var0003 = var0000[var0002];
	if (var0003 == 0x0000) {
		return 0x0000;
	}
	return var0003->get_npc_number();
}

extern var Func0957 0x957 (var var0000);

var Func095A 0x95A () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;

	var0000 = UI_get_party_list2() & 0x0000;
	var0001 = var0000->get_npc_name() & "Nobody";
	var0002 = Func0957([var0001]);
	var0003 = var0000[var0002];
	if (var0003 == 0x0000) {
		return 0x0000;
	}
	return var0003->get_npc_number();
}

var Func095B 0x95B (var var0000) {
	return var0000->get_npc_object()->get_npc_name();
}

var Func095C 0x95C (var var0000, var var0001) {
	return var0000->get_npc_object()->get_npc_prop(var0001);
}

void Func095D 0x95D (var var0000) {
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;

	var0001 = UI_get_party_list();
	for (var0004 in var0001 with var0002 to var0003) {
		var0005 = var0004->set_npc_prop(EXPERIENCE, var0000);
	}
}

void Func095E 0x95E (var var0000, var var0001, var var0002) {
	var var0003;

	var0003 = var0000->get_npc_object()->set_npc_prop(var0001, var0002);
}

var Func095F 0x95F (var var0000, var var0001) {
	var var0002;
	var var0003;
	var var0004;
	var var0005;

	var0002 = 0x0000;
	for (var0005 in var0001 with var0003 to var0004) {
		var0002 += 0x0001;
		if (var0000 == var0005) {
			return var0002;
		}
	}
	return 0x0000;
}

extern void Func095E 0x95E (var var0000, var var0001, var var0002);

void Func0960 0x960 (var var0000, var var0001) {
	var var0002;

	var0002 = 0x0000;
	while (var0002 < var0001) {
		Func095E(var0000, STRENGTH, 1);
		Func095E(var0000, HEALTH, 1);
		Func095E(var0000, TRAINING, -1);
		var0002 += 0x0001;
	}
}

extern var Func095C 0x95C (var var0000, var var0001);
extern void Func095E 0x95E (var var0000, var var0001, var var0002);

void Func0961 0x961 (var var0000, var var0001) {
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;

	var0002 = 0;
	while (var0002 < var0001) {
		var0003 = Func095C(var0000, DEXTERITY);
		Func095E(var0000, DEXTERITY, 1);
		var0004 = var0003 + 1;
		var0005 = Func095C(var0000, COMBAT);
		var0006 = ((var0004 * var0005) + (var0003 - 1)) / var0003;
		Func095E(var0000, COMBAT, var0006 - var0005);
		Func095E(var0000, TRAINING, -1);
		var0002 += 1;
	}
}

extern var Func095C 0x95C (var var0000, var var0001);
extern void Func095E 0x95E (var var0000, var var0001, var var0002);

void Func0962 0x962 (var var0000, var var0001) {
	var var0002;
	var var0003;

	var0002 = 0;
	while (var0002 < var0001) {
		var0003 = Func095C(var0000, INTELLIGENCE);
		Func095E(var0000, INTELLIGENCE, 1);
		Func095E(var0000, TRAINING, -1);
		var0002 += 1;
	}
}

extern var Func095C 0x95C (var var0000, var var0001);
extern void Func095E 0x95E (var var0000, var var0001, var var0002);

void Func0963 0x963 (var var0000, var var0001) {
	var var0002;
	var var0003;
	var var0004;
	var var0005;

	var0002 = 0;
	while (var0002 < var0001) {
		var0003 = Func095C(var0000, DEXTERITY);
		var0004 = Func095C(var0000, COMBAT);
		var0005 = ((var0004 + var0003) + 1) / 2;
		if (var0005 >= var0003) {
			var0005 = var0004 + 1;
			if (var0005 >= 30) {
				var0005 = 30;
			}
		}
		Func095E(var0000, COMBAT, var0005 - var0004);
		Func095E(var0000, TRAINING, -1);
		var0002 += 1;
	}
}

extern var Func095C 0x95C (var var0000, var var0001);
extern void Func095E 0x95E (var var0000, var var0001, var var0002);

void Func0964 0x964 (var var0000, var var0001) {
	var var0002;
	var var0003;
	var var0004;
	var var0005;

	var0002 = 0;
	while (var0002 < var0001) {
		var0003 = Func095C(var0000, INTELLIGENCE);
		var0004 = Func095C(var0000, MAX_MANA);
		var0005 = ((var0004 + var0003) + 1) / 2;
		if (var0005 >= var0003) {
			var0005 = var0004 + 1;
			if (var0005 >= 30) {
				var0005 = 30;
			}
		}
		if ((var0000 == AVATAR) || (var0000 == AVATAR->get_npc_object())) {
			Func095E(var0000, MAX_MANA, var0005 - var0004);
		}
		Func095E(var0000, TRAINING, -1);
		var0002 += 1;
	}
}

void Func0965 0x965 () {
	var var0000;
	var var0001;

	var0000 = UI_wearing_fellowship();
	var0001 = UI_die_roll(0x0001, 0x0004);
	if (var0001 == 0x0001) {
		say("\"The Fellowship is a society of spiritual seekers who strive to reach the highest levels of human potential and to share this philosophy freely with all people. The Fellowship was formed twenty years ago by Batlin with the full approval and support of Lord British.\"");
	}
	if (var0001 == 0x0002) {
		say("\"The Fellowship is a wonderful organization that is open to all the people of Britannia. I have learned so much through studying its philosophy and it hath helped me to live my life to the fullest. Through The Fellowship I am able to achieve what I have set out to do in life and I am a better person for having joined.\"");
	}
	if (var0001 == 0x0003) {
		say("\"The Fellowship is the philosophical group devoted to the teachings of a truly great man named Batlin. In the absence of the Avatar, Batlin hath become a sort of spiritual father for the people of Britannia. Through his speeches and writings he hath changed the lives of many people, including mine own.\"");
	}
	if (var0001 == 0x0004) {
		say("\"The Fellowship is a group that hath been gaining much popularity in recent years with the people of Britannia. While on the surface it may simply appear to be a scholarly society studying its particular philosophy, its teachings have the power to forever alter the shape of Britannian society. Its ceremonies are deeply moving experiences.\"");
	}
	add("philosophy");
}

extern var Func0955 0x955 ();

void Func0966 0x966 () {
	var var0000;
	var var0001;

	say("\"The Fellowship advances the philosophy of 'sanguine cognition', a way to apply a confident order of thought to one's life, through what is called the Triad of Inner Strength. The Triad is simply three basic principles that, when applied in unison, enable one to be more creative, satisfied, and successful in life. They are: Strive For Unity, Trust Thy Brother, and Worthiness Precedes Reward. Strive For Unity basically means that people should cooperate and work together. Trust Thy Brother implies that we are all the same and that we should not hate or fear each other. Worthiness Precedes Reward suggests that we must each strive to be worthy of that which we want out of life.\"");
	var0000 = UI_wearing_fellowship();
	if (!var0000) {
		say("\"Dost thou want to join?\"");
		var0001 = Func0955();
		if (var0001) {
			say("\"Then thou shouldst go immediately to seek Batlin.\"");
		} else {
			say("\"Oh. Well, perhaps thou canst become enlightened another time.\"");
		}
	} else {
		say("\"Oh! I just now noticed thy medallion! Thou dost already know all of this! Thou art one of us! Thou must pardon me for going on and on about it!\"");
	}
}

var Func0967 0x967 (var var0000, var var0001, var var0002, var var0003, var var0004) {
	var var0005;

	var0005 = (var0000 + var0001) + " ";
	if (var0002 == 0x0001) {
		var0005 += "sell ";
	} else {
		var0005 += "sells ";
	}
	var0005 = ((((var0005 + "for ") + var0003) + " gold") + var0004) + ".";
	return var0005;
}

var Func0968 0x968 (var var0000, var var0001, var var0002, var var0003, var var0004) {
	var var0005;

	var0005 = (((((("To sell " + var0000) + var0001) + " for ") + var0003) + " gold") + var0004) + ".";
	return var0005;
}

extern var Func095C 0x95C (var var0000, var var0001);
extern void Func095E 0x95E (var var0000, var var0001, var var0002);

void Func0969 0x969 (var var0000, var var0001, var var0002) {
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;

	var0003 = Func095C(var0000, STRENGTH);
	var0004 = Func095C(var0000, HEALTH);
	var0005 = var0000->get_npc_name();
	if (var0003 > var0004) {
		var0006 = var0003 - var0004;
		Func095E(var0000, HEALTH, var0006);
		var0007 = UI_remove_party_items(var0002, var0001, QUALITY_ANY, FRAME_ANY, true);
		say("\"The wounds have been healed.\"");
	} else if (var0000 == AVATAR) {
		say("\"Thou seemest quite healthy!\"");
	} else {
		say("\"",
			var0005,
			" is already healthy!\"");
	}
}

void Func096A 0x96A (var var0000, var var0001, var var0002) {
	var var0003;
	var var0004;

	var0003 = var0000->get_npc_object();
	if (var0003->get_item_flag(POISONED)) {
		var0003->clear_item_flag(POISONED);
		var0004 = UI_remove_party_items(var0002, var0001, QUALITY_ANY, FRAME_ANY, true);
		say("\"The wounds have been healed.\"");
	} else {
		say("\"That individual doth not need curing!\"");
	}
}

void Func096B 0x96B (var var0000, var var0001, var var0002) {
	var var0003;
	var var0004;

	var0003 = var0000->resurrect();
	if (var0003) {
		say("\"Breath doth return to the body. Thy comrade is alive!\"");
		var0004 = UI_remove_party_items(var0002, var0001, QUALITY_ANY, FRAME_ANY, true);
	} else {
		say("\"Alas, I cannot save thy friend. I will provide a proper burial. Thou must go on and continue with thine own life.\"");
	}
}

extern var Func0958 0x958 ();

var Func096C 0x96C () {
	var var0000;

	say("\"Which of you wishes to train?\"");
	var0000 = Func0958();
	return var0000;
}

extern var Func0955 0x955 ();
extern var Func0946 0x946 ();
extern var Func098E 0x98E ();
extern var Func0957 0x957 (var var0000);

var Func096D 0x96D (var var0000) {
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;
	var var0008;
	var var0009;
	var var000A;
	var var000B;
	var var000C;

	say("\"One of you wishes to train?\"");
	var0001 = Func0955();
	if (var0001) {
		say("\"Which of you wishes to train?\"");
		var0002 = Func0946();
		var0003 = Func098E();
		var0004 = [];
		var0005 = [];
		for (var0008 in var0003 with var0006 to var0007) {
			if (var0008 != var0000) {
				var0004 &= var0008->get_npc_name();
				var0005 &= var0008;
			}
		}
		var0002 = var0004;
		var0003 = var0005;
		var0009 = [INVALID_NPC, var0003];
		var000A = Func0957(["Nobody", var0002]);
		var000B = var0009[var000A];
		if (var000B == 0x0000) {
			var000C = 0x0000;
		} else {
			var000C = var000B->get_npc_number();
		}
	} else {
		say("\"Perhaps at a later time.\"");
		var000C = 0x0000;
	}
	return var000C;
}

extern var Func095C 0x95C (var var0000, var var0001);

var Func096E 0x96E (var var0000, var var0001, var var0002, var var0003, var var0004) {
	var var0005;
	var var0006;
	var var0007;
	var var0008;
	var var0009;
	var var000A;
	var var000B;

	var0005 = false;
	var0006 = Func095C(var0003, TRAINING);
	var0007 = PARTY->count_objects(var0001, QUALITY_ANY, FRAME_ANY);
	if (!(var0007 >= var0002)) {
		return 1;
	}
	if (!(var0006 >= var0004)) {
		return 0;
	}
	for (var000A in var0000 with var0008 to var0009) {
		var000B = Func095C(var0003, var000A);
		if (var000B < 0x001E) {
			var0005 = true;
		}
	}
	if (var0005 == false) {
		return 2;
	}
	return 3;
}

var Func096F 0x96F (var var0000, var var0001, var var0002) {
	var var0003;
	var var0004;
	var var0005;
	var var0006;

	var0003 = PARTY->count_objects(var0001, QUALITY_ANY, FRAME_ANY);
	if (var0003 >= var0002) {
		var0004 = PARTY->find_object(0x02F9, QUALITY_ANY, FRAME_ANY);
		if (var0004) {
			if (UI_add_spell(var0000, 0x0000, var0004)) {
				var0005 = 0x0001;
				var0006 = UI_remove_party_items(var0002, var0001, QUALITY_ANY, FRAME_ANY, true);
			} else {
				var0005 = 0x0004;
			}
		} else {
			var0005 = 0x0002;
		}
	} else {
		var0005 = 0x0003;
	}
	return var0005;
}

extern var Func0955 0x955 ();

var Func0970 0x970 (var var0000, var var0001) {
	var var0002;
	var var0003;
	var var0004;
	var var0005;

	var0002 = PARTY->count_objects(0x0284, QUALITY_ANY, FRAME_ANY);
	say("\"To be agreeable?\"");
	if (!Func0955()) {
		var0003 = 0x0000;
	} else if (var0002 >= var0001) {
		var0004 = PARTY->find_object(0x02F9, QUALITY_ANY, FRAME_ANY);
		if (var0004) {
			if (UI_add_spell(var0000, 0x0000, var0004)) {
				var0003 = 0x0001;
				var0005 = UI_remove_party_items(var0001, 0x0284, QUALITY_ANY, FRAME_ANY, true);
			} else {
				var0003 = 0x0004;
			}
		} else {
			var0003 = 0x0002;
		}
	} else {
		var0003 = 0x0003;
	}
	return var0003;
}

void Func0971 0x971 (var var0000) {
	var var0001;
	var var0002;

	var0001 = var0000->get_item_quantity(AVATAR);
	if (var0001 <= 0x0001) {
		var0000->remove_item();
	} else {
		var0001 -= 0x0001;
		var0002 = var0000->set_item_quantity(var0001);
	}
}

void Func0972 0x972 (var var0000) {
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;
	var var0008;
	var var0009;
	var var000A;
	var var000B;
	var var000C;
	var var000D;

	var0001 = false;
	var0002 = var0000->get_item_shape();
	var0003 = var0000->get_item_frame();
	var0004 = var0000->get_item_quality();
	var0005 = UI_get_party_list();
	for (var0008 in var0005 with var0006 to var0007) {
		var0009 = var0008->get_cont_items(var0002, var0004, var0003);
		for (var000C in var0009 with var000A to var000B) {
			if (var000C == var0000) {
				var0001 = var0008;
				var000D = var0001->give_last_created();
				var000D = var0000->set_last_created();
			}
		}
	}
	if (var0001 == false) {
		var0001 = var0000->get_object_position();
		var000D = UI_update_last_created(var0001);
		var000D = var0000->set_last_created();
	}
}

extern void Func0945 0x945 (var var0000);
extern void Func094A 0x94A (var var0000);
extern void Func094E 0x94E (var var0000, var var0001);
extern var Func0953 0x953 ();

void Func0973 0x973 (var var0000) {
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;

	Func0945(var0000);
	var0001 = var0000->get_item_frame();
	if (var0001 == 0x0000) {
		Func094A(["I wager that would work much better if thou wouldst put some liquid in it..."]);
		Func094E(DUPRE, "Perhaps some BEER for instance.");
		Func094E(SHAMINO, "Or mayhaps some WINE....");
	} else {
		var0000->set_item_frame(0x0000);
		var0002 = ["water", "blood", "wine", "beer", "ale", "stuff", "stuff", "stuff", "stuff", "stuff", "last stuff"];
		UI_play_sound_effect(0x0024);
		var0003 = UI_die_roll(0x0001, 0x000A);
		var0004 = var0002[var0001];
		var0005 = ("Zounds, I wager that " + var0004) + " was right good....";
		if (var0003 == 0x0001) {
			var0006 = "mmmm... I wager that would cure a body's thirst.";
		}
		if (var0003 == 0x0002) {
			var0007 = Func0953();
			var0005 = ((("Why dost thou not wait until dinner to drink that " + var0004) + ", ") + var0007) + "?";
		}
		Func094A(var0005);
	}
}

extern void Func0945 0x945 (var var0000);
extern void Func094A 0x94A (var var0000);
extern void Func094E 0x94E (var var0000, var var0001);
extern var Func0953 0x953 ();

void Func0974 0x974 (var var0000) {
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;
	var var0008;
	var var0009;
	var var000A;
	var var000B;

	Func0945(var0000);
	var0001 = var0000->get_item_frame() % 0x0002;
	if (var0001 == 0x0000) {
		Func094A(["I wager that would work much better if thou wouldst put some liquid in it..."]);
		Func094E(DUPRE, "Perhaps some BEER for instance.");
		Func094E(SHAMINO, "Or mayhaps some WINE....");
	} else {
		var0002 = ["water", "blood", "wine", "beer", "ale", "stuff", "stuff", "stuff", "stuff", "stuff", "laststuff"];
		var0003 = 0x0000;
		var0004 = var0000->get_item_quality();
		for (var0007 in var0002 with var0005 to var0006) {
			var0003 += 0x0001;
			if (var0004 == var0003) {
				var0008 = ("Zounds, I wager that " + var0007) + " was right good....";
			}
		}
		UI_play_sound_effect(0x0024);
		var0009 = UI_die_roll(0x0001, 0x000A);
		if (var0009 == 0x0001) {
			Func094A("mmmm... I wager that would cure a body's thirst.");
		}
		if (var0009 == 0x0002) {
			var000A = var0002[var0001];
			var000B = Func0953();
			var0008 = ((("Why dost thou not wait until dinner to drink that " + var000A) + ", ") + var000B) + "?";
			Func094A(var0008);
		}
		if (var0009 > 0x0002) {
			Func094A(var0008);
		}
	}
}

extern var Func0953 0x953 ();
extern void Func094A 0x94A (var var0000);
extern void Func0948 0x948 (var var0000);

void Func0975 0x975 () {
	var var0000;
	var var0001;

	var0000 = Func0953();
	var0001 = UI_die_roll(0x0001, 0x0003);
	if (var0001 == 0x0001) {
		Func094A(["Thou mayest have more success if thou wert to put that in", "thine hand and hit someone with it... Someone else, that is."]);
	} else {
		Func0948(0x0000);
	}
}

void Func0976 0x976 (var var0000, var var0001) {
	var var0002;
	var var0003;
	var var0004;

	if (var0000->is_npc()) {
		var0002 = var0000->get_npc_prop(STRENGTH);
		var0003 = var0000->get_npc_prop(HEALTH);
		if ((var0003 + var0001) < 1) {
			var0001 = -1 * var0003;
		} else if ((var0003 + var0001) > var0002) {
			var0001 = var0002 - var0003;
		}
		var0004 = var0000->set_npc_prop(HEALTH, var0001);
	}
}

var Func0977 0x977 (var var0000) {
	var var0001;
	var var0002;
	var var0003;
	var var0004;

	var0001 = 0x0000;
	for (var0004 in var0000 with var0002 to var0003) {
		var0001 += 0x0001;
	}
	return var0001;
}

void Func0978 0x978 (var var0000) {
	UI_play_sound_effect(0x006C);
}

var Func0979 0x979 (var var0000) {
	return AVATAR->direction_from(var0000);
}

extern var Func0983 0x983 (var var0000);

void Func097A 0x97A (var var0000) {
	var var0001;
	var var0002;
	var var0003;
	var var0004;

	var0001 = var0000->get_npc_object();
	if (!Func0983(var0001)) {
		return;
	}
	var0002 = var0001->get_schedule_type();
	var0003 = "";
	var0004 = UI_die_roll(0x0001, 0x0004);
	if (var0002 == LOITER) {
		if (var0004 == 0x0001) {
			var0003 = "@It doth seem as it would rain...@";
		}
		if (var0004 == 0x0002) {
			var0003 = "@Greetings.@";
		}
		if (var0004 == 0x0003) {
			var0003 = "@Oh, mine aching back...@";
		}
		if (var0004 == 0x0004) {
			var0003 = "@Ho hum...@";
		}
	}
	if (var0002 == SLEEP) {
		var0003 = "@Z-z-z-z...@";
	}
	if (var0002 == WAITER) {
		if (var0004 == 0x0001) {
			var0003 = "@Thou shouldst try the wine.@";
		}
		if (var0004 == 0x0002) {
			var0003 = "@The bread is fresh.@";
		}
		if (var0004 == 0x0003) {
			var0003 = "@Try the mutton.@";
		}
		if (var0004 == 0x0004) {
			var0003 = "@I recommend the ale.@";
		}
	}
	if (var0002 == PREACH) {
		if (var0004 == 0x0001) {
			var0003 = "@Strive For Unity.@";
		}
		if (var0004 == 0x0002) {
			var0003 = "@Trust Thy Brother.@";
		}
		if (var0004 == 0x0003) {
			var0003 = "@Worthiness Precedes Reward.@";
		}
		if (var0004 == 0x0004) {
			var0003 = "@Join The Fellowship!@";
		}
	}
	if (var0002 == EAT_AT_INN) {
		if (var0004 == 0x0001) {
			var0003 = "@Mmmm! Good!@";
		}
		if (var0004 == 0x0002) {
			var0003 = "@Tasty!@";
		}
		if (var0004 == 0x0003) {
			var0003 = "@This is good!@";
		}
		if (var0004 == 0x0004) {
			var0003 = "@Waiter! Waiter!@";
		}
	}
	if (var0002 == FARM) {
		if (var0004 == 0x0001) {
			var0003 = "@Whew! 'Tis hot!@";
		}
		if (var0004 == 0x0002) {
			var0003 = "@Ouch! I did cut myself!@";
		}
		if (var0004 == 0x0003) {
			var0003 = "@Work... work... work...@";
		}
		if (var0004 == 0x0004) {
			var0003 = "@We need rain...@";
		}
	}
	if (var0002 == KID_GAMES) {
		if (var0004 == 0x0001) {
			var0003 = "@Tag! Thou art it!@";
		}
		if (var0004 == 0x0002) {
			var0003 = "@Cannot catch me!@";
		}
		if (var0004 == 0x0003) {
			var0003 = "@Nyah nyah! Thou art it!@";
		}
		if (var0004 == 0x0004) {
			var0003 = "@Catch me if thou canst!@";
		}
	}
	var0001->item_say(var0003);
}

extern var Func0983 0x983 (var var0000);

void Func097B 0x97B (var var0000) {
	var var0001;
	var var0002;
	var var0003;
	var var0004;

	var0001 = var0000->get_npc_object();
	if (!Func0983(var0001)) {
		return;
	}
	var0002 = var0001->get_schedule_type();
	var0003 = "";
	var0004 = UI_die_roll(0x0001, 0x0004);
	if (var0002 == LOITER) {
		if (var0004 == 0x0001) {
			var0003 = "@To say hello!@";
		}
		if (var0004 == 0x0002) {
			var0003 = "@To greet you!@";
		}
		if (var0004 == 0x0003) {
			var0003 = "@To hope you have a nice day!@";
		}
		if (var0004 == 0x0004) {
			var0003 = "@To ask how you are?@";
		}
	}
	if (var0002 == SLEEP) {
		var0003 = "@Z-z-z-z...@";
	}
	if (var0002 == WAITER) {
		if (var0004 == 0x0001) {
			var0003 = "@To suggest you try the wine.@";
		}
		if (var0004 == 0x0002) {
			var0003 = "@To offer fresh food.@";
		}
		if (var0004 == 0x0003) {
			var0003 = "@To recommend the mutton.@";
		}
		if (var0004 == 0x0004) {
			var0003 = "@To recommend the ale.@";
		}
	}
	if (var0002 == PREACH) {
		if (var0004 == 0x0001) {
			var0003 = "@To Strive For Unity.@";
		}
		if (var0004 == 0x0002) {
			var0003 = "@To Trust Thy Brother.@";
		}
		if (var0004 == 0x0003) {
			var0003 = "@To say Worthiness Precedes Reward.@";
		}
		if (var0004 == 0x0004) {
			var0003 = "@To join The Fellowship!@";
		}
	}
	if (var0002 == EAT_AT_INN) {
		if (var0004 == 0x0001) {
			var0003 = "@To be very Good!@";
		}
		if (var0004 == 0x0002) {
			var0003 = "@To be tasty!@";
		}
		if (var0004 == 0x0003) {
			var0003 = "@To be delicious!@";
		}
		if (var0004 == 0x0004) {
			var0003 = "@To call for service!@";
		}
	}
	var0001->item_say(var0003);
}

var Func097C 0x97C (var var0000, var var0001) {
	var var0002;

	var0002 = var0000->run_script(var0001, ZERO_DELAY);
	return var0002;
}

var Func097D 0x97D (var var0000, var var0001, var var0002, var var0003, var var0004) {
	var var0005;

	var0005 = var0000->count_objects(var0002, var0003, var0004);
	if ((var0005 >= var0001) && (var0005 != 0x0000)) {
		return true;
	}
	return false;
}

var Func097E 0x97E (var var0000) {
	if (var0000 < 0x0000) {
		var0000 *= -1;
	}
	return var0000;
}

extern var Func0983 0x983 (var var0000);

void Func097F 0x97F (var var0000, var var0001, var var0002) {
	var var0003;

	if (UI_get_array_size(var0001) > 0x0001) {
		var0001 = var0001[0x0001];
	}
	if (Func0983(var0000)) {
		var0003 = script var0000->get_npc_object() after var0002 ticks {
			nohalt;
			say var0001;
		};
	}
}

var Func0980 0x980 (var var0000) {
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;

	var0001 = find_nearby(SHAPE_ANY, var0000, MASK_NPC2);
	var0002 = UI_get_party_list();
	var0003 = [];
	if (get_item_flag(IN_PARTY)) {
		for (var0006 in var0001 with var0004 to var0005) {
			if (!(var0006 in var0002)) {
				var0003 &= var0006;
			}
		}
		return var0003;
	}
	return var0002;
}

var Func0981 0x981 (var var0000, var var0001) {
	var var0002;
	var var0003;
	var var0004;
	var var0005;

	var0002 = var0000[0x0001];
	for (var0005 in var0000 with var0003 to var0004) {
		if (var0001->get_distance(var0005) < var0001->get_distance(var0002)) {
			var0002 = var0005;
		}
	}
	return var0002;
}

void Func0982 0x982 (var var0000, var var0001) {
	var0000->reduce_health(var0001, NORMAL_DAMAGE);
}

var Func0983 0x983 (var var0000) {
	if ((var0000->get_npc_prop(INTELLIGENCE) >= 10) && ((!var0000->get_item_flag(ASLEEP)) && ((!var0000->get_item_flag(PARALYZED)) && ((!var0000->get_item_flag(DEAD)) && ((var0000->get_npc_prop(HEALTH) > 0) && var0000->is_npc()))))) {
		return true;
	}
	return false;
}

extern var Func0985 0x985 (var var0000);

var Func0984 0x984 (var var0000) {
	var0000 = Func0985(var0000);
	if (var0000->get_item_flag(ASLEEP) || (var0000->get_item_flag(PARALYZED) || (var0000->get_item_flag(DEAD) || (var0000->get_npc_prop(HEALTH) <= 0)))) {
		return true;
	}
	return false;
}

var Func0985 0x985 (var var0000) {
	var var0001;

	if ((var0000 < 0x0000) && (var0000 >= AVATAR)) {
		var0001 = var0000->get_npc_object();
	} else {
		var0001 = var0000;
	}
	return var0001;
}

extern void Func0987 0x987 (var var0000, var var0001, var var0002, var var0003);

void Func0986 0x986 (var var0000, var var0001) {
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;
	var var0008;
	var var0009;
	var var000A;
	var var000B;
	var var000C;

	var0002 = UI_get_party_list2();
	for (var0005 in var0002 with var0003 to var0004) {
		if (var0005->get_npc_prop(FOODLEVEL) >= 10) {
			if (!(var0005 == AVATAR->get_npc_object())) {
				var0005->clear_item_flag(ASLEEP);
			}
			var0005->clear_item_flag(POISONED);
			var0005->clear_item_flag(PARALYZED);
			var0005->clear_item_flag(CURSED);
			var0005->clear_item_flag(CHARMED);
			var0005->clear_item_flag(INVISIBLE);
			var0005->clear_item_flag(PROTECTION);
			Func0987(var0005, HEALTH, STRENGTH, var0000);
			if (var0005 == AVATAR->get_npc_object()) {
				Func0987(var0005, MANA, MAX_MANA, var0000);
			}
			var0006 = var0005->set_npc_prop(FOODLEVEL, var0000 * -1);
		}
	}
	var0007 = var0001->find_nearby(0x02BD, 0x001E, MASK_NONE);
	var0007 &= var0001->find_nearby(0x0152, 0x001E, MASK_NONE);
	for (var000A in var0007 with var0008 to var0009) {
		var000B = var000A->get_item_quality();
		if (var000B < (var0000 * 0x001E)) {
			var000A->halt_scheduled();
			var000C = var000A->get_item_shape();
			if (var000C == 0x0152) {
				var000A->set_item_shape(0x03E5);
			}
			if (var000C == 0x02BD) {
				var000A->set_item_shape(0x0253);
			}
			var0006 = var000A->set_item_quality(0x00FF);
		} else {
			var0006 = var000A->set_item_quality(var000B - (var0000 * 0x001E));
		}
	}
}

void Func0987 0x987 (var var0000, var var0001, var var0002, var var0003) {
	var var0004;
	var var0005;
	var var0006;

	var0004 = var0000->get_npc_prop(var0001);
	var0005 = var0004 + (0x0002 * var0003);
	if (var0005 > var0000->get_npc_prop(var0002)) {
		var0005 = var0000->get_npc_prop(var0002);
	}
	var0006 = var0000->set_npc_prop(var0001, var0005 - var0004);
}

var Func0988 0x988 (var var0000, var var0001) {
	var var0002;
	var var0003;
	var var0004;
	var var0005;

	var0002 = [];
	for (var0005 in var0001 with var0003 to var0004) {
		if (!(var0005 == var0000)) {
			var0002 &= var0005;
		}
	}
	return var0002;
}

var Func0989 0x989 (var var0000, var var0001) {
	var var0002;
	var var0003;
	var var0004;
	var var0005;

	var0002 = UI_get_array_size(var0000);
	if (var0002 > 0x0001) {
		var0003 = true;
		while (var0003) {
			var0003 = false;
			var0004 = 0x0001;
			while (var0004 < var0002) {
				if (var0001[var0004] > var0001[(var0004 + 0x0001)]) {
					var0005 = var0001[var0004];
					var0001[var0004] = var0001[(var0004 + 0x0001)];
					var0001[(var0004 + 0x0001)] = var0005;
					var0005 = var0000[var0004];
					var0000[var0004] = var0000[(var0004 + 0x0001)];
					var0000[(var0004 + 0x0001)] = var0005;
					var0003 = true;
				}
				var0004 += 0x0001;
			}
		}
	}
	return var0000;
}

extern void Func0950 0x950 (var var0000);

void Func098A 0x98A (var var0000, var var0001) {
	var var0002;
	var var0003;
	var var0004;
	var var0005;

	var0002 = var0000->get_item_frame();
	if (!var0000->get_item_quality()) {
		var0003 = var0000->set_item_quality(UI_die_roll(0x001E, 0x003C));
	}
	if (var0000->get_item_shape() == 0x0253) {
		if (var0000->get_item_quality() == 0x00FF) {
			var0000->item_say("Spent");
			return;
		}
	}
	var0004 = var0000->get_container();
	if (var0004->is_npc()) {
		if (var0004->get_readied(SI_BELT) == var0000) {
			UI_flash_mouse(CURSOR_HAND);
			return;
		}
	}
	if ((var0004 == 0x0000) || var0004->is_npc()) {
		var0000->set_item_shape(var0001);
		var0005 = UI_get_party_list();
		if (var0004 in var0005) {
			Func0950(var0000);
		}
	} else {
		UI_flash_mouse(CURSOR_HAND);
	}
	var0000->set_light(true);
	UI_set_time_palette();
}

void Func098B 0x98B (var var0000) {
	var var0001;

	var0001 = var0000->get_object_position();
	var0001[0x0001] -= var0001[0x0003] / 0x0002;
	var0001[0x0002] -= var0001[0x0003] / 0x0002;
	UI_sprite_effect(ANIMATION_MUSIC, var0001[0x0001], var0001[0x0002], -2, -2, 0, LOOP_ONCE);
}

var Func098C 0x98C () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;

	var0000 = false;
	do {
		var0001 = false;
		var0002 = 0x0000;
		while (var0002 < 0x0003) {
			var0002 += 0x0001;
			var0003 = false;
			while (!var0003) {
				var0004 = UI_die_roll(0x0001, 0x000F);
				if ((var0004 == 0x0001) && (!gflags[ASKED_9TH_CIRCLE])) {
					gflags[ASKED_9TH_CIRCLE] = true;
					var0003 = true;
					say("\"According to Erstam's book, how many spells are available in the Ninth Circle of Magic?\"");
					var0005 = UI_input_numeric_value(0x0001, 0x0046, 0x0001, 0x0023);
					if (var0005 != 0x0008) {
						var0001 = true;
					}
				}
				if ((var0004 == 0x0002) && (!gflags[ASKED_ARMOR_MATERIALS])) {
					gflags[ASKED_ARMOR_MATERIALS] = true;
					var0003 = true;
					say("\"How many different materials can armour be made from?\"");
					var0005 = UI_input_numeric_value(0x0001, 0x0046, 0x0001, 0x0023);
					if (var0005 != 0x0004) {
						var0001 = true;
					}
				}
				if ((var0004 == 0x0003) && (!gflags[ASKED_BEASTS])) {
					gflags[ASKED_BEASTS] = true;
					var0003 = true;
					say("\"How many beasts are discussed in the Bestiary in Erstam's book?\"");
					var0005 = UI_input_numeric_value(0x0001, 0x0046, 0x0001, 0x0023);
					if (var0005 != 0x0034) {
						var0001 = true;
					}
				}
				if ((var0004 == 0x0004) && (!gflags[ASKED_REAGENTS])) {
					gflags[ASKED_REAGENTS] = true;
					var0003 = true;
					say("\"How many different types of Reagents doth Erstam write about?\"");
					var0005 = UI_input_numeric_value(0x0001, 0x0046, 0x0001, 0x0023);
					if (var0005 != 0x000B) {
						var0001 = true;
					}
				}
				if ((var0004 == 0x0005) && (!gflags[ASKED_MASS_DEATH])) {
					gflags[ASKED_MASS_DEATH] = true;
					var0003 = true;
					say("\"How many reagents are required to cast the @Mass Death@ spell?\"");
					var0005 = UI_input_numeric_value(0x0001, 0x0046, 0x0001, 0x0023);
					if (var0005 != 0x0006) {
						var0001 = true;
					}
				}
				if ((var0004 == 0x0006) && (!gflags[ASKED_GINSENG])) {
					gflags[ASKED_GINSENG] = true;
					var0003 = true;
					say("\"How many times must ginseng be boiled before it becomes syrup?\"");
					var0005 = UI_input_numeric_value(0x0001, 0x0046, 0x0001, 0x0023);
					if (var0005 != 0x0028) {
						var0001 = true;
					}
				}
				if ((var0004 == 0x0007) && (!gflags[ASKED_CREATE_AUTOMATA])) {
					gflags[ASKED_CREATE_AUTOMATA] = true;
					var0003 = true;
					say("\"In what Circle of Magic doth the Create Automata spell appear?\"");
					var0005 = UI_input_numeric_value(0x0001, 0x0046, 0x0001, 0x0023);
					if (var0005 != 0x0006) {
						var0001 = true;
					}
				}
				if ((var0004 == 0x0008) && (!gflags[ASKED_REASONS_FOR_WRITING])) {
					gflags[ASKED_REASONS_FOR_WRITING] = true;
					var0003 = true;
					say("\"For how many reasons did Erstam put down the history of the land in writing?\"");
					var0005 = UI_input_numeric_value(0x0001, 0x0046, 0x0001, 0x0023);
					if (var0005 != 0x0001) {
						var0001 = true;
					}
				}
				if ((var0004 == 0x0009) && (!gflags[ASKED_OPHIDIAN_WRITING])) {
					gflags[ASKED_OPHIDIAN_WRITING] = true;
					var0003 = true;
					say("\"How many characters are there in Ophidian writing?\"");
					var0005 = UI_input_numeric_value(0x0001, 0x0046, 0x0001, 0x0023);
					if (var0005 != 0x0024) {
						var0001 = true;
					}
				}
				if ((var0004 == 0x000A) && (!gflags[ASKED_OTHER_LANDMARKS])) {
					gflags[ASKED_OTHER_LANDMARKS] = true;
					var0003 = true;
					say("\"In Erstam's book, the section entitled @Other Landmarks@ covers how many areas?\"");
					var0005 = UI_input_numeric_value(0x0001, 0x0046, 0x0001, 0x0023);
					if (var0005 != 0x0004) {
						var0001 = true;
					}
				}
				if ((var0004 == 0x000B) && (!gflags[ASKED_CITIES_ESTABLISHED])) {
					gflags[ASKED_CITIES_ESTABLISHED] = true;
					var0003 = true;
					say("\"How many cities were established in the Serpent Isle?\"");
					var0005 = UI_input_numeric_value(0x0001, 0x0046, 0x0001, 0x0023);
					if (var0005 != 0x0003) {
						var0001 = true;
					}
				}
				if ((var0004 == 0x000C) && (!gflags[ASKED_PRINCIPLES_OF_BALANCE])) {
					gflags[ASKED_PRINCIPLES_OF_BALANCE] = true;
					var0003 = true;
					say("\"How many forces, when combined, form the Principles of Balance?\"");
					var0005 = UI_input_numeric_value(0x0001, 0x0046, 0x0001, 0x0023);
					if (var0005 != 0x0006) {
						var0001 = true;
					}
				}
				if ((var0004 == 0x000D) && (!gflags[ASKED_CLANS_OF_MONITOR])) {
					gflags[ASKED_CLANS_OF_MONITOR] = true;
					var0003 = true;
					say("\"How many clans divide the city of Monitor?\"");
					var0005 = UI_input_numeric_value(0x0001, 0x0046, 0x0001, 0x0023);
					if (var0005 != 0x0003) {
						var0001 = true;
					}
				}
				if ((var0004 == 0x000E) && (!gflags[ASKED_WEAPON_TYPES])) {
					gflags[ASKED_WEAPON_TYPES] = true;
					var0003 = true;
					say("\"How many types of weapons are discussed in Erstam's book?\"");
					var0005 = UI_input_numeric_value(0x0001, 0x0046, 0x0001, 0x0023);
					if (var0005 != 0x0004) {
						var0001 = true;
					}
				}
				if ((var0004 == 0x000F) && (!gflags[ASKED_WORDS_OF_POWER])) {
					gflags[ASKED_WORDS_OF_POWER] = true;
					var0003 = true;
					say("\"How many Words of Power are there?\"");
					var0005 = UI_input_numeric_value(0x0001, 0x0046, 0x0001, 0x0023);
					if (var0005 != 0x001B) {
						var0001 = true;
					}
				}
			}
		}
		if (var0000 && var0001) {
			AVATAR->set_item_flag(CONFUSED);
			return false;
		}
		if (!var0001) {
			break;
		}
		say("\"I am not yet convinced...\"");
		var0000 = true;
	} while (true);
	return true;
}

var Func098D 0x98D () {
	var var0000;

	var0000 = [DUPRE, SHAMINO, IOLO, GWENNO, PETRA, MORTEGRO, WILFRED, BOYDON, SELINA, SETHYS, STEFANO];
	return var0000;
}

var Func098E 0x98E () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;

	var0000 = UI_get_party_list();
	var0001 = [];
	for (var0004 in var0000 with var0002 to var0003) {
		if (var0004->get_item_shape() != 0x02EB) {
			var0001 &= var0004;
		}
	}
	return var0001;
}

var Func098F 0x98F () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;

	var0000 = UI_get_party_list2();
	var0001 = [];
	for (var0004 in var0000 with var0002 to var0003) {
		if (var0004->get_item_shape() != 0x02EB) {
			var0001 &= var0004;
		}
	}
	return var0001;
}

extern var Func0992 0x992 (var var0000, var var0001, var var0002, var var0003);

var Func0990 0x990 (var var0000, var var0001, var var0002) {
	var var0003;

	UI_error_message("Error: Calling PartySays. Change to PartyUtters.");
	var0003 = Func0992(var0000, var0001, var0002, false);
	return var0003;
}

extern var Func0992 0x992 (var var0000, var var0001, var var0002, var var0003);

var Func0991 0x991 (var var0000, var var0001, var var0002) {
	var var0003;

	UI_error_message("Error: Calling PartyBarks. Change to PartyUtters.");
	var0003 = Func0992(var0000, var0001, var0002, true);
	return var0003;
}

extern var Func098E 0x98E ();
extern var Func097D 0x97D (var var0000, var var0001, var var0002, var var0003, var var0004);
extern void Func097F 0x97F (var var0000, var var0001, var var0002);
extern void Func094E 0x94E (var var0000, var var0001);
extern var Func098D 0x98D ();

var Func0992 0x992 (var var0000, var var0001, var var0002, var var0003) {
	var var0004;
	var var0005;
	var var0006;
	var var0007;
	var var0008;
	var var0009;
	var var000A;
	var var000B;
	var var000C;
	var var000D;
	var var000E;
	var var000F;
	var var0010;
	var var0011;
	var var0012;
	var var0013;
	var var0014;
	var var0015;
	var var0016;
	var var0017;
	var var0018;
	var var0019;
	var var001A;
	var var001B;

	var0004 = Func098E();
	if (Func097D(PARTY, 0x0001, 0x031F, QUALITY_ANY, 0x0012) && (!var0003)) {
		var0004 &= BOYDON_HEAD;
	}
	var0005 = UI_get_array_size(var0004);
	if (var0005 == 0x0001) {
		if (var0002 != 0x0000) {
			if (var0003) {
				Func097F(AVATAR, var0002, 0x0000);
			} else {
				Func094E(AVATAR, var0002);
			}
		}
		return AVATAR;
		// Dead code
		abort;
	}
	var0006 = Func098D();
	var0007 = UI_get_array_size(var0006);
	var0008 = [0x0001, 0x0007, 0x0002, 0x0008, 0x0005, 0x0006, 0x0002, 0x000B, 0x0003, 0x0009, 0x000A];
	var0009 = [0x0002, 0x000A, 0x000B, 0x0004, 0x0005, 0x0008, 0x0006, 0x0003, 0x0001, 0x0007, 0x0009];
	var000A = [0x0003, 0x0008, 0x000B, 0x0004, 0x0006, 0x0009, 0x0002, 0x0007, 0x0005, 0x0001, 0x000A];
	var000B = [0x0004, 0x0005, 0x0009, 0x0003, 0x000B, 0x0006, 0x0008, 0x0001, 0x0002, 0x0007, 0x000A];
	var000C = [0x0005, 0x0006, 0x000A, 0x0004, 0x0009, 0x000B, 0x0008, 0x0003, 0x0002, 0x0001, 0x0007];
	var000D = [0x0006, 0x000A, 0x0008, 0x000B, 0x0005, 0x0003, 0x0004, 0x0009, 0x0007, 0x0002, 0x0001];
	var000E = [0x0007, 0x0001, 0x0002, 0x0008, 0x0006, 0x000B, 0x0005, 0x0004, 0x0003, 0x0009, 0x000A];
	var000F = [0x0008, 0x000A, 0x0006, 0x0005, 0x000B, 0x0003, 0x0004, 0x0009, 0x0007, 0x0002, 0x0001];
	var0010 = [0x0009, 0x0004, 0x0005, 0x0008, 0x000A, 0x0003, 0x0006, 0x000B, 0x0007, 0x0002, 0x0001];
	var0011 = [0x000A, 0x0004, 0x0006, 0x0002, 0x0008, 0x0005, 0x0009, 0x000B, 0x0001, 0x0007, 0x0003];
	var0012 = [0x000B, 0x0003, 0x0008, 0x0006, 0x0004, 0x0009, 0x0007, 0x0005, 0x0001, 0x000A, 0x0002];
	if (!(var0000 in var0006)) {
		var0000 = 0x0001;
	}
	if (var0000 == 0x0001) {
		var0013 = false;
		while (var0013 == false) {
			var0014 = UI_get_random(var0005);
			if (var0004[var0014]->get_npc_number() != AVATAR) {
				var0013 = true;
			}
		}
		if (var0004[var0014] == BOYDON_HEAD) {
			var0000 = BOYDON_HEAD;
		} else {
			var0000 = var0004[var0014]->get_npc_number();
		}
		if (var0001 != 0x0000) {
			if (var0003) {
				Func097F(var0000, var0001, 0x0000);
			} else {
				Func094E(var0000, var0001);
			}
		}
		return var0000;
		// Dead code
		abort;
	}
	if (var0000->get_npc_object() in var0004) {
		if (var0001 != 0x0000) {
			if (var0003) {
				Func097F(var0000, var0001, 0x0000);
			} else {
				Func094E(var0000, var0001);
			}
		}
		return var0000;
		// Dead code
		abort;
	}
	var0014 = 0x0001;
	while (var0006[var0014] != var0000) {
		var0014 += 0x0001;
	}
	if (var0008[0x0001] == var0014) {
		var0015 = var0008;
	}
	if (var0009[0x0001] == var0014) {
		var0015 = var0009;
	}
	if (var000A[0x0001] == var0014) {
		var0015 = var000A;
	}
	if (var000B[0x0001] == var0014) {
		var0015 = var000B;
	}
	if (var000C[0x0001] == var0014) {
		var0015 = var000C;
	}
	if (var000D[0x0001] == var0014) {
		var0015 = var000D;
	}
	if (var000E[0x0001] == var0014) {
		var0015 = var000E;
	}
	if (var000F[0x0001] == var0014) {
		var0015 = var000F;
	}
	if (var0010[0x0001] == var0014) {
		var0015 = var0010;
	}
	if (var0011[0x0001] == var0014) {
		var0015 = var0011;
	}
	if (var0012[0x0001] == var0014) {
		var0015 = var0012;
	}
	var0014 = 0x0002;
	var0016 = var0007 + 0x0001;
	while (var0014 != var0016) {
		var0000 = var0006[var0015[var0014]];
		if (var0000->get_npc_object() in var0004) {
			if (var0001 != 0x0000) {
				if (var0003) {
					Func097F(var0000, var0001, 0x0000);
				} else {
					Func094E(var0000, var0001);
				}
			}
			return var0000;
			// Dead code
			abort;
		}
		if ((var0000 == BOYDON) && (BOYDON_HEAD in var0004)) {
			var0000 = BOYDON_HEAD;
			if (!var0003) {
				Func094E(var0000, var0001);
			}
			return var0000;
			// Dead code
			abort;
		}
		var0014 += 0x0001;
	}
	UI_error_message("OrderList or NotThereList improperly maintained - see\r\n\t\t~PartyUtters function");
	var0017 = "";
	var0018 = UI_get_party_list();
	for (var001B in var0018 with var0019 to var001A) {
		var0017 &= var001B & var001B->get_npc_name();
	}
	if (Func097D(PARTY, 0x0001, 0x031F, QUALITY_ANY, 0x0012) && (!var0003)) {
		var0017 &= BOYDON_HEAD & "Boydon's head in party";
	}
	UI_error_message("Copy down this information with the error");
	UI_error_message(var0017);
	return 0;
}

var Func0993 0x993 (var var0000) {
	var var0001;
	var var0002;

	var0001 = var0000[0x0001];
	var0002 = var0000[0x0002];
	if (((var0001 > 0x06AE) && ((var0001 < 0x073F) && ((var0002 > 0x053C) && (var0002 < 0x05AF)))) || ((var0001 > 0x098B) && ((var0001 < 0x09E3) && ((var0002 > 0x001C) && (var0002 < 0x007E))))) {
		return 0x0000;
	}
	if (((var0001 > 0x08C4) && ((var0001 < 0x09FE) && ((var0002 > 0x03A1) && (var0002 < 0x04FE)))) || ((var0001 > 0x0A20) && ((var0001 < 0x0AFF) && ((var0002 > 0x0400) && (var0002 < 0x04DF))))) {
		return 0x0002;
	}
	if (((var0001 > 0x0AFA) && ((var0001 < 0x0BFF) && ((var0002 > 0x0400) && (var0002 < 0x0600)))) || ((var0001 > 0x0000) && ((var0001 < 0x00FF) && ((var0002 > 0x0401) && (var0002 < 0x05FF))))) {
		return 0x001F;
	}
	if (((var0001 > 0x035A) && ((var0001 < 0x04A3) && ((var0002 > 0x05FD) && (var0002 < 0x07D7)))) || ((var0001 > 0x0AC0) && ((var0002 > 0x00C0) && ((var0001 < 0x0ACF) && (var0002 < 0x00DF))))) {
		return 0x0003;
	}
	if (((var0001 > 0x0480) && ((var0001 < 0x057F) && ((var0002 > 0x0A00) && (var0002 < 0x0AAF)))) || (((var0001 > 0x0580) && ((var0001 < 0x07CF) && ((var0002 > 0x0970) && (var0002 < 0x0ABF)))) || (((var0001 > 0x0790) && ((var0001 < 0x07EC) && ((var0002 > 0x0AB0) && (var0002 < 0x0AFC)))) || (((var0001 > 0x0B20) && ((var0001 < 0x0BDF) && ((var0002 > 0x0710) && (var0002 < 0x07BC)))) || (((var0001 > 0x000D) && ((var0001 < 0x00AB) && ((var0002 > 0x061F) && (var0002 < 0x067B)))) || (((var0001 > 0x0A0D) && ((var0002 > 0x005E) && ((var0001 < 0x0A3F) && (var0002 < 0x007F)))) || ((var0001 > 0x0A33) && ((var0002 > 0x009F) && ((var0001 < 0x0A5F) && (var0002 < 0x00AF)))))))))) {
		return 0x0004;
	}
	if (((var0001 > 0x0550) && ((var0001 < 0x0590) && ((var0002 > 0x01D0) && (var0002 < 0x0210)))) || ((var0001 > 0x0A8F) && ((var0001 < 0x0AE0) && ((var0002 > 0x004F) && (var0002 < 0x00A0))))) {
		return 0x0015;
	}
	if ((var0001 > 0x05C0) && ((var0001 < 0x06F8) && ((var0002 > 0x01DC) && (var0002 < 0x0236)))) {
		return 0x0016;
	}
	if ((var0001 > 0x0530) && ((var0001 < 0x0640) && ((var0002 > 0x0211) && (var0002 < 0x0370)))) {
		return 0x0005;
	}
	if (((var0001 > 0x0450) && ((var0001 < 0x069F) && ((var0002 > 0x04C0) && (var0002 < 0x055F)))) || (((var0001 > 0x0230) && ((var0001 < 0x0320) && ((var0002 > 0x0640) && (var0002 < 0x06B3)))) || ((var0001 > 0x05FA) && ((var0001 < 0x06F0) && ((var0002 > 0x03FC) && (var0002 < 0x04BF)))))) {
		return 0x0007;
	}
	if (((var0001 > 0x0490) && ((var0001 < 0x0530) && ((var0002 > 0x0860) && (var0002 < 0x08F0)))) || ((var0001 > 0x0AF0) && ((var0002 > 0x00C0) && ((var0001 < 0x0AFF) && (var0002 < 0x00DF))))) {
		return 0x0009;
	}
	if ((var0001 > 0x0070) && ((var0001 < 0x0230) && ((var0002 > 0x0320) && (var0002 < 0x0410)))) {
		return 0x000A;
	}
	if (((var0001 > 0x0780) && ((var0001 < 0x0850) && ((var0002 > 0x04F0) && (var0002 < 0x0571)))) || ((var0001 > 0x07D0) && ((var0001 < 0x0880) && ((var0002 > 0x0442) && (var0002 < 0x04F6))))) {
		return 0x000B;
	}
	if ((var0001 > 0x0310) && ((var0001 < 0x0400) && ((var0002 > 0x0800) && (var0002 < 0x08E8)))) {
		return 0x000C;
	}
	if (((var0001 > 0x02A0) && ((var0001 < 0x0470) && ((var0002 > 0x0980) && (var0002 < 0x0AF0)))) || ((var0001 > 0x0B1E) && ((var0002 > 0x00AE) && ((var0001 < 0x0B30) && (var0002 < 0x00D1))))) {
		return 0x000D;
	}
	if ((var0001 > 0x0834) && ((var0001 < 0x09BE) && ((var0002 > 0x06BB) && (var0002 < 0x084E)))) {
		return 0x000E;
	}
	if (((var0001 > 0x07E0) && ((var0001 < 0x08D0) && ((var0002 > 0x0580) && (var0002 < 0x0690)))) || (((var0001 > 0x0870) && ((var0001 < 0x0910) && ((var0002 > 0x0520) && (var0002 < 0x05E0)))) || (((var0001 > 0x08C0) && ((var0001 < 0x0A20) && ((var0002 > 0x0520) && (var0002 < 0x0591)))) || (((var0001 > 0x0960) && ((var0001 < 0x0A60) && ((var0002 > 0x0590) && (var0002 < 0x0650)))) || (((var0001 > 0x09F0) && ((var0001 < 0x0A60) && ((var0002 > 0x0640) && (var0002 < 0x06D0)))) || ((var0001 > 0x09B0) && ((var0001 < 0x0A10) && ((var0002 > 0x06A0) && (var0002 < 0x0710))))))))) {
		return 0x000F;
	}
	if (((var0001 > 0x0708) && ((var0001 < 0x07BA) && ((var0002 > 0x03B4) && (var0002 < 0x0454)))) || ((var0001 > 0x0B93) && ((var0002 > 0x0043) && ((var0001 < 0x0BEC) && (var0002 < 0x00EC))))) {
		return 0x0010;
	}
	if (((var0001 > 0x06E0) && ((var0001 < 0x072F) && ((var0002 > 0x0250) && (var0002 < 0x02AF)))) || ((var0001 > 0x0B00) && ((var0001 < 0x0B8F) && ((var0002 > 0x0050) && (var0002 < 0x007F))))) {
		return 0x0011;
	}
	if ((var0001 > 0x0580) && ((var0001 < 0x05BF) && ((var0002 > 0x0390) && (var0002 < 0x03EF)))) {
		return 0x0012;
	}
	if ((var0001 > 0x08C0) && ((var0001 < 0x093F) && ((var0002 > 0x0120) && (var0002 < 0x014F)))) {
		return 0x0013;
	}
	if (((var0001 > 0x08B0) && ((var0001 < 0x08FF) && ((var0002 > 0x0310) && (var0002 < 0x035F)))) || ((var0001 > 0x09A0) && ((var0001 < 0x0AFF) && ((var0002 > 0x0300) && (var0002 < 0x038F))))) {
		return 0x0014;
	}
	if (((var0001 > 0x03A0) && ((var0001 < 0x044F) && ((var0002 > 0x03D0) && (var0002 < 0x052F)))) || (((var0001 > 0x0450) && ((var0001 < 0x056F) && ((var0002 > 0x03F0) && (var0002 < 0x049F)))) || (((var0001 > 0x04A0) && ((var0001 < 0x050F) && ((var0002 > 0x0270) && (var0002 < 0x03FF)))) || (((var0001 > 0x0450) && ((var0001 < 0x04CF) && ((var0002 > 0x0260) && (var0002 < 0x02FF)))) || (((var0001 > 0x0B10) && ((var0001 < 0x00F0) && ((var0002 > 0x0800) && (var0002 < 0x08F0)))) || ((var0001 > 0x0000) && ((var0001 < 0x00C0) && ((var0002 > 0x0700) && (var0002 < 0x0800))))))))) {
		return 0x0017;
	}
	if (((var0001 > 0x0730) && ((var0001 < 0x095E) && ((var0002 > 0x0208) && (var0002 < 0x02F8)))) || ((var0001 > 0x087E) && ((var0001 < 0x095E) && ((var0002 > 0x0168) && (var0002 < 0x0208))))) {
		return 0x0018;
	}
	if ((var0001 > 0x0500) && ((var0001 < 0x07EE) && ((var0002 > 0x0000) && (var0002 < 0x0190)))) {
		return 0x0019;
	}
	if (((var0001 > 0x0540) && ((var0001 < 0x05F0) && ((var0002 > 0x0580) && (var0002 < 0x0670)))) || ((var0001 > 0x05F0) && ((var0001 < 0x06EA) && ((var0002 > 0x055A) && (var0002 < 0x0640))))) {
		return 0x001A;
	}
	if ((var0001 > 0x0210) && ((var0001 < 0x02D0) && ((var0002 > 0x0950) && (var0002 < 0x0AB0)))) {
		return 0x001B;
	}
	if ((var0001 > 0x0258) && ((var0001 < 0x030C) && ((var0002 > 0x047E) && (var0002 < 0x05C8)))) {
		return 0x001C;
	}
	if ((var0001 > 0x037A) && ((var0001 < 0x0488) && ((var0002 > 0x033E) && (var0002 < 0x037A)))) {
		return 0x001D;
	}
	if ((var0001 > 0x012F) && ((var0001 < 0x01DF) && ((var0002 > 0x072F) && (var0002 < 0x07C0)))) {
		return 0x001E;
	}
	if (((var0001 > 0x0000) && ((var0002 > 0x0AFF) && ((var0001 < 0x0900) && (var0002 < 0x0C00)))) || (((var0001 > 0x08FF) && ((var0002 > 0x09FF) && ((var0001 < 0x0C00) && (var0002 < 0x0C00)))) || ((var0001 > 0x0B6F) && ((var0002 > 0x09BF) && ((var0001 < 0x0C00) && (var0002 < 0x0A00)))))) {
		return 0x0020;
	}
	if ((var0001 > 0x08FF) && ((var0002 > 0x09FF) && ((var0001 < 0x0A00) && (var0002 < 0x0B00)))) {
		return 0x0021;
	}
	if (((var0001 > 0x0A13) && ((var0002 > 0x0014) && ((var0001 < 0x0A3F) && (var0002 < 0x003D)))) || (((var0001 > 0x09D0) && ((var0002 > 0x00A0) && ((var0001 < 0x09EE) && (var0002 < 0x00AE)))) || ((var0001 > 0x0250) && ((var0002 > 0x033F) && ((var0001 < 0x0330) && (var0002 < 0x0481)))))) {
		return -1;
	}
	if (var0002 < 0x0400) {
		return 0x0008;
	}
	return -1;
}

extern var Func0993 0x993 (var var0000);

var Func0994 0x994 () {
	var var0000;

	var0000 = AVATAR->get_object_position();
	return Func0993(var0000);
}

var Func0995 0x995 () {
	var var0000;
	var var0001;
	var var0002;

	var0000 = AVATAR->get_object_position();
	var0001 = var0000[0x0001];
	var0002 = var0000[0x0002];
	if ((var0001 > 0x0340) && ((var0001 < 0x0430) && ((var0002 > 0x02FF) && (var0002 < 0x0550)))) {
		return true;
	}
	if ((var0001 > 0x0350) && ((var0001 < 0x0500) && ((var0002 > 0x0400) && (var0002 < 0x04C0)))) {
		return true;
	}
	if ((var0001 > 0x00FF) && ((var0001 < 0x0230) && ((var0002 > 0x03F0) && (var0002 < 0x0450)))) {
		return true;
	}
	if ((var0001 > 0x0800) && ((var0001 < 0x0BF0) && ((var0002 > 0x0000) && (var0002 < 0x00F0)))) {
		return false;
	}
	if ((var0001 > 0x0A00) && ((var0001 < 0x0BF0) && ((var0002 > 0x0100) && (var0002 < 0x0300)))) {
		return false;
	}
	if ((var0001 > 0x0500) && ((var0001 < 0x07F0) && ((var0002 > 0x0000) && (var0002 < 0x0190)))) {
		return false;
	}
	if ((var0001 > 0x0260) && ((var0001 < 0x0310) && ((var0002 > 0x0350) && (var0002 < 0x0470)))) {
		return false;
	}
	if ((var0001 > 0x0990) && ((var0001 < 0x0B00) && ((var0002 > 0x0300) && (var0002 < 0x0400)))) {
		return false;
	}
	if ((var0001 > 0x08C0) && ((var0001 < 0x0BF0) && ((var0002 > 0x03B0) && (var0002 < 0x0400)))) {
		return false;
	}
	if (var0002 > 0x0400) {
		return false;
	}
	return true;
}

var Func0996 0x996 (var var0000, var var0001, var var0002, var var0003, var var0004, var var0005, var var0006) {
	var var0007;
	var var0008;
	var var0009;
	var var000A;

	if (var0000 == PARTY) {
		if (UI_remove_party_items(var0002, var0003, var0004, var0005, var0006) == false) {
			return false;
		}
	} else if (var0000->remove_cont_items(var0002, var0003, var0004, var0005, var0006) == false) {
		return false;
	}
	var0007 = var0001->add_cont_items(var0002, var0003, var0004, var0005, var0006);
	if (var0007) {
		var0008 = UI_create_new_object(var0003);
		if (var0008) {
			var0009 = var0008->set_item_quantity(var0007);
			var000A = UI_update_last_created(var0001->get_object_position());
		}
	}
	return true;
}

extern void Func097F 0x97F (var var0000, var var0001, var var0002);

void Func0997 0x997 (var var0000, var var0001) {
	var var0002;
	var var0003;
	var var0004;

	if (var0001 != false) {
		var0002 = UI_get_array_size(var0001);
		var0003 = 0x0000;
		var0004 = 0x0001;
		while (var0002 > 0x0000) {
			Func097F(AVATAR, var0001[var0004], var0003);
			var0003 += 0x0005;
			var0004 += 0x0001;
			Func097F(var0000, var0001[var0004], var0003);
			var0002 -= 0x0002;
		}
	}
}

void Func0998 0x998 (var var0000, var var0001) {
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;
	var var0008;
	var var0009;
	var var000A;
	var var000B;
	var var000C;
	var var000D;
	var var000E;

	var0002 = [-1,  0,  1,  2,  2,  2,  1,  0, -1, -2, -2, -2, -2, -1,  0,  1,  2,  3,  4,  4,  4,  4,  4,  3,  2,  1,  0, -1, -2, -3, -4, -4, -4, -4, -4, -3];
	var0003 = [-2, -2, -2, -1,  0,  1,  2,  2,  2,  1,  0, -1, -4, -4, -4, -4, -4, -3, -2, -1,  0,  1,  2,  3,  4,  4,  4,  4,  4,  3,  2,  1,  0, -1, -2, -3];
	var0004 = var0000->get_object_position();
	var0005 = var0000 & var0004;
	var0006 = 0x0000;
	while (var0006 < 0x0024) {
		var0006 += 0x0001;
		var0007 = var0005[0x0002] + var0002[var0006];
		var0008 = var0005[0x0003] + var0003[var0006];
		var0009 = var0005[0x0004];
		var000A = [var0007, var0008, var0009];
		var000B = [var0007, var0008, (var0009 + 0x0001)];
		if (!UI_is_not_blocked(var000A, var0001, 0x0000)) {
			var000A = var000B;
		}
		if (UI_is_not_blocked(var000A, var0001, 0x0000)) {
			var000C = UI_create_new_object(var0001);
			if (var000C) {
				var000D = UI_die_roll(0x0000, 0x0005);
				var000C->set_item_frame(var000D);
				var000C->set_item_flag(TEMPORARY);
				var000E = UI_update_last_created(var000A);
			}
		} else {
			var000E = UI_update_last_created(FLAG_DESTROY);
		}
	}
}

var Func0999 0x999 (var var0000, var var0001, var var0002, var var0003, var var0004, var var0005, var var0006) {
	var var0007;
	var var0008;
	var var0009;
	var var000A;
	var var000B;

	if (var0004 == 0x0000) {
		var0007 = UI_input_numeric_value(0x0000, var0000, 0x0001, 0x0000);
	} else {
		var0007 = UI_input_numeric_value(var0003, var0000, 0x0001, 0x0000);
	}
	var0008 = 0x0000;
	var0009 = 0x0000;
	do {
		if (var0007 == var0000) {
			continue;
		}
		var0008 = var0000 - var0007;
		if (var0006 == 0x0001) {
			var0009 = 0x0005;
			var000A = var0000;
			break;
		}
		if (!var0006) {
			if (var0004 > (var0005 / 0x0002)) {
				if (UI_get_random(var0005 - var0004)) {
					var0006 = 0x0001;
					var0009 = 0x0004;
				}
			}
		}
		if (!var0009) {
			if (var0007 < (var0003 + ((var0008 * 0x0003) / 0x000A))) {
				if (var0007 < (var0003 + ((var0008 * 0x000F) / 0x0064))) {
					if (var0007 > var0001) {
						if (UI_get_random(0x0002) == 0x0001) {
							var0009 = 0x0001;
						}
					} else {
						var0009 = 0x0001;
					}
				}
				var0009 += 0x0004;
			} else if (var0008 < ((var0000 - var0003) / 0x0002)) {
				if (var0007 > var0001) {
					if (UI_get_random(0x0003) == 0x0001) {
						var0009 = 0x0001;
					} else {
						var0009 = 0x0002;
					}
				} else {
					var0009 = 0x0003;
				}
			} else if (var0007 == var0000) {
				var0009 = 0x0001;
			} else {
				var0009 = 0x0003;
			}
		}
	} while (false)
	nobreak {
		if (var0002 == 0x0001) {
			var000A = var0000 - (var0008 / 0x0002);
		}
		if (var0002 == 0x0002) {
			var000A = var0000 - (var0008 / 0x0003);
		}
		if (var0002 == 0x0003) {
			var000A = var0000 - (var0008 / 0x0004);
		}
		var000B = var0000 - var000A;
		var000A = var0000 - ((var000B * (0x0050 + UI_get_random(0x0028))) / 0x0064);
		if (var000A >= var0000) {
			var000A -= 0x0001;
		}
		if (var000A <= var0007) {
			var000A = var0007;
			var0009 = 0x0001;
		}
		if (var000A <= var0001) {
			var000A = var0001;
			var0006 = 0x0001;
			var0009 = 0x0004;
		}
	}
	return [var0007, var000A, var0009, var0006];
}

var Func099A 0x99A (var var0000, var var0001) {
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;

	var0002 = 0x0001;
	var0003 = [];
	for (var0006 in var0000 with var0004 to var0005) {
		if (var0002 != var0001) {
			var0003 &= var0006;
		}
		var0002 += 0x0001;
	}
	return var0003;
}

extern var Func0977 0x977 (var var0000);
extern var Func099A 0x99A (var var0000, var var0001);
extern void Func094E 0x94E (var var0000, var var0001);

var Func099B 0x99B (var var0000, var var0001, var var0002, var var0003, var var0004, var var0005, var var0006) {
	var var0007;
	var var0008;
	var var0009;

	var0007 = var0000->add_cont_items(var0001, var0002, var0003, var0004, var0005);
	if (var0007 == 0x0000) {
		return [0x0000, 0x0000];
	}
	var0007 = UI_add_party_items(var0007, var0002, var0003, var0004, var0005);
	var0003 = var0001;
	if (!var0006) {
		return var0007;
	}
	var0004 = Func0977(var0007);
	var0001 = var0007[var0004];
	var0005 = Func099A(var0007, var0004);
	if (var0005) {
		if (var0003 == 0x0001) {
			say("\"Thou art so encumbered! Perhaps one of thy friends might be willing to carry this?\"");
		} else {
			say("\"Thou art so encumbered! Let me give some of this to thy friends.\"");
		}
		for (var0002 in var0005 with var0008 to var0009) {
			Func094E(var0002->get_npc_number(), "@I'll help carry it.@");
			0x0000->set_conversation_slot();
		}
	}
	if (var0001 > 0x0000) {
		if (var0003 == 0x0001) {
			say("\"Since thou art so encumbered, I shall set this upon the ground.\"");
		} else if (var0001 == 0x0001) {
			say("\"Since not one of you can hold another, I shall place this last remaining one upon the ground.\"");
		} else {
			say("\"Since thou art so encumbered, I shall place the remaining ",
				var0001,
				" of these upon the ground.\"");
		}
	}
	return var0007;
}

void Func099C 0x99C (var var0000) {
	var var0001;
	var var0002;

	var0001 = PARTY->count_objects(var0000, QUALITY_ANY, FRAME_ANY);
	var0002 = UI_remove_party_items(var0001, var0000, QUALITY_ANY, FRAME_ANY, true);
}

var Func099D 0x99D (var var0000) {
	var var0001;

	var0001 = var0000->get_container();
	while (!(var0001 == AVATAR->get_npc_object())) {
		var0001 = var0001->get_container();
		if (!var0001) {
			return 0x0000;
		}
	}
	return var0001;
}

var Func099E 0x99E (var var0000) {
	var var0001;
	var var0002;

	var0001 = var0000->get_container();
	var0002 = var0001;
	while (var0001) {
		var0002 = var0001;
		var0001 = var0001->get_container();
	}
	return var0002;
}

var Func099F 0x99F (var var0000, var var0001, var var0002) {
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;
	var var0008;

	var0003 = UI_get_party_list();
	for (var0006 in var0003 with var0004 to var0005) {
		var0007 = var0006->get_cont_items(var0000, var0001, var0002);
		if (var0007) {
			var0008 = [var0007, var0006];
			return var0008;
		}
	}
	return 0x0000;
}

var Func09A0 0x9A0 (var var0000, var var0001) {
	var var0002;
	var var0003;

	if (((var0000 < 0x0000) || (var0000 > 0x0007)) || ((var0001 < 0x0001) || (var0001 > 0x0004))) {
		return false;
	}
	if ((var0000 == 0x0000) || (var0000 == 0x0001)) {
		var0002 = ((var0000 * 0x0002) + 0x0017) + var0001;
		var0003 = AVATAR->get_cont_items(0x025F, QUALITY_ANY, var0002);
		if (var0003 < 0x0008) {
			UI_error_message(["WARNING! GimmePathEgg returning ref = ", var0003]);
		}
		return var0003;
	}
	var0002 = ((var0000 * 0x0004) + var0001) - 0x0001;
	var0003 = AVATAR->get_cont_items(0x025F, QUALITY_ANY, var0002);
	if (var0003 < 0x0008) {
		UI_error_message(["WARNING! GimmePathEgg returning ref = ", var0003]);
	}
	return var0003;
}

extern void Func09A2 0x9A2 (var var0000, var var0001);

var Func09A1 0x9A1 (var var0000) {
	var var0001;
	var var0002;

	var0001 = UI_create_new_object2(var0000, [0x0000, 0x0000, 0x0000]);
	if (!(var0001 == 0x0000)) {
		var0001->set_schedule_type(IN_COMBAT);
		var0001->set_oppressor(AVATAR->get_npc_object());
		var0001->set_alignment(CHAOTIC);
		var0002 = var0001->approach_avatar(0x0032, 0x0028);
		if (!var0002) {
			Func09A2(var0001, AVATAR);
		}
	}
	return var0001;
}

void Func09A2 0x9A2 (var var0000, var var0001) {
	var var0002;
	var var0003;

	var0002 = var0001->get_object_position();
	var0003 = [(var0002[0x0001] + UI_die_roll(-5, 5)), (var0002[0x0002] + UI_die_roll(-5, 5)), var0002[0x0003]];
	var0000->move_object(var0003);
}

void Func09A3 0x9A3 (var var0000) {
	var var0001;
	var var0002;
	var var0003;
	var var0004;

	while (true) {
		var0001 = var0000->get_cont_items(SHAPE_ANY, QUALITY_ANY, FRAME_ANY);
		if (!var0001) {
			break;
		}
		for (var0004 in var0001 with var0002 to var0003) {
			var0004->remove_item();
		} nobreak {
			continue;
		}
		break;
	}
	var0000->remove_item();
}

void Func09A4 0x9A4 (var var0000) {
	var var0001;
	var var0002;
	var var0003;
	var var0004;

	while (true) {
		var0001 = var0000->get_cont_items(SHAPE_ANY, QUALITY_ANY, FRAME_ANY);
		if (!var0001) {
			break;
		}
		for (var0004 in var0001 with var0002 to var0003) {
			var0004->remove_item();
		}
	}
}

extern void Func060F object#(0x60F) ();

void Func09A5 0x9A5 () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;

	var0000 = AVATAR->find_nearby(0x01E9, 0x0050, MASK_ALL_UNSEEN);
	for (var0003 in var0000 with var0001 to var0002) {
		var0003->Func060F();
	}
	var0004 = UI_get_party_list();
	for (var0007 in var0004 with var0005 to var0006) {
		var0007->Func060F();
	}
}

var Func09A6 0x9A6 (var var0000) {
	if (var0000->get_item_shape() in [0x01E6, 0x020A, 0x0320, 0x0321, 0x0322, 0x0323, 0x0324, 0x0333, 0x0129, 0x0196, 0x0197, 0x011B, 0x01A0, 0x02A7, 0x0190, 0x019E, 0x030A, 0x037C, 0x02FA, 0x01FB, 0x0195, 0x022B, 0x02F3]) {
		return true;
	}
	return false;
}

var Func09A7 0x9A7 (var var0000, var var0001) {
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;

	var0002 = 0x0000;
	var0003 = [];
	for (var0006 in var0001 with var0004 to var0005) {
		var0002 += 0x0001;
		if (var0002 != var0000) {
			var0003 = [var0003, var0006];
		}
	}
	return var0003;
}

var Func09A8 0x9A8 (var var0000, var var0001) {
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;

	var0002 = [];
	var0003 = 0x0000;
	for (var0006 in var0001 with var0004 to var0005) {
		var0003 += 0x0001;
		if (var0006 == var0000) {
			var0002 = [var0002, var0003];
		}
	}
	return var0002;
}

extern var Func09A8 0x9A8 (var var0000, var var0001);
extern var Func095F 0x95F (var var0000, var var0001);

var Func09A9 0x9A9 (var var0000, var var0001, var var0002) {
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;
	var var0008;

	var0003 = Func09A8(var0000[0x0001], var0001);
	var0004 = Func09A8(var0000[0x0002], var0002);
	var0005 = [];
	if (var0003) {
		for (var0008 in var0003 with var0006 to var0007) {
			if (Func095F(var0008, var0004)) {
				var0005 = [var0005, var0008];
			}
		}
		return var0005;
	}
	return [];
}

void Func09AA 0x9AA () {
	AVATAR->clear_item_flag(DONT_MOVE);
	UI_init_conversation();
}

var Func09AB 0x9AB (var var0000, var var0001, var var0002, var var0003, var var0004) {
	var var0005;
	var var0006;

	var0005 = UI_create_new_object(var0000);
	if (!var0005) {
		return false;
	}
	var0005->set_item_frame(var0001);
	if (!var0005->set_item_quality(var0002)) {
		if (!var0005->set_item_quantity(var0002)) {
			return false;
		}
	}
	if (var0003) {
		var0005->set_item_flag(TEMPORARY);
	} else {
		var0005->clear_item_flag(TEMPORARY);
	}
	if (UI_get_array_size(var0004) == 0x0003) {
		if (!UI_update_last_created(var0004)) {
			return false;
		}
	} else {
		var0006 = var0004[0x0001]->get_object_position();
		if (!UI_update_last_created(var0006)) {
			return false;
		}
	}
	return var0005;
}

extern var Func098D 0x98D ();

void Func09AC 0x9AC (var var0000, var var0001, var var0002, var var0003) {
	var var0004;
	var var0005;

	var0004 = false;
	do {
		if (var0001 < 0x0000) {
			var0004 = var0000->get_object_position();
			if (var0004[0x0003] == 0x0000) {
				var0001 = var0004[0x0001];
				var0002 = var0004[0x0002];
			} else {
				var0000->set_item_frame(0x0000);
				var0000->set_schedule_type(WAIT);
				var0005 = Func098D();
				if (var0000 in var0005) {
					var0000->set_new_schedules(MIDNIGHT, EAT_AT_INN, [0x097C, 0x0464]);
				}
				break;
			}
		}
		var0000->set_new_schedules(MIDNIGHT, var0003, [var0001, var0002]);
		if (!var0004) {
			var0000->move_object([var0001, var0002, 0x0000]);
		}
		var0000->run_schedule();
	} while (false);
	var0004 = false;
}

void Func09AD 0x9AD (var var0000) {
	var0000->set_alignment(EVIL);
	var0000->set_schedule_type(IN_COMBAT);
	var0000->set_opponent(AVATAR);
	var0000->set_oppressor(AVATAR);
}

extern void Func094E 0x94E (var var0000, var var0001);
extern void Func097F 0x97F (var var0000, var var0001, var var0002);

var Func09AE 0x9AE (var var0000) {
	var0000 -= 0x0001;
	if (var0000 < 0x0000) {
		if (item == JENDON->get_npc_object()) {
			gflags[ASKED_JENDON_TOO_MUCH] = true;
			if (JENDON->get_schedule_type() == WAITER) {
				Func094E(OLON, "@I need a drink...@");
				0x0000->set_conversation_slot();
				say("\"I've enjoyed jawin' with ye, mate, but I'd better be back to me duties...\"");
				Func097F(JENDON, "@What'll ye have?@", 0x0000);
			}
			if (JENDON->get_schedule_type() == MAJOR_SIT) {
				if (KYLISTA->npc_nearby()) {
					Func094E(KYLISTA, "@Be still! Beauty is not irreverent.@");
					0x0000->set_conversation_slot();
				}
				say("\"This isn't the place for a long talk, mate. Meet me later, back at the tavern, and we'll talk more.\"");
				Func097F(JENDON, "@Not now...@", 0x0000);
			}
			if (JENDON->get_schedule_type() == SLEEP) {
				say("\"Better we talk in the morning, mate. As for right now, I'm goin' back to sleep...\"");
				Func097F(JENDON, "@Time for bed!@", 0x0000);
			}
		}
		if (item == BUCIA->get_npc_object()) {
			Func097F(BUCIA, "@Have a nice day!@", 0x0000);
			gflags[ASKED_BUCIA_TOO_MUCH] = true;
			if (BUCIA->get_schedule_type() == TEND_SHOP) {
				Func094E(FLINDO, "@I do not pay thee to stand jabbering, Bucia.@");
				0x0000->set_conversation_slot();
				say("\"I must be getting back to work now. But it hath been nice talking with thee.\"");
				if (BUCIA->get_npc_id() < 0x000F) {
					say("\"If thou wert to be at the Blue Boar Inn at 10 tonight, I could discuss these things further with thee...\"");
					gflags[GOT_DATE_WITH_BUCIA] = true;
				}
			} else {
				say("\"It is getting late! I have truly enjoyed our talk, but I think I shall eat my dinner now.\"");
			}
		}
		if (item == HARNNA->get_npc_object()) {
			gflags[ASKED_HARNNA_TOO_MUCH] = true;
			if (gflags[WILL_FIND_CANTRA] && (!gflags[CURED_CANTRA])) {
				Func097F(HARNNA, "@Remember Cantra...@", 0x0000);
			} else {
				Func097F(HARNNA, "@Courage to thee!@", 0x0000);
			}
			if (HARNNA->get_schedule_type() == FARM) {
				say("\"I must return to my duties. These crops will not wait!\"");
			}
			if (HARNNA->get_schedule_type() == EAT) {
				say("\"Pardon me, but my dinner is wasting. We can talk again later.\"");
			}
			if (HARNNA->get_schedule_type() == SLEEP) {
				say("\"I must get some sleep! Thou shouldst return tomorrow...\"");
			}
		}
		if (item == 0x03B2->get_npc_object()) {
			gflags[ASKED_SUROK_TOO_MUCH] = true;
			if (0x03B2->get_schedule_type() == LAB) {
				say("\"I must return to my duties...\"");
			}
			if (0x03B2->get_schedule_type() == EAT) {
				say("\"I am sorry, but my dinner is waiting. We can talk again later.\"");
			}
			if (0x03B2->get_schedule_type() == SLEEP) {
				say("\"I need rest! Return tomorrow...\"");
			}
		}
		UI_set_timer(0x0002);
		abort;
	}
	return var0000;
}

void Func09AF 0x9AF (var var0000, var var0001, var var0002, var var0003) {
	var var0004;

	var0004 = script var0001 {
		nohalt;
		wait 2;
		actor frame bowing;
		call Func07D2;
		wait 2;
		call var0003;
	};
	var0004 = script var0000 {
		nohalt;
		face var0002;
		actor frame bowing;
		actor frame sitting;
	};
}

extern var Func0994 0x994 ();
extern void Func09B1 0x9B1 ();

void Func09B0 0x9B0 (var var0000) {
	var var0001;

	if (var0000 == 0x0001) {
		var0001 = Func0994();
		UI_play_music(0x003B, 0x0000);
		say("\"Long ago, there lived a maid As fair as a summer morn.\"");
		UI_play_music(0x003E, 0x0000);
		say("\"She loved a King, a noble king, Who left her all forlorn.\"");
		UI_play_music(0x003D, 0x0000);
		say("\"He pledged his heart and sailed away Never to return again.\"");
		UI_play_music(0x003C, 0x0000);
		say("\"Her heart did break and fade away Into the icy northern wind.\"");
		UI_play_music(0x003D, 0x0000);
		gflags[HEARD_BEATRIX_SONG] = true;
		if ((!(item == IOLO->get_npc_object())) && (var0001 != 0x001F)) {
			Func09B1();
		}
	}
	if (var0000 == 0x0002) {
		var0001 = Func0994();
		UI_play_music(0x003E, 0x0000);
		say("\"I will tell thee a tale of vaulting ambition laid low by the hands of time.\"");
		UI_play_music(0x003C, 0x0000);
		say("\"Far away, near where the sun doth rise, there once a mountain stood.\"");
		UI_play_music(0x003B, 0x0000);
		say("\"It called itself the pinnacle of earth, until the earthquakes came.\"");
		UI_play_music(0x003D, 0x0000);
		say("\"And now that mountain, tried by fire and ice, lies crushed beneath another's dream.\"");
		UI_play_music(0x003E, 0x0000);
		gflags[HEARD_MOUNTAIN_SONG] = true;
		if ((!(item == IOLO->get_npc_object())) && (var0001 != 0x001F)) {
			Func09B1();
		}
	}
	if (var0000 == 0x0003) {
		var0001 = Func0994();
		UI_play_music(0x003C, 0x0000);
		say("\"Far away, in the cold white north, There lives a vicious band.\"");
		UI_play_music(0x003E, 0x0000);
		say("\"With soft grey fur, they walk about On two legs just like men.\"");
		UI_play_music(0x003C, 0x0000);
		say("\"Do not fool thyself to think that they Might be a pretty robe.\"");
		UI_play_music(0x003E, 0x0000);
		say("\"For if thou dost go a-hunting them, Thou shalt never return home again.\"");
		UI_play_music(0x003C, 0x0000);
		gflags[HEARD_GWANI_SONG] = true;
		if ((!(item == IOLO->get_npc_object())) && (var0001 != 0x001F)) {
			Func09B1();
		}
	}
	if (var0000 == 0x0004) {
		var0001 = Func0994();
		UI_play_music(0x003D, 0x0000);
		say("\"Within the great wide forest, Hard on the snow and ice, There dwells a man called the Forest Master Who rules both plant and beast.\"");
		UI_play_music(0x003B, 0x0000);
		say("\"His power, by cruel thieves, One day from him was stolen. And now the one great tree doth wilt Without his tender care.\"");
		UI_play_music(0x003E, 0x0000);
		say("\"So if thou dost seek favors, From the Forest Master fierce, Thou shouldst be prepared to return to him The Orb of Elerion.\"");
		UI_play_music(0x003C, 0x0000);
		gflags[HEARD_FOREST_MASTER_SONG] = true;
		if ((!(item == IOLO->get_npc_object())) && (var0001 != 0x001F)) {
			Func09B1();
		}
	}
	if (var0000 == 0x0005) {
		var0001 = Func0994();
		UI_play_music(0x003B, 0x0000);
		say("\"Walk carefully when thou art dreaming. Never stray too far. For there is one who is waiting To trap thy very soul.\"");
		UI_play_music(0x003D, 0x0000);
		say("\"See the balance slipping In the fight between ill and good. Thou shalt walk the beam To find the treasure thou seekest.\"");
		UI_play_music(0x003B, 0x0000);
		gflags[HEARD_DREAM_SONG] = true;
		if ((!(item == IOLO->get_npc_object())) && (var0001 != 0x001F)) {
			Func09B1();
		}
	}
	if (var0000 == 0x0006) {
		var0001 = Func0994();
		UI_play_music(0x003E, 0x0000);
		say("\"Once this land was ruled by kings, One old, one young, but friends true.\"");
		UI_play_music(0x003D, 0x0000);
		say("\"Then one day, the young king sailed away, And the old king lost his mind.\"");
		UI_play_music(0x003B, 0x0000);
		say("\"Plagued by goblins and treachery vile, The old king went too far.\"");
		UI_play_music(0x003C, 0x0000);
		say("\"He killed those he would protect, And threw himself from the White Dragon tower.\"");
		UI_play_music(0x003E, 0x0000);
		gflags[HEARD_WHITE_DRAGON_SONG] = true;
		if ((!(item == IOLO->get_npc_object())) && (var0001 != 0x001F)) {
			Func09B1();
		}
	}
}

extern var Func0954 0x954 ();
extern var Func0956 0x956 (var var0000);

void Func09B1 0x9B1 () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;

	var0000 = Func0954();
	say("\"If thou didst enjoy my song, I would appreciate a small contribution to my room and board.\"");
	var0001 = Func0956(["Nothing", "Monetari", "Guilders", "Filari", "Gold Coins"]);
	if (var0001 == "Monetari") {
		var0002 = 0x03B7;
	}
	if (var0001 == "Guilders") {
		var0002 = 0x03B8;
	}
	if (var0001 == "Filari") {
		var0002 = 0x03B4;
	}
	if (var0001 == "Gold Coins") {
		var0002 = 0x0284;
	}
	if (var0001 == "Nothing") {
		var0002 = 0x0284;
	}
	var0003 = PARTY->count_objects(var0002, QUALITY_ANY, FRAME_ANY);
	if (var0001 != "Nothing") {
		if (var0003 != 0x0000) {
			var0004 = UI_input_numeric_value(0x0000, var0003, 0x0001, 0x0000);
			if (var0004 >= 0x0001) {
				var0005 = UI_remove_party_items(var0004, var0002, QUALITY_ANY, FRAME_ANY, false);
				say("\"Many thanks, ",
					var0000,
					". Perhaps thou wouldst care to hear another song. Or, if thou art tired, I can return later...\"");
				add(["song", "bye"]);
			} else {
				say("\"Perhaps some other time...\"");
				abort;
			}
		} else {
			say("\"I am afraid thy purse is empty of ",
				var0001,
				", ",
				var0000,
				".\"");
		}
	} else {
		say("\"Very well... then I shall play no more.\"");
		abort;
	}
}

void Func09B2 0x9B2 () {
	var var0000;

	var0000 = 0x0406 + ((BLONDE_AVATAR - UI_get_skin_colour()) * 0x0002);
	if (UI_is_pc_female()) {
		AVATAR->set_polymorph(var0000 + 0x0001);
	} else {
		AVATAR->set_polymorph(var0000);
	}
}

extern var Func099B 0x99B (var var0000, var var0001, var var0002, var var0003, var var0004, var var0005, var var0006);
extern var Func0977 0x977 (var var0000);

var Func09B3 0x9B3 (var var0000) {
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;

	var0001 = [false, 0x0000];
	var0002 = var0000->get_cont_items(SHAPE_ANY, QUALITY_ANY, FRAME_ANY);
	for (var0005 in var0002 with var0003 to var0004) {
		if (!((var0005->get_item_shape() == 0x0128) && (var0005->get_item_frame() == 0x0002))) {
			var0006 = Func099B(AVATAR, var0005->get_item_quantity(0x0000), var0005->get_item_shape(), var0005->get_item_quality(), var0005->get_item_frame(), var0005->get_item_flag(TEMPORARY), false);
			if (var0001[0x0001] == 0x0000) {
				var0001[0x0001] = var0006[0x0001];
			}
			var0001[0x0002] += var0006[Func0977(var0006)];
			var0005->remove_item();
		}
	}
	return var0001;
}

extern var Func0956 0x956 (var var0000);
extern void Func09AC 0x9AC (var var0000, var var0001, var var0002, var var0003);

void Func09B4 0x9B4 (var var0000) {
	var var0001;
	var var0002;

	var0001 = var0000->get_object_position();
	if (var0001[0x0003] != 0x0000) {
		if (var0000 == GWENNO) {
			var0000->set_schedule_type(WAIT);
			say("\"We must plan for every eventuality, Avatar. Should I not be able to remain here, I shall await thee on Monk Isle.\"");
			var0000->set_new_schedules(MIDNIGHT, DESK_WORK, [0x0977, 0x048C]);
			abort;
		}
		if (var0000 == PETRA) {
			var0000->set_schedule_type(WAIT);
			say("\"If I cannot remain here, I shall go home to the inn. Thou canst always find me there.\"");
			PETRA->revert_schedule();
			abort;
		}
		var0000->set_schedule_type(WAIT);
		say("\"I shall attempt to wait for thee here, but if I cannot, where shall we meet?\"");
		var0002 = "Monk Isle";
		if (gflags[HAWK_IN_MOONSHADE]) {
			if (gflags[ZHELKAS_OPENED_ENTRANCE]) {
				var0002 &= "Fawn" & ("Monitor" & "Moonshade");
			} else {
				var0002 &= "Moonshade";
			}
		} else {
			if (gflags[THOXA_SPOKE_COMPANIONS]) {
				var0002 &= "Monitor";
			}
			if (RUGGS->get_item_flag(MET)) {
				var0002 &= "Fawn";
			}
		}
		var0001 = Func0956(var0002);
		if (var0001 == "Monitor") {
			say("\"Then in an emergency, I shall find thee at the Town Hall in Monitor.\"");
			var0000->set_new_schedules(MIDNIGHT, WANDER, [0x03D0, 0x09FA]);
		} else if (var0001 == "Moonshade") {
			say("\"If I cannot remain here, we shall meet at the Blue Boar Inn in Moonshade.\"");
			var0000->set_new_schedules(MIDNIGHT, EAT_AT_INN, [0x08C1, 0x0710]);
		} else if (var0001 == "Fawn") {
			say("\"If I cannot stay here, I shall travel to Fawn. We can meet at the tavern there.\"");
			var0000->set_new_schedules(MIDNIGHT, EAT_AT_INN, [0x03AD, 0x06E2]);
		} else {
			say("\"Let us meet at the abbey on Monk Isle, should I be forced to wander from this spot. No doubt Thoxa can fetch me there.\"");
			var0000->set_new_schedules(MIDNIGHT, EAT_AT_INN, [0x097C, 0x0464]);
		}
	} else {
		Func09AC(var0000, -1, 0, WANDER);
	}
}

extern void Func09B6 0x9B6 (var var0000, var var0001);

void Func09B5 0x9B5 () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;

	var0000 = 0x01EF;
	var0001 = [0x0B97, 0x0020, 0x0000];
	if ((!gflags[BANES_RELEASED]) && (!gflags[DID_SPINEBREAKER_VISION])) {
		if (!gflags[DOING_SPINEBREAKER_VISION]) {
			var0002 = [0x0931, 0x0190, 0x0000];
			DEADEYE->set_new_schedules(MIDNIGHT, WAIT, var0002);
			DEADEYE->set_schedule_type(WAIT);
			DEADEYE->move_object(var0002);
			var0003 = [0x092B, 0x017E, 0x0000];
			BRUNT->set_new_schedules(MIDNIGHT, WAIT, var0003);
			BRUNT->set_schedule_type(WAIT);
			BRUNT->move_object(var0003);
			var0004 = [0x0921, 0x0176, 0x0000];
			var0005 = UI_create_new_object2(0x0373, var0004);
			var0005->set_npc_id(0x0002);
			var0005->set_schedule_type(WAIT);
		}
		gflags[DOING_SPINEBREAKER_VISION] = true;
		var0000 = 0x013E;
		var0001 = [0x0927, 0x01AD, 0x0000];
	}
	if (gflags[BANES_RELEASED] && ((!gflags[DID_ANTI_SHAMINO_VISION]) && (!(gflags[ANARCHY_BANE_DEAD] || (gflags[INSANITY_BANE_DEAD] || gflags[WANTONNESS_BANE_DEAD]))))) {
		gflags[DOING_ANTI_SHAMINO_VISION] = true;
		var0000 = ANTI_SHAM;
		var0001 = [0x09D9, 0x004E, 0x0000];
		var0006 = [0x09AC, 0x006E, 0x0000];
		ANTI_IOLO->set_schedule_type(WAIT);
		ANTI_IOLO->move_object(var0006);
		var0007 = [0x099F, 0x0073, 0x0000];
		ANTI_DUPRE->set_schedule_type(WAIT);
		ANTI_DUPRE->move_object(var0007);
	}
	Func09B6(var0000, var0001);
}

extern void Func07D1 object#(0x7D1) ();

void Func09B6 0x9B6 (var var0000, var var0001) {
	var var0002;

	if ((event == DOUBLECLICK) || ((event == SI_PATH_SUCCESS) || (event == SI_PATH_FAILURE))) {
		if (gflags[USING_FAR_SIGHT_MAGIC]) {
			abort;
		}
		gflags[USING_FAR_SIGHT_MAGIC] = true;
		item->Func07D1();
		obj_sprite_effect(ANIMATION_PURPLE_BUBBLES, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, LOOP_ONCE);
		var0002 = script item after 10 ticks {
			nohalt;
			call Func0207;
		};
	}
	if (event == SCRIPTED) {
		if (var0000 == 0x01EF) {
			var0000 = UI_create_new_object2(var0000, var0001);
			var0000->set_item_flag(TEMPORARY);
			var0000->set_polymorph(0x00EF);
			gflags[FAR_SIGHT_CAMERA_RESET] = true;
		} else if (var0000 == 0x013E) {
			var0000 = UI_create_new_object2(0x013E, var0001);
			var0000->set_item_flag(TEMPORARY);
		} else {
			var0000->move_object(var0001);
			if (var0000 != ANTI_SHAM) {
				var0000->set_new_schedules(MIDNIGHT, PATROL, [var0001[0x0001], var0001[0x0002]]);
			}
		}
		var0000->set_schedule_type(PATROL);
		var0000->set_camera();
		UI_end_conversation();
		AVATAR->set_item_flag(DONT_MOVE);
		UI_fade_palette(0x000C, 0x0001, 0x0000);
		UI_ambient_light(0x0000);
	}
}

void Func09B7 0x9B7 () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;
	var var0008;
	var var0009;

	var0000 = [GOBLIN_24, GOBLIN_23, GOBLIN_22, GOBLIN_21, GOBLIN_19];
	var0001 = 0x0000;
	for (var0004 in var0000 with var0002 to var0003) {
		var0001 += var0004->get_item_flag(DEAD);
	}
	if (var0001 == (UI_get_array_size(var0000) - 0x0001)) {
		gflags[CLEARED_FAWN_TOWER] = true;
		var0005 = "@Damn thee!@";
	} else {
		var0005 = "@Grok...@";
	}
	var0006 = get_object_position();
	set_item_flag(DEAD);
	remove_npc();
	var0007 = UI_create_new_object(0x019E);
	if (var0007) {
		var0007->set_item_frame(0x0004);
		var0007->set_item_flag(TEMPORARY);
		var0008 = var0007->add_cont_items(0x0001, 0x024B, 0x0000, 0x0006, true);
		var0008 = var0007->add_cont_items(0x0001, 0x0344, 0x0000, 0x0000, true);
		var0009 = UI_die_roll(0x0001, 0x0009);
		if (var0009 > 0x0005) {
			var0008 = var0007->add_cont_items(0x0001, 0x025D, 0x0000, 0x0000, true);
			var0008 = var0007->add_cont_items(var0009, 0x0179, 0x0000, UI_die_roll(0x0001, 0x0008), true);
		} else {
			var0008 = var0007->add_cont_items(0x0001, 0x0268, 0x0004, 0x0006, true);
			var0008 = var0007->add_cont_items(var0009, 0x0250, 0x0000, 0x0000, true);
		}
		var0008 = UI_update_last_created(var0006);
	}
	if (var0007 && var0008) {
		var0008 = script var0007 {
			nohalt;
			say var0005;
		};
	}
}

void Func09B8 0x9B8 () {
	if (!gflags[INSANITY_BANE_DEAD]) {
		ANTI_IOLO->move_object([0x0995, 0x006E, 0x0002]);
		ANTI_IOLO->set_alignment(NEUTRAL);
		ANTI_IOLO->set_schedule_type(MAJOR_SIT);
	}
	if (!gflags[WANTONNESS_BANE_DEAD]) {
		ANTI_DUPRE->move_object([0x0999, 0x0075, 0x0001]);
		ANTI_DUPRE->set_alignment(NEUTRAL);
		ANTI_DUPRE->set_schedule_type(MAJOR_SIT);
	}
	if (!gflags[ANARCHY_BANE_DEAD]) {
		ANTI_SHAM->move_object([0x0999, 0x0069, 0x0001]);
		ANTI_SHAM->set_alignment(NEUTRAL);
		ANTI_SHAM->set_schedule_type(MAJOR_SIT);
	}
}

var Func09B9 0x9B9 (var var0000, var var0001) {
	var var0002;

	if (var0000 == 0x099F) {
		if (UI_die_roll(0x0000, 0x0001) == 0x0000) {
			var0000 += 0x0001;
		} else {
			var0000 -= 0x0001;
		}
	}
	if (var0001 == 0x006F) {
		if (UI_die_roll(0x0000, 0x0001) == 0x0000) {
			var0001 += 0x0001;
		} else {
			var0001 -= 0x0001;
		}
	}
	var0002 = [var0000, var0001, 0x0000];
	return var0002;
}

var Func09BA 0x9BA () {
	if (gflags[WANTONNESS_BANE_DEAD] || (gflags[ANARCHY_BANE_DEAD] || gflags[INSANITY_BANE_DEAD])) {
		return true;
	}
	return false;
}

extern void Func090D 0x90D (var var0000, var var0001, var var0002, var var0003, var var0004, var var0005, var var0006);
extern var Func089D 0x89D (var var0000);
extern void Func09BE 0x9BE (var var0000, var var0001);

void Func09BB 0x9BB (var var0000, var var0001) {
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;
	var var0008;

	if (var0001 == 0x0001) {
		if (var0000->in_usecode()) {
			return;
		}
		Func090D(var0000, -2, -2, -1, Func0631, var0000, PATH_SUCCESS);
	}
	if (var0001 == 0x0002) {
		var0002 = get_item_quality();
		var0003 = find_nearby(0x0366, 0x000F, MASK_NONE);
		var0004 = find_nearby(0x0203, 0x000F, MASK_NONE);
		var0003 &= var0004;
		var0004 = [];
		for (var0007 in var0003 with var0005 to var0006) {
			if (var0007->get_item_quality() == var0002) {
				var0004 &= var0007;
			}
		}
		if (Func089D(var0004)) {
			var0008 = script item {
				frame 1;
				repeat 4 {
					next frame cycle;
				};
			};
			return;
		}
		Func09BE(item, false);
	}
}

extern var Func0908 0x908 (var var0000, var var0001, var var0002, var var0003, var var0004, var var0005);

void Func09BC 0x9BC (var var0000) {
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;

	var0001 = var0000->find_nearby(0x0178, 0x0014, MASK_NONE);
	for (var0004 in var0001 with var0002 to var0003) {
		var0005 = Func0908(var0004, 0x010E, 0x0002, 0x0000, 0x0000, 0x0007);
	}
}

extern var Func0908 0x908 (var var0000, var var0001, var var0002, var var0003, var var0004, var var0005);

void Func09BD 0x9BD (var var0000) {
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;

	var0001 = var0000->find_nearby(0x010E, 0x0014, MASK_NONE);
	for (var0004 in var0001 with var0002 to var0003) {
		var0005 = Func0908(var0004, 0x0178, 0x0001, 0x0000, 0x0000, 0x0007);
	}
}

extern var Func0920 0x920 ();
extern var Func0992 0x992 (var var0000, var var0001, var var0002, var var0003);
extern void Func09BC 0x9BC (var var0000);
extern void Func09BD 0x9BD (var var0000);
extern var Func0942 0x942 (var var0000);

void Func09BE 0x9BE (var var0000, var var0001) {
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;
	var var0008;
	var var0009;
	var var000A;
	var var000B;
	var var000C;
	var var000D;
	var var000E;
	var var000F;

	var0002 = UI_find_nearby_avatar(0x010F) & UI_find_nearby_avatar(0x0110);
	var0003 = false;
	for (var0006 in var0002 with var0004 to var0005) {
		if (var0006->get_item_quality() == var0000->get_item_quality()) {
			var0007 = Func0920();
			var0007 = script var0000 {
				frame 1;
				repeat 6 {
					next frame cycle;
				};
			};
			var0003 = true;
		}
	}
	if (!var0003) {
		var0008 = var0000->get_item_quality();
		if ((var0008 >= 0x00C8) && (var0008 <= 0x00CC)) {
			var0003 = true;
			var0007 = script var0000 {
				frame 1;
				repeat 6 {
					next frame cycle;
				};
			};
			if (var0008 == 0x00C8) {
				var0009 = script AVATAR after 10 ticks {
					nohalt;
					say "@Nothing is happening.@";
				};
				var000A = Func0992(0x0001, 0x0000, 0x0000, false);
				if (var000A != AVATAR) {
					var0009 = script var000A after 15 ticks {
						nohalt;
						say "@Perhaps it requires something.@";
					};
				}
			}
			if (var0008 == 0x00C9) {
				var0009 = var0000->set_item_quality(0x00CA);
				UI_set_weather(RAIN);
				var000A = Func0992(0x0001, 0x0000, 0x0000, false);
				if (var000A != AVATAR) {
					var0009 = script var000A after 10 ticks {
						nohalt;
						say "@The sky doth threaten rain.@";
					};
				}
				var0009 = script AVATAR after 20 ticks {
					nohalt;
					say "@Even as Gustacio said.@";
				};
				Func09BC(var0000);
			}
			if (var0008 == 0x00CA) {
				if (gflags[SEEN_RED_LIGHTNING] && (gflags[SEEN_YELLOW_LIGHTNING] && gflags[SEEN_GREEN_LIGHTNING])) {
					var000B = var0000->find_nearby(0x01C2, 0x0014, MASK_NONE);
					for (var000E in var000B with var000C to var000D) {
						if (var000E->get_item_frame() == 0x0002) {
							var000F = var000E->get_object_position();
							UI_sprite_effect(ANIMATION_BIG_BLAST, (var000F[0x0001] - 0x0006), (var000F[0x0002] - 0x0006), 0x0000, 0x0000, 0x0000, LOOP_ONCE);
							UI_play_sound_effect(0x0029);
							var000E->remove_item();
							gflags[FINISHED_LIGHTNING_EXPERIMENT] = true;
						}
					}
					var0009 = var0000->set_item_quality(0x00C8);
					var0009 = script AVATAR after 10 ticks {
						nohalt;
						call Func07EF;
					};
				} else {
					UI_set_weather(CLEAR_WEATHER);
					var0009 = var0000->set_item_quality(0x00C9);
				}
				Func09BD(var0000);
			}
			if (var0008 == 0x00CB) {
				var0009 = var0000->set_item_quality(0x00CC);
				UI_set_weather(RAIN);
				if (Func0942(IOLO)) {
					var0009 = script IOLO after 10 ticks {
						nohalt;
						say "It doth storm again!";
					};
				}
				if (Func0942(SHAMINO)) {
					var0009 = script SHAMINO after 20 ticks {
						nohalt;
						say "I should have brought a kite.";
					};
				}
				Func09BC(var0000);
			}
			if (var0008 == 0x00CC) {
				UI_set_weather(CLEAR_WEATHER);
				var0009 = var0000->set_item_quality(0x00CB);
				Func09BD(var0000);
			}
		}
	}
	if (var0003 && var0001) {
		var0007 = script AVATAR {
			face west;
			continue;
			repeat 4 {
				actor frame bowing;
				actor frame standing;
			};
		};
	}
}

extern var Func09A0 0x9A0 (var var0000, var var0001);

void Func09BF 0x9BF () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;

	var0000 = [0x009A, 0x066C, 0x0000];
	var0001 = UI_die_roll(0x0001, 0x0006);
	var0002 = UI_die_roll(0x0001, 0x0006);
	var0000[0x0001] += var0001;
	var0000[0x0002] += var0002;
	UI_sprite_effect(ANIMATION_PURPLE_BUBBLES, var0000[0x0001], var0000[0x0002], 0x0000, 0x0000, 0x0000, LOOP_ONCE);
	UI_play_sound_effect(0x0082);
	var0003 = UI_create_new_object(0x0200);
	if (var0003) {
		var0004 = UI_update_last_created(var0000);
	}
	var0005 = Func09A0(0x0004, 0x0002);
	var0006 = var0005->set_item_quality(0x0000);
	if (!var0004) {
		UI_error_message("error, somebody stepped on the worm!-ewb");
	}
}

extern void Func097F 0x97F (var var0000, var var0001, var var0002);
extern var Func09A0 0x9A0 (var var0000, var var0001);

void Func09C0 0x9C0 (var var0000) {
	var var0001;
	var var0002;
	var var0003;
	var var0004;

	gflags[KILLED_FIRST_WORM] = true;
	if (var0000 == 0x0001) {
		var0001 = script CLONE_DUPRE {
			nohalt;
			call Func04B4;
		};
	}
	if (gflags[KILLED_FIRST_WORM] && (var0000 == 0x0004)) {
		gflags[KILLED_FOUR_WORMS] = true;
		var0001 = script CLONE_DUPRE {
			nohalt;
			call Func04B4;
		};
	}
	if (gflags[KILLED_FOUR_WORMS] && (var0000 == 0x0007)) {
		gflags[KILLED_SEVEN_WORMS] = true;
		var0001 = script CLONE_DUPRE {
			nohalt;
			call Func04B4;
		};
	}
	if ((gflags[KILLED_SEVEN_WORMS] == true) && (var0000 == 0x0009)) {
		gflags[KILLED_NINE_WORMS] = true;
		var0001 = script CLONE_DUPRE {
			nohalt;
			call Func04B4;
		};
	}
	if (gflags[KILLED_NINE_WORMS] && (var0000 == 0x000A)) {
		gflags[PASSED_WORM_TEST] = true;
		var0001 = script CLONE_DUPRE {
			nohalt;
			call Func04B4;
		};
	}
	if ((var0000 > 0x0002) && (var0000 < 0x000A)) {
		var0002 = ["@These Worms are pitiful.@", "@Die, Worm! Die!@", "@Killing Worms can be boring.@", "@I'm not giving up!@", "@Begone, vile red wiggler!@", "@At least 'tis quiet in here...@"];
		var0003 = UI_die_roll(0x0001, 0x0006);
		Func097F(AVATAR, var0002[var0003], 0x000C);
		if ((var0003 == 0x0006) && (var0000 < 0x0007)) {
			var0004 = Func09A0(0x0000, 0x0001);
			var0001 = script var0004 after 25 ticks {
				// Bug: the next line should probably be 'music 12', but it
				// lacks the continuous flag.
				// It works because it seems that original pulls zeroes from
				// after the end of the script.
				raw((byte)0x54); raw(0x000C);
			};
			Func097F(AVATAR, "@Aarrrgh!@", 0x0028);
			Func097F(AVATAR, "@A TRUE test of patience.@", 0x0037);
		}
	}
}

void Func09C1 0x9C1 () {
	var var0000;
	var var0001;
	var var0002;
	var var0003;
	var var0004;
	var var0005;
	var var0006;
	var var0007;
	var var0008;
	var var0009;
	var var000A;

	var0000 = find_nearby(0x020A, 0x0028, MASK_ALL_UNSEEN);
	var0001 = UI_get_array_size(var0000);
	if (var0001 > 0x0000) {
		var0002 = [0x02C7, 0x025C, 0x03B7, 0x03B8, 0x03A9, 0x025D, 0x025E, 0x022C, 0x022A, 0x0225, 0x0228, 0x0275, 0x0276, 0x0288];
		var0003 = [0x0000, 0x0000, 0x00FA, 0x00FA, 0x0000, 0x0000, 0x0000, 0x00C8, 0x00C8, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000];
		var0004 = [0x0000, 0x000A, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x00FF, 0x00FF, 0x0000];
		var0005 = 0x0000;
		for (var0008 in var0002 with var0006 to var0007) {
			var0005 += 0x0001;
			var0009 = UI_create_new_object(var0008);
			if (var0009) {
				var000A = var0009->set_item_quality(var0004[var0005]);
				var000A = var0009->set_item_quantity(var0003[var0005]);
				var000A = var0000[UI_die_roll(0x0001, var0001)]->give_last_created();
			}
		}
	}
}
